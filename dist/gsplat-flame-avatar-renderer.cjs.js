'use strict';

var THREE = require('three');
var GLTFLoader_js = require('three/examples/jsm/loaders/GLTFLoader.js');
var JSZip = require('jszip');
var OrbitControls_js = require('three/examples/jsm/controls/OrbitControls.js');

function _interopNamespaceDefault(e) {
    var n = Object.create(null);
    if (e) {
        Object.keys(e).forEach(function (k) {
            if (k !== 'default') {
                var d = Object.getOwnPropertyDescriptor(e, k);
                Object.defineProperty(n, k, d.get ? d : {
                    enumerable: true,
                    get: function () { return e[k]; }
                });
            }
        });
    }
    n.default = e;
    return Object.freeze(n);
}

var THREE__namespace = /*#__PURE__*/_interopNamespaceDefault(THREE);

/**
 * Log level enumeration for controlling verbosity
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const LogLevel = {
    None: 0,
    Error: 1,
    Warning: 2,
    Info: 3,
    Debug: 4
};

/**
 * Render mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const RenderMode = {
    Always: 0,
    OnChange: 1,
    Never: 2
};

/**
 * Scene format enumeration for supported file types
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar usage - only PLY format is supported.
 */
const SceneFormat = {
    'Ply': 0
};

/**
 * Determine scene format from file path
 * @param {string} path - File path
 * @returns {number|null} Scene format or null if unknown
 */
const sceneFormatFromPath = (path) => {
    if (path.endsWith('.ply')) return SceneFormat.Ply;
    return null;
};

/**
 * Scene reveal mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const SceneRevealMode = {
    Default: 0,
    Gradual: 1,
    Instant: 2
};

/**
 * Splat render mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const SplatRenderMode = {
    ThreeD: 0,
    TwoD: 1
};

/**
 * EngineConstants
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Core constants for Gaussian Splat rendering.
 */

let Constants$1 = class Constants {
    static DefaultSplatSortDistanceMapPrecision = 16;
    static MemoryPageSize = 65536;
    static BytesPerFloat = 4;
    static BytesPerInt = 4;
    static MaxScenes = 32;
    static ProgressiveLoadSectionSize = 262144;
    static ProgressiveLoadSectionDelayDuration = 15;
    static SphericalHarmonics8BitCompressionRange = 3;
};

const DefaultSphericalHarmonics8BitCompressionRange = Constants$1.SphericalHarmonics8BitCompressionRange;

// SplatMesh constants
const COVARIANCES_ELEMENTS_PER_SPLAT$1 = 6;
const CENTER_COLORS_ELEMENTS_PER_SPLAT$1 = 4;

const COVARIANCES_ELEMENTS_PER_TEXEL_STORED$1 = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED$1 = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED$1 = 6;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED$1 = 8;
const SCALES_ROTATIONS_ELEMENTS_PER_TEXEL$1 = 4;
const CENTER_COLORS_ELEMENTS_PER_TEXEL$1 = 4;
const SCENE_INDEXES_ELEMENTS_PER_TEXEL$1 = 1;

const SCENE_FADEIN_RATE_FAST$1 = 0.012;
const SCENE_FADEIN_RATE_GRADUAL$1 = 0.003;

// Viewer constants
const THREE_CAMERA_FOV = 50;
const MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT = 0.5;
const CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION = 60;
const MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER = 1500000;
const FOCUS_MARKER_FADE_IN_SPEED = 0.4;
const FOCUS_MARKER_FADE_OUT_SPEED = 0.12;

// Internal load types for loaders
const InternalLoadType = {
    DirectToSplatBuffer: 0,
    DirectToSplatArray: 1,
    DownloadBeforeProcessing: 2
};

// Loader status
const LoaderStatus = {
    'Downloading': 0,
    'Processing': 1,
    'Done': 2
};

/**
 * LoaderUtils
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Loader utilities for decoding text and resolving URLs.
 */

class LoaderUtils {

    /**
     * @deprecated Use TextDecoder instead
     */
    static decodeText(array) {
        if (typeof TextDecoder !== 'undefined') {
            return new TextDecoder().decode(array);
        }

        // Fallback for environments without TextDecoder
        let s = '';

        for (let i = 0, il = array.length; i < il; i++) {
            // Implicitly assumes little-endian.
            s += String.fromCharCode(array[i]);
        }

        try {
            // merges multi-byte utf-8 characters.
            return decodeURIComponent(escape(s));
        } catch {
            // see #16358 - ignore decoding errors
            return s;
        }
    }

    static extractUrlBase(url) {
        const index = url.lastIndexOf('/');

        if (index === -1) return './';

        return url.slice(0, index + 1);
    }

    static resolveURL(url, path) {
        // Invalid URL
        if (typeof url !== 'string' || url === '') return '';

        // Host Relative URL
        if (/^https?:\/\//i.test(path) && /^\//.test(url)) {
            path = path.replace(/(^https?:\/\/[^/]+).*/i, '$1');
        }

        // Absolute URL http://,https://,//
        if (/^(https?:)?\/\//i.test(url)) return url;

        // Data URI
        if (/^data:.*,.*$/i.test(url)) return url;

        // Blob URL
        if (/^blob:.*$/i.test(url)) return url;

        // Relative URL
        return path + url;
    }
}

/**
 * ApplicationError - Base error class for all application errors
 *
 * Provides structured error handling with error codes and cause tracking.
 * All domain-specific errors should extend this class.
 *
 * @extends Error
 */
class ApplicationError extends Error {
    /**
     * Create an ApplicationError
     * @param {string} message - Human-readable error message
     * @param {string} code - Machine-readable error code for programmatic handling
     * @param {Error} [cause=null] - Original error that caused this error (for error chaining)
     */
    constructor(message, code, cause = null) {
        super(message);
        this.name = this.constructor.name;
        this.code = code;
        this.cause = cause;

        // Capture stack trace, excluding constructor call from it
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
        }
    }

    /**
     * Convert error to JSON for logging/transmission
     * @returns {object} JSON representation of error
     */
    toJSON() {
        return {
            name: this.name,
            message: this.message,
            code: this.code,
            stack: this.stack,
            cause: this.cause ? {
                name: this.cause.name,
                message: this.cause.message
            } : null
        };
    }
}

/**
 * ValidationError - Thrown when input validation fails
 *
 * Used for invalid parameters, out-of-range values, or malformed data.
 *
 * @extends ApplicationError
 */
class ValidationError extends ApplicationError {
    /**
     * Create a ValidationError
     * @param {string} message - Validation failure description
     * @param {string} field - Name of the field that failed validation
     * @param {Error} [cause=null] - Original error that caused this validation failure
     */
    constructor(message, field, cause = null) {
        super(message, 'VALIDATION_ERROR', cause);
        this.field = field;
    }
}

/**
 * NetworkError - Thrown when network operations fail
 *
 * Used for fetch failures, timeouts, or HTTP error responses.
 *
 * @extends ApplicationError
 */
class NetworkError extends ApplicationError {
    /**
     * Create a NetworkError
     * @param {string} message - Network error description
     * @param {number} [statusCode=0] - HTTP status code (if applicable)
     * @param {Error} [cause=null] - Original error that caused this network failure
     */
    constructor(message, statusCode = 0, cause = null) {
        super(message, 'NETWORK_ERROR', cause);
        this.statusCode = statusCode;
    }
}

/**
 * AssetLoadError - Thrown when asset loading fails
 *
 * Used for failures loading models, textures, or other asset files.
 *
 * @extends ApplicationError
 */
class AssetLoadError extends ApplicationError {
    /**
     * Create an AssetLoadError
     * @param {string} message - Asset load failure description
     * @param {string} assetPath - Path to the asset that failed to load
     * @param {Error} [cause=null] - Original error that caused this load failure
     */
    constructor(message, assetPath, cause = null) {
        super(message, 'ASSET_LOAD_ERROR', cause);
        this.assetPath = assetPath;
    }
}

/**
 * ResourceDisposedError - Thrown when attempting to use a disposed resource
 *
 * Used to prevent use-after-dispose bugs.
 *
 * @extends ApplicationError
 */
class ResourceDisposedError extends ApplicationError {
    /**
     * Create a ResourceDisposedError
     * @param {string} resourceName - Name of the disposed resource
     */
    constructor(resourceName) {
        super(
            `Cannot use ${resourceName}: resource has been disposed`,
            'RESOURCE_DISPOSED_ERROR'
        );
        this.resourceName = resourceName;
    }
}

/**
 * InitializationError - Thrown when initialization fails
 *
 * Used when required setup steps fail or prerequisites are not met.
 *
 * @extends ApplicationError
 */
class InitializationError extends ApplicationError {
    /**
     * Create an InitializationError
     * @param {string} message - Initialization failure description
     * @param {string} component - Name of component that failed to initialize
     * @param {Error} [cause=null] - Original error that caused this initialization failure
     */
    constructor(message, component, cause = null) {
        super(message, 'INITIALIZATION_ERROR', cause);
        this.component = component;
    }
}

/**
 * ParseError - Thrown when parsing data fails
 *
 * Used for malformed file formats, invalid JSON, or corrupt data.
 *
 * @extends ApplicationError
 */
let ParseError$1 = class ParseError extends ApplicationError {
    /**
     * Create a ParseError
     * @param {string} message - Parse failure description
     * @param {string} dataType - Type of data being parsed (e.g., 'JSON', 'PLY', 'GLB')
     * @param {Error} [cause=null] - Original error that caused this parse failure
     */
    constructor(message, dataType, cause = null) {
        super(message, 'PARSE_ERROR', cause);
        this.dataType = dataType;
    }
};

/**
 * Logger - Structured logging system
 *
 * Provides leveled logging with optional output suppression for production.
 * Replaces direct console.log calls for better control and debugging.
 */

/**
 * Logger levels in order of severity
 * Note: Named LoggerLevel to avoid conflict with existing LogLevel enum
 */
const LoggerLevel = Object.freeze({
    DEBUG: 0,
    INFO: 1,
    WARN: 2,
    ERROR: 3,
    NONE: 4
});

/**
 * Logger class for structured application logging
 */
class Logger {
    /**
     * Create a Logger instance
     * @param {string} namespace - Logger namespace (e.g., 'Renderer', 'Loader')
     * @param {number} [minLevel=LoggerLevel.INFO] - Minimum log level to output
     */
    constructor(namespace, minLevel = LoggerLevel.INFO) {
        this.namespace = namespace;
        this.minLevel = minLevel;
    }

    /**
     * Set minimum log level
     * @param {number} level - Minimum level from LoggerLevel enum
     */
    setLevel(level) {
        this.minLevel = level;
    }

    /**
     * Format log message with namespace and timestamp
     * @private
     * @param {string} level - Log level name
     * @param {Array} args - Log arguments
     * @returns {Array} Formatted arguments
     */
    _format(level, args) {
        const timestamp = new Date().toISOString();
        const prefix = `[${timestamp}] [${level}] [${this.namespace}]`;
        return [prefix, ...args];
    }

    /**
     * Log debug message (most verbose)
     * @param {...*} args - Arguments to log
     */
    debug(...args) {
        if (this.minLevel <= LoggerLevel.DEBUG) {
            console.debug(...this._format('DEBUG', args));
        }
    }

    /**
     * Log info message
     * @param {...*} args - Arguments to log
     */
    info(...args) {
        if (this.minLevel <= LoggerLevel.INFO) {
            console.info(...this._format('INFO', args));
        }
    }

    /**
     * Log warning message
     * @param {...*} args - Arguments to log
     */
    warn(...args) {
        if (this.minLevel <= LoggerLevel.WARN) {
            console.warn(...this._format('WARN', args));
        }
    }

    /**
     * Log error message
     * @param {...*} args - Arguments to log
     */
    error(...args) {
        if (this.minLevel <= LoggerLevel.ERROR) {
            console.error(...this._format('ERROR', args));
        }
    }

    /**
     * Log error with stack trace
     * @param {Error} error - Error object
     * @param {string} [context] - Additional context
     */
    errorWithTrace(error, context = '') {
        if (this.minLevel <= LoggerLevel.ERROR) {
            const contextStr = context ? ` Context: ${context}` : '';
            console.error(...this._format('ERROR', [
                `${error.message}${contextStr}`,
                '\nStack:', error.stack
            ]));
        }
    }

    /**
     * Create a child logger with extended namespace
     * @param {string} childNamespace - Child namespace to append
     * @returns {Logger} New logger with combined namespace
     */
    child(childNamespace) {
        return new Logger(`${this.namespace}:${childNamespace}`, this.minLevel);
    }
}

/**
 * Global logger registry
 * @private
 */
const loggers = new Map();

/**
 * Global log level (affects all new loggers)
 * @private
 */
let globalLogLevel = LoggerLevel.INFO;

/**
 * Set global log level for all loggers
 * @param {number} level - Log level from LoggerLevel enum
 */
function setGlobalLogLevel(level) {
    globalLogLevel = level;
    // Update existing loggers
    for (const logger of loggers.values()) {
        logger.setLevel(level);
    }
}

/**
 * Get or create a logger for a namespace
 * @param {string} namespace - Logger namespace
 * @returns {Logger} Logger instance
 */
function getLogger(namespace) {
    if (!loggers.has(namespace)) {
        loggers.set(namespace, new Logger(namespace, globalLogLevel));
    }
    return loggers.get(namespace);
}

/**
 * Configure logging for production (suppress all logs)
 */
function configureForProduction() {
    setGlobalLogLevel(LoggerLevel.NONE);
}

/**
 * Configure logging for development (show all logs)
 */
function configureForDevelopment() {
    setGlobalLogLevel(LoggerLevel.DEBUG);
}

// Export default logger for convenience
getLogger('App');

/**
 * Core utility functions for Gaussian Splat rendering
 *
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 *
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const logger$9 = getLogger('Util');

/**
 * Custom error for aborted operations
 * @deprecated Use NetworkError instead for consistency
 */
class AbortedPromiseError extends Error {
    constructor(msg) {
        super(msg);
        this.name = 'AbortedPromiseError';
        this.code = 'ABORTED';
    }
}

/**
 * Fetch with progress tracking using standard AbortController
 *
 * @param {string} path - URL to fetch
 * @param {Function} [onProgress] - Progress callback (percent, percentLabel, chunk, fileSize)
 * @param {boolean} [saveChunks=true] - Whether to save and return downloaded chunks
 * @param {object} [headers] - Optional HTTP headers
 * @returns {Promise<ArrayBuffer>} Promise that resolves with downloaded data
 * @throws {NetworkError} If fetch fails or is aborted
 */
const fetchWithProgress = function(path, onProgress, saveChunks = true, headers) {

    const abortController = new AbortController();
    const signal = abortController.signal;
    let aborted = false;

    let onProgressCalledAtComplete = false;
    const localOnProgress = (percent, percentLabel, chunk, fileSize) => {
        if (onProgress && !onProgressCalledAtComplete) {
            try {
                onProgress(percent, percentLabel, chunk, fileSize);
                if (percent === 100) {
                    onProgressCalledAtComplete = true;
                }
            } catch (error) {
                // Don't let progress callback errors break the download
                logger$9.error('Error in progress callback:', error);
            }
        }
    };

    const promise = new Promise((resolve, reject) => {
        const fetchOptions = { signal };
        if (headers) fetchOptions.headers = headers;

        fetch(path, fetchOptions)
        .then(async (data) => {
            // Handle HTTP error responses
            if (!data.ok) {
                let errorText = '';
                try {
                    errorText = await data.text();
                } catch {
                    // Ignore if we can't read error text
                }
                reject(new NetworkError(
                    `Fetch failed: ${data.statusText}${errorText ? ' - ' + errorText : ''}`,
                    data.status
                ));
                return;
            }

            const reader = data.body?.getReader();
            if (!reader) {
                reject(new NetworkError('Response body is not readable', 0));
                return;
            }

            let bytesDownloaded = 0;
            const _fileSize = data.headers.get('Content-Length');
            const fileSize = _fileSize ? parseInt(_fileSize, 10) : undefined;

            const chunks = [];

            while (!aborted) {
                try {
                    const { value: chunk, done } = await reader.read();
                    if (done) {
                        localOnProgress(100, '100%', chunk, fileSize);
                        if (saveChunks) {
                            const buffer = new Blob(chunks).arrayBuffer();
                            resolve(buffer);
                        } else {
                            resolve();
                        }
                        break;
                    }
                    bytesDownloaded += chunk.length;
                    let percent;
                    let percentLabel;
                    if (fileSize !== undefined) {
                        percent = (bytesDownloaded / fileSize) * 100;
                        percentLabel = `${percent.toFixed(2)}%`;
                    }
                    if (saveChunks) {
                        chunks.push(chunk);
                    }
                    localOnProgress(percent, percentLabel, chunk, fileSize);
                } catch (error) {
                    reject(new NetworkError(
                        `Error reading response stream: ${error.message}`,
                        0,
                        error
                    ));
                    return;
                }
            }
        })
        .catch((error) => {
            // Don't wrap if already a NetworkError
            if (error instanceof NetworkError) {
                reject(error);
            } else if (error.name === 'AbortError') {
                reject(new NetworkError('Fetch aborted by user', 0, error));
            } else {
                reject(new NetworkError(
                    `Fetch failed: ${error.message || 'Unknown error'}`,
                    0,
                    error
                ));
            }
        });
    });

    // Attach abort functionality to the promise
    promise.abort = (reason) => {
        aborted = true;
        abortController.abort(reason);
    };
    promise.abortController = abortController;

    return promise;
};

// Clamp value between min and max
const clamp = function(val, min, max) {
    return Math.max(Math.min(val, max), min);
};

// Get current time in seconds
const getCurrentTime = function() {
    return performance.now() / 1000;
};

// Dispose all meshes in a scene graph
const disposeAllMeshes = (object3D) => {
    if (object3D.geometry) {
        object3D.geometry.dispose();
        object3D.geometry = null;
    }
    if (object3D.material) {
        object3D.material.dispose();
        object3D.material = null;
    }
    if (object3D.children) {
        for (let child of object3D.children) {
            disposeAllMeshes(child);
        }
    }
};

// Delayed execution helper
const delayedExecute = (func, fast) => {
    return new Promise((resolve) => {
        window.setTimeout(() => {
            resolve(func());
        }, fast ? 1 : 50);
    });
};

// Get spherical harmonics component count for degree
const getSphericalHarmonicsComponentCountForDegree = (sphericalHarmonicsDegree = 0) => {
    switch (sphericalHarmonicsDegree) {
        case 1:
            return 9;
        case 2:
            return 24;
    }
    return 0;
};

// Create native promise with extracted components
const nativePromiseWithExtractedComponents = () => {
    let resolver;
    let rejecter;
    const promise = new Promise((resolve, reject) => {
        resolver = resolve;
        rejecter = reject;
    });
    return {
        'promise': promise,
        'resolve': resolver,
        'reject': rejecter
    };
};

/**
 * Create a promise with extracted resolve/reject functions and optional abort capability
 * Uses standard Promise with attached abort method
 */
const abortablePromiseWithExtractedComponents = (abortHandler) => {
    let resolver;
    let rejecter;
    const promise = new Promise((resolve, reject) => {
        resolver = resolve;
        rejecter = reject;
    });
    
    // Attach abort method to promise
    promise.abort = abortHandler || (() => {});
    
    return {
        'promise': promise,
        'resolve': resolver,
        'reject': rejecter
    };
};

// Semver class for version handling
class Semver {
    constructor(major, minor, patch) {
        this.major = major;
        this.minor = minor;
        this.patch = patch;
    }

    toString() {
        return `${this.major}_${this.minor}_${this.patch}`;
    }
}

// iOS detection
function isIOS() {
    const ua = navigator.userAgent;
    return ua.indexOf('iPhone') > 0 || ua.indexOf('iPad') > 0;
}

function getIOSSemever() {
    if (isIOS()) {
        const extract = navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
        return new Semver(
            parseInt(extract[1] || 0, 10),
            parseInt(extract[2] || 0, 10),
            parseInt(extract[3] || 0, 10)
        );
    }
    return null;
}

// Half float conversion utilities
const toHalfFloat$1 = THREE.DataUtils.toHalfFloat.bind(THREE.DataUtils);
const fromHalfFloat$1 = THREE.DataUtils.fromHalfFloat.bind(THREE.DataUtils);
const DefaultSphericalHarmonics8BitCompressionHalfRange = DefaultSphericalHarmonics8BitCompressionRange / 2.0;

// Uncompress float based on compression level
const toUncompressedFloat$1 = (f, compressionLevel, isSH = false, range8BitMin, range8BitMax) => {
    if (compressionLevel === 0) {
        return f;
    } else if (compressionLevel === 1 || (compressionLevel === 2 && !isSH)) {
        return THREE.DataUtils.fromHalfFloat(f);
    } else if (compressionLevel === 2) {
        return fromUint8$1(f, range8BitMin, range8BitMax);
    }
};

// Convert to uint8
const toUint8$1 = (v, rangeMin, rangeMax) => {
    v = clamp(v, rangeMin, rangeMax);
    const range = (rangeMax - rangeMin);
    return clamp(Math.floor((v - rangeMin) / range * 255), 0, 255);
};

// Convert from uint8
const fromUint8$1 = (v, rangeMin, rangeMax) => {
    const range = (rangeMax - rangeMin);
    return (v / 255 * range + rangeMin);
};

// Half float to uint8
const fromHalfFloatToUint8$1 = (v, rangeMin, rangeMax) => {
    return toUint8$1(fromHalfFloat$1(v), rangeMin, rangeMax);
};

// Uint8 to half float
const fromUint8ToHalfFloat = (v, rangeMin, rangeMax) => {
    return toHalfFloat$1(fromUint8$1(v, rangeMin, rangeMax));
};

// Read float from DataView based on compression level
const dataViewFloatForCompressionLevel$1 = (dataView, floatIndex, compressionLevel, isSH = false) => {
    if (compressionLevel === 0) {
        return dataView.getFloat32(floatIndex * 4, true);
    } else if (compressionLevel === 1 || (compressionLevel === 2 && !isSH)) {
        return dataView.getUint16(floatIndex * 2, true);
    } else {
        return dataView.getUint8(floatIndex, true);
    }
};

// Convert between compression levels
const convertBetweenCompressionLevels = function() {
    const noop = (v) => v;

    return function(val, fromLevel, toLevel, isSH = false) {
        if (fromLevel === toLevel) return val;
        let outputConversionFunc = noop;

        if (fromLevel === 2 && isSH) {
            if (toLevel === 1) outputConversionFunc = fromUint8ToHalfFloat;
            else if (toLevel === 0) {
                outputConversionFunc = fromUint8$1;
            }
        } else if (fromLevel === 2 || fromLevel === 1) {
            if (toLevel === 0) outputConversionFunc = fromHalfFloat$1;
            else if (toLevel === 2) {
                if (!isSH) outputConversionFunc = noop;
                else outputConversionFunc = fromHalfFloatToUint8$1;
            }
        } else if (fromLevel === 0) {
            if (toLevel === 1) outputConversionFunc = toHalfFloat$1;
            else if (toLevel === 2) {
                if (!isSH) outputConversionFunc = toHalfFloat$1;
                else outputConversionFunc = toUint8$1;
            }
        }

        return outputConversionFunc(val);
    };
}();

// Copy between buffers
const copyBetweenBuffers$1 = (srcBuffer, srcOffset, destBuffer, destOffset, byteCount = 0) => {
    const src = new Uint8Array(srcBuffer, srcOffset);
    const dest = new Uint8Array(destBuffer, destOffset);
    for (let i = 0; i < byteCount; i++) {
        dest[i] = src[i];
    }
};

// Float to half float conversion
const floatToHalf = function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(val) {
        floatView[0] = val;
        const x = int32View[0];

        let bits = (x >> 16) & 0x8000;
        let m = (x >> 12) & 0x07ff;
        const e = (x >> 23) & 0xff;

        if (e < 103) return bits;

        if (e > 142) {
            bits |= 0x7c00;
            bits |= ((e == 255) ? 0 : 1) && (x & 0x007fffff);
            return bits;
        }

        if (e < 113) {
            m |= 0x0800;
            bits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);
            return bits;
        }

        bits |= ((e - 112) << 10) | (m >> 1);
        bits += m & 1;
        return bits;
    };
}();

// Encode float as uint
const uintEncodedFloat$1 = function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(f) {
        floatView[0] = f;
        return int32View[0];
    };
}();

// RGBA to integer
const rgbaToInteger = function(r, g, b, a) {
    return r + (g << 8) + (b << 16) + (a << 24);
};

// RGBA array to integer
const rgbaArrayToInteger = function(arr, offset) {
    return arr[offset] + (arr[offset + 1] << 8) + (arr[offset + 2] << 16) + (arr[offset + 3] << 24);
};

// BASE_COMPONENT_COUNT for UncompressedSplatArray
const BASE_COMPONENT_COUNT$1 = 14;

/**
 * ValidationUtils - Security-focused validation utilities
 *
 * CRITICAL: All external inputs MUST be validated before use.
 * This module provides allowlist-based validation following security best practices.
 */


/**
 * Allowed URL protocols (allowlist approach)
 */
const ALLOWED_PROTOCOLS = Object.freeze(['https:', 'http:', 'blob:', 'data:']);

/**
 * Validate and sanitize a URL
 *
 * @param {string} url - URL to validate
 * @param {string} [baseURL] - Base URL for relative URLs (defaults to window.location.href)
 * @returns {string} Sanitized absolute URL
 * @throws {ValidationError} If URL is invalid or uses disallowed protocol
 */
function validateUrl(url, baseURL) {
    if (typeof url !== 'string' || url.length === 0) {
        throw new ValidationError('URL must be a non-empty string', 'url');
    }

    let parsed;
    try {
        // Use base URL if provided, otherwise use window location (browser only)
        const base = baseURL || (typeof window !== 'undefined' ? window.location.href : undefined);
        parsed = new URL(url, base);
    } catch (error) {
        throw new ValidationError(
            `Invalid URL format: ${url}`,
            'url',
            error
        );
    }

    // Validate protocol against allowlist
    if (!ALLOWED_PROTOCOLS.includes(parsed.protocol)) {
        throw new ValidationError(
            `Disallowed protocol: ${parsed.protocol}. Allowed protocols: ${ALLOWED_PROTOCOLS.join(', ')}`,
            'url.protocol'
        );
    }

    return parsed.href;
}

/**
 * Validate asset path to prevent path traversal attacks
 *
 * @param {string} path - File path to validate
 * @returns {string} Validated path
 * @throws {ValidationError} If path contains traversal sequences
 */
function validateAssetPath(path) {
    if (typeof path !== 'string' || path.length === 0) {
        throw new ValidationError('Asset path must be a non-empty string', 'path');
    }

    // Check for path traversal sequences
    const dangerousPatterns = ['../', '..\\', '%2e%2e/', '%2e%2e\\'];
    const normalizedPath = path.toLowerCase();

    for (const pattern of dangerousPatterns) {
        if (normalizedPath.includes(pattern)) {
            throw new ValidationError(
                `Path traversal detected in asset path: ${path}`,
                'path'
            );
        }
    }

    return path;
}

/**
 * Validate file extension against allowlist
 *
 * @param {string} filename - Filename to validate
 * @param {string[]} allowedExtensions - Array of allowed extensions (e.g., ['.ply', '.glb'])
 * @returns {string} Validated filename
 * @throws {ValidationError} If extension is not allowed
 */
function validateFileExtension(filename, allowedExtensions) {
    if (typeof filename !== 'string' || filename.length === 0) {
        throw new ValidationError('Filename must be a non-empty string', 'filename');
    }

    if (!Array.isArray(allowedExtensions) || allowedExtensions.length === 0) {
        throw new ValidationError(
            'allowedExtensions must be a non-empty array',
            'allowedExtensions'
        );
    }

    const extension = filename.slice(filename.lastIndexOf('.')).toLowerCase();
    const normalizedAllowed = allowedExtensions.map(ext => ext.toLowerCase());

    if (!normalizedAllowed.includes(extension)) {
        throw new ValidationError(
            `File extension ${extension} not allowed. Allowed: ${allowedExtensions.join(', ')}`,
            'filename'
        );
    }

    return filename;
}

/**
 * Validate numeric value is within range
 *
 * @param {number} value - Value to validate
 * @param {number} min - Minimum allowed value (inclusive)
 * @param {number} max - Maximum allowed value (inclusive)
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated value
 * @throws {ValidationError} If value is not a number or out of range
 */
function validateNumberInRange(value, min, max, fieldName) {
    if (typeof value !== 'number' || isNaN(value)) {
        throw new ValidationError(
            `${fieldName} must be a valid number`,
            fieldName
        );
    }

    if (value < min || value > max) {
        throw new ValidationError(
            `${fieldName} must be between ${min} and ${max}, got ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate integer value
 *
 * @param {number} value - Value to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated integer
 * @throws {ValidationError} If value is not an integer
 */
function validateInteger(value, fieldName) {
    if (typeof value !== 'number' || !Number.isInteger(value)) {
        throw new ValidationError(
            `${fieldName} must be an integer`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate positive integer
 *
 * @param {number} value - Value to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated positive integer
 * @throws {ValidationError} If value is not a positive integer
 */
function validatePositiveInteger(value, fieldName) {
    validateInteger(value, fieldName);

    if (value <= 0) {
        throw new ValidationError(
            `${fieldName} must be positive, got ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate object has required properties
 *
 * @param {object} obj - Object to validate
 * @param {string[]} requiredProps - Array of required property names
 * @param {string} objectName - Name of object for error messages
 * @returns {object} Validated object
 * @throws {ValidationError} If object is invalid or missing required properties
 */
function validateRequiredProperties(obj, requiredProps, objectName) {
    if (obj === null || typeof obj !== 'object') {
        throw new ValidationError(
            `${objectName} must be an object`,
            objectName
        );
    }

    for (const prop of requiredProps) {
        if (!(prop in obj) || obj[prop] === undefined) {
            throw new ValidationError(
                `${objectName} missing required property: ${prop}`,
                `${objectName}.${prop}`
            );
        }
    }

    return obj;
}

/**
 * Validate array buffer
 *
 * @param {ArrayBuffer} buffer - Buffer to validate
 * @param {string} fieldName - Name of field for error messages
 * @param {number} [minSize=0] - Minimum size in bytes
 * @returns {ArrayBuffer} Validated buffer
 * @throws {ValidationError} If buffer is invalid or too small
 */
function validateArrayBuffer(buffer, fieldName, minSize = 0) {
    if (!(buffer instanceof ArrayBuffer)) {
        throw new ValidationError(
            `${fieldName} must be an ArrayBuffer`,
            fieldName
        );
    }

    if (buffer.byteLength < minSize) {
        throw new ValidationError(
            `${fieldName} must be at least ${minSize} bytes, got ${buffer.byteLength}`,
            fieldName
        );
    }

    return buffer;
}

/**
 * Validate enum value against allowed values
 *
 * @param {*} value - Value to validate
 * @param {Array} allowedValues - Array of allowed values
 * @param {string} fieldName - Name of field for error messages
 * @returns {*} Validated value
 * @throws {ValidationError} If value is not in allowed values
 */
function validateEnum(value, allowedValues, fieldName) {
    if (!allowedValues.includes(value)) {
        throw new ValidationError(
            `${fieldName} must be one of: ${allowedValues.join(', ')}. Got: ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate callback function
 *
 * @param {Function} callback - Callback to validate
 * @param {string} fieldName - Name of field for error messages
 * @param {boolean} [required=true] - Whether callback is required
 * @returns {Function|null} Validated callback or null if not required and not provided
 * @throws {ValidationError} If callback is required but not a function
 */
function validateCallback(callback, fieldName, required = true) {
    if (callback === null || callback === undefined) {
        if (required) {
            throw new ValidationError(
                `${fieldName} is required`,
                fieldName
            );
        }
        return null;
    }

    if (typeof callback !== 'function') {
        throw new ValidationError(
            `${fieldName} must be a function`,
            fieldName
        );
    }

    return callback;
}

/**
 * Validate hex color string
 *
 * @param {string} value - Color string to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {string} Validated color string
 * @throws {ValidationError} If color format is invalid
 */
function validateHexColor(value, fieldName) {
    if (typeof value !== 'string') {
        throw new ValidationError(
            `${fieldName} must be a string`,
            fieldName
        );
    }

    const hexColorRegex = /^(#|0x)[0-9A-Fa-f]{6}$/i;
    if (!hexColorRegex.test(value)) {
        throw new ValidationError(
            `${fieldName} must be a valid hex color (e.g., #FFFFFF or 0xFFFFFF)`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate DOM element
 *
 * @param {HTMLElement} element - Element to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {HTMLElement} Validated element
 * @throws {ValidationError} If element is not a valid DOM element
 */
function validateDOMElement(element, fieldName) {
    if (typeof HTMLElement !== 'undefined' && !(element instanceof HTMLElement)) {
        throw new ValidationError(
            `${fieldName} must be a valid HTML element`,
            fieldName
        );
    }

    return element;
}

/**
 * ObjectPool - Memory-efficient object pooling
 *
 * Reduces garbage collection pressure by reusing objects instead of
 * repeatedly allocating and deallocating them. Critical for real-time rendering.
 */


/**
 * Generic object pool
 */
class ObjectPool {
    /**
     * Create an ObjectPool
     * @param {Function} factory - Function that creates new objects
     * @param {Function} reset - Function that resets an object to initial state
     * @param {number} [initialSize=10] - Number of objects to pre-allocate
     */
    constructor(factory, reset, initialSize = 10) {
        this._factory = factory;
        this._reset = reset;
        this._pool = [];
        this._allocated = 0;
        this._maxSize = initialSize * 10; // Prevent unbounded growth

        // Pre-allocate initial objects
        for (let i = 0; i < initialSize; i++) {
            this._pool.push(factory());
        }
    }

    /**
     * Acquire an object from the pool
     * @returns {*} Pooled object
     */
    acquire() {
        this._allocated++;
        if (this._pool.length > 0) {
            return this._pool.pop();
        }
        // Pool exhausted, create new object
        return this._factory();
    }

    /**
     * Release an object back to the pool
     * @param {*} obj - Object to return to pool
     */
    release(obj) {
        this._allocated--;
        if (this._pool.length < this._maxSize) {
            this._reset(obj);
            this._pool.push(obj);
        }
        // If pool is at max size, let object be garbage collected
    }

    /**
     * Release multiple objects
     * @param {Array} objects - Objects to return to pool
     */
    releaseAll(objects) {
        for (const obj of objects) {
            this.release(obj);
        }
    }

    /**
     * Get pool statistics
     * @returns {object} Pool stats
     */
    getStats() {
        return {
            available: this._pool.length,
            allocated: this._allocated,
            maxSize: this._maxSize
        };
    }

    /**
     * Clear the pool and release all objects
     */
    dispose() {
        this._pool.length = 0;
        this._allocated = 0;
    }
}

/**
 * Pre-configured pools for common Three.js objects
 */

/**
 * Vector3 pool
 * @type {ObjectPool}
 */
const vector3Pool = new ObjectPool(
    () => new THREE.Vector3(),
    (v) => v.set(0, 0, 0),
    50 // Pre-allocate 50 vectors
);

/**
 * Matrix4 pool
 * @type {ObjectPool}
 */
const matrix4Pool = new ObjectPool(
    () => new THREE.Matrix4(),
    (m) => m.identity(),
    20 // Pre-allocate 20 matrices
);

/**
 * Quaternion pool
 * @type {ObjectPool}
 */
const quaternionPool = new ObjectPool(
    () => new THREE.Quaternion(),
    (q) => q.set(0, 0, 0, 1),
    30 // Pre-allocate 30 quaternions
);

/**
 * Euler pool
 * @type {ObjectPool}
 */
const eulerPool = new ObjectPool(
    () => new THREE.Euler(),
    (e) => e.set(0, 0, 0),
    30 // Pre-allocate 30 eulers
);

/**
 * Scoped pool allocation helper
 *
 * Automatically releases pooled objects when scope exits.
 * Use with try/finally to ensure cleanup.
 *
 * @example
 * const scope = new PoolScope();
 * try {
 *   const v1 = scope.vector3();
 *   const v2 = scope.vector3();
 *   // Use vectors...
 * } finally {
 *   scope.releaseAll();
 * }
 */
class PoolScope {
    constructor() {
        this._allocated = [];
    }

    /**
     * Acquire a Vector3 from pool
     * @returns {Vector3} Pooled vector
     */
    vector3() {
        const obj = vector3Pool.acquire();
        this._allocated.push({ pool: vector3Pool, obj });
        return obj;
    }

    /**
     * Acquire a Matrix4 from pool
     * @returns {Matrix4} Pooled matrix
     */
    matrix4() {
        const obj = matrix4Pool.acquire();
        this._allocated.push({ pool: matrix4Pool, obj });
        return obj;
    }

    /**
     * Acquire a Quaternion from pool
     * @returns {Quaternion} Pooled quaternion
     */
    quaternion() {
        const obj = quaternionPool.acquire();
        this._allocated.push({ pool: quaternionPool, obj });
        return obj;
    }

    /**
     * Acquire an Euler from pool
     * @returns {Euler} Pooled euler
     */
    euler() {
        const obj = eulerPool.acquire();
        this._allocated.push({ pool: eulerPool, obj });
        return obj;
    }

    /**
     * Release all objects allocated in this scope
     */
    releaseAll() {
        for (const { pool, obj } of this._allocated) {
            pool.release(obj);
        }
        this._allocated.length = 0;
    }

    /**
     * Get count of allocated objects in this scope
     * @returns {number} Number of allocated objects
     */
    getAllocatedCount() {
        return this._allocated.length;
    }
}

/**
 * Module-level temporary objects for hot-path reuse
 * IMPORTANT: These are NOT thread-safe. Only use in single-threaded contexts.
 * Reset these before use to avoid stale data.
 */
const tempVector3A = new THREE.Vector3();
const tempVector3B = new THREE.Vector3();
const tempVector3C = new THREE.Vector3();
const tempMatrix4A = new THREE.Matrix4();
const tempMatrix4B = new THREE.Matrix4();
const tempQuaternionA = new THREE.Quaternion();
const tempQuaternionB = new THREE.Quaternion();

/**
 * Get pool statistics for all pre-configured pools
 * @returns {object} Statistics for all pools
 */
function getPoolStats() {
    return {
        vector3: vector3Pool.getStats(),
        matrix4: matrix4Pool.getStats(),
        quaternion: quaternionPool.getStats(),
        euler: eulerPool.getStats()
    };
}

/**
 * Dispose all pre-configured pools
 */
function disposeAllPools() {
    vector3Pool.dispose();
    matrix4Pool.dispose();
    quaternionPool.dispose();
    eulerPool.dispose();
}

/**
 * BlobUrlManager - Secure blob URL lifecycle management
 *
 * Tracks blob URLs and ensures they are revoked to prevent memory leaks
 * and unauthorized access. Critical for security and resource management.
 */


const logger$8 = getLogger('BlobUrlManager');

/**
 * BlobUrlManager - Manages blob URL lifecycle
 */
class BlobUrlManager {
    constructor() {
        /**
         * Map of blob URL to metadata
         * @private
         */
        this._urls = new Map();

        /**
         * Whether manager has been disposed
         * @private
         */
        this._disposed = false;
    }

    /**
     * Assert manager is not disposed
     * @private
     * @throws {Error} If manager is disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new Error('BlobUrlManager has been disposed');
        }
    }

    /**
     * Create a blob URL from data
     *
     * @param {Blob|ArrayBuffer|Uint8Array} data - Data to create blob from
     * @param {string} mimeType - MIME type (e.g., 'model/gltf-binary')
     * @param {string} [label] - Optional label for debugging
     * @returns {string} Blob URL
     * @throws {ValidationError} If data or mimeType is invalid
     */
    createBlobUrl(data, mimeType, label = '') {
        this._assertNotDisposed();

        // Validate mimeType
        if (typeof mimeType !== 'string' || mimeType.length === 0) {
            throw new ValidationError(
                'mimeType must be a non-empty string',
                'mimeType'
            );
        }

        // Convert data to Blob if needed
        let blob;
        if (data instanceof Blob) {
            blob = data;
        } else if (data instanceof ArrayBuffer || data instanceof Uint8Array) {
            blob = new Blob([data], { type: mimeType });
        } else {
            throw new ValidationError(
                'data must be Blob, ArrayBuffer, or Uint8Array',
                'data'
            );
        }

        // Create blob URL
        const url = URL.createObjectURL(blob);

        // Track metadata
        this._urls.set(url, {
            createdAt: Date.now(),
            mimeType,
            label: label || 'unlabeled',
            size: blob.size
        });

        logger$8.debug(`Created blob URL: ${label || url.substring(0, 50)}, size: ${blob.size} bytes`);

        return url;
    }

    /**
     * Register an externally created blob URL for tracking
     *
     * @param {string} url - Blob URL to track
     * @param {string} [label] - Optional label for debugging
     * @throws {ValidationError} If URL is not a blob URL
     */
    registerBlobUrl(url, label = '') {
        this._assertNotDisposed();

        if (typeof url !== 'string' || !url.startsWith('blob:')) {
            throw new ValidationError(
                'url must be a valid blob URL',
                'url'
            );
        }

        if (!this._urls.has(url)) {
            this._urls.set(url, {
                createdAt: Date.now(),
                mimeType: 'unknown',
                label: label || 'registered-external',
                size: 0
            });

            logger$8.debug(`Registered external blob URL: ${label || url.substring(0, 50)}`);
        }
    }

    /**
     * Revoke a blob URL and remove from tracking
     *
     * @param {string} url - Blob URL to revoke
     * @returns {boolean} True if URL was tracked and revoked
     */
    revokeBlobUrl(url) {
        this._assertNotDisposed();

        if (this._urls.has(url)) {
            const metadata = this._urls.get(url);
            URL.revokeObjectURL(url);
            this._urls.delete(url);

            logger$8.debug(`Revoked blob URL: ${metadata.label}, age: ${Date.now() - metadata.createdAt}ms`);
            return true;
        }

        return false;
    }

    /**
     * Revoke all blob URLs and clear tracking
     */
    revokeAll() {
        this._assertNotDisposed();

        logger$8.debug(`Revoking ${this._urls.size} blob URLs`);

        for (const url of this._urls.keys()) {
            URL.revokeObjectURL(url);
        }

        this._urls.clear();
    }

    /**
     * Get tracked blob URL metadata
     *
     * @param {string} url - Blob URL
     * @returns {object|null} Metadata or null if not tracked
     */
    getMetadata(url) {
        return this._urls.get(url) || null;
    }

    /**
     * Get all tracked blob URLs
     *
     * @returns {Array<{url: string, metadata: object}>} Array of URL info
     */
    getAllTrackedUrls() {
        const urls = [];
        for (const [url, metadata] of this._urls.entries()) {
            urls.push({ url, metadata });
        }
        return urls;
    }

    /**
     * Get statistics about tracked URLs
     *
     * @returns {object} Statistics
     */
    getStats() {
        let totalSize = 0;
        let oldestAge = 0;
        const now = Date.now();

        for (const metadata of this._urls.values()) {
            totalSize += metadata.size;
            const age = now - metadata.createdAt;
            if (age > oldestAge) {
                oldestAge = age;
            }
        }

        return {
            count: this._urls.size,
            totalSize,
            oldestAge
        };
    }

    /**
     * Revoke blob URLs older than specified age
     *
     * @param {number} maxAgeMs - Maximum age in milliseconds
     * @returns {number} Number of URLs revoked
     */
    revokeOlderThan(maxAgeMs) {
        this._assertNotDisposed();

        const now = Date.now();
        const toRevoke = [];

        for (const [url, metadata] of this._urls.entries()) {
            const age = now - metadata.createdAt;
            if (age > maxAgeMs) {
                toRevoke.push(url);
            }
        }

        for (const url of toRevoke) {
            this.revokeBlobUrl(url);
        }

        if (toRevoke.length > 0) {
            logger$8.info(`Revoked ${toRevoke.length} blob URLs older than ${maxAgeMs}ms`);
        }

        return toRevoke.length;
    }

    /**
     * Check if a URL is being tracked
     *
     * @param {string} url - URL to check
     * @returns {boolean} True if URL is tracked
     */
    isTracked(url) {
        return this._urls.has(url);
    }

    /**
     * Dispose manager and revoke all URLs
     */
    dispose() {
        if (this._disposed) {
            return;
        }

        logger$8.debug('Disposing BlobUrlManager');
        this.revokeAll();
        this._disposed = true;
    }
}

/**
 * Global blob URL manager instance
 * @type {BlobUrlManager}
 */
const globalBlobUrlManager = new BlobUrlManager();

/**
 * Get the global blob URL manager
 * @returns {BlobUrlManager} Global manager instance
 */
function getGlobalBlobUrlManager() {
    return globalBlobUrlManager;
}

/**
 * Helper function to create a blob URL with automatic tracking
 *
 * @param {Blob|ArrayBuffer|Uint8Array} data - Data to create blob from
 * @param {string} mimeType - MIME type
 * @param {string} [label] - Optional label for debugging
 * @returns {string} Blob URL
 */
function createTrackedBlobUrl(data, mimeType, label) {
    return globalBlobUrlManager.createBlobUrl(data, mimeType, label);
}

/**
 * Helper function to revoke a blob URL
 *
 * @param {string} url - Blob URL to revoke
 * @returns {boolean} True if URL was tracked and revoked
 */
function revokeTrackedBlobUrl(url) {
    return globalBlobUrlManager.revokeBlobUrl(url);
}

/**
 * RenderLoop - Frame-independent animation loop with budget management
 *
 * Provides a robust requestAnimationFrame loop with:
 * - Delta time calculation for frame-independent updates
 * - Frame budget management to prevent frame drops
 * - Deferred task execution
 * - Performance monitoring
 */


const logger$7 = getLogger('RenderLoop');

/**
 * RenderLoop - Manages animation frame loop
 */
class RenderLoop {
    /**
     * Create a RenderLoop
     * @param {Function} updateFn - Update function called each frame with deltaTime
     * @param {Function} renderFn - Render function called each frame
     * @param {object} [options] - Configuration options
     * @param {number} [options.targetFps=60] - Target frames per second
     * @param {number} [options.maxDeltaTime=0.1] - Maximum delta time in seconds (prevents spiral of death)
     */
    constructor(updateFn, renderFn, options = {}) {
        this._update = updateFn;
        this._render = renderFn;

        this._targetFps = options.targetFps || 60;
        this._maxDeltaTime = options.maxDeltaTime || 0.1; // 100ms max
        this._frameBudget = 1000 / this._targetFps; // ms per frame

        this._running = false;
        this._rafId = null;
        this._lastTime = 0;
        this._frameCount = 0;
        this._deferredTasks = [];

        // Performance tracking
        this._fpsHistory = [];
        this._fpsHistorySize = 60; // Track last 60 frames
        this._lastFpsUpdate = 0;
        this._currentFps = 0;
    }

    /**
     * Start the render loop
     */
    start() {
        if (this._running) {
            logger$7.warn('RenderLoop already running');
            return;
        }

        this._running = true;
        this._lastTime = performance.now();
        this._frameCount = 0;
        logger$7.info('RenderLoop started');

        this._tick();
    }

    /**
     * Stop the render loop
     */
    stop() {
        if (!this._running) {
            return;
        }

        this._running = false;

        if (this._rafId !== null) {
            cancelAnimationFrame(this._rafId);
            this._rafId = null;
        }

        logger$7.info(`RenderLoop stopped after ${this._frameCount} frames`);
    }

    /**
     * Main loop tick
     * @private
     */
    _tick = () => {
        if (!this._running) {
            return;
        }

        const frameStart = performance.now();
        const rawDeltaTime = (frameStart - this._lastTime) / 1000; // Convert to seconds

        // Clamp delta time to prevent spiral of death
        const deltaTime = Math.min(rawDeltaTime, this._maxDeltaTime);

        this._lastTime = frameStart;
        this._frameCount++;

        try {
            // Update logic
            this._update(deltaTime);

            // Render
            this._render();

            // Process deferred tasks if time permits
            const frameElapsed = performance.now() - frameStart;
            const remainingTime = this._frameBudget - frameElapsed;

            if (remainingTime > 1 && this._deferredTasks.length > 0) {
                this._processDeferredTasks(remainingTime - 1); // Leave 1ms margin
            }

            // Update FPS tracking
            this._updateFpsTracking(performance.now() - frameStart);

        } catch (error) {
            logger$7.error('Error in render loop:', error);
            // Continue loop despite error
        }

        // Schedule next frame
        this._rafId = requestAnimationFrame(this._tick);
    };

    /**
     * Update FPS tracking
     * @private
     * @param {number} frameTime - Time taken for this frame in ms
     */
    _updateFpsTracking(frameTime) {
        this._fpsHistory.push(1000 / frameTime);

        if (this._fpsHistory.length > this._fpsHistorySize) {
            this._fpsHistory.shift();
        }

        // Update FPS every second
        const now = performance.now();
        if (now - this._lastFpsUpdate > 1000) {
            this._currentFps = this._fpsHistory.reduce((a, b) => a + b, 0) / this._fpsHistory.length;
            this._lastFpsUpdate = now;
        }
    }

    /**
     * Process deferred tasks within time budget
     * @private
     * @param {number} maxTime - Maximum time in ms to spend on tasks
     */
    _processDeferredTasks(maxTime) {
        const startTime = performance.now();

        while (this._deferredTasks.length > 0) {
            if (performance.now() - startTime >= maxTime) {
                break;
            }

            const task = this._deferredTasks.shift();

            try {
                task.fn();
            } catch (error) {
                logger$7.error(`Error in deferred task: ${task.label}`, error);
            }
        }
    }

    /**
     * Execute task if within frame budget, otherwise defer
     *
     * @param {Function} task - Task function to execute
     * @param {number} [priority=0] - Task priority (higher = more important)
     * @param {string} [label=''] - Task label for debugging
     */
    executeOrDefer(task, priority = 0, label = '') {
        const frameElapsed = performance.now() - this._lastTime;

        if (frameElapsed < this._frameBudget * 0.8) {
            // Within budget, execute now
            task();
        } else {
            // Over budget, defer
            this._deferredTasks.push({ fn: task, priority, label });

            // Sort by priority (higher first)
            this._deferredTasks.sort((a, b) => b.priority - a.priority);
        }
    }

    /**
     * Get current FPS
     * @returns {number} Average FPS over recent frames
     */
    getFps() {
        return Math.round(this._currentFps);
    }

    /**
     * Get performance stats
     * @returns {object} Performance statistics
     */
    getStats() {
        return {
            fps: this.getFps(),
            frameCount: this._frameCount,
            deferredTaskCount: this._deferredTasks.length,
            running: this._running
        };
    }

    /**
     * Check if loop is running
     * @returns {boolean} True if running
     */
    isRunning() {
        return this._running;
    }

    /**
     * Get frame count
     * @returns {number} Total frames rendered
     */
    getFrameCount() {
        return this._frameCount;
    }

    /**
     * Clear all deferred tasks
     */
    clearDeferredTasks() {
        this._deferredTasks.length = 0;
        logger$7.debug('Cleared all deferred tasks');
    }
}

/**
 * FrameBudgetMonitor - Monitors and alerts on frame budget violations
 */
class FrameBudgetMonitor {
    /**
     * Create a FrameBudgetMonitor
     * @param {number} [targetFps=60] - Target FPS
     * @param {Function} [onViolation] - Callback when budget is violated
     */
    constructor(targetFps = 60, onViolation = null) {
        this._targetFps = targetFps;
        this._frameBudget = 1000 / targetFps;
        this._onViolation = onViolation;
        this._violations = 0;
        this._frameStart = 0;
    }

    /**
     * Mark start of frame
     */
    startFrame() {
        this._frameStart = performance.now();
    }

    /**
     * Check if frame is within budget
     * @param {string} [location] - Location identifier for debugging
     * @returns {boolean} True if within budget
     */
    checkBudget(location = '') {
        const elapsed = performance.now() - this._frameStart;
        const withinBudget = elapsed < this._frameBudget;

        if (!withinBudget) {
            this._violations++;

            if (this._onViolation) {
                this._onViolation({
                    location,
                    elapsed,
                    budget: this._frameBudget,
                    overrun: elapsed - this._frameBudget
                });
            }

            logger$7.warn(`Frame budget violation at ${location}: ${elapsed.toFixed(2)}ms / ${this._frameBudget.toFixed(2)}ms`);
        }

        return withinBudget;
    }

    /**
     * Get violation count
     * @returns {number} Total violations
     */
    getViolationCount() {
        return this._violations;
    }

    /**
     * Reset violation count
     */
    resetViolations() {
        this._violations = 0;
    }
}

/**
 * EventEmitter - Observer pattern implementation for event-driven communication
 *
 * Provides decoupled event handling with automatic cleanup to prevent memory leaks.
 * Critical for managing state changes and component communication.
 */


const logger$6 = getLogger('EventEmitter');

/**
 * EventEmitter - Pub/sub event system
 */
class EventEmitter {
    constructor() {
        /**
         * Map of event name to Set of listeners
         * @private
         */
        this._listeners = new Map();

        /**
         * Whether emitter has been disposed
         * @private
         */
        this._disposed = false;

        /**
         * Event emission history for debugging (last N events)
         * @private
         */
        this._eventHistory = [];
        this._maxHistorySize = 50;
    }

    /**
     * Assert emitter is not disposed
     * @private
     * @throws {Error} If emitter is disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new Error('EventEmitter has been disposed');
        }
    }

    /**
     * Subscribe to an event
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler
     * @param {object} [options] - Subscription options
     * @param {boolean} [options.once=false] - Auto-unsubscribe after first call
     * @returns {Function} Unsubscribe function
     * @throws {ValidationError} If parameters are invalid
     */
    on(event, callback, options = {}) {
        this._assertNotDisposed();

        if (typeof event !== 'string' || event.length === 0) {
            throw new ValidationError(
                'event must be a non-empty string',
                'event'
            );
        }

        if (typeof callback !== 'function') {
            throw new ValidationError(
                'callback must be a function',
                'callback'
            );
        }

        // Wrap callback if once option is set
        const wrappedCallback = options.once
            ? (...args) => {
                this.off(event, wrappedCallback);
                callback(...args);
            }
            : callback;

        // Store original callback reference for removal
        if (options.once) {
            wrappedCallback._originalCallback = callback;
        }

        // Add listener
        if (!this._listeners.has(event)) {
            this._listeners.set(event, new Set());
        }
        this._listeners.get(event).add(wrappedCallback);

        logger$6.debug(`Subscribed to event: ${event}`);

        // Return unsubscribe function
        return () => this.off(event, wrappedCallback);
    }

    /**
     * Subscribe to an event (fires once then auto-unsubscribes)
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler
     * @returns {Function} Unsubscribe function
     */
    once(event, callback) {
        return this.on(event, callback, { once: true });
    }

    /**
     * Unsubscribe from an event
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler to remove
     * @returns {boolean} True if callback was found and removed
     */
    off(event, callback) {
        this._assertNotDisposed();

        const listeners = this._listeners.get(event);
        if (!listeners) {
            return false;
        }

        // Try to remove directly
        if (listeners.delete(callback)) {
            logger$6.debug(`Unsubscribed from event: ${event}`);
            return true;
        }

        // Try to find by original callback (for once listeners)
        for (const listener of listeners) {
            if (listener._originalCallback === callback) {
                listeners.delete(listener);
                logger$6.debug(`Unsubscribed from event: ${event} (once listener)`);
                return true;
            }
        }

        return false;
    }

    /**
     * Remove all listeners for an event (or all events if no event specified)
     *
     * @param {string} [event] - Event name (optional)
     */
    removeAllListeners(event = null) {
        this._assertNotDisposed();

        if (event) {
            const count = this._listeners.get(event)?.size || 0;
            this._listeners.delete(event);
            logger$6.debug(`Removed ${count} listeners for event: ${event}`);
        } else {
            const totalCount = Array.from(this._listeners.values())
                .reduce((sum, set) => sum + set.size, 0);
            this._listeners.clear();
            logger$6.debug(`Removed all ${totalCount} listeners`);
        }
    }

    /**
     * Emit an event to all subscribers
     *
     * @param {string} event - Event name
     * @param {...*} args - Arguments to pass to listeners
     * @returns {boolean} True if event had listeners
     */
    emit(event, ...args) {
        this._assertNotDisposed();

        const listeners = this._listeners.get(event);
        if (!listeners || listeners.size === 0) {
            return false;
        }

        // Record in history for debugging
        this._recordEvent(event, args);

        // Call all listeners
        let callCount = 0;
        for (const callback of listeners) {
            try {
                callback(...args);
                callCount++;
            } catch (error) {
                logger$6.error(`Error in event listener for '${event}':`, error);
                // Continue calling other listeners
            }
        }

        logger$6.debug(`Emitted event: ${event} to ${callCount} listeners`);

        return true;
    }

    /**
     * Record event in history for debugging
     * @private
     * @param {string} event - Event name
     * @param {Array} args - Event arguments
     */
    _recordEvent(event, args) {
        this._eventHistory.push({
            event,
            timestamp: Date.now(),
            argCount: args.length
        });

        // Keep history bounded
        if (this._eventHistory.length > this._maxHistorySize) {
            this._eventHistory.shift();
        }
    }

    /**
     * Get event emission history
     * @returns {Array} Array of event records
     */
    getEventHistory() {
        return [...this._eventHistory];
    }

    /**
     * Check if event has listeners
     *
     * @param {string} event - Event name
     * @returns {boolean} True if event has listeners
     */
    hasListeners(event) {
        const listeners = this._listeners.get(event);
        return listeners ? listeners.size > 0 : false;
    }

    /**
     * Get listener count for an event
     *
     * @param {string} event - Event name
     * @returns {number} Number of listeners
     */
    listenerCount(event) {
        const listeners = this._listeners.get(event);
        return listeners ? listeners.size : 0;
    }

    /**
     * Get all event names with listeners
     *
     * @returns {string[]} Array of event names
     */
    eventNames() {
        return Array.from(this._listeners.keys());
    }

    /**
     * Get statistics about listeners
     *
     * @returns {object} Statistics
     */
    getStats() {
        const stats = {
            totalEvents: this._listeners.size,
            totalListeners: 0,
            eventBreakdown: {}
        };

        for (const [event, listeners] of this._listeners.entries()) {
            const count = listeners.size;
            stats.totalListeners += count;
            stats.eventBreakdown[event] = count;
        }

        return stats;
    }

    /**
     * Dispose emitter and remove all listeners
     */
    dispose() {
        if (this._disposed) {
            return;
        }

        logger$6.debug('Disposing EventEmitter');
        this.removeAllListeners();
        this._eventHistory.length = 0;
        this._disposed = true;
    }
}

/**
 * TypedEventEmitter - Type-safe event emitter with event registry
 *
 * Ensures events are pre-registered, preventing typos and providing
 * better developer experience.
 */
class TypedEventEmitter extends EventEmitter {
    /**
     * Create a TypedEventEmitter
     * @param {string[]} allowedEvents - Array of allowed event names
     */
    constructor(allowedEvents) {
        super();

        /**
         * Set of allowed event names
         * @private
         */
        this._allowedEvents = new Set(allowedEvents);
    }

    /**
     * Validate event name is allowed
     * @private
     * @param {string} event - Event name
     * @throws {ValidationError} If event is not allowed
     */
    _validateEvent(event) {
        if (!this._allowedEvents.has(event)) {
            throw new ValidationError(
                `Event '${event}' is not registered. Allowed events: ${Array.from(this._allowedEvents).join(', ')}`,
                'event'
            );
        }
    }

    /**
     * Subscribe to an event (override to add validation)
     * @override
     */
    on(event, callback, options) {
        this._validateEvent(event);
        return super.on(event, callback, options);
    }

    /**
     * Emit an event (override to add validation)
     * @override
     */
    emit(event, ...args) {
        this._validateEvent(event);
        return super.emit(event, ...args);
    }
}

/**
 * AppConstants
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * Animation state constants and ARKit blendshape mappings.
 */

/**
 * Voice chat state enumeration
 * Controls the rendering and behavior modes of the avatar
 */
const TYVoiceChatState = {
    Idle: 'Idle',           // Idle/waiting state
    Listening: 'Listening', // Listening to user input
    Responding: 'Responding', // Speaking/responding animation
    Thinking: 'Thinking'    // Processing/thinking animation
};

/**
 * ARKit blendshape names (52 expressions)
 * Used for facial expression mapping from ARKit face tracking
 */
const ARKitBlendshapes = [
    'browDownLeft',
    'browDownRight',
    'browInnerUp',
    'browOuterUpLeft',
    'browOuterUpRight',
    'cheekPuff',
    'cheekSquintLeft',
    'cheekSquintRight',
    'eyeBlinkLeft',
    'eyeBlinkRight',
    'eyeLookDownLeft',
    'eyeLookDownRight',
    'eyeLookInLeft',
    'eyeLookInRight',
    'eyeLookOutLeft',
    'eyeLookOutRight',
    'eyeLookUpLeft',
    'eyeLookUpRight',
    'eyeSquintLeft',
    'eyeSquintRight',
    'eyeWideLeft',
    'eyeWideRight',
    'jawForward',
    'jawLeft',
    'jawOpen',
    'jawRight',
    'mouthClose',
    'mouthDimpleLeft',
    'mouthDimpleRight',
    'mouthFrownLeft',
    'mouthFrownRight',
    'mouthFunnel',
    'mouthLeft',
    'mouthLowerDownLeft',
    'mouthLowerDownRight',
    'mouthPressLeft',
    'mouthPressRight',
    'mouthPucker',
    'mouthRight',
    'mouthRollLower',
    'mouthRollUpper',
    'mouthShrugLower',
    'mouthShrugUpper',
    'mouthSmileLeft',
    'mouthSmileRight',
    'mouthStretchLeft',
    'mouthStretchRight',
    'mouthUpperUpLeft',
    'mouthUpperUpRight',
    'noseSneerLeft',
    'noseSneerRight',
    'tongueOut'
];

/**
 * FLAME model bone names
 */
const FlameBoneNames = [
    'root',
    'neck',
    'jaw',
    'leftEye',
    'rightEye'
];

/**
 * Constants derived from the arrays
 */
const ARKIT_BLENDSHAPES_COUNT = ARKitBlendshapes.length;
const FLAME_BONES_COUNT = FlameBoneNames.length;

/**
 * AnimationManager
 *
 * Derived from gaussian-splat-renderer-for-lam
 * Manages animation state machine with Three.js AnimationMixer.
 */


const logger$5 = getLogger('AnimationManager');

/**
 * Base State class for animation states
 */
class State {
    constructor(actions, isGroup) {
        this.isPlaying = false;
        this.stage = 0;
        this.actions = actions || [];
        this.blendingTime = 0.5;
        this.isGroup = isGroup || false;
    }

    dispose() {
        this.actions = [];
    }

    update(state) {
        // Override in subclasses
    }
}

/**
 * Hello state - initial greeting animation
 */
class Hello extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopRepeat;
            this.actions[this.stage].clampWhenFinished = false;
            this.actions[this.stage].paused = false;
            this.actions[this.stage].play();
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Idle &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === true) {
            if (this.actions[this.stage].time >
                this.actions[this.stage].getClip().duration - this.blendingTime) {
                let nextStage = this.stage + 1;
                if (nextStage >= this.actions.length) nextStage = 0;
                this.actions[nextStage].time = 0;
                AnimationManager.SetWeight(this.actions[nextStage], 1.0);
                this.actions[nextStage].loop = THREE.LoopRepeat;
                this.actions[nextStage].play();
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[nextStage], this.blendingTime);
                this.stage = nextStage;
            }
        }
    }
}

/**
 * Idle state - resting animation
 */
class Idle extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopRepeat;
            this.actions[this.stage].clampWhenFinished = false;
            this.actions[this.stage].paused = false;
            this.actions[this.stage].play();
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Idle &&
            state !== TYVoiceChatState.Idle &&
            this.isPlaying === true &&
            this.stage === 0) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Listen state - listening animation
 */
class Listen extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Listening &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = this.isGroup ? THREE.LoopOnce : THREE.LoopRepeat;
            this.actions[this.stage].clampWhenFinished = this.isGroup ? true : false;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (this.isGroup) {
            if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
                state === TYVoiceChatState.Listening &&
                this.isPlaying === true &&
                this.stage === 0) {
                if (this.actions[this.stage].time >
                    this.actions[this.stage].getClip().duration - this.blendingTime) {
                    this.actions[this.stage + 1].time = 0;
                    AnimationManager.SetWeight(this.actions[this.stage + 1], 1.0);
                    this.actions[this.stage + 1].loop = THREE.LoopRepeat;
                    this.actions[this.stage + 1].play();
                    AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[this.stage + 1], this.blendingTime);
                    this.stage = 1;
                }
            }

            if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
                state !== TYVoiceChatState.Listening &&
                this.isPlaying === true &&
                (this.stage === 0 || this.stage === 1)) {
                this.actions[2].time = 0;
                this.actions[2].play();
                AnimationManager.SetWeight(this.actions[2], 1.0);
                this.actions[2].loop = THREE.LoopOnce;
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[2], this.blendingTime);
                this.stage = 2;
            }
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
            state !== TYVoiceChatState.Listening &&
            this.isPlaying === true &&
            this.stage === (this.isGroup ? this.actions.length - 1 : 0)) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Think state - thinking animation
 */
class Think extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Thinking &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopOnce;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (this.isGroup) {
            if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
                state === TYVoiceChatState.Thinking &&
                this.isPlaying === true &&
                this.stage === 0) {
                if (this.actions[this.stage].time >
                    this.actions[this.stage].getClip().duration - this.blendingTime) {
                    this.actions[this.stage + 1].time = 0;
                    AnimationManager.SetWeight(this.actions[this.stage + 1], 1.0);
                    this.actions[this.stage + 1].loop = THREE.LoopRepeat;
                    this.actions[this.stage + 1].play();
                    AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[this.stage + 1], this.blendingTime);
                    this.stage = 1;
                }
            }

            if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
                state !== TYVoiceChatState.Thinking &&
                this.isPlaying === true &&
                (this.stage === 0 || this.stage === 1)) {
                this.actions[2].time = 0;
                this.actions[2].play();
                AnimationManager.SetWeight(this.actions[2], 1.0);
                this.actions[2].loop = THREE.LoopOnce;
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[2], this.blendingTime);
                this.stage = 2;
            }
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
            state !== TYVoiceChatState.Thinking &&
            this.isPlaying === true &&
            this.stage === (this.isGroup ? this.actions.length - 1 : 0)) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Speak state - speaking animation with random movement selection
 */
class Speak extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
        logger$5.debug('[SPEAK] Initialized with', actions?.length || 0, 'actions, isGroup:', isGroup);
    }

    /**
     * Get a random number in range [min, max]
     */
    getRandomNumber(max, min) {
        const range = max - min;
        return min + Math.round(Math.random() * range);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) {
            if (!this._warnedNoActions) {
                logger$5.warn('[SPEAK] No actions available!');
                this._warnedNoActions = true;
            }
            return;
        }
        
        // Start speaking - pick a random animation
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Responding &&
            this.isPlaying === false) {
            // Randomly select initial animation
            this.stage = Math.ceil(this.getRandomNumber(0, this.actions.length - 1));
            logger$5.debug('[SPEAK] Starting animation, stage:', this.stage, 'of', this.actions.length);
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        // Continue speaking - cycle through random animations
        if (AnimationManager.CurPlaying === TYVoiceChatState.Responding &&
            state === TYVoiceChatState.Responding &&
            this.isPlaying === true) {
            if (this.actions[this.stage].time >=
                this.actions[this.stage].getClip().duration - this.blendingTime) {
                const lastAction = this.actions[this.stage];
                // Pick a different random animation
                this.stage = (this.stage + Math.ceil(this.getRandomNumber(1, this.actions.length - 1))) % this.actions.length;
                logger$5.debug('[SPEAK] Cycling to next animation, stage:', this.stage);
                this.actions[this.stage].time = 0;
                this.actions[this.stage].play();
                AnimationManager.SetWeight(this.actions[this.stage], 1.0);
                this.actions[this.stage].loop = THREE.LoopOnce;
                this.actions[this.stage].clampWhenFinished = true;
                AnimationManager.PrepareCrossFade(lastAction, this.actions[this.stage], this.blendingTime);
            }
        }

        // Stop speaking - finish current animation
        if (AnimationManager.CurPlaying === TYVoiceChatState.Responding &&
            state !== TYVoiceChatState.Responding &&
            this.isPlaying === true) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * AnimationManager - Main animation controller
 * Manages state machine with crossfade transitions between animation states
 */
class AnimationManager {
    // Static properties
    static IsBlending = false;
    static actions = [];
    static NeedReset = false;
    static NeedFullReset = false;
    static LastAction = undefined;
    static CurPlaying = undefined;

    /**
     * Set animation action weight
     */
    static SetWeight(action, weight) {
        action.enabled = true;
        action.setEffectiveTimeScale(1);
        action.setEffectiveWeight(weight);
    }

    /**
     * Prepare crossfade between two actions
     */
    static PrepareCrossFade(startAction, endAction, defaultDuration) {
        const duration = defaultDuration;
        AnimationManager.UnPauseAllActions();
        AnimationManager.ExecuteCrossFade(startAction, endAction, duration);
        AnimationManager.IsBlending = true;
        setTimeout(() => {
            AnimationManager.IsBlending = false;
        }, defaultDuration + 0.1);
    }

    /**
     * Pause all animation actions
     */
    static PauseAllActions() {
        AnimationManager.actions.forEach(function(action) {
            action.paused = true;
        });
    }

    /**
     * Unpause all animation actions
     */
    static UnPauseAllActions() {
        AnimationManager.actions.forEach(function(action) {
            action.paused = false;
        });
    }

    /**
     * Execute crossfade between two actions
     */
    static ExecuteCrossFade(startAction, endAction, duration) {
        AnimationManager.SetWeight(endAction, 1);
        endAction.time = 0;
        startAction.crossFadeTo(endAction, duration, true);
    }

    /**
     * Constructor
     * @param {THREE.AnimationMixer} mixer - Three.js animation mixer
     * @param {THREE.AnimationClip[]} animations - Animation clips
     * @param {object} animationcfg - Animation configuration
     */
    constructor(mixer, animations, animationcfg) {
        const helloActions = [];
        const idleActions = [];
        const listenActions = [];
        const speakActions = [];
        const thinkActions = [];

        this.mixer = mixer;

        // Calculate action indices based on config
        const helloIdx = animationcfg?.hello?.size || 0;
        const idleIdx = (animationcfg?.idle?.size || 0) + helloIdx;
        const listenIdx = (animationcfg?.listen?.size || 0) + idleIdx;
        const speakIdx = (animationcfg?.speak?.size || 0) + listenIdx;
        const thinkIdx = (animationcfg?.think?.size || 0) + speakIdx;

        // Distribute animation clips to state action arrays
        if (animations && animations.length > 0) {
            for (let i = 0; i < animations.length; i++) {
                const clip = animations[i];
                const action = mixer.clipAction(clip);

                if (i < helloIdx) {
                    helloActions.push(action);
                } else if (i < idleIdx) {
                    idleActions.push(action);
                    // Duplicate for states that share idle
                    if (listenIdx === idleIdx) {
                        listenActions.push(mixer.clipAction(clip.clone()));
                    }
                    if (speakIdx === listenIdx) {
                        speakActions.push(mixer.clipAction(clip.clone()));
                    }
                    if (thinkIdx === speakIdx) {
                        thinkActions.push(mixer.clipAction(clip.clone()));
                    }
                } else if (i < listenIdx) {
                    listenActions.push(action);
                } else if (i < speakIdx) {
                    speakActions.push(action);
                } else if (i < thinkIdx) {
                    thinkActions.push(action);
                }

                AnimationManager.actions.push(action);
                AnimationManager.SetWeight(action, 0);
            }
        }

        // Create state instances
        this.hello = new Hello(helloActions, animationcfg?.hello?.isGroup || false);
        this.idle = new Idle(idleActions, animationcfg?.idle?.isGroup || false);
        this.listen = new Listen(listenActions, animationcfg?.listen?.isGroup || false);
        this.think = new Think(thinkActions, animationcfg?.think?.isGroup || false);
        this.speak = new Speak(speakActions, animationcfg?.speak?.isGroup || false);
    }

    /**
     * Get currently playing state
     */
    curPlaying() {
        if (this.hello.isPlaying) return TYVoiceChatState.Idle;
        if (this.idle.isPlaying) return TYVoiceChatState.Idle;
        if (this.listen.isPlaying) return TYVoiceChatState.Listening;
        if (this.think.isPlaying) return TYVoiceChatState.Thinking;
        if (this.speak.isPlaying) return TYVoiceChatState.Responding;
        return undefined;
    }

    /**
     * Dispose animation manager
     */
    dispose() {
        this.hello.dispose();
        this.idle.dispose();
        this.listen.dispose();
        this.think.dispose();
        this.speak.dispose();
        AnimationManager.actions = [];
    }

    /**
     * Reset all animation actions
     */
    resetAllActions(ignoreBlending = false) {
        const curPlaying = this.curPlaying();
        
        switch (curPlaying) {
            case TYVoiceChatState.Idle:
                AnimationManager.LastAction = this.hello.actions[this.hello.stage];
                break;
            case TYVoiceChatState.Listening:
                AnimationManager.LastAction = this.listen.actions[this.listen.stage];
                break;
            case TYVoiceChatState.Thinking:
                AnimationManager.LastAction = this.think.actions[this.think.stage];
                break;
            case TYVoiceChatState.Responding:
                AnimationManager.LastAction = this.speak.actions[this.speak.stage];
                break;
            default:
                AnimationManager.LastAction = undefined;
                break;
        }

        if (AnimationManager.LastAction) {
            AnimationManager.LastAction.loop = THREE.LoopOnce;
            AnimationManager.LastAction.clampWhenFinished = true;
            AnimationManager.SetWeight(AnimationManager.LastAction, 1.0);
        }

        if (ignoreBlending) {
            AnimationManager.PauseAllActions();
            AnimationManager.actions.forEach(function(action) {
                action.time = 0;
                AnimationManager.SetWeight(action, 0.0);
            });
            AnimationManager.LastAction = undefined;
        }

        this.hello.isPlaying = false;
        this.idle.isPlaying = false;
        this.listen.isPlaying = false;
        this.think.isPlaying = false;
        this.speak.isPlaying = false;
    }

    /**
     * Update animation state
     * @param {string} state - Target state (TYVoiceChatState)
     */
    update(state) {
        if (AnimationManager.IsBlending) return;

        AnimationManager.CurPlaying = this.curPlaying();

        if (AnimationManager.CurPlaying === undefined) {
            switch (state) {
                case TYVoiceChatState.Idle:
                    this.idle.update(state);
                    break;
                case TYVoiceChatState.Listening:
                    this.listen.update(state);
                    break;
                case TYVoiceChatState.Thinking:
                    this.think.update(state);
                    break;
                case TYVoiceChatState.Responding:
                    this.speak.update(state);
                    break;
                default:
                    this.idle.update(state);
                    break;
            }
        } else {
            switch (AnimationManager.CurPlaying) {
                case TYVoiceChatState.Idle:
                    this.idle.update(state);
                    break;
                case TYVoiceChatState.Listening:
                    this.listen.update(state);
                    break;
                case TYVoiceChatState.Thinking:
                    this.think.update(state);
                    break;
                case TYVoiceChatState.Responding:
                    this.speak.update(state);
                    break;
                default:
                    this.idle.update(state);
                    break;
            }
        }
    }
}

/**
 * SplatScene
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class SplatScene extends THREE.Object3D {

    constructor(splatBuffer, position = new THREE.Vector3(), quaternion = new THREE.Quaternion(),
                scale = new THREE.Vector3(1, 1, 1), minimumAlpha = 1, opacity = 1.0, visible = true) {
        super();
        this.splatBuffer = splatBuffer;
        this.position.copy(position);
        this.quaternion.copy(quaternion);
        this.scale.copy(scale);
        this.transform = new THREE.Matrix4();
        this.minimumAlpha = minimumAlpha;
        this.opacity = opacity;
        this.visible = visible;
    }

    copyTransformData(otherScene) {
        this.position.copy(otherScene.position);
        this.quaternion.copy(otherScene.quaternion);
        this.scale.copy(otherScene.scale);
        this.transform.copy(otherScene.transform);
    }

    updateTransform(dynamicMode) {
        if (dynamicMode) {
            if (this.matrixWorldAutoUpdate) this.updateWorldMatrix(true, false);
            this.transform.copy(this.matrixWorld);
        } else {
            if (this.matrixAutoUpdate) this.updateMatrix();
            this.transform.copy(this.matrix);
        }
    }
}

/**
 * SplatGeometry
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class SplatGeometry {

    /**
     * Build the Three.js geometry that will be used to render the splats. The geometry is instanced and is made up of
     * vertices for a single quad as well as an attribute buffer for the splat indexes.
     * @param {number} maxSplatCount The maximum number of splats that the geometry will need to accomodate
     * @return {THREE.InstancedBufferGeometry}
     */
    static build(maxSplatCount) {

        const baseGeometry = new THREE.BufferGeometry();
        baseGeometry.setIndex([0, 1, 2, 0, 2, 3]);

        // Vertices for the instanced quad
        const positionsArray = new Float32Array(4 * 3);
        const positions = new THREE.BufferAttribute(positionsArray, 3);
        baseGeometry.setAttribute('position', positions);
        positions.setXYZ(0, -1, -1, 0.0);
        positions.setXYZ(1, -1, 1.0, 0.0);
        positions.setXYZ(2, 1.0, 1.0, 0.0);
        positions.setXYZ(3, 1.0, -1, 0.0);
        positions.needsUpdate = true;

        const geometry = new THREE.InstancedBufferGeometry().copy(baseGeometry);

        // Splat index buffer
        const splatIndexArray = new Uint32Array(maxSplatCount);

        const splatIndexes = new THREE.InstancedBufferAttribute(splatIndexArray, 1, false);
        splatIndexes.setUsage(THREE.DynamicDrawUsage);
        geometry.setAttribute('splatIndex', splatIndexes);

        geometry.instanceCount = 0;

        return geometry;
    }
}

/**
 * SplatTree
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


// Worker-related functions (simplified stubs - the actual worker is handled differently)
const checkAndCreateWorker = () => {
    // Worker creation is handled by the build system
    return null;
};

const workerProcessCenters = (worker, centers, buffers, maxDepth, maxCentersPerNode) => {
    // Worker message passing
    if (worker) {
        worker.postMessage({
            'process': {
                'centers': centers,
                'maxDepth': maxDepth,
                'maxCentersPerNode': maxCentersPerNode
            }
        }, buffers);
    }
};

// SplatSubTree helper class
class SplatSubTree {
    constructor() {
        this.rootNode = null;
        this.splatMesh = null;
    }

    static convertWorkerSubTree(workerSubTree, splatMesh) {
        const subTree = new SplatSubTree();
        subTree.rootNode = workerSubTree.rootNode;
        subTree.splatMesh = splatMesh;
        return subTree;
    }
}

class SplatTree {

    constructor(maxDepth, maxCentersPerNode) {
        this.maxDepth = maxDepth;
        this.maxCentersPerNode = maxCentersPerNode;
        this.subTrees = [];
        this.splatMesh = null;
    }


    dispose() {
        this.diposeSplatTreeWorker();
        this.disposed = true;
    }

    diposeSplatTreeWorker() {
        if (this.splatTreeWorker) this.splatTreeWorker.terminate();
        this.splatTreeWorker = null;
    };

    /**
     * Construct this instance of SplatTree from an instance of SplatMesh.
     *
     * @param {SplatMesh} splatMesh The instance of SplatMesh from which to construct this splat tree.
     * @param {function} filterFunc Optional function to filter out unwanted splats.
     * @param {function} onIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                   builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {undefined}
     */
    processSplatMesh = (splatMesh, filterFunc = () => true, onIndexesUpload, onSplatTreeConstruction) => {
        if (!this.splatTreeWorker) this.splatTreeWorker = checkAndCreateWorker();

        this.splatMesh = splatMesh;
        this.subTrees = [];
        const center = new THREE.Vector3();

        const addCentersForScene = (splatOffset, splatCount) => {
            const sceneCenters = new Float32Array(splatCount * 4);
            let addedCount = 0;
            for (let i = 0; i < splatCount; i++) {
                const globalSplatIndex = i + splatOffset;
                if (filterFunc(globalSplatIndex)) {
                    splatMesh.getSplatCenter(globalSplatIndex, center);
                    const addBase = addedCount * 4;
                    sceneCenters[addBase] = center.x;
                    sceneCenters[addBase + 1] = center.y;
                    sceneCenters[addBase + 2] = center.z;
                    sceneCenters[addBase + 3] = globalSplatIndex;
                    addedCount++;
                }
            }
            return sceneCenters;
        };

        return new Promise((resolve) => {

            const checkForEarlyExit = () => {
                if (this.disposed) {
                    this.diposeSplatTreeWorker();
                    resolve();
                    return true;
                }
                return false;
            };

            if (onIndexesUpload) onIndexesUpload(false);

            delayedExecute(() => {

                if (checkForEarlyExit()) return;

                const allCenters = [];
                if (splatMesh.dynamicMode) {
                    let splatOffset = 0;
                    for (let s = 0; s < splatMesh.scenes.length; s++) {
                        const scene = splatMesh.getScene(s);
                        const splatCount = scene.splatBuffer.getSplatCount();
                        const sceneCenters = addCentersForScene(splatOffset, splatCount);
                        allCenters.push(sceneCenters);
                        splatOffset += splatCount;
                    }
                } else {
                    const sceneCenters = addCentersForScene(0, splatMesh.getSplatCount());
                    allCenters.push(sceneCenters);
                }

                this.splatTreeWorker.onmessage = (e) => {

                    if (checkForEarlyExit()) return;

                    if (e.data.subTrees) {

                        if (onSplatTreeConstruction) onSplatTreeConstruction(false);

                        delayedExecute(() => {

                            if (checkForEarlyExit()) return;

                            for (let workerSubTree of e.data.subTrees) {
                                const convertedSubTree = SplatSubTree.convertWorkerSubTree(workerSubTree, splatMesh);
                                this.subTrees.push(convertedSubTree);
                            }
                            this.diposeSplatTreeWorker();

                            if (onSplatTreeConstruction) onSplatTreeConstruction(true);

                            delayedExecute(() => {
                                resolve();
                            });

                        });
                    }
                };

                delayedExecute(() => {
                    if (checkForEarlyExit()) return;
                    if (onIndexesUpload) onIndexesUpload(true);
                    const transferBuffers = allCenters.map((array) => array.buffer);
                    workerProcessCenters(this.splatTreeWorker, allCenters, transferBuffers, this.maxDepth, this.maxCentersPerNode);
                });

            });

        });

    };

    countLeaves() {

        let leafCount = 0;
        this.visitLeaves(() => {
            leafCount++;
        });

        return leafCount;
    }

    visitLeaves(visitFunc) {

        const visitLeavesFromNode = (node, visitFunc) => {
            if (node.children.length === 0) visitFunc(node);
            for (let child of node.children) {
                visitLeavesFromNode(child, visitFunc);
            }
        };

        for (let subTree of this.subTrees) {
            visitLeavesFromNode(subTree.rootNode, visitFunc);
        }
    }

}

/**
 * SplatMaterial
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME bone/pose uniforms and textures
 * - Added expression blendshape support
 * - Extended vertex shader with GPU skinning
 * - Additional ~500 lines of FLAME-specific shader code
 */


class SplatMaterial {

    static buildVertexShaderBase(dynamicMode = false, enableOptionalEffects = false, maxSphericalHarmonicsDegree = 0, customVars = '') {
        let vertexShaderSource = `#define USE_SKINNING

        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D flameModelTexture;
        uniform highp usampler2D boneTexture;
        uniform highp usampler2D boneWeightTexture;


        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
        uniform int gaussianSplatCount;
        uniform int bsCount;
        uniform float headBoneIndex;
        #ifdef USE_SKINNING
            attribute vec4 skinIndex;
            attribute vec4 skinWeight;
        #endif
    `;

    if (enableOptionalEffects) {
        vertexShaderSource += `
            uniform float sceneOpacity[${Constants$1.MaxScenes}];
            uniform int sceneVisibility[${Constants$1.MaxScenes}];
        `;
    }

    if (dynamicMode) {
        vertexShaderSource += `
            uniform highp mat4 transforms[${Constants$1.MaxScenes}];
        `;
    }

    vertexShaderSource += `
        ${customVars}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform vec2 flameModelTextureSize;
        uniform vec2 boneWeightTextureSize;
        uniform vec2 boneTextureSize;

        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${Constants$1.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${Constants$1.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;
        varying vec2 vSplatIndex;
        #ifdef USE_SKINNING
            uniform mat4 bindMatrix;
            uniform mat4 bindMatrixInverse;
            uniform highp sampler2D boneTexture0;
            mat4 getBoneMatrix0( const in float i ) {
                int size = textureSize( boneTexture0, 0 ).x;
                int j = int( i ) * 4;
                int x = j % size;
                int y = j / size;
                vec4 v1 = texelFetch( boneTexture0, ivec2( x, y ), 0 );
                vec4 v2 = texelFetch( boneTexture0, ivec2( x + 1, y ), 0 );
                vec4 v3 = texelFetch( boneTexture0, ivec2( x + 2, y ), 0 );
                vec4 v4 = texelFetch( boneTexture0, ivec2( x + 3, y ), 0 );
                return mat4( v1, v2, v3, v4 );
            }
        #endif

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        int internal = 1;//show a gaussian splatting point every internal points.
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }
        float getRealIndex(int sIndex, int reducedFactor) {
            int remainder = sIndex % reducedFactor;

            if(remainder == int(0)) {
                return float(sIndex);
            }
            else
            {
                return float(sIndex - remainder);
            }
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(getRealIndex(int(splatIndex), internal)) * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getFlameDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset) + uint(gaussianSplatCount * bsCount)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getBoneWeightUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getBSFlameDataUV(in int bsInedex, in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset) + uint(gaussianSplatCount * bsInedex)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(getRealIndex(int(sIndex), internal)) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        mat4 getBoneMatrix( float i ) {
            float y = i;
            float x = 0.0;

            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(i * 4.0) / boneTextureSize.x;//4
            samplerUV.y = float(floor(d)) / boneTextureSize.y;//5
            samplerUV.x = fract(d);

            vec4 v1 = uintBitsToFloat(texture( boneTexture, samplerUV ));
            vec4 v2 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 1.0 / boneTextureSize.x, samplerUV.y)));
            vec4 v3 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 2.0 / boneTextureSize.x, samplerUV.y) ));
            vec4 v4 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 3.0 / boneTextureSize.x, samplerUV.y)));

            return mat4( v1, v2, v3, v4 );
        }

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            // vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uvec3 sampledCenter = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize)).gba;
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenter));

            vec2 flameTextureUV = getBSFlameDataUV(bsCount, 1, 0, flameModelTextureSize);
            uvec3 sampledflamePos = texture(flameModelTexture, flameTextureUV).rgb;
            // splatCenter += uintBitsToFloat(uvec3(sampledflamePos.rgb));

            for(int i = 0; i < bsCount; ++i) {
                vec2 flameBSTextureUV = getBSFlameDataUV(i, 1, 0, flameModelTextureSize);
                uvec3 sampledBSPos = texture(flameModelTexture, flameBSTextureUV).rgb;

                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(i / 4 + 5 * 4) / boneTextureSize.x;//4
                samplerUV.y = float(floor(d)) / boneTextureSize.y;//32
                samplerUV.x = fract(d);

                vec4 bsWeight = uintBitsToFloat(texture(boneTexture, samplerUV));
                float weight = bsWeight.r;
                if(i % 4 == 1) {
                    weight = bsWeight.g;
                }
                if(i % 4 == 2) {
                    weight = bsWeight.b;
                }
                if(i % 4 == 3) {
                    weight = bsWeight.a;
                }

                splatCenter = splatCenter + weight * uintBitsToFloat(sampledBSPos);
            }


            #ifdef USE_SKINNING
                mat4 boneMatX = getBoneMatrix0( skinIndex.x );
                mat4 boneMatY = getBoneMatrix0( skinIndex.y );
                mat4 boneMatZ = getBoneMatrix0( skinIndex.z );
                mat4 boneMatW = getBoneMatrix0( skinIndex.w );
            #endif
            #ifdef USE_SKINNING
                mat4 skinMatrix = mat4( 0.0 );
                skinMatrix += skinWeight.x * boneMatX;
                skinMatrix += skinWeight.y * boneMatY;
                skinMatrix += skinWeight.z * boneMatZ;
                skinMatrix += skinWeight.w * boneMatW;
                // skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
            #endif
            vec3 transformed = vec3(splatCenter.xyz);
            #ifdef USE_SKINNING
                // vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
                vec4 skinVertex = vec4( transformed, 1.0 );

                vec4 skinned = vec4( 0.0 );
                // There is an offset between the Gaussian point and the mesh vertex,
                // which will cause defects in the skeletal animation driving the Gaussian point. 
                //In order to circumvent this problem, only the head bone(index is 110 currently) is used to drive

                if (headBoneIndex >= 0.0)
                {
                    mat4 boneMat = getBoneMatrix0( headBoneIndex );
                    skinned += boneMat * skinVertex * 1.0;
                }

                // skinned += boneMatX * skinVertex * skinWeight.x;
                // skinned += boneMatY * skinVertex * skinWeight.y;
                // skinned += boneMatZ * skinVertex * skinWeight.z;
                // skinned += boneMatW * skinVertex * skinWeight.w;

                // transformed = ( bindMatrixInverse * skinned ).xyz;
                transformed = skinned.xyz;

            #endif
            splatCenter = transformed.xyz;

            #ifdef USE_FLAME
                mat4 boneMatX = getBoneMatrix( 0.0 );
                mat4 boneMatY = getBoneMatrix( 1.0 );
                mat4 boneMatZ = getBoneMatrix( 2.0 );
                mat4 boneMatW = getBoneMatrix( 3.0 );   
                mat4 boneMat0 = getBoneMatrix( 4.0 );   
                
                vec2 boneWeightUV0 = getBoneWeightUV(2, 0, boneWeightTextureSize);
                vec2 boneWeightUV1 = getBoneWeightUV(2, 1, boneWeightTextureSize);

                uvec4 sampledBoneMatrixValue = texture(boneWeightTexture, boneWeightUV0);
                uvec4 sampledBoneMatrixValue0 = texture(boneWeightTexture, boneWeightUV1);

                vec4 boneMatrixValue = uintBitsToFloat(sampledBoneMatrixValue);
                vec4 boneMatrixValue0 = uintBitsToFloat(sampledBoneMatrixValue0);

                vec4 skinVertex = vec4( splatCenter, 1.0 );
                vec4 skinned = vec4( 0.0 );
                float minWeight = min(boneMatrixValue.x,min(boneMatrixValue.y, min(boneMatrixValue.z, min(boneMatrixValue.w, boneMatrixValue0.x))));
                
                if(boneMatrixValue.x > 0.0 && boneMatrixValue.x > minWeight)
                    skinned += boneMatX * skinVertex * boneMatrixValue.x;
                
                if(boneMatrixValue.y > 0.0 && boneMatrixValue.y > minWeight)
                    skinned += boneMatY * skinVertex * boneMatrixValue.y;
                
                if(boneMatrixValue.z > 0.0 && boneMatrixValue.z > minWeight)
                    skinned += boneMatZ * skinVertex * boneMatrixValue.z;
                
                if(boneMatrixValue.w > 0.0 && boneMatrixValue.w > minWeight)
                    skinned += boneMatW * skinVertex * boneMatrixValue.w;
                
                if(boneMatrixValue0.x > 0.0 && boneMatrixValue0.x > minWeight)
                    skinned += boneMat0 * skinVertex * boneMatrixValue0.x;
                
                splatCenter = skinned.xyz;
            #endif

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `;

        if (enableOptionalEffects) {
            vertexShaderSource += `
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `;
        }

        if (dynamicMode) {
            vertexShaderSource += `
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
                #ifdef USE_SKINNING
                    transformModelViewMatrix = transformModelViewMatrix * skinMatrix;
                #endif
            `;
        } else {
            vertexShaderSource += `mat4 transformModelViewMatrix = modelViewMatrix;`;
        }

        vertexShaderSource += `
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vSplatIndex = vec2(splatIndex, splatIndex);

            vColor = uintToRGBAVec(sampledCenterColor.r);
        `;

        // Proceed to sampling and rendering 1st degree spherical harmonics
        if (maxSphericalHarmonicsDegree >= 1) {

            vertexShaderSource += `   
            if (sphericalHarmonicsDegree >= 1) {
            `;

            if (dynamicMode) {
                vertexShaderSource += `
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `;
            } else {
                vertexShaderSource += `
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `;
            }

            vertexShaderSource += `
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `;

            if (maxSphericalHarmonicsDegree >= 2) {
                vertexShaderSource += `
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `;
            }

            // Determining how to sample spherical harmonics textures to get the coefficients for calculations for a given degree
            // depends on how many total degrees (maxSphericalHarmonicsDegree) are present in the textures. This is because that
            // number affects how they are packed in the textures, and therefore the offset & stride required to access them.

            // Sample spherical harmonics textures with 1 degree worth of data for 1st degree calculations, and store in sh1, sh2, and sh3
            if (maxSphericalHarmonicsDegree === 1) {
                vertexShaderSource += `
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `;
            // Sample spherical harmonics textures with 2 degrees worth of data for 1st degree calculations, and store in sh1, sh2, and sh3
            } else if (maxSphericalHarmonicsDegree === 2) {
                vertexShaderSource += `
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `;
            }

            // Perform 1st degree spherical harmonics calculations
            vertexShaderSource += `
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `;

            // Proceed to sampling and rendering 2nd degree spherical harmonics
            if (maxSphericalHarmonicsDegree >= 2) {

                vertexShaderSource += `
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `;

                // Sample spherical harmonics textures with 2 degrees worth of data for 2nd degree calculations,
                // and store in sh4, sh5, sh6, sh7, and sh8
                if (maxSphericalHarmonicsDegree === 2) {
                    vertexShaderSource += `
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `;
                }

                // Perform 2nd degree spherical harmonics calculations
                vertexShaderSource += `
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `;
            }

            vertexShaderSource += `

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `;
        }

        return vertexShaderSource;
    }

    static getVertexShaderFadeIn() {
        return `
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `;
    }

    static getUniforms(dynamicMode = false, enableOptionalEffects = false, maxSphericalHarmonicsDegree = 0,
                       splatScale = 1.0, pointCloudModeEnabled = false) {

        const uniforms = {
            'sceneCenter': {
                'type': 'v3',
                'value': new THREE.Vector3()
            },
            'fadeInComplete': {
                'type': 'i',
                'value': 0
            },
            'orthographicMode': {
                'type': 'i',
                'value': 0
            },
            'visibleRegionFadeStartRadius': {
                'type': 'f',
                'value': 0.0
            },
            'visibleRegionRadius': {
                'type': 'f',
                'value': 0.0
            },
            'bindMatrix': {
                'type': 'm4',
                'value': new THREE.Matrix4()
            },
            'bindMatrixInverse': {
                'type': 'm4',
                'value': new THREE.Matrix4()
            },
            'currentTime': {
                'type': 'f',
                'value': 0.0
            },
            'firstRenderTime': {
                'type': 'f',
                'value': 0.0
            },
            'centersColorsTexture': {
                'type': 't',
                'value': null
            },
            'flameModelTexture': {
                'type': 't',
                'value': null
            },
            'boneTexture': {
                'type': 't',
                'value': null
            },
            'boneTexture0': {
                'type': 't',
                'value': null
            },
            'boneWeightTexture': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTexture': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureR': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureG': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureB': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonics8BitCompressionRangeMin': {
                'type': 'f',
                'value': []
            },
            'sphericalHarmonics8BitCompressionRangeMax': {
                'type': 'f',
                'value': []
            },
            'focal': {
                'type': 'v2',
                'value': new THREE.Vector2()
            },
            'orthoZoom': {
                'type': 'f',
                'value': 1.0
            },
            'inverseFocalAdjustment': {
                'type': 'f',
                'value': 1.0
            },
            'viewport': {
                'type': 'v2',
                'value': new THREE.Vector2()
            },
            'basisViewport': {
                'type': 'v2',
                'value': new THREE.Vector2()
            },
            'debugColor': {
                'type': 'v3',
                'value': new THREE.Color()
            },
            'centersColorsTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(1024, 1024)
            },
            'flameModelTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(4096, 2048)
            },
            'boneTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(4, 32)
            },
            'boneWeightTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(512, 512)
            },
            
            'sphericalHarmonicsDegree': {
                'type': 'i',
                'value': maxSphericalHarmonicsDegree
            },
            'sphericalHarmonicsTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(1024, 1024)
            },
            'sphericalHarmonics8BitMode': {
                'type': 'i',
                'value': 0
            },
            'sphericalHarmonicsMultiTextureMode': {
                'type': 'i',
                'value': 0
            },
            'splatScale': {
                'type': 'f',
                'value': splatScale
            },
            'pointCloudModeEnabled': {
                'type': 'i',
                'value': pointCloudModeEnabled ? 1 : 0
            },
            'sceneIndexesTexture': {
                'type': 't',
                'value': null
            },
            'sceneIndexesTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(1024, 1024)
            },
            'sceneCount': {
                'type': 'i',
                'value': 1
            },
            'gaussianSplatCount': {
                'type': 'i',
                'value': 1
            },
            'bsCount': {
                'type': 'i',
                'value': 1
            },
            'headBoneIndex': {
                'type': 'f',
                'value': -1
            },
            'eyeBlinkLeft': {
                'type': 'f',
                'value': 0.0
            },
            'eyeBlinkRight': {
                'type': 'f',
                'value': 0.0
            }
        };
        for (let i = 0; i < Constants$1.MaxScenes; i++) {
            uniforms.sphericalHarmonics8BitCompressionRangeMin.value.push(-Constants$1.SphericalHarmonics8BitCompressionRange / 2.0);
            uniforms.sphericalHarmonics8BitCompressionRangeMax.value.push(Constants$1.SphericalHarmonics8BitCompressionRange / 2.0);
        }

        if (enableOptionalEffects) {
            const sceneOpacity = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                sceneOpacity.push(1.0);
            }
            uniforms['sceneOpacity'] ={
                'type': 'f',
                'value': sceneOpacity
            };

            const sceneVisibility = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                sceneVisibility.push(1);
            }
            uniforms['sceneVisibility'] ={
                'type': 'i',
                'value': sceneVisibility
            };
        }

        if (dynamicMode) {
            const transformMatrices = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                transformMatrices.push(new THREE.Matrix4());
            }
            uniforms['transforms'] = {
                'type': 'mat4',
                'value': transformMatrices
            };
        }

        return uniforms;
    }

}

/**
 * SplatMaterial3D
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Modified for FLAME avatar support:
 * - Extended vertex shader for FLAME integration
 */


class SplatMaterial3D {

    /**
     * Build the Three.js material that is used to render the splats.
     * @param {number} dynamicMode If true, it means the scene geometry represented by this splat mesh is not stationary or
     *                             that the splat count might change
     * @param {boolean} enableOptionalEffects When true, allows for usage of extra properties and attributes in the shader for effects
     *                                        such as opacity adjustment. Default is false for performance reasons.
     * @param {boolean} antialiased If true, calculate compensation factor to deal with gaussians being rendered at a significantly
     *                              different resolution than that of their training
     * @param {number} maxScreenSpaceSplatSize The maximum clip space splat size
     * @param {number} splatScale Value by which all splats are scaled in screen-space (default is 1.0)
     * @param {number} pointCloudModeEnabled Render all splats as screen-space circles
     * @param {number} maxSphericalHarmonicsDegree Degree of spherical harmonics to utilize in rendering splats
     * @return {THREE.ShaderMaterial}
     */
    static build(dynamicMode = false, enableOptionalEffects = false, antialiased = false, maxScreenSpaceSplatSize = 2048,
                 splatScale = 1.0, pointCloudModeEnabled = false, maxSphericalHarmonicsDegree = 0, kernel2DSize = 0.3, irisOcclusionConfig = null) {

        const customVertexVars = `
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;

        // Add a varying for iris splats
        let vertexShaderSource = SplatMaterial.buildVertexShaderBase(dynamicMode, enableOptionalEffects,
                                         maxSphericalHarmonicsDegree, customVertexVars);
        vertexShaderSource += SplatMaterial3D.buildVertexShaderProjection(antialiased, enableOptionalEffects,
                                          maxScreenSpaceSplatSize, kernel2DSize);
        const fragmentShaderSource = SplatMaterial3D.buildFragmentShader(irisOcclusionConfig);

        const uniforms = SplatMaterial.getUniforms(dynamicMode, enableOptionalEffects,
                                                   maxSphericalHarmonicsDegree, splatScale, pointCloudModeEnabled);

        uniforms['covariancesTextureSize'] = {
            'type': 'v2',
            'value': new THREE.Vector2(1024, 1024)
        };
        uniforms['covariancesTexture'] = {
            'type': 't',
            'value': null
        };
        uniforms['covariancesTextureHalfFloat'] = {
            'type': 't',
            'value': null
        };
        uniforms['covariancesAreHalfFloat'] = {
            'type': 'i',
            'value': 0
        };

        const material = new THREE.ShaderMaterial({
            uniforms: uniforms,
            vertexShader: vertexShaderSource,
            fragmentShader: fragmentShaderSource,
            transparent: true,
            alphaTest: 1.0,
            blending: THREE.NormalBlending,
            depthTest: true,
            depthWrite: false,
            side: THREE.DoubleSide
        });

        return material;
    }

    static buildVertexShaderProjection(antialiased, enableOptionalEffects, maxScreenSpaceSplatSize, kernel2DSize) {
        let vertexShaderSource = `

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;

        if (antialiased) {
            vertexShaderSource += `
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${kernel2DSize};
                cov2Dm[1][1] += ${kernel2DSize};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `;
        } else {
            vertexShaderSource += `
                cov2Dm[0][0] += ${kernel2DSize};
                cov2Dm[1][1] += ${kernel2DSize};
            `;
        }

        vertexShaderSource += `

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(maxScreenSpaceSplatSize)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(maxScreenSpaceSplatSize)}.0);
            `;

        if (enableOptionalEffects) {
            vertexShaderSource += `
                vColor.a *= splatOpacityFromScene;
            `;
        }

        vertexShaderSource += `
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `;

        vertexShaderSource += SplatMaterial.getVertexShaderFadeIn();
        vertexShaderSource += `}`;

        return vertexShaderSource;
    }

    static buildFragmentShader(irisOcclusionConfig = null) {
        let fragmentShaderSource = `
            precision highp float;
            #include <common>

            uniform float eyeBlinkLeft;
            uniform float eyeBlinkRight;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying vec2 vSplatIndex;
        `;

        fragmentShaderSource += `
            void main () {
                float A = dot(vPosition, vPosition);
                float opacity = exp(-0.5 * A) * vColor.a;
                if (opacity < 1.0 / 255.0)
                    discard;
                `;

        // Check availability of configuring keys
        const hasKey = (obj, key) => obj && obj[key] && obj[key].length > 0;
        const hasRight = hasKey(irisOcclusionConfig, 'right_iris');
        const hasRightNorth = hasKey(irisOcclusionConfig, 'right_iris_north');
        const hasRightSouth = hasKey(irisOcclusionConfig, 'right_iris_south');
        
        const hasLeft = hasKey(irisOcclusionConfig, 'left_iris');
        const hasLeftNorth = hasKey(irisOcclusionConfig, 'left_iris_north');
        const hasLeftSouth = hasKey(irisOcclusionConfig, 'left_iris_south');

        const anyIrisConfig = hasRight || hasRightNorth || hasRightSouth || hasLeft || hasLeftNorth || hasLeftSouth;

        if (anyIrisConfig) {
            fragmentShaderSource += `
                float idx = vSplatIndex.x;
                `;

            // --- Right Iris Logic ---
            if (hasRightNorth || hasRightSouth) {
                // North
                if (hasRightNorth) {
                    const conditions = irisOcclusionConfig.right_iris_north
                        .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                        .join(' ||\n                                   ');
                    fragmentShaderSource += `
                bool isRightIrisNorth = ${conditions};
                `;
                } else {
                    fragmentShaderSource += `bool isRightIrisNorth = false;`;
                }
                
                // South
                if (hasRightSouth) {
                    const conditions = irisOcclusionConfig.right_iris_south
                        .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                        .join(' ||\n                                   ');
                    fragmentShaderSource += `
                bool isRightIrisSouth = ${conditions};
                `;
                } else {
                    fragmentShaderSource += `bool isRightIrisSouth = false;`;
                }

                // Fallback Right
                if (hasRight) {
                    const conditions = irisOcclusionConfig.right_iris
                        .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                        .join(' ||\n                                   ');
                    fragmentShaderSource += `
                bool isRightIris = ${conditions} && !isRightIrisNorth && !isRightIrisSouth;
                `;
                } else {
                    fragmentShaderSource += `bool isRightIris = false;`;
                }
            } else if (hasRight) {
                const conditions = irisOcclusionConfig.right_iris
                    .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                    .join(' ||\n                                   ');

                fragmentShaderSource += `
                bool isRightIris = ${conditions};
                bool isRightIrisNorth = false;
                bool isRightIrisSouth = false;
                `;
            } else {
                fragmentShaderSource += `
                bool isRightIris = false;
                bool isRightIrisNorth = false;
                bool isRightIrisSouth = false;
                `;
            }

            // --- Left Iris Logic ---
            if (hasLeftNorth || hasLeftSouth) {
                // North
                if (hasLeftNorth) {
                    const conditions = irisOcclusionConfig.left_iris_north
                        .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                        .join(' ||\n                                   ');
                    fragmentShaderSource += `
                bool isLeftIrisNorth = ${conditions};
                `;
                } else {
                    fragmentShaderSource += `bool isLeftIrisNorth = false;`;
                }

                // South
                if (hasLeftSouth) {
                    const conditions = irisOcclusionConfig.left_iris_south
                        .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                        .join(' ||\n                                   ');
                    fragmentShaderSource += `
                bool isLeftIrisSouth = ${conditions};
                `;
                } else {
                    fragmentShaderSource += `bool isLeftIrisSouth = false;`;
                }

                // Fallback Left
                if (hasLeft) {
                    const conditions = irisOcclusionConfig.left_iris
                        .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                        .join(' ||\n                                   ');
                    fragmentShaderSource += `
                bool isLeftIris = ${conditions} && !isLeftIrisNorth && !isLeftIrisSouth;
                `;
                } else {
                    fragmentShaderSource += `bool isLeftIris = false;`;
                }
            } else if (hasLeft) {
                const conditions = irisOcclusionConfig.left_iris
                    .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                    .join(' ||\n                                  ');

                fragmentShaderSource += `
                bool isLeftIris = ${conditions};
                bool isLeftIrisNorth = false;
                bool isLeftIrisSouth = false;
                `;
            } else {
                fragmentShaderSource += `
                bool isLeftIris = false;
                bool isLeftIrisNorth = false;
                bool isLeftIrisSouth = false;
                `;
            }

            fragmentShaderSource += `
                float finalOpacity = opacity;

                if (isRightIris) {
                    float fadeFactor = 1.0 - smoothstep(0.45, 0.65, eyeBlinkRight);
                    finalOpacity = opacity * fadeFactor;
                } else if (isRightIrisNorth) {
                    // North part gets covered very early by upper eyelid
                    float fadeFactor = 1.0 - smoothstep(0.0, 0.25, eyeBlinkRight);
                    finalOpacity = opacity * fadeFactor;
                } else if (isRightIrisSouth) {
                    // South part gets covered much later
                    float fadeFactor = 1.0 - smoothstep(0.65, 0.9, eyeBlinkRight);
                    finalOpacity = opacity * fadeFactor;
                } else if (isLeftIris) {
                    float fadeFactor = 1.0 - smoothstep(0.45, 0.65, eyeBlinkLeft);
                    finalOpacity = opacity * fadeFactor;
                } else if (isLeftIrisNorth) {
                    float fadeFactor = 1.0 - smoothstep(0.0, 0.25, eyeBlinkLeft);
                    finalOpacity = opacity * fadeFactor;
                } else if (isLeftIrisSouth) {
                     float fadeFactor = 1.0 - smoothstep(0.65, 0.9, eyeBlinkLeft);
                    finalOpacity = opacity * fadeFactor;
                }

                if (finalOpacity < 1.0 / 255.0)
                    discard;

                gl_FragColor = vec4(vColor.rgb, finalOpacity);
            }
        `;
        } else {
            // No iris occlusion - simple rendering
            fragmentShaderSource += `
                gl_FragColor = vec4(vColor.rgb, opacity);
            }
        `;
        }

        return fragmentShaderSource;
    }

}

/**
 * SplatMaterial2D
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Modified for FLAME avatar support:
 * - Extended vertex shader for FLAME integration
 */


class SplatMaterial2D {

    /**
     * Build the Three.js material that is used to render the splats.
     * @param {number} dynamicMode If true, it means the scene geometry represented by this splat mesh is not stationary or
     *                             that the splat count might change
     * @param {boolean} enableOptionalEffects When true, allows for usage of extra properties and attributes in the shader for effects
     *                                        such as opacity adjustment. Default is false for performance reasons.
     * @param {number} splatScale Value by which all splats are scaled in screen-space (default is 1.0)
     * @param {number} pointCloudModeEnabled Render all splats as screen-space circles
     * @param {number} maxSphericalHarmonicsDegree Degree of spherical harmonics to utilize in rendering splats
     * @return {THREE.ShaderMaterial}
     */
    static build(dynamicMode = false, enableOptionalEffects = false, splatScale = 1.0,
                 pointCloudModeEnabled = false, maxSphericalHarmonicsDegree = 0) {

        const customVertexVars = `
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;

        let vertexShaderSource = SplatMaterial.buildVertexShaderBase(dynamicMode, enableOptionalEffects,
                                                                     maxSphericalHarmonicsDegree, customVertexVars);
        vertexShaderSource += SplatMaterial2D.buildVertexShaderProjection();
        const fragmentShaderSource = SplatMaterial2D.buildFragmentShader();

        const uniforms = SplatMaterial.getUniforms(dynamicMode, enableOptionalEffects,
                                                   maxSphericalHarmonicsDegree, splatScale, pointCloudModeEnabled);

        uniforms['scaleRotationsTexture'] = {
            'type': 't',
            'value': null
        };
        uniforms['scaleRotationsTextureSize'] = {
            'type': 'v2',
            'value': new THREE.Vector2(1024, 1024)
        };

        const material = new THREE.ShaderMaterial({
            uniforms: uniforms,
            vertexShader: vertexShaderSource,
            fragmentShader: fragmentShaderSource,
            transparent: true,
            alphaTest: 1.0,
            blending: THREE.NormalBlending,
            depthTest: true,
            depthWrite: false,
            side: THREE.DoubleSide
        });

        return material;
    }

    static buildVertexShaderProjection() {

        // Original CUDA code for calculating splat-to-screen transformation, for reference
        /*
            glm::mat3 R = quat_to_rotmat(rot);
            glm::mat3 S = scale_to_mat(scale, mod);
            glm::mat3 L = R * S;

            // center of Gaussians in the camera coordinate
            glm::mat3x4 splat2world = glm::mat3x4(
                glm::vec4(L[0], 0.0),
                glm::vec4(L[1], 0.0),
                glm::vec4(p_orig.x, p_orig.y, p_orig.z, 1)
            );

            glm::mat4 world2ndc = glm::mat4(
                projmatrix[0], projmatrix[4], projmatrix[8], projmatrix[12],
                projmatrix[1], projmatrix[5], projmatrix[9], projmatrix[13],
                projmatrix[2], projmatrix[6], projmatrix[10], projmatrix[14],
                projmatrix[3], projmatrix[7], projmatrix[11], projmatrix[15]
            );

            glm::mat3x4 ndc2pix = glm::mat3x4(
                glm::vec4(float(W) / 2.0, 0.0, 0.0, float(W-1) / 2.0),
                glm::vec4(0.0, float(H) / 2.0, 0.0, float(H-1) / 2.0),
                glm::vec4(0.0, 0.0, 0.0, 1.0)
            );

            T = glm::transpose(splat2world) * world2ndc * ndc2pix;
            normal = transformVec4x3({L[2].x, L[2].y, L[2].z}, viewmatrix);
        */

        // Compute a 2D-to-2D mapping matrix from a tangent plane into a image plane
        // given a 2D gaussian parameters. T = WH (from the paper: https://arxiv.org/pdf/2403.17888)
        let vertexShaderSource = `

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;

        // Original CUDA code for projection to 2D, for reference
        /*
            float3 T0 = {T[0][0], T[0][1], T[0][2]};
            float3 T1 = {T[1][0], T[1][1], T[1][2]};
            float3 T3 = {T[2][0], T[2][1], T[2][2]};

            // Compute AABB
            float3 temp_point = {1.0f, 1.0f, -1.0f};
            float distance = sumf3(T3 * T3 * temp_point);
            float3 f = (1 / distance) * temp_point;
            if (distance == 0.0) return false;

            point_image = {
                sumf3(f * T0 * T3),
                sumf3(f * T1 * T3)
            };

            float2 temp = {
                sumf3(f * T0 * T0),
                sumf3(f * T1 * T1)
            };
            float2 half_extend = point_image * point_image - temp;
            extent = sqrtf2(maxf2(1e-4, half_extend));
            return true;
        */

        // Computing the bounding box of the 2D Gaussian and its center
        // The center of the bounding box is used to create a low pass filter.
        // This code is based off the reference implementation and creates an AABB aligned
        // with the screen for the quad to be rendered.
        const referenceQuadGeneration = `
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        `;
        {
            // Create a quad that is aligned with the eigen vectors of the projected gaussian for rendering.
            // This is a different approach than the reference implementation, similar to how the rendering of
            // 3D gaussians in this viewer differs from the reference implementation. If the quad is too small
            // (smaller than a pixel), then revert to the reference implementation.
            vertexShaderSource += `

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    ${referenceQuadGeneration}
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `;
        }

        vertexShaderSource += SplatMaterial.getVertexShaderFadeIn();
        vertexShaderSource += `}`;

        return vertexShaderSource;
    }

    static buildFragmentShader() {

        // Original CUDA code for splat intersection, for reference
        /*
            const float2 xy = collected_xy[j];
            const float3 Tu = collected_Tu[j];
            const float3 Tv = collected_Tv[j];
            const float3 Tw = collected_Tw[j];
            float3 k = pix.x * Tw - Tu;
            float3 l = pix.y * Tw - Tv;
            float3 p = cross(k, l);
            if (p.z == 0.0) continue;
            float2 s = {p.x / p.z, p.y / p.z};
            float rho3d = (s.x * s.x + s.y * s.y);
            float2 d = {xy.x - pixf.x, xy.y - pixf.y};
            float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y);

            // compute intersection and depth
            float rho = min(rho3d, rho2d);
            float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z;
            if (depth < near_n) continue;
            float4 nor_o = collected_normal_opacity[j];
            float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
            float opa = nor_o.w;

            float power = -0.5f * rho;
            if (power > 0.0f)
                continue;

            // Eq. (2) from 3D Gaussian splatting paper.
            // Obtain alpha by multiplying with Gaussian opacity
            // and its exponential falloff from mean.
            // Avoid numerical instabilities (see paper appendix).
            float alpha = min(0.99f, opa * exp(power));
            if (alpha < 1.0f / 255.0f)
                continue;
            float test_T = T * (1 - alpha);
            if (test_T < 0.0001f)
            {
                done = true;
                continue;
            }

            float w = alpha * T;
        */
        let fragmentShaderSource = `
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `;

        return fragmentShaderSource;
    }
}

/**
 * SplatMesh
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME bone texture handling
 * - Added expression blendshape support
 * - Extended with skinning data management
 * - Additional ~800 lines of FLAME-specific code
 */


const logger$4 = getLogger('SplatMesh');

// Dummy geometry and material for initial Mesh construction
const dummyGeometry = new THREE.BufferGeometry();
const dummyMaterial = new THREE.MeshBasicMaterial();

/**
 * WebGL Extensions helper (from Three.js internals)
 */
function WebGLExtensions$1(gl) {
    const extensions = {};

    function getExtension(name) {
        if (extensions[name] !== undefined) {
            return extensions[name];
        }

        let extension;
        switch (name) {
            case 'WEBGL_depth_texture':
                extension = gl.getExtension('WEBGL_depth_texture') || gl.getExtension('MOZ_WEBGL_depth_texture') ||
                            gl.getExtension('WEBKIT_WEBGL_depth_texture');
                break;
            case 'EXT_texture_filter_anisotropic':
                extension = gl.getExtension('EXT_texture_filter_anisotropic') ||
                            gl.getExtension('MOZ_EXT_texture_filter_anisotropic') ||
                            gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');
                break;
            case 'WEBGL_compressed_texture_s3tc':
                extension = gl.getExtension('WEBGL_compressed_texture_s3tc') ||
                            gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') ||
                            gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');
                break;
            case 'WEBGL_compressed_texture_pvrtc':
                extension = gl.getExtension('WEBGL_compressed_texture_pvrtc') ||
                            gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');
                break;
            default:
                extension = gl.getExtension(name);
        }

        extensions[name] = extension;
        return extension;
    }

    return {
        has: function(name) {
            return getExtension(name) !== null;
        },
        init: function(capabilities) {
            if (capabilities.isWebGL2) {
                getExtension('EXT_color_buffer_float');
                getExtension('WEBGL_clip_cull_distance');
            } else {
                getExtension('WEBGL_depth_texture');
                getExtension('OES_texture_float');
                getExtension('OES_texture_half_float');
                getExtension('OES_texture_half_float_linear');
                getExtension('OES_standard_derivatives');
                getExtension('OES_element_index_uint');
                getExtension('OES_vertex_array_object');
                getExtension('ANGLE_instanced_arrays');
            }
            getExtension('OES_texture_float_linear');
            getExtension('EXT_color_buffer_half_float');
            getExtension('WEBGL_multisampled_render_to_texture');
        },
        get: function(name) {
            const extension = getExtension(name);
            if (extension === null) {
                logger$4.warn('THREE.WebGLRenderer: ' + name + ' extension not supported.');
            }
            return extension;
        }
    };
}

/**
 * WebGL Capabilities helper (from Three.js internals)
 */
function WebGLCapabilities$1(gl, extensions, parameters) {
    let maxAnisotropy;

    function getMaxAnisotropy() {
        if (maxAnisotropy !== undefined) return maxAnisotropy;
        if (extensions.has('EXT_texture_filter_anisotropic') === true) {
            const extension = extensions.get('EXT_texture_filter_anisotropic');
            maxAnisotropy = gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
        } else {
            maxAnisotropy = 0;
        }
        return maxAnisotropy;
    }

    function getMaxPrecision(precision) {
        if (precision === 'highp') {
            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision > 0 &&
                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision > 0) {
                return 'highp';
            }
            precision = 'mediump';
        }
        if (precision === 'mediump') {
            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision > 0 &&
                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision > 0) {
                return 'mediump';
            }
        }
        return 'lowp';
    }

    const isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl.constructor.name === 'WebGL2RenderingContext';

    let precision = parameters.precision !== undefined ? parameters.precision : 'highp';
    const maxPrecision = getMaxPrecision(precision);

    if (maxPrecision !== precision) {
        logger$4.warn('THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.');
        precision = maxPrecision;
    }

    const drawBuffers = isWebGL2 || extensions.has('WEBGL_draw_buffers');
    const logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;

    const maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
    const maxVertexTextures = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
    const maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);
    const maxCubemapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);

    const maxAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);
    const maxVertexUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
    const maxVaryings = gl.getParameter(gl.MAX_VARYING_VECTORS);
    const maxFragmentUniforms = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);

    const vertexTextures = maxVertexTextures > 0;
    const floatFragmentTextures = isWebGL2 || extensions.has('OES_texture_float');
    const floatVertexTextures = vertexTextures && floatFragmentTextures;

    const maxSamples = isWebGL2 ? gl.getParameter(gl.MAX_SAMPLES) : 0;

    return {
        isWebGL2: isWebGL2,
        drawBuffers: drawBuffers,
        getMaxAnisotropy: getMaxAnisotropy,
        getMaxPrecision: getMaxPrecision,
        precision: precision,
        logarithmicDepthBuffer: logarithmicDepthBuffer,
        maxTextures: maxTextures,
        maxVertexTextures: maxVertexTextures,
        maxTextureSize: maxTextureSize,
        maxCubemapSize: maxCubemapSize,
        maxAttributes: maxAttributes,
        maxVertexUniforms: maxVertexUniforms,
        maxVaryings: maxVaryings,
        maxFragmentUniforms: maxFragmentUniforms,
        vertexTextures: vertexTextures,
        floatFragmentTextures: floatFragmentTextures,
        floatVertexTextures: floatVertexTextures,
        maxSamples: maxSamples
    };
}

/**
 * WebGL Utils helper (from Three.js internals)
 */
function WebGLUtils$1(gl, extensions, capabilities) {
    const isWebGL2 = capabilities.isWebGL2;

    function convert(p, colorSpace) {
        let extension;

        if (p === THREE.UnsignedByteType) return gl.UNSIGNED_BYTE;
        if (p === 1017) return gl.UNSIGNED_SHORT_4_4_4_4;
        if (p === 1018) return gl.UNSIGNED_SHORT_5_5_5_1;
        if (p === 1010) return gl.BYTE;
        if (p === 1011) return gl.SHORT;
        if (p === 1012) return gl.UNSIGNED_SHORT;
        if (p === 1013) return gl.INT;
        if (p === 1014) return gl.UNSIGNED_INT;
        if (p === THREE.FloatType) return gl.FLOAT;

        if (p === THREE.HalfFloatType) {
            if (isWebGL2) return gl.HALF_FLOAT;
            extension = extensions.get('OES_texture_half_float');
            if (extension !== null) {
                return extension.HALF_FLOAT_OES;
            } else {
                return null;
            }
        }

        if (p === 1021) return gl.ALPHA;
        if (p === 1022) return gl.RGB;
        if (p === THREE.RGBAFormat) return gl.RGBA;
        if (p === 1024) return gl.LUMINANCE;
        if (p === 1025) return gl.LUMINANCE_ALPHA;
        if (p === 1026) return gl.DEPTH_COMPONENT;
        if (p === 1027) return gl.DEPTH_STENCIL;

        // WebGL2 formats
        if (p === THREE.RedFormat) return gl.RED;
        if (p === THREE.RedIntegerFormat) return gl.RED_INTEGER;
        if (p === THREE.RGFormat) return gl.RG;
        if (p === THREE.RGIntegerFormat) return gl.RG_INTEGER;
        if (p === THREE.RGBIntegerFormat) return gl.RGB_INTEGER;
        if (p === THREE.RGBAIntegerFormat) return gl.RGBA_INTEGER;

        // S3TC
        if (p === 33776 || p === 33777 || p === 33778 || p === 33779) {
            extension = extensions.get('WEBGL_compressed_texture_s3tc');
            if (extension !== null) {
                if (p === 33776) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (p === 33777) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (p === 33778) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (p === 33779) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            } else {
                return null;
            }
        }

        // PVRTC
        if (p === 35840 || p === 35841 || p === 35842 || p === 35843) {
            extension = extensions.get('WEBGL_compressed_texture_pvrtc');
            if (extension !== null) {
                if (p === 35840) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (p === 35841) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (p === 35842) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (p === 35843) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            } else {
                return null;
            }
        }

        // ETC
        if (p === 36196) {
            extension = extensions.get('WEBGL_compressed_texture_etc1');
            if (extension !== null) {
                return extension.COMPRESSED_RGB_ETC1_WEBGL;
            } else {
                return null;
            }
        }

        // ASTC
        if (p >= 37808 && p <= 37814 || p >= 37840 && p <= 37846) {
            extension = extensions.get('WEBGL_compressed_texture_astc');
            if (extension !== null) {
                return p;
            } else {
                return null;
            }
        }

        // BPTC
        if (p === 36492 || p === 36494 || p === 36495) {
            extension = extensions.get('EXT_texture_compression_bptc');
            if (extension !== null) {
                return p;
            } else {
                return null;
            }
        }

        if (p === 34042) return gl.UNSIGNED_INT_24_8;

        // Internal formats for float/half-float textures
        if (isWebGL2) {
            if (p === 6407) return gl.RGB;
            if (p === 6408) return gl.RGBA;
        }

        return (gl[p] !== undefined) ? gl[p] : null;
    }

    return {
        convert: convert
    };
}

// Constants for texture element counts
const COVARIANCES_ELEMENTS_PER_SPLAT = 6;
const CENTER_COLORS_ELEMENTS_PER_SPLAT = 4;

const COVARIANCES_ELEMENTS_PER_TEXEL_STORED = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED = 6;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED = 8;
const SCALES_ROTATIONS_ELEMENTS_PER_TEXEL = 4;
const CENTER_COLORS_ELEMENTS_PER_TEXEL = 4;
const SCENE_INDEXES_ELEMENTS_PER_TEXEL = 1;

const SCENE_FADEIN_RATE_FAST = 0.012;
const SCENE_FADEIN_RATE_GRADUAL = 0.003;

const VISIBLE_REGION_EXPANSION_DELTA = 1;

const MAX_TEXTURE_TEXELS = 16777216;

class SplatMesh extends THREE.Mesh {

    constructor(splatRenderMode = SplatRenderMode.ThreeD, dynamicMode = false, enableOptionalEffects = false,
                halfPrecisionCovariancesOnGPU = false, devicePixelRatio = 1, enableDistancesComputationOnGPU = true,
                integerBasedDistancesComputation = false, antialiased = false, maxScreenSpaceSplatSize = 1024, logLevel = LogLevel.None,
                sphericalHarmonicsDegree = 0, sceneFadeInRateMultiplier = 1.0, kernel2DSize = 0.3, irisOcclusionConfig = null) {
        super(dummyGeometry, dummyMaterial);

        // Reference to a Three.js renderer
        this.renderer = undefined;

        // Determine how the splats are rendered
        this.splatRenderMode = splatRenderMode;

        // When 'dynamicMode' is true, scenes are assumed to be non-static. Dynamic scenes are handled differently
        // and certain optimizations cannot be made for them. Additionally, by default, all splat data retrieved from
        // this splat mesh will not have their scene transform applied to them if the splat mesh is dynamic. That
        // can be overriden via parameters to the individual functions that are used to retrieve splat data.
        this.dynamicMode = dynamicMode;

        // When true, allows for usage of extra properties and attributes during rendering for effects such as opacity adjustment.
        // Default is false for performance reasons. These properties are separate from transform properties (scale, rotation, position)
        // that are enabled by the 'dynamicScene' parameter.
        this.enableOptionalEffects = enableOptionalEffects;

        // Use 16-bit floating point values when storing splat covariance data in textures, instead of 32-bit
        this.halfPrecisionCovariancesOnGPU = halfPrecisionCovariancesOnGPU;

        // Ratio of the resolution in physical pixels to the resolution in CSS pixels for the current display device
        this.devicePixelRatio = devicePixelRatio;

        // Use a transform feedback to calculate splat distances from the camera
        this.enableDistancesComputationOnGPU = enableDistancesComputationOnGPU;

        // Use a faster integer-based approach for calculating splat distances from the camera
        this.integerBasedDistancesComputation = integerBasedDistancesComputation;

        // When true, will perform additional steps during rendering to address artifacts caused by the rendering of gaussians at a
        // substantially different resolution than that at which they were rendered during training. This will only work correctly
        // for models that were trained using a process that utilizes this compensation calculation. For more details:
        // https://github.com/nerfstudio-project/gsplat/pull/117
        // https://github.com/graphdeco-inria/gaussian-splatting/issues/294#issuecomment-1772688093
        this.antialiased = antialiased;

        // The size of the 2D kernel used for splat rendering
        // This will adjust the 2D kernel size after the projection
        this.kernel2DSize = kernel2DSize;

        // Specify the maximum clip space splat size, can help deal with large splats that get too unwieldy
        this.maxScreenSpaceSplatSize = maxScreenSpaceSplatSize;

        // The verbosity of console logging
        this.logLevel = logLevel;

        // Degree 0 means no spherical harmonics
        this.sphericalHarmonicsDegree = sphericalHarmonicsDegree;
        this.minSphericalHarmonicsDegree = 0;

        this.sceneFadeInRateMultiplier = sceneFadeInRateMultiplier;

        // The individual splat scenes stored in this splat mesh, each containing their own transform
        this.scenes = [];

        // Special octree tailored to SplatMesh instances
        this.splatTree = null;
        this.baseSplatTree = null;

        // Cache textures and the intermediate data used to populate them
        this.splatDataTextures = {};
        this.flameModel = null;
        this.expressionBSNum = 0;
        this.bsWeight = [];

        this.bonesMatrix = null;
        this.bonesNum = null;
        this.bonesWeight = null;
        this.gaussianSplatCount = null;

        this.morphTargetDictionary = null;
        this.distancesTransformFeedback = {
            'id': null,
            'vertexShader': null,
            'fragmentShader': null,
            'program': null,
            'centersBuffer': null,
            'sceneIndexesBuffer': null,
            'outDistancesBuffer': null,
            'centersLoc': -1,
            'modelViewProjLoc': -1,
            'sceneIndexesLoc': -1,
            'transformsLocs': []
        };

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSceneIndexMap = [];

        // Optional iris occlusion configuration from avatar ZIP
        this.irisOcclusionConfig = irisOcclusionConfig;

        this.lastBuildSplatCount = 0;
        this.lastBuildScenes = [];
        this.lastBuildMaxSplatCount = 0;
        this.lastBuildSceneCount = 0;
        this.firstRenderTime = -1;
        this.finalBuild = false;

        this.webGLUtils = null;

        this.boundingBox = new THREE.Box3();
        this.calculatedSceneCenter = new THREE.Vector3();
        this.maxSplatDistanceFromSceneCenter = 0;
        this.visibleRegionBufferRadius = 0;
        this.visibleRegionRadius = 0;
        this.visibleRegionFadeStartRadius = 0;
        this.visibleRegionChanging = false;

        this.splatScale = 1.0;
        this.pointCloudModeEnabled = false;

        this.disposed = false;
        this.lastRenderer = null;
        this.visible = false;
    }

    /**
     * Build a container for each scene managed by this splat mesh based on an instance of SplatBuffer, along with optional
     * transform data (position, scale, rotation) passed to the splat mesh during the build process.
     * @param {Array<THREE.Matrix4>} splatBuffers SplatBuffer instances containing splats for each scene
     * @param {Array<object>} sceneOptions Array of options objects: {
     *
     *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
     *
     *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
     *
     *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
     * }
     * @return {Array<THREE.Matrix4>}
     */
    static buildScenes(parentObject, splatBuffers, sceneOptions) {
        const scenes = [];
        scenes.length = splatBuffers.length;
        for (let i = 0; i < splatBuffers.length; i++) {
            const splatBuffer = splatBuffers[i];
            const options = sceneOptions[i] || {};
            let positionArray = options['position'] || [0, 0, 0];
            let rotationArray = options['rotation'] || [0, 0, 0, 1];
            let scaleArray = options['scale'] || [1, 1, 1];
            const position = new THREE.Vector3().fromArray(positionArray);
            const rotation = new THREE.Quaternion().fromArray(rotationArray);
            const scale = new THREE.Vector3().fromArray(scaleArray);
            const scene = SplatMesh.createScene(splatBuffer, position, rotation, scale,
                                                options.splatAlphaRemovalThreshold || 1, options.opacity, options.visible);
            parentObject.add(scene);
            scenes[i] = scene;
        }
        return scenes;
    }



    static createScene(splatBuffer, position, rotation, scale, minimumAlpha, opacity = 1.0, visible = true) {
        return new SplatScene(splatBuffer, position, rotation, scale, minimumAlpha, opacity, visible);
    }

    /**
     * Build data structures that map global splat indexes (based on a unified index across all splat buffers) to
     * local data within a single scene.
     * @param {Array<SplatBuffer>} splatBuffers Instances of SplatBuffer off which to build the maps
     * @return {object}
     */
    static buildSplatIndexMaps(splatBuffers) {
        const localSplatIndexMap = [];
        const sceneIndexMap = [];
        let totalSplatCount = 0;
        for (let s = 0; s < splatBuffers.length; s++) {
            const splatBuffer = splatBuffers[s];
            const maxSplatCount = splatBuffer.getMaxSplatCount();
            for (let i = 0; i < maxSplatCount; i++) {
                localSplatIndexMap[totalSplatCount] = i;
                sceneIndexMap[totalSplatCount] = s;
                totalSplatCount++;
            }
        }
        return {
            localSplatIndexMap,
            sceneIndexMap
        };
    }

    /**
     * Build an instance of SplatTree (a specialized octree) for the given splat mesh.
     * @param {Array<number>} minAlphas Array of minimum splat slphas for each scene
     * @param {function} onSplatTreeIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                            builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {SplatTree}
     */
     buildSplatTree = (minAlphas = [], onSplatTreeIndexesUpload, onSplatTreeConstruction) => {
        return new Promise((resolve) => {
            this.disposeSplatTree();
            // TODO: expose SplatTree constructor parameters (maximumDepth and maxCentersPerNode) so that they can
            // be configured on a per-scene basis
            this.baseSplatTree = new SplatTree(8, 1000);
            const buildStartTime = performance.now();
            const splatColor = new THREE.Vector4();
            this.baseSplatTree.processSplatMesh(this, (splatIndex) => {
                this.getSplatColor(splatIndex, splatColor);
                const sceneIndex = this.getSceneIndexForSplat(splatIndex);
                const minAlpha = minAlphas[sceneIndex] || 1;
                return splatColor.w >= minAlpha;
            }, onSplatTreeIndexesUpload, onSplatTreeConstruction)
            .then(() => {
                const buildTime = performance.now() - buildStartTime;
                if (this.logLevel >= LogLevel.Info) logger$4.info('SplatTree build: ' + buildTime + ' ms');
                if (this.disposed) {
                    resolve();
                } else {

                    this.splatTree = this.baseSplatTree;
                    this.baseSplatTree = null;

                    let leavesWithVertices = 0;
                    let avgSplatCount = 0;
                    let nodeCount = 0;

                    this.splatTree.visitLeaves((node) => {
                        const nodeSplatCount = node.data.indexes.length;
                        if (nodeSplatCount > 0) {
                            avgSplatCount += nodeSplatCount;
                            nodeCount++;
                            leavesWithVertices++;
                        }
                    });
                    if (this.logLevel >= LogLevel.Info) {
                        logger$4.info(`SplatTree leaves: ${this.splatTree.countLeaves()}`);
                        logger$4.info(`SplatTree leaves with splats:${leavesWithVertices}`);
                        avgSplatCount = avgSplatCount / nodeCount;
                        logger$4.info(`Avg splat count per node: ${avgSplatCount}`);
                        logger$4.info(`Total splat count: ${this.getSplatCount()}`);
                    }
                    resolve();
                }
            });
        });
    };

    /**
     * Construct this instance of SplatMesh.
     * @param {Array<SplatBuffer>} splatBuffers The base splat data, instances of SplatBuffer
     * @param {Array<object>} sceneOptions Dynamic options for each scene {
     *
     *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
     *                                     value (valid range: 0 - 255), defaults to 1
     *
     *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
     *
     *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
     *
     *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
     *
     * }
     * @param {boolean} keepSceneTransforms For a scene that already exists and is being overwritten, this flag
     *                                      says to keep the transform from the existing scene.
     * @param {boolean} finalBuild Will the splat mesh be in its final state after this build?
     * @param {function} onSplatTreeIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                            builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {object} Object containing info about the splats that are updated
     */
    build(splatBuffers, sceneOptions, keepSceneTransforms = true, finalBuild = false,
          onSplatTreeIndexesUpload, onSplatTreeConstruction, preserveVisibleRegion = true) {

        this.sceneOptions = sceneOptions;
        this.finalBuild = finalBuild;

        const maxSplatCount = SplatMesh.getTotalMaxSplatCountForSplatBuffers(splatBuffers);

        const newScenes = SplatMesh.buildScenes(this, splatBuffers, sceneOptions);
        if (keepSceneTransforms) {
            for (let i = 0; i < this.scenes.length && i < newScenes.length; i++) {
                const newScene = newScenes[i];
                const existingScene = this.getScene(i);
                newScene.copyTransformData(existingScene);
            }
        }
        this.scenes = newScenes;

        let minSphericalHarmonicsDegree = 3;
        for (let splatBuffer of splatBuffers) {
            const splatBufferSphericalHarmonicsDegree = splatBuffer.getMinSphericalHarmonicsDegree();
            if (splatBufferSphericalHarmonicsDegree < minSphericalHarmonicsDegree) {
                minSphericalHarmonicsDegree = splatBufferSphericalHarmonicsDegree;
            }
        }
        this.minSphericalHarmonicsDegree = Math.min(minSphericalHarmonicsDegree, this.sphericalHarmonicsDegree);

        let splatBuffersChanged = false;
        if (splatBuffers.length !== this.lastBuildScenes.length) {
            splatBuffersChanged = true;
        } else {
            for (let i = 0; i < splatBuffers.length; i++) {
                const splatBuffer = splatBuffers[i];
                if (splatBuffer !== this.lastBuildScenes[i].splatBuffer) {
                    splatBuffersChanged = true;
                    break;
                }
            }
        }

        let isUpdateBuild = true;
        if (this.scenes.length !== 1 ||
            this.lastBuildSceneCount !== this.scenes.length ||
            this.lastBuildMaxSplatCount !== maxSplatCount ||
            splatBuffersChanged) {
                isUpdateBuild = false;
       }

       if (!isUpdateBuild) {
            this.boundingBox = new THREE.Box3();
            if (!preserveVisibleRegion) {
                this.maxSplatDistanceFromSceneCenter = 0;
                this.visibleRegionBufferRadius = 0;
                this.visibleRegionRadius = 0;
                this.visibleRegionFadeStartRadius = 0;
                this.firstRenderTime = -1;
            }
            this.lastBuildScenes = [];
            this.lastBuildSplatCount = 0;
            this.lastBuildMaxSplatCount = 0;
            this.disposeMeshData();
            this.geometry = SplatGeometry.build(maxSplatCount);
            if (this.splatRenderMode === SplatRenderMode.ThreeD) {
                this.material = SplatMaterial3D.build(this.dynamicMode, this.enableOptionalEffects, this.antialiased,
                                                      this.maxScreenSpaceSplatSize, this.splatScale, this.pointCloudModeEnabled,
                                                      this.minSphericalHarmonicsDegree, this.kernel2DSize, this.irisOcclusionConfig);
            } else {
                this.material = SplatMaterial2D.build(this.dynamicMode, this.enableOptionalEffects,
                                                      this.splatScale, this.pointCloudModeEnabled, this.minSphericalHarmonicsDegree);
            }

            const indexMaps = SplatMesh.buildSplatIndexMaps(splatBuffers);
            this.globalSplatIndexToLocalSplatIndexMap = indexMaps.localSplatIndexMap;
            this.globalSplatIndexToSceneIndexMap = indexMaps.sceneIndexMap;
        }

        const splatBufferSplatCount = this.getSplatCount(true);
        if (this.enableDistancesComputationOnGPU) this.setupDistancesComputationTransformFeedback();
        const dataUpdateResults = this.refreshGPUDataFromSplatBuffers(isUpdateBuild);

        for (let i = 0; i < this.scenes.length; i++) {
            this.lastBuildScenes[i] = this.scenes[i];
        }
        this.lastBuildSplatCount = splatBufferSplatCount;
        this.lastBuildMaxSplatCount = this.getMaxSplatCount();
        this.lastBuildSceneCount = this.scenes.length;

        // if (finalBuild && this.scenes.length > 0) {
        //     this.buildSplatTree(sceneOptions.map(options => options.splatAlphaRemovalThreshold || 1),
        //                         onSplatTreeIndexesUpload, onSplatTreeConstruction)
        //     .then(() => {
        //         if (this.onSplatTreeReadyCallback) this.onSplatTreeReadyCallback(this.splatTree);
        //         this.onSplatTreeReadyCallback = null;
        //     });
        // }

        this.visible = (this.scenes.length > 0);

        return dataUpdateResults;
    }

    freeIntermediateSplatData() {

        const deleteTextureData = (texture) => {
            delete texture.source.data;
            delete texture.image;
            texture.onUpdate = null;
        };

        delete this.splatDataTextures.baseData.covariances;
        delete this.splatDataTextures.baseData.centers;
        delete this.splatDataTextures.baseData.colors;
        delete this.splatDataTextures.baseData.sphericalHarmonics;

        delete this.splatDataTextures.centerColors.data;
        delete this.splatDataTextures.covariances.data;
        if (this.splatDataTextures.sphericalHarmonics) {
            delete this.splatDataTextures.sphericalHarmonics.data;
        }
        if (this.splatDataTextures.sceneIndexes) {
            delete this.splatDataTextures.sceneIndexes.data;
        }

        this.splatDataTextures.centerColors.texture.needsUpdate = true;
        this.splatDataTextures.centerColors.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.centerColors.texture);
        };

        this.splatDataTextures.flameModelPosTexture.texture.needsUpdate = true;
        this.splatDataTextures.flameModelPosTexture.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.flameModelPosTexture.texture);
        };

        this.splatDataTextures.covariances.texture.needsUpdate = true;
        this.splatDataTextures.covariances.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.covariances.texture);
        };

        if (this.splatDataTextures.sphericalHarmonics) {
            if (this.splatDataTextures.sphericalHarmonics.texture) {
                this.splatDataTextures.sphericalHarmonics.texture.needsUpdate = true;
                this.splatDataTextures.sphericalHarmonics.texture.onUpdate = () => {
                    deleteTextureData(this.splatDataTextures.sphericalHarmonics.texture);
                };
            } else {
                this.splatDataTextures.sphericalHarmonics.textures.forEach((texture) => {
                    texture.needsUpdate = true;
                    texture.onUpdate = () => {
                        deleteTextureData(texture);
                    };
                });
            }
        }
        if (this.splatDataTextures.sceneIndexes) {
            this.splatDataTextures.sceneIndexes.texture.needsUpdate = true;
            this.splatDataTextures.sceneIndexes.texture.onUpdate = () => {
                deleteTextureData(this.splatDataTextures.sceneIndexes.texture);
            };
        }
    }
    /**
     * Dispose all resources held by the splat mesh
     */
    dispose() {
        this.disposeMeshData();
        this.disposeTextures();
        this.disposeSplatTree();
        if (this.enableDistancesComputationOnGPU) {
            if (this.computeDistancesOnGPUSyncTimeout) {
                clearTimeout(this.computeDistancesOnGPUSyncTimeout);
                this.computeDistancesOnGPUSyncTimeout = null;
            }
            this.disposeDistancesComputationGPUResources();
        }
        this.scenes = [];
        this.distancesTransformFeedback = {
            'id': null,
            'vertexShader': null,
            'fragmentShader': null,
            'program': null,
            'centersBuffer': null,
            'sceneIndexesBuffer': null,
            'outDistancesBuffer': null,
            'centersLoc': -1,
            'modelViewProjLoc': -1,
            'sceneIndexesLoc': -1,
            'transformsLocs': []
        };
        this.renderer = null;

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSceneIndexMap = [];

        this.lastBuildSplatCount = 0;
        this.lastBuildScenes = [];
        this.lastBuildMaxSplatCount = 0;
        this.lastBuildSceneCount = 0;
        this.firstRenderTime = -1;
        this.finalBuild = false;

        this.webGLUtils = null;

        this.boundingBox = new THREE.Box3();
        this.calculatedSceneCenter = new THREE.Vector3();
        this.maxSplatDistanceFromSceneCenter = 0;
        this.visibleRegionBufferRadius = 0;
        this.visibleRegionRadius = 0;
        this.visibleRegionFadeStartRadius = 0;
        this.visibleRegionChanging = false;

        this.splatScale = 1.0;
        this.pointCloudModeEnabled = false;

        this.disposed = true;
        this.lastRenderer = null;
        this.visible = false;
    }

    /**
     * Dispose of only the Three.js mesh resources (geometry, material, and texture)
     */
    disposeMeshData() {
        if (this.geometry && this.geometry !== dummyGeometry) {
            this.geometry.dispose();
            this.geometry = null;
        }
        if (this.material) {
            this.material.dispose();
            this.material = null;
        }
    }

    disposeTextures() {
        for (let textureKey in this.splatDataTextures) {
            if (Object.hasOwn(this.splatDataTextures, textureKey)) {
                const textureContainer = this.splatDataTextures[textureKey];
                if (textureContainer.texture) {
                    textureContainer.texture.dispose();
                    textureContainer.texture = null;
                }
            }
        }
        this.splatDataTextures = null;
    }

    disposeSplatTree() {
        if (this.splatTree) {
            this.splatTree.dispose();
            this.splatTree = null;
        }
        if (this.baseSplatTree) {
            this.baseSplatTree.dispose();
            this.baseSplatTree = null;
        }
    }

    getSplatTree() {
        return this.splatTree;
    }

    onSplatTreeReady(callback) {
        this.onSplatTreeReadyCallback = callback;
    }

    /**
     * Get copies of data that are necessary for splat distance computation: splat center positions and splat
     * scene indexes (necessary for applying dynamic scene transformations during distance computation)
     * @param {*} start The index at which to start copying data
     * @param {*} end  The index at which to stop copying data
     * @return {object}
     */
    getDataForDistancesComputation(start, end) {
        const centers = this.integerBasedDistancesComputation ?
                        this.getIntegerCenters(start, end, true) :
                        this.getFloatCenters(start, end, true);
        const sceneIndexes = this.getSceneIndexes(start, end);
        return {
            centers,
            sceneIndexes
        };
    }

    /**
     * Refresh data textures and GPU buffers with splat data from the splat buffers belonging to this mesh.
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     * @return {object}
     */
    refreshGPUDataFromSplatBuffers(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        this.refreshDataTexturesFromSplatBuffers(sinceLastBuildOnly);
        const updateStart = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        const { centers, sceneIndexes } = this.getDataForDistancesComputation(updateStart, splatCount - 1);
        if (this.enableDistancesComputationOnGPU) {
            this.refreshGPUBuffersForDistancesComputation(centers, sceneIndexes, sinceLastBuildOnly);
        }
        return {
            'from': updateStart,
            'to': splatCount - 1,
            'count': splatCount - updateStart,
            'centers': centers,
            'sceneIndexes': sceneIndexes
        };
    }

    /**
     * Update the GPU buffers that are used for computing splat distances on the GPU.
     * @param {Array<number>} centers Splat center positions
     * @param {Array<number>} sceneIndexes Indexes of the scene to which each splat belongs
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     */
    refreshGPUBuffersForDistancesComputation(centers, sceneIndexes, sinceLastBuildOnly = false) {
        const offset = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        this.updateGPUCentersBufferForDistancesComputation(sinceLastBuildOnly, centers, offset);
        this.updateGPUTransformIndexesBufferForDistancesComputation(sinceLastBuildOnly, sceneIndexes, offset);
    }

    /**
     * Refresh data textures with data from the splat buffers for this mesh.
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     */
    refreshDataTexturesFromSplatBuffers(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        const fromSplat = this.lastBuildSplatCount;
        const toSplat = splatCount - 1;

        if (!sinceLastBuildOnly) {
            this.setupDataTextures();
            this.updateBaseDataFromSplatBuffers();
        } else {
            this.updateBaseDataFromSplatBuffers(fromSplat, toSplat);
        }

        this.updateDataTexturesFromBaseData(fromSplat, toSplat);
        this.updateVisibleRegion(sinceLastBuildOnly);
    }

    setupDataTextures() {
        const maxSplatCount = this.getMaxSplatCount();
        const splatCount = this.getSplatCount(true);

        this.disposeTextures();

        const computeDataTextureSize = (elementsPerTexel, elementsPerSplat) => {
            const texSize = new THREE.Vector2(4096, 1024);
            while (texSize.x * texSize.y * elementsPerTexel < maxSplatCount * elementsPerSplat) texSize.y *= 2;
            return texSize;
        };

        const getCovariancesElementsPertexelStored = (compressionLevel) => {
            return compressionLevel >= 1 ? COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED : COVARIANCES_ELEMENTS_PER_TEXEL_STORED;
        };

        const getCovariancesInitialTextureSpecs = (compressionLevel) => {
            const elementsPerTexelStored = getCovariancesElementsPertexelStored(compressionLevel);
            const texSize = computeDataTextureSize(elementsPerTexelStored, 6);
            return {elementsPerTexelStored, texSize};
        };

        let covarianceCompressionLevel = this.getTargetCovarianceCompressionLevel();
        const scaleRotationCompressionLevel = 0;
        const shCompressionLevel = this.getTargetSphericalHarmonicsCompressionLevel();

        let covariances;
        let scales;
        let rotations;
        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            const initialCovTexSpecs = getCovariancesInitialTextureSpecs(covarianceCompressionLevel);
            if (initialCovTexSpecs.texSize.x * initialCovTexSpecs.texSize.y > MAX_TEXTURE_TEXELS && covarianceCompressionLevel === 0) {
                covarianceCompressionLevel = 1;
            }
            covariances = new Float32Array(maxSplatCount * COVARIANCES_ELEMENTS_PER_SPLAT);
        } else {
            scales = new Float32Array(maxSplatCount * 3);
            rotations = new Float32Array(maxSplatCount * 4);
        }

        const centers = new Float32Array(maxSplatCount * 3);
        const colors = new Uint8Array(maxSplatCount * 4);

        let SphericalHarmonicsArrayType = Float32Array;
        if (shCompressionLevel === 1) SphericalHarmonicsArrayType = Uint16Array;
        else if (shCompressionLevel === 2) SphericalHarmonicsArrayType = Uint8Array;
        const shComponentCount = getSphericalHarmonicsComponentCountForDegree(this.minSphericalHarmonicsDegree);
        const shData = this.minSphericalHarmonicsDegree ? new SphericalHarmonicsArrayType(maxSplatCount * shComponentCount) : undefined;

        // set up centers/colors data texture
        const centersColsTexSize = computeDataTextureSize(CENTER_COLORS_ELEMENTS_PER_TEXEL, 4);
        const paddedCentersCols = new Uint32Array(centersColsTexSize.x * centersColsTexSize.y * CENTER_COLORS_ELEMENTS_PER_TEXEL);
        SplatMesh.updateCenterColorsPaddedData(0, splatCount - 1, centers, colors, paddedCentersCols);

        const centersColsTex = new THREE.DataTexture(paddedCentersCols, centersColsTexSize.x, centersColsTexSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        centersColsTex.internalFormat = 'RGBA32UI';
        centersColsTex.needsUpdate = true;
        this.material.uniforms.centersColorsTexture.value = centersColsTex;
        this.material.uniforms.centersColorsTextureSize.value.copy(centersColsTexSize);
        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures = {
            'baseData': {
                'covariances': covariances,
                'scales': scales,
                'rotations': rotations,
                'centers': centers,
                'colors': colors,
                'sphericalHarmonics': shData
            },
            'centerColors': {
                'data': paddedCentersCols,
                'texture': centersColsTex,
                'size': centersColsTexSize
            }
        };

        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            // set up covariances data texture

            const covTexSpecs = getCovariancesInitialTextureSpecs(covarianceCompressionLevel);
            const covariancesElementsPerTexelStored = covTexSpecs.elementsPerTexelStored;
            const covTexSize = covTexSpecs.texSize;

            let CovariancesDataType = covarianceCompressionLevel >= 1 ? Uint32Array : Float32Array;
            const covariancesElementsPerTexelAllocated = covarianceCompressionLevel >= 1 ?
                                                         COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED :
                                                         COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED;
            const covariancesTextureData = new CovariancesDataType(covTexSize.x * covTexSize.y * covariancesElementsPerTexelAllocated);

            if (covarianceCompressionLevel === 0) {
                covariancesTextureData.set(covariances);
            } else {
                SplatMesh.updatePaddedCompressedCovariancesTextureData(covariances, covariancesTextureData, 0, 0, covariances.length);
            }

            let covTex;
            if (covarianceCompressionLevel >= 1) {
                covTex = new THREE.DataTexture(covariancesTextureData, covTexSize.x, covTexSize.y,
                                               THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
                covTex.internalFormat = 'RGBA32UI';
                this.material.uniforms.covariancesTextureHalfFloat.value = covTex;
            } else {
                covTex = new THREE.DataTexture(covariancesTextureData, covTexSize.x, covTexSize.y, THREE.RGBAFormat, THREE.FloatType);
                this.material.uniforms.covariancesTexture.value = covTex;

                // For some reason a usampler2D needs to have a valid texture attached or WebGL complains
                const dummyTex = new THREE.DataTexture(new Uint32Array(32), 2, 2, THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
                dummyTex.internalFormat = 'RGBA32UI';
                this.material.uniforms.covariancesTextureHalfFloat.value = dummyTex;
                dummyTex.needsUpdate = true;
            }
            covTex.needsUpdate = true;

            this.material.uniforms.covariancesAreHalfFloat.value = (covarianceCompressionLevel >= 1) ? 1 : 0;
            this.material.uniforms.covariancesTextureSize.value.copy(covTexSize);

            this.splatDataTextures['covariances'] = {
                'data': covariancesTextureData,
                'texture': covTex,
                'size': covTexSize,
                'compressionLevel': covarianceCompressionLevel,
                'elementsPerTexelStored': covariancesElementsPerTexelStored,
                'elementsPerTexelAllocated': covariancesElementsPerTexelAllocated
            };
        } else {
            // set up scale & rotations data texture
            const elementsPerSplat = 6;
            const scaleRotationsTexSize = computeDataTextureSize(SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, elementsPerSplat);
            let ScaleRotationsDataType = Float32Array;
            let scaleRotationsTextureType = THREE.FloatType;
            const paddedScaleRotations = new ScaleRotationsDataType(scaleRotationsTexSize.x * scaleRotationsTexSize.y *
                                                                    SCALES_ROTATIONS_ELEMENTS_PER_TEXEL);

            SplatMesh.updateScaleRotationsPaddedData(0, splatCount - 1, scales, rotations, paddedScaleRotations);

            const scaleRotationsTex = new THREE.DataTexture(paddedScaleRotations, scaleRotationsTexSize.x, scaleRotationsTexSize.y,
                                                            THREE.RGBAFormat, scaleRotationsTextureType);
            scaleRotationsTex.needsUpdate = true;
            this.material.uniforms.scaleRotationsTexture.value = scaleRotationsTex;
            this.material.uniforms.scaleRotationsTextureSize.value.copy(scaleRotationsTexSize);

            this.splatDataTextures['scaleRotations'] = {
                'data': paddedScaleRotations,
                'texture': scaleRotationsTex,
                'size': scaleRotationsTexSize,
                'compressionLevel': scaleRotationCompressionLevel
            };
        }

        if (shData) {
            const shTextureType = shCompressionLevel === 2 ? THREE.UnsignedByteType : THREE.HalfFloatType;

            let paddedSHComponentCount = shComponentCount;
            if (paddedSHComponentCount % 2 !== 0) paddedSHComponentCount++;
            const shElementsPerTexel = this.minSphericalHarmonicsDegree === 2 ? 4 : 2;
            const texelFormat = shElementsPerTexel === 4 ? THREE.RGBAFormat : THREE.RGFormat;
            let shTexSize = computeDataTextureSize(shElementsPerTexel, paddedSHComponentCount);

            // Use one texture for all spherical harmonics data
            if (shTexSize.x * shTexSize.y <= MAX_TEXTURE_TEXELS) {
                const paddedSHArraySize = shTexSize.x * shTexSize.y * shElementsPerTexel;
                const paddedSHArray = new SphericalHarmonicsArrayType(paddedSHArraySize);
                for (let c = 0; c < splatCount; c++) {
                    const srcBase = shComponentCount * c;
                    const destBase = paddedSHComponentCount * c;
                    for (let i = 0; i < shComponentCount; i++) {
                        paddedSHArray[destBase + i] = shData[srcBase + i];
                    }
                }

                const shTexture = new THREE.DataTexture(paddedSHArray, shTexSize.x, shTexSize.y, texelFormat, shTextureType);
                shTexture.needsUpdate = true;
                this.material.uniforms.sphericalHarmonicsTexture.value = shTexture;
                this.splatDataTextures['sphericalHarmonics'] = {
                    'componentCount': shComponentCount,
                    'paddedComponentCount': paddedSHComponentCount,
                    'data': paddedSHArray,
                    'textureCount': 1,
                    'texture': shTexture,
                    'size': shTexSize,
                    'compressionLevel': shCompressionLevel,
                    'elementsPerTexel': shElementsPerTexel
                };
            // Use three textures for spherical harmonics data, one per color channel
            } else {
                const shComponentCountPerChannel = shComponentCount / 3;
                paddedSHComponentCount = shComponentCountPerChannel;
                if (paddedSHComponentCount % 2 !== 0) paddedSHComponentCount++;
                shTexSize = computeDataTextureSize(shElementsPerTexel, paddedSHComponentCount);

                const paddedSHArraySize = shTexSize.x * shTexSize.y * shElementsPerTexel;
                const textureUniforms = [this.material.uniforms.sphericalHarmonicsTextureR,
                                         this.material.uniforms.sphericalHarmonicsTextureG,
                                         this.material.uniforms.sphericalHarmonicsTextureB];
                const paddedSHArrays = [];
                const shTextures = [];
                for (let t = 0; t < 3; t++) {
                    const paddedSHArray = new SphericalHarmonicsArrayType(paddedSHArraySize);
                    paddedSHArrays.push(paddedSHArray);
                    for (let c = 0; c < splatCount; c++) {
                        const srcBase = shComponentCount * c;
                        const destBase = paddedSHComponentCount * c;
                        if (shComponentCountPerChannel >= 3) {
                            for (let i = 0; i < 3; i++) paddedSHArray[destBase + i] = shData[srcBase + t * 3 + i];
                            if (shComponentCountPerChannel >= 8) {
                                for (let i = 0; i < 5; i++) paddedSHArray[destBase + 3 + i] = shData[srcBase + 9 + t * 5 + i];
                            }
                        }
                    }

                    const shTexture = new THREE.DataTexture(paddedSHArray, shTexSize.x, shTexSize.y, texelFormat, shTextureType);
                    shTextures.push(shTexture);
                    shTexture.needsUpdate = true;
                    textureUniforms[t].value = shTexture;
                }

                this.material.uniforms.sphericalHarmonicsMultiTextureMode.value = 1;
                this.splatDataTextures['sphericalHarmonics'] = {
                    'componentCount': shComponentCount,
                    'componentCountPerChannel': shComponentCountPerChannel,
                    'paddedComponentCount': paddedSHComponentCount,
                    'data': paddedSHArrays,
                    'textureCount': 3,
                    'textures': shTextures,
                    'size': shTexSize,
                    'compressionLevel': shCompressionLevel,
                    'elementsPerTexel': shElementsPerTexel
                };
            }

            this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(shTexSize);
            this.material.uniforms.sphericalHarmonics8BitMode.value = shCompressionLevel === 2 ? 1 : 0;
            for (let s = 0; s < this.scenes.length; s++) {
                const splatBuffer = this.scenes[s].splatBuffer;
                this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[s] =
                    splatBuffer.minSphericalHarmonicsCoeff;
                this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[s] =
                    splatBuffer.maxSphericalHarmonicsCoeff;
            }
            this.material.uniformsNeedUpdate = true;
        }

        const sceneIndexesTexSize = computeDataTextureSize(SCENE_INDEXES_ELEMENTS_PER_TEXEL, 4);
        const paddedTransformIndexes = new Uint32Array(sceneIndexesTexSize.x *
                                                       sceneIndexesTexSize.y * SCENE_INDEXES_ELEMENTS_PER_TEXEL);
        for (let c = 0; c < splatCount; c++) paddedTransformIndexes[c] = this.globalSplatIndexToSceneIndexMap[c];
        const sceneIndexesTexture = new THREE.DataTexture(paddedTransformIndexes, sceneIndexesTexSize.x, sceneIndexesTexSize.y,
                                                          THREE.RedIntegerFormat, THREE.UnsignedIntType);
        sceneIndexesTexture.internalFormat = 'R32UI';
        sceneIndexesTexture.needsUpdate = true;
        this.material.uniforms.sceneIndexesTexture.value = sceneIndexesTexture;
        this.material.uniforms.sceneIndexesTextureSize.value.copy(sceneIndexesTexSize);
        this.material.uniformsNeedUpdate = true;
        this.splatDataTextures['sceneIndexes'] = {
            'data': paddedTransformIndexes,
            'texture': sceneIndexesTexture,
            'size': sceneIndexesTexSize
        };
        this.material.uniforms.sceneCount.value = this.scenes.length;

        // FLAME-specific setup (only if flameModel has required data)
        if (this.flameModel && this.flameModel.geometry && this.flameModel.geometry.morphAttributes && this.flameModel.skeleton) {
            this.expressionBSNum = this.flameModel.geometry.morphAttributes.position.length;
            this.material.uniforms.bsCount.value = this.expressionBSNum;

            this.flameModel.skeleton.bones.forEach((bone, index) => {
                if (bone.name == 'head')
                    this.material.uniforms.headBoneIndex.value = index;
            });

            this.buildModelTexture(this.flameModel);
            this.buildBoneMatrixTexture();
            this.buildBoneWeightTexture(this.flameModel);
        }
    }

    buildBoneMatrixTexture() {
        if (!this.bsWeight)
            return

        // Guard: Requires FLAME model with morphTargetDictionary
        if (!this.flameModel || !this.flameModel.morphTargetDictionary) {
            return;
        }

        //this.bonesNum + this.expressionBSNum / 4 = 30, so 32
        const boneTextureSize = new THREE.Vector2(4, 32);
        let boneMatrixTextureData = new Float32Array(this.bonesMatrix);
        let boneMatrixTextureDataInt = new Uint32Array(boneTextureSize.x * boneTextureSize.y * 4);
        this.morphTargetDictionary = this.flameModel.morphTargetDictionary;

        for (let c = 0; c < this.bonesNum * 16; c++) {
            boneMatrixTextureDataInt[c] = uintEncodedFloat$1(boneMatrixTextureData[c]);
        }
        if (this.flameModel && this.flameModel.skeleton) {
            this.material.uniforms.boneTexture0.value = this.flameModel.skeleton.boneTexture;
            this.material.uniforms.bindMatrix.value = this.flameModel.bindMatrix;
            this.material.uniforms.bindMatrixInverse.value = this.flameModel.bindMatrixInverse;
        }
        for (const key in this.bsWeight) {
            if (Object.hasOwn(this.bsWeight, key)) {
                const value = this.bsWeight[key];
                const idx = this.morphTargetDictionary[key];
                boneMatrixTextureDataInt[idx + this.bonesNum * 16] = uintEncodedFloat$1(value);
            }
        }

        // for (let c = 0; c < this.bsWeight.length; c++) {
        //     this.morphTargetDictionary
        //     boneMatrixTextureDataInt[c + this.bonesNum * 16] = uintEncodedFloat(this.bsWeight[c]);
        // }

        const boneMatrixTex = new THREE.DataTexture(boneMatrixTextureDataInt, boneTextureSize.x, boneTextureSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        boneMatrixTex.internalFormat = 'RGBA32UI';
        boneMatrixTex.needsUpdate = true;
        this.material.uniforms.boneTexture.value = boneMatrixTex;
        this.material.uniforms.boneTextureSize.value.copy(boneTextureSize);

        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures['boneMatrix'] = {
            'data': boneMatrixTextureDataInt,
            'texture': boneMatrixTex,
            'size': boneTextureSize,
        };
        this.splatDataTextures.baseData['boneMatrix'] = boneMatrixTextureDataInt;
    }

    updateBoneMatrixTexture() {
        if (!this.bsWeight || !this.morphTargetDictionary)
            return

        for (const key in this.bsWeight) {
            if (Object.hasOwn(this.bsWeight, key)) {
                const value = this.bsWeight[key];
                const idx = this.morphTargetDictionary[key];
                this.splatDataTextures.baseData['boneMatrix'][idx + this.bonesNum * 16] = uintEncodedFloat$1(value);
            }
        }

        // for (let c = 0; c < this.bsWeight.length; c++) {
        //     this.splatDataTextures.baseData['boneMatrix'][c + this.bonesNum * 16] = uintEncodedFloat(this.bsWeight[c]);
        // }
        this.splatDataTextures['boneMatrix']['texture'].data = this.splatDataTextures.baseData['boneMatrix'];
        
        this.splatDataTextures['boneMatrix']['texture'].needsUpdate = true;
        this.material.uniforms.boneTexture.value = this.splatDataTextures['boneMatrix']['texture'];

        if (this.flameModel.skeleton) {
            this.material.uniforms.boneTexture0.value = this.flameModel.skeleton.boneTexture;
            this.material.uniforms.bindMatrix.value = this.flameModel.bindMatrix;
            this.material.uniforms.bindMatrixInverse.value = this.flameModel.bindMatrixInverse;
        }
        
        this.material.uniformsNeedUpdate = true;
    }

    buildBoneWeightTexture(flameModel) {
        // Guard: bonesWeight is required for FLAME bone weight texture building
        if (!this.bonesWeight) {
            return;
        }

        let shapedMesh = flameModel.geometry.attributes.position.array;

        let pointNum = shapedMesh.length / 3;
        const boneWeightTextureSize = new THREE.Vector2(512, 512);
        let boneWeightTextureData = new Float32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
        let boneWeightTextureDataInt = new Uint32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
        for (let i = 0; i < pointNum; i++) {
            boneWeightTextureData[i * 8 + 0] = this.bonesWeight[i][0];
            boneWeightTextureData[i * 8 + 1] = this.bonesWeight[i][1];
            boneWeightTextureData[i * 8 + 2] = this.bonesWeight[i][2];
            boneWeightTextureData[i * 8 + 3] = this.bonesWeight[i][3];
            boneWeightTextureData[i * 8 + 4] = this.bonesWeight[i][4];

            boneWeightTextureDataInt[i * 8 + 0] = uintEncodedFloat$1(this.bonesWeight[i][0]);
            boneWeightTextureDataInt[i * 8 + 1] = uintEncodedFloat$1(this.bonesWeight[i][1]);
            boneWeightTextureDataInt[i * 8 + 2] = uintEncodedFloat$1(this.bonesWeight[i][2]);
            boneWeightTextureDataInt[i * 8 + 3] = uintEncodedFloat$1(this.bonesWeight[i][3]);
            boneWeightTextureDataInt[i * 8 + 4] = uintEncodedFloat$1(this.bonesWeight[i][4]);

        }
        const boneWeightTex = new THREE.DataTexture(boneWeightTextureDataInt, boneWeightTextureSize.x, boneWeightTextureSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        
        boneWeightTex.internalFormat = 'RGBA32UI';
        boneWeightTex.needsUpdate = true;
        this.material.uniforms.boneWeightTexture.value = boneWeightTex;
        this.material.uniforms.boneWeightTextureSize.value.copy(boneWeightTextureSize);
        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures['boneWeight'] = {
            'data': boneWeightTextureDataInt,
            'texture': boneWeightTex,
            'size': boneWeightTextureSize,
        };
        this.splatDataTextures.baseData['boneWeight'] = boneWeightTextureDataInt;
    }


    buildModelTexture(flameModel) {
        // Guard: Requires FLAME model with morph attributes
        if (!flameModel || !flameModel.geometry || !flameModel.geometry.morphAttributes || !flameModel.morphTargetDictionary) {
            return;
        }

        const flameModelTexSize = new THREE.Vector2(4096, 2048);

        var shapedMesh = flameModel.geometry.attributes.position.array;
        var shapedMeshArray = [];//Array.from(shapedMesh);
        let pointNum = shapedMesh.length / 3;

        let bsLength = flameModel.geometry.morphAttributes.position.length;

        const morphTargetNames = Object.keys(flameModel.morphTargetDictionary);
        morphTargetNames.forEach((name, newIndex) => {
            const originalIndex = flameModel.morphTargetDictionary[name];
            var bsMesh = flameModel.geometry.morphAttributes.position[originalIndex];
            shapedMeshArray = shapedMeshArray.concat(Array.from(bsMesh.array));
            
          });
        shapedMeshArray = shapedMeshArray.concat(Array.from(shapedMesh));

        let flameModelData = new Float32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
        let flameModelDataInt = new Uint32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
        for (let c = 0; c < pointNum * (bsLength + 1); c++) {
            flameModelData[c * 4 + 0] = shapedMeshArray[c * 3 + 0];
            flameModelData[c * 4 + 1] = shapedMeshArray[c * 3 + 1];
            flameModelData[c * 4 + 2] = shapedMeshArray[c * 3 + 2];

            flameModelDataInt[c * 4 + 0] = uintEncodedFloat$1(flameModelData[c * 4 + 0]);
            flameModelDataInt[c * 4 + 1] = uintEncodedFloat$1(flameModelData[c * 4 + 1]);
            flameModelDataInt[c * 4 + 2] = uintEncodedFloat$1(flameModelData[c * 4 + 2]);
        }

        const flameModelTex = new THREE.DataTexture(flameModelDataInt, flameModelTexSize.x, flameModelTexSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        flameModelTex.internalFormat = 'RGBA32UI';
        flameModelTex.needsUpdate = true;
        this.material.uniforms.flameModelTexture.value = flameModelTex;
        this.material.uniforms.flameModelTextureSize.value.copy(flameModelTexSize);
        this.material.uniformsNeedUpdate = true;
        this.material.uniforms.gaussianSplatCount.value = this.gaussianSplatCount;

        this.splatDataTextures['flameModel'] = {
            'data': flameModelDataInt,
            'texture': flameModelTex,
            'size': flameModelTexSize,
        };
        this.splatDataTextures.baseData['flameModelPos'] = flameModelData;
    }

    updateTetureAfterBSAndSkeleton(fromSplat, toSplat) {
        const sceneTransform = new THREE.Matrix4();

        this.getSceneTransform(0, sceneTransform);
        this.getScene(0).splatBuffer.fillSplatCenterArray(this.morphedMesh, this.splatDataTextures.baseData.centers, sceneTransform, fromSplat, toSplat, 0);

        // Update center & color data texture
        const centerColorsTextureDescriptor = this.splatDataTextures['centerColors'];
        const paddedCenterColors = centerColorsTextureDescriptor.data;
        const centerColorsTexture = centerColorsTextureDescriptor.texture;
        SplatMesh.updateCenterColorsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.centers,
                                                this.splatDataTextures.baseData.colors, paddedCenterColors);
        const centerColorsTextureProps = this.renderer ? this.renderer.properties.get(centerColorsTexture) : null;
        if (!centerColorsTextureProps || !centerColorsTextureProps.__webglTexture) {
            centerColorsTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedCenterColors, centerColorsTextureDescriptor.texture, centerColorsTextureDescriptor.size,
                                    centerColorsTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 4,
                                    fromSplat, toSplat);
        }

        this.updateBoneMatrixTexture();
    }

    updateBaseDataFromSplatBuffers(fromSplat, toSplat) {
        const covarancesTextureDesc = this.splatDataTextures['covariances'];
        const covarianceCompressionLevel = covarancesTextureDesc ? covarancesTextureDesc.compressionLevel : undefined;
        const scaleRotationsTextureDesc = this.splatDataTextures['scaleRotations'];
        const scaleRotationCompressionLevel = scaleRotationsTextureDesc ? scaleRotationsTextureDesc.compressionLevel : undefined;
        const shITextureDesc = this.splatDataTextures['sphericalHarmonics'];
        const shCompressionLevel = shITextureDesc ? shITextureDesc.compressionLevel : 0;

        this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances, this.splatDataTextures.baseData.scales,
                                 this.splatDataTextures.baseData.rotations, this.splatDataTextures.baseData.centers,
                                 this.splatDataTextures.baseData.colors, this.splatDataTextures.baseData.sphericalHarmonics, 
                                 this.splatDataTextures.baseData.flameModelPos,
                                 undefined,
                                 covarianceCompressionLevel, scaleRotationCompressionLevel, shCompressionLevel,
                                 fromSplat, toSplat, fromSplat);
    }

    updateDataTexturesFromBaseData(fromSplat, toSplat) {
        const covarancesTextureDesc = this.splatDataTextures['covariances'];
        const covarianceCompressionLevel = covarancesTextureDesc ? covarancesTextureDesc.compressionLevel : undefined;
        const scaleRotationsTextureDesc = this.splatDataTextures['scaleRotations'];
        const scaleRotationCompressionLevel = scaleRotationsTextureDesc ? scaleRotationsTextureDesc.compressionLevel : undefined;
        const shTextureDesc = this.splatDataTextures['sphericalHarmonics'];
        const shCompressionLevel = shTextureDesc ? shTextureDesc.compressionLevel : 0;

        // Update flame data texture
        const flameModelTextureDescriptor = this.splatDataTextures['flameModel'];
        const flameModelPos = flameModelTextureDescriptor.data;
        const flameModelPosTexture = flameModelTextureDescriptor.texture;

        const flameModelPosTextureProps = this.renderer ? this.renderer.properties.get(flameModelPosTexture) : null;
        if (!flameModelPosTextureProps || !flameModelPosTextureProps.__webglTexture) {
            flameModelPosTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(flameModelPos, flameModelTextureDescriptor.texture, flameModelTextureDescriptor.size,
                flameModelPosTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 3,
                                   fromSplat, toSplat);
        }

        // Update center & color data texture
        const centerColorsTextureDescriptor = this.splatDataTextures['centerColors'];
        const paddedCenterColors = centerColorsTextureDescriptor.data;
        const centerColorsTexture = centerColorsTextureDescriptor.texture;
        SplatMesh.updateCenterColorsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.centers,
                                               this.splatDataTextures.baseData.colors, paddedCenterColors);
        const centerColorsTextureProps = this.renderer ? this.renderer.properties.get(centerColorsTexture) : null;
        if (!centerColorsTextureProps || !centerColorsTextureProps.__webglTexture) {
            centerColorsTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedCenterColors, centerColorsTextureDescriptor.texture, centerColorsTextureDescriptor.size,
                                   centerColorsTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 4,
                                   fromSplat, toSplat);
        }

        // update covariance data texture
        if (covarancesTextureDesc) {
            const covariancesTexture = covarancesTextureDesc.texture;
            const covarancesStartElement = fromSplat * COVARIANCES_ELEMENTS_PER_SPLAT;
            const covariancesEndElement = toSplat * COVARIANCES_ELEMENTS_PER_SPLAT;

            if (covarianceCompressionLevel === 0) {
                for (let i = covarancesStartElement; i <= covariancesEndElement; i++) {
                    const covariance = this.splatDataTextures.baseData.covariances[i];
                    covarancesTextureDesc.data[i] = covariance;
                }
            } else {
                SplatMesh.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,
                                                                       covarancesTextureDesc.data,
                                                                       fromSplat * covarancesTextureDesc.elementsPerTexelAllocated,
                                                                       covarancesStartElement, covariancesEndElement);
            }

            const covariancesTextureProps = this.renderer ? this.renderer.properties.get(covariancesTexture) : null;
            if (!covariancesTextureProps || !covariancesTextureProps.__webglTexture) {
                covariancesTexture.needsUpdate = true;
            } else {
                if (covarianceCompressionLevel === 0) {
                    this.updateDataTexture(covarancesTextureDesc.data, covarancesTextureDesc.texture, covarancesTextureDesc.size,
                                           covariancesTextureProps, covarancesTextureDesc.elementsPerTexelStored,
                                           COVARIANCES_ELEMENTS_PER_SPLAT, 4, fromSplat, toSplat);
                } else {
                    this.updateDataTexture(covarancesTextureDesc.data, covarancesTextureDesc.texture, covarancesTextureDesc.size,
                                           covariancesTextureProps, covarancesTextureDesc.elementsPerTexelAllocated,
                                           covarancesTextureDesc.elementsPerTexelAllocated, 2, fromSplat, toSplat);
                }
            }
        }

        // update scale and rotation data texture
        if (scaleRotationsTextureDesc) {
            const paddedScaleRotations = scaleRotationsTextureDesc.data;
            const scaleRotationsTexture = scaleRotationsTextureDesc.texture;
            const elementsPerSplat = 6;
            const bytesPerElement = scaleRotationCompressionLevel === 0 ? 4 : 2;

            SplatMesh.updateScaleRotationsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.scales,
                                                     this.splatDataTextures.baseData.rotations, paddedScaleRotations);
            const scaleRotationsTextureProps = this.renderer ? this.renderer.properties.get(scaleRotationsTexture) : null;
            if (!scaleRotationsTextureProps || !scaleRotationsTextureProps.__webglTexture) {
                scaleRotationsTexture.needsUpdate = true;
            } else {
                this.updateDataTexture(paddedScaleRotations, scaleRotationsTextureDesc.texture, scaleRotationsTextureDesc.size,
                                       scaleRotationsTextureProps, SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, elementsPerSplat, bytesPerElement,
                                       fromSplat, toSplat);
            }
        }

        // update spherical harmonics data texture
        const shData = this.splatDataTextures.baseData.sphericalHarmonics;
        if (shData) {
            let shBytesPerElement = 4;
            if (shCompressionLevel === 1) shBytesPerElement = 2;
            else if (shCompressionLevel === 2) shBytesPerElement = 1;

            const updateTexture = (shTexture, shTextureSize, elementsPerTexel, paddedSHArray, paddedSHComponentCount) => {
                const shTextureProps = this.renderer ? this.renderer.properties.get(shTexture) : null;
                if (!shTextureProps || !shTextureProps.__webglTexture) {
                    shTexture.needsUpdate = true;
                } else {
                    this.updateDataTexture(paddedSHArray, shTexture, shTextureSize, shTextureProps, elementsPerTexel,
                                           paddedSHComponentCount, shBytesPerElement, fromSplat, toSplat);
                }
            };

            const shComponentCount = shTextureDesc.componentCount;
            const paddedSHComponentCount = shTextureDesc.paddedComponentCount;

            // Update for the case of a single texture for all spherical harmonics data
            if (shTextureDesc.textureCount === 1) {
                const paddedSHArray = shTextureDesc.data;
                for (let c = fromSplat; c <= toSplat; c++) {
                    const srcBase = shComponentCount * c;
                    const destBase = paddedSHComponentCount * c;
                    for (let i = 0; i < shComponentCount; i++) {
                        paddedSHArray[destBase + i] = shData[srcBase + i];
                    }
                }
                updateTexture(shTextureDesc.texture, shTextureDesc.size,
                              shTextureDesc.elementsPerTexel, paddedSHArray, paddedSHComponentCount);
            // Update for the case of spherical harmonics data split among three textures, one for each color channel
            } else {
                const shComponentCountPerChannel = shTextureDesc.componentCountPerChannel;
                for (let t = 0; t < 3; t++) {
                    const paddedSHArray = shTextureDesc.data[t];
                    for (let c = fromSplat; c <= toSplat; c++) {
                        const srcBase = shComponentCount * c;
                        const destBase = paddedSHComponentCount * c;
                        if (shComponentCountPerChannel >= 3) {
                            for (let i = 0; i < 3; i++) paddedSHArray[destBase + i] = shData[srcBase + t * 3 + i];
                            if (shComponentCountPerChannel >= 8) {
                                for (let i = 0; i < 5; i++) paddedSHArray[destBase + 3 + i] = shData[srcBase + 9 + t * 5 + i];
                            }
                        }
                    }
                    updateTexture(shTextureDesc.textures[t], shTextureDesc.size,
                                  shTextureDesc.elementsPerTexel, paddedSHArray, paddedSHComponentCount);
                }
            }
        }

        // update scene index & transform data
        const sceneIndexesTexDesc = this.splatDataTextures['sceneIndexes'];
        const paddedSceneIndexes = sceneIndexesTexDesc.data;
        for (let c = this.lastBuildSplatCount; c <= toSplat; c++) {
            paddedSceneIndexes[c] = this.globalSplatIndexToSceneIndexMap[c];
        }
        const sceneIndexesTexture = sceneIndexesTexDesc.texture;
        const sceneIndexesTextureProps = this.renderer ? this.renderer.properties.get(sceneIndexesTexture) : null;
        if (!sceneIndexesTextureProps || !sceneIndexesTextureProps.__webglTexture) {
            sceneIndexesTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedSceneIndexes, sceneIndexesTexDesc.texture, sceneIndexesTexDesc.size,
                                   sceneIndexesTextureProps, 1, 1, 1, this.lastBuildSplatCount, toSplat);
        }
    }

    getTargetCovarianceCompressionLevel() {
        return this.halfPrecisionCovariancesOnGPU ? 1 : 0;
    }

    getTargetSphericalHarmonicsCompressionLevel() {
        return Math.max(1, this.getMaximumSplatBufferCompressionLevel());
    }

    getMaximumSplatBufferCompressionLevel() {
        let maxCompressionLevel;
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            if (i === 0 || splatBuffer.compressionLevel > maxCompressionLevel) {
                maxCompressionLevel = splatBuffer.compressionLevel;
            }
        }
        return maxCompressionLevel;
    }

    getMinimumSplatBufferCompressionLevel() {
        let minCompressionLevel;
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            if (i === 0 || splatBuffer.compressionLevel < minCompressionLevel) {
                minCompressionLevel = splatBuffer.compressionLevel;
            }
        }
        return minCompressionLevel;
    }

    static computeTextureUpdateRegion(startSplat, endSplat, textureWidth, elementsPerTexel, elementsPerSplat) {
        const texelsPerSplat = elementsPerSplat / elementsPerTexel;

        const startSplatTexels = startSplat * texelsPerSplat;
        const startRow = Math.floor(startSplatTexels / textureWidth);
        const startRowElement = startRow * textureWidth * elementsPerTexel;

        const endSplatTexels = endSplat * texelsPerSplat;
        const endRow = Math.floor(endSplatTexels / textureWidth);
        const endRowEndElement = endRow * textureWidth * elementsPerTexel + (textureWidth * elementsPerTexel);

        return {
            'dataStart': startRowElement,
            'dataEnd': endRowEndElement,
            'startRow': startRow,
            'endRow': endRow
        };
    }

    updateDataTexture(paddedData, texture, textureSize, textureProps, elementsPerTexel, elementsPerSplat, bytesPerElement, from, to) {
        const gl = this.renderer.getContext();
        const updateRegion = SplatMesh.computeTextureUpdateRegion(from, to, textureSize.x, elementsPerTexel, elementsPerSplat);
        const updateElementCount = updateRegion.dataEnd - updateRegion.dataStart;
        const updateDataView = new paddedData.constructor(paddedData.buffer,
                                                          updateRegion.dataStart * bytesPerElement, updateElementCount);
        const updateHeight = updateRegion.endRow - updateRegion.startRow + 1;
        const glType = this.webGLUtils.convert(texture.type);
        const glFormat = this.webGLUtils.convert(texture.format, texture.colorSpace);
        const currentTexture = gl.getParameter(gl.TEXTURE_BINDING_2D);
        gl.bindTexture(gl.TEXTURE_2D, textureProps.__webglTexture);
        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, updateRegion.startRow,
                         textureSize.x, updateHeight, glFormat, glType, updateDataView);
        gl.bindTexture(gl.TEXTURE_2D, currentTexture);
    }

    static updatePaddedCompressedCovariancesTextureData(sourceData, textureData, textureDataStartIndex, fromElement, toElement) {
        let textureDataView = new DataView(textureData.buffer);
        let textureDataIndex = textureDataStartIndex;
        let sequentialCount = 0;
        for (let i = fromElement; i <= toElement; i+=2) {
            textureDataView.setUint16(textureDataIndex * 2, sourceData[i], true);
            textureDataView.setUint16(textureDataIndex * 2 + 2, sourceData[i + 1], true);
            textureDataIndex += 2;
            sequentialCount++;
            if (sequentialCount >= 3) {
                textureDataIndex += 2;
                sequentialCount = 0;
            }
        }
    }

    static updateCenterColorsPaddedData(from, to, centers, colors, paddedCenterColors) {
        for (let c = from; c <= to; c++) {
            const colorsBase = c * 4;
            const centersBase = c * 3;
            const centerColorsBase = c * 4;
            paddedCenterColors[centerColorsBase] = rgbaArrayToInteger(colors, colorsBase);
            paddedCenterColors[centerColorsBase + 1] = uintEncodedFloat$1(centers[centersBase]);
            paddedCenterColors[centerColorsBase + 2] = uintEncodedFloat$1(centers[centersBase + 1]);
            paddedCenterColors[centerColorsBase + 3] = uintEncodedFloat$1(centers[centersBase + 2]);
        }
    }

    static updateScaleRotationsPaddedData(from, to, scales, rotations, paddedScaleRotations) {
        const combinedSize = 6;
        for (let c = from; c <= to; c++) {
            const scaleBase = c * 3;
            const rotationBase = c * 4;
            const scaleRotationsBase = c * combinedSize;

            paddedScaleRotations[scaleRotationsBase] = scales[scaleBase];
            paddedScaleRotations[scaleRotationsBase + 1] = scales[scaleBase + 1];
            paddedScaleRotations[scaleRotationsBase + 2] = scales[scaleBase + 2];

            paddedScaleRotations[scaleRotationsBase + 3] = rotations[rotationBase];
            paddedScaleRotations[scaleRotationsBase + 4] = rotations[rotationBase + 1];
            paddedScaleRotations[scaleRotationsBase + 5] = rotations[rotationBase + 2];
        }
    }

    updateVisibleRegion(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        const tempCenter = new THREE.Vector3();
        if (!sinceLastBuildOnly) {
            const avgCenter = new THREE.Vector3();
            this.scenes.forEach((scene) => {
                avgCenter.add(scene.splatBuffer.sceneCenter);
            });
            avgCenter.multiplyScalar(1.0 / this.scenes.length);
            this.calculatedSceneCenter.copy(avgCenter);
            this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter);
            this.material.uniformsNeedUpdate = true;
        }

        const startSplatFormMaxDistanceCalc = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        for (let i = startSplatFormMaxDistanceCalc; i < splatCount; i++) {
            this.getSplatCenter(this.morphedMesh, i, tempCenter, true);
            const distFromCSceneCenter = tempCenter.sub(this.calculatedSceneCenter).length();
            if (distFromCSceneCenter > this.maxSplatDistanceFromSceneCenter) this.maxSplatDistanceFromSceneCenter = distFromCSceneCenter;
        }

        if (this.maxSplatDistanceFromSceneCenter - this.visibleRegionBufferRadius > VISIBLE_REGION_EXPANSION_DELTA) {
            this.visibleRegionBufferRadius = this.maxSplatDistanceFromSceneCenter;
            this.visibleRegionRadius = Math.max(this.visibleRegionBufferRadius - VISIBLE_REGION_EXPANSION_DELTA, 0.0);
        }
        if (this.finalBuild) this.visibleRegionRadius = this.visibleRegionBufferRadius = this.maxSplatDistanceFromSceneCenter;
        this.updateVisibleRegionFadeDistance();
    }

    updateVisibleRegionFadeDistance(sceneRevealMode = SceneRevealMode.Default) {
        const fastFadeRate = SCENE_FADEIN_RATE_FAST * this.sceneFadeInRateMultiplier;
        const gradualFadeRate = SCENE_FADEIN_RATE_GRADUAL * this.sceneFadeInRateMultiplier;
        const defaultFadeInRate = this.finalBuild ? fastFadeRate : gradualFadeRate;
        const fadeInRate = sceneRevealMode === SceneRevealMode.Default ? defaultFadeInRate : gradualFadeRate;
        this.visibleRegionFadeStartRadius = (this.visibleRegionRadius - this.visibleRegionFadeStartRadius) *
                                             fadeInRate + this.visibleRegionFadeStartRadius;
        const fadeInPercentage = (this.visibleRegionBufferRadius > 0) ?
                                 (this.visibleRegionFadeStartRadius / this.visibleRegionBufferRadius) : 0;
        const fadeInComplete = fadeInPercentage > 0.99;
        const shaderFadeInComplete = (fadeInComplete || sceneRevealMode === SceneRevealMode.Instant) ? 1 : 0;

        this.material.uniforms.visibleRegionFadeStartRadius.value = this.visibleRegionFadeStartRadius;
        this.material.uniforms.visibleRegionRadius.value = this.visibleRegionRadius;
        this.material.uniforms.firstRenderTime.value = this.firstRenderTime;
        this.material.uniforms.currentTime.value = performance.now();
        this.material.uniforms.fadeInComplete.value = shaderFadeInComplete;
        this.material.uniformsNeedUpdate = true;
        this.visibleRegionChanging = !fadeInComplete;
    }

    /**
     * Set the indexes of splats that should be rendered; should be sorted in desired render order.
     * @param {Uint32Array} globalIndexes Sorted index list of splats to be rendered
     * @param {number} renderSplatCount Total number of splats to be rendered. Necessary because we may not want to render
     *                                  every splat.
     */
    updateRenderIndexes(globalIndexes, renderSplatCount) {
        const geometry = this.geometry;
        geometry.attributes.splatIndex.set(globalIndexes);
        geometry.attributes.splatIndex.needsUpdate = true;
        if (renderSplatCount > 0 && this.firstRenderTime === -1) this.firstRenderTime = performance.now();
        geometry.instanceCount = renderSplatCount;
        geometry.setDrawRange(0, renderSplatCount);
    }

    /**
     * Update the transforms for each scene in this splat mesh from their individual components (position,
     * quaternion, and scale)
     */
    updateTransforms() {
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            scene.updateTransform(this.dynamicMode);
        }
    }

    updateUniforms = function() {

        const viewport = new THREE.Vector2();

        return function(renderDimensions, cameraFocalLengthX, cameraFocalLengthY,
                        orthographicMode, orthographicZoom, inverseFocalAdjustment) {
            const splatCount = this.getSplatCount();
            if (splatCount > 0) {
                viewport.set(renderDimensions.x * this.devicePixelRatio,
                             renderDimensions.y * this.devicePixelRatio);
                this.material.uniforms.viewport.value.copy(viewport);
                this.material.uniforms.basisViewport.value.set(1.0 / viewport.x, 1.0 / viewport.y);
                this.material.uniforms.focal.value.set(cameraFocalLengthX, cameraFocalLengthY);
                this.material.uniforms.orthographicMode.value = orthographicMode ? 1 : 0;
                this.material.uniforms.orthoZoom.value = orthographicZoom;
                this.material.uniforms.inverseFocalAdjustment.value = inverseFocalAdjustment;
                if (this.dynamicMode) {
                    for (let i = 0; i < this.scenes.length; i++) {
                        this.material.uniforms.transforms.value[i].copy(this.getScene(i).transform);
                    }
                }
                if (this.enableOptionalEffects) {
                    for (let i = 0; i < this.scenes.length; i++) {
                        this.material.uniforms.sceneOpacity.value[i] = clamp(this.getScene(i).opacity, 0.0, 1.0);
                        this.material.uniforms.sceneVisibility.value[i] = this.getScene(i).visible ? 1 : 0;
                        this.material.uniformsNeedUpdate = true;
                    }
                }
                this.material.uniformsNeedUpdate = true;
            }
        };

    }();

    setSplatScale(splatScale = 1) {
        this.splatScale = splatScale;
        this.material.uniforms.splatScale.value = splatScale;
        this.material.uniformsNeedUpdate = true;
    }

    getSplatScale() {
        return this.splatScale;
    }

    setPointCloudModeEnabled(enabled) {
        this.pointCloudModeEnabled = enabled;
        this.material.uniforms.pointCloudModeEnabled.value = enabled ? 1 : 0;
        this.material.uniformsNeedUpdate = true;
    }

    getPointCloudModeEnabled() {
        return this.pointCloudModeEnabled;
    }

    getSplatDataTextures() {
        return this.splatDataTextures;
    }

    getSplatCount(includeSinceLastBuild = false) {
        if (!includeSinceLastBuild) return this.lastBuildSplatCount;
        else return SplatMesh.getTotalSplatCountForScenes(this.scenes);
    }

    static getTotalSplatCountForScenes(scenes) {
        let totalSplatCount = 0;
        for (let scene of scenes) {
            if (scene && scene.splatBuffer) totalSplatCount += scene.splatBuffer.getSplatCount();
        }
        return totalSplatCount;
    }

    static getTotalSplatCountForSplatBuffers(splatBuffers) {
        let totalSplatCount = 0;
        for (let splatBuffer of splatBuffers) totalSplatCount += splatBuffer.getSplatCount();
        return totalSplatCount;
    }

    getMaxSplatCount() {
        return SplatMesh.getTotalMaxSplatCountForScenes(this.scenes);
    }

    static getTotalMaxSplatCountForScenes(scenes) {
        let totalSplatCount = 0;
        for (let scene of scenes) {
            if (scene && scene.splatBuffer) totalSplatCount += scene.splatBuffer.getMaxSplatCount();
        }
        return totalSplatCount;
    }

    static getTotalMaxSplatCountForSplatBuffers(splatBuffers) {
        let totalSplatCount = 0;
        for (let splatBuffer of splatBuffers) totalSplatCount += splatBuffer.getMaxSplatCount();
        return totalSplatCount;
    }

    disposeDistancesComputationGPUResources() {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        if (this.distancesTransformFeedback.vao) {
            gl.deleteVertexArray(this.distancesTransformFeedback.vao);
            this.distancesTransformFeedback.vao = null;
        }
        if (this.distancesTransformFeedback.program) {
            gl.deleteProgram(this.distancesTransformFeedback.program);
            gl.deleteShader(this.distancesTransformFeedback.vertexShader);
            gl.deleteShader(this.distancesTransformFeedback.fragmentShader);
            this.distancesTransformFeedback.program = null;
            this.distancesTransformFeedback.vertexShader = null;
            this.distancesTransformFeedback.fragmentShader = null;
        }
        this.disposeDistancesComputationGPUBufferResources();
        if (this.distancesTransformFeedback.id) {
            gl.deleteTransformFeedback(this.distancesTransformFeedback.id);
            this.distancesTransformFeedback.id = null;
        }
    }

    disposeDistancesComputationGPUBufferResources() {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        if (this.distancesTransformFeedback.centersBuffer) {
            this.distancesTransformFeedback.centersBuffer = null;
            gl.deleteBuffer(this.distancesTransformFeedback.centersBuffer);
        }
        if (this.distancesTransformFeedback.outDistancesBuffer) {
            gl.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer);
            this.distancesTransformFeedback.outDistancesBuffer = null;
        }
    }

    /**
     * Set the Three.js renderer used by this splat mesh
     * @param {THREE.WebGLRenderer} renderer Instance of THREE.WebGLRenderer
     */
    setRenderer(renderer) {
        if (renderer !== this.renderer) {
            this.renderer = renderer;
            const gl = this.renderer.getContext();
            const extensions = new WebGLExtensions$1(gl);
            const capabilities = new WebGLCapabilities$1(gl, extensions, {});
            extensions.init(capabilities);
            this.webGLUtils = new WebGLUtils$1(gl, extensions, capabilities);
            if (this.enableDistancesComputationOnGPU && this.getSplatCount() > 0) {
                this.setupDistancesComputationTransformFeedback();
                const { centers, sceneIndexes } = this.getDataForDistancesComputation(0, this.getSplatCount() - 1);
                this.refreshGPUBuffersForDistancesComputation(centers, sceneIndexes);
            }
        }
    }

    setupDistancesComputationTransformFeedback = function() {

        let currentMaxSplatCount;

        return () => {
            const maxSplatCount = this.getMaxSplatCount();

            if (!this.renderer) return;

            const rebuildGPUObjects = (this.lastRenderer !== this.renderer);
            const rebuildBuffers = currentMaxSplatCount !== maxSplatCount;

            if (!rebuildGPUObjects && !rebuildBuffers) return;

            if (rebuildGPUObjects) {
                this.disposeDistancesComputationGPUResources();
            } else if (rebuildBuffers) {
                this.disposeDistancesComputationGPUBufferResources();
            }

            const gl = this.renderer.getContext();

            const createShader = (gl, type, source) => {
                const shader = gl.createShader(type);
                if (!shader) {
                    logger$4.error('Fatal error: gl could not create a shader object.');
                    return null;
                }

                gl.shaderSource(shader, source);
                gl.compileShader(shader);

                const compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
                if (!compiled) {
                    let typeName = 'unknown';
                    if (type === gl.VERTEX_SHADER) typeName = 'vertex shader';
                    else if (type === gl.FRAGMENT_SHADER) typeName = 'fragement shader';
                    const errors = gl.getShaderInfoLog(shader);
                    logger$4.error('Failed to compile ' + typeName + ' with these errors:' + errors);
                    gl.deleteShader(shader);
                    return null;
                }

                return shader;
            };

            let vsSource;
            if (this.integerBasedDistancesComputation) {
                vsSource =
                `#version 300 es
                in ivec4 center;
                flat out int distance;`;
                if (this.dynamicMode) {
                    vsSource += `
                        in uint sceneIndex;
                        uniform ivec4 transforms[${Constants$1.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `;
                } else {
                    vsSource += `
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `;
                }
            } else {
                vsSource =
                `#version 300 es
                in vec4 center;
                flat out float distance;`;
                if (this.dynamicMode) {
                    vsSource += `
                        in uint sceneIndex;
                        uniform mat4 transforms[${Constants$1.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `;
                } else {
                    vsSource += `
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `;
                }
            }

            const fsSource =
            `#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `;

            const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
            const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
            const currentProgramDeleted = currentProgram ? gl.getProgramParameter(currentProgram, gl.DELETE_STATUS) : false;

            if (rebuildGPUObjects) {
                this.distancesTransformFeedback.vao = gl.createVertexArray();
            }

            gl.bindVertexArray(this.distancesTransformFeedback.vao);

            if (rebuildGPUObjects) {
                const program = gl.createProgram();
                const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
                const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
                if (!vertexShader || !fragmentShader) {
                    throw new Error('Could not compile shaders for distances computation on GPU.');
                }
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.transformFeedbackVaryings(program, ['distance'], gl.SEPARATE_ATTRIBS);
                gl.linkProgram(program);

                const linked = gl.getProgramParameter(program, gl.LINK_STATUS);
                if (!linked) {
                    const error = gl.getProgramInfoLog(program);
                    logger$4.error('Fatal error: Failed to link program: ' + error);
                    gl.deleteProgram(program);
                    gl.deleteShader(fragmentShader);
                    gl.deleteShader(vertexShader);
                    throw new Error('Could not link shaders for distances computation on GPU.');
                }

                this.distancesTransformFeedback.program = program;
                this.distancesTransformFeedback.vertexShader = vertexShader;
                this.distancesTransformFeedback.vertexShader = fragmentShader;
            }

            gl.useProgram(this.distancesTransformFeedback.program);

            this.distancesTransformFeedback.centersLoc =
                gl.getAttribLocation(this.distancesTransformFeedback.program, 'center');
            if (this.dynamicMode) {
                this.distancesTransformFeedback.sceneIndexesLoc =
                    gl.getAttribLocation(this.distancesTransformFeedback.program, 'sceneIndex');
                for (let i = 0; i < this.scenes.length; i++) {
                    this.distancesTransformFeedback.transformsLocs[i] =
                        gl.getUniformLocation(this.distancesTransformFeedback.program, `transforms[${i}]`);
                }
            } else {
                this.distancesTransformFeedback.modelViewProjLoc =
                    gl.getUniformLocation(this.distancesTransformFeedback.program, 'modelViewProj');
            }

            if (rebuildGPUObjects || rebuildBuffers) {
                this.distancesTransformFeedback.centersBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);
                gl.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc);
                if (this.integerBasedDistancesComputation) {
                    gl.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc, 4, gl.INT, 0, 0);
                } else {
                    gl.vertexAttribPointer(this.distancesTransformFeedback.centersLoc, 4, gl.FLOAT, false, 0, 0);
                }

                if (this.dynamicMode) {
                    this.distancesTransformFeedback.sceneIndexesBuffer = gl.createBuffer();
                    gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);
                    gl.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc);
                    gl.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc, 1, gl.UNSIGNED_INT, 0, 0);
                }
            }

            if (rebuildGPUObjects || rebuildBuffers) {
                this.distancesTransformFeedback.outDistancesBuffer = gl.createBuffer();
            }
            gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.outDistancesBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, maxSplatCount * 4, gl.STATIC_READ);

            if (rebuildGPUObjects) {
                this.distancesTransformFeedback.id = gl.createTransformFeedback();
            }
            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.distancesTransformFeedback.id);
            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.distancesTransformFeedback.outDistancesBuffer);

            if (currentProgram && currentProgramDeleted !== true) gl.useProgram(currentProgram);
            if (currentVao) gl.bindVertexArray(currentVao);

            this.lastRenderer = this.renderer;
            currentMaxSplatCount = maxSplatCount;
        };

    }();

    /**
     * Refresh GPU buffers used for computing splat distances with centers data from the scenes for this mesh.
     * @param {boolean} isUpdate Specify whether or not to update the GPU buffer or to initialize & fill
     * @param {Array<number>} centers The splat centers data
     * @param {number} offsetSplats Offset in the GPU buffer at which to start updating data, specified in splats
     */
    updateGPUCentersBufferForDistancesComputation(isUpdate, centers, offsetSplats) {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
        gl.bindVertexArray(this.distancesTransformFeedback.vao);

        const ArrayType = this.integerBasedDistancesComputation ? Uint32Array : Float32Array;
        const attributeBytesPerCenter = 16;
        const subBufferOffset = offsetSplats * attributeBytesPerCenter;

        gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);

        if (isUpdate) {
            gl.bufferSubData(gl.ARRAY_BUFFER, subBufferOffset, centers);
        } else {
            const maxArray = new ArrayType(this.getMaxSplatCount() * attributeBytesPerCenter);
            maxArray.set(centers);
            gl.bufferData(gl.ARRAY_BUFFER, maxArray, gl.STATIC_DRAW);
        }

        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        if (currentVao) gl.bindVertexArray(currentVao);
    }

    /**
     * Refresh GPU buffers used for pre-computing splat distances with centers data from the scenes for this mesh.
     * @param {boolean} isUpdate Specify whether or not to update the GPU buffer or to initialize & fill
     * @param {Array<number>} sceneIndexes The splat scene indexes
     * @param {number} offsetSplats Offset in the GPU buffer at which to start updating data, specified in splats
     */
    updateGPUTransformIndexesBufferForDistancesComputation(isUpdate, sceneIndexes, offsetSplats) {

        if (!this.renderer || !this.dynamicMode) return;

        const gl = this.renderer.getContext();

        const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
        gl.bindVertexArray(this.distancesTransformFeedback.vao);

        const subBufferOffset = offsetSplats * 4;

        gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);

        if (isUpdate) {
            gl.bufferSubData(gl.ARRAY_BUFFER, subBufferOffset, sceneIndexes);
        } else {
            const maxArray = new Uint32Array(this.getMaxSplatCount() * 4);
            maxArray.set(sceneIndexes);
            gl.bufferData(gl.ARRAY_BUFFER, maxArray, gl.STATIC_DRAW);
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        if (currentVao) gl.bindVertexArray(currentVao);
    }

    /**
     * Get a typed array containing a mapping from global splat indexes to their scene index.
     * @param {number} start Starting splat index to store
     * @param {number} end Ending splat index to store
     * @return {Uint32Array}
     */
    getSceneIndexes(start, end) {

        let sceneIndexes;
        const fillCount = end - start + 1;
        sceneIndexes = new Uint32Array(fillCount);
        for (let i = start; i <= end; i++) {
            sceneIndexes[i] = this.globalSplatIndexToSceneIndexMap[i];
        }

        return sceneIndexes;
    }

    /**
     * Fill 'array' with the transforms for each scene in this splat mesh.
     * @param {Array} array Empty array to be filled with scene transforms. If not empty, contents will be overwritten.
     */
    fillTransformsArray = function() {

        const tempArray = [];

        return function(array) {
            if (tempArray.length !== array.length) tempArray.length = array.length;
            for (let i = 0; i < this.scenes.length; i++) {
                const sceneTransform = this.getScene(i).transform;
                const sceneTransformElements = sceneTransform.elements;
                for (let j = 0; j < 16; j++) {
                    tempArray[i * 16 + j] = sceneTransformElements[j];
                }
            }
            array.set(tempArray);
        };

    }();

    computeDistancesOnGPU = function() {

        const tempMatrix = new THREE.Matrix4();

        return (modelViewProjMatrix, outComputedDistances) => {
            if (!this.renderer) return;

            const gl = this.renderer.getContext();

            const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
            const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
            const currentProgramDeleted = currentProgram ? gl.getProgramParameter(currentProgram, gl.DELETE_STATUS) : false;

            gl.bindVertexArray(this.distancesTransformFeedback.vao);
            gl.useProgram(this.distancesTransformFeedback.program);

            gl.enable(gl.RASTERIZER_DISCARD);

            if (this.dynamicMode) {
                for (let i = 0; i < this.scenes.length; i++) {
                    tempMatrix.copy(this.getScene(i).transform);
                    tempMatrix.premultiply(modelViewProjMatrix);

                    if (this.integerBasedDistancesComputation) {
                        const iTempMatrix = SplatMesh.getIntegerMatrixArray(tempMatrix);
                        const iTransform = [iTempMatrix[2], iTempMatrix[6], iTempMatrix[10], iTempMatrix[14]];
                        gl.uniform4i(this.distancesTransformFeedback.transformsLocs[i], iTransform[0], iTransform[1],
                                                                                        iTransform[2], iTransform[3]);
                    } else {
                        gl.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[i], false, tempMatrix.elements);
                    }
                }
            } else {
                if (this.integerBasedDistancesComputation) {
                    const iViewProjMatrix = SplatMesh.getIntegerMatrixArray(modelViewProjMatrix);
                    const iViewProj = [iViewProjMatrix[2], iViewProjMatrix[6], iViewProjMatrix[10]];
                    gl.uniform3i(this.distancesTransformFeedback.modelViewProjLoc, iViewProj[0], iViewProj[1], iViewProj[2]);
                } else {
                    const viewProj = [modelViewProjMatrix.elements[2], modelViewProjMatrix.elements[6], modelViewProjMatrix.elements[10]];
                    gl.uniform3f(this.distancesTransformFeedback.modelViewProjLoc, viewProj[0], viewProj[1], viewProj[2]);
                }
            }

            gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);
            gl.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc);
            if (this.integerBasedDistancesComputation) {
                gl.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc, 4, gl.INT, 0, 0);
            } else {
                gl.vertexAttribPointer(this.distancesTransformFeedback.centersLoc, 4, gl.FLOAT, false, 0, 0);
            }

            if (this.dynamicMode) {
                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);
                gl.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc);
                gl.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc, 1, gl.UNSIGNED_INT, 0, 0);
            }

            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.distancesTransformFeedback.id);
            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.distancesTransformFeedback.outDistancesBuffer);

            gl.beginTransformFeedback(gl.POINTS);
            gl.drawArrays(gl.POINTS, 0, this.getSplatCount());
            gl.endTransformFeedback();

            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);
            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);

            gl.disable(gl.RASTERIZER_DISCARD);

            const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);
            gl.flush();

            const promise = new Promise((resolve) => {
                const checkSync = () => {
                    if (this.disposed) {
                        resolve();
                    } else {
                        const timeout = 0;
                        const bitflags = 0;
                        const status = gl.clientWaitSync(sync, bitflags, timeout);
                        switch (status) {
                            case gl.TIMEOUT_EXPIRED:
                                this.computeDistancesOnGPUSyncTimeout = setTimeout(checkSync);
                                return this.computeDistancesOnGPUSyncTimeout;
                            case gl.WAIT_FAILED:
                                throw new Error('should never get here');
                            default: {
                                this.computeDistancesOnGPUSyncTimeout = null;
                                gl.deleteSync(sync);
                                const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
                                gl.bindVertexArray(this.distancesTransformFeedback.vao);
                                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.outDistancesBuffer);
                                gl.getBufferSubData(gl.ARRAY_BUFFER, 0, outComputedDistances);
                                gl.bindBuffer(gl.ARRAY_BUFFER, null);

                                if (currentVao) gl.bindVertexArray(currentVao);

                                resolve();
                            }
                        }
                    }
                };
                this.computeDistancesOnGPUSyncTimeout = setTimeout(checkSync);
            });

            if (currentProgram && currentProgramDeleted !== true) gl.useProgram(currentProgram);
            if (currentVao) gl.bindVertexArray(currentVao);

            return promise;
        };

    }();

    /**
     * Given a global splat index, return corresponding local data (splat buffer, index of splat in that splat
     * buffer, and the corresponding transform)
     * @param {number} globalIndex Global splat index
     * @param {object} paramsObj Object in which to store local data
     * @param {boolean} returnSceneTransform By default, the transform of the scene to which the splat at 'globalIndex' belongs will be
     *                                       returned via the 'sceneTransform' property of 'paramsObj' only if the splat mesh is static.
     *                                       If 'returnSceneTransform' is true, the 'sceneTransform' property will always contain the scene
     *                                       transform, and if 'returnSceneTransform' is false, the 'sceneTransform' property will always
     *                                       be null.
     */
    getLocalSplatParameters(globalIndex, paramsObj, returnSceneTransform) {
        if (returnSceneTransform === undefined || returnSceneTransform === null) {
            returnSceneTransform = this.dynamicMode ? false : true;
        }
        paramsObj.splatBuffer = this.getSplatBufferForSplat(globalIndex);
        paramsObj.localIndex = this.getSplatLocalIndex(globalIndex);
        paramsObj.sceneTransform = returnSceneTransform ? this.getSceneTransformForSplat(globalIndex) : null;
    }

    /**
     * Fill arrays with splat data and apply transforms if appropriate. Each array is optional.
     * @param {Float32Array} covariances Target storage for splat covariances
     * @param {Float32Array} scales Target storage for splat scales
     * @param {Float32Array} rotations Target storage for splat rotations
     * @param {Float32Array} centers Target storage for splat centers
     * @param {Uint8Array} colors Target storage for splat colors
     * @param {Float32Array} sphericalHarmonics Target storage for spherical harmonics
     * @param {boolean} applySceneTransform By default, scene transforms are applied to relevant splat data only if the splat mesh is
     *                                      static. If 'applySceneTransform' is true, scene transforms will always be applied and if
     *                                      it is false, they will never be applied. If undefined, the default behavior will apply.
     * @param {number} covarianceCompressionLevel The compression level for covariances in the destination array
     * @param {number} sphericalHarmonicsCompressionLevel The compression level for spherical harmonics in the destination array
     * @param {number} srcStart The start location from which to pull source data
     * @param {number} srcEnd The end location from which to pull source data
     * @param {number} destStart The start location from which to write data
     */
    fillSplatDataArrays(covariances, scales, rotations, centers, colors, sphericalHarmonics, flameModelPos,
                         applySceneTransform,
                        covarianceCompressionLevel = 0, scaleRotationCompressionLevel = 0, sphericalHarmonicsCompressionLevel = 1,
                        srcStart, srcEnd, destStart = 0, sceneIndex) {
        const scaleOverride = new THREE.Vector3();
        scaleOverride.x = undefined;
        scaleOverride.y = undefined;
        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            scaleOverride.z = undefined;
        } else {
            scaleOverride.z = 1;
        }
        const tempTransform = new THREE.Matrix4();

        let startSceneIndex = 0;
        let endSceneIndex = this.scenes.length - 1;
        if (sceneIndex !== undefined && sceneIndex !== null && sceneIndex >= 0 && sceneIndex <= this.scenes.length) {
            startSceneIndex = sceneIndex;
            endSceneIndex = sceneIndex;
        }
        for (let i = startSceneIndex; i <= endSceneIndex; i++) {
            if (applySceneTransform === undefined || applySceneTransform === null) {
                applySceneTransform = this.dynamicMode ? false : true;
            }

            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            let sceneTransform;
            if (applySceneTransform) {
                this.getSceneTransform(i, tempTransform);
                sceneTransform = tempTransform;
            }
            if (covariances) {
                splatBuffer.fillSplatCovarianceArray(covariances, sceneTransform, srcStart, srcEnd, destStart, covarianceCompressionLevel);
            }
            if (scales || rotations) {
                if (!scales || !rotations) {
                    throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');
                }
                splatBuffer.fillSplatScaleRotationArray(scales, rotations, sceneTransform,
                                                        srcStart, srcEnd, destStart, scaleRotationCompressionLevel, scaleOverride);
            }
            if (centers) splatBuffer.fillSplatCenterArray(this.morphedMesh, centers, sceneTransform, srcStart, srcEnd, destStart);
            if (colors) splatBuffer.fillSplatColorArray(colors, scene.minimumAlpha, srcStart, srcEnd, destStart);
            if (sphericalHarmonics) {
                splatBuffer.fillSphericalHarmonicsArray(sphericalHarmonics, this.minSphericalHarmonicsDegree,
                                                        sceneTransform, srcStart, srcEnd, destStart, sphericalHarmonicsCompressionLevel);
            }

            destStart += splatBuffer.getSplatCount();
        }
    }

    morphedMesh;
    /**
     * Convert splat centers, which are floating point values, to an array of integers and multiply
     * each by 1000. Centers will get transformed as appropriate before conversion to integer.
     * @param {number} start The index at which to start retrieving data
     * @param {number} end The index at which to stop retrieving data
     * @param {boolean} padFour Enforce alignment of 4 by inserting a 1 after every 3 values
     * @return {Int32Array}
     */
    getIntegerCenters(start, end, padFour = false) {
        const splatCount = end - start + 1;
        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, undefined, undefined, undefined, undefined, start);
        let intCenters;
        let componentCount = padFour ? 4 : 3;
        intCenters = new Int32Array(splatCount * componentCount);
        for (let i = 0; i < splatCount; i++) {
            for (let t = 0; t < 3; t++) {
                intCenters[i * componentCount + t] = Math.round(floatCenters[i * 3 + t] * 1000.0);
            }
            if (padFour) intCenters[i * componentCount + 3] = 1000;
        }
        return intCenters;
    }

    /**
     * Returns an array of splat centers, transformed as appropriate, optionally padded.
     * @param {number} start The index at which to start retrieving data
     * @param {number} end The index at which to stop retrieving data
     * @param {boolean} padFour Enforce alignment of 4 by inserting a 1 after every 3 values
     * @return {Float32Array}
     */
    getFloatCenters(start, end, padFour = false) {
        const splatCount = end - start + 1;
        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, undefined, undefined, undefined, undefined, start);
        if (!padFour) return floatCenters;
        let paddedFloatCenters = new Float32Array(splatCount * 4);
        for (let i = 0; i < splatCount; i++) {
            for (let t = 0; t < 3; t++) {
                paddedFloatCenters[i * 4 + t] = floatCenters[i * 3 + t];
            }
            paddedFloatCenters[i * 4 + 3] = 1.0;
        }
        return paddedFloatCenters;
    }

    /**
     * Get the center for a splat, transformed as appropriate.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector3} outCenter THREE.Vector3 instance in which to store splat center
     * @param {boolean} applySceneTransform By default, if the splat mesh is static, the transform of the scene to which the splat at
     *                                      'globalIndex' belongs will be applied to the splat center. If 'applySceneTransform' is true,
     *                                      the scene transform will always be applied and if 'applySceneTransform' is false, the
     *                                      scene transform will never be applied. If undefined, the default behavior will apply.
     */
    getSplatCenter = function() {

        const paramsObj = {};

        return function(morphedMesh, globalIndex, outCenter, applySceneTransform) {
            this.getLocalSplatParameters(globalIndex, paramsObj, applySceneTransform);
            paramsObj.splatBuffer.getSplatCenter(morphedMesh, paramsObj.localIndex, outCenter, paramsObj.sceneTransform);
        };

    }();

    /**
     * Get the scale and rotation for a splat, transformed as appropriate.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector3} outScale THREE.Vector3 instance in which to store splat scale
     * @param {THREE.Quaternion} outRotation THREE.Quaternion instance in which to store splat rotation
     * @param {boolean} applySceneTransform By default, if the splat mesh is static, the transform of the scene to which the splat at
     *                                      'globalIndex' belongs will be applied to the splat scale and rotation. If
     *                                      'applySceneTransform' is true, the scene transform will always be applied and if
     *                                      'applySceneTransform' is false, the scene transform will never be applied. If undefined,
     *                                      the default behavior will apply.
     */
    getSplatScaleAndRotation = function() {

        const paramsObj = {};
        const scaleOverride = new THREE.Vector3();

        return function(globalIndex, outScale, outRotation, applySceneTransform) {
            this.getLocalSplatParameters(globalIndex, paramsObj, applySceneTransform);
            scaleOverride.x = undefined;
            scaleOverride.y = undefined;
            scaleOverride.z = undefined;
            if (this.splatRenderMode === SplatRenderMode.TwoD) scaleOverride.z = 0;
            paramsObj.splatBuffer.getSplatScaleAndRotation(paramsObj.localIndex, outScale, outRotation,
                                                           paramsObj.sceneTransform, scaleOverride);
        };

    }();

    /**
     * Get the color for a splat.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector4} outColor THREE.Vector4 instance in which to store splat color
     */
    getSplatColor = function() {

        const paramsObj = {};

        return function(globalIndex, outColor) {
            this.getLocalSplatParameters(globalIndex, paramsObj);
            paramsObj.splatBuffer.getSplatColor(paramsObj.localIndex, outColor);
        };

    }();

    /**
     * Store the transform of the scene at 'sceneIndex' in 'outTransform'.
     * @param {number} sceneIndex Index of the desired scene
     * @param {THREE.Matrix4} outTransform Instance of THREE.Matrix4 in which to store the scene's transform
     */
    getSceneTransform(sceneIndex, outTransform) {
        const scene = this.getScene(sceneIndex);
        scene.updateTransform(this.dynamicMode);
        outTransform.copy(scene.transform);
    }

    /**
     * Get the scene at 'sceneIndex'.
     * @param {number} sceneIndex Index of the desired scene
     * @return {SplatScene}
     */
    getScene(sceneIndex) {
        if (sceneIndex < 0 || sceneIndex >= this.scenes.length) {
            throw new Error('SplatMesh::getScene() -> Invalid scene index.');
        }
        return this.scenes[sceneIndex];
    }

    getSceneCount() {
        return this.scenes.length;
    }

    getSplatBufferForSplat(globalIndex) {
        return this.getScene(this.globalSplatIndexToSceneIndexMap[globalIndex]).splatBuffer;
    }

    getSceneIndexForSplat(globalIndex) {
        return this.globalSplatIndexToSceneIndexMap[globalIndex];
    }

    getSceneTransformForSplat(globalIndex) {
        return this.getScene(this.globalSplatIndexToSceneIndexMap[globalIndex]).transform;
    }

    getSplatLocalIndex(globalIndex) {
        return this.globalSplatIndexToLocalSplatIndexMap[globalIndex];
    }

    static getIntegerMatrixArray(matrix) {
        const matrixElements = matrix.elements;
        const intMatrixArray = [];
        for (let i = 0; i < 16; i++) {
            intMatrixArray[i] = Math.round(matrixElements[i] * 1000.0);
        }
        return intMatrixArray;
    }

    computeBoundingBox(applySceneTransforms = false, sceneIndex) {
        let splatCount = this.getSplatCount();
        if (sceneIndex !== undefined && sceneIndex !== null) {
            if (sceneIndex < 0 || sceneIndex >= this.scenes.length) {
                throw new Error('SplatMesh::computeBoundingBox() -> Invalid scene index.');
            }
            splatCount = this.scenes[sceneIndex].splatBuffer.getSplatCount();
        }

        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, applySceneTransforms,
                                 undefined, undefined, undefined, undefined, sceneIndex);

        const min = new THREE.Vector3();
        const max = new THREE.Vector3();
        for (let i = 0; i < splatCount; i++) {
            const offset = i * 3;
            const x = floatCenters[offset];
            const y = floatCenters[offset + 1];
            const z = floatCenters[offset + 2];
            if (i === 0 || x < min.x) min.x = x;
            if (i === 0 || y < min.y) min.y = y;
            if (i === 0 || z < min.z) min.z = z;
            if (i === 0 || x > max.x) max.x = x;
            if (i === 0 || y > max.y) max.y = y;
            if (i === 0 || z > max.z) max.z = z;
        }

        return new THREE.Box3(min, max);
    }
}

/**
 * DirectLoadError
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Minor enhancement: Added this.name property for better error identification.
 */
class DirectLoadError extends Error {
    constructor(msg) {
        super(msg);
        this.name = 'DirectLoadError';
    }
}

/**
 * UncompressedSplatArray
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const BASE_COMPONENT_COUNT = 14;

class UncompressedSplatArray {

    static OFFSET = {
        X: 0,
        Y: 1,
        Z: 2,
        SCALE0: 3,
        SCALE1: 4,
        SCALE2: 5,
        ROTATION0: 6,
        ROTATION1: 7,
        ROTATION2: 8,
        ROTATION3: 9,
        FDC0: 10,
        FDC1: 11,
        FDC2: 12,
        OPACITY: 13,
        FRC0: 14,
        FRC1: 15,
        FRC2: 16,
        FRC3: 17,
        FRC4: 18,
        FRC5: 19,
        FRC6: 20,
        FRC7: 21,
        FRC8: 22,
        FRC9: 23,
        FRC10: 24,
        FRC11: 25,
        FRC12: 26,
        FRC13: 27,
        FRC14: 28,
        FRC15: 29,
        FRC16: 30,
        FRC17: 31,
        FRC18: 32,
        FRC19: 33,
        FRC20: 34,
        FRC21: 35,
        FRC22: 36,
        FRC23: 37
    };

    constructor(sphericalHarmonicsDegree = 0) {
        this.sphericalHarmonicsDegree = sphericalHarmonicsDegree;
        this.sphericalHarmonicsCount = getSphericalHarmonicsComponentCountForDegree(this.sphericalHarmonicsDegree);
        this.componentCount = this.sphericalHarmonicsCount + BASE_COMPONENT_COUNT;
        this.defaultSphericalHarmonics = new Array(this.sphericalHarmonicsCount).fill(0);
        this.splats = [];
        this.splatCount = 0;
    }

    static createSplat(sphericalHarmonicsDegree = 0) {
        const baseSplat = [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0];
        let shEntries = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
        for (let i = 0; i < shEntries; i++) baseSplat.push(0);
        return baseSplat;
    }

    addSplat(splat) {
        this.splats.push(splat);
        this.splatCount++;
    }

    getSplat(index) {
        return this.splats[index];
    }

    addDefaultSplat() {
        const newSplat = UncompressedSplatArray.createSplat(this.sphericalHarmonicsDegree);
        this.addSplat(newSplat);
        return newSplat;
    }

    addSplatFromComonents(x, y, z, scale0, scale1, scale2, rot0, rot1, rot2, rot3, r, g, b, opacity, ...rest) {
        const newSplat = [x, y, z, scale0, scale1, scale2, rot0, rot1, rot2, rot3, r, g, b, opacity, ...this.defaultSphericalHarmonics];
        for (let i = 0; i < rest.length && i < this.sphericalHarmonicsCount; i++) {
            newSplat[i] = rest[i];
        }
        this.addSplat(newSplat);
        return newSplat;
    }

    addSplatFromArray(src, srcIndex) {
        const srcSplat = src.splats[srcIndex];
        const newSplat = UncompressedSplatArray.createSplat(this.sphericalHarmonicsDegree);
        for (let i = 0; i < this.componentCount && i < srcSplat.length; i++) {
            newSplat[i] = srcSplat[i];
        }
        this.addSplat(newSplat);
    }
}

/**
 * SplatBuffer
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


/**
 * Helper function to copy bytes between buffers
 */
const copyBetweenBuffers = (srcBuffer, srcOffset, destBuffer, destOffset, byteCount = 0) => {
    const src = new Uint8Array(srcBuffer, srcOffset);
    const dest = new Uint8Array(destBuffer, destOffset);
    for (let i = 0; i < byteCount; i++) {
        dest[i] = src[i];
    }
};

// Compression/decompression helper functions
Constants$1.SphericalHarmonics8BitCompressionRange;

const toHalfFloat = THREE.DataUtils.toHalfFloat.bind(THREE.DataUtils);
const fromHalfFloat = THREE.DataUtils.fromHalfFloat.bind(THREE.DataUtils);

const toUncompressedFloat = (f, compressionLevel, isSH = false, range8BitMin, range8BitMax) => {
    if (compressionLevel === 0) {
        return f;
    } else if (compressionLevel === 1 || compressionLevel === 2 && !isSH) {
        return THREE.DataUtils.fromHalfFloat(f);
    } else if (compressionLevel === 2) {
        return fromUint8(f, range8BitMin, range8BitMax);
    }
};

const toUint8 = (v, rangeMin, rangeMax) => {
    v = clamp(v, rangeMin, rangeMax);
    const range = (rangeMax - rangeMin);
    return clamp(Math.floor((v - rangeMin) / range * 255), 0, 255);
};

const fromUint8 = (v, rangeMin, rangeMax) => {
    const range = (rangeMax - rangeMin);
    return (v / 255 * range + rangeMin);
};

const fromHalfFloatToUint8 = (v, rangeMin, rangeMax) => {
    return toUint8(fromHalfFloat(v), rangeMin, rangeMax);
};

const dataViewFloatForCompressionLevel = (dataView, floatIndex, compressionLevel, isSH = false) => {
    if (compressionLevel === 0) {
        return dataView.getFloat32(floatIndex * 4, true);
    } else if (compressionLevel === 1 || compressionLevel === 2 && !isSH) {
        return dataView.getUint16(floatIndex * 2, true);
    } else {
        return dataView.getUint8(floatIndex, true);
    }
};

class SplatBuffer {

    static CurrentMajorVersion = 0;
    static CurrentMinorVersion = 1;

    static CenterComponentCount = 3;
    static ScaleComponentCount = 3;
    static RotationComponentCount = 4;
    static ColorComponentCount = 4;
    static CovarianceComponentCount = 6;

    static SplatScaleOffsetFloat = 3;
    static SplatRotationOffsetFloat = 6;

    static CompressionLevels = {
        0: {
            BytesPerCenter: 12,
            BytesPerScale: 12,
            BytesPerRotation: 16,
            BytesPerColor: 4,
            ScaleOffsetBytes: 12,
            RotationffsetBytes: 24,
            ColorOffsetBytes: 40,
            SphericalHarmonicsOffsetBytes: 44,
            ScaleRange: 1,
            BytesPerSphericalHarmonicsComponent: 4,
            SphericalHarmonicsOffsetFloat: 11,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 44 },
                1: { BytesPerSplat: 80 },
                2: { BytesPerSplat: 140 }
            },
        },
        1: {
            BytesPerCenter: 6,
            BytesPerScale: 6,
            BytesPerRotation: 8,
            BytesPerColor: 4,
            ScaleOffsetBytes: 6,
            RotationffsetBytes: 12,
            ColorOffsetBytes: 20,
            SphericalHarmonicsOffsetBytes: 24,
            ScaleRange: 32767,
            BytesPerSphericalHarmonicsComponent: 2,
            SphericalHarmonicsOffsetFloat: 12,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 24 },
                1: { BytesPerSplat: 42 },
                2: { BytesPerSplat: 72 }
            },
        },
        2: {
            BytesPerCenter: 6,
            BytesPerScale: 6,
            BytesPerRotation: 8,
            BytesPerColor: 4,
            ScaleOffsetBytes: 6,
            RotationffsetBytes: 12,
            ColorOffsetBytes: 20,
            SphericalHarmonicsOffsetBytes: 24,
            ScaleRange: 32767,
            BytesPerSphericalHarmonicsComponent: 1,
            SphericalHarmonicsOffsetFloat: 12,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 24 },
                1: { BytesPerSplat: 33 },
                2: { BytesPerSplat: 48 }
            },
        }
    };

    static CovarianceSizeFloats = 6;

    static HeaderSizeBytes = 4096;
    static SectionHeaderSizeBytes = 1024;

    static BucketStorageSizeBytes = 12;
    static BucketStorageSizeFloats = 3;

    static BucketBlockSize = 5.0;
    static BucketSize = 256;

    constructor(bufferData, secLoadedCountsToMax = true) {
        this.constructFromBuffer(bufferData, secLoadedCountsToMax);
    }

    getSplatCount() {
        return this.splatCount;
    }

    getMaxSplatCount() {
        return this.maxSplatCount;
    }

    getMinSphericalHarmonicsDegree() {
        let minSphericalHarmonicsDegree = 0;
        for (let i = 0; i < this.sections.length; i++) {
            const section = this.sections[i];
            if (i === 0 || section.sphericalHarmonicsDegree < minSphericalHarmonicsDegree) {
                minSphericalHarmonicsDegree = section.sphericalHarmonicsDegree;
            }
        }
        return minSphericalHarmonicsDegree;
    }

    getBucketIndex(section, localSplatIndex) {
        let bucketIndex;
        const maxSplatIndexInFullBuckets = section.fullBucketCount * section.bucketSize;
        if (localSplatIndex < maxSplatIndexInFullBuckets) {
            bucketIndex = Math.floor(localSplatIndex / section.bucketSize);
        } else {
            let bucketSplatIndex = maxSplatIndexInFullBuckets;
            bucketIndex = section.fullBucketCount;
            let partiallyFullBucketIndex = 0;
            while (bucketSplatIndex < section.splatCount) {
                let currentPartiallyFilledBucketSize = section.partiallyFilledBucketLengths[partiallyFullBucketIndex];
                if (localSplatIndex >= bucketSplatIndex && localSplatIndex < bucketSplatIndex + currentPartiallyFilledBucketSize) {
                    break;
                }
                bucketSplatIndex += currentPartiallyFilledBucketSize;
                bucketIndex++;
                partiallyFullBucketIndex++;
            }
        }
        return bucketIndex;
    }

    getSplatCenter(morphedMesh, globalSplatIndex, outCenter, transform) {
        const sectionIndex = this.globalSplatIndexToSectionMap[globalSplatIndex];
        const section = this.sections[sectionIndex];
        const localSplatIndex = globalSplatIndex - section.splatCountOffset;

        const srcSplatCentersBase = section.bytesPerSplat * localSplatIndex;
        const dataView = new DataView(this.bufferData, section.dataBase + srcSplatCentersBase);

        const x = dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
        const y = dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
        const z = dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);
        if (this.compressionLevel >= 1) {
            const bucketIndex = this.getBucketIndex(section, localSplatIndex);
            const bucketBase = bucketIndex * SplatBuffer.BucketStorageSizeFloats;
            const sf = section.compressionScaleFactor;
            const sr = section.compressionScaleRange;
            outCenter.x = (x - sr) * sf + section.bucketArray[bucketBase];
            outCenter.y = (y - sr) * sf + section.bucketArray[bucketBase + 1];
            outCenter.z = (z - sr) * sf + section.bucketArray[bucketBase + 2];
        } else {
            outCenter.x = x;
            outCenter.y = y;
            outCenter.z = z;
        }

        outCenter.x += morphedMesh[globalSplatIndex * 3 + 0];
        outCenter.y += morphedMesh[globalSplatIndex * 3 + 1];
        outCenter.z += morphedMesh[globalSplatIndex * 3 + 2];


        if (transform) outCenter.applyMatrix4(transform);
    }

    getSplatScaleAndRotation = function() {

        const scaleMatrix = new THREE.Matrix4();
        const rotationMatrix = new THREE.Matrix4();
        const tempMatrix = new THREE.Matrix4();
        const tempPosition = new THREE.Vector3();
        const scale = new THREE.Vector3();
        const rotation = new THREE.Quaternion();

        return function(index, outScale, outRotation, transform, scaleOverride) {
            const sectionIndex = this.globalSplatIndexToSectionMap[index];
            const section = this.sections[sectionIndex];
            const localSplatIndex = index - section.splatCountOffset;

            const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

            scale.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel), this.compressionLevel));
            if (scaleOverride) {
                if (scaleOverride.x !== undefined) scale.x = scaleOverride.x;
                if (scaleOverride.y !== undefined) scale.y = scaleOverride.y;
                if (scaleOverride.z !== undefined) scale.z = scaleOverride.z;
            }

            rotation.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel), this.compressionLevel));

            if (transform) {
                scaleMatrix.makeScale(scale.x, scale.y, scale.z);
                rotationMatrix.makeRotationFromQuaternion(rotation);
                tempMatrix.copy(scaleMatrix).multiply(rotationMatrix).multiply(transform);
                tempMatrix.decompose(tempPosition, outRotation, outScale);
            } else {
                outScale.copy(scale);
                outRotation.copy(rotation);
            }
        };

    }();

    getSplatColor(globalSplatIndex, outColor) {
        const sectionIndex = this.globalSplatIndexToSectionMap[globalSplatIndex];
        const section = this.sections[sectionIndex];
        const localSplatIndex = globalSplatIndex - section.splatCountOffset;

        const srcSplatColorsBase = section.bytesPerSplat * localSplatIndex +
                                   SplatBuffer.CompressionLevels[this.compressionLevel].ColorOffsetBytes;
        const splatColorsArray = new Uint8Array(this.bufferData, section.dataBase + srcSplatColorsBase, 4);

        outColor.set(splatColorsArray[0], splatColorsArray[1],
                     splatColorsArray[2], splatColorsArray[3]);
    }

    fillSplatCenterArray(morphedMesh, outCenterArray, transform, srcFrom, srcTo, destFrom) {
        const splatCount = this.splatCount;

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        const center = new THREE.Vector3();
        for (let i = srcFrom; i <= srcTo; i++) {
            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;
            const centerDestBase = (i - srcFrom + destFrom) * SplatBuffer.CenterComponentCount;

            const srcSplatCentersBase = section.bytesPerSplat * localSplatIndex;
            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatCentersBase);

            const x = dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
            const y = dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
            const z = dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);
            if (this.compressionLevel >= 1) {
                const bucketIndex = this.getBucketIndex(section, localSplatIndex);
                const bucketBase = bucketIndex * SplatBuffer.BucketStorageSizeFloats;
                const sf = section.compressionScaleFactor;
                const sr = section.compressionScaleRange;
                center.x = (x - sr) * sf + section.bucketArray[bucketBase];
                center.y = (y - sr) * sf + section.bucketArray[bucketBase + 1];
                center.z = (z - sr) * sf + section.bucketArray[bucketBase + 2];
            } else {
                center.x = x;
                center.y = y;
                center.z = z;
            }
            if (transform) {
                center.applyMatrix4(transform);
            }

            outCenterArray[centerDestBase] = center.x + morphedMesh[i * 3 + 0];
            outCenterArray[centerDestBase + 1] = center.y + morphedMesh[i * 3 + 1];
            outCenterArray[centerDestBase + 2] = center.z + morphedMesh[i * 3 + 2];

            // outCenterArray[centerDestBase] = morphedMesh[centerDestBase];
            // outCenterArray[centerDestBase + 1] = morphedMesh[centerDestBase + 1];
            // outCenterArray[centerDestBase + 2] = morphedMesh[centerDestBase + 2];

            // outCenterArray[centerDestBase] = center.x;
            // outCenterArray[centerDestBase + 1] = center.y;
            // outCenterArray[centerDestBase + 2] = center.z;
        }
    }

    fillSplatScaleRotationArray = function() {

        const scaleMatrix = new THREE.Matrix4();
        const rotationMatrix = new THREE.Matrix4();
        const tempMatrix = new THREE.Matrix4();
        const scale = new THREE.Vector3();
        const rotation = new THREE.Quaternion();
        const tempPosition = new THREE.Vector3();

        const ensurePositiveW = (quaternion) => {
            const flip = quaternion.w < 0 ? -1 : 1;
            quaternion.x *= flip;
            quaternion.y *= flip;
            quaternion.z *= flip;
            quaternion.w *= flip;
        };

        return function(outScaleArray, outRotationArray, transform, srcFrom, srcTo, destFrom,
                        desiredOutputCompressionLevel, scaleOverride) {
            const splatCount = this.splatCount;

            srcFrom = srcFrom || 0;
            srcTo = srcTo || splatCount - 1;
            if (destFrom === undefined) destFrom = srcFrom;

            const outputConversion = (value, srcCompressionLevel) => {
                return convertBetweenCompressionLevels(value, srcCompressionLevel, desiredOutputCompressionLevel);
            };

            for (let i = srcFrom; i <= srcTo; i++) {
                const sectionIndex = this.globalSplatIndexToSectionMap[i];
                const section = this.sections[sectionIndex];
                const localSplatIndex = i - section.splatCountOffset;

                const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                        SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

                const scaleDestBase = (i - srcFrom + destFrom) * SplatBuffer.ScaleComponentCount;
                const rotationDestBase = (i - srcFrom + destFrom) * SplatBuffer.RotationComponentCount;
                const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

                const srcScaleX = (scaleOverride && scaleOverride.x !== undefined) ? scaleOverride.x :
                                   dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
                const srcScaleY = (scaleOverride && scaleOverride.y !== undefined) ? scaleOverride.y :
                                   dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
                const srcScaleZ = (scaleOverride && scaleOverride.z !== undefined) ? scaleOverride.z :
                                   dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);

                const srcRotationW = dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel);
                const srcRotationX = dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel);
                const srcRotationY = dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel);
                const srcRotationZ = dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel);

                scale.set(toUncompressedFloat(srcScaleX, this.compressionLevel),
                          toUncompressedFloat(srcScaleY, this.compressionLevel),
                          toUncompressedFloat(srcScaleZ, this.compressionLevel));

                rotation.set(toUncompressedFloat(srcRotationX, this.compressionLevel),
                             toUncompressedFloat(srcRotationY, this.compressionLevel),
                             toUncompressedFloat(srcRotationZ, this.compressionLevel),
                             toUncompressedFloat(srcRotationW, this.compressionLevel)).normalize();

                if (transform) {
                    tempPosition.set(0, 0, 0);
                    scaleMatrix.makeScale(scale.x, scale.y, scale.z);
                    rotationMatrix.makeRotationFromQuaternion(rotation);
                    tempMatrix.identity().premultiply(scaleMatrix).premultiply(rotationMatrix);
                    tempMatrix.premultiply(transform);
                    tempMatrix.decompose(tempPosition, rotation, scale);
                    rotation.normalize();
                }

                ensurePositiveW(rotation);

                if (outScaleArray) {
                    outScaleArray[scaleDestBase] = outputConversion(scale.x, 0);
                    outScaleArray[scaleDestBase + 1] = outputConversion(scale.y, 0);
                    outScaleArray[scaleDestBase + 2] = outputConversion(scale.z, 0);
                }

                if (outRotationArray) {
                    outRotationArray[rotationDestBase] = outputConversion(rotation.x, 0);
                    outRotationArray[rotationDestBase + 1] = outputConversion(rotation.y, 0);
                    outRotationArray[rotationDestBase + 2] = outputConversion(rotation.z, 0);
                    outRotationArray[rotationDestBase + 3] = outputConversion(rotation.w, 0);
                }
            }
        };
    }();

    static computeCovariance = function() {

        const tempMatrix4 = new THREE.Matrix4();
        const scaleMatrix = new THREE.Matrix3();
        const rotationMatrix = new THREE.Matrix3();
        const covarianceMatrix = new THREE.Matrix3();
        const transformedCovariance = new THREE.Matrix3();
        const transform3x3 = new THREE.Matrix3();
        const transform3x3Transpose = new THREE.Matrix3();

        return function(scale, rotation, transform, outCovariance, outOffset = 0, desiredOutputCompressionLevel) {

            tempMatrix4.makeScale(scale.x, scale.y, scale.z);
            scaleMatrix.setFromMatrix4(tempMatrix4);

            tempMatrix4.makeRotationFromQuaternion(rotation);
            rotationMatrix.setFromMatrix4(tempMatrix4);

            covarianceMatrix.copy(rotationMatrix).multiply(scaleMatrix);
            transformedCovariance.copy(covarianceMatrix).transpose().premultiply(covarianceMatrix);

            if (transform) {
                transform3x3.setFromMatrix4(transform);
                transform3x3Transpose.copy(transform3x3).transpose();
                transformedCovariance.multiply(transform3x3Transpose);
                transformedCovariance.premultiply(transform3x3);
            }

            if (desiredOutputCompressionLevel >= 1) {
                outCovariance[outOffset] = toHalfFloat(transformedCovariance.elements[0]);
                outCovariance[outOffset + 1] = toHalfFloat(transformedCovariance.elements[3]);
                outCovariance[outOffset + 2] = toHalfFloat(transformedCovariance.elements[6]);
                outCovariance[outOffset + 3] = toHalfFloat(transformedCovariance.elements[4]);
                outCovariance[outOffset + 4] = toHalfFloat(transformedCovariance.elements[7]);
                outCovariance[outOffset + 5] = toHalfFloat(transformedCovariance.elements[8]);
            } else {
                outCovariance[outOffset] = transformedCovariance.elements[0];
                outCovariance[outOffset + 1] = transformedCovariance.elements[3];
                outCovariance[outOffset + 2] = transformedCovariance.elements[6];
                outCovariance[outOffset + 3] = transformedCovariance.elements[4];
                outCovariance[outOffset + 4] = transformedCovariance.elements[7];
                outCovariance[outOffset + 5] = transformedCovariance.elements[8];
            }

        };

    }();

    fillSplatCovarianceArray(covarianceArray, transform, srcFrom, srcTo, destFrom, desiredOutputCompressionLevel) {
        const splatCount = this.splatCount;

        const scale = new THREE.Vector3();
        const rotation = new THREE.Quaternion();

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        for (let i = srcFrom; i <= srcTo; i++) {
            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;

            const covarianceDestBase = (i - srcFrom + destFrom) * SplatBuffer.CovarianceComponentCount;
            const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

            scale.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel), this.compressionLevel));

            rotation.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel), this.compressionLevel));

            SplatBuffer.computeCovariance(scale, rotation, transform, covarianceArray, covarianceDestBase, desiredOutputCompressionLevel);
        }
    }

    fillSplatColorArray(outColorArray, minimumAlpha, srcFrom, srcTo, destFrom) {
        const splatCount = this.splatCount;

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        for (let i = srcFrom; i <= srcTo; i++) {

            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;

            const colorDestBase = (i - srcFrom + destFrom) * SplatBuffer.ColorComponentCount;
            const srcSplatColorsBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ColorOffsetBytes;

            const dataView = new Uint8Array(this.bufferData, section.dataBase + srcSplatColorsBase);

            let alpha = dataView[3];
            alpha = (alpha >= minimumAlpha) ? alpha : 0;

            outColorArray[colorDestBase] = dataView[0];
            outColorArray[colorDestBase + 1] = dataView[1];
            outColorArray[colorDestBase + 2] = dataView[2];
            outColorArray[colorDestBase + 3] = alpha;
        }
    }

    fillSphericalHarmonicsArray = function() {
        for (let i = 0; i < 15; i++) {
            new THREE.Vector3();
        }

        const tempMatrix3 = new THREE.Matrix3();
        const tempMatrix4 = new THREE.Matrix4();

        const tempTranslation = new THREE.Vector3();
        const tempScale = new THREE.Vector3();
        const tempRotation = new THREE.Quaternion();

        const sh11 = [];
        const sh12 = [];
        const sh13 = [];

        const sh21 = [];
        const sh22 = [];
        const sh23 = [];
        const sh24 = [];
        const sh25 = [];

        const shIn1 = [];
        const shIn2 = [];
        const shIn3 = [];
        const shIn4 = [];
        const shIn5 = [];

        const shOut1 = [];
        const shOut2 = [];
        const shOut3 = [];
        const shOut4 = [];
        const shOut5 = [];

        const noop = (v) => v;

        const set3 = (array, val1, val2, val3) => {
            array[0] = val1;
            array[1] = val2;
            array[2] = val3;
        };

        const set3FromArray = (array, srcDestView, stride, srcBase, compressionLevel) => {
            array[0] = dataViewFloatForCompressionLevel(srcDestView, srcBase, compressionLevel, true);
            array[1] = dataViewFloatForCompressionLevel(srcDestView, srcBase + stride, compressionLevel, true);
            array[2] = dataViewFloatForCompressionLevel(srcDestView, srcBase + stride + stride, compressionLevel, true);
        };

        const copy3 = (srcArray, destArray) => {
            destArray[0] = srcArray[0];
            destArray[1] = srcArray[1];
            destArray[2] = srcArray[2];
        };

        const setOutput3 = (srcArray, destArray, destBase, conversionFunc) => {
            destArray[destBase] = conversionFunc(srcArray[0]);
            destArray[destBase + 1] = conversionFunc(srcArray[1]);
            destArray[destBase + 2] = conversionFunc(srcArray[2]);
        };

        const toUncompressedFloatArray3 = (src, dest, compressionLevel, range8BitMin, range8BitMax) => {
            dest[0] = toUncompressedFloat(src[0], compressionLevel, true, range8BitMin, range8BitMax);
            dest[1] = toUncompressedFloat(src[1], compressionLevel, true, range8BitMin, range8BitMax);
            dest[2] = toUncompressedFloat(src[2], compressionLevel, true, range8BitMin, range8BitMax);
            return dest;
        };

        return function(outSphericalHarmonicsArray, outSphericalHarmonicsDegree, transform,
                        srcFrom, srcTo, destFrom, desiredOutputCompressionLevel) {
            const splatCount = this.splatCount;

            srcFrom = srcFrom || 0;
            srcTo = srcTo || splatCount - 1;
            if (destFrom === undefined) destFrom = srcFrom;

            if (transform && outSphericalHarmonicsDegree >= 1) {
                tempMatrix4.copy(transform);
                tempMatrix4.decompose(tempTranslation, tempRotation, tempScale);
                tempRotation.normalize();
                tempMatrix4.makeRotationFromQuaternion(tempRotation);
                tempMatrix3.setFromMatrix4(tempMatrix4);
                set3(sh11, tempMatrix3.elements[4], -tempMatrix3.elements[7], tempMatrix3.elements[1]);
                set3(sh12, -tempMatrix3.elements[5], tempMatrix3.elements[8], -tempMatrix3.elements[2]);
                set3(sh13, tempMatrix3.elements[3], -tempMatrix3.elements[6], tempMatrix3.elements[0]);
            }

            const localFromHalfFloatToUint8 = (v) => {
                return fromHalfFloatToUint8(v, this.minSphericalHarmonicsCoeff, this.maxSphericalHarmonicsCoeff);
            };

            const localToUint8 = (v) => {
                return toUint8(v, this.minSphericalHarmonicsCoeff, this.maxSphericalHarmonicsCoeff);
            };

            for (let i = srcFrom; i <= srcTo; i++) {

                const sectionIndex = this.globalSplatIndexToSectionMap[i];
                const section = this.sections[sectionIndex];
                outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, section.sphericalHarmonicsDegree);
                const outSphericalHarmonicsComponentsCount = getSphericalHarmonicsComponentCountForDegree(outSphericalHarmonicsDegree);

                const localSplatIndex = i - section.splatCountOffset;

                const srcSplatSHBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes;

                const dataView = new DataView(this.bufferData, section.dataBase + srcSplatSHBase);

                const shDestBase = (i - srcFrom + destFrom) * outSphericalHarmonicsComponentsCount;

                let compressionLevelForOutputConversion = transform ? 0 : this.compressionLevel;
                let outputConversionFunc = noop;
                if (compressionLevelForOutputConversion !== desiredOutputCompressionLevel) {
                    if (compressionLevelForOutputConversion === 1) {
                        if (desiredOutputCompressionLevel === 0) outputConversionFunc = fromHalfFloat;
                        else if (desiredOutputCompressionLevel == 2) outputConversionFunc = localFromHalfFloatToUint8;
                    } else if (compressionLevelForOutputConversion === 0) {
                        if (desiredOutputCompressionLevel === 1) outputConversionFunc = toHalfFloat;
                        else if (desiredOutputCompressionLevel == 2) outputConversionFunc = localToUint8;
                    }
                }

                const minShCoeff = this.minSphericalHarmonicsCoeff;
                const maxShCoeff = this.maxSphericalHarmonicsCoeff;

                if (outSphericalHarmonicsDegree >= 1) {

                    set3FromArray(shIn1, dataView, 3, 0, this.compressionLevel);
                    set3FromArray(shIn2, dataView, 3, 1, this.compressionLevel);
                    set3FromArray(shIn3, dataView, 3, 2, this.compressionLevel);

                    if (transform) {
                        toUncompressedFloatArray3(shIn1, shIn1, this.compressionLevel, minShCoeff, maxShCoeff);
                        toUncompressedFloatArray3(shIn2, shIn2, this.compressionLevel, minShCoeff, maxShCoeff);
                        toUncompressedFloatArray3(shIn3, shIn3, this.compressionLevel, minShCoeff, maxShCoeff);
                        SplatBuffer.rotateSphericalHarmonics3(shIn1, shIn2, shIn3, sh11, sh12, sh13, shOut1, shOut2, shOut3);
                    } else {
                        copy3(shIn1, shOut1);
                        copy3(shIn2, shOut2);
                        copy3(shIn3, shOut3);
                    }

                    setOutput3(shOut1, outSphericalHarmonicsArray, shDestBase, outputConversionFunc);
                    setOutput3(shOut2, outSphericalHarmonicsArray, shDestBase + 3, outputConversionFunc);
                    setOutput3(shOut3, outSphericalHarmonicsArray, shDestBase + 6, outputConversionFunc);

                    if (outSphericalHarmonicsDegree >= 2) {

                        set3FromArray(shIn1, dataView, 5, 9, this.compressionLevel);
                        set3FromArray(shIn2, dataView, 5, 10, this.compressionLevel);
                        set3FromArray(shIn3, dataView, 5, 11, this.compressionLevel);
                        set3FromArray(shIn4, dataView, 5, 12, this.compressionLevel);
                        set3FromArray(shIn5, dataView, 5, 13, this.compressionLevel);

                        if (transform) {
                            toUncompressedFloatArray3(shIn1, shIn1, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn2, shIn2, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn3, shIn3, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn4, shIn4, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn5, shIn5, this.compressionLevel, minShCoeff, maxShCoeff);
                            SplatBuffer.rotateSphericalHarmonics5(shIn1, shIn2, shIn3, shIn4, shIn5,
                                                                  sh11, sh12, sh13, sh21, sh22, sh23, sh24, sh25,
                                                                  shOut1, shOut2, shOut3, shOut4, shOut5);
                        } else {
                            copy3(shIn1, shOut1);
                            copy3(shIn2, shOut2);
                            copy3(shIn3, shOut3);
                            copy3(shIn4, shOut4);
                            copy3(shIn5, shOut5);
                        }

                        setOutput3(shOut1, outSphericalHarmonicsArray, shDestBase + 9, outputConversionFunc);
                        setOutput3(shOut2, outSphericalHarmonicsArray, shDestBase + 12, outputConversionFunc);
                        setOutput3(shOut3, outSphericalHarmonicsArray, shDestBase + 15, outputConversionFunc);
                        setOutput3(shOut4, outSphericalHarmonicsArray, shDestBase + 18, outputConversionFunc);
                        setOutput3(shOut5, outSphericalHarmonicsArray, shDestBase + 21, outputConversionFunc);
                    }
                }
            }
        };

    }();

    static dot3 = (v1, v2, v3, transformRow, outArray) => {
        outArray[0] = outArray[1] = outArray[2] = 0;
        const t0 = transformRow[0];
        const t1 = transformRow[1];
        const t2 = transformRow[2];
        SplatBuffer.addInto3(v1[0] * t0, v1[1] * t0, v1[2] * t0, outArray);
        SplatBuffer.addInto3(v2[0] * t1, v2[1] * t1, v2[2] * t1, outArray);
        SplatBuffer.addInto3(v3[0] * t2, v3[1] * t2, v3[2] * t2, outArray);
    };

    static addInto3 = (val1, val2, val3, destArray) => {
        destArray[0] = destArray[0] + val1;
        destArray[1] = destArray[1] + val2;
        destArray[2] = destArray[2] + val3;
    };

    static dot5 = (v1, v2, v3, v4, v5, transformRow, outArray) => {
        outArray[0] = outArray[1] = outArray[2] = 0;
        const t0 = transformRow[0];
        const t1 = transformRow[1];
        const t2 = transformRow[2];
        const t3 = transformRow[3];
        const t4 = transformRow[4];
        SplatBuffer.addInto3(v1[0] * t0, v1[1] * t0, v1[2] * t0, outArray);
        SplatBuffer.addInto3(v2[0] * t1, v2[1] * t1, v2[2] * t1, outArray);
        SplatBuffer.addInto3(v3[0] * t2, v3[1] * t2, v3[2] * t2, outArray);
        SplatBuffer.addInto3(v4[0] * t3, v4[1] * t3, v4[2] * t3, outArray);
        SplatBuffer.addInto3(v5[0] * t4, v5[1] * t4, v5[2] * t4, outArray);
    };

    static rotateSphericalHarmonics3 = (in1, in2, in3, tsh11, tsh12, tsh13, out1, out2, out3) => {
        SplatBuffer.dot3(in1, in2, in3, tsh11, out1);
        SplatBuffer.dot3(in1, in2, in3, tsh12, out2);
        SplatBuffer.dot3(in1, in2, in3, tsh13, out3);
    };

    static rotateSphericalHarmonics5 = (in1, in2, in3, in4, in5, tsh11, tsh12, tsh13,
                                        tsh21, tsh22, tsh23, tsh24, tsh25, out1, out2, out3, out4, out5) => {

        const kSqrt0104 = Math.sqrt(1.0 / 4.0);
        const kSqrt0304 = Math.sqrt(3.0 / 4.0);
        const kSqrt0103 = Math.sqrt(1.0 / 3.0);
        const kSqrt0403 = Math.sqrt(4.0 / 3.0);
        const kSqrt0112 = Math.sqrt(1.0 / 12.0);

        tsh21[0] = kSqrt0104 * ((tsh13[2] * tsh11[0] + tsh13[0] * tsh11[2]) + (tsh11[2] * tsh13[0] + tsh11[0] * tsh13[2]));
        tsh21[1] = (tsh13[1] * tsh11[0] + tsh11[1] * tsh13[0]);
        tsh21[2] = kSqrt0304 * (tsh13[1] * tsh11[1] + tsh11[1] * tsh13[1]);
        tsh21[3] = (tsh13[1] * tsh11[2] + tsh11[1] * tsh13[2]);
        tsh21[4] = kSqrt0104 * ((tsh13[2] * tsh11[2] - tsh13[0] * tsh11[0]) + (tsh11[2] * tsh13[2] - tsh11[0] * tsh13[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh21, out1);

        tsh22[0] = kSqrt0104 * ((tsh12[2] * tsh11[0] + tsh12[0] * tsh11[2]) + (tsh11[2] * tsh12[0] + tsh11[0] * tsh12[2]));
        tsh22[1] = tsh12[1] * tsh11[0] + tsh11[1] * tsh12[0];
        tsh22[2] = kSqrt0304 * (tsh12[1] * tsh11[1] + tsh11[1] * tsh12[1]);
        tsh22[3] = tsh12[1] * tsh11[2] + tsh11[1] * tsh12[2];
        tsh22[4] = kSqrt0104 * ((tsh12[2] * tsh11[2] - tsh12[0] * tsh11[0]) + (tsh11[2] * tsh12[2] - tsh11[0] * tsh12[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh22, out2);

        tsh23[0] = kSqrt0103 * (tsh12[2] * tsh12[0] + tsh12[0] * tsh12[2]) + -kSqrt0112 *
                   ((tsh13[2] * tsh13[0] + tsh13[0] * tsh13[2]) + (tsh11[2] * tsh11[0] + tsh11[0] * tsh11[2]));
        tsh23[1] = kSqrt0403 * tsh12[1] * tsh12[0] + -kSqrt0103 * (tsh13[1] * tsh13[0] + tsh11[1] * tsh11[0]);
        tsh23[2] = tsh12[1] * tsh12[1] + -kSqrt0104 * (tsh13[1] * tsh13[1] + tsh11[1] * tsh11[1]);
        tsh23[3] = kSqrt0403 * tsh12[1] * tsh12[2] + -kSqrt0103 * (tsh13[1] * tsh13[2] + tsh11[1] * tsh11[2]);
        tsh23[4] = kSqrt0103 * (tsh12[2] * tsh12[2] - tsh12[0] * tsh12[0]) + -kSqrt0112 *
                   ((tsh13[2] * tsh13[2] - tsh13[0] * tsh13[0]) + (tsh11[2] * tsh11[2] - tsh11[0] * tsh11[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh23, out3);

        tsh24[0] = kSqrt0104 * ((tsh12[2] * tsh13[0] + tsh12[0] * tsh13[2]) + (tsh13[2] * tsh12[0] + tsh13[0] * tsh12[2]));
        tsh24[1] = tsh12[1] * tsh13[0] + tsh13[1] * tsh12[0];
        tsh24[2] = kSqrt0304 * (tsh12[1] * tsh13[1] + tsh13[1] * tsh12[1]);
        tsh24[3] = tsh12[1] * tsh13[2] + tsh13[1] * tsh12[2];
        tsh24[4] = kSqrt0104 * ((tsh12[2] * tsh13[2] - tsh12[0] * tsh13[0]) + (tsh13[2] * tsh12[2] - tsh13[0] * tsh12[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh24, out4);

        tsh25[0] = kSqrt0104 * ((tsh13[2] * tsh13[0] + tsh13[0] * tsh13[2]) - (tsh11[2] * tsh11[0] + tsh11[0] * tsh11[2]));
        tsh25[1] = (tsh13[1] * tsh13[0] - tsh11[1] * tsh11[0]);
        tsh25[2] = kSqrt0304 * (tsh13[1] * tsh13[1] - tsh11[1] * tsh11[1]);
        tsh25[3] = (tsh13[1] * tsh13[2] - tsh11[1] * tsh11[2]);
        tsh25[4] = kSqrt0104 * ((tsh13[2] * tsh13[2] - tsh13[0] * tsh13[0]) - (tsh11[2] * tsh11[2] - tsh11[0] * tsh11[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh25, out5);
    };

    static parseHeader(buffer) {
        const headerArrayUint8 = new Uint8Array(buffer, 0, SplatBuffer.HeaderSizeBytes);
        const headerArrayUint16 = new Uint16Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 2);
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const headerArrayFloat32 = new Float32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const versionMajor = headerArrayUint8[0];
        const versionMinor = headerArrayUint8[1];
        const maxSectionCount = headerArrayUint32[1];
        const sectionCount = headerArrayUint32[2];
        const maxSplatCount = headerArrayUint32[3];
        const splatCount = headerArrayUint32[4];
        const compressionLevel = headerArrayUint16[10];
        const sceneCenter = new THREE.Vector3(headerArrayFloat32[6], headerArrayFloat32[7], headerArrayFloat32[8]);

        const minSphericalHarmonicsCoeff = headerArrayFloat32[9] || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        const maxSphericalHarmonicsCoeff = headerArrayFloat32[10] || DefaultSphericalHarmonics8BitCompressionHalfRange;

        return {
            versionMajor,
            versionMinor,
            maxSectionCount,
            sectionCount,
            maxSplatCount,
            splatCount,
            compressionLevel,
            sceneCenter,
            minSphericalHarmonicsCoeff,
            maxSphericalHarmonicsCoeff
        };
    }

    static writeHeaderCountsToBuffer(sectionCount, splatCount, buffer) {
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        headerArrayUint32[2] = sectionCount;
        headerArrayUint32[4] = splatCount;
    }

    static writeHeaderToBuffer(header, buffer) {
        const headerArrayUint8 = new Uint8Array(buffer, 0, SplatBuffer.HeaderSizeBytes);
        const headerArrayUint16 = new Uint16Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 2);
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const headerArrayFloat32 = new Float32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        headerArrayUint8[0] = header.versionMajor;
        headerArrayUint8[1] = header.versionMinor;
        headerArrayUint8[2] = 0; // unused for now
        headerArrayUint8[3] = 0; // unused for now
        headerArrayUint32[1] = header.maxSectionCount;
        headerArrayUint32[2] = header.sectionCount;
        headerArrayUint32[3] = header.maxSplatCount;
        headerArrayUint32[4] = header.splatCount;
        headerArrayUint16[10] = header.compressionLevel;
        headerArrayFloat32[6] = header.sceneCenter.x;
        headerArrayFloat32[7] = header.sceneCenter.y;
        headerArrayFloat32[8] = header.sceneCenter.z;
        headerArrayFloat32[9] = header.minSphericalHarmonicsCoeff || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        headerArrayFloat32[10] = header.maxSphericalHarmonicsCoeff || DefaultSphericalHarmonics8BitCompressionHalfRange;
    }

    static parseSectionHeaders(header, buffer, offset = 0, secLoadedCountsToMax) {
        const compressionLevel = header.compressionLevel;

        const maxSectionCount = header.maxSectionCount;
        const sectionHeaderArrayUint16 = new Uint16Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 2);
        const sectionHeaderArrayUint32 = new Uint32Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 4);
        const sectionHeaderArrayFloat32 = new Float32Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 4);

        const sectionHeaders = [];
        let sectionHeaderBase = 0;
        let sectionHeaderBaseUint16 = sectionHeaderBase / 2;
        let sectionHeaderBaseUint32 = sectionHeaderBase / 4;
        let sectionBase = SplatBuffer.HeaderSizeBytes + header.maxSectionCount * SplatBuffer.SectionHeaderSizeBytes;
        let splatCountOffset = 0;
        for (let i = 0; i < maxSectionCount; i++) {
            const maxSplatCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 1];
            const bucketSize = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 2];
            const bucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 3];
            const bucketBlockSize = sectionHeaderArrayFloat32[sectionHeaderBaseUint32 + 4];
            const halfBucketBlockSize = bucketBlockSize / 2.0;
            const bucketStorageSizeBytes = sectionHeaderArrayUint16[sectionHeaderBaseUint16 + 10];
            const compressionScaleRange = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 6] ||
                                          SplatBuffer.CompressionLevels[compressionLevel].ScaleRange;
            const fullBucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 8];
            const partiallyFilledBucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 9];
            const bucketsMetaDataSizeBytes = partiallyFilledBucketCount * 4;
            const bucketsStorageSizeBytes = bucketStorageSizeBytes * bucketCount + bucketsMetaDataSizeBytes;

            const sphericalHarmonicsDegree = sectionHeaderArrayUint16[sectionHeaderBaseUint16 + 20];
            const { bytesPerSplat } = SplatBuffer.calculateComponentStorage(compressionLevel, sphericalHarmonicsDegree);

            const splatDataStorageSizeBytes = bytesPerSplat * maxSplatCount;
            const storageSizeBytes = splatDataStorageSizeBytes + bucketsStorageSizeBytes;
            const sectionHeader = {
                bytesPerSplat: bytesPerSplat,
                splatCountOffset: splatCountOffset,
                splatCount: secLoadedCountsToMax ? maxSplatCount : 0,
                maxSplatCount: maxSplatCount,
                bucketSize: bucketSize,
                bucketCount: bucketCount,
                bucketBlockSize: bucketBlockSize,
                halfBucketBlockSize: halfBucketBlockSize,
                bucketStorageSizeBytes: bucketStorageSizeBytes,
                bucketsStorageSizeBytes: bucketsStorageSizeBytes,
                splatDataStorageSizeBytes: splatDataStorageSizeBytes,
                storageSizeBytes: storageSizeBytes,
                compressionScaleRange: compressionScaleRange,
                compressionScaleFactor: halfBucketBlockSize / compressionScaleRange,
                base: sectionBase,
                bucketsBase: sectionBase + bucketsMetaDataSizeBytes,
                dataBase: sectionBase + bucketsStorageSizeBytes,
                fullBucketCount: fullBucketCount,
                partiallyFilledBucketCount: partiallyFilledBucketCount,
                sphericalHarmonicsDegree: sphericalHarmonicsDegree
            };
            sectionHeaders[i] = sectionHeader;
            sectionBase += storageSizeBytes;
            sectionHeaderBase += SplatBuffer.SectionHeaderSizeBytes;
            sectionHeaderBaseUint16 = sectionHeaderBase / 2;
            sectionHeaderBaseUint32 = sectionHeaderBase / 4;
            splatCountOffset += maxSplatCount;
        }

        return sectionHeaders;
    }


    static writeSectionHeaderToBuffer(sectionHeader, compressionLevel, buffer, offset = 0) {
        const sectionHeadeArrayUint16 = new Uint16Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 2);
        const sectionHeadeArrayUint32 = new Uint32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);
        const sectionHeadeArrayFloat32 = new Float32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);

        sectionHeadeArrayUint32[0] = sectionHeader.splatCount;
        sectionHeadeArrayUint32[1] = sectionHeader.maxSplatCount;
        sectionHeadeArrayUint32[2] = compressionLevel >= 1 ? sectionHeader.bucketSize : 0;
        sectionHeadeArrayUint32[3] = compressionLevel >= 1 ? sectionHeader.bucketCount : 0;
        sectionHeadeArrayFloat32[4] = compressionLevel >= 1 ? sectionHeader.bucketBlockSize : 0.0;
        sectionHeadeArrayUint16[10] = compressionLevel >= 1 ? SplatBuffer.BucketStorageSizeBytes : 0;
        sectionHeadeArrayUint32[6] = compressionLevel >= 1 ? sectionHeader.compressionScaleRange : 0;
        sectionHeadeArrayUint32[7] = sectionHeader.storageSizeBytes;
        sectionHeadeArrayUint32[8] = compressionLevel >= 1 ? sectionHeader.fullBucketCount : 0;
        sectionHeadeArrayUint32[9] = compressionLevel >= 1 ? sectionHeader.partiallyFilledBucketCount : 0;
        sectionHeadeArrayUint16[20] = sectionHeader.sphericalHarmonicsDegree;

    }

    static writeSectionHeaderSplatCountToBuffer(splatCount, buffer, offset = 0) {
        const sectionHeadeArrayUint32 = new Uint32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);
        sectionHeadeArrayUint32[0] = splatCount;
    }

    constructFromBuffer(bufferData, secLoadedCountsToMax) {
        this.bufferData = bufferData;

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSectionMap = [];

        const header = SplatBuffer.parseHeader(this.bufferData);
        this.versionMajor = header.versionMajor;
        this.versionMinor = header.versionMinor;
        this.maxSectionCount = header.maxSectionCount;
        this.sectionCount = secLoadedCountsToMax ? header.maxSectionCount : 0;
        this.maxSplatCount = header.maxSplatCount;
        this.splatCount = secLoadedCountsToMax ? header.maxSplatCount : 0;
        this.compressionLevel = header.compressionLevel;
        this.sceneCenter = new THREE.Vector3().copy(header.sceneCenter);
        this.minSphericalHarmonicsCoeff = header.minSphericalHarmonicsCoeff;
        this.maxSphericalHarmonicsCoeff = header.maxSphericalHarmonicsCoeff;

        this.sections = SplatBuffer.parseSectionHeaders(header, this.bufferData, SplatBuffer.HeaderSizeBytes, secLoadedCountsToMax);

        this.linkBufferArrays();
        this.buildMaps();
    }

    static calculateComponentStorage(compressionLevel, sphericalHarmonicsDegree) {
        const bytesPerCenter = SplatBuffer.CompressionLevels[compressionLevel].BytesPerCenter;
        const bytesPerScale = SplatBuffer.CompressionLevels[compressionLevel].BytesPerScale;
        const bytesPerRotation = SplatBuffer.CompressionLevels[compressionLevel].BytesPerRotation;
        const bytesPerColor = SplatBuffer.CompressionLevels[compressionLevel].BytesPerColor;
        const sphericalHarmonicsComponentsPerSplat = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
        const sphericalHarmonicsBytesPerSplat = SplatBuffer.CompressionLevels[compressionLevel].BytesPerSphericalHarmonicsComponent *
                                                sphericalHarmonicsComponentsPerSplat;
        const bytesPerSplat = bytesPerCenter + bytesPerScale + bytesPerRotation +
                              bytesPerColor + sphericalHarmonicsBytesPerSplat;
        return {
            bytesPerCenter,
            bytesPerScale,
            bytesPerRotation,
            bytesPerColor,
            sphericalHarmonicsComponentsPerSplat,
            sphericalHarmonicsBytesPerSplat,
            bytesPerSplat
        };
    }

    linkBufferArrays() {
        for (let i = 0; i < this.maxSectionCount; i++) {
            const section = this.sections[i];
            section.bucketArray = new Float32Array(this.bufferData, section.bucketsBase,
                                                   section.bucketCount * SplatBuffer.BucketStorageSizeFloats);
            if (section.partiallyFilledBucketCount > 0) {
                section.partiallyFilledBucketLengths = new Uint32Array(this.bufferData, section.base,
                                                                       section.partiallyFilledBucketCount);
            }
        }
    }

    buildMaps() {
        let cumulativeSplatCount = 0;
        for (let i = 0; i < this.maxSectionCount; i++) {
            const section = this.sections[i];
            for (let j = 0; j < section.maxSplatCount; j++) {
                const globalSplatIndex = cumulativeSplatCount + j;
                this.globalSplatIndexToLocalSplatIndexMap[globalSplatIndex] = j;
                this.globalSplatIndexToSectionMap[globalSplatIndex] = i;
            }
            cumulativeSplatCount += section.maxSplatCount;
        }
    }

    updateLoadedCounts(newSectionCount, newSplatCount) {
        SplatBuffer.writeHeaderCountsToBuffer(newSectionCount, newSplatCount, this.bufferData);
        this.sectionCount = newSectionCount;
        this.splatCount = newSplatCount;
    }

    updateSectionLoadedCounts(sectionIndex, newSplatCount) {
        const sectionHeaderOffset = SplatBuffer.HeaderSizeBytes + SplatBuffer.SectionHeaderSizeBytes * sectionIndex;
        SplatBuffer.writeSectionHeaderSplatCountToBuffer(newSplatCount, this.bufferData, sectionHeaderOffset);
        this.sections[sectionIndex].splatCount = newSplatCount;
    }

    static writeSplatDataToSectionBuffer = function() {

        const tempCenterBuffer = new ArrayBuffer(12);
        const tempScaleBuffer = new ArrayBuffer(12);
        const tempRotationBuffer = new ArrayBuffer(16);
        const tempColorBuffer = new ArrayBuffer(4);
        const tempSHBuffer = new ArrayBuffer(256);
        const tempRot = new THREE.Quaternion();
        const tempScale = new THREE.Vector3();
        const bucketCenterDelta = new THREE.Vector3();

        const {
            X: OFFSET_X, Y: OFFSET_Y, Z: OFFSET_Z,
            SCALE0: OFFSET_SCALE0, SCALE1: OFFSET_SCALE1, SCALE2: OFFSET_SCALE2,
            ROTATION0: OFFSET_ROT0, ROTATION1: OFFSET_ROT1, ROTATION2: OFFSET_ROT2, ROTATION3: OFFSET_ROT3,
            FDC0: OFFSET_FDC0, FDC1: OFFSET_FDC1, FDC2: OFFSET_FDC2, OPACITY: OFFSET_OPACITY,
            FRC0: OFFSET_FRC0, FRC9: OFFSET_FRC9,
        } = UncompressedSplatArray.OFFSET;

        const compressPositionOffset = (v, compressionScaleFactor, compressionScaleRange) => {
            const doubleCompressionScaleRange = compressionScaleRange * 2 + 1;
            v = Math.round(v * compressionScaleFactor) + compressionScaleRange;
            return clamp(v, 0, doubleCompressionScaleRange);
        };

        return function(targetSplat, sectionBuffer, bufferOffset, compressionLevel, sphericalHarmonicsDegree,
                        bucketCenter, compressionScaleFactor, compressionScaleRange,
                        minSphericalHarmonicsCoeff = -DefaultSphericalHarmonics8BitCompressionHalfRange,
                        maxSphericalHarmonicsCoeff = DefaultSphericalHarmonics8BitCompressionHalfRange) {

            const sphericalHarmonicsComponentsPerSplat = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
            const bytesPerCenter = SplatBuffer.CompressionLevels[compressionLevel].BytesPerCenter;
            const bytesPerScale = SplatBuffer.CompressionLevels[compressionLevel].BytesPerScale;
            const bytesPerRotation = SplatBuffer.CompressionLevels[compressionLevel].BytesPerRotation;
            const bytesPerColor = SplatBuffer.CompressionLevels[compressionLevel].BytesPerColor;

            const centerBase = bufferOffset;
            const scaleBase = centerBase + bytesPerCenter;
            const rotationBase = scaleBase + bytesPerScale;
            const colorBase = rotationBase + bytesPerRotation;
            const sphericalHarmonicsBase = colorBase + bytesPerColor;

            if (targetSplat[OFFSET_ROT0] !== undefined) {
                tempRot.set(targetSplat[OFFSET_ROT0], targetSplat[OFFSET_ROT1], targetSplat[OFFSET_ROT2], targetSplat[OFFSET_ROT3]);
                tempRot.normalize();
            } else {
                tempRot.set(1.0, 0.0, 0.0, 0.0);
            }

            if (targetSplat[OFFSET_SCALE0] !== undefined) {
                tempScale.set(targetSplat[OFFSET_SCALE0] || 0,
                              targetSplat[OFFSET_SCALE1] || 0,
                              targetSplat[OFFSET_SCALE2] || 0);
            } else {
                tempScale.set(0, 0, 0);
            }

            if (compressionLevel === 0) {
                const center = new Float32Array(sectionBuffer, centerBase, SplatBuffer.CenterComponentCount);
                const rot = new Float32Array(sectionBuffer, rotationBase, SplatBuffer.RotationComponentCount);
                const scale = new Float32Array(sectionBuffer, scaleBase, SplatBuffer.ScaleComponentCount);

                rot.set([tempRot.x, tempRot.y, tempRot.z, tempRot.w]);
                scale.set([tempScale.x, tempScale.y, tempScale.z]);
                center.set([targetSplat[OFFSET_X], targetSplat[OFFSET_Y], targetSplat[OFFSET_Z]]);

                if (sphericalHarmonicsDegree > 0) {
                    const shOut = new Float32Array(sectionBuffer, sphericalHarmonicsBase, sphericalHarmonicsComponentsPerSplat);
                    if (sphericalHarmonicsDegree >= 1) {
                            for (let s = 0; s < 9; s++) shOut[s] = targetSplat[OFFSET_FRC0 + s] || 0;
                            if (sphericalHarmonicsDegree >= 2) {
                                for (let s = 0; s < 15; s++) shOut[s + 9] = targetSplat[OFFSET_FRC9 + s] || 0;
                            }
                    }
                }
            } else {
                const center = new Uint16Array(tempCenterBuffer, 0, SplatBuffer.CenterComponentCount);
                const rot = new Uint16Array(tempRotationBuffer, 0, SplatBuffer.RotationComponentCount);
                const scale = new Uint16Array(tempScaleBuffer, 0, SplatBuffer.ScaleComponentCount);

                rot.set([toHalfFloat(tempRot.x), toHalfFloat(tempRot.y), toHalfFloat(tempRot.z), toHalfFloat(tempRot.w)]);
                scale.set([toHalfFloat(tempScale.x), toHalfFloat(tempScale.y), toHalfFloat(tempScale.z)]);

                bucketCenterDelta.set(targetSplat[OFFSET_X], targetSplat[OFFSET_Y], targetSplat[OFFSET_Z]).sub(bucketCenter);
                bucketCenterDelta.x = compressPositionOffset(bucketCenterDelta.x, compressionScaleFactor, compressionScaleRange);
                bucketCenterDelta.y = compressPositionOffset(bucketCenterDelta.y, compressionScaleFactor, compressionScaleRange);
                bucketCenterDelta.z = compressPositionOffset(bucketCenterDelta.z, compressionScaleFactor, compressionScaleRange);
                center.set([bucketCenterDelta.x, bucketCenterDelta.y, bucketCenterDelta.z]);

                if (sphericalHarmonicsDegree > 0) {
                    const SHArrayType = compressionLevel === 1 ? Uint16Array : Uint8Array;
                    const bytesPerSHComponent = compressionLevel === 1 ? 2 : 1;
                    const shOut = new SHArrayType(tempSHBuffer, 0, sphericalHarmonicsComponentsPerSplat);
                    if (sphericalHarmonicsDegree >= 1) {
                        for (let s = 0; s < 9; s++) {
                            const srcVal = targetSplat[OFFSET_FRC0 + s] || 0;
                            shOut[s] = compressionLevel === 1 ? toHalfFloat(srcVal) :
                                       toUint8(srcVal, minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                        }
                        const degree1ByteCount = 9 * bytesPerSHComponent;
                        copyBetweenBuffers(shOut.buffer, 0, sectionBuffer, sphericalHarmonicsBase, degree1ByteCount);
                        if (sphericalHarmonicsDegree >= 2) {
                            for (let s = 0; s < 15; s++) {
                                const srcVal = targetSplat[OFFSET_FRC9 + s] || 0;
                                shOut[s + 9] = compressionLevel === 1 ? toHalfFloat(srcVal) :
                                               toUint8(srcVal, minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                            }
                            copyBetweenBuffers(shOut.buffer, degree1ByteCount, sectionBuffer,
                                               sphericalHarmonicsBase + degree1ByteCount, 15 * bytesPerSHComponent);
                        }
                    }
                }

                copyBetweenBuffers(center.buffer, 0, sectionBuffer, centerBase, 6);
                copyBetweenBuffers(scale.buffer, 0, sectionBuffer, scaleBase, 6);
                copyBetweenBuffers(rot.buffer, 0, sectionBuffer, rotationBase, 8);
            }

            const rgba = new Uint8ClampedArray(tempColorBuffer, 0, 4);
            rgba.set([targetSplat[OFFSET_FDC0] || 0, targetSplat[OFFSET_FDC1] || 0, targetSplat[OFFSET_FDC2] || 0]);
            rgba[3] = targetSplat[OFFSET_OPACITY] || 0;

            copyBetweenBuffers(rgba.buffer, 0, sectionBuffer, colorBase, 4);
        };

    }();

    static generateFromUncompressedSplatArrays(splatArrays, minimumAlpha, compressionLevel,
                                               sceneCenter, blockSize, bucketSize, options = []) {

        let shDegree = 0;
        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            shDegree = Math.max(splatArray.sphericalHarmonicsDegree, shDegree);
        }

        let minSphericalHarmonicsCoeff;
        let maxSphericalHarmonicsCoeff;

        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            for (let i = 0; i < splatArray.splats.length; i++) {
                const splat = splatArray.splats[i];
                for (let sc = UncompressedSplatArray.OFFSET.FRC0; sc < UncompressedSplatArray.OFFSET.FRC23 && sc < splat.length; sc++) {
                    if (!minSphericalHarmonicsCoeff || splat[sc] < minSphericalHarmonicsCoeff) {
                        minSphericalHarmonicsCoeff = splat[sc];
                    }
                    if (!maxSphericalHarmonicsCoeff || splat[sc] > maxSphericalHarmonicsCoeff) {
                        maxSphericalHarmonicsCoeff = splat[sc];
                    }
                }
            }
        }

        minSphericalHarmonicsCoeff = minSphericalHarmonicsCoeff || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        maxSphericalHarmonicsCoeff = maxSphericalHarmonicsCoeff || DefaultSphericalHarmonics8BitCompressionHalfRange;

        const { bytesPerSplat } = SplatBuffer.calculateComponentStorage(compressionLevel, shDegree);
        const compressionScaleRange = SplatBuffer.CompressionLevels[compressionLevel].ScaleRange;

        const sectionBuffers = [];
        const sectionHeaderBuffers = [];
        let totalSplatCount = 0;

        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            const validSplats = new UncompressedSplatArray(shDegree);
            for (let i = 0; i < splatArray.splatCount; i++) {
                const targetSplat = splatArray.splats[i];
                if ((targetSplat[UncompressedSplatArray.OFFSET.OPACITY] || 0) >= minimumAlpha) {
                    validSplats.addSplat(targetSplat);
                }
            }

            const sectionOptions = options[sa] || {};
            const sectionBlockSize = (sectionOptions.blockSizeFactor || 1) * (blockSize || SplatBuffer.BucketBlockSize);
            const sectionBucketSize = Math.ceil((sectionOptions.bucketSizeFactor || 1) * (bucketSize || SplatBuffer.BucketSize));

            const bucketInfo = SplatBuffer.computeBucketsForUncompressedSplatArray(validSplats, sectionBlockSize, sectionBucketSize);
            const fullBucketCount = bucketInfo.fullBuckets.length;
            const partiallyFullBucketLengths = bucketInfo.partiallyFullBuckets.map((bucket) => bucket.splats.length);
            const partiallyFilledBucketCount = partiallyFullBucketLengths.length;
            const buckets = [...bucketInfo.fullBuckets, ...bucketInfo.partiallyFullBuckets];

            const sectionDataSizeBytes = validSplats.splats.length * bytesPerSplat;
            const bucketMetaDataSizeBytes = partiallyFilledBucketCount * 4;
            const bucketDataBytes = compressionLevel >= 1 ? buckets.length *
                                                            SplatBuffer.BucketStorageSizeBytes + bucketMetaDataSizeBytes : 0;
            const sectionSizeBytes = sectionDataSizeBytes + bucketDataBytes;
            const sectionBuffer = new ArrayBuffer(sectionSizeBytes);

            const compressionScaleFactor = compressionScaleRange / (sectionBlockSize * 0.5);
            const bucketCenter = new THREE.Vector3();

            let outSplatCount = 0;
            for (let b = 0; b < buckets.length; b++) {
                const bucket = buckets[b];
                bucketCenter.fromArray(bucket.center);
                for (let i = 0; i < bucket.splats.length; i++) {
                    let row = bucket.splats[i];
                    const targetSplat = validSplats.splats[row];
                    const bufferOffset = bucketDataBytes + outSplatCount * bytesPerSplat;
                    SplatBuffer.writeSplatDataToSectionBuffer(targetSplat, sectionBuffer, bufferOffset, compressionLevel, shDegree,
                                                              bucketCenter, compressionScaleFactor, compressionScaleRange,
                                                              minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                    outSplatCount++;
                }
            }
            totalSplatCount += outSplatCount;

            if (compressionLevel >= 1) {
                const bucketMetaDataArray = new Uint32Array(sectionBuffer, 0, partiallyFullBucketLengths.length * 4);
                for (let pfb = 0; pfb < partiallyFullBucketLengths.length; pfb ++) {
                    bucketMetaDataArray[pfb] = partiallyFullBucketLengths[pfb];
                }
                const bucketArray = new Float32Array(sectionBuffer, bucketMetaDataSizeBytes,
                                                     buckets.length * SplatBuffer.BucketStorageSizeFloats);
                for (let b = 0; b < buckets.length; b++) {
                    const bucket = buckets[b];
                    const base = b * 3;
                    bucketArray[base] = bucket.center[0];
                    bucketArray[base + 1] = bucket.center[1];
                    bucketArray[base + 2] = bucket.center[2];
                }
            }
            sectionBuffers.push(sectionBuffer);

            const sectionHeaderBuffer = new ArrayBuffer(SplatBuffer.SectionHeaderSizeBytes);
            SplatBuffer.writeSectionHeaderToBuffer({
                maxSplatCount: outSplatCount,
                splatCount: outSplatCount,
                bucketSize: sectionBucketSize,
                bucketCount: buckets.length,
                bucketBlockSize: sectionBlockSize,
                compressionScaleRange: compressionScaleRange,
                storageSizeBytes: sectionSizeBytes,
                fullBucketCount: fullBucketCount,
                partiallyFilledBucketCount: partiallyFilledBucketCount,
                sphericalHarmonicsDegree: shDegree
            }, compressionLevel, sectionHeaderBuffer, 0);
            sectionHeaderBuffers.push(sectionHeaderBuffer);

        }

        let sectionsCumulativeSizeBytes = 0;
        for (let sectionBuffer of sectionBuffers) sectionsCumulativeSizeBytes += sectionBuffer.byteLength;
        const unifiedBufferSize = SplatBuffer.HeaderSizeBytes +
                                  SplatBuffer.SectionHeaderSizeBytes * sectionBuffers.length + sectionsCumulativeSizeBytes;
        const unifiedBuffer = new ArrayBuffer(unifiedBufferSize);

        SplatBuffer.writeHeaderToBuffer({
            versionMajor: 0,
            versionMinor: 1,
            maxSectionCount: sectionBuffers.length,
            sectionCount: sectionBuffers.length,
            maxSplatCount: totalSplatCount,
            splatCount: totalSplatCount,
            compressionLevel: compressionLevel,
            sceneCenter: sceneCenter,
            minSphericalHarmonicsCoeff: minSphericalHarmonicsCoeff,
            maxSphericalHarmonicsCoeff: maxSphericalHarmonicsCoeff
        }, unifiedBuffer);

        let currentUnifiedBase = SplatBuffer.HeaderSizeBytes;
        for (let sectionHeaderBuffer of sectionHeaderBuffers) {
            new Uint8Array(unifiedBuffer, currentUnifiedBase, SplatBuffer.SectionHeaderSizeBytes).set(new Uint8Array(sectionHeaderBuffer));
            currentUnifiedBase += SplatBuffer.SectionHeaderSizeBytes;
        }

        for (let sectionBuffer of sectionBuffers) {
            new Uint8Array(unifiedBuffer, currentUnifiedBase, sectionBuffer.byteLength).set(new Uint8Array(sectionBuffer));
            currentUnifiedBase += sectionBuffer.byteLength;
        }

        const splatBuffer = new SplatBuffer(unifiedBuffer);
        return splatBuffer;
    }

    static computeBucketsForUncompressedSplatArray(splatArray, blockSize, bucketSize) {
        let splatCount = splatArray.splatCount;
        const halfBlockSize = blockSize / 2.0;

        const min = new THREE.Vector3();
        const max = new THREE.Vector3();

        for (let i = 0; i < splatCount; i++) {
            const targetSplat = splatArray.splats[i];
            const center = [targetSplat[UncompressedSplatArray.OFFSET.X],
                            targetSplat[UncompressedSplatArray.OFFSET.Y],
                            targetSplat[UncompressedSplatArray.OFFSET.Z]];
            if (i === 0 || center[0] < min.x) min.x = center[0];
            if (i === 0 || center[0] > max.x) max.x = center[0];
            if (i === 0 || center[1] < min.y) min.y = center[1];
            if (i === 0 || center[1] > max.y) max.y = center[1];
            if (i === 0 || center[2] < min.z) min.z = center[2];
            if (i === 0 || center[2] > max.z) max.z = center[2];
        }

        const dimensions = new THREE.Vector3().copy(max).sub(min);
        const yBlocks = Math.ceil(dimensions.y / blockSize);
        const zBlocks = Math.ceil(dimensions.z / blockSize);

        const blockCenter = new THREE.Vector3();
        const fullBuckets = [];
        const partiallyFullBuckets = {};

        for (let i = 0; i < splatCount; i++) {
            const targetSplat = splatArray.splats[i];
            const center = [targetSplat[UncompressedSplatArray.OFFSET.X],
                            targetSplat[UncompressedSplatArray.OFFSET.Y],
                            targetSplat[UncompressedSplatArray.OFFSET.Z]];
            const xBlock = Math.floor((center[0] - min.x) / blockSize);
            const yBlock = Math.floor((center[1] - min.y) / blockSize);
            const zBlock = Math.floor((center[2] - min.z) / blockSize);

            blockCenter.x = xBlock * blockSize + min.x + halfBlockSize;
            blockCenter.y = yBlock * blockSize + min.y + halfBlockSize;
            blockCenter.z = zBlock * blockSize + min.z + halfBlockSize;

            const bucketId = xBlock * (yBlocks * zBlocks) + yBlock * zBlocks + zBlock;
            let bucket = partiallyFullBuckets[bucketId];
            if (!bucket) {
                partiallyFullBuckets[bucketId] = bucket = {
                    'splats': [],
                    'center': blockCenter.toArray()
                };
            }

            bucket.splats.push(i);
            if (bucket.splats.length >= bucketSize) {
                fullBuckets.push(bucket);
                partiallyFullBuckets[bucketId] = null;
            }
        }

        const partiallyFullBucketArray = [];
        for (let bucketId in partiallyFullBuckets) {
            if (Object.hasOwn(partiallyFullBuckets, bucketId)) {
                const bucket = partiallyFullBuckets[bucketId];
                if (bucket) {
                    partiallyFullBucketArray.push(bucket);
                }
            }
        }

        return {
            'fullBuckets': fullBuckets,
            'partiallyFullBuckets': partiallyFullBucketArray,
        };
    }

}

/**
 * SplatPartitioner
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class SplatPartitioner {

    constructor(sectionCount, sectionFilters, groupingParameters, partitionGenerator) {
        this.sectionCount = sectionCount;
        this.sectionFilters = sectionFilters;
        this.groupingParameters = groupingParameters;
        this.partitionGenerator = partitionGenerator;
    }

    partitionUncompressedSplatArray(splatArray) {
        let groupingParameters;
        let sectionCount;
        let sectionFilters;
        if (this.partitionGenerator) {
            const results = this.partitionGenerator(splatArray);
            groupingParameters = results.groupingParameters;
            sectionCount = results.sectionCount;
            sectionFilters = results.sectionFilters;
        } else {
            groupingParameters = this.groupingParameters;
            sectionCount = this.sectionCount;
            sectionFilters = this.sectionFilters;
        }

        const newArrays = [];
        for (let s = 0; s < sectionCount; s++) {
            const sectionSplats = new UncompressedSplatArray(splatArray.sphericalHarmonicsDegree);
            const sectionFilter = sectionFilters[s];
            for (let i = 0; i < splatArray.splatCount; i++) {
                if (sectionFilter(i)) {
                    sectionSplats.addSplat(splatArray.splats[i]);
                }
            }
            newArrays.push(sectionSplats);
        }
        return {
            splatArrays: newArrays,
            parameters: groupingParameters
        };
    }

    static getStandardPartitioner(partitionSize = 0, sceneCenter = new THREE.Vector3(),
                                  blockSize = SplatBuffer.BucketBlockSize, bucketSize = SplatBuffer.BucketSize) {

        const partitionGenerator = (splatArray) => {

            const OFFSET_X = UncompressedSplatArray.OFFSET.X;
            const OFFSET_Y = UncompressedSplatArray.OFFSET.Y;
            const OFFSET_Z = UncompressedSplatArray.OFFSET.Z;

            if (partitionSize <= 0) partitionSize = splatArray.splatCount;

            const center = new THREE.Vector3();
            const clampDistance = 0.5;
            const clampPoint = (point) => {
                point.x = Math.floor(point.x / clampDistance) * clampDistance;
                point.y = Math.floor(point.y / clampDistance) * clampDistance;
                point.z = Math.floor(point.z / clampDistance) * clampDistance;
            };
            splatArray.splats.forEach((splat) => {
                center.set(splat[OFFSET_X], splat[OFFSET_Y], splat[OFFSET_Z]).sub(sceneCenter);
                clampPoint(center);
                splat.centerDist = center.lengthSq();
            });
            splatArray.splats.sort((a, b) => {
                let centerADist = a.centerDist;
                let centerBDist = b.centerDist;
                if (centerADist > centerBDist) return 1;
                else return -1;
            });

            const sectionFilters = [];
            const groupingParameters = [];
            partitionSize = Math.min(splatArray.splatCount, partitionSize);
            const patitionCount = Math.ceil(splatArray.splatCount / partitionSize);
            let currentStartSplat = 0;
            for (let i = 0; i < patitionCount; i ++) {
                let startSplat = currentStartSplat;
                sectionFilters.push((splatIndex) => {
                    return splatIndex >= startSplat && splatIndex < startSplat + partitionSize;
                });
                groupingParameters.push({
                    'blocksSize': blockSize,
                    'bucketSize': bucketSize,
                });
                currentStartSplat += partitionSize;
            }
            return {
                'sectionCount': sectionFilters.length,
                sectionFilters,
                groupingParameters
            };
        };
        return new SplatPartitioner(undefined, undefined, undefined, partitionGenerator);
    }
}

/**
 * SplatBufferGenerator
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class SplatBufferGenerator {

    constructor(splatPartitioner, alphaRemovalThreshold, compressionLevel, sectionSize, sceneCenter, blockSize, bucketSize) {
        this.splatPartitioner = splatPartitioner;
        this.alphaRemovalThreshold = alphaRemovalThreshold;
        this.compressionLevel = compressionLevel;
        this.sectionSize = sectionSize;
        this.sceneCenter = sceneCenter ? new THREE.Vector3().copy(sceneCenter) : undefined;
        this.blockSize = blockSize;
        this.bucketSize = bucketSize;
    }

    generateFromUncompressedSplatArray(splatArray) {
        const partitionResults = this.splatPartitioner.partitionUncompressedSplatArray(splatArray);
        return SplatBuffer.generateFromUncompressedSplatArrays(partitionResults.splatArrays,
                                                               this.alphaRemovalThreshold, this.compressionLevel,
                                                               this.sceneCenter, this.blockSize, this.bucketSize,
                                                               partitionResults.parameters);
    }

    static getStandardGenerator(alphaRemovalThreshold = 1, compressionLevel = 1, sectionSize = 0, sceneCenter = new THREE.Vector3(),
                                blockSize = SplatBuffer.BucketBlockSize, bucketSize = SplatBuffer.BucketSize) {
        const splatPartitioner = SplatPartitioner.getStandardPartitioner(sectionSize, sceneCenter, blockSize, bucketSize);
        return new SplatBufferGenerator(splatPartitioner, alphaRemovalThreshold, compressionLevel,
                                        sectionSize, sceneCenter, blockSize, bucketSize);
    }
}

/**
 * PlyParserUtils and related constants
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar - only supports INRIAV1 format.
 */

// Ply format types (simplified - FLAME uses INRIAV1)
const PlyFormat = {
    'INRIAV1': 0
};

// Field size IDs
const FieldSizeIdDouble = 0;
const FieldSizeIdInt = 1;
const FieldSizeIdUInt = 2;
const FieldSizeIdFloat = 3;
const FieldSizeIdShort = 4;
const FieldSizeIdUShort = 5;
const FieldSizeIdUChar = 6;

const FieldSizeStringMap = {
    'double': FieldSizeIdDouble,
    'int': FieldSizeIdInt,
    'uint': FieldSizeIdUInt,
    'float': FieldSizeIdFloat,
    'short': FieldSizeIdShort,
    'ushort': FieldSizeIdUShort,
    'uchar': FieldSizeIdUChar,
};

const FieldSize = {
    [FieldSizeIdDouble]: 8,
    [FieldSizeIdInt]: 4,
    [FieldSizeIdUInt]: 4,
    [FieldSizeIdFloat]: 4,
    [FieldSizeIdShort]: 2,
    [FieldSizeIdUShort]: 2,
    [FieldSizeIdUChar]: 1,
};

class PlyParserUtils {

    static HeaderEndToken = 'end_header';

    constructor() {
    }

    decodeSectionHeader(headerLines, fieldNameIdMap, headerStartLine = 0) {

        const extractedLines = [];

        let processingSection = false;
        let headerEndLine = -1;
        let vertexCount = 0;
        let endOfHeader = false;
        let sectionName = null;

        const fieldIds = [];
        const fieldTypes = [];
        const allFieldNames = [];
        const fieldTypesByName = {};

        for (let i = headerStartLine; i < headerLines.length; i++) {
            const line = headerLines[i].trim();
            if (line.startsWith('element')) {
                if (processingSection) {
                    headerEndLine--;
                    break;
                } else {
                    processingSection = true;
                    headerStartLine = i;
                    headerEndLine = i;
                    const lineComponents = line.split(' ');
                    let validComponents = 0;
                    for (let lineComponent of lineComponents) {
                        const trimmedComponent = lineComponent.trim();
                        if (trimmedComponent.length > 0) {
                            validComponents++;
                            if (validComponents === 2) {
                                sectionName = trimmedComponent;
                            } else if (validComponents === 3) {
                                vertexCount = parseInt(trimmedComponent);
                            }
                        }
                    }
                }
            } else if (line.startsWith('property')) {
                const fieldMatch = line.match(/(\w+)\s+(\w+)\s+(\w+)/);
                if (fieldMatch) {
                    const fieldTypeStr = fieldMatch[2];
                    const fieldName = fieldMatch[3];
                    allFieldNames.push(fieldName);
                    const fieldId = fieldNameIdMap[fieldName];
                    fieldTypesByName[fieldName] = fieldTypeStr;
                    const fieldType = FieldSizeStringMap[fieldTypeStr];
                    if (fieldId !== undefined) {
                        fieldIds.push(fieldId);
                        fieldTypes[fieldId] = fieldType;
                    }
                }
            }
            if (line === PlyParserUtils.HeaderEndToken) {
                endOfHeader = true;
                break;
            }
            if (processingSection) {
                extractedLines.push(line);
                headerEndLine++;
            }
        }

        const fieldOffsets = [];
        let bytesPerVertex = 0;
        for (let fieldName of allFieldNames) {
            const fieldType = fieldTypesByName[fieldName];
            if (Object.hasOwn(fieldTypesByName, fieldName)) {
                const fieldId = fieldNameIdMap[fieldName];
                if (fieldId !== undefined) {
                    fieldOffsets[fieldId] = bytesPerVertex;
                }
            }
            bytesPerVertex += FieldSize[FieldSizeStringMap[fieldType]];
        }

        const sphericalHarmonics = this.decodeSphericalHarmonicsFromSectionHeader(allFieldNames, fieldNameIdMap);

        return {
            'headerLines': extractedLines,
            'headerStartLine': headerStartLine,
            'headerEndLine': headerEndLine,
            'fieldTypes': fieldTypes,
            'fieldIds': fieldIds,
            'fieldOffsets': fieldOffsets,
            'bytesPerVertex': bytesPerVertex,
            'vertexCount': vertexCount,
            'dataSizeBytes': bytesPerVertex * vertexCount,
            'endOfHeader': endOfHeader,
            'sectionName': sectionName,
            'sphericalHarmonicsDegree': sphericalHarmonics.degree,
            'sphericalHarmonicsCoefficientsPerChannel': sphericalHarmonics.coefficientsPerChannel,
            'sphericalHarmonicsDegree1Fields': sphericalHarmonics.degree1Fields,
            'sphericalHarmonicsDegree2Fields': sphericalHarmonics.degree2Fields
        };
    }

    decodeSphericalHarmonicsFromSectionHeader(fieldNames, fieldNameIdMap) {
        let sphericalHarmonicsFieldCount = 0;
        let coefficientsPerChannel = 0;
        for (let fieldName of fieldNames) {
            if (fieldName.startsWith('f_rest')) sphericalHarmonicsFieldCount++;
        }
        coefficientsPerChannel = sphericalHarmonicsFieldCount / 3;
        let degree = 0;
        if (coefficientsPerChannel >= 3) degree = 1;
        if (coefficientsPerChannel >= 8) degree = 2;

        let degree1Fields = [];
        let degree2Fields = [];

        for (let rgb = 0; rgb < 3; rgb++) {
            if (degree >= 1) {
                for (let i = 0; i < 3; i++) {
                    degree1Fields.push(fieldNameIdMap['f_rest_' + (i + coefficientsPerChannel * rgb)]);
                }
            }
            if (degree >= 2) {
                for (let i = 0; i < 5; i++) {
                    degree2Fields.push(fieldNameIdMap['f_rest_' + (i + coefficientsPerChannel * rgb + 3)]);
                }
            }
        }

        return {
            'degree': degree,
            'coefficientsPerChannel': coefficientsPerChannel,
            'degree1Fields': degree1Fields,
            'degree2Fields': degree2Fields
        };
    }

    static getHeaderSectionNames(headerLines) {
        const sectionNames = [];
        for (let headerLine of headerLines) {
            if (headerLine.startsWith('element')) {
                const lineComponents = headerLine.split(' ');
                let validComponents = 0;
                for (let lineComponent of lineComponents) {
                    const trimmedComponent = lineComponent.trim();
                    if (trimmedComponent.length > 0) {
                        validComponents++;
                        if (validComponents === 2) {
                            sectionNames.push(trimmedComponent);
                        }
                    }
                }
            }
        }
        return sectionNames;
    }

    static checkTextForEndHeader(endHeaderTestText) {
        if (endHeaderTestText.includes(PlyParserUtils.HeaderEndToken)) {
            return true;
        }
        return false;
    }

    static checkBufferForEndHeader(buffer, searchOfset, chunkSize, decoder) {
        const endHeaderTestChunk = new Uint8Array(buffer, Math.max(0, searchOfset - chunkSize), chunkSize);
        const endHeaderTestText = decoder.decode(endHeaderTestChunk);
        return PlyParserUtils.checkTextForEndHeader(endHeaderTestText);
    }

    static extractHeaderFromBufferToText(plyBuffer) {
        const decoder = new TextDecoder();
        let headerOffset = 0;
        let headerText = '';
        const readChunkSize = 100;

        while (true) {
            if (headerOffset + readChunkSize >= plyBuffer.byteLength) {
                throw new Error('End of file reached while searching for end of header');
            }
            const headerChunk = new Uint8Array(plyBuffer, headerOffset, readChunkSize);
            headerText += decoder.decode(headerChunk);
            headerOffset += readChunkSize;

            if (PlyParserUtils.checkBufferForEndHeader(plyBuffer, headerOffset, readChunkSize * 2, decoder)) {
                break;
            }
        }

        return headerText;
    }

    readHeaderFromBuffer(plyBuffer) {
        const decoder = new TextDecoder();
        let headerOffset = 0;
        let headerText = '';
        const readChunkSize = 100;

        while (true) {
            if (headerOffset + readChunkSize >= plyBuffer.byteLength) {
                throw new Error('End of file reached while searching for end of header');
            }
            const headerChunk = new Uint8Array(plyBuffer, headerOffset, readChunkSize);
            headerText += decoder.decode(headerChunk);
            headerOffset += readChunkSize;

            if (PlyParserUtils.checkBufferForEndHeader(plyBuffer, headerOffset, readChunkSize * 2, decoder)) {
                break;
            }
        }

        return headerText;
    }

    static convertHeaderTextToLines(headerText) {
        const headerLines = headerText.split('\n');
        const prunedLines = [];
        for (let i = 0; i < headerLines.length; i++) {
            const line = headerLines[i].trim();
            prunedLines.push(line);
            if (line === PlyParserUtils.HeaderEndToken) {
                break;
            }
        }
        return prunedLines;
    }

    static determineHeaderFormatFromHeaderText(_headerText) {
        // Simplified - FLAME avatars always use INRIAV1 format
        return PlyFormat.INRIAV1;
    }

    static determineHeaderFormatFromPlyBuffer(plyBuffer) {
        const headertText = PlyParserUtils.extractHeaderFromBufferToText(plyBuffer);
        return PlyParserUtils.determineHeaderFormatFromHeaderText(headertText);
    }

    static readVertex(vertexData, header, row, dataOffset, fieldsToRead, rawVertex, normalize = true) {
        const offset = row * header.bytesPerVertex + dataOffset;
        const fieldOffsets = header.fieldOffsets;
        const fieldTypes = header.fieldTypes;
        for (let fieldId of fieldsToRead) {
            const fieldType = fieldTypes[fieldId];
            if (fieldType === FieldSizeIdFloat) {
                rawVertex[fieldId] = vertexData.getFloat32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdShort) {
                rawVertex[fieldId] = vertexData.getInt16(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUShort) {
                rawVertex[fieldId] = vertexData.getUint16(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdInt) {
                rawVertex[fieldId] = vertexData.getInt32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUInt) {
                rawVertex[fieldId] = vertexData.getUint32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUChar) {
                if (normalize) {
                    rawVertex[fieldId] = vertexData.getUint8(offset + fieldOffsets[fieldId]) / 255.0;
                } else {
                    rawVertex[fieldId] = vertexData.getUint8(offset + fieldOffsets[fieldId]);
                }
            }
        }
    }
}

/**
 * INRIAV1PlyParser
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const BaseFieldNamesToRead = ['scale_0', 'scale_1', 'scale_2', 'rot_0', 'rot_1', 'rot_2', 'rot_3', 'x', 'y', 'z',
                              'f_dc_0', 'f_dc_1', 'f_dc_2', 'opacity', 'red', 'green', 'blue', 'f_rest_0'];

const BaseFieldsToReadIndexes = BaseFieldNamesToRead.map((e, i) => i);

const [
        SCALE_0, SCALE_1, SCALE_2, ROT_0, ROT_1, ROT_2, ROT_3, X, Y, Z, F_DC_0, F_DC_1, F_DC_2, OPACITY, RED, GREEN, BLUE, F_REST_0
      ] = BaseFieldsToReadIndexes;

class INRIAV1PlyParser {

    constructor() {
        this.plyParserutils = new PlyParserUtils();
    }

    decodeHeaderLines(headerLines) {

        let shLineCount = 0;
        headerLines.forEach((line) => {
            if (line.includes('f_rest_')) shLineCount++;
        });

        let shFieldsToReadCount = 0;
        if (shLineCount >= 45) {
            shFieldsToReadCount = 45;
        } else if (shLineCount >= 24) {
            shFieldsToReadCount = 24;
        } else if (shLineCount >= 9) {
            shFieldsToReadCount = 9;
        }

        const shFieldIndexesToMap = Array.from(Array(Math.max(shFieldsToReadCount - 1, 0)));
        let shRemainingFieldNamesToRead = shFieldIndexesToMap.map((element, index) => `f_rest_${index + 1}`);

        const fieldNamesToRead = [...BaseFieldNamesToRead, ...shRemainingFieldNamesToRead];
        const fieldsToReadIndexes = fieldNamesToRead.map((e, i) => i);

        const fieldNameIdMap = fieldsToReadIndexes.reduce((acc, element) => {
            acc[fieldNamesToRead[element]] = element;
            return acc;
        }, {});
        const header = this.plyParserutils.decodeSectionHeader(headerLines, fieldNameIdMap, 0);
        header.splatCount = header.vertexCount;
        header.bytesPerSplat = header.bytesPerVertex;
        header.fieldsToReadIndexes = fieldsToReadIndexes;
        return header;
    }

    decodeHeaderText(headerText) {
        const headerLines = PlyParserUtils.convertHeaderTextToLines(headerText);
        const header = this.decodeHeaderLines(headerLines);
        header.headerText = headerText;
        header.headerSizeBytes = headerText.indexOf(PlyParserUtils.HeaderEndToken) + PlyParserUtils.HeaderEndToken.length + 1;
        return header;
    }

    decodeHeaderFromBuffer(plyBuffer) {
        const headerText = this.plyParserutils.readHeaderFromBuffer(plyBuffer);
        return this.decodeHeaderText(headerText);
    }

    findSplatData(plyBuffer, header) {
        return new DataView(plyBuffer, header.headerSizeBytes);
    }

    parseToUncompressedSplatBufferSection(header, fromSplat, toSplat, splatData, splatDataOffset,
                                          toBuffer, toOffset, outSphericalHarmonicsDegree = 0) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
        const outBytesPerSplat = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree].BytesPerSplat;

        for (let i = fromSplat; i <= toSplat; i++) {
            const parsedSplat = INRIAV1PlyParser.parseToUncompressedSplat(splatData, i, header,
                                                                          splatDataOffset, outSphericalHarmonicsDegree);
            const outBase = i * outBytesPerSplat + toOffset;
            SplatBuffer.writeSplatDataToSectionBuffer(parsedSplat, toBuffer, outBase, 0, outSphericalHarmonicsDegree);
        }
    }

    parseToUncompressedSplatArraySection(header, fromSplat, toSplat, splatData, splatDataOffset,
                                         splatArray, outSphericalHarmonicsDegree = 0) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
        for (let i = fromSplat; i <= toSplat; i++) {
            const parsedSplat = INRIAV1PlyParser.parseToUncompressedSplat(splatData, i, header,
                                                                          splatDataOffset, outSphericalHarmonicsDegree);
            splatArray.addSplat(parsedSplat);
        }
    }

    decodeSectionSplatData(sectionSplatData, splatCount, sectionHeader, outSphericalHarmonicsDegree) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, sectionHeader.sphericalHarmonicsDegree);
        const splatArray = new UncompressedSplatArray(outSphericalHarmonicsDegree);
        for (let row = 0; row < splatCount; row++) {
            const newSplat = INRIAV1PlyParser.parseToUncompressedSplat(sectionSplatData, row, sectionHeader,
                                                                       0, outSphericalHarmonicsDegree);
            splatArray.addSplat(newSplat);
        }
        return splatArray;
    }

    static parseToUncompressedSplat = function() {

        let rawSplat = [];
        const tempRotation = new THREE.Quaternion();

        const OFFSET_X = UncompressedSplatArray.OFFSET.X;
        const OFFSET_Y = UncompressedSplatArray.OFFSET.Y;
        const OFFSET_Z = UncompressedSplatArray.OFFSET.Z;

        const OFFSET_SCALE0 = UncompressedSplatArray.OFFSET.SCALE0;
        const OFFSET_SCALE1 = UncompressedSplatArray.OFFSET.SCALE1;
        const OFFSET_SCALE2 = UncompressedSplatArray.OFFSET.SCALE2;

        const OFFSET_ROTATION0 = UncompressedSplatArray.OFFSET.ROTATION0;
        const OFFSET_ROTATION1 = UncompressedSplatArray.OFFSET.ROTATION1;
        const OFFSET_ROTATION2 = UncompressedSplatArray.OFFSET.ROTATION2;
        const OFFSET_ROTATION3 = UncompressedSplatArray.OFFSET.ROTATION3;

        const OFFSET_FDC0 = UncompressedSplatArray.OFFSET.FDC0;
        const OFFSET_FDC1 = UncompressedSplatArray.OFFSET.FDC1;
        const OFFSET_FDC2 = UncompressedSplatArray.OFFSET.FDC2;
        const OFFSET_OPACITY = UncompressedSplatArray.OFFSET.OPACITY;

        const OFFSET_FRC = [];

        for (let i = 0; i < 45; i++) {
            OFFSET_FRC[i] = UncompressedSplatArray.OFFSET.FRC0 + i;
        }

        return function(splatData, row, header, splatDataOffset = 0, outSphericalHarmonicsDegree = 0) {
            outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
            INRIAV1PlyParser.readSplat(splatData, header, row, splatDataOffset, rawSplat);
            const newSplat = UncompressedSplatArray.createSplat(outSphericalHarmonicsDegree);
            if (rawSplat[SCALE_0] !== undefined) {
                newSplat[OFFSET_SCALE0] = Math.exp(rawSplat[SCALE_0]);
                newSplat[OFFSET_SCALE1] = Math.exp(rawSplat[SCALE_1]);
                newSplat[OFFSET_SCALE2] = Math.exp(rawSplat[SCALE_2]);
            } else {
                newSplat[OFFSET_SCALE0] = 0.01;
                newSplat[OFFSET_SCALE1] = 0.01;
                newSplat[OFFSET_SCALE2] = 0.01;
            }

            if (rawSplat[F_DC_0] !== undefined) {
                newSplat[OFFSET_FDC0] = rawSplat[F_DC_0] * 255;
                newSplat[OFFSET_FDC1] = rawSplat[F_DC_1] * 255;
                newSplat[OFFSET_FDC2] = rawSplat[F_DC_2] * 255;
            } else if (rawSplat[RED] !== undefined) {
                newSplat[OFFSET_FDC0] = rawSplat[RED] * 255;
                newSplat[OFFSET_FDC1] = rawSplat[GREEN] * 255;
                newSplat[OFFSET_FDC2] = rawSplat[BLUE] * 255;
            } else {
                newSplat[OFFSET_FDC0] = 0;
                newSplat[OFFSET_FDC1] = 0;
                newSplat[OFFSET_FDC2] = 0;
            }

            if (rawSplat[OPACITY] !== undefined) {
                newSplat[OFFSET_OPACITY] = (1 / (1 + Math.exp(-rawSplat[OPACITY]))) * 255;
            }

            newSplat[OFFSET_FDC0] = clamp(Math.floor(newSplat[OFFSET_FDC0]), 0, 255);
            newSplat[OFFSET_FDC1] = clamp(Math.floor(newSplat[OFFSET_FDC1]), 0, 255);
            newSplat[OFFSET_FDC2] = clamp(Math.floor(newSplat[OFFSET_FDC2]), 0, 255);
            newSplat[OFFSET_OPACITY] = clamp(Math.floor(newSplat[OFFSET_OPACITY]), 0, 255);

            if (outSphericalHarmonicsDegree >= 1) {
                if (rawSplat[F_REST_0] !== undefined) {
                    for (let i = 0; i < 9; i++) {
                        newSplat[OFFSET_FRC[i]] = rawSplat[header.sphericalHarmonicsDegree1Fields[i]];
                    }
                    if (outSphericalHarmonicsDegree >= 2) {
                        for (let i = 0; i < 15; i++) {
                            newSplat[OFFSET_FRC[9 + i]] = rawSplat[header.sphericalHarmonicsDegree2Fields[i]];
                        }
                    }
                }
            }

            tempRotation.set(rawSplat[ROT_0], rawSplat[ROT_1], rawSplat[ROT_2], rawSplat[ROT_3]);
            tempRotation.normalize();

            newSplat[OFFSET_ROTATION0] = tempRotation.x;
            newSplat[OFFSET_ROTATION1] = tempRotation.y;
            newSplat[OFFSET_ROTATION2] = tempRotation.z;
            newSplat[OFFSET_ROTATION3] = tempRotation.w;

            newSplat[OFFSET_X] = rawSplat[X];
            newSplat[OFFSET_Y] = rawSplat[Y];
            newSplat[OFFSET_Z] = rawSplat[Z];

            return newSplat;
        };

    }();

    static readSplat(splatData, header, row, dataOffset, rawSplat) {
        return PlyParserUtils.readVertex(splatData, header, row, dataOffset, header.fieldsToReadIndexes, rawSplat, true);
    }

    parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree = 0) {
        const header = this.decodeHeaderFromBuffer(plyBuffer);
        const splatCount = header.splatCount;
        const splatData = this.findSplatData(plyBuffer, header);
        const splatArray = this.decodeSectionSplatData(splatData, splatCount, header, outSphericalHarmonicsDegree);
        return splatArray;
    }
}

/**
 * PlyParser
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar - only supports INRIAV1 PLY format.
 */


class PlyParser {

    static parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree = 0) {
        // FLAME avatars use INRIAV1 PLY format
        return new INRIAV1PlyParser().parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree);
    }

}

/**
 * PlyLoader - Loads and parses PLY format Gaussian Splat files
 *
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 *
 * Simplified for FLAME avatar - only supports INRIAV1 PLY format.
 * Provides both progressive streaming and file-based loading.
 */


const logger$3 = getLogger('PlyLoader');

/**
 * Store data chunks into a single ArrayBuffer
 *
 * Combines multiple downloaded chunks into a contiguous buffer for parsing.
 * Reallocates buffer if needed to fit all chunks.
 *
 * @private
 * @param {Array<{data: Uint8Array, sizeBytes: number}>} chunks - Array of data chunks
 * @param {ArrayBuffer} [buffer] - Existing buffer to reuse (will reallocate if too small)
 * @returns {ArrayBuffer} Buffer containing all chunk data
 */
function storeChunksInBuffer(chunks, buffer) {
    let inBytes = 0;
    for (let chunk of chunks) {
        inBytes += chunk.sizeBytes;
    }

    // Reallocate if buffer doesn't exist or is too small
    if (!buffer || buffer.byteLength < inBytes) {
        buffer = new ArrayBuffer(inBytes);
    }

    // Copy all chunks into buffer sequentially
    let offset = 0;
    for (let chunk of chunks) {
        new Uint8Array(buffer, offset, chunk.sizeBytes).set(chunk.data);
        offset += chunk.sizeBytes;
    }

    return buffer;
}

/**
 * Finalize splat data into a SplatBuffer
 *
 * Converts UncompressedSplatArray into final optimized SplatBuffer format.
 * Applies compression and optimization if requested.
 *
 * @private
 * @param {UncompressedSplatArray} splatData - Parsed splat data
 * @param {boolean} optimizeSplatData - Whether to optimize/compress the data
 * @param {number} minimumAlpha - Minimum alpha threshold for splat culling
 * @param {number} compressionLevel - Compression level (0-2)
 * @param {number} sectionSize - Section size for partitioning
 * @param {Vector3} sceneCenter - Center point of the scene
 * @param {number} blockSize - Block size for spatial partitioning
 * @param {number} bucketSize - Bucket size for sorting
 * @returns {SplatBuffer} Finalized splat buffer ready for rendering
 * @throws {ParseError} If splat data is invalid or finalization fails
 */
function finalizeSplatData(splatData, optimizeSplatData, minimumAlpha, compressionLevel, sectionSize, sceneCenter, blockSize, bucketSize) {
    try {
        if (optimizeSplatData) {
            const splatBufferGenerator = SplatBufferGenerator.getStandardGenerator(
                minimumAlpha,
                compressionLevel,
                sectionSize,
                sceneCenter,
                blockSize,
                bucketSize
            );
            return splatBufferGenerator.generateFromUncompressedSplatArray(splatData);
        } else {
            return SplatBuffer.generateFromUncompressedSplatArrays([splatData], minimumAlpha, 0, new THREE.Vector3());
        }
    } catch (error) {
        throw new ParseError$1(
            `Failed to finalize splat data: ${error.message}`,
            'splatData',
            error
        );
    }
}

/**
 * PlyLoader - Loads and parses PLY format Gaussian Splat files
 *
 * Supports both progressive streaming and complete file loading.
 * Optimized for INRIAV1 PLY format used in FLAME avatars.
 */
class PlyLoader {

    /**
     * Load PLY file from URL with progressive streaming support
     *
     * Downloads and parses PLY data progressively, enabling render during load.
     * Supports both direct-to-buffer and array-based loading modes.
     *
     * @static
     * @param {string} fileName - URL to the PLY file
     * @param {Function} [onProgress] - Progress callback (percent, percentLabel, status)
     * @param {boolean} [loadDirectoToSplatBuffer=false] - Load directly to SplatBuffer (faster but less flexible)
     * @param {Function} [onProgressiveLoadSectionProgress] - Callback for progressive section updates
     * @param {number} [minimumAlpha=1] - Minimum alpha threshold for splat culling
     * @param {number} [compressionLevel=0] - Compression level (0=none, 1=medium, 2=high)
     * @param {boolean} [optimizeSplatData=true] - Whether to optimize/compress splat data
     * @param {number} [outSphericalHarmonicsDegree=0] - Spherical harmonics degree (0-3)
     * @param {Object} [headers] - HTTP headers for fetch request
     * @param {number} [sectionSize] - Section size for partitioning
     * @param {Vector3} [sceneCenter] - Center point of the scene
     * @param {number} [blockSize] - Block size for spatial partitioning
     * @param {number} [bucketSize] - Bucket size for sorting
     * @returns {Promise<SplatBuffer>} Loaded and parsed splat buffer
     * @throws {ValidationError} If parameters are invalid
     * @throws {NetworkError} If file download fails
     * @throws {ParseError} If PLY parsing fails
     * @throws {AssetLoadError} If asset loading fails
     */
    static loadFromURL(fileName, onProgress, loadDirectoToSplatBuffer, onProgressiveLoadSectionProgress,
                       minimumAlpha, compressionLevel, optimizeSplatData = true, outSphericalHarmonicsDegree = 0,
                       headers, sectionSize, sceneCenter, blockSize, bucketSize) {

        // Validate required parameters
        try {
            validateUrl(fileName);
        } catch (error) {
            logger$3.error('Invalid URL provided to loadFromURL', { fileName, error });
            throw error;
        }

        // Validate optional callbacks
        if (onProgress) {
            validateCallback(onProgress, 'onProgress', false);
        }
        if (onProgressiveLoadSectionProgress) {
            validateCallback(onProgressiveLoadSectionProgress, 'onProgressiveLoadSectionProgress', false);
        }

        logger$3.info('Loading PLY from URL', { fileName, optimizeSplatData, outSphericalHarmonicsDegree });

        let internalLoadType = loadDirectoToSplatBuffer ? InternalLoadType.DirectToSplatBuffer : InternalLoadType.DirectToSplatArray;
        if (optimizeSplatData) internalLoadType = InternalLoadType.DirectToSplatArray;

        const directLoadSectionSizeBytes = Constants$1.ProgressiveLoadSectionSize;
        const splatDataOffsetBytes = SplatBuffer.HeaderSizeBytes + SplatBuffer.SectionHeaderSizeBytes;
        const sectionCount = 1;

        let directLoadBufferIn;
        let directLoadBufferOut;
        let directLoadSplatBuffer;
        let maxSplatCount = 0;
        let splatCount = 0;

        let headerLoaded = false;
        let readyToLoadSplatData = false;

        const loadPromise = nativePromiseWithExtractedComponents();

        let numBytesStreamed = 0;
        let numBytesParsed = 0;
        let numBytesDownloaded = 0;
        let headerText = '';
        let header = null;
        let chunks = [];

        let standardLoadUncompressedSplatArray;

        const textDecoder = new TextDecoder();
        const inriaV1PlyParser = new INRIAV1PlyParser();

        const localOnProgress = (percent, percentLabel, chunkData) => {
            const loadComplete = percent >= 100;

            if (chunkData) {
                chunks.push({
                    'data': chunkData,
                    'sizeBytes': chunkData.byteLength,
                    'startBytes': numBytesDownloaded,
                    'endBytes': numBytesDownloaded + chunkData.byteLength
                });
                numBytesDownloaded += chunkData.byteLength;
            }

            if (internalLoadType === InternalLoadType.DownloadBeforeProcessing) {
                if (loadComplete) {
                    loadPromise.resolve(chunks);
                }
            } else {
                if (!headerLoaded) {
                    headerText += textDecoder.decode(chunkData);
                    if (PlyParserUtils.checkTextForEndHeader(headerText)) {
                        // FLAME avatars use INRIAV1 format - parse header
                        try {
                            header = inriaV1PlyParser.decodeHeaderText(headerText);
                            maxSplatCount = header.splatCount;
                            readyToLoadSplatData = true;

                            logger$3.debug('PLY header decoded', {
                                splatCount: maxSplatCount,
                                sphericalHarmonicsDegree: header.sphericalHarmonicsDegree
                            });

                            outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
                        } catch (error) {
                            const parseError = new ParseError$1(
                                `Failed to decode PLY header: ${error.message}`,
                                'headerText',
                                error
                            );
                            logger$3.error('Header parsing failed', parseError);
                            loadPromise.reject(parseError);
                            return;
                        }

                        const shDescriptor = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree];
                        const splatBufferSizeBytes = splatDataOffsetBytes + shDescriptor.BytesPerSplat * maxSplatCount;

                        if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                            directLoadBufferOut = new ArrayBuffer(splatBufferSizeBytes);
                            SplatBuffer.writeHeaderToBuffer({
                                versionMajor: SplatBuffer.CurrentMajorVersion,
                                versionMinor: SplatBuffer.CurrentMinorVersion,
                                maxSectionCount: sectionCount,
                                sectionCount: sectionCount,
                                maxSplatCount: maxSplatCount,
                                splatCount: splatCount,
                                compressionLevel: 0,
                                sceneCenter: new THREE.Vector3()
                            }, directLoadBufferOut);
                        } else {
                            standardLoadUncompressedSplatArray = new UncompressedSplatArray(outSphericalHarmonicsDegree);
                        }

                        numBytesStreamed = header.headerSizeBytes;
                        numBytesParsed = header.headerSizeBytes;
                        headerLoaded = true;
                    }
                }

                if (headerLoaded && readyToLoadSplatData) {

                    if (chunks.length > 0) {

                        directLoadBufferIn = storeChunksInBuffer(chunks, directLoadBufferIn);

                        const bytesLoadedSinceLastStreamedSection = numBytesDownloaded - numBytesStreamed;
                        if (bytesLoadedSinceLastStreamedSection > directLoadSectionSizeBytes || loadComplete) {
                            const numBytesToProcess = numBytesDownloaded - numBytesParsed;
                            const addedSplatCount = Math.floor(numBytesToProcess / header.bytesPerSplat);
                            const numBytesToParse = addedSplatCount * header.bytesPerSplat;
                            const numBytesLeftOver = numBytesToProcess - numBytesToParse;
                            const newSplatCount = splatCount + addedSplatCount;
                            const parsedDataViewOffset = numBytesParsed - chunks[0].startBytes;
                            const dataToParse = new DataView(directLoadBufferIn, parsedDataViewOffset, numBytesToParse);

                            const shDescriptor = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree];
                            const outOffset = splatCount * shDescriptor.BytesPerSplat + splatDataOffsetBytes;

                            // Parse splat data with error handling
                            try {
                                if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                                    inriaV1PlyParser.parseToUncompressedSplatBufferSection(
                                        header, 0, addedSplatCount - 1, dataToParse,
                                        0, directLoadBufferOut, outOffset,
                                        outSphericalHarmonicsDegree
                                    );
                                } else {
                                    inriaV1PlyParser.parseToUncompressedSplatArraySection(
                                        header, 0, addedSplatCount - 1, dataToParse,
                                        0, standardLoadUncompressedSplatArray,
                                        outSphericalHarmonicsDegree
                                    );
                                }
                            } catch (error) {
                                const parseError = new ParseError$1(
                                    `Failed to parse splat data section: ${error.message}`,
                                    'splatData',
                                    error
                                );
                                logger$3.error('Splat data parsing failed', { splatCount, addedSplatCount, error });
                                loadPromise.reject(parseError);
                                return;
                            }

                            splatCount = newSplatCount;

                            if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                                if (!directLoadSplatBuffer) {
                                    SplatBuffer.writeSectionHeaderToBuffer({
                                        maxSplatCount: maxSplatCount,
                                        splatCount: splatCount,
                                        bucketSize: 0,
                                        bucketCount: 0,
                                        bucketBlockSize: 0,
                                        compressionScaleRange: 0,
                                        storageSizeBytes: 0,
                                        fullBucketCount: 0,
                                        partiallyFilledBucketCount: 0,
                                        sphericalHarmonicsDegree: outSphericalHarmonicsDegree
                                    }, 0, directLoadBufferOut, SplatBuffer.HeaderSizeBytes);
                                    directLoadSplatBuffer = new SplatBuffer(directLoadBufferOut, false);
                                }
                                directLoadSplatBuffer.updateLoadedCounts(1, splatCount);
                                if (onProgressiveLoadSectionProgress) {
                                    onProgressiveLoadSectionProgress(directLoadSplatBuffer, loadComplete);
                                }
                            }

                            numBytesStreamed += directLoadSectionSizeBytes;
                            numBytesParsed += numBytesToParse;

                            if (numBytesLeftOver === 0) {
                                chunks = [];
                            } else {
                                let keepChunks = [];
                                let keepSize = 0;
                                for (let i = chunks.length - 1; i >= 0; i--) {
                                    const chunk = chunks[i];
                                    keepSize += chunk.sizeBytes;
                                    keepChunks.unshift(chunk);
                                    if (keepSize >= numBytesLeftOver) break;
                                }
                                chunks = keepChunks;
                            }
                        }
                    }

                    if (loadComplete) {
                        if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                            loadPromise.resolve(directLoadSplatBuffer);
                        } else {
                            loadPromise.resolve(standardLoadUncompressedSplatArray);
                        }
                    }
                }
            }

            // Progress callback with error isolation
            if (onProgress) {
                try {
                    onProgress(percent, percentLabel, LoaderStatus.Downloading);
                } catch (error) {
                    logger$3.warn('Error in onProgress callback', error);
                }
            }
        };

        // Initial progress callback
        if (onProgress) {
            try {
                onProgress(0, '0%', LoaderStatus.Downloading);
            } catch (error) {
                logger$3.warn('Error in onProgress callback', error);
            }
        }

        // Fetch and process the PLY file
        return fetchWithProgress(fileName, localOnProgress, false, headers)
            .then(() => {
                if (onProgress) {
                    try {
                        onProgress(0, '0%', LoaderStatus.Processing);
                    } catch (error) {
                        logger$3.warn('Error in onProgress callback', error);
                    }
                }
                return loadPromise.promise;
            })
            .then((splatData) => {
                if (onProgress) {
                    try {
                        onProgress(100, '100%', LoaderStatus.Done);
                    } catch (error) {
                        logger$3.warn('Error in onProgress callback', error);
                    }
                }

                logger$3.debug('PLY data loaded successfully', {
                    internalLoadType,
                    splatCount: splatData?.splatCount || 'unknown'
                });

                // Process based on load type
                if (internalLoadType === InternalLoadType.DownloadBeforeProcessing) {
                    const chunkDatas = chunks.map((chunk) => chunk.data);
                    return new Blob(chunkDatas).arrayBuffer()
                        .then((plyFileData) => {
                            return PlyLoader.loadFromFileData(
                                plyFileData, minimumAlpha, compressionLevel, optimizeSplatData,
                                outSphericalHarmonicsDegree, sectionSize, sceneCenter, blockSize, bucketSize
                            );
                        })
                        .catch((error) => {
                            throw new AssetLoadError(
                                `Failed to process downloaded PLY data: ${error.message}`,
                                fileName,
                                error
                            );
                        });
                } else if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                    return splatData;
                } else {
                    return delayedExecute(() => {
                        return finalizeSplatData(
                            splatData, optimizeSplatData, minimumAlpha, compressionLevel,
                            sectionSize, sceneCenter, blockSize, bucketSize
                        );
                    });
                }
            })
            .catch((error) => {
                // Re-throw custom errors as-is
                if (error instanceof ValidationError ||
                    error instanceof NetworkError ||
                    error instanceof ParseError$1 ||
                    error instanceof AssetLoadError) {
                    logger$3.error('PLY loading failed', { fileName, errorCode: error.code });
                    throw error;
                }

                // Wrap unexpected errors
                logger$3.error('Unexpected error loading PLY', { fileName, error });
                throw new AssetLoadError(
                    `Unexpected error loading PLY file: ${error.message}`,
                    fileName,
                    error
                );
            });
    }

    /**
     * Load PLY file from raw ArrayBuffer data
     *
     * Parses PLY data that has already been downloaded. Useful for loading
     * from local files or when data is provided directly.
     *
     * @static
     * @param {ArrayBuffer} plyFileData - Raw PLY file data as ArrayBuffer
     * @param {number} [minimumAlpha=1] - Minimum alpha threshold for splat culling
     * @param {number} [compressionLevel=0] - Compression level (0=none, 1=medium, 2=high)
     * @param {boolean} [optimizeSplatData=true] - Whether to optimize/compress splat data
     * @param {number} [outSphericalHarmonicsDegree=0] - Spherical harmonics degree (0-3)
     * @param {number} [sectionSize] - Section size for partitioning
     * @param {Vector3} [sceneCenter] - Center point of the scene
     * @param {number} [blockSize] - Block size for spatial partitioning
     * @param {number} [bucketSize] - Bucket size for sorting
     * @returns {Promise<SplatBuffer>} Parsed and finalized splat buffer
     * @throws {ValidationError} If plyFileData is invalid
     * @throws {ParseError} If parsing fails
     */
    static loadFromFileData(plyFileData, minimumAlpha, compressionLevel, optimizeSplatData, outSphericalHarmonicsDegree = 0,
                            sectionSize, sceneCenter, blockSize, bucketSize) {
        // Validate input
        try {
            validateArrayBuffer(plyFileData, 'plyFileData');
        } catch (error) {
            logger$3.error('Invalid PLY file data', error);
            return Promise.reject(error);
        }

        logger$3.info('Loading PLY from file data', {
            sizeBytes: plyFileData.byteLength,
            optimizeSplatData,
            outSphericalHarmonicsDegree
        });

        return delayedExecute(() => {
            try {
                return PlyParser.parseToUncompressedSplatArray(plyFileData, outSphericalHarmonicsDegree);
            } catch (error) {
                throw new ParseError$1(
                    `Failed to parse PLY file data: ${error.message}`,
                    'plyFileData',
                    error
                );
            }
        })
        .then((splatArray) => {
            logger$3.debug('PLY parsed successfully', {
                splatCount: splatArray?.splatCount || 'unknown'
            });

            return finalizeSplatData(
                splatArray, optimizeSplatData, minimumAlpha, compressionLevel,
                sectionSize, sceneCenter, blockSize, bucketSize
            );
        })
        .catch((error) => {
            // Re-throw custom errors as-is
            if (error instanceof ValidationError || error instanceof ParseError$1) {
                logger$3.error('PLY file data loading failed', { errorCode: error.code });
                throw error;
            }

            // Wrap unexpected errors
            logger$3.error('Unexpected error loading PLY from file data', error);
            throw new ParseError$1(
                `Unexpected error parsing PLY data: ${error.message}`,
                'plyFileData',
                error
            );
        });
    }
}

/**
 * Ray
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


const VectorRight = new THREE__namespace.Vector3(1, 0, 0);
const VectorUp = new THREE__namespace.Vector3(0, 1, 0);
const VectorBackward = new THREE__namespace.Vector3(0, 0, 1);

class Ray {

    constructor(origin = new THREE__namespace.Vector3(), direction = new THREE__namespace.Vector3()) {
        this.origin = new THREE__namespace.Vector3();
        this.direction = new THREE__namespace.Vector3();
        this.setParameters(origin, direction);
    }

    setParameters(origin, direction) {
        this.origin.copy(origin);
        this.direction.copy(direction).normalize();
    }

    boxContainsPoint(box, point, epsilon) {
        return point.x < box.min.x - epsilon || point.x > box.max.x + epsilon ||
               point.y < box.min.y - epsilon || point.y > box.max.y + epsilon ||
               point.z < box.min.z - epsilon || point.z > box.max.z + epsilon ? false : true;
    }

    intersectBox = function() {

        const planeIntersectionPoint = new THREE__namespace.Vector3();
        const planeIntersectionPointArray = [];
        const originArray = [];
        const directionArray = [];

        return function(box, outHit) {

            originArray[0] = this.origin.x;
            originArray[1] = this.origin.y;
            originArray[2] = this.origin.z;
            directionArray[0] = this.direction.x;
            directionArray[1] = this.direction.y;
            directionArray[2] = this.direction.z;

            if (this.boxContainsPoint(box, this.origin, 0.0001)) {
                if (outHit) {
                    outHit.origin.copy(this.origin);
                    outHit.normal.set(0, 0, 0);
                    outHit.distance = -1;
                }
                return true;
            }

            for (let i = 0; i < 3; i++) {
                if (directionArray[i] == 0.0) continue;

                const hitNormal = i == 0 ? VectorRight : i == 1 ? VectorUp : VectorBackward;
                const extremeVec = directionArray[i] < 0 ? box.max : box.min;
                let multiplier = -Math.sign(directionArray[i]);
                planeIntersectionPointArray[0] = i == 0 ? extremeVec.x : i == 1 ? extremeVec.y : extremeVec.z;
                let toSide = planeIntersectionPointArray[0] - originArray[i];

                if (toSide * multiplier < 0) {
                    const idx1 = (i + 1) % 3;
                    const idx2 = (i + 2) % 3;
                    planeIntersectionPointArray[2] = directionArray[idx1] / directionArray[i] * toSide + originArray[idx1];
                    planeIntersectionPointArray[1] = directionArray[idx2] / directionArray[i] * toSide + originArray[idx2];
                    planeIntersectionPoint.set(planeIntersectionPointArray[i],
                                               planeIntersectionPointArray[idx2],
                                               planeIntersectionPointArray[idx1]);
                    if (this.boxContainsPoint(box, planeIntersectionPoint, 0.0001)) {
                        if (outHit) {
                            outHit.origin.copy(planeIntersectionPoint);
                            outHit.normal.copy(hitNormal).multiplyScalar(multiplier);
                            outHit.distance = planeIntersectionPoint.sub(this.origin).length();
                        }
                        return true;
                    }
                }
            }

            return false;
        };

    }();

    intersectSphere = function() {

        const toSphereCenterVec = new THREE__namespace.Vector3();

        return function(center, radius, outHit) {
            toSphereCenterVec.copy(center).sub(this.origin);
            const toClosestApproach = toSphereCenterVec.dot(this.direction);
            const toClosestApproachSq = toClosestApproach * toClosestApproach;
            const toSphereCenterSq = toSphereCenterVec.dot(toSphereCenterVec);
            const diffSq = toSphereCenterSq - toClosestApproachSq;
            const radiusSq = radius * radius;

            if (diffSq > radiusSq) return false;

            const thc = Math.sqrt(radiusSq - diffSq);
            const t0 = toClosestApproach - thc;
            const t1 = toClosestApproach + thc;

            if (t1 < 0) return false;
            let t = t0 < 0 ? t1 : t0;

            if (outHit) {
                outHit.origin.copy(this.origin).addScaledVector(this.direction, t);
                outHit.normal.copy(outHit.origin).sub(center).normalize();
                outHit.distance = t;
            }
            return true;
        };

    }();
}

/**
 * Hit
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class Hit {

    constructor() {
        this.origin = new THREE__namespace.Vector3();
        this.normal = new THREE__namespace.Vector3();
        this.distance = 0;
        this.splatIndex = 0;
    }

    set(origin, normal, distance, splatIndex) {
        this.origin.copy(origin);
        this.normal.copy(normal);
        this.distance = distance;
        this.splatIndex = splatIndex;
    }

    clone() {
        const hitClone = new Hit();
        hitClone.origin.copy(this.origin);
        hitClone.normal.copy(this.normal);
        hitClone.distance = this.distance;
        hitClone.splatIndex = this.splatIndex;
        return hitClone;
    }

}

/**
 * Raycaster
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class Raycaster {

    constructor(origin, direction, raycastAgainstTrueSplatEllipsoid = false) {
        this.ray = new Ray(origin, direction);
        this.raycastAgainstTrueSplatEllipsoid = raycastAgainstTrueSplatEllipsoid;
    }

    setFromCameraAndScreenPosition = function() {

        const ndcCoords = new THREE__namespace.Vector2();

        return function(camera, screenPosition, screenDimensions) {
            ndcCoords.x = screenPosition.x / screenDimensions.x * 2.0 - 1.0;
            ndcCoords.y = (screenDimensions.y - screenPosition.y) / screenDimensions.y * 2.0 - 1.0;
            if (camera.isPerspectiveCamera) {
                this.ray.origin.setFromMatrixPosition(camera.matrixWorld);
                this.ray.direction.set(ndcCoords.x, ndcCoords.y, 0.5 ).unproject(camera).sub(this.ray.origin).normalize();
                this.camera = camera;
            } else if (camera.isOrthographicCamera) {
                this.ray.origin.set(ndcCoords.x, ndcCoords.y,
                                   (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera);
                this.ray.direction.set(0, 0, -1).transformDirection(camera.matrixWorld);
                this.camera = camera;
            } else {
                throw new Error('Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type');
            }
        };

    }();

    intersectSplatMesh = function() {

        const toLocal = new THREE__namespace.Matrix4();
        const fromLocal = new THREE__namespace.Matrix4();
        const sceneTransform = new THREE__namespace.Matrix4();
        const localRay = new Ray();
        const tempPoint = new THREE__namespace.Vector3();

        return function(splatMesh, outHits = []) {
            const splatTree = splatMesh.getSplatTree();

            if (!splatTree) return;

            for (let s = 0; s < splatTree.subTrees.length; s++) {
                const subTree = splatTree.subTrees[s];

                fromLocal.copy(splatMesh.matrixWorld);
                if (splatMesh.dynamicMode) {
                    splatMesh.getSceneTransform(s, sceneTransform);
                    fromLocal.multiply(sceneTransform);
                }
                toLocal.copy(fromLocal).invert();

                localRay.origin.copy(this.ray.origin).applyMatrix4(toLocal);
                localRay.direction.copy(this.ray.origin).add(this.ray.direction);
                localRay.direction.applyMatrix4(toLocal).sub(localRay.origin).normalize();

                const outHitsForSubTree = [];
                if (subTree.rootNode) {
                    this.castRayAtSplatTreeNode(localRay, splatTree, subTree.rootNode, outHitsForSubTree);
                }

                outHitsForSubTree.forEach((hit) => {
                    hit.origin.applyMatrix4(fromLocal);
                    hit.normal.applyMatrix4(fromLocal).normalize();
                    hit.distance = tempPoint.copy(hit.origin).sub(this.ray.origin).length();
                });

                outHits.push(...outHitsForSubTree);
            }

            outHits.sort((a, b) => {
                if (a.distance > b.distance) return 1;
                else return -1;
            });

            return outHits;
        };

    }();

    castRayAtSplatTreeNode = function() {

        const tempColor = new THREE__namespace.Vector4();
        const tempCenter = new THREE__namespace.Vector3();
        const tempScale = new THREE__namespace.Vector3();
        const tempRotation = new THREE__namespace.Quaternion();
        const tempHit = new Hit();
        const scaleEpsilon = 0.0000001;

        const origin = new THREE__namespace.Vector3(0, 0, 0);
        const uniformScaleMatrix = new THREE__namespace.Matrix4();
        const scaleMatrix = new THREE__namespace.Matrix4();
        const rotationMatrix = new THREE__namespace.Matrix4();
        const toSphereSpace = new THREE__namespace.Matrix4();
        const fromSphereSpace = new THREE__namespace.Matrix4();
        const tempRay = new Ray();

        return function(ray, splatTree, node, outHits = []) {
            if (!ray.intersectBox(node.boundingBox)) {
                return;
            }
            if (node.data && node.data.indexes && node.data.indexes.length > 0) {
                for (let i = 0; i < node.data.indexes.length; i++) {

                    const splatGlobalIndex = node.data.indexes[i];
                    const splatSceneIndex = splatTree.splatMesh.getSceneIndexForSplat(splatGlobalIndex);
                    const splatScene = splatTree.splatMesh.getScene(splatSceneIndex);
                    if (!splatScene.visible) continue;

                    splatTree.splatMesh.getSplatColor(splatGlobalIndex, tempColor);
                    splatTree.splatMesh.getSplatCenter(splatGlobalIndex, tempCenter);
                    splatTree.splatMesh.getSplatScaleAndRotation(splatGlobalIndex, tempScale, tempRotation);

                    if (tempScale.x <= scaleEpsilon || tempScale.y <= scaleEpsilon ||
                        splatTree.splatMesh.splatRenderMode === SplatRenderMode.ThreeD && tempScale.z <= scaleEpsilon) {
                        continue;
                    }

                    if (!this.raycastAgainstTrueSplatEllipsoid) {
                        let radius = (tempScale.x + tempScale.y);
                        let componentCount = 2;
                        if (splatTree.splatMesh.splatRenderMode === SplatRenderMode.ThreeD) {
                            radius += tempScale.z;
                            componentCount = 3;
                        }
                        radius = radius / componentCount;
                        if (ray.intersectSphere(tempCenter, radius, tempHit)) {
                            const hitClone = tempHit.clone();
                            hitClone.splatIndex = splatGlobalIndex;
                            outHits.push(hitClone);
                        }
                    } else {
                        scaleMatrix.makeScale(tempScale.x, tempScale.y, tempScale.z);
                        rotationMatrix.makeRotationFromQuaternion(tempRotation);
                        const uniformScale = Math.log10(tempColor.w) * 2.0;
                        uniformScaleMatrix.makeScale(uniformScale, uniformScale, uniformScale);
                        fromSphereSpace.copy(uniformScaleMatrix).multiply(rotationMatrix).multiply(scaleMatrix);
                        toSphereSpace.copy(fromSphereSpace).invert();
                        tempRay.origin.copy(ray.origin).sub(tempCenter).applyMatrix4(toSphereSpace);
                        tempRay.direction.copy(ray.origin).add(ray.direction).sub(tempCenter);
                        tempRay.direction.applyMatrix4(toSphereSpace).sub(tempRay.origin).normalize();
                        if (tempRay.intersectSphere(origin, 1.0, tempHit)) {
                            const hitClone = tempHit.clone();
                            hitClone.splatIndex = splatGlobalIndex;
                            hitClone.origin.applyMatrix4(fromSphereSpace).add(tempCenter);
                            outHits.push(hitClone);
                        }
                    }
                }
             }
            if (node.children && node.children.length > 0) {
                for (let child of node.children) {
                    this.castRayAtSplatTreeNode(ray, splatTree, child, outHits);
                }
            }
            return outHits;
        };

    }();
}

/**
 * SortWorker
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Handles GPU-based sorting using WebAssembly
 */


// Base64 encoded WASM modules for sorting
const SorterWasm = "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";

const SorterWasmNoSIMD = "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";

const SorterWasmNonShared = "AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQrrDwICAAvlDwQBfAN7B30DfyALIAprIQwCQAJAIA4EQCANBEBB+P///wchCkGIgICAeCENIAsgDE0NAyAMIQUDQCADIAVBAnQiAWogAiAAIAFqKAIAQQJ0aigCACIBNgIAIAEgCiABIApIGyEKIAEgDSABIA1KGyENIAVBAWoiBSALRw0ACwwDCyAPBEAgCyAMTQ0CQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIcaigCACIdQQJ0aigCACIbRwRAAn8gBf0JAjggCCAbQQZ0aiIO/QkCDCAOKgIc/SABIA4qAiz9IAIgDioCPP0gA/3mASAF/QkCKCAO/QkCCCAOKgIY/SABIA4qAij9IAIgDioCOP0gA/3mASAF/QkCCCAO/QkCACAOKgIQ/SABIA4qAiD9IAIgDioCMP0gA/3mASAF/QkCGCAO/QkCBCAOKgIU/SABIA4qAiT9IAIgDioCNP0gA/3mAf3kAf3kAf3kASIR/V/9DAAAAAAAQI9AAAAAAABAj0AiEv3yASIT/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOAn8gE/0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9ESAO/RwBAn8gESAR/Q0ICQoLDA0ODwABAgMAAQID/V8gEv3yASIR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAgJ/IBH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/RwDIRIgGyEPCyADIBxqIAEgHUEEdGr9AAAAIBL9tQEiEf0bACAR/RsBaiAR/RsCaiAR/RsDaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAgi7/RQgBSoCGLv9IgH9DAAAAAAAQI9AAAAAAABAj0D98gEiEf0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBH9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQL9ESAO/RwBIAX9HAIhEiAMIQUDQCADIAVBAnQiAmogASAAIAJqKAIAQQR0av0AAAAgEv21ASIR/RsAIBH9GwFqIBH9GwJqIgI2AgAgAiAKIAIgCkgbIQogAiANIAIgDUobIQ0gBUEBaiIFIAtHDQALDAILIA0EQEH4////ByEKQYiAgIB4IQ0gCyAMTQ0CIAwhBQNAIAMgBUECdCIBagJ/IAIgACABaigCAEECdGoqAgC7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgD0UEQCALIAxNDQEgBSoCKCEUIAUqAhghFSAFKgIIIRZB+P///wchCkGIgICAeCENIAwhBQNAAn8gFCABIAAgBUECdCIHaigCAEEEdGoiAioCCJQgFiACKgIAlCAVIAIqAgSUkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDiADIAdqIA42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gBUEBaiIFIAtHDQALDAILIAsgDE0NAEF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiG2ooAgBBAnQiHGooAgAiDkcEQCAFKgI4IhQgCCAOQQZ0aiIPKgI8lCAFKgIoIhUgDyoCOJQgBSoCCCIWIA8qAjCUIAUqAhgiFyAPKgI0lJKSkiEYIBQgDyoCLJQgFSAPKgIolCAWIA8qAiCUIBcgDyoCJJSSkpIhGSAUIA8qAhyUIBUgDyoCGJQgFiAPKgIQlCAXIA8qAhSUkpKSIRogFCAPKgIMlCAVIA8qAgiUIBYgDyoCAJQgFyAPKgIElJKSkiEUIA4hDwsgAyAbagJ/IBggASAcQQJ0aiIOKgIMlCAZIA4qAgiUIBQgDioCAJQgGiAOKgIElJKSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAJBAWoiAiALRw0ACwwBC0GIgICAeCENQfj///8HIQoLIAsgDEsEQCAJQQFrsyANsiAKspOVIRQgDCENA0ACfyAUIAMgDUECdGoiASgCACAKa7KUIhWLQwAAAE9dBEAgFagMAQtBgICAgHgLIQ4gASAONgIAIAQgDkECdGoiASABKAIAQQFqNgIAIA1BAWoiDSALRw0ACwsgCUECTwRAIAQoAgAhDUEBIQoDQCAEIApBAnRqIgEgASgCACANaiINNgIAIApBAWoiCiAJRw0ACwsgDEEASgRAIAwhCgNAIAYgCkEBayIBQQJ0IgJqIAAgAmooAgA2AgAgCkEBSyABIQoNAAsLIAsgDEoEQCALIQoDQCAGIAsgBCADIApBAWsiCkECdCIBaigCAEECdGoiAigCACIFa0ECdGogACABaigCADYCACACIAVBAWs2AgAgCiAMSg0ACwsL";

const SorterWasmNoSIMDNonShared = "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";

/**
 * Sort worker function that runs in a Web Worker
 * Handles the actual sorting logic using WebAssembly
 */
function sortWorker(self) {

    let wasmInstance;
    let wasmMemory;
    let useSharedMemory;
    let integerBasedSort;
    let dynamicMode;
    let splatCount;
    let indexesToSortOffset;
    let sortedIndexesOffset;
    let sceneIndexesOffset;
    let transformsOffset;
    let precomputedDistancesOffset;
    let mappedDistancesOffset;
    let frequenciesOffset;
    let centersOffset;
    let modelViewProjOffset;
    let countsZero;
    let sortedIndexesOut;
    let distanceMapRange;
    let uploadedSplatCount;
    let Constants;

    function sort(splatSortCount, splatRenderCount, modelViewProj,
                  usePrecomputedDistances, copyIndexesToSort, copyPrecomputedDistances, copyTransforms) {
        const sortStartTime = performance.now();

        if (!useSharedMemory) {
            const indexesToSort = new Uint32Array(wasmMemory, indexesToSortOffset, copyIndexesToSort.byteLength / Constants.BytesPerInt);
            indexesToSort.set(copyIndexesToSort);
            const transforms = new Float32Array(wasmMemory, transformsOffset, copyTransforms.byteLength / Constants.BytesPerFloat);
            transforms.set(copyTransforms);
            if (usePrecomputedDistances) {
                let precomputedDistances;
                if (integerBasedSort) {
                    precomputedDistances = new Int32Array(wasmMemory, precomputedDistancesOffset,
                                                          copyPrecomputedDistances.byteLength / Constants.BytesPerInt);
                } else {
                    precomputedDistances = new Float32Array(wasmMemory, precomputedDistancesOffset,
                                                            copyPrecomputedDistances.byteLength / Constants.BytesPerFloat);
                }
                precomputedDistances.set(copyPrecomputedDistances);
            }
        }

        if (!countsZero) countsZero = new Uint32Array(distanceMapRange);
        new Float32Array(wasmMemory, modelViewProjOffset, 16).set(modelViewProj);
        new Uint32Array(wasmMemory, frequenciesOffset, distanceMapRange).set(countsZero);
        wasmInstance.exports.sortIndexes(indexesToSortOffset, centersOffset, precomputedDistancesOffset,
                                         mappedDistancesOffset, frequenciesOffset, modelViewProjOffset,
                                         sortedIndexesOffset, sceneIndexesOffset, transformsOffset, distanceMapRange,
                                         splatSortCount, splatRenderCount, splatCount, usePrecomputedDistances, integerBasedSort,
                                         dynamicMode);

        const sortMessage = {
            'sortDone': true,
            'splatSortCount': splatSortCount,
            'splatRenderCount': splatRenderCount,
            'sortTime': 0
        };
        if (!useSharedMemory) {
            const sortedIndexes = new Uint32Array(wasmMemory, sortedIndexesOffset, splatRenderCount);
            if (!sortedIndexesOut || sortedIndexesOut.length < splatRenderCount) {
                sortedIndexesOut = new Uint32Array(splatRenderCount);
            }
            sortedIndexesOut.set(sortedIndexes);
            sortMessage.sortedIndexes = sortedIndexesOut;
        }
        const sortEndTime = performance.now();

        sortMessage.sortTime = sortEndTime - sortStartTime;

        self.postMessage(sortMessage);
    }

    self.onmessage = (e) => {
        if (e.data.centers) {
            let centers = e.data.centers;
            let sceneIndexes = e.data.sceneIndexes;
            if (integerBasedSort) {
                new Int32Array(wasmMemory, centersOffset + e.data.range.from * Constants.BytesPerInt * 4,
                               e.data.range.count * 4).set(new Int32Array(centers));
            } else {
                new Float32Array(wasmMemory, centersOffset + e.data.range.from * Constants.BytesPerFloat * 4,
                                 e.data.range.count * 4).set(new Float32Array(centers));
            }
            if (dynamicMode) {
                new Uint32Array(wasmMemory, sceneIndexesOffset + e.data.range.from * 4,
                                e.data.range.count).set(new Uint32Array(sceneIndexes));
            }
            uploadedSplatCount = e.data.range.from + e.data.range.count;
        } else if (e.data.sort) {
            const renderCount = Math.min(e.data.sort.splatRenderCount || 0, uploadedSplatCount);
            const sortCount = Math.min(e.data.sort.splatSortCount || 0, uploadedSplatCount);
            const usePrecomputedDistances = e.data.sort.usePrecomputedDistances;

            let copyIndexesToSort;
            let copyPrecomputedDistances;
            let copyTransforms;
            if (!useSharedMemory) {
                copyIndexesToSort = e.data.sort.indexesToSort;
                copyTransforms = e.data.sort.transforms;
                if (usePrecomputedDistances) copyPrecomputedDistances = e.data.sort.precomputedDistances;
            }
            sort(sortCount, renderCount, e.data.sort.modelViewProj, usePrecomputedDistances,
                 copyIndexesToSort, copyPrecomputedDistances, copyTransforms);
        } else if (e.data.init) {
            // Yep, this is super hacky and gross :(
            Constants = e.data.init.Constants;

            splatCount = e.data.init.splatCount;
            useSharedMemory = e.data.init.useSharedMemory;
            integerBasedSort = e.data.init.integerBasedSort;
            dynamicMode = e.data.init.dynamicMode;
            distanceMapRange = e.data.init.distanceMapRange;
            uploadedSplatCount = 0;

            const CENTERS_BYTES_PER_ENTRY = integerBasedSort ? (Constants.BytesPerInt * 4) : (Constants.BytesPerFloat * 4);

            const sorterWasmBytes = new Uint8Array(e.data.init.sorterWasmBytes);

            const matrixSize = 16 * Constants.BytesPerFloat;
            const memoryRequiredForIndexesToSort = splatCount * Constants.BytesPerInt;
            const memoryRequiredForCenters = splatCount * CENTERS_BYTES_PER_ENTRY;
            const memoryRequiredForModelViewProjectionMatrix = matrixSize;
            const memoryRequiredForPrecomputedDistances = integerBasedSort ?
                                                          (splatCount * Constants.BytesPerInt) : (splatCount * Constants.BytesPerFloat);
            const memoryRequiredForMappedDistances = splatCount * Constants.BytesPerInt;
            const memoryRequiredForSortedIndexes = splatCount * Constants.BytesPerInt;
            const memoryRequiredForIntermediateSortBuffers = integerBasedSort ? (distanceMapRange * Constants.BytesPerInt * 2) :
                                                                                (distanceMapRange * Constants.BytesPerFloat * 2);
            const memoryRequiredforTransformIndexes = dynamicMode ? (splatCount * Constants.BytesPerInt) : 0;
            const memoryRequiredforTransforms = dynamicMode ? (Constants.MaxScenes * matrixSize) : 0;
            const extraMemory = Constants.MemoryPageSize * 32;

            const totalRequiredMemory = memoryRequiredForIndexesToSort +
                                        memoryRequiredForCenters +
                                        memoryRequiredForModelViewProjectionMatrix +
                                        memoryRequiredForPrecomputedDistances +
                                        memoryRequiredForMappedDistances +
                                        memoryRequiredForIntermediateSortBuffers +
                                        memoryRequiredForSortedIndexes +
                                        memoryRequiredforTransformIndexes +
                                        memoryRequiredforTransforms +
                                        extraMemory;
            const totalPagesRequired = Math.floor(totalRequiredMemory / Constants.MemoryPageSize ) + 1;
            const sorterWasmImport = {
                module: {},
                env: {
                    memory: new WebAssembly.Memory({
                        initial: totalPagesRequired,
                        maximum: totalPagesRequired,
                        shared: true,
                    }),
                }
            };
            WebAssembly.compile(sorterWasmBytes)
            .then((wasmModule) => {
                return WebAssembly.instantiate(wasmModule, sorterWasmImport);
            })
            .then((instance) => {
                wasmInstance = instance;
                indexesToSortOffset = 0;
                centersOffset = indexesToSortOffset + memoryRequiredForIndexesToSort;
                modelViewProjOffset = centersOffset + memoryRequiredForCenters;
                precomputedDistancesOffset = modelViewProjOffset + memoryRequiredForModelViewProjectionMatrix;
                mappedDistancesOffset = precomputedDistancesOffset + memoryRequiredForPrecomputedDistances;
                frequenciesOffset = mappedDistancesOffset + memoryRequiredForMappedDistances;
                sortedIndexesOffset = frequenciesOffset + memoryRequiredForIntermediateSortBuffers;
                sceneIndexesOffset = sortedIndexesOffset + memoryRequiredForSortedIndexes;
                transformsOffset = sceneIndexesOffset + memoryRequiredforTransformIndexes;
                wasmMemory = sorterWasmImport.env.memory.buffer;
                if (useSharedMemory) {
                    self.postMessage({
                        'sortSetupPhase1Complete': true,
                        'indexesToSortBuffer': wasmMemory,
                        'indexesToSortOffset': indexesToSortOffset,
                        'sortedIndexesBuffer': wasmMemory,
                        'sortedIndexesOffset': sortedIndexesOffset,
                        'precomputedDistancesBuffer': wasmMemory,
                        'precomputedDistancesOffset': precomputedDistancesOffset,
                        'transformsBuffer': wasmMemory,
                        'transformsOffset': transformsOffset
                    });
                } else {
                    self.postMessage({
                        'sortSetupPhase1Complete': true
                    });
                }
            });
        }
    };
}

/**
 * Creates a sort worker for GPU-based sorting
 * @param {number} splatCount - Number of splats to sort
 * @param {boolean} useSharedMemory - Whether to use shared memory
 * @param {boolean} enableSIMDInSort - Whether to enable SIMD instructions
 * @param {boolean} integerBasedSort - Whether to use integer-based sorting
 * @param {boolean} dynamicMode - Whether dynamic mode is enabled
 * @param {number} splatSortDistanceMapPrecision - Precision for distance map
 * @returns {Worker} The created sort worker
 */
function createSortWorker(splatCount, useSharedMemory, enableSIMDInSort, integerBasedSort, dynamicMode,
                                 splatSortDistanceMapPrecision = Constants$1.DefaultSplatSortDistanceMapPrecision) {
    const worker = new Worker(
        URL.createObjectURL(
            new Blob(['(', sortWorker.toString(), ')(self)'], {
                type: 'application/javascript',
            }),
        ),
    );

    let sourceWasm = SorterWasm;

    // iOS makes choosing the right WebAssembly configuration tricky :(
    const iOSSemVer = isIOS() ? getIOSSemever() : null;
    if (!enableSIMDInSort && !useSharedMemory) {
        sourceWasm = SorterWasmNoSIMD;
        // Testing on various devices has shown that even when shared memory is disabled, the WASM module with shared
        // memory can still be used most of the time -- the exception seems to be iOS devices below 16.4
        if (iOSSemVer && iOSSemVer.major <= 16 && iOSSemVer.minor < 4) {
            sourceWasm = SorterWasmNoSIMDNonShared;
        }
    } else if (!enableSIMDInSort) {
        sourceWasm = SorterWasmNoSIMD;
    } else if (!useSharedMemory) {
        // Same issue with shared memory as above on iOS devices
        if (iOSSemVer && iOSSemVer.major <= 16 && iOSSemVer.minor < 4) {
            sourceWasm = SorterWasmNonShared;
        }
    }

    const sorterWasmBinaryString = atob(sourceWasm);
    const sorterWasmBytes = new Uint8Array(sorterWasmBinaryString.length);
    for (let i = 0; i < sorterWasmBinaryString.length; i++) {
        sorterWasmBytes[i] = sorterWasmBinaryString.charCodeAt(i);
    }

    worker.postMessage({
        'init': {
            'sorterWasmBytes': sorterWasmBytes.buffer,
            'splatCount': splatCount,
            'useSharedMemory': useSharedMemory,
            'integerBasedSort': integerBasedSort,
            'dynamicMode': dynamicMode,
            'distanceMapRange': 1 << splatSortDistanceMapPrecision,
            // Super hacky
            'Constants': {
                'BytesPerFloat': Constants$1.BytesPerFloat,
                'BytesPerInt': Constants$1.BytesPerInt,
                'MemoryPageSize': Constants$1.MemoryPageSize,
                'MaxScenes': Constants$1.MaxScenes
            }
        }
    });
    return worker;
}

/**
 * Viewer
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME head model integration
 * - Extended with expression/pose controls
 * - Additional rendering pipeline modifications
 * - Additional ~900 lines of FLAME-specific code
 */


const logger$2 = getLogger('Viewer');

// UI components - stub implementations for now
class LoadingSpinner {
    constructor(msg, container) { this.tasks = []; }
    show() {}
    hide() {}
    setContainer(c) {}
    addTask(msg) { return this.tasks.push(msg); }
    removeTask(id) {}
    removeAllTasks() { this.tasks = []; }
    setMessageForTask(id, msg) {}
}

class LoadingProgressBar {
    constructor(container) {}
    show() {}
    hide() {}
    setContainer(c) {}
    setProgress(p) {}
}

class SceneHelper {
    constructor(scene) { 
        this.scene = scene; 
        this.meshCursor = null;
        this.meshCursorVisible = false;
        this.focusMarker = null;
        this.focusMarkerOpacity = 0;
        this.controlPlane = null;
        this.controlPlaneVisible = false;
    }
    setupMeshCursor() {}
    setupFocusMarker() {}
    setupControlPlane() {}
    updateMeshCursor(pos, active) {}
    updateFocusMarker(target, camera, renderDimensions) {}
    updateControlPlane(cam, ctrl) {}
    setFocusMarkerVisibility(v) {}
    setFocusMarkerOpacity(o) { this.focusMarkerOpacity = o; }
    getFocusMarkerOpacity() { return this.focusMarkerOpacity; }
    positionAndOrientFocusMarker(pos, cam) {}
    positionAndOrientMeshCursor(pos, cam) {}
    setMeshCursorVisibility(visible) { this.meshCursorVisible = visible; }
    getMeschCursorVisibility() { return this.meshCursorVisible; }
    setControlPlaneVisibility(visible) { this.controlPlaneVisible = visible; }
    positionAndOrientControlPlane(pos, quat, scale) {}
    updateForRenderMode(mode, mesh) {}
    dispose() {}
}

/**
 * Viewer - Core Gaussian Splatting Viewer
 * Handles the Three.js scene, camera, controls, and rendering loop.
 */
class Viewer {
  /**
   * @param {object} options - Configuration options
   * @param {Array<number>} [options.cameraUp=[0, 1, 0]] - Camera up vector
   * @param {Array<number>} [options.initialCameraPosition=[0, 10, 15]] - Initial camera position
   * @param {Array<number>} [options.initialCameraRotation=[0, 0, 0]] - Initial camera rotation
   * @param {Array<number>} [options.initialCameraLookAt=[0, 0, 0]] - Initial camera look-at point
   * @param {boolean} [options.dropInMode=false] - If true, viewer is used as a Three.js scene object
   * @param {boolean} [options.selfDrivenMode=true] - If true, viewer manages its own render loop
   * @param {boolean} [options.useBuiltInControls=true] - If true, uses OrbitControls
   * @param {HTMLElement} [options.rootElement] - Parent element for the canvas
   * @param {HTMLCanvasElement} [options.threejsCanvas] - Existing canvas to use
   * @param {boolean} [options.ignoreDevicePixelRatio=false] - If true, forces DPR to 1
   * @param {boolean} [options.halfPrecisionCovariancesOnGPU=false] - Use 16-bit float for covariances
   * @param {THREE.Scene} [options.threeScene] - External Three.js scene to render
   * @param {THREE.WebGLRenderer} [options.renderer] - External Three.js renderer
   * @param {THREE.Camera} [options.camera] - External Three.js camera
   * @param {boolean} [options.gpuAcceleratedSort=false] - Use GPU for sorting distances
   * @param {boolean} [options.integerBasedSort=true] - Use integer arithmetic for sorting
   * @param {boolean} [options.sharedMemoryForWorkers=true] - Use SharedArrayBuffer for workers
   * @param {boolean} [options.dynamicScene=false] - Optimize for dynamic scenes
   */
  constructor(options = {}) {
    // The natural 'up' vector for viewing the scene (only has an effect when used with orbit controls and
    // when the viewer uses its own camera).
    if (!options.cameraUp) options.cameraUp = [0, 1, 0];
    this.cameraUp = new THREE.Vector3().fromArray(options.cameraUp);

    // The camera's initial position (only used when the viewer uses its own camera).
    if (!options.initialCameraPosition)
      options.initialCameraPosition = [0, 10, 15];
    this.initialCameraPosition = new THREE.Vector3().fromArray(
      options.initialCameraPosition
    );

    if (!options.initialCameraRotation)
        options.initialCameraRotation = [0, 0, 0];
      this.initialCameraRotation = new THREE.Vector3().fromArray(
        options.initialCameraRotation
    );
    this.backgroundColor = options.backgroundColor;

    // Iris occlusion configuration for FLAME avatars
    this.irisOcclusionConfig = options.irisOcclusionConfig || null;

    // The initial focal point of the camera and center of the camera's orbit (only used when the viewer uses its own camera).
    if (!options.initialCameraLookAt) options.initialCameraLookAt = [0, 0, 0];
    this.initialCameraLookAt = new THREE.Vector3().fromArray(
      options.initialCameraLookAt
    );

    // 'dropInMode' is a flag that is used internally to support the usage of the viewer as a Three.js scene object
    this.dropInMode = options.dropInMode || false;

    // If 'selfDrivenMode' is true, the viewer manages its own update/animation loop via requestAnimationFrame()
    if (options.selfDrivenMode === undefined || options.selfDrivenMode === null)
      options.selfDrivenMode = true;
    this.selfDrivenMode = options.selfDrivenMode && !this.dropInMode;
    this.selfDrivenUpdateFunc = this.selfDrivenUpdate.bind(this);

    // If 'useBuiltInControls' is true, the viewer will create its own instance of OrbitControls and attach to the camera
    if (options.useBuiltInControls === undefined)
      options.useBuiltInControls = true;
    this.useBuiltInControls = options.useBuiltInControls;

    // parent element of the Three.js renderer canvas
    this.rootElement = options.rootElement;
    this.canvas = options.threejsCanvas;
    // Tells the viewer to pretend the device pixel ratio is 1, which can boost performance on devices where it is larger,
    // at a small cost to visual quality
    this.ignoreDevicePixelRatio = options.ignoreDevicePixelRatio || false;
    this.devicePixelRatio = this.ignoreDevicePixelRatio
      ? 1
      : window.devicePixelRatio || 1;

    // Tells the viewer to use 16-bit floating point values when storing splat covariance data in textures, instead of 32-bit
    this.halfPrecisionCovariancesOnGPU =
      options.halfPrecisionCovariancesOnGPU || false;

    // If 'threeScene' is valid, it will be rendered by the viewer along with the splat mesh
    this.threeScene = options.threeScene;
    // Allows for usage of an external Three.js renderer
    this.renderer = options.renderer;
    // Allows for usage of an external Three.js camera
    this.camera = options.camera;

    // If 'gpuAcceleratedSort' is true, a partially GPU-accelerated approach to sorting splats will be used.
    // Currently this means pre-computing splat distances from the camera on the GPU
    this.gpuAcceleratedSort = options.gpuAcceleratedSort || false;

    // if 'integerBasedSort' is true, the integer version of splat centers as well as other values used to calculate
    // splat distances are used instead of the float version. This speeds up computation, but introduces the possibility of
    // overflow in larger scenes.
    if (
      options.integerBasedSort === undefined ||
      options.integerBasedSort === null
    ) {
      options.integerBasedSort = true;
    }
    this.integerBasedSort = options.integerBasedSort;

    // If 'sharedMemoryForWorkers' is true, a SharedArrayBuffer will be used to communicate with web workers. This method
    // is faster than copying memory to or from web workers, but comes with security implications as outlined here:
    // https://web.dev/articles/cross-origin-isolation-guide
    // If enabled, it requires specific CORS headers to be present in the response from the server that is sent when
    // loading the application. More information is available in the README.
    if (
      options.sharedMemoryForWorkers === undefined ||
      options.sharedMemoryForWorkers === null
    )
      options.sharedMemoryForWorkers = true;
    this.sharedMemoryForWorkers = false; //options.sharedMemoryForWorkers;

    // if 'dynamicScene' is true, it tells the viewer to assume scene elements are not stationary or that the number of splats in the
    // scene may change. This prevents optimizations that depend on a static scene from being made. Additionally, if 'dynamicScene' is
    // true it tells the splat mesh to not apply scene tranforms to splat data that is returned by functions like
    // SplatMesh.getSplatCenter() by default.
    this.dynamicScene = !!options.dynamicScene;

    // When true, will perform additional steps during rendering to address artifacts caused by the rendering of gaussians at a
    // substantially different resolution than that at which they were rendered during training. This will only work correctly
    // for models that were trained using a process that utilizes this compensation calculation. For more details:
    // https://github.com/nerfstudio-project/gsplat/pull/117
    // https://github.com/graphdeco-inria/gaussian-splatting/issues/294#issuecomment-1772688093
    this.antialiased = options.antialiased || false;

    // This constant is added to the projected 2D screen-space splat scales
    this.kernel2DSize =
      options.kernel2DSize === undefined ? 0.3 : options.kernel2DSize;

    // if 'renderMode' is RenderMode.Always, then the viewer will rrender the scene on every update. If it is RenderMode.OnChange,
    // it will only render when something in the scene has changed.
    this.renderMode = options.renderMode || RenderMode.Always;

    // SceneRevealMode.Default results in a nice, slow fade-in effect for progressively loaded scenes,
    // and a fast fade-in for non progressively loaded scenes.
    // SceneRevealMode.Gradual will force a slow fade-in for all scenes.
    // SceneRevealMode.Instant will force all loaded scene data to be immediately visible.
    this.sceneRevealMode = options.sceneRevealMode || SceneRevealMode.Default;

    // Hacky, experimental, non-scientific parameter for tweaking focal length related calculations. For scenes with very
    // small gaussians, small details, and small dimensions -- increasing this value can help improve visual quality.
    this.focalAdjustment = options.focalAdjustment || 1.0;

    // Specify the maximum screen-space splat size, can help deal with large splats that get too unwieldy
    this.maxScreenSpaceSplatSize = options.maxScreenSpaceSplatSize || 1024;

    // The verbosity of console logging
    this.logLevel = options.logLevel || LogLevel.None;

    // Degree of spherical harmonics to utilize in rendering splats (assuming the data is present in the splat scene).
    // Valid values are 0 - 2. Default value is 0.
    this.sphericalHarmonicsDegree = options.sphericalHarmonicsDegree || 0;

    // When true, allows for usage of extra properties and attributes during rendering for effects such as opacity adjustment.
    // Default is false for performance reasons. These properties are separate from transform properties (scale, rotation, position)
    // that are enabled by the 'dynamicScene' parameter.
    this.enableOptionalEffects = options.enableOptionalEffects || false;

    // Enable the usage of SIMD WebAssembly instructions for the splat sort
    if (
      options.enableSIMDInSort === undefined ||
      options.enableSIMDInSort === null
    )
      options.enableSIMDInSort = true;
    this.enableSIMDInSort = options.enableSIMDInSort;

    // Level to compress non KSPLAT files when loading them for direct rendering
    if (
      options.inMemoryCompressionLevel === undefined ||
      options.inMemoryCompressionLevel === null
    ) {
      options.inMemoryCompressionLevel = 0;
    }
    this.inMemoryCompressionLevel = options.inMemoryCompressionLevel;

    // Reorder splat data in memory after loading is complete to optimize cache utilization. Default is true.
    // Does not apply if splat scene is progressively loaded.
    if (
      options.optimizeSplatData === undefined ||
      options.optimizeSplatData === null
    ) {
      options.optimizeSplatData = true;
    }
    this.optimizeSplatData = options.optimizeSplatData;

    // When true, the intermediate splat data that is the result of decompressing splat bufffer(s) and is used to
    // populate the data textures will be freed. This will reduces memory usage, but if that data needs to be modified
    // it will need to be re-populated from the splat buffer(s). Default is false.
    if (
      options.freeIntermediateSplatData === undefined ||
      options.freeIntermediateSplatData === null
    ) {
      options.freeIntermediateSplatData = false;
    }
    this.freeIntermediateSplatData = options.freeIntermediateSplatData;

    // It appears that for certain iOS versions, special actions need to be taken with the
    // usage of SIMD instructions and shared memory
    if (isIOS()) {
      const semver = getIOSSemever();
      if (semver.major < 17) {
        this.enableSIMDInSort = false;
      }
      if (semver.major < 16) {
        this.sharedMemoryForWorkers = false;
      }
    }

    // Tell the viewer how to render the splats
    if (
      options.splatRenderMode === undefined ||
      options.splatRenderMode === null
    ) {
      options.splatRenderMode = SplatRenderMode.ThreeD;
    }
    this.splatRenderMode = options.splatRenderMode;

    // Customize the speed at which the scene is revealed
    this.sceneFadeInRateMultiplier = options.sceneFadeInRateMultiplier || 1.0;

    // Set the range for the depth map for the counting sort used to sort the splats
    this.splatSortDistanceMapPrecision =
      options.splatSortDistanceMapPrecision ||
      Constants$1.DefaultSplatSortDistanceMapPrecision;
    const maxPrecision = this.integerBasedSort ? 20 : 24;
    this.splatSortDistanceMapPrecision = clamp(
      this.splatSortDistanceMapPrecision,
      10,
      maxPrecision
    );

    this.onSplatMeshChangedCallback = null;
    this.createSplatMesh();

    this.controls = null;
    this.perspectiveControls = null;
    this.orthographicControls = null;

    this.orthographicCamera = null;
    this.perspectiveCamera = null;

    this.showMeshCursor = false;
    this.showControlPlane = false;
    this.showInfo = false;

    this.sceneHelper = null;

    this.sortWorker = null;
    this.sortRunning = false;
    this.splatRenderCount = 0;
    this.splatSortCount = 0;
    this.lastSplatSortCount = 0;
    this.sortWorkerIndexesToSort = null;
    this.sortWorkerSortedIndexes = null;
    this.sortWorkerPrecomputedDistances = null;
    this.sortWorkerTransforms = null;
    this.preSortMessages = [];
    this.runAfterNextSort = [];

    this.selfDrivenModeRunning = false;
    this.splatRenderReady = false;

    this.raycaster = new Raycaster();

    this.infoPanel = null;

    this.startInOrthographicMode = false;

    this.currentFPS = 0;
    this.lastSortTime = 0;
    this.consecutiveRenderFrames = 0;

    this.previousCameraTarget = new THREE.Vector3();
    this.nextCameraTarget = new THREE.Vector3();

    this.mousePosition = new THREE.Vector2();
    this.mouseDownPosition = new THREE.Vector2();
    this.mouseDownTime = null;

    this.resizeObserver = null;
    this.mouseMoveListener = null;
    this.mouseDownListener = null;
    this.mouseUpListener = null;
    this.keyDownListener = null;

    this.sortPromise = null;
    this.sortPromiseResolver = null;
    this.splatSceneDownloadControllers = [];
    this.splatSceneDownloadPromises = {};
    this.splatSceneDownloadAndBuildPromise = null;
    this.splatSceneRemovalPromise = null;

    this.loadingSpinner = new LoadingSpinner(
      null,
      this.rootElement || document.body
    );
    this.loadingSpinner.hide();
    this.loadingProgressBar = new LoadingProgressBar(
      this.rootElement || document.body
    );
    this.loadingProgressBar.hide();
    // this.infoPanel = new InfoPanel(this.rootElement || document.body)
    // this.infoPanel.hide()

    this.usingExternalCamera = this.dropInMode || this.camera ? true : false;
    this.usingExternalRenderer = this.dropInMode || this.renderer ? true : false;

    this.initialized = false;
    this.disposing = false;
    this.disposed = false;
    this.disposePromise = null;

    this.lastTime = 0;
    this.gaussianSplatCount = 0;
    this.totalFrames = 0;
    this.frame = 0;
    this. avatarMesh = null;
    this.skinModel = null;
    this.boneRoot = null;
    this.baseMesh = null;
    this.setSkinAttibutes = false;

    if (!this.dropInMode) this.init();
  }

  createSplatMesh() {
    this.splatMesh = new SplatMesh(
      this.splatRenderMode,
      this.dynamicScene,
      this.enableOptionalEffects,
      this.halfPrecisionCovariancesOnGPU,
      this.devicePixelRatio,
      this.gpuAcceleratedSort,
      this.integerBasedSort,
      this.antialiased,
      this.maxScreenSpaceSplatSize,
      this.logLevel,
      this.sphericalHarmonicsDegree,
      this.sceneFadeInRateMultiplier,
      this.kernel2DSize,
      this.irisOcclusionConfig  // Pass iris config to constructor
    );

    // Config is now set via constructor parameter
    // this.splatMesh.irisOcclusionConfig = this.irisOcclusionConfig;
    this.splatMesh.frustumCulled = false;
    if (this.onSplatMeshChangedCallback) this.onSplatMeshChangedCallback();
  }

  init() {
    if (this.initialized) return

    if (!this.rootElement) {
      if (!this.usingExternalRenderer) {
        this.rootElement = document.createElement('div');
        this.rootElement.style.width = '100%';
        this.rootElement.style.height = '100%';
        this.rootElement.style.position = 'absolute';
        document.body.appendChild(this.rootElement);
      } else {
        this.rootElement = this.renderer.domElement || document.body;
      }
    }

    this.setupCamera();
    this.setupRenderer();
    // 
    // this.setupControls()
    this.setupEventHandlers();

    this.threeScene = this.threeScene || new THREE.Scene();
    this.sceneHelper = new SceneHelper(this.threeScene);
    this.sceneHelper.setupMeshCursor();
    this.sceneHelper.setupFocusMarker();
    this.sceneHelper.setupControlPlane();

    this.loadingProgressBar.setContainer(this.rootElement);
    this.loadingSpinner.setContainer(this.rootElement);
    // this.infoPanel.setContainer(this.rootElement)

    this.initialized = true;
  }

  setupCamera() {
    if (!this.usingExternalCamera) {
      const renderDimensions = new THREE.Vector2();
      this.getRenderDimensions(renderDimensions);

      this.perspectiveCamera = new THREE.PerspectiveCamera(
        THREE_CAMERA_FOV,
        renderDimensions.x / renderDimensions.y,
        0.1,
        1000
      );
      this.orthographicCamera = new THREE.OrthographicCamera(
        renderDimensions.x / -2,
        renderDimensions.x / 2,
        renderDimensions.y / 2,
        renderDimensions.y / -2,
        0.1,
        1000
      );
      this.camera = this.startInOrthographicMode
        ? this.orthographicCamera
        : this.perspectiveCamera;
      this.camera.position.copy(this.initialCameraPosition);
      // this.camera.up.copy(this.cameraUp).normalize()
      // this.camera.lookAt(this.initialCameraLookAt)
      this.camera.rotateX(THREE.MathUtils.degToRad(this.initialCameraRotation.x));
      this.camera.rotateY(THREE.MathUtils.degToRad(this.initialCameraRotation.y));
      this.camera.rotateZ(THREE.MathUtils.degToRad(this.initialCameraRotation.z));
    }
  }

  setupRenderer() {
    if (!this.usingExternalRenderer) {
      const renderDimensions = new THREE.Vector2();
      this.getRenderDimensions(renderDimensions);

      this.renderer = new THREE.WebGLRenderer({
        antialias: false,
        precision: 'highp',
        canvas: this.canvas
      });
      this.renderer.setPixelRatio(this.devicePixelRatio);
      this.renderer.autoClear = true;
      this.renderer.setClearColor(this.backgroundColor, 1.0); // set background color according to the config

      this.renderer.setSize(renderDimensions.x, renderDimensions.y);

      this.resizeObserver = new ResizeObserver(() => {
        this.getRenderDimensions(renderDimensions);
        this.renderer.setSize(renderDimensions.x, renderDimensions.y);
        this.forceRenderNextFrame();
      });
      this.resizeObserver.observe(this.rootElement);
      this.rootElement.appendChild(this.renderer.domElement);
    }
  }

  setupControls() {
    if (this.useBuiltInControls) {
      if (!this.usingExternalCamera) {
        this.perspectiveControls = new OrbitControls_js.OrbitControls(
          this.perspectiveCamera,
          this.renderer.domElement
        );
        this.orthographicControls = new OrbitControls_js.OrbitControls(
          this.orthographicCamera,
          this.renderer.domElement
        );
      } else {
        if (this.camera.isOrthographicCamera) {
          this.orthographicControls = new OrbitControls_js.OrbitControls(
            this.camera,
            this.renderer.domElement
          );
        } else {
          this.perspectiveControls = new OrbitControls_js.OrbitControls(
            this.camera,
            this.renderer.domElement
          );
        }
      }
      for (let controls of [
        this.orthographicControls,
        this.perspectiveControls
      ]) {
        if (controls) {
          controls.listenToKeyEvents(window);
          controls.rotateSpeed = 0.5;
          controls.maxPolarAngle = Math.PI * 0.5;// + Math.PI / 24
          controls.minPolarAngle = Math.PI * 0.5;// - Math.PI / 24
          controls.minAzimuthAngle = -Math.PI / 72;
          controls.maxAzimuthAngle = Math.PI / 72;
          controls.enableDamping = true;
          controls.dampingFactor = 0.05;
          controls.target.copy(this.initialCameraLookAt);
          controls.update();
        }
      }
      this.controls = this.camera.isOrthographicCamera
        ? this.orthographicControls
        : this.perspectiveControls;
      this.controls.update();
    }
  }

  setupEventHandlers() {
    if (this.useBuiltInControls) {
      this.mouseMoveListener = this.onMouseMove.bind(this);
      this.renderer.domElement.addEventListener(
        'pointermove',
        this.mouseMoveListener,
        false
      );
      this.mouseDownListener = this.onMouseDown.bind(this);
      this.renderer.domElement.addEventListener(
        'pointerdown',
        this.mouseDownListener,
        false
      );
      this.mouseUpListener = this.onMouseUp.bind(this);
      this.renderer.domElement.addEventListener(
        'pointerup',
        this.mouseUpListener,
        false
      );
      this.keyDownListener = this.onKeyDown.bind(this);
    }
  }

  removeEventHandlers() {
    if (this.useBuiltInControls) {
      this.renderer.domElement.removeEventListener(
        'pointermove',
        this.mouseMoveListener
      );
      this.mouseMoveListener = null;
      this.renderer.domElement.removeEventListener(
        'pointerdown',
        this.mouseDownListener
      );
      this.mouseDownListener = null;
      this.renderer.domElement.removeEventListener(
        'pointerup',
        this.mouseUpListener
      );
      this.mouseUpListener = null;
      window.removeEventListener('keydown', this.keyDownListener);
      this.keyDownListener = null;
    }
  }

  setRenderMode(renderMode) {
    this.renderMode = renderMode;
  }

  setActiveSphericalHarmonicsDegrees(activeSphericalHarmonicsDegrees) {
    this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value =
      activeSphericalHarmonicsDegrees;
    this.splatMesh.material.uniformsNeedUpdate = true;
  }

  onSplatMeshChanged(callback) {
    this.onSplatMeshChangedCallback = callback;
  }

  tempForward = new THREE.Vector3()
  tempMatrixLeft = new THREE.Matrix4()
  tempMatrixRight = new THREE.Matrix4()
  onKeyDown = (e) => {
    this.tempForward.set(0, 0, -1);
    this.tempForward.transformDirection(this.camera.matrixWorld);
    this.tempMatrixLeft.makeRotationAxis(this.tempForward, Math.PI / 128);
    this.tempMatrixRight.makeRotationAxis(this.tempForward, -Math.PI / 128);
    switch (e.code) {
      case 'KeyG':
        this.focalAdjustment += 0.02;
        this.forceRenderNextFrame();
        break
      case 'KeyF':
        this.focalAdjustment -= 0.02;
        this.forceRenderNextFrame();
        break
      case 'ArrowLeft':
        this.camera.up.transformDirection(this.tempMatrixLeft);
        break
      case 'ArrowRight':
        this.camera.up.transformDirection(this.tempMatrixRight);
        break
      case 'KeyC':
        this.showMeshCursor = !this.showMeshCursor;
        break
      case 'KeyU':
        this.showControlPlane = !this.showControlPlane;
        break
      case 'KeyI':
        this.showInfo = !this.showInfo;
        if (this.showInfo) ;
        break
      case 'KeyO':
        if (!this.usingExternalCamera) {
          this.setOrthographicMode(!this.camera.isOrthographicCamera);
        }
        break
      case 'KeyP':
        if (!this.usingExternalCamera) {
          this.splatMesh.setPointCloudModeEnabled(
            !this.splatMesh.getPointCloudModeEnabled()
          );
        }
        break
      case 'Equal':
        if (!this.usingExternalCamera) {
          this.splatMesh.setSplatScale(this.splatMesh.getSplatScale() + 0.05);
        }
        break
      case 'Minus':
        if (!this.usingExternalCamera) {
          this.splatMesh.setSplatScale(
            Math.max(this.splatMesh.getSplatScale() - 0.05, 0.0)
          );
        }
        break
    }
  }

  onMouseMove(mouse) {
    this.mousePosition.set(mouse.offsetX, mouse.offsetY);
  }

  onMouseDown() {
    this.mouseDownPosition.copy(this.mousePosition);
    this.mouseDownTime = getCurrentTime();
  }

  onMouseUp = (function () {
    const clickOffset = new THREE.Vector2();

    return function (mouse) {
      clickOffset.copy(this.mousePosition).sub(this.mouseDownPosition);
      const mouseUpTime = getCurrentTime();
      const wasClick =
        mouseUpTime - this.mouseDownTime < 0.5 && clickOffset.length() < 2;
      if (wasClick) {
        this.onMouseClick(mouse);
      }
    }
  })()

  onMouseClick(mouse) {
    this.mousePosition.set(mouse.offsetX, mouse.offsetY);
    this.checkForFocalPointChange();
  }

  checkPointRenderDimensions = new THREE.Vector2()
  checkPointToNewFocalPoint = new THREE.Vector3()
  checkPointOutHits = []
  checkForFocalPointChange = () => {
    if (!this.transitioningCameraTarget) {
      this.getRenderDimensions(this.checkPointRenderDimensions);
      this.checkPointOutHits.length = 0;
      this.raycaster.setFromCameraAndScreenPosition(
        this.camera,
        this.mousePosition,
        this.checkPointRenderDimensions
      );
      this.raycaster.intersectSplatMesh(this.splatMesh, this.checkPointOutHits);
      if (this.checkPointOutHits.length > 0) {
        const hit = this.checkPointOutHits[0];
        const intersectionPoint = hit.origin;
        this.checkPointToNewFocalPoint
          .copy(intersectionPoint)
          .sub(this.camera.position);
        if (
          this.checkPointToNewFocalPoint.length() >
          MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT
        ) {
          this.previousCameraTarget.copy(this.controls.target);
          this.nextCameraTarget.copy(intersectionPoint);
          this.transitioningCameraTarget = true;
          this.transitioningCameraTargetStartTime = getCurrentTime();
        }
      }
    }
  }

  getRenderDimensions(outDimensions) {
    if (this.rootElement) {
      outDimensions.x = this.rootElement.offsetWidth;
      outDimensions.y = this.rootElement.offsetHeight;
    } else {
      this.renderer.getSize(outDimensions);
    }
  }

  setOrthographicMode(orthographicMode) {
    if (orthographicMode === this.camera.isOrthographicCamera) return
    const fromCamera = this.camera;
    const toCamera = orthographicMode
      ? this.orthographicCamera
      : this.perspectiveCamera;
    toCamera.position.copy(fromCamera.position);
    toCamera.up.copy(fromCamera.up);
    toCamera.rotation.copy(fromCamera.rotation);
    toCamera.quaternion.copy(fromCamera.quaternion);
    toCamera.matrix.copy(fromCamera.matrix);
    this.camera = toCamera;

    if (this.controls) {
      const resetControls = (controls) => {
        controls.saveState();
        controls.reset();
      };

      const fromControls = this.controls;
      const toControls = orthographicMode
        ? this.orthographicControls
        : this.perspectiveControls;

      resetControls(toControls);
      resetControls(fromControls);

      toControls.target.copy(fromControls.target);
      if (orthographicMode) {
        Viewer.setCameraZoomFromPosition(toCamera, fromCamera, fromControls);
      } else {
        Viewer.setCameraPositionFromZoom(toCamera, fromCamera, toControls);
      }
      this.controls = toControls;
      this.camera.lookAt(this.controls.target);
    }
  }

  static setCameraPositionFromZoom = (function () {
    const tempVector = new THREE.Vector3();

    return function (positionCamera, zoomedCamera, controls) {
      const toLookAtDistance = 1 / (zoomedCamera.zoom * 0.001);
      tempVector
        .copy(controls.target)
        .sub(positionCamera.position)
        .normalize()
        .multiplyScalar(toLookAtDistance)
        .negate();
      positionCamera.position.copy(controls.target).add(tempVector);
    }
  })()

  static setCameraZoomFromPosition = (function () {
    const tempVector = new THREE.Vector3();

    return function (zoomCamera, positionZamera, controls) {
      const toLookAtDistance = tempVector
        .copy(controls.target)
        .sub(positionZamera.position)
        .length();
      zoomCamera.zoom = 1 / (toLookAtDistance * 0.001);
    }
  })()

  updateSplatMesh = (function () {
    const renderDimensions = new THREE.Vector2();

    return function () {
      if (!this.splatMesh) return
      const splatCount = this.splatMesh.getSplatCount();
      if (splatCount > 0) {
        this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode);
        this.splatMesh.updateTransforms();
        this.getRenderDimensions(renderDimensions);
        const focalLengthX =
          this.camera.projectionMatrix.elements[0] *
          0.5 *
          this.devicePixelRatio *
          renderDimensions.x;
        const focalLengthY =
          this.camera.projectionMatrix.elements[5] *
          0.5 *
          this.devicePixelRatio *
          renderDimensions.y;

        const focalMultiplier = this.camera.isOrthographicCamera
          ? 1.0 / this.devicePixelRatio
          : 1.0;
        const focalAdjustment = this.focalAdjustment * focalMultiplier;
        const inverseFocalAdjustment = 1.0 / focalAdjustment;

        this.adjustForWebXRStereo(renderDimensions);
        this.splatMesh.updateUniforms(
          renderDimensions,
          focalLengthX * focalAdjustment,
          focalLengthY * focalAdjustment,
          this.camera.isOrthographicCamera,
          this.camera.zoom || 1.0,
          inverseFocalAdjustment
        );
      }
    }
  })()

  adjustForWebXRStereo(renderDimensions) {
    // TODO: Figure out a less hacky way to determine if stereo rendering is active
    if (this.camera && this.webXRActive) {
      const xrCamera = this.renderer.xr.getCamera();
      const xrCameraProj00 = xrCamera.projectionMatrix.elements[0];
      const cameraProj00 = this.camera.projectionMatrix.elements[0];
      renderDimensions.x *= cameraProj00 / xrCameraProj00;
    }
  }

  isLoadingOrUnloading() {
    return (
      Object.keys(this.splatSceneDownloadPromises).length > 0 ||
      this.splatSceneDownloadAndBuildPromise !== null ||
      this.splatSceneRemovalPromise !== null
    )
  }

  isDisposingOrDisposed() {
    return this.disposing || this.disposed
  }

  addSplatSceneDownloadController(controller) {
    this.splatSceneDownloadControllers.push(controller);
  }

  removeSplatSceneDownloadController(controller) {
    const index = this.splatSceneDownloadControllers.indexOf(controller);
    if (index > -1) {
        this.splatSceneDownloadControllers.splice(index, 1);
    }
  }

  addSplatSceneDownloadPromise(promise) {
    this.splatSceneDownloadPromises[promise.id] = promise;
  }

  removeSplatSceneDownloadPromise(promise) {
    delete this.splatSceneDownloadPromises[promise.id];
  }

  setSplatSceneDownloadAndBuildPromise(promise) {
    this.splatSceneDownloadAndBuildPromise = promise;
  }

  clearSplatSceneDownloadAndBuildPromise() {
    this.splatSceneDownloadAndBuildPromise = null;
  }

  /**
   * Add a splat scene to the viewer and display any loading UI if appropriate.
   * @param {string} path Path to splat scene to be loaded
   * @param {object} options {
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         showLoadingUI:         Display a loading spinner while the scene is loading, defaults to true
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   *
   *         onProgress:                 Function to be called as file data are received, or other processing occurs
   *
   *         headers:                    Optional HTTP headers to be sent along with splat requests
   * }
   * @return {Promise}
   */
  addSplatScene(path, options = {}) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot add splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot add splat scene after dispose() is called.')
    }

    if (
      options.progressiveLoad &&
      this.splatMesh.scenes &&
      this.splatMesh.scenes.length > 0
    ) {
      logger$2.warn(
        'addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'
      );
      options.progressiveLoad = false;
    }

    const format =
      options.format !== undefined && options.format !== null
        ? options.format
        : sceneFormatFromPath(path);
    const progressiveLoad =
      Viewer.isProgressivelyLoadable(format) && options.progressiveLoad;
    const showLoadingUI =
      options.showLoadingUI !== undefined && options.showLoadingUI !== null
        ? options.showLoadingUI
        : true;

    let loadingUITaskId = null;
    if (showLoadingUI) {
      this.loadingSpinner.removeAllTasks();
      loadingUITaskId = this.loadingSpinner.addTask('Downloading...');
    }
    const hideLoadingUI = () => {
      this.loadingProgressBar.hide();
      this.loadingSpinner.removeAllTasks();
    };

    const onProgressUIUpdate = (
      percentComplete,
      percentCompleteLabel,
      loaderStatus
    ) => {
      if (showLoadingUI) {
        if (loaderStatus === LoaderStatus.Downloading) {
          if (percentComplete == 100) {
            this.loadingSpinner.setMessageForTask(
              loadingUITaskId,
              'Download complete!'
            );
          } else {
            if (progressiveLoad) {
              this.loadingSpinner.setMessageForTask(
                loadingUITaskId,
                'Downloading splats...'
              );
            } else {
              const suffix = percentCompleteLabel
                ? `: ${percentCompleteLabel}`
                : `...`;
              this.loadingSpinner.setMessageForTask(
                loadingUITaskId,
                `Downloading${suffix}`
              );
            }
          }
        } else if (loaderStatus === LoaderStatus.Processing) {
          logger$2.debug('loaderStatus === LoaderStatus.Processing');
          this.loadingSpinner.setMessageForTask(
            loadingUITaskId,
            'Processing splats...'
          );
        }
      }
    };

    let downloadDone = false;
    let downloadedPercentage = 0;
    const splatBuffersAddedUIUpdate = (firstBuild, finalBuild) => {
      if (showLoadingUI) {
        if (
          (firstBuild && progressiveLoad) ||
          (finalBuild && !progressiveLoad)
        ) {
          this.loadingSpinner.removeTask(loadingUITaskId);
          if (!finalBuild && !downloadDone) this.loadingProgressBar.show();
        }
        if (progressiveLoad) {
          if (finalBuild) {
            downloadDone = true;
            this.loadingProgressBar.hide();
          } else {
            this.loadingProgressBar.setProgress(downloadedPercentage);
          }
        }
      }
    };

    const onProgress = (
      percentComplete,
      percentCompleteLabel,
      loaderStatus
    ) => {
      downloadedPercentage = percentComplete;
      onProgressUIUpdate(percentComplete, percentCompleteLabel, loaderStatus);
      if (options.onProgress)
        options.onProgress(percentComplete, percentCompleteLabel, loaderStatus);
    };

    const buildSection = (splatBuffer, firstBuild, finalBuild) => {
      if (!progressiveLoad && options.onProgress)
        options.onProgress(0, '0%', LoaderStatus.Processing);
      const addSplatBufferOptions = {
        rotation: options.rotation || options.orientation,
        position: options.position,
        scale: options.scale,
        splatAlphaRemovalThreshold: options.splatAlphaRemovalThreshold
      };
      return this.addSplatBuffers(
        [splatBuffer],
        [addSplatBufferOptions],
        finalBuild,
        firstBuild && showLoadingUI,
        showLoadingUI,
        progressiveLoad,
        progressiveLoad
      ).then(() => {
        if (!progressiveLoad && options.onProgress)
          options.onProgress(100, '100%', LoaderStatus.Processing);
        splatBuffersAddedUIUpdate(firstBuild, finalBuild);
      })
    };

    const loadFunc = progressiveLoad
      ? this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this)
      : this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this);
    return loadFunc(
      path,
      format,
      options.splatAlphaRemovalThreshold,
      buildSection.bind(this),
      onProgress,
      hideLoadingUI.bind(this),
      options.headers
    )
  }

  /**
   * Download a single splat scene, convert to splat buffer and then rebuild the viewer's splat mesh
   * by calling 'buildFunc' -- all before displaying the scene. Also sets/clears relevant instance synchronization objects,
   * and calls appropriate functions on success or failure.
   * @param {string} path Path to splat scene to be loaded
   * @param {SceneFormat} format Format of the splat scene file
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified value (valid range: 0 - 255)
   * @param {function} buildFunc Function to build the viewer's splat mesh with the downloaded splat buffer
   * @param {function} onProgress Function to be called as file data are received, or other processing occurs
   * @param {function} onException Function to be called when exception occurs
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @return {Promise}
   */
  downloadAndBuildSingleSplatSceneStandardLoad(
    path,
    format,
    splatAlphaRemovalThreshold,
    buildFunc,
    onProgress,
    onException,
    headers
  ) {
    const downloadPromise = this.downloadSplatSceneToSplatBuffer(
      path,
      splatAlphaRemovalThreshold,
      onProgress,
      false,
      undefined,
      format,
      headers
    );

    // Create a promise that can be resolved/rejected externally, with abort capability
    const downloadAndBuildPromise = abortablePromiseWithExtractedComponents(
      downloadPromise.abort ? downloadPromise.abort.bind(downloadPromise) : undefined
    );

    downloadPromise
      .then((splatBuffer) => {
        this.removeSplatSceneDownloadPromise(downloadPromise);
        return buildFunc(splatBuffer, true, true).then(() => {
          downloadAndBuildPromise.resolve();
          this.clearSplatSceneDownloadAndBuildPromise();
        })
      })
      .catch((e) => {
        if (onException) onException();
        this.clearSplatSceneDownloadAndBuildPromise();
        this.removeSplatSceneDownloadPromise(downloadPromise);
        const error =
          (e instanceof AbortedPromiseError || e.name === 'AbortError')
            ? e
            : new Error(`Viewer::addSplatScene -> Could not load file ${path}`);
        downloadAndBuildPromise.reject(error);
      });

    this.addSplatSceneDownloadPromise(downloadPromise);
    this.setSplatSceneDownloadAndBuildPromise(downloadAndBuildPromise.promise);

    return downloadAndBuildPromise.promise
  }

  /**
   * Download a single splat scene and convert to splat buffer in a progressive manner, allowing rendering as the file downloads.
   * As each section is downloaded, the viewer's splat mesh is rebuilt by calling 'buildFunc'
   * Also sets/clears relevant instance synchronization objects, and calls appropriate functions on success or failure.
   * @param {string} path Path to splat scene to be loaded
   * @param {SceneFormat} format Format of the splat scene file
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified value (valid range: 0 - 255)
   * @param {function} buildFunc Function to rebuild the viewer's splat mesh after a new splat buffer section is downloaded
   * @param {function} onDownloadProgress Function to be called as file data are received
   * @param {function} onDownloadException Function to be called when exception occurs at any point during the full download
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @return {Promise}
   */
  downloadAndBuildSingleSplatSceneProgressiveLoad(
    path,
    format,
    splatAlphaRemovalThreshold,
    buildFunc,
    onDownloadProgress,
    onDownloadException,
    headers
  ) {
    let progressiveLoadedSectionBuildCount = 0;
    let progressiveLoadedSectionBuilding = false;
    const queuedProgressiveLoadSectionBuilds = [];

    const checkAndBuildProgressiveLoadSections = () => {
      if (
        queuedProgressiveLoadSectionBuilds.length > 0 &&
        !progressiveLoadedSectionBuilding &&
        !this.isDisposingOrDisposed()
      ) {
        progressiveLoadedSectionBuilding = true;
        const queuedBuild = queuedProgressiveLoadSectionBuilds.shift();
        buildFunc(
          queuedBuild.splatBuffer,
          queuedBuild.firstBuild,
          queuedBuild.finalBuild
        ).then(() => {
          progressiveLoadedSectionBuilding = false;
          if (queuedBuild.firstBuild) {
            progressiveLoadFirstSectionBuildPromise.resolve();
          } else if (queuedBuild.finalBuild) {
            splatSceneDownloadAndBuildPromise.resolve();
            this.clearSplatSceneDownloadAndBuildPromise();
          }
          if (queuedProgressiveLoadSectionBuilds.length > 0) {
            delayedExecute(() => checkAndBuildProgressiveLoadSections());
          }
        });
      }
    };

    const onProgressiveLoadSectionProgress = (splatBuffer, finalBuild) => {
      if (!this.isDisposingOrDisposed()) {
        if (
          finalBuild ||
          queuedProgressiveLoadSectionBuilds.length === 0 ||
          splatBuffer.getSplatCount() >
            queuedProgressiveLoadSectionBuilds[0].splatBuffer.getSplatCount()
        ) {
          queuedProgressiveLoadSectionBuilds.push({
            splatBuffer,
            firstBuild: progressiveLoadedSectionBuildCount === 0,
            finalBuild
          });
          progressiveLoadedSectionBuildCount++;
          checkAndBuildProgressiveLoadSections();
        }
      }
    };

    const splatSceneDownloadPromise = this.downloadSplatSceneToSplatBuffer(
      path,
      splatAlphaRemovalThreshold,
      onDownloadProgress,
      true,
      onProgressiveLoadSectionProgress,
      format,
      headers
    );

    // Get abort handler from download promise
    const abortHandler = splatSceneDownloadPromise.abort 
      ? splatSceneDownloadPromise.abort.bind(splatSceneDownloadPromise) 
      : undefined;

    const progressiveLoadFirstSectionBuildPromise =
      abortablePromiseWithExtractedComponents(abortHandler);

    const splatSceneDownloadAndBuildPromise =
      abortablePromiseWithExtractedComponents(abortHandler);

    this.addSplatSceneDownloadPromise(splatSceneDownloadPromise);
    this.setSplatSceneDownloadAndBuildPromise(
      splatSceneDownloadAndBuildPromise.promise
    );

    splatSceneDownloadPromise
      .then(() => {
        this.removeSplatSceneDownloadPromise(splatSceneDownloadPromise);
      })
      .catch((e) => {
        logger$2.error('Viewer::addSplatScene actual error:', e);
        this.clearSplatSceneDownloadAndBuildPromise();
        this.removeSplatSceneDownloadPromise(splatSceneDownloadPromise);
        const error =
          (e instanceof AbortedPromiseError || e.name === 'AbortError')
            ? e
            : new Error(
                `Viewer::addSplatScene -> Could not load one or more scenes: ${e.message}`
              );
        progressiveLoadFirstSectionBuildPromise.reject(error);
        if (onDownloadException) onDownloadException(error);
      });

    return progressiveLoadFirstSectionBuildPromise.promise
  }

  /**
   * Add multiple splat scenes to the viewer and display any loading UI if appropriate.
   * @param {Array<object>} sceneOptions Array of per-scene options: {
   *
   *         path: Path to splat scene to be loaded
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   *
   *         headers:                    Optional HTTP headers to be sent along with splat requests
   *
   *         format (SceneFormat)        Optional, the format of the scene data (.ply, .ksplat, .splat). If not present, the
   *                                     file extension in 'path' will be used to determine the format (if it is present)
   * }
   * @param {boolean} showLoadingUI Display a loading spinner while the scene is loading, defaults to true
   * @param {function} onProgress Function to be called as file data are received
   * @return {Promise}
   */
  addSplatScenes(sceneOptions, showLoadingUI = true, onProgress = undefined) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot add splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot add splat scene after dispose() is called.')
    }

    const fileCount = sceneOptions.length;
    const percentComplete = [];

    let loadingUITaskId;
    if (showLoadingUI) {
      this.loadingSpinner.removeAllTasks();
      loadingUITaskId = this.loadingSpinner.addTask('Downloading...');
    }

    const onLoadProgress = (fileIndex, percent, percentLabel, loaderStatus) => {
      percentComplete[fileIndex] = percent;
      let totalPercent = 0;
      for (let i = 0; i < fileCount; i++)
        totalPercent += percentComplete[i] || 0;
      totalPercent = totalPercent / fileCount;
      percentLabel = `${totalPercent.toFixed(2)}%`;
      if (showLoadingUI) {
        if (loaderStatus === LoaderStatus.Downloading) {
          this.loadingSpinner.setMessageForTask(
            loadingUITaskId,
            totalPercent == 100
              ? `Download complete!`
              : `Downloading: ${percentLabel}`
          );
        }
      }
      if (onProgress) onProgress(totalPercent, percentLabel, loaderStatus);
    };

    const abortController = new AbortController();
    const signal = abortController.signal;
    this.addSplatSceneDownloadController(abortController);

    const downloadPromises = [];
    for (let i = 0; i < sceneOptions.length; i++) {
      const options = sceneOptions[i];
      const format =
        options.format !== undefined && options.format !== null
          ? options.format
          : sceneFormatFromPath(options.path);
      const downloadPromise = this.downloadSplatSceneToSplatBuffer(
        options.path,
        options.splatAlphaRemovalThreshold,
        onLoadProgress.bind(this, i),
        false,
        undefined,
        format,
        options.headers,
        signal
      );
      downloadPromises.push(downloadPromise);
    }

    const downloadAndBuildPromise = Promise.all(downloadPromises)
      .then((splatBuffers) => {
        if (showLoadingUI) this.loadingSpinner.removeTask(loadingUITaskId);
        if (onProgress) onProgress(0, '0%', LoaderStatus.Processing);
        return this.addSplatBuffers(
          splatBuffers,
          sceneOptions,
          true,
          showLoadingUI,
          showLoadingUI,
          false,
          false
        ).then(() => {
          if (onProgress) onProgress(100, '100%', LoaderStatus.Processing);
          this.clearSplatSceneDownloadAndBuildPromise();
        });
      })
      .catch((e) => {
        if (showLoadingUI) this.loadingSpinner.removeTask(loadingUITaskId);
        this.clearSplatSceneDownloadAndBuildPromise();
        const error =
          e.name === 'AbortError'
            ? e
            : new Error(
                `Viewer::addSplatScenes -> Could not load one or more splat scenes.`
              );
        throw error;
      })
      .finally(() => {
        this.removeSplatSceneDownloadController(abortController);
      });

    this.setSplatSceneDownloadAndBuildPromise(downloadAndBuildPromise);
    return downloadAndBuildPromise
  }

  /**
   * Download a splat scene and convert to SplatBuffer instance.
   * @param {string} path Path to splat scene to be loaded
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified
   *                                            value (valid range: 0 - 255), defaults to 1
   *
   * @param {function} onProgress Function to be called as file data are received
   * @param {boolean} progressiveBuild Construct file sections into splat buffers as they are downloaded
   * @param {function} onSectionBuilt Function to be called when new section is added to the file
   * @param {string} format File format of the scene
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @param {AbortSignal} signal Optional AbortSignal to cancel the download
   * @return {AbortablePromise}
   */
  downloadSplatSceneToSplatBuffer(
    path,
    splatAlphaRemovalThreshold = 1,
    onProgress = undefined,
    progressiveBuild = false,
    onSectionBuilt = undefined,
    format,
    headers
  ) {
    const optimizeSplatData = progressiveBuild ? false : this.optimizeSplatData;
    try {
      if (format === SceneFormat.Ply) {
        return PlyLoader.loadFromURL(
          path,
          onProgress,
          progressiveBuild,
          onSectionBuilt,
          splatAlphaRemovalThreshold,
          this.inMemoryCompressionLevel,
          optimizeSplatData,
          this.sphericalHarmonicsDegree,
          headers
        )
      }
    } catch (e) {
      if (e instanceof DirectLoadError) {
        throw new Error(
          'File type or server does not support progressive loading.'
        )
      } else {
        throw e
      }
    }

    throw new Error(
      `Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${path}`
    )
  }

  static isProgressivelyLoadable(format) {
    return format === SceneFormat.Ply
  }

  /**
   * Add one or more instances of SplatBuffer to the SplatMesh instance managed by the viewer and set up the sorting web worker.
   * This function will terminate the existing sort worker (if there is one).
   */
  addSplatBuffers = (
    splatBuffers,
    splatBufferOptions = [],
    finalBuild = true,
    showLoadingUI = true,
    showLoadingUIForSplatTreeBuild = true,
    replaceExisting = false,
    enableRenderBeforeFirstSort = false,
    preserveVisibleRegion = true
  ) => {
    if (this.isDisposingOrDisposed()) return Promise.resolve()

    let splatProcessingTaskId = null;
    const removeSplatProcessingTask = () => {
      if (splatProcessingTaskId !== null) {
        this.loadingSpinner.removeTask(splatProcessingTaskId);
        splatProcessingTaskId = null;
      }
    };

    this.splatRenderReady = false;
    return new Promise((resolve) => {
      if (showLoadingUI) {
        splatProcessingTaskId = this.loadingSpinner.addTask(
          'Processing splats...'
        );
      }
      delayedExecute(() => {
        if (this.isDisposingOrDisposed()) {
          resolve();
        } else {
          const buildResults = this.addSplatBuffersToMesh(
            splatBuffers,
            splatBufferOptions,
            finalBuild,
            showLoadingUIForSplatTreeBuild,
            replaceExisting,
            preserveVisibleRegion
          );

          const maxSplatCount = this.splatMesh.getMaxSplatCount();
          if (
            this.sortWorker &&
            this.sortWorker.maxSplatCount !== maxSplatCount
          )
            this.disposeSortWorker();
          // If we aren't calculating the splat distances from the center on the GPU, the sorting worker needs
          // splat centers and transform indexes so that it can calculate those distance values.
          if (!this.gpuAcceleratedSort) {
            this.preSortMessages.push({
              centers: buildResults.centers.buffer,
              sceneIndexes: buildResults.sceneIndexes.buffer,
              range: {
                from: buildResults.from,
                to: buildResults.to,
                count: buildResults.count
              }
            });
          }
          const sortWorkerSetupPromise =
            !this.sortWorker && maxSplatCount > 0
              ? this.setupSortWorker(this.splatMesh)
              : Promise.resolve();
          sortWorkerSetupPromise.then(() => {
            if (this.isDisposingOrDisposed()) return
            this.runSplatSort(true, true).then((sortRunning) => {
              if (!this.sortWorker || !sortRunning) {
                this.splatRenderReady = true;
                removeSplatProcessingTask();
                resolve();
              } else {
                if (enableRenderBeforeFirstSort) {
                  this.splatRenderReady = true;
                } else {
                  this.runAfterNextSort.push(() => {
                    this.splatRenderReady = true;
                  });
                }
                this.runAfterNextSort.push(() => {
                  removeSplatProcessingTask();
                  resolve();
                });
              }
            });
          });
        }
      }, true);
    })
  }

  /**
   * Add one or more instances of SplatBuffer to the SplatMesh instance managed by the viewer. By default, this function is additive;
   * all splat buffers contained by the viewer's splat mesh before calling this function will be preserved. This behavior can be
   * changed by passing 'true' for 'replaceExisting'.
   * @param {Array<SplatBuffer>} splatBuffers SplatBuffer instances
   * @param {Array<object>} splatBufferOptions Array of options objects: {
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   * }
   * @param {boolean} finalBuild Will the splat mesh be in its final state after this build?
   * @param {boolean} showLoadingUIForSplatTreeBuild Whether or not to show the loading spinner during construction of the splat tree.
   * @return {object} Object containing info about the splats that are updated
   */
  addSplatBuffersToMesh = (function () {
    let splatOptimizingTaskId;

    return function (
      splatBuffers,
      splatBufferOptions,
      finalBuild = true,
      showLoadingUIForSplatTreeBuild = false,
      replaceExisting = false,
      preserveVisibleRegion = true
    ) {
      if (this.isDisposingOrDisposed()) return
      let allSplatBuffers = [];
      let allSplatBufferOptions = [];
      if (!replaceExisting) {
        allSplatBuffers =
          this.splatMesh.scenes.map((scene) => scene.splatBuffer) || [];
        allSplatBufferOptions = this.splatMesh.sceneOptions
          ? this.splatMesh.sceneOptions.map((sceneOptions) => sceneOptions)
          : [];
      }
      allSplatBuffers.push(...splatBuffers);
      allSplatBufferOptions.push(...splatBufferOptions);
      if (this.renderer) this.splatMesh.setRenderer(this.renderer);
      const onSplatTreeIndexesUpload = (finished) => {
        if (this.isDisposingOrDisposed()) return
        const splatCount = this.splatMesh.getSplatCount();
        if (
          showLoadingUIForSplatTreeBuild &&
          splatCount >= MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER
        ) {
          if (!finished && !splatOptimizingTaskId) {
            this.loadingSpinner.setMinimized(true, true);
            splatOptimizingTaskId = this.loadingSpinner.addTask(
              'Optimizing data structures...'
            );
          }
        }
      };
      const onSplatTreeReady = (finished) => {
        if (this.isDisposingOrDisposed()) return
        if (finished && splatOptimizingTaskId) {
          this.loadingSpinner.removeTask(splatOptimizingTaskId);
          splatOptimizingTaskId = null;
        }
      };
      const buildResults = this.splatMesh.build(
        allSplatBuffers,
        allSplatBufferOptions,
        true,
        finalBuild,
        onSplatTreeIndexesUpload,
        onSplatTreeReady,
        preserveVisibleRegion
      );
      if (finalBuild && this.freeIntermediateSplatData)
        this.splatMesh.freeIntermediateSplatData();
      return buildResults
    }
  })()

  /**
   * Set up the splat sorting web worker.
   * @param {SplatMesh} splatMesh SplatMesh instance that contains the splats to be sorted
   * @return {Promise}
   */
  async setupSortWorker(splatMesh) {
    if (this.isDisposingOrDisposed()) return
    const DistancesArrayType = this.integerBasedSort
      ? Int32Array
      : Float32Array;
    const splatCount = splatMesh.getSplatCount();
    const maxSplatCount = splatMesh.getMaxSplatCount();
    this.sortWorker = await createSortWorker(
      maxSplatCount,
      this.sharedMemoryForWorkers,
      this.enableSIMDInSort,
      this.integerBasedSort,
      this.splatMesh.dynamicMode,
      this.splatSortDistanceMapPrecision
    );
    return new Promise((resolve) => {
      this.sortWorker.onmessage = (e) => {
        if (e.data.sortDone) {
          this.sortRunning = false;
          Array.from(
            { length: this.gaussianSplatCount },
            (_, i) => i
          );
          if (this.sharedMemoryForWorkers) {
            this.splatMesh.updateRenderIndexes(
              this.sortWorkerSortedIndexes,
              e.data.splatRenderCount
            );
          } else {
            const sortedIndexes = new Uint32Array(
              e.data.sortedIndexes.buffer,
              0,
              e.data.splatRenderCount
            );
            this.splatMesh.updateRenderIndexes(
              sortedIndexes,
              e.data.splatRenderCount
            );
          }

          this.lastSplatSortCount = this.splatSortCount;

          this.lastSortTime = e.data.sortTime;
          this.sortPromiseResolver();
          this.sortPromiseResolver = null;
          this.forceRenderNextFrame();
          if (this.runAfterNextSort.length > 0) {
            this.runAfterNextSort.forEach((func) => {
              func();
            });
            this.runAfterNextSort.length = 0;
          }
        } else if (e.data.sortCanceled) {
          this.sortRunning = false;
        } else if (e.data.sortSetupPhase1Complete) {
          if (this.logLevel >= LogLevel.Info)
            logger$2.info('Sorting web worker WASM setup complete.');
          if (this.sharedMemoryForWorkers) {
            this.sortWorkerSortedIndexes = new Uint32Array(
              e.data.sortedIndexesBuffer,
              e.data.sortedIndexesOffset,
              maxSplatCount
            );
            this.sortWorkerIndexesToSort = new Uint32Array(
              e.data.indexesToSortBuffer,
              e.data.indexesToSortOffset,
              maxSplatCount
            );
            this.sortWorkerPrecomputedDistances = new DistancesArrayType(
              e.data.precomputedDistancesBuffer,
              e.data.precomputedDistancesOffset,
              maxSplatCount
            );
            this.sortWorkerTransforms = new Float32Array(
              e.data.transformsBuffer,
              e.data.transformsOffset,
              Constants$1.MaxScenes * 16
            );
          } else {
            this.sortWorkerIndexesToSort = new Uint32Array(maxSplatCount);
            this.sortWorkerPrecomputedDistances = new DistancesArrayType(
              maxSplatCount
            );
            this.sortWorkerTransforms = new Float32Array(
              Constants$1.MaxScenes * 16
            );
          }
          for (let i = 0; i < splatCount; i++)
            this.sortWorkerIndexesToSort[i] = i;
          this.sortWorker.maxSplatCount = maxSplatCount;

          if (this.logLevel >= LogLevel.Info) {
            logger$2.info('Sorting web worker ready.');
            const splatDataTextures = this.splatMesh.getSplatDataTextures();
            const covariancesTextureSize = splatDataTextures.covariances.size;
            const centersColorsTextureSize = splatDataTextures.centerColors.size;
            logger$2.info(
              'Covariances texture size: ' +
                covariancesTextureSize.x +
                ' x ' +
                covariancesTextureSize.y
            );
            logger$2.info(
              'Centers/colors texture size: ' +
                centersColorsTextureSize.x +
                ' x ' +
                centersColorsTextureSize.y
            );
          }

          resolve();
        }
      };
    })
  }

  disposeSortWorker() {
    if (this.sortWorker) this.sortWorker.terminate();
    this.sortWorker = null;
    this.sortPromise = null;
    if (this.sortPromiseResolver) {
      this.sortPromiseResolver();
      this.sortPromiseResolver = null;
    }
    this.preSortMessages = [];
    this.sortRunning = false;
  }

  removeSplatScene(indexToRemove, showLoadingUI = true) {
    return this.removeSplatScenes([indexToRemove], showLoadingUI)
  }

  removeSplatScenes(indexesToRemove, showLoadingUI = true) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot remove splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot remove splat scene after dispose() is called.')
    }

    let sortPromise;

    this.splatSceneRemovalPromise = new Promise((resolve, reject) => {
      let revmovalTaskId;

      if (showLoadingUI) {
        this.loadingSpinner.removeAllTasks();
        this.loadingSpinner.show();
        revmovalTaskId = this.loadingSpinner.addTask('Removing splat scene...');
      }

      const checkAndHideLoadingUI = () => {
        if (showLoadingUI) {
          this.loadingSpinner.hide();
          this.loadingSpinner.removeTask(revmovalTaskId);
        }
      };

      const onDone = (error) => {
        checkAndHideLoadingUI();
        this.splatSceneRemovalPromise = null;
        if (!error) resolve();
        else reject(error);
      };

      const checkForEarlyExit = () => {
        if (this.isDisposingOrDisposed()) {
          onDone();
          return true
        }
        return false
      };

      sortPromise = this.sortPromise || Promise.resolve();
      sortPromise.then(() => {
        if (checkForEarlyExit()) return
        const savedSplatBuffers = [];
        const savedSceneOptions = [];
        const savedSceneTransformComponents = [];
        for (let i = 0; i < this.splatMesh.scenes.length; i++) {
          let shouldRemove = false;
          for (let indexToRemove of indexesToRemove) {
            if (indexToRemove === i) {
              shouldRemove = true;
              break
            }
          }
          if (!shouldRemove) {
            const scene = this.splatMesh.scenes[i];
            savedSplatBuffers.push(scene.splatBuffer);
            savedSceneOptions.push(this.splatMesh.sceneOptions[i]);
            savedSceneTransformComponents.push({
              position: scene.position.clone(),
              quaternion: scene.quaternion.clone(),
              scale: scene.scale.clone()
            });
          }
        }
        this.disposeSortWorker();
        this.splatMesh.dispose();
        this.sceneRevealMode = SceneRevealMode.Instant;
        this.createSplatMesh();
        this.addSplatBuffers(
          savedSplatBuffers,
          savedSceneOptions,
          true,
          false,
          true
        )
          .then(() => {
            if (checkForEarlyExit()) return
            checkAndHideLoadingUI();
            this.splatMesh.scenes.forEach((scene, index) => {
              scene.position.copy(savedSceneTransformComponents[index].position);
              scene.quaternion.copy(
                savedSceneTransformComponents[index].quaternion
              );
              scene.scale.copy(savedSceneTransformComponents[index].scale);
            });
            this.splatMesh.updateTransforms();
            this.splatRenderReady = false;

            this.runSplatSort(true).then(() => {
              if (checkForEarlyExit()) {
                this.splatRenderReady = true;
                return
              }
              sortPromise = this.sortPromise || Promise.resolve();
              sortPromise.then(() => {
                this.splatRenderReady = true;
                onDone();
              });
            });
          })
          .catch((e) => {
            onDone(e);
          });
      });
    });

    return this.splatSceneRemovalPromise
  }

  /**
   * Start self-driven mode
   */
  start() {
    if (this.selfDrivenMode) {
      this.requestFrameId = requestAnimationFrame(this.selfDrivenUpdateFunc);
      this.selfDrivenModeRunning = true;
    } else {
      throw new Error('Cannot start viewer unless it is in self driven mode.')
    }
  }

  /**
   * Stop self-driven mode
   */
  stop() {
    if (this.selfDrivenMode && this.selfDrivenModeRunning) {
      cancelAnimationFrame(this.requestFrameId);
      this.selfDrivenModeRunning = false;
    }
  }

  /**
   * Dispose of all resources held directly and indirectly by this viewer.
   */
  async dispose() {
    if (this.isDisposingOrDisposed()) return this.disposePromise

    for (let controller of this.splatSceneDownloadControllers) {
        controller.abort();
    }

    let waitPromises = [];
    if (this.sortPromise) {
      waitPromises.push(this.sortPromise);
    }

    this.disposing = true;
    this.disposePromise = Promise.all(waitPromises).finally(() => {
      this.stop();
      if (this.orthographicControls) {
        this.orthographicControls.dispose();
        this.orthographicControls = null;
      }
      if (this.perspectiveControls) {
        this.perspectiveControls.dispose();
        this.perspectiveControls = null;
      }
      this.controls = null;
      if (this.splatMesh) {
        this.splatMesh.dispose();
        this.splatMesh = null;
      }
      if (this.avatarMesh) {
        disposeAllMeshes(this.avatarMesh);
        this.avatarMesh = null;
      }
      if (this.sceneHelper) {
        this.sceneHelper.dispose();
        this.sceneHelper = null;
      }
      if (this.resizeObserver) {
        this.resizeObserver.unobserve(this.rootElement);
        this.resizeObserver = null;
      }
      this.disposeSortWorker();
      this.removeEventHandlers();

      this.loadingSpinner.removeAllTasks();
      this.loadingSpinner.setContainer(null);
      this.loadingProgressBar.hide();
      this.loadingProgressBar.setContainer(null);
      // this.infoPanel.setContainer(null)

      this.camera = null;
      this.threeScene = null;
      this.splatRenderReady = false;
      this.initialized = false;
      if (this.renderer) {
        if (!this.usingExternalRenderer) {
          this.rootElement.removeChild(this.renderer.domElement);
          this.renderer.dispose();
        }
        this.renderer = null;
      }

      if (!this.usingExternalRenderer) ;

      this.sortWorkerSortedIndexes = null;
      this.sortWorkerIndexesToSort = null;
      this.sortWorkerPrecomputedDistances = null;
      this.sortWorkerTransforms = null;
      this.disposed = true;
      this.disposing = false;
      this.disposePromise = null;
    });
    return this.disposePromise
  }
  vsyncNum = 4
  selfDrivenUpdate() {
    if (this.selfDrivenMode) {
        this.requestFrameId = requestAnimationFrame(this.selfDrivenUpdateFunc);

        // const currentTime = getCurrentTime();
        // const calcDelta = currentTime - this.lastTime;
        // if (calcDelta >= 1.0 / 30.0) {
        //     this.lastTime = currentTime;
        // } else {
        //     return
        // }
    }
    this.vsyncCount++;

    if (this.vsyncCount < this.vsyncNum) {
      return
    }

    this.vsyncCount = 0;

    this.update();
    if (this.shouldRender()) {
      //add expression

      this.render();
      this.consecutiveRenderFrames++;
    } else {
      this.consecutiveRenderFrames = 0;
    }
    this.renderNextFrame = false;
  }

  forceRenderNextFrame() {
    this.renderNextFrame = true;
  }

  shouldRender = (function () {
    let renderCount = 0;
    const lastCameraPosition = new THREE.Vector3();
    const lastCameraOrientation = new THREE.Quaternion();
    const changeEpsilon = 0.0001;

    return function () {
      if (
        !this.initialized ||
        !this.splatRenderReady ||
        this.isDisposingOrDisposed()
      )
        return false

      let shouldRender = false;
      let cameraChanged = false;
      if (this.camera) {
        const cp = this.camera.position;
        const co = this.camera.quaternion;
        cameraChanged =
          Math.abs(cp.x - lastCameraPosition.x) > changeEpsilon ||
          Math.abs(cp.y - lastCameraPosition.y) > changeEpsilon ||
          Math.abs(cp.z - lastCameraPosition.z) > changeEpsilon ||
          Math.abs(co.x - lastCameraOrientation.x) > changeEpsilon ||
          Math.abs(co.y - lastCameraOrientation.y) > changeEpsilon ||
          Math.abs(co.z - lastCameraOrientation.z) > changeEpsilon ||
          Math.abs(co.w - lastCameraOrientation.w) > changeEpsilon;
      }

      shouldRender =
        this.renderMode !== RenderMode.Never &&
        (renderCount === 0 ||
          this.splatMesh.visibleRegionChanging ||
          cameraChanged ||
          this.renderMode === RenderMode.Always ||
          this.dynamicMode === true ||
          this.renderNextFrame);

      if (this.camera) {
        lastCameraPosition.copy(this.camera.position);
        lastCameraOrientation.copy(this.camera.quaternion);
      }

      renderCount++;
      return shouldRender
    }
  })()

  render = (function () {
    return function () {
      if (
        !this.initialized ||
        !this.splatRenderReady ||
        this.isDisposingOrDisposed()
      )
        return

      const hasRenderables = (threeScene) => {
        for (let child of threeScene.children) {
          if (child.visible) return true
        }
        return false
      };

      const savedAuoClear = this.renderer.autoClear;
      if (hasRenderables(this.threeScene)) {
        this.renderer.render(this.threeScene, this.camera);
        this.renderer.autoClear = false;
      }
      this.renderer.render(this.splatMesh, this.camera);
      this.renderer.autoClear = false;
      if (this.sceneHelper.getFocusMarkerOpacity() > 0.0)
        this.renderer.render(this.sceneHelper.focusMarker, this.camera);
      if (this.showControlPlane)
        this.renderer.render(this.sceneHelper.controlPlane, this.camera);
      this.renderer.autoClear = savedAuoClear;
    }
  })()


  update(renderer, camera) {
    // this.frame++
    const fpsDiv = document.getElementById('fps');
    if (fpsDiv) {
      fpsDiv.textContent = `FPS: ${this.currentFPS}`;
    }

    if(this.frame >= this.totalFrames) 
        this.frame = 0;
    
    if (this.dropInMode) this.updateForDropInMode(renderer, camera);

    if (
      !this.initialized ||
      !this.splatRenderReady ||
      this.isDisposingOrDisposed()
    )
      return

    if (this.controls) {
      this.controls.update();
      if (this.camera.isOrthographicCamera && !this.usingExternalCamera) {
        Viewer.setCameraPositionFromZoom(
          this.camera,
          this.camera,
          this.controls
        );
      }
    }
    this.runMorphUpdate();
    this.runSplatSort(true,true);

    this.updateForRendererSizeChanges();
    this.updateSplatMesh();
    this.updateMeshCursor();
    this.updateFPS();
    this.timingSensitiveUpdates();
    // this.updateInfoPanel()
    this.updateControlPlane();
  }

  sortedIndexes
  updateForDropInMode(renderer, camera) {
    this.renderer = renderer;
    if (this.splatMesh) this.splatMesh.setRenderer(this.renderer);
    this.camera = camera;
    if (this.controls) this.controls.object = camera;
    this.init();
  }

  lastCalcTime = getCurrentTime()
  fpsFrameCount = 0
  updateFPS = () => {
    if (
      this.consecutiveRenderFrames >
      CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION
    ) {
      const currentTime = getCurrentTime();
      const calcDelta = currentTime - this.lastCalcTime;
      if (calcDelta >= 1.0) {
        this.currentFPS = this.fpsFrameCount;
        this.fpsFrameCount = 0;
        this.lastCalcTime = currentTime;
      } else {
        this.fpsFrameCount++;
      }
    } else {
      this.currentFPS = null;
    }
  }

  updateForRendererSizeChanges = (function () {
    const lastRendererSize = new THREE.Vector2();
    const currentRendererSize = new THREE.Vector2();
    let lastCameraOrthographic;

    return function () {
      if (!this.usingExternalCamera) {
        this.renderer.getSize(currentRendererSize);
        if (
          lastCameraOrthographic === undefined ||
          lastCameraOrthographic !== this.camera.isOrthographicCamera ||
          currentRendererSize.x !== lastRendererSize.x ||
          currentRendererSize.y !== lastRendererSize.y
        ) {
          if (this.camera.isOrthographicCamera) {
            this.camera.left = -currentRendererSize.x / 2.0;
            this.camera.right = currentRendererSize.x / 2.0;
            this.camera.top = currentRendererSize.y / 2.0;
            this.camera.bottom = -currentRendererSize.y / 2.0;
          } else {
            this.camera.aspect = currentRendererSize.x / currentRendererSize.y;
          }
          this.camera.updateProjectionMatrix();
          lastRendererSize.copy(currentRendererSize);
          lastCameraOrthographic = this.camera.isOrthographicCamera;
        }
      }
    }
  })()

  timingSensitiveUpdates = (function () {
    let lastUpdateTime;

    return function () {
      const currentTime = getCurrentTime();
      if (!lastUpdateTime) lastUpdateTime = currentTime;
      const timeDelta = currentTime - lastUpdateTime;

      this.updateCameraTransition(currentTime);
      this.updateFocusMarker(timeDelta);

      lastUpdateTime = currentTime;
    }
  })()

  tempCameraTarget = new THREE.Vector3()
  toPreviousTarget = new THREE.Vector3()
  toNextTarget = new THREE.Vector3()
  updateCameraTransition = (currentTime) => {
    if (this.transitioningCameraTarget) {
      this.toPreviousTarget
        .copy(this.previousCameraTarget)
        .sub(this.camera.position)
        .normalize();
      this.toNextTarget
        .copy(this.nextCameraTarget)
        .sub(this.camera.position)
        .normalize();
      const rotationAngle = Math.acos(
        this.toPreviousTarget.dot(this.toNextTarget)
      );
      const rotationSpeed = (rotationAngle / (Math.PI / 3)) * 0.65 + 0.3;
      const t =
        (rotationSpeed / rotationAngle) *
        (currentTime - this.transitioningCameraTargetStartTime);
      this.tempCameraTarget
        .copy(this.previousCameraTarget)
        .lerp(this.nextCameraTarget, t);
      this.camera.lookAt(this.tempCameraTarget);
      this.controls.target.copy(this.tempCameraTarget);
      if (t >= 1.0) {
        this.transitioningCameraTarget = false;
      }
    }
  }

  updateFocusMarker = (function () {
    const renderDimensions = new THREE.Vector2();
    let wasTransitioning = false;

    return function (timeDelta) {
      this.getRenderDimensions(renderDimensions);
      if (this.transitioningCameraTarget) {
        this.sceneHelper.setFocusMarkerVisibility(true);
        const currentFocusMarkerOpacity = Math.max(
          this.sceneHelper.getFocusMarkerOpacity(),
          0.0
        );
        let newFocusMarkerOpacity = Math.min(
          currentFocusMarkerOpacity + FOCUS_MARKER_FADE_IN_SPEED * timeDelta,
          1.0
        );
        this.sceneHelper.setFocusMarkerOpacity(newFocusMarkerOpacity);
        this.sceneHelper.updateFocusMarker(
          this.nextCameraTarget,
          this.camera,
          renderDimensions
        );
        wasTransitioning = true;
        this.forceRenderNextFrame();
      } else {
        let currentFocusMarkerOpacity;
        if (wasTransitioning) currentFocusMarkerOpacity = 1.0;
        else
          currentFocusMarkerOpacity = Math.min(
            this.sceneHelper.getFocusMarkerOpacity(),
            1.0
          );
        if (currentFocusMarkerOpacity > 0) {
          this.sceneHelper.updateFocusMarker(
            this.nextCameraTarget,
            this.camera,
            renderDimensions
          );
          let newFocusMarkerOpacity = Math.max(
            currentFocusMarkerOpacity - FOCUS_MARKER_FADE_OUT_SPEED * timeDelta,
            0.0
          );
          this.sceneHelper.setFocusMarkerOpacity(newFocusMarkerOpacity);
          if (newFocusMarkerOpacity === 0.0)
            this.sceneHelper.setFocusMarkerVisibility(false);
        }
        if (currentFocusMarkerOpacity > 0.0) this.forceRenderNextFrame();
        wasTransitioning = false;
      }
    }
  })()

  updateMeshCursor = (function () {
    const outHits = [];
    const renderDimensions = new THREE.Vector2();

    return function () {
      if (this.showMeshCursor) {
        this.forceRenderNextFrame();
        this.getRenderDimensions(renderDimensions);
        outHits.length = 0;
        this.raycaster.setFromCameraAndScreenPosition(
          this.camera,
          this.mousePosition,
          renderDimensions
        );
        this.raycaster.intersectSplatMesh(this.splatMesh, outHits);
        if (outHits.length > 0) {
          this.sceneHelper.setMeshCursorVisibility(true);
          this.sceneHelper.positionAndOrientMeshCursor(
            outHits[0].origin,
            this.camera
          );
        } else {
          this.sceneHelper.setMeshCursorVisibility(false);
        }
      } else {
        if (this.sceneHelper.getMeschCursorVisibility())
          this.forceRenderNextFrame();
        this.sceneHelper.setMeshCursorVisibility(false);
      }
    }
  })()

  updateInfoPanel = (function () {
    const renderDimensions = new THREE.Vector2();

    return function () {
      if (!this.showInfo) return
      const splatCount = this.splatMesh.getSplatCount();
      this.getRenderDimensions(renderDimensions);
      this.controls ? this.controls.target : null;
      this.showMeshCursor
        ? this.sceneHelper.meshCursor.position
        : null;
      splatCount > 0 ? (this.splatRenderCount / splatCount) * 100 : 0;
      // this.infoPanel.update(
      //   renderDimensions,
      //   this.camera.position,
      //   cameraLookAtPosition,
      //   this.camera.up,
      //   this.camera.isOrthographicCamera,
      //   meshCursorPosition,
      //   this.currentFPS || 'N/A',
      //   splatCount,
      //   this.splatRenderCount,
      //   splatRenderCountPct,
      //   this.lastSortTime,
      //   this.focalAdjustment,
      //   this.splatMesh.getSplatScale(),
      //   this.splatMesh.getPointCloudModeEnabled()
      // )
    }
  })()

  updateControlPlane() {
    if (this.showControlPlane) {
      this.sceneHelper.setControlPlaneVisibility(true);
      this.sceneHelper.positionAndOrientControlPlane(
        this.controls.target,
        this.camera.up
      );
    } else {
      this.sceneHelper.setControlPlaneVisibility(false);
    }
  }

  mvpMatrix = new THREE.Matrix4()
  cameraPositionArray = []
  lastSortViewDir = new THREE.Vector3(0, 0, -1)
  sortViewDir = new THREE.Vector3(0, 0, -1)
  lastSortViewPos = new THREE.Vector3()
  sortViewOffset = new THREE.Vector3()
  queuedSorts = []

  partialSorts = [
    {
      angleThreshold: 0.55,
      sortFractions: [0.125, 0.33333, 0.75]
    },
    {
      angleThreshold: 0.65,
      sortFractions: [0.33333, 0.66667]
    },
    {
      angleThreshold: 0.8,
      sortFractions: [0.5]
    }
  ]
  runSplatSort = (force = false, forceSortAll = false) => {
    if (!this.initialized) return Promise.resolve(false)
    if (this.sortRunning) return Promise.resolve(true)
    if (this.splatMesh.getSplatCount() <= 0) {
      this.splatRenderCount = 0;
      return Promise.resolve(false)
    }

    let angleDiff = 0;
    let positionDiff = 0;
    let needsRefreshForRotation = false;
    let needsRefreshForPosition = false;

    this.sortViewDir.set(0, 0, -1).applyQuaternion(this.camera.quaternion);
    angleDiff = this.sortViewDir.dot(this.lastSortViewDir);
    positionDiff = this.sortViewOffset
      .copy(this.camera.position)
      .sub(this.lastSortViewPos)
      .length();

    if (!force) {
      if (!this.splatMesh.dynamicMode && this.queuedSorts.length === 0) {
        if (angleDiff <= 0.99) needsRefreshForRotation = true;
        if (positionDiff >= 1.0) needsRefreshForPosition = true;
        if (!needsRefreshForRotation && !needsRefreshForPosition)
          return Promise.resolve(false)
      }
    }

    this.sortRunning = true;
    let { splatRenderCount, shouldSortAll } = this.gatherSceneNodesForSort();
    shouldSortAll = shouldSortAll || forceSortAll;
    this.splatRenderCount = splatRenderCount;

    this.mvpMatrix.copy(this.camera.matrixWorld).invert();
    const mvpCamera = this.perspectiveCamera || this.camera;
    this.mvpMatrix.premultiply(mvpCamera.projectionMatrix);
    if (!this.splatMesh.dynamicMode)
      this.mvpMatrix.multiply(this.splatMesh.matrixWorld);

    let gpuAcceleratedSortPromise = Promise.resolve(true);
    if (
      this.gpuAcceleratedSort &&
      (this.queuedSorts.length <= 1 || this.queuedSorts.length % 2 === 0)
    ) {
      gpuAcceleratedSortPromise = this.splatMesh.computeDistancesOnGPU(
        this.mvpMatrix,
        this.sortWorkerPrecomputedDistances
      );
    }

    gpuAcceleratedSortPromise.then(() => {
      if (this.queuedSorts.length === 0) {
        if (this.splatMesh.dynamicMode || shouldSortAll) {
          this.queuedSorts.push(this.splatRenderCount);
        } else {
          for (let partialSort of this.partialSorts) {
            if (angleDiff < partialSort.angleThreshold) {
              for (let sortFraction of partialSort.sortFractions) {
                this.queuedSorts.push(
                  Math.floor(this.splatRenderCount * sortFraction)
                );
              }
              break
            }
          }
          this.queuedSorts.push(this.splatRenderCount);
        }
      }
      let sortCount = Math.min(this.queuedSorts.shift(), this.splatRenderCount);
      this.splatSortCount = sortCount;

      this.cameraPositionArray[0] = this.camera.position.x;
      this.cameraPositionArray[1] = this.camera.position.y;
      this.cameraPositionArray[2] = this.camera.position.z;

      const sortMessage = {
        modelViewProj: this.mvpMatrix.elements,
        cameraPosition: this.cameraPositionArray,
        splatRenderCount: this.splatRenderCount,
        splatSortCount: sortCount,
        usePrecomputedDistances: this.gpuAcceleratedSort
      };
      if (this.splatMesh.dynamicMode) {
        this.splatMesh.fillTransformsArray(this.sortWorkerTransforms);
      }
      if (!this.sharedMemoryForWorkers) {
        sortMessage.indexesToSort = this.sortWorkerIndexesToSort;
        sortMessage.transforms = this.sortWorkerTransforms;
        if (this.gpuAcceleratedSort) {
          sortMessage.precomputedDistances = this.sortWorkerPrecomputedDistances;
        }
      }

      this.sortPromise = new Promise((resolve) => {
        this.sortPromiseResolver = resolve;
      });

      if (this.preSortMessages.length > 0) {
        this.preSortMessages.forEach((message) => {
          this.sortWorker.postMessage(message);
        });
        this.preSortMessages = [];
      }
      this.sortWorker.postMessage({
        sort: sortMessage
      });

      if (this.queuedSorts.length === 0) {
        this.lastSortViewPos.copy(this.camera.position);
        this.lastSortViewDir.copy(this.sortViewDir);
      }

      return true
    });

    return gpuAcceleratedSortPromise
  }

  /**
   * Determine which splats to render by checking which are inside or close to the view frustum
   */
  gatherSceneNodesForSort = (function () {
    const nodeRenderList = [];
    let allSplatsSortBuffer = null;
    const tempVectorYZ = new THREE.Vector3();
    const tempVectorXZ = new THREE.Vector3();
    const tempVector = new THREE.Vector3();
    const modelView = new THREE.Matrix4();
    const baseModelView = new THREE.Matrix4();
    const sceneTransform = new THREE.Matrix4();
    const renderDimensions = new THREE.Vector3();
    const forward = new THREE.Vector3(0, 0, -1);

    const tempMax = new THREE.Vector3();
    const nodeSize = (node) => {
      return tempMax.copy(node.max).sub(node.min).length()
    };

    return function (gatherAllNodes = false) {
      this.getRenderDimensions(renderDimensions);
      const cameraFocalLength =
        renderDimensions.y /
        2.0 /
        Math.tan((this.camera.fov / 2.0) * THREE.MathUtils.DEG2RAD);
      const fovXOver2 = Math.atan(renderDimensions.x / 2.0 / cameraFocalLength);
      const fovYOver2 = Math.atan(renderDimensions.y / 2.0 / cameraFocalLength);
      const cosFovXOver2 = Math.cos(fovXOver2);
      const cosFovYOver2 = Math.cos(fovYOver2);

      const splatTree = this.splatMesh.getSplatTree();

      if (splatTree) {
        baseModelView.copy(this.camera.matrixWorld).invert();
        if (!this.splatMesh.dynamicMode)
          baseModelView.multiply(this.splatMesh.matrixWorld);

        let nodeRenderCount = 0;
        let splatRenderCount = 0;

        for (let s = 0; s < splatTree.subTrees.length; s++) {
          const subTree = splatTree.subTrees[s];
          modelView.copy(baseModelView);
          if (this.splatMesh.dynamicMode) {
            this.splatMesh.getSceneTransform(s, sceneTransform);
            modelView.multiply(sceneTransform);
          }
          const nodeCount = subTree.nodesWithIndexes.length;
          for (let i = 0; i < nodeCount; i++) {
            const node = subTree.nodesWithIndexes[i];
            if (
              !node.data ||
              !node.data.indexes ||
              node.data.indexes.length === 0
            )
              continue
            tempVector.copy(node.center).applyMatrix4(modelView);

            const distanceToNode = tempVector.length();
            tempVector.normalize();

            tempVectorYZ.copy(tempVector).setX(0).normalize();
            tempVectorXZ.copy(tempVector).setY(0).normalize();

            const cameraAngleXZDot = forward.dot(tempVectorXZ);
            const cameraAngleYZDot = forward.dot(tempVectorYZ);

            const ns = nodeSize(node);
            const outOfFovY = cameraAngleYZDot < cosFovYOver2 - 0.6;
            const outOfFovX = cameraAngleXZDot < cosFovXOver2 - 0.6;
            if (
              !gatherAllNodes &&
              (outOfFovX || outOfFovY) &&
              distanceToNode > ns
            ) {
              continue
            }
            splatRenderCount += node.data.indexes.length;
            nodeRenderList[nodeRenderCount] = node;
            node.data.distanceToNode = distanceToNode;
            nodeRenderCount++;
          }
        }

        nodeRenderList.length = nodeRenderCount;
        nodeRenderList.sort((a, b) => {
          if (a.data.distanceToNode < b.data.distanceToNode) return -1
          else return 1
        });

        let currentByteOffset = splatRenderCount * Constants$1.BytesPerInt;
        for (let i = 0; i < nodeRenderCount; i++) {
          const node = nodeRenderList[i];
          const windowSizeInts = node.data.indexes.length;
          const windowSizeBytes = windowSizeInts * Constants$1.BytesPerInt;
          let destView = new Uint32Array(
            this.sortWorkerIndexesToSort.buffer,
            currentByteOffset - windowSizeBytes,
            windowSizeInts
          );
          destView.set(node.data.indexes);
          currentByteOffset -= windowSizeBytes;
        }

        return {
          splatRenderCount: splatRenderCount,
          shouldSortAll: false
        }
      } else {
        const totalSplatCount = this.splatMesh.getSplatCount();
        if (
          !allSplatsSortBuffer ||
          allSplatsSortBuffer.length !== totalSplatCount
        ) {
          allSplatsSortBuffer = new Uint32Array(totalSplatCount);
          for (let i = 0; i < totalSplatCount; i++) {
            allSplatsSortBuffer[i] = i;
          }
        }
        this.sortWorkerIndexesToSort.set(allSplatsSortBuffer);
        return {
          splatRenderCount: totalSplatCount,
          shouldSortAll: true
        }
      }
    }
  })()

  getSplatMesh() {
    return this.splatMesh
  }

  /**
   * Get a reference to a splat scene.
   * @param {number} sceneIndex The index of the scene to which the reference will be returned
   * @return {SplatScene}
   */
  getSplatScene(sceneIndex) {
    return this.splatMesh.getScene(sceneIndex)
  }

  getSceneCount() {
    return this.splatMesh.getSceneCount()
  }

  isMobile() {
    return navigator.userAgent.includes('Mobi')
  }

  updateMorphTarget(inputMesh) {
    this.avatarMesh = inputMesh;
    this.splatMesh.flameModel = inputMesh;

    this.runMorphUpdate();
    this.splatMesh.gaussianSplatCount = this.gaussianSplatCount;
  }

  runMorphUpdate() {
    this.gaussianSplatCount = this.avatarMesh.geometry.attributes.position.count;
    var morphedMesh = new Float32Array(
      this.avatarMesh.geometry.attributes.position.array
    );
    const numBones = 5;
    this.splatMesh.bonesNum = numBones;

    this.skinModel.skeleton.update();
    this.boneRoot.updateMatrixWorld(true);
    if (this.splatMesh.geometry.getAttribute('splatIndex') && this.setSkinAttibutes === false) {

      this.setSkinAttibutes = true;
      const geometry = this.splatMesh.geometry;

      const skinIndexSource = this.skinModel.geometry.attributes.skinIndex;
      const skinWeightSource = this.skinModel.geometry.attributes.skinWeight;

      const newSkinIndex = new THREE.InstancedBufferAttribute(
          new skinIndexSource.array.constructor(skinIndexSource.array),
          4,
          skinIndexSource.normalized,
          1
      );

      const newSkinWeight = new THREE.InstancedBufferAttribute(
          new skinWeightSource.array.constructor(skinWeightSource.array),
          4,
          skinWeightSource.normalized,
          1
      );
      newSkinIndex.setUsage(THREE.DynamicDrawUsage);
      newSkinWeight.setUsage(THREE.DynamicDrawUsage);
      geometry.setAttribute('skinIndex', newSkinIndex);
      geometry.setAttribute('skinWeight', newSkinWeight);
    }

    this.splatMesh.morphedMesh = morphedMesh;

    let splatNum = this.splatMesh.morphedMesh.length / 3;
    if (this.splatMesh.splatDataTextures['flameModel'] != undefined) {
      this.splatMesh.updateTetureAfterBSAndSkeleton(0, splatNum - 1, false);
    }
  }
}

/**
 * GaussianSplatRenderer
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * 
 * High-level orchestration class that:
 * - Loads ZIP assets via fetch
 * - Unpacks with JSZip
 * - Creates Viewer instance
 * - Loads FLAME/skin models
 * - Runs the render loop
 */


// Create logger for this module
const logger$1 = getLogger('GaussianSplatRenderer');

// Configuration objects - these would normally be loaded from the ZIP
const charactorConfig = {
    camPos: { x: 0, y: 1.8, z: 1 },
    camRot: { x: -10, y: 0, z: 0 },
    backgroundColor: 'ffffff'
};

const motionConfig = {
    offset: {},
    scale: {}
};

// Animation configuration - defines how animation clips are distributed to states
// The animation.glb contains clips in order: hello(2), idle(1), listen(0), speak(6), think(3)
const animationConfig = {
    hello: { size: 0, isGroup: false }, // No 'hello' animations
    speak: { size: 3, isGroup: true },   // First 3 animations are for speaking
    think: { size: 0, isGroup: false },  // 'think' will share 'speak' animations
    listen: { size: 0, isGroup: false}, // 'listen' will share 'idle' animations
    idle: { size: 1, isGroup: false },   // The next animation is for idle
    other: []
};

/**
 * GaussianSplatRenderer - Main rendering class
 */
class GaussianSplatRenderer {
    /**
     * Factory method to create a new renderer instance
     *
     * @param {HTMLElement} container - DOM container for canvas
     * @param {string} assetPath - URL to character ZIP file
     * @param {object} [options={}] - Configuration options
     * @param {Function} [options.downloadProgress] - Download progress callback (0-1)
     * @param {Function} [options.loadProgress] - Load progress callback (0-1)
     * @param {Function} [options.getChatState] - Chat state provider function
     * @param {Function} [options.getExpressionData] - Expression data provider function
     * @param {string} [options.backgroundColor] - Background color (hex string)
     * @returns {Promise<GaussianSplatRenderer>} Renderer instance
     * @throws {ValidationError} If parameters are invalid
     * @throws {NetworkError} If asset download fails
     * @throws {AssetLoadError} If asset loading/parsing fails
     * @throws {InitializationError} If renderer initialization fails
     */
    static async create(container, assetPath, options = {}) {

        try {
            // Validate required parameters
            validateDOMElement(container, 'container');
            validateUrl(assetPath);

            // Validate optional callbacks
            if (options.downloadProgress) {
                validateCallback(options.downloadProgress, 'options.downloadProgress', false);
            }
            if (options.loadProgress) {
                validateCallback(options.loadProgress, 'options.loadProgress', false);
            }
            if (options.getChatState) {
                validateCallback(options.getChatState, 'options.getChatState', false);
            }
            if (options.getExpressionData) {
                validateCallback(options.getExpressionData, 'options.getExpressionData', false);
            }
            if (options.backgroundColor) {
                validateHexColor(options.backgroundColor, 'options.backgroundColor');
            }

            logger$1.info('Initializing GaussianSplatRenderer', { assetPath });

            const characterPath = assetPath;

            // Parse character name from path
            let characterName;
            try {
                const url = new URL(characterPath, typeof window !== 'undefined' ? window.location.href : undefined);
                const pathname = url.pathname;
                const matches = pathname.match(/\/([^/]+?)\.zip/);
                characterName = matches?.[1];

                if (!characterName) {
                    throw new ValidationError(
                        'Character model name could not be extracted from path. Expected format: /path/name.zip',
                        'assetPath'
                    );
                }
            } catch (error) {
                if (error instanceof ValidationError) {
                    throw error;
                }
                throw new ValidationError(
                    `Invalid asset path format: ${error.message}`,
                    'assetPath',
                    error
                );
            }

            // Show progress
            if (typeof NProgress !== 'undefined') {
                NProgress.start();
            }

            // Download ZIP file
            logger$1.info('Downloading asset ZIP', { path: characterPath });
            let characterZipResponse;
            try {
                characterZipResponse = await fetch(characterPath);
                if (!characterZipResponse.ok) {
                    throw new NetworkError(
                        `Failed to download asset: ${characterZipResponse.statusText}`,
                        characterZipResponse.status
                    );
                }
            } catch (error) {
                if (error instanceof NetworkError) {
                    throw error;
                }
                throw new NetworkError(
                    `Network error downloading asset: ${error.message}`,
                    0,
                    error
                );
            }

            // Report download progress
            if (options.downloadProgress) {
                try {
                    options.downloadProgress(1.0);
                } catch (error) {
                    logger$1.warn('Error in downloadProgress callback', error);
                }
            }

            if (options.loadProgress) {
                try {
                    options.loadProgress(0.1);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            if (typeof NProgress !== 'undefined') {
                NProgress.done();
            }

            // Parse array buffer
            let arrayBuffer;
            try {
                arrayBuffer = await characterZipResponse.arrayBuffer();
            } catch (error) {
                throw new NetworkError(
                    `Failed to read response data: ${error.message}`,
                    0,
                    error
                );
            }

            // Load ZIP with imported JSZip
            logger$1.debug('Unpacking ZIP archive');
            let zipData;
            try {
                zipData = await JSZip.loadAsync(arrayBuffer);
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to unpack ZIP archive: ${error.message}`,
                    characterPath,
                    error
                );
            }

            // Find folder name in ZIP
            let fileName = '';
            Object.values(zipData.files).forEach(file => {
                if (file.dir) {
                    fileName = file.name?.slice(0, file.name?.length - 1); // Remove trailing '/'
                }
            });

            if (!fileName) {
                throw new AssetLoadError(
                    'No folder found in ZIP archive. Expected ZIP to contain a folder with model files.',
                    characterPath
                );
            }

            logger$1.debug('Found model folder in ZIP', { fileName });

            // Create renderer instance
            logger$1.debug('Creating GaussianSplatRenderer instance');
            const renderer = new GaussianSplatRenderer(container, zipData);

            // Setup camera position (use object pool for temp vectors)
            const cameraPos = tempVector3A.set(
                charactorConfig.camPos?.x ?? 0,
                charactorConfig.camPos?.y ?? 0,
                charactorConfig.camPos?.z ?? 1
            );

            const cameraRotation = new THREE.Vector3(
                charactorConfig.camRot?.x ?? 0,
                charactorConfig.camRot?.y ?? 0,
                charactorConfig.camRot?.z ?? 0
            );

            logger$1.debug('Camera setup', {
                position: { x: cameraPos.x, y: cameraPos.y, z: cameraPos.z },
                rotation: { x: cameraRotation.x, y: cameraRotation.y, z: cameraRotation.z }
            });

            // Background color with validation
            let backgroundColor = 0xffffff;
            try {
                if (charactorConfig.backgroundColor) {
                    const parsed = parseInt(charactorConfig.backgroundColor, 16);
                    if (!isNaN(parsed)) {
                        backgroundColor = parsed;
                    } else {
                        logger$1.warn('Invalid backgroundColor in config, using default', {
                            value: charactorConfig.backgroundColor
                        });
                    }
                }
                if (options?.backgroundColor) {
                    if (renderer.isHexColorStrict(options.backgroundColor)) {
                        backgroundColor = parseInt(options.backgroundColor, 16);
                    } else {
                        logger$1.warn('Invalid backgroundColor option, using config value', {
                            value: options.backgroundColor
                        });
                    }
                }
            } catch (error) {
                logger$1.warn('Error parsing backgroundColor, using default', error);
            }

            logger$1.debug('Background color set', { backgroundColor: backgroundColor.toString(16) });

            // Store callbacks
            renderer.getChatState = options?.getChatState;
            renderer.getExpressionData = options?.getExpressionData;

            // Load iris occlusion configuration BEFORE creating viewer (optional)
            logger$1.debug('Checking for iris_occlusion.json');
            let irisOcclusionConfig = null;
            try {
                irisOcclusionConfig = await renderer._loadJsonFromZip(fileName + '/iris_occlusion.json');
                if (irisOcclusionConfig) {
                    logger$1.info('Iris occlusion configuration loaded', {
                        rightIrisRanges: irisOcclusionConfig.right_iris?.length ?? 0,
                        leftIrisRanges: irisOcclusionConfig.left_iris?.length ?? 0
                    });
                    renderer.irisOcclusionConfig = irisOcclusionConfig;
                } else {
                    logger$1.debug('No iris_occlusion.json found, iris occlusion will be disabled');
                }
            } catch (error) {
                // Log but don't fail - iris occlusion is optional
                logger$1.warn('Failed to load iris_occlusion.json, continuing without it', { error: error.message });
                renderer.irisOcclusionConfig = null;
            }

            // Create Viewer with proper error handling
            logger$1.debug('Creating Viewer instance');
            try {
                renderer.viewer = new Viewer({
                    rootElement: container,
                    threejsCanvas: renderer._canvas,
                    cameraUp: [0, 1, 0],
                    initialCameraPosition: [cameraPos.x, cameraPos.y, cameraPos.z],
                    initialCameraRotation: [cameraRotation.x, cameraRotation.y, cameraRotation.z],
                    sphericalHarmonicsDegree: 0,
                    backgroundColor: backgroundColor,
                    sceneRevealMode: SceneRevealMode.Default,  // Default reveal mode
                    sceneFadeInRateMultiplier: 3.0,  // 3x faster fade-in
                    irisOcclusionConfig: irisOcclusionConfig  // Pass iris config to viewer
                });
            } catch (error) {
                throw new InitializationError(
                    `Failed to create Viewer instance: ${error.message}`,
                    error
                );
            }

            // Load model (non-FLAME mode only)
            logger$1.info('Loading model', { fileName });
            try {
                await renderer.loadModel(fileName, animationConfig, motionConfig);
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to load model: ${error.message}`,
                    fileName,
                    error
                );
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(0.2);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            // Load offset PLY
            logger$1.debug('Loading offset PLY file');
            let offsetFileUrl;
            try {
                offsetFileUrl = await renderer.unpackFileAsBlob(fileName + '/offset.ply');
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to load offset.ply: ${error.message}`,
                    fileName + '/offset.ply',
                    error
                );
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(0.3);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            // Add splat scene
            logger$1.debug('Adding splat scene');
            try {
                await renderer.viewer.addSplatScene(offsetFileUrl, {
                    progressiveLoad: true,
                    sharedMemoryForWorkers: false,
                    showLoadingUI: false,
                    format: SceneFormat.Ply
                });
            } catch (error) {
                throw new InitializationError(
                    `Failed to add splat scene: ${error.message}`,
                    error
                );
            }

            // Initial render
            try {
                renderer.render();
            } catch (error) {
                logger$1.error('Error in initial render', error);
                // Don't throw - render errors are non-fatal
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(1);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            logger$1.info('GaussianSplatRenderer initialized successfully');
            return renderer;

        } catch (error) {
            // Re-throw custom errors as-is
            if (error instanceof ValidationError ||
                error instanceof NetworkError ||
                error instanceof AssetLoadError ||
                error instanceof InitializationError) {
                logger$1.error('Initialization failed', { errorCode: error.code, message: error.message });
                throw error;
            }

            // Wrap unexpected errors
            logger$1.error('Unexpected error during initialization', error);
            throw new InitializationError(
                `Unexpected error initializing GaussianSplatRenderer: ${error.message}`,
                error
            );
        }
    }

    /**
     * @deprecated Use create() instead. This method is kept for backwards compatibility.
     * @param {HTMLElement} container - DOM container for canvas
     * @param {string} assetPath - URL to character ZIP file
     * @param {object} [options={}] - Configuration options
     * @returns {Promise<GaussianSplatRenderer>} Renderer instance
     */
    static async getInstance(container, assetPath, options = {}) {
        logger$1.warn('getInstance() is deprecated. Use create() instead. Each call creates a new instance.');
        return this.create(container, assetPath, options);
    }

    /**
     * Constructor - Creates a new GaussianSplatRenderer instance
     *
     * @param {HTMLElement} _container - DOM container element for the renderer
     * @param {JSZip} zipData - Loaded ZIP archive containing model data
     * @private - Use create() factory method instead
     */
    constructor(_container, zipData) {
        logger$1.debug('GaussianSplatRenderer constructor called');

        // Disposal tracking
        this._disposed = false;

        // BlobUrlManager for tracking blob URLs
        this._blobUrlManager = new BlobUrlManager();

        // ZIP file cache
        this.zipUrls = {
            urls: new Map(),
            zip: zipData
        };

        // State
        this.lastTime = 0;
        this.startTime = 0;
        this.expressionData = {};
        this.chatState = TYVoiceChatState.Idle;

        // Create instance-specific canvas
        this._canvas = null;
        if (typeof document !== 'undefined' && _container) {
            this._canvas = document.createElement('canvas');
            const { width, height } = _container.getBoundingClientRect();
            this._canvas.style.visibility = 'visible';
            this._canvas.width = width;
            this._canvas.height = height;
            _container.appendChild(this._canvas);
            logger$1.debug('Canvas setup', { width, height });
        }

        // Animation timing
        this.clock = new THREE.Clock();
        this.startTime = performance.now() / 1000.0;

        // These will be set during loading
        this.viewer = null;
        this.mixer = null;
        this.animManager = null;
        this.model = null;
        this.irisOcclusionConfig = null;
        this.motioncfg = null;
        this.getChatState = null;
        this.getExpressionData = null;

        logger$1.debug('GaussianSplatRenderer instance created');
    }

    /**
     * Assert renderer is not disposed
     * @private
     * @throws {ResourceDisposedError} If renderer has been disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new ResourceDisposedError('GaussianSplatRenderer has been disposed');
        }
    }

    /**
     * Dispose renderer and free all resources
     *
     * Properly cleans up:
     * - Model resources (mesh, animations, textures)
     * - Blob URLs to prevent memory leaks
     * - Viewer instance
     * - Canvas visibility
     *
     * @returns {void}
     */
    dispose() {
        if (this._disposed) {
            logger$1.warn('GaussianSplatRenderer.dispose() called on already disposed instance');
            return;
        }

        logger$1.info('Disposing GaussianSplatRenderer');

        // Hide and remove canvas
        if (this._canvas) {
            this._canvas.style.visibility = 'hidden';
            if (this._canvas.parentNode) {
                this._canvas.parentNode.removeChild(this._canvas);
            }
            this._canvas = null;
        }

        // Dispose model resources
        this.disposeModel();

        // Revoke all blob URLs using BlobUrlManager
        try {
            this._blobUrlManager?.dispose();
        } catch (error) {
            logger$1.error('Error disposing BlobUrlManager', error);
        }

        // Legacy blob URL cleanup (for URLs created before BlobUrlManager)
        if (this.zipUrls?.urls) {
            this.zipUrls.urls.forEach((value) => {
                try {
                    URL.revokeObjectURL(value);
                } catch (error) {
                    logger$1.warn('Error revoking blob URL', { url: value, error });
                }
            });
            this.zipUrls.urls.clear();
        }

        // Nullify references to aid GC
        this.viewer = null;
        this.mixer = null;
        this.animManager = null;
        this.model = null;
        this.motioncfg = null;
        this.getChatState = null;
        this.getExpressionData = null;
        this.zipUrls = null;

        // Mark as disposed
        this._disposed = true;

        // Clear singleton instance
        GaussianSplatRenderer.instance = undefined;

        logger$1.debug('GaussianSplatRenderer disposed successfully');
    }

    /**
     * Dispose model-specific resources
     *
     * Cleans up:
     * - Animation mixer and cached actions
     * - Animation manager
     * - Viewer instance
     *
     * @returns {void}
     */
    disposeModel() {
        logger$1.debug('Disposing model resources');

        // Dispose animation mixer
        if (this.mixer) {
            try {
                this.mixer.stopAllAction();
                if (this.viewer?.avatarMesh) {
                    this.mixer.uncacheRoot(this.viewer.avatarMesh);
                }
            } catch (error) {
                logger$1.error('Error disposing animation mixer', error);
            }
            this.mixer = null;
        }

        // Dispose animation manager
        if (this.animManager) {
            try {
                this.animManager.dispose();
            } catch (error) {
                logger$1.error('Error disposing animation manager', error);
            }
            this.animManager = null;
        }

        // Dispose viewer
        if (this.viewer) {
            try {
                this.viewer.dispose();
            } catch (error) {
                logger$1.error('Error disposing viewer', error);
            }
            this.viewer = null;
        }

        logger$1.debug('Model resources disposed');
    }

    /**
     * Get the Three.js camera
     * @returns {THREE.Camera}
     */
    getCamera() {
        return this.viewer?.camera;
    }

    /**
     * Update blendshape weights from action data
     * @param {object} actionData - Blendshape weights
     * @returns {object} Processed influence values
     */
    updateBS(actionData) {
        // Default influence values - all 52 ARKit blendshapes
        let influence = {
            browDownLeft: 0.0,
            browDownRight: 0.0,
            browInnerUp: 0.0,
            browOuterUpLeft: 0.0,
            browOuterUpRight: 0.0,
            mouthCheekPuff: 0.0,
            cheekSquintLeft: 0.0,
            cheekSquintRight: 0.0,
            eyeBlinkLeft: 0.0,
            eyeBlinkRight: 0.0,
            eyeLookDownLeft: 0.0,
            eyeLookDownRight: 0.0,
            eyeLookInLeft: 0.0,
            eyeLookInRight: 0.0,
            eyeLookOutLeft: 0.0,
            eyeLookOutRight: 0.0,
            eyeLookUpLeft: 0.0,
            eyeLookUpRight: 0.0,
            eyeSquintLeft: 0.0,
            eyeSquintRight: 0.0,
            eyeWideLeft: 0.0,
            eyeWideRight: 0.0,
            jawForward: 0.0,
            jawLeft: 0.0,
            jawOpen: 0.0,
            jawRight: 0.0,
            mouthClose: 0.0,
            mouthDimpleLeft: 0.0,
            mouthDimpleRight: 0.0,
            mouthFrownLeft: 0.0,
            mouthFrownRight: 0.0,
            mouthFunnel: 0.0,
            mouthLeft: 0.0,
            mouthLowerDownLeft: 0.0,
            mouthLowerDownRight: 0.0,
            mouthPressLeft: 0.0,
            mouthPressRight: 0.0,
            mouthPucker: 0.0,
            mouthRight: 0.0,
            mouthRollLower: 0.0,
            mouthRollUpper: 0.0,
            mouthShrugLower: 0.0,
            mouthShrugUpper: 0.0,
            mouthSmileLeft: 0.0,
            mouthSmileRight: 0.0,
            mouthStretchLeft: 0.0,
            mouthStretchRight: 0.0,
            mouthUpperUpLeft: 0.0,
            mouthUpperUpRight: 0.0,
            noseSneerLeft: 0.0,
            noseSneerRight: 0.0,
            tongueOut: 0.0
        };

        if (actionData != null) {
            influence = actionData;
        }

        return influence;
    }

    /**
     * Main render loop
     */
    render() {
        if (this.viewer && this.viewer.selfDrivenMode) {
            this.viewer.requestFrameId = requestAnimationFrame(() => this.render());

            const frameInfoInternal = 1.0 / 30.0;
            const currentTime = performance.now() / 1000;
            
            // Prevent division by zero if totalFrames is 0 or not set
            const totalFrames = this.viewer.totalFrames || 1;
            const calcDelta = (currentTime - this.startTime) % (totalFrames * frameInfoInternal);
            const frameIndex = Math.floor(calcDelta / frameInfoInternal);
            this.viewer.frame = frameIndex;

            // Update chat state
            if (this.getChatState) {
                this.chatState = this.getChatState();
                // DEBUG: Log state transitions
                if (!this._lastLoggedState || this._lastLoggedState !== this.chatState) {
                    logger$1.debug('Chat state changed', {
                        newState: this.chatState,
                        hasAnimManager: !!this.animManager
                    });
                    this._lastLoggedState = this.chatState;
                }
                this.animManager?.update(this.chatState);
            }

            // Update expression data
            if (this.getExpressionData) {
                this.expressionData = this.updateBS(this.getExpressionData());
            }

            // Animation mixer update
            if (!this.mixer || !this.animManager) {
                if (!this._warnedOnce) {
                    logger$1.warn('Mixer or animManager not initialized, skipping animation update', {
                        hasMixer: !!this.mixer,
                        hasAnimManager: !!this.animManager
                    });
                    this._warnedOnce = true;
                }
                // Still update expressions even without mixer/animManager
                this.setExpression();
            } else {
                const mixerUpdateDelta = this.clock.getDelta();
                this.mixer.update(mixerUpdateDelta);

                // Apply motion config offsets/scales
                if (this.motioncfg) {
                    for (const morphTarget in this.expressionData) {
                        const offset = this.motioncfg.offset?.[morphTarget];
                        const scale = this.motioncfg.scale?.[morphTarget];
                        if (offset !== undefined && scale !== undefined) {
                            this.expressionData[morphTarget] =
                                this.expressionData[morphTarget] * scale + offset;
                        }
                    }
                }

                this.setExpression();
            }

            // Update viewer
            this.viewer.update(this.viewer.renderer, this.viewer.camera);

            // Render if needed
            const shouldRender = this.viewer.shouldRender();
            if (this._renderLogCount <= 3) {
                logger$1.debug('shouldRender check', { shouldRender });
            }
            if (shouldRender) {
                this.viewer.render();
                this.viewer.consecutiveRenderFrames++;
            } else {
                this.viewer.consecutiveRenderFrames = 0;
            }

            this.viewer.renderNextFrame = false;
            this.viewer.selfDrivenModeRunning = true;
        } else {
            throw new Error('Cannot start viewer unless it is in self driven mode.');
        }
    }

    /**
     * Validate hex color string
     * @param {string} value - Color string to validate
     * @returns {boolean}
     */
    isHexColorStrict(value) {
        if (typeof value !== 'string') return false;
        const hexColorRegex = /^(#|0x)[0-9A-Fa-f]{6}$/i;
        return hexColorRegex.test(value);
    }

    /**
     * Apply expression data to mesh
     */
    setExpression() {
        // Update splat mesh blendshapes
        if (this.viewer?.splatMesh) {
            this.viewer.splatMesh.bsWeight = this.expressionData;
            
            // Update eye blink uniforms for smooth iris fade
            const material = this.viewer.splatMesh.material;
            if (material?.uniforms) {
                const eyeBlinkLeft = this.expressionData.eyeBlinkLeft || 0.0;
                const eyeBlinkRight = this.expressionData.eyeBlinkRight || 0.0;
                if (material.uniforms.eyeBlinkLeft) {
                    material.uniforms.eyeBlinkLeft.value = eyeBlinkLeft;
                }
                if (material.uniforms.eyeBlinkRight) {
                    material.uniforms.eyeBlinkRight.value = eyeBlinkRight;
                }
            }
        }

        // Update morph targets on avatar model
        if (this.model) {
            this.model.traverse((object) => {
                if (object.isMesh || object.isSkinnedMesh) {
                    const morphAttributes = object.geometry?.morphAttributes;
                    const hasMorphTargets = morphAttributes && Object.keys(morphAttributes).length > 0;
                    
                    if (hasMorphTargets) {
                        const morphTargetDictionary = object.morphTargetDictionary;
                        for (const morphTarget in morphTargetDictionary) {
                            const target = morphTargetDictionary[morphTarget];
                            const data = this.expressionData[morphTarget];
                            if (data !== undefined) {
                                object.morphTargetInfluences[target] = Math.max(0.0, Math.min(1.0, data));
                            }
                        }
                    }
                }
            });
        }
    }

    /**
     * Load model with animation
     * @param {string} pathName - Path within ZIP
     * @param {object} animationConfig - Animation configuration
     * @param {object} motionConfig - Motion configuration
     */
    async loadModel(pathName, animationConfig, motionConfig) {
        const [skinModel, aniclip, indexes] = await Promise.all([
            this.unpackAndLoadGlb(pathName + '/skin.glb'),
            this.unpackAndLoadGlb(pathName + '/animation.glb'),
            this.unpackAndLoadJson(pathName + '/vertex_order.json')
        ]);

        if (!this.viewer) {
            throw new Error('render viewer is not initialized');
        }

        let skinModelSkinnedMesh;
        let boneRoot;

        skinModel.traverse((object) => {
            if (object.isSkinnedMesh) {
                skinModelSkinnedMesh = object;
            }
            if (object instanceof THREE.Bone && object.name === 'hip') {
                boneRoot = object;
            }
        });

        this.viewer.sortedIndexes = indexes;

        if (skinModelSkinnedMesh) {
            this.viewer.gaussianSplatCount = skinModelSkinnedMesh.geometry.attributes.position.count;
        }

        this.viewer.avatarMesh = skinModel;
        this.viewer.skinModel = skinModelSkinnedMesh;
        this.viewer.boneRoot = boneRoot;

        // Setup animation
        this.mixer = new THREE.AnimationMixer(skinModel);
        this.animManager = new AnimationManager(this.mixer, aniclip, animationConfig);
        this.motioncfg = motionConfig;

        // Set totalFrames from animation clips or default to 1
        if (Array.isArray(aniclip) && aniclip.length > 0 && aniclip[0].duration) {
            this.viewer.totalFrames = Math.floor(aniclip[0].duration * 30); // 30 fps
        } else {
            this.viewer.totalFrames = 1;
        }
        logger$1.debug('Total frames calculated', { totalFrames: this.viewer.totalFrames });

        if (skinModelSkinnedMesh) {
            this.viewer.updateMorphTarget(skinModelSkinnedMesh);
        }

        this.viewer.threeScene.add(skinModel);
        skinModel.visible = false;

        if (skinModelSkinnedMesh) {
            skinModelSkinnedMesh.skeleton.computeBoneTexture();
        }
    }

    /**
     * Unpack file from ZIP and create a blob URL
     *
     * Uses BlobUrlManager to track blob URLs for automatic cleanup.
     * Caches URLs for repeated access to the same file.
     *
     * @param {string} path - Path to file within ZIP archive
     * @returns {Promise<string>} Blob URL to the file
     * @throws {AssetLoadError} If file cannot be unpacked
     */
    async unpackFileAsBlob(path) {
        this._assertNotDisposed();

        // Return cached URL if available
        if (this.zipUrls.urls.has(path)) {
            logger$1.debug('Returning cached blob URL', { path });
            return this.zipUrls.urls.get(path);
        }

        logger$1.debug('Unpacking file from ZIP', { path });

        // Extract file from ZIP
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            throw new AssetLoadError(
                `File not found in ZIP archive: ${path}`,
                path
            );
        }

        let modelFile;
        try {
            modelFile = await fileEntry.async('blob');
        } catch (error) {
            throw new AssetLoadError(
                `Failed to extract file from ZIP: ${error.message}`,
                path,
                error
            );
        }

        if (!modelFile) {
            throw new AssetLoadError(
                `File extracted but blob is empty: ${path}`,
                path
            );
        }

        // Create blob URL using BlobUrlManager for tracking
        const mimeType = this._getMimeType(path);
        const modelUrl = this._blobUrlManager.createBlobUrl(
            modelFile,
            mimeType,
            `zip:${path}`
        );

        // Cache for future access
        this.zipUrls.urls.set(path, modelUrl);
        logger$1.debug('Blob URL created and cached', { path, url: modelUrl.substring(0, 50) });

        return modelUrl;
    }

    /**
     * Load JSON file from ZIP archive
     *
     * @param {string} path - Path to JSON file within ZIP archive
     * @returns {Promise<Object|null>} Parsed JSON object, or null if file doesn't exist
     * @throws {ParseError} If JSON parsing fails
     * @private
     */
    async _loadJsonFromZip(path) {
        this._assertNotDisposed();

        logger$1.debug('Attempting to load JSON from ZIP', { path });

        // Check if file exists in ZIP
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            logger$1.debug('JSON file not found in ZIP, returning null', { path });
            return null;
        }

        // Extract file as text
        let jsonText;
        try {
            jsonText = await fileEntry.async('text');
        } catch (error) {
            throw new ParseError(
                `Failed to extract JSON file from ZIP: ${error.message}`,
                path,
                error
            );
        }

        // Parse JSON
        try {
            const jsonData = JSON.parse(jsonText);
            logger$1.debug('JSON file loaded successfully', { path });
            return jsonData;
        } catch (error) {
            throw new ParseError(
                `Failed to parse JSON file: ${error.message}`,
                path,
                error
            );
        }
    }

    /**
     * Unpack GLB file from ZIP and load it
     *
     * @param {string} path - Path to GLB file within ZIP archive
     * @returns {Promise<THREE.Group|THREE.AnimationClip[]>} Loaded GLTF model
     * @throws {AssetLoadError} If file cannot be unpacked or loaded
     */
    async unpackAndLoadGlb(path) {
        this._assertNotDisposed();

        // Return cached URL if available
        if (this.zipUrls.urls.has(path)) {
            logger$1.debug('Using cached GLB URL', { path });
            return this.LoadGLTF(this.zipUrls.urls.get(path));
        }

        logger$1.debug('Unpacking GLB from ZIP', { path });

        // Extract file from ZIP as ArrayBuffer
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            throw new AssetLoadError(
                `GLB file not found in ZIP archive: ${path}`,
                path
            );
        }

        let modelFile;
        try {
            modelFile = await fileEntry.async('arraybuffer');
        } catch (error) {
            throw new AssetLoadError(
                `Failed to extract GLB from ZIP: ${error.message}`,
                path,
                error
            );
        }

        if (!modelFile) {
            throw new AssetLoadError(
                `GLB extracted but ArrayBuffer is empty: ${path}`,
                path
            );
        }

        // Create blob URL using BlobUrlManager
        const blob = new Blob([modelFile], { type: 'model/gltf-binary' });
        const modelUrl = this._blobUrlManager.createBlobUrl(
            blob,
            'model/gltf-binary',
            `zip:${path}`
        );

        // Cache for future access
        this.zipUrls.urls.set(path, modelUrl);
        logger$1.debug('GLB blob URL created and cached', { path });

        return this.LoadGLTF(modelUrl);
    }

    /**
     * Get MIME type from file extension
     * @private
     * @param {string} path - File path
     * @returns {string} MIME type
     */
    _getMimeType(path) {
        const extension = path.split('.').pop()?.toLowerCase();
        const mimeTypes = {
            'ply': 'model/ply',
            'glb': 'model/gltf-binary',
            'gltf': 'model/gltf+json',
            'json': 'application/json',
            'bin': 'application/octet-stream',
            'png': 'image/png',
            'jpg': 'image/jpeg',
            'jpeg': 'image/jpeg'
        };
        return mimeTypes[extension] || 'application/octet-stream';
    }

    /**
     * Unpack and parse JSON file
     * @param {string} path - Path within ZIP
     * @returns {Promise<object>}
     */
    async unpackAndLoadJson(path) {
        const file = this.zipUrls.zip?.file(path);
        if (!file) {
            throw new Error(`File not found in ZIP: ${path}`);
        }
        const jsonFile = await file.async('string');
        if (!jsonFile) {
            throw new Error(`Failed to read file from ZIP: ${path}`);
        }
        return JSON.parse(jsonFile);
    }

    /**
     * Load GLTF file
     * @param {string} url - URL to GLTF/GLB file
     * @returns {Promise<THREE.Group|THREE.AnimationClip[]>}
     */
    async LoadGLTF(url) {
        return new Promise((resolve, reject) => {
            const loader = new GLTFLoader_js.GLTFLoader();
            loader.load(
                url,
                (gltf) => {
                    if (gltf.animations.length > 0) {
                        resolve(gltf.animations);
                    } else {
                        resolve(gltf.scene);
                    }
                },
                undefined,
                (error) => {
                    reject(error);
                }
            );
        });
    }
}

/**
 * FlameConstants
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * FLAME-specific constants for parametric head model.
 * 
 * Note: General engine constants (MaxScenes, etc.) are in enums/EngineConstants.js
 */

const Constants = {
    // FLAME model constants
    FlameBonesCount: 5,  // root, neck, jaw, leftEye, rightEye
    DefaultBlendshapeCount: 52,  // ARKit blendshapes
    
    // Texture sizes for FLAME data
    FlameModelTextureSize: { width: 4096, height: 2048 },
    BoneTextureSize: { width: 4, height: 32 },
    BoneWeightTextureSize: { width: 512, height: 512 }
};

/**
 * FLAME Utility Functions
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * Contains encoding functions and helpers for GPU texture data.
 */

/**
 * Encode float as uint32 for GPU texture storage
 * Uses Float32Array/Int32Array view trick to reinterpret float bits as integer
 */
const uintEncodedFloat = (function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(f) {
        floatView[0] = f;
        return int32View[0];
    };
})();

/**
 * Constants for texture data layout
 */
const TextureConstants = {
    CENTER_COLORS_ELEMENTS_PER_TEXEL: 4,
    CENTER_COLORS_ELEMENTS_PER_SPLAT: 4,
    COVARIANCES_ELEMENTS_PER_TEXEL_STORED: 2,
    COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED: 4,
    COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED: 2,
    COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED: 4,
    COVARIANCES_ELEMENTS_PER_SPLAT: 6,
    SCALES_ROTATIONS_ELEMENTS_PER_TEXEL: 4,
    SCENE_INDEXES_ELEMENTS_PER_TEXEL: 1,
    MAX_TEXTURE_TEXELS: 4096 * 4096
};

/**
 * FlameTextureManager
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * 
 * Manages GPU textures for FLAME parametric head model:
 * - Blendshape morph target data textures
 * - Bone matrix textures for skeleton animation
 * - LBS weight textures for skinning
 */


/**
 * Build the FLAME model texture containing blendshape positions
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh with morph targets
 * @param {THREE.ShaderMaterial} material - The splat material to update uniforms
 * @param {number} gaussianSplatCount - Number of gaussian splats
 * @returns {object} Texture data object
 */
function buildModelTexture(flameModel, material, gaussianSplatCount) {
    const flameModelTexSize = new THREE.Vector2(4096, 2048);

    const shapedMesh = flameModel.geometry.attributes.position.array;
    let shapedMeshArray = [];
    const pointNum = shapedMesh.length / 3;
    const bsLength = flameModel.geometry.morphAttributes.position.length;

    // Sort morph targets by dictionary order
    const morphTargetNames = Object.keys(flameModel.morphTargetDictionary);
    morphTargetNames.forEach((name) => {
        const originalIndex = flameModel.morphTargetDictionary[name];
        const bsMesh = flameModel.geometry.morphAttributes.position[originalIndex];
        shapedMeshArray = shapedMeshArray.concat(Array.from(bsMesh.array));
    });
    
    // Add base mesh positions
    shapedMeshArray = shapedMeshArray.concat(Array.from(shapedMesh));

    // Create texture data
    const flameModelData = new Float32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
    const flameModelDataInt = new Uint32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
    
    for (let c = 0; c < pointNum * (bsLength + 1); c++) {
        flameModelData[c * 4 + 0] = shapedMeshArray[c * 3 + 0];
        flameModelData[c * 4 + 1] = shapedMeshArray[c * 3 + 1];
        flameModelData[c * 4 + 2] = shapedMeshArray[c * 3 + 2];

        flameModelDataInt[c * 4 + 0] = uintEncodedFloat(flameModelData[c * 4 + 0]);
        flameModelDataInt[c * 4 + 1] = uintEncodedFloat(flameModelData[c * 4 + 1]);
        flameModelDataInt[c * 4 + 2] = uintEncodedFloat(flameModelData[c * 4 + 2]);
    }

    const flameModelTex = new THREE.DataTexture(
        flameModelDataInt,
        flameModelTexSize.x,
        flameModelTexSize.y,
        THREE.RGBAIntegerFormat,
        THREE.UnsignedIntType
    );
    flameModelTex.internalFormat = 'RGBA32UI';
    flameModelTex.needsUpdate = true;

    // Update material uniforms
    material.uniforms.flameModelTexture.value = flameModelTex;
    material.uniforms.flameModelTextureSize.value.copy(flameModelTexSize);
    material.uniforms.gaussianSplatCount.value = gaussianSplatCount;
    material.uniformsNeedUpdate = true;

    return {
        data: flameModelDataInt,
        texture: flameModelTex,
        size: flameModelTexSize,
        baseData: { flameModelPos: flameModelData }
    };
}

/**
 * Build bone matrix texture for skeleton animation
 * @param {Float32Array} bonesMatrix - Flattened bone matrices
 * @param {number} bonesNum - Number of bones
 * @param {object} bsWeight - Blendshape weights object
 * @param {object} morphTargetDictionary - Maps blendshape names to indices
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {THREE.ShaderMaterial} material - The splat material
 * @param {boolean} useFlameModel - Use FLAME mode
 * @returns {object} Texture data object
 */
function buildBoneMatrixTexture(
    bonesMatrix,
    bonesNum,
    bsWeight,
    morphTargetDictionary,
    flameModel,
    material,
    useFlameModel
) {
    if (!bsWeight) return null;

    // bonesNum + expressionBSNum / 4 = 30, so texture height is 32
    const boneTextureSize = new THREE.Vector2(4, 32);
    const boneMatrixTextureData = new Float32Array(bonesMatrix);
    const boneMatrixTextureDataInt = new Uint32Array(boneTextureSize.x * boneTextureSize.y * 4);

    if (useFlameModel) {
        // Encode bone matrices
        for (let c = 0; c < bonesNum * 16; c++) {
            boneMatrixTextureDataInt[c] = uintEncodedFloat(boneMatrixTextureData[c]);
        }
        
        // Set skeleton uniforms
        if (flameModel && flameModel.skeleton) {
            material.uniforms.boneTexture0.value = flameModel.skeleton.boneTexture;
            material.uniforms.bindMatrix.value = flameModel.bindMatrix;
            material.uniforms.bindMatrixInverse.value = flameModel.bindMatrixInverse;
        }
    }

    // Encode blendshape weights
    for (const key in bsWeight) {
        if (Object.hasOwn(bsWeight, key)) {
            const value = bsWeight[key];
            const idx = morphTargetDictionary[key];
            boneMatrixTextureDataInt[idx + bonesNum * 16] = uintEncodedFloat(value);
        }
    }

    const boneMatrixTex = new THREE.DataTexture(
        boneMatrixTextureDataInt,
        boneTextureSize.x,
        boneTextureSize.y,
        THREE.RGBAIntegerFormat,
        THREE.UnsignedIntType
    );
    boneMatrixTex.internalFormat = 'RGBA32UI';
    boneMatrixTex.needsUpdate = true;

    material.uniforms.boneTexture.value = boneMatrixTex;
    material.uniforms.boneTextureSize.value.copy(boneTextureSize);
    material.uniformsNeedUpdate = true;

    return {
        data: boneMatrixTextureDataInt,
        texture: boneMatrixTex,
        size: boneTextureSize,
        baseData: { boneMatrix: boneMatrixTextureDataInt }
    };
}

/**
 * Update bone matrix texture with new animation data
 * @param {object} splatDataTextures - Texture data storage
 * @param {Float32Array} bonesMatrix - Updated bone matrices
 * @param {number} bonesNum - Number of bones
 * @param {object} bsWeight - Updated blendshape weights
 * @param {object} morphTargetDictionary - Blendshape name to index map
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {THREE.ShaderMaterial} material - The splat material
 * @param {boolean} updateFlameBoneMatrix - Whether to update bone matrices
 */
function updateBoneMatrixTexture(
    splatDataTextures,
    bonesMatrix,
    bonesNum,
    bsWeight,
    morphTargetDictionary,
    flameModel,
    material,
    updateFlameBoneMatrix = false
) {
    if (!bsWeight || !morphTargetDictionary) return;

    if (updateFlameBoneMatrix) {
        const boneMatrixTextureData = new Float32Array(bonesMatrix);
        for (let c = 0; c < bonesNum * 16; c++) {
            splatDataTextures.baseData['boneMatrix'][c] = uintEncodedFloat(boneMatrixTextureData[c]);
        }
    }

    // Update blendshape weights
    for (const key in bsWeight) {
        if (Object.hasOwn(bsWeight, key)) {
            const value = bsWeight[key];
            const idx = morphTargetDictionary[key];
            splatDataTextures.baseData['boneMatrix'][idx + bonesNum * 16] = uintEncodedFloat(value);
        }
    }

    // Update texture data
    splatDataTextures['boneMatrix']['texture'].data = splatDataTextures.baseData['boneMatrix'];
    splatDataTextures['boneMatrix']['texture'].needsUpdate = true;
    material.uniforms.boneTexture.value = splatDataTextures['boneMatrix']['texture'];

    // Update skeleton uniforms
    if (flameModel.skeleton) {
        material.uniforms.boneTexture0.value = flameModel.skeleton.boneTexture;
        material.uniforms.bindMatrix.value = flameModel.bindMatrix;
        material.uniforms.bindMatrixInverse.value = flameModel.bindMatrixInverse;
    }

    material.uniformsNeedUpdate = true;
}

/**
 * Build LBS weight texture for skin deformation
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {Array} bonesWeight - Per-vertex bone weights array
 * @param {THREE.ShaderMaterial} material - The splat material
 * @returns {object} Texture data object
 */
function buildBoneWeightTexture(flameModel, bonesWeight, material) {
    const shapedMesh = flameModel.geometry.attributes.position.array;
    const pointNum = shapedMesh.length / 3;
    
    const boneWeightTextureSize = new THREE.Vector2(512, 512);
    const boneWeightTextureData = new Float32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
    const boneWeightTextureDataInt = new Uint32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);

    for (let i = 0; i < pointNum; i++) {
        // Store 5 bone weights per vertex (2 texels)
        boneWeightTextureData[i * 8 + 0] = bonesWeight[i][0];
        boneWeightTextureData[i * 8 + 1] = bonesWeight[i][1];
        boneWeightTextureData[i * 8 + 2] = bonesWeight[i][2];
        boneWeightTextureData[i * 8 + 3] = bonesWeight[i][3];
        boneWeightTextureData[i * 8 + 4] = bonesWeight[i][4];

        boneWeightTextureDataInt[i * 8 + 0] = uintEncodedFloat(bonesWeight[i][0]);
        boneWeightTextureDataInt[i * 8 + 1] = uintEncodedFloat(bonesWeight[i][1]);
        boneWeightTextureDataInt[i * 8 + 2] = uintEncodedFloat(bonesWeight[i][2]);
        boneWeightTextureDataInt[i * 8 + 3] = uintEncodedFloat(bonesWeight[i][3]);
        boneWeightTextureDataInt[i * 8 + 4] = uintEncodedFloat(bonesWeight[i][4]);
    }

    const boneWeightTex = new THREE.DataTexture(
        boneWeightTextureDataInt,
        boneWeightTextureSize.x,
        boneWeightTextureSize.y,
        THREE.RGBAIntegerFormat,
        THREE.UnsignedIntType
    );
    boneWeightTex.internalFormat = 'RGBA32UI';
    boneWeightTex.needsUpdate = true;

    material.uniforms.boneWeightTexture.value = boneWeightTex;
    material.uniforms.boneWeightTextureSize.value.copy(boneWeightTextureSize);
    material.uniformsNeedUpdate = true;

    return {
        data: boneWeightTextureDataInt,
        texture: boneWeightTex,
        size: boneWeightTextureSize,
        baseData: { boneWeight: boneWeightTextureDataInt }
    };
}

/**
 * Get updated bone matrices from skeleton
 * @param {THREE.Skeleton} skeleton - The skeleton to read matrices from
 * @param {number} boneNum - Number of bones
 * @returns {Float32Array} Flattened bone matrices
 */
function getUpdatedBoneMatrices(skeleton, boneNum) {
    const updatedBoneMatrices = [];
    
    for (let j = 0; j < boneNum; j++) {
        const boneMatrix = skeleton.bones[j].matrixWorld.clone()
            .multiply(skeleton.boneInverses[j].clone());

        const elements = boneMatrix.elements;
        for (let i = 0; i < elements.length; i++) {
            updatedBoneMatrices.push(elements[i]);
        }
    }
    
    return new Float32Array(updatedBoneMatrices);
}

const FlameTextureManager = {
    buildModelTexture,
    buildBoneMatrixTexture,
    updateBoneMatrixTexture,
    buildBoneWeightTexture,
    getUpdatedBoneMatrices
};

/**
 * FlameAnimator - FLAME Parametric Head Model Animation Controller
 *
 * Derived from gaussian-splat-renderer-for-lam
 *
 * Manages FLAME (Faces Learned with an Articulated Model and Expressions) model animation:
 * - Skeletal bone rotation from FLAME parameters
 * - Blendshape weight updates for facial expressions
 * - Skeleton-mesh synchronization for gaussian splat rendering
 * - Linear blend skinning (LBS) with bone weights
 *
 * FLAME uses 5 bones: root, neck, jaw, left eye, right eye
 */


const logger = getLogger('FlameAnimator');

/**
 * FlameAnimator - Manages FLAME parametric head model animation
 *
 * Provides skeletal animation, blendshape morphing, and mesh deformation
 * for FLAME-based avatar heads with gaussian splatting rendering.
 */
class FlameAnimator {
    /**
     * Create a FlameAnimator instance
     *
     * @constructor
     */
    constructor() {
        /** @type {THREE.Skeleton|null} FLAME skeleton with 5 bones */
        this.skeleton = null;

        /** @type {THREE.Bone[]|null} Array of skeleton bones */
        this.bones = null;

        /** @type {Object|null} FLAME animation parameters (rotation, expr, neck_pose, jaw_pose, eyes_pose) */
        this.flameParams = null;

        /** @type {Array|null} Linear blend skinning weights */
        this.lbsWeight = null;

        /** @type {number} Current animation frame */
        this.frame = 0;

        /** @type {number} Total frames in animation sequence */
        this.totalFrames = 0;

        /** @type {boolean} Whether FLAME mode is enabled */
        this.useFlame = true;

        /** @type {THREE.SkinnedMesh|null} The FLAME avatar mesh */
        this.avatarMesh = null;

        /** @type {number} Number of gaussian splats in the mesh */
        this.gaussianSplatCount = 0;

        /** @type {boolean} Whether animator has been disposed */
        this._disposed = false;

        logger.debug('FlameAnimator instance created');
    }

    /**
     * Assert animator is not disposed
     * @private
     * @throws {ResourceDisposedError} If animator has been disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new ResourceDisposedError('FlameAnimator has been disposed');
        }
    }

    /**
     * Initialize animator with FLAME parameters and skeleton data
     *
     * Sets up the FLAME animation system with parameters for bone rotations,
     * expressions, and linear blend skinning weights.
     *
     * @param {Object} flameParams - FLAME animation parameters
     * @param {Array} flameParams.rotation - Root bone rotations per frame (axis-angle)
     * @param {Array} flameParams.expr - Expression blendshape weights per frame
     * @param {Array} flameParams.neck_pose - Neck bone rotations per frame
     * @param {Array} flameParams.jaw_pose - Jaw bone rotations per frame
     * @param {Array} flameParams.eyes_pose - Eye bone rotations per frame (6 values: left 3, right 3)
     * @param {Object|Array} boneTree - Skeleton hierarchy definition
     * @param {Array} lbsWeight - Linear blend skinning weights for each vertex
     * @param {THREE.SkinnedMesh} avatarMesh - The FLAME avatar mesh
     * @throws {ValidationError} If required parameters are missing or invalid
     * @returns {void}
     */
    initialize(flameParams, boneTree, lbsWeight, avatarMesh) {
        this._assertNotDisposed();

        // Validate required parameters
        try {
            validateRequiredProperties(flameParams, ['rotation', 'expr', 'neck_pose', 'jaw_pose', 'eyes_pose'], 'flameParams');
        } catch (error) {
            logger.error('Invalid flameParams', error);
            throw error;
        }

        if (!avatarMesh || !avatarMesh.geometry || !avatarMesh.geometry.attributes || !avatarMesh.geometry.attributes.position) {
            const error = new ValidationError(
                'avatarMesh must have geometry with position attribute',
                'avatarMesh'
            );
            logger.error('Invalid avatarMesh', error);
            throw error;
        }

        logger.info('Initializing FlameAnimator', {
            frameCount: flameParams.rotation?.length,
            splatCount: avatarMesh.geometry.attributes.position.count
        });

        this.flameParams = flameParams;
        this.lbsWeight = lbsWeight;
        this.avatarMesh = avatarMesh;

        // Calculate total frames from rotation data
        if (flameParams.rotation && Array.isArray(flameParams.rotation)) {
            this.totalFrames = flameParams.rotation.length;
            logger.debug('Animation has frames', { totalFrames: this.totalFrames });
        } else {
            logger.warn('No rotation data found, totalFrames set to 0');
            this.totalFrames = 0;
        }

        this.gaussianSplatCount = avatarMesh.geometry.attributes.position.count;

        // Build skeleton from bone tree
        try {
            this.buildSkeleton(boneTree);
            logger.debug('Skeleton built successfully', { boneCount: this.bones?.length });
        } catch (error) {
            logger.error('Failed to build skeleton', error);
            throw new ValidationError(
                `Failed to build skeleton: ${error.message}`,
                'boneTree',
                error
            );
        }
    }

    /**
     * Build skeleton from bone tree data
     * @param {object} boneTree - Skeleton hierarchy definition
     */
    buildSkeleton(boneTree) {
        if (!boneTree) return;

        this.bones = [];
        const boneInverses = [];

        // Create bones from tree structure
        const createBone = (boneData, parentBone = null) => {
            const bone = new THREE.Bone();
            bone.name = boneData.name || `bone_${this.bones.length}`;

            if (boneData.position) {
                bone.position.fromArray(boneData.position);
            }
            if (boneData.rotation) {
                bone.rotation.fromArray(boneData.rotation);
            }
            if (boneData.scale) {
                bone.scale.fromArray(boneData.scale);
            }

            if (parentBone) {
                parentBone.add(bone);
            }

            this.bones.push(bone);

            // Create inverse bind matrix
            const inverseMatrix = new THREE.Matrix4();
            if (boneData.inverseBindMatrix) {
                inverseMatrix.fromArray(boneData.inverseBindMatrix);
            } else {
                bone.updateMatrixWorld(true);
                inverseMatrix.copy(bone.matrixWorld).invert();
            }
            boneInverses.push(inverseMatrix);

            // Process children
            if (boneData.children) {
                boneData.children.forEach(child => createBone(child, bone));
            }
        };

        // If boneTree is array, create bones directly
        if (Array.isArray(boneTree)) {
            boneTree.forEach((boneData, index) => {
                const bone = new THREE.Bone();
                bone.name = boneData.name || `bone_${index}`;
                
                if (boneData.position) {
                    bone.position.fromArray(boneData.position);
                }
                
                this.bones.push(bone);
                
                const inverseMatrix = new THREE.Matrix4();
                if (boneData.inverseBindMatrix) {
                    inverseMatrix.fromArray(boneData.inverseBindMatrix);
                }
                boneInverses.push(inverseMatrix);
            });

            // Set up hierarchy (FLAME: root -> neck -> jaw, eyes)
            if (this.bones.length >= 5) {
                this.bones[0].add(this.bones[1]); // root -> neck
                this.bones[1].add(this.bones[2]); // neck -> jaw
                this.bones[1].add(this.bones[3]); // neck -> leftEye
                this.bones[1].add(this.bones[4]); // neck -> rightEye
            }
        } else if (boneTree.root) {
            createBone(boneTree.root);
        }

        // Create skeleton
        this.skeleton = new THREE.Skeleton(this.bones, boneInverses);
    }

    /**
     * Set bone rotation from axis-angle or quaternion representation
     *
     * Converts rotation data to quaternion and applies it to the bone.
     * Uses object pooling to avoid allocations in animation loop.
     *
     * @param {THREE.Bone} bone - Target bone to rotate
     * @param {Array<number>} angles - Rotation values (3 for axis-angle, 4 for quaternion)
     * @param {boolean} [isQuat=false] - Whether angles are quaternion [x, y, z, w]
     * @throws {ValidationError} If bone or angles are invalid
     * @returns {void}
     */
    setBoneRotation(bone, angles, isQuat = false) {
        this._assertNotDisposed();

        if (!bone || !angles || !Array.isArray(angles)) {
            throw new ValidationError(
                'bone and angles array are required',
                'bone/angles'
            );
        }

        // Use object pooling for temp objects
        const quaternion = quaternionPool.acquire();

        try {
            if (isQuat) {
                // Direct quaternion (XYZW format)
                if (angles.length < 4) {
                    throw new ValidationError('Quaternion requires 4 values', 'angles');
                }
                quaternion.set(angles[0], angles[1], angles[2], angles[3]);
            } else {
                // Axis-angle representation: [x, y, z] where magnitude is angle
                if (angles.length < 3) {
                    throw new ValidationError('Axis-angle requires 3 values', 'angles');
                }

                const axis = vector3Pool.acquire();
                try {
                    axis.set(angles[0], angles[1], angles[2]);
                    const angleInRadians = axis.length();
                    axis.normalize();
                    quaternion.setFromAxisAngle(axis, angleInRadians);
                } finally {
                    vector3Pool.release(axis);
                }
            }

            // Apply rotation to bone
            bone.quaternion.copy(quaternion);
            bone.updateMatrixWorld(true);
        } finally {
            quaternionPool.release(quaternion);
        }
    }

    /**
     * Update FLAME bones from current frame parameters
     *
     * Applies bone rotations for all 5 FLAME bones (root, neck, jaw, left eye, right eye)
     * from the current animation frame. Updates skeleton matrices and returns data
     * needed for mesh deformation.
     *
     * @returns {Object} Bone and blendshape data for rendering
     * @returns {Array} return.bsWeight - Expression blendshape weights for current frame
     * @returns {Float32Array} return.bonesMatrix - Updated bone transformation matrices
     * @returns {number} return.bonesNum - Number of bones (always 5 for FLAME)
     * @returns {Array} return.bonesWeight - LBS weights for vertices
     */
    updateFlameBones() {
        this._assertNotDisposed();

        if (!this.flameParams || !this.skeleton) {
            logger.warn('Cannot update bones: flameParams or skeleton not initialized');
            return {};
        }

        const frame = this.frame;

        // Get blendshape weights for this frame
        const bsWeight = this.flameParams['expr'][frame];

        // Apply bone rotations for current frame
        try {
            // Root bone rotation (global head orientation)
            const rootAngle = this.flameParams['rotation'][frame];
            this.setBoneRotation(this.skeleton.bones[0], rootAngle);

            // Neck rotation
            const neckAngle = this.flameParams['neck_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[1], neckAngle);

            // Jaw rotation
            const jawAngle = this.flameParams['jaw_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[2], jawAngle);

            // Eyes rotation (6 values: left eye xyz, right eye xyz)
            const eyesAngle = this.flameParams['eyes_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[3], eyesAngle.slice(0, 3));          // Left eye
            this.setBoneRotation(this.skeleton.bones[4], eyesAngle.slice(3, 6));          // Right eye
        } catch (error) {
            logger.error('Error setting bone rotations', { frame, error });
            throw error;
        }

        // Update skeleton matrices after all rotations are set
        this.skeleton.update();

        // Get updated bone matrices for shader
        const numBones = 5;
        const bonesMatrix = FlameTextureManager.getUpdatedBoneMatrices(this.skeleton, numBones);

        return {
            bsWeight,
            bonesMatrix,
            bonesNum: numBones,
            bonesWeight: this.lbsWeight
        };
    }

    /**
     * Run morph update - main animation loop function
     * @param {SplatMesh} splatMesh - The gaussian splat mesh to update
     */
    runMorphUpdate(splatMesh) {
        const morphedMesh = new Float32Array(
            this.avatarMesh.geometry.attributes.position.array
        );

        splatMesh.gaussianSplatCount = this.gaussianSplatCount;
        splatMesh.bonesNum = 5;

        if (this.useFlame) {
            const updateData = this.updateFlameBones();
            splatMesh.bsWeight = updateData.bsWeight;
            splatMesh.bonesMatrix = updateData.bonesMatrix;
            splatMesh.bonesNum = updateData.bonesNum;
            splatMesh.bonesWeight = updateData.bonesWeight;
        }

        splatMesh.morphedMesh = morphedMesh;

        // Update textures
        const splatNum = splatMesh.morphedMesh.length / 3;
        if (splatMesh.splatDataTextures && splatMesh.splatDataTextures['flameModel']) {
            splatMesh.updateTextureAfterBSAndSkeleton(0, splatNum - 1, this.useFlame);
        }
    }

    /**
     * Set current animation frame
     *
     * @param {number} frame - Frame number to set (will wrap if exceeds totalFrames)
     * @throws {ValidationError} If frame is not a valid number
     * @returns {void}
     */
    setFrame(frame) {
        this._assertNotDisposed();

        if (typeof frame !== 'number' || isNaN(frame)) {
            throw new ValidationError('frame must be a valid number', 'frame');
        }

        if (this.totalFrames > 0) {
            this.frame = ((frame % this.totalFrames) + this.totalFrames) % this.totalFrames; // Handle negative
        } else {
            this.frame = 0;
        }
    }

    /**
     * Advance to next frame in animation sequence
     *
     * Automatically wraps to frame 0 after reaching totalFrames.
     *
     * @returns {void}
     */
    nextFrame() {
        this._assertNotDisposed();

        if (this.totalFrames > 0) {
            this.frame = (this.frame + 1) % this.totalFrames;
        }
    }

    /**
     * Get skeleton for external use
     *
     * @returns {THREE.Skeleton|null} The FLAME skeleton or null if not initialized
     */
    getSkeleton() {
        this._assertNotDisposed();
        return this.skeleton;
    }

    /**
     * Get current frame number
     *
     * @returns {number} Current animation frame index
     */
    getFrame() {
        this._assertNotDisposed();
        return this.frame;
    }

    /**
     * Get total frame count
     *
     * @returns {number} Total number of animation frames
     */
    getTotalFrames() {
        this._assertNotDisposed();
        return this.totalFrames;
    }

    /**
     * Dispose animator and free resources
     *
     * Properly cleans up:
     * - Skeleton and bones
     * - References to meshes and parameters
     *
     * @returns {void}
     */
    dispose() {
        if (this._disposed) {
            logger.warn('FlameAnimator.dispose() called on already disposed instance');
            return;
        }

        logger.info('Disposing FlameAnimator');

        // Dispose skeleton (bones are part of skeleton)
        if (this.skeleton) {
            this.skeleton.dispose();
            this.skeleton = null;
        }

        // Nullify all references to aid GC
        this.bones = null;
        this.flameParams = null;
        this.lbsWeight = null;
        this.avatarMesh = null;

        // Reset state
        this.frame = 0;
        this.totalFrames = 0;
        this.gaussianSplatCount = 0;

        // Mark as disposed
        this._disposed = true;

        logger.debug('FlameAnimator disposed successfully');
    }
}

exports.ARKIT_BLENDSHAPES_COUNT = ARKIT_BLENDSHAPES_COUNT;
exports.ARKitBlendshapes = ARKitBlendshapes;
exports.AbortedPromiseError = AbortedPromiseError;
exports.AnimationManager = AnimationManager;
exports.BASE_COMPONENT_COUNT = BASE_COMPONENT_COUNT$1;
exports.BlobUrlManager = BlobUrlManager;
exports.CENTER_COLORS_ELEMENTS_PER_SPLAT = CENTER_COLORS_ELEMENTS_PER_SPLAT$1;
exports.CENTER_COLORS_ELEMENTS_PER_TEXEL = CENTER_COLORS_ELEMENTS_PER_TEXEL$1;
exports.CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION = CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION;
exports.COVARIANCES_ELEMENTS_PER_SPLAT = COVARIANCES_ELEMENTS_PER_SPLAT$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED = COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED = COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED = COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_STORED = COVARIANCES_ELEMENTS_PER_TEXEL_STORED$1;
exports.Constants = Constants$1;
exports.DefaultSphericalHarmonics8BitCompressionHalfRange = DefaultSphericalHarmonics8BitCompressionHalfRange;
exports.DefaultSphericalHarmonics8BitCompressionRange = DefaultSphericalHarmonics8BitCompressionRange;
exports.DirectLoadError = DirectLoadError;
exports.EventEmitter = EventEmitter;
exports.FLAME_BONES_COUNT = FLAME_BONES_COUNT;
exports.FOCUS_MARKER_FADE_IN_SPEED = FOCUS_MARKER_FADE_IN_SPEED;
exports.FOCUS_MARKER_FADE_OUT_SPEED = FOCUS_MARKER_FADE_OUT_SPEED;
exports.FieldSize = FieldSize;
exports.FieldSizeStringMap = FieldSizeStringMap;
exports.FlameAnimator = FlameAnimator;
exports.FlameBoneNames = FlameBoneNames;
exports.FlameConstants = Constants;
exports.FlameTextureManager = FlameTextureManager;
exports.FrameBudgetMonitor = FrameBudgetMonitor;
exports.GaussianSplatRenderer = GaussianSplatRenderer;
exports.Hello = Hello;
exports.Hit = Hit;
exports.INRIAV1PlyParser = INRIAV1PlyParser;
exports.Idle = Idle;
exports.InternalLoadType = InternalLoadType;
exports.Listen = Listen;
exports.LoaderStatus = LoaderStatus;
exports.LoaderUtils = LoaderUtils;
exports.LogLevel = LogLevel;
exports.Logger = Logger;
exports.LoggerLevel = LoggerLevel;
exports.MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT = MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT;
exports.MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER = MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER;
exports.ObjectPool = ObjectPool;
exports.PlyFormat = PlyFormat;
exports.PlyLoader = PlyLoader;
exports.PlyParser = PlyParser;
exports.PlyParserUtils = PlyParserUtils;
exports.PoolScope = PoolScope;
exports.Ray = Ray;
exports.Raycaster = Raycaster;
exports.RenderLoop = RenderLoop;
exports.RenderMode = RenderMode;
exports.SCALES_ROTATIONS_ELEMENTS_PER_TEXEL = SCALES_ROTATIONS_ELEMENTS_PER_TEXEL$1;
exports.SCENE_FADEIN_RATE_FAST = SCENE_FADEIN_RATE_FAST$1;
exports.SCENE_FADEIN_RATE_GRADUAL = SCENE_FADEIN_RATE_GRADUAL$1;
exports.SCENE_INDEXES_ELEMENTS_PER_TEXEL = SCENE_INDEXES_ELEMENTS_PER_TEXEL$1;
exports.SceneFormat = SceneFormat;
exports.SceneRevealMode = SceneRevealMode;
exports.Semver = Semver;
exports.Speak = Speak;
exports.SplatBuffer = SplatBuffer;
exports.SplatBufferGenerator = SplatBufferGenerator;
exports.SplatGeometry = SplatGeometry;
exports.SplatMaterial = SplatMaterial;
exports.SplatMaterial2D = SplatMaterial2D;
exports.SplatMaterial3D = SplatMaterial3D;
exports.SplatMesh = SplatMesh;
exports.SplatPartitioner = SplatPartitioner;
exports.SplatRenderMode = SplatRenderMode;
exports.SplatScene = SplatScene;
exports.SplatTree = SplatTree;
exports.State = State;
exports.THREE_CAMERA_FOV = THREE_CAMERA_FOV;
exports.TYVoiceChatState = TYVoiceChatState;
exports.TextureConstants = TextureConstants;
exports.Think = Think;
exports.TypedEventEmitter = TypedEventEmitter;
exports.UncompressedSplatArray = UncompressedSplatArray;
exports.Viewer = Viewer;
exports.abortablePromiseWithExtractedComponents = abortablePromiseWithExtractedComponents;
exports.buildBoneMatrixTexture = buildBoneMatrixTexture;
exports.buildBoneWeightTexture = buildBoneWeightTexture;
exports.buildModelTexture = buildModelTexture;
exports.clamp = clamp;
exports.configureForDevelopment = configureForDevelopment;
exports.configureForProduction = configureForProduction;
exports.convertBetweenCompressionLevels = convertBetweenCompressionLevels;
exports.copyBetweenBuffers = copyBetweenBuffers$1;
exports.createTrackedBlobUrl = createTrackedBlobUrl;
exports.dataViewFloatForCompressionLevel = dataViewFloatForCompressionLevel$1;
exports.delayedExecute = delayedExecute;
exports.disposeAllMeshes = disposeAllMeshes;
exports.disposeAllPools = disposeAllPools;
exports.eulerPool = eulerPool;
exports.fetchWithProgress = fetchWithProgress;
exports.floatToHalf = floatToHalf;
exports.fromHalfFloat = fromHalfFloat$1;
exports.fromHalfFloatToUint8 = fromHalfFloatToUint8$1;
exports.fromUint8 = fromUint8$1;
exports.fromUint8ToHalfFloat = fromUint8ToHalfFloat;
exports.getCurrentTime = getCurrentTime;
exports.getGlobalBlobUrlManager = getGlobalBlobUrlManager;
exports.getIOSSemever = getIOSSemever;
exports.getLogger = getLogger;
exports.getPoolStats = getPoolStats;
exports.getSphericalHarmonicsComponentCountForDegree = getSphericalHarmonicsComponentCountForDegree;
exports.getUpdatedBoneMatrices = getUpdatedBoneMatrices;
exports.isIOS = isIOS;
exports.matrix4Pool = matrix4Pool;
exports.nativePromiseWithExtractedComponents = nativePromiseWithExtractedComponents;
exports.quaternionPool = quaternionPool;
exports.revokeTrackedBlobUrl = revokeTrackedBlobUrl;
exports.rgbaArrayToInteger = rgbaArrayToInteger;
exports.rgbaToInteger = rgbaToInteger;
exports.sceneFormatFromPath = sceneFormatFromPath;
exports.setGlobalLogLevel = setGlobalLogLevel;
exports.tempMatrix4A = tempMatrix4A;
exports.tempMatrix4B = tempMatrix4B;
exports.tempQuaternionA = tempQuaternionA;
exports.tempQuaternionB = tempQuaternionB;
exports.tempVector3A = tempVector3A;
exports.tempVector3B = tempVector3B;
exports.tempVector3C = tempVector3C;
exports.toHalfFloat = toHalfFloat$1;
exports.toUint8 = toUint8$1;
exports.toUncompressedFloat = toUncompressedFloat$1;
exports.uintEncodedFloat = uintEncodedFloat$1;
exports.updateBoneMatrixTexture = updateBoneMatrixTexture;
exports.validateArrayBuffer = validateArrayBuffer;
exports.validateAssetPath = validateAssetPath;
exports.validateCallback = validateCallback;
exports.validateDOMElement = validateDOMElement;
exports.validateEnum = validateEnum;
exports.validateFileExtension = validateFileExtension;
exports.validateHexColor = validateHexColor;
exports.validateInteger = validateInteger;
exports.validateNumberInRange = validateNumberInRange;
exports.validatePositiveInteger = validatePositiveInteger;
exports.validateRequiredProperties = validateRequiredProperties;
exports.validateUrl = validateUrl;
exports.vector3Pool = vector3Pool;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3NwbGF0LWZsYW1lLWF2YXRhci1yZW5kZXJlci5janMuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9lbnVtcy9Mb2dMZXZlbC5qcyIsIi4uL3NyYy9lbnVtcy9SZW5kZXJNb2RlLmpzIiwiLi4vc3JjL2VudW1zL1NjZW5lRm9ybWF0LmpzIiwiLi4vc3JjL2VudW1zL1NjZW5lUmV2ZWFsTW9kZS5qcyIsIi4uL3NyYy9lbnVtcy9TcGxhdFJlbmRlck1vZGUuanMiLCIuLi9zcmMvZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzIiwiLi4vc3JjL3V0aWxzL0xvYWRlclV0aWxzLmpzIiwiLi4vc3JjL2Vycm9ycy9BcHBsaWNhdGlvbkVycm9yLmpzIiwiLi4vc3JjL3V0aWxzL0xvZ2dlci5qcyIsIi4uL3NyYy91dGlscy9VdGlsLmpzIiwiLi4vc3JjL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyIsIi4uL3NyYy91dGlscy9PYmplY3RQb29sLmpzIiwiLi4vc3JjL3V0aWxzL0Jsb2JVcmxNYW5hZ2VyLmpzIiwiLi4vc3JjL3V0aWxzL1JlbmRlckxvb3AuanMiLCIuLi9zcmMvdXRpbHMvRXZlbnRFbWl0dGVyLmpzIiwiLi4vc3JjL3JlbmRlcmVyL0FwcENvbnN0YW50cy5qcyIsIi4uL3NyYy9yZW5kZXJlci9BbmltYXRpb25NYW5hZ2VyLmpzIiwiLi4vc3JjL2NvcmUvU3BsYXRTY2VuZS5qcyIsIi4uL3NyYy9jb3JlL1NwbGF0R2VvbWV0cnkuanMiLCIuLi9zcmMvY29yZS9TcGxhdFRyZWUuanMiLCIuLi9zcmMvbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwuanMiLCIuLi9zcmMvbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwzRC5qcyIsIi4uL3NyYy9tYXRlcmlhbHMvU3BsYXRNYXRlcmlhbDJELmpzIiwiLi4vc3JjL2NvcmUvU3BsYXRNZXNoLmpzIiwiLi4vc3JjL2xvYWRlcnMvRGlyZWN0TG9hZEVycm9yLmpzIiwiLi4vc3JjL2J1ZmZlcnMvVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyIsIi4uL3NyYy9idWZmZXJzL1NwbGF0QnVmZmVyLmpzIiwiLi4vc3JjL2J1ZmZlcnMvU3BsYXRQYXJ0aXRpb25lci5qcyIsIi4uL3NyYy9idWZmZXJzL1NwbGF0QnVmZmVyR2VuZXJhdG9yLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5UGFyc2VyVXRpbHMuanMiLCIuLi9zcmMvbG9hZGVycy9JTlJJQVYxUGx5UGFyc2VyLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5UGFyc2VyLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5TG9hZGVyLmpzIiwiLi4vc3JjL3JheWNhc3Rlci9SYXkuanMiLCIuLi9zcmMvcmF5Y2FzdGVyL0hpdC5qcyIsIi4uL3NyYy9yYXljYXN0ZXIvUmF5Y2FzdGVyLmpzIiwiLi4vc3JjL3dvcmtlci9Tb3J0V29ya2VyLmpzIiwiLi4vc3JjL2NvcmUvVmlld2VyLmpzIiwiLi4vc3JjL3JlbmRlcmVyL0dhdXNzaWFuU3BsYXRSZW5kZXJlci5qcyIsIi4uL3NyYy9mbGFtZS9GbGFtZUNvbnN0YW50cy5qcyIsIi4uL3NyYy9mbGFtZS91dGlscy5qcyIsIi4uL3NyYy9mbGFtZS9GbGFtZVRleHR1cmVNYW5hZ2VyLmpzIiwiLi4vc3JjL2ZsYW1lL0ZsYW1lQW5pbWF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExvZyBsZXZlbCBlbnVtZXJhdGlvbiBmb3IgY29udHJvbGxpbmcgdmVyYm9zaXR5XHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICovXHJcbmV4cG9ydCBjb25zdCBMb2dMZXZlbCA9IHtcclxuICAgIE5vbmU6IDAsXHJcbiAgICBFcnJvcjogMSxcclxuICAgIFdhcm5pbmc6IDIsXHJcbiAgICBJbmZvOiAzLFxyXG4gICAgRGVidWc6IDRcclxufTtcclxuIiwiLyoqXHJcbiAqIFJlbmRlciBtb2RlIGVudW1lcmF0aW9uXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICovXHJcbmV4cG9ydCBjb25zdCBSZW5kZXJNb2RlID0ge1xyXG4gICAgQWx3YXlzOiAwLFxyXG4gICAgT25DaGFuZ2U6IDEsXHJcbiAgICBOZXZlcjogMlxyXG59O1xyXG4iLCIvKipcclxuICogU2NlbmUgZm9ybWF0IGVudW1lcmF0aW9uIGZvciBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBTaW1wbGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgdXNhZ2UgLSBvbmx5IFBMWSBmb3JtYXQgaXMgc3VwcG9ydGVkLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNjZW5lRm9ybWF0ID0ge1xyXG4gICAgJ1BseSc6IDBcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgc2NlbmUgZm9ybWF0IGZyb20gZmlsZSBwYXRoXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gRmlsZSBwYXRoXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ8bnVsbH0gU2NlbmUgZm9ybWF0IG9yIG51bGwgaWYgdW5rbm93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNjZW5lRm9ybWF0RnJvbVBhdGggPSAocGF0aCkgPT4ge1xyXG4gICAgaWYgKHBhdGguZW5kc1dpdGgoJy5wbHknKSkgcmV0dXJuIFNjZW5lRm9ybWF0LlBseTtcclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4iLCIvKipcclxuICogU2NlbmUgcmV2ZWFsIG1vZGUgZW51bWVyYXRpb25cclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNjZW5lUmV2ZWFsTW9kZSA9IHtcclxuICAgIERlZmF1bHQ6IDAsXHJcbiAgICBHcmFkdWFsOiAxLFxyXG4gICAgSW5zdGFudDogMlxyXG59O1xyXG4iLCIvKipcclxuICogU3BsYXQgcmVuZGVyIG1vZGUgZW51bWVyYXRpb25cclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNwbGF0UmVuZGVyTW9kZSA9IHtcclxuICAgIFRocmVlRDogMCxcclxuICAgIFR3b0Q6IDFcclxufTtcclxuIiwiLyoqXHJcbiAqIEVuZ2luZUNvbnN0YW50c1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBDb3JlIGNvbnN0YW50cyBmb3IgR2F1c3NpYW4gU3BsYXQgcmVuZGVyaW5nLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25zdGFudHMge1xyXG4gICAgc3RhdGljIERlZmF1bHRTcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiA9IDE2O1xyXG4gICAgc3RhdGljIE1lbW9yeVBhZ2VTaXplID0gNjU1MzY7XHJcbiAgICBzdGF0aWMgQnl0ZXNQZXJGbG9hdCA9IDQ7XHJcbiAgICBzdGF0aWMgQnl0ZXNQZXJJbnQgPSA0O1xyXG4gICAgc3RhdGljIE1heFNjZW5lcyA9IDMyO1xyXG4gICAgc3RhdGljIFByb2dyZXNzaXZlTG9hZFNlY3Rpb25TaXplID0gMjYyMTQ0O1xyXG4gICAgc3RhdGljIFByb2dyZXNzaXZlTG9hZFNlY3Rpb25EZWxheUR1cmF0aW9uID0gMTU7XHJcbiAgICBzdGF0aWMgU3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2UgPSAzO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlID0gQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlO1xyXG5cclxuLy8gU3BsYXRNZXNoIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNjtcclxuZXhwb3J0IGNvbnN0IENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNDtcclxuXHJcbmV4cG9ydCBjb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEID0gNDtcclxuZXhwb3J0IGNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQgPSA0O1xyXG5leHBvcnQgY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEID0gNjtcclxuZXhwb3J0IGNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRCA9IDg7XHJcbmV4cG9ydCBjb25zdCBTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDE7XHJcblxyXG5leHBvcnQgY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfRkFTVCA9IDAuMDEyO1xyXG5leHBvcnQgY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCA9IDAuMDAzO1xyXG5cclxuLy8gVmlld2VyIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgVEhSRUVfQ0FNRVJBX0ZPViA9IDUwO1xyXG5leHBvcnQgY29uc3QgTUlOSU1VTV9ESVNUQU5DRV9UT19ORVdfRk9DQUxfUE9JTlQgPSAwLjU7XHJcbmV4cG9ydCBjb25zdCBDT05TRUNVVElWRV9SRU5ERVJFRF9GUkFNRVNfRk9SX0ZQU19DQUxDVUxBVElPTiA9IDYwO1xyXG5leHBvcnQgY29uc3QgTUlOX1NQTEFUX0NPVU5UX1RPX1NIT1dfU1BMQVRfVFJFRV9MT0FESU5HX1NQSU5ORVIgPSAxNTAwMDAwO1xyXG5leHBvcnQgY29uc3QgRk9DVVNfTUFSS0VSX0ZBREVfSU5fU1BFRUQgPSAwLjQ7XHJcbmV4cG9ydCBjb25zdCBGT0NVU19NQVJLRVJfRkFERV9PVVRfU1BFRUQgPSAwLjEyO1xyXG5cclxuLy8gSW50ZXJuYWwgbG9hZCB0eXBlcyBmb3IgbG9hZGVyc1xyXG5leHBvcnQgY29uc3QgSW50ZXJuYWxMb2FkVHlwZSA9IHtcclxuICAgIERpcmVjdFRvU3BsYXRCdWZmZXI6IDAsXHJcbiAgICBEaXJlY3RUb1NwbGF0QXJyYXk6IDEsXHJcbiAgICBEb3dubG9hZEJlZm9yZVByb2Nlc3Npbmc6IDJcclxufTtcclxuXHJcbi8vIExvYWRlciBzdGF0dXNcclxuZXhwb3J0IGNvbnN0IExvYWRlclN0YXR1cyA9IHtcclxuICAgICdEb3dubG9hZGluZyc6IDAsXHJcbiAgICAnUHJvY2Vzc2luZyc6IDEsXHJcbiAgICAnRG9uZSc6IDJcclxufTtcclxuIiwiLyoqXHJcbiAqIExvYWRlclV0aWxzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIExvYWRlciB1dGlsaXRpZXMgZm9yIGRlY29kaW5nIHRleHQgYW5kIHJlc29sdmluZyBVUkxzLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBMb2FkZXJVdGlscyB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgVGV4dERlY29kZXIgaW5zdGVhZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGVjb2RlVGV4dChhcnJheSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXJyYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmFsbGJhY2sgZm9yIGVudmlyb25tZW50cyB3aXRob3V0IFRleHREZWNvZGVyXHJcbiAgICAgICAgbGV0IHMgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlsID0gYXJyYXkubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBJbXBsaWNpdGx5IGFzc3VtZXMgbGl0dGxlLWVuZGlhbi5cclxuICAgICAgICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFycmF5W2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIG1lcmdlcyBtdWx0aS1ieXRlIHV0Zi04IGNoYXJhY3RlcnMuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHMpKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgLy8gc2VlICMxNjM1OCAtIGlnbm9yZSBkZWNvZGluZyBlcnJvcnNcclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBleHRyYWN0VXJsQmFzZSh1cmwpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHVybC5sYXN0SW5kZXhPZignLycpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gJy4vJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybC5zbGljZSgwLCBpbmRleCArIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZXNvbHZlVVJMKHVybCwgcGF0aCkge1xyXG4gICAgICAgIC8vIEludmFsaWQgVVJMXHJcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnIHx8IHVybCA9PT0gJycpIHJldHVybiAnJztcclxuXHJcbiAgICAgICAgLy8gSG9zdCBSZWxhdGl2ZSBVUkxcclxuICAgICAgICBpZiAoL15odHRwcz86XFwvXFwvL2kudGVzdChwYXRoKSAmJiAvXlxcLy8udGVzdCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLyheaHR0cHM/OlxcL1xcL1teL10rKS4qL2ksICckMScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWJzb2x1dGUgVVJMIGh0dHA6Ly8saHR0cHM6Ly8sLy9cclxuICAgICAgICBpZiAoL14oaHR0cHM/Oik/XFwvXFwvL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBEYXRhIFVSSVxyXG4gICAgICAgIGlmICgvXmRhdGE6LiosLiokL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBCbG9iIFVSTFxyXG4gICAgICAgIGlmICgvXmJsb2I6LiokL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBSZWxhdGl2ZSBVUkxcclxuICAgICAgICByZXR1cm4gcGF0aCArIHVybDtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogQXBwbGljYXRpb25FcnJvciAtIEJhc2UgZXJyb3IgY2xhc3MgZm9yIGFsbCBhcHBsaWNhdGlvbiBlcnJvcnNcclxuICpcclxuICogUHJvdmlkZXMgc3RydWN0dXJlZCBlcnJvciBoYW5kbGluZyB3aXRoIGVycm9yIGNvZGVzIGFuZCBjYXVzZSB0cmFja2luZy5cclxuICogQWxsIGRvbWFpbi1zcGVjaWZpYyBlcnJvcnMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBFcnJvclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFwcGxpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBBcHBsaWNhdGlvbkVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEh1bWFuLXJlYWRhYmxlIGVycm9yIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIC0gTWFjaGluZS1yZWFkYWJsZSBlcnJvciBjb2RlIGZvciBwcm9ncmFtbWF0aWMgaGFuZGxpbmdcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgZXJyb3IgKGZvciBlcnJvciBjaGFpbmluZylcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xyXG5cclxuICAgICAgICAvLyBDYXB0dXJlIHN0YWNrIHRyYWNlLCBleGNsdWRpbmcgY29uc3RydWN0b3IgY2FsbCBmcm9tIGl0XHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgZXJyb3IgdG8gSlNPTiBmb3IgbG9nZ2luZy90cmFuc21pc3Npb25cclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEpTT04gcmVwcmVzZW50YXRpb24gb2YgZXJyb3JcclxuICAgICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxyXG4gICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXHJcbiAgICAgICAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxyXG4gICAgICAgICAgICBjYXVzZTogdGhpcy5jYXVzZSA/IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY2F1c2UubmFtZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuY2F1c2UubWVzc2FnZVxyXG4gICAgICAgICAgICB9IDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0aW9uRXJyb3IgLSBUaHJvd24gd2hlbiBpbnB1dCB2YWxpZGF0aW9uIGZhaWxzXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGludmFsaWQgcGFyYW1ldGVycywgb3V0LW9mLXJhbmdlIHZhbHVlcywgb3IgbWFsZm9ybWVkIGRhdGEuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgVmFsaWRhdGlvbkVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIFZhbGlkYXRpb24gZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gTmFtZSBvZiB0aGUgZmllbGQgdGhhdCBmYWlsZWQgdmFsaWRhdGlvblxyXG4gICAgICogQHBhcmFtIHtFcnJvcn0gW2NhdXNlPW51bGxdIC0gT3JpZ2luYWwgZXJyb3IgdGhhdCBjYXVzZWQgdGhpcyB2YWxpZGF0aW9uIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGQsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdWQUxJREFUSU9OX0VSUk9SJywgY2F1c2UpO1xyXG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE5ldHdvcmtFcnJvciAtIFRocm93biB3aGVuIG5ldHdvcmsgb3BlcmF0aW9ucyBmYWlsXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGZldGNoIGZhaWx1cmVzLCB0aW1lb3V0cywgb3IgSFRUUCBlcnJvciByZXNwb25zZXMuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOZXR3b3JrRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgTmV0d29ya0Vycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIE5ldHdvcmsgZXJyb3IgZGVzY3JpcHRpb25cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhdHVzQ29kZT0wXSAtIEhUVFAgc3RhdHVzIGNvZGUgKGlmIGFwcGxpY2FibGUpXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIG5ldHdvcmsgZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlID0gMCwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ05FVFdPUktfRVJST1InLCBjYXVzZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFzc2V0TG9hZEVycm9yIC0gVGhyb3duIHdoZW4gYXNzZXQgbG9hZGluZyBmYWlsc1xyXG4gKlxyXG4gKiBVc2VkIGZvciBmYWlsdXJlcyBsb2FkaW5nIG1vZGVscywgdGV4dHVyZXMsIG9yIG90aGVyIGFzc2V0IGZpbGVzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXNzZXRMb2FkRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIEFzc2V0TG9hZEVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEFzc2V0IGxvYWQgZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFzc2V0UGF0aCAtIFBhdGggdG8gdGhlIGFzc2V0IHRoYXQgZmFpbGVkIHRvIGxvYWRcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgbG9hZCBmYWlsdXJlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGFzc2V0UGF0aCwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ0FTU0VUX0xPQURfRVJST1InLCBjYXVzZSk7XHJcbiAgICAgICAgdGhpcy5hc3NldFBhdGggPSBhc3NldFBhdGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNvdXJjZURpc3Bvc2VkRXJyb3IgLSBUaHJvd24gd2hlbiBhdHRlbXB0aW5nIHRvIHVzZSBhIGRpc3Bvc2VkIHJlc291cmNlXHJcbiAqXHJcbiAqIFVzZWQgdG8gcHJldmVudCB1c2UtYWZ0ZXItZGlzcG9zZSBidWdzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VEaXNwb3NlZEVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJlc291cmNlRGlzcG9zZWRFcnJvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc291cmNlTmFtZSAtIE5hbWUgb2YgdGhlIGRpc3Bvc2VkIHJlc291cmNlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJlc291cmNlTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBgQ2Fubm90IHVzZSAke3Jlc291cmNlTmFtZX06IHJlc291cmNlIGhhcyBiZWVuIGRpc3Bvc2VkYCxcclxuICAgICAgICAgICAgJ1JFU09VUkNFX0RJU1BPU0VEX0VSUk9SJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZU5hbWUgPSByZXNvdXJjZU5hbWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXphdGlvbkVycm9yIC0gVGhyb3duIHdoZW4gaW5pdGlhbGl6YXRpb24gZmFpbHNcclxuICpcclxuICogVXNlZCB3aGVuIHJlcXVpcmVkIHNldHVwIHN0ZXBzIGZhaWwgb3IgcHJlcmVxdWlzaXRlcyBhcmUgbm90IG1ldC5cclxuICpcclxuICogQGV4dGVuZHMgQXBwbGljYXRpb25FcnJvclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluaXRpYWxpemF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIEluaXRpYWxpemF0aW9uRXJyb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gSW5pdGlhbGl6YXRpb24gZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudCAtIE5hbWUgb2YgY29tcG9uZW50IHRoYXQgZmFpbGVkIHRvIGluaXRpYWxpemVcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgaW5pdGlhbGl6YXRpb24gZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb21wb25lbnQsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdJTklUSUFMSVpBVElPTl9FUlJPUicsIGNhdXNlKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlRXJyb3IgLSBUaHJvd24gd2hlbiBwYXJzaW5nIGRhdGEgZmFpbHNcclxuICpcclxuICogVXNlZCBmb3IgbWFsZm9ybWVkIGZpbGUgZm9ybWF0cywgaW52YWxpZCBKU09OLCBvciBjb3JydXB0IGRhdGEuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBQYXJzZUVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFBhcnNlRXJyb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gUGFyc2UgZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFUeXBlIC0gVHlwZSBvZiBkYXRhIGJlaW5nIHBhcnNlZCAoZS5nLiwgJ0pTT04nLCAnUExZJywgJ0dMQicpXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIHBhcnNlIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZGF0YVR5cGUsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdQQVJTRV9FUlJPUicsIGNhdXNlKTtcclxuICAgICAgICB0aGlzLmRhdGFUeXBlID0gZGF0YVR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25maWd1cmF0aW9uRXJyb3IgLSBUaHJvd24gd2hlbiBjb25maWd1cmF0aW9uIGlzIGludmFsaWRcclxuICpcclxuICogVXNlZCBmb3IgaW52YWxpZCBzZXR0aW5ncywgbWlzc2luZyByZXF1aXJlZCBjb25maWd1cmF0aW9uLCBvciBjb25mbGljdGluZyBvcHRpb25zLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbkVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIENvbmZpZ3VyYXRpb25FcnJvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBDb25maWd1cmF0aW9uIGVycm9yIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnS2V5IC0gQ29uZmlndXJhdGlvbiBrZXkgdGhhdCBpcyBpbnZhbGlkXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb25maWdLZXksIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdDT05GSUdVUkFUSU9OX0VSUk9SJywgY2F1c2UpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnS2V5ID0gY29uZmlnS2V5O1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBMb2dnZXIgLSBTdHJ1Y3R1cmVkIGxvZ2dpbmcgc3lzdGVtXHJcbiAqXHJcbiAqIFByb3ZpZGVzIGxldmVsZWQgbG9nZ2luZyB3aXRoIG9wdGlvbmFsIG91dHB1dCBzdXBwcmVzc2lvbiBmb3IgcHJvZHVjdGlvbi5cclxuICogUmVwbGFjZXMgZGlyZWN0IGNvbnNvbGUubG9nIGNhbGxzIGZvciBiZXR0ZXIgY29udHJvbCBhbmQgZGVidWdnaW5nLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBMb2dnZXIgbGV2ZWxzIGluIG9yZGVyIG9mIHNldmVyaXR5XHJcbiAqIE5vdGU6IE5hbWVkIExvZ2dlckxldmVsIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggZXhpc3RpbmcgTG9nTGV2ZWwgZW51bVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IExvZ2dlckxldmVsID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBERUJVRzogMCxcclxuICAgIElORk86IDEsXHJcbiAgICBXQVJOOiAyLFxyXG4gICAgRVJST1I6IDMsXHJcbiAgICBOT05FOiA0XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIExvZ2dlciBjbGFzcyBmb3Igc3RydWN0dXJlZCBhcHBsaWNhdGlvbiBsb2dnaW5nXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgTG9nZ2VyIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZXNwYWNlIC0gTG9nZ2VyIG5hbWVzcGFjZSAoZS5nLiwgJ1JlbmRlcmVyJywgJ0xvYWRlcicpXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbkxldmVsPUxvZ2dlckxldmVsLklORk9dIC0gTWluaW11bSBsb2cgbGV2ZWwgdG8gb3V0cHV0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWVzcGFjZSwgbWluTGV2ZWwgPSBMb2dnZXJMZXZlbC5JTkZPKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XHJcbiAgICAgICAgdGhpcy5taW5MZXZlbCA9IG1pbkxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IG1pbmltdW0gbG9nIGxldmVsXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBNaW5pbXVtIGxldmVsIGZyb20gTG9nZ2VyTGV2ZWwgZW51bVxyXG4gICAgICovXHJcbiAgICBzZXRMZXZlbChsZXZlbCkge1xyXG4gICAgICAgIHRoaXMubWluTGV2ZWwgPSBsZXZlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBsb2cgbWVzc2FnZSB3aXRoIG5hbWVzcGFjZSBhbmQgdGltZXN0YW1wXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxldmVsIC0gTG9nIGxldmVsIG5hbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBMb2cgYXJndW1lbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEZvcm1hdHRlZCBhcmd1bWVudHNcclxuICAgICAqL1xyXG4gICAgX2Zvcm1hdChsZXZlbCwgYXJncykge1xyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBwcmVmaXggPSBgWyR7dGltZXN0YW1wfV0gWyR7bGV2ZWx9XSBbJHt0aGlzLm5hbWVzcGFjZX1dYDtcclxuICAgICAgICByZXR1cm4gW3ByZWZpeCwgLi4uYXJnc107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2cgZGVidWcgbWVzc2FnZSAobW9zdCB2ZXJib3NlKVxyXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIC0gQXJndW1lbnRzIHRvIGxvZ1xyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyguLi50aGlzLl9mb3JtYXQoJ0RFQlVHJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBpbmZvIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBsb2dcclxuICAgICAqL1xyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuSU5GTykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oLi4udGhpcy5fZm9ybWF0KCdJTkZPJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyB3YXJuaW5nIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBsb2dcclxuICAgICAqL1xyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuV0FSTikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oLi4udGhpcy5fZm9ybWF0KCdXQVJOJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBlcnJvciBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgLSBBcmd1bWVudHMgdG8gbG9nXHJcbiAgICAgKi9cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5taW5MZXZlbCA8PSBMb2dnZXJMZXZlbC5FUlJPUikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKC4uLnRoaXMuX2Zvcm1hdCgnRVJST1InLCBhcmdzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9nIGVycm9yIHdpdGggc3RhY2sgdHJhY2VcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIC0gRXJyb3Igb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbnRleHRdIC0gQWRkaXRpb25hbCBjb250ZXh0XHJcbiAgICAgKi9cclxuICAgIGVycm9yV2l0aFRyYWNlKGVycm9yLCBjb250ZXh0ID0gJycpIHtcclxuICAgICAgICBpZiAodGhpcy5taW5MZXZlbCA8PSBMb2dnZXJMZXZlbC5FUlJPUikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0U3RyID0gY29udGV4dCA/IGAgQ29udGV4dDogJHtjb250ZXh0fWAgOiAnJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvciguLi50aGlzLl9mb3JtYXQoJ0VSUk9SJywgW1xyXG4gICAgICAgICAgICAgICAgYCR7ZXJyb3IubWVzc2FnZX0ke2NvbnRleHRTdHJ9YCxcclxuICAgICAgICAgICAgICAgICdcXG5TdGFjazonLCBlcnJvci5zdGFja1xyXG4gICAgICAgICAgICBdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgY2hpbGQgbG9nZ2VyIHdpdGggZXh0ZW5kZWQgbmFtZXNwYWNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGROYW1lc3BhY2UgLSBDaGlsZCBuYW1lc3BhY2UgdG8gYXBwZW5kXHJcbiAgICAgKiBAcmV0dXJucyB7TG9nZ2VyfSBOZXcgbG9nZ2VyIHdpdGggY29tYmluZWQgbmFtZXNwYWNlXHJcbiAgICAgKi9cclxuICAgIGNoaWxkKGNoaWxkTmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMb2dnZXIoYCR7dGhpcy5uYW1lc3BhY2V9OiR7Y2hpbGROYW1lc3BhY2V9YCwgdGhpcy5taW5MZXZlbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgbG9nZ2VyIHJlZ2lzdHJ5XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBsb2dnZXJzID0gbmV3IE1hcCgpO1xyXG5cclxuLyoqXHJcbiAqIEdsb2JhbCBsb2cgbGV2ZWwgKGFmZmVjdHMgYWxsIG5ldyBsb2dnZXJzKVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxubGV0IGdsb2JhbExvZ0xldmVsID0gTG9nZ2VyTGV2ZWwuSU5GTztcclxuXHJcbi8qKlxyXG4gKiBTZXQgZ2xvYmFsIGxvZyBsZXZlbCBmb3IgYWxsIGxvZ2dlcnNcclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIC0gTG9nIGxldmVsIGZyb20gTG9nZ2VyTGV2ZWwgZW51bVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEdsb2JhbExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBnbG9iYWxMb2dMZXZlbCA9IGxldmVsO1xyXG4gICAgLy8gVXBkYXRlIGV4aXN0aW5nIGxvZ2dlcnNcclxuICAgIGZvciAoY29uc3QgbG9nZ2VyIG9mIGxvZ2dlcnMudmFsdWVzKCkpIHtcclxuICAgICAgICBsb2dnZXIuc2V0TGV2ZWwobGV2ZWwpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IG9yIGNyZWF0ZSBhIGxvZ2dlciBmb3IgYSBuYW1lc3BhY2VcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIExvZ2dlciBuYW1lc3BhY2VcclxuICogQHJldHVybnMge0xvZ2dlcn0gTG9nZ2VyIGluc3RhbmNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSkge1xyXG4gICAgaWYgKCFsb2dnZXJzLmhhcyhuYW1lc3BhY2UpKSB7XHJcbiAgICAgICAgbG9nZ2Vycy5zZXQobmFtZXNwYWNlLCBuZXcgTG9nZ2VyKG5hbWVzcGFjZSwgZ2xvYmFsTG9nTGV2ZWwpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsb2dnZXJzLmdldChuYW1lc3BhY2UpO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJlIGxvZ2dpbmcgZm9yIHByb2R1Y3Rpb24gKHN1cHByZXNzIGFsbCBsb2dzKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZUZvclByb2R1Y3Rpb24oKSB7XHJcbiAgICBzZXRHbG9iYWxMb2dMZXZlbChMb2dnZXJMZXZlbC5OT05FKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbmZpZ3VyZSBsb2dnaW5nIGZvciBkZXZlbG9wbWVudCAoc2hvdyBhbGwgbG9ncylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVGb3JEZXZlbG9wbWVudCgpIHtcclxuICAgIHNldEdsb2JhbExvZ0xldmVsKExvZ2dlckxldmVsLkRFQlVHKTtcclxufVxyXG5cclxuLy8gRXhwb3J0IGRlZmF1bHQgbG9nZ2VyIGZvciBjb252ZW5pZW5jZVxyXG5leHBvcnQgZGVmYXVsdCBnZXRMb2dnZXIoJ0FwcCcpO1xyXG4iLCIvKipcclxuICogQ29yZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgR2F1c3NpYW4gU3BsYXQgcmVuZGVyaW5nXHJcbiAqXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0YVV0aWxzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBOZXR3b3JrRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuL0xvZ2dlci5qcyc7XHJcblxyXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBDdXN0b20gZXJyb3IgZm9yIGFib3J0ZWQgb3BlcmF0aW9uc1xyXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmV0d29ya0Vycm9yIGluc3RlYWQgZm9yIGNvbnNpc3RlbmN5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWJvcnRlZFByb21pc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKG1zZykge1xyXG4gICAgICAgIHN1cGVyKG1zZyk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ0Fib3J0ZWRQcm9taXNlRXJyb3InO1xyXG4gICAgICAgIHRoaXMuY29kZSA9ICdBQk9SVEVEJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIHdpdGggcHJvZ3Jlc3MgdHJhY2tpbmcgdXNpbmcgc3RhbmRhcmQgQWJvcnRDb250cm9sbGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVVJMIHRvIGZldGNoXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzXSAtIFByb2dyZXNzIGNhbGxiYWNrIChwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rLCBmaWxlU2l6ZSlcclxuICogQHBhcmFtIHtib29sZWFufSBbc2F2ZUNodW5rcz10cnVlXSAtIFdoZXRoZXIgdG8gc2F2ZSBhbmQgcmV0dXJuIGRvd25sb2FkZWQgY2h1bmtzXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbaGVhZGVyc10gLSBPcHRpb25hbCBIVFRQIGhlYWRlcnNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXlCdWZmZXI+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBkb3dubG9hZGVkIGRhdGFcclxuICogQHRocm93cyB7TmV0d29ya0Vycm9yfSBJZiBmZXRjaCBmYWlscyBvciBpcyBhYm9ydGVkXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZmV0Y2hXaXRoUHJvZ3Jlc3MgPSBmdW5jdGlvbihwYXRoLCBvblByb2dyZXNzLCBzYXZlQ2h1bmtzID0gdHJ1ZSwgaGVhZGVycykge1xyXG5cclxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XHJcbiAgICBsZXQgYWJvcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIGxldCBvblByb2dyZXNzQ2FsbGVkQXRDb21wbGV0ZSA9IGZhbHNlO1xyXG4gICAgY29uc3QgbG9jYWxPblByb2dyZXNzID0gKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmssIGZpbGVTaXplKSA9PiB7XHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MgJiYgIW9uUHJvZ3Jlc3NDYWxsZWRBdENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmssIGZpbGVTaXplKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJjZW50ID09PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2FsbGVkQXRDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBsZXQgcHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3JzIGJyZWFrIHRoZSBkb3dubG9hZFxyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBwcm9ncmVzcyBjYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0geyBzaWduYWwgfTtcclxuICAgICAgICBpZiAoaGVhZGVycykgZmV0Y2hPcHRpb25zLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG5cclxuICAgICAgICBmZXRjaChwYXRoLCBmZXRjaE9wdGlvbnMpXHJcbiAgICAgICAgLnRoZW4oYXN5bmMgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIEhUVFAgZXJyb3IgcmVzcG9uc2VzXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yVGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQgPSBhd2FpdCBkYXRhLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBpZiB3ZSBjYW4ndCByZWFkIGVycm9yIHRleHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGZXRjaCBmYWlsZWQ6ICR7ZGF0YS5zdGF0dXNUZXh0fSR7ZXJyb3JUZXh0ID8gJyAtICcgKyBlcnJvclRleHQgOiAnJ31gLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gZGF0YS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgaWYgKCFyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKCdSZXNwb25zZSBib2R5IGlzIG5vdCByZWFkYWJsZScsIDApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGJ5dGVzRG93bmxvYWRlZCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IF9maWxlU2l6ZSA9IGRhdGEuaGVhZGVycy5nZXQoJ0NvbnRlbnQtTGVuZ3RoJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVTaXplID0gX2ZpbGVTaXplID8gcGFyc2VJbnQoX2ZpbGVTaXplLCAxMCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghYWJvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBjaHVuaywgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbE9uUHJvZ3Jlc3MoMTAwLCAnMTAwJScsIGNodW5rLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlQ2h1bmtzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQmxvYihjaHVua3MpLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzRG93bmxvYWRlZCArPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnRMYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZVNpemUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gKGJ5dGVzRG93bmxvYWRlZCAvIGZpbGVTaXplKSAqIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudExhYmVsID0gYCR7cGVyY2VudC50b0ZpeGVkKDIpfSVgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZUNodW5rcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsT25Qcm9ncmVzcyhwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgcmVhZGluZyByZXNwb25zZSBzdHJlYW06ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBEb24ndCB3cmFwIGlmIGFscmVhZHkgYSBOZXR3b3JrRXJyb3JcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTmV0d29ya0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOZXR3b3JrRXJyb3IoJ0ZldGNoIGFib3J0ZWQgYnkgdXNlcicsIDAsIGVycm9yKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IE5ldHdvcmtFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmV0Y2ggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEF0dGFjaCBhYm9ydCBmdW5jdGlvbmFsaXR5IHRvIHRoZSBwcm9taXNlXHJcbiAgICBwcm9taXNlLmFib3J0ID0gKHJlYXNvbikgPT4ge1xyXG4gICAgICAgIGFib3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydChyZWFzb24pO1xyXG4gICAgfTtcclxuICAgIHByb21pc2UuYWJvcnRDb250cm9sbGVyID0gYWJvcnRDb250cm9sbGVyO1xyXG5cclxuICAgIHJldHVybiBwcm9taXNlO1xyXG59O1xyXG5cclxuLy8gQ2xhbXAgdmFsdWUgYmV0d2VlbiBtaW4gYW5kIG1heFxyXG5leHBvcnQgY29uc3QgY2xhbXAgPSBmdW5jdGlvbih2YWwsIG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xyXG59O1xyXG5cclxuLy8gR2V0IGN1cnJlbnQgdGltZSBpbiBzZWNvbmRzXHJcbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDtcclxufTtcclxuXHJcbi8vIERpc3Bvc2UgYWxsIG1lc2hlcyBpbiBhIHNjZW5lIGdyYXBoXHJcbmV4cG9ydCBjb25zdCBkaXNwb3NlQWxsTWVzaGVzID0gKG9iamVjdDNEKSA9PiB7XHJcbiAgICBpZiAob2JqZWN0M0QuZ2VvbWV0cnkpIHtcclxuICAgICAgICBvYmplY3QzRC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgb2JqZWN0M0QuZ2VvbWV0cnkgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iamVjdDNELm1hdGVyaWFsKSB7XHJcbiAgICAgICAgb2JqZWN0M0QubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgIG9iamVjdDNELm1hdGVyaWFsID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmIChvYmplY3QzRC5jaGlsZHJlbikge1xyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG9iamVjdDNELmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGRpc3Bvc2VBbGxNZXNoZXMoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8vIERlbGF5ZWQgZXhlY3V0aW9uIGhlbHBlclxyXG5leHBvcnQgY29uc3QgZGVsYXllZEV4ZWN1dGUgPSAoZnVuYywgZmFzdCkgPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKGZ1bmMoKSk7XHJcbiAgICAgICAgfSwgZmFzdCA/IDEgOiA1MCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIEdldCBzcGhlcmljYWwgaGFybW9uaWNzIGNvbXBvbmVudCBjb3VudCBmb3IgZGVncmVlXHJcbmV4cG9ydCBjb25zdCBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSA9IChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSA9PiB7XHJcbiAgICBzd2l0Y2ggKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuIDk7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICByZXR1cm4gMjQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBuYXRpdmUgcHJvbWlzZSB3aXRoIGV4dHJhY3RlZCBjb21wb25lbnRzXHJcbmV4cG9ydCBjb25zdCBuYXRpdmVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMgPSAoKSA9PiB7XHJcbiAgICBsZXQgcmVzb2x2ZXI7XHJcbiAgICBsZXQgcmVqZWN0ZXI7XHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmVyID0gcmVzb2x2ZTtcclxuICAgICAgICByZWplY3RlciA9IHJlamVjdDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAncHJvbWlzZSc6IHByb21pc2UsXHJcbiAgICAgICAgJ3Jlc29sdmUnOiByZXNvbHZlcixcclxuICAgICAgICAncmVqZWN0JzogcmVqZWN0ZXJcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgcHJvbWlzZSB3aXRoIGV4dHJhY3RlZCByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnMgYW5kIG9wdGlvbmFsIGFib3J0IGNhcGFiaWxpdHlcclxuICogVXNlcyBzdGFuZGFyZCBQcm9taXNlIHdpdGggYXR0YWNoZWQgYWJvcnQgbWV0aG9kXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzID0gKGFib3J0SGFuZGxlcikgPT4ge1xyXG4gICAgbGV0IHJlc29sdmVyO1xyXG4gICAgbGV0IHJlamVjdGVyO1xyXG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXNvbHZlciA9IHJlc29sdmU7XHJcbiAgICAgICAgcmVqZWN0ZXIgPSByZWplY3Q7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQXR0YWNoIGFib3J0IG1ldGhvZCB0byBwcm9taXNlXHJcbiAgICBwcm9taXNlLmFib3J0ID0gYWJvcnRIYW5kbGVyIHx8ICgoKSA9PiB7fSk7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgJ3Byb21pc2UnOiBwcm9taXNlLFxyXG4gICAgICAgICdyZXNvbHZlJzogcmVzb2x2ZXIsXHJcbiAgICAgICAgJ3JlamVjdCc6IHJlamVjdGVyXHJcbiAgICB9O1xyXG59O1xyXG5cclxuLy8gU2VtdmVyIGNsYXNzIGZvciB2ZXJzaW9uIGhhbmRsaW5nXHJcbmV4cG9ydCBjbGFzcyBTZW12ZXIge1xyXG4gICAgY29uc3RydWN0b3IobWFqb3IsIG1pbm9yLCBwYXRjaCkge1xyXG4gICAgICAgIHRoaXMubWFqb3IgPSBtYWpvcjtcclxuICAgICAgICB0aGlzLm1pbm9yID0gbWlub3I7XHJcbiAgICAgICAgdGhpcy5wYXRjaCA9IHBhdGNoO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1ham9yfV8ke3RoaXMubWlub3J9XyR7dGhpcy5wYXRjaH1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBpT1MgZGV0ZWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0lPUygpIHtcclxuICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdpUGhvbmUnKSA+IDAgfHwgdWEuaW5kZXhPZignaVBhZCcpID4gMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElPU1NlbWV2ZXIoKSB7XHJcbiAgICBpZiAoaXNJT1MoKSkge1xyXG4gICAgICAgIGNvbnN0IGV4dHJhY3QgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTZW12ZXIoXHJcbiAgICAgICAgICAgIHBhcnNlSW50KGV4dHJhY3RbMV0gfHwgMCwgMTApLFxyXG4gICAgICAgICAgICBwYXJzZUludChleHRyYWN0WzJdIHx8IDAsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoZXh0cmFjdFszXSB8fCAwLCAxMClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vIEhhbGYgZmxvYXQgY29udmVyc2lvbiB1dGlsaXRpZXNcclxuZXhwb3J0IGNvbnN0IHRvSGFsZkZsb2F0ID0gRGF0YVV0aWxzLnRvSGFsZkZsb2F0LmJpbmQoRGF0YVV0aWxzKTtcclxuZXhwb3J0IGNvbnN0IGZyb21IYWxmRmxvYXQgPSBEYXRhVXRpbHMuZnJvbUhhbGZGbG9hdC5iaW5kKERhdGFVdGlscyk7XHJcblxyXG4vLyBEZWZhdWx0IHNwaGVyaWNhbCBoYXJtb25pY3MgY29tcHJlc3Npb24gcmFuZ2UgKGltcG9ydGVkIGZyb20gZW51bXMpXHJcbmltcG9ydCB7IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSB9IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcbmV4cG9ydCB7IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSB9O1xyXG5leHBvcnQgY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZSA9IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSAvIDIuMDtcclxuXHJcbi8vIFVuY29tcHJlc3MgZmxvYXQgYmFzZWQgb24gY29tcHJlc3Npb24gbGV2ZWxcclxuZXhwb3J0IGNvbnN0IHRvVW5jb21wcmVzc2VkRmxvYXQgPSAoZiwgY29tcHJlc3Npb25MZXZlbCwgaXNTSCA9IGZhbHNlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCkgPT4ge1xyXG4gICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gZjtcclxuICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMSB8fCAoY29tcHJlc3Npb25MZXZlbCA9PT0gMiAmJiAhaXNTSCkpIHtcclxuICAgICAgICByZXR1cm4gRGF0YVV0aWxzLmZyb21IYWxmRmxvYXQoZik7XHJcbiAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gZnJvbVVpbnQ4KGYsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIENvbnZlcnQgdG8gdWludDhcclxuZXhwb3J0IGNvbnN0IHRvVWludDggPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICB2ID0gY2xhbXAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KTtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuIGNsYW1wKE1hdGguZmxvb3IoKHYgLSByYW5nZU1pbikgLyByYW5nZSAqIDI1NSksIDAsIDI1NSk7XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGZyb20gdWludDhcclxuZXhwb3J0IGNvbnN0IGZyb21VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuICh2IC8gMjU1ICogcmFuZ2UgKyByYW5nZU1pbik7XHJcbn07XHJcblxyXG4vLyBIYWxmIGZsb2F0IHRvIHVpbnQ4XHJcbmV4cG9ydCBjb25zdCBmcm9tSGFsZkZsb2F0VG9VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b1VpbnQ4KGZyb21IYWxmRmxvYXQodiksIHJhbmdlTWluLCByYW5nZU1heCk7XHJcbn07XHJcblxyXG4vLyBVaW50OCB0byBoYWxmIGZsb2F0XHJcbmV4cG9ydCBjb25zdCBmcm9tVWludDhUb0hhbGZGbG9hdCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b0hhbGZGbG9hdChmcm9tVWludDgodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSk7XHJcbn07XHJcblxyXG4vLyBSZWFkIGZsb2F0IGZyb20gRGF0YVZpZXcgYmFzZWQgb24gY29tcHJlc3Npb24gbGV2ZWxcclxuZXhwb3J0IGNvbnN0IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsID0gKGRhdGFWaWV3LCBmbG9hdEluZGV4LCBjb21wcmVzc2lvbkxldmVsLCBpc1NIID0gZmFsc2UpID0+IHtcclxuICAgIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldEZsb2F0MzIoZmxvYXRJbmRleCAqIDQsIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAxIHx8IChjb21wcmVzc2lvbkxldmVsID09PSAyICYmICFpc1NIKSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MTYoZmxvYXRJbmRleCAqIDIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDgoZmxvYXRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGJldHdlZW4gY29tcHJlc3Npb24gbGV2ZWxzXHJcbmV4cG9ydCBjb25zdCBjb252ZXJ0QmV0d2VlbkNvbXByZXNzaW9uTGV2ZWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBub29wID0gKHYpID0+IHY7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCwgZnJvbUxldmVsLCB0b0xldmVsLCBpc1NIID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoZnJvbUxldmVsID09PSB0b0xldmVsKSByZXR1cm4gdmFsO1xyXG4gICAgICAgIGxldCBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcblxyXG4gICAgICAgIGlmIChmcm9tTGV2ZWwgPT09IDIgJiYgaXNTSCkge1xyXG4gICAgICAgICAgICBpZiAodG9MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tVWludDhUb0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGZyb21MZXZlbCA9PT0gMiB8fCBmcm9tTGV2ZWwgPT09IDEpIHtcclxuICAgICAgICAgICAgaWYgKHRvTGV2ZWwgPT09IDApIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NIKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICBlbHNlIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdFRvVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGZyb21MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpZiAodG9MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSB0b0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NIKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICAgICAgZWxzZSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvdXRwdXRDb252ZXJzaW9uRnVuYyh2YWwpO1xyXG4gICAgfTtcclxufSgpO1xyXG5cclxuLy8gQ29weSBiZXR3ZWVuIGJ1ZmZlcnNcclxuZXhwb3J0IGNvbnN0IGNvcHlCZXR3ZWVuQnVmZmVycyA9IChzcmNCdWZmZXIsIHNyY09mZnNldCwgZGVzdEJ1ZmZlciwgZGVzdE9mZnNldCwgYnl0ZUNvdW50ID0gMCkgPT4ge1xyXG4gICAgY29uc3Qgc3JjID0gbmV3IFVpbnQ4QXJyYXkoc3JjQnVmZmVyLCBzcmNPZmZzZXQpO1xyXG4gICAgY29uc3QgZGVzdCA9IG5ldyBVaW50OEFycmF5KGRlc3RCdWZmZXIsIGRlc3RPZmZzZXQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ291bnQ7IGkrKykge1xyXG4gICAgICAgIGRlc3RbaV0gPSBzcmNbaV07XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBGbG9hdCB0byBoYWxmIGZsb2F0IGNvbnZlcnNpb25cclxuZXhwb3J0IGNvbnN0IGZsb2F0VG9IYWxmID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBmbG9hdFZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KDEpO1xyXG4gICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZmxvYXRWaWV3LmJ1ZmZlcik7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIGZsb2F0Vmlld1swXSA9IHZhbDtcclxuICAgICAgICBjb25zdCB4ID0gaW50MzJWaWV3WzBdO1xyXG5cclxuICAgICAgICBsZXQgYml0cyA9ICh4ID4+IDE2KSAmIDB4ODAwMDtcclxuICAgICAgICBsZXQgbSA9ICh4ID4+IDEyKSAmIDB4MDdmZjtcclxuICAgICAgICBjb25zdCBlID0gKHggPj4gMjMpICYgMHhmZjtcclxuXHJcbiAgICAgICAgaWYgKGUgPCAxMDMpIHJldHVybiBiaXRzO1xyXG5cclxuICAgICAgICBpZiAoZSA+IDE0Mikge1xyXG4gICAgICAgICAgICBiaXRzIHw9IDB4N2MwMDtcclxuICAgICAgICAgICAgYml0cyB8PSAoKGUgPT0gMjU1KSA/IDAgOiAxKSAmJiAoeCAmIDB4MDA3ZmZmZmYpO1xyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlIDwgMTEzKSB7XHJcbiAgICAgICAgICAgIG0gfD0gMHgwODAwO1xyXG4gICAgICAgICAgICBiaXRzIHw9IChtID4+ICgxMTQgLSBlKSkgKyAoKG0gPj4gKDExMyAtIGUpKSAmIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJpdHMgfD0gKChlIC0gMTEyKSA8PCAxMCkgfCAobSA+PiAxKTtcclxuICAgICAgICBiaXRzICs9IG0gJiAxO1xyXG4gICAgICAgIHJldHVybiBiaXRzO1xyXG4gICAgfTtcclxufSgpO1xyXG5cclxuLy8gRW5jb2RlIGZsb2F0IGFzIHVpbnRcclxuZXhwb3J0IGNvbnN0IHVpbnRFbmNvZGVkRmxvYXQgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGZsb2F0VmlldyA9IG5ldyBGbG9hdDMyQXJyYXkoMSk7XHJcbiAgICBjb25zdCBpbnQzMlZpZXcgPSBuZXcgSW50MzJBcnJheShmbG9hdFZpZXcuYnVmZmVyKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZikge1xyXG4gICAgICAgIGZsb2F0Vmlld1swXSA9IGY7XHJcbiAgICAgICAgcmV0dXJuIGludDMyVmlld1swXTtcclxuICAgIH07XHJcbn0oKTtcclxuXHJcbi8vIFJHQkEgdG8gaW50ZWdlclxyXG5leHBvcnQgY29uc3QgcmdiYVRvSW50ZWdlciA9IGZ1bmN0aW9uKHIsIGcsIGIsIGEpIHtcclxuICAgIHJldHVybiByICsgKGcgPDwgOCkgKyAoYiA8PCAxNikgKyAoYSA8PCAyNCk7XHJcbn07XHJcblxyXG4vLyBSR0JBIGFycmF5IHRvIGludGVnZXJcclxuZXhwb3J0IGNvbnN0IHJnYmFBcnJheVRvSW50ZWdlciA9IGZ1bmN0aW9uKGFyciwgb2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gYXJyW29mZnNldF0gKyAoYXJyW29mZnNldCArIDFdIDw8IDgpICsgKGFycltvZmZzZXQgKyAyXSA8PCAxNikgKyAoYXJyW29mZnNldCArIDNdIDw8IDI0KTtcclxufTtcclxuXHJcbi8vIEJBU0VfQ09NUE9ORU5UX0NPVU5UIGZvciBVbmNvbXByZXNzZWRTcGxhdEFycmF5XHJcbmV4cG9ydCBjb25zdCBCQVNFX0NPTVBPTkVOVF9DT1VOVCA9IDE0O1xyXG4iLCIvKipcclxuICogVmFsaWRhdGlvblV0aWxzIC0gU2VjdXJpdHktZm9jdXNlZCB2YWxpZGF0aW9uIHV0aWxpdGllc1xyXG4gKlxyXG4gKiBDUklUSUNBTDogQWxsIGV4dGVybmFsIGlucHV0cyBNVVNUIGJlIHZhbGlkYXRlZCBiZWZvcmUgdXNlLlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBhbGxvd2xpc3QtYmFzZWQgdmFsaWRhdGlvbiBmb2xsb3dpbmcgc2VjdXJpdHkgYmVzdCBwcmFjdGljZXMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuXHJcbi8qKlxyXG4gKiBBbGxvd2VkIFVSTCBwcm90b2NvbHMgKGFsbG93bGlzdCBhcHByb2FjaClcclxuICovXHJcbmNvbnN0IEFMTE9XRURfUFJPVE9DT0xTID0gT2JqZWN0LmZyZWV6ZShbJ2h0dHBzOicsICdodHRwOicsICdibG9iOicsICdkYXRhOiddKTtcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBhbmQgc2FuaXRpemUgYSBVUkxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byB2YWxpZGF0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2Jhc2VVUkxdIC0gQmFzZSBVUkwgZm9yIHJlbGF0aXZlIFVSTHMgKGRlZmF1bHRzIHRvIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBTYW5pdGl6ZWQgYWJzb2x1dGUgVVJMXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgVVJMIGlzIGludmFsaWQgb3IgdXNlcyBkaXNhbGxvd2VkIHByb3RvY29sXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVcmwodXJsLCBiYXNlVVJMKSB7XHJcbiAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1VSTCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICd1cmwnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGFyc2VkO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBVc2UgYmFzZSBVUkwgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2Ugd2luZG93IGxvY2F0aW9uIChicm93c2VyIG9ubHkpXHJcbiAgICAgICAgY29uc3QgYmFzZSA9IGJhc2VVUkwgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLmhyZWYgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIHBhcnNlZCA9IG5ldyBVUkwodXJsLCBiYXNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYEludmFsaWQgVVJMIGZvcm1hdDogJHt1cmx9YCxcclxuICAgICAgICAgICAgJ3VybCcsXHJcbiAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBwcm90b2NvbCBhZ2FpbnN0IGFsbG93bGlzdFxyXG4gICAgaWYgKCFBTExPV0VEX1BST1RPQ09MUy5pbmNsdWRlcyhwYXJzZWQucHJvdG9jb2wpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYERpc2FsbG93ZWQgcHJvdG9jb2w6ICR7cGFyc2VkLnByb3RvY29sfS4gQWxsb3dlZCBwcm90b2NvbHM6ICR7QUxMT1dFRF9QUk9UT0NPTFMuam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICAndXJsLnByb3RvY29sJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZC5ocmVmO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgYXNzZXQgcGF0aCB0byBwcmV2ZW50IHBhdGggdHJhdmVyc2FsIGF0dGFja3NcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBGaWxlIHBhdGggdG8gdmFsaWRhdGVcclxuICogQHJldHVybnMge3N0cmluZ30gVmFsaWRhdGVkIHBhdGhcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXRoIGNvbnRhaW5zIHRyYXZlcnNhbCBzZXF1ZW5jZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFzc2V0UGF0aChwYXRoKSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggIT09ICdzdHJpbmcnIHx8IHBhdGgubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignQXNzZXQgcGF0aCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICdwYXRoJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHBhdGggdHJhdmVyc2FsIHNlcXVlbmNlc1xyXG4gICAgY29uc3QgZGFuZ2Vyb3VzUGF0dGVybnMgPSBbJy4uLycsICcuLlxcXFwnLCAnJTJlJTJlLycsICclMmUlMmVcXFxcJ107XHJcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IHBhdGgudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZGFuZ2Vyb3VzUGF0dGVybnMpIHtcclxuICAgICAgICBpZiAobm9ybWFsaXplZFBhdGguaW5jbHVkZXMocGF0dGVybikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBQYXRoIHRyYXZlcnNhbCBkZXRlY3RlZCBpbiBhc3NldCBwYXRoOiAke3BhdGh9YCxcclxuICAgICAgICAgICAgICAgICdwYXRoJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGZpbGUgZXh0ZW5zaW9uIGFnYWluc3QgYWxsb3dsaXN0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlbmFtZSAtIEZpbGVuYW1lIHRvIHZhbGlkYXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFeHRlbnNpb25zIC0gQXJyYXkgb2YgYWxsb3dlZCBleHRlbnNpb25zIChlLmcuLCBbJy5wbHknLCAnLmdsYiddKVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBWYWxpZGF0ZWQgZmlsZW5hbWVcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBleHRlbnNpb24gaXMgbm90IGFsbG93ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpbGVFeHRlbnNpb24oZmlsZW5hbWUsIGFsbG93ZWRFeHRlbnNpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIGZpbGVuYW1lICE9PSAnc3RyaW5nJyB8fCBmaWxlbmFtZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdGaWxlbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICdmaWxlbmFtZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhbGxvd2VkRXh0ZW5zaW9ucykgfHwgYWxsb3dlZEV4dGVuc2lvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgJ2FsbG93ZWRFeHRlbnNpb25zIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknLFxyXG4gICAgICAgICAgICAnYWxsb3dlZEV4dGVuc2lvbnMnXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlbmFtZS5zbGljZShmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZEFsbG93ZWQgPSBhbGxvd2VkRXh0ZW5zaW9ucy5tYXAoZXh0ID0+IGV4dC50b0xvd2VyQ2FzZSgpKTtcclxuXHJcbiAgICBpZiAoIW5vcm1hbGl6ZWRBbGxvd2VkLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgRmlsZSBleHRlbnNpb24gJHtleHRlbnNpb259IG5vdCBhbGxvd2VkLiBBbGxvd2VkOiAke2FsbG93ZWRFeHRlbnNpb25zLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgJ2ZpbGVuYW1lJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZpbGVuYW1lO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgbnVtZXJpYyB2YWx1ZSBpcyB3aXRoaW4gcmFuZ2VcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiAtIE1pbmltdW0gYWxsb3dlZCB2YWx1ZSAoaW5jbHVzaXZlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gTWF4aW11bSBhbGxvd2VkIHZhbHVlIChpbmNsdXNpdmUpXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBOYW1lIG9mIGZpZWxkIGZvciBlcnJvciBtZXNzYWdlc1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWxpZGF0ZWQgdmFsdWVcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiB2YWx1ZSBpcyBub3QgYSBudW1iZXIgb3Igb3V0IG9mIHJhbmdlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXJJblJhbmdlKHZhbHVlLCBtaW4sIG1heCwgZmllbGROYW1lKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCBpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSB2YWxpZCBudW1iZXJgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWx1ZSA8IG1pbiB8fCB2YWx1ZSA+IG1heCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBiZXR3ZWVuICR7bWlufSBhbmQgJHttYXh9LCBnb3QgJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGludGVnZXIgdmFsdWVcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbGlkYXRlZCBpbnRlZ2VyXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGFuIGludGVnZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUludGVnZXIodmFsdWUsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIHBvc2l0aXZlIGludGVnZXJcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbGlkYXRlZCBwb3NpdGl2ZSBpbnRlZ2VyXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGEgcG9zaXRpdmUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKHZhbHVlLCBmaWVsZE5hbWUpIHtcclxuICAgIHZhbGlkYXRlSW50ZWdlcih2YWx1ZSwgZmllbGROYW1lKTtcclxuXHJcbiAgICBpZiAodmFsdWUgPD0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBwb3NpdGl2ZSwgZ290ICR7dmFsdWV9YCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBvYmplY3QgaGFzIHJlcXVpcmVkIHByb3BlcnRpZXNcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IG9iaiAtIE9iamVjdCB0byB2YWxpZGF0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSByZXF1aXJlZFByb3BzIC0gQXJyYXkgb2YgcmVxdWlyZWQgcHJvcGVydHkgbmFtZXNcclxuICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWUgLSBOYW1lIG9mIG9iamVjdCBmb3IgZXJyb3IgbWVzc2FnZXNcclxuICogQHJldHVybnMge29iamVjdH0gVmFsaWRhdGVkIG9iamVjdFxyXG4gKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIG9iamVjdCBpcyBpbnZhbGlkIG9yIG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmVxdWlyZWRQcm9wZXJ0aWVzKG9iaiwgcmVxdWlyZWRQcm9wcywgb2JqZWN0TmFtZSkge1xyXG4gICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9IG11c3QgYmUgYW4gb2JqZWN0YCxcclxuICAgICAgICAgICAgb2JqZWN0TmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBwcm9wIG9mIHJlcXVpcmVkUHJvcHMpIHtcclxuICAgICAgICBpZiAoIShwcm9wIGluIG9iaikgfHwgb2JqW3Byb3BdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGAke29iamVjdE5hbWV9IG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6ICR7cHJvcH1gLFxyXG4gICAgICAgICAgICAgICAgYCR7b2JqZWN0TmFtZX0uJHtwcm9wfWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGFycmF5IGJ1ZmZlclxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXIgLSBCdWZmZXIgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluU2l6ZT0wXSAtIE1pbmltdW0gc2l6ZSBpbiBieXRlc1xyXG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IFZhbGlkYXRlZCBidWZmZXJcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBidWZmZXIgaXMgaW52YWxpZCBvciB0b28gc21hbGxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFycmF5QnVmZmVyKGJ1ZmZlciwgZmllbGROYW1lLCBtaW5TaXplID0gMCkge1xyXG4gICAgaWYgKCEoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyYCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYnVmZmVyLmJ5dGVMZW5ndGggPCBtaW5TaXplKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGF0IGxlYXN0ICR7bWluU2l6ZX0gYnl0ZXMsIGdvdCAke2J1ZmZlci5ieXRlTGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ1ZmZlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGVudW0gdmFsdWUgYWdhaW5zdCBhbGxvd2VkIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtBcnJheX0gYWxsb3dlZFZhbHVlcyAtIEFycmF5IG9mIGFsbG93ZWQgdmFsdWVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBOYW1lIG9mIGZpZWxkIGZvciBlcnJvciBtZXNzYWdlc1xyXG4gKiBAcmV0dXJucyB7Kn0gVmFsaWRhdGVkIHZhbHVlXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGluIGFsbG93ZWQgdmFsdWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbnVtKHZhbHVlLCBhbGxvd2VkVmFsdWVzLCBmaWVsZE5hbWUpIHtcclxuICAgIGlmICghYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyh2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgb25lIG9mOiAke2FsbG93ZWRWYWx1ZXMuam9pbignLCAnKX0uIEdvdDogJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcXVpcmVkPXRydWVdIC0gV2hldGhlciBjYWxsYmFjayBpcyByZXF1aXJlZFxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258bnVsbH0gVmFsaWRhdGVkIGNhbGxiYWNrIG9yIG51bGwgaWYgbm90IHJlcXVpcmVkIGFuZCBub3QgcHJvdmlkZWRcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBjYWxsYmFjayBpcyByZXF1aXJlZCBidXQgbm90IGEgZnVuY3Rpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGNhbGxiYWNrLCBmaWVsZE5hbWUsIHJlcXVpcmVkID0gdHJ1ZSkge1xyXG4gICAgaWYgKGNhbGxiYWNrID09PSBudWxsIHx8IGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gaXMgcmVxdWlyZWRgLFxyXG4gICAgICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSBmdW5jdGlvbmAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhbGxiYWNrO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgaGV4IGNvbG9yIHN0cmluZ1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBDb2xvciBzdHJpbmcgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFZhbGlkYXRlZCBjb2xvciBzdHJpbmdcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBjb2xvciBmb3JtYXQgaXMgaW52YWxpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSGV4Q29sb3IodmFsdWUsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSBzdHJpbmdgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGhleENvbG9yUmVnZXggPSAvXigjfDB4KVswLTlBLUZhLWZdezZ9JC9pO1xyXG4gICAgaWYgKCFoZXhDb2xvclJlZ2V4LnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgaGV4IGNvbG9yIChlLmcuLCAjRkZGRkZGIG9yIDB4RkZGRkZGKWAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgRE9NIGVsZW1lbnRcclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIEVsZW1lbnQgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gVmFsaWRhdGVkIGVsZW1lbnRcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBlbGVtZW50IGlzIG5vdCBhIHZhbGlkIERPTSBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVET01FbGVtZW50KGVsZW1lbnQsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgSFRNTCBlbGVtZW50YCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxufVxyXG4iLCIvKipcclxuICogT2JqZWN0UG9vbCAtIE1lbW9yeS1lZmZpY2llbnQgb2JqZWN0IHBvb2xpbmdcclxuICpcclxuICogUmVkdWNlcyBnYXJiYWdlIGNvbGxlY3Rpb24gcHJlc3N1cmUgYnkgcmV1c2luZyBvYmplY3RzIGluc3RlYWQgb2ZcclxuICogcmVwZWF0ZWRseSBhbGxvY2F0aW5nIGFuZCBkZWFsbG9jYXRpbmcgdGhlbS4gQ3JpdGljYWwgZm9yIHJlYWwtdGltZSByZW5kZXJpbmcuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yMywgTWF0cml4NCwgUXVhdGVybmlvbiwgRXVsZXIgfSBmcm9tICd0aHJlZSc7XHJcblxyXG4vKipcclxuICogR2VuZXJpYyBvYmplY3QgcG9vbFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9iamVjdFBvb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gT2JqZWN0UG9vbFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSAtIEZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBuZXcgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzZXQgLSBGdW5jdGlvbiB0aGF0IHJlc2V0cyBhbiBvYmplY3QgdG8gaW5pdGlhbCBzdGF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtpbml0aWFsU2l6ZT0xMF0gLSBOdW1iZXIgb2Ygb2JqZWN0cyB0byBwcmUtYWxsb2NhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSwgcmVzZXQsIGluaXRpYWxTaXplID0gMTApIHtcclxuICAgICAgICB0aGlzLl9mYWN0b3J5ID0gZmFjdG9yeTtcclxuICAgICAgICB0aGlzLl9yZXNldCA9IHJlc2V0O1xyXG4gICAgICAgIHRoaXMuX3Bvb2wgPSBbXTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuX21heFNpemUgPSBpbml0aWFsU2l6ZSAqIDEwOyAvLyBQcmV2ZW50IHVuYm91bmRlZCBncm93dGhcclxuXHJcbiAgICAgICAgLy8gUHJlLWFsbG9jYXRlIGluaXRpYWwgb2JqZWN0c1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9wb29sLnB1c2goZmFjdG9yeSgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3F1aXJlIGFuIG9iamVjdCBmcm9tIHRoZSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gUG9vbGVkIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhY3F1aXJlKCkge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCsrO1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvb2wucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvb2wgZXhoYXVzdGVkLCBjcmVhdGUgbmV3IG9iamVjdFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWN0b3J5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWxlYXNlIGFuIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sXHJcbiAgICAgKiBAcGFyYW0geyp9IG9iaiAtIE9iamVjdCB0byByZXR1cm4gdG8gcG9vbFxyXG4gICAgICovXHJcbiAgICByZWxlYXNlKG9iaikge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZC0tO1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sLmxlbmd0aCA8IHRoaXMuX21heFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzZXQob2JqKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9vbC5wdXNoKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHBvb2wgaXMgYXQgbWF4IHNpemUsIGxldCBvYmplY3QgYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgbXVsdGlwbGUgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gb2JqZWN0cyAtIE9iamVjdHMgdG8gcmV0dXJuIHRvIHBvb2xcclxuICAgICAqL1xyXG4gICAgcmVsZWFzZUFsbChvYmplY3RzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygb2JqZWN0cykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2Uob2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcG9vbCBzdGF0aXN0aWNzXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBQb29sIHN0YXRzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZTogdGhpcy5fcG9vbC5sZW5ndGgsXHJcbiAgICAgICAgICAgIGFsbG9jYXRlZDogdGhpcy5fYWxsb2NhdGVkLFxyXG4gICAgICAgICAgICBtYXhTaXplOiB0aGlzLl9tYXhTaXplXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoZSBwb29sIGFuZCByZWxlYXNlIGFsbCBvYmplY3RzXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9vbC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmUtY29uZmlndXJlZCBwb29scyBmb3IgY29tbW9uIFRocmVlLmpzIG9iamVjdHNcclxuICovXHJcblxyXG4vKipcclxuICogVmVjdG9yMyBwb29sXHJcbiAqIEB0eXBlIHtPYmplY3RQb29sfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZlY3RvcjNQb29sID0gbmV3IE9iamVjdFBvb2woXHJcbiAgICAoKSA9PiBuZXcgVmVjdG9yMygpLFxyXG4gICAgKHYpID0+IHYuc2V0KDAsIDAsIDApLFxyXG4gICAgNTAgLy8gUHJlLWFsbG9jYXRlIDUwIHZlY3RvcnNcclxuKTtcclxuXHJcbi8qKlxyXG4gKiBNYXRyaXg0IHBvb2xcclxuICogQHR5cGUge09iamVjdFBvb2x9XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0cml4NFBvb2wgPSBuZXcgT2JqZWN0UG9vbChcclxuICAgICgpID0+IG5ldyBNYXRyaXg0KCksXHJcbiAgICAobSkgPT4gbS5pZGVudGl0eSgpLFxyXG4gICAgMjAgLy8gUHJlLWFsbG9jYXRlIDIwIG1hdHJpY2VzXHJcbik7XHJcblxyXG4vKipcclxuICogUXVhdGVybmlvbiBwb29sXHJcbiAqIEB0eXBlIHtPYmplY3RQb29sfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHF1YXRlcm5pb25Qb29sID0gbmV3IE9iamVjdFBvb2woXHJcbiAgICAoKSA9PiBuZXcgUXVhdGVybmlvbigpLFxyXG4gICAgKHEpID0+IHEuc2V0KDAsIDAsIDAsIDEpLFxyXG4gICAgMzAgLy8gUHJlLWFsbG9jYXRlIDMwIHF1YXRlcm5pb25zXHJcbik7XHJcblxyXG4vKipcclxuICogRXVsZXIgcG9vbFxyXG4gKiBAdHlwZSB7T2JqZWN0UG9vbH1cclxuICovXHJcbmV4cG9ydCBjb25zdCBldWxlclBvb2wgPSBuZXcgT2JqZWN0UG9vbChcclxuICAgICgpID0+IG5ldyBFdWxlcigpLFxyXG4gICAgKGUpID0+IGUuc2V0KDAsIDAsIDApLFxyXG4gICAgMzAgLy8gUHJlLWFsbG9jYXRlIDMwIGV1bGVyc1xyXG4pO1xyXG5cclxuLyoqXHJcbiAqIFNjb3BlZCBwb29sIGFsbG9jYXRpb24gaGVscGVyXHJcbiAqXHJcbiAqIEF1dG9tYXRpY2FsbHkgcmVsZWFzZXMgcG9vbGVkIG9iamVjdHMgd2hlbiBzY29wZSBleGl0cy5cclxuICogVXNlIHdpdGggdHJ5L2ZpbmFsbHkgdG8gZW5zdXJlIGNsZWFudXAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGNvbnN0IHNjb3BlID0gbmV3IFBvb2xTY29wZSgpO1xyXG4gKiB0cnkge1xyXG4gKiAgIGNvbnN0IHYxID0gc2NvcGUudmVjdG9yMygpO1xyXG4gKiAgIGNvbnN0IHYyID0gc2NvcGUudmVjdG9yMygpO1xyXG4gKiAgIC8vIFVzZSB2ZWN0b3JzLi4uXHJcbiAqIH0gZmluYWxseSB7XHJcbiAqICAgc2NvcGUucmVsZWFzZUFsbCgpO1xyXG4gKiB9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUG9vbFNjb3BlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNxdWlyZSBhIFZlY3RvcjMgZnJvbSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7VmVjdG9yM30gUG9vbGVkIHZlY3RvclxyXG4gICAgICovXHJcbiAgICB2ZWN0b3IzKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHZlY3RvcjNQb29sLmFjcXVpcmUoKTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQucHVzaCh7IHBvb2w6IHZlY3RvcjNQb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjcXVpcmUgYSBNYXRyaXg0IGZyb20gcG9vbFxyXG4gICAgICogQHJldHVybnMge01hdHJpeDR9IFBvb2xlZCBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgbWF0cml4NCgpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBtYXRyaXg0UG9vbC5hY3F1aXJlKCk7XHJcbiAgICAgICAgdGhpcy5fYWxsb2NhdGVkLnB1c2goeyBwb29sOiBtYXRyaXg0UG9vbCwgb2JqIH0pO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3F1aXJlIGEgUXVhdGVybmlvbiBmcm9tIHBvb2xcclxuICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBQb29sZWQgcXVhdGVybmlvblxyXG4gICAgICovXHJcbiAgICBxdWF0ZXJuaW9uKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHF1YXRlcm5pb25Qb29sLmFjcXVpcmUoKTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQucHVzaCh7IHBvb2w6IHF1YXRlcm5pb25Qb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjcXVpcmUgYW4gRXVsZXIgZnJvbSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7RXVsZXJ9IFBvb2xlZCBldWxlclxyXG4gICAgICovXHJcbiAgICBldWxlcigpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBldWxlclBvb2wuYWNxdWlyZSgpO1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZC5wdXNoKHsgcG9vbDogZXVsZXJQb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgYWxsIG9iamVjdHMgYWxsb2NhdGVkIGluIHRoaXMgc2NvcGVcclxuICAgICAqL1xyXG4gICAgcmVsZWFzZUFsbCgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgcG9vbCwgb2JqIH0gb2YgdGhpcy5fYWxsb2NhdGVkKSB7XHJcbiAgICAgICAgICAgIHBvb2wucmVsZWFzZShvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjb3VudCBvZiBhbGxvY2F0ZWQgb2JqZWN0cyBpbiB0aGlzIHNjb3BlXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBOdW1iZXIgb2YgYWxsb2NhdGVkIG9iamVjdHNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsb2NhdGVkQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsbG9jYXRlZC5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2R1bGUtbGV2ZWwgdGVtcG9yYXJ5IG9iamVjdHMgZm9yIGhvdC1wYXRoIHJldXNlXHJcbiAqIElNUE9SVEFOVDogVGhlc2UgYXJlIE5PVCB0aHJlYWQtc2FmZS4gT25seSB1c2UgaW4gc2luZ2xlLXRocmVhZGVkIGNvbnRleHRzLlxyXG4gKiBSZXNldCB0aGVzZSBiZWZvcmUgdXNlIHRvIGF2b2lkIHN0YWxlIGRhdGEuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdGVtcFZlY3RvcjNBID0gbmV3IFZlY3RvcjMoKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBWZWN0b3IzQiA9IG5ldyBWZWN0b3IzKCk7XHJcbmV4cG9ydCBjb25zdCB0ZW1wVmVjdG9yM0MgPSBuZXcgVmVjdG9yMygpO1xyXG5leHBvcnQgY29uc3QgdGVtcE1hdHJpeDRBID0gbmV3IE1hdHJpeDQoKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBNYXRyaXg0QiA9IG5ldyBNYXRyaXg0KCk7XHJcbmV4cG9ydCBjb25zdCB0ZW1wUXVhdGVybmlvbkEgPSBuZXcgUXVhdGVybmlvbigpO1xyXG5leHBvcnQgY29uc3QgdGVtcFF1YXRlcm5pb25CID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcG9vbCBzdGF0aXN0aWNzIGZvciBhbGwgcHJlLWNvbmZpZ3VyZWQgcG9vbHNcclxuICogQHJldHVybnMge29iamVjdH0gU3RhdGlzdGljcyBmb3IgYWxsIHBvb2xzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbFN0YXRzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2ZWN0b3IzOiB2ZWN0b3IzUG9vbC5nZXRTdGF0cygpLFxyXG4gICAgICAgIG1hdHJpeDQ6IG1hdHJpeDRQb29sLmdldFN0YXRzKCksXHJcbiAgICAgICAgcXVhdGVybmlvbjogcXVhdGVybmlvblBvb2wuZ2V0U3RhdHMoKSxcclxuICAgICAgICBldWxlcjogZXVsZXJQb29sLmdldFN0YXRzKClcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEaXNwb3NlIGFsbCBwcmUtY29uZmlndXJlZCBwb29sc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VBbGxQb29scygpIHtcclxuICAgIHZlY3RvcjNQb29sLmRpc3Bvc2UoKTtcclxuICAgIG1hdHJpeDRQb29sLmRpc3Bvc2UoKTtcclxuICAgIHF1YXRlcm5pb25Qb29sLmRpc3Bvc2UoKTtcclxuICAgIGV1bGVyUG9vbC5kaXNwb3NlKCk7XHJcbn1cclxuIiwiLyoqXHJcbiAqIEJsb2JVcmxNYW5hZ2VyIC0gU2VjdXJlIGJsb2IgVVJMIGxpZmVjeWNsZSBtYW5hZ2VtZW50XHJcbiAqXHJcbiAqIFRyYWNrcyBibG9iIFVSTHMgYW5kIGVuc3VyZXMgdGhleSBhcmUgcmV2b2tlZCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xyXG4gKiBhbmQgdW5hdXRob3JpemVkIGFjY2Vzcy4gQ3JpdGljYWwgZm9yIHNlY3VyaXR5IGFuZCByZXNvdXJjZSBtYW5hZ2VtZW50LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignQmxvYlVybE1hbmFnZXInKTtcclxuXHJcbi8qKlxyXG4gKiBCbG9iVXJsTWFuYWdlciAtIE1hbmFnZXMgYmxvYiBVUkwgbGlmZWN5Y2xlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmxvYlVybE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwIG9mIGJsb2IgVVJMIHRvIG1ldGFkYXRhXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91cmxzID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIG1hbmFnZXIgaGFzIGJlZW4gZGlzcG9zZWRcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnQgbWFuYWdlciBpcyBub3QgZGlzcG9zZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgbWFuYWdlciBpcyBkaXNwb3NlZFxyXG4gICAgICovXHJcbiAgICBfYXNzZXJ0Tm90RGlzcG9zZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmxvYlVybE1hbmFnZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBibG9iIFVSTCBmcm9tIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Jsb2J8QXJyYXlCdWZmZXJ8VWludDhBcnJheX0gZGF0YSAtIERhdGEgdG8gY3JlYXRlIGJsb2IgZnJvbVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1pbWVUeXBlIC0gTUlNRSB0eXBlIChlLmcuLCAnbW9kZWwvZ2x0Zi1iaW5hcnknKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYWJlbF0gLSBPcHRpb25hbCBsYWJlbCBmb3IgZGVidWdnaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBCbG9iIFVSTFxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBkYXRhIG9yIG1pbWVUeXBlIGlzIGludmFsaWRcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQmxvYlVybChkYXRhLCBtaW1lVHlwZSwgbGFiZWwgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIG1pbWVUeXBlXHJcbiAgICAgICAgaWYgKHR5cGVvZiBtaW1lVHlwZSAhPT0gJ3N0cmluZycgfHwgbWltZVR5cGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnbWltZVR5cGUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ21pbWVUeXBlJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBkYXRhIHRvIEJsb2IgaWYgbmVlZGVkXHJcbiAgICAgICAgbGV0IGJsb2I7XHJcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIGJsb2IgPSBkYXRhO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsgdHlwZTogbWltZVR5cGUgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICdkYXRhIG11c3QgYmUgQmxvYiwgQXJyYXlCdWZmZXIsIG9yIFVpbnQ4QXJyYXknLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYmxvYiBVUkxcclxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cclxuICAgICAgICAvLyBUcmFjayBtZXRhZGF0YVxyXG4gICAgICAgIHRoaXMuX3VybHMuc2V0KHVybCwge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIG1pbWVUeXBlLFxyXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgfHwgJ3VubGFiZWxlZCcsXHJcbiAgICAgICAgICAgIHNpemU6IGJsb2Iuc2l6ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0ZWQgYmxvYiBVUkw6ICR7bGFiZWwgfHwgdXJsLnN1YnN0cmluZygwLCA1MCl9LCBzaXplOiAke2Jsb2Iuc2l6ZX0gYnl0ZXNgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIGFuIGV4dGVybmFsbHkgY3JlYXRlZCBibG9iIFVSTCBmb3IgdHJhY2tpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gQmxvYiBVUkwgdG8gdHJhY2tcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFiZWxdIC0gT3B0aW9uYWwgbGFiZWwgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBVUkwgaXMgbm90IGEgYmxvYiBVUkxcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJCbG9iVXJsKHVybCwgbGFiZWwgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJyB8fCAhdXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICd1cmwgbXVzdCBiZSBhIHZhbGlkIGJsb2IgVVJMJyxcclxuICAgICAgICAgICAgICAgICd1cmwnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3VybHMuaGFzKHVybCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXJscy5zZXQodXJsLCB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsIHx8ICdyZWdpc3RlcmVkLWV4dGVybmFsJyxcclxuICAgICAgICAgICAgICAgIHNpemU6IDBcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJlZ2lzdGVyZWQgZXh0ZXJuYWwgYmxvYiBVUkw6ICR7bGFiZWwgfHwgdXJsLnN1YnN0cmluZygwLCA1MCl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV2b2tlIGEgYmxvYiBVUkwgYW5kIHJlbW92ZSBmcm9tIHRyYWNraW5nXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMIHRvIHJldm9rZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHdhcyB0cmFja2VkIGFuZCByZXZva2VkXHJcbiAgICAgKi9cclxuICAgIHJldm9rZUJsb2JVcmwodXJsKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3VybHMuaGFzKHVybCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLl91cmxzLmdldCh1cmwpO1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VybHMuZGVsZXRlKHVybCk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJldm9rZWQgYmxvYiBVUkw6ICR7bWV0YWRhdGEubGFiZWx9LCBhZ2U6ICR7RGF0ZS5ub3coKSAtIG1ldGFkYXRhLmNyZWF0ZWRBdH1tc2ApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldm9rZSBhbGwgYmxvYiBVUkxzIGFuZCBjbGVhciB0cmFja2luZ1xyXG4gICAgICovXHJcbiAgICByZXZva2VBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXZva2luZyAke3RoaXMuX3VybHMuc2l6ZX0gYmxvYiBVUkxzYCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgdXJsIG9mIHRoaXMuX3VybHMua2V5cygpKSB7XHJcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3VybHMuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0cmFja2VkIGJsb2IgVVJMIG1ldGFkYXRhXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fG51bGx9IE1ldGFkYXRhIG9yIG51bGwgaWYgbm90IHRyYWNrZWRcclxuICAgICAqL1xyXG4gICAgZ2V0TWV0YWRhdGEodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VybHMuZ2V0KHVybCkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgdHJhY2tlZCBibG9iIFVSTHNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8e3VybDogc3RyaW5nLCBtZXRhZGF0YTogb2JqZWN0fT59IEFycmF5IG9mIFVSTCBpbmZvXHJcbiAgICAgKi9cclxuICAgIGdldEFsbFRyYWNrZWRVcmxzKCkge1xyXG4gICAgICAgIGNvbnN0IHVybHMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IFt1cmwsIG1ldGFkYXRhXSBvZiB0aGlzLl91cmxzLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICB1cmxzLnB1c2goeyB1cmwsIG1ldGFkYXRhIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJscztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBzdGF0aXN0aWNzIGFib3V0IHRyYWNrZWQgVVJMc1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU2l6ZSA9IDA7XHJcbiAgICAgICAgbGV0IG9sZGVzdEFnZSA9IDA7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXRhZGF0YSBvZiB0aGlzLl91cmxzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICAgIHRvdGFsU2l6ZSArPSBtZXRhZGF0YS5zaXplO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgICAgIGlmIChhZ2UgPiBvbGRlc3RBZ2UpIHtcclxuICAgICAgICAgICAgICAgIG9sZGVzdEFnZSA9IGFnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY291bnQ6IHRoaXMuX3VybHMuc2l6ZSxcclxuICAgICAgICAgICAgdG90YWxTaXplLFxyXG4gICAgICAgICAgICBvbGRlc3RBZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV2b2tlIGJsb2IgVVJMcyBvbGRlciB0aGFuIHNwZWNpZmllZCBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4QWdlTXMgLSBNYXhpbXVtIGFnZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IE51bWJlciBvZiBVUkxzIHJldm9rZWRcclxuICAgICAqL1xyXG4gICAgcmV2b2tlT2xkZXJUaGFuKG1heEFnZU1zKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCB0b1Jldm9rZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFt1cmwsIG1ldGFkYXRhXSBvZiB0aGlzLl91cmxzLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgICAgIGlmIChhZ2UgPiBtYXhBZ2VNcykge1xyXG4gICAgICAgICAgICAgICAgdG9SZXZva2UucHVzaCh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiB0b1Jldm9rZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJldm9rZUJsb2JVcmwodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0b1Jldm9rZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBSZXZva2VkICR7dG9SZXZva2UubGVuZ3RofSBibG9iIFVSTHMgb2xkZXIgdGhhbiAke21heEFnZU1zfW1zYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG9SZXZva2UubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBVUkwgaXMgYmVpbmcgdHJhY2tlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gY2hlY2tcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBpcyB0cmFja2VkXHJcbiAgICAgKi9cclxuICAgIGlzVHJhY2tlZCh1cmwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXJscy5oYXModXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgbWFuYWdlciBhbmQgcmV2b2tlIGFsbCBVUkxzXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzcG9zaW5nIEJsb2JVcmxNYW5hZ2VyJyk7XHJcbiAgICAgICAgdGhpcy5yZXZva2VBbGwoKTtcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgYmxvYiBVUkwgbWFuYWdlciBpbnN0YW5jZVxyXG4gKiBAdHlwZSB7QmxvYlVybE1hbmFnZXJ9XHJcbiAqL1xyXG5jb25zdCBnbG9iYWxCbG9iVXJsTWFuYWdlciA9IG5ldyBCbG9iVXJsTWFuYWdlcigpO1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZ2xvYmFsIGJsb2IgVVJMIG1hbmFnZXJcclxuICogQHJldHVybnMge0Jsb2JVcmxNYW5hZ2VyfSBHbG9iYWwgbWFuYWdlciBpbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbEJsb2JVcmxNYW5hZ2VyKCkge1xyXG4gICAgcmV0dXJuIGdsb2JhbEJsb2JVcmxNYW5hZ2VyO1xyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJsb2IgVVJMIHdpdGggYXV0b21hdGljIHRyYWNraW5nXHJcbiAqXHJcbiAqIEBwYXJhbSB7QmxvYnxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fSBkYXRhIC0gRGF0YSB0byBjcmVhdGUgYmxvYiBmcm9tXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtaW1lVHlwZSAtIE1JTUUgdHlwZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXSAtIE9wdGlvbmFsIGxhYmVsIGZvciBkZWJ1Z2dpbmdcclxuICogQHJldHVybnMge3N0cmluZ30gQmxvYiBVUkxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFja2VkQmxvYlVybChkYXRhLCBtaW1lVHlwZSwgbGFiZWwpIHtcclxuICAgIHJldHVybiBnbG9iYWxCbG9iVXJsTWFuYWdlci5jcmVhdGVCbG9iVXJsKGRhdGEsIG1pbWVUeXBlLCBsYWJlbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gcmV2b2tlIGEgYmxvYiBVUkxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMIHRvIHJldm9rZVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgd2FzIHRyYWNrZWQgYW5kIHJldm9rZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXZva2VUcmFja2VkQmxvYlVybCh1cmwpIHtcclxuICAgIHJldHVybiBnbG9iYWxCbG9iVXJsTWFuYWdlci5yZXZva2VCbG9iVXJsKHVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJsb2JVcmxNYW5hZ2VyO1xyXG4iLCIvKipcclxuICogUmVuZGVyTG9vcCAtIEZyYW1lLWluZGVwZW5kZW50IGFuaW1hdGlvbiBsb29wIHdpdGggYnVkZ2V0IG1hbmFnZW1lbnRcclxuICpcclxuICogUHJvdmlkZXMgYSByb2J1c3QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGxvb3Agd2l0aDpcclxuICogLSBEZWx0YSB0aW1lIGNhbGN1bGF0aW9uIGZvciBmcmFtZS1pbmRlcGVuZGVudCB1cGRhdGVzXHJcbiAqIC0gRnJhbWUgYnVkZ2V0IG1hbmFnZW1lbnQgdG8gcHJldmVudCBmcmFtZSBkcm9wc1xyXG4gKiAtIERlZmVycmVkIHRhc2sgZXhlY3V0aW9uXHJcbiAqIC0gUGVyZm9ybWFuY2UgbW9uaXRvcmluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignUmVuZGVyTG9vcCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlbmRlckxvb3AgLSBNYW5hZ2VzIGFuaW1hdGlvbiBmcmFtZSBsb29wXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVuZGVyTG9vcCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJlbmRlckxvb3BcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUZuIC0gVXBkYXRlIGZ1bmN0aW9uIGNhbGxlZCBlYWNoIGZyYW1lIHdpdGggZGVsdGFUaW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJGbiAtIFJlbmRlciBmdW5jdGlvbiBjYWxsZWQgZWFjaCBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnRhcmdldEZwcz02MF0gLSBUYXJnZXQgZnJhbWVzIHBlciBzZWNvbmRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhEZWx0YVRpbWU9MC4xXSAtIE1heGltdW0gZGVsdGEgdGltZSBpbiBzZWNvbmRzIChwcmV2ZW50cyBzcGlyYWwgb2YgZGVhdGgpXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZUZuLCByZW5kZXJGbiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlID0gdXBkYXRlRm47XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyID0gcmVuZGVyRm47XHJcblxyXG4gICAgICAgIHRoaXMuX3RhcmdldEZwcyA9IG9wdGlvbnMudGFyZ2V0RnBzIHx8IDYwO1xyXG4gICAgICAgIHRoaXMuX21heERlbHRhVGltZSA9IG9wdGlvbnMubWF4RGVsdGFUaW1lIHx8IDAuMTsgLy8gMTAwbXMgbWF4XHJcbiAgICAgICAgdGhpcy5fZnJhbWVCdWRnZXQgPSAxMDAwIC8gdGhpcy5fdGFyZ2V0RnBzOyAvLyBtcyBwZXIgZnJhbWVcclxuXHJcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JhZklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVmZXJyZWRUYXNrcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBQZXJmb3JtYW5jZSB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuX2Zwc0hpc3RvcnkgPSBbXTtcclxuICAgICAgICB0aGlzLl9mcHNIaXN0b3J5U2l6ZSA9IDYwOyAvLyBUcmFjayBsYXN0IDYwIGZyYW1lc1xyXG4gICAgICAgIHRoaXMuX2xhc3RGcHNVcGRhdGUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRGcHMgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgdGhlIHJlbmRlciBsb29wXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZW5kZXJMb29wIGFscmVhZHkgcnVubmluZycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ291bnQgPSAwO1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdSZW5kZXJMb29wIHN0YXJ0ZWQnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcCB0aGUgcmVuZGVyIGxvb3BcclxuICAgICAqL1xyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcmFmSWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmFmSWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9yYWZJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbyhgUmVuZGVyTG9vcCBzdG9wcGVkIGFmdGVyICR7dGhpcy5fZnJhbWVDb3VudH0gZnJhbWVzYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWluIGxvb3AgdGlja1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3RpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZyYW1lU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBjb25zdCByYXdEZWx0YVRpbWUgPSAoZnJhbWVTdGFydCAtIHRoaXMuX2xhc3RUaW1lKSAvIDEwMDA7IC8vIENvbnZlcnQgdG8gc2Vjb25kc1xyXG5cclxuICAgICAgICAvLyBDbGFtcCBkZWx0YSB0aW1lIHRvIHByZXZlbnQgc3BpcmFsIG9mIGRlYXRoXHJcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gTWF0aC5taW4ocmF3RGVsdGFUaW1lLCB0aGlzLl9tYXhEZWx0YVRpbWUpO1xyXG5cclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IGZyYW1lU3RhcnQ7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVDb3VudCsrO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgbG9naWNcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlKGRlbHRhVGltZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW5kZXJcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGRlZmVycmVkIHRhc2tzIGlmIHRpbWUgcGVybWl0c1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZUVsYXBzZWQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGZyYW1lU3RhcnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSB0aGlzLl9mcmFtZUJ1ZGdldCAtIGZyYW1lRWxhcHNlZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lID4gMSAmJiB0aGlzLl9kZWZlcnJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NEZWZlcnJlZFRhc2tzKHJlbWFpbmluZ1RpbWUgLSAxKTsgLy8gTGVhdmUgMW1zIG1hcmdpblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgRlBTIHRyYWNraW5nXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUZwc1RyYWNraW5nKHBlcmZvcm1hbmNlLm5vdygpIC0gZnJhbWVTdGFydCk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gcmVuZGVyIGxvb3A6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBDb250aW51ZSBsb29wIGRlc3BpdGUgZXJyb3JcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNjaGVkdWxlIG5leHQgZnJhbWVcclxuICAgICAgICB0aGlzLl9yYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl90aWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgRlBTIHRyYWNraW5nXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lVGltZSAtIFRpbWUgdGFrZW4gZm9yIHRoaXMgZnJhbWUgaW4gbXNcclxuICAgICAqL1xyXG4gICAgX3VwZGF0ZUZwc1RyYWNraW5nKGZyYW1lVGltZSkge1xyXG4gICAgICAgIHRoaXMuX2Zwc0hpc3RvcnkucHVzaCgxMDAwIC8gZnJhbWVUaW1lKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2Zwc0hpc3RvcnkubGVuZ3RoID4gdGhpcy5fZnBzSGlzdG9yeVNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZnBzSGlzdG9yeS5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIEZQUyBldmVyeSBzZWNvbmRcclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBpZiAobm93IC0gdGhpcy5fbGFzdEZwc1VwZGF0ZSA+IDEwMDApIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudEZwcyA9IHRoaXMuX2Zwc0hpc3RvcnkucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyB0aGlzLl9mcHNIaXN0b3J5Lmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEZwc1VwZGF0ZSA9IG5vdztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIGRlZmVycmVkIHRhc2tzIHdpdGhpbiB0aW1lIGJ1ZGdldFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUaW1lIC0gTWF4aW11bSB0aW1lIGluIG1zIHRvIHNwZW5kIG9uIHRhc2tzXHJcbiAgICAgKi9cclxuICAgIF9wcm9jZXNzRGVmZXJyZWRUYXNrcyhtYXhUaW1lKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIHdoaWxlICh0aGlzLl9kZWZlcnJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lID49IG1heFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXNrID0gdGhpcy5fZGVmZXJyZWRUYXNrcy5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRhc2suZm4oKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgaW4gZGVmZXJyZWQgdGFzazogJHt0YXNrLmxhYmVsfWAsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGUgdGFzayBpZiB3aXRoaW4gZnJhbWUgYnVkZ2V0LCBvdGhlcndpc2UgZGVmZXJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXNrIC0gVGFzayBmdW5jdGlvbiB0byBleGVjdXRlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTBdIC0gVGFzayBwcmlvcml0eSAoaGlnaGVyID0gbW9yZSBpbXBvcnRhbnQpXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsPScnXSAtIFRhc2sgbGFiZWwgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICovXHJcbiAgICBleGVjdXRlT3JEZWZlcih0YXNrLCBwcmlvcml0eSA9IDAsIGxhYmVsID0gJycpIHtcclxuICAgICAgICBjb25zdCBmcmFtZUVsYXBzZWQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuX2xhc3RUaW1lO1xyXG5cclxuICAgICAgICBpZiAoZnJhbWVFbGFwc2VkIDwgdGhpcy5fZnJhbWVCdWRnZXQgKiAwLjgpIHtcclxuICAgICAgICAgICAgLy8gV2l0aGluIGJ1ZGdldCwgZXhlY3V0ZSBub3dcclxuICAgICAgICAgICAgdGFzaygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE92ZXIgYnVkZ2V0LCBkZWZlclxyXG4gICAgICAgICAgICB0aGlzLl9kZWZlcnJlZFRhc2tzLnB1c2goeyBmbjogdGFzaywgcHJpb3JpdHksIGxhYmVsIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU29ydCBieSBwcmlvcml0eSAoaGlnaGVyIGZpcnN0KVxyXG4gICAgICAgICAgICB0aGlzLl9kZWZlcnJlZFRhc2tzLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBGUFNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEF2ZXJhZ2UgRlBTIG92ZXIgcmVjZW50IGZyYW1lc1xyXG4gICAgICovXHJcbiAgICBnZXRGcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5fY3VycmVudEZwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcGVyZm9ybWFuY2Ugc3RhdHNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFBlcmZvcm1hbmNlIHN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZnBzOiB0aGlzLmdldEZwcygpLFxyXG4gICAgICAgICAgICBmcmFtZUNvdW50OiB0aGlzLl9mcmFtZUNvdW50LFxyXG4gICAgICAgICAgICBkZWZlcnJlZFRhc2tDb3VudDogdGhpcy5fZGVmZXJyZWRUYXNrcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHJ1bm5pbmc6IHRoaXMuX3J1bm5pbmdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgbG9vcCBpcyBydW5uaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBydW5uaW5nXHJcbiAgICAgKi9cclxuICAgIGlzUnVubmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcnVubmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBmcmFtZSBjb3VudFxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgZnJhbWVzIHJlbmRlcmVkXHJcbiAgICAgKi9cclxuICAgIGdldEZyYW1lQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciBhbGwgZGVmZXJyZWQgdGFza3NcclxuICAgICAqL1xyXG4gICAgY2xlYXJEZWZlcnJlZFRhc2tzKCkge1xyXG4gICAgICAgIHRoaXMuX2RlZmVycmVkVGFza3MubGVuZ3RoID0gMDtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0NsZWFyZWQgYWxsIGRlZmVycmVkIHRhc2tzJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGcmFtZUJ1ZGdldE1vbml0b3IgLSBNb25pdG9ycyBhbmQgYWxlcnRzIG9uIGZyYW1lIGJ1ZGdldCB2aW9sYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRnJhbWVCdWRnZXRNb25pdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgRnJhbWVCdWRnZXRNb25pdG9yXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RhcmdldEZwcz02MF0gLSBUYXJnZXQgRlBTXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25WaW9sYXRpb25dIC0gQ2FsbGJhY2sgd2hlbiBidWRnZXQgaXMgdmlvbGF0ZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0RnBzID0gNjAsIG9uVmlvbGF0aW9uID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuX3RhcmdldEZwcyA9IHRhcmdldEZwcztcclxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZGdldCA9IDEwMDAgLyB0YXJnZXRGcHM7XHJcbiAgICAgICAgdGhpcy5fb25WaW9sYXRpb24gPSBvblZpb2xhdGlvbjtcclxuICAgICAgICB0aGlzLl92aW9sYXRpb25zID0gMDtcclxuICAgICAgICB0aGlzLl9mcmFtZVN0YXJ0ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hcmsgc3RhcnQgb2YgZnJhbWVcclxuICAgICAqL1xyXG4gICAgc3RhcnRGcmFtZSgpIHtcclxuICAgICAgICB0aGlzLl9mcmFtZVN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBmcmFtZSBpcyB3aXRoaW4gYnVkZ2V0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xvY2F0aW9uXSAtIExvY2F0aW9uIGlkZW50aWZpZXIgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgd2l0aGluIGJ1ZGdldFxyXG4gICAgICovXHJcbiAgICBjaGVja0J1ZGdldChsb2NhdGlvbiA9ICcnKSB7XHJcbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5fZnJhbWVTdGFydDtcclxuICAgICAgICBjb25zdCB3aXRoaW5CdWRnZXQgPSBlbGFwc2VkIDwgdGhpcy5fZnJhbWVCdWRnZXQ7XHJcblxyXG4gICAgICAgIGlmICghd2l0aGluQnVkZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpb2xhdGlvbnMrKztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vblZpb2xhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25WaW9sYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVkZ2V0OiB0aGlzLl9mcmFtZUJ1ZGdldCxcclxuICAgICAgICAgICAgICAgICAgICBvdmVycnVuOiBlbGFwc2VkIC0gdGhpcy5fZnJhbWVCdWRnZXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgRnJhbWUgYnVkZ2V0IHZpb2xhdGlvbiBhdCAke2xvY2F0aW9ufTogJHtlbGFwc2VkLnRvRml4ZWQoMil9bXMgLyAke3RoaXMuX2ZyYW1lQnVkZ2V0LnRvRml4ZWQoMil9bXNgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB3aXRoaW5CdWRnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdmlvbGF0aW9uIGNvdW50XHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCB2aW9sYXRpb25zXHJcbiAgICAgKi9cclxuICAgIGdldFZpb2xhdGlvbkNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92aW9sYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdmlvbGF0aW9uIGNvdW50XHJcbiAgICAgKi9cclxuICAgIHJlc2V0VmlvbGF0aW9ucygpIHtcclxuICAgICAgICB0aGlzLl92aW9sYXRpb25zID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyTG9vcDtcclxuIiwiLyoqXHJcbiAqIEV2ZW50RW1pdHRlciAtIE9ic2VydmVyIHBhdHRlcm4gaW1wbGVtZW50YXRpb24gZm9yIGV2ZW50LWRyaXZlbiBjb21tdW5pY2F0aW9uXHJcbiAqXHJcbiAqIFByb3ZpZGVzIGRlY291cGxlZCBldmVudCBoYW5kbGluZyB3aXRoIGF1dG9tYXRpYyBjbGVhbnVwIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLlxyXG4gKiBDcml0aWNhbCBmb3IgbWFuYWdpbmcgc3RhdGUgY2hhbmdlcyBhbmQgY29tcG9uZW50IGNvbW11bmljYXRpb24uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi9Mb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdFdmVudEVtaXR0ZXInKTtcclxuXHJcbi8qKlxyXG4gKiBFdmVudEVtaXR0ZXIgLSBQdWIvc3ViIGV2ZW50IHN5c3RlbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXAgb2YgZXZlbnQgbmFtZSB0byBTZXQgb2YgbGlzdGVuZXJzXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgZW1pdHRlciBoYXMgYmVlbiBkaXNwb3NlZFxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgZW1pc3Npb24gaGlzdG9yeSBmb3IgZGVidWdnaW5nIChsYXN0IE4gZXZlbnRzKVxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZXZlbnRIaXN0b3J5ID0gW107XHJcbiAgICAgICAgdGhpcy5fbWF4SGlzdG9yeVNpemUgPSA1MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzc2VydCBlbWl0dGVyIGlzIG5vdCBkaXNwb3NlZFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiBlbWl0dGVyIGlzIGRpc3Bvc2VkXHJcbiAgICAgKi9cclxuICAgIF9hc3NlcnROb3REaXNwb3NlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudEVtaXR0ZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEV2ZW50IGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBTdWJzY3JpcHRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vbmNlPWZhbHNlXSAtIEF1dG8tdW5zdWJzY3JpYmUgYWZ0ZXIgZmlyc3QgY2FsbFxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ3N0cmluZycgfHwgZXZlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnZXZlbnQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ2V2ZW50J1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicsXHJcbiAgICAgICAgICAgICAgICAnY2FsbGJhY2snXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXcmFwIGNhbGxiYWNrIGlmIG9uY2Ugb3B0aW9uIGlzIHNldFxyXG4gICAgICAgIGNvbnN0IHdyYXBwZWRDYWxsYmFjayA9IG9wdGlvbnMub25jZVxyXG4gICAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogY2FsbGJhY2s7XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIGNhbGxiYWNrIHJlZmVyZW5jZSBmb3IgcmVtb3ZhbFxyXG4gICAgICAgIGlmIChvcHRpb25zLm9uY2UpIHtcclxuICAgICAgICAgICAgd3JhcHBlZENhbGxiYWNrLl9vcmlnaW5hbENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgbGlzdGVuZXJcclxuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycy5oYXMoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zZXQoZXZlbnQsIG5ldyBTZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5nZXQoZXZlbnQpLmFkZCh3cmFwcGVkQ2FsbGJhY2spO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoYFN1YnNjcmliZWQgdG8gZXZlbnQ6ICR7ZXZlbnR9YCk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB1bnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB0aGlzLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSB0byBhbiBldmVudCAoZmlyZXMgb25jZSB0aGVuIGF1dG8tdW5zdWJzY3JpYmVzKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRXZlbnQgaGFuZGxlclxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBvbmNlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50LCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgZnJvbSBhbiBldmVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRXZlbnQgaGFuZGxlciB0byByZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGNhbGxiYWNrIHdhcyBmb3VuZCBhbmQgcmVtb3ZlZFxyXG4gICAgICovXHJcbiAgICBvZmYoZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVHJ5IHRvIHJlbW92ZSBkaXJlY3RseVxyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVuc3Vic2NyaWJlZCBmcm9tIGV2ZW50OiAke2V2ZW50fWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGJ5IG9yaWdpbmFsIGNhbGxiYWNrIChmb3Igb25jZSBsaXN0ZW5lcnMpXHJcbiAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLl9vcmlnaW5hbENhbGxiYWNrID09PSBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVuc3Vic2NyaWJlZCBmcm9tIGV2ZW50OiAke2V2ZW50fSAob25jZSBsaXN0ZW5lcilgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgYW4gZXZlbnQgKG9yIGFsbCBldmVudHMgaWYgbm8gZXZlbnQgc3BlY2lmaWVkKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXZlbnRdIC0gRXZlbnQgbmFtZSAob3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KGV2ZW50KT8uc2l6ZSB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMuZGVsZXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZW1vdmVkICR7Y291bnR9IGxpc3RlbmVycyBmb3IgZXZlbnQ6ICR7ZXZlbnR9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IEFycmF5LmZyb20odGhpcy5fbGlzdGVuZXJzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBzZXQpID0+IHN1bSArIHNldC5zaXplLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVtb3ZlZCBhbGwgJHt0b3RhbENvdW50fSBsaXN0ZW5lcnNgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbWl0IGFuIGV2ZW50IHRvIGFsbCBzdWJzY3JpYmVyc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBwYXNzIHRvIGxpc3RlbmVyc1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgZXZlbnQgaGFkIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMgfHwgbGlzdGVuZXJzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVjb3JkIGluIGhpc3RvcnkgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgIHRoaXMuX3JlY29yZEV2ZW50KGV2ZW50LCBhcmdzKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsbCBhbGwgbGlzdGVuZXJzXHJcbiAgICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbENvdW50Kys7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGluIGV2ZW50IGxpc3RlbmVyIGZvciAnJHtldmVudH0nOmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIGNhbGxpbmcgb3RoZXIgbGlzdGVuZXJzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRW1pdHRlZCBldmVudDogJHtldmVudH0gdG8gJHtjYWxsQ291bnR9IGxpc3RlbmVyc2ApO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY29yZCBldmVudCBpbiBoaXN0b3J5IGZvciBkZWJ1Z2dpbmdcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIC0gRXZlbnQgYXJndW1lbnRzXHJcbiAgICAgKi9cclxuICAgIF9yZWNvcmRFdmVudChldmVudCwgYXJncykge1xyXG4gICAgICAgIHRoaXMuX2V2ZW50SGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgYXJnQ291bnQ6IGFyZ3MubGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEtlZXAgaGlzdG9yeSBib3VuZGVkXHJcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50SGlzdG9yeS5sZW5ndGggPiB0aGlzLl9tYXhIaXN0b3J5U2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEhpc3Rvcnkuc2hpZnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZXZlbnQgZW1pc3Npb24gaGlzdG9yeVxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBldmVudCByZWNvcmRzXHJcbiAgICAgKi9cclxuICAgIGdldEV2ZW50SGlzdG9yeSgpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuX2V2ZW50SGlzdG9yeV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBldmVudCBoYXMgbGlzdGVuZXJzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgZXZlbnQgaGFzIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBoYXNMaXN0ZW5lcnMoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KGV2ZW50KTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzID8gbGlzdGVuZXJzLnNpemUgPiAwIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbGlzdGVuZXIgY291bnQgZm9yIGFuIGV2ZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gTnVtYmVyIG9mIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVycyA/IGxpc3RlbmVycy5zaXplIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgZXZlbnQgbmFtZXMgd2l0aCBsaXN0ZW5lcnNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEFycmF5IG9mIGV2ZW50IG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGV2ZW50TmFtZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fbGlzdGVuZXJzLmtleXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc3RhdGlzdGljcyBhYm91dCBsaXN0ZW5lcnNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBTdGF0aXN0aWNzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xyXG4gICAgICAgICAgICB0b3RhbEV2ZW50czogdGhpcy5fbGlzdGVuZXJzLnNpemUsXHJcbiAgICAgICAgICAgIHRvdGFsTGlzdGVuZXJzOiAwLFxyXG4gICAgICAgICAgICBldmVudEJyZWFrZG93bjoge31cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFtldmVudCwgbGlzdGVuZXJzXSBvZiB0aGlzLl9saXN0ZW5lcnMuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbGlzdGVuZXJzLnNpemU7XHJcbiAgICAgICAgICAgIHN0YXRzLnRvdGFsTGlzdGVuZXJzICs9IGNvdW50O1xyXG4gICAgICAgICAgICBzdGF0cy5ldmVudEJyZWFrZG93bltldmVudF0gPSBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgZW1pdHRlciBhbmQgcmVtb3ZlIGFsbCBsaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNwb3NpbmcgRXZlbnRFbWl0dGVyJyk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9ldmVudEhpc3RvcnkubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUeXBlZEV2ZW50RW1pdHRlciAtIFR5cGUtc2FmZSBldmVudCBlbWl0dGVyIHdpdGggZXZlbnQgcmVnaXN0cnlcclxuICpcclxuICogRW5zdXJlcyBldmVudHMgYXJlIHByZS1yZWdpc3RlcmVkLCBwcmV2ZW50aW5nIHR5cG9zIGFuZCBwcm92aWRpbmdcclxuICogYmV0dGVyIGRldmVsb3BlciBleHBlcmllbmNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFR5cGVkRXZlbnRFbWl0dGVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgVHlwZWRFdmVudEVtaXR0ZXJcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFdmVudHMgLSBBcnJheSBvZiBhbGxvd2VkIGV2ZW50IG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFsbG93ZWRFdmVudHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgb2YgYWxsb3dlZCBldmVudCBuYW1lc1xyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fYWxsb3dlZEV2ZW50cyA9IG5ldyBTZXQoYWxsb3dlZEV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBldmVudCBuYW1lIGlzIGFsbG93ZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIGV2ZW50IGlzIG5vdCBhbGxvd2VkXHJcbiAgICAgKi9cclxuICAgIF92YWxpZGF0ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9hbGxvd2VkRXZlbnRzLmhhcyhldmVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBFdmVudCAnJHtldmVudH0nIGlzIG5vdCByZWdpc3RlcmVkLiBBbGxvd2VkIGV2ZW50czogJHtBcnJheS5mcm9tKHRoaXMuX2FsbG93ZWRFdmVudHMpLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgICAgICdldmVudCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnQgKG92ZXJyaWRlIHRvIGFkZCB2YWxpZGF0aW9uKVxyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5vbihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW1pdCBhbiBldmVudCAob3ZlcnJpZGUgdG8gYWRkIHZhbGlkYXRpb24pXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgZW1pdChldmVudCwgLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRXZlbnRFbWl0dGVyO1xyXG4iLCIvKipcclxuICogQXBwQ29uc3RhbnRzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBBbmltYXRpb24gc3RhdGUgY29uc3RhbnRzIGFuZCBBUktpdCBibGVuZHNoYXBlIG1hcHBpbmdzLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBWb2ljZSBjaGF0IHN0YXRlIGVudW1lcmF0aW9uXHJcbiAqIENvbnRyb2xzIHRoZSByZW5kZXJpbmcgYW5kIGJlaGF2aW9yIG1vZGVzIG9mIHRoZSBhdmF0YXJcclxuICovXHJcbmV4cG9ydCBjb25zdCBUWVZvaWNlQ2hhdFN0YXRlID0ge1xyXG4gICAgSWRsZTogJ0lkbGUnLCAgICAgICAgICAgLy8gSWRsZS93YWl0aW5nIHN0YXRlXHJcbiAgICBMaXN0ZW5pbmc6ICdMaXN0ZW5pbmcnLCAvLyBMaXN0ZW5pbmcgdG8gdXNlciBpbnB1dFxyXG4gICAgUmVzcG9uZGluZzogJ1Jlc3BvbmRpbmcnLCAvLyBTcGVha2luZy9yZXNwb25kaW5nIGFuaW1hdGlvblxyXG4gICAgVGhpbmtpbmc6ICdUaGlua2luZycgICAgLy8gUHJvY2Vzc2luZy90aGlua2luZyBhbmltYXRpb25cclxufTtcclxuXHJcbi8qKlxyXG4gKiBBUktpdCBibGVuZHNoYXBlIG5hbWVzICg1MiBleHByZXNzaW9ucylcclxuICogVXNlZCBmb3IgZmFjaWFsIGV4cHJlc3Npb24gbWFwcGluZyBmcm9tIEFSS2l0IGZhY2UgdHJhY2tpbmdcclxuICovXHJcbmV4cG9ydCBjb25zdCBBUktpdEJsZW5kc2hhcGVzID0gW1xyXG4gICAgJ2Jyb3dEb3duTGVmdCcsXHJcbiAgICAnYnJvd0Rvd25SaWdodCcsXHJcbiAgICAnYnJvd0lubmVyVXAnLFxyXG4gICAgJ2Jyb3dPdXRlclVwTGVmdCcsXHJcbiAgICAnYnJvd091dGVyVXBSaWdodCcsXHJcbiAgICAnY2hlZWtQdWZmJyxcclxuICAgICdjaGVla1NxdWludExlZnQnLFxyXG4gICAgJ2NoZWVrU3F1aW50UmlnaHQnLFxyXG4gICAgJ2V5ZUJsaW5rTGVmdCcsXHJcbiAgICAnZXllQmxpbmtSaWdodCcsXHJcbiAgICAnZXllTG9va0Rvd25MZWZ0JyxcclxuICAgICdleWVMb29rRG93blJpZ2h0JyxcclxuICAgICdleWVMb29rSW5MZWZ0JyxcclxuICAgICdleWVMb29rSW5SaWdodCcsXHJcbiAgICAnZXllTG9va091dExlZnQnLFxyXG4gICAgJ2V5ZUxvb2tPdXRSaWdodCcsXHJcbiAgICAnZXllTG9va1VwTGVmdCcsXHJcbiAgICAnZXllTG9va1VwUmlnaHQnLFxyXG4gICAgJ2V5ZVNxdWludExlZnQnLFxyXG4gICAgJ2V5ZVNxdWludFJpZ2h0JyxcclxuICAgICdleWVXaWRlTGVmdCcsXHJcbiAgICAnZXllV2lkZVJpZ2h0JyxcclxuICAgICdqYXdGb3J3YXJkJyxcclxuICAgICdqYXdMZWZ0JyxcclxuICAgICdqYXdPcGVuJyxcclxuICAgICdqYXdSaWdodCcsXHJcbiAgICAnbW91dGhDbG9zZScsXHJcbiAgICAnbW91dGhEaW1wbGVMZWZ0JyxcclxuICAgICdtb3V0aERpbXBsZVJpZ2h0JyxcclxuICAgICdtb3V0aEZyb3duTGVmdCcsXHJcbiAgICAnbW91dGhGcm93blJpZ2h0JyxcclxuICAgICdtb3V0aEZ1bm5lbCcsXHJcbiAgICAnbW91dGhMZWZ0JyxcclxuICAgICdtb3V0aExvd2VyRG93bkxlZnQnLFxyXG4gICAgJ21vdXRoTG93ZXJEb3duUmlnaHQnLFxyXG4gICAgJ21vdXRoUHJlc3NMZWZ0JyxcclxuICAgICdtb3V0aFByZXNzUmlnaHQnLFxyXG4gICAgJ21vdXRoUHVja2VyJyxcclxuICAgICdtb3V0aFJpZ2h0JyxcclxuICAgICdtb3V0aFJvbGxMb3dlcicsXHJcbiAgICAnbW91dGhSb2xsVXBwZXInLFxyXG4gICAgJ21vdXRoU2hydWdMb3dlcicsXHJcbiAgICAnbW91dGhTaHJ1Z1VwcGVyJyxcclxuICAgICdtb3V0aFNtaWxlTGVmdCcsXHJcbiAgICAnbW91dGhTbWlsZVJpZ2h0JyxcclxuICAgICdtb3V0aFN0cmV0Y2hMZWZ0JyxcclxuICAgICdtb3V0aFN0cmV0Y2hSaWdodCcsXHJcbiAgICAnbW91dGhVcHBlclVwTGVmdCcsXHJcbiAgICAnbW91dGhVcHBlclVwUmlnaHQnLFxyXG4gICAgJ25vc2VTbmVlckxlZnQnLFxyXG4gICAgJ25vc2VTbmVlclJpZ2h0JyxcclxuICAgICd0b25ndWVPdXQnXHJcbl07XHJcblxyXG4vKipcclxuICogRkxBTUUgbW9kZWwgYm9uZSBuYW1lc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEZsYW1lQm9uZU5hbWVzID0gW1xyXG4gICAgJ3Jvb3QnLFxyXG4gICAgJ25lY2snLFxyXG4gICAgJ2phdycsXHJcbiAgICAnbGVmdEV5ZScsXHJcbiAgICAncmlnaHRFeWUnXHJcbl07XHJcblxyXG4vKipcclxuICogQ29uc3RhbnRzIGRlcml2ZWQgZnJvbSB0aGUgYXJyYXlzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQVJLSVRfQkxFTkRTSEFQRVNfQ09VTlQgPSBBUktpdEJsZW5kc2hhcGVzLmxlbmd0aDtcclxuZXhwb3J0IGNvbnN0IEZMQU1FX0JPTkVTX0NPVU5UID0gRmxhbWVCb25lTmFtZXMubGVuZ3RoO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgVFlWb2ljZUNoYXRTdGF0ZSxcclxuICAgIEFSS2l0QmxlbmRzaGFwZXMsXHJcbiAgICBGbGFtZUJvbmVOYW1lcyxcclxuICAgIEFSS0lUX0JMRU5EU0hBUEVTX0NPVU5ULFxyXG4gICAgRkxBTUVfQk9ORVNfQ09VTlRcclxufTtcclxuIiwiLyoqXHJcbiAqIEFuaW1hdGlvbk1hbmFnZXJcclxuICpcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogTWFuYWdlcyBhbmltYXRpb24gc3RhdGUgbWFjaGluZSB3aXRoIFRocmVlLmpzIEFuaW1hdGlvbk1peGVyLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IExvb3BPbmNlLCBMb29wUmVwZWF0IH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBUWVZvaWNlQ2hhdFN0YXRlIH0gZnJvbSAnLi9BcHBDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdBbmltYXRpb25NYW5hZ2VyJyk7XHJcblxyXG4vKipcclxuICogQmFzZSBTdGF0ZSBjbGFzcyBmb3IgYW5pbWF0aW9uIHN0YXRlc1xyXG4gKi9cclxuY2xhc3MgU3RhdGUge1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9ucywgaXNHcm91cCkge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gYWN0aW9ucyB8fCBbXTtcclxuICAgICAgICB0aGlzLmJsZW5kaW5nVGltZSA9IDAuNTtcclxuICAgICAgICB0aGlzLmlzR3JvdXAgPSBpc0dyb3VwIHx8IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gT3ZlcnJpZGUgaW4gc3ViY2xhc3Nlc1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGVsbG8gc3RhdGUgLSBpbml0aWFsIGdyZWV0aW5nIGFuaW1hdGlvblxyXG4gKi9cclxuY2xhc3MgSGVsbG8gZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLklkbGUgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA9IDA7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgMS4wKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wUmVwZWF0O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ucGxheSgpO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuSWRsZSAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uZ2V0Q2xpcCgpLmR1cmF0aW9uIC0gdGhpcy5ibGVuZGluZ1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0U3RhZ2UgPSB0aGlzLnN0YWdlICsgMTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhZ2UgPj0gdGhpcy5hY3Rpb25zLmxlbmd0aCkgbmV4dFN0YWdlID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW25leHRTdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbbmV4dFN0YWdlXS5sb29wID0gTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZSh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gbmV4dFN0YWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSWRsZSBzdGF0ZSAtIHJlc3RpbmcgYW5pbWF0aW9uXHJcbiAqL1xyXG5jbGFzcyBJZGxlIGV4dGVuZHMgU3RhdGUge1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9ucywgaXNHcm91cCkge1xyXG4gICAgICAgIHN1cGVyKGFjdGlvbnMsIGlzR3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShzdGF0ZSkge1xyXG4gICAgICAgIC8vIFNhZmV0eSBjaGVjazogcmV0dXJuIGVhcmx5IGlmIG5vIGFjdGlvbnMgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGlvbnMgfHwgdGhpcy5hY3Rpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlByZXBhcmVDcm9zc0ZhZGUoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uLCB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYmxlbmRpbmdUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLklkbGUgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuSWRsZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaXN0ZW4gc3RhdGUgLSBsaXN0ZW5pbmcgYW5pbWF0aW9uXHJcbiAqL1xyXG5jbGFzcyBMaXN0ZW4gZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ubG9vcCA9IHRoaXMuaXNHcm91cCA/IExvb3BPbmNlIDogTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdGhpcy5pc0dyb3VwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzR3JvdXApIHtcclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmcgJiZcclxuICAgICAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZSArIDFdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlICsgMV0ubG9vcCA9IExvb3BSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3RhZ2UgPT09IDAgfHwgdGhpcy5zdGFnZSA9PT0gMSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1syXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1syXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbMl0sIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0ubG9vcCA9IExvb3BPbmNlO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zWzJdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmcgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09ICh0aGlzLmlzR3JvdXAgPyB0aGlzLmFjdGlvbnMubGVuZ3RoIC0gMSA6IDApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGluayBzdGF0ZSAtIHRoaW5raW5nIGFuaW1hdGlvblxyXG4gKi9cclxuY2xhc3MgVGhpbmsgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ucGxheSgpO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNHcm91cCkge1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZSArIDFdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlICsgMV0ubG9vcCA9IExvb3BSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSAhPT0gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgICh0aGlzLnN0YWdlID09PSAwIHx8IHRoaXMuc3RhZ2UgPT09IDEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0udGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0ucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zWzJdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zWzJdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZSh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYWN0aW9uc1syXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZSA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmcgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmcgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSA9PT0gKHRoaXMuaXNHcm91cCA/IHRoaXMuYWN0aW9ucy5sZW5ndGggLSAxIDogMCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNwZWFrIHN0YXRlIC0gc3BlYWtpbmcgYW5pbWF0aW9uIHdpdGggcmFuZG9tIG1vdmVtZW50IHNlbGVjdGlvblxyXG4gKi9cclxuY2xhc3MgU3BlYWsgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIEluaXRpYWxpemVkIHdpdGgnLCBhY3Rpb25zPy5sZW5ndGggfHwgMCwgJ2FjdGlvbnMsIGlzR3JvdXA6JywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSByYW5kb20gbnVtYmVyIGluIHJhbmdlIFttaW4sIG1heF1cclxuICAgICAqL1xyXG4gICAgZ2V0UmFuZG9tTnVtYmVyKG1heCwgbWluKSB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW47XHJcbiAgICAgICAgcmV0dXJuIG1pbiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIHJhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoc3RhdGUpIHtcclxuICAgICAgICAvLyBTYWZldHkgY2hlY2s6IHJldHVybiBlYXJseSBpZiBubyBhY3Rpb25zIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICghdGhpcy5hY3Rpb25zIHx8IHRoaXMuYWN0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl93YXJuZWROb0FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdbU1BFQUtdIE5vIGFjdGlvbnMgYXZhaWxhYmxlIScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2FybmVkTm9BY3Rpb25zID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN0YXJ0IHNwZWFraW5nIC0gcGljayBhIHJhbmRvbSBhbmltYXRpb25cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc3RhdGUgPT09IFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZyAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gUmFuZG9tbHkgc2VsZWN0IGluaXRpYWwgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSBNYXRoLmNlaWwodGhpcy5nZXRSYW5kb21OdW1iZXIoMCwgdGhpcy5hY3Rpb25zLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIFN0YXJ0aW5nIGFuaW1hdGlvbiwgc3RhZ2U6JywgdGhpcy5zdGFnZSwgJ29mJywgdGhpcy5hY3Rpb25zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ubG9vcCA9IExvb3BPbmNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbnRpbnVlIHNwZWFraW5nIC0gY3ljbGUgdGhyb3VnaCByYW5kb20gYW5pbWF0aW9uc1xyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZyAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+PVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgICAgICAgICAgLy8gUGljayBhIGRpZmZlcmVudCByYW5kb20gYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gKHRoaXMuc3RhZ2UgKyBNYXRoLmNlaWwodGhpcy5nZXRSYW5kb21OdW1iZXIoMSwgdGhpcy5hY3Rpb25zLmxlbmd0aCAtIDEpKSkgJSB0aGlzLmFjdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIEN5Y2xpbmcgdG8gbmV4dCBhbmltYXRpb24sIHN0YWdlOicsIHRoaXMuc3RhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgMS4wKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKGxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdG9wIHNwZWFraW5nIC0gZmluaXNoIGN1cnJlbnQgYW5pbWF0aW9uXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nICYmXHJcbiAgICAgICAgICAgIHN0YXRlICE9PSBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmcgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuaW1hdGlvbk1hbmFnZXIgLSBNYWluIGFuaW1hdGlvbiBjb250cm9sbGVyXHJcbiAqIE1hbmFnZXMgc3RhdGUgbWFjaGluZSB3aXRoIGNyb3NzZmFkZSB0cmFuc2l0aW9ucyBiZXR3ZWVuIGFuaW1hdGlvbiBzdGF0ZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb25NYW5hZ2VyIHtcclxuICAgIC8vIFN0YXRpYyBwcm9wZXJ0aWVzXHJcbiAgICBzdGF0aWMgSXNCbGVuZGluZyA9IGZhbHNlO1xyXG4gICAgc3RhdGljIGFjdGlvbnMgPSBbXTtcclxuICAgIHN0YXRpYyBOZWVkUmVzZXQgPSBmYWxzZTtcclxuICAgIHN0YXRpYyBOZWVkRnVsbFJlc2V0ID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgTGFzdEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgIHN0YXRpYyBDdXJQbGF5aW5nID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGFuaW1hdGlvbiBhY3Rpb24gd2VpZ2h0XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBTZXRXZWlnaHQoYWN0aW9uLCB3ZWlnaHQpIHtcclxuICAgICAgICBhY3Rpb24uZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgYWN0aW9uLnNldEVmZmVjdGl2ZVRpbWVTY2FsZSgxKTtcclxuICAgICAgICBhY3Rpb24uc2V0RWZmZWN0aXZlV2VpZ2h0KHdlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIGNyb3NzZmFkZSBiZXR3ZWVuIHR3byBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBQcmVwYXJlQ3Jvc3NGYWRlKHN0YXJ0QWN0aW9uLCBlbmRBY3Rpb24sIGRlZmF1bHREdXJhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZGVmYXVsdER1cmF0aW9uO1xyXG4gICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuVW5QYXVzZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkV4ZWN1dGVDcm9zc0ZhZGUoc3RhcnRBY3Rpb24sIGVuZEFjdGlvbiwgZHVyYXRpb24pO1xyXG4gICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZyA9IHRydWU7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0sIGRlZmF1bHREdXJhdGlvbiArIDAuMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXVzZSBhbGwgYW5pbWF0aW9uIGFjdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFBhdXNlQWxsQWN0aW9ucygpIHtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgYWN0aW9uLnBhdXNlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhdXNlIGFsbCBhbmltYXRpb24gYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVW5QYXVzZUFsbEFjdGlvbnMoKSB7XHJcbiAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbi5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGUgY3Jvc3NmYWRlIGJldHdlZW4gdHdvIGFjdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEV4ZWN1dGVDcm9zc0ZhZGUoc3RhcnRBY3Rpb24sIGVuZEFjdGlvbiwgZHVyYXRpb24pIHtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodChlbmRBY3Rpb24sIDEpO1xyXG4gICAgICAgIGVuZEFjdGlvbi50aW1lID0gMDtcclxuICAgICAgICBzdGFydEFjdGlvbi5jcm9zc0ZhZGVUbyhlbmRBY3Rpb24sIGR1cmF0aW9uLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLkFuaW1hdGlvbk1peGVyfSBtaXhlciAtIFRocmVlLmpzIGFuaW1hdGlvbiBtaXhlclxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5BbmltYXRpb25DbGlwW119IGFuaW1hdGlvbnMgLSBBbmltYXRpb24gY2xpcHNcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbmltYXRpb25jZmcgLSBBbmltYXRpb24gY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtaXhlciwgYW5pbWF0aW9ucywgYW5pbWF0aW9uY2ZnKSB7XHJcbiAgICAgICAgY29uc3QgaGVsbG9BY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgaWRsZUFjdGlvbnMgPSBbXTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5BY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3Qgc3BlYWtBY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgdGhpbmtBY3Rpb25zID0gW107XHJcblxyXG4gICAgICAgIHRoaXMubWl4ZXIgPSBtaXhlcjtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGFjdGlvbiBpbmRpY2VzIGJhc2VkIG9uIGNvbmZpZ1xyXG4gICAgICAgIGNvbnN0IGhlbGxvSWR4ID0gYW5pbWF0aW9uY2ZnPy5oZWxsbz8uc2l6ZSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IGlkbGVJZHggPSAoYW5pbWF0aW9uY2ZnPy5pZGxlPy5zaXplIHx8IDApICsgaGVsbG9JZHg7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuSWR4ID0gKGFuaW1hdGlvbmNmZz8ubGlzdGVuPy5zaXplIHx8IDApICsgaWRsZUlkeDtcclxuICAgICAgICBjb25zdCBzcGVha0lkeCA9IChhbmltYXRpb25jZmc/LnNwZWFrPy5zaXplIHx8IDApICsgbGlzdGVuSWR4O1xyXG4gICAgICAgIGNvbnN0IHRoaW5rSWR4ID0gKGFuaW1hdGlvbmNmZz8udGhpbms/LnNpemUgfHwgMCkgKyBzcGVha0lkeDtcclxuXHJcbiAgICAgICAgLy8gRGlzdHJpYnV0ZSBhbmltYXRpb24gY2xpcHMgdG8gc3RhdGUgYWN0aW9uIGFycmF5c1xyXG4gICAgICAgIGlmIChhbmltYXRpb25zICYmIGFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaXAgPSBhbmltYXRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gbWl4ZXIuY2xpcEFjdGlvbihjbGlwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IGhlbGxvSWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVsbG9BY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IGlkbGVJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZGxlQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRHVwbGljYXRlIGZvciBzdGF0ZXMgdGhhdCBzaGFyZSBpZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbklkeCA9PT0gaWRsZUlkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5BY3Rpb25zLnB1c2gobWl4ZXIuY2xpcEFjdGlvbihjbGlwLmNsb25lKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwZWFrSWR4ID09PSBsaXN0ZW5JZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlYWtBY3Rpb25zLnB1c2gobWl4ZXIuY2xpcEFjdGlvbihjbGlwLmNsb25lKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaW5rSWR4ID09PSBzcGVha0lkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlua0FjdGlvbnMucHVzaChtaXhlci5jbGlwQWN0aW9uKGNsaXAuY2xvbmUoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IGxpc3RlbklkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbkFjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgc3BlYWtJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGVha0FjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgdGhpbmtJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlua0FjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuYWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodChhY3Rpb24sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgc3RhdGUgaW5zdGFuY2VzXHJcbiAgICAgICAgdGhpcy5oZWxsbyA9IG5ldyBIZWxsbyhoZWxsb0FjdGlvbnMsIGFuaW1hdGlvbmNmZz8uaGVsbG8/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuaWRsZSA9IG5ldyBJZGxlKGlkbGVBY3Rpb25zLCBhbmltYXRpb25jZmc/LmlkbGU/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuID0gbmV3IExpc3RlbihsaXN0ZW5BY3Rpb25zLCBhbmltYXRpb25jZmc/Lmxpc3Rlbj8uaXNHcm91cCB8fCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50aGluayA9IG5ldyBUaGluayh0aGlua0FjdGlvbnMsIGFuaW1hdGlvbmNmZz8udGhpbms/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc3BlYWsgPSBuZXcgU3BlYWsoc3BlYWtBY3Rpb25zLCBhbmltYXRpb25jZmc/LnNwZWFrPy5pc0dyb3VwIHx8IGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50bHkgcGxheWluZyBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBjdXJQbGF5aW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlbGxvLmlzUGxheWluZykgcmV0dXJuIFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuICAgICAgICBpZiAodGhpcy5pZGxlLmlzUGxheWluZykgcmV0dXJuIFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW4uaXNQbGF5aW5nKSByZXR1cm4gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmc7XHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmsuaXNQbGF5aW5nKSByZXR1cm4gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZztcclxuICAgICAgICBpZiAodGhpcy5zcGVhay5pc1BsYXlpbmcpIHJldHVybiBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmc7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgYW5pbWF0aW9uIG1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLmhlbGxvLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLmlkbGUuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnRoaW5rLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnNwZWFrLmRpc3Bvc2UoKTtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGFsbCBhbmltYXRpb24gYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICByZXNldEFsbEFjdGlvbnMoaWdub3JlQmxlbmRpbmcgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGN1clBsYXlpbmcgPSB0aGlzLmN1clBsYXlpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKGN1clBsYXlpbmcpIHtcclxuICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24gPSB0aGlzLmhlbGxvLmFjdGlvbnNbdGhpcy5oZWxsby5zdGFnZV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMubGlzdGVuLmFjdGlvbnNbdGhpcy5saXN0ZW4uc3RhZ2VdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMudGhpbmsuYWN0aW9uc1t0aGlzLnRoaW5rLnN0YWdlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuc3BlYWsuYWN0aW9uc1t0aGlzLnNwZWFrLnN0YWdlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbi5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbi5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiwgMS4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpZ25vcmVCbGVuZGluZykge1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlBhdXNlQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbi50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KGFjdGlvbiwgMC4wKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGVsbG8uaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pZGxlLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGhpbmsuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zcGVhay5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhbmltYXRpb24gc3RhdGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZSAtIFRhcmdldCBzdGF0ZSAoVFlWb2ljZUNoYXRTdGF0ZSlcclxuICAgICAqL1xyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPSB0aGlzLmN1clBsYXlpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRsZS51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rlbi51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BlYWsudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGxlLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGxlLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluay51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVhay51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkbGUudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RhdGUsIEhlbGxvLCBJZGxlLCBMaXN0ZW4sIFRoaW5rLCBTcGVhayB9O1xyXG5leHBvcnQgZGVmYXVsdCBBbmltYXRpb25NYW5hZ2VyO1xyXG4iLCIvKipcclxuICogU3BsYXRTY2VuZVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWF0cml4NCwgT2JqZWN0M0QsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRTY2VuZSBleHRlbmRzIE9iamVjdDNEIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGxhdEJ1ZmZlciwgcG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLCBxdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlID0gbmV3IFZlY3RvcjMoMSwgMSwgMSksIG1pbmltdW1BbHBoYSA9IDEsIG9wYWNpdHkgPSAxLjAsIHZpc2libGUgPSB0cnVlKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnNwbGF0QnVmZmVyID0gc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKTtcclxuICAgICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICB0aGlzLm1pbmltdW1BbHBoYSA9IG1pbmltdW1BbHBoYTtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICB9XHJcblxyXG4gICAgY29weVRyYW5zZm9ybURhdGEob3RoZXJTY2VuZSkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uY29weShvdGhlclNjZW5lLnBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvdGhlclNjZW5lLnF1YXRlcm5pb24pO1xyXG4gICAgICAgIHRoaXMuc2NhbGUuY29weShvdGhlclNjZW5lLnNjYWxlKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb3B5KG90aGVyU2NlbmUudHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUcmFuc2Zvcm0oZHluYW1pY01vZGUpIHtcclxuICAgICAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4V29ybGRBdXRvVXBkYXRlKSB0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uY29weSh0aGlzLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXhBdXRvVXBkYXRlKSB0aGlzLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb3B5KHRoaXMubWF0cml4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRHZW9tZXRyeVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQnVmZmVyQXR0cmlidXRlLCBCdWZmZXJHZW9tZXRyeSwgRHluYW1pY0RyYXdVc2FnZSwgSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLCBJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSB9IGZyb20gJ3RocmVlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdEdlb21ldHJ5IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBUaHJlZS5qcyBnZW9tZXRyeSB0aGF0IHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy4gVGhlIGdlb21ldHJ5IGlzIGluc3RhbmNlZCBhbmQgaXMgbWFkZSB1cCBvZlxyXG4gICAgICogdmVydGljZXMgZm9yIGEgc2luZ2xlIHF1YWQgYXMgd2VsbCBhcyBhbiBhdHRyaWJ1dGUgYnVmZmVyIGZvciB0aGUgc3BsYXQgaW5kZXhlcy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTcGxhdENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBzcGxhdHMgdGhhdCB0aGUgZ2VvbWV0cnkgd2lsbCBuZWVkIHRvIGFjY29tb2RhdGVcclxuICAgICAqIEByZXR1cm4ge1RIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnVpbGQobWF4U3BsYXRDb3VudCkge1xyXG5cclxuICAgICAgICBjb25zdCBiYXNlR2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgICAgICBiYXNlR2VvbWV0cnkuc2V0SW5kZXgoWzAsIDEsIDIsIDAsIDIsIDNdKTtcclxuXHJcbiAgICAgICAgLy8gVmVydGljZXMgZm9yIHRoZSBpbnN0YW5jZWQgcXVhZFxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0ICogMyk7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnNBcnJheSwgMyk7XHJcbiAgICAgICAgYmFzZUdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBwb3NpdGlvbnMpO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zZXRYWVooMCwgLTEuMCwgLTEuMCwgMC4wKTtcclxuICAgICAgICBwb3NpdGlvbnMuc2V0WFlaKDEsIC0xLjAsIDEuMCwgMC4wKTtcclxuICAgICAgICBwb3NpdGlvbnMuc2V0WFlaKDIsIDEuMCwgMS4wLCAwLjApO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zZXRYWVooMywgMS4wLCAtMS4wLCAwLjApO1xyXG4gICAgICAgIHBvc2l0aW9ucy5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5KCkuY29weShiYXNlR2VvbWV0cnkpO1xyXG5cclxuICAgICAgICAvLyBTcGxhdCBpbmRleCBidWZmZXJcclxuICAgICAgICBjb25zdCBzcGxhdEluZGV4QXJyYXkgPSBuZXcgVWludDMyQXJyYXkobWF4U3BsYXRDb3VudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwbGF0SW5kZXhlcyA9IG5ldyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUoc3BsYXRJbmRleEFycmF5LCAxLCBmYWxzZSk7XHJcbiAgICAgICAgc3BsYXRJbmRleGVzLnNldFVzYWdlKER5bmFtaWNEcmF3VXNhZ2UpO1xyXG4gICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc3BsYXRJbmRleCcsIHNwbGF0SW5kZXhlcyk7XHJcblxyXG4gICAgICAgIGdlb21ldHJ5Lmluc3RhbmNlQ291bnQgPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRUcmVlXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICovXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBkZWxheWVkRXhlY3V0ZSB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5cclxuLy8gV29ya2VyLXJlbGF0ZWQgZnVuY3Rpb25zIChzaW1wbGlmaWVkIHN0dWJzIC0gdGhlIGFjdHVhbCB3b3JrZXIgaXMgaGFuZGxlZCBkaWZmZXJlbnRseSlcclxuY29uc3QgY2hlY2tBbmRDcmVhdGVXb3JrZXIgPSAoKSA9PiB7XHJcbiAgICAvLyBXb3JrZXIgY3JlYXRpb24gaXMgaGFuZGxlZCBieSB0aGUgYnVpbGQgc3lzdGVtXHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmNvbnN0IHdvcmtlclByb2Nlc3NDZW50ZXJzID0gKHdvcmtlciwgY2VudGVycywgYnVmZmVycywgbWF4RGVwdGgsIG1heENlbnRlcnNQZXJOb2RlKSA9PiB7XHJcbiAgICAvLyBXb3JrZXIgbWVzc2FnZSBwYXNzaW5nXHJcbiAgICBpZiAod29ya2VyKSB7XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgJ3Byb2Nlc3MnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2VudGVycyc6IGNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAnbWF4RGVwdGgnOiBtYXhEZXB0aCxcclxuICAgICAgICAgICAgICAgICdtYXhDZW50ZXJzUGVyTm9kZSc6IG1heENlbnRlcnNQZXJOb2RlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBidWZmZXJzKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFNwbGF0U3ViVHJlZSBoZWxwZXIgY2xhc3NcclxuY2xhc3MgU3BsYXRTdWJUcmVlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucm9vdE5vZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29udmVydFdvcmtlclN1YlRyZWUod29ya2VyU3ViVHJlZSwgc3BsYXRNZXNoKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViVHJlZSA9IG5ldyBTcGxhdFN1YlRyZWUoKTtcclxuICAgICAgICBzdWJUcmVlLnJvb3ROb2RlID0gd29ya2VyU3ViVHJlZS5yb290Tm9kZTtcclxuICAgICAgICBzdWJUcmVlLnNwbGF0TWVzaCA9IHNwbGF0TWVzaDtcclxuICAgICAgICByZXR1cm4gc3ViVHJlZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0VHJlZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWF4RGVwdGgsIG1heENlbnRlcnNQZXJOb2RlKSB7XHJcbiAgICAgICAgdGhpcy5tYXhEZXB0aCA9IG1heERlcHRoO1xyXG4gICAgICAgIHRoaXMubWF4Q2VudGVyc1Blck5vZGUgPSBtYXhDZW50ZXJzUGVyTm9kZTtcclxuICAgICAgICB0aGlzLnN1YlRyZWVzID0gW107XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuZGlwb3NlU3BsYXRUcmVlV29ya2VyKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGlwb3NlU3BsYXRUcmVlV29ya2VyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0VHJlZVdvcmtlcikgdGhpcy5zcGxhdFRyZWVXb3JrZXIudGVybWluYXRlKCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdFRyZWVXb3JrZXIgPSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCB0aGlzIGluc3RhbmNlIG9mIFNwbGF0VHJlZSBmcm9tIGFuIGluc3RhbmNlIG9mIFNwbGF0TWVzaC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1NwbGF0TWVzaH0gc3BsYXRNZXNoIFRoZSBpbnN0YW5jZSBvZiBTcGxhdE1lc2ggZnJvbSB3aGljaCB0byBjb25zdHJ1Y3QgdGhpcyBzcGxhdCB0cmVlLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZmlsdGVyRnVuYyBPcHRpb25hbCBmdW5jdGlvbiB0byBmaWx0ZXIgb3V0IHVud2FudGVkIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uSW5kZXhlc1VwbG9hZCBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXBsb2FkIG9mIHNwbGF0IGNlbnRlcnMgdG8gdGhlIHNwbGF0IHRyZWVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGZpbmlzaGVzLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGNvbnZlcnNpb24gb2YgdGhlIGxvY2FsIHNwbGF0IHRyZWUgZnJvbVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGZvcm1hdCBwcm9kdWNlZCBieSB0aGUgc3BsYXQgdHJlZSBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGVuZHMuXHJcbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NTcGxhdE1lc2ggPSAoc3BsYXRNZXNoLCBmaWx0ZXJGdW5jID0gKCkgPT4gdHJ1ZSwgb25JbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbikgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zcGxhdFRyZWVXb3JrZXIpIHRoaXMuc3BsYXRUcmVlV29ya2VyID0gY2hlY2tBbmRDcmVhdGVXb3JrZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBzcGxhdE1lc2g7XHJcbiAgICAgICAgdGhpcy5zdWJUcmVlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENlbnRlcnNGb3JTY2VuZSA9IChzcGxhdE9mZnNldCwgc3BsYXRDb3VudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZUNlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiA0KTtcclxuICAgICAgICAgICAgbGV0IGFkZGVkQ291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsU3BsYXRJbmRleCA9IGkgKyBzcGxhdE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGdW5jKGdsb2JhbFNwbGF0SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRNZXNoLmdldFNwbGF0Q2VudGVyKGdsb2JhbFNwbGF0SW5kZXgsIGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkQmFzZSA9IGFkZGVkQ291bnQgKiA0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyc1thZGRCYXNlXSA9IGNlbnRlci54O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyc1thZGRCYXNlICsgMV0gPSBjZW50ZXIueTtcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZUNlbnRlcnNbYWRkQmFzZSArIDJdID0gY2VudGVyLno7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVDZW50ZXJzW2FkZEJhc2UgKyAzXSA9IGdsb2JhbFNwbGF0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzY2VuZUNlbnRlcnM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja0ZvckVhcmx5RXhpdCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXBvc2VTcGxhdFRyZWVXb3JrZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAob25JbmRleGVzVXBsb2FkKSBvbkluZGV4ZXNVcGxvYWQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZGVsYXllZEV4ZWN1dGUoKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGVja0ZvckVhcmx5RXhpdCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQ2VudGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwbGF0TWVzaC5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxhdE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzcGxhdE1lc2guc2NlbmVzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gc3BsYXRNZXNoLmdldFNjZW5lKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gc2NlbmUuc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2VuZUNlbnRlcnMgPSBhZGRDZW50ZXJzRm9yU2NlbmUoc3BsYXRPZmZzZXQsIHNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxDZW50ZXJzLnB1c2goc2NlbmVDZW50ZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRPZmZzZXQgKz0gc3BsYXRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lQ2VudGVycyA9IGFkZENlbnRlcnNGb3JTY2VuZSgwLCBzcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxDZW50ZXJzLnB1c2goc2NlbmVDZW50ZXJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0VHJlZVdvcmtlci5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnN1YlRyZWVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24pIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHdvcmtlclN1YlRyZWUgb2YgZS5kYXRhLnN1YlRyZWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkU3ViVHJlZSA9IFNwbGF0U3ViVHJlZS5jb252ZXJ0V29ya2VyU3ViVHJlZSh3b3JrZXJTdWJUcmVlLCBzcGxhdE1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViVHJlZXMucHVzaChjb252ZXJ0ZWRTdWJUcmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlwb3NlU3BsYXRUcmVlV29ya2VyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKSBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbih0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheWVkRXhlY3V0ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkluZGV4ZXNVcGxvYWQpIG9uSW5kZXhlc1VwbG9hZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2ZlckJ1ZmZlcnMgPSBhbGxDZW50ZXJzLm1hcCgoYXJyYXkpID0+IGFycmF5LmJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyUHJvY2Vzc0NlbnRlcnModGhpcy5zcGxhdFRyZWVXb3JrZXIsIGFsbENlbnRlcnMsIHRyYW5zZmVyQnVmZmVycywgdGhpcy5tYXhEZXB0aCwgdGhpcy5tYXhDZW50ZXJzUGVyTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGNvdW50TGVhdmVzKCkge1xyXG5cclxuICAgICAgICBsZXQgbGVhZkNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnZpc2l0TGVhdmVzKCgpID0+IHtcclxuICAgICAgICAgICAgbGVhZkNvdW50Kys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBsZWFmQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRMZWF2ZXModmlzaXRGdW5jKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpc2l0TGVhdmVzRnJvbU5vZGUgPSAobm9kZSwgdmlzaXRGdW5jKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgdmlzaXRGdW5jKG5vZGUpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICB2aXNpdExlYXZlc0Zyb21Ob2RlKGNoaWxkLCB2aXNpdEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgc3ViVHJlZSBvZiB0aGlzLnN1YlRyZWVzKSB7XHJcbiAgICAgICAgICAgIHZpc2l0TGVhdmVzRnJvbU5vZGUoc3ViVHJlZS5yb290Tm9kZSwgdmlzaXRGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0TWF0ZXJpYWxcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIRUFWSUxZIE1PRElGSUVEIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBBZGRlZCBGTEFNRSBib25lL3Bvc2UgdW5pZm9ybXMgYW5kIHRleHR1cmVzXHJcbiAqIC0gQWRkZWQgZXhwcmVzc2lvbiBibGVuZHNoYXBlIHN1cHBvcnRcclxuICogLSBFeHRlbmRlZCB2ZXJ0ZXggc2hhZGVyIHdpdGggR1BVIHNraW5uaW5nXHJcbiAqIC0gQWRkaXRpb25hbCB+NTAwIGxpbmVzIG9mIEZMQU1FLXNwZWNpZmljIHNoYWRlciBjb2RlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29sb3IsIERvdWJsZVNpZGUsIE1hdHJpeDQsIE5vcm1hbEJsZW5kaW5nLCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdE1hdGVyaWFsIHtcclxuXHJcbiAgICBzdGF0aWMgYnVpbGRWZXJ0ZXhTaGFkZXJCYXNlKGR5bmFtaWNNb2RlID0gZmFsc2UsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGZhbHNlLCBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLCBjdXN0b21WYXJzID0gJycpIHtcclxuICAgICAgICBsZXQgdmVydGV4U2hhZGVyU291cmNlID0gYCNkZWZpbmUgVVNFX1NLSU5OSU5HXHJcblxyXG4gICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAjaW5jbHVkZSA8Y29tbW9uPlxyXG5cclxuICAgICAgICBhdHRyaWJ1dGUgdWludCBzcGxhdEluZGV4O1xyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBmbGFtZU1vZGVsVGV4dHVyZTtcclxuICAgICAgICB1bmlmb3JtIGhpZ2hwIHVzYW1wbGVyMkQgYm9uZVRleHR1cmU7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB1c2FtcGxlcjJEIGJvbmVXZWlnaHRUZXh0dXJlO1xyXG5cclxuXHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB1c2FtcGxlcjJEIGNlbnRlcnNDb2xvcnNUZXh0dXJlO1xyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmU7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVI7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUc7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUI7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBzY2VuZUluZGV4ZXNUZXh0dXJlO1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBzY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZTtcclxuICAgICAgICB1bmlmb3JtIGludCBzY2VuZUNvdW50O1xyXG4gICAgICAgIHVuaWZvcm0gaW50IGdhdXNzaWFuU3BsYXRDb3VudDtcclxuICAgICAgICB1bmlmb3JtIGludCBic0NvdW50O1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgaGVhZEJvbmVJbmRleDtcclxuICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDtcclxuICAgICAgICAgICAgYXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcclxuICAgICAgICAjZW5kaWZcclxuICAgIGA7XHJcblxyXG4gICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgc2NlbmVPcGFjaXR5WyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGludCBzY2VuZVZpc2liaWxpdHlbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIG1hdDQgdHJhbnNmb3Jtc1ske0NvbnN0YW50cy5NYXhTY2VuZXN9XTtcclxuICAgICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgJHtjdXN0b21WYXJzfVxyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBmb2NhbDtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IG9ydGhvWm9vbTtcclxuICAgICAgICB1bmlmb3JtIGludCBvcnRob2dyYXBoaWNNb2RlO1xyXG4gICAgICAgIHVuaWZvcm0gaW50IHBvaW50Q2xvdWRNb2RlRW5hYmxlZDtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIHZpZXdwb3J0O1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBiYXNpc1ZpZXdwb3J0O1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemU7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIGZsYW1lTW9kZWxUZXh0dXJlU2l6ZTtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgYm9uZVdlaWdodFRleHR1cmVTaXplO1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBib25lVGV4dHVyZVNpemU7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gaW50IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZTtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHZpc2libGVSZWdpb25SYWRpdXM7XHJcbiAgICAgICAgdW5pZm9ybSBmbG9hdCB2aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgZmlyc3RSZW5kZXJUaW1lO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgY3VycmVudFRpbWU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgZmFkZUluQ29tcGxldGU7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMzIHNjZW5lQ2VudGVyO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BsYXRTY2FsZTtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluWyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcblxyXG4gICAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XHJcbiAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICB2YXJ5aW5nIHZlYzIgdlBvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgdmVjMiB2U3BsYXRJbmRleDtcclxuICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4O1xyXG4gICAgICAgICAgICB1bmlmb3JtIG1hdDQgYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIGJvbmVUZXh0dXJlMDtcclxuICAgICAgICAgICAgbWF0NCBnZXRCb25lTWF0cml4MCggY29uc3QgaW4gZmxvYXQgaSApIHtcclxuICAgICAgICAgICAgICAgIGludCBzaXplID0gdGV4dHVyZVNpemUoIGJvbmVUZXh0dXJlMCwgMCApLng7XHJcbiAgICAgICAgICAgICAgICBpbnQgaiA9IGludCggaSApICogNDtcclxuICAgICAgICAgICAgICAgIGludCB4ID0gaiAlIHNpemU7XHJcbiAgICAgICAgICAgICAgICBpbnQgeSA9IGogLyBzaXplO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB2MSA9IHRleGVsRmV0Y2goIGJvbmVUZXh0dXJlMCwgaXZlYzIoIHgsIHkgKSwgMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB2MiA9IHRleGVsRmV0Y2goIGJvbmVUZXh0dXJlMCwgaXZlYzIoIHggKyAxLCB5ICksIDAgKTtcclxuICAgICAgICAgICAgICAgIHZlYzQgdjMgPSB0ZXhlbEZldGNoKCBib25lVGV4dHVyZTAsIGl2ZWMyKCB4ICsgMiwgeSApLCAwICk7XHJcbiAgICAgICAgICAgICAgICB2ZWM0IHY0ID0gdGV4ZWxGZXRjaCggYm9uZVRleHR1cmUwLCBpdmVjMiggeCArIDMsIHkgKSwgMCApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAjZW5kaWZcclxuXHJcbiAgICAgICAgbWF0MyBxdWF0ZXJuaW9uVG9Sb3RhdGlvbk1hdHJpeChmbG9hdCB4LCBmbG9hdCB5LCBmbG9hdCB6LCBmbG9hdCB3KSB7XHJcbiAgICAgICAgICAgIGZsb2F0IHMgPSAxLjAgLyBzcXJ0KHcgKiB3ICsgeCAqIHggKyB5ICogeSArIHogKiB6KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG1hdDMoXHJcbiAgICAgICAgICAgICAgICAxLiAtIDIuICogKHkgKiB5ICsgeiAqIHopLFxyXG4gICAgICAgICAgICAgICAgMi4gKiAoeCAqIHkgKyB3ICogeiksXHJcbiAgICAgICAgICAgICAgICAyLiAqICh4ICogeiAtIHcgKiB5KSxcclxuICAgICAgICAgICAgICAgIDIuICogKHggKiB5IC0gdyAqIHopLFxyXG4gICAgICAgICAgICAgICAgMS4gLSAyLiAqICh4ICogeCArIHogKiB6KSxcclxuICAgICAgICAgICAgICAgIDIuICogKHkgKiB6ICsgdyAqIHgpLFxyXG4gICAgICAgICAgICAgICAgMi4gKiAoeCAqIHogKyB3ICogeSksXHJcbiAgICAgICAgICAgICAgICAyLiAqICh5ICogeiAtIHcgKiB4KSxcclxuICAgICAgICAgICAgICAgIDEuIC0gMi4gKiAoeCAqIHggKyB5ICogeSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZsb2F0IHNxcnQ4ID0gc3FydCg4LjApO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0IG1pbkFscGhhID0gMS4wIC8gMjU1LjA7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlYzQgZW5jb2RlTm9ybTQgPSB2ZWM0KDEuMCAvIDI1NS4wLCAxLjAgLyAyNTUuMCwgMS4wIC8gMjU1LjAsIDEuMCAvIDI1NS4wKTtcclxuICAgICAgICBjb25zdCB1dmVjNCBtYXNrNCA9IHV2ZWM0KHVpbnQoMHgwMDAwMDBGRiksIHVpbnQoMHgwMDAwRkYwMCksIHVpbnQoMHgwMEZGMDAwMCksIHVpbnQoMHhGRjAwMDAwMCkpO1xyXG4gICAgICAgIGNvbnN0IHV2ZWM0IHNoaWZ0NCA9IHV2ZWM0KDAsIDgsIDE2LCAyNCk7XHJcbiAgICAgICAgaW50IGludGVybmFsID0gMTsvL3Nob3cgYSBnYXVzc2lhbiBzcGxhdHRpbmcgcG9pbnQgZXZlcnkgaW50ZXJuYWwgcG9pbnRzLlxyXG4gICAgICAgIHZlYzQgdWludFRvUkdCQVZlYyAodWludCB1KSB7XHJcbiAgICAgICAgICAgdXZlYzQgdXJnYmEgPSBtYXNrNCAmIHU7XHJcbiAgICAgICAgICAgdXJnYmEgPSB1cmdiYSA+PiBzaGlmdDQ7XHJcbiAgICAgICAgICAgdmVjNCByZ2JhID0gdmVjNCh1cmdiYSkgKiBlbmNvZGVOb3JtNDtcclxuICAgICAgICAgICByZXR1cm4gcmdiYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmxvYXQgZ2V0UmVhbEluZGV4KGludCBzSW5kZXgsIGludCByZWR1Y2VkRmFjdG9yKSB7XHJcbiAgICAgICAgICAgIGludCByZW1haW5kZXIgPSBzSW5kZXggJSByZWR1Y2VkRmFjdG9yO1xyXG5cclxuICAgICAgICAgICAgaWYocmVtYWluZGVyID09IGludCgwKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsb2F0KHNJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmxvYXQoc0luZGV4IC0gcmVtYWluZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVjMiBnZXREYXRhVVYoaW4gaW50IHN0cmlkZSwgaW4gaW50IG9mZnNldCwgaW4gdmVjMiBkaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdCh1aW50KGdldFJlYWxJbmRleChpbnQoc3BsYXRJbmRleCksIGludGVybmFsKSkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0RmxhbWVEYXRhVVYoaW4gaW50IHN0cmlkZSwgaW4gaW50IG9mZnNldCwgaW4gdmVjMiBkaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdCh1aW50KGludChzcGxhdEluZGV4KSAvIGludGVybmFsKSAqIHVpbnQoc3RyaWRlKSArIHVpbnQob2Zmc2V0KSArIHVpbnQoZ2F1c3NpYW5TcGxhdENvdW50ICogYnNDb3VudCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0Qm9uZVdlaWdodFVWKGluIGludCBzdHJpZGUsIGluIGludCBvZmZzZXQsIGluIHZlYzIgZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gZmxvYXQodWludChpbnQoc3BsYXRJbmRleCkgLyBpbnRlcm5hbCkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0QlNGbGFtZURhdGFVVihpbiBpbnQgYnNJbmVkZXgsIGluIGludCBzdHJpZGUsIGluIGludCBvZmZzZXQsIGluIHZlYzIgZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gZmxvYXQodWludChpbnQoc3BsYXRJbmRleCkgLyBpbnRlcm5hbCkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkgKyB1aW50KGdhdXNzaWFuU3BsYXRDb3VudCAqIGJzSW5lZGV4KSkgLyBkaW1lbnNpb25zLng7XHJcbiAgICAgICAgICAgIHNhbXBsZXJVVi55ID0gZmxvYXQoZmxvb3IoZCkpIC8gZGltZW5zaW9ucy55O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlclVWO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVjMiBnZXREYXRhVVZGKGluIHVpbnQgc0luZGV4LCBpbiBmbG9hdCBzdHJpZGUsIGluIHVpbnQgb2Zmc2V0LCBpbiB2ZWMyIGRpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgdmVjMiBzYW1wbGVyVVYgPSB2ZWMyKDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IGZsb2F0KHVpbnQoZmxvYXQoZ2V0UmVhbEluZGV4KGludChzSW5kZXgpLCBpbnRlcm5hbCkpICogc3RyaWRlKSArIG9mZnNldCkgLyBkaW1lbnNpb25zLng7XHJcbiAgICAgICAgICAgIHNhbXBsZXJVVi55ID0gZmxvYXQoZmxvb3IoZCkpIC8gZGltZW5zaW9ucy55O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlclVWO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmxvYXQgU0hfQzEgPSAwLjQ4ODYwMjUxMTkwMjkxOTlmO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0WzVdIFNIX0MyID0gZmxvYXRbXSgxLjA5MjU0ODQsIC0xLjA5MjU0ODQsIDAuMzE1MzkxNiwgLTEuMDkyNTQ4NCwgMC41NDYyNzQyKTtcclxuXHJcbiAgICAgICAgbWF0NCBnZXRCb25lTWF0cml4KCBmbG9hdCBpICkge1xyXG4gICAgICAgICAgICBmbG9hdCB5ID0gaTtcclxuICAgICAgICAgICAgZmxvYXQgeCA9IDAuMDtcclxuXHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdChpICogNC4wKSAvIGJvbmVUZXh0dXJlU2l6ZS54Oy8vNFxyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGJvbmVUZXh0dXJlU2l6ZS55Oy8vNVxyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG5cclxuICAgICAgICAgICAgdmVjNCB2MSA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKCBib25lVGV4dHVyZSwgc2FtcGxlclVWICkpO1xyXG4gICAgICAgICAgICB2ZWM0IHYyID0gdWludEJpdHNUb0Zsb2F0KHRleHR1cmUoIGJvbmVUZXh0dXJlLCB2ZWMyKHNhbXBsZXJVVi54ICsgMS4wIC8gYm9uZVRleHR1cmVTaXplLngsIHNhbXBsZXJVVi55KSkpO1xyXG4gICAgICAgICAgICB2ZWM0IHYzID0gdWludEJpdHNUb0Zsb2F0KHRleHR1cmUoIGJvbmVUZXh0dXJlLCB2ZWMyKHNhbXBsZXJVVi54ICsgMi4wIC8gYm9uZVRleHR1cmVTaXplLngsIHNhbXBsZXJVVi55KSApKTtcclxuICAgICAgICAgICAgdmVjNCB2NCA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKCBib25lVGV4dHVyZSwgdmVjMihzYW1wbGVyVVYueCArIDMuMCAvIGJvbmVUZXh0dXJlU2l6ZS54LCBzYW1wbGVyVVYueSkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBtYWluICgpIHtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgb2RkT2Zmc2V0ID0gc3BsYXRJbmRleCAmIHVpbnQoMHgwMDAwMDAwMSk7XHJcbiAgICAgICAgICAgIHVpbnQgZG91YmxlT2RkT2Zmc2V0ID0gb2RkT2Zmc2V0ICogdWludCgyKTtcclxuICAgICAgICAgICAgYm9vbCBpc0V2ZW4gPSBvZGRPZmZzZXQgPT0gdWludCgwKTtcclxuICAgICAgICAgICAgdWludCBuZWFyZXN0RXZlbkluZGV4ID0gc3BsYXRJbmRleCAtIG9kZE9mZnNldDtcclxuICAgICAgICAgICAgZmxvYXQgZk9kZE9mZnNldCA9IGZsb2F0KG9kZE9mZnNldCk7XHJcblxyXG4gICAgICAgICAgICB1dmVjNCBzYW1wbGVkQ2VudGVyQ29sb3IgPSB0ZXh0dXJlKGNlbnRlcnNDb2xvcnNUZXh0dXJlLCBnZXREYXRhVVYoMSwgMCwgY2VudGVyc0NvbG9yc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgIC8vIHZlYzMgc3BsYXRDZW50ZXIgPSB1aW50Qml0c1RvRmxvYXQodXZlYzMoc2FtcGxlZENlbnRlckNvbG9yLmdiYSkpO1xyXG5cclxuICAgICAgICAgICAgdXZlYzMgc2FtcGxlZENlbnRlciA9IHRleHR1cmUoY2VudGVyc0NvbG9yc1RleHR1cmUsIGdldERhdGFVVigxLCAwLCBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUpKS5nYmE7XHJcbiAgICAgICAgICAgIHZlYzMgc3BsYXRDZW50ZXIgPSB1aW50Qml0c1RvRmxvYXQodXZlYzMoc2FtcGxlZENlbnRlcikpO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBmbGFtZVRleHR1cmVVViA9IGdldEJTRmxhbWVEYXRhVVYoYnNDb3VudCwgMSwgMCwgZmxhbWVNb2RlbFRleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgdXZlYzMgc2FtcGxlZGZsYW1lUG9zID0gdGV4dHVyZShmbGFtZU1vZGVsVGV4dHVyZSwgZmxhbWVUZXh0dXJlVVYpLnJnYjtcclxuICAgICAgICAgICAgLy8gc3BsYXRDZW50ZXIgKz0gdWludEJpdHNUb0Zsb2F0KHV2ZWMzKHNhbXBsZWRmbGFtZVBvcy5yZ2IpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBic0NvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZlYzIgZmxhbWVCU1RleHR1cmVVViA9IGdldEJTRmxhbWVEYXRhVVYoaSwgMSwgMCwgZmxhbWVNb2RlbFRleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgICAgIHV2ZWMzIHNhbXBsZWRCU1BvcyA9IHRleHR1cmUoZmxhbWVNb2RlbFRleHR1cmUsIGZsYW1lQlNUZXh0dXJlVVYpLnJnYjtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZCA9IGZsb2F0KGkgLyA0ICsgNSAqIDQpIC8gYm9uZVRleHR1cmVTaXplLng7Ly80XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGJvbmVUZXh0dXJlU2l6ZS55Oy8vMzJcclxuICAgICAgICAgICAgICAgIHNhbXBsZXJVVi54ID0gZnJhY3QoZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBic1dlaWdodCA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKGJvbmVUZXh0dXJlLCBzYW1wbGVyVVYpKTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHdlaWdodCA9IGJzV2VpZ2h0LnI7XHJcbiAgICAgICAgICAgICAgICBpZihpICUgNCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ID0gYnNXZWlnaHQuZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGkgJSA0ID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQgPSBic1dlaWdodC5iO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoaSAlIDQgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IGJzV2VpZ2h0LmE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSBzcGxhdENlbnRlciArIHdlaWdodCAqIHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQlNQb3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueCApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueSApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueiApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgudyApO1xyXG4gICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgbWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xyXG4gICAgICAgICAgICAgICAgc2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcclxuICAgICAgICAgICAgICAgIHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XHJcbiAgICAgICAgICAgICAgICBza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xyXG4gICAgICAgICAgICAgICAgLy8gc2tpbk1hdHJpeCA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XHJcbiAgICAgICAgICAgICNlbmRpZlxyXG4gICAgICAgICAgICB2ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyhzcGxhdENlbnRlci54eXopO1xyXG4gICAgICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgICAgICAvLyB2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCBza2luVmVydGV4ID0gdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYW4gb2Zmc2V0IGJldHdlZW4gdGhlIEdhdXNzaWFuIHBvaW50IGFuZCB0aGUgbWVzaCB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCB3aWxsIGNhdXNlIGRlZmVjdHMgaW4gdGhlIHNrZWxldGFsIGFuaW1hdGlvbiBkcml2aW5nIHRoZSBHYXVzc2lhbiBwb2ludC4gXHJcbiAgICAgICAgICAgICAgICAvL0luIG9yZGVyIHRvIGNpcmN1bXZlbnQgdGhpcyBwcm9ibGVtLCBvbmx5IHRoZSBoZWFkIGJvbmUoaW5kZXggaXMgMTEwIGN1cnJlbnRseSkgaXMgdXNlZCB0byBkcml2ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoZWFkQm9uZUluZGV4ID49IDAuMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXQgPSBnZXRCb25lTWF0cml4MCggaGVhZEJvbmVJbmRleCApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWQgKz0gYm9uZU1hdCAqIHNraW5WZXJ0ZXggKiAxLjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XHJcbiAgICAgICAgICAgICAgICAvLyBza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcclxuICAgICAgICAgICAgICAgIC8vIHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xyXG4gICAgICAgICAgICAgICAgLy8gc2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtZWQgPSAoIGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZCApLnh5ejtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gc2tpbm5lZC54eXo7XHJcblxyXG4gICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSB0cmFuc2Zvcm1lZC54eXo7XHJcblxyXG4gICAgICAgICAgICAjaWZkZWYgVVNFX0ZMQU1FXHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggMS4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggMi4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRXID0gZ2V0Qm9uZU1hdHJpeCggMy4wICk7ICAgXHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXQwID0gZ2V0Qm9uZU1hdHJpeCggNC4wICk7ICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZlYzIgYm9uZVdlaWdodFVWMCA9IGdldEJvbmVXZWlnaHRVVigyLCAwLCBib25lV2VpZ2h0VGV4dHVyZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBib25lV2VpZ2h0VVYxID0gZ2V0Qm9uZVdlaWdodFVWKDIsIDEsIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZEJvbmVNYXRyaXhWYWx1ZSA9IHRleHR1cmUoYm9uZVdlaWdodFRleHR1cmUsIGJvbmVXZWlnaHRVVjApO1xyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZEJvbmVNYXRyaXhWYWx1ZTAgPSB0ZXh0dXJlKGJvbmVXZWlnaHRUZXh0dXJlLCBib25lV2VpZ2h0VVYxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWM0IGJvbmVNYXRyaXhWYWx1ZSA9IHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQm9uZU1hdHJpeFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHZlYzQgYm9uZU1hdHJpeFZhbHVlMCA9IHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQm9uZU1hdHJpeFZhbHVlMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBza2luVmVydGV4ID0gdmVjNCggc3BsYXRDZW50ZXIsIDEuMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCBza2lubmVkID0gdmVjNCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBtaW5XZWlnaHQgPSBtaW4oYm9uZU1hdHJpeFZhbHVlLngsbWluKGJvbmVNYXRyaXhWYWx1ZS55LCBtaW4oYm9uZU1hdHJpeFZhbHVlLnosIG1pbihib25lTWF0cml4VmFsdWUudywgYm9uZU1hdHJpeFZhbHVlMC54KSkpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnggPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnggPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUueDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnkgPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnkgPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUueTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnogPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnogPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WiAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUuejtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLncgPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLncgPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUudztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlMC54ID4gMC4wICYmIGJvbmVNYXRyaXhWYWx1ZTAueCA+IG1pbldlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBza2lubmVkICs9IGJvbmVNYXQwICogc2tpblZlcnRleCAqIGJvbmVNYXRyaXhWYWx1ZTAueDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSBza2lubmVkLnh5ejtcclxuICAgICAgICAgICAgI2VuZGlmXHJcblxyXG4gICAgICAgICAgICB1aW50IHNjZW5lSW5kZXggPSB1aW50KDApO1xyXG4gICAgICAgICAgICBpZiAoc2NlbmVDb3VudCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHNjZW5lSW5kZXggPSB0ZXh0dXJlKHNjZW5lSW5kZXhlc1RleHR1cmUsIGdldERhdGFVVigxLCAwLCBzY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZSkpLnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgc3BsYXRPcGFjaXR5RnJvbVNjZW5lID0gc2NlbmVPcGFjaXR5W3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaW50IHNjZW5lVmlzaWJsZSA9IHNjZW5lVmlzaWJpbGl0eVtzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChzcGxhdE9wYWNpdHlGcm9tU2NlbmUgPD0gMC4wMSB8fCBzY2VuZVZpc2libGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMi4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkeW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgbWF0NCB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgbWF0NCB0cmFuc2Zvcm1Nb2RlbFZpZXdNYXRyaXggPSB2aWV3TWF0cml4ICogdHJhbnNmb3JtO1xyXG4gICAgICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCA9IHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCAqIHNraW5NYXRyaXg7XHJcbiAgICAgICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYG1hdDQgdHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4ID0gbW9kZWxWaWV3TWF0cml4O2A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICBmbG9hdCBzaDhCaXRDb21wcmVzc2lvblJhbmdlTWluRm9yU2NlbmUgPSBzcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZU1pbltzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgZmxvYXQgc2g4Qml0Q29tcHJlc3Npb25SYW5nZU1heEZvclNjZW5lID0gc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhbc2NlbmVJbmRleF07XHJcbiAgICAgICAgICAgIGZsb2F0IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSA9IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhGb3JTY2VuZSAtIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VNaW5Gb3JTY2VuZTtcclxuICAgICAgICAgICAgZmxvYXQgc2g4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2VGb3JTY2VuZSA9IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSAvIDIuMDtcclxuICAgICAgICAgICAgdmVjMyB2ZWM4Qml0U0hTaGlmdCA9IHZlYzMoc2g4Qml0Q29tcHJlc3Npb25SYW5nZU1pbkZvclNjZW5lKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzQgdmlld0NlbnRlciA9IHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCAqIHZlYzQoc3BsYXRDZW50ZXIsIDEuMCk7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IGNsaXBDZW50ZXIgPSBwcm9qZWN0aW9uTWF0cml4ICogdmlld0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IGNsaXAgPSAxLjIgKiBjbGlwQ2VudGVyLnc7XHJcbiAgICAgICAgICAgIGlmIChjbGlwQ2VudGVyLnogPCAtY2xpcCB8fCBjbGlwQ2VudGVyLnggPCAtY2xpcCB8fCBjbGlwQ2VudGVyLnggPiBjbGlwIHx8IGNsaXBDZW50ZXIueSA8IC1jbGlwIHx8IGNsaXBDZW50ZXIueSA+IGNsaXApIHtcclxuICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMi4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2ZWMzIG5kY0NlbnRlciA9IGNsaXBDZW50ZXIueHl6IC8gY2xpcENlbnRlci53O1xyXG5cclxuICAgICAgICAgICAgdlBvc2l0aW9uID0gcG9zaXRpb24ueHk7XHJcbiAgICAgICAgICAgIHZTcGxhdEluZGV4ID0gdmVjMihzcGxhdEluZGV4LCBzcGxhdEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHZDb2xvciA9IHVpbnRUb1JHQkFWZWMoc2FtcGxlZENlbnRlckNvbG9yLnIpO1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIFByb2NlZWQgdG8gc2FtcGxpbmcgYW5kIHJlbmRlcmluZyAxc3QgZGVncmVlIHNwaGVyaWNhbCBoYXJtb25pY3NcclxuICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgICAgXHJcbiAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzMgd29ybGRWaWV3RGlyID0gbm9ybWFsaXplKHNwbGF0Q2VudGVyIC0gdmVjMyhpbnZlcnNlKHRyYW5zZm9ybSkgKiB2ZWM0KGNhbWVyYVBvc2l0aW9uLCAxLjApKSk7XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICB2ZWMzIHdvcmxkVmlld0RpciA9IG5vcm1hbGl6ZShzcGxhdENlbnRlciAtIGNhbWVyYVBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICB2ZWMzIHNoMTtcclxuICAgICAgICAgICAgICAgIHZlYzMgc2gyO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBzaDM7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDY7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDg7XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmluZyBob3cgdG8gc2FtcGxlIHNwaGVyaWNhbCBoYXJtb25pY3MgdGV4dHVyZXMgdG8gZ2V0IHRoZSBjb2VmZmljaWVudHMgZm9yIGNhbGN1bGF0aW9ucyBmb3IgYSBnaXZlbiBkZWdyZWVcclxuICAgICAgICAgICAgLy8gZGVwZW5kcyBvbiBob3cgbWFueSB0b3RhbCBkZWdyZWVzIChtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIGFyZSBwcmVzZW50IGluIHRoZSB0ZXh0dXJlcy4gVGhpcyBpcyBiZWNhdXNlIHRoYXRcclxuICAgICAgICAgICAgLy8gbnVtYmVyIGFmZmVjdHMgaG93IHRoZXkgYXJlIHBhY2tlZCBpbiB0aGUgdGV4dHVyZXMsIGFuZCB0aGVyZWZvcmUgdGhlIG9mZnNldCAmIHN0cmlkZSByZXF1aXJlZCB0byBhY2Nlc3MgdGhlbS5cclxuXHJcbiAgICAgICAgICAgIC8vIFNhbXBsZSBzcGhlcmljYWwgaGFybW9uaWNzIHRleHR1cmVzIHdpdGggMSBkZWdyZWUgd29ydGggb2YgZGF0YSBmb3IgMXN0IGRlZ3JlZSBjYWxjdWxhdGlvbnMsIGFuZCBzdG9yZSBpbiBzaDEsIHNoMiwgYW5kIHNoM1xyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NNdWx0aVRleHR1cmVNb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzaFVWID0gZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAyLjUsIGRvdWJsZU9kZE9mZnNldCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDAxMjMgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIHNoVVYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaFVWID0gZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAyLjUsIGRvdWJsZU9kZE9mZnNldCArIHVpbnQoMSksIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0g0NTY3ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBzaFVWKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hVViA9IGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMi41LCBkb3VibGVPZGRPZmZzZXQgKyB1aW50KDIpLCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIODkxMDExID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBzaFVWKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMTIzLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgKyB2ZWMzKHNhbXBsZWRTSDAxMjMuYmEsIHNhbXBsZWRTSDQ1NjcucikgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDIgPSB2ZWMzKHNhbXBsZWRTSDAxMjMuYSwgc2FtcGxlZFNINDU2Ny5yZykgKiAoMS4wIC0gZk9kZE9mZnNldCkgKyB2ZWMzKHNhbXBsZWRTSDQ1NjcuZ2JhKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHZlYzMoc2FtcGxlZFNINDU2Ny5iYSwgc2FtcGxlZFNIODkxMDExLnIpICogKDEuMCAtIGZPZGRPZmZzZXQpICsgdmVjMyhzYW1wbGVkU0g4OTEwMTEucmdiKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMVIgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMUcgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMUIgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMVIucmcsIHNhbXBsZWRTSDIzUi5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gyID0gdmVjMyhzYW1wbGVkU0gwMUcucmcsIHNhbXBsZWRTSDIzRy5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gzID0gdmVjMyhzYW1wbGVkU0gwMUIucmcsIHNhbXBsZWRTSDIzQi5yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAvLyBTYW1wbGUgc3BoZXJpY2FsIGhhcm1vbmljcyB0ZXh0dXJlcyB3aXRoIDIgZGVncmVlcyB3b3J0aCBvZiBkYXRhIGZvciAxc3QgZGVncmVlIGNhbGN1bGF0aW9ucywgYW5kIHN0b3JlIGluIHNoMSwgc2gyLCBhbmQgc2gzXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMDEyMztcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDQ1Njc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0g4OTEwMTE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMDEyM1I7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0gwMTIzRztcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDAxMjNCO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZWRTSDAxMjMgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIGdldERhdGFVVig2LCAwLCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVkU0g0NTY3ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIODkxMDExID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMiwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gc2FtcGxlZFNIMDEyMy5yZ2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMiA9IHZlYzMoc2FtcGxlZFNIMDEyMy5hLCBzYW1wbGVkU0g0NTY3LnJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gzID0gdmVjMyhzYW1wbGVkU0g0NTY3LmJhLCBzYW1wbGVkU0g4OTEwMTEucik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMTIzUi5yZ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDIgPSB2ZWMzKHNhbXBsZWRTSDAxMjNHLnJnYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHZlYzMoc2FtcGxlZFNIMDEyM0IucmdiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQZXJmb3JtIDFzdCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljcyBjYWxjdWxhdGlvbnNcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDEgPSBzaDEgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gyID0gc2gyICogc2g4Qml0Q29tcHJlc3Npb25SYW5nZUZvclNjZW5lICsgdmVjOEJpdFNIU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHNoMyAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCB4ID0gd29ybGRWaWV3RGlyLng7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgeSA9IHdvcmxkVmlld0Rpci55O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHogPSB3b3JsZFZpZXdEaXIuejtcclxuICAgICAgICAgICAgICAgICAgICB2Q29sb3IucmdiICs9IFNIX0MxICogKC1zaDEgKiB5ICsgc2gyICogeiAtIHNoMyAqIHgpO1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvY2VlZCB0byBzYW1wbGluZyBhbmQgcmVuZGVyaW5nIDJuZCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljc1xyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eCA9IHggKiB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB5eSA9IHkgKiB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB6eiA9IHogKiB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eSA9IHggKiB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB5eiA9IHkgKiB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eiA9IHggKiB6O1xyXG4gICAgICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTYW1wbGUgc3BoZXJpY2FsIGhhcm1vbmljcyB0ZXh0dXJlcyB3aXRoIDIgZGVncmVlcyB3b3J0aCBvZiBkYXRhIGZvciAybmQgZGVncmVlIGNhbGN1bGF0aW9ucyxcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBzdG9yZSBpbiBzaDQsIHNoNSwgc2g2LCBzaDcsIGFuZCBzaDhcclxuICAgICAgICAgICAgICAgIGlmIChtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDEyMTMxNDE1ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMywgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMTYxNzE4MTkgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIGdldERhdGFVVig2LCA0LCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0gyMDIxMjIyMyA9IHRleHR1cmUoc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZSwgZ2V0RGF0YVVWKDYsIDUsIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDQgPSBzYW1wbGVkU0g4OTEwMTEuZ2JhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g1ID0gc2FtcGxlZFNIMTIxMzE0MTUucmdiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2ID0gdmVjMyhzYW1wbGVkU0gxMjEzMTQxNS5hLCBzYW1wbGVkU0gxNjE3MTgxOS5yZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSB2ZWMzKHNhbXBsZWRTSDE2MTcxODE5LmJhLCBzYW1wbGVkU0gyMDIxMjIyMy5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoOCA9IHNhbXBsZWRTSDIwMjEyMjIzLmdiYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNCA9IHZlYzMoc2FtcGxlZFNIMDEyM1IuYSwgc2FtcGxlZFNINDU2N1IucmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g1ID0gdmVjMyhzYW1wbGVkU0g0NTY3Ui5iYSwgc2FtcGxlZFNIMDEyM0cuYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDYgPSB2ZWMzKHNhbXBsZWRTSDQ1NjdHLnJnYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSB2ZWMzKHNhbXBsZWRTSDQ1NjdHLmEsIHNhbXBsZWRTSDAxMjNCLmEsIHNhbXBsZWRTSDQ1NjdCLnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g4ID0gdmVjMyhzYW1wbGVkU0g0NTY3Qi5nYmEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIDJuZCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljcyBjYWxjdWxhdGlvbnNcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDQgPSBzaDQgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNSA9IHNoNSAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2ID0gc2g2ICogc2g4Qml0Q29tcHJlc3Npb25SYW5nZUZvclNjZW5lICsgdmVjOEJpdFNIU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSBzaDcgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoOCA9IHNoOCAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2Q29sb3IucmdiICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU0hfQzJbMF0gKiB4eSkgKiBzaDQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNIX0MyWzFdICogeXopICogc2g1ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTSF9DMlsyXSAqICgyLjAgKiB6eiAtIHh4IC0geXkpKSAqIHNoNiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU0hfQzJbM10gKiB4eikgKiBzaDcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNIX0MyWzRdICogKHh4IC0geXkpKSAqIHNoODtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG5cclxuICAgICAgICAgICAgICAgIHZDb2xvci5yZ2IgPSBjbGFtcCh2Q29sb3IucmdiLCB2ZWMzKDAuKSwgdmVjMygxLikpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFZlcnRleFNoYWRlckZhZGVJbigpIHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICBpZiAoZmFkZUluQ29tcGxldGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgb3BhY2l0eUFkanVzdCA9IDEuMDtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGNlbnRlckRpc3QgPSBsZW5ndGgoc3BsYXRDZW50ZXIgLSBzY2VuZUNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByZW5kZXJUaW1lID0gbWF4KGN1cnJlbnRUaW1lIC0gZmlyc3RSZW5kZXJUaW1lLCAwLjApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IGZhZGVEaXN0YW5jZSA9IDAuNzU7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBkaXN0YW5jZUxvYWRGYWRlSW5GYWN0b3IgPSBzdGVwKHZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMsIGNlbnRlckRpc3QpO1xyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VMb2FkRmFkZUluRmFjdG9yID0gKDEuMCAtIGRpc3RhbmNlTG9hZEZhZGVJbkZhY3RvcikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDEuMCAtIGNsYW1wKChjZW50ZXJEaXN0IC0gdmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cykgLyBmYWRlRGlzdGFuY2UsIDAuMCwgMS4wKSkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VMb2FkRmFkZUluRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eUFkanVzdCAqPSBkaXN0YW5jZUxvYWRGYWRlSW5GYWN0b3I7XHJcbiAgICAgICAgICAgICAgICB2Q29sb3IuYSAqPSBvcGFjaXR5QWRqdXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUgPSBmYWxzZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRTY2FsZSA9IDEuMCwgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICdzY2VuZUNlbnRlcic6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YzJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IzKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhZGVJbkNvbXBsZXRlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdvcnRob2dyYXBoaWNNb2RlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICd2aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3Zpc2libGVSZWdpb25SYWRpdXMnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYmluZE1hdHJpeCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ200JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBNYXRyaXg0KClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JpbmRNYXRyaXhJbnZlcnNlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnbTQnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IE1hdHJpeDQoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY3VycmVudFRpbWUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmlyc3RSZW5kZXJUaW1lJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2NlbnRlcnNDb2xvcnNUZXh0dXJlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmbGFtZU1vZGVsVGV4dHVyZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYm9uZVRleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JvbmVUZXh0dXJlMCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYm9uZVdlaWdodFRleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlRyc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUInOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBbXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXgnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IFtdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmb2NhbCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ29ydGhvWm9vbSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMS4wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdpbnZlcnNlRm9jYWxBZGp1c3RtZW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3ZpZXdwb3J0Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndjInLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYmFzaXNWaWV3cG9ydCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2RlYnVnQ29sb3InOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MycsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgQ29sb3IoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY2VudGVyc0NvbG9yc1RleHR1cmVTaXplJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndjInLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZsYW1lTW9kZWxUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDQwOTYsIDIwNDgpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdib25lVGV4dHVyZVNpemUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgVmVjdG9yMig0LCAzMilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JvbmVXZWlnaHRUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDUxMiwgNTEyKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BsYXRTY2FsZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogc3BsYXRTY2FsZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncG9pbnRDbG91ZE1vZGVFbmFibGVkJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBwb2ludENsb3VkTW9kZUVuYWJsZWQgPyAxIDogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzVGV4dHVyZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzVGV4dHVyZVNpemUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgVmVjdG9yMigxMDI0LCAxMDI0KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVDb3VudCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZ2F1c3NpYW5TcGxhdENvdW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdic0NvdW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdoZWFkQm9uZUluZGV4Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAtMS4wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdleWVCbGlua0xlZnQnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZXllQmxpbmtSaWdodCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMC4wXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluLnZhbHVlLnB1c2goLUNvbnN0YW50cy5TcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSAvIDIuMCk7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWF4LnZhbHVlLnB1c2goQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlIC8gMi4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmVPcGFjaXR5ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzY2VuZU9wYWNpdHkucHVzaCgxLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaWZvcm1zWydzY2VuZU9wYWNpdHknXSA9e1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBzY2VuZU9wYWNpdHlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lVmlzaWJpbGl0eSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENvbnN0YW50cy5NYXhTY2VuZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc2NlbmVWaXNpYmlsaXR5LnB1c2goMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdW5pZm9ybXNbJ3NjZW5lVmlzaWJpbGl0eSddID17XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdpJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNjZW5lVmlzaWJpbGl0eVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybU1hdHJpY2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1NYXRyaWNlcy5wdXNoKG5ldyBNYXRyaXg0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaWZvcm1zWyd0cmFuc2Zvcm1zJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdtYXQ0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHRyYW5zZm9ybU1hdHJpY2VzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5pZm9ybXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBTcGxhdE1hdGVyaWFsM0Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgdGhlIFRocmVlLmpzIG1hdGVyaWFsIHRoYXQgaXMgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkeW5hbWljTW9kZSBJZiB0cnVlLCBpdCBtZWFucyB0aGUgc2NlbmUgZ2VvbWV0cnkgcmVwcmVzZW50ZWQgYnkgdGhpcyBzcGxhdCBtZXNoIGlzIG5vdCBzdGF0aW9uYXJ5IG9yXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgc3BsYXQgY291bnQgbWlnaHQgY2hhbmdlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZU9wdGlvbmFsRWZmZWN0cyBXaGVuIHRydWUsIGFsbG93cyBmb3IgdXNhZ2Ugb2YgZXh0cmEgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBpbiB0aGUgc2hhZGVyIGZvciBlZmZlY3RzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNoIGFzIG9wYWNpdHkgYWRqdXN0bWVudC4gRGVmYXVsdCBpcyBmYWxzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYW50aWFsaWFzZWQgSWYgdHJ1ZSwgY2FsY3VsYXRlIGNvbXBlbnNhdGlvbiBmYWN0b3IgdG8gZGVhbCB3aXRoIGdhdXNzaWFucyBiZWluZyByZW5kZXJlZCBhdCBhIHNpZ25pZmljYW50bHlcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW50IHJlc29sdXRpb24gdGhhbiB0aGF0IG9mIHRoZWlyIHRyYWluaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgVGhlIG1heGltdW0gY2xpcCBzcGFjZSBzcGxhdCBzaXplXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3BsYXRTY2FsZSBWYWx1ZSBieSB3aGljaCBhbGwgc3BsYXRzIGFyZSBzY2FsZWQgaW4gc2NyZWVuLXNwYWNlIChkZWZhdWx0IGlzIDEuMClcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludENsb3VkTW9kZUVuYWJsZWQgUmVuZGVyIGFsbCBzcGxhdHMgYXMgc2NyZWVuLXNwYWNlIGNpcmNsZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgRGVncmVlIG9mIHNwaGVyaWNhbCBoYXJtb25pY3MgdG8gdXRpbGl6ZSBpbiByZW5kZXJpbmcgc3BsYXRzXHJcbiAgICAgKiBAcmV0dXJuIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ1aWxkKGR5bmFtaWNNb2RlID0gZmFsc2UsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGZhbHNlLCBhbnRpYWxpYXNlZCA9IGZhbHNlLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSA9IDIwNDgsXHJcbiAgICAgICAgICAgICAgICAgc3BsYXRTY2FsZSA9IDEuMCwgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsIGtlcm5lbDJEU2l6ZSA9IDAuMykge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21WZXJ0ZXhWYXJzID0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzIgY292YXJpYW5jZXNUZXh0dXJlU2l6ZTtcclxuICAgICAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgY292YXJpYW5jZXNUZXh0dXJlO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIHVzYW1wbGVyMkQgY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICB1bmlmb3JtIGludCBjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdDtcclxuXHJcbiAgICAgICAgICAgIHZvaWQgZnJvbUNvdmFyaWFuY2VIYWxmRmxvYXRWNCh1dmVjNCB2YWwsIG91dCB2ZWM0IGZpcnN0LCBvdXQgdmVjNCBzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgIHZlYzIgciA9IHVucGFja0hhbGYyeDE2KHZhbC5yKTtcclxuICAgICAgICAgICAgICAgIHZlYzIgZyA9IHVucGFja0hhbGYyeDE2KHZhbC5nKTtcclxuICAgICAgICAgICAgICAgIHZlYzIgYiA9IHVucGFja0hhbGYyeDE2KHZhbC5iKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaXJzdCA9IHZlYzQoci54LCByLnksIGcueCwgZy55KTtcclxuICAgICAgICAgICAgICAgIHNlY29uZCA9IHZlYzQoYi54LCBiLnksIDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsLmJ1aWxkVmVydGV4U2hhZGVyQmFzZShkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKGFudGlhbGlhc2VkLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIGtlcm5lbDJEU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRGcmFnbWVudFNoYWRlcigpO1xyXG5cclxuICAgICAgICBjb25zdCB1bmlmb3JtcyA9IFNwbGF0TWF0ZXJpYWwuZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzcGxhdFNjYWxlLCBwb2ludENsb3VkTW9kZUVuYWJsZWQpO1xyXG5cclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlU2l6ZSddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0J10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNBcmVIYWxmRmxvYXQnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB1bmlmb3JtcyxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJTb3VyY2UsXHJcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFscGhhVGVzdDogMS4wLFxyXG4gICAgICAgICAgICBibGVuZGluZzogTm9ybWFsQmxlbmRpbmcsXHJcbiAgICAgICAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oYW50aWFsaWFzZWQsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cywgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIGtlcm5lbDJEU2l6ZSkge1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBgXHJcblxyXG4gICAgICAgICAgICB2ZWM0IHNhbXBsZWRDb3ZhcmlhbmNlQTtcclxuICAgICAgICAgICAgdmVjNCBzYW1wbGVkQ292YXJpYW5jZUI7XHJcbiAgICAgICAgICAgIHZlYzMgY292M0RfTTExX00xMl9NMTM7XHJcbiAgICAgICAgICAgIHZlYzMgY292M0RfTTIyX00yM19NMzM7XHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVkQ292YXJpYW5jZUEgPSB0ZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZSwgZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAxLjUsIG9kZE9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgIHNhbXBsZWRDb3ZhcmlhbmNlQiA9IHRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSwgb2RkT2Zmc2V0ICsgdWludCgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMyA9IHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5iYSwgc2FtcGxlZENvdmFyaWFuY2VCLnIpICogZk9kZE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGNvdjNEX00yMl9NMjNfTTMzID0gdmVjMyhzYW1wbGVkQ292YXJpYW5jZUEuYSwgc2FtcGxlZENvdmFyaWFuY2VCLnJnKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2FtcGxlZENvdmFyaWFuY2VCLmdiYSkgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZENvdmFyaWFuY2VVID0gdGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQsIGdldERhdGFVVigxLCAwLCBjb3ZhcmlhbmNlc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgICAgICBmcm9tQ292YXJpYW5jZUhhbGZGbG9hdFY0KHNhbXBsZWRDb3ZhcmlhbmNlVSwgc2FtcGxlZENvdmFyaWFuY2VBLCBzYW1wbGVkQ292YXJpYW5jZUIpO1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMgPSBzYW1wbGVkQ292YXJpYW5jZUEucmdiO1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTIyX00yM19NMzMgPSB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5hLCBzYW1wbGVkQ292YXJpYW5jZUIucmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgM0QgY292YXJpYW5jZSBtYXRyaXhcclxuICAgICAgICAgICAgbWF0MyBWcmsgPSBtYXQzKFxyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMueCwgY292M0RfTTExX00xMl9NMTMueSwgY292M0RfTTExX00xMl9NMTMueixcclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzLnksIGNvdjNEX00yMl9NMjNfTTMzLngsIGNvdjNEX00yMl9NMjNfTTMzLnksXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMy56LCBjb3YzRF9NMjJfTTIzX00zMy55LCBjb3YzRF9NMjJfTTIzX00zMy56XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBtYXQzIEo7XHJcbiAgICAgICAgICAgIGlmIChvcnRob2dyYXBoaWNNb2RlID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBwcm9qZWN0aW9uIGlzIGxpbmVhciwgd2UgZG9uJ3QgbmVlZCBhbiBhcHByb3hpbWF0aW9uXHJcbiAgICAgICAgICAgICAgICBKID0gdHJhbnNwb3NlKG1hdDMob3J0aG9ab29tLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjAsIG9ydGhvWm9vbSwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgMC4wLCAwLjApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgSmFjb2JpYW4gb2YgdGhlIGFmZmluZSBhcHByb3hpbWF0aW9uIG9mIHRoZSBwcm9qZWN0aW9uIG1hdHJpeC4gSXQgd2lsbCBiZSB1c2VkIHRvIHRyYW5zZm9ybSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIDNEIGNvdmFyaWFuY2UgbWF0cml4IGluc3RlYWQgb2YgdXNpbmcgdGhlIGFjdHVhbCBwcm9qZWN0aW9uIG1hdHJpeCBiZWNhdXNlIHRoYXQgdHJhbnNmb3JtYXRpb24gd291bGRcclxuICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUgYSBub24tbGluZWFyIGNvbXBvbmVudCAocGVyc3BlY3RpdmUgZGl2aXNpb24pIHdoaWNoIHdvdWxkIHlpZWxkIGEgbm9uLWdhdXNzaWFuIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHMgPSAxLjAgLyAodmlld0NlbnRlci56ICogdmlld0NlbnRlci56KTtcclxuICAgICAgICAgICAgICAgIEogPSBtYXQzKFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY2FsLnggLyB2aWV3Q2VudGVyLnosIDAuLCAtKGZvY2FsLnggKiB2aWV3Q2VudGVyLngpICogcyxcclxuICAgICAgICAgICAgICAgICAgICAwLiwgZm9jYWwueSAvIHZpZXdDZW50ZXIueiwgLShmb2NhbC55ICogdmlld0NlbnRlci55KSAqIHMsXHJcbiAgICAgICAgICAgICAgICAgICAgMC4sIDAuLCAwLlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ29uY2F0ZW5hdGUgdGhlIHByb2plY3Rpb24gYXBwcm94aW1hdGlvbiB3aXRoIHRoZSBtb2RlbC12aWV3IHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIG1hdDMgVyA9IHRyYW5zcG9zZShtYXQzKHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCkpO1xyXG4gICAgICAgICAgICBtYXQzIFQgPSBXICogSjtcclxuXHJcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgM0QgY292YXJpYW5jZSBtYXRyaXggKFZyaykgdG8gY29tcHV0ZSB0aGUgMkQgY292YXJpYW5jZSBtYXRyaXhcclxuICAgICAgICAgICAgbWF0MyBjb3YyRG0gPSB0cmFuc3Bvc2UoVCkgKiBWcmsgKiBUO1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICBpZiAoYW50aWFsaWFzZWQpIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRldE9yaWcgPSBjb3YyRG1bMF1bMF0gKiBjb3YyRG1bMV1bMV0gLSBjb3YyRG1bMF1bMV0gKiBjb3YyRG1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMF1bMF0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgY292MkRtWzFdWzFdICs9ICR7a2VybmVsMkRTaXplfTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRldEJsdXIgPSBjb3YyRG1bMF1bMF0gKiBjb3YyRG1bMV1bMV0gLSBjb3YyRG1bMF1bMV0gKiBjb3YyRG1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICB2Q29sb3IuYSAqPSBzcXJ0KG1heChkZXRPcmlnIC8gZGV0Qmx1ciwgMC4wKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodkNvbG9yLmEgPCBtaW5BbHBoYSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMF1bMF0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgY292MkRtWzFdWzFdICs9ICR7a2VybmVsMkRTaXplfTtcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcblxyXG4gICAgICAgICAgICAvLyBXZSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgdXBwZXItbGVmdCAyeDIgcG9ydGlvbiBvZiB0aGUgcHJvamVjdGVkIDNEIGNvdmFyaWFuY2UgbWF0cml4IGJlY2F1c2VcclxuICAgICAgICAgICAgLy8gd2Ugb25seSBjYXJlIGFib3V0IHRoZSBYIGFuZCBZIHZhbHVlcy4gV2Ugd2FudCB0aGUgWC1kaWFnb25hbCwgY292MkRtWzBdWzBdLFxyXG4gICAgICAgICAgICAvLyB0aGUgWS1kaWFnb25hbCwgY292MkRtWzFdWzFdLCBhbmQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHR3byBjb3YyRG1bMF1bMV0uIFdlIGRvbid0XHJcbiAgICAgICAgICAgIC8vIG5lZWQgY292MkRtWzFdWzBdIGJlY2F1c2UgaXQgaXMgYSBzeW1ldHJpYyBtYXRyaXguXHJcbiAgICAgICAgICAgIHZlYzMgY292MkR2ID0gdmVjMyhjb3YyRG1bMF1bMF0sIGNvdjJEbVswXVsxXSwgY292MkRtWzFdWzFdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIG5vdyBuZWVkIHRvIHNvbHZlIGZvciB0aGUgZWlnZW4tdmFsdWVzIGFuZCBlaWdlbiB2ZWN0b3JzIG9mIHRoZSAyRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgdGhlIDJEIGJhc2lzIGZvciB0aGUgc3BsYXQuIFRoaXMgaXMgZG9uZSB1c2luZyB0aGUgbWV0aG9kIGRlc2NyaWJlZFxyXG4gICAgICAgICAgICAvLyBoZXJlOiBodHRwczovL3Blb3BsZS5tYXRoLmhhcnZhcmQuZWR1L35rbmlsbC90ZWFjaGluZy9tYXRoMjFiMjAwNC9leGhpYml0cy8yZG1hdHJpY2VzL2luZGV4Lmh0bWxcclxuICAgICAgICAgICAgLy8gQWZ0ZXIgY2FsY3VsYXRpbmcgdGhlIGVpZ2VuLXZhbHVlcyBhbmQgZWlnZW4tdmVjdG9ycywgd2UgY2FsY3VsYXRlIHRoZSBiYXNpcyBmb3IgcmVuZGVyaW5nIHRoZSBzcGxhdFxyXG4gICAgICAgICAgICAvLyBieSBub3JtYWxpemluZyB0aGUgZWlnZW4tdmVjdG9ycyBhbmQgdGhlbiBtdWx0aXBseWluZyB0aGVtIGJ5IChzcXJ0KDgpICogc3FydChlaWdlbi12YWx1ZSkpLCB3aGljaCBpc1xyXG4gICAgICAgICAgICAvLyBlcXVhbCB0byBzY2FsaW5nIHRoZW0gYnkgc3FydCg4KSBzdGFuZGFyZCBkZXZpYXRpb25zLlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGlmZmVyZW50IGFwcHJvYWNoIHRoYW4gaW4gdGhlIG9yaWdpbmFsIHdvcmsgYXQgSU5SSUEuIEluIHRoYXQgd29yayB0aGV5IGNvbXB1dGUgdGhlXHJcbiAgICAgICAgICAgIC8vIG1heCBleHRlbnRzIG9mIHRoZSBwcm9qZWN0ZWQgc3BsYXQgaW4gc2NyZWVuIHNwYWNlIHRvIGZvcm0gYSBzY3JlZW4tc3BhY2UgYWxpZ25lZCBib3VuZGluZyByZWN0YW5nbGVcclxuICAgICAgICAgICAgLy8gd2hpY2ggZm9ybXMgdGhlIGdlb21ldHJ5IHRoYXQgaXMgYWN0dWFsbHkgcmFzdGVyaXplZC4gVGhlIGRpbWVuc2lvbnMgb2YgdGhhdCBib3VuZGluZyBib3ggYXJlIDMuMFxyXG4gICAgICAgICAgICAvLyB0aW1lcyB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIG1heGltdW0gZWlnZW4tdmFsdWUsIG9yIDMgc3RhbmRhcmQgZGV2aWF0aW9ucy4gVGhleSB0aGVuIHVzZSB0aGUgaW52ZXJzZVxyXG4gICAgICAgICAgICAvLyAyRCBjb3ZhcmlhbmNlIG1hdHJpeCAoY2FsbGVkICdjb25pYycpIGluIHRoZSBDVURBIHJlbmRlcmluZyB0aHJlYWQgdG8gZGV0ZXJtaW5lIGZyYWdtZW50IG9wYWNpdHkgYnlcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgdGhlIGZ1bGwgZ2F1c3NpYW46IGV4cCgtMC41ICogKFggLSBtZWFuKSAqIGNvbmljICogKFggLSBtZWFuKSkgKiBzcGxhdCBvcGFjaXR5XHJcbiAgICAgICAgICAgIGZsb2F0IGEgPSBjb3YyRHYueDtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IGNvdjJEdi56O1xyXG4gICAgICAgICAgICBmbG9hdCBiID0gY292MkR2Lnk7XHJcbiAgICAgICAgICAgIGZsb2F0IEQgPSBhICogZCAtIGIgKiBiO1xyXG4gICAgICAgICAgICBmbG9hdCB0cmFjZSA9IGEgKyBkO1xyXG4gICAgICAgICAgICBmbG9hdCB0cmFjZU92ZXIyID0gMC41ICogdHJhY2U7XHJcbiAgICAgICAgICAgIGZsb2F0IHRlcm0yID0gc3FydChtYXgoMC4xZiwgdHJhY2VPdmVyMiAqIHRyYWNlT3ZlcjIgLSBEKSk7XHJcbiAgICAgICAgICAgIGZsb2F0IGVpZ2VuVmFsdWUxID0gdHJhY2VPdmVyMiArIHRlcm0yO1xyXG4gICAgICAgICAgICBmbG9hdCBlaWdlblZhbHVlMiA9IHRyYWNlT3ZlcjIgLSB0ZXJtMjtcclxuXHJcbiAgICAgICAgICAgIGlmIChwb2ludENsb3VkTW9kZUVuYWJsZWQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgZWlnZW5WYWx1ZTEgPSBlaWdlblZhbHVlMiA9IDAuMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVpZ2VuVmFsdWUyIDw9IDAuMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBlaWdlblZlY3RvcjEgPSBub3JtYWxpemUodmVjMihiLCBlaWdlblZhbHVlMSAtIGEpKTtcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGVpZ2VuIHZlY3RvcnMgYXJlIG9ydGhvZ29uYWwsIHdlIGRlcml2ZSB0aGUgc2Vjb25kIG9uZSBmcm9tIHRoZSBmaXJzdFxyXG4gICAgICAgICAgICB2ZWMyIGVpZ2VuVmVjdG9yMiA9IHZlYzIoZWlnZW5WZWN0b3IxLnksIC1laWdlblZlY3RvcjEueCk7XHJcblxyXG4gICAgICAgICAgICAvLyBXZSB1c2Ugc3FydCg4KSBzdGFuZGFyZCBkZXZpYXRpb25zIGluc3RlYWQgb2YgMyB0byBlbGltaW5hdGUgbW9yZSBvZiB0aGUgc3BsYXQgd2l0aCBhIHZlcnkgbG93IG9wYWNpdHkuXHJcbiAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IxID0gZWlnZW5WZWN0b3IxICogc3BsYXRTY2FsZSAqIG1pbihzcXJ0OCAqIHNxcnQoZWlnZW5WYWx1ZTEpLCAke3BhcnNlSW50KG1heFNjcmVlblNwYWNlU3BsYXRTaXplKX0uMCk7XHJcbiAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IyID0gZWlnZW5WZWN0b3IyICogc3BsYXRTY2FsZSAqIG1pbihzcXJ0OCAqIHNxcnQoZWlnZW5WYWx1ZTIpLCAke3BhcnNlSW50KG1heFNjcmVlblNwYWNlU3BsYXRTaXplKX0uMCk7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIHZDb2xvci5hICo9IHNwbGF0T3BhY2l0eUZyb21TY2VuZTtcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgIHZlYzIgbmRjT2Zmc2V0ID0gdmVjMih2UG9zaXRpb24ueCAqIGJhc2lzVmVjdG9yMSArIHZQb3NpdGlvbi55ICogYmFzaXNWZWN0b3IyKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzaXNWaWV3cG9ydCAqIDIuMCAqIGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IHF1YWRQb3MgPSB2ZWM0KG5kY0NlbnRlci54eSArIG5kY09mZnNldCwgbmRjQ2VudGVyLnosIDEuMCk7XHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcXVhZFBvcztcclxuXHJcbiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSBwb3NpdGlvbiBkYXRhIHdlIHNlbmQgdG8gdGhlIGZyYWdtZW50IHNoYWRlclxyXG4gICAgICAgICAgICB2UG9zaXRpb24gKj0gc3FydDg7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IFNwbGF0TWF0ZXJpYWwuZ2V0VmVydGV4U2hhZGVyRmFkZUluKCk7XHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGB9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRleFNoYWRlclNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYnVpbGRGcmFnbWVudFNoYWRlcigpIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBgXHJcbiAgICAgICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAgICAgI2luY2x1ZGUgPGNvbW1vbj5cclxuIFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgZGVidWdDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2VXY7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2U3BsYXRJbmRleDtcclxuXHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb25hbCBzcXVhcmVkIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgc3BsYXQgdG8gdGhlIGN1cnJlbnQgZnJhZ21lbnQuXHJcbiAgICAgICAgICAgICAgICBmbG9hdCBBID0gZG90KHZQb3NpdGlvbiwgdlBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBwb3NpdGlvbmFsIGRhdGEgaW4gdlBvc2l0aW9uIGhhcyBiZWVuIHNjYWxlZCBieSBzcXJ0KDgpLCB0aGUgc3F1YXJlZCByZXN1bHQgd2lsbCBiZVxyXG4gICAgICAgICAgICAgICAgLy8gc2NhbGVkIGJ5IGEgZmFjdG9yIG9mIDguIElmIHRoZSBzcXVhcmVkIHJlc3VsdCBpcyBsYXJnZXIgdGhhbiA4LCBpdCBtZWFucyBpdCBpcyBvdXRzaWRlIHRoZSBlbGxpcHNlXHJcbiAgICAgICAgICAgICAgICAvLyBkZWZpbmVkIGJ5IHRoZSByZWN0YW5nbGUgZm9ybWVkIGJ5IHZQb3NpdGlvbi4gSXQgYWxzbyBtZWFucyBpdCdzIGZhcnRoZXJcclxuICAgICAgICAgICAgICAgIC8vIGF3YXkgdGhhbiBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVhbi5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZih2U3BsYXRJbmRleC54ID4gMjAwMDAuMCkgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIC8vIGlmIChBID4gOC4wKSBkaXNjYXJkO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBjb2xvciA9IHZDb2xvci5yZ2I7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhlIHJlbmRlcmVkIHNwbGF0IGlzIHNjYWxlZCBieSBzcXJ0KDgpLCB0aGUgaW52ZXJzZSBjb3ZhcmlhbmNlIG1hdHJpeCB0aGF0IGlzIHBhcnQgb2ZcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBnYXVzc2lhbiBmb3JtdWxhIGJlY29tZXMgdGhlIGlkZW50aXR5IG1hdHJpeC4gV2UncmUgdGhlbiBsZWZ0IHdpdGggKFggLSBtZWFuKSAqIChYIC0gbWVhbiksXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2luY2UgJ21lYW4nIGlzIHplcm8sIHdlIGhhdmUgWCAqIFgsIHdoaWNoIGlzIHRoZSBzYW1lIGFzIEE6XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBvcGFjaXR5ID0gZXhwKCAtMC41KkEpICogdkNvbG9yLmE7XHJcbiAgICAgICAgICAgICAgICBpZihvcGFjaXR5IDwgMS4wIC8gMjU1LjApXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1aW50IGEgPSB1aW50KDI1NSk7XHJcbiAgICAgICAgICAgICAgICAvLyB2ZWMzIGMgPSB2ZWMzKHZTcGxhdEluZGV4LnggLyAyNTYuMCAvIDI1Ni4wLCBmbG9hdCh1aW50KHZTcGxhdEluZGV4LnggLyAyNTYuMCApJSBhKSAvIDI1Ni4wLCBmbG9hdCh1aW50KHZTcGxhdEluZGV4LngpJSBhKSAvIDI1Ni4wKTtcclxuICAgICAgICAgICAgICAgIC8vIGdsX0ZyYWdDb2xvciA9IHZlYzQoYywgMS4wKTtcclxuICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIG9wYWNpdHkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0TWF0ZXJpYWwzRFxyXG4gKiBcclxuICogQmFzZWQgb24gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIE1vZGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBFeHRlbmRlZCB2ZXJ0ZXggc2hhZGVyIGZvciBGTEFNRSBpbnRlZ3JhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERvdWJsZVNpZGUsIE5vcm1hbEJsZW5kaW5nLCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMiB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgU3BsYXRNYXRlcmlhbCB9IGZyb20gJy4vU3BsYXRNYXRlcmlhbC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRNYXRlcmlhbDNEIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBUaHJlZS5qcyBtYXRlcmlhbCB0aGF0IGlzIHVzZWQgdG8gcmVuZGVyIHRoZSBzcGxhdHMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHluYW1pY01vZGUgSWYgdHJ1ZSwgaXQgbWVhbnMgdGhlIHNjZW5lIGdlb21ldHJ5IHJlcHJlc2VudGVkIGJ5IHRoaXMgc3BsYXQgbWVzaCBpcyBub3Qgc3RhdGlvbmFyeSBvclxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgdGhlIHNwbGF0IGNvdW50IG1pZ2h0IGNoYW5nZVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVPcHRpb25hbEVmZmVjdHMgV2hlbiB0cnVlLCBhbGxvd3MgZm9yIHVzYWdlIG9mIGV4dHJhIHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMgaW4gdGhlIHNoYWRlciBmb3IgZWZmZWN0c1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjaCBhcyBvcGFjaXR5IGFkanVzdG1lbnQuIERlZmF1bHQgaXMgZmFsc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFudGlhbGlhc2VkIElmIHRydWUsIGNhbGN1bGF0ZSBjb21wZW5zYXRpb24gZmFjdG9yIHRvIGRlYWwgd2l0aCBnYXVzc2lhbnMgYmVpbmcgcmVuZGVyZWQgYXQgYSBzaWduaWZpY2FudGx5XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVudCByZXNvbHV0aW9uIHRoYW4gdGhhdCBvZiB0aGVpciB0cmFpbmluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFNjcmVlblNwYWNlU3BsYXRTaXplIFRoZSBtYXhpbXVtIGNsaXAgc3BhY2Ugc3BsYXQgc2l6ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0U2NhbGUgVmFsdWUgYnkgd2hpY2ggYWxsIHNwbGF0cyBhcmUgc2NhbGVkIGluIHNjcmVlbi1zcGFjZSAoZGVmYXVsdCBpcyAxLjApXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRDbG91ZE1vZGVFbmFibGVkIFJlbmRlciBhbGwgc3BsYXRzIGFzIHNjcmVlbi1zcGFjZSBjaXJjbGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIERlZ3JlZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIHRvIHV0aWxpemUgaW4gcmVuZGVyaW5nIHNwbGF0c1xyXG4gICAgICogQHJldHVybiB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZChkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSwgYW50aWFsaWFzZWQgPSBmYWxzZSwgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgPSAyMDQ4LFxyXG4gICAgICAgICAgICAgICAgIHNwbGF0U2NhbGUgPSAxLjAsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9IGZhbHNlLCBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLCBrZXJuZWwyRFNpemUgPSAwLjMsIGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbVZlcnRleFZhcnMgPSBgXHJcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMiBjb3ZhcmlhbmNlc1RleHR1cmVTaXplO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBjb3ZhcmlhbmNlc1RleHR1cmU7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQ7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaW50IGNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0O1xyXG5cclxuICAgICAgICAgICAgdm9pZCBmcm9tQ292YXJpYW5jZUhhbGZGbG9hdFY0KHV2ZWM0IHZhbCwgb3V0IHZlYzQgZmlyc3QsIG91dCB2ZWM0IHNlY29uZCkge1xyXG4gICAgICAgICAgICAgICAgdmVjMiByID0gdW5wYWNrSGFsZjJ4MTYodmFsLnIpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBnID0gdW5wYWNrSGFsZjJ4MTYodmFsLmcpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBiID0gdW5wYWNrSGFsZjJ4MTYodmFsLmIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpcnN0ID0gdmVjNChyLngsIHIueSwgZy54LCBnLnkpO1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kID0gdmVjNChiLngsIGIueSwgMC4wLCAwLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gQWRkIGEgdmFyeWluZyBmb3IgaXJpcyBzcGxhdHNcclxuICAgICAgICBsZXQgdmVydGV4U2hhZGVyU291cmNlID0gU3BsYXRNYXRlcmlhbC5idWlsZFZlcnRleFNoYWRlckJhc2UoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKGFudGlhbGlhc2VkLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNjcmVlblNwYWNlU3BsYXRTaXplLCBrZXJuZWwyRFNpemUpO1xyXG4gICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyU291cmNlID0gU3BsYXRNYXRlcmlhbDNELmJ1aWxkRnJhZ21lbnRTaGFkZXIoaXJpc09jY2x1c2lvbkNvbmZpZyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gU3BsYXRNYXRlcmlhbC5nZXRVbmlmb3JtcyhkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNwbGF0U2NhbGUsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCk7XHJcblxyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmVTaXplJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmUnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdCddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICdpJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgdW5pZm9ybXM6IHVuaWZvcm1zLFxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXI6IHZlcnRleFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXI6IGZyYWdtZW50U2hhZGVyU291cmNlLFxyXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgICAgICAgICAgYWxwaGFUZXN0OiAxLjAsXHJcbiAgICAgICAgICAgIGJsZW5kaW5nOiBOb3JtYWxCbGVuZGluZyxcclxuICAgICAgICAgICAgZGVwdGhUZXN0OiB0cnVlLFxyXG4gICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2lkZTogRG91YmxlU2lkZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGJ1aWxkVmVydGV4U2hhZGVyUHJvamVjdGlvbihhbnRpYWxpYXNlZCwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSwga2VybmVsMkRTaXplKSB7XHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IGBcclxuXHJcbiAgICAgICAgICAgIHZlYzQgc2FtcGxlZENvdmFyaWFuY2VBO1xyXG4gICAgICAgICAgICB2ZWM0IHNhbXBsZWRDb3ZhcmlhbmNlQjtcclxuICAgICAgICAgICAgdmVjMyBjb3YzRF9NMTFfTTEyX00xMztcclxuICAgICAgICAgICAgdmVjMyBjb3YzRF9NMjJfTTIzX00zMztcclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0ID09IDApIHtcclxuICAgICAgICAgICAgICAgIHNhbXBsZWRDb3ZhcmlhbmNlQSA9IHRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSwgb2RkT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgc2FtcGxlZENvdmFyaWFuY2VCID0gdGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmUsIGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMS41LCBvZGRPZmZzZXQgKyB1aW50KDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzID0gdmVjMyhzYW1wbGVkQ292YXJpYW5jZUEucmdiKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLmJhLCBzYW1wbGVkQ292YXJpYW5jZUIucikgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTIyX00yM19NMzMgPSB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5hLCBzYW1wbGVkQ292YXJpYW5jZUIucmcpICogKDEuMCAtIGZPZGRPZmZzZXQpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMyhzYW1wbGVkQ292YXJpYW5jZUIuZ2JhKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1dmVjNCBzYW1wbGVkQ292YXJpYW5jZVUgPSB0ZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZUhhbGZGbG9hdCwgZ2V0RGF0YVVWKDEsIDAsIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgIGZyb21Db3ZhcmlhbmNlSGFsZkZsb2F0VjQoc2FtcGxlZENvdmFyaWFuY2VVLCBzYW1wbGVkQ292YXJpYW5jZUEsIHNhbXBsZWRDb3ZhcmlhbmNlQik7XHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMyA9IHNhbXBsZWRDb3ZhcmlhbmNlQS5yZ2I7XHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMjJfTTIzX00zMyA9IHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLmEsIHNhbXBsZWRDb3ZhcmlhbmNlQi5yZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSAzRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICBtYXQzIFZyayA9IG1hdDMoXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMy54LCBjb3YzRF9NMTFfTTEyX00xMy55LCBjb3YzRF9NMTFfTTEyX00xMy56LFxyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMueSwgY292M0RfTTIyX00yM19NMzMueCwgY292M0RfTTIyX00yM19NMzMueSxcclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzLnosIGNvdjNEX00yMl9NMjNfTTMzLnksIGNvdjNEX00yMl9NMjNfTTMzLnpcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDMgSjtcclxuICAgICAgICAgICAgaWYgKG9ydGhvZ3JhcGhpY01vZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhlIHByb2plY3Rpb24gaXMgbGluZWFyLCB3ZSBkb24ndCBuZWVkIGFuIGFwcHJveGltYXRpb25cclxuICAgICAgICAgICAgICAgIEogPSB0cmFuc3Bvc2UobWF0MyhvcnRob1pvb20sIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgb3J0aG9ab29tLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAwLjAsIDAuMCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBKYWNvYmlhbiBvZiB0aGUgYWZmaW5lIGFwcHJveGltYXRpb24gb2YgdGhlIHByb2plY3Rpb24gbWF0cml4LiBJdCB3aWxsIGJlIHVzZWQgdG8gdHJhbnNmb3JtIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gM0QgY292YXJpYW5jZSBtYXRyaXggaW5zdGVhZCBvZiB1c2luZyB0aGUgYWN0dWFsIHByb2plY3Rpb24gbWF0cml4IGJlY2F1c2UgdGhhdCB0cmFuc2Zvcm1hdGlvbiB3b3VsZFxyXG4gICAgICAgICAgICAgICAgLy8gcmVxdWlyZSBhIG5vbi1saW5lYXIgY29tcG9uZW50IChwZXJzcGVjdGl2ZSBkaXZpc2lvbikgd2hpY2ggd291bGQgeWllbGQgYSBub24tZ2F1c3NpYW4gcmVzdWx0LlxyXG4gICAgICAgICAgICAgICAgZmxvYXQgcyA9IDEuMCAvICh2aWV3Q2VudGVyLnogKiB2aWV3Q2VudGVyLnopO1xyXG4gICAgICAgICAgICAgICAgSiA9IG1hdDMoXHJcbiAgICAgICAgICAgICAgICAgICAgZm9jYWwueCAvIHZpZXdDZW50ZXIueiwgMC4sIC0oZm9jYWwueCAqIHZpZXdDZW50ZXIueCkgKiBzLFxyXG4gICAgICAgICAgICAgICAgICAgIDAuLCBmb2NhbC55IC8gdmlld0NlbnRlci56LCAtKGZvY2FsLnkgKiB2aWV3Q2VudGVyLnkpICogcyxcclxuICAgICAgICAgICAgICAgICAgICAwLiwgMC4sIDAuXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb25jYXRlbmF0ZSB0aGUgcHJvamVjdGlvbiBhcHByb3hpbWF0aW9uIHdpdGggdGhlIG1vZGVsLXZpZXcgdHJhbnNmb3JtYXRpb25cclxuICAgICAgICAgICAgbWF0MyBXID0gdHJhbnNwb3NlKG1hdDModHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4KSk7XHJcbiAgICAgICAgICAgIG1hdDMgVCA9IFcgKiBKO1xyXG5cclxuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIHRoZSAzRCBjb3ZhcmlhbmNlIG1hdHJpeCAoVnJrKSB0byBjb21wdXRlIHRoZSAyRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICBtYXQzIGNvdjJEbSA9IHRyYW5zcG9zZShUKSAqIFZyayAqIFQ7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIGlmIChhbnRpYWxpYXNlZCkge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGV0T3JpZyA9IGNvdjJEbVswXVswXSAqIGNvdjJEbVsxXVsxXSAtIGNvdjJEbVswXVsxXSAqIGNvdjJEbVswXVsxXTtcclxuICAgICAgICAgICAgICAgIGNvdjJEbVswXVswXSArPSAke2tlcm5lbDJEU2l6ZX07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMV1bMV0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGV0Qmx1ciA9IGNvdjJEbVswXVswXSAqIGNvdjJEbVsxXVsxXSAtIGNvdjJEbVswXVsxXSAqIGNvdjJEbVswXVsxXTtcclxuICAgICAgICAgICAgICAgIHZDb2xvci5hICo9IHNxcnQobWF4KGRldE9yaWcgLyBkZXRCbHVyLCAwLjApKTtcclxuICAgICAgICAgICAgICAgIGlmICh2Q29sb3IuYSA8IG1pbkFscGhhKSByZXR1cm47XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGNvdjJEbVswXVswXSArPSAke2tlcm5lbDJEU2l6ZX07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMV1bMV0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIGFyZSBpbnRlcmVzdGVkIGluIHRoZSB1cHBlci1sZWZ0IDJ4MiBwb3J0aW9uIG9mIHRoZSBwcm9qZWN0ZWQgM0QgY292YXJpYW5jZSBtYXRyaXggYmVjYXVzZVxyXG4gICAgICAgICAgICAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgdGhlIFggYW5kIFkgdmFsdWVzLiBXZSB3YW50IHRoZSBYLWRpYWdvbmFsLCBjb3YyRG1bMF1bMF0sXHJcbiAgICAgICAgICAgIC8vIHRoZSBZLWRpYWdvbmFsLCBjb3YyRG1bMV1bMV0sIGFuZCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgdHdvIGNvdjJEbVswXVsxXS4gV2UgZG9uJ3RcclxuICAgICAgICAgICAgLy8gbmVlZCBjb3YyRG1bMV1bMF0gYmVjYXVzZSBpdCBpcyBhIHN5bWV0cmljIG1hdHJpeC5cclxuICAgICAgICAgICAgdmVjMyBjb3YyRHYgPSB2ZWMzKGNvdjJEbVswXVswXSwgY292MkRtWzBdWzFdLCBjb3YyRG1bMV1bMV0pO1xyXG5cclxuICAgICAgICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gc29sdmUgZm9yIHRoZSBlaWdlbi12YWx1ZXMgYW5kIGVpZ2VuIHZlY3RvcnMgb2YgdGhlIDJEIGNvdmFyaWFuY2UgbWF0cml4XHJcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB0aGUgMkQgYmFzaXMgZm9yIHRoZSBzcGxhdC4gVGhpcyBpcyBkb25lIHVzaW5nIHRoZSBtZXRob2QgZGVzY3JpYmVkXHJcbiAgICAgICAgICAgIC8vIGhlcmU6IGh0dHBzOi8vcGVvcGxlLm1hdGguaGFydmFyZC5lZHUvfmtuaWxsL3RlYWNoaW5nL21hdGgyMWIyMDA0L2V4aGliaXRzLzJkbWF0cmljZXMvaW5kZXguaHRtbFxyXG4gICAgICAgICAgICAvLyBBZnRlciBjYWxjdWxhdGluZyB0aGUgZWlnZW4tdmFsdWVzIGFuZCBlaWdlbi12ZWN0b3JzLCB3ZSBjYWxjdWxhdGUgdGhlIGJhc2lzIGZvciByZW5kZXJpbmcgdGhlIHNwbGF0XHJcbiAgICAgICAgICAgIC8vIGJ5IG5vcm1hbGl6aW5nIHRoZSBlaWdlbi12ZWN0b3JzIGFuZCB0aGVuIG11bHRpcGx5aW5nIHRoZW0gYnkgKHNxcnQoOCkgKiBzcXJ0KGVpZ2VuLXZhbHVlKSksIHdoaWNoIGlzXHJcbiAgICAgICAgICAgIC8vIGVxdWFsIHRvIHNjYWxpbmcgdGhlbSBieSBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBkaWZmZXJlbnQgYXBwcm9hY2ggdGhhbiBpbiB0aGUgb3JpZ2luYWwgd29yayBhdCBJTlJJQS4gSW4gdGhhdCB3b3JrIHRoZXkgY29tcHV0ZSB0aGVcclxuICAgICAgICAgICAgLy8gbWF4IGV4dGVudHMgb2YgdGhlIHByb2plY3RlZCBzcGxhdCBpbiBzY3JlZW4gc3BhY2UgdG8gZm9ybSBhIHNjcmVlbi1zcGFjZSBhbGlnbmVkIGJvdW5kaW5nIHJlY3RhbmdsZVxyXG4gICAgICAgICAgICAvLyB3aGljaCBmb3JtcyB0aGUgZ2VvbWV0cnkgdGhhdCBpcyBhY3R1YWxseSByYXN0ZXJpemVkLiBUaGUgZGltZW5zaW9ucyBvZiB0aGF0IGJvdW5kaW5nIGJveCBhcmUgMy4wXHJcbiAgICAgICAgICAgIC8vIHRpbWVzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgbWF4aW11bSBlaWdlbi12YWx1ZSwgb3IgMyBzdGFuZGFyZCBkZXZpYXRpb25zLiBUaGV5IHRoZW4gdXNlIHRoZSBpbnZlcnNlXHJcbiAgICAgICAgICAgIC8vIDJEIGNvdmFyaWFuY2UgbWF0cml4IChjYWxsZWQgJ2NvbmljJykgaW4gdGhlIENVREEgcmVuZGVyaW5nIHRocmVhZCB0byBkZXRlcm1pbmUgZnJhZ21lbnQgb3BhY2l0eSBieVxyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGluZyB0aGUgZnVsbCBnYXVzc2lhbjogZXhwKC0wLjUgKiAoWCAtIG1lYW4pICogY29uaWMgKiAoWCAtIG1lYW4pKSAqIHNwbGF0IG9wYWNpdHlcclxuICAgICAgICAgICAgZmxvYXQgYSA9IGNvdjJEdi54O1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gY292MkR2Lno7XHJcbiAgICAgICAgICAgIGZsb2F0IGIgPSBjb3YyRHYueTtcclxuICAgICAgICAgICAgZmxvYXQgRCA9IGEgKiBkIC0gYiAqIGI7XHJcbiAgICAgICAgICAgIGZsb2F0IHRyYWNlID0gYSArIGQ7XHJcbiAgICAgICAgICAgIGZsb2F0IHRyYWNlT3ZlcjIgPSAwLjUgKiB0cmFjZTtcclxuICAgICAgICAgICAgZmxvYXQgdGVybTIgPSBzcXJ0KG1heCgwLjFmLCB0cmFjZU92ZXIyICogdHJhY2VPdmVyMiAtIEQpKTtcclxuICAgICAgICAgICAgZmxvYXQgZWlnZW5WYWx1ZTEgPSB0cmFjZU92ZXIyICsgdGVybTI7XHJcbiAgICAgICAgICAgIGZsb2F0IGVpZ2VuVmFsdWUyID0gdHJhY2VPdmVyMiAtIHRlcm0yO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBlaWdlblZhbHVlMSA9IGVpZ2VuVmFsdWUyID0gMC4yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWlnZW5WYWx1ZTIgPD0gMC4wKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2ZWMyIGVpZ2VuVmVjdG9yMSA9IG5vcm1hbGl6ZSh2ZWMyKGIsIGVpZ2VuVmFsdWUxIC0gYSkpO1xyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgZWlnZW4gdmVjdG9ycyBhcmUgb3J0aG9nb25hbCwgd2UgZGVyaXZlIHRoZSBzZWNvbmQgb25lIGZyb20gdGhlIGZpcnN0XHJcbiAgICAgICAgICAgIHZlYzIgZWlnZW5WZWN0b3IyID0gdmVjMihlaWdlblZlY3RvcjEueSwgLWVpZ2VuVmVjdG9yMS54KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIHVzZSBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMgaW5zdGVhZCBvZiAzIHRvIGVsaW1pbmF0ZSBtb3JlIG9mIHRoZSBzcGxhdCB3aXRoIGEgdmVyeSBsb3cgb3BhY2l0eS5cclxuICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjEgPSBlaWdlblZlY3RvcjEgKiBzcGxhdFNjYWxlICogbWluKHNxcnQ4ICogc3FydChlaWdlblZhbHVlMSksICR7cGFyc2VJbnQobWF4U2NyZWVuU3BhY2VTcGxhdFNpemUpfS4wKTtcclxuICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjIgPSBlaWdlblZlY3RvcjIgKiBzcGxhdFNjYWxlICogbWluKHNxcnQ4ICogc3FydChlaWdlblZhbHVlMiksICR7cGFyc2VJbnQobWF4U2NyZWVuU3BhY2VTcGxhdFNpemUpfS4wKTtcclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgdkNvbG9yLmEgKj0gc3BsYXRPcGFjaXR5RnJvbVNjZW5lO1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgdmVjMiBuZGNPZmZzZXQgPSB2ZWMyKHZQb3NpdGlvbi54ICogYmFzaXNWZWN0b3IxICsgdlBvc2l0aW9uLnkgKiBiYXNpc1ZlY3RvcjIpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNpc1ZpZXdwb3J0ICogMi4wICogaW52ZXJzZUZvY2FsQWRqdXN0bWVudDtcclxuXHJcbiAgICAgICAgICAgIHZlYzQgcXVhZFBvcyA9IHZlYzQobmRjQ2VudGVyLnh5ICsgbmRjT2Zmc2V0LCBuZGNDZW50ZXIueiwgMS4wKTtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBxdWFkUG9zO1xyXG5cclxuICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHBvc2l0aW9uIGRhdGEgd2Ugc2VuZCB0byB0aGUgZnJhZ21lbnQgc2hhZGVyXHJcbiAgICAgICAgICAgIHZQb3NpdGlvbiAqPSBzcXJ0ODtcclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gU3BsYXRNYXRlcmlhbC5nZXRWZXJ0ZXhTaGFkZXJGYWRlSW4oKTtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZEZyYWdtZW50U2hhZGVyKGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsKSB7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50U2hhZGVyU291cmNlID0gYFxyXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcbiAgICAgICAgICAgICNpbmNsdWRlIDxjb21tb24+XHJcblxyXG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGV5ZUJsaW5rTGVmdDtcclxuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBleWVCbGlua1JpZ2h0O1xyXG5cclxuICAgICAgICAgICAgdmFyeWluZyB2ZWM0IHZDb2xvcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZQb3NpdGlvbjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZTcGxhdEluZGV4O1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICAgICAgICAgIGZsb2F0IEEgPSBkb3QodlBvc2l0aW9uLCB2UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgb3BhY2l0eSA9IGV4cCgtMC41ICogQSkgKiB2Q29sb3IuYTtcclxuICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5IDwgMS4wIC8gMjU1LjApXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGF2YWlsYWJpbGl0eSBvZiBjb25maWd1cmluZyBrZXlzXHJcbiAgICAgICAgY29uc3QgaGFzS2V5ID0gKG9iaiwga2V5KSA9PiBvYmogJiYgb2JqW2tleV0gJiYgb2JqW2tleV0ubGVuZ3RoID4gMDtcclxuICAgICAgICBjb25zdCBoYXNSaWdodCA9IGhhc0tleShpcmlzT2NjbHVzaW9uQ29uZmlnLCAncmlnaHRfaXJpcycpO1xyXG4gICAgICAgIGNvbnN0IGhhc1JpZ2h0Tm9ydGggPSBoYXNLZXkoaXJpc09jY2x1c2lvbkNvbmZpZywgJ3JpZ2h0X2lyaXNfbm9ydGgnKTtcclxuICAgICAgICBjb25zdCBoYXNSaWdodFNvdXRoID0gaGFzS2V5KGlyaXNPY2NsdXNpb25Db25maWcsICdyaWdodF9pcmlzX3NvdXRoJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGFzTGVmdCA9IGhhc0tleShpcmlzT2NjbHVzaW9uQ29uZmlnLCAnbGVmdF9pcmlzJyk7XHJcbiAgICAgICAgY29uc3QgaGFzTGVmdE5vcnRoID0gaGFzS2V5KGlyaXNPY2NsdXNpb25Db25maWcsICdsZWZ0X2lyaXNfbm9ydGgnKTtcclxuICAgICAgICBjb25zdCBoYXNMZWZ0U291dGggPSBoYXNLZXkoaXJpc09jY2x1c2lvbkNvbmZpZywgJ2xlZnRfaXJpc19zb3V0aCcpO1xyXG5cclxuICAgICAgICBjb25zdCBhbnlJcmlzQ29uZmlnID0gaGFzUmlnaHQgfHwgaGFzUmlnaHROb3J0aCB8fCBoYXNSaWdodFNvdXRoIHx8IGhhc0xlZnQgfHwgaGFzTGVmdE5vcnRoIHx8IGhhc0xlZnRTb3V0aDtcclxuXHJcbiAgICAgICAgaWYgKGFueUlyaXNDb25maWcpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgaWR4ID0gdlNwbGF0SW5kZXgueDtcclxuICAgICAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICAvLyAtLS0gUmlnaHQgSXJpcyBMb2dpYyAtLS1cclxuICAgICAgICAgICAgaWYgKGhhc1JpZ2h0Tm9ydGggfHwgaGFzUmlnaHRTb3V0aCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm9ydGhcclxuICAgICAgICAgICAgICAgIGlmIChoYXNSaWdodE5vcnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9ucyA9IGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpc19ub3J0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbc3RhcnQsIGVuZF0pID0+IGAoaWR4ID49ICR7c3RhcnR9LjAgJiYgaWR4IDw9ICR7ZW5kfS4wKWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXNOb3J0aCA9ICR7Y29uZGl0aW9uc307XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZSArPSBgYm9vbCBpc1JpZ2h0SXJpc05vcnRoID0gZmFsc2U7YDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gU291dGhcclxuICAgICAgICAgICAgICAgIGlmIChoYXNSaWdodFNvdXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9ucyA9IGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpc19zb3V0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbc3RhcnQsIGVuZF0pID0+IGAoaWR4ID49ICR7c3RhcnR9LjAgJiYgaWR4IDw9ICR7ZW5kfS4wKWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXNTb3V0aCA9ICR7Y29uZGl0aW9uc307XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZSArPSBgYm9vbCBpc1JpZ2h0SXJpc1NvdXRoID0gZmFsc2U7YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBSaWdodFxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc1JpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9ucyA9IGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbc3RhcnQsIGVuZF0pID0+IGAoaWR4ID49ICR7c3RhcnR9LjAgJiYgaWR4IDw9ICR7ZW5kfS4wKWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXMgPSAke2NvbmRpdGlvbnN9ICYmICFpc1JpZ2h0SXJpc05vcnRoICYmICFpc1JpZ2h0SXJpc1NvdXRoO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYGJvb2wgaXNSaWdodElyaXMgPSBmYWxzZTtgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc1JpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25zID0gaXJpc09jY2x1c2lvbkNvbmZpZy5yaWdodF9pcmlzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW3N0YXJ0LCBlbmRdKSA9PiBgKGlkeCA+PSAke3N0YXJ0fS4wICYmIGlkeCA8PSAke2VuZH0uMClgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXMgPSAke2NvbmRpdGlvbnN9O1xyXG4gICAgICAgICAgICAgICAgYm9vbCBpc1JpZ2h0SXJpc05vcnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBib29sIGlzUmlnaHRJcmlzU291dGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICBib29sIGlzUmlnaHRJcmlzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBib29sIGlzUmlnaHRJcmlzTm9ydGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXNTb3V0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gLS0tIExlZnQgSXJpcyBMb2dpYyAtLS1cclxuICAgICAgICAgICAgaWYgKGhhc0xlZnROb3J0aCB8fCBoYXNMZWZ0U291dGgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5vcnRoXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzTGVmdE5vcnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9ucyA9IGlyaXNPY2NsdXNpb25Db25maWcubGVmdF9pcmlzX25vcnRoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKFtzdGFydCwgZW5kXSkgPT4gYChpZHggPj0gJHtzdGFydH0uMCAmJiBpZHggPD0gJHtlbmR9LjApYClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyB8fFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgYm9vbCBpc0xlZnRJcmlzTm9ydGggPSAke2NvbmRpdGlvbnN9O1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYGJvb2wgaXNMZWZ0SXJpc05vcnRoID0gZmFsc2U7YDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTb3V0aFxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0xlZnRTb3V0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpc19zb3V0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbc3RhcnQsIGVuZF0pID0+IGAoaWR4ID49ICR7c3RhcnR9LjAgJiYgaWR4IDw9ICR7ZW5kfS4wKWApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpc1NvdXRoID0gJHtjb25kaXRpb25zfTtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBib29sIGlzTGVmdElyaXNTb3V0aCA9IGZhbHNlO2A7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgTGVmdFxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0xlZnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25zID0gaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoW3N0YXJ0LCBlbmRdKSA9PiBgKGlkeCA+PSAke3N0YXJ0fS4wICYmIGlkeCA8PSAke2VuZH0uMClgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbignIHx8XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKTtcclxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICBib29sIGlzTGVmdElyaXMgPSAke2NvbmRpdGlvbnN9ICYmICFpc0xlZnRJcmlzTm9ydGggJiYgIWlzTGVmdElyaXNTb3V0aDtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBib29sIGlzTGVmdElyaXMgPSBmYWxzZTtgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGhhc0xlZnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKFtzdGFydCwgZW5kXSkgPT4gYChpZHggPj0gJHtzdGFydH0uMCAmJiBpZHggPD0gJHtlbmR9LjApYClcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignIHx8XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpcyA9ICR7Y29uZGl0aW9uc307XHJcbiAgICAgICAgICAgICAgICBib29sIGlzTGVmdElyaXNOb3J0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYm9vbCBpc0xlZnRJcmlzU291dGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICBib29sIGlzTGVmdElyaXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpc05vcnRoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBib29sIGlzTGVmdElyaXNTb3V0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgZmluYWxPcGFjaXR5ID0gb3BhY2l0eTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNSaWdodElyaXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBmYWRlRmFjdG9yID0gMS4wIC0gc21vb3Roc3RlcCgwLjQ1LCAwLjY1LCBleWVCbGlua1JpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbE9wYWNpdHkgPSBvcGFjaXR5ICogZmFkZUZhY3RvcjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodElyaXNOb3J0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vcnRoIHBhcnQgZ2V0cyBjb3ZlcmVkIHZlcnkgZWFybHkgYnkgdXBwZXIgZXllbGlkXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC4wLCAwLjI1LCBleWVCbGlua1JpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbE9wYWNpdHkgPSBvcGFjaXR5ICogZmFkZUZhY3RvcjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodElyaXNTb3V0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNvdXRoIHBhcnQgZ2V0cyBjb3ZlcmVkIG11Y2ggbGF0ZXJcclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCBmYWRlRmFjdG9yID0gMS4wIC0gc21vb3Roc3RlcCgwLjY1LCAwLjksIGV5ZUJsaW5rUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT3BhY2l0eSA9IG9wYWNpdHkgKiBmYWRlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRJcmlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC40NSwgMC42NSwgZXllQmxpbmtMZWZ0KTtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbE9wYWNpdHkgPSBvcGFjaXR5ICogZmFkZUZhY3RvcjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMZWZ0SXJpc05vcnRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC4wLCAwLjI1LCBleWVCbGlua0xlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT3BhY2l0eSA9IG9wYWNpdHkgKiBmYWRlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRJcmlzU291dGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC42NSwgMC45LCBleWVCbGlua0xlZnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT3BhY2l0eSA9IG9wYWNpdHkgKiBmYWRlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmaW5hbE9wYWNpdHkgPCAxLjAgLyAyNTUuMClcclxuICAgICAgICAgICAgICAgICAgICBkaXNjYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodkNvbG9yLnJnYiwgZmluYWxPcGFjaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gaXJpcyBvY2NsdXNpb24gLSBzaW1wbGUgcmVuZGVyaW5nXHJcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQodkNvbG9yLnJnYiwgb3BhY2l0eSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvKipcclxuICogU3BsYXRNYXRlcmlhbDJEXHJcbiAqIFxyXG4gKiBCYXNlZCBvbiBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogTW9kaWZpZWQgZm9yIEZMQU1FIGF2YXRhciBzdXBwb3J0OlxyXG4gKiAtIEV4dGVuZGVkIHZlcnRleCBzaGFkZXIgZm9yIEZMQU1FIGludGVncmF0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRG91YmxlU2lkZSwgTm9ybWFsQmxlbmRpbmcsIFNoYWRlck1hdGVyaWFsLCBWZWN0b3IyIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBTcGxhdE1hdGVyaWFsIH0gZnJvbSAnLi9TcGxhdE1hdGVyaWFsLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdE1hdGVyaWFsMkQge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgdGhlIFRocmVlLmpzIG1hdGVyaWFsIHRoYXQgaXMgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkeW5hbWljTW9kZSBJZiB0cnVlLCBpdCBtZWFucyB0aGUgc2NlbmUgZ2VvbWV0cnkgcmVwcmVzZW50ZWQgYnkgdGhpcyBzcGxhdCBtZXNoIGlzIG5vdCBzdGF0aW9uYXJ5IG9yXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgc3BsYXQgY291bnQgbWlnaHQgY2hhbmdlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZU9wdGlvbmFsRWZmZWN0cyBXaGVuIHRydWUsIGFsbG93cyBmb3IgdXNhZ2Ugb2YgZXh0cmEgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBpbiB0aGUgc2hhZGVyIGZvciBlZmZlY3RzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNoIGFzIG9wYWNpdHkgYWRqdXN0bWVudC4gRGVmYXVsdCBpcyBmYWxzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcGxhdFNjYWxlIFZhbHVlIGJ5IHdoaWNoIGFsbCBzcGxhdHMgYXJlIHNjYWxlZCBpbiBzY3JlZW4tc3BhY2UgKGRlZmF1bHQgaXMgMS4wKVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBvaW50Q2xvdWRNb2RlRW5hYmxlZCBSZW5kZXIgYWxsIHNwbGF0cyBhcyBzY3JlZW4tc3BhY2UgY2lyY2xlc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSBEZWdyZWUgb2Ygc3BoZXJpY2FsIGhhcm1vbmljcyB0byB1dGlsaXplIGluIHJlbmRlcmluZyBzcGxhdHNcclxuICAgICAqIEByZXR1cm4ge1RIUkVFLlNoYWRlck1hdGVyaWFsfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnVpbGQoZHluYW1pY01vZGUgPSBmYWxzZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gZmFsc2UsIHNwbGF0U2NhbGUgPSAxLjAsXHJcbiAgICAgICAgICAgICAgICAgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuXHJcbiAgICAgICAgY29uc3QgY3VzdG9tVmVydGV4VmFycyA9IGBcclxuICAgICAgICAgICAgdW5pZm9ybSB2ZWMyIHNjYWxlUm90YXRpb25zVGV4dHVyZVNpemU7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNjYWxlUm90YXRpb25zVGV4dHVyZTtcclxuICAgICAgICAgICAgdmFyeWluZyBtYXQzIHZUO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdlF1YWRDZW50ZXI7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2RnJhZ0Nvb3JkO1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsLmJ1aWxkVmVydGV4U2hhZGVyQmFzZShkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsMkQuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsMkQuYnVpbGRGcmFnbWVudFNoYWRlcigpO1xyXG5cclxuICAgICAgICBjb25zdCB1bmlmb3JtcyA9IFNwbGF0TWF0ZXJpYWwuZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzcGxhdFNjYWxlLCBwb2ludENsb3VkTW9kZUVuYWJsZWQpO1xyXG5cclxuICAgICAgICB1bmlmb3Jtc1snc2NhbGVSb3RhdGlvbnNUZXh0dXJlJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snc2NhbGVSb3RhdGlvbnNUZXh0dXJlU2l6ZSddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgU2hhZGVyTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICB1bmlmb3JtczogdW5pZm9ybXMsXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlcjogdmVydGV4U2hhZGVyU291cmNlLFxyXG4gICAgICAgICAgICBmcmFnbWVudFNoYWRlcjogZnJhZ21lbnRTaGFkZXJTb3VyY2UsXHJcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxyXG4gICAgICAgICAgICBhbHBoYVRlc3Q6IDEuMCxcclxuICAgICAgICAgICAgYmxlbmRpbmc6IE5vcm1hbEJsZW5kaW5nLFxyXG4gICAgICAgICAgICBkZXB0aFRlc3Q6IHRydWUsXHJcbiAgICAgICAgICAgIGRlcHRoV3JpdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBzaWRlOiBEb3VibGVTaWRlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKCkge1xyXG5cclxuICAgICAgICAvLyBPcmlnaW5hbCBDVURBIGNvZGUgZm9yIGNhbGN1bGF0aW5nIHNwbGF0LXRvLXNjcmVlbiB0cmFuc2Zvcm1hdGlvbiwgZm9yIHJlZmVyZW5jZVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgIGdsbTo6bWF0MyBSID0gcXVhdF90b19yb3RtYXQocm90KTtcclxuICAgICAgICAgICAgZ2xtOjptYXQzIFMgPSBzY2FsZV90b19tYXQoc2NhbGUsIG1vZCk7XHJcbiAgICAgICAgICAgIGdsbTo6bWF0MyBMID0gUiAqIFM7XHJcblxyXG4gICAgICAgICAgICAvLyBjZW50ZXIgb2YgR2F1c3NpYW5zIGluIHRoZSBjYW1lcmEgY29vcmRpbmF0ZVxyXG4gICAgICAgICAgICBnbG06Om1hdDN4NCBzcGxhdDJ3b3JsZCA9IGdsbTo6bWF0M3g0KFxyXG4gICAgICAgICAgICAgICAgZ2xtOjp2ZWM0KExbMF0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICBnbG06OnZlYzQoTFsxXSwgMC4wKSxcclxuICAgICAgICAgICAgICAgIGdsbTo6dmVjNChwX29yaWcueCwgcF9vcmlnLnksIHBfb3JpZy56LCAxKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZ2xtOjptYXQ0IHdvcmxkMm5kYyA9IGdsbTo6bWF0NChcclxuICAgICAgICAgICAgICAgIHByb2ptYXRyaXhbMF0sIHByb2ptYXRyaXhbNF0sIHByb2ptYXRyaXhbOF0sIHByb2ptYXRyaXhbMTJdLFxyXG4gICAgICAgICAgICAgICAgcHJvam1hdHJpeFsxXSwgcHJvam1hdHJpeFs1XSwgcHJvam1hdHJpeFs5XSwgcHJvam1hdHJpeFsxM10sXHJcbiAgICAgICAgICAgICAgICBwcm9qbWF0cml4WzJdLCBwcm9qbWF0cml4WzZdLCBwcm9qbWF0cml4WzEwXSwgcHJvam1hdHJpeFsxNF0sXHJcbiAgICAgICAgICAgICAgICBwcm9qbWF0cml4WzNdLCBwcm9qbWF0cml4WzddLCBwcm9qbWF0cml4WzExXSwgcHJvam1hdHJpeFsxNV1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGdsbTo6bWF0M3g0IG5kYzJwaXggPSBnbG06Om1hdDN4NChcclxuICAgICAgICAgICAgICAgIGdsbTo6dmVjNChmbG9hdChXKSAvIDIuMCwgMC4wLCAwLjAsIGZsb2F0KFctMSkgLyAyLjApLFxyXG4gICAgICAgICAgICAgICAgZ2xtOjp2ZWM0KDAuMCwgZmxvYXQoSCkgLyAyLjAsIDAuMCwgZmxvYXQoSC0xKSAvIDIuMCksXHJcbiAgICAgICAgICAgICAgICBnbG06OnZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgVCA9IGdsbTo6dHJhbnNwb3NlKHNwbGF0MndvcmxkKSAqIHdvcmxkMm5kYyAqIG5kYzJwaXg7XHJcbiAgICAgICAgICAgIG5vcm1hbCA9IHRyYW5zZm9ybVZlYzR4Myh7TFsyXS54LCBMWzJdLnksIExbMl0uen0sIHZpZXdtYXRyaXgpO1xyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIC8vIENvbXB1dGUgYSAyRC10by0yRCBtYXBwaW5nIG1hdHJpeCBmcm9tIGEgdGFuZ2VudCBwbGFuZSBpbnRvIGEgaW1hZ2UgcGxhbmVcclxuICAgICAgICAvLyBnaXZlbiBhIDJEIGdhdXNzaWFuIHBhcmFtZXRlcnMuIFQgPSBXSCAoZnJvbSB0aGUgcGFwZXI6IGh0dHBzOi8vYXJ4aXYub3JnL3BkZi8yNDAzLjE3ODg4KVxyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBgXHJcblxyXG4gICAgICAgICAgICB2ZWM0IHNjYWxlUm90YXRpb25BID0gdGV4dHVyZShzY2FsZVJvdGF0aW9uc1RleHR1cmUsIGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMS41LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2RkT2Zmc2V0LCBzY2FsZVJvdGF0aW9uc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgIHZlYzQgc2NhbGVSb3RhdGlvbkIgPSB0ZXh0dXJlKHNjYWxlUm90YXRpb25zVGV4dHVyZSwgZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAxLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZGRPZmZzZXQgKyB1aW50KDEpLCBzY2FsZVJvdGF0aW9uc1RleHR1cmVTaXplKSk7XHJcblxyXG4gICAgICAgICAgICB2ZWMzIHNjYWxlUm90YXRpb24xMjMgPSB2ZWMzKHNjYWxlUm90YXRpb25BLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKHNjYWxlUm90YXRpb25BLmJhLCBzY2FsZVJvdGF0aW9uQi5yKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgIHZlYzMgc2NhbGVSb3RhdGlvbjQ1NiA9IHZlYzMoc2NhbGVSb3RhdGlvbkEuYSwgc2NhbGVSb3RhdGlvbkIucmcpICogKDEuMCAtIGZPZGRPZmZzZXQpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMyhzY2FsZVJvdGF0aW9uQi5nYmEpICogZk9kZE9mZnNldDtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IG1pc3NpbmdXID0gc3FydCgxLjAgLSBzY2FsZVJvdGF0aW9uNDU2LnggKiBzY2FsZVJvdGF0aW9uNDU2LnggLSBzY2FsZVJvdGF0aW9uNDU2LnkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVJvdGF0aW9uNDU2LnkgLSBzY2FsZVJvdGF0aW9uNDU2LnogKiBzY2FsZVJvdGF0aW9uNDU2LnopO1xyXG4gICAgICAgICAgICBtYXQzIFIgPSBxdWF0ZXJuaW9uVG9Sb3RhdGlvbk1hdHJpeChzY2FsZVJvdGF0aW9uNDU2LnIsIHNjYWxlUm90YXRpb240NTYuZywgc2NhbGVSb3RhdGlvbjQ1Ni5iLCBtaXNzaW5nVyk7XHJcbiAgICAgICAgICAgIG1hdDMgUyA9IG1hdDMoc2NhbGVSb3RhdGlvbjEyMy5yLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgc2NhbGVSb3RhdGlvbjEyMy5nLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjAsIDAuMCwgc2NhbGVSb3RhdGlvbjEyMy5iKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1hdDMgTCA9IFIgKiBTO1xyXG5cclxuICAgICAgICAgICAgbWF0M3g0IHNwbGF0MldvcmxkID0gbWF0M3g0KHZlYzQoTFswXSwgMC4wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQoTFsxXSwgMC4wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQoc3BsYXRDZW50ZXIueCwgc3BsYXRDZW50ZXIueSwgc3BsYXRDZW50ZXIueiwgMS4wKSk7XHJcblxyXG4gICAgICAgICAgICBtYXQ0IHdvcmxkMm5kYyA9IHRyYW5zcG9zZShwcm9qZWN0aW9uTWF0cml4ICogdHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgIG1hdDN4NCBuZGMycGl4ID0gbWF0M3g0KHZlYzQodmlld3BvcnQueCAvIDIuMCwgMC4wLCAwLjAsICh2aWV3cG9ydC54IC0gMS4wKSAvIDIuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQoMC4wLCB2aWV3cG9ydC55IC8gMi4wLCAwLjAsICh2aWV3cG9ydC55IC0gMS4wKSAvIDIuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKSk7XHJcblxyXG4gICAgICAgICAgICBtYXQzIFQgPSB0cmFuc3Bvc2Uoc3BsYXQyV29ybGQpICogd29ybGQybmRjICogbmRjMnBpeDtcclxuICAgICAgICAgICAgdmVjMyBub3JtYWwgPSB2ZWMzKHZpZXdNYXRyaXggKiB2ZWM0KExbMF1bMl0sIExbMV1bMl0sIExbMl1bMl0sIDAuMCkpO1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIE9yaWdpbmFsIENVREEgY29kZSBmb3IgcHJvamVjdGlvbiB0byAyRCwgZm9yIHJlZmVyZW5jZVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgIGZsb2F0MyBUMCA9IHtUWzBdWzBdLCBUWzBdWzFdLCBUWzBdWzJdfTtcclxuICAgICAgICAgICAgZmxvYXQzIFQxID0ge1RbMV1bMF0sIFRbMV1bMV0sIFRbMV1bMl19O1xyXG4gICAgICAgICAgICBmbG9hdDMgVDMgPSB7VFsyXVswXSwgVFsyXVsxXSwgVFsyXVsyXX07XHJcblxyXG4gICAgICAgICAgICAvLyBDb21wdXRlIEFBQkJcclxuICAgICAgICAgICAgZmxvYXQzIHRlbXBfcG9pbnQgPSB7MS4wZiwgMS4wZiwgLTEuMGZ9O1xyXG4gICAgICAgICAgICBmbG9hdCBkaXN0YW5jZSA9IHN1bWYzKFQzICogVDMgKiB0ZW1wX3BvaW50KTtcclxuICAgICAgICAgICAgZmxvYXQzIGYgPSAoMSAvIGRpc3RhbmNlKSAqIHRlbXBfcG9pbnQ7XHJcbiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA9PSAwLjApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHBvaW50X2ltYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgc3VtZjMoZiAqIFQwICogVDMpLFxyXG4gICAgICAgICAgICAgICAgc3VtZjMoZiAqIFQxICogVDMpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmbG9hdDIgdGVtcCA9IHtcclxuICAgICAgICAgICAgICAgIHN1bWYzKGYgKiBUMCAqIFQwKSxcclxuICAgICAgICAgICAgICAgIHN1bWYzKGYgKiBUMSAqIFQxKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBmbG9hdDIgaGFsZl9leHRlbmQgPSBwb2ludF9pbWFnZSAqIHBvaW50X2ltYWdlIC0gdGVtcDtcclxuICAgICAgICAgICAgZXh0ZW50ID0gc3FydGYyKG1heGYyKDFlLTQsIGhhbGZfZXh0ZW5kKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICovXHJcblxyXG4gICAgICAgIC8vIENvbXB1dGluZyB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSAyRCBHYXVzc2lhbiBhbmQgaXRzIGNlbnRlclxyXG4gICAgICAgIC8vIFRoZSBjZW50ZXIgb2YgdGhlIGJvdW5kaW5nIGJveCBpcyB1c2VkIHRvIGNyZWF0ZSBhIGxvdyBwYXNzIGZpbHRlci5cclxuICAgICAgICAvLyBUaGlzIGNvZGUgaXMgYmFzZWQgb2ZmIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gYW5kIGNyZWF0ZXMgYW4gQUFCQiBhbGlnbmVkXHJcbiAgICAgICAgLy8gd2l0aCB0aGUgc2NyZWVuIGZvciB0aGUgcXVhZCB0byBiZSByZW5kZXJlZC5cclxuICAgICAgICBjb25zdCByZWZlcmVuY2VRdWFkR2VuZXJhdGlvbiA9IGBcclxuICAgICAgICAgICAgdmVjMyBUMCA9IHZlYzMoVFswXVswXSwgVFswXVsxXSwgVFswXVsyXSk7XHJcbiAgICAgICAgICAgIHZlYzMgVDEgPSB2ZWMzKFRbMV1bMF0sIFRbMV1bMV0sIFRbMV1bMl0pO1xyXG4gICAgICAgICAgICB2ZWMzIFQzID0gdmVjMyhUWzJdWzBdLCBUWzJdWzFdLCBUWzJdWzJdKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzMgdGVtcFBvaW50ID0gdmVjMygxLjAsIDEuMCwgLTEuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGRpc3RhbmNlID0gKFQzLnggKiBUMy54ICogdGVtcFBvaW50LngpICsgKFQzLnkgKiBUMy55ICogdGVtcFBvaW50LnkpICsgKFQzLnogKiBUMy56ICogdGVtcFBvaW50LnopO1xyXG4gICAgICAgICAgICB2ZWMzIGYgPSAoMS4wIC8gZGlzdGFuY2UpICogdGVtcFBvaW50O1xyXG4gICAgICAgICAgICBpZiAoYWJzKGRpc3RhbmNlKSA8IDAuMDAwMDEpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IHBvaW50SW1hZ2VYID0gKFQwLnggKiBUMy54ICogZi54KSArIChUMC55ICogVDMueSAqIGYueSkgKyAoVDAueiAqIFQzLnogKiBmLnopO1xyXG4gICAgICAgICAgICBmbG9hdCBwb2ludEltYWdlWSA9IChUMS54ICogVDMueCAqIGYueCkgKyAoVDEueSAqIFQzLnkgKiBmLnkpICsgKFQxLnogKiBUMy56ICogZi56KTtcclxuICAgICAgICAgICAgdmVjMiBwb2ludEltYWdlID0gdmVjMihwb2ludEltYWdlWCwgcG9pbnRJbWFnZVkpO1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgdGVtcFggPSAoVDAueCAqIFQwLnggKiBmLngpICsgKFQwLnkgKiBUMC55ICogZi55KSArIChUMC56ICogVDAueiAqIGYueik7XHJcbiAgICAgICAgICAgIGZsb2F0IHRlbXBZID0gKFQxLnggKiBUMS54ICogZi54KSArIChUMS55ICogVDEueSAqIGYueSkgKyAoVDEueiAqIFQxLnogKiBmLnopO1xyXG4gICAgICAgICAgICB2ZWMyIHRlbXAgPSB2ZWMyKHRlbXBYLCB0ZW1wWSk7XHJcblxyXG4gICAgICAgICAgICB2ZWMyIGhhbGZFeHRlbmQgPSBwb2ludEltYWdlICogcG9pbnRJbWFnZSAtIHRlbXA7XHJcbiAgICAgICAgICAgIHZlYzIgZXh0ZW50ID0gc3FydChtYXgodmVjMigwLjAwMDEpLCBoYWxmRXh0ZW5kKSk7XHJcbiAgICAgICAgICAgIGZsb2F0IHJhZGl1cyA9IG1heChleHRlbnQueCwgZXh0ZW50LnkpO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBuZGNPZmZzZXQgPSAoKHBvc2l0aW9uLnh5ICogcmFkaXVzICogMy4wKSAqIGJhc2lzVmlld3BvcnQgKiAyLjApO1xyXG5cclxuICAgICAgICAgICAgdmVjNCBxdWFkUG9zID0gdmVjNChuZGNDZW50ZXIueHkgKyBuZGNPZmZzZXQsIG5kY0NlbnRlci56LCAxLjApO1xyXG4gICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHF1YWRQb3M7XHJcblxyXG4gICAgICAgICAgICB2VCA9IFQ7XHJcbiAgICAgICAgICAgIHZRdWFkQ2VudGVyID0gcG9pbnRJbWFnZTtcclxuICAgICAgICAgICAgdkZyYWdDb29yZCA9IChxdWFkUG9zLnh5ICogMC41ICsgMC41KSAqIHZpZXdwb3J0O1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZVJlZkltcGxlbWVudGF0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHVzZVJlZkltcGxlbWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSByZWZlcmVuY2VRdWFkR2VuZXJhdGlvbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBxdWFkIHRoYXQgaXMgYWxpZ25lZCB3aXRoIHRoZSBlaWdlbiB2ZWN0b3JzIG9mIHRoZSBwcm9qZWN0ZWQgZ2F1c3NpYW4gZm9yIHJlbmRlcmluZy5cclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGRpZmZlcmVudCBhcHByb2FjaCB0aGFuIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24sIHNpbWlsYXIgdG8gaG93IHRoZSByZW5kZXJpbmcgb2ZcclxuICAgICAgICAgICAgLy8gM0QgZ2F1c3NpYW5zIGluIHRoaXMgdmlld2VyIGRpZmZlcnMgZnJvbSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uLiBJZiB0aGUgcXVhZCBpcyB0b28gc21hbGxcclxuICAgICAgICAgICAgLy8gKHNtYWxsZXIgdGhhbiBhIHBpeGVsKSwgdGhlbiByZXZlcnQgdG8gdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbi5cclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuXHJcbiAgICAgICAgICAgICAgICBtYXQ0IHNwbGF0MldvcmxkNCA9IG1hdDQodmVjNChMWzBdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChMWzFdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChMWzJdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChzcGxhdENlbnRlci54LCBzcGxhdENlbnRlci55LCBzcGxhdENlbnRlci56LCAxLjApKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXQ0IFR0ID0gdHJhbnNwb3NlKHRyYW5zcG9zZShzcGxhdDJXb3JsZDQpICogd29ybGQybmRjKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWM0IHRlbXBQb2ludDEgPSBUdCAqIHZlYzQoMS4wLCAwLjAsIDAuMCwgMS4wKTtcclxuICAgICAgICAgICAgICAgIHRlbXBQb2ludDEgLz0gdGVtcFBvaW50MS53O1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzQgdGVtcFBvaW50MiA9IFR0ICogdmVjNCgwLjAsIDEuMCwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgdGVtcFBvaW50MiAvPSB0ZW1wUG9pbnQyLnc7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBjZW50ZXIgPSBUdCAqIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcclxuICAgICAgICAgICAgICAgIGNlbnRlciAvPSBjZW50ZXIudztcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIGJhc2lzVmVjdG9yMSA9IHRlbXBQb2ludDEueHkgLSBjZW50ZXIueHk7XHJcbiAgICAgICAgICAgICAgICB2ZWMyIGJhc2lzVmVjdG9yMiA9IHRlbXBQb2ludDIueHkgLSBjZW50ZXIueHk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjFTY3JlZW4gPSBiYXNpc1ZlY3RvcjEgKiAwLjUgKiB2aWV3cG9ydDtcclxuICAgICAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IyU2NyZWVuID0gYmFzaXNWZWN0b3IyICogMC41ICogdmlld3BvcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZmxvYXQgbWluUGl4ID0gMS47XHJcbiAgICAgICAgICAgICAgICBpZiAobGVuZ3RoKGJhc2lzVmVjdG9yMVNjcmVlbikgPCBtaW5QaXggfHwgbGVuZ3RoKGJhc2lzVmVjdG9yMlNjcmVlbikgPCBtaW5QaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAke3JlZmVyZW5jZVF1YWRHZW5lcmF0aW9ufVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZWMyIG5kY09mZnNldCA9IHZlYzIocG9zaXRpb24ueCAqIGJhc2lzVmVjdG9yMSArIHBvc2l0aW9uLnkgKiBiYXNpc1ZlY3RvcjIpICogMy4wICogaW52ZXJzZUZvY2FsQWRqdXN0bWVudDtcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHF1YWRQb3MgPSB2ZWM0KG5kY0NlbnRlci54eSArIG5kY09mZnNldCwgbmRjQ2VudGVyLnosIDEuMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBxdWFkUG9zO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2VCA9IFQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdlF1YWRDZW50ZXIgPSBjZW50ZXIueHk7XHJcbiAgICAgICAgICAgICAgICAgICAgdkZyYWdDb29yZCA9IChxdWFkUG9zLnh5ICogMC41ICsgMC41KSAqIHZpZXdwb3J0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IFNwbGF0TWF0ZXJpYWwuZ2V0VmVydGV4U2hhZGVyRmFkZUluKCk7XHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGB9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRleFNoYWRlclNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYnVpbGRGcmFnbWVudFNoYWRlcigpIHtcclxuXHJcbiAgICAgICAgLy8gT3JpZ2luYWwgQ1VEQSBjb2RlIGZvciBzcGxhdCBpbnRlcnNlY3Rpb24sIGZvciByZWZlcmVuY2VcclxuICAgICAgICAvKlxyXG4gICAgICAgICAgICBjb25zdCBmbG9hdDIgeHkgPSBjb2xsZWN0ZWRfeHlbal07XHJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0MyBUdSA9IGNvbGxlY3RlZF9UdVtqXTtcclxuICAgICAgICAgICAgY29uc3QgZmxvYXQzIFR2ID0gY29sbGVjdGVkX1R2W2pdO1xyXG4gICAgICAgICAgICBjb25zdCBmbG9hdDMgVHcgPSBjb2xsZWN0ZWRfVHdbal07XHJcbiAgICAgICAgICAgIGZsb2F0MyBrID0gcGl4LnggKiBUdyAtIFR1O1xyXG4gICAgICAgICAgICBmbG9hdDMgbCA9IHBpeC55ICogVHcgLSBUdjtcclxuICAgICAgICAgICAgZmxvYXQzIHAgPSBjcm9zcyhrLCBsKTtcclxuICAgICAgICAgICAgaWYgKHAueiA9PSAwLjApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBmbG9hdDIgcyA9IHtwLnggLyBwLnosIHAueSAvIHAuen07XHJcbiAgICAgICAgICAgIGZsb2F0IHJobzNkID0gKHMueCAqIHMueCArIHMueSAqIHMueSk7XHJcbiAgICAgICAgICAgIGZsb2F0MiBkID0ge3h5LnggLSBwaXhmLngsIHh5LnkgLSBwaXhmLnl9O1xyXG4gICAgICAgICAgICBmbG9hdCByaG8yZCA9IEZpbHRlckludlNxdWFyZSAqIChkLnggKiBkLnggKyBkLnkgKiBkLnkpO1xyXG5cclxuICAgICAgICAgICAgLy8gY29tcHV0ZSBpbnRlcnNlY3Rpb24gYW5kIGRlcHRoXHJcbiAgICAgICAgICAgIGZsb2F0IHJobyA9IG1pbihyaG8zZCwgcmhvMmQpO1xyXG4gICAgICAgICAgICBmbG9hdCBkZXB0aCA9IChyaG8zZCA8PSByaG8yZCkgPyAocy54ICogVHcueCArIHMueSAqIFR3LnkpICsgVHcueiA6IFR3Lno7XHJcbiAgICAgICAgICAgIGlmIChkZXB0aCA8IG5lYXJfbikgY29udGludWU7XHJcbiAgICAgICAgICAgIGZsb2F0NCBub3JfbyA9IGNvbGxlY3RlZF9ub3JtYWxfb3BhY2l0eVtqXTtcclxuICAgICAgICAgICAgZmxvYXQgbm9ybWFsWzNdID0ge25vcl9vLngsIG5vcl9vLnksIG5vcl9vLnp9O1xyXG4gICAgICAgICAgICBmbG9hdCBvcGEgPSBub3Jfby53O1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgcG93ZXIgPSAtMC41ZiAqIHJobztcclxuICAgICAgICAgICAgaWYgKHBvd2VyID4gMC4wZilcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gRXEuICgyKSBmcm9tIDNEIEdhdXNzaWFuIHNwbGF0dGluZyBwYXBlci5cclxuICAgICAgICAgICAgLy8gT2J0YWluIGFscGhhIGJ5IG11bHRpcGx5aW5nIHdpdGggR2F1c3NpYW4gb3BhY2l0eVxyXG4gICAgICAgICAgICAvLyBhbmQgaXRzIGV4cG9uZW50aWFsIGZhbGxvZmYgZnJvbSBtZWFuLlxyXG4gICAgICAgICAgICAvLyBBdm9pZCBudW1lcmljYWwgaW5zdGFiaWxpdGllcyAoc2VlIHBhcGVyIGFwcGVuZGl4KS5cclxuICAgICAgICAgICAgZmxvYXQgYWxwaGEgPSBtaW4oMC45OWYsIG9wYSAqIGV4cChwb3dlcikpO1xyXG4gICAgICAgICAgICBpZiAoYWxwaGEgPCAxLjBmIC8gMjU1LjBmKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIGZsb2F0IHRlc3RfVCA9IFQgKiAoMSAtIGFscGhhKTtcclxuICAgICAgICAgICAgaWYgKHRlc3RfVCA8IDAuMDAwMWYpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZsb2F0IHcgPSBhbHBoYSAqIFQ7XHJcbiAgICAgICAgKi9cclxuICAgICAgICBsZXQgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBgXHJcbiAgICAgICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAgICAgI2luY2x1ZGUgPGNvbW1vbj5cclxuXHJcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMyBkZWJ1Z0NvbG9yO1xyXG5cclxuICAgICAgICAgICAgdmFyeWluZyB2ZWM0IHZDb2xvcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZQb3NpdGlvbjtcclxuICAgICAgICAgICAgdmFyeWluZyBtYXQzIHZUO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdlF1YWRDZW50ZXI7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2RnJhZ0Nvb3JkO1xyXG5cclxuICAgICAgICAgICAgdm9pZCBtYWluICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbG9hdCBGaWx0ZXJJbnZTcXVhcmUgPSAyLjA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbG9hdCBuZWFyX24gPSAwLjI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbG9hdCBUID0gMS4wO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzIgeHkgPSB2UXVhZENlbnRlcjtcclxuICAgICAgICAgICAgICAgIHZlYzMgVHUgPSB2VFswXTtcclxuICAgICAgICAgICAgICAgIHZlYzMgVHYgPSB2VFsxXTtcclxuICAgICAgICAgICAgICAgIHZlYzMgVHcgPSB2VFsyXTtcclxuICAgICAgICAgICAgICAgIHZlYzMgayA9IHZGcmFnQ29vcmQueCAqIFR3IC0gVHU7XHJcbiAgICAgICAgICAgICAgICB2ZWMzIGwgPSB2RnJhZ0Nvb3JkLnkgKiBUdyAtIFR2O1xyXG4gICAgICAgICAgICAgICAgdmVjMyBwID0gY3Jvc3MoaywgbCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocC56ID09IDAuMCkgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIHZlYzIgcyA9IHZlYzIocC54IC8gcC56LCBwLnkgLyBwLnopO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgcmhvM2QgPSAocy54ICogcy54ICsgcy55ICogcy55KTsgXHJcbiAgICAgICAgICAgICAgICB2ZWMyIGQgPSB2ZWMyKHh5LnggLSB2RnJhZ0Nvb3JkLngsIHh5LnkgLSB2RnJhZ0Nvb3JkLnkpO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgcmhvMmQgPSBGaWx0ZXJJbnZTcXVhcmUgKiAoZC54ICogZC54ICsgZC55ICogZC55KTsgXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29tcHV0ZSBpbnRlcnNlY3Rpb24gYW5kIGRlcHRoXHJcbiAgICAgICAgICAgICAgICBmbG9hdCByaG8gPSBtaW4ocmhvM2QsIHJobzJkKTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRlcHRoID0gKHJobzNkIDw9IHJobzJkKSA/IChzLnggKiBUdy54ICsgcy55ICogVHcueSkgKyBUdy56IDogVHcuejsgXHJcbiAgICAgICAgICAgICAgICBpZiAoZGVwdGggPCBuZWFyX24pIGRpc2NhcmQ7XHJcbiAgICAgICAgICAgICAgICAvLyAgdmVjNCBub3JfbyA9IGNvbGxlY3RlZF9ub3JtYWxfb3BhY2l0eVtqXTtcclxuICAgICAgICAgICAgICAgIC8vICBmbG9hdCBub3JtYWxbM10gPSB7bm9yX28ueCwgbm9yX28ueSwgbm9yX28uen07XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBvcGEgPSB2Q29sb3IuYTtcclxuXHJcbiAgICAgICAgICAgICAgICBmbG9hdCBwb3dlciA9IC0wLjVmICogcmhvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvd2VyID4gMC4wZikgZGlzY2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFcS4gKDIpIGZyb20gM0QgR2F1c3NpYW4gc3BsYXR0aW5nIHBhcGVyLlxyXG4gICAgICAgICAgICAgICAgLy8gT2J0YWluIGFscGhhIGJ5IG11bHRpcGx5aW5nIHdpdGggR2F1c3NpYW4gb3BhY2l0eVxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIGl0cyBleHBvbmVudGlhbCBmYWxsb2ZmIGZyb20gbWVhbi5cclxuICAgICAgICAgICAgICAgIC8vIEF2b2lkIG51bWVyaWNhbCBpbnN0YWJpbGl0aWVzIChzZWUgcGFwZXIgYXBwZW5kaXgpLiBcclxuICAgICAgICAgICAgICAgIGZsb2F0IGFscGhhID0gbWluKDAuOTlmLCBvcGEgKiBleHAocG93ZXIpKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbHBoYSA8IDEuMGYgLyAyNTUuMGYpIGRpc2NhcmQ7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCB0ZXN0X1QgPSBUICogKDEuMCAtIGFscGhhKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXN0X1QgPCAwLjAwMDEpZGlzY2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICBmbG9hdCB3ID0gYWxwaGEgKiBUO1xyXG4gICAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2Q29sb3IucmdiLCB3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIHJldHVybiBmcmFnbWVudFNoYWRlclNvdXJjZTtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogU3BsYXRNZXNoXHJcbiAqIFxyXG4gKiBCYXNlZCBvbiBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogSEVBVklMWSBNT0RJRklFRCBmb3IgRkxBTUUgYXZhdGFyIHN1cHBvcnQ6XHJcbiAqIC0gQWRkZWQgRkxBTUUgYm9uZSB0ZXh0dXJlIGhhbmRsaW5nXHJcbiAqIC0gQWRkZWQgZXhwcmVzc2lvbiBibGVuZHNoYXBlIHN1cHBvcnRcclxuICogLSBFeHRlbmRlZCB3aXRoIHNraW5uaW5nIGRhdGEgbWFuYWdlbWVudFxyXG4gKiAtIEFkZGl0aW9uYWwgfjgwMCBsaW5lcyBvZiBGTEFNRS1zcGVjaWZpYyBjb2RlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQm94MywgQnVmZmVyR2VvbWV0cnksIERhdGFUZXh0dXJlLCBGbG9hdFR5cGUsIEhhbGZGbG9hdFR5cGUsIE1hdHJpeDQsIE1lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBRdWF0ZXJuaW9uLCBSR0JBRm9ybWF0LCBSR0JBSW50ZWdlckZvcm1hdCwgUkdGb3JtYXQsIFJHSW50ZWdlckZvcm1hdCwgUmVkRm9ybWF0LCBSZWRJbnRlZ2VyRm9ybWF0LCBSR0JJbnRlZ2VyRm9ybWF0LCBTY2VuZSwgVW5zaWduZWRCeXRlVHlwZSwgVW5zaWduZWRJbnRUeXBlLCBWZWN0b3IyLCBWZWN0b3IzLCBWZWN0b3I0LCBXZWJHTFJlbmRlcmVyIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBTcGxhdFJlbmRlck1vZGUgfSBmcm9tICcuLi9lbnVtcy9TcGxhdFJlbmRlck1vZGUuanMnO1xyXG5pbXBvcnQgeyBMb2dMZXZlbCB9IGZyb20gJy4uL2VudW1zL0xvZ0xldmVsLmpzJztcclxuaW1wb3J0IHsgU2NlbmVSZXZlYWxNb2RlIH0gZnJvbSAnLi4vZW51bXMvU2NlbmVSZXZlYWxNb2RlLmpzJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHsgU3BsYXRTY2VuZSB9IGZyb20gJy4vU3BsYXRTY2VuZS5qcyc7XHJcbmltcG9ydCB7IFNwbGF0R2VvbWV0cnkgfSBmcm9tICcuL1NwbGF0R2VvbWV0cnkuanMnO1xyXG5pbXBvcnQgeyBTcGxhdFRyZWUgfSBmcm9tICcuL1NwbGF0VHJlZS5qcyc7XHJcbmltcG9ydCB7IFNwbGF0TWF0ZXJpYWwzRCB9IGZyb20gJy4uL21hdGVyaWFscy9TcGxhdE1hdGVyaWFsM0QuanMnO1xyXG5pbXBvcnQgeyBTcGxhdE1hdGVyaWFsMkQgfSBmcm9tICcuLi9tYXRlcmlhbHMvU3BsYXRNYXRlcmlhbDJELmpzJztcclxuaW1wb3J0IHsgZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUsIHVpbnRFbmNvZGVkRmxvYXQsIHJnYmFBcnJheVRvSW50ZWdlciwgY2xhbXAgfSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignU3BsYXRNZXNoJyk7XHJcblxyXG4vLyBEdW1teSBnZW9tZXRyeSBhbmQgbWF0ZXJpYWwgZm9yIGluaXRpYWwgTWVzaCBjb25zdHJ1Y3Rpb25cclxuY29uc3QgZHVtbXlHZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xyXG5jb25zdCBkdW1teU1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKCk7XHJcblxyXG4vKipcclxuICogV2ViR0wgRXh0ZW5zaW9ucyBoZWxwZXIgKGZyb20gVGhyZWUuanMgaW50ZXJuYWxzKVxyXG4gKi9cclxuZnVuY3Rpb24gV2ViR0xFeHRlbnNpb25zJDEoZ2wpIHtcclxuICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB7fTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRFeHRlbnNpb24obmFtZSkge1xyXG4gICAgICAgIGlmIChleHRlbnNpb25zW25hbWVdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbnNbbmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZXh0ZW5zaW9uO1xyXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlICdXRUJHTF9kZXB0aF90ZXh0dXJlJzpcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfZGVwdGhfdGV4dHVyZScpIHx8IGdsLmdldEV4dGVuc2lvbignTU9aX1dFQkdMX2RlcHRoX3RleHR1cmUnKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfV0VCR0xfZGVwdGhfdGV4dHVyZScpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyc6XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb24gPSBnbC5nZXRFeHRlbnNpb24oJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ01PWl9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnOlxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ01PWl9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0Yyc6XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb24gPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZ2wuZ2V0RXh0ZW5zaW9uKG5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXh0ZW5zaW9uc1tuYW1lXSA9IGV4dGVuc2lvbjtcclxuICAgICAgICByZXR1cm4gZXh0ZW5zaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGFzOiBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRFeHRlbnNpb24obmFtZSkgIT09IG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0OiBmdW5jdGlvbihjYXBhYmlsaXRpZXMpIHtcclxuICAgICAgICAgICAgaWYgKGNhcGFiaWxpdGllcy5pc1dlYkdMMikge1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2Zsb2F0Jyk7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ1dFQkdMX2NsaXBfY3VsbF9kaXN0YW5jZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZXB0aF90ZXh0dXJlJyk7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0Jyk7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJyk7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ09FU19lbGVtZW50X2luZGV4X3VpbnQnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3ZlcnRleF9hcnJheV9vYmplY3QnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyJyk7XHJcbiAgICAgICAgICAgIGdldEV4dGVuc2lvbignRVhUX2NvbG9yX2J1ZmZlcl9oYWxmX2Zsb2F0Jyk7XHJcbiAgICAgICAgICAgIGdldEV4dGVuc2lvbignV0VCR0xfbXVsdGlzYW1wbGVkX3JlbmRlcl90b190ZXh0dXJlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZ2V0RXh0ZW5zaW9uKG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjogJyArIG5hbWUgKyAnIGV4dGVuc2lvbiBub3Qgc3VwcG9ydGVkLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBleHRlbnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdlYkdMIENhcGFiaWxpdGllcyBoZWxwZXIgKGZyb20gVGhyZWUuanMgaW50ZXJuYWxzKVxyXG4gKi9cclxuZnVuY3Rpb24gV2ViR0xDYXBhYmlsaXRpZXMkMShnbCwgZXh0ZW5zaW9ucywgcGFyYW1ldGVycykge1xyXG4gICAgbGV0IG1heEFuaXNvdHJvcHk7XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TWF4QW5pc290cm9weSgpIHtcclxuICAgICAgICBpZiAobWF4QW5pc290cm9weSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gbWF4QW5pc290cm9weTtcclxuICAgICAgICBpZiAoZXh0ZW5zaW9ucy5oYXMoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGV4dGVuc2lvbnMuZ2V0KCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtcclxuICAgICAgICAgICAgbWF4QW5pc290cm9weSA9IGdsLmdldFBhcmFtZXRlcihleHRlbnNpb24uTUFYX1RFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhUKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtYXhBbmlzb3Ryb3B5ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1heEFuaXNvdHJvcHk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0TWF4UHJlY2lzaW9uKHByZWNpc2lvbikge1xyXG4gICAgICAgIGlmIChwcmVjaXNpb24gPT09ICdoaWdocCcpIHtcclxuICAgICAgICAgICAgaWYgKGdsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChnbC5WRVJURVhfU0hBREVSLCBnbC5ISUdIX0ZMT0FUKS5wcmVjaXNpb24gPiAwICYmXHJcbiAgICAgICAgICAgICAgICBnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLCBnbC5ISUdIX0ZMT0FUKS5wcmVjaXNpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2hpZ2hwJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcmVjaXNpb24gPSAnbWVkaXVtcCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcmVjaXNpb24gPT09ICdtZWRpdW1wJykge1xyXG4gICAgICAgICAgICBpZiAoZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGdsLlZFUlRFWF9TSEFERVIsIGdsLk1FRElVTV9GTE9BVCkucHJlY2lzaW9uID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGdsLkZSQUdNRU5UX1NIQURFUiwgZ2wuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ21lZGl1bXAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAnbG93cCc7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXNXZWJHTDIgPSB0eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2wuY29uc3RydWN0b3IubmFtZSA9PT0gJ1dlYkdMMlJlbmRlcmluZ0NvbnRleHQnO1xyXG5cclxuICAgIGxldCBwcmVjaXNpb24gPSBwYXJhbWV0ZXJzLnByZWNpc2lvbiAhPT0gdW5kZWZpbmVkID8gcGFyYW1ldGVycy5wcmVjaXNpb24gOiAnaGlnaHAnO1xyXG4gICAgY29uc3QgbWF4UHJlY2lzaW9uID0gZ2V0TWF4UHJlY2lzaW9uKHByZWNpc2lvbik7XHJcblxyXG4gICAgaWYgKG1heFByZWNpc2lvbiAhPT0gcHJlY2lzaW9uKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1RIUkVFLldlYkdMUmVuZGVyZXI6JywgcHJlY2lzaW9uLCAnbm90IHN1cHBvcnRlZCwgdXNpbmcnLCBtYXhQcmVjaXNpb24sICdpbnN0ZWFkLicpO1xyXG4gICAgICAgIHByZWNpc2lvbiA9IG1heFByZWNpc2lvbjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkcmF3QnVmZmVycyA9IGlzV2ViR0wyIHx8IGV4dGVuc2lvbnMuaGFzKCdXRUJHTF9kcmF3X2J1ZmZlcnMnKTtcclxuICAgIGNvbnN0IGxvZ2FyaXRobWljRGVwdGhCdWZmZXIgPSBwYXJhbWV0ZXJzLmxvZ2FyaXRobWljRGVwdGhCdWZmZXIgPT09IHRydWU7XHJcblxyXG4gICAgY29uc3QgbWF4VGV4dHVyZXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO1xyXG4gICAgY29uc3QgbWF4VmVydGV4VGV4dHVyZXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTKTtcclxuICAgIGNvbnN0IG1heFRleHR1cmVTaXplID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9URVhUVVJFX1NJWkUpO1xyXG4gICAgY29uc3QgbWF4Q3ViZW1hcFNpemUgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSk7XHJcblxyXG4gICAgY29uc3QgbWF4QXR0cmlidXRlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX0FUVFJJQlMpO1xyXG4gICAgY29uc3QgbWF4VmVydGV4VW5pZm9ybXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1ZFUlRFWF9VTklGT1JNX1ZFQ1RPUlMpO1xyXG4gICAgY29uc3QgbWF4VmFyeWluZ3MgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1ZBUllJTkdfVkVDVE9SUyk7XHJcbiAgICBjb25zdCBtYXhGcmFnbWVudFVuaWZvcm1zID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9GUkFHTUVOVF9VTklGT1JNX1ZFQ1RPUlMpO1xyXG5cclxuICAgIGNvbnN0IHZlcnRleFRleHR1cmVzID0gbWF4VmVydGV4VGV4dHVyZXMgPiAwO1xyXG4gICAgY29uc3QgZmxvYXRGcmFnbWVudFRleHR1cmVzID0gaXNXZWJHTDIgfHwgZXh0ZW5zaW9ucy5oYXMoJ09FU190ZXh0dXJlX2Zsb2F0Jyk7XHJcbiAgICBjb25zdCBmbG9hdFZlcnRleFRleHR1cmVzID0gdmVydGV4VGV4dHVyZXMgJiYgZmxvYXRGcmFnbWVudFRleHR1cmVzO1xyXG5cclxuICAgIGNvbnN0IG1heFNhbXBsZXMgPSBpc1dlYkdMMiA/IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfU0FNUExFUykgOiAwO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNXZWJHTDI6IGlzV2ViR0wyLFxyXG4gICAgICAgIGRyYXdCdWZmZXJzOiBkcmF3QnVmZmVycyxcclxuICAgICAgICBnZXRNYXhBbmlzb3Ryb3B5OiBnZXRNYXhBbmlzb3Ryb3B5LFxyXG4gICAgICAgIGdldE1heFByZWNpc2lvbjogZ2V0TWF4UHJlY2lzaW9uLFxyXG4gICAgICAgIHByZWNpc2lvbjogcHJlY2lzaW9uLFxyXG4gICAgICAgIGxvZ2FyaXRobWljRGVwdGhCdWZmZXI6IGxvZ2FyaXRobWljRGVwdGhCdWZmZXIsXHJcbiAgICAgICAgbWF4VGV4dHVyZXM6IG1heFRleHR1cmVzLFxyXG4gICAgICAgIG1heFZlcnRleFRleHR1cmVzOiBtYXhWZXJ0ZXhUZXh0dXJlcyxcclxuICAgICAgICBtYXhUZXh0dXJlU2l6ZTogbWF4VGV4dHVyZVNpemUsXHJcbiAgICAgICAgbWF4Q3ViZW1hcFNpemU6IG1heEN1YmVtYXBTaXplLFxyXG4gICAgICAgIG1heEF0dHJpYnV0ZXM6IG1heEF0dHJpYnV0ZXMsXHJcbiAgICAgICAgbWF4VmVydGV4VW5pZm9ybXM6IG1heFZlcnRleFVuaWZvcm1zLFxyXG4gICAgICAgIG1heFZhcnlpbmdzOiBtYXhWYXJ5aW5ncyxcclxuICAgICAgICBtYXhGcmFnbWVudFVuaWZvcm1zOiBtYXhGcmFnbWVudFVuaWZvcm1zLFxyXG4gICAgICAgIHZlcnRleFRleHR1cmVzOiB2ZXJ0ZXhUZXh0dXJlcyxcclxuICAgICAgICBmbG9hdEZyYWdtZW50VGV4dHVyZXM6IGZsb2F0RnJhZ21lbnRUZXh0dXJlcyxcclxuICAgICAgICBmbG9hdFZlcnRleFRleHR1cmVzOiBmbG9hdFZlcnRleFRleHR1cmVzLFxyXG4gICAgICAgIG1heFNhbXBsZXM6IG1heFNhbXBsZXNcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXZWJHTCBVdGlscyBoZWxwZXIgKGZyb20gVGhyZWUuanMgaW50ZXJuYWxzKVxyXG4gKi9cclxuZnVuY3Rpb24gV2ViR0xVdGlscyQxKGdsLCBleHRlbnNpb25zLCBjYXBhYmlsaXRpZXMpIHtcclxuICAgIGNvbnN0IGlzV2ViR0wyID0gY2FwYWJpbGl0aWVzLmlzV2ViR0wyO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnZlcnQocCwgY29sb3JTcGFjZSkge1xyXG4gICAgICAgIGxldCBleHRlbnNpb247XHJcblxyXG4gICAgICAgIGlmIChwID09PSBVbnNpZ25lZEJ5dGVUeXBlKSByZXR1cm4gZ2wuVU5TSUdORURfQllURTtcclxuICAgICAgICBpZiAocCA9PT0gMTAxNykgcmV0dXJuIGdsLlVOU0lHTkVEX1NIT1JUXzRfNF80XzQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTgpIHJldHVybiBnbC5VTlNJR05FRF9TSE9SVF81XzVfNV8xO1xyXG4gICAgICAgIGlmIChwID09PSAxMDEwKSByZXR1cm4gZ2wuQllURTtcclxuICAgICAgICBpZiAocCA9PT0gMTAxMSkgcmV0dXJuIGdsLlNIT1JUO1xyXG4gICAgICAgIGlmIChwID09PSAxMDEyKSByZXR1cm4gZ2wuVU5TSUdORURfU0hPUlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTMpIHJldHVybiBnbC5JTlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTQpIHJldHVybiBnbC5VTlNJR05FRF9JTlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IEZsb2F0VHlwZSkgcmV0dXJuIGdsLkZMT0FUO1xyXG5cclxuICAgICAgICBpZiAocCA9PT0gSGFsZkZsb2F0VHlwZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNXZWJHTDIpIHJldHVybiBnbC5IQUxGX0ZMT0FUO1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uLkhBTEZfRkxPQVRfT0VTO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwID09PSAxMDIxKSByZXR1cm4gZ2wuQUxQSEE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjIpIHJldHVybiBnbC5SR0I7XHJcbiAgICAgICAgaWYgKHAgPT09IFJHQkFGb3JtYXQpIHJldHVybiBnbC5SR0JBO1xyXG4gICAgICAgIGlmIChwID09PSAxMDI0KSByZXR1cm4gZ2wuTFVNSU5BTkNFO1xyXG4gICAgICAgIGlmIChwID09PSAxMDI1KSByZXR1cm4gZ2wuTFVNSU5BTkNFX0FMUEhBO1xyXG4gICAgICAgIGlmIChwID09PSAxMDI2KSByZXR1cm4gZ2wuREVQVEhfQ09NUE9ORU5UO1xyXG4gICAgICAgIGlmIChwID09PSAxMDI3KSByZXR1cm4gZ2wuREVQVEhfU1RFTkNJTDtcclxuXHJcbiAgICAgICAgLy8gV2ViR0wyIGZvcm1hdHNcclxuICAgICAgICBpZiAocCA9PT0gUmVkRm9ybWF0KSByZXR1cm4gZ2wuUkVEO1xyXG4gICAgICAgIGlmIChwID09PSBSZWRJbnRlZ2VyRm9ybWF0KSByZXR1cm4gZ2wuUkVEX0lOVEVHRVI7XHJcbiAgICAgICAgaWYgKHAgPT09IFJHRm9ybWF0KSByZXR1cm4gZ2wuUkc7XHJcbiAgICAgICAgaWYgKHAgPT09IFJHSW50ZWdlckZvcm1hdCkgcmV0dXJuIGdsLlJHX0lOVEVHRVI7XHJcbiAgICAgICAgaWYgKHAgPT09IFJHQkludGVnZXJGb3JtYXQpIHJldHVybiBnbC5SR0JfSU5URUdFUjtcclxuICAgICAgICBpZiAocCA9PT0gUkdCQUludGVnZXJGb3JtYXQpIHJldHVybiBnbC5SR0JBX0lOVEVHRVI7XHJcblxyXG4gICAgICAgIC8vIFMzVENcclxuICAgICAgICBpZiAocCA9PT0gMzM3NzYgfHwgcCA9PT0gMzM3NzcgfHwgcCA9PT0gMzM3NzggfHwgcCA9PT0gMzM3NzkpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwID09PSAzMzc3NikgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDMzNzc3KSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDMzNzc4KSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDMzNzc5KSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBWUlRDXHJcbiAgICAgICAgaWYgKHAgPT09IDM1ODQwIHx8IHAgPT09IDM1ODQxIHx8IHAgPT09IDM1ODQyIHx8IHAgPT09IDM1ODQzKSB7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvbnMuZ2V0KCdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfcHZydGMnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDM1ODQwKSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUc7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzU4NDEpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRztcclxuICAgICAgICAgICAgICAgIGlmIChwID09PSAzNTg0MikgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRztcclxuICAgICAgICAgICAgICAgIGlmIChwID09PSAzNTg0MykgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNRztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFVENcclxuICAgICAgICBpZiAocCA9PT0gMzYxOTYpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxJyk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBU1RDXHJcbiAgICAgICAgaWYgKHAgPj0gMzc4MDggJiYgcCA8PSAzNzgxNCB8fCBwID49IDM3ODQwICYmIHAgPD0gMzc4NDYpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9hc3RjJyk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJQVENcclxuICAgICAgICBpZiAocCA9PT0gMzY0OTIgfHwgcCA9PT0gMzY0OTQgfHwgcCA9PT0gMzY0OTUpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2NvbXByZXNzaW9uX2JwdGMnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHAgPT09IDM0MDQyKSByZXR1cm4gZ2wuVU5TSUdORURfSU5UXzI0Xzg7XHJcblxyXG4gICAgICAgIC8vIEludGVybmFsIGZvcm1hdHMgZm9yIGZsb2F0L2hhbGYtZmxvYXQgdGV4dHVyZXNcclxuICAgICAgICBpZiAoaXNXZWJHTDIpIHtcclxuICAgICAgICAgICAgaWYgKHAgPT09IDY0MDcpIHJldHVybiBnbC5SR0I7XHJcbiAgICAgICAgICAgIGlmIChwID09PSA2NDA4KSByZXR1cm4gZ2wuUkdCQTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoZ2xbcF0gIT09IHVuZGVmaW5lZCkgPyBnbFtwXSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjb252ZXJ0OiBjb252ZXJ0XHJcbiAgICB9O1xyXG59XHJcblxyXG4vLyBDb25zdGFudHMgZm9yIHRleHR1cmUgZWxlbWVudCBjb3VudHNcclxuY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNjtcclxuY29uc3QgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfU1BMQVQgPSA0O1xyXG5cclxuY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX1NUT1JFRCA9IDQ7XHJcbmNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQgPSA0O1xyXG5jb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9TVE9SRUQgPSA2O1xyXG5jb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9BTExPQ0FURUQgPSA4O1xyXG5jb25zdCBTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmNvbnN0IENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMID0gNDtcclxuY29uc3QgU0NFTkVfSU5ERVhFU19FTEVNRU5UU19QRVJfVEVYRUwgPSAxO1xyXG5cclxuY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfRkFTVCA9IDAuMDEyO1xyXG5jb25zdCBTQ0VORV9GQURFSU5fUkFURV9HUkFEVUFMID0gMC4wMDM7XHJcblxyXG5jb25zdCBWSVNJQkxFX1JFR0lPTl9FWFBBTlNJT05fREVMVEEgPSAxO1xyXG5cclxuY29uc3QgTUFYX1RFWFRVUkVfVEVYRUxTID0gMTY3NzcyMTY7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRNZXNoIGV4dGVuZHMgTWVzaCB7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3BsYXRSZW5kZXJNb2RlID0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCwgZHluYW1pY01vZGUgPSBmYWxzZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBoYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVSA9IGZhbHNlLCBkZXZpY2VQaXhlbFJhdGlvID0gMSwgZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVSA9IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbiA9IGZhbHNlLCBhbnRpYWxpYXNlZCA9IGZhbHNlLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSA9IDEwMjQsIGxvZ0xldmVsID0gTG9nTGV2ZWwuTm9uZSxcclxuICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsIHNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXIgPSAxLjAsIGtlcm5lbDJEU2l6ZSA9IDAuMywgaXJpc09jY2x1c2lvbkNvbmZpZyA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihkdW1teUdlb21ldHJ5LCBkdW1teU1hdGVyaWFsKTtcclxuXHJcbiAgICAgICAgLy8gUmVmZXJlbmNlIHRvIGEgVGhyZWUuanMgcmVuZGVyZXJcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvLyBEZXRlcm1pbmUgaG93IHRoZSBzcGxhdHMgYXJlIHJlbmRlcmVkXHJcbiAgICAgICAgdGhpcy5zcGxhdFJlbmRlck1vZGUgPSBzcGxhdFJlbmRlck1vZGU7XHJcblxyXG4gICAgICAgIC8vIFdoZW4gJ2R5bmFtaWNNb2RlJyBpcyB0cnVlLCBzY2VuZXMgYXJlIGFzc3VtZWQgdG8gYmUgbm9uLXN0YXRpYy4gRHluYW1pYyBzY2VuZXMgYXJlIGhhbmRsZWQgZGlmZmVyZW50bHlcclxuICAgICAgICAvLyBhbmQgY2VydGFpbiBvcHRpbWl6YXRpb25zIGNhbm5vdCBiZSBtYWRlIGZvciB0aGVtLiBBZGRpdGlvbmFsbHksIGJ5IGRlZmF1bHQsIGFsbCBzcGxhdCBkYXRhIHJldHJpZXZlZCBmcm9tXHJcbiAgICAgICAgLy8gdGhpcyBzcGxhdCBtZXNoIHdpbGwgbm90IGhhdmUgdGhlaXIgc2NlbmUgdHJhbnNmb3JtIGFwcGxpZWQgdG8gdGhlbSBpZiB0aGUgc3BsYXQgbWVzaCBpcyBkeW5hbWljLiBUaGF0XHJcbiAgICAgICAgLy8gY2FuIGJlIG92ZXJyaWRlbiB2aWEgcGFyYW1ldGVycyB0byB0aGUgaW5kaXZpZHVhbCBmdW5jdGlvbnMgdGhhdCBhcmUgdXNlZCB0byByZXRyaWV2ZSBzcGxhdCBkYXRhLlxyXG4gICAgICAgIHRoaXMuZHluYW1pY01vZGUgPSBkeW5hbWljTW9kZTtcclxuXHJcbiAgICAgICAgLy8gV2hlbiB0cnVlLCBhbGxvd3MgZm9yIHVzYWdlIG9mIGV4dHJhIHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMgZHVyaW5nIHJlbmRlcmluZyBmb3IgZWZmZWN0cyBzdWNoIGFzIG9wYWNpdHkgYWRqdXN0bWVudC5cclxuICAgICAgICAvLyBEZWZhdWx0IGlzIGZhbHNlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSBzZXBhcmF0ZSBmcm9tIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIChzY2FsZSwgcm90YXRpb24sIHBvc2l0aW9uKVxyXG4gICAgICAgIC8vIHRoYXQgYXJlIGVuYWJsZWQgYnkgdGhlICdkeW5hbWljU2NlbmUnIHBhcmFtZXRlci5cclxuICAgICAgICB0aGlzLmVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGVuYWJsZU9wdGlvbmFsRWZmZWN0cztcclxuXHJcbiAgICAgICAgLy8gVXNlIDE2LWJpdCBmbG9hdGluZyBwb2ludCB2YWx1ZXMgd2hlbiBzdG9yaW5nIHNwbGF0IGNvdmFyaWFuY2UgZGF0YSBpbiB0ZXh0dXJlcywgaW5zdGVhZCBvZiAzMi1iaXRcclxuICAgICAgICB0aGlzLmhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVID0gaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFU7XHJcblxyXG4gICAgICAgIC8vIFJhdGlvIG9mIHRoZSByZXNvbHV0aW9uIGluIHBoeXNpY2FsIHBpeGVscyB0byB0aGUgcmVzb2x1dGlvbiBpbiBDU1MgcGl4ZWxzIGZvciB0aGUgY3VycmVudCBkaXNwbGF5IGRldmljZVxyXG4gICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA9IGRldmljZVBpeGVsUmF0aW87XHJcblxyXG4gICAgICAgIC8vIFVzZSBhIHRyYW5zZm9ybSBmZWVkYmFjayB0byBjYWxjdWxhdGUgc3BsYXQgZGlzdGFuY2VzIGZyb20gdGhlIGNhbWVyYVxyXG4gICAgICAgIHRoaXMuZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVSA9IGVuYWJsZURpc3RhbmNlc0NvbXB1dGF0aW9uT25HUFU7XHJcblxyXG4gICAgICAgIC8vIFVzZSBhIGZhc3RlciBpbnRlZ2VyLWJhc2VkIGFwcHJvYWNoIGZvciBjYWxjdWxhdGluZyBzcGxhdCBkaXN0YW5jZXMgZnJvbSB0aGUgY2FtZXJhXHJcbiAgICAgICAgdGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbiA9IGludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uO1xyXG5cclxuICAgICAgICAvLyBXaGVuIHRydWUsIHdpbGwgcGVyZm9ybSBhZGRpdGlvbmFsIHN0ZXBzIGR1cmluZyByZW5kZXJpbmcgdG8gYWRkcmVzcyBhcnRpZmFjdHMgY2F1c2VkIGJ5IHRoZSByZW5kZXJpbmcgb2YgZ2F1c3NpYW5zIGF0IGFcclxuICAgICAgICAvLyBzdWJzdGFudGlhbGx5IGRpZmZlcmVudCByZXNvbHV0aW9uIHRoYW4gdGhhdCBhdCB3aGljaCB0aGV5IHdlcmUgcmVuZGVyZWQgZHVyaW5nIHRyYWluaW5nLiBUaGlzIHdpbGwgb25seSB3b3JrIGNvcnJlY3RseVxyXG4gICAgICAgIC8vIGZvciBtb2RlbHMgdGhhdCB3ZXJlIHRyYWluZWQgdXNpbmcgYSBwcm9jZXNzIHRoYXQgdXRpbGl6ZXMgdGhpcyBjb21wZW5zYXRpb24gY2FsY3VsYXRpb24uIEZvciBtb3JlIGRldGFpbHM6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25lcmZzdHVkaW8tcHJvamVjdC9nc3BsYXQvcHVsbC8xMTdcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhkZWNvLWlucmlhL2dhdXNzaWFuLXNwbGF0dGluZy9pc3N1ZXMvMjk0I2lzc3VlY29tbWVudC0xNzcyNjg4MDkzXHJcbiAgICAgICAgdGhpcy5hbnRpYWxpYXNlZCA9IGFudGlhbGlhc2VkO1xyXG5cclxuICAgICAgICAvLyBUaGUgc2l6ZSBvZiB0aGUgMkQga2VybmVsIHVzZWQgZm9yIHNwbGF0IHJlbmRlcmluZ1xyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBhZGp1c3QgdGhlIDJEIGtlcm5lbCBzaXplIGFmdGVyIHRoZSBwcm9qZWN0aW9uXHJcbiAgICAgICAgdGhpcy5rZXJuZWwyRFNpemUgPSBrZXJuZWwyRFNpemU7XHJcblxyXG4gICAgICAgIC8vIFNwZWNpZnkgdGhlIG1heGltdW0gY2xpcCBzcGFjZSBzcGxhdCBzaXplLCBjYW4gaGVscCBkZWFsIHdpdGggbGFyZ2Ugc3BsYXRzIHRoYXQgZ2V0IHRvbyB1bndpZWxkeVxyXG4gICAgICAgIHRoaXMubWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgPSBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZTtcclxuXHJcbiAgICAgICAgLy8gVGhlIHZlcmJvc2l0eSBvZiBjb25zb2xlIGxvZ2dpbmdcclxuICAgICAgICB0aGlzLmxvZ0xldmVsID0gbG9nTGV2ZWw7XHJcblxyXG4gICAgICAgIC8vIERlZ3JlZSAwIG1lYW5zIG5vIHNwaGVyaWNhbCBoYXJtb25pY3NcclxuICAgICAgICB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDA7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllciA9IHNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXI7XHJcblxyXG4gICAgICAgIC8vIFRoZSBpbmRpdmlkdWFsIHNwbGF0IHNjZW5lcyBzdG9yZWQgaW4gdGhpcyBzcGxhdCBtZXNoLCBlYWNoIGNvbnRhaW5pbmcgdGhlaXIgb3duIHRyYW5zZm9ybVxyXG4gICAgICAgIHRoaXMuc2NlbmVzID0gW107XHJcblxyXG4gICAgICAgIC8vIFNwZWNpYWwgb2N0cmVlIHRhaWxvcmVkIHRvIFNwbGF0TWVzaCBpbnN0YW5jZXNcclxuICAgICAgICB0aGlzLnNwbGF0VHJlZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5iYXNlU3BsYXRUcmVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gQ2FjaGUgdGV4dHVyZXMgYW5kIHRoZSBpbnRlcm1lZGlhdGUgZGF0YSB1c2VkIHRvIHBvcHVsYXRlIHRoZW1cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzID0ge307XHJcbiAgICAgICAgdGhpcy5mbGFtZU1vZGVsID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cHJlc3Npb25CU051bSA9IDA7XHJcbiAgICAgICAgdGhpcy5ic1dlaWdodCA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLmJvbmVzTWF0cml4ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJvbmVzTnVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJvbmVzV2VpZ2h0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudCA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrID0ge1xyXG4gICAgICAgICAgICAnaWQnOiBudWxsLFxyXG4gICAgICAgICAgICAndmVydGV4U2hhZGVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ2ZyYWdtZW50U2hhZGVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ3Byb2dyYW0nOiBudWxsLFxyXG4gICAgICAgICAgICAnY2VudGVyc0J1ZmZlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdzY2VuZUluZGV4ZXNCdWZmZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnb3V0RGlzdGFuY2VzQnVmZmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ2NlbnRlcnNMb2MnOiAtMSxcclxuICAgICAgICAgICAgJ21vZGVsVmlld1Byb2pMb2MnOiAtMSxcclxuICAgICAgICAgICAgJ3NjZW5lSW5kZXhlc0xvYyc6IC0xLFxyXG4gICAgICAgICAgICAndHJhbnNmb3Jtc0xvY3MnOiBbXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvTG9jYWxTcGxhdEluZGV4TWFwID0gW107XHJcbiAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwID0gW107XHJcblxyXG4gICAgICAgIC8vIE9wdGlvbmFsIGlyaXMgb2NjbHVzaW9uIGNvbmZpZ3VyYXRpb24gZnJvbSBhdmF0YXIgWklQXHJcbiAgICAgICAgdGhpcy5pcmlzT2NjbHVzaW9uQ29uZmlnID0gaXJpc09jY2x1c2lvbkNvbmZpZztcclxuXHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkTWF4U3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmZpcnN0UmVuZGVyVGltZSA9IC0xO1xyXG4gICAgICAgIHRoaXMuZmluYWxCdWlsZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLndlYkdMVXRpbHMgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJveDMoKTtcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZWRTY2VuZUNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cyA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25DaGFuZ2luZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0U2NhbGUgPSAxLjA7XHJcbiAgICAgICAgdGhpcy5wb2ludENsb3VkTW9kZUVuYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGFzdFJlbmRlcmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIGEgY29udGFpbmVyIGZvciBlYWNoIHNjZW5lIG1hbmFnZWQgYnkgdGhpcyBzcGxhdCBtZXNoIGJhc2VkIG9uIGFuIGluc3RhbmNlIG9mIFNwbGF0QnVmZmVyLCBhbG9uZyB3aXRoIG9wdGlvbmFsXHJcbiAgICAgKiB0cmFuc2Zvcm0gZGF0YSAocG9zaXRpb24sIHNjYWxlLCByb3RhdGlvbikgcGFzc2VkIHRvIHRoZSBzcGxhdCBtZXNoIGR1cmluZyB0aGUgYnVpbGQgcHJvY2Vzcy5cclxuICAgICAqIEBwYXJhbSB7QXJyYXk8VEhSRUUuTWF0cml4ND59IHNwbGF0QnVmZmVycyBTcGxhdEJ1ZmZlciBpbnN0YW5jZXMgY29udGFpbmluZyBzcGxhdHMgZm9yIGVhY2ggc2NlbmVcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8b2JqZWN0Pn0gc2NlbmVPcHRpb25zIEFycmF5IG9mIG9wdGlvbnMgb2JqZWN0czoge1xyXG4gICAgICpcclxuICAgICAqICAgICAgICAgcG9zaXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFBvc2l0aW9uIG9mIHRoZSBzY2VuZSwgYWN0cyBhcyBhbiBvZmZzZXQgZnJvbSBpdHMgZGVmYXVsdCBwb3NpdGlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDBdXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICByb3RhdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUm90YXRpb24gb2YgdGhlIHNjZW5lIHJlcHJlc2VudGVkIGFzIGEgcXVhdGVybmlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDAsIDFdXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICBzY2FsZSAoQXJyYXk8bnVtYmVyPik6ICAgICAgU2NlbmUncyBzY2FsZSwgZGVmYXVsdHMgdG8gWzEsIDEsIDFdXHJcbiAgICAgKiB9XHJcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUSFJFRS5NYXRyaXg0Pn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ1aWxkU2NlbmVzKHBhcmVudE9iamVjdCwgc3BsYXRCdWZmZXJzLCBzY2VuZU9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBzY2VuZXMgPSBbXTtcclxuICAgICAgICBzY2VuZXMubGVuZ3RoID0gc3BsYXRCdWZmZXJzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0QnVmZmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHNwbGF0QnVmZmVyc1tpXTtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHNjZW5lT3B0aW9uc1tpXSB8fCB7fTtcclxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uQXJyYXkgPSBvcHRpb25zWydwb3NpdGlvbiddIHx8IFswLCAwLCAwXTtcclxuICAgICAgICAgICAgbGV0IHJvdGF0aW9uQXJyYXkgPSBvcHRpb25zWydyb3RhdGlvbiddIHx8IFswLCAwLCAwLCAxXTtcclxuICAgICAgICAgICAgbGV0IHNjYWxlQXJyYXkgPSBvcHRpb25zWydzY2FsZSddIHx8IFsxLCAxLCAxXTtcclxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShwb3NpdGlvbkFycmF5KTtcclxuICAgICAgICAgICAgY29uc3Qgcm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpLmZyb21BcnJheShyb3RhdGlvbkFycmF5KTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShzY2FsZUFycmF5KTtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSBTcGxhdE1lc2guY3JlYXRlU2NlbmUoc3BsYXRCdWZmZXIsIHBvc2l0aW9uLCByb3RhdGlvbiwgc2NhbGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQgfHwgMSwgb3B0aW9ucy5vcGFjaXR5LCBvcHRpb25zLnZpc2libGUpO1xyXG4gICAgICAgICAgICBwYXJlbnRPYmplY3QuYWRkKHNjZW5lKTtcclxuICAgICAgICAgICAgc2NlbmVzW2ldID0gc2NlbmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzY2VuZXM7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlU2NlbmUoc3BsYXRCdWZmZXIsIHBvc2l0aW9uLCByb3RhdGlvbiwgc2NhbGUsIG1pbmltdW1BbHBoYSwgb3BhY2l0eSA9IDEuMCwgdmlzaWJsZSA9IHRydWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNwbGF0U2NlbmUoc3BsYXRCdWZmZXIsIHBvc2l0aW9uLCByb3RhdGlvbiwgc2NhbGUsIG1pbmltdW1BbHBoYSwgb3BhY2l0eSwgdmlzaWJsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCBkYXRhIHN0cnVjdHVyZXMgdGhhdCBtYXAgZ2xvYmFsIHNwbGF0IGluZGV4ZXMgKGJhc2VkIG9uIGEgdW5pZmllZCBpbmRleCBhY3Jvc3MgYWxsIHNwbGF0IGJ1ZmZlcnMpIHRvXHJcbiAgICAgKiBsb2NhbCBkYXRhIHdpdGhpbiBhIHNpbmdsZSBzY2VuZS5cclxuICAgICAqIEBwYXJhbSB7QXJyYXk8U3BsYXRCdWZmZXI+fSBzcGxhdEJ1ZmZlcnMgSW5zdGFuY2VzIG9mIFNwbGF0QnVmZmVyIG9mZiB3aGljaCB0byBidWlsZCB0aGUgbWFwc1xyXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnVpbGRTcGxhdEluZGV4TWFwcyhzcGxhdEJ1ZmZlcnMpIHtcclxuICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXhNYXAgPSBbXTtcclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4TWFwID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzcGxhdEJ1ZmZlcnMubGVuZ3RoOyBzKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBzcGxhdEJ1ZmZlcnNbc107XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSBzcGxhdEJ1ZmZlci5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4U3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFNwbGF0SW5kZXhNYXBbdG90YWxTcGxhdENvdW50XSA9IGk7XHJcbiAgICAgICAgICAgICAgICBzY2VuZUluZGV4TWFwW3RvdGFsU3BsYXRDb3VudF0gPSBzO1xyXG4gICAgICAgICAgICAgICAgdG90YWxTcGxhdENvdW50Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbG9jYWxTcGxhdEluZGV4TWFwLFxyXG4gICAgICAgICAgICBzY2VuZUluZGV4TWFwXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIGFuIGluc3RhbmNlIG9mIFNwbGF0VHJlZSAoYSBzcGVjaWFsaXplZCBvY3RyZWUpIGZvciB0aGUgZ2l2ZW4gc3BsYXQgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gbWluQWxwaGFzIEFycmF5IG9mIG1pbmltdW0gc3BsYXQgc2xwaGFzIGZvciBlYWNoIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHVwbG9hZCBvZiBzcGxhdCBjZW50ZXJzIHRvIHRoZSBzcGxhdCB0cmVlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlciB3b3JrZXIgc3RhcnRzIGFuZCBmaW5pc2hlcy5cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBjb252ZXJzaW9uIG9mIHRoZSBsb2NhbCBzcGxhdCB0cmVlIGZyb21cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBmb3JtYXQgcHJvZHVjZWQgYnkgdGhlIHNwbGF0IHRyZWUgYnVpbGRlciB3b3JrZXIgc3RhcnRzIGFuZCBlbmRzLlxyXG4gICAgICogQHJldHVybiB7U3BsYXRUcmVlfVxyXG4gICAgICovXHJcbiAgICAgYnVpbGRTcGxhdFRyZWUgPSAobWluQWxwaGFzID0gW10sIG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCwgb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24pID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlU3BsYXRUcmVlKCk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGV4cG9zZSBTcGxhdFRyZWUgY29uc3RydWN0b3IgcGFyYW1ldGVycyAobWF4aW11bURlcHRoIGFuZCBtYXhDZW50ZXJzUGVyTm9kZSkgc28gdGhhdCB0aGV5IGNhblxyXG4gICAgICAgICAgICAvLyBiZSBjb25maWd1cmVkIG9uIGEgcGVyLXNjZW5lIGJhc2lzXHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVNwbGF0VHJlZSA9IG5ldyBTcGxhdFRyZWUoOCwgMTAwMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1aWxkU3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0Q29sb3IgPSBuZXcgVmVjdG9yNCgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VTcGxhdFRyZWUucHJvY2Vzc1NwbGF0TWVzaCh0aGlzLCAoc3BsYXRJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTcGxhdENvbG9yKHNwbGF0SW5kZXgsIHNwbGF0Q29sb3IpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NlbmVJbmRleCA9IHRoaXMuZ2V0U2NlbmVJbmRleEZvclNwbGF0KHNwbGF0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluQWxwaGEgPSBtaW5BbHBoYXNbc2NlbmVJbmRleF0gfHwgMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzcGxhdENvbG9yLncgPj0gbWluQWxwaGE7XHJcbiAgICAgICAgICAgIH0sIG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCwgb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gYnVpbGRTdGFydFRpbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA+PSBMb2dMZXZlbC5JbmZvKSBsb2dnZXIuaW5mbygnU3BsYXRUcmVlIGJ1aWxkOiAnICsgYnVpbGRUaW1lICsgJyBtcycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0VHJlZSA9IHRoaXMuYmFzZVNwbGF0VHJlZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhc2VTcGxhdFRyZWUgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVhdmVzV2l0aFZlcnRpY2VzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYXZnU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1heFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBub2RlQ291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0VHJlZS52aXNpdExlYXZlcygobm9kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlU3BsYXRDb3VudCA9IG5vZGUuZGF0YS5pbmRleGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVTcGxhdENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZnU3BsYXRDb3VudCArPSBub2RlU3BsYXRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwbGF0Q291bnQgPSBNYXRoLm1heChtYXhTcGxhdENvdW50LCBub2RlU3BsYXRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZlc1dpdGhWZXJ0aWNlcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPj0gTG9nTGV2ZWwuSW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgU3BsYXRUcmVlIGxlYXZlczogJHt0aGlzLnNwbGF0VHJlZS5jb3VudExlYXZlcygpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgU3BsYXRUcmVlIGxlYXZlcyB3aXRoIHNwbGF0czoke2xlYXZlc1dpdGhWZXJ0aWNlc31gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXZnU3BsYXRDb3VudCA9IGF2Z1NwbGF0Q291bnQgLyBub2RlQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBBdmcgc3BsYXQgY291bnQgcGVyIG5vZGU6ICR7YXZnU3BsYXRDb3VudH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFRvdGFsIHNwbGF0IGNvdW50OiAke3RoaXMuZ2V0U3BsYXRDb3VudCgpfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCB0aGlzIGluc3RhbmNlIG9mIFNwbGF0TWVzaC5cclxuICAgICAqIEBwYXJhbSB7QXJyYXk8U3BsYXRCdWZmZXI+fSBzcGxhdEJ1ZmZlcnMgVGhlIGJhc2Ugc3BsYXQgZGF0YSwgaW5zdGFuY2VzIG9mIFNwbGF0QnVmZmVyXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG9iamVjdD59IHNjZW5lT3B0aW9ucyBEeW5hbWljIG9wdGlvbnMgZm9yIGVhY2ggc2NlbmUge1xyXG4gICAgICpcclxuICAgICAqICAgICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQ6IElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWRcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSksIGRlZmF1bHRzIHRvIDFcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHBvc2l0aW9uIChBcnJheTxudW1iZXI+KTogICBQb3NpdGlvbiBvZiB0aGUgc2NlbmUsIGFjdHMgYXMgYW4gb2Zmc2V0IGZyb20gaXRzIGRlZmF1bHQgcG9zaXRpb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwXVxyXG4gICAgICpcclxuICAgICAqICAgICAgICAgcm90YXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFJvdGF0aW9uIG9mIHRoZSBzY2VuZSByZXByZXNlbnRlZCBhcyBhIHF1YXRlcm5pb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwLCAxXVxyXG4gICAgICpcclxuICAgICAqICAgICAgICAgc2NhbGUgKEFycmF5PG51bWJlcj4pOiAgICAgIFNjZW5lJ3Mgc2NhbGUsIGRlZmF1bHRzIHRvIFsxLCAxLCAxXVxyXG4gICAgICpcclxuICAgICAqIH1cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0ga2VlcFNjZW5lVHJhbnNmb3JtcyBGb3IgYSBzY2VuZSB0aGF0IGFscmVhZHkgZXhpc3RzIGFuZCBpcyBiZWluZyBvdmVyd3JpdHRlbiwgdGhpcyBmbGFnXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F5cyB0byBrZWVwIHRoZSB0cmFuc2Zvcm0gZnJvbSB0aGUgZXhpc3Rpbmcgc2NlbmUuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbmFsQnVpbGQgV2lsbCB0aGUgc3BsYXQgbWVzaCBiZSBpbiBpdHMgZmluYWwgc3RhdGUgYWZ0ZXIgdGhpcyBidWlsZD9cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXBsb2FkIG9mIHNwbGF0IGNlbnRlcnMgdG8gdGhlIHNwbGF0IHRyZWVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGZpbmlzaGVzLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGNvbnZlcnNpb24gb2YgdGhlIGxvY2FsIHNwbGF0IHRyZWUgZnJvbVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGZvcm1hdCBwcm9kdWNlZCBieSB0aGUgc3BsYXQgdHJlZSBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGVuZHMuXHJcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCBjb250YWluaW5nIGluZm8gYWJvdXQgdGhlIHNwbGF0cyB0aGF0IGFyZSB1cGRhdGVkXHJcbiAgICAgKi9cclxuICAgIGJ1aWxkKHNwbGF0QnVmZmVycywgc2NlbmVPcHRpb25zLCBrZWVwU2NlbmVUcmFuc2Zvcm1zID0gdHJ1ZSwgZmluYWxCdWlsZCA9IGZhbHNlLFxyXG4gICAgICAgICAgb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbiwgcHJlc2VydmVWaXNpYmxlUmVnaW9uID0gdHJ1ZSkge1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lT3B0aW9ucyA9IHNjZW5lT3B0aW9ucztcclxuICAgICAgICB0aGlzLmZpbmFsQnVpbGQgPSBmaW5hbEJ1aWxkO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gU3BsYXRNZXNoLmdldFRvdGFsTWF4U3BsYXRDb3VudEZvclNwbGF0QnVmZmVycyhzcGxhdEJ1ZmZlcnMpO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdTY2VuZXMgPSBTcGxhdE1lc2guYnVpbGRTY2VuZXModGhpcywgc3BsYXRCdWZmZXJzLCBzY2VuZU9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChrZWVwU2NlbmVUcmFuc2Zvcm1zKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoICYmIGkgPCBuZXdTY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NjZW5lID0gbmV3U2NlbmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTY2VuZSA9IHRoaXMuZ2V0U2NlbmUoaSk7XHJcbiAgICAgICAgICAgICAgICBuZXdTY2VuZS5jb3B5VHJhbnNmb3JtRGF0YShleGlzdGluZ1NjZW5lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjZW5lcyA9IG5ld1NjZW5lcztcclxuXHJcbiAgICAgICAgbGV0IG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDM7XHJcbiAgICAgICAgZm9yIChsZXQgc3BsYXRCdWZmZXIgb2Ygc3BsYXRCdWZmZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gc3BsYXRCdWZmZXIuZ2V0TWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKCk7XHJcbiAgICAgICAgICAgIGlmIChzcGxhdEJ1ZmZlclNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA8IG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gc3BsYXRCdWZmZXJTcGhlcmljYWxIYXJtb25pY3NEZWdyZWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuXHJcbiAgICAgICAgbGV0IHNwbGF0QnVmZmVyc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc3BsYXRCdWZmZXJzLmxlbmd0aCAhPT0gdGhpcy5sYXN0QnVpbGRTY2VuZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHNwbGF0QnVmZmVyc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRCdWZmZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHNwbGF0QnVmZmVyc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChzcGxhdEJ1ZmZlciAhPT0gdGhpcy5sYXN0QnVpbGRTY2VuZXNbaV0uc3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGxhdEJ1ZmZlcnNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGlzVXBkYXRlQnVpbGQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lcy5sZW5ndGggIT09IDEgfHxcclxuICAgICAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZUNvdW50ICE9PSB0aGlzLnNjZW5lcy5sZW5ndGggfHxcclxuICAgICAgICAgICAgdGhpcy5sYXN0QnVpbGRNYXhTcGxhdENvdW50ICE9PSBtYXhTcGxhdENvdW50IHx8XHJcbiAgICAgICAgICAgIHNwbGF0QnVmZmVyc0NoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIGlzVXBkYXRlQnVpbGQgPSBmYWxzZTtcclxuICAgICAgIH1cclxuXHJcbiAgICAgICBpZiAoIWlzVXBkYXRlQnVpbGQpIHtcclxuICAgICAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3gzKCk7XHJcbiAgICAgICAgICAgIGlmICghcHJlc2VydmVWaXNpYmxlUmVnaW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cyA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlbmRlclRpbWUgPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RCdWlsZE1heFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VNZXNoRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5ID0gU3BsYXRHZW9tZXRyeS5idWlsZChtYXhTcGxhdENvdW50KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsID0gU3BsYXRNYXRlcmlhbDNELmJ1aWxkKHRoaXMuZHluYW1pY01vZGUsIHRoaXMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzLCB0aGlzLmFudGlhbGlhc2VkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1heFNjcmVlblNwYWNlU3BsYXRTaXplLCB0aGlzLnNwbGF0U2NhbGUsIHRoaXMucG9pbnRDbG91ZE1vZGVFbmFibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgdGhpcy5rZXJuZWwyRFNpemUsIHRoaXMuaXJpc09jY2x1c2lvbkNvbmZpZyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsID0gU3BsYXRNYXRlcmlhbDJELmJ1aWxkKHRoaXMuZHluYW1pY01vZGUsIHRoaXMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0U2NhbGUsIHRoaXMucG9pbnRDbG91ZE1vZGVFbmFibGVkLCB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4TWFwcyA9IFNwbGF0TWVzaC5idWlsZFNwbGF0SW5kZXhNYXBzKHNwbGF0QnVmZmVycyk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvTG9jYWxTcGxhdEluZGV4TWFwID0gaW5kZXhNYXBzLmxvY2FsU3BsYXRJbmRleE1hcDtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwID0gaW5kZXhNYXBzLnNjZW5lSW5kZXhNYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlclNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQodHJ1ZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVSkgdGhpcy5zZXR1cERpc3RhbmNlc0NvbXB1dGF0aW9uVHJhbnNmb3JtRmVlZGJhY2soKTtcclxuICAgICAgICBjb25zdCBkYXRhVXBkYXRlUmVzdWx0cyA9IHRoaXMucmVmcmVzaEdQVURhdGFGcm9tU3BsYXRCdWZmZXJzKGlzVXBkYXRlQnVpbGQpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVzW2ldID0gdGhpcy5zY2VuZXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA9IHNwbGF0QnVmZmVyU3BsYXRDb3VudDtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZE1heFNwbGF0Q291bnQgPSB0aGlzLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lQ291bnQgPSB0aGlzLnNjZW5lcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIGlmIChmaW5hbEJ1aWxkICYmIHRoaXMuc2NlbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5idWlsZFNwbGF0VHJlZShzY2VuZU9wdGlvbnMubWFwKG9wdGlvbnMgPT4gb3B0aW9ucy5zcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCB8fCAxKSxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQsIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKVxyXG4gICAgICAgIC8vICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGhpcy5vblNwbGF0VHJlZVJlYWR5Q2FsbGJhY2spIHRoaXMub25TcGxhdFRyZWVSZWFkeUNhbGxiYWNrKHRoaXMuc3BsYXRUcmVlKTtcclxuICAgICAgICAvLyAgICAgICAgIHRoaXMub25TcGxhdFRyZWVSZWFkeUNhbGxiYWNrID0gbnVsbDtcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICB0aGlzLnZpc2libGUgPSAodGhpcy5zY2VuZXMubGVuZ3RoID4gMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhVXBkYXRlUmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBmcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhKCkge1xyXG5cclxuICAgICAgICBjb25zdCBkZWxldGVUZXh0dXJlRGF0YSA9ICh0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0ZXh0dXJlLnNvdXJjZS5kYXRhO1xyXG4gICAgICAgICAgICBkZWxldGUgdGV4dHVyZS5pbWFnZTtcclxuICAgICAgICAgICAgdGV4dHVyZS5vblVwZGF0ZSA9IG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY292YXJpYW5jZXM7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY2VudGVycztcclxuICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb2xvcnM7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuc3BoZXJpY2FsSGFybW9uaWNzO1xyXG5cclxuICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jZW50ZXJDb2xvcnMuZGF0YTtcclxuICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jb3ZhcmlhbmNlcy5kYXRhO1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcykge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MuZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc2NlbmVJbmRleGVzKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNjZW5lSW5kZXhlcy5kYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jZW50ZXJDb2xvcnMudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jZW50ZXJDb2xvcnMudGV4dHVyZS5vblVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlVGV4dHVyZURhdGEodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jZW50ZXJDb2xvcnMudGV4dHVyZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5mbGFtZU1vZGVsUG9zVGV4dHVyZS50ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmZsYW1lTW9kZWxQb3NUZXh0dXJlLnRleHR1cmUub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZVRleHR1cmVEYXRhKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuZmxhbWVNb2RlbFBvc1RleHR1cmUudGV4dHVyZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jb3ZhcmlhbmNlcy50ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNvdmFyaWFuY2VzLnRleHR1cmUub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZVRleHR1cmVEYXRhKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY292YXJpYW5jZXMudGV4dHVyZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcy50ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcy50ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzLnRleHR1cmUub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlVGV4dHVyZURhdGEodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MudGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MudGV4dHVyZXMuZm9yRWFjaCgodGV4dHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRleHR1cmVEYXRhKHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zY2VuZUluZGV4ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zY2VuZUluZGV4ZXMudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc2NlbmVJbmRleGVzLnRleHR1cmUub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVUZXh0dXJlRGF0YSh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNjZW5lSW5kZXhlcy50ZXh0dXJlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgYWxsIHJlc291cmNlcyBoZWxkIGJ5IHRoZSBzcGxhdCBtZXNoXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlTWVzaERhdGEoKTtcclxuICAgICAgICB0aGlzLmRpc3Bvc2VUZXh0dXJlcygpO1xyXG4gICAgICAgIHRoaXMuZGlzcG9zZVNwbGF0VHJlZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZURpc3RhbmNlc0NvbXB1dGF0aW9uT25HUFUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZURpc3RhbmNlc0NvbXB1dGF0aW9uR1BVUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NlbmVzID0gW107XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjayA9IHtcclxuICAgICAgICAgICAgJ2lkJzogbnVsbCxcclxuICAgICAgICAgICAgJ3ZlcnRleFNoYWRlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdmcmFnbWVudFNoYWRlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdwcm9ncmFtJzogbnVsbCxcclxuICAgICAgICAgICAgJ2NlbnRlcnNCdWZmZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzQnVmZmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ291dERpc3RhbmNlc0J1ZmZlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdjZW50ZXJzTG9jJzogLTEsXHJcbiAgICAgICAgICAgICdtb2RlbFZpZXdQcm9qTG9jJzogLTEsXHJcbiAgICAgICAgICAgICdzY2VuZUluZGV4ZXNMb2MnOiAtMSxcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybXNMb2NzJzogW11cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb0xvY2FsU3BsYXRJbmRleE1hcCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcCA9IFtdO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVzID0gW107XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRNYXhTcGxhdENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuZmlyc3RSZW5kZXJUaW1lID0gLTE7XHJcbiAgICAgICAgdGhpcy5maW5hbEJ1aWxkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMud2ViR0xVdGlscyA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm94MygpO1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlZFNjZW5lQ2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkNoYW5naW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXRTY2FsZSA9IDEuMDtcclxuICAgICAgICB0aGlzLnBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhc3RSZW5kZXJlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIG9mIG9ubHkgdGhlIFRocmVlLmpzIG1lc2ggcmVzb3VyY2VzIChnZW9tZXRyeSwgbWF0ZXJpYWwsIGFuZCB0ZXh0dXJlKVxyXG4gICAgICovXHJcbiAgICBkaXNwb3NlTWVzaERhdGEoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnkgJiYgdGhpcy5nZW9tZXRyeSAhPT0gZHVtbXlHZW9tZXRyeSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZVRleHR1cmVzKCkge1xyXG4gICAgICAgIGZvciAobGV0IHRleHR1cmVLZXkgaW4gdGhpcy5zcGxhdERhdGFUZXh0dXJlcykge1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093bih0aGlzLnNwbGF0RGF0YVRleHR1cmVzLCB0ZXh0dXJlS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZUNvbnRhaW5lciA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbdGV4dHVyZUtleV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dHVyZUNvbnRhaW5lci50ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZUNvbnRhaW5lci50ZXh0dXJlLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlQ29udGFpbmVyLnRleHR1cmUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2VTcGxhdFRyZWUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXRUcmVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRUcmVlLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdFRyZWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5iYXNlU3BsYXRUcmVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVNwbGF0VHJlZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVNwbGF0VHJlZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0VHJlZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGxhdFRyZWU7XHJcbiAgICB9XHJcblxyXG4gICAgb25TcGxhdFRyZWVSZWFkeShjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25TcGxhdFRyZWVSZWFkeUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY29waWVzIG9mIGRhdGEgdGhhdCBhcmUgbmVjZXNzYXJ5IGZvciBzcGxhdCBkaXN0YW5jZSBjb21wdXRhdGlvbjogc3BsYXQgY2VudGVyIHBvc2l0aW9ucyBhbmQgc3BsYXRcclxuICAgICAqIHNjZW5lIGluZGV4ZXMgKG5lY2Vzc2FyeSBmb3IgYXBwbHlpbmcgZHluYW1pYyBzY2VuZSB0cmFuc2Zvcm1hdGlvbnMgZHVyaW5nIGRpc3RhbmNlIGNvbXB1dGF0aW9uKVxyXG4gICAgICogQHBhcmFtIHsqfSBzdGFydCBUaGUgaW5kZXggYXQgd2hpY2ggdG8gc3RhcnQgY29weWluZyBkYXRhXHJcbiAgICAgKiBAcGFyYW0geyp9IGVuZCAgVGhlIGluZGV4IGF0IHdoaWNoIHRvIHN0b3AgY29weWluZyBkYXRhXHJcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIGdldERhdGFGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihzdGFydCwgZW5kKSB7XHJcbiAgICAgICAgY29uc3QgY2VudGVycyA9IHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVnZXJDZW50ZXJzKHN0YXJ0LCBlbmQsIHRydWUpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRGbG9hdENlbnRlcnMoc3RhcnQsIGVuZCwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleGVzID0gdGhpcy5nZXRTY2VuZUluZGV4ZXMoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2VudGVycyxcclxuICAgICAgICAgICAgc2NlbmVJbmRleGVzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZnJlc2ggZGF0YSB0ZXh0dXJlcyBhbmQgR1BVIGJ1ZmZlcnMgd2l0aCBzcGxhdCBkYXRhIGZyb20gdGhlIHNwbGF0IGJ1ZmZlcnMgYmVsb25naW5nIHRvIHRoaXMgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2luY2VMYXN0QnVpbGRPbmx5IFNwZWNpZnkgd2hldGhlciBvciBub3QgdG8gb25seSB1cGRhdGUgZm9yIHNwbGF0cyB0aGF0IGhhdmUgYmVlbiBhZGRlZCBzaW5jZSB0aGUgbGFzdCBidWlsZC5cclxuICAgICAqIEByZXR1cm4ge29iamVjdH1cclxuICAgICAqL1xyXG4gICAgcmVmcmVzaEdQVURhdGFGcm9tU3BsYXRCdWZmZXJzKHNpbmNlTGFzdEJ1aWxkT25seSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoRGF0YVRleHR1cmVzRnJvbVNwbGF0QnVmZmVycyhzaW5jZUxhc3RCdWlsZE9ubHkpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVN0YXJ0ID0gc2luY2VMYXN0QnVpbGRPbmx5ID8gdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50IDogMDtcclxuICAgICAgICBjb25zdCB7IGNlbnRlcnMsIHNjZW5lSW5kZXhlcyB9ID0gdGhpcy5nZXREYXRhRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24odXBkYXRlU3RhcnQsIHNwbGF0Q291bnQgLSAxKTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEdQVUJ1ZmZlcnNGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihjZW50ZXJzLCBzY2VuZUluZGV4ZXMsIHNpbmNlTGFzdEJ1aWxkT25seSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdmcm9tJzogdXBkYXRlU3RhcnQsXHJcbiAgICAgICAgICAgICd0byc6IHNwbGF0Q291bnQgLSAxLFxyXG4gICAgICAgICAgICAnY291bnQnOiBzcGxhdENvdW50IC0gdXBkYXRlU3RhcnQsXHJcbiAgICAgICAgICAgICdjZW50ZXJzJzogY2VudGVycyxcclxuICAgICAgICAgICAgJ3NjZW5lSW5kZXhlcyc6IHNjZW5lSW5kZXhlc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIEdQVSBidWZmZXJzIHRoYXQgYXJlIHVzZWQgZm9yIGNvbXB1dGluZyBzcGxhdCBkaXN0YW5jZXMgb24gdGhlIEdQVS5cclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2VudGVycyBTcGxhdCBjZW50ZXIgcG9zaXRpb25zXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNjZW5lSW5kZXhlcyBJbmRleGVzIG9mIHRoZSBzY2VuZSB0byB3aGljaCBlYWNoIHNwbGF0IGJlbG9uZ3NcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2luY2VMYXN0QnVpbGRPbmx5IFNwZWNpZnkgd2hldGhlciBvciBub3QgdG8gb25seSB1cGRhdGUgZm9yIHNwbGF0cyB0aGF0IGhhdmUgYmVlbiBhZGRlZCBzaW5jZSB0aGUgbGFzdCBidWlsZC5cclxuICAgICAqL1xyXG4gICAgcmVmcmVzaEdQVUJ1ZmZlcnNGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihjZW50ZXJzLCBzY2VuZUluZGV4ZXMsIHNpbmNlTGFzdEJ1aWxkT25seSA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc2luY2VMYXN0QnVpbGRPbmx5ID8gdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50IDogMDtcclxuICAgICAgICB0aGlzLnVwZGF0ZUdQVUNlbnRlcnNCdWZmZXJGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihzaW5jZUxhc3RCdWlsZE9ubHksIGNlbnRlcnMsIG9mZnNldCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVHUFVUcmFuc2Zvcm1JbmRleGVzQnVmZmVyRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oc2luY2VMYXN0QnVpbGRPbmx5LCBzY2VuZUluZGV4ZXMsIG9mZnNldCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZyZXNoIGRhdGEgdGV4dHVyZXMgd2l0aCBkYXRhIGZyb20gdGhlIHNwbGF0IGJ1ZmZlcnMgZm9yIHRoaXMgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2luY2VMYXN0QnVpbGRPbmx5IFNwZWNpZnkgd2hldGhlciBvciBub3QgdG8gb25seSB1cGRhdGUgZm9yIHNwbGF0cyB0aGF0IGhhdmUgYmVlbiBhZGRlZCBzaW5jZSB0aGUgbGFzdCBidWlsZC5cclxuICAgICAqL1xyXG4gICAgcmVmcmVzaERhdGFUZXh0dXJlc0Zyb21TcGxhdEJ1ZmZlcnMoc2luY2VMYXN0QnVpbGRPbmx5KSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCh0cnVlKTtcclxuICAgICAgICBjb25zdCBmcm9tU3BsYXQgPSB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQ7XHJcbiAgICAgICAgY29uc3QgdG9TcGxhdCA9IHNwbGF0Q291bnQgLSAxO1xyXG5cclxuICAgICAgICBpZiAoIXNpbmNlTGFzdEJ1aWxkT25seSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwRGF0YVRleHR1cmVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmFzZURhdGFGcm9tU3BsYXRCdWZmZXJzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCYXNlRGF0YUZyb21TcGxhdEJ1ZmZlcnMoZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmVzRnJvbUJhc2VEYXRhKGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmxlUmVnaW9uKHNpbmNlTGFzdEJ1aWxkT25seSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXBEYXRhVGV4dHVyZXMoKSB7XHJcbiAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IHRoaXMuZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQodHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcG9zZVRleHR1cmVzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUgPSAoZWxlbWVudHNQZXJUZXhlbCwgZWxlbWVudHNQZXJTcGxhdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0ZXhTaXplID0gbmV3IFZlY3RvcjIoNDA5NiwgMTAyNCk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0ZXhTaXplLnggKiB0ZXhTaXplLnkgKiBlbGVtZW50c1BlclRleGVsIDwgbWF4U3BsYXRDb3VudCAqIGVsZW1lbnRzUGVyU3BsYXQpIHRleFNpemUueSAqPSAyO1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4U2l6ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBnZXRDb3ZhcmlhbmNlc0VsZW1lbnRzUGVydGV4ZWxTdG9yZWQgPSAoY29tcHJlc3Npb25MZXZlbCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEIDogQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX1NUT1JFRDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBnZXRDb3ZhcmlhbmNlc0luaXRpYWxUZXh0dXJlU3BlY3MgPSAoY29tcHJlc3Npb25MZXZlbCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c1BlclRleGVsU3RvcmVkID0gZ2V0Q292YXJpYW5jZXNFbGVtZW50c1BlcnRleGVsU3RvcmVkKGNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXhTaXplID0gY29tcHV0ZURhdGFUZXh0dXJlU2l6ZShlbGVtZW50c1BlclRleGVsU3RvcmVkLCA2KTtcclxuICAgICAgICAgICAgcmV0dXJuIHtlbGVtZW50c1BlclRleGVsU3RvcmVkLCB0ZXhTaXplfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPSB0aGlzLmdldFRhcmdldENvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsKCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPSAwO1xyXG4gICAgICAgIGNvbnN0IHNoQ29tcHJlc3Npb25MZXZlbCA9IHRoaXMuZ2V0VGFyZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcHJlc3Npb25MZXZlbCgpO1xyXG5cclxuICAgICAgICBsZXQgY292YXJpYW5jZXM7XHJcbiAgICAgICAgbGV0IHNjYWxlcztcclxuICAgICAgICBsZXQgcm90YXRpb25zO1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsQ292VGV4U3BlY3MgPSBnZXRDb3ZhcmlhbmNlc0luaXRpYWxUZXh0dXJlU3BlY3MoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbENvdlRleFNwZWNzLnRleFNpemUueCAqIGluaXRpYWxDb3ZUZXhTcGVjcy50ZXhTaXplLnkgPiBNQVhfVEVYVFVSRV9URVhFTFMgJiYgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb3ZhcmlhbmNlcyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4U3BsYXRDb3VudCAqIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NhbGVzID0gbmV3IEZsb2F0MzJBcnJheShtYXhTcGxhdENvdW50ICogMyk7XHJcbiAgICAgICAgICAgIHJvdGF0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4U3BsYXRDb3VudCAqIDQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgY2VudGVycyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4U3BsYXRDb3VudCAqIDMpO1xyXG4gICAgICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBVaW50OEFycmF5KG1heFNwbGF0Q291bnQgKiA0KTtcclxuXHJcbiAgICAgICAgbGV0IFNwaGVyaWNhbEhhcm1vbmljc0FycmF5VHlwZSA9IEZsb2F0MzJBcnJheTtcclxuICAgICAgICBpZiAoc2hDb21wcmVzc2lvbkxldmVsID09PSAxKSBTcGhlcmljYWxIYXJtb25pY3NBcnJheVR5cGUgPSBVaW50MTZBcnJheTtcclxuICAgICAgICBlbHNlIGlmIChzaENvbXByZXNzaW9uTGV2ZWwgPT09IDIpIFNwaGVyaWNhbEhhcm1vbmljc0FycmF5VHlwZSA9IFVpbnQ4QXJyYXk7XHJcbiAgICAgICAgY29uc3Qgc2hDb21wb25lbnRDb3VudCA9IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlKHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBjb25zdCBzaERhdGEgPSB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA/IG5ldyBTcGhlcmljYWxIYXJtb25pY3NBcnJheVR5cGUobWF4U3BsYXRDb3VudCAqIHNoQ29tcG9uZW50Q291bnQpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvLyBzZXQgdXAgY2VudGVycy9jb2xvcnMgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgY29uc3QgY2VudGVyc0NvbHNUZXhTaXplID0gY29tcHV0ZURhdGFUZXh0dXJlU2l6ZShDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCwgNCk7XHJcbiAgICAgICAgY29uc3QgcGFkZGVkQ2VudGVyc0NvbHMgPSBuZXcgVWludDMyQXJyYXkoY2VudGVyc0NvbHNUZXhTaXplLnggKiBjZW50ZXJzQ29sc1RleFNpemUueSAqIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMKTtcclxuICAgICAgICBTcGxhdE1lc2gudXBkYXRlQ2VudGVyQ29sb3JzUGFkZGVkRGF0YSgwLCBzcGxhdENvdW50IC0gMSwgY2VudGVycywgY29sb3JzLCBwYWRkZWRDZW50ZXJzQ29scyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNlbnRlcnNDb2xzVGV4ID0gbmV3IERhdGFUZXh0dXJlKHBhZGRlZENlbnRlcnNDb2xzLCBjZW50ZXJzQ29sc1RleFNpemUueCwgY2VudGVyc0NvbHNUZXhTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgY2VudGVyc0NvbHNUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgICAgIGNlbnRlcnNDb2xzVGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNlbnRlcnNDb2xvcnNUZXh0dXJlLnZhbHVlID0gY2VudGVyc0NvbHNUZXg7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUudmFsdWUuY29weShjZW50ZXJzQ29sc1RleFNpemUpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcyA9IHtcclxuICAgICAgICAgICAgJ2Jhc2VEYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2NvdmFyaWFuY2VzJzogY292YXJpYW5jZXMsXHJcbiAgICAgICAgICAgICAgICAnc2NhbGVzJzogc2NhbGVzLFxyXG4gICAgICAgICAgICAgICAgJ3JvdGF0aW9ucyc6IHJvdGF0aW9ucyxcclxuICAgICAgICAgICAgICAgICdjZW50ZXJzJzogY2VudGVycyxcclxuICAgICAgICAgICAgICAgICdjb2xvcnMnOiBjb2xvcnMsXHJcbiAgICAgICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzJzogc2hEYXRhXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdjZW50ZXJDb2xvcnMnOiB7XHJcbiAgICAgICAgICAgICAgICAnZGF0YSc6IHBhZGRlZENlbnRlcnNDb2xzLFxyXG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiBjZW50ZXJzQ29sc1RleCxcclxuICAgICAgICAgICAgICAgICdzaXplJzogY2VudGVyc0NvbHNUZXhTaXplXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQpIHtcclxuICAgICAgICAgICAgLy8gc2V0IHVwIGNvdmFyaWFuY2VzIGRhdGEgdGV4dHVyZVxyXG5cclxuICAgICAgICAgICAgY29uc3QgY292VGV4U3BlY3MgPSBnZXRDb3ZhcmlhbmNlc0luaXRpYWxUZXh0dXJlU3BlY3MoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc0VsZW1lbnRzUGVyVGV4ZWxTdG9yZWQgPSBjb3ZUZXhTcGVjcy5lbGVtZW50c1BlclRleGVsU3RvcmVkO1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZUZXhTaXplID0gY292VGV4U3BlY3MudGV4U2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBDb3ZhcmlhbmNlc0RhdGFUeXBlID0gY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IFVpbnQzMkFycmF5IDogRmxvYXQzMkFycmF5O1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc0VsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWQgPSBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA+PSAxID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfQUxMT0NBVEVEIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0FMTE9DQVRFRDtcclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNUZXh0dXJlRGF0YSA9IG5ldyBDb3ZhcmlhbmNlc0RhdGFUeXBlKGNvdlRleFNpemUueCAqIGNvdlRleFNpemUueSAqIGNvdmFyaWFuY2VzRWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZURhdGEuc2V0KGNvdmFyaWFuY2VzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFNwbGF0TWVzaC51cGRhdGVQYWRkZWRDb21wcmVzc2VkQ292YXJpYW5jZXNUZXh0dXJlRGF0YShjb3ZhcmlhbmNlcywgY292YXJpYW5jZXNUZXh0dXJlRGF0YSwgMCwgMCwgY292YXJpYW5jZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGNvdlRleDtcclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID49IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvdlRleCA9IG5ldyBEYXRhVGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmVEYXRhLCBjb3ZUZXhTaXplLngsIGNvdlRleFNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICAgICAgICAgIGNvdlRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvdmFyaWFuY2VzVGV4dHVyZUhhbGZGbG9hdC52YWx1ZSA9IGNvdlRleDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvdlRleCA9IG5ldyBEYXRhVGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmVEYXRhLCBjb3ZUZXhTaXplLngsIGNvdlRleFNpemUueSwgUkdCQUZvcm1hdCwgRmxvYXRUeXBlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY292YXJpYW5jZXNUZXh0dXJlLnZhbHVlID0gY292VGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiBhIHVzYW1wbGVyMkQgbmVlZHMgdG8gaGF2ZSBhIHZhbGlkIHRleHR1cmUgYXR0YWNoZWQgb3IgV2ViR0wgY29tcGxhaW5zXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkdW1teVRleCA9IG5ldyBEYXRhVGV4dHVyZShuZXcgVWludDMyQXJyYXkoMzIpLCAyLCAyLCBSR0JBSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICAgICAgICAgIGR1bW15VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0LnZhbHVlID0gZHVtbXlUZXg7XHJcbiAgICAgICAgICAgICAgICBkdW1teVRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY292VGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY292YXJpYW5jZXNBcmVIYWxmRmxvYXQudmFsdWUgPSAoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPj0gMSkgPyAxIDogMDtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb3ZhcmlhbmNlc1RleHR1cmVTaXplLnZhbHVlLmNvcHkoY292VGV4U2l6ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydjb3ZhcmlhbmNlcyddID0ge1xyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiBjb3ZhcmlhbmNlc1RleHR1cmVEYXRhLFxyXG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiBjb3ZUZXgsXHJcbiAgICAgICAgICAgICAgICAnc2l6ZSc6IGNvdlRleFNpemUsXHJcbiAgICAgICAgICAgICAgICAnY29tcHJlc3Npb25MZXZlbCc6IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgJ2VsZW1lbnRzUGVyVGV4ZWxTdG9yZWQnOiBjb3ZhcmlhbmNlc0VsZW1lbnRzUGVyVGV4ZWxTdG9yZWQsXHJcbiAgICAgICAgICAgICAgICAnZWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZCc6IGNvdmFyaWFuY2VzRWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHNldCB1cCBzY2FsZSAmIHJvdGF0aW9ucyBkYXRhIHRleHR1cmVcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHNQZXJTcGxhdCA9IDY7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zVGV4U2l6ZSA9IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUoU0NBTEVTX1JPVEFUSU9OU19FTEVNRU5UU19QRVJfVEVYRUwsIGVsZW1lbnRzUGVyU3BsYXQpO1xyXG4gICAgICAgICAgICBsZXQgU2NhbGVSb3RhdGlvbnNEYXRhVHlwZSA9IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID49IDEgPyBVaW50MTZBcnJheSA6IEZsb2F0MzJBcnJheTtcclxuICAgICAgICAgICAgbGV0IHNjYWxlUm90YXRpb25zVGV4dHVyZVR5cGUgPSBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA+PSAxID8gSGFsZkZsb2F0VHlwZSA6IEZsb2F0VHlwZTtcclxuICAgICAgICAgICAgY29uc3QgcGFkZGVkU2NhbGVSb3RhdGlvbnMgPSBuZXcgU2NhbGVSb3RhdGlvbnNEYXRhVHlwZShzY2FsZVJvdGF0aW9uc1RleFNpemUueCAqIHNjYWxlUm90YXRpb25zVGV4U2l6ZS55ICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCk7XHJcblxyXG4gICAgICAgICAgICBTcGxhdE1lc2gudXBkYXRlU2NhbGVSb3RhdGlvbnNQYWRkZWREYXRhKDAsIHNwbGF0Q291bnQgLSAxLCBzY2FsZXMsIHJvdGF0aW9ucywgcGFkZGVkU2NhbGVSb3RhdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNUZXggPSBuZXcgRGF0YVRleHR1cmUocGFkZGVkU2NhbGVSb3RhdGlvbnMsIHNjYWxlUm90YXRpb25zVGV4U2l6ZS54LCBzY2FsZVJvdGF0aW9uc1RleFNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkdCQUZvcm1hdCwgc2NhbGVSb3RhdGlvbnNUZXh0dXJlVHlwZSk7XHJcbiAgICAgICAgICAgIHNjYWxlUm90YXRpb25zVGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2FsZVJvdGF0aW9uc1RleHR1cmUudmFsdWUgPSBzY2FsZVJvdGF0aW9uc1RleDtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2FsZVJvdGF0aW9uc1RleHR1cmVTaXplLnZhbHVlLmNvcHkoc2NhbGVSb3RhdGlvbnNUZXhTaXplKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NjYWxlUm90YXRpb25zJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAnZGF0YSc6IHBhZGRlZFNjYWxlUm90YXRpb25zLFxyXG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiBzY2FsZVJvdGF0aW9uc1RleCxcclxuICAgICAgICAgICAgICAgICdzaXplJzogc2NhbGVSb3RhdGlvbnNUZXhTaXplLFxyXG4gICAgICAgICAgICAgICAgJ2NvbXByZXNzaW9uTGV2ZWwnOiBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNoRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCBzaFRleHR1cmVUeXBlID0gc2hDb21wcmVzc2lvbkxldmVsID09PSAyID8gVW5zaWduZWRCeXRlVHlwZSA6IEhhbGZGbG9hdFR5cGU7XHJcblxyXG4gICAgICAgICAgICBsZXQgcGFkZGVkU0hDb21wb25lbnRDb3VudCA9IHNoQ29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgIGlmIChwYWRkZWRTSENvbXBvbmVudENvdW50ICUgMiAhPT0gMCkgcGFkZGVkU0hDb21wb25lbnRDb3VudCsrO1xyXG4gICAgICAgICAgICBjb25zdCBzaEVsZW1lbnRzUGVyVGV4ZWwgPSB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9PT0gMiA/IDQgOiAyO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXhlbEZvcm1hdCA9IHNoRWxlbWVudHNQZXJUZXhlbCA9PT0gNCA/IFJHQkFGb3JtYXQgOiBSR0Zvcm1hdDtcclxuICAgICAgICAgICAgbGV0IHNoVGV4U2l6ZSA9IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUoc2hFbGVtZW50c1BlclRleGVsLCBwYWRkZWRTSENvbXBvbmVudENvdW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSBvbmUgdGV4dHVyZSBmb3IgYWxsIHNwaGVyaWNhbCBoYXJtb25pY3MgZGF0YVxyXG4gICAgICAgICAgICBpZiAoc2hUZXhTaXplLnggKiBzaFRleFNpemUueSA8PSBNQVhfVEVYVFVSRV9URVhFTFMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXlTaXplID0gc2hUZXhTaXplLnggKiBzaFRleFNpemUueSAqIHNoRWxlbWVudHNQZXJUZXhlbDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXkgPSBuZXcgU3BoZXJpY2FsSGFybW9uaWNzQXJyYXlUeXBlKHBhZGRlZFNIQXJyYXlTaXplKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgc3BsYXRDb3VudDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjQmFzZSA9IHNoQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RCYXNlID0gcGFkZGVkU0hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaENvbXBvbmVudENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGVkU0hBcnJheVtkZXN0QmFzZSArIGldID0gc2hEYXRhW3NyY0Jhc2UgKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hUZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlKHBhZGRlZFNIQXJyYXksIHNoVGV4U2l6ZS54LCBzaFRleFNpemUueSwgdGV4ZWxGb3JtYXQsIHNoVGV4dHVyZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgc2hUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZS52YWx1ZSA9IHNoVGV4dHVyZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NwaGVyaWNhbEhhcm1vbmljcyddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICdjb21wb25lbnRDb3VudCc6IHNoQ29tcG9uZW50Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRlZENvbXBvbmVudENvdW50JzogcGFkZGVkU0hDb21wb25lbnRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHBhZGRlZFNIQXJyYXksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RleHR1cmVDb3VudCc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RleHR1cmUnOiBzaFRleHR1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBzaFRleFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbXByZXNzaW9uTGV2ZWwnOiBzaENvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnRzUGVyVGV4ZWwnOiBzaEVsZW1lbnRzUGVyVGV4ZWxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIFVzZSB0aHJlZSB0ZXh0dXJlcyBmb3Igc3BoZXJpY2FsIGhhcm1vbmljcyBkYXRhLCBvbmUgcGVyIGNvbG9yIGNoYW5uZWxcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsID0gc2hDb21wb25lbnRDb3VudCAvIDM7XHJcbiAgICAgICAgICAgICAgICBwYWRkZWRTSENvbXBvbmVudENvdW50ID0gc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWw7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFkZGVkU0hDb21wb25lbnRDb3VudCAlIDIgIT09IDApIHBhZGRlZFNIQ29tcG9uZW50Q291bnQrKztcclxuICAgICAgICAgICAgICAgIHNoVGV4U2l6ZSA9IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUoc2hFbGVtZW50c1BlclRleGVsLCBwYWRkZWRTSENvbXBvbmVudENvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5U2l6ZSA9IHNoVGV4U2l6ZS54ICogc2hUZXhTaXplLnkgKiBzaEVsZW1lbnRzUGVyVGV4ZWw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlVW5pZm9ybXMgPSBbdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUJdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoVGV4dHVyZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMzsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheSA9IG5ldyBTcGhlcmljYWxIYXJtb25pY3NBcnJheVR5cGUocGFkZGVkU0hBcnJheVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRlZFNIQXJyYXlzLnB1c2gocGFkZGVkU0hBcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBzcGxhdENvdW50OyBjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjQmFzZSA9IHNoQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0QmFzZSA9IHBhZGRlZFNIQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwgPj0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHBhZGRlZFNIQXJyYXlbZGVzdEJhc2UgKyBpXSA9IHNoRGF0YVtzcmNCYXNlICsgdCAqIDMgKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCA+PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHBhZGRlZFNIQXJyYXlbZGVzdEJhc2UgKyAzICsgaV0gPSBzaERhdGFbc3JjQmFzZSArIDkgKyB0ICogNSArIGldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaFRleHR1cmUgPSBuZXcgRGF0YVRleHR1cmUocGFkZGVkU0hBcnJheSwgc2hUZXhTaXplLngsIHNoVGV4U2l6ZS55LCB0ZXhlbEZvcm1hdCwgc2hUZXh0dXJlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hUZXh0dXJlcy5wdXNoKHNoVGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlVW5pZm9ybXNbdF0udmFsdWUgPSBzaFRleHR1cmU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NNdWx0aVRleHR1cmVNb2RlLnZhbHVlID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NwaGVyaWNhbEhhcm1vbmljcyddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICdjb21wb25lbnRDb3VudCc6IHNoQ29tcG9uZW50Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbXBvbmVudENvdW50UGVyQ2hhbm5lbCc6IHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYWRkZWRDb21wb25lbnRDb3VudCc6IHBhZGRlZFNIQ29tcG9uZW50Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBwYWRkZWRTSEFycmF5cyxcclxuICAgICAgICAgICAgICAgICAgICAndGV4dHVyZUNvdW50JzogMyxcclxuICAgICAgICAgICAgICAgICAgICAndGV4dHVyZXMnOiBzaFRleHR1cmVzLFxyXG4gICAgICAgICAgICAgICAgICAgICdzaXplJzogc2hUZXhTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb21wcmVzc2lvbkxldmVsJzogc2hDb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICdlbGVtZW50c1BlclRleGVsJzogc2hFbGVtZW50c1BlclRleGVsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplLnZhbHVlLmNvcHkoc2hUZXhTaXplKTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZS52YWx1ZSA9IHNoQ29tcHJlc3Npb25MZXZlbCA9PT0gMiA/IDEgOiAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHRoaXMuc2NlbmVzW3NdLnNwbGF0QnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZU1pbi52YWx1ZVtzXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRCdWZmZXIubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWF4LnZhbHVlW3NdID1cclxuICAgICAgICAgICAgICAgICAgICBzcGxhdEJ1ZmZlci5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4ZXNUZXhTaXplID0gY29tcHV0ZURhdGFUZXh0dXJlU2l6ZShTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCwgNCk7XHJcbiAgICAgICAgY29uc3QgcGFkZGVkVHJhbnNmb3JtSW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheShzY2VuZUluZGV4ZXNUZXhTaXplLnggKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVJbmRleGVzVGV4U2l6ZS55ICogU0NFTkVfSU5ERVhFU19FTEVNRU5UU19QRVJfVEVYRUwpO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgc3BsYXRDb3VudDsgYysrKSBwYWRkZWRUcmFuc2Zvcm1JbmRleGVzW2NdID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwW2NdO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhlc1RleHR1cmUgPSBuZXcgRGF0YVRleHR1cmUocGFkZGVkVHJhbnNmb3JtSW5kZXhlcywgc2NlbmVJbmRleGVzVGV4U2l6ZS54LCBzY2VuZUluZGV4ZXNUZXhTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgIHNjZW5lSW5kZXhlc1RleHR1cmUuaW50ZXJuYWxGb3JtYXQgPSAnUjMyVUknO1xyXG4gICAgICAgIHNjZW5lSW5kZXhlc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NlbmVJbmRleGVzVGV4dHVyZS52YWx1ZSA9IHNjZW5lSW5kZXhlc1RleHR1cmU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KHNjZW5lSW5kZXhlc1RleFNpemUpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzY2VuZUluZGV4ZXMnXSA9IHtcclxuICAgICAgICAgICAgJ2RhdGEnOiBwYWRkZWRUcmFuc2Zvcm1JbmRleGVzLFxyXG4gICAgICAgICAgICAndGV4dHVyZSc6IHNjZW5lSW5kZXhlc1RleHR1cmUsXHJcbiAgICAgICAgICAgICdzaXplJzogc2NlbmVJbmRleGVzVGV4U2l6ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2VuZUNvdW50LnZhbHVlID0gdGhpcy5zY2VuZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBGTEFNRS1zcGVjaWZpYyBzZXR1cCAob25seSBpZiBmbGFtZU1vZGVsIGhhcyByZXF1aXJlZCBkYXRhKVxyXG4gICAgICAgIGlmICh0aGlzLmZsYW1lTW9kZWwgJiYgdGhpcy5mbGFtZU1vZGVsLmdlb21ldHJ5ICYmIHRoaXMuZmxhbWVNb2RlbC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMgJiYgdGhpcy5mbGFtZU1vZGVsLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkJTTnVtID0gdGhpcy5mbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYnNDb3VudC52YWx1ZSA9IHRoaXMuZXhwcmVzc2lvbkJTTnVtO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mbGFtZU1vZGVsLnNrZWxldG9uLmJvbmVzLmZvckVhY2goKGJvbmUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9uZS5uYW1lID09ICdoZWFkJylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmhlYWRCb25lSW5kZXgudmFsdWUgPSBpbmRleDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkTW9kZWxUZXh0dXJlKHRoaXMuZmxhbWVNb2RlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRCb25lTWF0cml4VGV4dHVyZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQm9uZVdlaWdodFRleHR1cmUodGhpcy5mbGFtZU1vZGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRCb25lTWF0cml4VGV4dHVyZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnNXZWlnaHQpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAvLyBHdWFyZDogUmVxdWlyZXMgRkxBTUUgbW9kZWwgd2l0aCBtb3JwaFRhcmdldERpY3Rpb25hcnlcclxuICAgICAgICBpZiAoIXRoaXMuZmxhbWVNb2RlbCB8fCAhdGhpcy5mbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3RoaXMuYm9uZXNOdW0gKyB0aGlzLmV4cHJlc3Npb25CU051bSAvIDQgPSAzMCwgc28gMzJcclxuICAgICAgICBjb25zdCBib25lVGV4dHVyZVNpemUgPSBuZXcgVmVjdG9yMig0LCAzMik7XHJcbiAgICAgICAgbGV0IGJvbmVNYXRyaXhUZXh0dXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ib25lc01hdHJpeCk7XHJcbiAgICAgICAgbGV0IGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCA9IG5ldyBVaW50MzJBcnJheShib25lVGV4dHVyZVNpemUueCAqIGJvbmVUZXh0dXJlU2l6ZS55ICogNCk7XHJcbiAgICAgICAgdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnkgPSB0aGlzLmZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuYm9uZXNOdW0gKiAxNjsgYysrKSB7XHJcbiAgICAgICAgICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludFtjXSA9IHVpbnRFbmNvZGVkRmxvYXQoYm9uZU1hdHJpeFRleHR1cmVEYXRhW2NdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmxhbWVNb2RlbCAmJiB0aGlzLmZsYW1lTW9kZWwuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZTAudmFsdWUgPSB0aGlzLmZsYW1lTW9kZWwuc2tlbGV0b24uYm9uZVRleHR1cmU7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeC52YWx1ZSA9IHRoaXMuZmxhbWVNb2RlbC5iaW5kTWF0cml4O1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXhJbnZlcnNlLnZhbHVlID0gdGhpcy5mbGFtZU1vZGVsLmJpbmRNYXRyaXhJbnZlcnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmJzV2VpZ2h0KSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duKHRoaXMuYnNXZWlnaHQsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5ic1dlaWdodFtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludFtpZHggKyB0aGlzLmJvbmVzTnVtICogMTZdID0gdWludEVuY29kZWRGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5ic1dlaWdodC5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVxyXG4gICAgICAgIC8vICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnRbYyArIHRoaXMuYm9uZXNOdW0gKiAxNl0gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYnNXZWlnaHRbY10pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9uZU1hdHJpeFRleCA9IG5ldyBEYXRhVGV4dHVyZShib25lTWF0cml4VGV4dHVyZURhdGFJbnQsIGJvbmVUZXh0dXJlU2l6ZS54LCBib25lVGV4dHVyZVNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICBib25lTWF0cml4VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgICAgICBib25lTWF0cml4VGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlLnZhbHVlID0gYm9uZU1hdHJpeFRleDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGJvbmVUZXh0dXJlU2l6ZSk7XHJcblxyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddID0ge1xyXG4gICAgICAgICAgICAnZGF0YSc6IGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCxcclxuICAgICAgICAgICAgJ3RleHR1cmUnOiBib25lTWF0cml4VGV4LFxyXG4gICAgICAgICAgICAnc2l6ZSc6IGJvbmVUZXh0dXJlU2l6ZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVNYXRyaXgnXSA9IGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVCb25lTWF0cml4VGV4dHVyZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnNXZWlnaHQgfHwgIXRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5KVxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5ic1dlaWdodCkge1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093bih0aGlzLmJzV2VpZ2h0LCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuYnNXZWlnaHRba2V5XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2tleV07XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J11baWR4ICsgdGhpcy5ib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuYnNXZWlnaHQubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZU1hdHJpeCddW2MgKyB0aGlzLmJvbmVzTnVtICogMTZdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJzV2VpZ2h0W2NdKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ10uZGF0YSA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVNYXRyaXgnXTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydib25lTWF0cml4J11bJ3RleHR1cmUnXS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZS52YWx1ZSA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXVsndGV4dHVyZSddO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5mbGFtZU1vZGVsLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUwLnZhbHVlID0gdGhpcy5mbGFtZU1vZGVsLnNrZWxldG9uLmJvbmVUZXh0dXJlO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXgudmFsdWUgPSB0aGlzLmZsYW1lTW9kZWwuYmluZE1hdHJpeDtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5iaW5kTWF0cml4SW52ZXJzZS52YWx1ZSA9IHRoaXMuZmxhbWVNb2RlbC5iaW5kTWF0cml4SW52ZXJzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkQm9uZVdlaWdodFRleHR1cmUoZmxhbWVNb2RlbCkge1xyXG4gICAgICAgIC8vIEd1YXJkOiBib25lc1dlaWdodCBpcyByZXF1aXJlZCBmb3IgRkxBTUUgYm9uZSB3ZWlnaHQgdGV4dHVyZSBidWlsZGluZ1xyXG4gICAgICAgIGlmICghdGhpcy5ib25lc1dlaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2hhcGVkTWVzaCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuXHJcbiAgICAgICAgbGV0IHBvaW50TnVtID0gc2hhcGVkTWVzaC5sZW5ndGggLyAzO1xyXG4gICAgICAgIGNvbnN0IGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSA9IG5ldyBWZWN0b3IyKDUxMiwgNTEyKTtcclxuICAgICAgICBsZXQgYm9uZVdlaWdodFRleHR1cmVEYXRhID0gbmV3IEZsb2F0MzJBcnJheShib25lV2VpZ2h0VGV4dHVyZVNpemUueCAqIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55ICogNCk7XHJcbiAgICAgICAgbGV0IGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludCA9IG5ldyBVaW50MzJBcnJheShib25lV2VpZ2h0VGV4dHVyZVNpemUueCAqIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55ICogNCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludE51bTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDBdID0gdGhpcy5ib25lc1dlaWdodFtpXVswXTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgMV0gPSB0aGlzLmJvbmVzV2VpZ2h0W2ldWzFdO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAyXSA9IHRoaXMuYm9uZXNXZWlnaHRbaV1bMl07XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDNdID0gdGhpcy5ib25lc1dlaWdodFtpXVszXTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgNF0gPSB0aGlzLmJvbmVzV2VpZ2h0W2ldWzRdO1xyXG5cclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgMF0gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYm9uZXNXZWlnaHRbaV1bMF0pO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAxXSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ib25lc1dlaWdodFtpXVsxXSk7XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDJdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJvbmVzV2VpZ2h0W2ldWzJdKTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgM10gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYm9uZXNXZWlnaHRbaV1bM10pO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyA0XSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ib25lc1dlaWdodFtpXVs0XSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBib25lV2VpZ2h0VGV4ID0gbmV3IERhdGFUZXh0dXJlKGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludCwgYm9uZVdlaWdodFRleHR1cmVTaXplLngsIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVdlaWdodFRleHR1cmUudmFsdWUgPSBib25lV2VpZ2h0VGV4O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVdlaWdodFRleHR1cmVTaXplLnZhbHVlLmNvcHkoYm9uZVdlaWdodFRleHR1cmVTaXplKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVXZWlnaHQnXSA9IHtcclxuICAgICAgICAgICAgJ2RhdGEnOiBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQsXHJcbiAgICAgICAgICAgICd0ZXh0dXJlJzogYm9uZVdlaWdodFRleCxcclxuICAgICAgICAgICAgJ3NpemUnOiBib25lV2VpZ2h0VGV4dHVyZVNpemUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lV2VpZ2h0J10gPSBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGJ1aWxkTW9kZWxUZXh0dXJlKGZsYW1lTW9kZWwpIHtcclxuICAgICAgICAvLyBHdWFyZDogUmVxdWlyZXMgRkxBTUUgbW9kZWwgd2l0aCBtb3JwaCBhdHRyaWJ1dGVzXHJcbiAgICAgICAgaWYgKCFmbGFtZU1vZGVsIHx8ICFmbGFtZU1vZGVsLmdlb21ldHJ5IHx8ICFmbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyB8fCAhZmxhbWVNb2RlbC5tb3JwaFRhcmdldERpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmxhbWVNb2RlbFRleFNpemUgPSBuZXcgVmVjdG9yMig0MDk2LCAyMDQ4KTtcclxuXHJcbiAgICAgICAgdmFyIHNoYXBlZE1lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcbiAgICAgICAgdmFyIHNoYXBlZE1lc2hBcnJheSA9IFtdOy8vQXJyYXkuZnJvbShzaGFwZWRNZXNoKTtcclxuICAgICAgICBsZXQgcG9pbnROdW0gPSBzaGFwZWRNZXNoLmxlbmd0aCAvIDM7XHJcblxyXG4gICAgICAgIGxldCBic0xlbmd0aCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDtcclxuXHJcbiAgICAgICAgY29uc3QgbW9ycGhUYXJnZXROYW1lcyA9IE9iamVjdC5rZXlzKGZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5KTtcclxuICAgICAgICBtb3JwaFRhcmdldE5hbWVzLmZvckVhY2goKG5hbWUsIG5ld0luZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsSW5kZXggPSBmbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuYW1lXTtcclxuICAgICAgICAgICAgdmFyIGJzTWVzaCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uW29yaWdpbmFsSW5kZXhdO1xyXG4gICAgICAgICAgICBzaGFwZWRNZXNoQXJyYXkgPSBzaGFwZWRNZXNoQXJyYXkuY29uY2F0KEFycmF5LmZyb20oYnNNZXNoLmFycmF5KSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgc2hhcGVkTWVzaEFycmF5ID0gc2hhcGVkTWVzaEFycmF5LmNvbmNhdChBcnJheS5mcm9tKHNoYXBlZE1lc2gpKTtcclxuXHJcbiAgICAgICAgbGV0IGZsYW1lTW9kZWxEYXRhID0gbmV3IEZsb2F0MzJBcnJheShmbGFtZU1vZGVsVGV4U2l6ZS54ICogZmxhbWVNb2RlbFRleFNpemUueSAqIDQpO1xyXG4gICAgICAgIGxldCBmbGFtZU1vZGVsRGF0YUludCA9IG5ldyBVaW50MzJBcnJheShmbGFtZU1vZGVsVGV4U2l6ZS54ICogZmxhbWVNb2RlbFRleFNpemUueSAqIDQpO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgcG9pbnROdW0gKiAoYnNMZW5ndGggKyAxKTsgYysrKSB7XHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMF0gPSBzaGFwZWRNZXNoQXJyYXlbYyAqIDMgKyAwXTtcclxuICAgICAgICAgICAgZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAxXSA9IHNoYXBlZE1lc2hBcnJheVtjICogMyArIDFdO1xyXG4gICAgICAgICAgICBmbGFtZU1vZGVsRGF0YVtjICogNCArIDJdID0gc2hhcGVkTWVzaEFycmF5W2MgKiAzICsgMl07XHJcblxyXG4gICAgICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDBdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDBdKTtcclxuICAgICAgICAgICAgZmxhbWVNb2RlbERhdGFJbnRbYyAqIDQgKyAxXSA9IHVpbnRFbmNvZGVkRmxvYXQoZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAxXSk7XHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxEYXRhSW50W2MgKiA0ICsgMl0gPSB1aW50RW5jb2RlZEZsb2F0KGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMl0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmxhbWVNb2RlbFRleCA9IG5ldyBEYXRhVGV4dHVyZShmbGFtZU1vZGVsRGF0YUludCwgZmxhbWVNb2RlbFRleFNpemUueCwgZmxhbWVNb2RlbFRleFNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICBmbGFtZU1vZGVsVGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgICAgICBmbGFtZU1vZGVsVGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmZsYW1lTW9kZWxUZXh0dXJlLnZhbHVlID0gZmxhbWVNb2RlbFRleDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmZsYW1lTW9kZWxUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGZsYW1lTW9kZWxUZXhTaXplKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5nYXVzc2lhblNwbGF0Q291bnQudmFsdWUgPSB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snZmxhbWVNb2RlbCddID0ge1xyXG4gICAgICAgICAgICAnZGF0YSc6IGZsYW1lTW9kZWxEYXRhSW50LFxyXG4gICAgICAgICAgICAndGV4dHVyZSc6IGZsYW1lTW9kZWxUZXgsXHJcbiAgICAgICAgICAgICdzaXplJzogZmxhbWVNb2RlbFRleFNpemUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydmbGFtZU1vZGVsUG9zJ10gPSBmbGFtZU1vZGVsRGF0YTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUZXR1cmVBZnRlckJTQW5kU2tlbGV0b24oZnJvbVNwbGF0LCB0b1NwbGF0KSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmVUcmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuICAgICAgICB0aGlzLmdldFNjZW5lVHJhbnNmb3JtKDAsIHNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmdldFNjZW5lKDApLnNwbGF0QnVmZmVyLmZpbGxTcGxhdENlbnRlckFycmF5KHRoaXMubW9ycGhlZE1lc2gsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY2VudGVycywgc2NlbmVUcmFuc2Zvcm0sIGZyb21TcGxhdCwgdG9TcGxhdCwgMCk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBjZW50ZXIgJiBjb2xvciBkYXRhIHRleHR1cmVcclxuICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvciA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2NlbnRlckNvbG9ycyddO1xyXG4gICAgICAgIGNvbnN0IHBhZGRlZENlbnRlckNvbG9ycyA9IGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLmRhdGE7XHJcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzVGV4dHVyZSA9IGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLnRleHR1cmU7XHJcbiAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZUNlbnRlckNvbG9yc1BhZGRlZERhdGEoZnJvbVNwbGF0LCB0b1NwbGF0LCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY29sb3JzLCBwYWRkZWRDZW50ZXJDb2xvcnMpO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc1RleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KGNlbnRlckNvbG9yc1RleHR1cmUpIDogbnVsbDtcclxuICAgICAgICBpZiAoIWNlbnRlckNvbG9yc1RleHR1cmVQcm9wcyB8fCAhY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIGNlbnRlckNvbG9yc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUocGFkZGVkQ2VudGVyQ29sb3JzLCBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci50ZXh0dXJlLCBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMsIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMLCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVCwgNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlQm9uZU1hdHJpeFRleHR1cmUoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVCYXNlRGF0YUZyb21TcGxhdEJ1ZmZlcnMoZnJvbVNwbGF0LCB0b1NwbGF0KSB7XHJcbiAgICAgICAgY29uc3QgY292YXJhbmNlc1RleHR1cmVEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snY292YXJpYW5jZXMnXTtcclxuICAgICAgICBjb25zdCBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9IGNvdmFyYW5jZXNUZXh0dXJlRGVzYyA/IGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5jb21wcmVzc2lvbkxldmVsIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzY2FsZVJvdGF0aW9ucyddO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID0gc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYyA/IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MuY29tcHJlc3Npb25MZXZlbCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBzaElUZXh0dXJlRGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NwaGVyaWNhbEhhcm1vbmljcyddO1xyXG4gICAgICAgIGNvbnN0IHNoQ29tcHJlc3Npb25MZXZlbCA9IHNoSVRleHR1cmVEZXNjID8gc2hJVGV4dHVyZURlc2MuY29tcHJlc3Npb25MZXZlbCA6IDA7XHJcblxyXG4gICAgICAgIHRoaXMuZmlsbFNwbGF0RGF0YUFycmF5cyh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvdmFyaWFuY2VzLCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnNjYWxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5yb3RhdGlvbnMsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY2VudGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb2xvcnMsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuc3BoZXJpY2FsSGFybW9uaWNzLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5mbGFtZU1vZGVsUG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsLCBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCwgc2hDb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BsYXQsIHRvU3BsYXQsIGZyb21TcGxhdCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlRGF0YVRleHR1cmVzRnJvbUJhc2VEYXRhKGZyb21TcGxhdCwgdG9TcGxhdCkge1xyXG4gICAgICAgIGNvbnN0IGNvdmFyYW5jZXNUZXh0dXJlRGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2NvdmFyaWFuY2VzJ107XHJcbiAgICAgICAgY29uc3QgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPSBjb3ZhcmFuY2VzVGV4dHVyZURlc2MgPyBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuY29tcHJlc3Npb25MZXZlbCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc2NhbGVSb3RhdGlvbnMnXTtcclxuICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA9IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MgPyBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjLmNvbXByZXNzaW9uTGV2ZWwgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3Qgc2hUZXh0dXJlRGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NwaGVyaWNhbEhhcm1vbmljcyddO1xyXG4gICAgICAgIGNvbnN0IHNoQ29tcHJlc3Npb25MZXZlbCA9IHNoVGV4dHVyZURlc2MgPyBzaFRleHR1cmVEZXNjLmNvbXByZXNzaW9uTGV2ZWwgOiAwO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgZmxhbWUgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgY29uc3QgZmxhbWVNb2RlbFRleHR1cmVEZXNjcmlwdG9yID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snZmxhbWVNb2RlbCddO1xyXG4gICAgICAgIGNvbnN0IGZsYW1lTW9kZWxQb3MgPSBmbGFtZU1vZGVsVGV4dHVyZURlc2NyaXB0b3IuZGF0YTtcclxuICAgICAgICBjb25zdCBmbGFtZU1vZGVsUG9zVGV4dHVyZSA9IGZsYW1lTW9kZWxUZXh0dXJlRGVzY3JpcHRvci50ZXh0dXJlO1xyXG5cclxuICAgICAgICBjb25zdCBmbGFtZU1vZGVsUG9zVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoZmxhbWVNb2RlbFBvc1RleHR1cmUpIDogbnVsbDtcclxuICAgICAgICBpZiAoIWZsYW1lTW9kZWxQb3NUZXh0dXJlUHJvcHMgfHwgIWZsYW1lTW9kZWxQb3NUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgZmxhbWVNb2RlbFBvc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUoZmxhbWVNb2RlbFBvcywgZmxhbWVNb2RlbFRleHR1cmVEZXNjcmlwdG9yLnRleHR1cmUsIGZsYW1lTW9kZWxUZXh0dXJlRGVzY3JpcHRvci5zaXplLFxyXG4gICAgICAgICAgICAgICAgZmxhbWVNb2RlbFBvc1RleHR1cmVQcm9wcywgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwsIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFULCAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgY2VudGVyICYgY29sb3IgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydjZW50ZXJDb2xvcnMnXTtcclxuICAgICAgICBjb25zdCBwYWRkZWRDZW50ZXJDb2xvcnMgPSBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc1RleHR1cmUgPSBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci50ZXh0dXJlO1xyXG4gICAgICAgIFNwbGF0TWVzaC51cGRhdGVDZW50ZXJDb2xvcnNQYWRkZWREYXRhKGZyb21TcGxhdCwgdG9TcGxhdCwgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jZW50ZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY29sb3JzLCBwYWRkZWRDZW50ZXJDb2xvcnMpO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc1RleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KGNlbnRlckNvbG9yc1RleHR1cmUpIDogbnVsbDtcclxuICAgICAgICBpZiAoIWNlbnRlckNvbG9yc1RleHR1cmVQcm9wcyB8fCAhY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIGNlbnRlckNvbG9yc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUocGFkZGVkQ2VudGVyQ29sb3JzLCBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci50ZXh0dXJlLCBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNvbG9yc1RleHR1cmVQcm9wcywgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwsIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFULCA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgY292YXJpYW5jZSBkYXRhIHRleHR1cmVcclxuICAgICAgICBpZiAoY292YXJhbmNlc1RleHR1cmVEZXNjKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzVGV4dHVyZSA9IGNvdmFyYW5jZXNUZXh0dXJlRGVzYy50ZXh0dXJlO1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmFuY2VzU3RhcnRFbGVtZW50ID0gZnJvbVNwbGF0ICogQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUO1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc0VuZEVsZW1lbnQgPSB0b1NwbGF0ICogQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gY292YXJhbmNlc1N0YXJ0RWxlbWVudDsgaSA8PSBjb3ZhcmlhbmNlc0VuZEVsZW1lbnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2UgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvdmFyaWFuY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5kYXRhW2ldID0gY292YXJpYW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFNwbGF0TWVzaC51cGRhdGVQYWRkZWRDb21wcmVzc2VkQ292YXJpYW5jZXNUZXh0dXJlRGF0YSh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvdmFyaWFuY2VzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5kYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGxhdCAqIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5lbGVtZW50c1BlclRleGVsQWxsb2NhdGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyYW5jZXNTdGFydEVsZW1lbnQsIGNvdmFyaWFuY2VzRW5kRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoY292YXJpYW5jZXNUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmICghY292YXJpYW5jZXNUZXh0dXJlUHJvcHMgfHwgIWNvdmFyaWFuY2VzVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZGF0YSwgY292YXJhbmNlc1RleHR1cmVEZXNjLnRleHR1cmUsIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlUHJvcHMsIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5lbGVtZW50c1BlclRleGVsU3RvcmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFULCA0LCBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5kYXRhLCBjb3ZhcmFuY2VzVGV4dHVyZURlc2MudGV4dHVyZSwgY292YXJhbmNlc1RleHR1cmVEZXNjLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlc1RleHR1cmVQcm9wcywgY292YXJhbmNlc1RleHR1cmVEZXNjLmVsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZCwgMiwgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIHNjYWxlIGFuZCByb3RhdGlvbiBkYXRhIHRleHR1cmVcclxuICAgICAgICBpZiAoc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYykge1xyXG4gICAgICAgICAgICBjb25zdCBwYWRkZWRTY2FsZVJvdGF0aW9ucyA9IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MuZGF0YTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNUZXh0dXJlID0gc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYy50ZXh0dXJlO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c1BlclNwbGF0ID0gNjtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXNQZXJFbGVtZW50ID0gc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPT09IDAgPyA0IDogMjtcclxuXHJcbiAgICAgICAgICAgIFNwbGF0TWVzaC51cGRhdGVTY2FsZVJvdGF0aW9uc1BhZGRlZERhdGEoZnJvbVNwbGF0LCB0b1NwbGF0LCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnNjYWxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnJvdGF0aW9ucywgcGFkZGVkU2NhbGVSb3RhdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc1RleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KHNjYWxlUm90YXRpb25zVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIXNjYWxlUm90YXRpb25zVGV4dHVyZVByb3BzIHx8ICFzY2FsZVJvdGF0aW9uc1RleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgc2NhbGVSb3RhdGlvbnNUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUocGFkZGVkU2NhbGVSb3RhdGlvbnMsIHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MudGV4dHVyZSwgc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYy5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZVJvdGF0aW9uc1RleHR1cmVQcm9wcywgU0NBTEVTX1JPVEFUSU9OU19FTEVNRU5UU19QRVJfVEVYRUwsIGVsZW1lbnRzUGVyU3BsYXQsIGJ5dGVzUGVyRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIHNwaGVyaWNhbCBoYXJtb25pY3MgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgY29uc3Qgc2hEYXRhID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5zcGhlcmljYWxIYXJtb25pY3M7XHJcbiAgICAgICAgaWYgKHNoRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQgc2hCeXRlc1BlckVsZW1lbnQgPSA0O1xyXG4gICAgICAgICAgICBpZiAoc2hDb21wcmVzc2lvbkxldmVsID09PSAxKSBzaEJ5dGVzUGVyRWxlbWVudCA9IDI7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNoQ29tcHJlc3Npb25MZXZlbCA9PT0gMikgc2hCeXRlc1BlckVsZW1lbnQgPSAxO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlVGV4dHVyZSA9IChzaFRleHR1cmUsIHNoVGV4dHVyZVNpemUsIGVsZW1lbnRzUGVyVGV4ZWwsIHBhZGRlZFNIQXJyYXksIHBhZGRlZFNIQ29tcG9uZW50Q291bnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoc2hUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNoVGV4dHVyZVByb3BzIHx8ICFzaFRleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNoVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUocGFkZGVkU0hBcnJheSwgc2hUZXh0dXJlLCBzaFRleHR1cmVTaXplLCBzaFRleHR1cmVQcm9wcywgZWxlbWVudHNQZXJUZXhlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRlZFNIQ29tcG9uZW50Q291bnQsIHNoQnl0ZXNQZXJFbGVtZW50LCBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hDb21wb25lbnRDb3VudCA9IHNoVGV4dHVyZURlc2MuY29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQ29tcG9uZW50Q291bnQgPSBzaFRleHR1cmVEZXNjLnBhZGRlZENvbXBvbmVudENvdW50O1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIGZvciB0aGUgY2FzZSBvZiBhIHNpbmdsZSB0ZXh0dXJlIGZvciBhbGwgc3BoZXJpY2FsIGhhcm1vbmljcyBkYXRhXHJcbiAgICAgICAgICAgIGlmIChzaFRleHR1cmVEZXNjLnRleHR1cmVDb3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheSA9IHNoVGV4dHVyZURlc2MuZGF0YTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSBmcm9tU3BsYXQ7IGMgPD0gdG9TcGxhdDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjQmFzZSA9IHNoQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RCYXNlID0gcGFkZGVkU0hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaENvbXBvbmVudENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGVkU0hBcnJheVtkZXN0QmFzZSArIGldID0gc2hEYXRhW3NyY0Jhc2UgKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUZXh0dXJlKHNoVGV4dHVyZURlc2MudGV4dHVyZSwgc2hUZXh0dXJlRGVzYy5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaFRleHR1cmVEZXNjLmVsZW1lbnRzUGVyVGV4ZWwsIHBhZGRlZFNIQXJyYXksIHBhZGRlZFNIQ29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZm9yIHRoZSBjYXNlIG9mIHNwaGVyaWNhbCBoYXJtb25pY3MgZGF0YSBzcGxpdCBhbW9uZyB0aHJlZSB0ZXh0dXJlcywgb25lIGZvciBlYWNoIGNvbG9yIGNoYW5uZWxcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsID0gc2hUZXh0dXJlRGVzYy5jb21wb25lbnRDb3VudFBlckNoYW5uZWw7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDM7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXkgPSBzaFRleHR1cmVEZXNjLmRhdGFbdF07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IGZyb21TcGxhdDsgYyA8PSB0b1NwbGF0OyBjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjQmFzZSA9IHNoQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0QmFzZSA9IHBhZGRlZFNIQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwgPj0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHBhZGRlZFNIQXJyYXlbZGVzdEJhc2UgKyBpXSA9IHNoRGF0YVtzcmNCYXNlICsgdCAqIDMgKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCA+PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHBhZGRlZFNIQXJyYXlbZGVzdEJhc2UgKyAzICsgaV0gPSBzaERhdGFbc3JjQmFzZSArIDkgKyB0ICogNSArIGldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRleHR1cmUoc2hUZXh0dXJlRGVzYy50ZXh0dXJlc1t0XSwgc2hUZXh0dXJlRGVzYy5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hUZXh0dXJlRGVzYy5lbGVtZW50c1BlclRleGVsLCBwYWRkZWRTSEFycmF5LCBwYWRkZWRTSENvbXBvbmVudENvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIHNjZW5lIGluZGV4ICYgdHJhbnNmb3JtIGRhdGFcclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4ZXNUZXhEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc2NlbmVJbmRleGVzJ107XHJcbiAgICAgICAgY29uc3QgcGFkZGVkU2NlbmVJbmRleGVzID0gc2NlbmVJbmRleGVzVGV4RGVzYy5kYXRhO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQ7IGMgPD0gdG9TcGxhdDsgYysrKSB7XHJcbiAgICAgICAgICAgIHBhZGRlZFNjZW5lSW5kZXhlc1tjXSA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcFtjXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleGVzVGV4dHVyZSA9IHNjZW5lSW5kZXhlc1RleERlc2MudGV4dHVyZTtcclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4ZXNUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChzY2VuZUluZGV4ZXNUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFzY2VuZUluZGV4ZXNUZXh0dXJlUHJvcHMgfHwgIXNjZW5lSW5kZXhlc1RleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICBzY2VuZUluZGV4ZXNUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKHBhZGRlZFNjZW5lSW5kZXhlcywgc2NlbmVJbmRleGVzVGV4RGVzYy50ZXh0dXJlLCBzY2VuZUluZGV4ZXNUZXhEZXNjLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVJbmRleGVzVGV4dHVyZVByb3BzLCAxLCAxLCAxLCB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQsIHRvU3BsYXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXJnZXRDb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVSA/IDEgOiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRhcmdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXByZXNzaW9uTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDEsIHRoaXMuZ2V0TWF4aW11bVNwbGF0QnVmZmVyQ29tcHJlc3Npb25MZXZlbCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNYXhpbXVtU3BsYXRCdWZmZXJDb21wcmVzc2lvbkxldmVsKCkge1xyXG4gICAgICAgIGxldCBtYXhDb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmdldFNjZW5lKGkpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHNjZW5lLnNwbGF0QnVmZmVyO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBzcGxhdEJ1ZmZlci5jb21wcmVzc2lvbkxldmVsID4gbWF4Q29tcHJlc3Npb25MZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgbWF4Q29tcHJlc3Npb25MZXZlbCA9IHNwbGF0QnVmZmVyLmNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1heENvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWluaW11bVNwbGF0QnVmZmVyQ29tcHJlc3Npb25MZXZlbCgpIHtcclxuICAgICAgICBsZXQgbWluQ29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5nZXRTY2VuZShpKTtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBzY2VuZS5zcGxhdEJ1ZmZlcjtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgc3BsYXRCdWZmZXIuY29tcHJlc3Npb25MZXZlbCA8IG1pbkNvbXByZXNzaW9uTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIG1pbkNvbXByZXNzaW9uTGV2ZWwgPSBzcGxhdEJ1ZmZlci5jb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtaW5Db21wcmVzc2lvbkxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjb21wdXRlVGV4dHVyZVVwZGF0ZVJlZ2lvbihzdGFydFNwbGF0LCBlbmRTcGxhdCwgdGV4dHVyZVdpZHRoLCBlbGVtZW50c1BlclRleGVsLCBlbGVtZW50c1BlclNwbGF0KSB7XHJcbiAgICAgICAgY29uc3QgdGV4ZWxzUGVyU3BsYXQgPSBlbGVtZW50c1BlclNwbGF0IC8gZWxlbWVudHNQZXJUZXhlbDtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhcnRTcGxhdFRleGVscyA9IHN0YXJ0U3BsYXQgKiB0ZXhlbHNQZXJTcGxhdDtcclxuICAgICAgICBjb25zdCBzdGFydFJvdyA9IE1hdGguZmxvb3Ioc3RhcnRTcGxhdFRleGVscyAvIHRleHR1cmVXaWR0aCk7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRSb3dFbGVtZW50ID0gc3RhcnRSb3cgKiB0ZXh0dXJlV2lkdGggKiBlbGVtZW50c1BlclRleGVsO1xyXG5cclxuICAgICAgICBjb25zdCBlbmRTcGxhdFRleGVscyA9IGVuZFNwbGF0ICogdGV4ZWxzUGVyU3BsYXQ7XHJcbiAgICAgICAgY29uc3QgZW5kUm93ID0gTWF0aC5mbG9vcihlbmRTcGxhdFRleGVscyAvIHRleHR1cmVXaWR0aCk7XHJcbiAgICAgICAgY29uc3QgZW5kUm93RW5kRWxlbWVudCA9IGVuZFJvdyAqIHRleHR1cmVXaWR0aCAqIGVsZW1lbnRzUGVyVGV4ZWwgKyAodGV4dHVyZVdpZHRoICogZWxlbWVudHNQZXJUZXhlbCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdkYXRhU3RhcnQnOiBzdGFydFJvd0VsZW1lbnQsXHJcbiAgICAgICAgICAgICdkYXRhRW5kJzogZW5kUm93RW5kRWxlbWVudCxcclxuICAgICAgICAgICAgJ3N0YXJ0Um93Jzogc3RhcnRSb3csXHJcbiAgICAgICAgICAgICdlbmRSb3cnOiBlbmRSb3dcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZURhdGFUZXh0dXJlKHBhZGRlZERhdGEsIHRleHR1cmUsIHRleHR1cmVTaXplLCB0ZXh0dXJlUHJvcHMsIGVsZW1lbnRzUGVyVGV4ZWwsIGVsZW1lbnRzUGVyU3BsYXQsIGJ5dGVzUGVyRWxlbWVudCwgZnJvbSwgdG8pIHtcclxuICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVJlZ2lvbiA9IFNwbGF0TWVzaC5jb21wdXRlVGV4dHVyZVVwZGF0ZVJlZ2lvbihmcm9tLCB0bywgdGV4dHVyZVNpemUueCwgZWxlbWVudHNQZXJUZXhlbCwgZWxlbWVudHNQZXJTcGxhdCk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRWxlbWVudENvdW50ID0gdXBkYXRlUmVnaW9uLmRhdGFFbmQgLSB1cGRhdGVSZWdpb24uZGF0YVN0YXJ0O1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGFWaWV3ID0gbmV3IHBhZGRlZERhdGEuY29uc3RydWN0b3IocGFkZGVkRGF0YS5idWZmZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVSZWdpb24uZGF0YVN0YXJ0ICogYnl0ZXNQZXJFbGVtZW50LCB1cGRhdGVFbGVtZW50Q291bnQpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZUhlaWdodCA9IHVwZGF0ZVJlZ2lvbi5lbmRSb3cgLSB1cGRhdGVSZWdpb24uc3RhcnRSb3cgKyAxO1xyXG4gICAgICAgIGNvbnN0IGdsVHlwZSA9IHRoaXMud2ViR0xVdGlscy5jb252ZXJ0KHRleHR1cmUudHlwZSk7XHJcbiAgICAgICAgY29uc3QgZ2xGb3JtYXQgPSB0aGlzLndlYkdMVXRpbHMuY29udmVydCh0ZXh0dXJlLmZvcm1hdCwgdGV4dHVyZS5jb2xvclNwYWNlKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50VGV4dHVyZSA9IGdsLmdldFBhcmFtZXRlcihnbC5URVhUVVJFX0JJTkRJTkdfMkQpO1xyXG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSk7XHJcbiAgICAgICAgZ2wudGV4U3ViSW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCAwLCB1cGRhdGVSZWdpb24uc3RhcnRSb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlU2l6ZS54LCB1cGRhdGVIZWlnaHQsIGdsRm9ybWF0LCBnbFR5cGUsIHVwZGF0ZURhdGFWaWV3KTtcclxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBjdXJyZW50VGV4dHVyZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVwZGF0ZVBhZGRlZENvbXByZXNzZWRDb3ZhcmlhbmNlc1RleHR1cmVEYXRhKHNvdXJjZURhdGEsIHRleHR1cmVEYXRhLCB0ZXh0dXJlRGF0YVN0YXJ0SW5kZXgsIGZyb21FbGVtZW50LCB0b0VsZW1lbnQpIHtcclxuICAgICAgICBsZXQgdGV4dHVyZURhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRleHR1cmVEYXRhLmJ1ZmZlcik7XHJcbiAgICAgICAgbGV0IHRleHR1cmVEYXRhSW5kZXggPSB0ZXh0dXJlRGF0YVN0YXJ0SW5kZXg7XHJcbiAgICAgICAgbGV0IHNlcXVlbnRpYWxDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb21FbGVtZW50OyBpIDw9IHRvRWxlbWVudDsgaSs9Mikge1xyXG4gICAgICAgICAgICB0ZXh0dXJlRGF0YVZpZXcuc2V0VWludDE2KHRleHR1cmVEYXRhSW5kZXggKiAyLCBzb3VyY2VEYXRhW2ldLCB0cnVlKTtcclxuICAgICAgICAgICAgdGV4dHVyZURhdGFWaWV3LnNldFVpbnQxNih0ZXh0dXJlRGF0YUluZGV4ICogMiArIDIsIHNvdXJjZURhdGFbaSArIDFdLCB0cnVlKTtcclxuICAgICAgICAgICAgdGV4dHVyZURhdGFJbmRleCArPSAyO1xyXG4gICAgICAgICAgICBzZXF1ZW50aWFsQ291bnQrKztcclxuICAgICAgICAgICAgaWYgKHNlcXVlbnRpYWxDb3VudCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0dXJlRGF0YUluZGV4ICs9IDI7XHJcbiAgICAgICAgICAgICAgICBzZXF1ZW50aWFsQ291bnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1cGRhdGVDZW50ZXJDb2xvcnNQYWRkZWREYXRhKGZyb20sIHRvLCBjZW50ZXJzLCBjb2xvcnMsIHBhZGRlZENlbnRlckNvbG9ycykge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSBmcm9tOyBjIDw9IHRvOyBjKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29sb3JzQmFzZSA9IGMgKiA0O1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXJzQmFzZSA9IGMgKiAzO1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNCYXNlID0gYyAqIDQ7XHJcbiAgICAgICAgICAgIHBhZGRlZENlbnRlckNvbG9yc1tjZW50ZXJDb2xvcnNCYXNlXSA9IHJnYmFBcnJheVRvSW50ZWdlcihjb2xvcnMsIGNvbG9yc0Jhc2UpO1xyXG4gICAgICAgICAgICBwYWRkZWRDZW50ZXJDb2xvcnNbY2VudGVyQ29sb3JzQmFzZSArIDFdID0gdWludEVuY29kZWRGbG9hdChjZW50ZXJzW2NlbnRlcnNCYXNlXSk7XHJcbiAgICAgICAgICAgIHBhZGRlZENlbnRlckNvbG9yc1tjZW50ZXJDb2xvcnNCYXNlICsgMl0gPSB1aW50RW5jb2RlZEZsb2F0KGNlbnRlcnNbY2VudGVyc0Jhc2UgKyAxXSk7XHJcbiAgICAgICAgICAgIHBhZGRlZENlbnRlckNvbG9yc1tjZW50ZXJDb2xvcnNCYXNlICsgM10gPSB1aW50RW5jb2RlZEZsb2F0KGNlbnRlcnNbY2VudGVyc0Jhc2UgKyAyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1cGRhdGVTY2FsZVJvdGF0aW9uc1BhZGRlZERhdGEoZnJvbSwgdG8sIHNjYWxlcywgcm90YXRpb25zLCBwYWRkZWRTY2FsZVJvdGF0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGNvbWJpbmVkU2l6ZSA9IDY7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IGZyb207IGMgPD0gdG87IGMrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZUJhc2UgPSBjICogMztcclxuICAgICAgICAgICAgY29uc3Qgcm90YXRpb25CYXNlID0gYyAqIDQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zQmFzZSA9IGMgKiBjb21iaW5lZFNpemU7XHJcblxyXG4gICAgICAgICAgICBwYWRkZWRTY2FsZVJvdGF0aW9uc1tzY2FsZVJvdGF0aW9uc0Jhc2VdID0gc2NhbGVzW3NjYWxlQmFzZV07XHJcbiAgICAgICAgICAgIHBhZGRlZFNjYWxlUm90YXRpb25zW3NjYWxlUm90YXRpb25zQmFzZSArIDFdID0gc2NhbGVzW3NjYWxlQmFzZSArIDFdO1xyXG4gICAgICAgICAgICBwYWRkZWRTY2FsZVJvdGF0aW9uc1tzY2FsZVJvdGF0aW9uc0Jhc2UgKyAyXSA9IHNjYWxlc1tzY2FsZUJhc2UgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIHBhZGRlZFNjYWxlUm90YXRpb25zW3NjYWxlUm90YXRpb25zQmFzZSArIDNdID0gcm90YXRpb25zW3JvdGF0aW9uQmFzZV07XHJcbiAgICAgICAgICAgIHBhZGRlZFNjYWxlUm90YXRpb25zW3NjYWxlUm90YXRpb25zQmFzZSArIDRdID0gcm90YXRpb25zW3JvdGF0aW9uQmFzZSArIDFdO1xyXG4gICAgICAgICAgICBwYWRkZWRTY2FsZVJvdGF0aW9uc1tzY2FsZVJvdGF0aW9uc0Jhc2UgKyA1XSA9IHJvdGF0aW9uc1tyb3RhdGlvbkJhc2UgKyAyXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVmlzaWJsZVJlZ2lvbihzaW5jZUxhc3RCdWlsZE9ubHkpIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBDZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGlmICghc2luY2VMYXN0QnVpbGRPbmx5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2Z0NlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVzLmZvckVhY2goKHNjZW5lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhdmdDZW50ZXIuYWRkKHNjZW5lLnNwbGF0QnVmZmVyLnNjZW5lQ2VudGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF2Z0NlbnRlci5tdWx0aXBseVNjYWxhcigxLjAgLyB0aGlzLnNjZW5lcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZWRTY2VuZUNlbnRlci5jb3B5KGF2Z0NlbnRlcik7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NlbmVDZW50ZXIudmFsdWUuY29weSh0aGlzLmNhbGN1bGF0ZWRTY2VuZUNlbnRlcik7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXJ0U3BsYXRGb3JtTWF4RGlzdGFuY2VDYWxjID0gc2luY2VMYXN0QnVpbGRPbmx5ID8gdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50IDogMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRTcGxhdEZvcm1NYXhEaXN0YW5jZUNhbGM7IGkgPCBzcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRTcGxhdENlbnRlcih0aGlzLm1vcnBoZWRNZXNoLCBpLCB0ZW1wQ2VudGVyLCB0cnVlKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzdEZyb21DU2NlbmVDZW50ZXIgPSB0ZW1wQ2VudGVyLnN1Yih0aGlzLmNhbGN1bGF0ZWRTY2VuZUNlbnRlcikubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgIGlmIChkaXN0RnJvbUNTY2VuZUNlbnRlciA+IHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlcikgdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyID0gZGlzdEZyb21DU2NlbmVDZW50ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyIC0gdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID4gVklTSUJMRV9SRUdJT05fRVhQQU5TSU9OX0RFTFRBKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA9IHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlcjtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzID0gTWF0aC5tYXgodGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzIC0gVklTSUJMRV9SRUdJT05fRVhQQU5TSU9OX0RFTFRBLCAwLjApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maW5hbEJ1aWxkKSB0aGlzLnZpc2libGVSZWdpb25SYWRpdXMgPSB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPSB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXI7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmxlUmVnaW9uRmFkZURpc3RhbmNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVmlzaWJsZVJlZ2lvbkZhZGVEaXN0YW5jZShzY2VuZVJldmVhbE1vZGUgPSBTY2VuZVJldmVhbE1vZGUuRGVmYXVsdCkge1xyXG4gICAgICAgIGNvbnN0IGZhc3RGYWRlUmF0ZSA9IFNDRU5FX0ZBREVJTl9SQVRFX0ZBU1QgKiB0aGlzLnNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXI7XHJcbiAgICAgICAgY29uc3QgZ3JhZHVhbEZhZGVSYXRlID0gU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCAqIHRoaXMuc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllcjtcclxuICAgICAgICBjb25zdCBkZWZhdWx0RmFkZUluUmF0ZSA9IHRoaXMuZmluYWxCdWlsZCA/IGZhc3RGYWRlUmF0ZSA6IGdyYWR1YWxGYWRlUmF0ZTtcclxuICAgICAgICBjb25zdCBmYWRlSW5SYXRlID0gc2NlbmVSZXZlYWxNb2RlID09PSBTY2VuZVJldmVhbE1vZGUuRGVmYXVsdCA/IGRlZmF1bHRGYWRlSW5SYXRlIDogZ3JhZHVhbEZhZGVSYXRlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cyA9ICh0aGlzLnZpc2libGVSZWdpb25SYWRpdXMgLSB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFkZUluUmF0ZSArIHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cztcclxuICAgICAgICBjb25zdCBmYWRlSW5QZXJjZW50YWdlID0gKHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA+IDApID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cyAvIHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cykgOiAwO1xyXG4gICAgICAgIGNvbnN0IGZhZGVJbkNvbXBsZXRlID0gZmFkZUluUGVyY2VudGFnZSA+IDAuOTk7XHJcbiAgICAgICAgY29uc3Qgc2hhZGVyRmFkZUluQ29tcGxldGUgPSAoZmFkZUluQ29tcGxldGUgfHwgc2NlbmVSZXZlYWxNb2RlID09PSBTY2VuZVJldmVhbE1vZGUuSW5zdGFudCkgPyAxIDogMDtcclxuXHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzLnZhbHVlID0gdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudmlzaWJsZVJlZ2lvblJhZGl1cy52YWx1ZSA9IHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cztcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmZpcnN0UmVuZGVyVGltZS52YWx1ZSA9IHRoaXMuZmlyc3RSZW5kZXJUaW1lO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY3VycmVudFRpbWUudmFsdWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmZhZGVJbkNvbXBsZXRlLnZhbHVlID0gc2hhZGVyRmFkZUluQ29tcGxldGU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkNoYW5naW5nID0gIWZhZGVJbkNvbXBsZXRlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBpbmRleGVzIG9mIHNwbGF0cyB0aGF0IHNob3VsZCBiZSByZW5kZXJlZDsgc2hvdWxkIGJlIHNvcnRlZCBpbiBkZXNpcmVkIHJlbmRlciBvcmRlci5cclxuICAgICAqIEBwYXJhbSB7VWludDMyQXJyYXl9IGdsb2JhbEluZGV4ZXMgU29ydGVkIGluZGV4IGxpc3Qgb2Ygc3BsYXRzIHRvIGJlIHJlbmRlcmVkXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVuZGVyU3BsYXRDb3VudCBUb3RhbCBudW1iZXIgb2Ygc3BsYXRzIHRvIGJlIHJlbmRlcmVkLiBOZWNlc3NhcnkgYmVjYXVzZSB3ZSBtYXkgbm90IHdhbnQgdG8gcmVuZGVyXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVyeSBzcGxhdC5cclxuICAgICAqL1xyXG4gICAgdXBkYXRlUmVuZGVySW5kZXhlcyhnbG9iYWxJbmRleGVzLCByZW5kZXJTcGxhdENvdW50KSB7XHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5O1xyXG4gICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMuc3BsYXRJbmRleC5zZXQoZ2xvYmFsSW5kZXhlcyk7XHJcbiAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5zcGxhdEluZGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICBpZiAocmVuZGVyU3BsYXRDb3VudCA+IDAgJiYgdGhpcy5maXJzdFJlbmRlclRpbWUgPT09IC0xKSB0aGlzLmZpcnN0UmVuZGVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIGdlb21ldHJ5Lmluc3RhbmNlQ291bnQgPSByZW5kZXJTcGxhdENvdW50O1xyXG4gICAgICAgIGdlb21ldHJ5LnNldERyYXdSYW5nZSgwLCByZW5kZXJTcGxhdENvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgdHJhbnNmb3JtcyBmb3IgZWFjaCBzY2VuZSBpbiB0aGlzIHNwbGF0IG1lc2ggZnJvbSB0aGVpciBpbmRpdmlkdWFsIGNvbXBvbmVudHMgKHBvc2l0aW9uLFxyXG4gICAgICogcXVhdGVybmlvbiwgYW5kIHNjYWxlKVxyXG4gICAgICovXHJcbiAgICB1cGRhdGVUcmFuc2Zvcm1zKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmdldFNjZW5lKGkpO1xyXG4gICAgICAgICAgICBzY2VuZS51cGRhdGVUcmFuc2Zvcm0odGhpcy5keW5hbWljTW9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVVuaWZvcm1zID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gbmV3IFZlY3RvcjIoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlbmRlckRpbWVuc2lvbnMsIGNhbWVyYUZvY2FsTGVuZ3RoWCwgY2FtZXJhRm9jYWxMZW5ndGhZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcnRob2dyYXBoaWNNb2RlLCBvcnRob2dyYXBoaWNab29tLCBpbnZlcnNlRm9jYWxBZGp1c3RtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICAgICAgaWYgKHNwbGF0Q291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydC5zZXQocmVuZGVyRGltZW5zaW9ucy54ICogdGhpcy5kZXZpY2VQaXhlbFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnMueSAqIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnZpZXdwb3J0LnZhbHVlLmNvcHkodmlld3BvcnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5iYXNpc1ZpZXdwb3J0LnZhbHVlLnNldCgxLjAgLyB2aWV3cG9ydC54LCAxLjAgLyB2aWV3cG9ydC55KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZm9jYWwudmFsdWUuc2V0KGNhbWVyYUZvY2FsTGVuZ3RoWCwgY2FtZXJhRm9jYWxMZW5ndGhZKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMub3J0aG9ncmFwaGljTW9kZS52YWx1ZSA9IG9ydGhvZ3JhcGhpY01vZGUgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMub3J0aG9ab29tLnZhbHVlID0gb3J0aG9ncmFwaGljWm9vbTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuaW52ZXJzZUZvY2FsQWRqdXN0bWVudC52YWx1ZSA9IGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50cmFuc2Zvcm1zLnZhbHVlW2ldLmNvcHkodGhpcy5nZXRTY2VuZShpKS50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2VuZU9wYWNpdHkudmFsdWVbaV0gPSBjbGFtcCh0aGlzLmdldFNjZW5lKGkpLm9wYWNpdHksIDAuMCwgMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2VuZVZpc2liaWxpdHkudmFsdWVbaV0gPSB0aGlzLmdldFNjZW5lKGkpLnZpc2libGUgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIHNldFNwbGF0U2NhbGUoc3BsYXRTY2FsZSA9IDEpIHtcclxuICAgICAgICB0aGlzLnNwbGF0U2NhbGUgPSBzcGxhdFNjYWxlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BsYXRTY2FsZS52YWx1ZSA9IHNwbGF0U2NhbGU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0U2NhbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsYXRTY2FsZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQb2ludENsb3VkTW9kZUVuYWJsZWQoZW5hYmxlZCkge1xyXG4gICAgICAgIHRoaXMucG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnBvaW50Q2xvdWRNb2RlRW5hYmxlZC52YWx1ZSA9IGVuYWJsZWQgPyAxIDogMDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UG9pbnRDbG91ZE1vZGVFbmFibGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50Q2xvdWRNb2RlRW5hYmxlZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdERhdGFUZXh0dXJlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGxhdERhdGFUZXh0dXJlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdENvdW50KGluY2x1ZGVTaW5jZUxhc3RCdWlsZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCFpbmNsdWRlU2luY2VMYXN0QnVpbGQpIHJldHVybiB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQ7XHJcbiAgICAgICAgZWxzZSByZXR1cm4gU3BsYXRNZXNoLmdldFRvdGFsU3BsYXRDb3VudEZvclNjZW5lcyh0aGlzLnNjZW5lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRvdGFsU3BsYXRDb3VudEZvclNjZW5lcyhzY2VuZXMpIHtcclxuICAgICAgICBsZXQgdG90YWxTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzY2VuZSBvZiBzY2VuZXMpIHtcclxuICAgICAgICAgICAgaWYgKHNjZW5lICYmIHNjZW5lLnNwbGF0QnVmZmVyKSB0b3RhbFNwbGF0Q291bnQgKz0gc2NlbmUuc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG90YWxTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRUb3RhbFNwbGF0Q291bnRGb3JTcGxhdEJ1ZmZlcnMoc3BsYXRCdWZmZXJzKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgc3BsYXRCdWZmZXIgb2Ygc3BsYXRCdWZmZXJzKSB0b3RhbFNwbGF0Q291bnQgKz0gc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIHJldHVybiB0b3RhbFNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWF4U3BsYXRDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gU3BsYXRNZXNoLmdldFRvdGFsTWF4U3BsYXRDb3VudEZvclNjZW5lcyh0aGlzLnNjZW5lcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRvdGFsTWF4U3BsYXRDb3VudEZvclNjZW5lcyhzY2VuZXMpIHtcclxuICAgICAgICBsZXQgdG90YWxTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzY2VuZSBvZiBzY2VuZXMpIHtcclxuICAgICAgICAgICAgaWYgKHNjZW5lICYmIHNjZW5lLnNwbGF0QnVmZmVyKSB0b3RhbFNwbGF0Q291bnQgKz0gc2NlbmUuc3BsYXRCdWZmZXIuZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG90YWxTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRUb3RhbE1heFNwbGF0Q291bnRGb3JTcGxhdEJ1ZmZlcnMoc3BsYXRCdWZmZXJzKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgc3BsYXRCdWZmZXIgb2Ygc3BsYXRCdWZmZXJzKSB0b3RhbFNwbGF0Q291bnQgKz0gc3BsYXRCdWZmZXIuZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIHJldHVybiB0b3RhbFNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZURpc3RhbmNlc0NvbXB1dGF0aW9uR1BVUmVzb3VyY2VzKCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKSB7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVZlcnRleEFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKTtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtKSB7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVByb2dyYW0odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtKTtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmVydGV4U2hhZGVyKTtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0gPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZlcnRleFNoYWRlciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suZnJhZ21lbnRTaGFkZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpc3Bvc2VEaXN0YW5jZXNDb21wdXRhdGlvbkdQVUJ1ZmZlclJlc291cmNlcygpO1xyXG4gICAgICAgIGlmICh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmlkKSB7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVRyYW5zZm9ybUZlZWRiYWNrKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suaWQpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmlkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZURpc3RhbmNlc0NvbXB1dGF0aW9uR1BVQnVmZmVyUmVzb3VyY2VzKCkge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIgPSBudWxsO1xyXG4gICAgICAgICAgICBnbC5kZWxldGVCdWZmZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyKSB7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIFRocmVlLmpzIHJlbmRlcmVyIHVzZWQgYnkgdGhpcyBzcGxhdCBtZXNoXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLldlYkdMUmVuZGVyZXJ9IHJlbmRlcmVyIEluc3RhbmNlIG9mIFRIUkVFLldlYkdMUmVuZGVyZXJcclxuICAgICAqL1xyXG4gICAgc2V0UmVuZGVyZXIocmVuZGVyZXIpIHtcclxuICAgICAgICBpZiAocmVuZGVyZXIgIT09IHRoaXMucmVuZGVyZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb25zID0gbmV3IFdlYkdMRXh0ZW5zaW9ucyQxKGdsKTtcclxuICAgICAgICAgICAgY29uc3QgY2FwYWJpbGl0aWVzID0gbmV3IFdlYkdMQ2FwYWJpbGl0aWVzJDEoZ2wsIGV4dGVuc2lvbnMsIHt9KTtcclxuICAgICAgICAgICAgZXh0ZW5zaW9ucy5pbml0KGNhcGFiaWxpdGllcyk7XHJcbiAgICAgICAgICAgIHRoaXMud2ViR0xVdGlscyA9IG5ldyBXZWJHTFV0aWxzJDEoZ2wsIGV4dGVuc2lvbnMsIGNhcGFiaWxpdGllcyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZURpc3RhbmNlc0NvbXB1dGF0aW9uT25HUFUgJiYgdGhpcy5nZXRTcGxhdENvdW50KCkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwRGlzdGFuY2VzQ29tcHV0YXRpb25UcmFuc2Zvcm1GZWVkYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBjZW50ZXJzLCBzY2VuZUluZGV4ZXMgfSA9IHRoaXMuZ2V0RGF0YUZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKDAsIHRoaXMuZ2V0U3BsYXRDb3VudCgpIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hHUFVCdWZmZXJzRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oY2VudGVycywgc2NlbmVJbmRleGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXR1cERpc3RhbmNlc0NvbXB1dGF0aW9uVHJhbnNmb3JtRmVlZGJhY2sgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRNYXhTcGxhdENvdW50O1xyXG5cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gdGhpcy5nZXRNYXhTcGxhdENvdW50KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlYnVpbGRHUFVPYmplY3RzID0gKHRoaXMubGFzdFJlbmRlcmVyICE9PSB0aGlzLnJlbmRlcmVyKTtcclxuICAgICAgICAgICAgY29uc3QgcmVidWlsZEJ1ZmZlcnMgPSBjdXJyZW50TWF4U3BsYXRDb3VudCAhPT0gbWF4U3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVidWlsZEdQVU9iamVjdHMgJiYgIXJlYnVpbGRCdWZmZXJzKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZEdQVU9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZURpc3RhbmNlc0NvbXB1dGF0aW9uR1BVUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVidWlsZEJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZURpc3RhbmNlc0NvbXB1dGF0aW9uR1BVQnVmZmVyUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjcmVhdGVTaGFkZXIgPSAoZ2wsIHR5cGUsIHNvdXJjZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzaGFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhdGFsIGVycm9yOiBnbCBjb3VsZCBub3QgY3JlYXRlIGEgc2hhZGVyIG9iamVjdC4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBpbGVkID0gZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb21waWxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0eXBlTmFtZSA9ICd1bmtub3duJztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gZ2wuVkVSVEVYX1NIQURFUikgdHlwZU5hbWUgPSAndmVydGV4IHNoYWRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gZ2wuRlJBR01FTlRfU0hBREVSKSB0eXBlTmFtZSA9ICdmcmFnZW1lbnQgc2hhZGVyJztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcnMgPSBnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gY29tcGlsZSAnICsgdHlwZU5hbWUgKyAnIHdpdGggdGhlc2UgZXJyb3JzOicgKyBlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBzaGFkZXI7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgdnNTb3VyY2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB2c1NvdXJjZSA9XHJcbiAgICAgICAgICAgICAgICBgI3ZlcnNpb24gMzAwIGVzXHJcbiAgICAgICAgICAgICAgICBpbiBpdmVjNCBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICBmbGF0IG91dCBpbnQgZGlzdGFuY2U7YDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdnNTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbiB1aW50IHNjZW5lSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm0gaXZlYzQgdHJhbnNmb3Jtc1ske0NvbnN0YW50cy5NYXhTY2VuZXN9XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl2ZWM0IHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc2NlbmVJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGNlbnRlci54ICogdHJhbnNmb3JtLnggKyBjZW50ZXIueSAqIHRyYW5zZm9ybS55ICsgY2VudGVyLnogKiB0cmFuc2Zvcm0ueiArIHRyYW5zZm9ybS53ICogY2VudGVyLnc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2c1NvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm0gaXZlYzMgbW9kZWxWaWV3UHJvajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gY2VudGVyLnggKiBtb2RlbFZpZXdQcm9qLnggKyBjZW50ZXIueSAqIG1vZGVsVmlld1Byb2oueSArIGNlbnRlci56ICogbW9kZWxWaWV3UHJvai56O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZzU291cmNlID1cclxuICAgICAgICAgICAgICAgIGAjdmVyc2lvbiAzMDAgZXNcclxuICAgICAgICAgICAgICAgIGluIHZlYzQgY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgZmxhdCBvdXQgZmxvYXQgZGlzdGFuY2U7YDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdnNTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbiB1aW50IHNjZW5lSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm0gbWF0NCB0cmFuc2Zvcm1zWyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCB0cmFuc2Zvcm1lZENlbnRlciA9IHRyYW5zZm9ybXNbc2NlbmVJbmRleF0gKiB2ZWM0KGNlbnRlci54eXosIDEuMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IHRyYW5zZm9ybWVkQ2VudGVyLno7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2c1NvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm0gdmVjMyBtb2RlbFZpZXdQcm9qO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBjZW50ZXIueCAqIG1vZGVsVmlld1Byb2oueCArIGNlbnRlci55ICogbW9kZWxWaWV3UHJvai55ICsgY2VudGVyLnogKiBtb2RlbFZpZXdQcm9qLno7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBmc1NvdXJjZSA9XHJcbiAgICAgICAgICAgIGAjdmVyc2lvbiAzMDAgZXNcclxuICAgICAgICAgICAgICAgIHByZWNpc2lvbiBsb3dwIGZsb2F0O1xyXG4gICAgICAgICAgICAgICAgb3V0IHZlYzQgZnJhZ0NvbG9yO1xyXG4gICAgICAgICAgICAgICAgdm9pZCBtYWluKCl7fVxyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbyA9IGdsLmdldFBhcmFtZXRlcihnbC5WRVJURVhfQVJSQVlfQklORElORyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9ncmFtID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkNVUlJFTlRfUFJPR1JBTSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9ncmFtRGVsZXRlZCA9IGN1cnJlbnRQcm9ncmFtID8gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihjdXJyZW50UHJvZ3JhbSwgZ2wuREVMRVRFX1NUQVRVUykgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkR1BVT2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8gPSBnbC5jcmVhdGVWZXJ0ZXhBcnJheSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGRHUFVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmVydGV4U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5WRVJURVhfU0hBREVSLCB2c1NvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuRlJBR01FTlRfU0hBREVSLCBmc1NvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZlcnRleFNoYWRlciB8fCAhZnJhZ21lbnRTaGFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBjb21waWxlIHNoYWRlcnMgZm9yIGRpc3RhbmNlcyBjb21wdXRhdGlvbiBvbiBHUFUuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcclxuICAgICAgICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XHJcbiAgICAgICAgICAgICAgICBnbC50cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzKHByb2dyYW0sIFsnZGlzdGFuY2UnXSwgZ2wuU0VQQVJBVEVfQVRUUklCUyk7XHJcbiAgICAgICAgICAgICAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rZWQgPSBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKTtcclxuICAgICAgICAgICAgICAgIGlmICghbGlua2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhdGFsIGVycm9yOiBGYWlsZWQgdG8gbGluayBwcm9ncmFtOiAnICsgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBsaW5rIHNoYWRlcnMgZm9yIGRpc3RhbmNlcyBjb21wdXRhdGlvbiBvbiBHUFUuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtID0gcHJvZ3JhbTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmVydGV4U2hhZGVyID0gdmVydGV4U2hhZGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52ZXJ0ZXhTaGFkZXIgPSBmcmFnbWVudFNoYWRlcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jID1cclxuICAgICAgICAgICAgICAgIGdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSwgJ2NlbnRlcicpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNMb2MgPVxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSwgJ3NjZW5lSW5kZXgnKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnRyYW5zZm9ybXNMb2NzW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSwgYHRyYW5zZm9ybXNbJHtpfV1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2subW9kZWxWaWV3UHJvakxvYyA9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSwgJ21vZGVsVmlld1Byb2onKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGRHUFVPYmplY3RzIHx8IHJlYnVpbGRCdWZmZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliSVBvaW50ZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jLCA0LCBnbC5JTlQsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYywgNCwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzQnVmZmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0xvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliSVBvaW50ZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNMb2MsIDEsIGdsLlVOU0lHTkVEX0lOVCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkR1BVT2JqZWN0cyB8fCByZWJ1aWxkQnVmZmVycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIpO1xyXG4gICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbWF4U3BsYXRDb3VudCAqIDQsIGdsLlNUQVRJQ19SRUFEKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkR1BVT2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5pZCA9IGdsLmNyZWF0ZVRyYW5zZm9ybUZlZWRiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2wuYmluZFRyYW5zZm9ybUZlZWRiYWNrKGdsLlRSQU5TRk9STV9GRUVEQkFDSywgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5pZCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXJCYXNlKGdsLlRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVIsIDAsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UHJvZ3JhbSAmJiBjdXJyZW50UHJvZ3JhbURlbGV0ZWQgIT09IHRydWUpIGdsLnVzZVByb2dyYW0oY3VycmVudFByb2dyYW0pO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFZhbykgZ2wuYmluZFZlcnRleEFycmF5KGN1cnJlbnRWYW8pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0UmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xyXG4gICAgICAgICAgICBjdXJyZW50TWF4U3BsYXRDb3VudCA9IG1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZyZXNoIEdQVSBidWZmZXJzIHVzZWQgZm9yIGNvbXB1dGluZyBzcGxhdCBkaXN0YW5jZXMgd2l0aCBjZW50ZXJzIGRhdGEgZnJvbSB0aGUgc2NlbmVzIGZvciB0aGlzIG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVXBkYXRlIFNwZWNpZnkgd2hldGhlciBvciBub3QgdG8gdXBkYXRlIHRoZSBHUFUgYnVmZmVyIG9yIHRvIGluaXRpYWxpemUgJiBmaWxsXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNlbnRlcnMgVGhlIHNwbGF0IGNlbnRlcnMgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFNwbGF0cyBPZmZzZXQgaW4gdGhlIEdQVSBidWZmZXIgYXQgd2hpY2ggdG8gc3RhcnQgdXBkYXRpbmcgZGF0YSwgc3BlY2lmaWVkIGluIHNwbGF0c1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVHUFVDZW50ZXJzQnVmZmVyRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oaXNVcGRhdGUsIGNlbnRlcnMsIG9mZnNldFNwbGF0cykge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudFZhbyA9IGdsLmdldFBhcmFtZXRlcihnbC5WRVJURVhfQVJSQVlfQklORElORyk7XHJcbiAgICAgICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKTtcclxuXHJcbiAgICAgICAgY29uc3QgQXJyYXlUeXBlID0gdGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbiA/IFVpbnQzMkFycmF5IDogRmxvYXQzMkFycmF5O1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZUJ5dGVzUGVyQ2VudGVyID0gMTY7XHJcbiAgICAgICAgY29uc3Qgc3ViQnVmZmVyT2Zmc2V0ID0gb2Zmc2V0U3BsYXRzICogYXR0cmlidXRlQnl0ZXNQZXJDZW50ZXI7XHJcblxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIpO1xyXG5cclxuICAgICAgICBpZiAoaXNVcGRhdGUpIHtcclxuICAgICAgICAgICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIHN1YkJ1ZmZlck9mZnNldCwgY2VudGVycyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbWF4QXJyYXkgPSBuZXcgQXJyYXlUeXBlKHRoaXMuZ2V0TWF4U3BsYXRDb3VudCgpICogYXR0cmlidXRlQnl0ZXNQZXJDZW50ZXIpO1xyXG4gICAgICAgICAgICBtYXhBcnJheS5zZXQoY2VudGVycyk7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBtYXhBcnJheSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudFZhbykgZ2wuYmluZFZlcnRleEFycmF5KGN1cnJlbnRWYW8pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaCBHUFUgYnVmZmVycyB1c2VkIGZvciBwcmUtY29tcHV0aW5nIHNwbGF0IGRpc3RhbmNlcyB3aXRoIGNlbnRlcnMgZGF0YSBmcm9tIHRoZSBzY2VuZXMgZm9yIHRoaXMgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNVcGRhdGUgU3BlY2lmeSB3aGV0aGVyIG9yIG5vdCB0byB1cGRhdGUgdGhlIEdQVSBidWZmZXIgb3IgdG8gaW5pdGlhbGl6ZSAmIGZpbGxcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2NlbmVJbmRleGVzIFRoZSBzcGxhdCBzY2VuZSBpbmRleGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0U3BsYXRzIE9mZnNldCBpbiB0aGUgR1BVIGJ1ZmZlciBhdCB3aGljaCB0byBzdGFydCB1cGRhdGluZyBkYXRhLCBzcGVjaWZpZWQgaW4gc3BsYXRzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUdQVVRyYW5zZm9ybUluZGV4ZXNCdWZmZXJGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihpc1VwZGF0ZSwgc2NlbmVJbmRleGVzLCBvZmZzZXRTcGxhdHMpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyIHx8ICF0aGlzLmR5bmFtaWNNb2RlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYW8gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSVEVYX0FSUkFZX0JJTkRJTkcpO1xyXG4gICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHN1YkJ1ZmZlck9mZnNldCA9IG9mZnNldFNwbGF0cyAqIDQ7XHJcblxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0J1ZmZlcik7XHJcblxyXG4gICAgICAgIGlmIChpc1VwZGF0ZSkge1xyXG4gICAgICAgICAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3ViQnVmZmVyT2Zmc2V0LCBzY2VuZUluZGV4ZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heEFycmF5ID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuZ2V0TWF4U3BsYXRDb3VudCgpICogNCk7XHJcbiAgICAgICAgICAgIG1heEFycmF5LnNldChzY2VuZUluZGV4ZXMpO1xyXG4gICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbWF4QXJyYXksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudFZhbykgZ2wuYmluZFZlcnRleEFycmF5KGN1cnJlbnRWYW8pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgdHlwZWQgYXJyYXkgY29udGFpbmluZyBhIG1hcHBpbmcgZnJvbSBnbG9iYWwgc3BsYXQgaW5kZXhlcyB0byB0aGVpciBzY2VuZSBpbmRleC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBTdGFydGluZyBzcGxhdCBpbmRleCB0byBzdG9yZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmRpbmcgc3BsYXQgaW5kZXggdG8gc3RvcmVcclxuICAgICAqIEByZXR1cm4ge1VpbnQzMkFycmF5fVxyXG4gICAgICovXHJcbiAgICBnZXRTY2VuZUluZGV4ZXMoc3RhcnQsIGVuZCkge1xyXG5cclxuICAgICAgICBsZXQgc2NlbmVJbmRleGVzO1xyXG4gICAgICAgIGNvbnN0IGZpbGxDb3VudCA9IGVuZCAtIHN0YXJ0ICsgMTtcclxuICAgICAgICBzY2VuZUluZGV4ZXMgPSBuZXcgVWludDMyQXJyYXkoZmlsbENvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcclxuICAgICAgICAgICAgc2NlbmVJbmRleGVzW2ldID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNjZW5lSW5kZXhlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbGwgJ2FycmF5JyB3aXRoIHRoZSB0cmFuc2Zvcm1zIGZvciBlYWNoIHNjZW5lIGluIHRoaXMgc3BsYXQgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIHNjZW5lIHRyYW5zZm9ybXMuIElmIG5vdCBlbXB0eSwgY29udGVudHMgd2lsbCBiZSBvdmVyd3JpdHRlbi5cclxuICAgICAqL1xyXG4gICAgZmlsbFRyYW5zZm9ybXNBcnJheSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wQXJyYXkgPSBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmICh0ZW1wQXJyYXkubGVuZ3RoICE9PSBhcnJheS5sZW5ndGgpIHRlbXBBcnJheS5sZW5ndGggPSBhcnJheS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lVHJhbnNmb3JtID0gdGhpcy5nZXRTY2VuZShpKS50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2VuZVRyYW5zZm9ybUVsZW1lbnRzID0gc2NlbmVUcmFuc2Zvcm0uZWxlbWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wQXJyYXlbaSAqIDE2ICsgal0gPSBzY2VuZVRyYW5zZm9ybUVsZW1lbnRzW2pdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFycmF5LnNldCh0ZW1wQXJyYXkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIGNvbXB1dGVEaXN0YW5jZXNPbkdQVSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChtb2RlbFZpZXdQcm9qTWF0cml4LCBvdXRDb21wdXRlZERpc3RhbmNlcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXIpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFvID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlRFWF9BUlJBWV9CSU5ESU5HKTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFByb2dyYW0gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQ1VSUkVOVF9QUk9HUkFNKTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFByb2dyYW1EZWxldGVkID0gY3VycmVudFByb2dyYW0gPyBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKGN1cnJlbnRQcm9ncmFtLCBnbC5ERUxFVEVfU1RBVFVTKSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKTtcclxuICAgICAgICAgICAgZ2wudXNlUHJvZ3JhbSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0pO1xyXG5cclxuICAgICAgICAgICAgZ2wuZW5hYmxlKGdsLlJBU1RFUklaRVJfRElTQ0FSRCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBNYXRyaXguY29weSh0aGlzLmdldFNjZW5lKGkpLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5wcmVtdWx0aXBseShtb2RlbFZpZXdQcm9qTWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaVRlbXBNYXRyaXggPSBTcGxhdE1lc2guZ2V0SW50ZWdlck1hdHJpeEFycmF5KHRlbXBNYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpVHJhbnNmb3JtID0gW2lUZW1wTWF0cml4WzJdLCBpVGVtcE1hdHJpeFs2XSwgaVRlbXBNYXRyaXhbMTBdLCBpVGVtcE1hdHJpeFsxNF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtNGkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay50cmFuc2Zvcm1zTG9jc1tpXSwgaVRyYW5zZm9ybVswXSwgaVRyYW5zZm9ybVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlUcmFuc2Zvcm1bMl0sIGlUcmFuc2Zvcm1bM10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay50cmFuc2Zvcm1zTG9jc1tpXSwgZmFsc2UsIHRlbXBNYXRyaXguZWxlbWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaVZpZXdQcm9qTWF0cml4ID0gU3BsYXRNZXNoLmdldEludGVnZXJNYXRyaXhBcnJheShtb2RlbFZpZXdQcm9qTWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpVmlld1Byb2ogPSBbaVZpZXdQcm9qTWF0cml4WzJdLCBpVmlld1Byb2pNYXRyaXhbNl0sIGlWaWV3UHJvak1hdHJpeFsxMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0zaSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm1vZGVsVmlld1Byb2pMb2MsIGlWaWV3UHJvalswXSwgaVZpZXdQcm9qWzFdLCBpVmlld1Byb2pbMl0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2aWV3UHJvaiA9IFttb2RlbFZpZXdQcm9qTWF0cml4LmVsZW1lbnRzWzJdLCBtb2RlbFZpZXdQcm9qTWF0cml4LmVsZW1lbnRzWzZdLCBtb2RlbFZpZXdQcm9qTWF0cml4LmVsZW1lbnRzWzEwXV07XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNmKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2subW9kZWxWaWV3UHJvakxvYywgdmlld1Byb2pbMF0sIHZpZXdQcm9qWzFdLCB2aWV3UHJvalsyXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIpO1xyXG4gICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliSVBvaW50ZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jLCA0LCBnbC5JTlQsIDAsIDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MsIDQsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNMb2MpO1xyXG4gICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliSVBvaW50ZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNMb2MsIDEsIGdsLlVOU0lHTkVEX0lOVCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdsLmJpbmRUcmFuc2Zvcm1GZWVkYmFjayhnbC5UUkFOU0ZPUk1fRkVFREJBQ0ssIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suaWQpO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyQmFzZShnbC5UUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSLCAwLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlcik7XHJcblxyXG4gICAgICAgICAgICBnbC5iZWdpblRyYW5zZm9ybUZlZWRiYWNrKGdsLlBPSU5UUyk7XHJcbiAgICAgICAgICAgIGdsLmRyYXdBcnJheXMoZ2wuUE9JTlRTLCAwLCB0aGlzLmdldFNwbGF0Q291bnQoKSk7XHJcbiAgICAgICAgICAgIGdsLmVuZFRyYW5zZm9ybUZlZWRiYWNrKCk7XHJcblxyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyQmFzZShnbC5UUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSLCAwLCBudWxsKTtcclxuICAgICAgICAgICAgZ2wuYmluZFRyYW5zZm9ybUZlZWRiYWNrKGdsLlRSQU5TRk9STV9GRUVEQkFDSywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICBnbC5kaXNhYmxlKGdsLlJBU1RFUklaRVJfRElTQ0FSRCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzeW5jID0gZ2wuZmVuY2VTeW5jKGdsLlNZTkNfR1BVX0NPTU1BTkRTX0NPTVBMRVRFLCAwKTtcclxuICAgICAgICAgICAgZ2wuZmx1c2goKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tTeW5jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYml0ZmxhZ3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBnbC5jbGllbnRXYWl0U3luYyhzeW5jLCBiaXRmbGFncywgdGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGdsLlRJTUVPVVRfRVhQSVJFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0ID0gc2V0VGltZW91dChjaGVja1N5bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBnbC5XQUlUX0ZBSUxFRDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBuZXZlciBnZXQgaGVyZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVN5bmMoc3luYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbyA9IGdsLmdldFBhcmFtZXRlcihnbC5WRVJURVhfQVJSQVlfQklORElORyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCAwLCBvdXRDb21wdXRlZERpc3RhbmNlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFZhbykgZ2wuYmluZFZlcnRleEFycmF5KGN1cnJlbnRWYW8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dCA9IHNldFRpbWVvdXQoY2hlY2tTeW5jKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFByb2dyYW0gJiYgY3VycmVudFByb2dyYW1EZWxldGVkICE9PSB0cnVlKSBnbC51c2VQcm9ncmFtKGN1cnJlbnRQcm9ncmFtKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRWYW8pIGdsLmJpbmRWZXJ0ZXhBcnJheShjdXJyZW50VmFvKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2l2ZW4gYSBnbG9iYWwgc3BsYXQgaW5kZXgsIHJldHVybiBjb3JyZXNwb25kaW5nIGxvY2FsIGRhdGEgKHNwbGF0IGJ1ZmZlciwgaW5kZXggb2Ygc3BsYXQgaW4gdGhhdCBzcGxhdFxyXG4gICAgICogYnVmZmVyLCBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgdHJhbnNmb3JtKVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGdsb2JhbEluZGV4IEdsb2JhbCBzcGxhdCBpbmRleFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtc09iaiBPYmplY3QgaW4gd2hpY2ggdG8gc3RvcmUgbG9jYWwgZGF0YVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXR1cm5TY2VuZVRyYW5zZm9ybSBCeSBkZWZhdWx0LCB0aGUgdHJhbnNmb3JtIG9mIHRoZSBzY2VuZSB0byB3aGljaCB0aGUgc3BsYXQgYXQgJ2dsb2JhbEluZGV4JyBiZWxvbmdzIHdpbGwgYmVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWQgdmlhIHRoZSAnc2NlbmVUcmFuc2Zvcm0nIHByb3BlcnR5IG9mICdwYXJhbXNPYmonIG9ubHkgaWYgdGhlIHNwbGF0IG1lc2ggaXMgc3RhdGljLlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiAncmV0dXJuU2NlbmVUcmFuc2Zvcm0nIGlzIHRydWUsIHRoZSAnc2NlbmVUcmFuc2Zvcm0nIHByb3BlcnR5IHdpbGwgYWx3YXlzIGNvbnRhaW4gdGhlIHNjZW5lXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSwgYW5kIGlmICdyZXR1cm5TY2VuZVRyYW5zZm9ybScgaXMgZmFsc2UsIHRoZSAnc2NlbmVUcmFuc2Zvcm0nIHByb3BlcnR5IHdpbGwgYWx3YXlzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIG51bGwuXHJcbiAgICAgKi9cclxuICAgIGdldExvY2FsU3BsYXRQYXJhbWV0ZXJzKGdsb2JhbEluZGV4LCBwYXJhbXNPYmosIHJldHVyblNjZW5lVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgaWYgKHJldHVyblNjZW5lVHJhbnNmb3JtID09PSB1bmRlZmluZWQgfHwgcmV0dXJuU2NlbmVUcmFuc2Zvcm0gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuU2NlbmVUcmFuc2Zvcm0gPSB0aGlzLmR5bmFtaWNNb2RlID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJhbXNPYmouc3BsYXRCdWZmZXIgPSB0aGlzLmdldFNwbGF0QnVmZmVyRm9yU3BsYXQoZ2xvYmFsSW5kZXgpO1xyXG4gICAgICAgIHBhcmFtc09iai5sb2NhbEluZGV4ID0gdGhpcy5nZXRTcGxhdExvY2FsSW5kZXgoZ2xvYmFsSW5kZXgpO1xyXG4gICAgICAgIHBhcmFtc09iai5zY2VuZVRyYW5zZm9ybSA9IHJldHVyblNjZW5lVHJhbnNmb3JtID8gdGhpcy5nZXRTY2VuZVRyYW5zZm9ybUZvclNwbGF0KGdsb2JhbEluZGV4KSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaWxsIGFycmF5cyB3aXRoIHNwbGF0IGRhdGEgYW5kIGFwcGx5IHRyYW5zZm9ybXMgaWYgYXBwcm9wcmlhdGUuIEVhY2ggYXJyYXkgaXMgb3B0aW9uYWwuXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gY292YXJpYW5jZXMgVGFyZ2V0IHN0b3JhZ2UgZm9yIHNwbGF0IGNvdmFyaWFuY2VzXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gc2NhbGVzIFRhcmdldCBzdG9yYWdlIGZvciBzcGxhdCBzY2FsZXNcclxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSByb3RhdGlvbnMgVGFyZ2V0IHN0b3JhZ2UgZm9yIHNwbGF0IHJvdGF0aW9uc1xyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGNlbnRlcnMgVGFyZ2V0IHN0b3JhZ2UgZm9yIHNwbGF0IGNlbnRlcnNcclxuICAgICAqIEBwYXJhbSB7VWludDhBcnJheX0gY29sb3JzIFRhcmdldCBzdG9yYWdlIGZvciBzcGxhdCBjb2xvcnNcclxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSBzcGhlcmljYWxIYXJtb25pY3MgVGFyZ2V0IHN0b3JhZ2UgZm9yIHNwaGVyaWNhbCBoYXJtb25pY3NcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXBwbHlTY2VuZVRyYW5zZm9ybSBCeSBkZWZhdWx0LCBzY2VuZSB0cmFuc2Zvcm1zIGFyZSBhcHBsaWVkIHRvIHJlbGV2YW50IHNwbGF0IGRhdGEgb25seSBpZiB0aGUgc3BsYXQgbWVzaCBpc1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRpYy4gSWYgJ2FwcGx5U2NlbmVUcmFuc2Zvcm0nIGlzIHRydWUsIHNjZW5lIHRyYW5zZm9ybXMgd2lsbCBhbHdheXMgYmUgYXBwbGllZCBhbmQgaWZcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdCBpcyBmYWxzZSwgdGhleSB3aWxsIG5ldmVyIGJlIGFwcGxpZWQuIElmIHVuZGVmaW5lZCwgdGhlIGRlZmF1bHQgYmVoYXZpb3Igd2lsbCBhcHBseS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCBUaGUgY29tcHJlc3Npb24gbGV2ZWwgZm9yIGNvdmFyaWFuY2VzIGluIHRoZSBkZXN0aW5hdGlvbiBhcnJheVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwaGVyaWNhbEhhcm1vbmljc0NvbXByZXNzaW9uTGV2ZWwgVGhlIGNvbXByZXNzaW9uIGxldmVsIGZvciBzcGhlcmljYWwgaGFybW9uaWNzIGluIHRoZSBkZXN0aW5hdGlvbiBhcnJheVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNyY1N0YXJ0IFRoZSBzdGFydCBsb2NhdGlvbiBmcm9tIHdoaWNoIHRvIHB1bGwgc291cmNlIGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcmNFbmQgVGhlIGVuZCBsb2NhdGlvbiBmcm9tIHdoaWNoIHRvIHB1bGwgc291cmNlIGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXN0U3RhcnQgVGhlIHN0YXJ0IGxvY2F0aW9uIGZyb20gd2hpY2ggdG8gd3JpdGUgZGF0YVxyXG4gICAgICovXHJcbiAgICBmaWxsU3BsYXREYXRhQXJyYXlzKGNvdmFyaWFuY2VzLCBzY2FsZXMsIHJvdGF0aW9ucywgY2VudGVycywgY29sb3JzLCBzcGhlcmljYWxIYXJtb25pY3MsIGZsYW1lTW9kZWxQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseVNjZW5lVHJhbnNmb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9IDAsIHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID0gMCwgc3BoZXJpY2FsSGFybW9uaWNzQ29tcHJlc3Npb25MZXZlbCA9IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY1N0YXJ0LCBzcmNFbmQsIGRlc3RTdGFydCA9IDAsIHNjZW5lSW5kZXgpIHtcclxuICAgICAgICBjb25zdCBzY2FsZU92ZXJyaWRlID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBzY2FsZU92ZXJyaWRlLnggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgc2NhbGVPdmVycmlkZS55ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCkge1xyXG4gICAgICAgICAgICBzY2FsZU92ZXJyaWRlLnogPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2NhbGVPdmVycmlkZS56ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGVtcFRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG4gICAgICAgIGxldCBzdGFydFNjZW5lSW5kZXggPSAwO1xyXG4gICAgICAgIGxldCBlbmRTY2VuZUluZGV4ID0gdGhpcy5zY2VuZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICBpZiAoc2NlbmVJbmRleCAhPT0gdW5kZWZpbmVkICYmIHNjZW5lSW5kZXggIT09IG51bGwgJiYgc2NlbmVJbmRleCA+PSAwICYmIHNjZW5lSW5kZXggPD0gdGhpcy5zY2VuZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0U2NlbmVJbmRleCA9IHNjZW5lSW5kZXg7XHJcbiAgICAgICAgICAgIGVuZFNjZW5lSW5kZXggPSBzY2VuZUluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRTY2VuZUluZGV4OyBpIDw9IGVuZFNjZW5lSW5kZXg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYXBwbHlTY2VuZVRyYW5zZm9ybSA9PT0gdW5kZWZpbmVkIHx8IGFwcGx5U2NlbmVUcmFuc2Zvcm0gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFwcGx5U2NlbmVUcmFuc2Zvcm0gPSB0aGlzLmR5bmFtaWNNb2RlID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gc2NlbmUuc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgICAgIGxldCBzY2VuZVRyYW5zZm9ybTtcclxuICAgICAgICAgICAgaWYgKGFwcGx5U2NlbmVUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2NlbmVUcmFuc2Zvcm0oaSwgdGVtcFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICBzY2VuZVRyYW5zZm9ybSA9IHRlbXBUcmFuc2Zvcm07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBzcGxhdEJ1ZmZlci5maWxsU3BsYXRDb3ZhcmlhbmNlQXJyYXkoY292YXJpYW5jZXMsIHNjZW5lVHJhbnNmb3JtLCBzcmNTdGFydCwgc3JjRW5kLCBkZXN0U3RhcnQsIGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2NhbGVzIHx8IHJvdGF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzY2FsZXMgfHwgIXJvdGF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3BsYXRNZXNoOjpmaWxsU3BsYXREYXRhQXJyYXlzKCkgLT4gXCJzY2FsZXNcIiBhbmQgXCJyb3RhdGlvbnNcIiBtdXN0IGJvdGggYmUgdmFsaWQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzcGxhdEJ1ZmZlci5maWxsU3BsYXRTY2FsZVJvdGF0aW9uQXJyYXkoc2NhbGVzLCByb3RhdGlvbnMsIHNjZW5lVHJhbnNmb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1N0YXJ0LCBzcmNFbmQsIGRlc3RTdGFydCwgc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwsIHNjYWxlT3ZlcnJpZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjZW50ZXJzKSBzcGxhdEJ1ZmZlci5maWxsU3BsYXRDZW50ZXJBcnJheSh0aGlzLm1vcnBoZWRNZXNoLCBjZW50ZXJzLCBzY2VuZVRyYW5zZm9ybSwgc3JjU3RhcnQsIHNyY0VuZCwgZGVzdFN0YXJ0KTtcclxuICAgICAgICAgICAgaWYgKGNvbG9ycykgc3BsYXRCdWZmZXIuZmlsbFNwbGF0Q29sb3JBcnJheShjb2xvcnMsIHNjZW5lLm1pbmltdW1BbHBoYSwgc3JjU3RhcnQsIHNyY0VuZCwgZGVzdFN0YXJ0KTtcclxuICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljcykge1xyXG4gICAgICAgICAgICAgICAgc3BsYXRCdWZmZXIuZmlsbFNwaGVyaWNhbEhhcm1vbmljc0FycmF5KHNwaGVyaWNhbEhhcm1vbmljcywgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVUcmFuc2Zvcm0sIHNyY1N0YXJ0LCBzcmNFbmQsIGRlc3RTdGFydCwgc3BoZXJpY2FsSGFybW9uaWNzQ29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlc3RTdGFydCArPSBzcGxhdEJ1ZmZlci5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vcnBoZWRNZXNoO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IHNwbGF0IGNlbnRlcnMsIHdoaWNoIGFyZSBmbG9hdGluZyBwb2ludCB2YWx1ZXMsIHRvIGFuIGFycmF5IG9mIGludGVnZXJzIGFuZCBtdWx0aXBseVxyXG4gICAgICogZWFjaCBieSAxMDAwLiBDZW50ZXJzIHdpbGwgZ2V0IHRyYW5zZm9ybWVkIGFzIGFwcHJvcHJpYXRlIGJlZm9yZSBjb252ZXJzaW9uIHRvIGludGVnZXIuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIGluZGV4IGF0IHdoaWNoIHRvIHN0YXJ0IHJldHJpZXZpbmcgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgaW5kZXggYXQgd2hpY2ggdG8gc3RvcCByZXRyaWV2aW5nIGRhdGFcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcGFkRm91ciBFbmZvcmNlIGFsaWdubWVudCBvZiA0IGJ5IGluc2VydGluZyBhIDEgYWZ0ZXIgZXZlcnkgMyB2YWx1ZXNcclxuICAgICAqIEByZXR1cm4ge0ludDMyQXJyYXl9XHJcbiAgICAgKi9cclxuICAgIGdldEludGVnZXJDZW50ZXJzKHN0YXJ0LCBlbmQsIHBhZEZvdXIgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSBlbmQgLSBzdGFydCArIDE7XHJcbiAgICAgICAgY29uc3QgZmxvYXRDZW50ZXJzID0gbmV3IEZsb2F0MzJBcnJheShzcGxhdENvdW50ICogMyk7XHJcbiAgICAgICAgdGhpcy5maWxsU3BsYXREYXRhQXJyYXlzKG51bGwsIG51bGwsIG51bGwsIGZsb2F0Q2VudGVycywgbnVsbCwgbnVsbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzdGFydCk7XHJcbiAgICAgICAgbGV0IGludENlbnRlcnM7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudENvdW50ID0gcGFkRm91ciA/IDQgOiAzO1xyXG4gICAgICAgIGludENlbnRlcnMgPSBuZXcgSW50MzJBcnJheShzcGxhdENvdW50ICogY29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMzsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICBpbnRDZW50ZXJzW2kgKiBjb21wb25lbnRDb3VudCArIHRdID0gTWF0aC5yb3VuZChmbG9hdENlbnRlcnNbaSAqIDMgKyB0XSAqIDEwMDAuMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhZEZvdXIpIGludENlbnRlcnNbaSAqIGNvbXBvbmVudENvdW50ICsgM10gPSAxMDAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW50Q2VudGVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2Ygc3BsYXQgY2VudGVycywgdHJhbnNmb3JtZWQgYXMgYXBwcm9wcmlhdGUsIG9wdGlvbmFsbHkgcGFkZGVkLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBpbmRleCBhdCB3aGljaCB0byBzdGFydCByZXRyaWV2aW5nIGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGluZGV4IGF0IHdoaWNoIHRvIHN0b3AgcmV0cmlldmluZyBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBhZEZvdXIgRW5mb3JjZSBhbGlnbm1lbnQgb2YgNCBieSBpbnNlcnRpbmcgYSAxIGFmdGVyIGV2ZXJ5IDMgdmFsdWVzXHJcbiAgICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XHJcbiAgICAgKi9cclxuICAgIGdldEZsb2F0Q2VudGVycyhzdGFydCwgZW5kLCBwYWRGb3VyID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gZW5kIC0gc3RhcnQgKyAxO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0Q2VudGVycyA9IG5ldyBGbG9hdDMyQXJyYXkoc3BsYXRDb3VudCAqIDMpO1xyXG4gICAgICAgIHRoaXMuZmlsbFNwbGF0RGF0YUFycmF5cyhudWxsLCBudWxsLCBudWxsLCBmbG9hdENlbnRlcnMsIG51bGwsIG51bGwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgc3RhcnQpO1xyXG4gICAgICAgIGlmICghcGFkRm91cikgcmV0dXJuIGZsb2F0Q2VudGVycztcclxuICAgICAgICBsZXQgcGFkZGVkRmxvYXRDZW50ZXJzID0gbmV3IEZsb2F0MzJBcnJheShzcGxhdENvdW50ICogNCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCAzOyB0KyspIHtcclxuICAgICAgICAgICAgICAgIHBhZGRlZEZsb2F0Q2VudGVyc1tpICogNCArIHRdID0gZmxvYXRDZW50ZXJzW2kgKiAzICsgdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGFkZGVkRmxvYXRDZW50ZXJzW2kgKiA0ICsgM10gPSAxLjA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwYWRkZWRGbG9hdENlbnRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGNlbnRlciBmb3IgYSBzcGxhdCwgdHJhbnNmb3JtZWQgYXMgYXBwcm9wcmlhdGUuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ2xvYmFsSW5kZXggR2xvYmFsIGluZGV4IG9mIHNwbGF0XHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLlZlY3RvcjN9IG91dENlbnRlciBUSFJFRS5WZWN0b3IzIGluc3RhbmNlIGluIHdoaWNoIHRvIHN0b3JlIHNwbGF0IGNlbnRlclxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhcHBseVNjZW5lVHJhbnNmb3JtIEJ5IGRlZmF1bHQsIGlmIHRoZSBzcGxhdCBtZXNoIGlzIHN0YXRpYywgdGhlIHRyYW5zZm9ybSBvZiB0aGUgc2NlbmUgdG8gd2hpY2ggdGhlIHNwbGF0IGF0XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dsb2JhbEluZGV4JyBiZWxvbmdzIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgc3BsYXQgY2VudGVyLiBJZiAnYXBwbHlTY2VuZVRyYW5zZm9ybScgaXMgdHJ1ZSxcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgc2NlbmUgdHJhbnNmb3JtIHdpbGwgYWx3YXlzIGJlIGFwcGxpZWQgYW5kIGlmICdhcHBseVNjZW5lVHJhbnNmb3JtJyBpcyBmYWxzZSwgdGhlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUgdHJhbnNmb3JtIHdpbGwgbmV2ZXIgYmUgYXBwbGllZC4gSWYgdW5kZWZpbmVkLCB0aGUgZGVmYXVsdCBiZWhhdmlvciB3aWxsIGFwcGx5LlxyXG4gICAgICovXHJcbiAgICBnZXRTcGxhdENlbnRlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbXNPYmogPSB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG1vcnBoZWRNZXNoLCBnbG9iYWxJbmRleCwgb3V0Q2VudGVyLCBhcHBseVNjZW5lVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxTcGxhdFBhcmFtZXRlcnMoZ2xvYmFsSW5kZXgsIHBhcmFtc09iaiwgYXBwbHlTY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIHBhcmFtc09iai5zcGxhdEJ1ZmZlci5nZXRTcGxhdENlbnRlcihtb3JwaGVkTWVzaCwgcGFyYW1zT2JqLmxvY2FsSW5kZXgsIG91dENlbnRlciwgcGFyYW1zT2JqLnNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgc2NhbGUgYW5kIHJvdGF0aW9uIGZvciBhIHNwbGF0LCB0cmFuc2Zvcm1lZCBhcyBhcHByb3ByaWF0ZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBnbG9iYWxJbmRleCBHbG9iYWwgaW5kZXggb2Ygc3BsYXRcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuVmVjdG9yM30gb3V0U2NhbGUgVEhSRUUuVmVjdG9yMyBpbnN0YW5jZSBpbiB3aGljaCB0byBzdG9yZSBzcGxhdCBzY2FsZVxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5RdWF0ZXJuaW9ufSBvdXRSb3RhdGlvbiBUSFJFRS5RdWF0ZXJuaW9uIGluc3RhbmNlIGluIHdoaWNoIHRvIHN0b3JlIHNwbGF0IHJvdGF0aW9uXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFwcGx5U2NlbmVUcmFuc2Zvcm0gQnkgZGVmYXVsdCwgaWYgdGhlIHNwbGF0IG1lc2ggaXMgc3RhdGljLCB0aGUgdHJhbnNmb3JtIG9mIHRoZSBzY2VuZSB0byB3aGljaCB0aGUgc3BsYXQgYXRcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2xvYmFsSW5kZXgnIGJlbG9uZ3Mgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBzcGxhdCBzY2FsZSBhbmQgcm90YXRpb24uIElmXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FwcGx5U2NlbmVUcmFuc2Zvcm0nIGlzIHRydWUsIHRoZSBzY2VuZSB0cmFuc2Zvcm0gd2lsbCBhbHdheXMgYmUgYXBwbGllZCBhbmQgaWZcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXBwbHlTY2VuZVRyYW5zZm9ybScgaXMgZmFsc2UsIHRoZSBzY2VuZSB0cmFuc2Zvcm0gd2lsbCBuZXZlciBiZSBhcHBsaWVkLiBJZiB1bmRlZmluZWQsXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGRlZmF1bHQgYmVoYXZpb3Igd2lsbCBhcHBseS5cclxuICAgICAqL1xyXG4gICAgZ2V0U3BsYXRTY2FsZUFuZFJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmFtc09iaiA9IHt9O1xyXG4gICAgICAgIGNvbnN0IHNjYWxlT3ZlcnJpZGUgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZ2xvYmFsSW5kZXgsIG91dFNjYWxlLCBvdXRSb3RhdGlvbiwgYXBwbHlTY2VuZVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB0aGlzLmdldExvY2FsU3BsYXRQYXJhbWV0ZXJzKGdsb2JhbEluZGV4LCBwYXJhbXNPYmosIGFwcGx5U2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICBzY2FsZU92ZXJyaWRlLnggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHNjYWxlT3ZlcnJpZGUueSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgc2NhbGVPdmVycmlkZS56ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5Ud29EKSBzY2FsZU92ZXJyaWRlLnogPSAwO1xyXG4gICAgICAgICAgICBwYXJhbXNPYmouc3BsYXRCdWZmZXIuZ2V0U3BsYXRTY2FsZUFuZFJvdGF0aW9uKHBhcmFtc09iai5sb2NhbEluZGV4LCBvdXRTY2FsZSwgb3V0Um90YXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zT2JqLnNjZW5lVHJhbnNmb3JtLCBzY2FsZU92ZXJyaWRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY29sb3IgZm9yIGEgc3BsYXQuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ2xvYmFsSW5kZXggR2xvYmFsIGluZGV4IG9mIHNwbGF0XHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLlZlY3RvcjR9IG91dENvbG9yIFRIUkVFLlZlY3RvcjQgaW5zdGFuY2UgaW4gd2hpY2ggdG8gc3RvcmUgc3BsYXQgY29sb3JcclxuICAgICAqL1xyXG4gICAgZ2V0U3BsYXRDb2xvciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbXNPYmogPSB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGdsb2JhbEluZGV4LCBvdXRDb2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLmdldExvY2FsU3BsYXRQYXJhbWV0ZXJzKGdsb2JhbEluZGV4LCBwYXJhbXNPYmopO1xyXG4gICAgICAgICAgICBwYXJhbXNPYmouc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb2xvcihwYXJhbXNPYmoubG9jYWxJbmRleCwgb3V0Q29sb3IpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcmUgdGhlIHRyYW5zZm9ybSBvZiB0aGUgc2NlbmUgYXQgJ3NjZW5lSW5kZXgnIGluICdvdXRUcmFuc2Zvcm0nLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjZW5lSW5kZXggSW5kZXggb2YgdGhlIGRlc2lyZWQgc2NlbmVcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuTWF0cml4NH0gb3V0VHJhbnNmb3JtIEluc3RhbmNlIG9mIFRIUkVFLk1hdHJpeDQgaW4gd2hpY2ggdG8gc3RvcmUgdGhlIHNjZW5lJ3MgdHJhbnNmb3JtXHJcbiAgICAgKi9cclxuICAgIGdldFNjZW5lVHJhbnNmb3JtKHNjZW5lSW5kZXgsIG91dFRyYW5zZm9ybSkge1xyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5nZXRTY2VuZShzY2VuZUluZGV4KTtcclxuICAgICAgICBzY2VuZS51cGRhdGVUcmFuc2Zvcm0odGhpcy5keW5hbWljTW9kZSk7XHJcbiAgICAgICAgb3V0VHJhbnNmb3JtLmNvcHkoc2NlbmUudHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgc2NlbmUgYXQgJ3NjZW5lSW5kZXgnLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNjZW5lSW5kZXggSW5kZXggb2YgdGhlIGRlc2lyZWQgc2NlbmVcclxuICAgICAqIEByZXR1cm4ge1NwbGF0U2NlbmV9XHJcbiAgICAgKi9cclxuICAgIGdldFNjZW5lKHNjZW5lSW5kZXgpIHtcclxuICAgICAgICBpZiAoc2NlbmVJbmRleCA8IDAgfHwgc2NlbmVJbmRleCA+PSB0aGlzLnNjZW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTcGxhdE1lc2g6OmdldFNjZW5lKCkgLT4gSW52YWxpZCBzY2VuZSBpbmRleC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVzW3NjZW5lSW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNjZW5lQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdEJ1ZmZlckZvclNwbGF0KGdsb2JhbEluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2NlbmUodGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwW2dsb2JhbEluZGV4XSkuc3BsYXRCdWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2NlbmVJbmRleEZvclNwbGF0KGdsb2JhbEluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcFtnbG9iYWxJbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2NlbmVUcmFuc2Zvcm1Gb3JTcGxhdChnbG9iYWxJbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFNjZW5lKHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcFtnbG9iYWxJbmRleF0pLnRyYW5zZm9ybTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdExvY2FsSW5kZXgoZ2xvYmFsSW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9Mb2NhbFNwbGF0SW5kZXhNYXBbZ2xvYmFsSW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRJbnRlZ2VyTWF0cml4QXJyYXkobWF0cml4KSB7XHJcbiAgICAgICAgY29uc3QgbWF0cml4RWxlbWVudHMgPSBtYXRyaXguZWxlbWVudHM7XHJcbiAgICAgICAgY29uc3QgaW50TWF0cml4QXJyYXkgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgaW50TWF0cml4QXJyYXlbaV0gPSBNYXRoLnJvdW5kKG1hdHJpeEVsZW1lbnRzW2ldICogMTAwMC4wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGludE1hdHJpeEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXB1dGVCb3VuZGluZ0JveChhcHBseVNjZW5lVHJhbnNmb3JtcyA9IGZhbHNlLCBzY2VuZUluZGV4KSB7XHJcbiAgICAgICAgbGV0IHNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICBpZiAoc2NlbmVJbmRleCAhPT0gdW5kZWZpbmVkICYmIHNjZW5lSW5kZXggIT09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHNjZW5lSW5kZXggPCAwIHx8IHNjZW5lSW5kZXggPj0gdGhpcy5zY2VuZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NwbGF0TWVzaDo6Y29tcHV0ZUJvdW5kaW5nQm94KCkgLT4gSW52YWxpZCBzY2VuZSBpbmRleC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzcGxhdENvdW50ID0gdGhpcy5zY2VuZXNbc2NlbmVJbmRleF0uc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmxvYXRDZW50ZXJzID0gbmV3IEZsb2F0MzJBcnJheShzcGxhdENvdW50ICogMyk7XHJcbiAgICAgICAgdGhpcy5maWxsU3BsYXREYXRhQXJyYXlzKG51bGwsIG51bGwsIG51bGwsIGZsb2F0Q2VudGVycywgbnVsbCwgbnVsbCwgYXBwbHlTY2VuZVRyYW5zZm9ybXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgc2NlbmVJbmRleCk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pbiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBpICogMztcclxuICAgICAgICAgICAgY29uc3QgeCA9IGZsb2F0Q2VudGVyc1tvZmZzZXRdO1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gZmxvYXRDZW50ZXJzW29mZnNldCArIDFdO1xyXG4gICAgICAgICAgICBjb25zdCB6ID0gZmxvYXRDZW50ZXJzW29mZnNldCArIDJdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB4IDwgbWluLngpIG1pbi54ID0geDtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgeSA8IG1pbi55KSBtaW4ueSA9IHk7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHogPCBtaW4ueikgbWluLnogPSB6O1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB4ID4gbWF4LngpIG1heC54ID0geDtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgeSA+IG1heC55KSBtYXgueSA9IHk7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHogPiBtYXgueikgbWF4LnogPSB6O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBCb3gzKG1pbiwgbWF4KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBEaXJlY3RMb2FkRXJyb3JcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogTWlub3IgZW5oYW5jZW1lbnQ6IEFkZGVkIHRoaXMubmFtZSBwcm9wZXJ0eSBmb3IgYmV0dGVyIGVycm9yIGlkZW50aWZpY2F0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIERpcmVjdExvYWRFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKG1zZykge1xyXG4gICAgICAgIHN1cGVyKG1zZyk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ0RpcmVjdExvYWRFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIFVuY29tcHJlc3NlZFNwbGF0QXJyYXlcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gdGhlIG9yaWdpbmFsLlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUgfSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuXHJcbmNvbnN0IEJBU0VfQ09NUE9ORU5UX0NPVU5UID0gMTQ7XHJcblxyXG5leHBvcnQgY2xhc3MgVW5jb21wcmVzc2VkU3BsYXRBcnJheSB7XHJcblxyXG4gICAgc3RhdGljIE9GRlNFVCA9IHtcclxuICAgICAgICBYOiAwLFxyXG4gICAgICAgIFk6IDEsXHJcbiAgICAgICAgWjogMixcclxuICAgICAgICBTQ0FMRTA6IDMsXHJcbiAgICAgICAgU0NBTEUxOiA0LFxyXG4gICAgICAgIFNDQUxFMjogNSxcclxuICAgICAgICBST1RBVElPTjA6IDYsXHJcbiAgICAgICAgUk9UQVRJT04xOiA3LFxyXG4gICAgICAgIFJPVEFUSU9OMjogOCxcclxuICAgICAgICBST1RBVElPTjM6IDksXHJcbiAgICAgICAgRkRDMDogMTAsXHJcbiAgICAgICAgRkRDMTogMTEsXHJcbiAgICAgICAgRkRDMjogMTIsXHJcbiAgICAgICAgT1BBQ0lUWTogMTMsXHJcbiAgICAgICAgRlJDMDogMTQsXHJcbiAgICAgICAgRlJDMTogMTUsXHJcbiAgICAgICAgRlJDMjogMTYsXHJcbiAgICAgICAgRlJDMzogMTcsXHJcbiAgICAgICAgRlJDNDogMTgsXHJcbiAgICAgICAgRlJDNTogMTksXHJcbiAgICAgICAgRlJDNjogMjAsXHJcbiAgICAgICAgRlJDNzogMjEsXHJcbiAgICAgICAgRlJDODogMjIsXHJcbiAgICAgICAgRlJDOTogMjMsXHJcbiAgICAgICAgRlJDMTA6IDI0LFxyXG4gICAgICAgIEZSQzExOiAyNSxcclxuICAgICAgICBGUkMxMjogMjYsXHJcbiAgICAgICAgRlJDMTM6IDI3LFxyXG4gICAgICAgIEZSQzE0OiAyOCxcclxuICAgICAgICBGUkMxNTogMjksXHJcbiAgICAgICAgRlJDMTY6IDMwLFxyXG4gICAgICAgIEZSQzE3OiAzMSxcclxuICAgICAgICBGUkMxODogMzIsXHJcbiAgICAgICAgRlJDMTk6IDMzLFxyXG4gICAgICAgIEZSQzIwOiAzNCxcclxuICAgICAgICBGUkMyMTogMzUsXHJcbiAgICAgICAgRlJDMjI6IDM2LFxyXG4gICAgICAgIEZSQzIzOiAzN1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU7XHJcbiAgICAgICAgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NDb3VudCA9IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlKHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudENvdW50ID0gdGhpcy5zcGhlcmljYWxIYXJtb25pY3NDb3VudCArIEJBU0VfQ09NUE9ORU5UX0NPVU5UO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljcyA9IG5ldyBBcnJheSh0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0NvdW50KS5maWxsKDApO1xyXG4gICAgICAgIHRoaXMuc3BsYXRzID0gW107XHJcbiAgICAgICAgdGhpcy5zcGxhdENvdW50ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlU3BsYXQoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgIGNvbnN0IGJhc2VTcGxhdCA9IFswLCAwLCAwLCAxLCAxLCAxLCAxLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcclxuICAgICAgICBsZXQgc2hFbnRyaWVzID0gZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoRW50cmllczsgaSsrKSBiYXNlU3BsYXQucHVzaCgwKTtcclxuICAgICAgICByZXR1cm4gYmFzZVNwbGF0O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNwbGF0KHNwbGF0KSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdHMucHVzaChzcGxhdCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdENvdW50Kys7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXQoaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGxhdHNbaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZERlZmF1bHRTcGxhdCgpIHtcclxuICAgICAgICBjb25zdCBuZXdTcGxhdCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuY3JlYXRlU3BsYXQodGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIHRoaXMuYWRkU3BsYXQobmV3U3BsYXQpO1xyXG4gICAgICAgIHJldHVybiBuZXdTcGxhdDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTcGxhdEZyb21Db21vbmVudHMoeCwgeSwgeiwgc2NhbGUwLCBzY2FsZTEsIHNjYWxlMiwgcm90MCwgcm90MSwgcm90Miwgcm90MywgciwgZywgYiwgb3BhY2l0eSwgLi4ucmVzdCkge1xyXG4gICAgICAgIGNvbnN0IG5ld1NwbGF0ID0gW3gsIHksIHosIHNjYWxlMCwgc2NhbGUxLCBzY2FsZTIsIHJvdDAsIHJvdDEsIHJvdDIsIHJvdDMsIHIsIGcsIGIsIG9wYWNpdHksIC4uLnRoaXMuZGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljc107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN0Lmxlbmd0aCAmJiBpIDwgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W2ldID0gcmVzdFtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRTcGxhdChuZXdTcGxhdCk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1NwbGF0O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNwbGF0RnJvbUFycmF5KHNyYywgc3JjSW5kZXgpIHtcclxuICAgICAgICBjb25zdCBzcmNTcGxhdCA9IHNyYy5zcGxhdHNbc3JjSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IG5ld1NwbGF0ID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5jcmVhdGVTcGxhdCh0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbXBvbmVudENvdW50ICYmIGkgPCBzcmNTcGxhdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtpXSA9IHNyY1NwbGF0W2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZFNwbGF0KG5ld1NwbGF0KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBTcGxhdEJ1ZmZlclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqIEltcG9ydCBwYXRocyBhZGp1c3RlZCBmb3IgZ3NwbGF0LWZsYW1lLWF2YXRhciBwYWNrYWdlIHN0cnVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBEYXRhVXRpbHMsIE1hdHJpeDMsIE1hdHJpeDQsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkgfSBmcm9tICcuL1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuanMnO1xyXG5pbXBvcnQgeyBjbGFtcCwgZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUsIERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2UsIGNvbnZlcnRCZXR3ZWVuQ29tcHJlc3Npb25MZXZlbHMgfSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29weSBieXRlcyBiZXR3ZWVuIGJ1ZmZlcnNcclxuICovXHJcbmNvbnN0IGNvcHlCZXR3ZWVuQnVmZmVycyA9IChzcmNCdWZmZXIsIHNyY09mZnNldCwgZGVzdEJ1ZmZlciwgZGVzdE9mZnNldCwgYnl0ZUNvdW50ID0gMCkgPT4ge1xyXG4gICAgY29uc3Qgc3JjID0gbmV3IFVpbnQ4QXJyYXkoc3JjQnVmZmVyLCBzcmNPZmZzZXQpO1xyXG4gICAgY29uc3QgZGVzdCA9IG5ldyBVaW50OEFycmF5KGRlc3RCdWZmZXIsIGRlc3RPZmZzZXQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ291bnQ7IGkrKykge1xyXG4gICAgICAgIGRlc3RbaV0gPSBzcmNbaV07XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBDb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGhlbHBlciBmdW5jdGlvbnNcclxuY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlID0gQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlO1xyXG5cclxuY29uc3QgdG9IYWxmRmxvYXQgPSBEYXRhVXRpbHMudG9IYWxmRmxvYXQuYmluZChEYXRhVXRpbHMpO1xyXG5jb25zdCBmcm9tSGFsZkZsb2F0ID0gRGF0YVV0aWxzLmZyb21IYWxmRmxvYXQuYmluZChEYXRhVXRpbHMpO1xyXG5cclxuY29uc3QgdG9VbmNvbXByZXNzZWRGbG9hdCA9IChmLCBjb21wcmVzc2lvbkxldmVsLCBpc1NIID0gZmFsc2UsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KSA9PiB7XHJcbiAgICBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmO1xyXG4gICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAxIHx8IGNvbXByZXNzaW9uTGV2ZWwgPT09IDIgJiYgIWlzU0gpIHtcclxuICAgICAgICByZXR1cm4gRGF0YVV0aWxzLmZyb21IYWxmRmxvYXQoZik7XHJcbiAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gZnJvbVVpbnQ4KGYsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHRvVWludDggPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICB2ID0gY2xhbXAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KTtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuIGNsYW1wKE1hdGguZmxvb3IoKHYgLSByYW5nZU1pbikgLyByYW5nZSAqIDI1NSksIDAsIDI1NSk7XHJcbn07XHJcblxyXG5jb25zdCBmcm9tVWludDggPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICBjb25zdCByYW5nZSA9IChyYW5nZU1heCAtIHJhbmdlTWluKTtcclxuICAgIHJldHVybiAodiAvIDI1NSAqIHJhbmdlICsgcmFuZ2VNaW4pO1xyXG59O1xyXG5cclxuY29uc3QgZnJvbUhhbGZGbG9hdFRvVWludDggPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICByZXR1cm4gdG9VaW50OChmcm9tSGFsZkZsb2F0KHYpLCByYW5nZU1pbiwgcmFuZ2VNYXgpO1xyXG59O1xyXG5cclxuY29uc3QgZnJvbVVpbnQ4VG9IYWxmRmxvYXQgPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICByZXR1cm4gdG9IYWxmRmxvYXQoZnJvbVVpbnQ4KHYsIHJhbmdlTWluLCByYW5nZU1heCkpO1xyXG59O1xyXG5cclxuY29uc3QgZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwgPSAoZGF0YVZpZXcsIGZsb2F0SW5kZXgsIGNvbXByZXNzaW9uTGV2ZWwsIGlzU0ggPSBmYWxzZSkgPT4ge1xyXG4gICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0RmxvYXQzMihmbG9hdEluZGV4ICogNCwgdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDEgfHwgY29tcHJlc3Npb25MZXZlbCA9PT0gMiAmJiAhaXNTSCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MTYoZmxvYXRJbmRleCAqIDIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDgoZmxvYXRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRCdWZmZXIge1xyXG5cclxuICAgIHN0YXRpYyBDdXJyZW50TWFqb3JWZXJzaW9uID0gMDtcclxuICAgIHN0YXRpYyBDdXJyZW50TWlub3JWZXJzaW9uID0gMTtcclxuXHJcbiAgICBzdGF0aWMgQ2VudGVyQ29tcG9uZW50Q291bnQgPSAzO1xyXG4gICAgc3RhdGljIFNjYWxlQ29tcG9uZW50Q291bnQgPSAzO1xyXG4gICAgc3RhdGljIFJvdGF0aW9uQ29tcG9uZW50Q291bnQgPSA0O1xyXG4gICAgc3RhdGljIENvbG9yQ29tcG9uZW50Q291bnQgPSA0O1xyXG4gICAgc3RhdGljIENvdmFyaWFuY2VDb21wb25lbnRDb3VudCA9IDY7XHJcblxyXG4gICAgc3RhdGljIFNwbGF0U2NhbGVPZmZzZXRGbG9hdCA9IDM7XHJcbiAgICBzdGF0aWMgU3BsYXRSb3RhdGlvbk9mZnNldEZsb2F0ID0gNjtcclxuXHJcbiAgICBzdGF0aWMgQ29tcHJlc3Npb25MZXZlbHMgPSB7XHJcbiAgICAgICAgMDoge1xyXG4gICAgICAgICAgICBCeXRlc1BlckNlbnRlcjogMTIsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyU2NhbGU6IDEyLFxyXG4gICAgICAgICAgICBCeXRlc1BlclJvdGF0aW9uOiAxNixcclxuICAgICAgICAgICAgQnl0ZXNQZXJDb2xvcjogNCxcclxuICAgICAgICAgICAgU2NhbGVPZmZzZXRCeXRlczogMTIsXHJcbiAgICAgICAgICAgIFJvdGF0aW9uZmZzZXRCeXRlczogMjQsXHJcbiAgICAgICAgICAgIENvbG9yT2Zmc2V0Qnl0ZXM6IDQwLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NPZmZzZXRCeXRlczogNDQsXHJcbiAgICAgICAgICAgIFNjYWxlUmFuZ2U6IDEsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyU3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50OiA0LFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NPZmZzZXRGbG9hdDogMTEsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXM6IHtcclxuICAgICAgICAgICAgICAgIDA6IHsgQnl0ZXNQZXJTcGxhdDogNDQgfSxcclxuICAgICAgICAgICAgICAgIDE6IHsgQnl0ZXNQZXJTcGxhdDogODAgfSxcclxuICAgICAgICAgICAgICAgIDI6IHsgQnl0ZXNQZXJTcGxhdDogMTQwIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIDE6IHtcclxuICAgICAgICAgICAgQnl0ZXNQZXJDZW50ZXI6IDYsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyU2NhbGU6IDYsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyUm90YXRpb246IDgsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyQ29sb3I6IDQsXHJcbiAgICAgICAgICAgIFNjYWxlT2Zmc2V0Qnl0ZXM6IDYsXHJcbiAgICAgICAgICAgIFJvdGF0aW9uZmZzZXRCeXRlczogMTIsXHJcbiAgICAgICAgICAgIENvbG9yT2Zmc2V0Qnl0ZXM6IDIwLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NPZmZzZXRCeXRlczogMjQsXHJcbiAgICAgICAgICAgIFNjYWxlUmFuZ2U6IDMyNzY3LFxyXG4gICAgICAgICAgICBCeXRlc1BlclNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudDogMixcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0RmxvYXQ6IDEyLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzOiB7XHJcbiAgICAgICAgICAgICAgICAwOiB7IEJ5dGVzUGVyU3BsYXQ6IDI0IH0sXHJcbiAgICAgICAgICAgICAgICAxOiB7IEJ5dGVzUGVyU3BsYXQ6IDQyIH0sXHJcbiAgICAgICAgICAgICAgICAyOiB7IEJ5dGVzUGVyU3BsYXQ6IDcyIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIDI6IHtcclxuICAgICAgICAgICAgQnl0ZXNQZXJDZW50ZXI6IDYsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyU2NhbGU6IDYsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyUm90YXRpb246IDgsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyQ29sb3I6IDQsXHJcbiAgICAgICAgICAgIFNjYWxlT2Zmc2V0Qnl0ZXM6IDYsXHJcbiAgICAgICAgICAgIFJvdGF0aW9uZmZzZXRCeXRlczogMTIsXHJcbiAgICAgICAgICAgIENvbG9yT2Zmc2V0Qnl0ZXM6IDIwLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NPZmZzZXRCeXRlczogMjQsXHJcbiAgICAgICAgICAgIFNjYWxlUmFuZ2U6IDMyNzY3LFxyXG4gICAgICAgICAgICBCeXRlc1BlclNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudDogMSxcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0RmxvYXQ6IDEyLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzOiB7XHJcbiAgICAgICAgICAgICAgICAwOiB7IEJ5dGVzUGVyU3BsYXQ6IDI0IH0sXHJcbiAgICAgICAgICAgICAgICAxOiB7IEJ5dGVzUGVyU3BsYXQ6IDMzIH0sXHJcbiAgICAgICAgICAgICAgICAyOiB7IEJ5dGVzUGVyU3BsYXQ6IDQ4IH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBDb3ZhcmlhbmNlU2l6ZUZsb2F0cyA9IDY7XHJcblxyXG4gICAgc3RhdGljIEhlYWRlclNpemVCeXRlcyA9IDQwOTY7XHJcbiAgICBzdGF0aWMgU2VjdGlvbkhlYWRlclNpemVCeXRlcyA9IDEwMjQ7XHJcblxyXG4gICAgc3RhdGljIEJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXMgPSAxMjtcclxuICAgIHN0YXRpYyBCdWNrZXRTdG9yYWdlU2l6ZUZsb2F0cyA9IDM7XHJcblxyXG4gICAgc3RhdGljIEJ1Y2tldEJsb2NrU2l6ZSA9IDUuMDtcclxuICAgIHN0YXRpYyBCdWNrZXRTaXplID0gMjU2O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGJ1ZmZlckRhdGEsIHNlY0xvYWRlZENvdW50c1RvTWF4ID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuY29uc3RydWN0RnJvbUJ1ZmZlcihidWZmZXJEYXRhLCBzZWNMb2FkZWRDb3VudHNUb01heCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1heFNwbGF0Q291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4U3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUoKSB7XHJcbiAgICAgICAgbGV0IG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW2ldO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBzZWN0aW9uLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA8IG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gc2VjdGlvbi5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCdWNrZXRJbmRleChzZWN0aW9uLCBsb2NhbFNwbGF0SW5kZXgpIHtcclxuICAgICAgICBsZXQgYnVja2V0SW5kZXg7XHJcbiAgICAgICAgY29uc3QgbWF4U3BsYXRJbmRleEluRnVsbEJ1Y2tldHMgPSBzZWN0aW9uLmZ1bGxCdWNrZXRDb3VudCAqIHNlY3Rpb24uYnVja2V0U2l6ZTtcclxuICAgICAgICBpZiAobG9jYWxTcGxhdEluZGV4IDwgbWF4U3BsYXRJbmRleEluRnVsbEJ1Y2tldHMpIHtcclxuICAgICAgICAgICAgYnVja2V0SW5kZXggPSBNYXRoLmZsb29yKGxvY2FsU3BsYXRJbmRleCAvIHNlY3Rpb24uYnVja2V0U2l6ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGJ1Y2tldFNwbGF0SW5kZXggPSBtYXhTcGxhdEluZGV4SW5GdWxsQnVja2V0cztcclxuICAgICAgICAgICAgYnVja2V0SW5kZXggPSBzZWN0aW9uLmZ1bGxCdWNrZXRDb3VudDtcclxuICAgICAgICAgICAgbGV0IHBhcnRpYWxseUZ1bGxCdWNrZXRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChidWNrZXRTcGxhdEluZGV4IDwgc2VjdGlvbi5zcGxhdENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFBhcnRpYWxseUZpbGxlZEJ1Y2tldFNpemUgPSBzZWN0aW9uLnBhcnRpYWxseUZpbGxlZEJ1Y2tldExlbmd0aHNbcGFydGlhbGx5RnVsbEJ1Y2tldEluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChsb2NhbFNwbGF0SW5kZXggPj0gYnVja2V0U3BsYXRJbmRleCAmJiBsb2NhbFNwbGF0SW5kZXggPCBidWNrZXRTcGxhdEluZGV4ICsgY3VycmVudFBhcnRpYWxseUZpbGxlZEJ1Y2tldFNpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJ1Y2tldFNwbGF0SW5kZXggKz0gY3VycmVudFBhcnRpYWxseUZpbGxlZEJ1Y2tldFNpemU7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgcGFydGlhbGx5RnVsbEJ1Y2tldEluZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ1Y2tldEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0Q2VudGVyKG1vcnBoZWRNZXNoLCBnbG9iYWxTcGxhdEluZGV4LCBvdXRDZW50ZXIsIHRyYW5zZm9ybSkge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtnbG9iYWxTcGxhdEluZGV4XTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGdsb2JhbFNwbGF0SW5kZXggLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNyY1NwbGF0Q2VudGVyc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXg7XHJcbiAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRDZW50ZXJzQmFzZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHggPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICBjb25zdCB5ID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgY29uc3QgeiA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXByZXNzaW9uTGV2ZWwgPj0gMSkge1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRJbmRleCA9IHRoaXMuZ2V0QnVja2V0SW5kZXgoc2VjdGlvbiwgbG9jYWxTcGxhdEluZGV4KTtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0QmFzZSA9IGJ1Y2tldEluZGV4ICogU3BsYXRCdWZmZXIuQnVja2V0U3RvcmFnZVNpemVGbG9hdHM7XHJcbiAgICAgICAgICAgIGNvbnN0IHNmID0gc2VjdGlvbi5jb21wcmVzc2lvblNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICBjb25zdCBzciA9IHNlY3Rpb24uY29tcHJlc3Npb25TY2FsZVJhbmdlO1xyXG4gICAgICAgICAgICBvdXRDZW50ZXIueCA9ICh4IC0gc3IpICogc2YgKyBzZWN0aW9uLmJ1Y2tldEFycmF5W2J1Y2tldEJhc2VdO1xyXG4gICAgICAgICAgICBvdXRDZW50ZXIueSA9ICh5IC0gc3IpICogc2YgKyBzZWN0aW9uLmJ1Y2tldEFycmF5W2J1Y2tldEJhc2UgKyAxXTtcclxuICAgICAgICAgICAgb3V0Q2VudGVyLnogPSAoeiAtIHNyKSAqIHNmICsgc2VjdGlvbi5idWNrZXRBcnJheVtidWNrZXRCYXNlICsgMl07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3V0Q2VudGVyLnggPSB4O1xyXG4gICAgICAgICAgICBvdXRDZW50ZXIueSA9IHk7XHJcbiAgICAgICAgICAgIG91dENlbnRlci56ID0gejtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG91dENlbnRlci54ICs9IG1vcnBoZWRNZXNoW2dsb2JhbFNwbGF0SW5kZXggKiAzICsgMF07XHJcbiAgICAgICAgb3V0Q2VudGVyLnkgKz0gbW9ycGhlZE1lc2hbZ2xvYmFsU3BsYXRJbmRleCAqIDMgKyAxXTtcclxuICAgICAgICBvdXRDZW50ZXIueiArPSBtb3JwaGVkTWVzaFtnbG9iYWxTcGxhdEluZGV4ICogMyArIDJdO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRyYW5zZm9ybSkgb3V0Q2VudGVyLmFwcGx5TWF0cml4NCh0cmFuc2Zvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0U2NhbGVBbmRSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGluZGV4LCBvdXRTY2FsZSwgb3V0Um90YXRpb24sIHRyYW5zZm9ybSwgc2NhbGVPdmVycmlkZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbaW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBpbmRleCAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNyY1NwbGF0U2NhbGVzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW3RoaXMuY29tcHJlc3Npb25MZXZlbF0uU2NhbGVPZmZzZXRCeXRlcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0U2NhbGVzQmFzZSk7XHJcblxyXG4gICAgICAgICAgICBzY2FsZS5zZXQodG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpKTtcclxuICAgICAgICAgICAgaWYgKHNjYWxlT3ZlcnJpZGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZU92ZXJyaWRlLnggIT09IHVuZGVmaW5lZCkgc2NhbGUueCA9IHNjYWxlT3ZlcnJpZGUueDtcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZU92ZXJyaWRlLnkgIT09IHVuZGVmaW5lZCkgc2NhbGUueSA9IHNjYWxlT3ZlcnJpZGUueTtcclxuICAgICAgICAgICAgICAgIGlmIChzY2FsZU92ZXJyaWRlLnogIT09IHVuZGVmaW5lZCkgc2NhbGUueiA9IHNjYWxlT3ZlcnJpZGUuejtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcm90YXRpb24uc2V0KHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDQsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA1LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDMsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgc2NhbGVNYXRyaXgubWFrZVNjYWxlKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopO1xyXG4gICAgICAgICAgICAgICAgcm90YXRpb25NYXRyaXgubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5jb3B5KHNjYWxlTWF0cml4KS5tdWx0aXBseShyb3RhdGlvbk1hdHJpeCkubXVsdGlwbHkodHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXRyaXguZGVjb21wb3NlKHRlbXBQb3NpdGlvbiwgb3V0Um90YXRpb24sIG91dFNjYWxlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dFNjYWxlLmNvcHkoc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgb3V0Um90YXRpb24uY29weShyb3RhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBnZXRTcGxhdENvbG9yKGdsb2JhbFNwbGF0SW5kZXgsIG91dENvbG9yKSB7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2dsb2JhbFNwbGF0SW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gZ2xvYmFsU3BsYXRJbmRleCAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgY29uc3Qgc3JjU3BsYXRDb2xvcnNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1t0aGlzLmNvbXByZXNzaW9uTGV2ZWxdLkNvbG9yT2Zmc2V0Qnl0ZXM7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb2xvcnNBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0Q29sb3JzQmFzZSwgNCk7XHJcblxyXG4gICAgICAgIG91dENvbG9yLnNldChzcGxhdENvbG9yc0FycmF5WzBdLCBzcGxhdENvbG9yc0FycmF5WzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICBzcGxhdENvbG9yc0FycmF5WzJdLCBzcGxhdENvbG9yc0FycmF5WzNdKTtcclxuICAgIH1cclxuXHJcbiAgICBmaWxsU3BsYXRDZW50ZXJBcnJheShtb3JwaGVkTWVzaCwgb3V0Q2VudGVyQXJyYXksIHRyYW5zZm9ybSwgc3JjRnJvbSwgc3JjVG8sIGRlc3RGcm9tKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgc3JjRnJvbSA9IHNyY0Zyb20gfHwgMDtcclxuICAgICAgICBzcmNUbyA9IHNyY1RvIHx8IHNwbGF0Q291bnQgLSAxO1xyXG4gICAgICAgIGlmIChkZXN0RnJvbSA9PT0gdW5kZWZpbmVkKSBkZXN0RnJvbSA9IHNyY0Zyb207XHJcblxyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHNyY0Zyb207IGkgPD0gc3JjVG87IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGkgLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlckRlc3RCYXNlID0gKGkgLSBzcmNGcm9tICsgZGVzdEZyb20pICogU3BsYXRCdWZmZXIuQ2VudGVyQ29tcG9uZW50Q291bnQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcmNTcGxhdENlbnRlcnNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4O1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdENlbnRlcnNCYXNlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgY29uc3QgeSA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAxLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICBjb25zdCB6ID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXByZXNzaW9uTGV2ZWwgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0SW5kZXggPSB0aGlzLmdldEJ1Y2tldEluZGV4KHNlY3Rpb24sIGxvY2FsU3BsYXRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXRCYXNlID0gYnVja2V0SW5kZXggKiBTcGxhdEJ1ZmZlci5CdWNrZXRTdG9yYWdlU2l6ZUZsb2F0cztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNmID0gc2VjdGlvbi5jb21wcmVzc2lvblNjYWxlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3IgPSBzZWN0aW9uLmNvbXByZXNzaW9uU2NhbGVSYW5nZTtcclxuICAgICAgICAgICAgICAgIGNlbnRlci54ID0gKHggLSBzcikgKiBzZiArIHNlY3Rpb24uYnVja2V0QXJyYXlbYnVja2V0QmFzZV07XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIueSA9ICh5IC0gc3IpICogc2YgKyBzZWN0aW9uLmJ1Y2tldEFycmF5W2J1Y2tldEJhc2UgKyAxXTtcclxuICAgICAgICAgICAgICAgIGNlbnRlci56ID0gKHogLSBzcikgKiBzZiArIHNlY3Rpb24uYnVja2V0QXJyYXlbYnVja2V0QmFzZSArIDJdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnggPSB4O1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnkgPSB5O1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnogPSB6O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIGNlbnRlci5hcHBseU1hdHJpeDQodHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2VdID0gY2VudGVyLnggKyBtb3JwaGVkTWVzaFtpICogMyArIDBdO1xyXG4gICAgICAgICAgICBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZSArIDFdID0gY2VudGVyLnkgKyBtb3JwaGVkTWVzaFtpICogMyArIDFdO1xyXG4gICAgICAgICAgICBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZSArIDJdID0gY2VudGVyLnogKyBtb3JwaGVkTWVzaFtpICogMyArIDJdO1xyXG5cclxuICAgICAgICAgICAgLy8gb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2VdID0gbW9ycGhlZE1lc2hbY2VudGVyRGVzdEJhc2VdO1xyXG4gICAgICAgICAgICAvLyBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZSArIDFdID0gbW9ycGhlZE1lc2hbY2VudGVyRGVzdEJhc2UgKyAxXTtcclxuICAgICAgICAgICAgLy8gb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2UgKyAyXSA9IG1vcnBoZWRNZXNoW2NlbnRlckRlc3RCYXNlICsgMl07XHJcblxyXG4gICAgICAgICAgICAvLyBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZV0gPSBjZW50ZXIueDtcclxuICAgICAgICAgICAgLy8gb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2UgKyAxXSA9IGNlbnRlci55O1xyXG4gICAgICAgICAgICAvLyBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZSArIDJdID0gY2VudGVyLno7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxTcGxhdFNjYWxlUm90YXRpb25BcnJheSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgZW5zdXJlUG9zaXRpdmVXID0gKHF1YXRlcm5pb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmxpcCA9IHF1YXRlcm5pb24udyA8IDAgPyAtMSA6IDE7XHJcbiAgICAgICAgICAgIHF1YXRlcm5pb24ueCAqPSBmbGlwO1xyXG4gICAgICAgICAgICBxdWF0ZXJuaW9uLnkgKj0gZmxpcDtcclxuICAgICAgICAgICAgcXVhdGVybmlvbi56ICo9IGZsaXA7XHJcbiAgICAgICAgICAgIHF1YXRlcm5pb24udyAqPSBmbGlwO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvdXRTY2FsZUFycmF5LCBvdXRSb3RhdGlvbkFycmF5LCB0cmFuc2Zvcm0sIHNyY0Zyb20sIHNyY1RvLCBkZXN0RnJvbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwsIHNjYWxlT3ZlcnJpZGUpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIHNyY0Zyb20gPSBzcmNGcm9tIHx8IDA7XHJcbiAgICAgICAgICAgIHNyY1RvID0gc3JjVG8gfHwgc3BsYXRDb3VudCAtIDE7XHJcbiAgICAgICAgICAgIGlmIChkZXN0RnJvbSA9PT0gdW5kZWZpbmVkKSBkZXN0RnJvbSA9IHNyY0Zyb207XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvdXRwdXRDb252ZXJzaW9uID0gKHZhbHVlLCBzcmNDb21wcmVzc2lvbkxldmVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3JjQ29tcHJlc3Npb25MZXZlbCA9PT0gdW5kZWZpbmVkKSBzcmNDb21wcmVzc2lvbkxldmVsID0gdGhpcy5jb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRCZXR3ZWVuQ29tcHJlc3Npb25MZXZlbHModmFsdWUsIHNyY0NvbXByZXNzaW9uTGV2ZWwsIGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzcmNGcm9tOyBpIDw9IHNyY1RvOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBpIC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1NwbGF0U2NhbGVzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1t0aGlzLmNvbXByZXNzaW9uTGV2ZWxdLlNjYWxlT2Zmc2V0Qnl0ZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGVEZXN0QmFzZSA9IChpIC0gc3JjRnJvbSArIGRlc3RGcm9tKSAqIFNwbGF0QnVmZmVyLlNjYWxlQ29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3RhdGlvbkRlc3RCYXNlID0gKGkgLSBzcmNGcm9tICsgZGVzdEZyb20pICogU3BsYXRCdWZmZXIuUm90YXRpb25Db21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0U2NhbGVzQmFzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjU2NhbGVYID0gKHNjYWxlT3ZlcnJpZGUgJiYgc2NhbGVPdmVycmlkZS54ICE9PSB1bmRlZmluZWQpID8gc2NhbGVPdmVycmlkZS54IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1NjYWxlWSA9IChzY2FsZU92ZXJyaWRlICYmIHNjYWxlT3ZlcnJpZGUueSAhPT0gdW5kZWZpbmVkKSA/IHNjYWxlT3ZlcnJpZGUueSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNTY2FsZVogPSAoc2NhbGVPdmVycmlkZSAmJiBzY2FsZU92ZXJyaWRlLnogIT09IHVuZGVmaW5lZCkgPyBzY2FsZU92ZXJyaWRlLnogOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1JvdGF0aW9uVyA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAzLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjUm90YXRpb25YID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDQsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNSb3RhdGlvblkgPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1JvdGF0aW9uWiA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA2LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjYWxlLnNldCh0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1NjYWxlWCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1NjYWxlWSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1NjYWxlWiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm90YXRpb24uc2V0KHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjUm90YXRpb25YLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjUm90YXRpb25ZLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjUm90YXRpb25aLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjUm90YXRpb25XLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpKS5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcFBvc2l0aW9uLnNldCgwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZU1hdHJpeC5tYWtlU2NhbGUoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XHJcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb25NYXRyaXgubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBNYXRyaXguaWRlbnRpdHkoKS5wcmVtdWx0aXBseShzY2FsZU1hdHJpeCkucHJlbXVsdGlwbHkocm90YXRpb25NYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBNYXRyaXgucHJlbXVsdGlwbHkodHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LmRlY29tcG9zZSh0ZW1wUG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb24ubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZW5zdXJlUG9zaXRpdmVXKHJvdGF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3V0U2NhbGVBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFNjYWxlQXJyYXlbc2NhbGVEZXN0QmFzZV0gPSBvdXRwdXRDb252ZXJzaW9uKHNjYWxlLngsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFNjYWxlQXJyYXlbc2NhbGVEZXN0QmFzZSArIDFdID0gb3V0cHV0Q29udmVyc2lvbihzY2FsZS55LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRTY2FsZUFycmF5W3NjYWxlRGVzdEJhc2UgKyAyXSA9IG91dHB1dENvbnZlcnNpb24oc2NhbGUueiwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG91dFJvdGF0aW9uQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRSb3RhdGlvbkFycmF5W3JvdGF0aW9uRGVzdEJhc2VdID0gb3V0cHV0Q29udmVyc2lvbihyb3RhdGlvbi54LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRSb3RhdGlvbkFycmF5W3JvdGF0aW9uRGVzdEJhc2UgKyAxXSA9IG91dHB1dENvbnZlcnNpb24ocm90YXRpb24ueSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Um90YXRpb25BcnJheVtyb3RhdGlvbkRlc3RCYXNlICsgMl0gPSBvdXRwdXRDb252ZXJzaW9uKHJvdGF0aW9uLnosIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFJvdGF0aW9uQXJyYXlbcm90YXRpb25EZXN0QmFzZSArIDNdID0gb3V0cHV0Q29udmVyc2lvbihyb3RhdGlvbi53LCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KCk7XHJcblxyXG4gICAgc3RhdGljIGNvbXB1dGVDb3ZhcmlhbmNlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBNYXRyaXg0ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBzY2FsZU1hdHJpeCA9IG5ldyBNYXRyaXgzKCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4MygpO1xyXG4gICAgICAgIGNvbnN0IGNvdmFyaWFuY2VNYXRyaXggPSBuZXcgTWF0cml4MygpO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkQ292YXJpYW5jZSA9IG5ldyBNYXRyaXgzKCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtM3gzID0gbmV3IE1hdHJpeDMoKTtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0zeDNUcmFuc3Bvc2UgPSBuZXcgTWF0cml4MygpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NhbGUsIHJvdGF0aW9uLCB0cmFuc2Zvcm0sIG91dENvdmFyaWFuY2UsIG91dE9mZnNldCA9IDAsIGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsKSB7XHJcblxyXG4gICAgICAgICAgICB0ZW1wTWF0cml4NC5tYWtlU2NhbGUoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XHJcbiAgICAgICAgICAgIHNjYWxlTWF0cml4LnNldEZyb21NYXRyaXg0KHRlbXBNYXRyaXg0KTtcclxuXHJcbiAgICAgICAgICAgIHRlbXBNYXRyaXg0Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHJvdGF0aW9uKTtcclxuICAgICAgICAgICAgcm90YXRpb25NYXRyaXguc2V0RnJvbU1hdHJpeDQodGVtcE1hdHJpeDQpO1xyXG5cclxuICAgICAgICAgICAgY292YXJpYW5jZU1hdHJpeC5jb3B5KHJvdGF0aW9uTWF0cml4KS5tdWx0aXBseShzY2FsZU1hdHJpeCk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ292YXJpYW5jZS5jb3B5KGNvdmFyaWFuY2VNYXRyaXgpLnRyYW5zcG9zZSgpLnByZW11bHRpcGx5KGNvdmFyaWFuY2VNYXRyaXgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtM3gzLnNldEZyb21NYXRyaXg0KHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0zeDNUcmFuc3Bvc2UuY29weSh0cmFuc2Zvcm0zeDMpLnRyYW5zcG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLm11bHRpcGx5KHRyYW5zZm9ybTN4M1RyYW5zcG9zZSk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvdmFyaWFuY2UucHJlbXVsdGlwbHkodHJhbnNmb3JtM3gzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsID49IDEpIHtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0XSA9IHRvSGFsZkZsb2F0KHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1swXSk7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDFdID0gdG9IYWxmRmxvYXQodHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzNdKTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgMl0gPSB0b0hhbGZGbG9hdCh0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbNl0pO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyAzXSA9IHRvSGFsZkZsb2F0KHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s0XSk7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDRdID0gdG9IYWxmRmxvYXQodHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzddKTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgNV0gPSB0b0hhbGZGbG9hdCh0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbOF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXRdID0gdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzBdO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyAxXSA9IHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1szXTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgMl0gPSB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbNl07XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDNdID0gdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzRdO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyA0XSA9IHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s3XTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgNV0gPSB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbOF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgZmlsbFNwbGF0Q292YXJpYW5jZUFycmF5KGNvdmFyaWFuY2VBcnJheSwgdHJhbnNmb3JtLCBzcmNGcm9tLCBzcmNUbywgZGVzdEZyb20sIGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbiAgICAgICAgc3JjRnJvbSA9IHNyY0Zyb20gfHwgMDtcclxuICAgICAgICBzcmNUbyA9IHNyY1RvIHx8IHNwbGF0Q291bnQgLSAxO1xyXG4gICAgICAgIGlmIChkZXN0RnJvbSA9PT0gdW5kZWZpbmVkKSBkZXN0RnJvbSA9IHNyY0Zyb207XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBzcmNGcm9tOyBpIDw9IHNyY1RvOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBpIC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZURlc3RCYXNlID0gKGkgLSBzcmNGcm9tICsgZGVzdEZyb20pICogU3BsYXRCdWZmZXIuQ292YXJpYW5jZUNvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBzcmNTcGxhdFNjYWxlc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1t0aGlzLmNvbXByZXNzaW9uTGV2ZWxdLlNjYWxlT2Zmc2V0Qnl0ZXM7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdFNjYWxlc0Jhc2UpO1xyXG5cclxuICAgICAgICAgICAgc2NhbGUuc2V0KHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAxLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSk7XHJcblxyXG4gICAgICAgICAgICByb3RhdGlvbi5zZXQodG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDUsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA2LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMywgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSk7XHJcblxyXG4gICAgICAgICAgICBTcGxhdEJ1ZmZlci5jb21wdXRlQ292YXJpYW5jZShzY2FsZSwgcm90YXRpb24sIHRyYW5zZm9ybSwgY292YXJpYW5jZUFycmF5LCBjb3ZhcmlhbmNlRGVzdEJhc2UsIGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFNwbGF0Q29sb3JBcnJheShvdXRDb2xvckFycmF5LCBtaW5pbXVtQWxwaGEsIHNyY0Zyb20sIHNyY1RvLCBkZXN0RnJvbSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgIHNyY0Zyb20gPSBzcmNGcm9tIHx8IDA7XHJcbiAgICAgICAgc3JjVG8gPSBzcmNUbyB8fCBzcGxhdENvdW50IC0gMTtcclxuICAgICAgICBpZiAoZGVzdEZyb20gPT09IHVuZGVmaW5lZCkgZGVzdEZyb20gPSBzcmNGcm9tO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gc3JjRnJvbTsgaSA8PSBzcmNUbzsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGkgLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb2xvckRlc3RCYXNlID0gKGkgLSBzcmNGcm9tICsgZGVzdEZyb20pICogU3BsYXRCdWZmZXIuQ29sb3JDb21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgY29uc3Qgc3JjU3BsYXRDb2xvcnNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbdGhpcy5jb21wcmVzc2lvbkxldmVsXS5Db2xvck9mZnNldEJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdENvbG9yc0Jhc2UpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFscGhhID0gZGF0YVZpZXdbM107XHJcbiAgICAgICAgICAgIGFscGhhID0gKGFscGhhID49IG1pbmltdW1BbHBoYSkgPyBhbHBoYSA6IDA7XHJcblxyXG4gICAgICAgICAgICBvdXRDb2xvckFycmF5W2NvbG9yRGVzdEJhc2VdID0gZGF0YVZpZXdbMF07XHJcbiAgICAgICAgICAgIG91dENvbG9yQXJyYXlbY29sb3JEZXN0QmFzZSArIDFdID0gZGF0YVZpZXdbMV07XHJcbiAgICAgICAgICAgIG91dENvbG9yQXJyYXlbY29sb3JEZXN0QmFzZSArIDJdID0gZGF0YVZpZXdbMl07XHJcbiAgICAgICAgICAgIG91dENvbG9yQXJyYXlbY29sb3JEZXN0QmFzZSArIDNdID0gYWxwaGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxTcGhlcmljYWxIYXJtb25pY3NBcnJheSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY1ZlY3RvcnMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE1OyBpKyspIHtcclxuICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNWZWN0b3JzW2ldID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBNYXRyaXgzID0gbmV3IE1hdHJpeDMoKTtcclxuICAgICAgICBjb25zdCB0ZW1wTWF0cml4NCA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBUcmFuc2xhdGlvbiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFNjYWxlID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCB0ZW1wUm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG5cclxuICAgICAgICBjb25zdCBzaDExID0gW107XHJcbiAgICAgICAgY29uc3Qgc2gxMiA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoMTMgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2gyMSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoMjIgPSBbXTtcclxuICAgICAgICBjb25zdCBzaDIzID0gW107XHJcbiAgICAgICAgY29uc3Qgc2gyNCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoMjUgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hJbjEgPSBbXTtcclxuICAgICAgICBjb25zdCBzaEluMiA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoSW4zID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hJbjQgPSBbXTtcclxuICAgICAgICBjb25zdCBzaEluNSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBzaE91dDEgPSBbXTtcclxuICAgICAgICBjb25zdCBzaE91dDIgPSBbXTtcclxuICAgICAgICBjb25zdCBzaE91dDMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaE91dDQgPSBbXTtcclxuICAgICAgICBjb25zdCBzaE91dDUgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm9vcCA9ICh2KSA9PiB2O1xyXG5cclxuICAgICAgICBjb25zdCBzZXQzID0gKGFycmF5LCB2YWwxLCB2YWwyLCB2YWwzKSA9PiB7XHJcbiAgICAgICAgICAgIGFycmF5WzBdID0gdmFsMTtcclxuICAgICAgICAgICAgYXJyYXlbMV0gPSB2YWwyO1xyXG4gICAgICAgICAgICBhcnJheVsyXSA9IHZhbDM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0M0Zyb21BcnJheSA9IChhcnJheSwgc3JjRGVzdFZpZXcsIHN0cmlkZSwgc3JjQmFzZSwgY29tcHJlc3Npb25MZXZlbCkgPT4ge1xyXG4gICAgICAgICAgICBhcnJheVswXSA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKHNyY0Rlc3RWaWV3LCBzcmNCYXNlLCBjb21wcmVzc2lvbkxldmVsLCB0cnVlKTtcclxuICAgICAgICAgICAgYXJyYXlbMV0gPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChzcmNEZXN0Vmlldywgc3JjQmFzZSArIHN0cmlkZSwgY29tcHJlc3Npb25MZXZlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGFycmF5WzJdID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoc3JjRGVzdFZpZXcsIHNyY0Jhc2UgKyBzdHJpZGUgKyBzdHJpZGUsIGNvbXByZXNzaW9uTGV2ZWwsIHRydWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGNvcHkzID0gKHNyY0FycmF5LCBkZXN0QXJyYXkpID0+IHtcclxuICAgICAgICAgICAgZGVzdEFycmF5WzBdID0gc3JjQXJyYXlbMF07XHJcbiAgICAgICAgICAgIGRlc3RBcnJheVsxXSA9IHNyY0FycmF5WzFdO1xyXG4gICAgICAgICAgICBkZXN0QXJyYXlbMl0gPSBzcmNBcnJheVsyXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBzZXRPdXRwdXQzID0gKHNyY0FycmF5LCBkZXN0QXJyYXksIGRlc3RCYXNlLCBjb252ZXJzaW9uRnVuYykgPT4ge1xyXG4gICAgICAgICAgICBkZXN0QXJyYXlbZGVzdEJhc2VdID0gY29udmVyc2lvbkZ1bmMoc3JjQXJyYXlbMF0pO1xyXG4gICAgICAgICAgICBkZXN0QXJyYXlbZGVzdEJhc2UgKyAxXSA9IGNvbnZlcnNpb25GdW5jKHNyY0FycmF5WzFdKTtcclxuICAgICAgICAgICAgZGVzdEFycmF5W2Rlc3RCYXNlICsgMl0gPSBjb252ZXJzaW9uRnVuYyhzcmNBcnJheVsyXSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyA9IChzcmMsIGRlc3QsIGNvbXByZXNzaW9uTGV2ZWwsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KSA9PiB7XHJcbiAgICAgICAgICAgIGRlc3RbMF0gPSB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1swXSwgY29tcHJlc3Npb25MZXZlbCwgdHJ1ZSwgcmFuZ2U4Qml0TWluLCByYW5nZThCaXRNYXgpO1xyXG4gICAgICAgICAgICBkZXN0WzFdID0gdG9VbmNvbXByZXNzZWRGbG9hdChzcmNbMV0sIGNvbXByZXNzaW9uTGV2ZWwsIHRydWUsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgICAgICAgICAgZGVzdFsyXSA9IHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjWzJdLCBjb21wcmVzc2lvbkxldmVsLCB0cnVlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZXN0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCB0cmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY0Zyb20sIHNyY1RvLCBkZXN0RnJvbSwgZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIHNyY0Zyb20gPSBzcmNGcm9tIHx8IDA7XHJcbiAgICAgICAgICAgIHNyY1RvID0gc3JjVG8gfHwgc3BsYXRDb3VudCAtIDE7XHJcbiAgICAgICAgICAgIGlmIChkZXN0RnJvbSA9PT0gdW5kZWZpbmVkKSBkZXN0RnJvbSA9IHNyY0Zyb207XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtICYmIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF0cml4NC5jb3B5KHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF0cml4NC5kZWNvbXBvc2UodGVtcFRyYW5zbGF0aW9uLCB0ZW1wUm90YXRpb24sIHRlbXBTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUm90YXRpb24ubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF0cml4NC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbih0ZW1wUm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hdHJpeDMuc2V0RnJvbU1hdHJpeDQodGVtcE1hdHJpeDQpO1xyXG4gICAgICAgICAgICAgICAgc2V0MyhzaDExLCB0ZW1wTWF0cml4My5lbGVtZW50c1s0XSwgLXRlbXBNYXRyaXgzLmVsZW1lbnRzWzddLCB0ZW1wTWF0cml4My5lbGVtZW50c1sxXSk7XHJcbiAgICAgICAgICAgICAgICBzZXQzKHNoMTIsIC10ZW1wTWF0cml4My5lbGVtZW50c1s1XSwgdGVtcE1hdHJpeDMuZWxlbWVudHNbOF0sIC10ZW1wTWF0cml4My5lbGVtZW50c1syXSk7XHJcbiAgICAgICAgICAgICAgICBzZXQzKHNoMTMsIHRlbXBNYXRyaXgzLmVsZW1lbnRzWzNdLCAtdGVtcE1hdHJpeDMuZWxlbWVudHNbNl0sIHRlbXBNYXRyaXgzLmVsZW1lbnRzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbG9jYWxGcm9tSGFsZkZsb2F0VG9VaW50OCA9ICh2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbUhhbGZGbG9hdFRvVWludDgodiwgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiwgdGhpcy5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsb2NhbFRvVWludDggPSAodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvVWludDgodiwgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiwgdGhpcy5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3JjRnJvbTsgaSA8PSBzcmNUbzsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgc2VjdGlvbi5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c0NvdW50ID0gZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBpIC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1NwbGF0U0hCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbdGhpcy5jb21wcmVzc2lvbkxldmVsXS5TcGhlcmljYWxIYXJtb25pY3NPZmZzZXRCeXRlcztcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdFNIQmFzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hEZXN0QmFzZSA9IChpIC0gc3JjRnJvbSArIGRlc3RGcm9tKSAqIG91dFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNDb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgY29tcHJlc3Npb25MZXZlbEZvck91dHB1dENvbnZlcnNpb24gPSB0cmFuc2Zvcm0gPyAwIDogdGhpcy5jb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgICAgICAgICAgbGV0IG91dHB1dENvbnZlcnNpb25GdW5jID0gbm9vcDtcclxuICAgICAgICAgICAgICAgIGlmIChjb21wcmVzc2lvbkxldmVsRm9yT3V0cHV0Q29udmVyc2lvbiAhPT0gZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcHJlc3Npb25MZXZlbEZvck91dHB1dENvbnZlcnNpb24gPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsID09PSAwKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IGZyb21IYWxmRmxvYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsID09IDIpIG91dHB1dENvbnZlcnNpb25GdW5jID0gbG9jYWxGcm9tSGFsZkZsb2F0VG9VaW50ODtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWxGb3JPdXRwdXRDb252ZXJzaW9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSB0b0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwgPT0gMikgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBsb2NhbFRvVWludDg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pblNoQ29lZmYgPSB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF4U2hDb2VmZiA9IHRoaXMubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAxKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjEsIGRhdGFWaWV3LCAzLCAwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjIsIGRhdGFWaWV3LCAzLCAxLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjMsIGRhdGFWaWV3LCAzLCAyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjEsIHNoSW4xLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW4yLCBzaEluMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluMywgc2hJbjMsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLnJvdGF0ZVNwaGVyaWNhbEhhcm1vbmljczMoc2hJbjEsIHNoSW4yLCBzaEluMywgc2gxMSwgc2gxMiwgc2gxMywgc2hPdXQxLCBzaE91dDIsIHNoT3V0Myk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjEsIHNoT3V0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW4yLCBzaE91dDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluMywgc2hPdXQzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQxLCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDMsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0Mywgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyA2LCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluMSwgZGF0YVZpZXcsIDUsIDksIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjIsIGRhdGFWaWV3LCA1LCAxMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluMywgZGF0YVZpZXcsIDUsIDExLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW40LCBkYXRhVmlldywgNSwgMTIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjUsIGRhdGFWaWV3LCA1LCAxMywgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjEsIHNoSW4xLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluMiwgc2hJbjIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW4zLCBzaEluMywgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjQsIHNoSW40LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluNSwgc2hJbjUsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5yb3RhdGVTcGhlcmljYWxIYXJtb25pY3M1KHNoSW4xLCBzaEluMiwgc2hJbjMsIHNoSW40LCBzaEluNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2gxMSwgc2gxMiwgc2gxMywgc2gyMSwgc2gyMiwgc2gyMywgc2gyNCwgc2gyNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hPdXQxLCBzaE91dDIsIHNoT3V0Mywgc2hPdXQ0LCBzaE91dDUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjEsIHNoT3V0MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluMiwgc2hPdXQyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW4zLCBzaE91dDMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjQsIHNoT3V0NCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluNSwgc2hPdXQ1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDEsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgOSwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0Miwgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyAxMiwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0Mywgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyAxNSwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0NCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyAxOCwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0NSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyAyMSwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIHN0YXRpYyBkb3QzID0gKHYxLCB2MiwgdjMsIHRyYW5zZm9ybVJvdywgb3V0QXJyYXkpID0+IHtcclxuICAgICAgICBvdXRBcnJheVswXSA9IG91dEFycmF5WzFdID0gb3V0QXJyYXlbMl0gPSAwO1xyXG4gICAgICAgIGNvbnN0IHQwID0gdHJhbnNmb3JtUm93WzBdO1xyXG4gICAgICAgIGNvbnN0IHQxID0gdHJhbnNmb3JtUm93WzFdO1xyXG4gICAgICAgIGNvbnN0IHQyID0gdHJhbnNmb3JtUm93WzJdO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHYxWzBdICogdDAsIHYxWzFdICogdDAsIHYxWzJdICogdDAsIG91dEFycmF5KTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2MlswXSAqIHQxLCB2MlsxXSAqIHQxLCB2MlsyXSAqIHQxLCBvdXRBcnJheSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjNbMF0gKiB0MiwgdjNbMV0gKiB0MiwgdjNbMl0gKiB0Miwgb3V0QXJyYXkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgYWRkSW50bzMgPSAodmFsMSwgdmFsMiwgdmFsMywgZGVzdEFycmF5KSA9PiB7XHJcbiAgICAgICAgZGVzdEFycmF5WzBdID0gZGVzdEFycmF5WzBdICsgdmFsMTtcclxuICAgICAgICBkZXN0QXJyYXlbMV0gPSBkZXN0QXJyYXlbMV0gKyB2YWwyO1xyXG4gICAgICAgIGRlc3RBcnJheVsyXSA9IGRlc3RBcnJheVsyXSArIHZhbDM7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBkb3Q1ID0gKHYxLCB2MiwgdjMsIHY0LCB2NSwgdHJhbnNmb3JtUm93LCBvdXRBcnJheSkgPT4ge1xyXG4gICAgICAgIG91dEFycmF5WzBdID0gb3V0QXJyYXlbMV0gPSBvdXRBcnJheVsyXSA9IDA7XHJcbiAgICAgICAgY29uc3QgdDAgPSB0cmFuc2Zvcm1Sb3dbMF07XHJcbiAgICAgICAgY29uc3QgdDEgPSB0cmFuc2Zvcm1Sb3dbMV07XHJcbiAgICAgICAgY29uc3QgdDIgPSB0cmFuc2Zvcm1Sb3dbMl07XHJcbiAgICAgICAgY29uc3QgdDMgPSB0cmFuc2Zvcm1Sb3dbM107XHJcbiAgICAgICAgY29uc3QgdDQgPSB0cmFuc2Zvcm1Sb3dbNF07XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjFbMF0gKiB0MCwgdjFbMV0gKiB0MCwgdjFbMl0gKiB0MCwgb3V0QXJyYXkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHYyWzBdICogdDEsIHYyWzFdICogdDEsIHYyWzJdICogdDEsIG91dEFycmF5KTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2M1swXSAqIHQyLCB2M1sxXSAqIHQyLCB2M1syXSAqIHQyLCBvdXRBcnJheSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjRbMF0gKiB0MywgdjRbMV0gKiB0MywgdjRbMl0gKiB0Mywgb3V0QXJyYXkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHY1WzBdICogdDQsIHY1WzFdICogdDQsIHY1WzJdICogdDQsIG91dEFycmF5KTtcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIHJvdGF0ZVNwaGVyaWNhbEhhcm1vbmljczMgPSAoaW4xLCBpbjIsIGluMywgdHNoMTEsIHRzaDEyLCB0c2gxMywgb3V0MSwgb3V0Miwgb3V0MykgPT4ge1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDMoaW4xLCBpbjIsIGluMywgdHNoMTEsIG91dDEpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDMoaW4xLCBpbjIsIGluMywgdHNoMTIsIG91dDIpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDMoaW4xLCBpbjIsIGluMywgdHNoMTMsIG91dDMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgcm90YXRlU3BoZXJpY2FsSGFybW9uaWNzNSA9IChpbjEsIGluMiwgaW4zLCBpbjQsIGluNSwgdHNoMTEsIHRzaDEyLCB0c2gxMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzaDIxLCB0c2gyMiwgdHNoMjMsIHRzaDI0LCB0c2gyNSwgb3V0MSwgb3V0Miwgb3V0Mywgb3V0NCwgb3V0NSkgPT4ge1xyXG5cclxuICAgICAgICBjb25zdCBrU3FydDAxMDQgPSBNYXRoLnNxcnQoMS4wIC8gNC4wKTtcclxuICAgICAgICBjb25zdCBrU3FydDAzMDQgPSBNYXRoLnNxcnQoMy4wIC8gNC4wKTtcclxuICAgICAgICBjb25zdCBrU3FydDAxMDMgPSBNYXRoLnNxcnQoMS4wIC8gMy4wKTtcclxuICAgICAgICBjb25zdCBrU3FydDA0MDMgPSBNYXRoLnNxcnQoNC4wIC8gMy4wKTtcclxuICAgICAgICBjb25zdCBrU3FydDAxMTIgPSBNYXRoLnNxcnQoMS4wIC8gMTIuMCk7XHJcblxyXG4gICAgICAgIHRzaDIxWzBdID0ga1NxcnQwMTA0ICogKCh0c2gxM1syXSAqIHRzaDExWzBdICsgdHNoMTNbMF0gKiB0c2gxMVsyXSkgKyAodHNoMTFbMl0gKiB0c2gxM1swXSArIHRzaDExWzBdICogdHNoMTNbMl0pKTtcclxuICAgICAgICB0c2gyMVsxXSA9ICh0c2gxM1sxXSAqIHRzaDExWzBdICsgdHNoMTFbMV0gKiB0c2gxM1swXSk7XHJcbiAgICAgICAgdHNoMjFbMl0gPSBrU3FydDAzMDQgKiAodHNoMTNbMV0gKiB0c2gxMVsxXSArIHRzaDExWzFdICogdHNoMTNbMV0pO1xyXG4gICAgICAgIHRzaDIxWzNdID0gKHRzaDEzWzFdICogdHNoMTFbMl0gKyB0c2gxMVsxXSAqIHRzaDEzWzJdKTtcclxuICAgICAgICB0c2gyMVs0XSA9IGtTcXJ0MDEwNCAqICgodHNoMTNbMl0gKiB0c2gxMVsyXSAtIHRzaDEzWzBdICogdHNoMTFbMF0pICsgKHRzaDExWzJdICogdHNoMTNbMl0gLSB0c2gxMVswXSAqIHRzaDEzWzBdKSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90NShpbjEsIGluMiwgaW4zLCBpbjQsIGluNSwgdHNoMjEsIG91dDEpO1xyXG5cclxuICAgICAgICB0c2gyMlswXSA9IGtTcXJ0MDEwNCAqICgodHNoMTJbMl0gKiB0c2gxMVswXSArIHRzaDEyWzBdICogdHNoMTFbMl0pICsgKHRzaDExWzJdICogdHNoMTJbMF0gKyB0c2gxMVswXSAqIHRzaDEyWzJdKSk7XHJcbiAgICAgICAgdHNoMjJbMV0gPSB0c2gxMlsxXSAqIHRzaDExWzBdICsgdHNoMTFbMV0gKiB0c2gxMlswXTtcclxuICAgICAgICB0c2gyMlsyXSA9IGtTcXJ0MDMwNCAqICh0c2gxMlsxXSAqIHRzaDExWzFdICsgdHNoMTFbMV0gKiB0c2gxMlsxXSk7XHJcbiAgICAgICAgdHNoMjJbM10gPSB0c2gxMlsxXSAqIHRzaDExWzJdICsgdHNoMTFbMV0gKiB0c2gxMlsyXTtcclxuICAgICAgICB0c2gyMls0XSA9IGtTcXJ0MDEwNCAqICgodHNoMTJbMl0gKiB0c2gxMVsyXSAtIHRzaDEyWzBdICogdHNoMTFbMF0pICsgKHRzaDExWzJdICogdHNoMTJbMl0gLSB0c2gxMVswXSAqIHRzaDEyWzBdKSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90NShpbjEsIGluMiwgaW4zLCBpbjQsIGluNSwgdHNoMjIsIG91dDIpO1xyXG5cclxuICAgICAgICB0c2gyM1swXSA9IGtTcXJ0MDEwMyAqICh0c2gxMlsyXSAqIHRzaDEyWzBdICsgdHNoMTJbMF0gKiB0c2gxMlsyXSkgKyAta1NxcnQwMTEyICpcclxuICAgICAgICAgICAgICAgICAgICgodHNoMTNbMl0gKiB0c2gxM1swXSArIHRzaDEzWzBdICogdHNoMTNbMl0pICsgKHRzaDExWzJdICogdHNoMTFbMF0gKyB0c2gxMVswXSAqIHRzaDExWzJdKSk7XHJcbiAgICAgICAgdHNoMjNbMV0gPSBrU3FydDA0MDMgKiB0c2gxMlsxXSAqIHRzaDEyWzBdICsgLWtTcXJ0MDEwMyAqICh0c2gxM1sxXSAqIHRzaDEzWzBdICsgdHNoMTFbMV0gKiB0c2gxMVswXSk7XHJcbiAgICAgICAgdHNoMjNbMl0gPSB0c2gxMlsxXSAqIHRzaDEyWzFdICsgLWtTcXJ0MDEwNCAqICh0c2gxM1sxXSAqIHRzaDEzWzFdICsgdHNoMTFbMV0gKiB0c2gxMVsxXSk7XHJcbiAgICAgICAgdHNoMjNbM10gPSBrU3FydDA0MDMgKiB0c2gxMlsxXSAqIHRzaDEyWzJdICsgLWtTcXJ0MDEwMyAqICh0c2gxM1sxXSAqIHRzaDEzWzJdICsgdHNoMTFbMV0gKiB0c2gxMVsyXSk7XHJcbiAgICAgICAgdHNoMjNbNF0gPSBrU3FydDAxMDMgKiAodHNoMTJbMl0gKiB0c2gxMlsyXSAtIHRzaDEyWzBdICogdHNoMTJbMF0pICsgLWtTcXJ0MDExMiAqXHJcbiAgICAgICAgICAgICAgICAgICAoKHRzaDEzWzJdICogdHNoMTNbMl0gLSB0c2gxM1swXSAqIHRzaDEzWzBdKSArICh0c2gxMVsyXSAqIHRzaDExWzJdIC0gdHNoMTFbMF0gKiB0c2gxMVswXSkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDUoaW4xLCBpbjIsIGluMywgaW40LCBpbjUsIHRzaDIzLCBvdXQzKTtcclxuXHJcbiAgICAgICAgdHNoMjRbMF0gPSBrU3FydDAxMDQgKiAoKHRzaDEyWzJdICogdHNoMTNbMF0gKyB0c2gxMlswXSAqIHRzaDEzWzJdKSArICh0c2gxM1syXSAqIHRzaDEyWzBdICsgdHNoMTNbMF0gKiB0c2gxMlsyXSkpO1xyXG4gICAgICAgIHRzaDI0WzFdID0gdHNoMTJbMV0gKiB0c2gxM1swXSArIHRzaDEzWzFdICogdHNoMTJbMF07XHJcbiAgICAgICAgdHNoMjRbMl0gPSBrU3FydDAzMDQgKiAodHNoMTJbMV0gKiB0c2gxM1sxXSArIHRzaDEzWzFdICogdHNoMTJbMV0pO1xyXG4gICAgICAgIHRzaDI0WzNdID0gdHNoMTJbMV0gKiB0c2gxM1syXSArIHRzaDEzWzFdICogdHNoMTJbMl07XHJcbiAgICAgICAgdHNoMjRbNF0gPSBrU3FydDAxMDQgKiAoKHRzaDEyWzJdICogdHNoMTNbMl0gLSB0c2gxMlswXSAqIHRzaDEzWzBdKSArICh0c2gxM1syXSAqIHRzaDEyWzJdIC0gdHNoMTNbMF0gKiB0c2gxMlswXSkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDUoaW4xLCBpbjIsIGluMywgaW40LCBpbjUsIHRzaDI0LCBvdXQ0KTtcclxuXHJcbiAgICAgICAgdHNoMjVbMF0gPSBrU3FydDAxMDQgKiAoKHRzaDEzWzJdICogdHNoMTNbMF0gKyB0c2gxM1swXSAqIHRzaDEzWzJdKSAtICh0c2gxMVsyXSAqIHRzaDExWzBdICsgdHNoMTFbMF0gKiB0c2gxMVsyXSkpO1xyXG4gICAgICAgIHRzaDI1WzFdID0gKHRzaDEzWzFdICogdHNoMTNbMF0gLSB0c2gxMVsxXSAqIHRzaDExWzBdKTtcclxuICAgICAgICB0c2gyNVsyXSA9IGtTcXJ0MDMwNCAqICh0c2gxM1sxXSAqIHRzaDEzWzFdIC0gdHNoMTFbMV0gKiB0c2gxMVsxXSk7XHJcbiAgICAgICAgdHNoMjVbM10gPSAodHNoMTNbMV0gKiB0c2gxM1syXSAtIHRzaDExWzFdICogdHNoMTFbMl0pO1xyXG4gICAgICAgIHRzaDI1WzRdID0ga1NxcnQwMTA0ICogKCh0c2gxM1syXSAqIHRzaDEzWzJdIC0gdHNoMTNbMF0gKiB0c2gxM1swXSkgLSAodHNoMTFbMl0gKiB0c2gxMVsyXSAtIHRzaDExWzBdICogdHNoMTFbMF0pKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3Q1KGluMSwgaW4yLCBpbjMsIGluNCwgaW41LCB0c2gyNSwgb3V0NSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBwYXJzZUhlYWRlcihidWZmZXIpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQ4ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDE2ID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gMik7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheUZsb2F0MzIgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgY29uc3QgdmVyc2lvbk1ham9yID0gaGVhZGVyQXJyYXlVaW50OFswXTtcclxuICAgICAgICBjb25zdCB2ZXJzaW9uTWlub3IgPSBoZWFkZXJBcnJheVVpbnQ4WzFdO1xyXG4gICAgICAgIGNvbnN0IG1heFNlY3Rpb25Db3VudCA9IGhlYWRlckFycmF5VWludDMyWzFdO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25Db3VudCA9IGhlYWRlckFycmF5VWludDMyWzJdO1xyXG4gICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSBoZWFkZXJBcnJheVVpbnQzMlszXTtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gaGVhZGVyQXJyYXlVaW50MzJbNF07XHJcbiAgICAgICAgY29uc3QgY29tcHJlc3Npb25MZXZlbCA9IGhlYWRlckFycmF5VWludDE2WzEwXTtcclxuICAgICAgICBjb25zdCBzY2VuZUNlbnRlciA9IG5ldyBWZWN0b3IzKGhlYWRlckFycmF5RmxvYXQzMls2XSwgaGVhZGVyQXJyYXlGbG9hdDMyWzddLCBoZWFkZXJBcnJheUZsb2F0MzJbOF0pO1xyXG5cclxuICAgICAgICBjb25zdCBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IGhlYWRlckFycmF5RmxvYXQzMls5XSB8fCAtRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZTtcclxuICAgICAgICBjb25zdCBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IGhlYWRlckFycmF5RmxvYXQzMlsxMF0gfHwgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmVyc2lvbk1ham9yLFxyXG4gICAgICAgICAgICB2ZXJzaW9uTWlub3IsXHJcbiAgICAgICAgICAgIG1heFNlY3Rpb25Db3VudCxcclxuICAgICAgICAgICAgc2VjdGlvbkNvdW50LFxyXG4gICAgICAgICAgICBtYXhTcGxhdENvdW50LFxyXG4gICAgICAgICAgICBzcGxhdENvdW50LFxyXG4gICAgICAgICAgICBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICBzY2VuZUNlbnRlcixcclxuICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsXHJcbiAgICAgICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgd3JpdGVIZWFkZXJDb3VudHNUb0J1ZmZlcihzZWN0aW9uQ291bnQsIHNwbGF0Q291bnQsIGJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MzJbMl0gPSBzZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MzJbNF0gPSBzcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3cml0ZUhlYWRlclRvQnVmZmVyKGhlYWRlciwgYnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50OCA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQxNiA9IG5ldyBVaW50MTZBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDIpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlGbG9hdDMyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDhbMF0gPSBoZWFkZXIudmVyc2lvbk1ham9yO1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDhbMV0gPSBoZWFkZXIudmVyc2lvbk1pbm9yO1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDhbMl0gPSAwOyAvLyB1bnVzZWQgZm9yIG5vd1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDhbM10gPSAwOyAvLyB1bnVzZWQgZm9yIG5vd1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDMyWzFdID0gaGVhZGVyLm1heFNlY3Rpb25Db3VudDtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQzMlsyXSA9IGhlYWRlci5zZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MzJbM10gPSBoZWFkZXIubWF4U3BsYXRDb3VudDtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQzMls0XSA9IGhlYWRlci5zcGxhdENvdW50O1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDE2WzEwXSA9IGhlYWRlci5jb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgIGhlYWRlckFycmF5RmxvYXQzMls2XSA9IGhlYWRlci5zY2VuZUNlbnRlci54O1xyXG4gICAgICAgIGhlYWRlckFycmF5RmxvYXQzMls3XSA9IGhlYWRlci5zY2VuZUNlbnRlci55O1xyXG4gICAgICAgIGhlYWRlckFycmF5RmxvYXQzMls4XSA9IGhlYWRlci5zY2VuZUNlbnRlci56O1xyXG4gICAgICAgIGhlYWRlckFycmF5RmxvYXQzMls5XSA9IGhlYWRlci5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiB8fCAtRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZTtcclxuICAgICAgICBoZWFkZXJBcnJheUZsb2F0MzJbMTBdID0gaGVhZGVyLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmIHx8IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBhcnNlU2VjdGlvbkhlYWRlcnMoaGVhZGVyLCBidWZmZXIsIG9mZnNldCA9IDAsIHNlY0xvYWRlZENvdW50c1RvTWF4KSB7XHJcbiAgICAgICAgY29uc3QgY29tcHJlc3Npb25MZXZlbCA9IGhlYWRlci5jb21wcmVzc2lvbkxldmVsO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhTZWN0aW9uQ291bnQgPSBoZWFkZXIubWF4U2VjdGlvbkNvdW50O1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQxNiA9IG5ldyBVaW50MTZBcnJheShidWZmZXIsIG9mZnNldCwgbWF4U2VjdGlvbkNvdW50ICogU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDIpO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIsIG9mZnNldCwgbWF4U2VjdGlvbkNvdW50ICogU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJBcnJheUZsb2F0MzIgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBtYXhTZWN0aW9uQ291bnQgKiBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJzID0gW107XHJcbiAgICAgICAgbGV0IHNlY3Rpb25IZWFkZXJCYXNlID0gMDtcclxuICAgICAgICBsZXQgc2VjdGlvbkhlYWRlckJhc2VVaW50MTYgPSBzZWN0aW9uSGVhZGVyQmFzZSAvIDI7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25IZWFkZXJCYXNlVWludDMyID0gc2VjdGlvbkhlYWRlckJhc2UgLyA0O1xyXG4gICAgICAgIGxldCBzZWN0aW9uQmFzZSA9IFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyArIGhlYWRlci5tYXhTZWN0aW9uQ291bnQgKiBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgIGxldCBzcGxhdENvdW50T2Zmc2V0ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFNlY3Rpb25Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyAxXTtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0U2l6ZSA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDJdO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRDb3VudCA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDNdO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRCbG9ja1NpemUgPSBzZWN0aW9uSGVhZGVyQXJyYXlGbG9hdDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgNF07XHJcbiAgICAgICAgICAgIGNvbnN0IGhhbGZCdWNrZXRCbG9ja1NpemUgPSBidWNrZXRCbG9ja1NpemUgLyAyLjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXMgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MTZbc2VjdGlvbkhlYWRlckJhc2VVaW50MTYgKyAxMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzaW9uU2NhbGVSYW5nZSA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDZdIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLlNjYWxlUmFuZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxCdWNrZXRDb3VudCA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDhdO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDldO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRzTWV0YURhdGFTaXplQnl0ZXMgPSBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCAqIDQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldHNTdG9yYWdlU2l6ZUJ5dGVzID0gYnVja2V0U3RvcmFnZVNpemVCeXRlcyAqIGJ1Y2tldENvdW50ICsgYnVja2V0c01ldGFEYXRhU2l6ZUJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gc2VjdGlvbkhlYWRlckFycmF5VWludDE2W3NlY3Rpb25IZWFkZXJCYXNlVWludDE2ICsgMjBdO1xyXG4gICAgICAgICAgICBjb25zdCB7IGJ5dGVzUGVyU3BsYXQgfSA9IFNwbGF0QnVmZmVyLmNhbGN1bGF0ZUNvbXBvbmVudFN0b3JhZ2UoY29tcHJlc3Npb25MZXZlbCwgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0RGF0YVN0b3JhZ2VTaXplQnl0ZXMgPSBieXRlc1BlclNwbGF0ICogbWF4U3BsYXRDb3VudDtcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmFnZVNpemVCeXRlcyA9IHNwbGF0RGF0YVN0b3JhZ2VTaXplQnl0ZXMgKyBidWNrZXRzU3RvcmFnZVNpemVCeXRlcztcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlciA9IHtcclxuICAgICAgICAgICAgICAgIGJ5dGVzUGVyU3BsYXQ6IGJ5dGVzUGVyU3BsYXQsXHJcbiAgICAgICAgICAgICAgICBzcGxhdENvdW50T2Zmc2V0OiBzcGxhdENvdW50T2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgc3BsYXRDb3VudDogc2VjTG9hZGVkQ291bnRzVG9NYXggPyBtYXhTcGxhdENvdW50IDogMCxcclxuICAgICAgICAgICAgICAgIG1heFNwbGF0Q291bnQ6IG1heFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRTaXplOiBidWNrZXRTaXplLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0Q291bnQ6IGJ1Y2tldENvdW50LFxyXG4gICAgICAgICAgICAgICAgYnVja2V0QmxvY2tTaXplOiBidWNrZXRCbG9ja1NpemUsXHJcbiAgICAgICAgICAgICAgICBoYWxmQnVja2V0QmxvY2tTaXplOiBoYWxmQnVja2V0QmxvY2tTaXplLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0U3RvcmFnZVNpemVCeXRlczogYnVja2V0U3RvcmFnZVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldHNTdG9yYWdlU2l6ZUJ5dGVzOiBidWNrZXRzU3RvcmFnZVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIHNwbGF0RGF0YVN0b3JhZ2VTaXplQnl0ZXM6IHNwbGF0RGF0YVN0b3JhZ2VTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlU2l6ZUJ5dGVzOiBzdG9yYWdlU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3Npb25TY2FsZVJhbmdlOiBjb21wcmVzc2lvblNjYWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc2lvblNjYWxlRmFjdG9yOiBoYWxmQnVja2V0QmxvY2tTaXplIC8gY29tcHJlc3Npb25TY2FsZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgYmFzZTogc2VjdGlvbkJhc2UsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRzQmFzZTogc2VjdGlvbkJhc2UgKyBidWNrZXRzTWV0YURhdGFTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBkYXRhQmFzZTogc2VjdGlvbkJhc2UgKyBidWNrZXRzU3RvcmFnZVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIGZ1bGxCdWNrZXRDb3VudDogZnVsbEJ1Y2tldENvdW50LFxyXG4gICAgICAgICAgICAgICAgcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQ6IHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50LFxyXG4gICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlOiBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc2VjdGlvbkhlYWRlcnNbaV0gPSBzZWN0aW9uSGVhZGVyO1xyXG4gICAgICAgICAgICBzZWN0aW9uQmFzZSArPSBzdG9yYWdlU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyQmFzZSArPSBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyQmFzZVVpbnQxNiA9IHNlY3Rpb25IZWFkZXJCYXNlIC8gMjtcclxuICAgICAgICAgICAgc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgPSBzZWN0aW9uSGVhZGVyQmFzZSAvIDQ7XHJcbiAgICAgICAgICAgIHNwbGF0Q291bnRPZmZzZXQgKz0gbWF4U3BsYXRDb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzZWN0aW9uSGVhZGVycztcclxuICAgIH1cclxuXHJcblxyXG4gICAgc3RhdGljIHdyaXRlU2VjdGlvbkhlYWRlclRvQnVmZmVyKHNlY3Rpb25IZWFkZXIsIGNvbXByZXNzaW9uTGV2ZWwsIGJ1ZmZlciwgb2Zmc2V0ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZUFycmF5VWludDE2ID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gMik7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCBvZmZzZXQsIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVBcnJheUZsb2F0MzIgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcblxyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzBdID0gc2VjdGlvbkhlYWRlci5zcGxhdENvdW50O1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzFdID0gc2VjdGlvbkhlYWRlci5tYXhTcGxhdENvdW50O1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzJdID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gc2VjdGlvbkhlYWRlci5idWNrZXRTaXplIDogMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMlszXSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IHNlY3Rpb25IZWFkZXIuYnVja2V0Q291bnQgOiAwO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5RmxvYXQzMls0XSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IHNlY3Rpb25IZWFkZXIuYnVja2V0QmxvY2tTaXplIDogMC4wO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDE2WzEwXSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IFNwbGF0QnVmZmVyLkJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXMgOiAwO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzZdID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gc2VjdGlvbkhlYWRlci5jb21wcmVzc2lvblNjYWxlUmFuZ2UgOiAwO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzddID0gc2VjdGlvbkhlYWRlci5zdG9yYWdlU2l6ZUJ5dGVzO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzhdID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gc2VjdGlvbkhlYWRlci5mdWxsQnVja2V0Q291bnQgOiAwO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzldID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gc2VjdGlvbkhlYWRlci5wYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCA6IDA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MTZbMjBdID0gc2VjdGlvbkhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWU7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3cml0ZVNlY3Rpb25IZWFkZXJTcGxhdENvdW50VG9CdWZmZXIoc3BsYXRDb3VudCwgYnVmZmVyLCBvZmZzZXQgPSAwKSB7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCBvZmZzZXQsIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMlswXSA9IHNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0RnJvbUJ1ZmZlcihidWZmZXJEYXRhLCBzZWNMb2FkZWRDb3VudHNUb01heCkge1xyXG4gICAgICAgIHRoaXMuYnVmZmVyRGF0YSA9IGJ1ZmZlckRhdGE7XHJcblxyXG4gICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvTG9jYWxTcGxhdEluZGV4TWFwID0gW107XHJcbiAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IFNwbGF0QnVmZmVyLnBhcnNlSGVhZGVyKHRoaXMuYnVmZmVyRGF0YSk7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uTWFqb3IgPSBoZWFkZXIudmVyc2lvbk1ham9yO1xyXG4gICAgICAgIHRoaXMudmVyc2lvbk1pbm9yID0gaGVhZGVyLnZlcnNpb25NaW5vcjtcclxuICAgICAgICB0aGlzLm1heFNlY3Rpb25Db3VudCA9IGhlYWRlci5tYXhTZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uQ291bnQgPSBzZWNMb2FkZWRDb3VudHNUb01heCA/IGhlYWRlci5tYXhTZWN0aW9uQ291bnQgOiAwO1xyXG4gICAgICAgIHRoaXMubWF4U3BsYXRDb3VudCA9IGhlYWRlci5tYXhTcGxhdENvdW50O1xyXG4gICAgICAgIHRoaXMuc3BsYXRDb3VudCA9IHNlY0xvYWRlZENvdW50c1RvTWF4ID8gaGVhZGVyLm1heFNwbGF0Q291bnQgOiAwO1xyXG4gICAgICAgIHRoaXMuY29tcHJlc3Npb25MZXZlbCA9IGhlYWRlci5jb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgIHRoaXMuc2NlbmVDZW50ZXIgPSBuZXcgVmVjdG9yMygpLmNvcHkoaGVhZGVyLnNjZW5lQ2VudGVyKTtcclxuICAgICAgICB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gaGVhZGVyLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG4gICAgICAgIHRoaXMubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBoZWFkZXIubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcblxyXG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBTcGxhdEJ1ZmZlci5wYXJzZVNlY3Rpb25IZWFkZXJzKGhlYWRlciwgdGhpcy5idWZmZXJEYXRhLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMsIHNlY0xvYWRlZENvdW50c1RvTWF4KTtcclxuXHJcbiAgICAgICAgdGhpcy5saW5rQnVmZmVyQXJyYXlzKCk7XHJcbiAgICAgICAgdGhpcy5idWlsZE1hcHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2FsY3VsYXRlQ29tcG9uZW50U3RvcmFnZShjb21wcmVzc2lvbkxldmVsLCBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIHtcclxuICAgICAgICBjb25zdCBieXRlc1BlckNlbnRlciA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyQ2VudGVyO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzUGVyU2NhbGUgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlclNjYWxlO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzUGVyUm90YXRpb24gPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlclJvdGF0aW9uO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzUGVyQ29sb3IgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlckNvbG9yO1xyXG4gICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNQZXJTcGxhdCA9IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNzQnl0ZXNQZXJTcGxhdCA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyU3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50ICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c1BlclNwbGF0O1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzUGVyU3BsYXQgPSBieXRlc1BlckNlbnRlciArIGJ5dGVzUGVyU2NhbGUgKyBieXRlc1BlclJvdGF0aW9uICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNQZXJDb2xvciArIHNwaGVyaWNhbEhhcm1vbmljc0J5dGVzUGVyU3BsYXQ7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYnl0ZXNQZXJDZW50ZXIsXHJcbiAgICAgICAgICAgIGJ5dGVzUGVyU2NhbGUsXHJcbiAgICAgICAgICAgIGJ5dGVzUGVyUm90YXRpb24sXHJcbiAgICAgICAgICAgIGJ5dGVzUGVyQ29sb3IsXHJcbiAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNQZXJTcGxhdCxcclxuICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzQnl0ZXNQZXJTcGxhdCxcclxuICAgICAgICAgICAgYnl0ZXNQZXJTcGxhdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbGlua0J1ZmZlckFycmF5cygpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF4U2VjdGlvbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbaV07XHJcbiAgICAgICAgICAgIHNlY3Rpb24uYnVja2V0QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5idWNrZXRzQmFzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5idWNrZXRDb3VudCAqIFNwbGF0QnVmZmVyLkJ1Y2tldFN0b3JhZ2VTaXplRmxvYXRzKTtcclxuICAgICAgICAgICAgaWYgKHNlY3Rpb24ucGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uLnBhcnRpYWxseUZpbGxlZEJ1Y2tldExlbmd0aHMgPSBuZXcgVWludDMyQXJyYXkodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmJhc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5wYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRNYXBzKCkge1xyXG4gICAgICAgIGxldCBjdW11bGF0aXZlU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFNlY3Rpb25Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW2ldO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNlY3Rpb24ubWF4U3BsYXRDb3VudDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxTcGxhdEluZGV4ID0gY3VtdWxhdGl2ZVNwbGF0Q291bnQgKyBqO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9Mb2NhbFNwbGF0SW5kZXhNYXBbZ2xvYmFsU3BsYXRJbmRleF0gPSBqO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2dsb2JhbFNwbGF0SW5kZXhdID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdW11bGF0aXZlU3BsYXRDb3VudCArPSBzZWN0aW9uLm1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxvYWRlZENvdW50cyhuZXdTZWN0aW9uQ291bnQsIG5ld1NwbGF0Q291bnQpIHtcclxuICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZUhlYWRlckNvdW50c1RvQnVmZmVyKG5ld1NlY3Rpb25Db3VudCwgbmV3U3BsYXRDb3VudCwgdGhpcy5idWZmZXJEYXRhKTtcclxuICAgICAgICB0aGlzLnNlY3Rpb25Db3VudCA9IG5ld1NlY3Rpb25Db3VudDtcclxuICAgICAgICB0aGlzLnNwbGF0Q291bnQgPSBuZXdTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNlY3Rpb25Mb2FkZWRDb3VudHMoc2VjdGlvbkluZGV4LCBuZXdTcGxhdENvdW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlck9mZnNldCA9IFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyArIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgKiBzZWN0aW9uSW5kZXg7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVTZWN0aW9uSGVhZGVyU3BsYXRDb3VudFRvQnVmZmVyKG5ld1NwbGF0Q291bnQsIHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbkhlYWRlck9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdLnNwbGF0Q291bnQgPSBuZXdTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3cml0ZVNwbGF0RGF0YVRvU2VjdGlvbkJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wQ2VudGVyQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDEyKTtcclxuICAgICAgICBjb25zdCB0ZW1wU2NhbGVCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTIpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBSb3RhdGlvbkJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxNik7XHJcbiAgICAgICAgY29uc3QgdGVtcENvbG9yQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBTSEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigyNTYpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBSb3QgPSBuZXcgUXVhdGVybmlvbigpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBTY2FsZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgYnVja2V0Q2VudGVyRGVsdGEgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIFg6IE9GRlNFVF9YLCBZOiBPRkZTRVRfWSwgWjogT0ZGU0VUX1osXHJcbiAgICAgICAgICAgIFNDQUxFMDogT0ZGU0VUX1NDQUxFMCwgU0NBTEUxOiBPRkZTRVRfU0NBTEUxLCBTQ0FMRTI6IE9GRlNFVF9TQ0FMRTIsXHJcbiAgICAgICAgICAgIFJPVEFUSU9OMDogT0ZGU0VUX1JPVDAsIFJPVEFUSU9OMTogT0ZGU0VUX1JPVDEsIFJPVEFUSU9OMjogT0ZGU0VUX1JPVDIsIFJPVEFUSU9OMzogT0ZGU0VUX1JPVDMsXHJcbiAgICAgICAgICAgIEZEQzA6IE9GRlNFVF9GREMwLCBGREMxOiBPRkZTRVRfRkRDMSwgRkRDMjogT0ZGU0VUX0ZEQzIsIE9QQUNJVFk6IE9GRlNFVF9PUEFDSVRZLFxyXG4gICAgICAgICAgICBGUkMwOiBPRkZTRVRfRlJDMCwgRlJDOTogT0ZGU0VUX0ZSQzksXHJcbiAgICAgICAgfSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VUO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wcmVzc1Bvc2l0aW9uT2Zmc2V0ID0gKHYsIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IsIGNvbXByZXNzaW9uU2NhbGVSYW5nZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkb3VibGVDb21wcmVzc2lvblNjYWxlUmFuZ2UgPSBjb21wcmVzc2lvblNjYWxlUmFuZ2UgKiAyICsgMTtcclxuICAgICAgICAgICAgdiA9IE1hdGgucm91bmQodiAqIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IpICsgY29tcHJlc3Npb25TY2FsZVJhbmdlO1xyXG4gICAgICAgICAgICByZXR1cm4gY2xhbXAodiwgMCwgZG91YmxlQ29tcHJlc3Npb25TY2FsZVJhbmdlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odGFyZ2V0U3BsYXQsIHNlY3Rpb25CdWZmZXIsIGJ1ZmZlck9mZnNldCwgY29tcHJlc3Npb25MZXZlbCwgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXIsIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IsIGNvbXByZXNzaW9uU2NhbGVSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSAtRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBEZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlKSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzUGVyU3BsYXQgPSBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZShzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlc1BlckNlbnRlciA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyQ2VudGVyO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlc1BlclNjYWxlID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJTY2FsZTtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXNQZXJSb3RhdGlvbiA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyUm90YXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzUGVyQ29sb3IgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlckNvbG9yO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2VudGVyQmFzZSA9IGJ1ZmZlck9mZnNldDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVCYXNlID0gY2VudGVyQmFzZSArIGJ5dGVzUGVyQ2VudGVyO1xyXG4gICAgICAgICAgICBjb25zdCByb3RhdGlvbkJhc2UgPSBzY2FsZUJhc2UgKyBieXRlc1BlclNjYWxlO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvckJhc2UgPSByb3RhdGlvbkJhc2UgKyBieXRlc1BlclJvdGF0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3NCYXNlID0gY29sb3JCYXNlICsgYnl0ZXNQZXJDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRTcGxhdFtPRkZTRVRfUk9UMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGVtcFJvdC5zZXQodGFyZ2V0U3BsYXRbT0ZGU0VUX1JPVDBdLCB0YXJnZXRTcGxhdFtPRkZTRVRfUk9UMV0sIHRhcmdldFNwbGF0W09GRlNFVF9ST1QyXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1JPVDNdKTtcclxuICAgICAgICAgICAgICAgIHRlbXBSb3Qubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUm90LnNldCgxLjAsIDAuMCwgMC4wLCAwLjApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0U3BsYXRbT0ZGU0VUX1NDQUxFMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGVtcFNjYWxlLnNldCh0YXJnZXRTcGxhdFtPRkZTRVRfU0NBTEUwXSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcGxhdFtPRkZTRVRfU0NBTEUxXSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcGxhdFtPRkZTRVRfU0NBTEUyXSB8fCAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRlbXBTY2FsZS5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBuZXcgRmxvYXQzMkFycmF5KHNlY3Rpb25CdWZmZXIsIGNlbnRlckJhc2UsIFNwbGF0QnVmZmVyLkNlbnRlckNvbXBvbmVudENvdW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdCA9IG5ldyBGbG9hdDMyQXJyYXkoc2VjdGlvbkJ1ZmZlciwgcm90YXRpb25CYXNlLCBTcGxhdEJ1ZmZlci5Sb3RhdGlvbkNvbXBvbmVudENvdW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IEZsb2F0MzJBcnJheShzZWN0aW9uQnVmZmVyLCBzY2FsZUJhc2UsIFNwbGF0QnVmZmVyLlNjYWxlQ29tcG9uZW50Q291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJvdC5zZXQoW3RlbXBSb3QueCwgdGVtcFJvdC55LCB0ZW1wUm90LnosIHRlbXBSb3Qud10pO1xyXG4gICAgICAgICAgICAgICAgc2NhbGUuc2V0KFt0ZW1wU2NhbGUueCwgdGVtcFNjYWxlLnksIHRlbXBTY2FsZS56XSk7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIuc2V0KFt0YXJnZXRTcGxhdFtPRkZTRVRfWF0sIHRhcmdldFNwbGF0W09GRlNFVF9ZXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1pdXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaE91dCA9IG5ldyBGbG9hdDMyQXJyYXkoc2VjdGlvbkJ1ZmZlciwgc3BoZXJpY2FsSGFybW9uaWNzQmFzZSwgc3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c1BlclNwbGF0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgOTsgcysrKSBzaE91dFtzXSA9IHRhcmdldFNwbGF0W09GRlNFVF9GUkMwICsgc10gfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgMTU7IHMrKykgc2hPdXRbcyArIDldID0gdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZSQzkgKyBzXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBVaW50MTZBcnJheSh0ZW1wQ2VudGVyQnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5DZW50ZXJDb21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3QgPSBuZXcgVWludDE2QXJyYXkodGVtcFJvdGF0aW9uQnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5Sb3RhdGlvbkNvbXBvbmVudENvdW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IFVpbnQxNkFycmF5KHRlbXBTY2FsZUJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuU2NhbGVDb21wb25lbnRDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm90LnNldChbdG9IYWxmRmxvYXQodGVtcFJvdC54KSwgdG9IYWxmRmxvYXQodGVtcFJvdC55KSwgdG9IYWxmRmxvYXQodGVtcFJvdC56KSwgdG9IYWxmRmxvYXQodGVtcFJvdC53KV0pO1xyXG4gICAgICAgICAgICAgICAgc2NhbGUuc2V0KFt0b0hhbGZGbG9hdCh0ZW1wU2NhbGUueCksIHRvSGFsZkZsb2F0KHRlbXBTY2FsZS55KSwgdG9IYWxmRmxvYXQodGVtcFNjYWxlLnopXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyRGVsdGEuc2V0KHRhcmdldFNwbGF0W09GRlNFVF9YXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1ldLCB0YXJnZXRTcGxhdFtPRkZTRVRfWl0pLnN1YihidWNrZXRDZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyRGVsdGEueCA9IGNvbXByZXNzUG9zaXRpb25PZmZzZXQoYnVja2V0Q2VudGVyRGVsdGEueCwgY29tcHJlc3Npb25TY2FsZUZhY3RvciwgY29tcHJlc3Npb25TY2FsZVJhbmdlKTtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlckRlbHRhLnkgPSBjb21wcmVzc1Bvc2l0aW9uT2Zmc2V0KGJ1Y2tldENlbnRlckRlbHRhLnksIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IsIGNvbXByZXNzaW9uU2NhbGVSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXJEZWx0YS56ID0gY29tcHJlc3NQb3NpdGlvbk9mZnNldChidWNrZXRDZW50ZXJEZWx0YS56LCBjb21wcmVzc2lvblNjYWxlRmFjdG9yLCBjb21wcmVzc2lvblNjYWxlUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnNldChbYnVja2V0Q2VudGVyRGVsdGEueCwgYnVja2V0Q2VudGVyRGVsdGEueSwgYnVja2V0Q2VudGVyRGVsdGEuel0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgU0hBcnJheVR5cGUgPSBjb21wcmVzc2lvbkxldmVsID09PSAxID8gVWludDE2QXJyYXkgOiBVaW50OEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGVzUGVyU0hDb21wb25lbnQgPSBjb21wcmVzc2lvbkxldmVsID09PSAxID8gMiA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hPdXQgPSBuZXcgU0hBcnJheVR5cGUodGVtcFNIQnVmZmVyLCAwLCBzcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzUGVyU3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IDk7IHMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjVmFsID0gdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZSQzAgKyBzXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hPdXRbc10gPSBjb21wcmVzc2lvbkxldmVsID09PSAxID8gdG9IYWxmRmxvYXQoc3JjVmFsKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVWludDgoc3JjVmFsLCBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiwgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZ3JlZTFCeXRlQ291bnQgPSA5ICogYnl0ZXNQZXJTSENvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weUJldHdlZW5CdWZmZXJzKHNoT3V0LmJ1ZmZlciwgMCwgc2VjdGlvbkJ1ZmZlciwgc3BoZXJpY2FsSGFybW9uaWNzQmFzZSwgZGVncmVlMUJ5dGVDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCAxNTsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjVmFsID0gdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZSQzkgKyBzXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoT3V0W3MgKyA5XSA9IGNvbXByZXNzaW9uTGV2ZWwgPT09IDEgPyB0b0hhbGZGbG9hdChzcmNWYWwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VpbnQ4KHNyY1ZhbCwgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlCZXR3ZWVuQnVmZmVycyhzaE91dC5idWZmZXIsIGRlZ3JlZTFCeXRlQ291bnQsIHNlY3Rpb25CdWZmZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzQmFzZSArIGRlZ3JlZTFCeXRlQ291bnQsIDE1ICogYnl0ZXNQZXJTSENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29weUJldHdlZW5CdWZmZXJzKGNlbnRlci5idWZmZXIsIDAsIHNlY3Rpb25CdWZmZXIsIGNlbnRlckJhc2UsIDYpO1xyXG4gICAgICAgICAgICAgICAgY29weUJldHdlZW5CdWZmZXJzKHNjYWxlLmJ1ZmZlciwgMCwgc2VjdGlvbkJ1ZmZlciwgc2NhbGVCYXNlLCA2KTtcclxuICAgICAgICAgICAgICAgIGNvcHlCZXR3ZWVuQnVmZmVycyhyb3QuYnVmZmVyLCAwLCBzZWN0aW9uQnVmZmVyLCByb3RhdGlvbkJhc2UsIDgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZ2JhID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRlbXBDb2xvckJ1ZmZlciwgMCwgNCk7XHJcbiAgICAgICAgICAgIHJnYmEuc2V0KFt0YXJnZXRTcGxhdFtPRkZTRVRfRkRDMF0gfHwgMCwgdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZEQzFdIHx8IDAsIHRhcmdldFNwbGF0W09GRlNFVF9GREMyXSB8fCAwXSk7XHJcbiAgICAgICAgICAgIHJnYmFbM10gPSB0YXJnZXRTcGxhdFtPRkZTRVRfT1BBQ0lUWV0gfHwgMDtcclxuXHJcbiAgICAgICAgICAgIGNvcHlCZXR3ZWVuQnVmZmVycyhyZ2JhLmJ1ZmZlciwgMCwgc2VjdGlvbkJ1ZmZlciwgY29sb3JCYXNlLCA0KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGVGcm9tVW5jb21wcmVzc2VkU3BsYXRBcnJheXMoc3BsYXRBcnJheXMsIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplLCBvcHRpb25zID0gW10pIHtcclxuXHJcbiAgICAgICAgbGV0IHNoRGVncmVlID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzYSA9IDA7IHNhIDwgc3BsYXRBcnJheXMubGVuZ3RoOyBzYSArKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEFycmF5ID0gc3BsYXRBcnJheXNbc2FdO1xyXG4gICAgICAgICAgICBzaERlZ3JlZSA9IE1hdGgubWF4KHNwbGF0QXJyYXkuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzaERlZ3JlZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcbiAgICAgICAgbGV0IG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzYSA9IDA7IHNhIDwgc3BsYXRBcnJheXMubGVuZ3RoOyBzYSArKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEFycmF5ID0gc3BsYXRBcnJheXNbc2FdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0QXJyYXkuc3BsYXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxhdCA9IHNwbGF0QXJyYXkuc3BsYXRzW2ldO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc2MgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5GUkMwOyBzYyA8IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULkZSQzIzICYmIHNjIDwgc3BsYXQubGVuZ3RoOyBzYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiB8fCBzcGxhdFtzY10gPCBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IHNwbGF0W3NjXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiB8fCBzcGxhdFtzY10gPiBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IHNwbGF0W3NjXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgfHwgLURlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2U7XHJcbiAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiB8fCBEZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlO1xyXG5cclxuICAgICAgICBjb25zdCB7IGJ5dGVzUGVyU3BsYXQgfSA9IFNwbGF0QnVmZmVyLmNhbGN1bGF0ZUNvbXBvbmVudFN0b3JhZ2UoY29tcHJlc3Npb25MZXZlbCwgc2hEZWdyZWUpO1xyXG4gICAgICAgIGNvbnN0IGNvbXByZXNzaW9uU2NhbGVSYW5nZSA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLlNjYWxlUmFuZ2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25CdWZmZXJzID0gW107XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlckJ1ZmZlcnMgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxTcGxhdENvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgc2EgPSAwOyBzYSA8IHNwbGF0QXJyYXlzLmxlbmd0aDsgc2EgKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRBcnJheSA9IHNwbGF0QXJyYXlzW3NhXTtcclxuICAgICAgICAgICAgY29uc3QgdmFsaWRTcGxhdHMgPSBuZXcgVW5jb21wcmVzc2VkU3BsYXRBcnJheShzaERlZ3JlZSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRBcnJheS5zcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNwbGF0ID0gc3BsYXRBcnJheS5zcGxhdHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULk9QQUNJVFldIHx8IDApID49IG1pbmltdW1BbHBoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkU3BsYXRzLmFkZFNwbGF0KHRhcmdldFNwbGF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbk9wdGlvbnMgPSBvcHRpb25zW3NhXSB8fCB7fTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkJsb2NrU2l6ZSA9IChzZWN0aW9uT3B0aW9ucy5ibG9ja1NpemVGYWN0b3IgfHwgMSkgKiAoYmxvY2tTaXplIHx8IFNwbGF0QnVmZmVyLkJ1Y2tldEJsb2NrU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25CdWNrZXRTaXplID0gTWF0aC5jZWlsKChzZWN0aW9uT3B0aW9ucy5idWNrZXRTaXplRmFjdG9yIHx8IDEpICogKGJ1Y2tldFNpemUgfHwgU3BsYXRCdWZmZXIuQnVja2V0U2l6ZSkpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYnVja2V0SW5mbyA9IFNwbGF0QnVmZmVyLmNvbXB1dGVCdWNrZXRzRm9yVW5jb21wcmVzc2VkU3BsYXRBcnJheSh2YWxpZFNwbGF0cywgc2VjdGlvbkJsb2NrU2l6ZSwgc2VjdGlvbkJ1Y2tldFNpemUpO1xyXG4gICAgICAgICAgICBjb25zdCBmdWxsQnVja2V0Q291bnQgPSBidWNrZXRJbmZvLmZ1bGxCdWNrZXRzLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgcGFydGlhbGx5RnVsbEJ1Y2tldExlbmd0aHMgPSBidWNrZXRJbmZvLnBhcnRpYWxseUZ1bGxCdWNrZXRzLm1hcCgoYnVja2V0KSA9PiBidWNrZXQuc3BsYXRzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50ID0gcGFydGlhbGx5RnVsbEJ1Y2tldExlbmd0aHMubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRzID0gWy4uLmJ1Y2tldEluZm8uZnVsbEJ1Y2tldHMsIC4uLmJ1Y2tldEluZm8ucGFydGlhbGx5RnVsbEJ1Y2tldHNdO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkRhdGFTaXplQnl0ZXMgPSB2YWxpZFNwbGF0cy5zcGxhdHMubGVuZ3RoICogYnl0ZXNQZXJTcGxhdDtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0TWV0YURhdGFTaXplQnl0ZXMgPSBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCAqIDQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldERhdGFCeXRlcyA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IGJ1Y2tldHMubGVuZ3RoICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQnVja2V0U3RvcmFnZVNpemVCeXRlcyArIGJ1Y2tldE1ldGFEYXRhU2l6ZUJ5dGVzIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvblNpemVCeXRlcyA9IHNlY3Rpb25EYXRhU2l6ZUJ5dGVzICsgYnVja2V0RGF0YUJ5dGVzO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHNlY3Rpb25TaXplQnl0ZXMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29tcHJlc3Npb25TY2FsZUZhY3RvciA9IGNvbXByZXNzaW9uU2NhbGVSYW5nZSAvIChzZWN0aW9uQmxvY2tTaXplICogMC41KTtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0Q2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBvdXRTcGxhdENvdW50ID0gMDtcclxuICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBidWNrZXRzLmxlbmd0aDsgYisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXQgPSBidWNrZXRzW2JdO1xyXG4gICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyLmZyb21BcnJheShidWNrZXQuY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVja2V0LnNwbGF0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByb3cgPSBidWNrZXQuc3BsYXRzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNwbGF0ID0gdmFsaWRTcGxhdHMuc3BsYXRzW3Jvd107XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyT2Zmc2V0ID0gYnVja2V0RGF0YUJ5dGVzICsgb3V0U3BsYXRDb3VudCAqIGJ5dGVzUGVyU3BsYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVTcGxhdERhdGFUb1NlY3Rpb25CdWZmZXIodGFyZ2V0U3BsYXQsIHNlY3Rpb25CdWZmZXIsIGJ1ZmZlck9mZnNldCwgY29tcHJlc3Npb25MZXZlbCwgc2hEZWdyZWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyLCBjb21wcmVzc2lvblNjYWxlRmFjdG9yLCBjb21wcmVzc2lvblNjYWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRTcGxhdENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG90YWxTcGxhdENvdW50ICs9IG91dFNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tcHJlc3Npb25MZXZlbCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXRNZXRhRGF0YUFycmF5ID0gbmV3IFVpbnQzMkFycmF5KHNlY3Rpb25CdWZmZXIsIDAsIHBhcnRpYWxseUZ1bGxCdWNrZXRMZW5ndGhzLmxlbmd0aCAqIDQpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcGZiID0gMDsgcGZiIDwgcGFydGlhbGx5RnVsbEJ1Y2tldExlbmd0aHMubGVuZ3RoOyBwZmIgKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXRNZXRhRGF0YUFycmF5W3BmYl0gPSBwYXJ0aWFsbHlGdWxsQnVja2V0TGVuZ3Roc1twZmJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0QXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHNlY3Rpb25CdWZmZXIsIGJ1Y2tldE1ldGFEYXRhU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldHMubGVuZ3RoICogU3BsYXRCdWZmZXIuQnVja2V0U3RvcmFnZVNpemVGbG9hdHMpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYiA9IDA7IGIgPCBidWNrZXRzLmxlbmd0aDsgYisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0c1tiXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gYiAqIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0QXJyYXlbYmFzZV0gPSBidWNrZXQuY2VudGVyWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldEFycmF5W2Jhc2UgKyAxXSA9IGJ1Y2tldC5jZW50ZXJbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0QXJyYXlbYmFzZSArIDJdID0gYnVja2V0LmNlbnRlclsyXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWN0aW9uQnVmZmVycy5wdXNoKHNlY3Rpb25CdWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlckJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzKTtcclxuICAgICAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVTZWN0aW9uSGVhZGVyVG9CdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudDogb3V0U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IG91dFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRTaXplOiBzZWN0aW9uQnVja2V0U2l6ZSxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldENvdW50OiBidWNrZXRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldEJsb2NrU2l6ZTogc2VjdGlvbkJsb2NrU2l6ZSxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uU2NhbGVSYW5nZTogY29tcHJlc3Npb25TY2FsZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVNpemVCeXRlczogc2VjdGlvblNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIGZ1bGxCdWNrZXRDb3VudDogZnVsbEJ1Y2tldENvdW50LFxyXG4gICAgICAgICAgICAgICAgcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQ6IHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50LFxyXG4gICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlOiBzaERlZ3JlZVxyXG4gICAgICAgICAgICB9LCBjb21wcmVzc2lvbkxldmVsLCBzZWN0aW9uSGVhZGVyQnVmZmVyLCAwKTtcclxuICAgICAgICAgICAgc2VjdGlvbkhlYWRlckJ1ZmZlcnMucHVzaChzZWN0aW9uSGVhZGVyQnVmZmVyKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2VjdGlvbnNDdW11bGF0aXZlU2l6ZUJ5dGVzID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzZWN0aW9uQnVmZmVyIG9mIHNlY3Rpb25CdWZmZXJzKSBzZWN0aW9uc0N1bXVsYXRpdmVTaXplQnl0ZXMgKz0gc2VjdGlvbkJ1ZmZlci5ieXRlTGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHVuaWZpZWRCdWZmZXJTaXplID0gU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgKiBzZWN0aW9uQnVmZmVycy5sZW5ndGggKyBzZWN0aW9uc0N1bXVsYXRpdmVTaXplQnl0ZXM7XHJcbiAgICAgICAgY29uc3QgdW5pZmllZEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcih1bmlmaWVkQnVmZmVyU2l6ZSk7XHJcblxyXG4gICAgICAgIFNwbGF0QnVmZmVyLndyaXRlSGVhZGVyVG9CdWZmZXIoe1xyXG4gICAgICAgICAgICB2ZXJzaW9uTWFqb3I6IDAsXHJcbiAgICAgICAgICAgIHZlcnNpb25NaW5vcjogMSxcclxuICAgICAgICAgICAgbWF4U2VjdGlvbkNvdW50OiBzZWN0aW9uQnVmZmVycy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHNlY3Rpb25Db3VudDogc2VjdGlvbkJ1ZmZlcnMubGVuZ3RoLFxyXG4gICAgICAgICAgICBtYXhTcGxhdENvdW50OiB0b3RhbFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgIHNwbGF0Q291bnQ6IHRvdGFsU3BsYXRDb3VudCxcclxuICAgICAgICAgICAgY29tcHJlc3Npb25MZXZlbDogY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgc2NlbmVDZW50ZXI6IHNjZW5lQ2VudGVyLFxyXG4gICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZjogbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsXHJcbiAgICAgICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmOiBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZlxyXG4gICAgICAgIH0sIHVuaWZpZWRCdWZmZXIpO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudFVuaWZpZWRCYXNlID0gU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgIGZvciAobGV0IHNlY3Rpb25IZWFkZXJCdWZmZXIgb2Ygc2VjdGlvbkhlYWRlckJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkodW5pZmllZEJ1ZmZlciwgY3VycmVudFVuaWZpZWRCYXNlLCBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzKS5zZXQobmV3IFVpbnQ4QXJyYXkoc2VjdGlvbkhlYWRlckJ1ZmZlcikpO1xyXG4gICAgICAgICAgICBjdXJyZW50VW5pZmllZEJhc2UgKz0gU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IHNlY3Rpb25CdWZmZXIgb2Ygc2VjdGlvbkJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkodW5pZmllZEJ1ZmZlciwgY3VycmVudFVuaWZpZWRCYXNlLCBzZWN0aW9uQnVmZmVyLmJ5dGVMZW5ndGgpLnNldChuZXcgVWludDhBcnJheShzZWN0aW9uQnVmZmVyKSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRVbmlmaWVkQmFzZSArPSBzZWN0aW9uQnVmZmVyLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IG5ldyBTcGxhdEJ1ZmZlcih1bmlmaWVkQnVmZmVyKTtcclxuICAgICAgICByZXR1cm4gc3BsYXRCdWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNvbXB1dGVCdWNrZXRzRm9yVW5jb21wcmVzc2VkU3BsYXRBcnJheShzcGxhdEFycmF5LCBibG9ja1NpemUsIGJ1Y2tldFNpemUpIHtcclxuICAgICAgICBsZXQgc3BsYXRDb3VudCA9IHNwbGF0QXJyYXkuc3BsYXRDb3VudDtcclxuICAgICAgICBjb25zdCBoYWxmQmxvY2tTaXplID0gYmxvY2tTaXplIC8gMi4wO1xyXG5cclxuICAgICAgICBjb25zdCBtaW4gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFNwbGF0ID0gc3BsYXRBcnJheS5zcGxhdHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IFt0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5YXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWl1dO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBjZW50ZXJbMF0gPCBtaW4ueCkgbWluLnggPSBjZW50ZXJbMF07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGNlbnRlclswXSA+IG1heC54KSBtYXgueCA9IGNlbnRlclswXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgY2VudGVyWzFdIDwgbWluLnkpIG1pbi55ID0gY2VudGVyWzFdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBjZW50ZXJbMV0gPiBtYXgueSkgbWF4LnkgPSBjZW50ZXJbMV07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGNlbnRlclsyXSA8IG1pbi56KSBtaW4ueiA9IGNlbnRlclsyXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgY2VudGVyWzJdID4gbWF4LnopIG1heC56ID0gY2VudGVyWzJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IG5ldyBWZWN0b3IzKCkuY29weShtYXgpLnN1YihtaW4pO1xyXG4gICAgICAgIGNvbnN0IHlCbG9ja3MgPSBNYXRoLmNlaWwoZGltZW5zaW9ucy55IC8gYmxvY2tTaXplKTtcclxuICAgICAgICBjb25zdCB6QmxvY2tzID0gTWF0aC5jZWlsKGRpbWVuc2lvbnMueiAvIGJsb2NrU2l6ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJsb2NrQ2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCBmdWxsQnVja2V0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHBhcnRpYWxseUZ1bGxCdWNrZXRzID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFNwbGF0ID0gc3BsYXRBcnJheS5zcGxhdHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IFt0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5YXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWl1dO1xyXG4gICAgICAgICAgICBjb25zdCB4QmxvY2sgPSBNYXRoLmZsb29yKChjZW50ZXJbMF0gLSBtaW4ueCkgLyBibG9ja1NpemUpO1xyXG4gICAgICAgICAgICBjb25zdCB5QmxvY2sgPSBNYXRoLmZsb29yKChjZW50ZXJbMV0gLSBtaW4ueSkgLyBibG9ja1NpemUpO1xyXG4gICAgICAgICAgICBjb25zdCB6QmxvY2sgPSBNYXRoLmZsb29yKChjZW50ZXJbMl0gLSBtaW4ueikgLyBibG9ja1NpemUpO1xyXG5cclxuICAgICAgICAgICAgYmxvY2tDZW50ZXIueCA9IHhCbG9jayAqIGJsb2NrU2l6ZSArIG1pbi54ICsgaGFsZkJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgYmxvY2tDZW50ZXIueSA9IHlCbG9jayAqIGJsb2NrU2l6ZSArIG1pbi55ICsgaGFsZkJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgYmxvY2tDZW50ZXIueiA9IHpCbG9jayAqIGJsb2NrU2l6ZSArIG1pbi56ICsgaGFsZkJsb2NrU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldElkID0geEJsb2NrICogKHlCbG9ja3MgKiB6QmxvY2tzKSArIHlCbG9jayAqIHpCbG9ja3MgKyB6QmxvY2s7XHJcbiAgICAgICAgICAgIGxldCBidWNrZXQgPSBwYXJ0aWFsbHlGdWxsQnVja2V0c1tidWNrZXRJZF07XHJcbiAgICAgICAgICAgIGlmICghYnVja2V0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGdWxsQnVja2V0c1tidWNrZXRJZF0gPSBidWNrZXQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3NwbGF0cyc6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICdjZW50ZXInOiBibG9ja0NlbnRlci50b0FycmF5KClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ1Y2tldC5zcGxhdHMucHVzaChpKTtcclxuICAgICAgICAgICAgaWYgKGJ1Y2tldC5zcGxhdHMubGVuZ3RoID49IGJ1Y2tldFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGZ1bGxCdWNrZXRzLnB1c2goYnVja2V0KTtcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxseUZ1bGxCdWNrZXRzW2J1Y2tldElkXSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnRpYWxseUZ1bGxCdWNrZXRBcnJheSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGJ1Y2tldElkIGluIHBhcnRpYWxseUZ1bGxCdWNrZXRzKSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duKHBhcnRpYWxseUZ1bGxCdWNrZXRzLCBidWNrZXRJZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldCA9IHBhcnRpYWxseUZ1bGxCdWNrZXRzW2J1Y2tldElkXTtcclxuICAgICAgICAgICAgICAgIGlmIChidWNrZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGdWxsQnVja2V0QXJyYXkucHVzaChidWNrZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnZnVsbEJ1Y2tldHMnOiBmdWxsQnVja2V0cyxcclxuICAgICAgICAgICAgJ3BhcnRpYWxseUZ1bGxCdWNrZXRzJzogcGFydGlhbGx5RnVsbEJ1Y2tldEFycmF5LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0UGFydGl0aW9uZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gdGhlIG9yaWdpbmFsLlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgU3BsYXRCdWZmZXIgfSBmcm9tICcuL1NwbGF0QnVmZmVyLmpzJztcclxuaW1wb3J0IHsgVW5jb21wcmVzc2VkU3BsYXRBcnJheSB9IGZyb20gJy4vVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRQYXJ0aXRpb25lciB7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2VjdGlvbkNvdW50LCBzZWN0aW9uRmlsdGVycywgZ3JvdXBpbmdQYXJhbWV0ZXJzLCBwYXJ0aXRpb25HZW5lcmF0b3IpIHtcclxuICAgICAgICB0aGlzLnNlY3Rpb25Db3VudCA9IHNlY3Rpb25Db3VudDtcclxuICAgICAgICB0aGlzLnNlY3Rpb25GaWx0ZXJzID0gc2VjdGlvbkZpbHRlcnM7XHJcbiAgICAgICAgdGhpcy5ncm91cGluZ1BhcmFtZXRlcnMgPSBncm91cGluZ1BhcmFtZXRlcnM7XHJcbiAgICAgICAgdGhpcy5wYXJ0aXRpb25HZW5lcmF0b3IgPSBwYXJ0aXRpb25HZW5lcmF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcGFydGl0aW9uVW5jb21wcmVzc2VkU3BsYXRBcnJheShzcGxhdEFycmF5KSB7XHJcbiAgICAgICAgbGV0IGdyb3VwaW5nUGFyYW1ldGVycztcclxuICAgICAgICBsZXQgc2VjdGlvbkNvdW50O1xyXG4gICAgICAgIGxldCBzZWN0aW9uRmlsdGVycztcclxuICAgICAgICBpZiAodGhpcy5wYXJ0aXRpb25HZW5lcmF0b3IpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucGFydGl0aW9uR2VuZXJhdG9yKHNwbGF0QXJyYXkpO1xyXG4gICAgICAgICAgICBncm91cGluZ1BhcmFtZXRlcnMgPSByZXN1bHRzLmdyb3VwaW5nUGFyYW1ldGVycztcclxuICAgICAgICAgICAgc2VjdGlvbkNvdW50ID0gcmVzdWx0cy5zZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgICAgIHNlY3Rpb25GaWx0ZXJzID0gcmVzdWx0cy5zZWN0aW9uRmlsdGVycztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBncm91cGluZ1BhcmFtZXRlcnMgPSB0aGlzLmdyb3VwaW5nUGFyYW1ldGVycztcclxuICAgICAgICAgICAgc2VjdGlvbkNvdW50ID0gdGhpcy5zZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgICAgIHNlY3Rpb25GaWx0ZXJzID0gdGhpcy5zZWN0aW9uRmlsdGVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld0FycmF5cyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgc2VjdGlvbkNvdW50OyBzKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvblNwbGF0cyA9IG5ldyBVbmNvbXByZXNzZWRTcGxhdEFycmF5KHNwbGF0QXJyYXkuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkZpbHRlciA9IHNlY3Rpb25GaWx0ZXJzW3NdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0QXJyYXkuc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbkZpbHRlcihpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TcGxhdHMuYWRkU3BsYXQoc3BsYXRBcnJheS5zcGxhdHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld0FycmF5cy5wdXNoKHNlY3Rpb25TcGxhdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzcGxhdEFycmF5czogbmV3QXJyYXlzLFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBncm91cGluZ1BhcmFtZXRlcnNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRTdGFuZGFyZFBhcnRpdGlvbmVyKHBhcnRpdGlvblNpemUgPSAwLCBzY2VuZUNlbnRlciA9IG5ldyBWZWN0b3IzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja1NpemUgPSBTcGxhdEJ1ZmZlci5CdWNrZXRCbG9ja1NpemUsIGJ1Y2tldFNpemUgPSBTcGxhdEJ1ZmZlci5CdWNrZXRTaXplKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcnRpdGlvbkdlbmVyYXRvciA9IChzcGxhdEFycmF5KSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBPRkZTRVRfWCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlg7XHJcbiAgICAgICAgICAgIGNvbnN0IE9GRlNFVF9ZID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWTtcclxuICAgICAgICAgICAgY29uc3QgT0ZGU0VUX1ogPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5aO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBhcnRpdGlvblNpemUgPD0gMCkgcGFydGl0aW9uU2l6ZSA9IHNwbGF0QXJyYXkuc3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsYW1wRGlzdGFuY2UgPSAwLjU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNsYW1wUG9pbnQgPSAocG9pbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvaW50LnggPSBNYXRoLmZsb29yKHBvaW50LnggLyBjbGFtcERpc3RhbmNlKSAqIGNsYW1wRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBwb2ludC55ID0gTWF0aC5mbG9vcihwb2ludC55IC8gY2xhbXBEaXN0YW5jZSkgKiBjbGFtcERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgcG9pbnQueiA9IE1hdGguZmxvb3IocG9pbnQueiAvIGNsYW1wRGlzdGFuY2UpICogY2xhbXBEaXN0YW5jZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3BsYXRBcnJheS5zcGxhdHMuZm9yRWFjaCgoc3BsYXQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNlbnRlci5zZXQoc3BsYXRbT0ZGU0VUX1hdLCBzcGxhdFtPRkZTRVRfWV0sIHNwbGF0W09GRlNFVF9aXSkuc3ViKHNjZW5lQ2VudGVyKTtcclxuICAgICAgICAgICAgICAgIGNsYW1wUG9pbnQoY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIHNwbGF0LmNlbnRlckRpc3QgPSBjZW50ZXIubGVuZ3RoU3EoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHNwbGF0QXJyYXkuc3BsYXRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjZW50ZXJBRGlzdCA9IGEuY2VudGVyRGlzdDtcclxuICAgICAgICAgICAgICAgIGxldCBjZW50ZXJCRGlzdCA9IGIuY2VudGVyRGlzdDtcclxuICAgICAgICAgICAgICAgIGlmIChjZW50ZXJBRGlzdCA+IGNlbnRlckJEaXN0KSByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25GaWx0ZXJzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwaW5nUGFyYW1ldGVycyA9IFtdO1xyXG4gICAgICAgICAgICBwYXJ0aXRpb25TaXplID0gTWF0aC5taW4oc3BsYXRBcnJheS5zcGxhdENvdW50LCBwYXJ0aXRpb25TaXplKTtcclxuICAgICAgICAgICAgY29uc3QgcGF0aXRpb25Db3VudCA9IE1hdGguY2VpbChzcGxhdEFycmF5LnNwbGF0Q291bnQgLyBwYXJ0aXRpb25TaXplKTtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRTdGFydFNwbGF0ID0gMDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRpdGlvbkNvdW50OyBpICsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRTcGxhdCA9IGN1cnJlbnRTdGFydFNwbGF0O1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpbHRlcnMucHVzaCgoc3BsYXRJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcGxhdEluZGV4ID49IHN0YXJ0U3BsYXQgJiYgc3BsYXRJbmRleCA8IHN0YXJ0U3BsYXQgKyBwYXJ0aXRpb25TaXplO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBncm91cGluZ1BhcmFtZXRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2Jsb2Nrc1NpemUnOiBibG9ja1NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2J1Y2tldFNpemUnOiBidWNrZXRTaXplLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U3RhcnRTcGxhdCArPSBwYXJ0aXRpb25TaXplO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAnc2VjdGlvbkNvdW50Jzogc2VjdGlvbkZpbHRlcnMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbkZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICBncm91cGluZ1BhcmFtZXRlcnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgU3BsYXRQYXJ0aXRpb25lcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBwYXJ0aXRpb25HZW5lcmF0b3IpO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIFNwbGF0QnVmZmVyR2VuZXJhdG9yXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICogSW1wb3J0IHBhdGhzIGFkanVzdGVkIGZvciBnc3BsYXQtZmxhbWUtYXZhdGFyIHBhY2thZ2Ugc3RydWN0dXJlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0QnVmZmVyIH0gZnJvbSAnLi9TcGxhdEJ1ZmZlci5qcyc7XHJcbmltcG9ydCB7IFNwbGF0UGFydGl0aW9uZXIgfSBmcm9tICcuL1NwbGF0UGFydGl0aW9uZXIuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0QnVmZmVyR2VuZXJhdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGxhdFBhcnRpdGlvbmVyLCBhbHBoYVJlbW92YWxUaHJlc2hvbGQsIGNvbXByZXNzaW9uTGV2ZWwsIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplKSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdFBhcnRpdGlvbmVyID0gc3BsYXRQYXJ0aXRpb25lcjtcclxuICAgICAgICB0aGlzLmFscGhhUmVtb3ZhbFRocmVzaG9sZCA9IGFscGhhUmVtb3ZhbFRocmVzaG9sZDtcclxuICAgICAgICB0aGlzLmNvbXByZXNzaW9uTGV2ZWwgPSBjb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvblNpemUgPSBzZWN0aW9uU2l6ZTtcclxuICAgICAgICB0aGlzLnNjZW5lQ2VudGVyID0gc2NlbmVDZW50ZXIgPyBuZXcgVmVjdG9yMygpLmNvcHkoc2NlbmVDZW50ZXIpIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gYmxvY2tTaXplO1xyXG4gICAgICAgIHRoaXMuYnVja2V0U2l6ZSA9IGJ1Y2tldFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVGcm9tVW5jb21wcmVzc2VkU3BsYXRBcnJheShzcGxhdEFycmF5KSB7XHJcbiAgICAgICAgY29uc3QgcGFydGl0aW9uUmVzdWx0cyA9IHRoaXMuc3BsYXRQYXJ0aXRpb25lci5wYXJ0aXRpb25VbmNvbXByZXNzZWRTcGxhdEFycmF5KHNwbGF0QXJyYXkpO1xyXG4gICAgICAgIHJldHVybiBTcGxhdEJ1ZmZlci5nZW5lcmF0ZUZyb21VbmNvbXByZXNzZWRTcGxhdEFycmF5cyhwYXJ0aXRpb25SZXN1bHRzLnNwbGF0QXJyYXlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFscGhhUmVtb3ZhbFRocmVzaG9sZCwgdGhpcy5jb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lQ2VudGVyLCB0aGlzLmJsb2NrU2l6ZSwgdGhpcy5idWNrZXRTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aXRpb25SZXN1bHRzLnBhcmFtZXRlcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRTdGFuZGFyZEdlbmVyYXRvcihhbHBoYVJlbW92YWxUaHJlc2hvbGQgPSAxLCBjb21wcmVzc2lvbkxldmVsID0gMSwgc2VjdGlvblNpemUgPSAwLCBzY2VuZUNlbnRlciA9IG5ldyBWZWN0b3IzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTaXplID0gU3BsYXRCdWZmZXIuQnVja2V0QmxvY2tTaXplLCBidWNrZXRTaXplID0gU3BsYXRCdWZmZXIuQnVja2V0U2l6ZSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0UGFydGl0aW9uZXIgPSBTcGxhdFBhcnRpdGlvbmVyLmdldFN0YW5kYXJkUGFydGl0aW9uZXIoc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgU3BsYXRCdWZmZXJHZW5lcmF0b3Ioc3BsYXRQYXJ0aXRpb25lciwgYWxwaGFSZW1vdmFsVGhyZXNob2xkLCBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUpO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIFBseVBhcnNlclV0aWxzIGFuZCByZWxhdGVkIGNvbnN0YW50c1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBTaW1wbGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgLSBvbmx5IHN1cHBvcnRzIElOUklBVjEgZm9ybWF0LlxyXG4gKi9cclxuXHJcbi8vIFBseSBmb3JtYXQgdHlwZXMgKHNpbXBsaWZpZWQgLSBGTEFNRSB1c2VzIElOUklBVjEpXHJcbmV4cG9ydCBjb25zdCBQbHlGb3JtYXQgPSB7XHJcbiAgICAnSU5SSUFWMSc6IDBcclxufTtcclxuXHJcbi8vIEZpZWxkIHNpemUgSURzXHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZERvdWJsZSA9IDA7XHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZEludCA9IDE7XHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZFVJbnQgPSAyO1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWRGbG9hdCA9IDM7XHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZFNob3J0ID0gNDtcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkVVNob3J0ID0gNTtcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkVUNoYXIgPSA2O1xyXG5cclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZVN0cmluZ01hcCA9IHtcclxuICAgICdkb3VibGUnOiBGaWVsZFNpemVJZERvdWJsZSxcclxuICAgICdpbnQnOiBGaWVsZFNpemVJZEludCxcclxuICAgICd1aW50JzogRmllbGRTaXplSWRVSW50LFxyXG4gICAgJ2Zsb2F0JzogRmllbGRTaXplSWRGbG9hdCxcclxuICAgICdzaG9ydCc6IEZpZWxkU2l6ZUlkU2hvcnQsXHJcbiAgICAndXNob3J0JzogRmllbGRTaXplSWRVU2hvcnQsXHJcbiAgICAndWNoYXInOiBGaWVsZFNpemVJZFVDaGFyLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZSA9IHtcclxuICAgIFtGaWVsZFNpemVJZERvdWJsZV06IDgsXHJcbiAgICBbRmllbGRTaXplSWRJbnRdOiA0LFxyXG4gICAgW0ZpZWxkU2l6ZUlkVUludF06IDQsXHJcbiAgICBbRmllbGRTaXplSWRGbG9hdF06IDQsXHJcbiAgICBbRmllbGRTaXplSWRTaG9ydF06IDIsXHJcbiAgICBbRmllbGRTaXplSWRVU2hvcnRdOiAyLFxyXG4gICAgW0ZpZWxkU2l6ZUlkVUNoYXJdOiAxLFxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFBseVBhcnNlclV0aWxzIHtcclxuXHJcbiAgICBzdGF0aWMgSGVhZGVyRW5kVG9rZW4gPSAnZW5kX2hlYWRlcic7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlU2VjdGlvbkhlYWRlcihoZWFkZXJMaW5lcywgZmllbGROYW1lSWRNYXAsIGhlYWRlclN0YXJ0TGluZSA9IDApIHtcclxuXHJcbiAgICAgICAgY29uc3QgZXh0cmFjdGVkTGluZXMgPSBbXTtcclxuXHJcbiAgICAgICAgbGV0IHByb2Nlc3NpbmdTZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGhlYWRlckVuZExpbmUgPSAtMTtcclxuICAgICAgICBsZXQgdmVydGV4Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCBlbmRPZkhlYWRlciA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBzZWN0aW9uTmFtZSA9IG51bGw7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkSWRzID0gW107XHJcbiAgICAgICAgY29uc3QgZmllbGRUeXBlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFsbEZpZWxkTmFtZXMgPSBbXTtcclxuICAgICAgICBjb25zdCB1c2VkRmllbGROYW1lcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZXNCeU5hbWUgPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGhlYWRlclN0YXJ0TGluZTsgaSA8IGhlYWRlckxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBoZWFkZXJMaW5lc1tpXS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2VsZW1lbnQnKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NpbmdTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyRW5kTGluZS0tO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzaW5nU2VjdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyU3RhcnRMaW5lID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJFbmRMaW5lID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lQ29tcG9uZW50cyA9IGxpbmUuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsaWRDb21wb25lbnRzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lQ29tcG9uZW50IG9mIGxpbmVDb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRDb21wb25lbnQgPSBsaW5lQ29tcG9uZW50LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRDb21wb25lbnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRDb21wb25lbnRzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRDb21wb25lbnRzID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbk5hbWUgPSB0cmltbWVkQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxpZENvbXBvbmVudHMgPT09IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudCA9IHBhcnNlSW50KHRyaW1tZWRDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUuc3RhcnRzV2l0aCgncHJvcGVydHknKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRNYXRjaCA9IGxpbmUubWF0Y2goLyhcXHcrKVxccysoXFx3KylcXHMrKFxcdyspLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkVHlwZVN0ciA9IGZpZWxkTWF0Y2hbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gZmllbGRNYXRjaFszXTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxGaWVsZE5hbWVzLnB1c2goZmllbGROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZElkID0gZmllbGROYW1lSWRNYXBbZmllbGROYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGVzQnlOYW1lW2ZpZWxkTmFtZV0gPSBmaWVsZFR5cGVTdHI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gRmllbGRTaXplU3RyaW5nTWFwW2ZpZWxkVHlwZVN0cl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VkRmllbGROYW1lcy5wdXNoKGZpZWxkTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkSWRzLnB1c2goZmllbGRJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZXNbZmllbGRJZF0gPSBmaWVsZFR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsaW5lID09PSBQbHlQYXJzZXJVdGlscy5IZWFkZXJFbmRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgZW5kT2ZIZWFkZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByb2Nlc3NpbmdTZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBleHRyYWN0ZWRMaW5lcy5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyRW5kTGluZSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmaWVsZE9mZnNldHMgPSBbXTtcclxuICAgICAgICBsZXQgYnl0ZXNQZXJWZXJ0ZXggPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGZpZWxkTmFtZSBvZiBhbGxGaWVsZE5hbWVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IGZpZWxkVHlwZXNCeU5hbWVbZmllbGROYW1lXTtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oZmllbGRUeXBlc0J5TmFtZSwgZmllbGROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRJZCA9IGZpZWxkTmFtZUlkTWFwW2ZpZWxkTmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRPZmZzZXRzW2ZpZWxkSWRdID0gYnl0ZXNQZXJWZXJ0ZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnl0ZXNQZXJWZXJ0ZXggKz0gRmllbGRTaXplW0ZpZWxkU2l6ZVN0cmluZ01hcFtmaWVsZFR5cGVdXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljcyA9IHRoaXMuZGVjb2RlU3BoZXJpY2FsSGFybW9uaWNzRnJvbVNlY3Rpb25IZWFkZXIoYWxsRmllbGROYW1lcywgZmllbGROYW1lSWRNYXApO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnaGVhZGVyTGluZXMnOiBleHRyYWN0ZWRMaW5lcyxcclxuICAgICAgICAgICAgJ2hlYWRlclN0YXJ0TGluZSc6IGhlYWRlclN0YXJ0TGluZSxcclxuICAgICAgICAgICAgJ2hlYWRlckVuZExpbmUnOiBoZWFkZXJFbmRMaW5lLFxyXG4gICAgICAgICAgICAnZmllbGRUeXBlcyc6IGZpZWxkVHlwZXMsXHJcbiAgICAgICAgICAgICdmaWVsZElkcyc6IGZpZWxkSWRzLFxyXG4gICAgICAgICAgICAnZmllbGRPZmZzZXRzJzogZmllbGRPZmZzZXRzLFxyXG4gICAgICAgICAgICAnYnl0ZXNQZXJWZXJ0ZXgnOiBieXRlc1BlclZlcnRleCxcclxuICAgICAgICAgICAgJ3ZlcnRleENvdW50JzogdmVydGV4Q291bnQsXHJcbiAgICAgICAgICAgICdkYXRhU2l6ZUJ5dGVzJzogYnl0ZXNQZXJWZXJ0ZXggKiB2ZXJ0ZXhDb3VudCxcclxuICAgICAgICAgICAgJ2VuZE9mSGVhZGVyJzogZW5kT2ZIZWFkZXIsXHJcbiAgICAgICAgICAgICdzZWN0aW9uTmFtZSc6IHNlY3Rpb25OYW1lLFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlJzogc3BoZXJpY2FsSGFybW9uaWNzLmRlZ3JlZSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0NvZWZmaWNpZW50c1BlckNoYW5uZWwnOiBzcGhlcmljYWxIYXJtb25pY3MuY29lZmZpY2llbnRzUGVyQ2hhbm5lbCxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTFGaWVsZHMnOiBzcGhlcmljYWxIYXJtb25pY3MuZGVncmVlMUZpZWxkcyxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTJGaWVsZHMnOiBzcGhlcmljYWxIYXJtb25pY3MuZGVncmVlMkZpZWxkc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlU3BoZXJpY2FsSGFybW9uaWNzRnJvbVNlY3Rpb25IZWFkZXIoZmllbGROYW1lcywgZmllbGROYW1lSWRNYXApIHtcclxuICAgICAgICBsZXQgc3BoZXJpY2FsSGFybW9uaWNzRmllbGRDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IGNvZWZmaWNpZW50c1BlckNoYW5uZWwgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGZpZWxkTmFtZSBvZiBmaWVsZE5hbWVzKSB7XHJcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWUuc3RhcnRzV2l0aCgnZl9yZXN0JykpIHNwaGVyaWNhbEhhcm1vbmljc0ZpZWxkQ291bnQrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29lZmZpY2llbnRzUGVyQ2hhbm5lbCA9IHNwaGVyaWNhbEhhcm1vbmljc0ZpZWxkQ291bnQgLyAzO1xyXG4gICAgICAgIGxldCBkZWdyZWUgPSAwO1xyXG4gICAgICAgIGlmIChjb2VmZmljaWVudHNQZXJDaGFubmVsID49IDMpIGRlZ3JlZSA9IDE7XHJcbiAgICAgICAgaWYgKGNvZWZmaWNpZW50c1BlckNoYW5uZWwgPj0gOCkgZGVncmVlID0gMjtcclxuXHJcbiAgICAgICAgbGV0IGRlZ3JlZTFGaWVsZHMgPSBbXTtcclxuICAgICAgICBsZXQgZGVncmVlMkZpZWxkcyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCByZ2IgPSAwOyByZ2IgPCAzOyByZ2IrKykge1xyXG4gICAgICAgICAgICBpZiAoZGVncmVlID49IDEpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlMUZpZWxkcy5wdXNoKGZpZWxkTmFtZUlkTWFwWydmX3Jlc3RfJyArIChpICsgY29lZmZpY2llbnRzUGVyQ2hhbm5lbCAqIHJnYildKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlMkZpZWxkcy5wdXNoKGZpZWxkTmFtZUlkTWFwWydmX3Jlc3RfJyArIChpICsgY29lZmZpY2llbnRzUGVyQ2hhbm5lbCAqIHJnYiArIDMpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdkZWdyZWUnOiBkZWdyZWUsXHJcbiAgICAgICAgICAgICdjb2VmZmljaWVudHNQZXJDaGFubmVsJzogY29lZmZpY2llbnRzUGVyQ2hhbm5lbCxcclxuICAgICAgICAgICAgJ2RlZ3JlZTFGaWVsZHMnOiBkZWdyZWUxRmllbGRzLFxyXG4gICAgICAgICAgICAnZGVncmVlMkZpZWxkcyc6IGRlZ3JlZTJGaWVsZHNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRIZWFkZXJTZWN0aW9uTmFtZXMoaGVhZGVyTGluZXMpIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uTmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBoZWFkZXJMaW5lIG9mIGhlYWRlckxpbmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJMaW5lLnN0YXJ0c1dpdGgoJ2VsZW1lbnQnKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUNvbXBvbmVudHMgPSBoZWFkZXJMaW5lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmFsaWRDb21wb25lbnRzID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmVDb21wb25lbnQgb2YgbGluZUNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmltbWVkQ29tcG9uZW50ID0gbGluZUNvbXBvbmVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyaW1tZWRDb21wb25lbnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZENvbXBvbmVudHMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkQ29tcG9uZW50cyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbk5hbWVzLnB1c2godHJpbW1lZENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlY3Rpb25OYW1lcztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2hlY2tUZXh0Rm9yRW5kSGVhZGVyKGVuZEhlYWRlclRlc3RUZXh0KSB7XHJcbiAgICAgICAgaWYgKGVuZEhlYWRlclRlc3RUZXh0LmluY2x1ZGVzKFBseVBhcnNlclV0aWxzLkhlYWRlckVuZFRva2VuKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjaGVja0J1ZmZlckZvckVuZEhlYWRlcihidWZmZXIsIHNlYXJjaE9mc2V0LCBjaHVua1NpemUsIGRlY29kZXIpIHtcclxuICAgICAgICBjb25zdCBlbmRIZWFkZXJUZXN0Q2h1bmsgPSBuZXcgVWludDhBcnJheShidWZmZXIsIE1hdGgubWF4KDAsIHNlYXJjaE9mc2V0IC0gY2h1bmtTaXplKSwgY2h1bmtTaXplKTtcclxuICAgICAgICBjb25zdCBlbmRIZWFkZXJUZXN0VGV4dCA9IGRlY29kZXIuZGVjb2RlKGVuZEhlYWRlclRlc3RDaHVuayk7XHJcbiAgICAgICAgcmV0dXJuIFBseVBhcnNlclV0aWxzLmNoZWNrVGV4dEZvckVuZEhlYWRlcihlbmRIZWFkZXJUZXN0VGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGV4dHJhY3RIZWFkZXJGcm9tQnVmZmVyVG9UZXh0KHBseUJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcclxuICAgICAgICBsZXQgaGVhZGVyT2Zmc2V0ID0gMDtcclxuICAgICAgICBsZXQgaGVhZGVyVGV4dCA9ICcnO1xyXG4gICAgICAgIGNvbnN0IHJlYWRDaHVua1NpemUgPSAxMDA7XHJcblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJPZmZzZXQgKyByZWFkQ2h1bmtTaXplID49IHBseUJ1ZmZlci5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VuZCBvZiBmaWxlIHJlYWNoZWQgd2hpbGUgc2VhcmNoaW5nIGZvciBlbmQgb2YgaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyQ2h1bmsgPSBuZXcgVWludDhBcnJheShwbHlCdWZmZXIsIGhlYWRlck9mZnNldCwgcmVhZENodW5rU2l6ZSk7XHJcbiAgICAgICAgICAgIGhlYWRlclRleHQgKz0gZGVjb2Rlci5kZWNvZGUoaGVhZGVyQ2h1bmspO1xyXG4gICAgICAgICAgICBoZWFkZXJPZmZzZXQgKz0gcmVhZENodW5rU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChQbHlQYXJzZXJVdGlscy5jaGVja0J1ZmZlckZvckVuZEhlYWRlcihwbHlCdWZmZXIsIGhlYWRlck9mZnNldCwgcmVhZENodW5rU2l6ZSAqIDIsIGRlY29kZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZEhlYWRlckZyb21CdWZmZXIocGx5QnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG4gICAgICAgIGxldCBoZWFkZXJPZmZzZXQgPSAwO1xyXG4gICAgICAgIGxldCBoZWFkZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgY29uc3QgcmVhZENodW5rU2l6ZSA9IDEwMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKGhlYWRlck9mZnNldCArIHJlYWRDaHVua1NpemUgPj0gcGx5QnVmZmVyLmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW5kIG9mIGZpbGUgcmVhY2hlZCB3aGlsZSBzZWFyY2hpbmcgZm9yIGVuZCBvZiBoZWFkZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJDaHVuayA9IG5ldyBVaW50OEFycmF5KHBseUJ1ZmZlciwgaGVhZGVyT2Zmc2V0LCByZWFkQ2h1bmtTaXplKTtcclxuICAgICAgICAgICAgaGVhZGVyVGV4dCArPSBkZWNvZGVyLmRlY29kZShoZWFkZXJDaHVuayk7XHJcbiAgICAgICAgICAgIGhlYWRlck9mZnNldCArPSByZWFkQ2h1bmtTaXplO1xyXG5cclxuICAgICAgICAgICAgaWYgKFBseVBhcnNlclV0aWxzLmNoZWNrQnVmZmVyRm9yRW5kSGVhZGVyKHBseUJ1ZmZlciwgaGVhZGVyT2Zmc2V0LCByZWFkQ2h1bmtTaXplICogMiwgZGVjb2RlcikpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGVhZGVyVGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29udmVydEhlYWRlclRleHRUb0xpbmVzKGhlYWRlclRleHQpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJMaW5lcyA9IGhlYWRlclRleHQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGNvbnN0IHBydW5lZExpbmVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWFkZXJMaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gaGVhZGVyTGluZXNbaV0udHJpbSgpO1xyXG4gICAgICAgICAgICBwcnVuZWRMaW5lcy5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICBpZiAobGluZSA9PT0gUGx5UGFyc2VyVXRpbHMuSGVhZGVyRW5kVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcnVuZWRMaW5lcztcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGV0ZXJtaW5lSGVhZGVyRm9ybWF0RnJvbUhlYWRlclRleHQoX2hlYWRlclRleHQpIHtcclxuICAgICAgICAvLyBTaW1wbGlmaWVkIC0gRkxBTUUgYXZhdGFycyBhbHdheXMgdXNlIElOUklBVjEgZm9ybWF0XHJcbiAgICAgICAgcmV0dXJuIFBseUZvcm1hdC5JTlJJQVYxO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkZXRlcm1pbmVIZWFkZXJGb3JtYXRGcm9tUGx5QnVmZmVyKHBseUJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnRUZXh0ID0gUGx5UGFyc2VyVXRpbHMuZXh0cmFjdEhlYWRlckZyb21CdWZmZXJUb1RleHQocGx5QnVmZmVyKTtcclxuICAgICAgICByZXR1cm4gUGx5UGFyc2VyVXRpbHMuZGV0ZXJtaW5lSGVhZGVyRm9ybWF0RnJvbUhlYWRlclRleHQoaGVhZGVydFRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWFkVmVydGV4KHZlcnRleERhdGEsIGhlYWRlciwgcm93LCBkYXRhT2Zmc2V0LCBmaWVsZHNUb1JlYWQsIHJhd1ZlcnRleCwgbm9ybWFsaXplID0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHJvdyAqIGhlYWRlci5ieXRlc1BlclZlcnRleCArIGRhdGFPZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgZmllbGRPZmZzZXRzID0gaGVhZGVyLmZpZWxkT2Zmc2V0cztcclxuICAgICAgICBjb25zdCBmaWVsZFR5cGVzID0gaGVhZGVyLmZpZWxkVHlwZXM7XHJcbiAgICAgICAgZm9yIChsZXQgZmllbGRJZCBvZiBmaWVsZHNUb1JlYWQpIHtcclxuICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gZmllbGRUeXBlc1tmaWVsZElkXTtcclxuICAgICAgICAgICAgaWYgKGZpZWxkVHlwZSA9PT0gRmllbGRTaXplSWRGbG9hdCkge1xyXG4gICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRGbG9hdDMyKG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGRUeXBlID09PSBGaWVsZFNpemVJZFNob3J0KSB7XHJcbiAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldEludDE2KG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGRUeXBlID09PSBGaWVsZFNpemVJZFVTaG9ydCkge1xyXG4gICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRVaW50MTYob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZFR5cGUgPT09IEZpZWxkU2l6ZUlkSW50KSB7XHJcbiAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldEludDMyKG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGRUeXBlID09PSBGaWVsZFNpemVJZFVJbnQpIHtcclxuICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0VWludDMyKG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGRUeXBlID09PSBGaWVsZFNpemVJZFVDaGFyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRVaW50OChvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0pIC8gMjU1LjA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0VWludDgob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogSU5SSUFWMVBseVBhcnNlclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgUXVhdGVybmlvbiB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgVW5jb21wcmVzc2VkU3BsYXRBcnJheSB9IGZyb20gJy4uL2J1ZmZlcnMvVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyc7XHJcbmltcG9ydCB7IFNwbGF0QnVmZmVyIH0gZnJvbSAnLi4vYnVmZmVycy9TcGxhdEJ1ZmZlci5qcyc7XHJcbmltcG9ydCB7IFBseVBhcnNlclV0aWxzIH0gZnJvbSAnLi9QbHlQYXJzZXJVdGlscy5qcyc7XHJcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vdXRpbHMvVXRpbC5qcyc7XHJcblxyXG5jb25zdCBCYXNlRmllbGROYW1lc1RvUmVhZCA9IFsnc2NhbGVfMCcsICdzY2FsZV8xJywgJ3NjYWxlXzInLCAncm90XzAnLCAncm90XzEnLCAncm90XzInLCAncm90XzMnLCAneCcsICd5JywgJ3onLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZl9kY18wJywgJ2ZfZGNfMScsICdmX2RjXzInLCAnb3BhY2l0eScsICdyZWQnLCAnZ3JlZW4nLCAnYmx1ZScsICdmX3Jlc3RfMCddO1xyXG5cclxuY29uc3QgQmFzZUZpZWxkc1RvUmVhZEluZGV4ZXMgPSBCYXNlRmllbGROYW1lc1RvUmVhZC5tYXAoKGUsIGkpID0+IGkpO1xyXG5cclxuY29uc3QgW1xyXG4gICAgICAgIFNDQUxFXzAsIFNDQUxFXzEsIFNDQUxFXzIsIFJPVF8wLCBST1RfMSwgUk9UXzIsIFJPVF8zLCBYLCBZLCBaLCBGX0RDXzAsIEZfRENfMSwgRl9EQ18yLCBPUEFDSVRZLCBSRUQsIEdSRUVOLCBCTFVFLCBGX1JFU1RfMFxyXG4gICAgICBdID0gQmFzZUZpZWxkc1RvUmVhZEluZGV4ZXM7XHJcblxyXG5leHBvcnQgY2xhc3MgSU5SSUFWMVBseVBhcnNlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wbHlQYXJzZXJ1dGlscyA9IG5ldyBQbHlQYXJzZXJVdGlscygpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZUhlYWRlckxpbmVzKGhlYWRlckxpbmVzKSB7XHJcblxyXG4gICAgICAgIGxldCBzaExpbmVDb3VudCA9IDA7XHJcbiAgICAgICAgaGVhZGVyTGluZXMuZm9yRWFjaCgobGluZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobGluZS5pbmNsdWRlcygnZl9yZXN0XycpKSBzaExpbmVDb3VudCsrO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgc2hGaWVsZHNUb1JlYWRDb3VudCA9IDA7XHJcbiAgICAgICAgaWYgKHNoTGluZUNvdW50ID49IDQ1KSB7XHJcbiAgICAgICAgICAgIHNoRmllbGRzVG9SZWFkQ291bnQgPSA0NTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNoTGluZUNvdW50ID49IDI0KSB7XHJcbiAgICAgICAgICAgIHNoRmllbGRzVG9SZWFkQ291bnQgPSAyNDtcclxuICAgICAgICB9IGVsc2UgaWYgKHNoTGluZUNvdW50ID49IDkpIHtcclxuICAgICAgICAgICAgc2hGaWVsZHNUb1JlYWRDb3VudCA9IDk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzaEZpZWxkSW5kZXhlc1RvTWFwID0gQXJyYXkuZnJvbShBcnJheShNYXRoLm1heChzaEZpZWxkc1RvUmVhZENvdW50IC0gMSwgMCkpKTtcclxuICAgICAgICBsZXQgc2hSZW1haW5pbmdGaWVsZE5hbWVzVG9SZWFkID0gc2hGaWVsZEluZGV4ZXNUb01hcC5tYXAoKGVsZW1lbnQsIGluZGV4KSA9PiBgZl9yZXN0XyR7aW5kZXggKyAxfWApO1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZE5hbWVzVG9SZWFkID0gWy4uLkJhc2VGaWVsZE5hbWVzVG9SZWFkLCAuLi5zaFJlbWFpbmluZ0ZpZWxkTmFtZXNUb1JlYWRdO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkc1RvUmVhZEluZGV4ZXMgPSBmaWVsZE5hbWVzVG9SZWFkLm1hcCgoZSwgaSkgPT4gaSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZUlkTWFwID0gZmllbGRzVG9SZWFkSW5kZXhlcy5yZWR1Y2UoKGFjYywgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBhY2NbZmllbGROYW1lc1RvUmVhZFtlbGVtZW50XV0gPSBlbGVtZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgIH0sIHt9KTtcclxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLnBseVBhcnNlcnV0aWxzLmRlY29kZVNlY3Rpb25IZWFkZXIoaGVhZGVyTGluZXMsIGZpZWxkTmFtZUlkTWFwLCAwKTtcclxuICAgICAgICBoZWFkZXIuc3BsYXRDb3VudCA9IGhlYWRlci52ZXJ0ZXhDb3VudDtcclxuICAgICAgICBoZWFkZXIuYnl0ZXNQZXJTcGxhdCA9IGhlYWRlci5ieXRlc1BlclZlcnRleDtcclxuICAgICAgICBoZWFkZXIuZmllbGRzVG9SZWFkSW5kZXhlcyA9IGZpZWxkc1RvUmVhZEluZGV4ZXM7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVIZWFkZXJUZXh0KGhlYWRlclRleHQpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJMaW5lcyA9IFBseVBhcnNlclV0aWxzLmNvbnZlcnRIZWFkZXJUZXh0VG9MaW5lcyhoZWFkZXJUZXh0KTtcclxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmRlY29kZUhlYWRlckxpbmVzKGhlYWRlckxpbmVzKTtcclxuICAgICAgICBoZWFkZXIuaGVhZGVyVGV4dCA9IGhlYWRlclRleHQ7XHJcbiAgICAgICAgaGVhZGVyLmhlYWRlclNpemVCeXRlcyA9IGhlYWRlclRleHQuaW5kZXhPZihQbHlQYXJzZXJVdGlscy5IZWFkZXJFbmRUb2tlbikgKyBQbHlQYXJzZXJVdGlscy5IZWFkZXJFbmRUb2tlbi5sZW5ndGggKyAxO1xyXG4gICAgICAgIHJldHVybiBoZWFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlSGVhZGVyRnJvbUJ1ZmZlcihwbHlCdWZmZXIpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJUZXh0ID0gdGhpcy5wbHlQYXJzZXJ1dGlscy5yZWFkSGVhZGVyRnJvbUJ1ZmZlcihwbHlCdWZmZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlY29kZUhlYWRlclRleHQoaGVhZGVyVGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFNwbGF0RGF0YShwbHlCdWZmZXIsIGhlYWRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0YVZpZXcocGx5QnVmZmVyLCBoZWFkZXIuaGVhZGVyU2l6ZUJ5dGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRCdWZmZXJTZWN0aW9uKGhlYWRlciwgZnJvbVNwbGF0LCB0b1NwbGF0LCBzcGxhdERhdGEsIHNwbGF0RGF0YU9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9CdWZmZXIsIHRvT2Zmc2V0LCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4ob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBjb25zdCBvdXRCeXRlc1BlclNwbGF0ID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbMF0uU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlc1tvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVdLkJ5dGVzUGVyU3BsYXQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tU3BsYXQ7IGkgPD0gdG9TcGxhdDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFNwbGF0ID0gSU5SSUFWMVBseVBhcnNlci5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXQoc3BsYXREYXRhLCBpLCBoZWFkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXREYXRhT2Zmc2V0LCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCYXNlID0gaSAqIG91dEJ5dGVzUGVyU3BsYXQgKyB0b09mZnNldDtcclxuICAgICAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVTcGxhdERhdGFUb1NlY3Rpb25CdWZmZXIocGFyc2VkU3BsYXQsIHRvQnVmZmVyLCBvdXRCYXNlLCAwLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRBcnJheVNlY3Rpb24oaGVhZGVyLCBmcm9tU3BsYXQsIHRvU3BsYXQsIHNwbGF0RGF0YSwgc3BsYXREYXRhT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0QXJyYXksIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tU3BsYXQ7IGkgPD0gdG9TcGxhdDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFNwbGF0ID0gSU5SSUFWMVBseVBhcnNlci5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXQoc3BsYXREYXRhLCBpLCBoZWFkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXREYXRhT2Zmc2V0LCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBzcGxhdEFycmF5LmFkZFNwbGF0KHBhcnNlZFNwbGF0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlU2VjdGlvblNwbGF0RGF0YShzZWN0aW9uU3BsYXREYXRhLCBzcGxhdENvdW50LCBzZWN0aW9uSGVhZGVyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIHtcclxuICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNlY3Rpb25IZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBjb25zdCBzcGxhdEFycmF5ID0gbmV3IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBzcGxhdENvdW50OyByb3crKykge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTcGxhdCA9IElOUklBVjFQbHlQYXJzZXIucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0KHNlY3Rpb25TcGxhdERhdGEsIHJvdywgc2VjdGlvbkhlYWRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBzcGxhdEFycmF5LmFkZFNwbGF0KG5ld1NwbGF0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNwbGF0QXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBsZXQgcmF3U3BsYXQgPSBbXTtcclxuICAgICAgICBjb25zdCB0ZW1wUm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG5cclxuICAgICAgICBjb25zdCBPRkZTRVRfWCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlg7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1kgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ZO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9aID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWjtcclxuXHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1NDQUxFMCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlNDQUxFMDtcclxuICAgICAgICBjb25zdCBPRkZTRVRfU0NBTEUxID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuU0NBTEUxO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9TQ0FMRTIgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5TQ0FMRTI7XHJcblxyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9ST1RBVElPTjAgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ST1RBVElPTjA7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1JPVEFUSU9OMSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlJPVEFUSU9OMTtcclxuICAgICAgICBjb25zdCBPRkZTRVRfUk9UQVRJT04yID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuUk9UQVRJT04yO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9ST1RBVElPTjMgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ST1RBVElPTjM7XHJcblxyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9GREMwID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuRkRDMDtcclxuICAgICAgICBjb25zdCBPRkZTRVRfRkRDMSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULkZEQzE7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX0ZEQzIgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5GREMyO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9PUEFDSVRZID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuT1BBQ0lUWTtcclxuXHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX0ZSQyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ1OyBpKyspIHtcclxuICAgICAgICAgICAgT0ZGU0VUX0ZSQ1tpXSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULkZSQzAgKyBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNwbGF0RGF0YSwgcm93LCBoZWFkZXIsIHNwbGF0RGF0YU9mZnNldCA9IDAsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4ob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgSU5SSUFWMVBseVBhcnNlci5yZWFkU3BsYXQoc3BsYXREYXRhLCBoZWFkZXIsIHJvdywgc3BsYXREYXRhT2Zmc2V0LCByYXdTcGxhdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1NwbGF0ID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5jcmVhdGVTcGxhdChvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBpZiAocmF3U3BsYXRbU0NBTEVfMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1NDQUxFMF0gPSBNYXRoLmV4cChyYXdTcGxhdFtTQ0FMRV8wXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfU0NBTEUxXSA9IE1hdGguZXhwKHJhd1NwbGF0W1NDQUxFXzFdKTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9TQ0FMRTJdID0gTWF0aC5leHAocmF3U3BsYXRbU0NBTEVfMl0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1NDQUxFMF0gPSAwLjAxO1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1NDQUxFMV0gPSAwLjAxO1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1NDQUxFMl0gPSAwLjAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmF3U3BsYXRbRl9EQ18wXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBTSF9DMCA9IDAuMjgyMDk0NzkxNzczODc4MTQ7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMF0gPSByYXdTcGxhdFtGX0RDXzBdICogMjU1O1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzFdID0gcmF3U3BsYXRbRl9EQ18xXSAqIDI1NTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMyXSA9IHJhd1NwbGF0W0ZfRENfMl0gKiAyNTU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmF3U3BsYXRbUkVEXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMF0gPSByYXdTcGxhdFtSRURdICogMjU1O1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzFdID0gcmF3U3BsYXRbR1JFRU5dICogMjU1O1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzJdID0gcmF3U3BsYXRbQkxVRV0gKiAyNTU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzFdID0gMDtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMyXSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyYXdTcGxhdFtPUEFDSVRZXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfT1BBQ0lUWV0gPSAoMSAvICgxICsgTWF0aC5leHAoLXJhd1NwbGF0W09QQUNJVFldKSkpICogMjU1O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMF0gPSBjbGFtcChNYXRoLmZsb29yKG5ld1NwbGF0W09GRlNFVF9GREMwXSksIDAsIDI1NSk7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMxXSA9IGNsYW1wKE1hdGguZmxvb3IobmV3U3BsYXRbT0ZGU0VUX0ZEQzFdKSwgMCwgMjU1KTtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzJdID0gY2xhbXAoTWF0aC5mbG9vcihuZXdTcGxhdFtPRkZTRVRfRkRDMl0pLCAwLCAyNTUpO1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfT1BBQ0lUWV0gPSBjbGFtcChNYXRoLmZsb29yKG5ld1NwbGF0W09GRlNFVF9PUEFDSVRZXSksIDAsIDI1NSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyYXdTcGxhdFtGX1JFU1RfMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GUkNbaV1dID0gcmF3U3BsYXRbaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTFGaWVsZHNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRlJDWzkgKyBpXV0gPSByYXdTcGxhdFtoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlMkZpZWxkc1tpXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRlbXBSb3RhdGlvbi5zZXQocmF3U3BsYXRbUk9UXzBdLCByYXdTcGxhdFtST1RfMV0sIHJhd1NwbGF0W1JPVF8yXSwgcmF3U3BsYXRbUk9UXzNdKTtcclxuICAgICAgICAgICAgdGVtcFJvdGF0aW9uLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1JPVEFUSU9OMF0gPSB0ZW1wUm90YXRpb24ueDtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1JPVEFUSU9OMV0gPSB0ZW1wUm90YXRpb24ueTtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1JPVEFUSU9OMl0gPSB0ZW1wUm90YXRpb24uejtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1JPVEFUSU9OM10gPSB0ZW1wUm90YXRpb24udztcclxuXHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9YXSA9IHJhd1NwbGF0W1hdO1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfWV0gPSByYXdTcGxhdFtZXTtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1pdID0gcmF3U3BsYXRbWl07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3U3BsYXQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgc3RhdGljIHJlYWRTcGxhdChzcGxhdERhdGEsIGhlYWRlciwgcm93LCBkYXRhT2Zmc2V0LCByYXdTcGxhdCkge1xyXG4gICAgICAgIHJldHVybiBQbHlQYXJzZXJVdGlscy5yZWFkVmVydGV4KHNwbGF0RGF0YSwgaGVhZGVyLCByb3csIGRhdGFPZmZzZXQsIGhlYWRlci5maWVsZHNUb1JlYWRJbmRleGVzLCByYXdTcGxhdCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QXJyYXkocGx5QnVmZmVyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5kZWNvZGVIZWFkZXJGcm9tQnVmZmVyKHBseUJ1ZmZlcik7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IGhlYWRlci5zcGxhdENvdW50O1xyXG4gICAgICAgIGNvbnN0IHNwbGF0RGF0YSA9IHRoaXMuZmluZFNwbGF0RGF0YShwbHlCdWZmZXIsIGhlYWRlcik7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRBcnJheSA9IHRoaXMuZGVjb2RlU2VjdGlvblNwbGF0RGF0YShzcGxhdERhdGEsIHNwbGF0Q291bnQsIGhlYWRlciwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICByZXR1cm4gc3BsYXRBcnJheTtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogUGx5UGFyc2VyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFNpbXBsaWZpZWQgZm9yIEZMQU1FIGF2YXRhciAtIG9ubHkgc3VwcG9ydHMgSU5SSUFWMSBQTFkgZm9ybWF0LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IElOUklBVjFQbHlQYXJzZXIgfSBmcm9tICcuL0lOUklBVjFQbHlQYXJzZXIuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBseVBhcnNlciB7XHJcblxyXG4gICAgc3RhdGljIHBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEFycmF5KHBseUJ1ZmZlciwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgIC8vIEZMQU1FIGF2YXRhcnMgdXNlIElOUklBVjEgUExZIGZvcm1hdFxyXG4gICAgICAgIHJldHVybiBuZXcgSU5SSUFWMVBseVBhcnNlcigpLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEFycmF5KHBseUJ1ZmZlciwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgIH1cclxuXHJcbn0iLCIvKipcclxuICogUGx5TG9hZGVyIC0gTG9hZHMgYW5kIHBhcnNlcyBQTFkgZm9ybWF0IEdhdXNzaWFuIFNwbGF0IGZpbGVzXHJcbiAqXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKlxyXG4gKiBTaW1wbGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgLSBvbmx5IHN1cHBvcnRzIElOUklBVjEgUExZIGZvcm1hdC5cclxuICogUHJvdmlkZXMgYm90aCBwcm9ncmVzc2l2ZSBzdHJlYW1pbmcgYW5kIGZpbGUtYmFzZWQgbG9hZGluZy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBTcGxhdEJ1ZmZlciB9IGZyb20gJy4uL2J1ZmZlcnMvU3BsYXRCdWZmZXIuanMnO1xyXG5pbXBvcnQgeyBVbmNvbXByZXNzZWRTcGxhdEFycmF5IH0gZnJvbSAnLi4vYnVmZmVycy9VbmNvbXByZXNzZWRTcGxhdEFycmF5LmpzJztcclxuaW1wb3J0IHsgU3BsYXRCdWZmZXJHZW5lcmF0b3IgfSBmcm9tICcuLi9idWZmZXJzL1NwbGF0QnVmZmVyR2VuZXJhdG9yLmpzJztcclxuaW1wb3J0IHsgUGx5UGFyc2VyIH0gZnJvbSAnLi9QbHlQYXJzZXIuanMnO1xyXG5pbXBvcnQgeyBQbHlQYXJzZXJVdGlscyB9IGZyb20gJy4vUGx5UGFyc2VyVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBJTlJJQVYxUGx5UGFyc2VyIH0gZnJvbSAnLi9JTlJJQVYxUGx5UGFyc2VyLmpzJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzLCBJbnRlcm5hbExvYWRUeXBlLCBMb2FkZXJTdGF0dXMgfSBmcm9tICcuLi9lbnVtcy9FbmdpbmVDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBmZXRjaFdpdGhQcm9ncmVzcywgZGVsYXllZEV4ZWN1dGUsIG5hdGl2ZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cyB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IsIE5ldHdvcmtFcnJvciwgUGFyc2VFcnJvciwgQXNzZXRMb2FkRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZVVybCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVBcnJheUJ1ZmZlciB9IGZyb20gJy4uL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyc7XHJcblxyXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1BseUxvYWRlcicpO1xyXG5cclxuLyoqXHJcbiAqIFN0b3JlIGRhdGEgY2h1bmtzIGludG8gYSBzaW5nbGUgQXJyYXlCdWZmZXJcclxuICpcclxuICogQ29tYmluZXMgbXVsdGlwbGUgZG93bmxvYWRlZCBjaHVua3MgaW50byBhIGNvbnRpZ3VvdXMgYnVmZmVyIGZvciBwYXJzaW5nLlxyXG4gKiBSZWFsbG9jYXRlcyBidWZmZXIgaWYgbmVlZGVkIHRvIGZpdCBhbGwgY2h1bmtzLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge0FycmF5PHtkYXRhOiBVaW50OEFycmF5LCBzaXplQnl0ZXM6IG51bWJlcn0+fSBjaHVua3MgLSBBcnJheSBvZiBkYXRhIGNodW5rc1xyXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBbYnVmZmVyXSAtIEV4aXN0aW5nIGJ1ZmZlciB0byByZXVzZSAod2lsbCByZWFsbG9jYXRlIGlmIHRvbyBzbWFsbClcclxuICogQHJldHVybnMge0FycmF5QnVmZmVyfSBCdWZmZXIgY29udGFpbmluZyBhbGwgY2h1bmsgZGF0YVxyXG4gKi9cclxuZnVuY3Rpb24gc3RvcmVDaHVua3NJbkJ1ZmZlcihjaHVua3MsIGJ1ZmZlcikge1xyXG4gICAgbGV0IGluQnl0ZXMgPSAwO1xyXG4gICAgZm9yIChsZXQgY2h1bmsgb2YgY2h1bmtzKSB7XHJcbiAgICAgICAgaW5CeXRlcyArPSBjaHVuay5zaXplQnl0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVhbGxvY2F0ZSBpZiBidWZmZXIgZG9lc24ndCBleGlzdCBvciBpcyB0b28gc21hbGxcclxuICAgIGlmICghYnVmZmVyIHx8IGJ1ZmZlci5ieXRlTGVuZ3RoIDwgaW5CeXRlcykge1xyXG4gICAgICAgIGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihpbkJ5dGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb3B5IGFsbCBjaHVua3MgaW50byBidWZmZXIgc2VxdWVudGlhbGx5XHJcbiAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgIGZvciAobGV0IGNodW5rIG9mIGNodW5rcykge1xyXG4gICAgICAgIG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBjaHVuay5zaXplQnl0ZXMpLnNldChjaHVuay5kYXRhKTtcclxuICAgICAgICBvZmZzZXQgKz0gY2h1bmsuc2l6ZUJ5dGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBidWZmZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGaW5hbGl6ZSBzcGxhdCBkYXRhIGludG8gYSBTcGxhdEJ1ZmZlclxyXG4gKlxyXG4gKiBDb252ZXJ0cyBVbmNvbXByZXNzZWRTcGxhdEFycmF5IGludG8gZmluYWwgb3B0aW1pemVkIFNwbGF0QnVmZmVyIGZvcm1hdC5cclxuICogQXBwbGllcyBjb21wcmVzc2lvbiBhbmQgb3B0aW1pemF0aW9uIGlmIHJlcXVlc3RlZC5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHtVbmNvbXByZXNzZWRTcGxhdEFycmF5fSBzcGxhdERhdGEgLSBQYXJzZWQgc3BsYXQgZGF0YVxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGltaXplU3BsYXREYXRhIC0gV2hldGhlciB0byBvcHRpbWl6ZS9jb21wcmVzcyB0aGUgZGF0YVxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWluaW11bUFscGhhIC0gTWluaW11bSBhbHBoYSB0aHJlc2hvbGQgZm9yIHNwbGF0IGN1bGxpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IGNvbXByZXNzaW9uTGV2ZWwgLSBDb21wcmVzc2lvbiBsZXZlbCAoMC0yKVxyXG4gKiBAcGFyYW0ge251bWJlcn0gc2VjdGlvblNpemUgLSBTZWN0aW9uIHNpemUgZm9yIHBhcnRpdGlvbmluZ1xyXG4gKiBAcGFyYW0ge1ZlY3RvcjN9IHNjZW5lQ2VudGVyIC0gQ2VudGVyIHBvaW50IG9mIHRoZSBzY2VuZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gYmxvY2tTaXplIC0gQmxvY2sgc2l6ZSBmb3Igc3BhdGlhbCBwYXJ0aXRpb25pbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IGJ1Y2tldFNpemUgLSBCdWNrZXQgc2l6ZSBmb3Igc29ydGluZ1xyXG4gKiBAcmV0dXJucyB7U3BsYXRCdWZmZXJ9IEZpbmFsaXplZCBzcGxhdCBidWZmZXIgcmVhZHkgZm9yIHJlbmRlcmluZ1xyXG4gKiBAdGhyb3dzIHtQYXJzZUVycm9yfSBJZiBzcGxhdCBkYXRhIGlzIGludmFsaWQgb3IgZmluYWxpemF0aW9uIGZhaWxzXHJcbiAqL1xyXG5mdW5jdGlvbiBmaW5hbGl6ZVNwbGF0RGF0YShzcGxhdERhdGEsIG9wdGltaXplU3BsYXREYXRhLCBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChvcHRpbWl6ZVNwbGF0RGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlckdlbmVyYXRvciA9IFNwbGF0QnVmZmVyR2VuZXJhdG9yLmdldFN0YW5kYXJkR2VuZXJhdG9yKFxyXG4gICAgICAgICAgICAgICAgbWluaW11bUFscGhhLFxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25TaXplLFxyXG4gICAgICAgICAgICAgICAgc2NlbmVDZW50ZXIsXHJcbiAgICAgICAgICAgICAgICBibG9ja1NpemUsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRTaXplXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiBzcGxhdEJ1ZmZlckdlbmVyYXRvci5nZW5lcmF0ZUZyb21VbmNvbXByZXNzZWRTcGxhdEFycmF5KHNwbGF0RGF0YSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNwbGF0QnVmZmVyLmdlbmVyYXRlRnJvbVVuY29tcHJlc3NlZFNwbGF0QXJyYXlzKFtzcGxhdERhdGFdLCBtaW5pbXVtQWxwaGEsIDAsIG5ldyBWZWN0b3IzKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gZmluYWxpemUgc3BsYXQgZGF0YTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICdzcGxhdERhdGEnLFxyXG4gICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQbHlMb2FkZXIgLSBMb2FkcyBhbmQgcGFyc2VzIFBMWSBmb3JtYXQgR2F1c3NpYW4gU3BsYXQgZmlsZXNcclxuICpcclxuICogU3VwcG9ydHMgYm90aCBwcm9ncmVzc2l2ZSBzdHJlYW1pbmcgYW5kIGNvbXBsZXRlIGZpbGUgbG9hZGluZy5cclxuICogT3B0aW1pemVkIGZvciBJTlJJQVYxIFBMWSBmb3JtYXQgdXNlZCBpbiBGTEFNRSBhdmF0YXJzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBseUxvYWRlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIFBMWSBmaWxlIGZyb20gVVJMIHdpdGggcHJvZ3Jlc3NpdmUgc3RyZWFtaW5nIHN1cHBvcnRcclxuICAgICAqXHJcbiAgICAgKiBEb3dubG9hZHMgYW5kIHBhcnNlcyBQTFkgZGF0YSBwcm9ncmVzc2l2ZWx5LCBlbmFibGluZyByZW5kZXIgZHVyaW5nIGxvYWQuXHJcbiAgICAgKiBTdXBwb3J0cyBib3RoIGRpcmVjdC10by1idWZmZXIgYW5kIGFycmF5LWJhc2VkIGxvYWRpbmcgbW9kZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbGVOYW1lIC0gVVJMIHRvIHRoZSBQTFkgZmlsZVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uUHJvZ3Jlc3NdIC0gUHJvZ3Jlc3MgY2FsbGJhY2sgKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgc3RhdHVzKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbbG9hZERpcmVjdG9Ub1NwbGF0QnVmZmVyPWZhbHNlXSAtIExvYWQgZGlyZWN0bHkgdG8gU3BsYXRCdWZmZXIgKGZhc3RlciBidXQgbGVzcyBmbGV4aWJsZSlcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzc10gLSBDYWxsYmFjayBmb3IgcHJvZ3Jlc3NpdmUgc2VjdGlvbiB1cGRhdGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbmltdW1BbHBoYT0xXSAtIE1pbmltdW0gYWxwaGEgdGhyZXNob2xkIGZvciBzcGxhdCBjdWxsaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbXByZXNzaW9uTGV2ZWw9MF0gLSBDb21wcmVzc2lvbiBsZXZlbCAoMD1ub25lLCAxPW1lZGl1bSwgMj1oaWdoKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW1pemVTcGxhdERhdGE9dHJ1ZV0gLSBXaGV0aGVyIHRvIG9wdGltaXplL2NvbXByZXNzIHNwbGF0IGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlPTBdIC0gU3BoZXJpY2FsIGhhcm1vbmljcyBkZWdyZWUgKDAtMylcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbaGVhZGVyc10gLSBIVFRQIGhlYWRlcnMgZm9yIGZldGNoIHJlcXVlc3RcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc2VjdGlvblNpemVdIC0gU2VjdGlvbiBzaXplIGZvciBwYXJ0aXRpb25pbmdcclxuICAgICAqIEBwYXJhbSB7VmVjdG9yM30gW3NjZW5lQ2VudGVyXSAtIENlbnRlciBwb2ludCBvZiB0aGUgc2NlbmVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYmxvY2tTaXplXSAtIEJsb2NrIHNpemUgZm9yIHNwYXRpYWwgcGFydGl0aW9uaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2J1Y2tldFNpemVdIC0gQnVja2V0IHNpemUgZm9yIHNvcnRpbmdcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFNwbGF0QnVmZmVyPn0gTG9hZGVkIGFuZCBwYXJzZWQgc3BsYXQgYnVmZmVyXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHBhcmFtZXRlcnMgYXJlIGludmFsaWRcclxuICAgICAqIEB0aHJvd3Mge05ldHdvcmtFcnJvcn0gSWYgZmlsZSBkb3dubG9hZCBmYWlsc1xyXG4gICAgICogQHRocm93cyB7UGFyc2VFcnJvcn0gSWYgUExZIHBhcnNpbmcgZmFpbHNcclxuICAgICAqIEB0aHJvd3Mge0Fzc2V0TG9hZEVycm9yfSBJZiBhc3NldCBsb2FkaW5nIGZhaWxzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBsb2FkRnJvbVVSTChmaWxlTmFtZSwgb25Qcm9ncmVzcywgbG9hZERpcmVjdG9Ub1NwbGF0QnVmZmVyLCBvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsIG9wdGltaXplU3BsYXREYXRhID0gdHJ1ZSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLCBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSkge1xyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFsaWRhdGVVcmwoZmlsZU5hbWUpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignSW52YWxpZCBVUkwgcHJvdmlkZWQgdG8gbG9hZEZyb21VUkwnLCB7IGZpbGVOYW1lLCBlcnJvciB9KTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSBvcHRpb25hbCBjYWxsYmFja3NcclxuICAgICAgICBpZiAob25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUNhbGxiYWNrKG9uUHJvZ3Jlc3MsICdvblByb2dyZXNzJywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVDYWxsYmFjayhvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcywgJ29uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzJywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0xvYWRpbmcgUExZIGZyb20gVVJMJywgeyBmaWxlTmFtZSwgb3B0aW1pemVTcGxhdERhdGEsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSB9KTtcclxuXHJcbiAgICAgICAgbGV0IGludGVybmFsTG9hZFR5cGUgPSBsb2FkRGlyZWN0b1RvU3BsYXRCdWZmZXIgPyBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRCdWZmZXIgOiBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRBcnJheTtcclxuICAgICAgICBpZiAob3B0aW1pemVTcGxhdERhdGEpIGludGVybmFsTG9hZFR5cGUgPSBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRBcnJheTtcclxuXHJcbiAgICAgICAgY29uc3QgZGlyZWN0TG9hZFNlY3Rpb25TaXplQnl0ZXMgPSBDb25zdGFudHMuUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblNpemU7XHJcbiAgICAgICAgY29uc3Qgc3BsYXREYXRhT2Zmc2V0Qnl0ZXMgPSBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgKyBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25Db3VudCA9IDE7XHJcblxyXG4gICAgICAgIGxldCBkaXJlY3RMb2FkQnVmZmVySW47XHJcbiAgICAgICAgbGV0IGRpcmVjdExvYWRCdWZmZXJPdXQ7XHJcbiAgICAgICAgbGV0IGRpcmVjdExvYWRTcGxhdEJ1ZmZlcjtcclxuICAgICAgICBsZXQgbWF4U3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IHNwbGF0Q291bnQgPSAwO1xyXG5cclxuICAgICAgICBsZXQgaGVhZGVyTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHJlYWR5VG9Mb2FkU3BsYXREYXRhID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvYWRQcm9taXNlID0gbmF0aXZlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzKCk7XHJcblxyXG4gICAgICAgIGxldCBudW1CeXRlc1N0cmVhbWVkID0gMDtcclxuICAgICAgICBsZXQgbnVtQnl0ZXNQYXJzZWQgPSAwO1xyXG4gICAgICAgIGxldCBudW1CeXRlc0Rvd25sb2FkZWQgPSAwO1xyXG4gICAgICAgIGxldCBoZWFkZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgbGV0IGhlYWRlciA9IG51bGw7XHJcbiAgICAgICAgbGV0IGNodW5rcyA9IFtdO1xyXG5cclxuICAgICAgICBsZXQgc3RhbmRhcmRMb2FkVW5jb21wcmVzc2VkU3BsYXRBcnJheTtcclxuXHJcbiAgICAgICAgY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcclxuICAgICAgICBjb25zdCBpbnJpYVYxUGx5UGFyc2VyID0gbmV3IElOUklBVjFQbHlQYXJzZXIoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9jYWxPblByb2dyZXNzID0gKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmtEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRDb21wbGV0ZSA9IHBlcmNlbnQgPj0gMTAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNodW5rRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogY2h1bmtEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICdzaXplQnl0ZXMnOiBjaHVua0RhdGEuYnl0ZUxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAnc3RhcnRCeXRlcyc6IG51bUJ5dGVzRG93bmxvYWRlZCxcclxuICAgICAgICAgICAgICAgICAgICAnZW5kQnl0ZXMnOiBudW1CeXRlc0Rvd25sb2FkZWQgKyBjaHVua0RhdGEuYnl0ZUxlbmd0aFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBudW1CeXRlc0Rvd25sb2FkZWQgKz0gY2h1bmtEYXRhLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRvd25sb2FkQmVmb3JlUHJvY2Vzc2luZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvYWRDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRQcm9taXNlLnJlc29sdmUoY2h1bmtzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghaGVhZGVyTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyVGV4dCArPSB0ZXh0RGVjb2Rlci5kZWNvZGUoY2h1bmtEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUGx5UGFyc2VyVXRpbHMuY2hlY2tUZXh0Rm9yRW5kSGVhZGVyKGhlYWRlclRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZMQU1FIGF2YXRhcnMgdXNlIElOUklBVjEgZm9ybWF0IC0gcGFyc2UgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIgPSBpbnJpYVYxUGx5UGFyc2VyLmRlY29kZUhlYWRlclRleHQoaGVhZGVyVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGxhdENvdW50ID0gaGVhZGVyLnNwbGF0Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkeVRvTG9hZFNwbGF0RGF0YSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQTFkgaGVhZGVyIGRlY29kZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRDb3VudDogbWF4U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU6IGhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZUVycm9yID0gbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBkZWNvZGUgUExZIGhlYWRlcjogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlYWRlclRleHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdIZWFkZXIgcGFyc2luZyBmYWlsZWQnLCBwYXJzZUVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQcm9taXNlLnJlamVjdChwYXJzZUVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hEZXNjcmlwdG9yID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbMF0uU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlc1tvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlclNpemVCeXRlcyA9IHNwbGF0RGF0YU9mZnNldEJ5dGVzICsgc2hEZXNjcmlwdG9yLkJ5dGVzUGVyU3BsYXQgKiBtYXhTcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0TG9hZEJ1ZmZlck91dCA9IG5ldyBBcnJheUJ1ZmZlcihzcGxhdEJ1ZmZlclNpemVCeXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZUhlYWRlclRvQnVmZmVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uTWFqb3I6IFNwbGF0QnVmZmVyLkN1cnJlbnRNYWpvclZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbk1pbm9yOiBTcGxhdEJ1ZmZlci5DdXJyZW50TWlub3JWZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNlY3Rpb25Db3VudDogc2VjdGlvbkNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25Db3VudDogc2VjdGlvbkNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwbGF0Q291bnQ6IG1heFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRDb3VudDogc3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvbkxldmVsOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyOiBuZXcgVmVjdG9yMygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBkaXJlY3RMb2FkQnVmZmVyT3V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kYXJkTG9hZFVuY29tcHJlc3NlZFNwbGF0QXJyYXkgPSBuZXcgVW5jb21wcmVzc2VkU3BsYXRBcnJheShvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1CeXRlc1N0cmVhbWVkID0gaGVhZGVyLmhlYWRlclNpemVCeXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVtQnl0ZXNQYXJzZWQgPSBoZWFkZXIuaGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTG9hZGVkICYmIHJlYWR5VG9Mb2FkU3BsYXREYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaHVua3MubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0TG9hZEJ1ZmZlckluID0gc3RvcmVDaHVua3NJbkJ1ZmZlcihjaHVua3MsIGRpcmVjdExvYWRCdWZmZXJJbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBieXRlc0xvYWRlZFNpbmNlTGFzdFN0cmVhbWVkU2VjdGlvbiA9IG51bUJ5dGVzRG93bmxvYWRlZCAtIG51bUJ5dGVzU3RyZWFtZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChieXRlc0xvYWRlZFNpbmNlTGFzdFN0cmVhbWVkU2VjdGlvbiA+IGRpcmVjdExvYWRTZWN0aW9uU2l6ZUJ5dGVzIHx8IGxvYWRDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtQnl0ZXNUb1Byb2Nlc3MgPSBudW1CeXRlc0Rvd25sb2FkZWQgLSBudW1CeXRlc1BhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkU3BsYXRDb3VudCA9IE1hdGguZmxvb3IobnVtQnl0ZXNUb1Byb2Nlc3MgLyBoZWFkZXIuYnl0ZXNQZXJTcGxhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1CeXRlc1RvUGFyc2UgPSBhZGRlZFNwbGF0Q291bnQgKiBoZWFkZXIuYnl0ZXNQZXJTcGxhdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bUJ5dGVzTGVmdE92ZXIgPSBudW1CeXRlc1RvUHJvY2VzcyAtIG51bUJ5dGVzVG9QYXJzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1NwbGF0Q291bnQgPSBzcGxhdENvdW50ICsgYWRkZWRTcGxhdENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YVZpZXdPZmZzZXQgPSBudW1CeXRlc1BhcnNlZCAtIGNodW5rc1swXS5zdGFydEJ5dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YVRvUGFyc2UgPSBuZXcgRGF0YVZpZXcoZGlyZWN0TG9hZEJ1ZmZlckluLCBwYXJzZWREYXRhVmlld09mZnNldCwgbnVtQnl0ZXNUb1BhcnNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaERlc2NyaXB0b3IgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1swXS5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzW291dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRPZmZzZXQgPSBzcGxhdENvdW50ICogc2hEZXNjcmlwdG9yLkJ5dGVzUGVyU3BsYXQgKyBzcGxhdERhdGFPZmZzZXRCeXRlcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJzZSBzcGxhdCBkYXRhIHdpdGggZXJyb3IgaGFuZGxpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnJpYVYxUGx5UGFyc2VyLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEJ1ZmZlclNlY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIsIDAsIGFkZGVkU3BsYXRDb3VudCAtIDEsIGRhdGFUb1BhcnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgZGlyZWN0TG9hZEJ1ZmZlck91dCwgb3V0T2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5yaWFWMVBseVBhcnNlci5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRBcnJheVNlY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIsIDAsIGFkZGVkU3BsYXRDb3VudCAtIDEsIGRhdGFUb1BhcnNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgc3RhbmRhcmRMb2FkVW5jb21wcmVzc2VkU3BsYXRBcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VFcnJvciA9IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIHNwbGF0IGRhdGEgc2VjdGlvbjogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcGxhdERhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdTcGxhdCBkYXRhIHBhcnNpbmcgZmFpbGVkJywgeyBzcGxhdENvdW50LCBhZGRlZFNwbGF0Q291bnQsIGVycm9yIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQcm9taXNlLnJlamVjdChwYXJzZUVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRDb3VudCA9IG5ld1NwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGlyZWN0TG9hZFNwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLndyaXRlU2VjdGlvbkhlYWRlclRvQnVmZmVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwbGF0Q291bnQ6IG1heFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBzcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0U2l6ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0QmxvY2tTaXplOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3Npb25TY2FsZVJhbmdlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVNpemVCeXRlczogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxCdWNrZXRDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlOiBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCwgZGlyZWN0TG9hZEJ1ZmZlck91dCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0TG9hZFNwbGF0QnVmZmVyID0gbmV3IFNwbGF0QnVmZmVyKGRpcmVjdExvYWRCdWZmZXJPdXQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0TG9hZFNwbGF0QnVmZmVyLnVwZGF0ZUxvYWRlZENvdW50cygxLCBzcGxhdENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MoZGlyZWN0TG9hZFNwbGF0QnVmZmVyLCBsb2FkQ29tcGxldGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1CeXRlc1N0cmVhbWVkICs9IGRpcmVjdExvYWRTZWN0aW9uU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQnl0ZXNQYXJzZWQgKz0gbnVtQnl0ZXNUb1BhcnNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW1CeXRlc0xlZnRPdmVyID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZWVwQ2h1bmtzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtlZXBTaXplID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gY2h1bmtzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gY2h1bmtzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWVwU2l6ZSArPSBjaHVuay5zaXplQnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBDaHVua3MudW5zaGlmdChjaHVuayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZWVwU2l6ZSA+PSBudW1CeXRlc0xlZnRPdmVyKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzID0ga2VlcENodW5rcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUHJvbWlzZS5yZXNvbHZlKGRpcmVjdExvYWRTcGxhdEJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUHJvbWlzZS5yZXNvbHZlKHN0YW5kYXJkTG9hZFVuY29tcHJlc3NlZFNwbGF0QXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9ncmVzcyBjYWxsYmFjayB3aXRoIGVycm9yIGlzb2xhdGlvblxyXG4gICAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgTG9hZGVyU3RhdHVzLkRvd25sb2FkaW5nKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIG9uUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsIHByb2dyZXNzIGNhbGxiYWNrXHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MoMCwgJzAlJywgTG9hZGVyU3RhdHVzLkRvd25sb2FkaW5nKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBvblByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGZXRjaCBhbmQgcHJvY2VzcyB0aGUgUExZIGZpbGVcclxuICAgICAgICByZXR1cm4gZmV0Y2hXaXRoUHJvZ3Jlc3MoZmlsZU5hbWUsIGxvY2FsT25Qcm9ncmVzcywgZmFsc2UsIGhlYWRlcnMpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzcygwLCAnMCUnLCBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIG9uUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRQcm9taXNlLnByb21pc2U7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChzcGxhdERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzcygxMDAsICcxMDAlJywgTG9hZGVyU3RhdHVzLkRvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBvblByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BMWSBkYXRhIGxvYWRlZCBzdWNjZXNzZnVsbHknLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxMb2FkVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBzcGxhdERhdGE/LnNwbGF0Q291bnQgfHwgJ3Vua25vd24nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGJhc2VkIG9uIGxvYWQgdHlwZVxyXG4gICAgICAgICAgICAgICAgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRG93bmxvYWRCZWZvcmVQcm9jZXNzaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmtEYXRhcyA9IGNodW5rcy5tYXAoKGNodW5rKSA9PiBjaHVuay5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoY2h1bmtEYXRhcykuYXJyYXlCdWZmZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocGx5RmlsZURhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQbHlMb2FkZXIubG9hZEZyb21GaWxlRGF0YShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHlGaWxlRGF0YSwgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLCBvcHRpbWl6ZVNwbGF0RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwcm9jZXNzIGRvd25sb2FkZWQgUExZIGRhdGE6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwbGF0RGF0YTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU3BsYXREYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXREYXRhLCBvcHRpbWl6ZVNwbGF0RGF0YSwgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgY3VzdG9tIGVycm9ycyBhcy1pc1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IgfHxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIFBhcnNlRXJyb3IgfHxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEFzc2V0TG9hZEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdQTFkgbG9hZGluZyBmYWlsZWQnLCB7IGZpbGVOYW1lLCBlcnJvckNvZGU6IGVycm9yLmNvZGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gV3JhcCB1bmV4cGVjdGVkIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGxvYWRpbmcgUExZJywgeyBmaWxlTmFtZSwgZXJyb3IgfSk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYFVuZXhwZWN0ZWQgZXJyb3IgbG9hZGluZyBQTFkgZmlsZTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBQTFkgZmlsZSBmcm9tIHJhdyBBcnJheUJ1ZmZlciBkYXRhXHJcbiAgICAgKlxyXG4gICAgICogUGFyc2VzIFBMWSBkYXRhIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBkb3dubG9hZGVkLiBVc2VmdWwgZm9yIGxvYWRpbmdcclxuICAgICAqIGZyb20gbG9jYWwgZmlsZXMgb3Igd2hlbiBkYXRhIGlzIHByb3ZpZGVkIGRpcmVjdGx5LlxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IHBseUZpbGVEYXRhIC0gUmF3IFBMWSBmaWxlIGRhdGEgYXMgQXJyYXlCdWZmZXJcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWluaW11bUFscGhhPTFdIC0gTWluaW11bSBhbHBoYSB0aHJlc2hvbGQgZm9yIHNwbGF0IGN1bGxpbmdcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY29tcHJlc3Npb25MZXZlbD0wXSAtIENvbXByZXNzaW9uIGxldmVsICgwPW5vbmUsIDE9bWVkaXVtLCAyPWhpZ2gpXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpbWl6ZVNwbGF0RGF0YT10cnVlXSAtIFdoZXRoZXIgdG8gb3B0aW1pemUvY29tcHJlc3Mgc3BsYXQgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWU9MF0gLSBTcGhlcmljYWwgaGFybW9uaWNzIGRlZ3JlZSAoMC0zKVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWN0aW9uU2l6ZV0gLSBTZWN0aW9uIHNpemUgZm9yIHBhcnRpdGlvbmluZ1xyXG4gICAgICogQHBhcmFtIHtWZWN0b3IzfSBbc2NlbmVDZW50ZXJdIC0gQ2VudGVyIHBvaW50IG9mIHRoZSBzY2VuZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtibG9ja1NpemVdIC0gQmxvY2sgc2l6ZSBmb3Igc3BhdGlhbCBwYXJ0aXRpb25pbmdcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYnVja2V0U2l6ZV0gLSBCdWNrZXQgc2l6ZSBmb3Igc29ydGluZ1xyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8U3BsYXRCdWZmZXI+fSBQYXJzZWQgYW5kIGZpbmFsaXplZCBzcGxhdCBidWZmZXJcclxuICAgICAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgcGx5RmlsZURhdGEgaXMgaW52YWxpZFxyXG4gICAgICogQHRocm93cyB7UGFyc2VFcnJvcn0gSWYgcGFyc2luZyBmYWlsc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbG9hZEZyb21GaWxlRGF0YShwbHlGaWxlRGF0YSwgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLCBvcHRpbWl6ZVNwbGF0RGF0YSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUFycmF5QnVmZmVyKHBseUZpbGVEYXRhLCAncGx5RmlsZURhdGEnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ludmFsaWQgUExZIGZpbGUgZGF0YScsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdMb2FkaW5nIFBMWSBmcm9tIGZpbGUgZGF0YScsIHtcclxuICAgICAgICAgICAgc2l6ZUJ5dGVzOiBwbHlGaWxlRGF0YS5ieXRlTGVuZ3RoLFxyXG4gICAgICAgICAgICBvcHRpbWl6ZVNwbGF0RGF0YSxcclxuICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWxheWVkRXhlY3V0ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGx5UGFyc2VyLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEFycmF5KHBseUZpbGVEYXRhLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwYXJzZSBQTFkgZmlsZSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAncGx5RmlsZURhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoc3BsYXRBcnJheSkgPT4ge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BMWSBwYXJzZWQgc3VjY2Vzc2Z1bGx5Jywge1xyXG4gICAgICAgICAgICAgICAgc3BsYXRDb3VudDogc3BsYXRBcnJheT8uc3BsYXRDb3VudCB8fCAndW5rbm93bidcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmluYWxpemVTcGxhdERhdGEoXHJcbiAgICAgICAgICAgICAgICBzcGxhdEFycmF5LCBvcHRpbWl6ZVNwbGF0RGF0YSwgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgLy8gUmUtdGhyb3cgY3VzdG9tIGVycm9ycyBhcy1pc1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IgfHwgZXJyb3IgaW5zdGFuY2VvZiBQYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1BMWSBmaWxlIGRhdGEgbG9hZGluZyBmYWlsZWQnLCB7IGVycm9yQ29kZTogZXJyb3IuY29kZSB9KTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBXcmFwIHVuZXhwZWN0ZWQgZXJyb3JzXHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5leHBlY3RlZCBlcnJvciBsb2FkaW5nIFBMWSBmcm9tIGZpbGUgZGF0YScsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgVW5leHBlY3RlZCBlcnJvciBwYXJzaW5nIFBMWSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICdwbHlGaWxlRGF0YScsXHJcbiAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIFJheVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xyXG5cclxuY29uc3QgVmVjdG9yUmlnaHQgPSBuZXcgVEhSRUUuVmVjdG9yMygxLCAwLCAwKTtcclxuY29uc3QgVmVjdG9yVXAgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAxLCAwKTtcclxuY29uc3QgVmVjdG9yQmFja3dhcmQgPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAxKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBSYXkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9yaWdpbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCksIGRpcmVjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCkpIHtcclxuICAgICAgICB0aGlzLm9yaWdpbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVycyhvcmlnaW4sIGRpcmVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UGFyYW1ldGVycyhvcmlnaW4sIGRpcmVjdGlvbikge1xyXG4gICAgICAgIHRoaXMub3JpZ2luLmNvcHkob3JpZ2luKTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbi5jb3B5KGRpcmVjdGlvbikubm9ybWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYm94Q29udGFpbnNQb2ludChib3gsIHBvaW50LCBlcHNpbG9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHBvaW50LnggPCBib3gubWluLnggLSBlcHNpbG9uIHx8IHBvaW50LnggPiBib3gubWF4LnggKyBlcHNpbG9uIHx8XHJcbiAgICAgICAgICAgICAgIHBvaW50LnkgPCBib3gubWluLnkgLSBlcHNpbG9uIHx8IHBvaW50LnkgPiBib3gubWF4LnkgKyBlcHNpbG9uIHx8XHJcbiAgICAgICAgICAgICAgIHBvaW50LnogPCBib3gubWluLnogLSBlcHNpbG9uIHx8IHBvaW50LnogPiBib3gubWF4LnogKyBlcHNpbG9uID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyc2VjdEJveCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBwbGFuZUludGVyc2VjdGlvblBvaW50ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXkgPSBbXTtcclxuICAgICAgICBjb25zdCBvcmlnaW5BcnJheSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbkFycmF5ID0gW107XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihib3gsIG91dEhpdCkge1xyXG5cclxuICAgICAgICAgICAgb3JpZ2luQXJyYXlbMF0gPSB0aGlzLm9yaWdpbi54O1xyXG4gICAgICAgICAgICBvcmlnaW5BcnJheVsxXSA9IHRoaXMub3JpZ2luLnk7XHJcbiAgICAgICAgICAgIG9yaWdpbkFycmF5WzJdID0gdGhpcy5vcmlnaW4uejtcclxuICAgICAgICAgICAgZGlyZWN0aW9uQXJyYXlbMF0gPSB0aGlzLmRpcmVjdGlvbi54O1xyXG4gICAgICAgICAgICBkaXJlY3Rpb25BcnJheVsxXSA9IHRoaXMuZGlyZWN0aW9uLnk7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbkFycmF5WzJdID0gdGhpcy5kaXJlY3Rpb24uejtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJveENvbnRhaW5zUG9pbnQoYm94LCB0aGlzLm9yaWdpbiwgMC4wMDAxKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG91dEhpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEhpdC5vcmlnaW4uY29weSh0aGlzLm9yaWdpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0SGl0Lm5vcm1hbC5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0SGl0LmRpc3RhbmNlID0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb25BcnJheVtpXSA9PSAwLjApIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGhpdE5vcm1hbCA9IGkgPT0gMCA/IFZlY3RvclJpZ2h0IDogaSA9PSAxID8gVmVjdG9yVXAgOiBWZWN0b3JCYWNrd2FyZDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJlbWVWZWMgPSBkaXJlY3Rpb25BcnJheVtpXSA8IDAgPyBib3gubWF4IDogYm94Lm1pbjtcclxuICAgICAgICAgICAgICAgIGxldCBtdWx0aXBsaWVyID0gLU1hdGguc2lnbihkaXJlY3Rpb25BcnJheVtpXSk7XHJcbiAgICAgICAgICAgICAgICBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbMF0gPSBpID09IDAgPyBleHRyZW1lVmVjLnggOiBpID09IDEgPyBleHRyZW1lVmVjLnkgOiBleHRyZW1lVmVjLno7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG9TaWRlID0gcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5WzBdIC0gb3JpZ2luQXJyYXlbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRvU2lkZSAqIG11bHRpcGxpZXIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4MSA9IChpICsgMSkgJSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeDIgPSAoaSArIDIpICUgMztcclxuICAgICAgICAgICAgICAgICAgICBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbMl0gPSBkaXJlY3Rpb25BcnJheVtpZHgxXSAvIGRpcmVjdGlvbkFycmF5W2ldICogdG9TaWRlICsgb3JpZ2luQXJyYXlbaWR4MV07XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5WzFdID0gZGlyZWN0aW9uQXJyYXlbaWR4Ml0gLyBkaXJlY3Rpb25BcnJheVtpXSAqIHRvU2lkZSArIG9yaWdpbkFycmF5W2lkeDJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnQuc2V0KHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVtpXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbaWR4Ml0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5W2lkeDFdKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3hDb250YWluc1BvaW50KGJveCwgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludCwgMC4wMDAxKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3V0SGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRIaXQub3JpZ2luLmNvcHkocGxhbmVJbnRlcnNlY3Rpb25Qb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRIaXQubm9ybWFsLmNvcHkoaGl0Tm9ybWFsKS5tdWx0aXBseVNjYWxhcihtdWx0aXBsaWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEhpdC5kaXN0YW5jZSA9IHBsYW5lSW50ZXJzZWN0aW9uUG9pbnQuc3ViKHRoaXMub3JpZ2luKS5sZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBpbnRlcnNlY3RTcGhlcmUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdG9TcGhlcmVDZW50ZXJWZWMgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2VudGVyLCByYWRpdXMsIG91dEhpdCkge1xyXG4gICAgICAgICAgICB0b1NwaGVyZUNlbnRlclZlYy5jb3B5KGNlbnRlcikuc3ViKHRoaXMub3JpZ2luKTtcclxuICAgICAgICAgICAgY29uc3QgdG9DbG9zZXN0QXBwcm9hY2ggPSB0b1NwaGVyZUNlbnRlclZlYy5kb3QodGhpcy5kaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICBjb25zdCB0b0Nsb3Nlc3RBcHByb2FjaFNxID0gdG9DbG9zZXN0QXBwcm9hY2ggKiB0b0Nsb3Nlc3RBcHByb2FjaDtcclxuICAgICAgICAgICAgY29uc3QgdG9TcGhlcmVDZW50ZXJTcSA9IHRvU3BoZXJlQ2VudGVyVmVjLmRvdCh0b1NwaGVyZUNlbnRlclZlYyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpZmZTcSA9IHRvU3BoZXJlQ2VudGVyU3EgLSB0b0Nsb3Nlc3RBcHByb2FjaFNxO1xyXG4gICAgICAgICAgICBjb25zdCByYWRpdXNTcSA9IHJhZGl1cyAqIHJhZGl1cztcclxuXHJcbiAgICAgICAgICAgIGlmIChkaWZmU3EgPiByYWRpdXNTcSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdGhjID0gTWF0aC5zcXJ0KHJhZGl1c1NxIC0gZGlmZlNxKTtcclxuICAgICAgICAgICAgY29uc3QgdDAgPSB0b0Nsb3Nlc3RBcHByb2FjaCAtIHRoYztcclxuICAgICAgICAgICAgY29uc3QgdDEgPSB0b0Nsb3Nlc3RBcHByb2FjaCArIHRoYztcclxuXHJcbiAgICAgICAgICAgIGlmICh0MSA8IDApIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IHQgPSB0MCA8IDAgPyB0MSA6IHQwO1xyXG5cclxuICAgICAgICAgICAgaWYgKG91dEhpdCkge1xyXG4gICAgICAgICAgICAgICAgb3V0SGl0Lm9yaWdpbi5jb3B5KHRoaXMub3JpZ2luKS5hZGRTY2FsZWRWZWN0b3IodGhpcy5kaXJlY3Rpb24sIHQpO1xyXG4gICAgICAgICAgICAgICAgb3V0SGl0Lm5vcm1hbC5jb3B5KG91dEhpdC5vcmlnaW4pLnN1YihjZW50ZXIpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgb3V0SGl0LmRpc3RhbmNlID0gdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxufVxyXG4iLCIvKipcclxuICogSGl0XHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICovXHJcblxyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgSGl0IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLm9yaWdpbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSAwO1xyXG4gICAgICAgIHRoaXMuc3BsYXRJbmRleCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0KG9yaWdpbiwgbm9ybWFsLCBkaXN0YW5jZSwgc3BsYXRJbmRleCkge1xyXG4gICAgICAgIHRoaXMub3JpZ2luLmNvcHkob3JpZ2luKTtcclxuICAgICAgICB0aGlzLm5vcm1hbC5jb3B5KG5vcm1hbCk7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuc3BsYXRJbmRleCA9IHNwbGF0SW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvbmUoKSB7XHJcbiAgICAgICAgY29uc3QgaGl0Q2xvbmUgPSBuZXcgSGl0KCk7XHJcbiAgICAgICAgaGl0Q2xvbmUub3JpZ2luLmNvcHkodGhpcy5vcmlnaW4pO1xyXG4gICAgICAgIGhpdENsb25lLm5vcm1hbC5jb3B5KHRoaXMubm9ybWFsKTtcclxuICAgICAgICBoaXRDbG9uZS5kaXN0YW5jZSA9IHRoaXMuZGlzdGFuY2U7XHJcbiAgICAgICAgaGl0Q2xvbmUuc3BsYXRJbmRleCA9IHRoaXMuc3BsYXRJbmRleDtcclxuICAgICAgICByZXR1cm4gaGl0Q2xvbmU7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qKlxyXG4gKiBSYXljYXN0ZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogSW1wb3J0IHBhdGhzIGFkanVzdGVkIGZvciBnc3BsYXQtZmxhbWUtYXZhdGFyIHBhY2thZ2Ugc3RydWN0dXJlLlxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgUmF5IH0gZnJvbSAnLi9SYXkuanMnO1xyXG5pbXBvcnQgeyBIaXQgfSBmcm9tICcuL0hpdC5qcyc7XHJcbmltcG9ydCB7IFNwbGF0UmVuZGVyTW9kZSB9IGZyb20gJy4uL2VudW1zL2luZGV4LmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBSYXljYXN0ZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9yaWdpbiwgZGlyZWN0aW9uLCByYXljYXN0QWdhaW5zdFRydWVTcGxhdEVsbGlwc29pZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5yYXkgPSBuZXcgUmF5KG9yaWdpbiwgZGlyZWN0aW9uKTtcclxuICAgICAgICB0aGlzLnJheWNhc3RBZ2FpbnN0VHJ1ZVNwbGF0RWxsaXBzb2lkID0gcmF5Y2FzdEFnYWluc3RUcnVlU3BsYXRFbGxpcHNvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RnJvbUNhbWVyYUFuZFNjcmVlblBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IG5kY0Nvb3JkcyA9IG5ldyBUSFJFRS5WZWN0b3IyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYW1lcmEsIHNjcmVlblBvc2l0aW9uLCBzY3JlZW5EaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIG5kY0Nvb3Jkcy54ID0gc2NyZWVuUG9zaXRpb24ueCAvIHNjcmVlbkRpbWVuc2lvbnMueCAqIDIuMCAtIDEuMDtcclxuICAgICAgICAgICAgbmRjQ29vcmRzLnkgPSAoc2NyZWVuRGltZW5zaW9ucy55IC0gc2NyZWVuUG9zaXRpb24ueSkgLyBzY3JlZW5EaW1lbnNpb25zLnkgKiAyLjAgLSAxLjA7XHJcbiAgICAgICAgICAgIGlmIChjYW1lcmEuaXNQZXJzcGVjdGl2ZUNhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYXkub3JpZ2luLnNldEZyb21NYXRyaXhQb3NpdGlvbihjYW1lcmEubWF0cml4V29ybGQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYXkuZGlyZWN0aW9uLnNldChuZGNDb29yZHMueCwgbmRjQ29vcmRzLnksIDAuNSApLnVucHJvamVjdChjYW1lcmEpLnN1Yih0aGlzLnJheS5vcmlnaW4pLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJheS5vcmlnaW4uc2V0KG5kY0Nvb3Jkcy54LCBuZGNDb29yZHMueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2FtZXJhLm5lYXIgKyBjYW1lcmEuZmFyKSAvIChjYW1lcmEubmVhciAtIGNhbWVyYS5mYXIpKS51bnByb2plY3QoY2FtZXJhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmF5LmRpcmVjdGlvbi5zZXQoMCwgMCwgLTEpLnRyYW5zZm9ybURpcmVjdGlvbihjYW1lcmEubWF0cml4V29ybGQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JheWNhc3Rlcjo6c2V0RnJvbUNhbWVyYUFuZFNjcmVlblBvc2l0aW9uKCkgLT4gVW5zdXBwb3J0ZWQgY2FtZXJhIHR5cGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIGludGVyc2VjdFNwbGF0TWVzaCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0b0xvY2FsID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBmcm9tTG9jYWwgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lVHJhbnNmb3JtID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBsb2NhbFJheSA9IG5ldyBSYXkoKTtcclxuICAgICAgICBjb25zdCB0ZW1wUG9pbnQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3BsYXRNZXNoLCBvdXRIaXRzID0gW10pIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRUcmVlID0gc3BsYXRNZXNoLmdldFNwbGF0VHJlZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzcGxhdFRyZWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgc3BsYXRUcmVlLnN1YlRyZWVzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJUcmVlID0gc3BsYXRUcmVlLnN1YlRyZWVzW3NdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyb21Mb2NhbC5jb3B5KHNwbGF0TWVzaC5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3BsYXRNZXNoLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRNZXNoLmdldFNjZW5lVHJhbnNmb3JtKHMsIHNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tTG9jYWwubXVsdGlwbHkoc2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9Mb2NhbC5jb3B5KGZyb21Mb2NhbCkuaW52ZXJ0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbG9jYWxSYXkub3JpZ2luLmNvcHkodGhpcy5yYXkub3JpZ2luKS5hcHBseU1hdHJpeDQodG9Mb2NhbCk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFJheS5kaXJlY3Rpb24uY29weSh0aGlzLnJheS5vcmlnaW4pLmFkZCh0aGlzLnJheS5kaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxSYXkuZGlyZWN0aW9uLmFwcGx5TWF0cml4NCh0b0xvY2FsKS5zdWIobG9jYWxSYXkub3JpZ2luKS5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRIaXRzRm9yU3ViVHJlZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN1YlRyZWUucm9vdE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhc3RSYXlBdFNwbGF0VHJlZU5vZGUobG9jYWxSYXksIHNwbGF0VHJlZSwgc3ViVHJlZS5yb290Tm9kZSwgb3V0SGl0c0ZvclN1YlRyZWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG91dEhpdHNGb3JTdWJUcmVlLmZvckVhY2goKGhpdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpdC5vcmlnaW4uYXBwbHlNYXRyaXg0KGZyb21Mb2NhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGl0Lm5vcm1hbC5hcHBseU1hdHJpeDQoZnJvbUxvY2FsKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICBoaXQuZGlzdGFuY2UgPSB0ZW1wUG9pbnQuY29weShoaXQub3JpZ2luKS5zdWIodGhpcy5yYXkub3JpZ2luKS5sZW5ndGgoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG91dEhpdHMucHVzaCguLi5vdXRIaXRzRm9yU3ViVHJlZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG91dEhpdHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEuZGlzdGFuY2UgPiBiLmRpc3RhbmNlKSByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvdXRIaXRzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIGNhc3RSYXlBdFNwbGF0VHJlZU5vZGUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcENvbG9yID0gbmV3IFRIUkVFLlZlY3RvcjQoKTtcclxuICAgICAgICBjb25zdCB0ZW1wQ2VudGVyID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCB0ZW1wU2NhbGUgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBSb3RhdGlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcEhpdCA9IG5ldyBIaXQoKTtcclxuICAgICAgICBjb25zdCBzY2FsZUVwc2lsb24gPSAwLjAwMDAwMDE7XHJcblxyXG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1TY2FsZU1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCB0b1NwaGVyZVNwYWNlID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBmcm9tU3BoZXJlU3BhY2UgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBSYXkgPSBuZXcgUmF5KCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyYXksIHNwbGF0VHJlZSwgbm9kZSwgb3V0SGl0cyA9IFtdKSB7XHJcbiAgICAgICAgICAgIGlmICghcmF5LmludGVyc2VjdEJveChub2RlLmJvdW5kaW5nQm94KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChub2RlLmRhdGEgJiYgbm9kZS5kYXRhLmluZGV4ZXMgJiYgbm9kZS5kYXRhLmluZGV4ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmRhdGEuaW5kZXhlcy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdEdsb2JhbEluZGV4ID0gbm9kZS5kYXRhLmluZGV4ZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsYXRTY2VuZUluZGV4ID0gc3BsYXRUcmVlLnNwbGF0TWVzaC5nZXRTY2VuZUluZGV4Rm9yU3BsYXQoc3BsYXRHbG9iYWxJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsYXRTY2VuZSA9IHNwbGF0VHJlZS5zcGxhdE1lc2guZ2V0U2NlbmUoc3BsYXRTY2VuZUluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNwbGF0U2NlbmUudmlzaWJsZSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0VHJlZS5zcGxhdE1lc2guZ2V0U3BsYXRDb2xvcihzcGxhdEdsb2JhbEluZGV4LCB0ZW1wQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0VHJlZS5zcGxhdE1lc2guZ2V0U3BsYXRDZW50ZXIoc3BsYXRHbG9iYWxJbmRleCwgdGVtcENlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRUcmVlLnNwbGF0TWVzaC5nZXRTcGxhdFNjYWxlQW5kUm90YXRpb24oc3BsYXRHbG9iYWxJbmRleCwgdGVtcFNjYWxlLCB0ZW1wUm90YXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFNjYWxlLnggPD0gc2NhbGVFcHNpbG9uIHx8IHRlbXBTY2FsZS55IDw9IHNjYWxlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxhdFRyZWUuc3BsYXRNZXNoLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCAmJiB0ZW1wU2NhbGUueiA8PSBzY2FsZUVwc2lsb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmF5Y2FzdEFnYWluc3RUcnVlU3BsYXRFbGxpcHNvaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJhZGl1cyA9ICh0ZW1wU2NhbGUueCArIHRlbXBTY2FsZS55KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudENvdW50ID0gMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGF0VHJlZS5zcGxhdE1lc2guc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXMgKz0gdGVtcFNjYWxlLno7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRDb3VudCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzID0gcmFkaXVzIC8gY29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXkuaW50ZXJzZWN0U3BoZXJlKHRlbXBDZW50ZXIsIHJhZGl1cywgdGVtcEhpdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpdENsb25lID0gdGVtcEhpdC5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0Q2xvbmUuc3BsYXRJbmRleCA9IHNwbGF0R2xvYmFsSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRIaXRzLnB1c2goaGl0Q2xvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVNYXRyaXgubWFrZVNjYWxlKHRlbXBTY2FsZS54LCB0ZW1wU2NhbGUueSwgdGVtcFNjYWxlLnopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbk1hdHJpeC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbih0ZW1wUm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmlmb3JtU2NhbGUgPSBNYXRoLmxvZzEwKHRlbXBDb2xvci53KSAqIDIuMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVNjYWxlTWF0cml4Lm1ha2VTY2FsZSh1bmlmb3JtU2NhbGUsIHVuaWZvcm1TY2FsZSwgdW5pZm9ybVNjYWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwaGVyZVNwYWNlLmNvcHkodW5pZm9ybVNjYWxlTWF0cml4KS5tdWx0aXBseShyb3RhdGlvbk1hdHJpeCkubXVsdGlwbHkoc2NhbGVNYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1NwaGVyZVNwYWNlLmNvcHkoZnJvbVNwaGVyZVNwYWNlKS5pbnZlcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFJheS5vcmlnaW4uY29weShyYXkub3JpZ2luKS5zdWIodGVtcENlbnRlcikuYXBwbHlNYXRyaXg0KHRvU3BoZXJlU3BhY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUmF5LmRpcmVjdGlvbi5jb3B5KHJheS5vcmlnaW4pLmFkZChyYXkuZGlyZWN0aW9uKS5zdWIodGVtcENlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBSYXkuZGlyZWN0aW9uLmFwcGx5TWF0cml4NCh0b1NwaGVyZVNwYWNlKS5zdWIodGVtcFJheS5vcmlnaW4pLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFJheS5pbnRlcnNlY3RTcGhlcmUob3JpZ2luLCAxLjAsIHRlbXBIaXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoaXRDbG9uZSA9IHRlbXBIaXQuY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpdENsb25lLnNwbGF0SW5kZXggPSBzcGxhdEdsb2JhbEluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0Q2xvbmUub3JpZ2luLmFwcGx5TWF0cml4NChmcm9tU3BoZXJlU3BhY2UpLmFkZCh0ZW1wQ2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEhpdHMucHVzaChoaXRDbG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FzdFJheUF0U3BsYXRUcmVlTm9kZShyYXksIHNwbGF0VHJlZSwgY2hpbGQsIG91dEhpdHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvdXRIaXRzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBTb3J0V29ya2VyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIEhhbmRsZXMgR1BVLWJhc2VkIHNvcnRpbmcgdXNpbmcgV2ViQXNzZW1ibHlcclxuICovXHJcblxyXG5pbXBvcnQgeyBpc0lPUywgZ2V0SU9TU2VtZXZlciB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi9lbnVtcy9FbmdpbmVDb25zdGFudHMuanMnO1xyXG5cclxuLy8gQmFzZTY0IGVuY29kZWQgV0FTTSBtb2R1bGVzIGZvciBzb3J0aW5nXHJcbmNvbnN0IFNvcnRlcldhc20gPSBcIkFHRnpiUUVBQUFBQUR3aGtlV3hwYm1zdU1BRUVBQUFBQUFFYkEyQUFBR0FRZjM5L2YzOS9mMzkvZjM5L2YzOS9md0JnQUFGL0FoSUJBMlZ1ZGdadFpXMXZjbmtDQXdDQWdBUURCQU1BQVFJSFZBUVJYMTkzWVhOdFgyTmhiR3hmWTNSdmNuTUFBQmhmWDNkaGMyMWZZWEJ3YkhsZlpHRjBZVjl5Wld4dlkzTUFBQXR6YjNKMFNXNWtaWGhsY3dBQkUyVnRjMk55YVhCMFpXNWZkR3h6WDJsdWFYUUFBZ3FXRUFNREFBRUxpaEFFQVh3RGV3Ti9BMzBnQ3lBS2F5RU1Ba0FDUUNBT0JFQWdEUVJBUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRTWdEQ0VCQTBBZ0F5QUJRUUowSWdWcUlBSWdBQ0FGYWlnQ0FFRUNkR29vQWdBaUJUWUNBQ0FGSUFvZ0JTQUtTQnNoQ2lBRklBMGdCU0FOU2hzaERTQUJRUUZxSWdFZ0MwY05BQXNNQXdzZ0R3UkFJQXNnREUwTkFrRi9JUTlCK1AvLy93Y2hDa0dJZ0lDQWVDRU5JQXdoQWdOQUlBOGdCeUFBSUFKQkFuUWlGV29vQWdBaUZrRUNkR29vQWdBaUZFY0VRQUovSUFYOUNRSTRJQWdnRkVFR2RHb2lEdjBKQWd3Z0Rpb0NIUDBnQVNBT0tnSXMvU0FDSUE0cUFqejlJQVA5NWdFZ0JmMEpBaWdnRHYwSkFnZ2dEaW9DR1AwZ0FTQU9LZ0lvL1NBQ0lBNHFBamo5SUFQOTVnRWdCZjBKQWdnZ0R2MEpBZ0FnRGlvQ0VQMGdBU0FPS2dJZy9TQUNJQTRxQWpEOUlBUDk1Z0VnQmYwSkFoZ2dEdjBKQWdRZ0Rpb0NGUDBnQVNBT0tnSWsvU0FDSUE0cUFqVDlJQVA5NWdIOTVBSDk1QUg5NUFFaUVmMWYvUXdBQUFBQUFFQ1BRQUFBQUFBQVFJOUFJaEw5OGdFaUUvMGhBU0lRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoRGdKL0lCUDlJUUFpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdML1JFZ0R2MGNBUUovSUJFZ0VmME5DQWtLQ3d3TkRnOEFBQUFBQUFBQUFQMWZJQkw5OGdFaUVmMGhBQ0lRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXY5SEFJQ2Z5QVIvU0VCSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Qy8wY0F5RVNJQlFoRHdzZ0F5QVZhaUFCSUJaQkJIUnEvUUFBQUNBUy9iVUJJaEg5R3dBZ0VmMGJBV29nRWYwYkFtb2dFZjBiQTJvaURqWUNBQ0FPSUFvZ0NpQU9TaHNoQ2lBT0lBMGdEU0FPU0JzaERTQUNRUUZxSWdJZ0MwY05BQXNNQXdzQ2Z5QUZLZ0lJdS8wVUlBVXFBaGk3L1NJQi9Rd0FBQUFBQUVDUFFBQUFBQUFBUUk5QS9mSUJJaEg5SVFFaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElRNENmeUFSL1NFQUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RUNBbjhnQlNvQ0tMdEVBQUFBQUFCQWowQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVGUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRSWdBdjBSSUE3OUhBRWdCZjBjQWlFU0lBd2hCUU5BSUFNZ0JVRUNkQ0lDYWlBQklBQWdBbW9vQWdCQkJIUnEvUUFBQUNBUy9iVUJJaEg5R3dBZ0VmMGJBV29nRWYwYkFtb2lBallDQUNBQ0lBb2dBaUFLU0JzaENpQUNJQTBnQWlBTlNoc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dEUVJBUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRSWdEQ0VCQTBBZ0F5QUJRUUowSWdWcUFuOGdBaUFBSUFWcUtBSUFRUUowYWlvQ0FMdEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUlPTmdJQUlBb2dEaUFLSUE1SUd5RUtJQTBnRGlBTklBNUtHeUVOSUFGQkFXb2lBU0FMUncwQUN3d0NDeUFQUlFSQUlBc2dERTBOQVNBRktnSW9JUmNnQlNvQ0dDRVlJQVVxQWdnaEdVSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUZBMEFDZnlBWElBRWdBQ0FGUVFKMElnZHFLQUlBUVFSMGFpSUNLZ0lJbENBWklBSXFBZ0NVSUJnZ0Fpb0NCSlNTa3J0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RU9JQU1nQjJvZ0RqWUNBQ0FLSUE0Z0NpQU9TQnNoQ2lBTklBNGdEU0FPU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0N5QU1UUTBBUVg4aEQwSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUNBMEFnRHlBSElBQWdBa0VDZENJVWFpZ0NBRUVDZENJVmFpZ0NBQ0lPUndSQUlBWDlDUUk0SUFnZ0RrRUdkR29pRC8wSkFnd2dEeW9DSFAwZ0FTQVBLZ0lzL1NBQ0lBOHFBano5SUFQOTVnRWdCZjBKQWlnZ0QvMEpBZ2dnRHlvQ0dQMGdBU0FQS2dJby9TQUNJQThxQWpqOUlBUDk1Z0VnQmYwSkFnZ2dELzBKQWdBZ0R5b0NFUDBnQVNBUEtnSWcvU0FDSUE4cUFqRDlJQVA5NWdFZ0JmMEpBaGdnRC8wSkFnUWdEeW9DRlAwZ0FTQVBLZ0lrL1NBQ0lBOHFBalQ5SUFQOTVnSDk1QUg5NUFIOTVBRWhFU0FPSVE4TElBTWdGR29DZnlBUi9SOERJQUVnRlVFQ2RDSU9RUXh5YWlvQ0FKUWdFZjBmQWlBQklBNUJDSEpxS2dJQWxDQVIvUjhBSUFFZ0Rtb3FBZ0NVSUJIOUh3RWdBU0FPUVFSeWFpb0NBSlNTa3BLN1JBQUFBQUFBQUxCQW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2lEallDQUNBS0lBNGdDaUFPU0JzaENpQU5JQTRnRFNBT1Noc2hEU0FDUVFGcUlnSWdDMGNOQUFzTUFRdEJpSUNBZ0hnaERVSDQvLy8vQnlFS0N5QUxJQXhMQkVBZ0NVRUJhN01nRGJJZ0NyS1RsU0VYSUF3aERRTkFBbjhnRnlBRElBMUJBblJxSWdFb0FnQWdDbXV5bENJWWkwTUFBQUJQWFFSQUlCaW9EQUVMUVlDQWdJQjRDeUVPSUFFZ0RqWUNBQ0FFSUE1QkFuUnFJZ0VnQVNnQ0FFRUJhallDQUNBTlFRRnFJZzBnQzBjTkFBc0xJQWxCQWs4RVFDQUVLQUlBSVExQkFTRUtBMEFnQkNBS1FRSjBhaUlCSUFFb0FnQWdEV29pRFRZQ0FDQUtRUUZxSWdvZ0NVY05BQXNMSUF4QkFFb0VRQ0FNSVFvRFFDQUdJQXBCQVdzaUFVRUNkQ0lDYWlBQUlBSnFLQUlBTmdJQUlBcEJBVXNoQWlBQklRb2dBZzBBQ3dzZ0N5QU1TZ1JBSUFzaENnTkFJQVlnQ3lBRUlBTWdDa0VCYXlJS1FRSjBJZ0ZxS0FJQVFRSjBhaUlDS0FJQUlnVnJRUUowYWlBQUlBRnFLQUlBTmdJQUlBSWdCVUVCYXpZQ0FDQUtJQXhLRFFBTEN3c0VBRUVBQ3c9PVwiO1xyXG5cclxuY29uc3QgU29ydGVyV2FzbU5vU0lNRCA9IFwiQUdGemJRRUFBQUFBRHdoa2VXeHBibXN1TUFFRUFBQUFBQUVYQW1BQUFHQVFmMzkvZjM5L2YzOS9mMzkvZjM5L2Z3QUNFZ0VEWlc1MkJtMWxiVzl5ZVFJREFJQ0FCQU1EQWdBQkJ6NERFVjlmZDJGemJWOWpZV3hzWDJOMGIzSnpBQUFZWDE5M1lYTnRYMkZ3Y0d4NVgyUmhkR0ZmY21Wc2IyTnpBQUFMYzI5eWRFbHVaR1Y0WlhNQUFRcWlEd0lDQUF1Y0R3TUJmQWQ5Qm44Z0N5QUtheUVNQWtBQ1FDQU9CRUFnRFFSQVFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUU1nRENFRkEwQWdBeUFGUVFKMElnRnFJQUlnQUNBQmFpZ0NBRUVDZEdvb0FnQWlBVFlDQUNBQklBb2dBU0FLU0JzaENpQUJJQTBnQVNBTlNoc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUF3c2dEd1JBSUFzZ0RFME5Ba0YvSVE5QitQLy8vd2NoQ2tHSWdJQ0FlQ0VOSUF3aEFnTkFJQThnQnlBQUlBSkJBblFpR21vb0FnQkJBblFpRzJvb0FnQWlEa2NFUUFKL0lBVXFBamdpRVNBSUlBNUJCblJxSWc4cUFqeVVJQVVxQWlnaUVpQVBLZ0k0bENBRktnSUlJaE1nRHlvQ01KUWdCU29DR0NJVUlBOHFBalNVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUmdDZnlBUklBOHFBaXlVSUJJZ0R5b0NLSlFnRXlBUEtnSWdsQ0FVSUE4cUFpU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSa0NmeUFSSUE4cUFoeVVJQklnRHlvQ0dKUWdFeUFQS2dJUWxDQVVJQThxQWhTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVJ3Q2Z5QVJJQThxQWd5VUlCSWdEeW9DQ0pRZ0V5QVBLZ0lBbENBVUlBOHFBZ1NVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUjBnRGlFUEN5QURJQnBxSUFFZ0cwRUNkR29pRGlnQ0JDQWNiQ0FPS0FJQUlCMXNhaUFPS0FJSUlCbHNhaUFPS0FJTUlCaHNhaUlPTmdJQUlBNGdDaUFLSUE1S0d5RUtJQTRnRFNBTklBNUlHeUVOSUFKQkFXb2lBaUFMUncwQUN3d0RDd0ovSUFVcUFpaTdSQUFBQUFBQVFJOUFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoQWdKL0lBVXFBaGk3UkFBQUFBQUFRSTlBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaEJ5QUxJQXhOQW44Z0JTb0NDTHRFQUFBQUFBQkFqMENpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFUFFmai8vLzhISVFwQmlJQ0FnSGdoRFEwQ0lBd2hCUU5BSUFNZ0JVRUNkQ0lJYWlBQklBQWdDR29vQWdCQkJIUnFJZ2dvQWdRZ0Iyd2dDQ2dDQUNBUGJHb2dDQ2dDQ0NBQ2JHb2lDRFlDQUNBSUlBb2dDQ0FLU0JzaENpQUlJQTBnQ0NBTlNoc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dEUVJBUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRSWdEQ0VGQTBBZ0F5QUZRUUowSWdGcUFuOGdBaUFBSUFGcUtBSUFRUUowYWlvQ0FMdEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUlPTmdJQUlBb2dEaUFLSUE1SUd5RUtJQTBnRGlBTklBNUtHeUVOSUFWQkFXb2lCU0FMUncwQUN3d0NDeUFQUlFSQUlBc2dERTBOQVNBRktnSW9JUkVnQlNvQ0dDRVNJQVVxQWdnaEUwSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUZBMEFDZnlBUklBRWdBQ0FGUVFKMElnZHFLQUlBUVFSMGFpSUNLZ0lJbENBVElBSXFBZ0NVSUJJZ0Fpb0NCSlNTa3J0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RU9JQU1nQjJvZ0RqWUNBQ0FLSUE0Z0NpQU9TQnNoQ2lBTklBNGdEU0FPU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0N5QU1UUTBBUVg4aEQwSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUNBMEFnRHlBSElBQWdBa0VDZENJWWFpZ0NBRUVDZENJWmFpZ0NBQ0lPUndSQUlBVXFBamdpRVNBSUlBNUJCblJxSWc4cUFqeVVJQVVxQWlnaUVpQVBLZ0k0bENBRktnSUlJaE1nRHlvQ01KUWdCU29DR0NJVUlBOHFBalNVa3BLU0lSVWdFU0FQS2dJc2xDQVNJQThxQWlpVUlCTWdEeW9DSUpRZ0ZDQVBLZ0lrbEpLU2tpRVdJQkVnRHlvQ0hKUWdFaUFQS2dJWWxDQVRJQThxQWhDVUlCUWdEeW9DRkpTU2twSWhGeUFSSUE4cUFneVVJQklnRHlvQ0NKUWdFeUFQS2dJQWxDQVVJQThxQWdTVWtwS1NJUkVnRGlFUEN5QURJQmhxQW44Z0ZTQUJJQmxCQW5ScUlnNHFBZ3lVSUJZZ0Rpb0NDSlFnRVNBT0tnSUFsQ0FYSUE0cUFnU1VrcEtTdTBRQUFBQUFBQUN3UUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElnNDJBZ0FnQ2lBT0lBb2dEa2diSVFvZ0RTQU9JQTBnRGtvYklRMGdBa0VCYWlJQ0lBdEhEUUFMREFFTFFZaUFnSUI0SVExQitQLy8vd2NoQ2dzZ0N5QU1Td1JBSUFsQkFXdXpJQTJ5SUFxeWs1VWhFU0FNSVEwRFFBSi9JQkVnQXlBTlFRSjBhaUlCS0FJQUlBcHJzcFFpRW90REFBQUFUMTBFUUNBU3FBd0JDMEdBZ0lDQWVBc2hEaUFCSUE0MkFnQWdCQ0FPUVFKMGFpSUJJQUVvQWdCQkFXbzJBZ0FnRFVFQmFpSU5JQXRIRFFBTEN5QUpRUUpQQkVBZ0JDZ0NBQ0VOUVFFaENnTkFJQVFnQ2tFQ2RHb2lBU0FCS0FJQUlBMXFJZzAyQWdBZ0NrRUJhaUlLSUFsSERRQUxDeUFNUVFCS0JFQWdEQ0VLQTBBZ0JpQUtRUUZySWdGQkFuUWlBbW9nQUNBQ2FpZ0NBRFlDQUNBS1FRRkxJQUVoQ2cwQUN3c2dDeUFNU2dSQUlBc2hDZ05BSUFZZ0N5QUVJQU1nQ2tFQmF5SUtRUUowSWdGcUtBSUFRUUowYWlJQ0tBSUFJZ1ZyUVFKMGFpQUFJQUZxS0FJQU5nSUFJQUlnQlVFQmF6WUNBQ0FLSUF4S0RRQUxDd3M9XCI7XHJcblxyXG5jb25zdCBTb3J0ZXJXYXNtTm9uU2hhcmVkID0gXCJBR0Z6YlFFQUFBQUFEd2hrZVd4cGJtc3VNQUVFQUFBQUFBRVhBbUFBQUdBUWYzOS9mMzkvZjM5L2YzOS9mMzkvZndBQ0R3RURaVzUyQm0xbGJXOXllUUlBQUFNREFnQUJCejRERVY5ZmQyRnpiVjlqWVd4c1gyTjBiM0p6QUFBWVgxOTNZWE50WDJGd2NHeDVYMlJoZEdGZmNtVnNiMk56QUFBTGMyOXlkRWx1WkdWNFpYTUFBUXJyRHdJQ0FBdmxEd1FCZkFON0IzMERmeUFMSUFwcklRd0NRQUpBSUE0RVFDQU5CRUJCK1AvLy93Y2hDa0dJZ0lDQWVDRU5JQXNnREUwTkF5QU1JUVVEUUNBRElBVkJBblFpQVdvZ0FpQUFJQUZxS0FJQVFRSjBhaWdDQUNJQk5nSUFJQUVnQ2lBQklBcElHeUVLSUFFZ0RTQUJJQTFLR3lFTklBVkJBV29pQlNBTFJ3MEFDd3dEQ3lBUEJFQWdDeUFNVFEwQ1FYOGhEMEg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VDQTBBZ0R5QUhJQUFnQWtFQ2RDSWNhaWdDQUNJZFFRSjBhaWdDQUNJYlJ3UkFBbjhnQmYwSkFqZ2dDQ0FiUVFaMGFpSU8vUWtDRENBT0tnSWMvU0FCSUE0cUFpejlJQUlnRGlvQ1BQMGdBLzNtQVNBRi9Ra0NLQ0FPL1FrQ0NDQU9LZ0lZL1NBQklBNHFBaWo5SUFJZ0Rpb0NPUDBnQS8zbUFTQUYvUWtDQ0NBTy9Ra0NBQ0FPS2dJUS9TQUJJQTRxQWlEOUlBSWdEaW9DTVAwZ0EvM21BU0FGL1FrQ0dDQU8vUWtDQkNBT0tnSVUvU0FCSUE0cUFpVDlJQUlnRGlvQ05QMGdBLzNtQWYza0FmM2tBZjNrQVNJUi9WLzlEQUFBQUFBQVFJOUFBQUFBQUFCQWowQWlFdjN5QVNJVC9TRUJJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVPQW44Z0UvMGhBQ0lRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXY5RVNBTy9Sd0JBbjhnRVNBUi9RMElDUW9MREEwT0R3QUJBZ01BQVFJRC9WOGdFdjN5QVNJUi9TRUFJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDLzBjQWdKL0lCSDlJUUVpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdML1J3RElSSWdHeUVQQ3lBRElCeHFJQUVnSFVFRWRHcjlBQUFBSUJMOXRRRWlFZjBiQUNBUi9Sc0JhaUFSL1JzQ2FpQVIvUnNEYWlJT05nSUFJQTRnQ2lBS0lBNUtHeUVLSUE0Z0RTQU5JQTVJR3lFTklBSkJBV29pQWlBTFJ3MEFDd3dEQ3dKL0lBVXFBZ2k3L1JRZ0JTb0NHTHY5SWdIOURBQUFBQUFBUUk5QUFBQUFBQUJBajBEOThnRWlFZjBoQVNJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaERnSi9JQkg5SVFBaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTEFuOGdCU29DS0x0RUFBQUFBQUJBajBDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RUZRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFMOUVTQU8vUndCSUFYOUhBSWhFaUFNSVFVRFFDQURJQVZCQW5RaUFtb2dBU0FBSUFKcUtBSUFRUVIwYXYwQUFBQWdFdjIxQVNJUi9Sc0FJQkg5R3dGcUlCSDlHd0pxSWdJMkFnQWdBaUFLSUFJZ0NrZ2JJUW9nQWlBTklBSWdEVW9iSVEwZ0JVRUJhaUlGSUF0SERRQUxEQUlMSUEwRVFFSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0N5QU1UUTBDSUF3aEJRTkFJQU1nQlVFQ2RDSUJhZ0ovSUFJZ0FDQUJhaWdDQUVFQ2RHb3FBZ0M3UkFBQUFBQUFBTEJBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaURqWUNBQ0FLSUE0Z0NpQU9TQnNoQ2lBTklBNGdEU0FPU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0QwVUVRQ0FMSUF4TkRRRWdCU29DS0NFVUlBVXFBaGdoRlNBRktnSUlJUlpCK1AvLy93Y2hDa0dJZ0lDQWVDRU5JQXdoQlFOQUFuOGdGQ0FCSUFBZ0JVRUNkQ0lIYWlnQ0FFRUVkR29pQWlvQ0NKUWdGaUFDS2dJQWxDQVZJQUlxQWdTVWtwSzdSQUFBQUFBQUFMQkFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoRGlBRElBZHFJQTQyQWdBZ0NpQU9JQW9nRGtnYklRb2dEU0FPSUEwZ0Rrb2JJUTBnQlVFQmFpSUZJQXRIRFFBTERBSUxJQXNnREUwTkFFRi9JUTlCK1AvLy93Y2hDa0dJZ0lDQWVDRU5JQXdoQWdOQUlBOGdCeUFBSUFKQkFuUWlHMm9vQWdCQkFuUWlIR29vQWdBaURrY0VRQ0FGS2dJNEloUWdDQ0FPUVFaMGFpSVBLZ0k4bENBRktnSW9JaFVnRHlvQ09KUWdCU29DQ0NJV0lBOHFBakNVSUFVcUFoZ2lGeUFQS2dJMGxKS1NraUVZSUJRZ0R5b0NMSlFnRlNBUEtnSW9sQ0FXSUE4cUFpQ1VJQmNnRHlvQ0pKU1NrcEloR1NBVUlBOHFBaHlVSUJVZ0R5b0NHSlFnRmlBUEtnSVFsQ0FYSUE4cUFoU1VrcEtTSVJvZ0ZDQVBLZ0lNbENBVklBOHFBZ2lVSUJZZ0R5b0NBSlFnRnlBUEtnSUVsSktTa2lFVUlBNGhEd3NnQXlBYmFnSi9JQmdnQVNBY1FRSjBhaUlPS2dJTWxDQVpJQTRxQWdpVUlCUWdEaW9DQUpRZ0dpQU9LZ0lFbEpLU2tydEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUlPTmdJQUlBb2dEaUFLSUE1SUd5RUtJQTBnRGlBTklBNUtHeUVOSUFKQkFXb2lBaUFMUncwQUN3d0JDMEdJZ0lDQWVDRU5RZmovLy84SElRb0xJQXNnREVzRVFDQUpRUUZyc3lBTnNpQUtzcE9WSVJRZ0RDRU5BMEFDZnlBVUlBTWdEVUVDZEdvaUFTZ0NBQ0FLYTdLVUloV0xRd0FBQUU5ZEJFQWdGYWdNQVF0QmdJQ0FnSGdMSVE0Z0FTQU9OZ0lBSUFRZ0RrRUNkR29pQVNBQktBSUFRUUZxTmdJQUlBMUJBV29pRFNBTFJ3MEFDd3NnQ1VFQ1R3UkFJQVFvQWdBaERVRUJJUW9EUUNBRUlBcEJBblJxSWdFZ0FTZ0NBQ0FOYWlJTk5nSUFJQXBCQVdvaUNpQUpSdzBBQ3dzZ0RFRUFTZ1JBSUF3aENnTkFJQVlnQ2tFQmF5SUJRUUowSWdKcUlBQWdBbW9vQWdBMkFnQWdDa0VCU3lBQklRb05BQXNMSUFzZ0RFb0VRQ0FMSVFvRFFDQUdJQXNnQkNBRElBcEJBV3NpQ2tFQ2RDSUJhaWdDQUVFQ2RHb2lBaWdDQUNJRmEwRUNkR29nQUNBQmFpZ0NBRFlDQUNBQ0lBVkJBV3MyQWdBZ0NpQU1TZzBBQ3dzTFwiO1xyXG5cclxuY29uc3QgU29ydGVyV2FzbU5vU0lNRE5vblNoYXJlZCA9IFwiQUdGemJRRUFBQUFBRHdoa2VXeHBibXN1TUFFRUFBQUFBQUVYQW1BQUFHQVFmMzkvZjM5L2YzOS9mMzkvZjM5L2Z3QUNEd0VEWlc1MkJtMWxiVzl5ZVFJQUFBTURBZ0FCQno0REVWOWZkMkZ6YlY5allXeHNYMk4wYjNKekFBQVlYMTkzWVhOdFgyRndjR3g1WDJSaGRHRmZjbVZzYjJOekFBQUxjMjl5ZEVsdVpHVjRaWE1BQVFxaUR3SUNBQXVjRHdNQmZBZDlCbjhnQ3lBS2F5RU1Ba0FDUUNBT0JFQWdEUVJBUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRTWdEQ0VGQTBBZ0F5QUZRUUowSWdGcUlBSWdBQ0FCYWlnQ0FFRUNkR29vQWdBaUFUWUNBQ0FCSUFvZ0FTQUtTQnNoQ2lBQklBMGdBU0FOU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQXdzZ0R3UkFJQXNnREUwTkFrRi9JUTlCK1AvLy93Y2hDa0dJZ0lDQWVDRU5JQXdoQWdOQUlBOGdCeUFBSUFKQkFuUWlHbW9vQWdCQkFuUWlHMm9vQWdBaURrY0VRQUovSUFVcUFqZ2lFU0FJSUE1QkJuUnFJZzhxQWp5VUlBVXFBaWdpRWlBUEtnSTRsQ0FGS2dJSUloTWdEeW9DTUpRZ0JTb0NHQ0lVSUE4cUFqU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSZ0NmeUFSSUE4cUFpeVVJQklnRHlvQ0tKUWdFeUFQS2dJZ2xDQVVJQThxQWlTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVJrQ2Z5QVJJQThxQWh5VUlCSWdEeW9DR0pRZ0V5QVBLZ0lRbENBVUlBOHFBaFNVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUndDZnlBUklBOHFBZ3lVSUJJZ0R5b0NDSlFnRXlBUEtnSUFsQ0FVSUE4cUFnU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSMGdEaUVQQ3lBRElCcHFJQUVnRzBFQ2RHb2lEaWdDQkNBY2JDQU9LQUlBSUIxc2FpQU9LQUlJSUJsc2FpQU9LQUlNSUJoc2FpSU9OZ0lBSUE0Z0NpQUtJQTVLR3lFS0lBNGdEU0FOSUE1SUd5RU5JQUpCQVdvaUFpQUxSdzBBQ3d3REN3Si9JQVVxQWlpN1JBQUFBQUFBUUk5QW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hBZ0ovSUFVcUFoaTdSQUFBQUFBQVFJOUFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoQnlBTElBeE5BbjhnQlNvQ0NMdEVBQUFBQUFCQWowQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVQUWZqLy8vOEhJUXBCaUlDQWdIZ2hEUTBDSUF3aEJRTkFJQU1nQlVFQ2RDSUlhaUFCSUFBZ0NHb29BZ0JCQkhScUlnZ29BZ1FnQjJ3Z0NDZ0NBQ0FQYkdvZ0NDZ0NDQ0FDYkdvaUNEWUNBQ0FJSUFvZ0NDQUtTQnNoQ2lBSUlBMGdDQ0FOU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0RRUkFRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFJZ0RDRUZBMEFnQXlBRlFRSjBJZ0ZxQW44Z0FpQUFJQUZxS0FJQVFRSjBhaW9DQUx0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5SU9OZ0lBSUFvZ0RpQUtJQTVJR3lFS0lBMGdEaUFOSUE1S0d5RU5JQVZCQVdvaUJTQUxSdzBBQ3d3Q0N5QVBSUVJBSUFzZ0RFME5BU0FGS2dJb0lSRWdCU29DR0NFU0lBVXFBZ2doRTBINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFRkEwQUNmeUFSSUFFZ0FDQUZRUUowSWdkcUtBSUFRUVIwYWlJQ0tnSUlsQ0FUSUFJcUFnQ1VJQklnQWlvQ0JKU1NrcnRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFT0lBTWdCMm9nRGpZQ0FDQUtJQTRnQ2lBT1NCc2hDaUFOSUE0Z0RTQU9TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnQ3lBTVRRMEFRWDhoRDBINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFQ0EwQWdEeUFISUFBZ0FrRUNkQ0lZYWlnQ0FFRUNkQ0laYWlnQ0FDSU9Sd1JBSUFVcUFqZ2lFU0FJSUE1QkJuUnFJZzhxQWp5VUlBVXFBaWdpRWlBUEtnSTRsQ0FGS2dJSUloTWdEeW9DTUpRZ0JTb0NHQ0lVSUE4cUFqU1VrcEtTSVJVZ0VTQVBLZ0lzbENBU0lBOHFBaWlVSUJNZ0R5b0NJSlFnRkNBUEtnSWtsSktTa2lFV0lCRWdEeW9DSEpRZ0VpQVBLZ0lZbENBVElBOHFBaENVSUJRZ0R5b0NGSlNTa3BJaEZ5QVJJQThxQWd5VUlCSWdEeW9DQ0pRZ0V5QVBLZ0lBbENBVUlBOHFBZ1NVa3BLU0lSRWdEaUVQQ3lBRElCaHFBbjhnRlNBQklCbEJBblJxSWc0cUFneVVJQllnRGlvQ0NKUWdFU0FPS2dJQWxDQVhJQTRxQWdTVWtwS1N1MFFBQUFBQUFBQ3dRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSWc0MkFnQWdDaUFPSUFvZ0RrZ2JJUW9nRFNBT0lBMGdEa29iSVEwZ0FrRUJhaUlDSUF0SERRQUxEQUVMUVlpQWdJQjRJUTFCK1AvLy93Y2hDZ3NnQ3lBTVN3UkFJQWxCQVd1eklBMnlJQXF5azVVaEVTQU1JUTBEUUFKL0lCRWdBeUFOUVFKMGFpSUJLQUlBSUFwcnNwUWlFb3REQUFBQVQxMEVRQ0FTcUF3QkMwR0FnSUNBZUFzaERpQUJJQTQyQWdBZ0JDQU9RUUowYWlJQklBRW9BZ0JCQVdvMkFnQWdEVUVCYWlJTklBdEhEUUFMQ3lBSlFRSlBCRUFnQkNnQ0FDRU5RUUVoQ2dOQUlBUWdDa0VDZEdvaUFTQUJLQUlBSUExcUlnMDJBZ0FnQ2tFQmFpSUtJQWxIRFFBTEN5QU1RUUJLQkVBZ0RDRUtBMEFnQmlBS1FRRnJJZ0ZCQW5RaUFtb2dBQ0FDYWlnQ0FEWUNBQ0FLUVFGTElBRWhDZzBBQ3dzZ0N5QU1TZ1JBSUFzaENnTkFJQVlnQ3lBRUlBTWdDa0VCYXlJS1FRSjBJZ0ZxS0FJQVFRSjBhaUlDS0FJQUlnVnJRUUowYWlBQUlBRnFLQUlBTmdJQUlBSWdCVUVCYXpZQ0FDQUtJQXhLRFFBTEN3cz1cIjtcclxuXHJcbi8qKlxyXG4gKiBTb3J0IHdvcmtlciBmdW5jdGlvbiB0aGF0IHJ1bnMgaW4gYSBXZWIgV29ya2VyXHJcbiAqIEhhbmRsZXMgdGhlIGFjdHVhbCBzb3J0aW5nIGxvZ2ljIHVzaW5nIFdlYkFzc2VtYmx5XHJcbiAqL1xyXG5mdW5jdGlvbiBzb3J0V29ya2VyKHNlbGYpIHtcclxuXHJcbiAgICBsZXQgd2FzbUluc3RhbmNlO1xyXG4gICAgbGV0IHdhc21NZW1vcnk7XHJcbiAgICBsZXQgdXNlU2hhcmVkTWVtb3J5O1xyXG4gICAgbGV0IGludGVnZXJCYXNlZFNvcnQ7XHJcbiAgICBsZXQgZHluYW1pY01vZGU7XHJcbiAgICBsZXQgc3BsYXRDb3VudDtcclxuICAgIGxldCBpbmRleGVzVG9Tb3J0T2Zmc2V0O1xyXG4gICAgbGV0IHNvcnRlZEluZGV4ZXNPZmZzZXQ7XHJcbiAgICBsZXQgc2NlbmVJbmRleGVzT2Zmc2V0O1xyXG4gICAgbGV0IHRyYW5zZm9ybXNPZmZzZXQ7XHJcbiAgICBsZXQgcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQ7XHJcbiAgICBsZXQgbWFwcGVkRGlzdGFuY2VzT2Zmc2V0O1xyXG4gICAgbGV0IGZyZXF1ZW5jaWVzT2Zmc2V0O1xyXG4gICAgbGV0IGNlbnRlcnNPZmZzZXQ7XHJcbiAgICBsZXQgbW9kZWxWaWV3UHJvak9mZnNldDtcclxuICAgIGxldCBjb3VudHNaZXJvO1xyXG4gICAgbGV0IHNvcnRlZEluZGV4ZXNPdXQ7XHJcbiAgICBsZXQgZGlzdGFuY2VNYXBSYW5nZTtcclxuICAgIGxldCB1cGxvYWRlZFNwbGF0Q291bnQ7XHJcbiAgICBsZXQgQ29uc3RhbnRzO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNvcnQoc3BsYXRTb3J0Q291bnQsIHNwbGF0UmVuZGVyQ291bnQsIG1vZGVsVmlld1Byb2osXHJcbiAgICAgICAgICAgICAgICAgIHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzLCBjb3B5SW5kZXhlc1RvU29ydCwgY29weVByZWNvbXB1dGVkRGlzdGFuY2VzLCBjb3B5VHJhbnNmb3Jtcykge1xyXG4gICAgICAgIGNvbnN0IHNvcnRTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcbiAgICAgICAgaWYgKCF1c2VTaGFyZWRNZW1vcnkpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXhlc1RvU29ydCA9IG5ldyBVaW50MzJBcnJheSh3YXNtTWVtb3J5LCBpbmRleGVzVG9Tb3J0T2Zmc2V0LCBjb3B5SW5kZXhlc1RvU29ydC5ieXRlTGVuZ3RoIC8gQ29uc3RhbnRzLkJ5dGVzUGVySW50KTtcclxuICAgICAgICAgICAgaW5kZXhlc1RvU29ydC5zZXQoY29weUluZGV4ZXNUb1NvcnQpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1zID0gbmV3IEZsb2F0MzJBcnJheSh3YXNtTWVtb3J5LCB0cmFuc2Zvcm1zT2Zmc2V0LCBjb3B5VHJhbnNmb3Jtcy5ieXRlTGVuZ3RoIC8gQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1zLnNldChjb3B5VHJhbnNmb3Jtcyk7XHJcbiAgICAgICAgICAgIGlmICh1c2VQcmVjb21wdXRlZERpc3RhbmNlcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHByZWNvbXB1dGVkRGlzdGFuY2VzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGludGVnZXJCYXNlZFNvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVjb21wdXRlZERpc3RhbmNlcyA9IG5ldyBJbnQzMkFycmF5KHdhc21NZW1vcnksIHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weVByZWNvbXB1dGVkRGlzdGFuY2VzLmJ5dGVMZW5ndGggLyBDb25zdGFudHMuQnl0ZXNQZXJJbnQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVjb21wdXRlZERpc3RhbmNlcyA9IG5ldyBGbG9hdDMyQXJyYXkod2FzbU1lbW9yeSwgcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcy5ieXRlTGVuZ3RoIC8gQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcHJlY29tcHV0ZWREaXN0YW5jZXMuc2V0KGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghY291bnRzWmVybykgY291bnRzWmVybyA9IG5ldyBVaW50MzJBcnJheShkaXN0YW5jZU1hcFJhbmdlKTtcclxuICAgICAgICBuZXcgRmxvYXQzMkFycmF5KHdhc21NZW1vcnksIG1vZGVsVmlld1Byb2pPZmZzZXQsIDE2KS5zZXQobW9kZWxWaWV3UHJvaik7XHJcbiAgICAgICAgbmV3IFVpbnQzMkFycmF5KHdhc21NZW1vcnksIGZyZXF1ZW5jaWVzT2Zmc2V0LCBkaXN0YW5jZU1hcFJhbmdlKS5zZXQoY291bnRzWmVybyk7XHJcbiAgICAgICAgd2FzbUluc3RhbmNlLmV4cG9ydHMuc29ydEluZGV4ZXMoaW5kZXhlc1RvU29ydE9mZnNldCwgY2VudGVyc09mZnNldCwgcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkRGlzdGFuY2VzT2Zmc2V0LCBmcmVxdWVuY2llc09mZnNldCwgbW9kZWxWaWV3UHJvak9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleGVzT2Zmc2V0LCBzY2VuZUluZGV4ZXNPZmZzZXQsIHRyYW5zZm9ybXNPZmZzZXQsIGRpc3RhbmNlTWFwUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRTb3J0Q291bnQsIHNwbGF0UmVuZGVyQ291bnQsIHNwbGF0Q291bnQsIHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzLCBpbnRlZ2VyQmFzZWRTb3J0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR5bmFtaWNNb2RlKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc29ydE1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICdzb3J0RG9uZSc6IHRydWUsXHJcbiAgICAgICAgICAgICdzcGxhdFNvcnRDb3VudCc6IHNwbGF0U29ydENvdW50LFxyXG4gICAgICAgICAgICAnc3BsYXRSZW5kZXJDb3VudCc6IHNwbGF0UmVuZGVyQ291bnQsXHJcbiAgICAgICAgICAgICdzb3J0VGltZSc6IDBcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghdXNlU2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZEluZGV4ZXMgPSBuZXcgVWludDMyQXJyYXkod2FzbU1lbW9yeSwgc29ydGVkSW5kZXhlc09mZnNldCwgc3BsYXRSZW5kZXJDb3VudCk7XHJcbiAgICAgICAgICAgIGlmICghc29ydGVkSW5kZXhlc091dCB8fCBzb3J0ZWRJbmRleGVzT3V0Lmxlbmd0aCA8IHNwbGF0UmVuZGVyQ291bnQpIHtcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4ZXNPdXQgPSBuZXcgVWludDMyQXJyYXkoc3BsYXRSZW5kZXJDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc29ydGVkSW5kZXhlc091dC5zZXQoc29ydGVkSW5kZXhlcyk7XHJcbiAgICAgICAgICAgIHNvcnRNZXNzYWdlLnNvcnRlZEluZGV4ZXMgPSBzb3J0ZWRJbmRleGVzT3V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzb3J0RW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuICAgICAgICBzb3J0TWVzc2FnZS5zb3J0VGltZSA9IHNvcnRFbmRUaW1lIC0gc29ydFN0YXJ0VGltZTtcclxuXHJcbiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZShzb3J0TWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2VsZi5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLmRhdGEuY2VudGVycykge1xyXG4gICAgICAgICAgICBsZXQgY2VudGVycyA9IGUuZGF0YS5jZW50ZXJzO1xyXG4gICAgICAgICAgICBsZXQgc2NlbmVJbmRleGVzID0gZS5kYXRhLnNjZW5lSW5kZXhlcztcclxuICAgICAgICAgICAgaWYgKGludGVnZXJCYXNlZFNvcnQpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBJbnQzMkFycmF5KHdhc21NZW1vcnksIGNlbnRlcnNPZmZzZXQgKyBlLmRhdGEucmFuZ2UuZnJvbSAqIENvbnN0YW50cy5CeXRlc1BlckludCAqIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEucmFuZ2UuY291bnQgKiA0KS5zZXQobmV3IEludDMyQXJyYXkoY2VudGVycykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IEZsb2F0MzJBcnJheSh3YXNtTWVtb3J5LCBjZW50ZXJzT2Zmc2V0ICsgZS5kYXRhLnJhbmdlLmZyb20gKiBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCAqIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YS5yYW5nZS5jb3VudCAqIDQpLnNldChuZXcgRmxvYXQzMkFycmF5KGNlbnRlcnMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBVaW50MzJBcnJheSh3YXNtTWVtb3J5LCBzY2VuZUluZGV4ZXNPZmZzZXQgKyBlLmRhdGEucmFuZ2UuZnJvbSAqIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRhLnJhbmdlLmNvdW50KS5zZXQobmV3IFVpbnQzMkFycmF5KHNjZW5lSW5kZXhlcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwbG9hZGVkU3BsYXRDb3VudCA9IGUuZGF0YS5yYW5nZS5mcm9tICsgZS5kYXRhLnJhbmdlLmNvdW50O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhLnNvcnQpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVuZGVyQ291bnQgPSBNYXRoLm1pbihlLmRhdGEuc29ydC5zcGxhdFJlbmRlckNvdW50IHx8IDAsIHVwbG9hZGVkU3BsYXRDb3VudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRDb3VudCA9IE1hdGgubWluKGUuZGF0YS5zb3J0LnNwbGF0U29ydENvdW50IHx8IDAsIHVwbG9hZGVkU3BsYXRDb3VudCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzID0gZS5kYXRhLnNvcnQudXNlUHJlY29tcHV0ZWREaXN0YW5jZXM7XHJcblxyXG4gICAgICAgICAgICBsZXQgY29weUluZGV4ZXNUb1NvcnQ7XHJcbiAgICAgICAgICAgIGxldCBjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXM7XHJcbiAgICAgICAgICAgIGxldCBjb3B5VHJhbnNmb3JtcztcclxuICAgICAgICAgICAgaWYgKCF1c2VTaGFyZWRNZW1vcnkpIHtcclxuICAgICAgICAgICAgICAgIGNvcHlJbmRleGVzVG9Tb3J0ID0gZS5kYXRhLnNvcnQuaW5kZXhlc1RvU29ydDtcclxuICAgICAgICAgICAgICAgIGNvcHlUcmFuc2Zvcm1zID0gZS5kYXRhLnNvcnQudHJhbnNmb3JtcztcclxuICAgICAgICAgICAgICAgIGlmICh1c2VQcmVjb21wdXRlZERpc3RhbmNlcykgY29weVByZWNvbXB1dGVkRGlzdGFuY2VzID0gZS5kYXRhLnNvcnQucHJlY29tcHV0ZWREaXN0YW5jZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc29ydChzb3J0Q291bnQsIHJlbmRlckNvdW50LCBlLmRhdGEuc29ydC5tb2RlbFZpZXdQcm9qLCB1c2VQcmVjb21wdXRlZERpc3RhbmNlcyxcclxuICAgICAgICAgICAgICAgICBjb3B5SW5kZXhlc1RvU29ydCwgY29weVByZWNvbXB1dGVkRGlzdGFuY2VzLCBjb3B5VHJhbnNmb3Jtcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmRhdGEuaW5pdCkge1xyXG4gICAgICAgICAgICAvLyBZZXAsIHRoaXMgaXMgc3VwZXIgaGFja3kgYW5kIGdyb3NzIDooXHJcbiAgICAgICAgICAgIENvbnN0YW50cyA9IGUuZGF0YS5pbml0LkNvbnN0YW50cztcclxuXHJcbiAgICAgICAgICAgIHNwbGF0Q291bnQgPSBlLmRhdGEuaW5pdC5zcGxhdENvdW50O1xyXG4gICAgICAgICAgICB1c2VTaGFyZWRNZW1vcnkgPSBlLmRhdGEuaW5pdC51c2VTaGFyZWRNZW1vcnk7XHJcbiAgICAgICAgICAgIGludGVnZXJCYXNlZFNvcnQgPSBlLmRhdGEuaW5pdC5pbnRlZ2VyQmFzZWRTb3J0O1xyXG4gICAgICAgICAgICBkeW5hbWljTW9kZSA9IGUuZGF0YS5pbml0LmR5bmFtaWNNb2RlO1xyXG4gICAgICAgICAgICBkaXN0YW5jZU1hcFJhbmdlID0gZS5kYXRhLmluaXQuZGlzdGFuY2VNYXBSYW5nZTtcclxuICAgICAgICAgICAgdXBsb2FkZWRTcGxhdENvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IENFTlRFUlNfQllURVNfUEVSX0VOVFJZID0gaW50ZWdlckJhc2VkU29ydCA/IChDb25zdGFudHMuQnl0ZXNQZXJJbnQgKiA0KSA6IChDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCAqIDQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc29ydGVyV2FzbUJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoZS5kYXRhLmluaXQuc29ydGVyV2FzbUJ5dGVzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1hdHJpeFNpemUgPSAxNiAqIENvbnN0YW50cy5CeXRlc1BlckZsb2F0O1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvckluZGV4ZXNUb1NvcnQgPSBzcGxhdENvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVySW50O1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvckNlbnRlcnMgPSBzcGxhdENvdW50ICogQ0VOVEVSU19CWVRFU19QRVJfRU5UUlk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9yTW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCA9IG1hdHJpeFNpemU7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9yUHJlY29tcHV0ZWREaXN0YW5jZXMgPSBpbnRlZ2VyQmFzZWRTb3J0ID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzcGxhdENvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVySW50KSA6IChzcGxhdENvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQpO1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvck1hcHBlZERpc3RhbmNlcyA9IHNwbGF0Q291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9yU29ydGVkSW5kZXhlcyA9IHNwbGF0Q291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9ySW50ZXJtZWRpYXRlU29ydEJ1ZmZlcnMgPSBpbnRlZ2VyQmFzZWRTb3J0ID8gKGRpc3RhbmNlTWFwUmFuZ2UgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQgKiAyKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRpc3RhbmNlTWFwUmFuZ2UgKiBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCAqIDIpO1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZGZvclRyYW5zZm9ybUluZGV4ZXMgPSBkeW5hbWljTW9kZSA/IChzcGxhdENvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVySW50KSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkZm9yVHJhbnNmb3JtcyA9IGR5bmFtaWNNb2RlID8gKENvbnN0YW50cy5NYXhTY2VuZXMgKiBtYXRyaXhTaXplKSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhTWVtb3J5ID0gQ29uc3RhbnRzLk1lbW9yeVBhZ2VTaXplICogMzI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0b3RhbFJlcXVpcmVkTWVtb3J5ID0gbWVtb3J5UmVxdWlyZWRGb3JJbmRleGVzVG9Tb3J0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkRm9yQ2VudGVycyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZEZvck1vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRGb3JQcmVjb21wdXRlZERpc3RhbmNlcyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZEZvck1hcHBlZERpc3RhbmNlcyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZEZvckludGVybWVkaWF0ZVNvcnRCdWZmZXJzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkRm9yU29ydGVkSW5kZXhlcyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZGZvclRyYW5zZm9ybUluZGV4ZXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRmb3JUcmFuc2Zvcm1zICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhTWVtb3J5O1xyXG4gICAgICAgICAgICBjb25zdCB0b3RhbFBhZ2VzUmVxdWlyZWQgPSBNYXRoLmZsb29yKHRvdGFsUmVxdWlyZWRNZW1vcnkgLyBDb25zdGFudHMuTWVtb3J5UGFnZVNpemUgKSArIDE7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlcldhc21JbXBvcnQgPSB7XHJcbiAgICAgICAgICAgICAgICBtb2R1bGU6IHt9LFxyXG4gICAgICAgICAgICAgICAgZW52OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVtb3J5OiBuZXcgV2ViQXNzZW1ibHkuTWVtb3J5KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbDogdG90YWxQYWdlc1JlcXVpcmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiB0b3RhbFBhZ2VzUmVxdWlyZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgV2ViQXNzZW1ibHkuY29tcGlsZShzb3J0ZXJXYXNtQnl0ZXMpXHJcbiAgICAgICAgICAgIC50aGVuKCh3YXNtTW9kdWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUod2FzbU1vZHVsZSwgc29ydGVyV2FzbUltcG9ydCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChpbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2FzbUluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBpbmRleGVzVG9Tb3J0T2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgICAgIGNlbnRlcnNPZmZzZXQgPSBpbmRleGVzVG9Tb3J0T2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JJbmRleGVzVG9Tb3J0O1xyXG4gICAgICAgICAgICAgICAgbW9kZWxWaWV3UHJvak9mZnNldCA9IGNlbnRlcnNPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvckNlbnRlcnM7XHJcbiAgICAgICAgICAgICAgICBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCA9IG1vZGVsVmlld1Byb2pPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvck1vZGVsVmlld1Byb2plY3Rpb25NYXRyaXg7XHJcbiAgICAgICAgICAgICAgICBtYXBwZWREaXN0YW5jZXNPZmZzZXQgPSBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9yUHJlY29tcHV0ZWREaXN0YW5jZXM7XHJcbiAgICAgICAgICAgICAgICBmcmVxdWVuY2llc09mZnNldCA9IG1hcHBlZERpc3RhbmNlc09mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9yTWFwcGVkRGlzdGFuY2VzO1xyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXhlc09mZnNldCA9IGZyZXF1ZW5jaWVzT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JJbnRlcm1lZGlhdGVTb3J0QnVmZmVycztcclxuICAgICAgICAgICAgICAgIHNjZW5lSW5kZXhlc09mZnNldCA9IHNvcnRlZEluZGV4ZXNPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvclNvcnRlZEluZGV4ZXM7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zT2Zmc2V0ID0gc2NlbmVJbmRleGVzT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRmb3JUcmFuc2Zvcm1JbmRleGVzO1xyXG4gICAgICAgICAgICAgICAgd2FzbU1lbW9yeSA9IHNvcnRlcldhc21JbXBvcnQuZW52Lm1lbW9yeS5idWZmZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlU2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzb3J0U2V0dXBQaGFzZTFDb21wbGV0ZSc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdpbmRleGVzVG9Tb3J0QnVmZmVyJzogd2FzbU1lbW9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2luZGV4ZXNUb1NvcnRPZmZzZXQnOiBpbmRleGVzVG9Tb3J0T2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc29ydGVkSW5kZXhlc0J1ZmZlcic6IHdhc21NZW1vcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzb3J0ZWRJbmRleGVzT2Zmc2V0Jzogc29ydGVkSW5kZXhlc09mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3ByZWNvbXB1dGVkRGlzdGFuY2VzQnVmZmVyJzogd2FzbU1lbW9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3ByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0JzogcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm1zQnVmZmVyJzogd2FzbU1lbW9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybXNPZmZzZXQnOiB0cmFuc2Zvcm1zT2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc29ydFNldHVwUGhhc2UxQ29tcGxldGUnOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc29ydCB3b3JrZXIgZm9yIEdQVS1iYXNlZCBzb3J0aW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGxhdENvdW50IC0gTnVtYmVyIG9mIHNwbGF0cyB0byBzb3J0XHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlU2hhcmVkTWVtb3J5IC0gV2hldGhlciB0byB1c2Ugc2hhcmVkIG1lbW9yeVxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZVNJTURJblNvcnQgLSBXaGV0aGVyIHRvIGVuYWJsZSBTSU1EIGluc3RydWN0aW9uc1xyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGludGVnZXJCYXNlZFNvcnQgLSBXaGV0aGVyIHRvIHVzZSBpbnRlZ2VyLWJhc2VkIHNvcnRpbmdcclxuICogQHBhcmFtIHtib29sZWFufSBkeW5hbWljTW9kZSAtIFdoZXRoZXIgZHluYW1pYyBtb2RlIGlzIGVuYWJsZWRcclxuICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uIC0gUHJlY2lzaW9uIGZvciBkaXN0YW5jZSBtYXBcclxuICogQHJldHVybnMge1dvcmtlcn0gVGhlIGNyZWF0ZWQgc29ydCB3b3JrZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTb3J0V29ya2VyKHNwbGF0Q291bnQsIHVzZVNoYXJlZE1lbW9yeSwgZW5hYmxlU0lNREluU29ydCwgaW50ZWdlckJhc2VkU29ydCwgZHluYW1pY01vZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uID0gQ29uc3RhbnRzLkRlZmF1bHRTcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbikge1xyXG4gICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihcclxuICAgICAgICBVUkwuY3JlYXRlT2JqZWN0VVJMKFxyXG4gICAgICAgICAgICBuZXcgQmxvYihbJygnLCBzb3J0V29ya2VyLnRvU3RyaW5nKCksICcpKHNlbGYpJ10sIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JyxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgKSxcclxuICAgICk7XHJcblxyXG4gICAgbGV0IHNvdXJjZVdhc20gPSBTb3J0ZXJXYXNtO1xyXG5cclxuICAgIC8vIGlPUyBtYWtlcyBjaG9vc2luZyB0aGUgcmlnaHQgV2ViQXNzZW1ibHkgY29uZmlndXJhdGlvbiB0cmlja3kgOihcclxuICAgIGNvbnN0IGlPU1NlbVZlciA9IGlzSU9TKCkgPyBnZXRJT1NTZW1ldmVyKCkgOiBudWxsO1xyXG4gICAgaWYgKCFlbmFibGVTSU1ESW5Tb3J0ICYmICF1c2VTaGFyZWRNZW1vcnkpIHtcclxuICAgICAgICBzb3VyY2VXYXNtID0gU29ydGVyV2FzbU5vU0lNRDtcclxuICAgICAgICAvLyBUZXN0aW5nIG9uIHZhcmlvdXMgZGV2aWNlcyBoYXMgc2hvd24gdGhhdCBldmVuIHdoZW4gc2hhcmVkIG1lbW9yeSBpcyBkaXNhYmxlZCwgdGhlIFdBU00gbW9kdWxlIHdpdGggc2hhcmVkXHJcbiAgICAgICAgLy8gbWVtb3J5IGNhbiBzdGlsbCBiZSB1c2VkIG1vc3Qgb2YgdGhlIHRpbWUgLS0gdGhlIGV4Y2VwdGlvbiBzZWVtcyB0byBiZSBpT1MgZGV2aWNlcyBiZWxvdyAxNi40XHJcbiAgICAgICAgaWYgKGlPU1NlbVZlciAmJiBpT1NTZW1WZXIubWFqb3IgPD0gMTYgJiYgaU9TU2VtVmVyLm1pbm9yIDwgNCkge1xyXG4gICAgICAgICAgICBzb3VyY2VXYXNtID0gU29ydGVyV2FzbU5vU0lNRE5vblNoYXJlZDtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKCFlbmFibGVTSU1ESW5Tb3J0KSB7XHJcbiAgICAgICAgc291cmNlV2FzbSA9IFNvcnRlcldhc21Ob1NJTUQ7XHJcbiAgICB9IGVsc2UgaWYgKCF1c2VTaGFyZWRNZW1vcnkpIHtcclxuICAgICAgICAvLyBTYW1lIGlzc3VlIHdpdGggc2hhcmVkIG1lbW9yeSBhcyBhYm92ZSBvbiBpT1MgZGV2aWNlc1xyXG4gICAgICAgIGlmIChpT1NTZW1WZXIgJiYgaU9TU2VtVmVyLm1ham9yIDw9IDE2ICYmIGlPU1NlbVZlci5taW5vciA8IDQpIHtcclxuICAgICAgICAgICAgc291cmNlV2FzbSA9IFNvcnRlcldhc21Ob25TaGFyZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNvcnRlcldhc21CaW5hcnlTdHJpbmcgPSBhdG9iKHNvdXJjZVdhc20pO1xyXG4gICAgY29uc3Qgc29ydGVyV2FzbUJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc29ydGVyV2FzbUJpbmFyeVN0cmluZy5sZW5ndGgpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3J0ZXJXYXNtQmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgc29ydGVyV2FzbUJ5dGVzW2ldID0gc29ydGVyV2FzbUJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG5cclxuICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgJ2luaXQnOiB7XHJcbiAgICAgICAgICAgICdzb3J0ZXJXYXNtQnl0ZXMnOiBzb3J0ZXJXYXNtQnl0ZXMuYnVmZmVyLFxyXG4gICAgICAgICAgICAnc3BsYXRDb3VudCc6IHNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICd1c2VTaGFyZWRNZW1vcnknOiB1c2VTaGFyZWRNZW1vcnksXHJcbiAgICAgICAgICAgICdpbnRlZ2VyQmFzZWRTb3J0JzogaW50ZWdlckJhc2VkU29ydCxcclxuICAgICAgICAgICAgJ2R5bmFtaWNNb2RlJzogZHluYW1pY01vZGUsXHJcbiAgICAgICAgICAgICdkaXN0YW5jZU1hcFJhbmdlJzogMSA8PCBzcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbixcclxuICAgICAgICAgICAgLy8gU3VwZXIgaGFja3lcclxuICAgICAgICAgICAgJ0NvbnN0YW50cyc6IHtcclxuICAgICAgICAgICAgICAgICdCeXRlc1BlckZsb2F0JzogQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQsXHJcbiAgICAgICAgICAgICAgICAnQnl0ZXNQZXJJbnQnOiBDb25zdGFudHMuQnl0ZXNQZXJJbnQsXHJcbiAgICAgICAgICAgICAgICAnTWVtb3J5UGFnZVNpemUnOiBDb25zdGFudHMuTWVtb3J5UGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgICAnTWF4U2NlbmVzJzogQ29uc3RhbnRzLk1heFNjZW5lc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gd29ya2VyO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBWaWV3ZXJcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIRUFWSUxZIE1PRElGSUVEIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBBZGRlZCBGTEFNRSBoZWFkIG1vZGVsIGludGVncmF0aW9uXHJcbiAqIC0gRXh0ZW5kZWQgd2l0aCBleHByZXNzaW9uL3Bvc2UgY29udHJvbHNcclxuICogLSBBZGRpdGlvbmFsIHJlbmRlcmluZyBwaXBlbGluZSBtb2RpZmljYXRpb25zXHJcbiAqIC0gQWRkaXRpb25hbCB+OTAwIGxpbmVzIG9mIEZMQU1FLXNwZWNpZmljIGNvZGVcclxuICovXHJcblxyXG5pbXBvcnQgeyBCb25lLCBEeW5hbWljRHJhd1VzYWdlLCBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUsIE1hdGhVdGlscywgTWF0cml4NCwgT3J0aG9ncmFwaGljQ2FtZXJhLCBQZXJzcGVjdGl2ZUNhbWVyYSwgUXVhdGVybmlvbiwgU2NlbmUsIFNrZWxldG9uLCBWZWN0b3IyLCBWZWN0b3IzLCBXZWJHTFJlbmRlcmVyIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQge1xyXG4gICAgZ2V0Q3VycmVudFRpbWUsXHJcbiAgICBjbGFtcCxcclxuICAgIGRlbGF5ZWRFeGVjdXRlLFxyXG4gICAgaXNJT1MsXHJcbiAgICBnZXRJT1NTZW1ldmVyLFxyXG4gICAgU2VtdmVyLFxyXG4gICAgZmV0Y2hXaXRoUHJvZ3Jlc3MsXHJcbiAgICBuYXRpdmVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMsXHJcbiAgICBhYm9ydGFibGVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMsXHJcbiAgICBkaXNwb3NlQWxsTWVzaGVzLFxyXG4gICAgQWJvcnRlZFByb21pc2VFcnJvclxyXG59IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdWaWV3ZXInKTtcclxuaW1wb3J0IHsgUmVuZGVyTW9kZSB9IGZyb20gJy4uL2VudW1zL1JlbmRlck1vZGUuanMnO1xyXG5pbXBvcnQgeyBMb2dMZXZlbCB9IGZyb20gJy4uL2VudW1zL0xvZ0xldmVsLmpzJztcclxuaW1wb3J0IHsgU3BsYXRSZW5kZXJNb2RlIH0gZnJvbSAnLi4vZW51bXMvU3BsYXRSZW5kZXJNb2RlLmpzJztcclxuaW1wb3J0IHsgU2NlbmVGb3JtYXQsIHNjZW5lRm9ybWF0RnJvbVBhdGggfSBmcm9tICcuLi9lbnVtcy9TY2VuZUZvcm1hdC5qcyc7XHJcbmltcG9ydCB7IFNjZW5lUmV2ZWFsTW9kZSB9IGZyb20gJy4uL2VudW1zL1NjZW5lUmV2ZWFsTW9kZS5qcyc7XHJcbmltcG9ydCB7IE9yYml0Q29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scy5qcyc7XHJcbmltcG9ydCB7IFNwbGF0TWVzaCB9IGZyb20gJy4vU3BsYXRNZXNoLmpzJztcclxuaW1wb3J0IHsgU3BsYXRTY2VuZSB9IGZyb20gJy4vU3BsYXRTY2VuZS5qcyc7XHJcbmltcG9ydCB7IERpcmVjdExvYWRFcnJvciB9IGZyb20gJy4uL2xvYWRlcnMvRGlyZWN0TG9hZEVycm9yLmpzJztcclxuaW1wb3J0IHsgUGx5TG9hZGVyIH0gZnJvbSAnLi4vbG9hZGVycy9QbHlMb2FkZXIuanMnO1xyXG5pbXBvcnQgeyBSYXljYXN0ZXIgfSBmcm9tICcuLi9yYXljYXN0ZXIvUmF5Y2FzdGVyLmpzJztcclxuaW1wb3J0IHsgY3JlYXRlU29ydFdvcmtlciB9IGZyb20gJy4uL3dvcmtlci9Tb3J0V29ya2VyLmpzJztcclxuaW1wb3J0IHsgXHJcbiAgICBTQ0VORV9GQURFSU5fUkFURV9GQVNULFxyXG4gICAgU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCxcclxuICAgIFRIUkVFX0NBTUVSQV9GT1YsXHJcbiAgICBNSU5JTVVNX0RJU1RBTkNFX1RPX05FV19GT0NBTF9QT0lOVCxcclxuICAgIENPTlNFQ1VUSVZFX1JFTkRFUkVEX0ZSQU1FU19GT1JfRlBTX0NBTENVTEFUSU9OLFxyXG4gICAgTUlOX1NQTEFUX0NPVU5UX1RPX1NIT1dfU1BMQVRfVFJFRV9MT0FESU5HX1NQSU5ORVIsXHJcbiAgICBGT0NVU19NQVJLRVJfRkFERV9JTl9TUEVFRCxcclxuICAgIEZPQ1VTX01BUktFUl9GQURFX09VVF9TUEVFRCxcclxuICAgIENvbnN0YW50cyxcclxuICAgIExvYWRlclN0YXR1c1xyXG59IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBVSSBjb21wb25lbnRzIC0gc3R1YiBpbXBsZW1lbnRhdGlvbnMgZm9yIG5vd1xyXG5jbGFzcyBMb2FkaW5nU3Bpbm5lciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihtc2csIGNvbnRhaW5lcikgeyB0aGlzLnRhc2tzID0gW107IH1cclxuICAgIHNob3coKSB7fVxyXG4gICAgaGlkZSgpIHt9XHJcbiAgICBzZXRDb250YWluZXIoYykge31cclxuICAgIGFkZFRhc2sobXNnKSB7IHJldHVybiB0aGlzLnRhc2tzLnB1c2gobXNnKTsgfVxyXG4gICAgcmVtb3ZlVGFzayhpZCkge31cclxuICAgIHJlbW92ZUFsbFRhc2tzKCkgeyB0aGlzLnRhc2tzID0gW107IH1cclxuICAgIHNldE1lc3NhZ2VGb3JUYXNrKGlkLCBtc2cpIHt9XHJcbn1cclxuXHJcbmNsYXNzIExvYWRpbmdQcm9ncmVzc0JhciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHt9XHJcbiAgICBzaG93KCkge31cclxuICAgIGhpZGUoKSB7fVxyXG4gICAgc2V0Q29udGFpbmVyKGMpIHt9XHJcbiAgICBzZXRQcm9ncmVzcyhwKSB7fVxyXG59XHJcblxyXG5jbGFzcyBTY2VuZUhlbHBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZSkgeyBcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7IFxyXG4gICAgICAgIHRoaXMubWVzaEN1cnNvciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXNoQ3Vyc29yVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZm9jdXNNYXJrZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZm9jdXNNYXJrZXJPcGFjaXR5ID0gMDtcclxuICAgICAgICB0aGlzLmNvbnRyb2xQbGFuZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb250cm9sUGxhbmVWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBzZXR1cE1lc2hDdXJzb3IoKSB7fVxyXG4gICAgc2V0dXBGb2N1c01hcmtlcigpIHt9XHJcbiAgICBzZXR1cENvbnRyb2xQbGFuZSgpIHt9XHJcbiAgICB1cGRhdGVNZXNoQ3Vyc29yKHBvcywgYWN0aXZlKSB7fVxyXG4gICAgdXBkYXRlRm9jdXNNYXJrZXIodGFyZ2V0LCBjYW1lcmEsIHJlbmRlckRpbWVuc2lvbnMpIHt9XHJcbiAgICB1cGRhdGVDb250cm9sUGxhbmUoY2FtLCBjdHJsKSB7fVxyXG4gICAgc2V0Rm9jdXNNYXJrZXJWaXNpYmlsaXR5KHYpIHt9XHJcbiAgICBzZXRGb2N1c01hcmtlck9wYWNpdHkobykgeyB0aGlzLmZvY3VzTWFya2VyT3BhY2l0eSA9IG87IH1cclxuICAgIGdldEZvY3VzTWFya2VyT3BhY2l0eSgpIHsgcmV0dXJuIHRoaXMuZm9jdXNNYXJrZXJPcGFjaXR5OyB9XHJcbiAgICBwb3NpdGlvbkFuZE9yaWVudEZvY3VzTWFya2VyKHBvcywgY2FtKSB7fVxyXG4gICAgcG9zaXRpb25BbmRPcmllbnRNZXNoQ3Vyc29yKHBvcywgY2FtKSB7fVxyXG4gICAgc2V0TWVzaEN1cnNvclZpc2liaWxpdHkodmlzaWJsZSkgeyB0aGlzLm1lc2hDdXJzb3JWaXNpYmxlID0gdmlzaWJsZTsgfVxyXG4gICAgZ2V0TWVzY2hDdXJzb3JWaXNpYmlsaXR5KCkgeyByZXR1cm4gdGhpcy5tZXNoQ3Vyc29yVmlzaWJsZTsgfVxyXG4gICAgc2V0Q29udHJvbFBsYW5lVmlzaWJpbGl0eSh2aXNpYmxlKSB7IHRoaXMuY29udHJvbFBsYW5lVmlzaWJsZSA9IHZpc2libGU7IH1cclxuICAgIHBvc2l0aW9uQW5kT3JpZW50Q29udHJvbFBsYW5lKHBvcywgcXVhdCwgc2NhbGUpIHt9XHJcbiAgICB1cGRhdGVGb3JSZW5kZXJNb2RlKG1vZGUsIG1lc2gpIHt9XHJcbiAgICBkaXNwb3NlKCkge31cclxufVxyXG5cclxuLyoqXHJcbiAqIFZpZXdlciAtIENvcmUgR2F1c3NpYW4gU3BsYXR0aW5nIFZpZXdlclxyXG4gKiBIYW5kbGVzIHRoZSBUaHJlZS5qcyBzY2VuZSwgY2FtZXJhLCBjb250cm9scywgYW5kIHJlbmRlcmluZyBsb29wLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpZXdlciB7XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcclxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmNhbWVyYVVwPVswLCAxLCAwXV0gLSBDYW1lcmEgdXAgdmVjdG9yXHJcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5pbml0aWFsQ2FtZXJhUG9zaXRpb249WzAsIDEwLCAxNV1dIC0gSW5pdGlhbCBjYW1lcmEgcG9zaXRpb25cclxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmluaXRpYWxDYW1lcmFSb3RhdGlvbj1bMCwgMCwgMF1dIC0gSW5pdGlhbCBjYW1lcmEgcm90YXRpb25cclxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmluaXRpYWxDYW1lcmFMb29rQXQ9WzAsIDAsIDBdXSAtIEluaXRpYWwgY2FtZXJhIGxvb2stYXQgcG9pbnRcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRyb3BJbk1vZGU9ZmFsc2VdIC0gSWYgdHJ1ZSwgdmlld2VyIGlzIHVzZWQgYXMgYSBUaHJlZS5qcyBzY2VuZSBvYmplY3RcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNlbGZEcml2ZW5Nb2RlPXRydWVdIC0gSWYgdHJ1ZSwgdmlld2VyIG1hbmFnZXMgaXRzIG93biByZW5kZXIgbG9vcFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXNlQnVpbHRJbkNvbnRyb2xzPXRydWVdIC0gSWYgdHJ1ZSwgdXNlcyBPcmJpdENvbnRyb2xzXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW29wdGlvbnMucm9vdEVsZW1lbnRdIC0gUGFyZW50IGVsZW1lbnQgZm9yIHRoZSBjYW52YXNcclxuICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fSBbb3B0aW9ucy50aHJlZWpzQ2FudmFzXSAtIEV4aXN0aW5nIGNhbnZhcyB0byB1c2VcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmlnbm9yZURldmljZVBpeGVsUmF0aW89ZmFsc2VdIC0gSWYgdHJ1ZSwgZm9yY2VzIERQUiB0byAxXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5oYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVT1mYWxzZV0gLSBVc2UgMTYtYml0IGZsb2F0IGZvciBjb3ZhcmlhbmNlc1xyXG4gICAqIEBwYXJhbSB7VEhSRUUuU2NlbmV9IFtvcHRpb25zLnRocmVlU2NlbmVdIC0gRXh0ZXJuYWwgVGhyZWUuanMgc2NlbmUgdG8gcmVuZGVyXHJcbiAgICogQHBhcmFtIHtUSFJFRS5XZWJHTFJlbmRlcmVyfSBbb3B0aW9ucy5yZW5kZXJlcl0gLSBFeHRlcm5hbCBUaHJlZS5qcyByZW5kZXJlclxyXG4gICAqIEBwYXJhbSB7VEhSRUUuQ2FtZXJhfSBbb3B0aW9ucy5jYW1lcmFdIC0gRXh0ZXJuYWwgVGhyZWUuanMgY2FtZXJhXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5ncHVBY2NlbGVyYXRlZFNvcnQ9ZmFsc2VdIC0gVXNlIEdQVSBmb3Igc29ydGluZyBkaXN0YW5jZXNcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmludGVnZXJCYXNlZFNvcnQ9dHJ1ZV0gLSBVc2UgaW50ZWdlciBhcml0aG1ldGljIGZvciBzb3J0aW5nXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzPXRydWVdIC0gVXNlIFNoYXJlZEFycmF5QnVmZmVyIGZvciB3b3JrZXJzXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5keW5hbWljU2NlbmU9ZmFsc2VdIC0gT3B0aW1pemUgZm9yIGR5bmFtaWMgc2NlbmVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XHJcbiAgICAvLyBUaGUgbmF0dXJhbCAndXAnIHZlY3RvciBmb3Igdmlld2luZyB0aGUgc2NlbmUgKG9ubHkgaGFzIGFuIGVmZmVjdCB3aGVuIHVzZWQgd2l0aCBvcmJpdCBjb250cm9scyBhbmRcclxuICAgIC8vIHdoZW4gdGhlIHZpZXdlciB1c2VzIGl0cyBvd24gY2FtZXJhKS5cclxuICAgIGlmICghb3B0aW9ucy5jYW1lcmFVcCkgb3B0aW9ucy5jYW1lcmFVcCA9IFswLCAxLCAwXTtcclxuICAgIHRoaXMuY2FtZXJhVXAgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShvcHRpb25zLmNhbWVyYVVwKTtcclxuXHJcbiAgICAvLyBUaGUgY2FtZXJhJ3MgaW5pdGlhbCBwb3NpdGlvbiAob25seSB1c2VkIHdoZW4gdGhlIHZpZXdlciB1c2VzIGl0cyBvd24gY2FtZXJhKS5cclxuICAgIGlmICghb3B0aW9ucy5pbml0aWFsQ2FtZXJhUG9zaXRpb24pXHJcbiAgICAgIG9wdGlvbnMuaW5pdGlhbENhbWVyYVBvc2l0aW9uID0gWzAsIDEwLCAxNV07XHJcbiAgICB0aGlzLmluaXRpYWxDYW1lcmFQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KFxyXG4gICAgICBvcHRpb25zLmluaXRpYWxDYW1lcmFQb3NpdGlvblxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIW9wdGlvbnMuaW5pdGlhbENhbWVyYVJvdGF0aW9uKVxyXG4gICAgICAgIG9wdGlvbnMuaW5pdGlhbENhbWVyYVJvdGF0aW9uID0gWzAsIDAsIDBdO1xyXG4gICAgICB0aGlzLmluaXRpYWxDYW1lcmFSb3RhdGlvbiA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KFxyXG4gICAgICAgIG9wdGlvbnMuaW5pdGlhbENhbWVyYVJvdGF0aW9uXHJcbiAgICApO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRpb25zLmJhY2tncm91bmRDb2xvcjtcclxuXHJcbiAgICAvLyBJcmlzIG9jY2x1c2lvbiBjb25maWd1cmF0aW9uIGZvciBGTEFNRSBhdmF0YXJzXHJcbiAgICB0aGlzLmlyaXNPY2NsdXNpb25Db25maWcgPSBvcHRpb25zLmlyaXNPY2NsdXNpb25Db25maWcgfHwgbnVsbDtcclxuXHJcbiAgICAvLyBUaGUgaW5pdGlhbCBmb2NhbCBwb2ludCBvZiB0aGUgY2FtZXJhIGFuZCBjZW50ZXIgb2YgdGhlIGNhbWVyYSdzIG9yYml0IChvbmx5IHVzZWQgd2hlbiB0aGUgdmlld2VyIHVzZXMgaXRzIG93biBjYW1lcmEpLlxyXG4gICAgaWYgKCFvcHRpb25zLmluaXRpYWxDYW1lcmFMb29rQXQpIG9wdGlvbnMuaW5pdGlhbENhbWVyYUxvb2tBdCA9IFswLCAwLCAwXTtcclxuICAgIHRoaXMuaW5pdGlhbENhbWVyYUxvb2tBdCA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KFxyXG4gICAgICBvcHRpb25zLmluaXRpYWxDYW1lcmFMb29rQXRcclxuICAgICk7XHJcblxyXG4gICAgLy8gJ2Ryb3BJbk1vZGUnIGlzIGEgZmxhZyB0aGF0IGlzIHVzZWQgaW50ZXJuYWxseSB0byBzdXBwb3J0IHRoZSB1c2FnZSBvZiB0aGUgdmlld2VyIGFzIGEgVGhyZWUuanMgc2NlbmUgb2JqZWN0XHJcbiAgICB0aGlzLmRyb3BJbk1vZGUgPSBvcHRpb25zLmRyb3BJbk1vZGUgfHwgZmFsc2U7XHJcblxyXG4gICAgLy8gSWYgJ3NlbGZEcml2ZW5Nb2RlJyBpcyB0cnVlLCB0aGUgdmlld2VyIG1hbmFnZXMgaXRzIG93biB1cGRhdGUvYW5pbWF0aW9uIGxvb3AgdmlhIHJlcXVlc3RBbmltYXRpb25GcmFtZSgpXHJcbiAgICBpZiAob3B0aW9ucy5zZWxmRHJpdmVuTW9kZSA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMuc2VsZkRyaXZlbk1vZGUgPT09IG51bGwpXHJcbiAgICAgIG9wdGlvbnMuc2VsZkRyaXZlbk1vZGUgPSB0cnVlO1xyXG4gICAgdGhpcy5zZWxmRHJpdmVuTW9kZSA9IG9wdGlvbnMuc2VsZkRyaXZlbk1vZGUgJiYgIXRoaXMuZHJvcEluTW9kZTtcclxuICAgIHRoaXMuc2VsZkRyaXZlblVwZGF0ZUZ1bmMgPSB0aGlzLnNlbGZEcml2ZW5VcGRhdGUuYmluZCh0aGlzKTtcclxuXHJcbiAgICAvLyBJZiAndXNlQnVpbHRJbkNvbnRyb2xzJyBpcyB0cnVlLCB0aGUgdmlld2VyIHdpbGwgY3JlYXRlIGl0cyBvd24gaW5zdGFuY2Ugb2YgT3JiaXRDb250cm9scyBhbmQgYXR0YWNoIHRvIHRoZSBjYW1lcmFcclxuICAgIGlmIChvcHRpb25zLnVzZUJ1aWx0SW5Db250cm9scyA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICBvcHRpb25zLnVzZUJ1aWx0SW5Db250cm9scyA9IHRydWU7XHJcbiAgICB0aGlzLnVzZUJ1aWx0SW5Db250cm9scyA9IG9wdGlvbnMudXNlQnVpbHRJbkNvbnRyb2xzO1xyXG5cclxuICAgIC8vIHBhcmVudCBlbGVtZW50IG9mIHRoZSBUaHJlZS5qcyByZW5kZXJlciBjYW52YXNcclxuICAgIHRoaXMucm9vdEVsZW1lbnQgPSBvcHRpb25zLnJvb3RFbGVtZW50O1xyXG4gICAgdGhpcy5jYW52YXMgPSBvcHRpb25zLnRocmVlanNDYW52YXM7XHJcbiAgICAvLyBUZWxscyB0aGUgdmlld2VyIHRvIHByZXRlbmQgdGhlIGRldmljZSBwaXhlbCByYXRpbyBpcyAxLCB3aGljaCBjYW4gYm9vc3QgcGVyZm9ybWFuY2Ugb24gZGV2aWNlcyB3aGVyZSBpdCBpcyBsYXJnZXIsXHJcbiAgICAvLyBhdCBhIHNtYWxsIGNvc3QgdG8gdmlzdWFsIHF1YWxpdHlcclxuICAgIHRoaXMuaWdub3JlRGV2aWNlUGl4ZWxSYXRpbyA9IG9wdGlvbnMuaWdub3JlRGV2aWNlUGl4ZWxSYXRpbyB8fCBmYWxzZTtcclxuICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA9IHRoaXMuaWdub3JlRGV2aWNlUGl4ZWxSYXRpb1xyXG4gICAgICA/IDFcclxuICAgICAgOiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xyXG5cclxuICAgIC8vIFRlbGxzIHRoZSB2aWV3ZXIgdG8gdXNlIDE2LWJpdCBmbG9hdGluZyBwb2ludCB2YWx1ZXMgd2hlbiBzdG9yaW5nIHNwbGF0IGNvdmFyaWFuY2UgZGF0YSBpbiB0ZXh0dXJlcywgaW5zdGVhZCBvZiAzMi1iaXRcclxuICAgIHRoaXMuaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFUgPVxyXG4gICAgICBvcHRpb25zLmhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVIHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIElmICd0aHJlZVNjZW5lJyBpcyB2YWxpZCwgaXQgd2lsbCBiZSByZW5kZXJlZCBieSB0aGUgdmlld2VyIGFsb25nIHdpdGggdGhlIHNwbGF0IG1lc2hcclxuICAgIHRoaXMudGhyZWVTY2VuZSA9IG9wdGlvbnMudGhyZWVTY2VuZTtcclxuICAgIC8vIEFsbG93cyBmb3IgdXNhZ2Ugb2YgYW4gZXh0ZXJuYWwgVGhyZWUuanMgcmVuZGVyZXJcclxuICAgIHRoaXMucmVuZGVyZXIgPSBvcHRpb25zLnJlbmRlcmVyO1xyXG4gICAgLy8gQWxsb3dzIGZvciB1c2FnZSBvZiBhbiBleHRlcm5hbCBUaHJlZS5qcyBjYW1lcmFcclxuICAgIHRoaXMuY2FtZXJhID0gb3B0aW9ucy5jYW1lcmE7XHJcblxyXG4gICAgLy8gSWYgJ2dwdUFjY2VsZXJhdGVkU29ydCcgaXMgdHJ1ZSwgYSBwYXJ0aWFsbHkgR1BVLWFjY2VsZXJhdGVkIGFwcHJvYWNoIHRvIHNvcnRpbmcgc3BsYXRzIHdpbGwgYmUgdXNlZC5cclxuICAgIC8vIEN1cnJlbnRseSB0aGlzIG1lYW5zIHByZS1jb21wdXRpbmcgc3BsYXQgZGlzdGFuY2VzIGZyb20gdGhlIGNhbWVyYSBvbiB0aGUgR1BVXHJcbiAgICB0aGlzLmdwdUFjY2VsZXJhdGVkU29ydCA9IG9wdGlvbnMuZ3B1QWNjZWxlcmF0ZWRTb3J0IHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIGlmICdpbnRlZ2VyQmFzZWRTb3J0JyBpcyB0cnVlLCB0aGUgaW50ZWdlciB2ZXJzaW9uIG9mIHNwbGF0IGNlbnRlcnMgYXMgd2VsbCBhcyBvdGhlciB2YWx1ZXMgdXNlZCB0byBjYWxjdWxhdGVcclxuICAgIC8vIHNwbGF0IGRpc3RhbmNlcyBhcmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBmbG9hdCB2ZXJzaW9uLiBUaGlzIHNwZWVkcyB1cCBjb21wdXRhdGlvbiwgYnV0IGludHJvZHVjZXMgdGhlIHBvc3NpYmlsaXR5IG9mXHJcbiAgICAvLyBvdmVyZmxvdyBpbiBsYXJnZXIgc2NlbmVzLlxyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLmludGVnZXJCYXNlZFNvcnQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLmludGVnZXJCYXNlZFNvcnQgPT09IG51bGxcclxuICAgICkge1xyXG4gICAgICBvcHRpb25zLmludGVnZXJCYXNlZFNvcnQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbnRlZ2VyQmFzZWRTb3J0ID0gb3B0aW9ucy5pbnRlZ2VyQmFzZWRTb3J0O1xyXG5cclxuICAgIC8vIElmICdzaGFyZWRNZW1vcnlGb3JXb3JrZXJzJyBpcyB0cnVlLCBhIFNoYXJlZEFycmF5QnVmZmVyIHdpbGwgYmUgdXNlZCB0byBjb21tdW5pY2F0ZSB3aXRoIHdlYiB3b3JrZXJzLiBUaGlzIG1ldGhvZFxyXG4gICAgLy8gaXMgZmFzdGVyIHRoYW4gY29weWluZyBtZW1vcnkgdG8gb3IgZnJvbSB3ZWIgd29ya2VycywgYnV0IGNvbWVzIHdpdGggc2VjdXJpdHkgaW1wbGljYXRpb25zIGFzIG91dGxpbmVkIGhlcmU6XHJcbiAgICAvLyBodHRwczovL3dlYi5kZXYvYXJ0aWNsZXMvY3Jvc3Mtb3JpZ2luLWlzb2xhdGlvbi1ndWlkZVxyXG4gICAgLy8gSWYgZW5hYmxlZCwgaXQgcmVxdWlyZXMgc3BlY2lmaWMgQ09SUyBoZWFkZXJzIHRvIGJlIHByZXNlbnQgaW4gdGhlIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciB0aGF0IGlzIHNlbnQgd2hlblxyXG4gICAgLy8gbG9hZGluZyB0aGUgYXBwbGljYXRpb24uIE1vcmUgaW5mb3JtYXRpb24gaXMgYXZhaWxhYmxlIGluIHRoZSBSRUFETUUuXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycyA9PT0gbnVsbFxyXG4gICAgKVxyXG4gICAgICBvcHRpb25zLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMgPSB0cnVlO1xyXG4gICAgdGhpcy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzID0gZmFsc2U7IC8vb3B0aW9ucy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzO1xyXG5cclxuICAgIC8vIGlmICdkeW5hbWljU2NlbmUnIGlzIHRydWUsIGl0IHRlbGxzIHRoZSB2aWV3ZXIgdG8gYXNzdW1lIHNjZW5lIGVsZW1lbnRzIGFyZSBub3Qgc3RhdGlvbmFyeSBvciB0aGF0IHRoZSBudW1iZXIgb2Ygc3BsYXRzIGluIHRoZVxyXG4gICAgLy8gc2NlbmUgbWF5IGNoYW5nZS4gVGhpcyBwcmV2ZW50cyBvcHRpbWl6YXRpb25zIHRoYXQgZGVwZW5kIG9uIGEgc3RhdGljIHNjZW5lIGZyb20gYmVpbmcgbWFkZS4gQWRkaXRpb25hbGx5LCBpZiAnZHluYW1pY1NjZW5lJyBpc1xyXG4gICAgLy8gdHJ1ZSBpdCB0ZWxscyB0aGUgc3BsYXQgbWVzaCB0byBub3QgYXBwbHkgc2NlbmUgdHJhbmZvcm1zIHRvIHNwbGF0IGRhdGEgdGhhdCBpcyByZXR1cm5lZCBieSBmdW5jdGlvbnMgbGlrZVxyXG4gICAgLy8gU3BsYXRNZXNoLmdldFNwbGF0Q2VudGVyKCkgYnkgZGVmYXVsdC5cclxuICAgIHRoaXMuZHluYW1pY1NjZW5lID0gISFvcHRpb25zLmR5bmFtaWNTY2VuZTtcclxuXHJcbiAgICAvLyBXaGVuIHRydWUsIHdpbGwgcGVyZm9ybSBhZGRpdGlvbmFsIHN0ZXBzIGR1cmluZyByZW5kZXJpbmcgdG8gYWRkcmVzcyBhcnRpZmFjdHMgY2F1c2VkIGJ5IHRoZSByZW5kZXJpbmcgb2YgZ2F1c3NpYW5zIGF0IGFcclxuICAgIC8vIHN1YnN0YW50aWFsbHkgZGlmZmVyZW50IHJlc29sdXRpb24gdGhhbiB0aGF0IGF0IHdoaWNoIHRoZXkgd2VyZSByZW5kZXJlZCBkdXJpbmcgdHJhaW5pbmcuIFRoaXMgd2lsbCBvbmx5IHdvcmsgY29ycmVjdGx5XHJcbiAgICAvLyBmb3IgbW9kZWxzIHRoYXQgd2VyZSB0cmFpbmVkIHVzaW5nIGEgcHJvY2VzcyB0aGF0IHV0aWxpemVzIHRoaXMgY29tcGVuc2F0aW9uIGNhbGN1bGF0aW9uLiBGb3IgbW9yZSBkZXRhaWxzOlxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25lcmZzdHVkaW8tcHJvamVjdC9nc3BsYXQvcHVsbC8xMTdcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaGRlY28taW5yaWEvZ2F1c3NpYW4tc3BsYXR0aW5nL2lzc3Vlcy8yOTQjaXNzdWVjb21tZW50LTE3NzI2ODgwOTNcclxuICAgIHRoaXMuYW50aWFsaWFzZWQgPSBvcHRpb25zLmFudGlhbGlhc2VkIHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIFRoaXMgY29uc3RhbnQgaXMgYWRkZWQgdG8gdGhlIHByb2plY3RlZCAyRCBzY3JlZW4tc3BhY2Ugc3BsYXQgc2NhbGVzXHJcbiAgICB0aGlzLmtlcm5lbDJEU2l6ZSA9XHJcbiAgICAgIG9wdGlvbnMua2VybmVsMkRTaXplID09PSB1bmRlZmluZWQgPyAwLjMgOiBvcHRpb25zLmtlcm5lbDJEU2l6ZTtcclxuXHJcbiAgICAvLyBpZiAncmVuZGVyTW9kZScgaXMgUmVuZGVyTW9kZS5BbHdheXMsIHRoZW4gdGhlIHZpZXdlciB3aWxsIHJyZW5kZXIgdGhlIHNjZW5lIG9uIGV2ZXJ5IHVwZGF0ZS4gSWYgaXQgaXMgUmVuZGVyTW9kZS5PbkNoYW5nZSxcclxuICAgIC8vIGl0IHdpbGwgb25seSByZW5kZXIgd2hlbiBzb21ldGhpbmcgaW4gdGhlIHNjZW5lIGhhcyBjaGFuZ2VkLlxyXG4gICAgdGhpcy5yZW5kZXJNb2RlID0gb3B0aW9ucy5yZW5kZXJNb2RlIHx8IFJlbmRlck1vZGUuQWx3YXlzO1xyXG5cclxuICAgIC8vIFNjZW5lUmV2ZWFsTW9kZS5EZWZhdWx0IHJlc3VsdHMgaW4gYSBuaWNlLCBzbG93IGZhZGUtaW4gZWZmZWN0IGZvciBwcm9ncmVzc2l2ZWx5IGxvYWRlZCBzY2VuZXMsXHJcbiAgICAvLyBhbmQgYSBmYXN0IGZhZGUtaW4gZm9yIG5vbiBwcm9ncmVzc2l2ZWx5IGxvYWRlZCBzY2VuZXMuXHJcbiAgICAvLyBTY2VuZVJldmVhbE1vZGUuR3JhZHVhbCB3aWxsIGZvcmNlIGEgc2xvdyBmYWRlLWluIGZvciBhbGwgc2NlbmVzLlxyXG4gICAgLy8gU2NlbmVSZXZlYWxNb2RlLkluc3RhbnQgd2lsbCBmb3JjZSBhbGwgbG9hZGVkIHNjZW5lIGRhdGEgdG8gYmUgaW1tZWRpYXRlbHkgdmlzaWJsZS5cclxuICAgIHRoaXMuc2NlbmVSZXZlYWxNb2RlID0gb3B0aW9ucy5zY2VuZVJldmVhbE1vZGUgfHwgU2NlbmVSZXZlYWxNb2RlLkRlZmF1bHQ7XHJcblxyXG4gICAgLy8gSGFja3ksIGV4cGVyaW1lbnRhbCwgbm9uLXNjaWVudGlmaWMgcGFyYW1ldGVyIGZvciB0d2Vha2luZyBmb2NhbCBsZW5ndGggcmVsYXRlZCBjYWxjdWxhdGlvbnMuIEZvciBzY2VuZXMgd2l0aCB2ZXJ5XHJcbiAgICAvLyBzbWFsbCBnYXVzc2lhbnMsIHNtYWxsIGRldGFpbHMsIGFuZCBzbWFsbCBkaW1lbnNpb25zIC0tIGluY3JlYXNpbmcgdGhpcyB2YWx1ZSBjYW4gaGVscCBpbXByb3ZlIHZpc3VhbCBxdWFsaXR5LlxyXG4gICAgdGhpcy5mb2NhbEFkanVzdG1lbnQgPSBvcHRpb25zLmZvY2FsQWRqdXN0bWVudCB8fCAxLjA7XHJcblxyXG4gICAgLy8gU3BlY2lmeSB0aGUgbWF4aW11bSBzY3JlZW4tc3BhY2Ugc3BsYXQgc2l6ZSwgY2FuIGhlbHAgZGVhbCB3aXRoIGxhcmdlIHNwbGF0cyB0aGF0IGdldCB0b28gdW53aWVsZHlcclxuICAgIHRoaXMubWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgPSBvcHRpb25zLm1heFNjcmVlblNwYWNlU3BsYXRTaXplIHx8IDEwMjQ7XHJcblxyXG4gICAgLy8gVGhlIHZlcmJvc2l0eSBvZiBjb25zb2xlIGxvZ2dpbmdcclxuICAgIHRoaXMubG9nTGV2ZWwgPSBvcHRpb25zLmxvZ0xldmVsIHx8IExvZ0xldmVsLk5vbmU7XHJcblxyXG4gICAgLy8gRGVncmVlIG9mIHNwaGVyaWNhbCBoYXJtb25pY3MgdG8gdXRpbGl6ZSBpbiByZW5kZXJpbmcgc3BsYXRzIChhc3N1bWluZyB0aGUgZGF0YSBpcyBwcmVzZW50IGluIHRoZSBzcGxhdCBzY2VuZSkuXHJcbiAgICAvLyBWYWxpZCB2YWx1ZXMgYXJlIDAgLSAyLiBEZWZhdWx0IHZhbHVlIGlzIDAuXHJcbiAgICB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IG9wdGlvbnMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIHx8IDA7XHJcblxyXG4gICAgLy8gV2hlbiB0cnVlLCBhbGxvd3MgZm9yIHVzYWdlIG9mIGV4dHJhIHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMgZHVyaW5nIHJlbmRlcmluZyBmb3IgZWZmZWN0cyBzdWNoIGFzIG9wYWNpdHkgYWRqdXN0bWVudC5cclxuICAgIC8vIERlZmF1bHQgaXMgZmFsc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIFRoZXNlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gdHJhbnNmb3JtIHByb3BlcnRpZXMgKHNjYWxlLCByb3RhdGlvbiwgcG9zaXRpb24pXHJcbiAgICAvLyB0aGF0IGFyZSBlbmFibGVkIGJ5IHRoZSAnZHluYW1pY1NjZW5lJyBwYXJhbWV0ZXIuXHJcbiAgICB0aGlzLmVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IG9wdGlvbnMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzIHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIEVuYWJsZSB0aGUgdXNhZ2Ugb2YgU0lNRCBXZWJBc3NlbWJseSBpbnN0cnVjdGlvbnMgZm9yIHRoZSBzcGxhdCBzb3J0XHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMuZW5hYmxlU0lNREluU29ydCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMuZW5hYmxlU0lNREluU29ydCA9PT0gbnVsbFxyXG4gICAgKVxyXG4gICAgICBvcHRpb25zLmVuYWJsZVNJTURJblNvcnQgPSB0cnVlO1xyXG4gICAgdGhpcy5lbmFibGVTSU1ESW5Tb3J0ID0gb3B0aW9ucy5lbmFibGVTSU1ESW5Tb3J0O1xyXG5cclxuICAgIC8vIExldmVsIHRvIGNvbXByZXNzIG5vbiBLU1BMQVQgZmlsZXMgd2hlbiBsb2FkaW5nIHRoZW0gZm9yIGRpcmVjdCByZW5kZXJpbmdcclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5pbk1lbW9yeUNvbXByZXNzaW9uTGV2ZWwgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLmluTWVtb3J5Q29tcHJlc3Npb25MZXZlbCA9PT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIG9wdGlvbnMuaW5NZW1vcnlDb21wcmVzc2lvbkxldmVsID0gMDtcclxuICAgIH1cclxuICAgIHRoaXMuaW5NZW1vcnlDb21wcmVzc2lvbkxldmVsID0gb3B0aW9ucy5pbk1lbW9yeUNvbXByZXNzaW9uTGV2ZWw7XHJcblxyXG4gICAgLy8gUmVvcmRlciBzcGxhdCBkYXRhIGluIG1lbW9yeSBhZnRlciBsb2FkaW5nIGlzIGNvbXBsZXRlIHRvIG9wdGltaXplIGNhY2hlIHV0aWxpemF0aW9uLiBEZWZhdWx0IGlzIHRydWUuXHJcbiAgICAvLyBEb2VzIG5vdCBhcHBseSBpZiBzcGxhdCBzY2VuZSBpcyBwcm9ncmVzc2l2ZWx5IGxvYWRlZC5cclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5vcHRpbWl6ZVNwbGF0RGF0YSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMub3B0aW1pemVTcGxhdERhdGEgPT09IG51bGxcclxuICAgICkge1xyXG4gICAgICBvcHRpb25zLm9wdGltaXplU3BsYXREYXRhID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMub3B0aW1pemVTcGxhdERhdGEgPSBvcHRpb25zLm9wdGltaXplU3BsYXREYXRhO1xyXG5cclxuICAgIC8vIFdoZW4gdHJ1ZSwgdGhlIGludGVybWVkaWF0ZSBzcGxhdCBkYXRhIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBkZWNvbXByZXNzaW5nIHNwbGF0IGJ1ZmZmZXIocykgYW5kIGlzIHVzZWQgdG9cclxuICAgIC8vIHBvcHVsYXRlIHRoZSBkYXRhIHRleHR1cmVzIHdpbGwgYmUgZnJlZWQuIFRoaXMgd2lsbCByZWR1Y2VzIG1lbW9yeSB1c2FnZSwgYnV0IGlmIHRoYXQgZGF0YSBuZWVkcyB0byBiZSBtb2RpZmllZFxyXG4gICAgLy8gaXQgd2lsbCBuZWVkIHRvIGJlIHJlLXBvcHVsYXRlZCBmcm9tIHRoZSBzcGxhdCBidWZmZXIocykuIERlZmF1bHQgaXMgZmFsc2UuXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMuZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMuZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSA9PT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIG9wdGlvbnMuZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhID0gb3B0aW9ucy5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhO1xyXG5cclxuICAgIC8vIEl0IGFwcGVhcnMgdGhhdCBmb3IgY2VydGFpbiBpT1MgdmVyc2lvbnMsIHNwZWNpYWwgYWN0aW9ucyBuZWVkIHRvIGJlIHRha2VuIHdpdGggdGhlXHJcbiAgICAvLyB1c2FnZSBvZiBTSU1EIGluc3RydWN0aW9ucyBhbmQgc2hhcmVkIG1lbW9yeVxyXG4gICAgaWYgKGlzSU9TKCkpIHtcclxuICAgICAgY29uc3Qgc2VtdmVyID0gZ2V0SU9TU2VtZXZlcigpO1xyXG4gICAgICBpZiAoc2VtdmVyLm1ham9yIDwgMTcpIHtcclxuICAgICAgICB0aGlzLmVuYWJsZVNJTURJblNvcnQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2VtdmVyLm1ham9yIDwgMTYpIHtcclxuICAgICAgICB0aGlzLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRlbGwgdGhlIHZpZXdlciBob3cgdG8gcmVuZGVyIHRoZSBzcGxhdHNcclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5zcGxhdFJlbmRlck1vZGUgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLnNwbGF0UmVuZGVyTW9kZSA9PT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIG9wdGlvbnMuc3BsYXRSZW5kZXJNb2RlID0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRDtcclxuICAgIH1cclxuICAgIHRoaXMuc3BsYXRSZW5kZXJNb2RlID0gb3B0aW9ucy5zcGxhdFJlbmRlck1vZGU7XHJcblxyXG4gICAgLy8gQ3VzdG9taXplIHRoZSBzcGVlZCBhdCB3aGljaCB0aGUgc2NlbmUgaXMgcmV2ZWFsZWRcclxuICAgIHRoaXMuc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllciA9IG9wdGlvbnMuc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllciB8fCAxLjA7XHJcblxyXG4gICAgLy8gU2V0IHRoZSByYW5nZSBmb3IgdGhlIGRlcHRoIG1hcCBmb3IgdGhlIGNvdW50aW5nIHNvcnQgdXNlZCB0byBzb3J0IHRoZSBzcGxhdHNcclxuICAgIHRoaXMuc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24gPVxyXG4gICAgICBvcHRpb25zLnNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uIHx8XHJcbiAgICAgIENvbnN0YW50cy5EZWZhdWx0U3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb247XHJcbiAgICBjb25zdCBtYXhQcmVjaXNpb24gPSB0aGlzLmludGVnZXJCYXNlZFNvcnQgPyAyMCA6IDI0O1xyXG4gICAgdGhpcy5zcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiA9IGNsYW1wKFxyXG4gICAgICB0aGlzLnNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uLFxyXG4gICAgICAxMCxcclxuICAgICAgbWF4UHJlY2lzaW9uXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMub25TcGxhdE1lc2hDaGFuZ2VkQ2FsbGJhY2sgPSBudWxsO1xyXG4gICAgdGhpcy5jcmVhdGVTcGxhdE1lc2goKTtcclxuXHJcbiAgICB0aGlzLmNvbnRyb2xzID0gbnVsbDtcclxuICAgIHRoaXMucGVyc3BlY3RpdmVDb250cm9scyA9IG51bGw7XHJcbiAgICB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLm9ydGhvZ3JhcGhpY0NhbWVyYSA9IG51bGw7XHJcbiAgICB0aGlzLnBlcnNwZWN0aXZlQ2FtZXJhID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnNob3dNZXNoQ3Vyc29yID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dDb250cm9sUGxhbmUgPSBmYWxzZTtcclxuICAgIHRoaXMuc2hvd0luZm8gPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLnNjZW5lSGVscGVyID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnNvcnRXb3JrZXIgPSBudWxsO1xyXG4gICAgdGhpcy5zb3J0UnVubmluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zcGxhdFJlbmRlckNvdW50ID0gMDtcclxuICAgIHRoaXMuc3BsYXRTb3J0Q291bnQgPSAwO1xyXG4gICAgdGhpcy5sYXN0U3BsYXRTb3J0Q291bnQgPSAwO1xyXG4gICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydCA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRXb3JrZXJTb3J0ZWRJbmRleGVzID0gbnVsbDtcclxuICAgIHRoaXMuc29ydFdvcmtlclByZWNvbXB1dGVkRGlzdGFuY2VzID0gbnVsbDtcclxuICAgIHRoaXMuc29ydFdvcmtlclRyYW5zZm9ybXMgPSBudWxsO1xyXG4gICAgdGhpcy5wcmVTb3J0TWVzc2FnZXMgPSBbXTtcclxuICAgIHRoaXMucnVuQWZ0ZXJOZXh0U29ydCA9IFtdO1xyXG5cclxuICAgIHRoaXMuc2VsZkRyaXZlbk1vZGVSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBSYXljYXN0ZXIoKTtcclxuXHJcbiAgICB0aGlzLmluZm9QYW5lbCA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zdGFydEluT3J0aG9ncmFwaGljTW9kZSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuY3VycmVudEZQUyA9IDA7XHJcbiAgICB0aGlzLmxhc3RTb3J0VGltZSA9IDA7XHJcbiAgICB0aGlzLmNvbnNlY3V0aXZlUmVuZGVyRnJhbWVzID0gMDtcclxuXHJcbiAgICB0aGlzLnByZXZpb3VzQ2FtZXJhVGFyZ2V0ID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIHRoaXMubmV4dENhbWVyYVRhcmdldCA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgdGhpcy5tb3VzZVBvc2l0aW9uID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIHRoaXMubW91c2VEb3duUG9zaXRpb24gPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgdGhpcy5tb3VzZURvd25UaW1lID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuICAgIHRoaXMubW91c2VNb3ZlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZURvd25MaXN0ZW5lciA9IG51bGw7XHJcbiAgICB0aGlzLm1vdXNlVXBMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB0aGlzLmtleURvd25MaXN0ZW5lciA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zb3J0UHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVycyA9IFtdO1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlcyA9IHt9O1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UgPSBudWxsO1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lUmVtb3ZhbFByb21pc2UgPSBudWxsO1xyXG5cclxuICAgIHRoaXMubG9hZGluZ1NwaW5uZXIgPSBuZXcgTG9hZGluZ1NwaW5uZXIoXHJcbiAgICAgIG51bGwsXHJcbiAgICAgIHRoaXMucm9vdEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keVxyXG4gICAgKTtcclxuICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuaGlkZSgpO1xyXG4gICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIgPSBuZXcgTG9hZGluZ1Byb2dyZXNzQmFyKFxyXG4gICAgICB0aGlzLnJvb3RFbGVtZW50IHx8IGRvY3VtZW50LmJvZHlcclxuICAgICk7XHJcbiAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5oaWRlKCk7XHJcbiAgICAvLyB0aGlzLmluZm9QYW5lbCA9IG5ldyBJbmZvUGFuZWwodGhpcy5yb290RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KVxyXG4gICAgLy8gdGhpcy5pbmZvUGFuZWwuaGlkZSgpXHJcblxyXG4gICAgdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhID0gdGhpcy5kcm9wSW5Nb2RlIHx8IHRoaXMuY2FtZXJhID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgdGhpcy51c2luZ0V4dGVybmFsUmVuZGVyZXIgPSB0aGlzLmRyb3BJbk1vZGUgfHwgdGhpcy5yZW5kZXJlciA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmRpc3Bvc2luZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5kaXNwb3NlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5kaXNwb3NlUHJvbWlzZSA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5sYXN0VGltZSA9IDA7XHJcbiAgICB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudCA9IDA7XHJcbiAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcclxuICAgIHRoaXMuZnJhbWUgPSAwO1xyXG4gICAgdGhpcy4gYXZhdGFyTWVzaCA9IG51bGw7XHJcbiAgICB0aGlzLnNraW5Nb2RlbCA9IG51bGw7XHJcbiAgICB0aGlzLmJvbmVSb290ID0gbnVsbDtcclxuICAgIHRoaXMuYmFzZU1lc2ggPSBudWxsO1xyXG4gICAgdGhpcy5zZXRTa2luQXR0aWJ1dGVzID0gZmFsc2U7XHJcblxyXG4gICAgaWYgKCF0aGlzLmRyb3BJbk1vZGUpIHRoaXMuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlU3BsYXRNZXNoKCkge1xyXG4gICAgdGhpcy5zcGxhdE1lc2ggPSBuZXcgU3BsYXRNZXNoKFxyXG4gICAgICB0aGlzLnNwbGF0UmVuZGVyTW9kZSxcclxuICAgICAgdGhpcy5keW5hbWljU2NlbmUsXHJcbiAgICAgIHRoaXMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICB0aGlzLmhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVLFxyXG4gICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8sXHJcbiAgICAgIHRoaXMuZ3B1QWNjZWxlcmF0ZWRTb3J0LFxyXG4gICAgICB0aGlzLmludGVnZXJCYXNlZFNvcnQsXHJcbiAgICAgIHRoaXMuYW50aWFsaWFzZWQsXHJcbiAgICAgIHRoaXMubWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsXHJcbiAgICAgIHRoaXMubG9nTGV2ZWwsXHJcbiAgICAgIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLFxyXG4gICAgICB0aGlzLnNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXIsXHJcbiAgICAgIHRoaXMua2VybmVsMkRTaXplLFxyXG4gICAgICB0aGlzLmlyaXNPY2NsdXNpb25Db25maWcgIC8vIFBhc3MgaXJpcyBjb25maWcgdG8gY29uc3RydWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgLy8gQ29uZmlnIGlzIG5vdyBzZXQgdmlhIGNvbnN0cnVjdG9yIHBhcmFtZXRlclxyXG4gICAgLy8gdGhpcy5zcGxhdE1lc2guaXJpc09jY2x1c2lvbkNvbmZpZyA9IHRoaXMuaXJpc09jY2x1c2lvbkNvbmZpZztcclxuICAgIHRoaXMuc3BsYXRNZXNoLmZydXN0dW1DdWxsZWQgPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLm9uU3BsYXRNZXNoQ2hhbmdlZENhbGxiYWNrKSB0aGlzLm9uU3BsYXRNZXNoQ2hhbmdlZENhbGxiYWNrKCk7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHJldHVyblxyXG5cclxuICAgIGlmICghdGhpcy5yb290RWxlbWVudCkge1xyXG4gICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbFJlbmRlcmVyKSB7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnJvb3RFbGVtZW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50ID0gdGhpcy5yZW5kZXJlci5kb21FbGVtZW50IHx8IGRvY3VtZW50LmJvZHk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNldHVwQ2FtZXJhKCk7XHJcbiAgICB0aGlzLnNldHVwUmVuZGVyZXIoKTtcclxuICAgIC8vIOaaguaXtuWOu+aOieaOp+WItuWZqFxyXG4gICAgLy8gdGhpcy5zZXR1cENvbnRyb2xzKClcclxuICAgIHRoaXMuc2V0dXBFdmVudEhhbmRsZXJzKCk7XHJcblxyXG4gICAgdGhpcy50aHJlZVNjZW5lID0gdGhpcy50aHJlZVNjZW5lIHx8IG5ldyBTY2VuZSgpO1xyXG4gICAgdGhpcy5zY2VuZUhlbHBlciA9IG5ldyBTY2VuZUhlbHBlcih0aGlzLnRocmVlU2NlbmUpO1xyXG4gICAgdGhpcy5zY2VuZUhlbHBlci5zZXR1cE1lc2hDdXJzb3IoKTtcclxuICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0dXBGb2N1c01hcmtlcigpO1xyXG4gICAgdGhpcy5zY2VuZUhlbHBlci5zZXR1cENvbnRyb2xQbGFuZSgpO1xyXG5cclxuICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLnNldENvbnRhaW5lcih0aGlzLnJvb3RFbGVtZW50KTtcclxuICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0Q29udGFpbmVyKHRoaXMucm9vdEVsZW1lbnQpO1xyXG4gICAgLy8gdGhpcy5pbmZvUGFuZWwuc2V0Q29udGFpbmVyKHRoaXMucm9vdEVsZW1lbnQpXHJcblxyXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBzZXR1cENhbWVyYSgpIHtcclxuICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcblxyXG4gICAgICB0aGlzLnBlcnNwZWN0aXZlQ2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKFxyXG4gICAgICAgIFRIUkVFX0NBTUVSQV9GT1YsXHJcbiAgICAgICAgcmVuZGVyRGltZW5zaW9ucy54IC8gcmVuZGVyRGltZW5zaW9ucy55LFxyXG4gICAgICAgIDAuMSxcclxuICAgICAgICAxMDAwXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMub3J0aG9ncmFwaGljQ2FtZXJhID0gbmV3IE9ydGhvZ3JhcGhpY0NhbWVyYShcclxuICAgICAgICByZW5kZXJEaW1lbnNpb25zLnggLyAtMixcclxuICAgICAgICByZW5kZXJEaW1lbnNpb25zLnggLyAyLFxyXG4gICAgICAgIHJlbmRlckRpbWVuc2lvbnMueSAvIDIsXHJcbiAgICAgICAgcmVuZGVyRGltZW5zaW9ucy55IC8gLTIsXHJcbiAgICAgICAgMC4xLFxyXG4gICAgICAgIDEwMDBcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5jYW1lcmEgPSB0aGlzLnN0YXJ0SW5PcnRob2dyYXBoaWNNb2RlXHJcbiAgICAgICAgPyB0aGlzLm9ydGhvZ3JhcGhpY0NhbWVyYVxyXG4gICAgICAgIDogdGhpcy5wZXJzcGVjdGl2ZUNhbWVyYTtcclxuICAgICAgdGhpcy5jYW1lcmEucG9zaXRpb24uY29weSh0aGlzLmluaXRpYWxDYW1lcmFQb3NpdGlvbik7XHJcbiAgICAgIC8vIHRoaXMuY2FtZXJhLnVwLmNvcHkodGhpcy5jYW1lcmFVcCkubm9ybWFsaXplKClcclxuICAgICAgLy8gdGhpcy5jYW1lcmEubG9va0F0KHRoaXMuaW5pdGlhbENhbWVyYUxvb2tBdClcclxuICAgICAgdGhpcy5jYW1lcmEucm90YXRlWChNYXRoVXRpbHMuZGVnVG9SYWQodGhpcy5pbml0aWFsQ2FtZXJhUm90YXRpb24ueCkpO1xyXG4gICAgICB0aGlzLmNhbWVyYS5yb3RhdGVZKE1hdGhVdGlscy5kZWdUb1JhZCh0aGlzLmluaXRpYWxDYW1lcmFSb3RhdGlvbi55KSk7XHJcbiAgICAgIHRoaXMuY2FtZXJhLnJvdGF0ZVooTWF0aFV0aWxzLmRlZ1RvUmFkKHRoaXMuaW5pdGlhbENhbWVyYVJvdGF0aW9uLnopKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldHVwUmVuZGVyZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbFJlbmRlcmVyKSB7XHJcbiAgICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcblxyXG4gICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFdlYkdMUmVuZGVyZXIoe1xyXG4gICAgICAgIGFudGlhbGlhczogZmFsc2UsXHJcbiAgICAgICAgcHJlY2lzaW9uOiAnaGlnaHAnLFxyXG4gICAgICAgIGNhbnZhczogdGhpcy5jYW52YXNcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh0aGlzLmRldmljZVBpeGVsUmF0aW8pO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmF1dG9DbGVhciA9IHRydWU7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0Q2xlYXJDb2xvcih0aGlzLmJhY2tncm91bmRDb2xvciwgMS4wKTsgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgYWNjb3JkaW5nIHRvIHRoZSBjb25maWdcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZShyZW5kZXJEaW1lbnNpb25zLngsIHJlbmRlckRpbWVuc2lvbnMueSk7XHJcblxyXG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcclxuICAgICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHJlbmRlckRpbWVuc2lvbnMueCwgcmVuZGVyRGltZW5zaW9ucy55KTtcclxuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICAgIHRoaXMucm9vdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldHVwQ29udHJvbHMoKSB7XHJcbiAgICBpZiAodGhpcy51c2VCdWlsdEluQ29udHJvbHMpIHtcclxuICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhcclxuICAgICAgICAgIHRoaXMucGVyc3BlY3RpdmVDYW1lcmEsXHJcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnRcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhcclxuICAgICAgICAgIHRoaXMub3J0aG9ncmFwaGljQ2FtZXJhLFxyXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50XHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHtcclxuICAgICAgICAgIHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnRcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IGNvbnRyb2xzIG9mIFtcclxuICAgICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzLFxyXG4gICAgICAgIHRoaXMucGVyc3BlY3RpdmVDb250cm9sc1xyXG4gICAgICBdKSB7XHJcbiAgICAgICAgaWYgKGNvbnRyb2xzKSB7XHJcbiAgICAgICAgICBjb250cm9scy5saXN0ZW5Ub0tleUV2ZW50cyh3aW5kb3cpO1xyXG4gICAgICAgICAgY29udHJvbHMucm90YXRlU3BlZWQgPSAwLjU7XHJcbiAgICAgICAgICBjb250cm9scy5tYXhQb2xhckFuZ2xlID0gTWF0aC5QSSAqIDAuNTsvLyArIE1hdGguUEkgLyAyNFxyXG4gICAgICAgICAgY29udHJvbHMubWluUG9sYXJBbmdsZSA9IE1hdGguUEkgKiAwLjU7Ly8gLSBNYXRoLlBJIC8gMjRcclxuICAgICAgICAgIGNvbnRyb2xzLm1pbkF6aW11dGhBbmdsZSA9IC1NYXRoLlBJIC8gNzI7XHJcbiAgICAgICAgICBjb250cm9scy5tYXhBemltdXRoQW5nbGUgPSBNYXRoLlBJIC8gNzI7XHJcbiAgICAgICAgICBjb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTtcclxuICAgICAgICAgIGNvbnRyb2xzLmRhbXBpbmdGYWN0b3IgPSAwLjA1O1xyXG4gICAgICAgICAgY29udHJvbHMudGFyZ2V0LmNvcHkodGhpcy5pbml0aWFsQ2FtZXJhTG9va0F0KTtcclxuICAgICAgICAgIGNvbnRyb2xzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNvbnRyb2xzID0gdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmFcclxuICAgICAgICA/IHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHNcclxuICAgICAgICA6IHRoaXMucGVyc3BlY3RpdmVDb250cm9scztcclxuICAgICAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldHVwRXZlbnRIYW5kbGVycygpIHtcclxuICAgIGlmICh0aGlzLnVzZUJ1aWx0SW5Db250cm9scykge1xyXG4gICAgICB0aGlzLm1vdXNlTW92ZUxpc3RlbmVyID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncG9pbnRlcm1vdmUnLFxyXG4gICAgICAgIHRoaXMubW91c2VNb3ZlTGlzdGVuZXIsXHJcbiAgICAgICAgZmFsc2VcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5tb3VzZURvd25MaXN0ZW5lciA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ3BvaW50ZXJkb3duJyxcclxuICAgICAgICB0aGlzLm1vdXNlRG93bkxpc3RlbmVyLFxyXG4gICAgICAgIGZhbHNlXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubW91c2VVcExpc3RlbmVyID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ3BvaW50ZXJ1cCcsXHJcbiAgICAgICAgdGhpcy5tb3VzZVVwTGlzdGVuZXIsXHJcbiAgICAgICAgZmFsc2VcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5rZXlEb3duTGlzdGVuZXIgPSB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcclxuICAgIGlmICh0aGlzLnVzZUJ1aWx0SW5Db250cm9scykge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncG9pbnRlcm1vdmUnLFxyXG4gICAgICAgIHRoaXMubW91c2VNb3ZlTGlzdGVuZXJcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5tb3VzZU1vdmVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdwb2ludGVyZG93bicsXHJcbiAgICAgICAgdGhpcy5tb3VzZURvd25MaXN0ZW5lclxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm1vdXNlRG93bkxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ3BvaW50ZXJ1cCcsXHJcbiAgICAgICAgdGhpcy5tb3VzZVVwTGlzdGVuZXJcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5tb3VzZVVwTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMua2V5RG93bkxpc3RlbmVyKTtcclxuICAgICAgdGhpcy5rZXlEb3duTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0UmVuZGVyTW9kZShyZW5kZXJNb2RlKSB7XHJcbiAgICB0aGlzLnJlbmRlck1vZGUgPSByZW5kZXJNb2RlO1xyXG4gIH1cclxuXHJcbiAgc2V0QWN0aXZlU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlcyhhY3RpdmVTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzKSB7XHJcbiAgICB0aGlzLnNwbGF0TWVzaC5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUudmFsdWUgPVxyXG4gICAgICBhY3RpdmVTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzO1xyXG4gICAgdGhpcy5zcGxhdE1lc2gubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIG9uU3BsYXRNZXNoQ2hhbmdlZChjYWxsYmFjaykge1xyXG4gICAgdGhpcy5vblNwbGF0TWVzaENoYW5nZWRDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgdGVtcEZvcndhcmQgPSBuZXcgVmVjdG9yMygpXHJcbiAgdGVtcE1hdHJpeExlZnQgPSBuZXcgTWF0cml4NCgpXHJcbiAgdGVtcE1hdHJpeFJpZ2h0ID0gbmV3IE1hdHJpeDQoKVxyXG4gIG9uS2V5RG93biA9IChlKSA9PiB7XHJcbiAgICB0aGlzLnRlbXBGb3J3YXJkLnNldCgwLCAwLCAtMSk7XHJcbiAgICB0aGlzLnRlbXBGb3J3YXJkLnRyYW5zZm9ybURpcmVjdGlvbih0aGlzLmNhbWVyYS5tYXRyaXhXb3JsZCk7XHJcbiAgICB0aGlzLnRlbXBNYXRyaXhMZWZ0Lm1ha2VSb3RhdGlvbkF4aXModGhpcy50ZW1wRm9yd2FyZCwgTWF0aC5QSSAvIDEyOCk7XHJcbiAgICB0aGlzLnRlbXBNYXRyaXhSaWdodC5tYWtlUm90YXRpb25BeGlzKHRoaXMudGVtcEZvcndhcmQsIC1NYXRoLlBJIC8gMTI4KTtcclxuICAgIHN3aXRjaCAoZS5jb2RlKSB7XHJcbiAgICAgIGNhc2UgJ0tleUcnOlxyXG4gICAgICAgIHRoaXMuZm9jYWxBZGp1c3RtZW50ICs9IDAuMDI7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0tleUYnOlxyXG4gICAgICAgIHRoaXMuZm9jYWxBZGp1c3RtZW50IC09IDAuMDI7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXAudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMudGVtcE1hdHJpeExlZnQpO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnVwLnRyYW5zZm9ybURpcmVjdGlvbih0aGlzLnRlbXBNYXRyaXhSaWdodCk7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnS2V5Qyc6XHJcbiAgICAgICAgdGhpcy5zaG93TWVzaEN1cnNvciA9ICF0aGlzLnNob3dNZXNoQ3Vyc29yO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0tleVUnOlxyXG4gICAgICAgIHRoaXMuc2hvd0NvbnRyb2xQbGFuZSA9ICF0aGlzLnNob3dDb250cm9sUGxhbmU7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnS2V5SSc6XHJcbiAgICAgICAgdGhpcy5zaG93SW5mbyA9ICF0aGlzLnNob3dJbmZvO1xyXG4gICAgICAgIGlmICh0aGlzLnNob3dJbmZvKSB7XHJcbiAgICAgICAgICAvLyB0aGlzLmluZm9QYW5lbC5zaG93KClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gdGhpcy5pbmZvUGFuZWwuaGlkZSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0tleU8nOlxyXG4gICAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgICB0aGlzLnNldE9ydGhvZ3JhcGhpY01vZGUoIXRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnS2V5UCc6XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnNldFBvaW50Q2xvdWRNb2RlRW5hYmxlZChcclxuICAgICAgICAgICAgIXRoaXMuc3BsYXRNZXNoLmdldFBvaW50Q2xvdWRNb2RlRW5hYmxlZCgpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdFcXVhbCc6XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnNldFNwbGF0U2NhbGUodGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRTY2FsZSgpICsgMC4wNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ01pbnVzJzpcclxuICAgICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgICAgdGhpcy5zcGxhdE1lc2guc2V0U3BsYXRTY2FsZShcclxuICAgICAgICAgICAgTWF0aC5tYXgodGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRTY2FsZSgpIC0gMC4wNSwgMC4wKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTW91c2VNb3ZlKG1vdXNlKSB7XHJcbiAgICB0aGlzLm1vdXNlUG9zaXRpb24uc2V0KG1vdXNlLm9mZnNldFgsIG1vdXNlLm9mZnNldFkpO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZURvd24oKSB7XHJcbiAgICB0aGlzLm1vdXNlRG93blBvc2l0aW9uLmNvcHkodGhpcy5tb3VzZVBvc2l0aW9uKTtcclxuICAgIHRoaXMubW91c2VEb3duVGltZSA9IGdldEN1cnJlbnRUaW1lKCk7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlVXAgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgY2xpY2tPZmZzZXQgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAobW91c2UpIHtcclxuICAgICAgY2xpY2tPZmZzZXQuY29weSh0aGlzLm1vdXNlUG9zaXRpb24pLnN1Yih0aGlzLm1vdXNlRG93blBvc2l0aW9uKTtcclxuICAgICAgY29uc3QgbW91c2VVcFRpbWUgPSBnZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICBjb25zdCB3YXNDbGljayA9XHJcbiAgICAgICAgbW91c2VVcFRpbWUgLSB0aGlzLm1vdXNlRG93blRpbWUgPCAwLjUgJiYgY2xpY2tPZmZzZXQubGVuZ3RoKCkgPCAyO1xyXG4gICAgICBpZiAod2FzQ2xpY2spIHtcclxuICAgICAgICB0aGlzLm9uTW91c2VDbGljayhtb3VzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIG9uTW91c2VDbGljayhtb3VzZSkge1xyXG4gICAgdGhpcy5tb3VzZVBvc2l0aW9uLnNldChtb3VzZS5vZmZzZXRYLCBtb3VzZS5vZmZzZXRZKTtcclxuICAgIHRoaXMuY2hlY2tGb3JGb2NhbFBvaW50Q2hhbmdlKCk7XHJcbiAgfVxyXG5cclxuICBjaGVja1BvaW50UmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKClcclxuICBjaGVja1BvaW50VG9OZXdGb2NhbFBvaW50ID0gbmV3IFZlY3RvcjMoKVxyXG4gIGNoZWNrUG9pbnRPdXRIaXRzID0gW11cclxuICBjaGVja0ZvckZvY2FsUG9pbnRDaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldCkge1xyXG4gICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnModGhpcy5jaGVja1BvaW50UmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgIHRoaXMuY2hlY2tQb2ludE91dEhpdHMubGVuZ3RoID0gMDtcclxuICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYUFuZFNjcmVlblBvc2l0aW9uKFxyXG4gICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgIHRoaXMubW91c2VQb3NpdGlvbixcclxuICAgICAgICB0aGlzLmNoZWNrUG9pbnRSZW5kZXJEaW1lbnNpb25zXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdFNwbGF0TWVzaCh0aGlzLnNwbGF0TWVzaCwgdGhpcy5jaGVja1BvaW50T3V0SGl0cyk7XHJcbiAgICAgIGlmICh0aGlzLmNoZWNrUG9pbnRPdXRIaXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLmNoZWNrUG9pbnRPdXRIaXRzWzBdO1xyXG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gaGl0Lm9yaWdpbjtcclxuICAgICAgICB0aGlzLmNoZWNrUG9pbnRUb05ld0ZvY2FsUG9pbnRcclxuICAgICAgICAgIC5jb3B5KGludGVyc2VjdGlvblBvaW50KVxyXG4gICAgICAgICAgLnN1Yih0aGlzLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgdGhpcy5jaGVja1BvaW50VG9OZXdGb2NhbFBvaW50Lmxlbmd0aCgpID5cclxuICAgICAgICAgIE1JTklNVU1fRElTVEFOQ0VfVE9fTkVXX0ZPQ0FMX1BPSU5UXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLnByZXZpb3VzQ2FtZXJhVGFyZ2V0LmNvcHkodGhpcy5jb250cm9scy50YXJnZXQpO1xyXG4gICAgICAgICAgdGhpcy5uZXh0Q2FtZXJhVGFyZ2V0LmNvcHkoaW50ZXJzZWN0aW9uUG9pbnQpO1xyXG4gICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0ID0gdHJ1ZTtcclxuICAgICAgICAgIHRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldFN0YXJ0VGltZSA9IGdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRSZW5kZXJEaW1lbnNpb25zKG91dERpbWVuc2lvbnMpIHtcclxuICAgIGlmICh0aGlzLnJvb3RFbGVtZW50KSB7XHJcbiAgICAgIG91dERpbWVuc2lvbnMueCA9IHRoaXMucm9vdEVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgIG91dERpbWVuc2lvbnMueSA9IHRoaXMucm9vdEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5nZXRTaXplKG91dERpbWVuc2lvbnMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0T3J0aG9ncmFwaGljTW9kZShvcnRob2dyYXBoaWNNb2RlKSB7XHJcbiAgICBpZiAob3J0aG9ncmFwaGljTW9kZSA9PT0gdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHJldHVyblxyXG4gICAgY29uc3QgZnJvbUNhbWVyYSA9IHRoaXMuY2FtZXJhO1xyXG4gICAgY29uc3QgdG9DYW1lcmEgPSBvcnRob2dyYXBoaWNNb2RlXHJcbiAgICAgID8gdGhpcy5vcnRob2dyYXBoaWNDYW1lcmFcclxuICAgICAgOiB0aGlzLnBlcnNwZWN0aXZlQ2FtZXJhO1xyXG4gICAgdG9DYW1lcmEucG9zaXRpb24uY29weShmcm9tQ2FtZXJhLnBvc2l0aW9uKTtcclxuICAgIHRvQ2FtZXJhLnVwLmNvcHkoZnJvbUNhbWVyYS51cCk7XHJcbiAgICB0b0NhbWVyYS5yb3RhdGlvbi5jb3B5KGZyb21DYW1lcmEucm90YXRpb24pO1xyXG4gICAgdG9DYW1lcmEucXVhdGVybmlvbi5jb3B5KGZyb21DYW1lcmEucXVhdGVybmlvbik7XHJcbiAgICB0b0NhbWVyYS5tYXRyaXguY29weShmcm9tQ2FtZXJhLm1hdHJpeCk7XHJcbiAgICB0aGlzLmNhbWVyYSA9IHRvQ2FtZXJhO1xyXG5cclxuICAgIGlmICh0aGlzLmNvbnRyb2xzKSB7XHJcbiAgICAgIGNvbnN0IHJlc2V0Q29udHJvbHMgPSAoY29udHJvbHMpID0+IHtcclxuICAgICAgICBjb250cm9scy5zYXZlU3RhdGUoKTtcclxuICAgICAgICBjb250cm9scy5yZXNldCgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgZnJvbUNvbnRyb2xzID0gdGhpcy5jb250cm9scztcclxuICAgICAgY29uc3QgdG9Db250cm9scyA9IG9ydGhvZ3JhcGhpY01vZGVcclxuICAgICAgICA/IHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHNcclxuICAgICAgICA6IHRoaXMucGVyc3BlY3RpdmVDb250cm9scztcclxuXHJcbiAgICAgIHJlc2V0Q29udHJvbHModG9Db250cm9scyk7XHJcbiAgICAgIHJlc2V0Q29udHJvbHMoZnJvbUNvbnRyb2xzKTtcclxuXHJcbiAgICAgIHRvQ29udHJvbHMudGFyZ2V0LmNvcHkoZnJvbUNvbnRyb2xzLnRhcmdldCk7XHJcbiAgICAgIGlmIChvcnRob2dyYXBoaWNNb2RlKSB7XHJcbiAgICAgICAgVmlld2VyLnNldENhbWVyYVpvb21Gcm9tUG9zaXRpb24odG9DYW1lcmEsIGZyb21DYW1lcmEsIGZyb21Db250cm9scyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgVmlld2VyLnNldENhbWVyYVBvc2l0aW9uRnJvbVpvb20odG9DYW1lcmEsIGZyb21DYW1lcmEsIHRvQ29udHJvbHMpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29udHJvbHMgPSB0b0NvbnRyb2xzO1xyXG4gICAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5jb250cm9scy50YXJnZXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHNldENhbWVyYVBvc2l0aW9uRnJvbVpvb20gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdGVtcFZlY3RvciA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwb3NpdGlvbkNhbWVyYSwgem9vbWVkQ2FtZXJhLCBjb250cm9scykge1xyXG4gICAgICBjb25zdCB0b0xvb2tBdERpc3RhbmNlID0gMSAvICh6b29tZWRDYW1lcmEuem9vbSAqIDAuMDAxKTtcclxuICAgICAgdGVtcFZlY3RvclxyXG4gICAgICAgIC5jb3B5KGNvbnRyb2xzLnRhcmdldClcclxuICAgICAgICAuc3ViKHBvc2l0aW9uQ2FtZXJhLnBvc2l0aW9uKVxyXG4gICAgICAgIC5ub3JtYWxpemUoKVxyXG4gICAgICAgIC5tdWx0aXBseVNjYWxhcih0b0xvb2tBdERpc3RhbmNlKVxyXG4gICAgICAgIC5uZWdhdGUoKTtcclxuICAgICAgcG9zaXRpb25DYW1lcmEucG9zaXRpb24uY29weShjb250cm9scy50YXJnZXQpLmFkZCh0ZW1wVmVjdG9yKTtcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHN0YXRpYyBzZXRDYW1lcmFab29tRnJvbVBvc2l0aW9uID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHRlbXBWZWN0b3IgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoem9vbUNhbWVyYSwgcG9zaXRpb25aYW1lcmEsIGNvbnRyb2xzKSB7XHJcbiAgICAgIGNvbnN0IHRvTG9va0F0RGlzdGFuY2UgPSB0ZW1wVmVjdG9yXHJcbiAgICAgICAgLmNvcHkoY29udHJvbHMudGFyZ2V0KVxyXG4gICAgICAgIC5zdWIocG9zaXRpb25aYW1lcmEucG9zaXRpb24pXHJcbiAgICAgICAgLmxlbmd0aCgpO1xyXG4gICAgICB6b29tQ2FtZXJhLnpvb20gPSAxIC8gKHRvTG9va0F0RGlzdGFuY2UgKiAwLjAwMSk7XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICB1cGRhdGVTcGxhdE1lc2ggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCF0aGlzLnNwbGF0TWVzaCkgcmV0dXJuXHJcbiAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgIGlmIChzcGxhdENvdW50ID4gMCkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVZpc2libGVSZWdpb25GYWRlRGlzdGFuY2UodGhpcy5zY2VuZVJldmVhbE1vZGUpO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVRyYW5zZm9ybXMoKTtcclxuICAgICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgICAgY29uc3QgZm9jYWxMZW5ndGhYID1cclxuICAgICAgICAgIHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMF0gKlxyXG4gICAgICAgICAgMC41ICpcclxuICAgICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyAqXHJcbiAgICAgICAgICByZW5kZXJEaW1lbnNpb25zLng7XHJcbiAgICAgICAgY29uc3QgZm9jYWxMZW5ndGhZID1cclxuICAgICAgICAgIHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbNV0gKlxyXG4gICAgICAgICAgMC41ICpcclxuICAgICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyAqXHJcbiAgICAgICAgICByZW5kZXJEaW1lbnNpb25zLnk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvY2FsTXVsdGlwbGllciA9IHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhXHJcbiAgICAgICAgICA/IDEuMCAvIHRoaXMuZGV2aWNlUGl4ZWxSYXRpb1xyXG4gICAgICAgICAgOiAxLjA7XHJcbiAgICAgICAgY29uc3QgZm9jYWxBZGp1c3RtZW50ID0gdGhpcy5mb2NhbEFkanVzdG1lbnQgKiBmb2NhbE11bHRpcGxpZXI7XHJcbiAgICAgICAgY29uc3QgaW52ZXJzZUZvY2FsQWRqdXN0bWVudCA9IDEuMCAvIGZvY2FsQWRqdXN0bWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5hZGp1c3RGb3JXZWJYUlN0ZXJlbyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVVbmlmb3JtcyhcclxuICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnMsXHJcbiAgICAgICAgICBmb2NhbExlbmd0aFggKiBmb2NhbEFkanVzdG1lbnQsXHJcbiAgICAgICAgICBmb2NhbExlbmd0aFkgKiBmb2NhbEFkanVzdG1lbnQsXHJcbiAgICAgICAgICB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSxcclxuICAgICAgICAgIHRoaXMuY2FtZXJhLnpvb20gfHwgMS4wLFxyXG4gICAgICAgICAgaW52ZXJzZUZvY2FsQWRqdXN0bWVudFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIGFkanVzdEZvcldlYlhSU3RlcmVvKHJlbmRlckRpbWVuc2lvbnMpIHtcclxuICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgYSBsZXNzIGhhY2t5IHdheSB0byBkZXRlcm1pbmUgaWYgc3RlcmVvIHJlbmRlcmluZyBpcyBhY3RpdmVcclxuICAgIGlmICh0aGlzLmNhbWVyYSAmJiB0aGlzLndlYlhSQWN0aXZlKSB7XHJcbiAgICAgIGNvbnN0IHhyQ2FtZXJhID0gdGhpcy5yZW5kZXJlci54ci5nZXRDYW1lcmEoKTtcclxuICAgICAgY29uc3QgeHJDYW1lcmFQcm9qMDAgPSB4ckNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzBdO1xyXG4gICAgICBjb25zdCBjYW1lcmFQcm9qMDAgPSB0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzBdO1xyXG4gICAgICByZW5kZXJEaW1lbnNpb25zLnggKj0gY2FtZXJhUHJvajAwIC8geHJDYW1lcmFQcm9qMDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpc0xvYWRpbmdPclVubG9hZGluZygpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZXMpLmxlbmd0aCA+IDAgfHxcclxuICAgICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UgIT09IG51bGwgfHxcclxuICAgICAgdGhpcy5zcGxhdFNjZW5lUmVtb3ZhbFByb21pc2UgIT09IG51bGxcclxuICAgIClcclxuICB9XHJcblxyXG4gIGlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmRpc3Bvc2luZyB8fCB0aGlzLmRpc3Bvc2VkXHJcbiAgfVxyXG5cclxuICBhZGRTcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVyKGNvbnRyb2xsZXIpIHtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcnMucHVzaChjb250cm9sbGVyKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXIoY29udHJvbGxlcikge1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXJzLmluZGV4T2YoY29udHJvbGxlcik7XHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZFNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UocHJvbWlzZSkge1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlc1twcm9taXNlLmlkXSA9IHByb21pc2U7XHJcbiAgfVxyXG5cclxuICByZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKHByb21pc2UpIHtcclxuICAgIGRlbGV0ZSB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZFByb21pc2VzW3Byb21pc2UuaWRdO1xyXG4gIH1cclxuXHJcbiAgc2V0U3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKHByb21pc2UpIHtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlID0gcHJvbWlzZTtcclxuICB9XHJcblxyXG4gIGNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCkge1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGEgc3BsYXQgc2NlbmUgdG8gdGhlIHZpZXdlciBhbmQgZGlzcGxheSBhbnkgbG9hZGluZyBVSSBpZiBhcHByb3ByaWF0ZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIHNwbGF0IHNjZW5lIHRvIGJlIGxvYWRlZFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIHtcclxuICAgKlxyXG4gICAqICAgICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQ6IElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWRcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpLCBkZWZhdWx0cyB0byAxXHJcbiAgICpcclxuICAgKiAgICAgICAgIHNob3dMb2FkaW5nVUk6ICAgICAgICAgRGlzcGxheSBhIGxvYWRpbmcgc3Bpbm5lciB3aGlsZSB0aGUgc2NlbmUgaXMgbG9hZGluZywgZGVmYXVsdHMgdG8gdHJ1ZVxyXG4gICAqXHJcbiAgICogICAgICAgICBwb3NpdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUG9zaXRpb24gb2YgdGhlIHNjZW5lLCBhY3RzIGFzIGFuIG9mZnNldCBmcm9tIGl0cyBkZWZhdWx0IHBvc2l0aW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMF1cclxuICAgKlxyXG4gICAqICAgICAgICAgcm90YXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFJvdGF0aW9uIG9mIHRoZSBzY2VuZSByZXByZXNlbnRlZCBhcyBhIHF1YXRlcm5pb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwLCAxXVxyXG4gICAqXHJcbiAgICogICAgICAgICBzY2FsZSAoQXJyYXk8bnVtYmVyPik6ICAgICAgU2NlbmUncyBzY2FsZSwgZGVmYXVsdHMgdG8gWzEsIDEsIDFdXHJcbiAgICpcclxuICAgKiAgICAgICAgIG9uUHJvZ3Jlc3M6ICAgICAgICAgICAgICAgICBGdW5jdGlvbiB0byBiZSBjYWxsZWQgYXMgZmlsZSBkYXRhIGFyZSByZWNlaXZlZCwgb3Igb3RoZXIgcHJvY2Vzc2luZyBvY2N1cnNcclxuICAgKlxyXG4gICAqICAgICAgICAgaGVhZGVyczogICAgICAgICAgICAgICAgICAgIE9wdGlvbmFsIEhUVFAgaGVhZGVycyB0byBiZSBzZW50IGFsb25nIHdpdGggc3BsYXQgcmVxdWVzdHNcclxuICAgKiB9XHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKi9cclxuICBhZGRTcGxhdFNjZW5lKHBhdGgsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgaWYgKHRoaXMuaXNMb2FkaW5nT3JVbmxvYWRpbmcoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgJ0Nhbm5vdCBhZGQgc3BsYXQgc2NlbmUgd2hpbGUgYW5vdGhlciBsb2FkIG9yIHVubG9hZCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLidcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGFkZCBzcGxhdCBzY2VuZSBhZnRlciBkaXNwb3NlKCkgaXMgY2FsbGVkLicpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLnByb2dyZXNzaXZlTG9hZCAmJlxyXG4gICAgICB0aGlzLnNwbGF0TWVzaC5zY2VuZXMgJiZcclxuICAgICAgdGhpcy5zcGxhdE1lc2guc2NlbmVzLmxlbmd0aCA+IDBcclxuICAgICkge1xyXG4gICAgICBsb2dnZXIud2FybihcclxuICAgICAgICAnYWRkU3BsYXRTY2VuZSgpOiBcInByb2dyZXNzaXZlTG9hZFwiIG9wdGlvbiBpZ25vcmUgYmVjYXVzZSB0aGVyZSBhcmUgbXVsdGlwbGUgc3BsYXQgc2NlbmVzJ1xyXG4gICAgICApO1xyXG4gICAgICBvcHRpb25zLnByb2dyZXNzaXZlTG9hZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm1hdCA9XHJcbiAgICAgIG9wdGlvbnMuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5mb3JtYXQgIT09IG51bGxcclxuICAgICAgICA/IG9wdGlvbnMuZm9ybWF0XHJcbiAgICAgICAgOiBzY2VuZUZvcm1hdEZyb21QYXRoKHBhdGgpO1xyXG4gICAgY29uc3QgcHJvZ3Jlc3NpdmVMb2FkID1cclxuICAgICAgVmlld2VyLmlzUHJvZ3Jlc3NpdmVseUxvYWRhYmxlKGZvcm1hdCkgJiYgb3B0aW9ucy5wcm9ncmVzc2l2ZUxvYWQ7XHJcbiAgICBjb25zdCBzaG93TG9hZGluZ1VJID1cclxuICAgICAgb3B0aW9ucy5zaG93TG9hZGluZ1VJICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5zaG93TG9hZGluZ1VJICE9PSBudWxsXHJcbiAgICAgICAgPyBvcHRpb25zLnNob3dMb2FkaW5nVUlcclxuICAgICAgICA6IHRydWU7XHJcblxyXG4gICAgbGV0IGxvYWRpbmdVSVRhc2tJZCA9IG51bGw7XHJcbiAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZUFsbFRhc2tzKCk7XHJcbiAgICAgIGxvYWRpbmdVSVRhc2tJZCA9IHRoaXMubG9hZGluZ1NwaW5uZXIuYWRkVGFzaygnRG93bmxvYWRpbmcuLi4nKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhpZGVMb2FkaW5nVUkgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLmhpZGUoKTtcclxuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvblByb2dyZXNzVUlVcGRhdGUgPSAoXHJcbiAgICAgIHBlcmNlbnRDb21wbGV0ZSxcclxuICAgICAgcGVyY2VudENvbXBsZXRlTGFiZWwsXHJcbiAgICAgIGxvYWRlclN0YXR1c1xyXG4gICAgKSA9PiB7XHJcbiAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgICAgaWYgKGxvYWRlclN0YXR1cyA9PT0gTG9hZGVyU3RhdHVzLkRvd25sb2FkaW5nKSB7XHJcbiAgICAgICAgICBpZiAocGVyY2VudENvbXBsZXRlID09IDEwMCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldE1lc3NhZ2VGb3JUYXNrKFxyXG4gICAgICAgICAgICAgIGxvYWRpbmdVSVRhc2tJZCxcclxuICAgICAgICAgICAgICAnRG93bmxvYWQgY29tcGxldGUhJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzaXZlTG9hZCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0TWVzc2FnZUZvclRhc2soXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nVUlUYXNrSWQsXHJcbiAgICAgICAgICAgICAgICAnRG93bmxvYWRpbmcgc3BsYXRzLi4uJ1xyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc3VmZml4ID0gcGVyY2VudENvbXBsZXRlTGFiZWxcclxuICAgICAgICAgICAgICAgID8gYDogJHtwZXJjZW50Q29tcGxldGVMYWJlbH1gXHJcbiAgICAgICAgICAgICAgICA6IGAuLi5gO1xyXG4gICAgICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0TWVzc2FnZUZvclRhc2soXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nVUlUYXNrSWQsXHJcbiAgICAgICAgICAgICAgICBgRG93bmxvYWRpbmcke3N1ZmZpeH1gXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAobG9hZGVyU3RhdHVzID09PSBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZykge1xyXG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKCdsb2FkZXJTdGF0dXMgPT09IExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nJyk7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldE1lc3NhZ2VGb3JUYXNrKFxyXG4gICAgICAgICAgICBsb2FkaW5nVUlUYXNrSWQsXHJcbiAgICAgICAgICAgICdQcm9jZXNzaW5nIHNwbGF0cy4uLidcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBkb3dubG9hZERvbmUgPSBmYWxzZTtcclxuICAgIGxldCBkb3dubG9hZGVkUGVyY2VudGFnZSA9IDA7XHJcbiAgICBjb25zdCBzcGxhdEJ1ZmZlcnNBZGRlZFVJVXBkYXRlID0gKGZpcnN0QnVpbGQsIGZpbmFsQnVpbGQpID0+IHtcclxuICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAoZmlyc3RCdWlsZCAmJiBwcm9ncmVzc2l2ZUxvYWQpIHx8XHJcbiAgICAgICAgICAoZmluYWxCdWlsZCAmJiAhcHJvZ3Jlc3NpdmVMb2FkKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVUYXNrKGxvYWRpbmdVSVRhc2tJZCk7XHJcbiAgICAgICAgICBpZiAoIWZpbmFsQnVpbGQgJiYgIWRvd25sb2FkRG9uZSkgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvZ3Jlc3NpdmVMb2FkKSB7XHJcbiAgICAgICAgICBpZiAoZmluYWxCdWlsZCkge1xyXG4gICAgICAgICAgICBkb3dubG9hZERvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5oaWRlKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5zZXRQcm9ncmVzcyhkb3dubG9hZGVkUGVyY2VudGFnZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uUHJvZ3Jlc3MgPSAoXHJcbiAgICAgIHBlcmNlbnRDb21wbGV0ZSxcclxuICAgICAgcGVyY2VudENvbXBsZXRlTGFiZWwsXHJcbiAgICAgIGxvYWRlclN0YXR1c1xyXG4gICAgKSA9PiB7XHJcbiAgICAgIGRvd25sb2FkZWRQZXJjZW50YWdlID0gcGVyY2VudENvbXBsZXRlO1xyXG4gICAgICBvblByb2dyZXNzVUlVcGRhdGUocGVyY2VudENvbXBsZXRlLCBwZXJjZW50Q29tcGxldGVMYWJlbCwgbG9hZGVyU3RhdHVzKTtcclxuICAgICAgaWYgKG9wdGlvbnMub25Qcm9ncmVzcylcclxuICAgICAgICBvcHRpb25zLm9uUHJvZ3Jlc3MocGVyY2VudENvbXBsZXRlLCBwZXJjZW50Q29tcGxldGVMYWJlbCwgbG9hZGVyU3RhdHVzKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgYnVpbGRTZWN0aW9uID0gKHNwbGF0QnVmZmVyLCBmaXJzdEJ1aWxkLCBmaW5hbEJ1aWxkKSA9PiB7XHJcbiAgICAgIGlmICghcHJvZ3Jlc3NpdmVMb2FkICYmIG9wdGlvbnMub25Qcm9ncmVzcylcclxuICAgICAgICBvcHRpb25zLm9uUHJvZ3Jlc3MoMCwgJzAlJywgTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcpO1xyXG4gICAgICBjb25zdCBhZGRTcGxhdEJ1ZmZlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgcm90YXRpb246IG9wdGlvbnMucm90YXRpb24gfHwgb3B0aW9ucy5vcmllbnRhdGlvbixcclxuICAgICAgICBwb3NpdGlvbjogb3B0aW9ucy5wb3NpdGlvbixcclxuICAgICAgICBzY2FsZTogb3B0aW9ucy5zY2FsZSxcclxuICAgICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZDogb3B0aW9ucy5zcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gdGhpcy5hZGRTcGxhdEJ1ZmZlcnMoXHJcbiAgICAgICAgW3NwbGF0QnVmZmVyXSxcclxuICAgICAgICBbYWRkU3BsYXRCdWZmZXJPcHRpb25zXSxcclxuICAgICAgICBmaW5hbEJ1aWxkLFxyXG4gICAgICAgIGZpcnN0QnVpbGQgJiYgc2hvd0xvYWRpbmdVSSxcclxuICAgICAgICBzaG93TG9hZGluZ1VJLFxyXG4gICAgICAgIHByb2dyZXNzaXZlTG9hZCxcclxuICAgICAgICBwcm9ncmVzc2l2ZUxvYWRcclxuICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoIXByb2dyZXNzaXZlTG9hZCAmJiBvcHRpb25zLm9uUHJvZ3Jlc3MpXHJcbiAgICAgICAgICBvcHRpb25zLm9uUHJvZ3Jlc3MoMTAwLCAnMTAwJScsIExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nKTtcclxuICAgICAgICBzcGxhdEJ1ZmZlcnNBZGRlZFVJVXBkYXRlKGZpcnN0QnVpbGQsIGZpbmFsQnVpbGQpO1xyXG4gICAgICB9KVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBsb2FkRnVuYyA9IHByb2dyZXNzaXZlTG9hZFxyXG4gICAgICA/IHRoaXMuZG93bmxvYWRBbmRCdWlsZFNpbmdsZVNwbGF0U2NlbmVQcm9ncmVzc2l2ZUxvYWQuYmluZCh0aGlzKVxyXG4gICAgICA6IHRoaXMuZG93bmxvYWRBbmRCdWlsZFNpbmdsZVNwbGF0U2NlbmVTdGFuZGFyZExvYWQuYmluZCh0aGlzKTtcclxuICAgIHJldHVybiBsb2FkRnVuYyhcclxuICAgICAgcGF0aCxcclxuICAgICAgZm9ybWF0LFxyXG4gICAgICBvcHRpb25zLnNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgICBidWlsZFNlY3Rpb24uYmluZCh0aGlzKSxcclxuICAgICAgb25Qcm9ncmVzcyxcclxuICAgICAgaGlkZUxvYWRpbmdVSS5iaW5kKHRoaXMpLFxyXG4gICAgICBvcHRpb25zLmhlYWRlcnNcclxuICAgIClcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvd25sb2FkIGEgc2luZ2xlIHNwbGF0IHNjZW5lLCBjb252ZXJ0IHRvIHNwbGF0IGJ1ZmZlciBhbmQgdGhlbiByZWJ1aWxkIHRoZSB2aWV3ZXIncyBzcGxhdCBtZXNoXHJcbiAgICogYnkgY2FsbGluZyAnYnVpbGRGdW5jJyAtLSBhbGwgYmVmb3JlIGRpc3BsYXlpbmcgdGhlIHNjZW5lLiBBbHNvIHNldHMvY2xlYXJzIHJlbGV2YW50IGluc3RhbmNlIHN5bmNocm9uaXphdGlvbiBvYmplY3RzLFxyXG4gICAqIGFuZCBjYWxscyBhcHByb3ByaWF0ZSBmdW5jdGlvbnMgb24gc3VjY2VzcyBvciBmYWlsdXJlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gc3BsYXQgc2NlbmUgdG8gYmUgbG9hZGVkXHJcbiAgICogQHBhcmFtIHtTY2VuZUZvcm1hdH0gZm9ybWF0IEZvcm1hdCBvZiB0aGUgc3BsYXQgc2NlbmUgZmlsZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSlcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBidWlsZEZ1bmMgRnVuY3Rpb24gdG8gYnVpbGQgdGhlIHZpZXdlcidzIHNwbGF0IG1lc2ggd2l0aCB0aGUgZG93bmxvYWRlZCBzcGxhdCBidWZmZXJcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblByb2dyZXNzIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhcyBmaWxlIGRhdGEgYXJlIHJlY2VpdmVkLCBvciBvdGhlciBwcm9jZXNzaW5nIG9jY3Vyc1xyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uRXhjZXB0aW9uIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGV4Y2VwdGlvbiBvY2N1cnNcclxuICAgKiBAcGFyYW0ge29iamVjdH0gaGVhZGVycyBPcHRpb25hbCBIVFRQIGhlYWRlcnMgdG8gcGFzcyB0byB1c2UgZm9yIGRvd25sb2FkaW5nIHNwbGF0IHNjZW5lXHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKi9cclxuICBkb3dubG9hZEFuZEJ1aWxkU2luZ2xlU3BsYXRTY2VuZVN0YW5kYXJkTG9hZChcclxuICAgIHBhdGgsXHJcbiAgICBmb3JtYXQsXHJcbiAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgIGJ1aWxkRnVuYyxcclxuICAgIG9uUHJvZ3Jlc3MsXHJcbiAgICBvbkV4Y2VwdGlvbixcclxuICAgIGhlYWRlcnNcclxuICApIHtcclxuICAgIGNvbnN0IGRvd25sb2FkUHJvbWlzZSA9IHRoaXMuZG93bmxvYWRTcGxhdFNjZW5lVG9TcGxhdEJ1ZmZlcihcclxuICAgICAgcGF0aCxcclxuICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICAgIG9uUHJvZ3Jlc3MsXHJcbiAgICAgIGZhbHNlLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIGZvcm1hdCxcclxuICAgICAgaGVhZGVyc1xyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBwcm9taXNlIHRoYXQgY2FuIGJlIHJlc29sdmVkL3JlamVjdGVkIGV4dGVybmFsbHksIHdpdGggYWJvcnQgY2FwYWJpbGl0eVxyXG4gICAgY29uc3QgZG93bmxvYWRBbmRCdWlsZFByb21pc2UgPSBhYm9ydGFibGVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMoXHJcbiAgICAgIGRvd25sb2FkUHJvbWlzZS5hYm9ydCA/IGRvd25sb2FkUHJvbWlzZS5hYm9ydC5iaW5kKGRvd25sb2FkUHJvbWlzZSkgOiB1bmRlZmluZWRcclxuICAgICk7XHJcblxyXG4gICAgZG93bmxvYWRQcm9taXNlXHJcbiAgICAgIC50aGVuKChzcGxhdEJ1ZmZlcikgPT4ge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShkb3dubG9hZFByb21pc2UpO1xyXG4gICAgICAgIHJldHVybiBidWlsZEZ1bmMoc3BsYXRCdWZmZXIsIHRydWUsIHRydWUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgZG93bmxvYWRBbmRCdWlsZFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgdGhpcy5jbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgIGlmIChvbkV4Y2VwdGlvbikgb25FeGNlcHRpb24oKTtcclxuICAgICAgICB0aGlzLmNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKGRvd25sb2FkUHJvbWlzZSk7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPVxyXG4gICAgICAgICAgKGUgaW5zdGFuY2VvZiBBYm9ydGVkUHJvbWlzZUVycm9yIHx8IGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InKVxyXG4gICAgICAgICAgICA/IGVcclxuICAgICAgICAgICAgOiBuZXcgRXJyb3IoYFZpZXdlcjo6YWRkU3BsYXRTY2VuZSAtPiBDb3VsZCBub3QgbG9hZCBmaWxlICR7cGF0aH1gKTtcclxuICAgICAgICBkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLmFkZFNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UoZG93bmxvYWRQcm9taXNlKTtcclxuICAgIHRoaXMuc2V0U3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKGRvd25sb2FkQW5kQnVpbGRQcm9taXNlLnByb21pc2UpO1xyXG5cclxuICAgIHJldHVybiBkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZS5wcm9taXNlXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEb3dubG9hZCBhIHNpbmdsZSBzcGxhdCBzY2VuZSBhbmQgY29udmVydCB0byBzcGxhdCBidWZmZXIgaW4gYSBwcm9ncmVzc2l2ZSBtYW5uZXIsIGFsbG93aW5nIHJlbmRlcmluZyBhcyB0aGUgZmlsZSBkb3dubG9hZHMuXHJcbiAgICogQXMgZWFjaCBzZWN0aW9uIGlzIGRvd25sb2FkZWQsIHRoZSB2aWV3ZXIncyBzcGxhdCBtZXNoIGlzIHJlYnVpbHQgYnkgY2FsbGluZyAnYnVpbGRGdW5jJ1xyXG4gICAqIEFsc28gc2V0cy9jbGVhcnMgcmVsZXZhbnQgaW5zdGFuY2Ugc3luY2hyb25pemF0aW9uIG9iamVjdHMsIGFuZCBjYWxscyBhcHByb3ByaWF0ZSBmdW5jdGlvbnMgb24gc3VjY2VzcyBvciBmYWlsdXJlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gc3BsYXQgc2NlbmUgdG8gYmUgbG9hZGVkXHJcbiAgICogQHBhcmFtIHtTY2VuZUZvcm1hdH0gZm9ybWF0IEZvcm1hdCBvZiB0aGUgc3BsYXQgc2NlbmUgZmlsZVxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSlcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBidWlsZEZ1bmMgRnVuY3Rpb24gdG8gcmVidWlsZCB0aGUgdmlld2VyJ3Mgc3BsYXQgbWVzaCBhZnRlciBhIG5ldyBzcGxhdCBidWZmZXIgc2VjdGlvbiBpcyBkb3dubG9hZGVkXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25Eb3dubG9hZFByb2dyZXNzIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhcyBmaWxlIGRhdGEgYXJlIHJlY2VpdmVkXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25Eb3dubG9hZEV4Y2VwdGlvbiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBleGNlcHRpb24gb2NjdXJzIGF0IGFueSBwb2ludCBkdXJpbmcgdGhlIGZ1bGwgZG93bmxvYWRcclxuICAgKiBAcGFyYW0ge29iamVjdH0gaGVhZGVycyBPcHRpb25hbCBIVFRQIGhlYWRlcnMgdG8gcGFzcyB0byB1c2UgZm9yIGRvd25sb2FkaW5nIHNwbGF0IHNjZW5lXHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKi9cclxuICBkb3dubG9hZEFuZEJ1aWxkU2luZ2xlU3BsYXRTY2VuZVByb2dyZXNzaXZlTG9hZChcclxuICAgIHBhdGgsXHJcbiAgICBmb3JtYXQsXHJcbiAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgIGJ1aWxkRnVuYyxcclxuICAgIG9uRG93bmxvYWRQcm9ncmVzcyxcclxuICAgIG9uRG93bmxvYWRFeGNlcHRpb24sXHJcbiAgICBoZWFkZXJzXHJcbiAgKSB7XHJcbiAgICBsZXQgcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRDb3VudCA9IDA7XHJcbiAgICBsZXQgcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRpbmcgPSBmYWxzZTtcclxuICAgIGNvbnN0IHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHMgPSBbXTtcclxuXHJcbiAgICBjb25zdCBjaGVja0FuZEJ1aWxkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbnMgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAhcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRpbmcgJiZcclxuICAgICAgICAhdGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKVxyXG4gICAgICApIHtcclxuICAgICAgICBwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZGluZyA9IHRydWU7XHJcbiAgICAgICAgY29uc3QgcXVldWVkQnVpbGQgPSBxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzLnNoaWZ0KCk7XHJcbiAgICAgICAgYnVpbGRGdW5jKFxyXG4gICAgICAgICAgcXVldWVkQnVpbGQuc3BsYXRCdWZmZXIsXHJcbiAgICAgICAgICBxdWV1ZWRCdWlsZC5maXJzdEJ1aWxkLFxyXG4gICAgICAgICAgcXVldWVkQnVpbGQuZmluYWxCdWlsZFxyXG4gICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKHF1ZXVlZEJ1aWxkLmZpcnN0QnVpbGQpIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkRmlyc3RTZWN0aW9uQnVpbGRQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocXVldWVkQnVpbGQuZmluYWxCdWlsZCkge1xyXG4gICAgICAgICAgICBzcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAocXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IGNoZWNrQW5kQnVpbGRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9ucygpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcyA9IChzcGxhdEJ1ZmZlciwgZmluYWxCdWlsZCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBmaW5hbEJ1aWxkIHx8XHJcbiAgICAgICAgICBxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzLmxlbmd0aCA9PT0gMCB8fFxyXG4gICAgICAgICAgc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpID5cclxuICAgICAgICAgICAgcXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkc1swXS5zcGxhdEJ1ZmZlci5nZXRTcGxhdENvdW50KClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHMucHVzaCh7XHJcbiAgICAgICAgICAgIHNwbGF0QnVmZmVyLFxyXG4gICAgICAgICAgICBmaXJzdEJ1aWxkOiBwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZENvdW50ID09PSAwLFxyXG4gICAgICAgICAgICBmaW5hbEJ1aWxkXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkQ291bnQrKztcclxuICAgICAgICAgIGNoZWNrQW5kQnVpbGRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlID0gdGhpcy5kb3dubG9hZFNwbGF0U2NlbmVUb1NwbGF0QnVmZmVyKFxyXG4gICAgICBwYXRoLFxyXG4gICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgICAgb25Eb3dubG9hZFByb2dyZXNzLFxyXG4gICAgICB0cnVlLFxyXG4gICAgICBvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcyxcclxuICAgICAgZm9ybWF0LFxyXG4gICAgICBoZWFkZXJzXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEdldCBhYm9ydCBoYW5kbGVyIGZyb20gZG93bmxvYWQgcHJvbWlzZVxyXG4gICAgY29uc3QgYWJvcnRIYW5kbGVyID0gc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZS5hYm9ydCBcclxuICAgICAgPyBzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlLmFib3J0LmJpbmQoc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZSkgXHJcbiAgICAgIDogdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0IHByb2dyZXNzaXZlTG9hZEZpcnN0U2VjdGlvbkJ1aWxkUHJvbWlzZSA9XHJcbiAgICAgIGFib3J0YWJsZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cyhhYm9ydEhhbmRsZXIpO1xyXG5cclxuICAgIGNvbnN0IHNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSA9XHJcbiAgICAgIGFib3J0YWJsZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cyhhYm9ydEhhbmRsZXIpO1xyXG5cclxuICAgIHRoaXMuYWRkU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKTtcclxuICAgIHRoaXMuc2V0U3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKFxyXG4gICAgICBzcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UucHJvbWlzZVxyXG4gICAgKTtcclxuXHJcbiAgICBzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICB0aGlzLnJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZFByb21pc2Uoc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignVmlld2VyOjphZGRTcGxhdFNjZW5lIGFjdHVhbCBlcnJvcjonLCBlKTtcclxuICAgICAgICB0aGlzLmNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID1cclxuICAgICAgICAgIChlIGluc3RhbmNlb2YgQWJvcnRlZFByb21pc2VFcnJvciB8fCBlLm5hbWUgPT09ICdBYm9ydEVycm9yJylcclxuICAgICAgICAgICAgPyBlXHJcbiAgICAgICAgICAgIDogbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYFZpZXdlcjo6YWRkU3BsYXRTY2VuZSAtPiBDb3VsZCBub3QgbG9hZCBvbmUgb3IgbW9yZSBzY2VuZXM6ICR7ZS5tZXNzYWdlfWBcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgIHByb2dyZXNzaXZlTG9hZEZpcnN0U2VjdGlvbkJ1aWxkUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIGlmIChvbkRvd25sb2FkRXhjZXB0aW9uKSBvbkRvd25sb2FkRXhjZXB0aW9uKGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHByb2dyZXNzaXZlTG9hZEZpcnN0U2VjdGlvbkJ1aWxkUHJvbWlzZS5wcm9taXNlXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbXVsdGlwbGUgc3BsYXQgc2NlbmVzIHRvIHRoZSB2aWV3ZXIgYW5kIGRpc3BsYXkgYW55IGxvYWRpbmcgVUkgaWYgYXBwcm9wcmlhdGUuXHJcbiAgICogQHBhcmFtIHtBcnJheTxvYmplY3Q+fSBzY2VuZU9wdGlvbnMgQXJyYXkgb2YgcGVyLXNjZW5lIG9wdGlvbnM6IHtcclxuICAgKlxyXG4gICAqICAgICAgICAgcGF0aDogUGF0aCB0byBzcGxhdCBzY2VuZSB0byBiZSBsb2FkZWRcclxuICAgKlxyXG4gICAqICAgICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQ6IElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWRcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpLCBkZWZhdWx0cyB0byAxXHJcbiAgICpcclxuICAgKiAgICAgICAgIHBvc2l0aW9uIChBcnJheTxudW1iZXI+KTogICBQb3NpdGlvbiBvZiB0aGUgc2NlbmUsIGFjdHMgYXMgYW4gb2Zmc2V0IGZyb20gaXRzIGRlZmF1bHQgcG9zaXRpb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwXVxyXG4gICAqXHJcbiAgICogICAgICAgICByb3RhdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUm90YXRpb24gb2YgdGhlIHNjZW5lIHJlcHJlc2VudGVkIGFzIGEgcXVhdGVybmlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDAsIDFdXHJcbiAgICpcclxuICAgKiAgICAgICAgIHNjYWxlIChBcnJheTxudW1iZXI+KTogICAgICBTY2VuZSdzIHNjYWxlLCBkZWZhdWx0cyB0byBbMSwgMSwgMV1cclxuICAgKlxyXG4gICAqICAgICAgICAgaGVhZGVyczogICAgICAgICAgICAgICAgICAgIE9wdGlvbmFsIEhUVFAgaGVhZGVycyB0byBiZSBzZW50IGFsb25nIHdpdGggc3BsYXQgcmVxdWVzdHNcclxuICAgKlxyXG4gICAqICAgICAgICAgZm9ybWF0IChTY2VuZUZvcm1hdCkgICAgICAgIE9wdGlvbmFsLCB0aGUgZm9ybWF0IG9mIHRoZSBzY2VuZSBkYXRhICgucGx5LCAua3NwbGF0LCAuc3BsYXQpLiBJZiBub3QgcHJlc2VudCwgdGhlXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSBleHRlbnNpb24gaW4gJ3BhdGgnIHdpbGwgYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGZvcm1hdCAoaWYgaXQgaXMgcHJlc2VudClcclxuICAgKiB9XHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzaG93TG9hZGluZ1VJIERpc3BsYXkgYSBsb2FkaW5nIHNwaW5uZXIgd2hpbGUgdGhlIHNjZW5lIGlzIGxvYWRpbmcsIGRlZmF1bHRzIHRvIHRydWVcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblByb2dyZXNzIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhcyBmaWxlIGRhdGEgYXJlIHJlY2VpdmVkXHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKi9cclxuICBhZGRTcGxhdFNjZW5lcyhzY2VuZU9wdGlvbnMsIHNob3dMb2FkaW5nVUkgPSB0cnVlLCBvblByb2dyZXNzID0gdW5kZWZpbmVkKSB7XHJcbiAgICBpZiAodGhpcy5pc0xvYWRpbmdPclVubG9hZGluZygpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnQ2Fubm90IGFkZCBzcGxhdCBzY2VuZSB3aGlsZSBhbm90aGVyIGxvYWQgb3IgdW5sb2FkIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuJ1xyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYWRkIHNwbGF0IHNjZW5lIGFmdGVyIGRpc3Bvc2UoKSBpcyBjYWxsZWQuJylcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmaWxlQ291bnQgPSBzY2VuZU9wdGlvbnMubGVuZ3RoO1xyXG4gICAgY29uc3QgcGVyY2VudENvbXBsZXRlID0gW107XHJcblxyXG4gICAgbGV0IGxvYWRpbmdVSVRhc2tJZDtcclxuICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlQWxsVGFza3MoKTtcclxuICAgICAgbG9hZGluZ1VJVGFza0lkID0gdGhpcy5sb2FkaW5nU3Bpbm5lci5hZGRUYXNrKCdEb3dubG9hZGluZy4uLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9uTG9hZFByb2dyZXNzID0gKGZpbGVJbmRleCwgcGVyY2VudCwgcGVyY2VudExhYmVsLCBsb2FkZXJTdGF0dXMpID0+IHtcclxuICAgICAgcGVyY2VudENvbXBsZXRlW2ZpbGVJbmRleF0gPSBwZXJjZW50O1xyXG4gICAgICBsZXQgdG90YWxQZXJjZW50ID0gMDtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlQ291bnQ7IGkrKylcclxuICAgICAgICB0b3RhbFBlcmNlbnQgKz0gcGVyY2VudENvbXBsZXRlW2ldIHx8IDA7XHJcbiAgICAgIHRvdGFsUGVyY2VudCA9IHRvdGFsUGVyY2VudCAvIGZpbGVDb3VudDtcclxuICAgICAgcGVyY2VudExhYmVsID0gYCR7dG90YWxQZXJjZW50LnRvRml4ZWQoMil9JWA7XHJcbiAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgICAgaWYgKGxvYWRlclN0YXR1cyA9PT0gTG9hZGVyU3RhdHVzLkRvd25sb2FkaW5nKSB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldE1lc3NhZ2VGb3JUYXNrKFxyXG4gICAgICAgICAgICBsb2FkaW5nVUlUYXNrSWQsXHJcbiAgICAgICAgICAgIHRvdGFsUGVyY2VudCA9PSAxMDBcclxuICAgICAgICAgICAgICA/IGBEb3dubG9hZCBjb21wbGV0ZSFgXHJcbiAgICAgICAgICAgICAgOiBgRG93bmxvYWRpbmc6ICR7cGVyY2VudExhYmVsfWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChvblByb2dyZXNzKSBvblByb2dyZXNzKHRvdGFsUGVyY2VudCwgcGVyY2VudExhYmVsLCBsb2FkZXJTdGF0dXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgICBjb25zdCBzaWduYWwgPSBhYm9ydENvbnRyb2xsZXIuc2lnbmFsO1xyXG4gICAgdGhpcy5hZGRTcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVyKGFib3J0Q29udHJvbGxlcik7XHJcblxyXG4gICAgY29uc3QgZG93bmxvYWRQcm9taXNlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzY2VuZU9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHNjZW5lT3B0aW9uc1tpXTtcclxuICAgICAgY29uc3QgZm9ybWF0ID1cclxuICAgICAgICBvcHRpb25zLmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuZm9ybWF0ICE9PSBudWxsXHJcbiAgICAgICAgICA/IG9wdGlvbnMuZm9ybWF0XHJcbiAgICAgICAgICA6IHNjZW5lRm9ybWF0RnJvbVBhdGgob3B0aW9ucy5wYXRoKTtcclxuICAgICAgY29uc3QgZG93bmxvYWRQcm9taXNlID0gdGhpcy5kb3dubG9hZFNwbGF0U2NlbmVUb1NwbGF0QnVmZmVyKFxyXG4gICAgICAgIG9wdGlvbnMucGF0aCxcclxuICAgICAgICBvcHRpb25zLnNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgICAgIG9uTG9hZFByb2dyZXNzLmJpbmQodGhpcywgaSksXHJcbiAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgIGZvcm1hdCxcclxuICAgICAgICBvcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgICAgc2lnbmFsXHJcbiAgICAgICk7XHJcbiAgICAgIGRvd25sb2FkUHJvbWlzZXMucHVzaChkb3dubG9hZFByb21pc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRvd25sb2FkQW5kQnVpbGRQcm9taXNlID0gUHJvbWlzZS5hbGwoZG93bmxvYWRQcm9taXNlcylcclxuICAgICAgLnRoZW4oKHNwbGF0QnVmZmVycykgPT4ge1xyXG4gICAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZVRhc2sobG9hZGluZ1VJVGFza0lkKTtcclxuICAgICAgICBpZiAob25Qcm9ncmVzcykgb25Qcm9ncmVzcygwLCAnMCUnLCBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkU3BsYXRCdWZmZXJzKFxyXG4gICAgICAgICAgc3BsYXRCdWZmZXJzLFxyXG4gICAgICAgICAgc2NlbmVPcHRpb25zLFxyXG4gICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgIHNob3dMb2FkaW5nVUksXHJcbiAgICAgICAgICBzaG93TG9hZGluZ1VJLFxyXG4gICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBpZiAob25Qcm9ncmVzcykgb25Qcm9ncmVzcygxMDAsICcxMDAlJywgTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcpO1xyXG4gICAgICAgICAgdGhpcy5jbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICBpZiAoc2hvd0xvYWRpbmdVSSkgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVUYXNrKGxvYWRpbmdVSVRhc2tJZCk7XHJcbiAgICAgICAgdGhpcy5jbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID1cclxuICAgICAgICAgIGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InXHJcbiAgICAgICAgICAgID8gZVxyXG4gICAgICAgICAgICA6IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBWaWV3ZXI6OmFkZFNwbGF0U2NlbmVzIC0+IENvdWxkIG5vdCBsb2FkIG9uZSBvciBtb3JlIHNwbGF0IHNjZW5lcy5gXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcihhYm9ydENvbnRyb2xsZXIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLnNldFNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZShkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSk7XHJcbiAgICByZXR1cm4gZG93bmxvYWRBbmRCdWlsZFByb21pc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvd25sb2FkIGEgc3BsYXQgc2NlbmUgYW5kIGNvbnZlcnQgdG8gU3BsYXRCdWZmZXIgaW5zdGFuY2UuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBzcGxhdCBzY2VuZSB0byBiZSBsb2FkZWRcclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQgSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpLCBkZWZhdWx0cyB0byAxXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblByb2dyZXNzIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhcyBmaWxlIGRhdGEgYXJlIHJlY2VpdmVkXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBwcm9ncmVzc2l2ZUJ1aWxkIENvbnN0cnVjdCBmaWxlIHNlY3Rpb25zIGludG8gc3BsYXQgYnVmZmVycyBhcyB0aGV5IGFyZSBkb3dubG9hZGVkXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TZWN0aW9uQnVpbHQgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gbmV3IHNlY3Rpb24gaXMgYWRkZWQgdG8gdGhlIGZpbGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0IEZpbGUgZm9ybWF0IG9mIHRoZSBzY2VuZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoZWFkZXJzIE9wdGlvbmFsIEhUVFAgaGVhZGVycyB0byBwYXNzIHRvIHVzZSBmb3IgZG93bmxvYWRpbmcgc3BsYXQgc2NlbmVcclxuICAgKiBAcGFyYW0ge0Fib3J0U2lnbmFsfSBzaWduYWwgT3B0aW9uYWwgQWJvcnRTaWduYWwgdG8gY2FuY2VsIHRoZSBkb3dubG9hZFxyXG4gICAqIEByZXR1cm4ge0Fib3J0YWJsZVByb21pc2V9XHJcbiAgICovXHJcbiAgZG93bmxvYWRTcGxhdFNjZW5lVG9TcGxhdEJ1ZmZlcihcclxuICAgIHBhdGgsXHJcbiAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCA9IDEsXHJcbiAgICBvblByb2dyZXNzID0gdW5kZWZpbmVkLFxyXG4gICAgcHJvZ3Jlc3NpdmVCdWlsZCA9IGZhbHNlLFxyXG4gICAgb25TZWN0aW9uQnVpbHQgPSB1bmRlZmluZWQsXHJcbiAgICBmb3JtYXQsXHJcbiAgICBoZWFkZXJzXHJcbiAgKSB7XHJcbiAgICBjb25zdCBvcHRpbWl6ZVNwbGF0RGF0YSA9IHByb2dyZXNzaXZlQnVpbGQgPyBmYWxzZSA6IHRoaXMub3B0aW1pemVTcGxhdERhdGE7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoZm9ybWF0ID09PSBTY2VuZUZvcm1hdC5QbHkpIHtcclxuICAgICAgICByZXR1cm4gUGx5TG9hZGVyLmxvYWRGcm9tVVJMKFxyXG4gICAgICAgICAgcGF0aCxcclxuICAgICAgICAgIG9uUHJvZ3Jlc3MsXHJcbiAgICAgICAgICBwcm9ncmVzc2l2ZUJ1aWxkLFxyXG4gICAgICAgICAgb25TZWN0aW9uQnVpbHQsXHJcbiAgICAgICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgICAgICAgIHRoaXMuaW5NZW1vcnlDb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgb3B0aW1pemVTcGxhdERhdGEsXHJcbiAgICAgICAgICB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSxcclxuICAgICAgICAgIGhlYWRlcnNcclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBEaXJlY3RMb2FkRXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAnRmlsZSB0eXBlIG9yIHNlcnZlciBkb2VzIG5vdCBzdXBwb3J0IHByb2dyZXNzaXZlIGxvYWRpbmcuJ1xyXG4gICAgICAgIClcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgIGBWaWV3ZXI6OmRvd25sb2FkU3BsYXRTY2VuZVRvU3BsYXRCdWZmZXIgLT4gRmlsZSBmb3JtYXQgbm90IHN1cHBvcnRlZDogJHtwYXRofWBcclxuICAgIClcclxuICB9XHJcblxyXG4gIHN0YXRpYyBpc1Byb2dyZXNzaXZlbHlMb2FkYWJsZShmb3JtYXQpIHtcclxuICAgIHJldHVybiBmb3JtYXQgPT09IFNjZW5lRm9ybWF0LlBseVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIG9uZSBvciBtb3JlIGluc3RhbmNlcyBvZiBTcGxhdEJ1ZmZlciB0byB0aGUgU3BsYXRNZXNoIGluc3RhbmNlIG1hbmFnZWQgYnkgdGhlIHZpZXdlciBhbmQgc2V0IHVwIHRoZSBzb3J0aW5nIHdlYiB3b3JrZXIuXHJcbiAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRlcm1pbmF0ZSB0aGUgZXhpc3Rpbmcgc29ydCB3b3JrZXIgKGlmIHRoZXJlIGlzIG9uZSkuXHJcbiAgICovXHJcbiAgYWRkU3BsYXRCdWZmZXJzID0gKFxyXG4gICAgc3BsYXRCdWZmZXJzLFxyXG4gICAgc3BsYXRCdWZmZXJPcHRpb25zID0gW10sXHJcbiAgICBmaW5hbEJ1aWxkID0gdHJ1ZSxcclxuICAgIHNob3dMb2FkaW5nVUkgPSB0cnVlLFxyXG4gICAgc2hvd0xvYWRpbmdVSUZvclNwbGF0VHJlZUJ1aWxkID0gdHJ1ZSxcclxuICAgIHJlcGxhY2VFeGlzdGluZyA9IGZhbHNlLFxyXG4gICAgZW5hYmxlUmVuZGVyQmVmb3JlRmlyc3RTb3J0ID0gZmFsc2UsXHJcbiAgICBwcmVzZXJ2ZVZpc2libGVSZWdpb24gPSB0cnVlXHJcbiAgKSA9PiB7XHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXHJcblxyXG4gICAgbGV0IHNwbGF0UHJvY2Vzc2luZ1Rhc2tJZCA9IG51bGw7XHJcbiAgICBjb25zdCByZW1vdmVTcGxhdFByb2Nlc3NpbmdUYXNrID0gKCkgPT4ge1xyXG4gICAgICBpZiAoc3BsYXRQcm9jZXNzaW5nVGFza0lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVUYXNrKHNwbGF0UHJvY2Vzc2luZ1Rhc2tJZCk7XHJcbiAgICAgICAgc3BsYXRQcm9jZXNzaW5nVGFza0lkID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSBmYWxzZTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICAgIHNwbGF0UHJvY2Vzc2luZ1Rhc2tJZCA9IHRoaXMubG9hZGluZ1NwaW5uZXIuYWRkVGFzayhcclxuICAgICAgICAgICdQcm9jZXNzaW5nIHNwbGF0cy4uLidcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkge1xyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBidWlsZFJlc3VsdHMgPSB0aGlzLmFkZFNwbGF0QnVmZmVyc1RvTWVzaChcclxuICAgICAgICAgICAgc3BsYXRCdWZmZXJzLFxyXG4gICAgICAgICAgICBzcGxhdEJ1ZmZlck9wdGlvbnMsXHJcbiAgICAgICAgICAgIGZpbmFsQnVpbGQsXHJcbiAgICAgICAgICAgIHNob3dMb2FkaW5nVUlGb3JTcGxhdFRyZWVCdWlsZCxcclxuICAgICAgICAgICAgcmVwbGFjZUV4aXN0aW5nLFxyXG4gICAgICAgICAgICBwcmVzZXJ2ZVZpc2libGVSZWdpb25cclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IHRoaXMuc3BsYXRNZXNoLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyICYmXHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlci5tYXhTcGxhdENvdW50ICE9PSBtYXhTcGxhdENvdW50XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZVNvcnRXb3JrZXIoKTtcclxuICAgICAgICAgIC8vIElmIHdlIGFyZW4ndCBjYWxjdWxhdGluZyB0aGUgc3BsYXQgZGlzdGFuY2VzIGZyb20gdGhlIGNlbnRlciBvbiB0aGUgR1BVLCB0aGUgc29ydGluZyB3b3JrZXIgbmVlZHNcclxuICAgICAgICAgIC8vIHNwbGF0IGNlbnRlcnMgYW5kIHRyYW5zZm9ybSBpbmRleGVzIHNvIHRoYXQgaXQgY2FuIGNhbGN1bGF0ZSB0aG9zZSBkaXN0YW5jZSB2YWx1ZXMuXHJcbiAgICAgICAgICBpZiAoIXRoaXMuZ3B1QWNjZWxlcmF0ZWRTb3J0KSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJlU29ydE1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGNlbnRlcnM6IGJ1aWxkUmVzdWx0cy5jZW50ZXJzLmJ1ZmZlcixcclxuICAgICAgICAgICAgICBzY2VuZUluZGV4ZXM6IGJ1aWxkUmVzdWx0cy5zY2VuZUluZGV4ZXMuYnVmZmVyLFxyXG4gICAgICAgICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICBmcm9tOiBidWlsZFJlc3VsdHMuZnJvbSxcclxuICAgICAgICAgICAgICAgIHRvOiBidWlsZFJlc3VsdHMudG8sXHJcbiAgICAgICAgICAgICAgICBjb3VudDogYnVpbGRSZXN1bHRzLmNvdW50XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IHNvcnRXb3JrZXJTZXR1cFByb21pc2UgPVxyXG4gICAgICAgICAgICAhdGhpcy5zb3J0V29ya2VyICYmIG1heFNwbGF0Q291bnQgPiAwXHJcbiAgICAgICAgICAgICAgPyB0aGlzLnNldHVwU29ydFdvcmtlcih0aGlzLnNwbGF0TWVzaClcclxuICAgICAgICAgICAgICA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgc29ydFdvcmtlclNldHVwUHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVyblxyXG4gICAgICAgICAgICB0aGlzLnJ1blNwbGF0U29ydCh0cnVlLCB0cnVlKS50aGVuKChzb3J0UnVubmluZykgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5zb3J0V29ya2VyIHx8ICFzb3J0UnVubmluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZVNwbGF0UHJvY2Vzc2luZ1Rhc2soKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuYWJsZVJlbmRlckJlZm9yZUZpcnN0U29ydCkge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5ydW5BZnRlck5leHRTb3J0LnB1c2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ydW5BZnRlck5leHRTb3J0LnB1c2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICByZW1vdmVTcGxhdFByb2Nlc3NpbmdUYXNrKCk7XHJcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHRydWUpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBvbmUgb3IgbW9yZSBpbnN0YW5jZXMgb2YgU3BsYXRCdWZmZXIgdG8gdGhlIFNwbGF0TWVzaCBpbnN0YW5jZSBtYW5hZ2VkIGJ5IHRoZSB2aWV3ZXIuIEJ5IGRlZmF1bHQsIHRoaXMgZnVuY3Rpb24gaXMgYWRkaXRpdmU7XHJcbiAgICogYWxsIHNwbGF0IGJ1ZmZlcnMgY29udGFpbmVkIGJ5IHRoZSB2aWV3ZXIncyBzcGxhdCBtZXNoIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBwcmVzZXJ2ZWQuIFRoaXMgYmVoYXZpb3IgY2FuIGJlXHJcbiAgICogY2hhbmdlZCBieSBwYXNzaW5nICd0cnVlJyBmb3IgJ3JlcGxhY2VFeGlzdGluZycuXHJcbiAgICogQHBhcmFtIHtBcnJheTxTcGxhdEJ1ZmZlcj59IHNwbGF0QnVmZmVycyBTcGxhdEJ1ZmZlciBpbnN0YW5jZXNcclxuICAgKiBAcGFyYW0ge0FycmF5PG9iamVjdD59IHNwbGF0QnVmZmVyT3B0aW9ucyBBcnJheSBvZiBvcHRpb25zIG9iamVjdHM6IHtcclxuICAgKlxyXG4gICAqICAgICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQ6IElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWRcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpLCBkZWZhdWx0cyB0byAxXHJcbiAgICpcclxuICAgKiAgICAgICAgIHBvc2l0aW9uIChBcnJheTxudW1iZXI+KTogICBQb3NpdGlvbiBvZiB0aGUgc2NlbmUsIGFjdHMgYXMgYW4gb2Zmc2V0IGZyb20gaXRzIGRlZmF1bHQgcG9zaXRpb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwXVxyXG4gICAqXHJcbiAgICogICAgICAgICByb3RhdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUm90YXRpb24gb2YgdGhlIHNjZW5lIHJlcHJlc2VudGVkIGFzIGEgcXVhdGVybmlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDAsIDFdXHJcbiAgICpcclxuICAgKiAgICAgICAgIHNjYWxlIChBcnJheTxudW1iZXI+KTogICAgICBTY2VuZSdzIHNjYWxlLCBkZWZhdWx0cyB0byBbMSwgMSwgMV1cclxuICAgKiB9XHJcbiAgICogQHBhcmFtIHtib29sZWFufSBmaW5hbEJ1aWxkIFdpbGwgdGhlIHNwbGF0IG1lc2ggYmUgaW4gaXRzIGZpbmFsIHN0YXRlIGFmdGVyIHRoaXMgYnVpbGQ/XHJcbiAgICogQHBhcmFtIHtib29sZWFufSBzaG93TG9hZGluZ1VJRm9yU3BsYXRUcmVlQnVpbGQgV2hldGhlciBvciBub3QgdG8gc2hvdyB0aGUgbG9hZGluZyBzcGlubmVyIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgdGhlIHNwbGF0IHRyZWUuXHJcbiAgICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBpbmZvIGFib3V0IHRoZSBzcGxhdHMgdGhhdCBhcmUgdXBkYXRlZFxyXG4gICAqL1xyXG4gIGFkZFNwbGF0QnVmZmVyc1RvTWVzaCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgc3BsYXRPcHRpbWl6aW5nVGFza0lkO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoXHJcbiAgICAgIHNwbGF0QnVmZmVycyxcclxuICAgICAgc3BsYXRCdWZmZXJPcHRpb25zLFxyXG4gICAgICBmaW5hbEJ1aWxkID0gdHJ1ZSxcclxuICAgICAgc2hvd0xvYWRpbmdVSUZvclNwbGF0VHJlZUJ1aWxkID0gZmFsc2UsXHJcbiAgICAgIHJlcGxhY2VFeGlzdGluZyA9IGZhbHNlLFxyXG4gICAgICBwcmVzZXJ2ZVZpc2libGVSZWdpb24gPSB0cnVlXHJcbiAgICApIHtcclxuICAgICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVyblxyXG4gICAgICBsZXQgYWxsU3BsYXRCdWZmZXJzID0gW107XHJcbiAgICAgIGxldCBhbGxTcGxhdEJ1ZmZlck9wdGlvbnMgPSBbXTtcclxuICAgICAgaWYgKCFyZXBsYWNlRXhpc3RpbmcpIHtcclxuICAgICAgICBhbGxTcGxhdEJ1ZmZlcnMgPVxyXG4gICAgICAgICAgdGhpcy5zcGxhdE1lc2guc2NlbmVzLm1hcCgoc2NlbmUpID0+IHNjZW5lLnNwbGF0QnVmZmVyKSB8fCBbXTtcclxuICAgICAgICBhbGxTcGxhdEJ1ZmZlck9wdGlvbnMgPSB0aGlzLnNwbGF0TWVzaC5zY2VuZU9wdGlvbnNcclxuICAgICAgICAgID8gdGhpcy5zcGxhdE1lc2guc2NlbmVPcHRpb25zLm1hcCgoc2NlbmVPcHRpb25zKSA9PiBzY2VuZU9wdGlvbnMpXHJcbiAgICAgICAgICA6IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIGFsbFNwbGF0QnVmZmVycy5wdXNoKC4uLnNwbGF0QnVmZmVycyk7XHJcbiAgICAgIGFsbFNwbGF0QnVmZmVyT3B0aW9ucy5wdXNoKC4uLnNwbGF0QnVmZmVyT3B0aW9ucyk7XHJcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB0aGlzLnNwbGF0TWVzaC5zZXRSZW5kZXJlcih0aGlzLnJlbmRlcmVyKTtcclxuICAgICAgY29uc3Qgb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkID0gKGZpbmlzaGVkKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVyblxyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgc2hvd0xvYWRpbmdVSUZvclNwbGF0VHJlZUJ1aWxkICYmXHJcbiAgICAgICAgICBzcGxhdENvdW50ID49IE1JTl9TUExBVF9DT1VOVF9UT19TSE9XX1NQTEFUX1RSRUVfTE9BRElOR19TUElOTkVSXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAoIWZpbmlzaGVkICYmICFzcGxhdE9wdGltaXppbmdUYXNrSWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRNaW5pbWl6ZWQodHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHNwbGF0T3B0aW1pemluZ1Rhc2tJZCA9IHRoaXMubG9hZGluZ1NwaW5uZXIuYWRkVGFzayhcclxuICAgICAgICAgICAgICAnT3B0aW1pemluZyBkYXRhIHN0cnVjdHVyZXMuLi4nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBvblNwbGF0VHJlZVJlYWR5ID0gKGZpbmlzaGVkKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVyblxyXG4gICAgICAgIGlmIChmaW5pc2hlZCAmJiBzcGxhdE9wdGltaXppbmdUYXNrSWQpIHtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlVGFzayhzcGxhdE9wdGltaXppbmdUYXNrSWQpO1xyXG4gICAgICAgICAgc3BsYXRPcHRpbWl6aW5nVGFza0lkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IGJ1aWxkUmVzdWx0cyA9IHRoaXMuc3BsYXRNZXNoLmJ1aWxkKFxyXG4gICAgICAgIGFsbFNwbGF0QnVmZmVycyxcclxuICAgICAgICBhbGxTcGxhdEJ1ZmZlck9wdGlvbnMsXHJcbiAgICAgICAgdHJ1ZSxcclxuICAgICAgICBmaW5hbEJ1aWxkLFxyXG4gICAgICAgIG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCxcclxuICAgICAgICBvblNwbGF0VHJlZVJlYWR5LFxyXG4gICAgICAgIHByZXNlcnZlVmlzaWJsZVJlZ2lvblxyXG4gICAgICApO1xyXG4gICAgICBpZiAoZmluYWxCdWlsZCAmJiB0aGlzLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEpXHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2guZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSgpO1xyXG4gICAgICByZXR1cm4gYnVpbGRSZXN1bHRzXHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdXAgdGhlIHNwbGF0IHNvcnRpbmcgd2ViIHdvcmtlci5cclxuICAgKiBAcGFyYW0ge1NwbGF0TWVzaH0gc3BsYXRNZXNoIFNwbGF0TWVzaCBpbnN0YW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBzcGxhdHMgdG8gYmUgc29ydGVkXHJcbiAgICogQHJldHVybiB7UHJvbWlzZX1cclxuICAgKi9cclxuICBhc3luYyBzZXR1cFNvcnRXb3JrZXIoc3BsYXRNZXNoKSB7XHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuXHJcbiAgICBjb25zdCBEaXN0YW5jZXNBcnJheVR5cGUgPSB0aGlzLmludGVnZXJCYXNlZFNvcnRcclxuICAgICAgPyBJbnQzMkFycmF5XHJcbiAgICAgIDogRmxvYXQzMkFycmF5O1xyXG4gICAgY29uc3Qgc3BsYXRDb3VudCA9IHNwbGF0TWVzaC5nZXRTcGxhdENvdW50KCk7XHJcbiAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gc3BsYXRNZXNoLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgIHRoaXMuc29ydFdvcmtlciA9IGF3YWl0IGNyZWF0ZVNvcnRXb3JrZXIoXHJcbiAgICAgIG1heFNwbGF0Q291bnQsXHJcbiAgICAgIHRoaXMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycyxcclxuICAgICAgdGhpcy5lbmFibGVTSU1ESW5Tb3J0LFxyXG4gICAgICB0aGlzLmludGVnZXJCYXNlZFNvcnQsXHJcbiAgICAgIHRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlLFxyXG4gICAgICB0aGlzLnNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIHRoaXMuc29ydFdvcmtlci5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLmRhdGEuc29ydERvbmUpIHtcclxuICAgICAgICAgIHRoaXMuc29ydFJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgIGxldCBudW1iZXJzQXJyYXkgPSBBcnJheS5mcm9tKFxyXG4gICAgICAgICAgICB7IGxlbmd0aDogdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgfSxcclxuICAgICAgICAgICAgKF8sIGkpID0+IGlcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBpZiAodGhpcy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVJlbmRlckluZGV4ZXMoXHJcbiAgICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyU29ydGVkSW5kZXhlcyxcclxuICAgICAgICAgICAgICBlLmRhdGEuc3BsYXRSZW5kZXJDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgc29ydGVkSW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheShcclxuICAgICAgICAgICAgICBlLmRhdGEuc29ydGVkSW5kZXhlcy5idWZmZXIsXHJcbiAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICBlLmRhdGEuc3BsYXRSZW5kZXJDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVSZW5kZXJJbmRleGVzKFxyXG4gICAgICAgICAgICAgIHNvcnRlZEluZGV4ZXMsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnNwbGF0UmVuZGVyQ291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0aGlzLmxhc3RTcGxhdFNvcnRDb3VudCA9IHRoaXMuc3BsYXRTb3J0Q291bnQ7XHJcblxyXG4gICAgICAgICAgdGhpcy5sYXN0U29ydFRpbWUgPSBlLmRhdGEuc29ydFRpbWU7XHJcbiAgICAgICAgICB0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIoKTtcclxuICAgICAgICAgIHRoaXMuc29ydFByb21pc2VSZXNvbHZlciA9IG51bGw7XHJcbiAgICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgICAgICBpZiAodGhpcy5ydW5BZnRlck5leHRTb3J0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5ydW5BZnRlck5leHRTb3J0LmZvckVhY2goKGZ1bmMpID0+IHtcclxuICAgICAgICAgICAgICBmdW5jKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJ1bkFmdGVyTmV4dFNvcnQubGVuZ3RoID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGUuZGF0YS5zb3J0Q2FuY2VsZWQpIHtcclxuICAgICAgICAgIHRoaXMuc29ydFJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuZGF0YS5zb3J0U2V0dXBQaGFzZTFDb21wbGV0ZSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPj0gTG9nTGV2ZWwuSW5mbylcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1NvcnRpbmcgd2ViIHdvcmtlciBXQVNNIHNldHVwIGNvbXBsZXRlLicpO1xyXG4gICAgICAgICAgaWYgKHRoaXMuc2hhcmVkTWVtb3J5Rm9yV29ya2Vycykge1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJTb3J0ZWRJbmRleGVzID0gbmV3IFVpbnQzMkFycmF5KFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5zb3J0ZWRJbmRleGVzQnVmZmVyLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5zb3J0ZWRJbmRleGVzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgIG1heFNwbGF0Q291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydCA9IG5ldyBVaW50MzJBcnJheShcclxuICAgICAgICAgICAgICBlLmRhdGEuaW5kZXhlc1RvU29ydEJ1ZmZlcixcclxuICAgICAgICAgICAgICBlLmRhdGEuaW5kZXhlc1RvU29ydE9mZnNldCxcclxuICAgICAgICAgICAgICBtYXhTcGxhdENvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlclByZWNvbXB1dGVkRGlzdGFuY2VzID0gbmV3IERpc3RhbmNlc0FycmF5VHlwZShcclxuICAgICAgICAgICAgICBlLmRhdGEucHJlY29tcHV0ZWREaXN0YW5jZXNCdWZmZXIsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgIG1heFNwbGF0Q291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyVHJhbnNmb3JtcyA9IG5ldyBGbG9hdDMyQXJyYXkoXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnRyYW5zZm9ybXNCdWZmZXIsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnRyYW5zZm9ybXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgQ29uc3RhbnRzLk1heFNjZW5lcyAqIDE2XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0ID0gbmV3IFVpbnQzMkFycmF5KG1heFNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJQcmVjb21wdXRlZERpc3RhbmNlcyA9IG5ldyBEaXN0YW5jZXNBcnJheVR5cGUoXHJcbiAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJUcmFuc2Zvcm1zID0gbmV3IEZsb2F0MzJBcnJheShcclxuICAgICAgICAgICAgICBDb25zdGFudHMuTWF4U2NlbmVzICogMTZcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRDb3VudDsgaSsrKVxyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0W2ldID0gaTtcclxuICAgICAgICAgIHRoaXMuc29ydFdvcmtlci5tYXhTcGxhdENvdW50ID0gbWF4U3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA+PSBMb2dMZXZlbC5JbmZvKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdTb3J0aW5nIHdlYiB3b3JrZXIgcmVhZHkuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0RGF0YVRleHR1cmVzID0gdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXREYXRhVGV4dHVyZXMoKTtcclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSA9IHNwbGF0RGF0YVRleHR1cmVzLmNvdmFyaWFuY2VzLnNpemU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlcnNDb2xvcnNUZXh0dXJlU2l6ZSA9IHNwbGF0RGF0YVRleHR1cmVzLmNlbnRlckNvbG9ycy5zaXplO1xyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcclxuICAgICAgICAgICAgICAnQ292YXJpYW5jZXMgdGV4dHVyZSBzaXplOiAnICtcclxuICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUueCArXHJcbiAgICAgICAgICAgICAgICAnIHggJyArXHJcbiAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlc1RleHR1cmVTaXplLnlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXHJcbiAgICAgICAgICAgICAgJ0NlbnRlcnMvY29sb3JzIHRleHR1cmUgc2l6ZTogJyArXHJcbiAgICAgICAgICAgICAgICBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUueCArXHJcbiAgICAgICAgICAgICAgICAnIHggJyArXHJcbiAgICAgICAgICAgICAgICBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUueVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGlzcG9zZVNvcnRXb3JrZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zb3J0V29ya2VyKSB0aGlzLnNvcnRXb3JrZXIudGVybWluYXRlKCk7XHJcbiAgICB0aGlzLnNvcnRXb3JrZXIgPSBudWxsO1xyXG4gICAgdGhpcy5zb3J0UHJvbWlzZSA9IG51bGw7XHJcbiAgICBpZiAodGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyKSB7XHJcbiAgICAgIHRoaXMuc29ydFByb21pc2VSZXNvbHZlcigpO1xyXG4gICAgICB0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcmVTb3J0TWVzc2FnZXMgPSBbXTtcclxuICAgIHRoaXMuc29ydFJ1bm5pbmcgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVNwbGF0U2NlbmUoaW5kZXhUb1JlbW92ZSwgc2hvd0xvYWRpbmdVSSA9IHRydWUpIHtcclxuICAgIHJldHVybiB0aGlzLnJlbW92ZVNwbGF0U2NlbmVzKFtpbmRleFRvUmVtb3ZlXSwgc2hvd0xvYWRpbmdVSSlcclxuICB9XHJcblxyXG4gIHJlbW92ZVNwbGF0U2NlbmVzKGluZGV4ZXNUb1JlbW92ZSwgc2hvd0xvYWRpbmdVSSA9IHRydWUpIHtcclxuICAgIGlmICh0aGlzLmlzTG9hZGluZ09yVW5sb2FkaW5nKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICdDYW5ub3QgcmVtb3ZlIHNwbGF0IHNjZW5lIHdoaWxlIGFub3RoZXIgbG9hZCBvciB1bmxvYWQgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4nXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCByZW1vdmUgc3BsYXQgc2NlbmUgYWZ0ZXIgZGlzcG9zZSgpIGlzIGNhbGxlZC4nKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBzb3J0UHJvbWlzZTtcclxuXHJcbiAgICB0aGlzLnNwbGF0U2NlbmVSZW1vdmFsUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IHJldm1vdmFsVGFza0lkO1xyXG5cclxuICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZUFsbFRhc2tzKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zaG93KCk7XHJcbiAgICAgICAgcmV2bW92YWxUYXNrSWQgPSB0aGlzLmxvYWRpbmdTcGlubmVyLmFkZFRhc2soJ1JlbW92aW5nIHNwbGF0IHNjZW5lLi4uJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNoZWNrQW5kSGlkZUxvYWRpbmdVSSA9ICgpID0+IHtcclxuICAgICAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5oaWRlKCk7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZVRhc2socmV2bW92YWxUYXNrSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG9uRG9uZSA9IChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNoZWNrQW5kSGlkZUxvYWRpbmdVSSgpO1xyXG4gICAgICAgIHRoaXMuc3BsYXRTY2VuZVJlbW92YWxQcm9taXNlID0gbnVsbDtcclxuICAgICAgICBpZiAoIWVycm9yKSByZXNvbHZlKCk7XHJcbiAgICAgICAgZWxzZSByZWplY3QoZXJyb3IpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgY2hlY2tGb3JFYXJseUV4aXQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHtcclxuICAgICAgICAgIG9uRG9uZSgpO1xyXG4gICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBzb3J0UHJvbWlzZSA9IHRoaXMuc29ydFByb21pc2UgfHwgUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgIHNvcnRQcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGlmIChjaGVja0ZvckVhcmx5RXhpdCgpKSByZXR1cm5cclxuICAgICAgICBjb25zdCBzYXZlZFNwbGF0QnVmZmVycyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNhdmVkU2NlbmVPcHRpb25zID0gW107XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRTY2VuZVRyYW5zZm9ybUNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3BsYXRNZXNoLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IHNob3VsZFJlbW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgZm9yIChsZXQgaW5kZXhUb1JlbW92ZSBvZiBpbmRleGVzVG9SZW1vdmUpIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4VG9SZW1vdmUgPT09IGkpIHtcclxuICAgICAgICAgICAgICBzaG91bGRSZW1vdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICghc2hvdWxkUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5zcGxhdE1lc2guc2NlbmVzW2ldO1xyXG4gICAgICAgICAgICBzYXZlZFNwbGF0QnVmZmVycy5wdXNoKHNjZW5lLnNwbGF0QnVmZmVyKTtcclxuICAgICAgICAgICAgc2F2ZWRTY2VuZU9wdGlvbnMucHVzaCh0aGlzLnNwbGF0TWVzaC5zY2VuZU9wdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICBzYXZlZFNjZW5lVHJhbnNmb3JtQ29tcG9uZW50cy5wdXNoKHtcclxuICAgICAgICAgICAgICBwb3NpdGlvbjogc2NlbmUucG9zaXRpb24uY2xvbmUoKSxcclxuICAgICAgICAgICAgICBxdWF0ZXJuaW9uOiBzY2VuZS5xdWF0ZXJuaW9uLmNsb25lKCksXHJcbiAgICAgICAgICAgICAgc2NhbGU6IHNjZW5lLnNjYWxlLmNsb25lKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlzcG9zZVNvcnRXb3JrZXIoKTtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZVJldmVhbE1vZGUgPSBTY2VuZVJldmVhbE1vZGUuSW5zdGFudDtcclxuICAgICAgICB0aGlzLmNyZWF0ZVNwbGF0TWVzaCgpO1xyXG4gICAgICAgIHRoaXMuYWRkU3BsYXRCdWZmZXJzKFxyXG4gICAgICAgICAgc2F2ZWRTcGxhdEJ1ZmZlcnMsXHJcbiAgICAgICAgICBzYXZlZFNjZW5lT3B0aW9ucyxcclxuICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgIHRydWVcclxuICAgICAgICApXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjaGVja0ZvckVhcmx5RXhpdCgpKSByZXR1cm5cclxuICAgICAgICAgICAgY2hlY2tBbmRIaWRlTG9hZGluZ1VJKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnNjZW5lcy5mb3JFYWNoKChzY2VuZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICBzY2VuZS5wb3NpdGlvbi5jb3B5KHNhdmVkU2NlbmVUcmFuc2Zvcm1Db21wb25lbnRzW2luZGV4XS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgc2NlbmUucXVhdGVybmlvbi5jb3B5KFxyXG4gICAgICAgICAgICAgICAgc2F2ZWRTY2VuZVRyYW5zZm9ybUNvbXBvbmVudHNbaW5kZXhdLnF1YXRlcm5pb25cclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIHNjZW5lLnNjYWxlLmNvcHkoc2F2ZWRTY2VuZVRyYW5zZm9ybUNvbXBvbmVudHNbaW5kZXhdLnNjYWxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVRyYW5zZm9ybXMoKTtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJ1blNwbGF0U29ydCh0cnVlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBzb3J0UHJvbWlzZSA9IHRoaXMuc29ydFByb21pc2UgfHwgUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgc29ydFByb21pc2UudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgb25Eb25lKCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgICBvbkRvbmUoZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5zcGxhdFNjZW5lUmVtb3ZhbFByb21pc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YXJ0IHNlbGYtZHJpdmVuIG1vZGVcclxuICAgKi9cclxuICBzdGFydCgpIHtcclxuICAgIGlmICh0aGlzLnNlbGZEcml2ZW5Nb2RlKSB7XHJcbiAgICAgIHRoaXMucmVxdWVzdEZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zZWxmRHJpdmVuVXBkYXRlRnVuYyk7XHJcbiAgICAgIHRoaXMuc2VsZkRyaXZlbk1vZGVSdW5uaW5nID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHN0YXJ0IHZpZXdlciB1bmxlc3MgaXQgaXMgaW4gc2VsZiBkcml2ZW4gbW9kZS4nKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcCBzZWxmLWRyaXZlbiBtb2RlXHJcbiAgICovXHJcbiAgc3RvcCgpIHtcclxuICAgIGlmICh0aGlzLnNlbGZEcml2ZW5Nb2RlICYmIHRoaXMuc2VsZkRyaXZlbk1vZGVSdW5uaW5nKSB7XHJcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdEZyYW1lSWQpO1xyXG4gICAgICB0aGlzLnNlbGZEcml2ZW5Nb2RlUnVubmluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGlzcG9zZSBvZiBhbGwgcmVzb3VyY2VzIGhlbGQgZGlyZWN0bHkgYW5kIGluZGlyZWN0bHkgYnkgdGhpcyB2aWV3ZXIuXHJcbiAgICovXHJcbiAgYXN5bmMgZGlzcG9zZSgpIHtcclxuICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm4gdGhpcy5kaXNwb3NlUHJvbWlzZVxyXG5cclxuICAgIGZvciAobGV0IGNvbnRyb2xsZXIgb2YgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVycykge1xyXG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgd2FpdFByb21pc2VzID0gW107XHJcbiAgICBpZiAodGhpcy5zb3J0UHJvbWlzZSkge1xyXG4gICAgICB3YWl0UHJvbWlzZXMucHVzaCh0aGlzLnNvcnRQcm9taXNlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRpc3Bvc2luZyA9IHRydWU7XHJcbiAgICB0aGlzLmRpc3Bvc2VQcm9taXNlID0gUHJvbWlzZS5hbGwod2FpdFByb21pc2VzKS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgIGlmICh0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzKSB7XHJcbiAgICAgICAgdGhpcy5vcnRob2dyYXBoaWNDb250cm9scy5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5vcnRob2dyYXBoaWNDb250cm9scyA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMucGVyc3BlY3RpdmVDb250cm9scykge1xyXG4gICAgICAgIHRoaXMucGVyc3BlY3RpdmVDb250cm9scy5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNvbnRyb2xzID0gbnVsbDtcclxuICAgICAgaWYgKHRoaXMuc3BsYXRNZXNoKSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2guZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5hdmF0YXJNZXNoKSB7XHJcbiAgICAgICAgZGlzcG9zZUFsbE1lc2hlcyh0aGlzLmF2YXRhck1lc2gpO1xyXG4gICAgICAgIHRoaXMuYXZhdGFyTWVzaCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuc2NlbmVIZWxwZXIpIHtcclxuICAgICAgICB0aGlzLnNjZW5lSGVscGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnNjZW5lSGVscGVyID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5yZXNpemVPYnNlcnZlcikge1xyXG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMucm9vdEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuZGlzcG9zZVNvcnRXb3JrZXIoKTtcclxuICAgICAgdGhpcy5yZW1vdmVFdmVudEhhbmRsZXJzKCk7XHJcblxyXG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZUFsbFRhc2tzKCk7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0Q29udGFpbmVyKG51bGwpO1xyXG4gICAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5oaWRlKCk7XHJcbiAgICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLnNldENvbnRhaW5lcihudWxsKTtcclxuICAgICAgLy8gdGhpcy5pbmZvUGFuZWwuc2V0Q29udGFpbmVyKG51bGwpXHJcblxyXG4gICAgICB0aGlzLmNhbWVyYSA9IG51bGw7XHJcbiAgICAgIHRoaXMudGhyZWVTY2VuZSA9IG51bGw7XHJcbiAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxSZW5kZXJlcikge1xyXG4gICAgICAgICAgdGhpcy5yb290RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbFJlbmRlcmVyKSB7XHJcbiAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLnJvb3RFbGVtZW50KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zb3J0V29ya2VyU29ydGVkSW5kZXhlcyA9IG51bGw7XHJcbiAgICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQgPSBudWxsO1xyXG4gICAgICB0aGlzLnNvcnRXb3JrZXJQcmVjb21wdXRlZERpc3RhbmNlcyA9IG51bGw7XHJcbiAgICAgIHRoaXMuc29ydFdvcmtlclRyYW5zZm9ybXMgPSBudWxsO1xyXG4gICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5kaXNwb3NpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5kaXNwb3NlUHJvbWlzZSA9IG51bGw7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLmRpc3Bvc2VQcm9taXNlXHJcbiAgfVxyXG4gIHZzeW5jTnVtID0gNFxyXG4gIHNlbGZEcml2ZW5VcGRhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5zZWxmRHJpdmVuTW9kZSkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdEZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zZWxmRHJpdmVuVXBkYXRlRnVuYyk7XHJcblxyXG4gICAgICAgIC8vIGNvbnN0IGN1cnJlbnRUaW1lID0gZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgICAvLyBjb25zdCBjYWxjRGVsdGEgPSBjdXJyZW50VGltZSAtIHRoaXMubGFzdFRpbWU7XHJcbiAgICAgICAgLy8gaWYgKGNhbGNEZWx0YSA+PSAxLjAgLyAzMC4wKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubGFzdFRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICByZXR1cm5cclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnZzeW5jQ291bnQrKztcclxuXHJcbiAgICBpZiAodGhpcy52c3luY0NvdW50IDwgdGhpcy52c3luY051bSkge1xyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZzeW5jQ291bnQgPSAwO1xyXG5cclxuICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICBpZiAodGhpcy5zaG91bGRSZW5kZXIoKSkge1xyXG4gICAgICAvL2FkZCBleHByZXNzaW9uXHJcblxyXG4gICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICB0aGlzLmNvbnNlY3V0aXZlUmVuZGVyRnJhbWVzKys7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmNvbnNlY3V0aXZlUmVuZGVyRnJhbWVzID0gMDtcclxuICAgIH1cclxuICAgIHRoaXMucmVuZGVyTmV4dEZyYW1lID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmb3JjZVJlbmRlck5leHRGcmFtZSgpIHtcclxuICAgIHRoaXMucmVuZGVyTmV4dEZyYW1lID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHNob3VsZFJlbmRlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcmVuZGVyQ291bnQgPSAwO1xyXG4gICAgY29uc3QgbGFzdENhbWVyYVBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIGNvbnN0IGxhc3RDYW1lcmFPcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICBjb25zdCBjaGFuZ2VFcHNpbG9uID0gMC4wMDAxO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdGhpcy5pbml0aWFsaXplZCB8fFxyXG4gICAgICAgICF0aGlzLnNwbGF0UmVuZGVyUmVhZHkgfHxcclxuICAgICAgICB0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpXHJcbiAgICAgIClcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgIGxldCBzaG91bGRSZW5kZXIgPSBmYWxzZTtcclxuICAgICAgbGV0IGNhbWVyYUNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgaWYgKHRoaXMuY2FtZXJhKSB7XHJcbiAgICAgICAgY29uc3QgY3AgPSB0aGlzLmNhbWVyYS5wb3NpdGlvbjtcclxuICAgICAgICBjb25zdCBjbyA9IHRoaXMuY2FtZXJhLnF1YXRlcm5pb247XHJcbiAgICAgICAgY2FtZXJhQ2hhbmdlZCA9XHJcbiAgICAgICAgICBNYXRoLmFicyhjcC54IC0gbGFzdENhbWVyYVBvc2l0aW9uLngpID4gY2hhbmdlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMoY3AueSAtIGxhc3RDYW1lcmFQb3NpdGlvbi55KSA+IGNoYW5nZUVwc2lsb24gfHxcclxuICAgICAgICAgIE1hdGguYWJzKGNwLnogLSBsYXN0Q2FtZXJhUG9zaXRpb24ueikgPiBjaGFuZ2VFcHNpbG9uIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhjby54IC0gbGFzdENhbWVyYU9yaWVudGF0aW9uLngpID4gY2hhbmdlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMoY28ueSAtIGxhc3RDYW1lcmFPcmllbnRhdGlvbi55KSA+IGNoYW5nZUVwc2lsb24gfHxcclxuICAgICAgICAgIE1hdGguYWJzKGNvLnogLSBsYXN0Q2FtZXJhT3JpZW50YXRpb24ueikgPiBjaGFuZ2VFcHNpbG9uIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhjby53IC0gbGFzdENhbWVyYU9yaWVudGF0aW9uLncpID4gY2hhbmdlRXBzaWxvbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2hvdWxkUmVuZGVyID1cclxuICAgICAgICB0aGlzLnJlbmRlck1vZGUgIT09IFJlbmRlck1vZGUuTmV2ZXIgJiZcclxuICAgICAgICAocmVuZGVyQ291bnQgPT09IDAgfHxcclxuICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnZpc2libGVSZWdpb25DaGFuZ2luZyB8fFxyXG4gICAgICAgICAgY2FtZXJhQ2hhbmdlZCB8fFxyXG4gICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID09PSBSZW5kZXJNb2RlLkFsd2F5cyB8fFxyXG4gICAgICAgICAgdGhpcy5keW5hbWljTW9kZSA9PT0gdHJ1ZSB8fFxyXG4gICAgICAgICAgdGhpcy5yZW5kZXJOZXh0RnJhbWUpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuY2FtZXJhKSB7XHJcbiAgICAgICAgbGFzdENhbWVyYVBvc2l0aW9uLmNvcHkodGhpcy5jYW1lcmEucG9zaXRpb24pO1xyXG4gICAgICAgIGxhc3RDYW1lcmFPcmllbnRhdGlvbi5jb3B5KHRoaXMuY2FtZXJhLnF1YXRlcm5pb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZW5kZXJDb3VudCsrO1xyXG4gICAgICByZXR1cm4gc2hvdWxkUmVuZGVyXHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICByZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF0aGlzLmluaXRpYWxpemVkIHx8XHJcbiAgICAgICAgIXRoaXMuc3BsYXRSZW5kZXJSZWFkeSB8fFxyXG4gICAgICAgIHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKClcclxuICAgICAgKVxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgICAgY29uc3QgaGFzUmVuZGVyYWJsZXMgPSAodGhyZWVTY2VuZSkgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRocmVlU2NlbmUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGlmIChjaGlsZC52aXNpYmxlKSByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHNhdmVkQXVvQ2xlYXIgPSB0aGlzLnJlbmRlcmVyLmF1dG9DbGVhcjtcclxuICAgICAgaWYgKGhhc1JlbmRlcmFibGVzKHRoaXMudGhyZWVTY2VuZSkpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnRocmVlU2NlbmUsIHRoaXMuY2FtZXJhKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmF1dG9DbGVhciA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc3BsYXRNZXNoLCB0aGlzLmNhbWVyYSk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnNjZW5lSGVscGVyLmdldEZvY3VzTWFya2VyT3BhY2l0eSgpID4gMC4wKVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmVIZWxwZXIuZm9jdXNNYXJrZXIsIHRoaXMuY2FtZXJhKTtcclxuICAgICAgaWYgKHRoaXMuc2hvd0NvbnRyb2xQbGFuZSlcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lSGVscGVyLmNvbnRyb2xQbGFuZSwgdGhpcy5jYW1lcmEpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmF1dG9DbGVhciA9IHNhdmVkQXVvQ2xlYXI7XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuXHJcbiAgdXBkYXRlKHJlbmRlcmVyLCBjYW1lcmEpIHtcclxuICAgIC8vIHRoaXMuZnJhbWUrK1xyXG4gICAgY29uc3QgZnBzRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZwcycpO1xyXG4gICAgaWYgKGZwc0Rpdikge1xyXG4gICAgICBmcHNEaXYudGV4dENvbnRlbnQgPSBgRlBTOiAke3RoaXMuY3VycmVudEZQU31gO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRoaXMuZnJhbWUgPj0gdGhpcy50b3RhbEZyYW1lcykgXHJcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLmRyb3BJbk1vZGUpIHRoaXMudXBkYXRlRm9yRHJvcEluTW9kZShyZW5kZXJlciwgY2FtZXJhKTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICF0aGlzLmluaXRpYWxpemVkIHx8XHJcbiAgICAgICF0aGlzLnNwbGF0UmVuZGVyUmVhZHkgfHxcclxuICAgICAgdGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKVxyXG4gICAgKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBpZiAodGhpcy5jb250cm9scykge1xyXG4gICAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpO1xyXG4gICAgICBpZiAodGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEgJiYgIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgIFZpZXdlci5zZXRDYW1lcmFQb3NpdGlvbkZyb21ab29tKFxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgIHRoaXMuY29udHJvbHNcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnJ1bk1vcnBoVXBkYXRlKCk7XHJcbiAgICB0aGlzLnJ1blNwbGF0U29ydCh0cnVlLHRydWUpO1xyXG5cclxuICAgIGNvbnN0IHJlcGxhY2VJbmRleGVzID0gZmFsc2U7XHJcbiAgICBpZiAocmVwbGFjZUluZGV4ZXMpIHtcclxuICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlUmVuZGVySW5kZXhlcyhcclxuICAgICAgICB0aGlzLnNvcnRlZEluZGV4ZXMsXHJcbiAgICAgICAgdGhpcy5zb3J0ZWRJbmRleGVzLmxlbmd0aFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlRm9yUmVuZGVyZXJTaXplQ2hhbmdlcygpO1xyXG4gICAgdGhpcy51cGRhdGVTcGxhdE1lc2goKTtcclxuICAgIHRoaXMudXBkYXRlTWVzaEN1cnNvcigpO1xyXG4gICAgdGhpcy51cGRhdGVGUFMoKTtcclxuICAgIHRoaXMudGltaW5nU2Vuc2l0aXZlVXBkYXRlcygpO1xyXG4gICAgLy8gdGhpcy51cGRhdGVJbmZvUGFuZWwoKVxyXG4gICAgdGhpcy51cGRhdGVDb250cm9sUGxhbmUoKTtcclxuICB9XHJcblxyXG4gIHNvcnRlZEluZGV4ZXNcclxuICB1cGRhdGVGb3JEcm9wSW5Nb2RlKHJlbmRlcmVyLCBjYW1lcmEpIHtcclxuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIGlmICh0aGlzLnNwbGF0TWVzaCkgdGhpcy5zcGxhdE1lc2guc2V0UmVuZGVyZXIodGhpcy5yZW5kZXJlcik7XHJcbiAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgIGlmICh0aGlzLmNvbnRyb2xzKSB0aGlzLmNvbnRyb2xzLm9iamVjdCA9IGNhbWVyYTtcclxuICAgIHRoaXMuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgbGFzdENhbGNUaW1lID0gZ2V0Q3VycmVudFRpbWUoKVxyXG4gIGZwc0ZyYW1lQ291bnQgPSAwXHJcbiAgdXBkYXRlRlBTID0gKCkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmNvbnNlY3V0aXZlUmVuZGVyRnJhbWVzID5cclxuICAgICAgQ09OU0VDVVRJVkVfUkVOREVSRURfRlJBTUVTX0ZPUl9GUFNfQ0FMQ1VMQVRJT05cclxuICAgICkge1xyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IGdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgIGNvbnN0IGNhbGNEZWx0YSA9IGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0Q2FsY1RpbWU7XHJcbiAgICAgIGlmIChjYWxjRGVsdGEgPj0gMS4wKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50RlBTID0gdGhpcy5mcHNGcmFtZUNvdW50O1xyXG4gICAgICAgIHRoaXMuZnBzRnJhbWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0Q2FsY1RpbWUgPSBjdXJyZW50VGltZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmZwc0ZyYW1lQ291bnQrKztcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jdXJyZW50RlBTID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUZvclJlbmRlcmVyU2l6ZUNoYW5nZXMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgbGFzdFJlbmRlcmVyU2l6ZSA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICBjb25zdCBjdXJyZW50UmVuZGVyZXJTaXplID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIGxldCBsYXN0Q2FtZXJhT3J0aG9ncmFwaGljO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5nZXRTaXplKGN1cnJlbnRSZW5kZXJlclNpemUpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGxhc3RDYW1lcmFPcnRob2dyYXBoaWMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgbGFzdENhbWVyYU9ydGhvZ3JhcGhpYyAhPT0gdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEgfHxcclxuICAgICAgICAgIGN1cnJlbnRSZW5kZXJlclNpemUueCAhPT0gbGFzdFJlbmRlcmVyU2l6ZS54IHx8XHJcbiAgICAgICAgICBjdXJyZW50UmVuZGVyZXJTaXplLnkgIT09IGxhc3RSZW5kZXJlclNpemUueVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLmxlZnQgPSAtY3VycmVudFJlbmRlcmVyU2l6ZS54IC8gMi4wO1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5yaWdodCA9IGN1cnJlbnRSZW5kZXJlclNpemUueCAvIDIuMDtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEudG9wID0gY3VycmVudFJlbmRlcmVyU2l6ZS55IC8gMi4wO1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5ib3R0b20gPSAtY3VycmVudFJlbmRlcmVyU2l6ZS55IC8gMi4wO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEuYXNwZWN0ID0gY3VycmVudFJlbmRlcmVyU2l6ZS54IC8gY3VycmVudFJlbmRlcmVyU2l6ZS55O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG4gICAgICAgICAgbGFzdFJlbmRlcmVyU2l6ZS5jb3B5KGN1cnJlbnRSZW5kZXJlclNpemUpO1xyXG4gICAgICAgICAgbGFzdENhbWVyYU9ydGhvZ3JhcGhpYyA9IHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgdGltaW5nU2Vuc2l0aXZlVXBkYXRlcyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgbGFzdFVwZGF0ZVRpbWU7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBnZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICBpZiAoIWxhc3RVcGRhdGVUaW1lKSBsYXN0VXBkYXRlVGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgICBjb25zdCB0aW1lRGVsdGEgPSBjdXJyZW50VGltZSAtIGxhc3RVcGRhdGVUaW1lO1xyXG5cclxuICAgICAgdGhpcy51cGRhdGVDYW1lcmFUcmFuc2l0aW9uKGN1cnJlbnRUaW1lKTtcclxuICAgICAgdGhpcy51cGRhdGVGb2N1c01hcmtlcih0aW1lRGVsdGEpO1xyXG5cclxuICAgICAgbGFzdFVwZGF0ZVRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHRlbXBDYW1lcmFUYXJnZXQgPSBuZXcgVmVjdG9yMygpXHJcbiAgdG9QcmV2aW91c1RhcmdldCA9IG5ldyBWZWN0b3IzKClcclxuICB0b05leHRUYXJnZXQgPSBuZXcgVmVjdG9yMygpXHJcbiAgdXBkYXRlQ2FtZXJhVHJhbnNpdGlvbiA9IChjdXJyZW50VGltZSkgPT4ge1xyXG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldCkge1xyXG4gICAgICB0aGlzLnRvUHJldmlvdXNUYXJnZXRcclxuICAgICAgICAuY29weSh0aGlzLnByZXZpb3VzQ2FtZXJhVGFyZ2V0KVxyXG4gICAgICAgIC5zdWIodGhpcy5jYW1lcmEucG9zaXRpb24pXHJcbiAgICAgICAgLm5vcm1hbGl6ZSgpO1xyXG4gICAgICB0aGlzLnRvTmV4dFRhcmdldFxyXG4gICAgICAgIC5jb3B5KHRoaXMubmV4dENhbWVyYVRhcmdldClcclxuICAgICAgICAuc3ViKHRoaXMuY2FtZXJhLnBvc2l0aW9uKVxyXG4gICAgICAgIC5ub3JtYWxpemUoKTtcclxuICAgICAgY29uc3Qgcm90YXRpb25BbmdsZSA9IE1hdGguYWNvcyhcclxuICAgICAgICB0aGlzLnRvUHJldmlvdXNUYXJnZXQuZG90KHRoaXMudG9OZXh0VGFyZ2V0KVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCByb3RhdGlvblNwZWVkID0gKHJvdGF0aW9uQW5nbGUgLyAoTWF0aC5QSSAvIDMpKSAqIDAuNjUgKyAwLjM7XHJcbiAgICAgIGNvbnN0IHQgPVxyXG4gICAgICAgIChyb3RhdGlvblNwZWVkIC8gcm90YXRpb25BbmdsZSkgKlxyXG4gICAgICAgIChjdXJyZW50VGltZSAtIHRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldFN0YXJ0VGltZSk7XHJcbiAgICAgIHRoaXMudGVtcENhbWVyYVRhcmdldFxyXG4gICAgICAgIC5jb3B5KHRoaXMucHJldmlvdXNDYW1lcmFUYXJnZXQpXHJcbiAgICAgICAgLmxlcnAodGhpcy5uZXh0Q2FtZXJhVGFyZ2V0LCB0KTtcclxuICAgICAgdGhpcy5jYW1lcmEubG9va0F0KHRoaXMudGVtcENhbWVyYVRhcmdldCk7XHJcbiAgICAgIHRoaXMuY29udHJvbHMudGFyZ2V0LmNvcHkodGhpcy50ZW1wQ2FtZXJhVGFyZ2V0KTtcclxuICAgICAgaWYgKHQgPj0gMS4wKSB7XHJcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZUZvY3VzTWFya2VyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgbGV0IHdhc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRpbWVEZWx0YSkge1xyXG4gICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldEZvY3VzTWFya2VyVmlzaWJpbGl0eSh0cnVlKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5ID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLmdldEZvY3VzTWFya2VyT3BhY2l0eSgpLFxyXG4gICAgICAgICAgMC4wXHJcbiAgICAgICAgKTtcclxuICAgICAgICBsZXQgbmV3Rm9jdXNNYXJrZXJPcGFjaXR5ID0gTWF0aC5taW4oXHJcbiAgICAgICAgICBjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5ICsgRk9DVVNfTUFSS0VSX0ZBREVfSU5fU1BFRUQgKiB0aW1lRGVsdGEsXHJcbiAgICAgICAgICAxLjBcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0Rm9jdXNNYXJrZXJPcGFjaXR5KG5ld0ZvY3VzTWFya2VyT3BhY2l0eSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZUhlbHBlci51cGRhdGVGb2N1c01hcmtlcihcclxuICAgICAgICAgIHRoaXMubmV4dENhbWVyYVRhcmdldCxcclxuICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgcmVuZGVyRGltZW5zaW9uc1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgd2FzVHJhbnNpdGlvbmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5O1xyXG4gICAgICAgIGlmICh3YXNUcmFuc2l0aW9uaW5nKSBjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5ID0gMS4wO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5nZXRGb2N1c01hcmtlck9wYWNpdHkoKSxcclxuICAgICAgICAgICAgMS4wXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIGlmIChjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5ID4gMCkge1xyXG4gICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci51cGRhdGVGb2N1c01hcmtlcihcclxuICAgICAgICAgICAgdGhpcy5uZXh0Q2FtZXJhVGFyZ2V0LFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgICAgcmVuZGVyRGltZW5zaW9uc1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGxldCBuZXdGb2N1c01hcmtlck9wYWNpdHkgPSBNYXRoLm1heChcclxuICAgICAgICAgICAgY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSAtIEZPQ1VTX01BUktFUl9GQURFX09VVF9TUEVFRCAqIHRpbWVEZWx0YSxcclxuICAgICAgICAgICAgMC4wXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRGb2N1c01hcmtlck9wYWNpdHkobmV3Rm9jdXNNYXJrZXJPcGFjaXR5KTtcclxuICAgICAgICAgIGlmIChuZXdGb2N1c01hcmtlck9wYWNpdHkgPT09IDAuMClcclxuICAgICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRGb2N1c01hcmtlclZpc2liaWxpdHkoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSA+IDAuMCkgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICAgIHdhc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgdXBkYXRlTWVzaEN1cnNvciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBvdXRIaXRzID0gW107XHJcbiAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAodGhpcy5zaG93TWVzaEN1cnNvcikge1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgICAgb3V0SGl0cy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmFBbmRTY3JlZW5Qb3NpdGlvbihcclxuICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgdGhpcy5tb3VzZVBvc2l0aW9uLFxyXG4gICAgICAgICAgcmVuZGVyRGltZW5zaW9uc1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0U3BsYXRNZXNoKHRoaXMuc3BsYXRNZXNoLCBvdXRIaXRzKTtcclxuICAgICAgICBpZiAob3V0SGl0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldE1lc2hDdXJzb3JWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5wb3NpdGlvbkFuZE9yaWVudE1lc2hDdXJzb3IoXHJcbiAgICAgICAgICAgIG91dEhpdHNbMF0ub3JpZ2luLFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRNZXNoQ3Vyc29yVmlzaWJpbGl0eShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLnNjZW5lSGVscGVyLmdldE1lc2NoQ3Vyc29yVmlzaWJpbGl0eSgpKVxyXG4gICAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0TWVzaEN1cnNvclZpc2liaWxpdHkoZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICB1cGRhdGVJbmZvUGFuZWwgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCF0aGlzLnNob3dJbmZvKSByZXR1cm5cclxuICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICBjb25zdCBjYW1lcmFMb29rQXRQb3NpdGlvbiA9IHRoaXMuY29udHJvbHMgPyB0aGlzLmNvbnRyb2xzLnRhcmdldCA6IG51bGw7XHJcbiAgICAgIGNvbnN0IG1lc2hDdXJzb3JQb3NpdGlvbiA9IHRoaXMuc2hvd01lc2hDdXJzb3JcclxuICAgICAgICA/IHRoaXMuc2NlbmVIZWxwZXIubWVzaEN1cnNvci5wb3NpdGlvblxyXG4gICAgICAgIDogbnVsbDtcclxuICAgICAgY29uc3Qgc3BsYXRSZW5kZXJDb3VudFBjdCA9XHJcbiAgICAgICAgc3BsYXRDb3VudCA+IDAgPyAodGhpcy5zcGxhdFJlbmRlckNvdW50IC8gc3BsYXRDb3VudCkgKiAxMDAgOiAwO1xyXG4gICAgICAvLyB0aGlzLmluZm9QYW5lbC51cGRhdGUoXHJcbiAgICAgIC8vICAgcmVuZGVyRGltZW5zaW9ucyxcclxuICAgICAgLy8gICB0aGlzLmNhbWVyYS5wb3NpdGlvbixcclxuICAgICAgLy8gICBjYW1lcmFMb29rQXRQb3NpdGlvbixcclxuICAgICAgLy8gICB0aGlzLmNhbWVyYS51cCxcclxuICAgICAgLy8gICB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSxcclxuICAgICAgLy8gICBtZXNoQ3Vyc29yUG9zaXRpb24sXHJcbiAgICAgIC8vICAgdGhpcy5jdXJyZW50RlBTIHx8ICdOL0EnLFxyXG4gICAgICAvLyAgIHNwbGF0Q291bnQsXHJcbiAgICAgIC8vICAgdGhpcy5zcGxhdFJlbmRlckNvdW50LFxyXG4gICAgICAvLyAgIHNwbGF0UmVuZGVyQ291bnRQY3QsXHJcbiAgICAgIC8vICAgdGhpcy5sYXN0U29ydFRpbWUsXHJcbiAgICAgIC8vICAgdGhpcy5mb2NhbEFkanVzdG1lbnQsXHJcbiAgICAgIC8vICAgdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRTY2FsZSgpLFxyXG4gICAgICAvLyAgIHRoaXMuc3BsYXRNZXNoLmdldFBvaW50Q2xvdWRNb2RlRW5hYmxlZCgpXHJcbiAgICAgIC8vIClcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHVwZGF0ZUNvbnRyb2xQbGFuZSgpIHtcclxuICAgIGlmICh0aGlzLnNob3dDb250cm9sUGxhbmUpIHtcclxuICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRDb250cm9sUGxhbmVWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICB0aGlzLnNjZW5lSGVscGVyLnBvc2l0aW9uQW5kT3JpZW50Q29udHJvbFBsYW5lKFxyXG4gICAgICAgIHRoaXMuY29udHJvbHMudGFyZ2V0LFxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnVwXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNjZW5lSGVscGVyLnNldENvbnRyb2xQbGFuZVZpc2liaWxpdHkoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbXZwTWF0cml4ID0gbmV3IE1hdHJpeDQoKVxyXG4gIGNhbWVyYVBvc2l0aW9uQXJyYXkgPSBbXVxyXG4gIGxhc3RTb3J0Vmlld0RpciA9IG5ldyBWZWN0b3IzKDAsIDAsIC0xKVxyXG4gIHNvcnRWaWV3RGlyID0gbmV3IFZlY3RvcjMoMCwgMCwgLTEpXHJcbiAgbGFzdFNvcnRWaWV3UG9zID0gbmV3IFZlY3RvcjMoKVxyXG4gIHNvcnRWaWV3T2Zmc2V0ID0gbmV3IFZlY3RvcjMoKVxyXG4gIHF1ZXVlZFNvcnRzID0gW11cclxuXHJcbiAgcGFydGlhbFNvcnRzID0gW1xyXG4gICAge1xyXG4gICAgICBhbmdsZVRocmVzaG9sZDogMC41NSxcclxuICAgICAgc29ydEZyYWN0aW9uczogWzAuMTI1LCAwLjMzMzMzLCAwLjc1XVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYW5nbGVUaHJlc2hvbGQ6IDAuNjUsXHJcbiAgICAgIHNvcnRGcmFjdGlvbnM6IFswLjMzMzMzLCAwLjY2NjY3XVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgYW5nbGVUaHJlc2hvbGQ6IDAuOCxcclxuICAgICAgc29ydEZyYWN0aW9uczogWzAuNV1cclxuICAgIH1cclxuICBdXHJcbiAgcnVuU3BsYXRTb3J0ID0gKGZvcmNlID0gZmFsc2UsIGZvcmNlU29ydEFsbCA9IGZhbHNlKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXHJcbiAgICBpZiAodGhpcy5zb3J0UnVubmluZykgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgaWYgKHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0Q291bnQoKSA8PSAwKSB7XHJcbiAgICAgIHRoaXMuc3BsYXRSZW5kZXJDb3VudCA9IDA7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGFuZ2xlRGlmZiA9IDA7XHJcbiAgICBsZXQgcG9zaXRpb25EaWZmID0gMDtcclxuICAgIGxldCBuZWVkc1JlZnJlc2hGb3JSb3RhdGlvbiA9IGZhbHNlO1xyXG4gICAgbGV0IG5lZWRzUmVmcmVzaEZvclBvc2l0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5zb3J0Vmlld0Rpci5zZXQoMCwgMCwgLTEpLmFwcGx5UXVhdGVybmlvbih0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uKTtcclxuICAgIGFuZ2xlRGlmZiA9IHRoaXMuc29ydFZpZXdEaXIuZG90KHRoaXMubGFzdFNvcnRWaWV3RGlyKTtcclxuICAgIHBvc2l0aW9uRGlmZiA9IHRoaXMuc29ydFZpZXdPZmZzZXRcclxuICAgICAgLmNvcHkodGhpcy5jYW1lcmEucG9zaXRpb24pXHJcbiAgICAgIC5zdWIodGhpcy5sYXN0U29ydFZpZXdQb3MpXHJcbiAgICAgIC5sZW5ndGgoKTtcclxuXHJcbiAgICBpZiAoIWZvcmNlKSB7XHJcbiAgICAgIGlmICghdGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUgJiYgdGhpcy5xdWV1ZWRTb3J0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBpZiAoYW5nbGVEaWZmIDw9IDAuOTkpIG5lZWRzUmVmcmVzaEZvclJvdGF0aW9uID0gdHJ1ZTtcclxuICAgICAgICBpZiAocG9zaXRpb25EaWZmID49IDEuMCkgbmVlZHNSZWZyZXNoRm9yUG9zaXRpb24gPSB0cnVlO1xyXG4gICAgICAgIGlmICghbmVlZHNSZWZyZXNoRm9yUm90YXRpb24gJiYgIW5lZWRzUmVmcmVzaEZvclBvc2l0aW9uKVxyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc29ydFJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgbGV0IHsgc3BsYXRSZW5kZXJDb3VudCwgc2hvdWxkU29ydEFsbCB9ID0gdGhpcy5nYXRoZXJTY2VuZU5vZGVzRm9yU29ydCgpO1xyXG4gICAgc2hvdWxkU29ydEFsbCA9IHNob3VsZFNvcnRBbGwgfHwgZm9yY2VTb3J0QWxsO1xyXG4gICAgdGhpcy5zcGxhdFJlbmRlckNvdW50ID0gc3BsYXRSZW5kZXJDb3VudDtcclxuXHJcbiAgICB0aGlzLm12cE1hdHJpeC5jb3B5KHRoaXMuY2FtZXJhLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtcclxuICAgIGNvbnN0IG12cENhbWVyYSA9IHRoaXMucGVyc3BlY3RpdmVDYW1lcmEgfHwgdGhpcy5jYW1lcmE7XHJcbiAgICB0aGlzLm12cE1hdHJpeC5wcmVtdWx0aXBseShtdnBDYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XHJcbiAgICBpZiAoIXRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlKVxyXG4gICAgICB0aGlzLm12cE1hdHJpeC5tdWx0aXBseSh0aGlzLnNwbGF0TWVzaC5tYXRyaXhXb3JsZCk7XHJcblxyXG4gICAgbGV0IGdwdUFjY2VsZXJhdGVkU29ydFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuZ3B1QWNjZWxlcmF0ZWRTb3J0ICYmXHJcbiAgICAgICh0aGlzLnF1ZXVlZFNvcnRzLmxlbmd0aCA8PSAxIHx8IHRoaXMucXVldWVkU29ydHMubGVuZ3RoICUgMiA9PT0gMClcclxuICAgICkge1xyXG4gICAgICBncHVBY2NlbGVyYXRlZFNvcnRQcm9taXNlID0gdGhpcy5zcGxhdE1lc2guY29tcHV0ZURpc3RhbmNlc09uR1BVKFxyXG4gICAgICAgIHRoaXMubXZwTWF0cml4LFxyXG4gICAgICAgIHRoaXMuc29ydFdvcmtlclByZWNvbXB1dGVkRGlzdGFuY2VzXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ3B1QWNjZWxlcmF0ZWRTb3J0UHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMucXVldWVkU29ydHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlIHx8IHNob3VsZFNvcnRBbGwpIHtcclxuICAgICAgICAgIHRoaXMucXVldWVkU29ydHMucHVzaCh0aGlzLnNwbGF0UmVuZGVyQ291bnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBmb3IgKGxldCBwYXJ0aWFsU29ydCBvZiB0aGlzLnBhcnRpYWxTb3J0cykge1xyXG4gICAgICAgICAgICBpZiAoYW5nbGVEaWZmIDwgcGFydGlhbFNvcnQuYW5nbGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgICBmb3IgKGxldCBzb3J0RnJhY3Rpb24gb2YgcGFydGlhbFNvcnQuc29ydEZyYWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZWRTb3J0cy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICBNYXRoLmZsb29yKHRoaXMuc3BsYXRSZW5kZXJDb3VudCAqIHNvcnRGcmFjdGlvbilcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMucXVldWVkU29ydHMucHVzaCh0aGlzLnNwbGF0UmVuZGVyQ291bnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBsZXQgc29ydENvdW50ID0gTWF0aC5taW4odGhpcy5xdWV1ZWRTb3J0cy5zaGlmdCgpLCB0aGlzLnNwbGF0UmVuZGVyQ291bnQpO1xyXG4gICAgICB0aGlzLnNwbGF0U29ydENvdW50ID0gc29ydENvdW50O1xyXG5cclxuICAgICAgdGhpcy5jYW1lcmFQb3NpdGlvbkFycmF5WzBdID0gdGhpcy5jYW1lcmEucG9zaXRpb24ueDtcclxuICAgICAgdGhpcy5jYW1lcmFQb3NpdGlvbkFycmF5WzFdID0gdGhpcy5jYW1lcmEucG9zaXRpb24ueTtcclxuICAgICAgdGhpcy5jYW1lcmFQb3NpdGlvbkFycmF5WzJdID0gdGhpcy5jYW1lcmEucG9zaXRpb24uejtcclxuXHJcbiAgICAgIGNvbnN0IHNvcnRNZXNzYWdlID0ge1xyXG4gICAgICAgIG1vZGVsVmlld1Byb2o6IHRoaXMubXZwTWF0cml4LmVsZW1lbnRzLFxyXG4gICAgICAgIGNhbWVyYVBvc2l0aW9uOiB0aGlzLmNhbWVyYVBvc2l0aW9uQXJyYXksXHJcbiAgICAgICAgc3BsYXRSZW5kZXJDb3VudDogdGhpcy5zcGxhdFJlbmRlckNvdW50LFxyXG4gICAgICAgIHNwbGF0U29ydENvdW50OiBzb3J0Q291bnQsXHJcbiAgICAgICAgdXNlUHJlY29tcHV0ZWREaXN0YW5jZXM6IHRoaXMuZ3B1QWNjZWxlcmF0ZWRTb3J0XHJcbiAgICAgIH07XHJcbiAgICAgIGlmICh0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLmZpbGxUcmFuc2Zvcm1zQXJyYXkodGhpcy5zb3J0V29ya2VyVHJhbnNmb3Jtcyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMpIHtcclxuICAgICAgICBzb3J0TWVzc2FnZS5pbmRleGVzVG9Tb3J0ID0gdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydDtcclxuICAgICAgICBzb3J0TWVzc2FnZS50cmFuc2Zvcm1zID0gdGhpcy5zb3J0V29ya2VyVHJhbnNmb3JtcztcclxuICAgICAgICBpZiAodGhpcy5ncHVBY2NlbGVyYXRlZFNvcnQpIHtcclxuICAgICAgICAgIHNvcnRNZXNzYWdlLnByZWNvbXB1dGVkRGlzdGFuY2VzID0gdGhpcy5zb3J0V29ya2VyUHJlY29tcHV0ZWREaXN0YW5jZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNvcnRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICB0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnByZVNvcnRNZXNzYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5wcmVTb3J0TWVzc2FnZXMuZm9yRWFjaCgobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5zb3J0V29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucHJlU29ydE1lc3NhZ2VzID0gW107XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zb3J0V29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICBzb3J0OiBzb3J0TWVzc2FnZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnF1ZXVlZFNvcnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMubGFzdFNvcnRWaWV3UG9zLmNvcHkodGhpcy5jYW1lcmEucG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMubGFzdFNvcnRWaWV3RGlyLmNvcHkodGhpcy5zb3J0Vmlld0Rpcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZ3B1QWNjZWxlcmF0ZWRTb3J0UHJvbWlzZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRGV0ZXJtaW5lIHdoaWNoIHNwbGF0cyB0byByZW5kZXIgYnkgY2hlY2tpbmcgd2hpY2ggYXJlIGluc2lkZSBvciBjbG9zZSB0byB0aGUgdmlldyBmcnVzdHVtXHJcbiAgICovXHJcbiAgZ2F0aGVyU2NlbmVOb2Rlc0ZvclNvcnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3Qgbm9kZVJlbmRlckxpc3QgPSBbXTtcclxuICAgIGxldCBhbGxTcGxhdHNTb3J0QnVmZmVyID0gbnVsbDtcclxuICAgIGNvbnN0IHRlbXBWZWN0b3JZWiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBjb25zdCB0ZW1wVmVjdG9yWFogPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgY29uc3QgdGVtcFZlY3RvciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBjb25zdCBtb2RlbFZpZXcgPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgY29uc3QgYmFzZU1vZGVsVmlldyA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICBjb25zdCBzY2VuZVRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIGNvbnN0IGZvcndhcmQgPSBuZXcgVmVjdG9yMygwLCAwLCAtMSk7XHJcblxyXG4gICAgY29uc3QgdGVtcE1heCA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBjb25zdCBub2RlU2l6ZSA9IChub2RlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0ZW1wTWF4LmNvcHkobm9kZS5tYXgpLnN1Yihub2RlLm1pbikubGVuZ3RoKClcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChnYXRoZXJBbGxOb2RlcyA9IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgY29uc3QgY2FtZXJhRm9jYWxMZW5ndGggPVxyXG4gICAgICAgIHJlbmRlckRpbWVuc2lvbnMueSAvXHJcbiAgICAgICAgMi4wIC9cclxuICAgICAgICBNYXRoLnRhbigodGhpcy5jYW1lcmEuZm92IC8gMi4wKSAqIE1hdGhVdGlscy5ERUcyUkFEKTtcclxuICAgICAgY29uc3QgZm92WE92ZXIyID0gTWF0aC5hdGFuKHJlbmRlckRpbWVuc2lvbnMueCAvIDIuMCAvIGNhbWVyYUZvY2FsTGVuZ3RoKTtcclxuICAgICAgY29uc3QgZm92WU92ZXIyID0gTWF0aC5hdGFuKHJlbmRlckRpbWVuc2lvbnMueSAvIDIuMCAvIGNhbWVyYUZvY2FsTGVuZ3RoKTtcclxuICAgICAgY29uc3QgY29zRm92WE92ZXIyID0gTWF0aC5jb3MoZm92WE92ZXIyKTtcclxuICAgICAgY29uc3QgY29zRm92WU92ZXIyID0gTWF0aC5jb3MoZm92WU92ZXIyKTtcclxuXHJcbiAgICAgIGNvbnN0IHNwbGF0VHJlZSA9IHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0VHJlZSgpO1xyXG5cclxuICAgICAgaWYgKHNwbGF0VHJlZSkge1xyXG4gICAgICAgIGJhc2VNb2RlbFZpZXcuY29weSh0aGlzLmNhbWVyYS5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSlcclxuICAgICAgICAgIGJhc2VNb2RlbFZpZXcubXVsdGlwbHkodGhpcy5zcGxhdE1lc2gubWF0cml4V29ybGQpO1xyXG5cclxuICAgICAgICBsZXQgbm9kZVJlbmRlckNvdW50ID0gMDtcclxuICAgICAgICBsZXQgc3BsYXRSZW5kZXJDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgc3BsYXRUcmVlLnN1YlRyZWVzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICBjb25zdCBzdWJUcmVlID0gc3BsYXRUcmVlLnN1YlRyZWVzW3NdO1xyXG4gICAgICAgICAgbW9kZWxWaWV3LmNvcHkoYmFzZU1vZGVsVmlldyk7XHJcbiAgICAgICAgICBpZiAodGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdE1lc2guZ2V0U2NlbmVUcmFuc2Zvcm0ocywgc2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICBtb2RlbFZpZXcubXVsdGlwbHkoc2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3Qgbm9kZUNvdW50ID0gc3ViVHJlZS5ub2Rlc1dpdGhJbmRleGVzLmxlbmd0aDtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZUNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHN1YlRyZWUubm9kZXNXaXRoSW5kZXhlc1tpXTtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICFub2RlLmRhdGEgfHxcclxuICAgICAgICAgICAgICAhbm9kZS5kYXRhLmluZGV4ZXMgfHxcclxuICAgICAgICAgICAgICBub2RlLmRhdGEuaW5kZXhlcy5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIHRlbXBWZWN0b3IuY29weShub2RlLmNlbnRlcikuYXBwbHlNYXRyaXg0KG1vZGVsVmlldyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZVRvTm9kZSA9IHRlbXBWZWN0b3IubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgIHRlbXBWZWN0b3Iubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0ZW1wVmVjdG9yWVouY29weSh0ZW1wVmVjdG9yKS5zZXRYKDApLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICB0ZW1wVmVjdG9yWFouY29weSh0ZW1wVmVjdG9yKS5zZXRZKDApLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FtZXJhQW5nbGVYWkRvdCA9IGZvcndhcmQuZG90KHRlbXBWZWN0b3JYWik7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYUFuZ2xlWVpEb3QgPSBmb3J3YXJkLmRvdCh0ZW1wVmVjdG9yWVopO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbnMgPSBub2RlU2l6ZShub2RlKTtcclxuICAgICAgICAgICAgY29uc3Qgb3V0T2ZGb3ZZID0gY2FtZXJhQW5nbGVZWkRvdCA8IGNvc0ZvdllPdmVyMiAtIDAuNjtcclxuICAgICAgICAgICAgY29uc3Qgb3V0T2ZGb3ZYID0gY2FtZXJhQW5nbGVYWkRvdCA8IGNvc0ZvdlhPdmVyMiAtIDAuNjtcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICFnYXRoZXJBbGxOb2RlcyAmJlxyXG4gICAgICAgICAgICAgIChvdXRPZkZvdlggfHwgb3V0T2ZGb3ZZKSAmJlxyXG4gICAgICAgICAgICAgIGRpc3RhbmNlVG9Ob2RlID4gbnNcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzcGxhdFJlbmRlckNvdW50ICs9IG5vZGUuZGF0YS5pbmRleGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgbm9kZVJlbmRlckxpc3Rbbm9kZVJlbmRlckNvdW50XSA9IG5vZGU7XHJcbiAgICAgICAgICAgIG5vZGUuZGF0YS5kaXN0YW5jZVRvTm9kZSA9IGRpc3RhbmNlVG9Ob2RlO1xyXG4gICAgICAgICAgICBub2RlUmVuZGVyQ291bnQrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vZGVSZW5kZXJMaXN0Lmxlbmd0aCA9IG5vZGVSZW5kZXJDb3VudDtcclxuICAgICAgICBub2RlUmVuZGVyTGlzdC5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICBpZiAoYS5kYXRhLmRpc3RhbmNlVG9Ob2RlIDwgYi5kYXRhLmRpc3RhbmNlVG9Ob2RlKSByZXR1cm4gLTFcclxuICAgICAgICAgIGVsc2UgcmV0dXJuIDFcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRCeXRlT2Zmc2V0ID0gc3BsYXRSZW5kZXJDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckludDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVSZW5kZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICBjb25zdCBub2RlID0gbm9kZVJlbmRlckxpc3RbaV07XHJcbiAgICAgICAgICBjb25zdCB3aW5kb3dTaXplSW50cyA9IG5vZGUuZGF0YS5pbmRleGVzLmxlbmd0aDtcclxuICAgICAgICAgIGNvbnN0IHdpbmRvd1NpemVCeXRlcyA9IHdpbmRvd1NpemVJbnRzICogQ29uc3RhbnRzLkJ5dGVzUGVySW50O1xyXG4gICAgICAgICAgbGV0IGRlc3RWaWV3ID0gbmV3IFVpbnQzMkFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0LmJ1ZmZlcixcclxuICAgICAgICAgICAgY3VycmVudEJ5dGVPZmZzZXQgLSB3aW5kb3dTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgIHdpbmRvd1NpemVJbnRzXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgZGVzdFZpZXcuc2V0KG5vZGUuZGF0YS5pbmRleGVzKTtcclxuICAgICAgICAgIGN1cnJlbnRCeXRlT2Zmc2V0IC09IHdpbmRvd1NpemVCeXRlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzcGxhdFJlbmRlckNvdW50OiBzcGxhdFJlbmRlckNvdW50LFxyXG4gICAgICAgICAgc2hvdWxkU29ydEFsbDogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxTcGxhdENvdW50ID0gdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICFhbGxTcGxhdHNTb3J0QnVmZmVyIHx8XHJcbiAgICAgICAgICBhbGxTcGxhdHNTb3J0QnVmZmVyLmxlbmd0aCAhPT0gdG90YWxTcGxhdENvdW50XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBhbGxTcGxhdHNTb3J0QnVmZmVyID0gbmV3IFVpbnQzMkFycmF5KHRvdGFsU3BsYXRDb3VudCk7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsU3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGFsbFNwbGF0c1NvcnRCdWZmZXJbaV0gPSBpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0LnNldChhbGxTcGxhdHNTb3J0QnVmZmVyKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3BsYXRSZW5kZXJDb3VudDogdG90YWxTcGxhdENvdW50LFxyXG4gICAgICAgICAgc2hvdWxkU29ydEFsbDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgZ2V0U3BsYXRNZXNoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3BsYXRNZXNoXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgYSByZWZlcmVuY2UgdG8gYSBzcGxhdCBzY2VuZS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gc2NlbmVJbmRleCBUaGUgaW5kZXggb2YgdGhlIHNjZW5lIHRvIHdoaWNoIHRoZSByZWZlcmVuY2Ugd2lsbCBiZSByZXR1cm5lZFxyXG4gICAqIEByZXR1cm4ge1NwbGF0U2NlbmV9XHJcbiAgICovXHJcbiAgZ2V0U3BsYXRTY2VuZShzY2VuZUluZGV4KSB7XHJcbiAgICByZXR1cm4gdGhpcy5zcGxhdE1lc2guZ2V0U2NlbmUoc2NlbmVJbmRleClcclxuICB9XHJcblxyXG4gIGdldFNjZW5lQ291bnQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zcGxhdE1lc2guZ2V0U2NlbmVDb3VudCgpXHJcbiAgfVxyXG5cclxuICBpc01vYmlsZSgpIHtcclxuICAgIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdNb2JpJylcclxuICB9XHJcblxyXG4gIHVwZGF0ZU1vcnBoVGFyZ2V0KGlucHV0TWVzaCkge1xyXG4gICAgdGhpcy5hdmF0YXJNZXNoID0gaW5wdXRNZXNoO1xyXG4gICAgdGhpcy5zcGxhdE1lc2guZmxhbWVNb2RlbCA9IGlucHV0TWVzaDtcclxuXHJcbiAgICB0aGlzLnJ1bk1vcnBoVXBkYXRlKCk7XHJcbiAgICB0aGlzLnNwbGF0TWVzaC5nYXVzc2lhblNwbGF0Q291bnQgPSB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudDtcclxuICB9XHJcblxyXG4gIHJ1bk1vcnBoVXBkYXRlKCkge1xyXG4gICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSB0aGlzLmF2YXRhck1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudDtcclxuICAgIHZhciBtb3JwaGVkTWVzaCA9IG5ldyBGbG9hdDMyQXJyYXkoXHJcbiAgICAgIHRoaXMuYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5XHJcbiAgICApO1xyXG4gICAgY29uc3QgbnVtQm9uZXMgPSA1O1xyXG4gICAgdGhpcy5zcGxhdE1lc2guYm9uZXNOdW0gPSBudW1Cb25lcztcclxuXHJcbiAgICB0aGlzLnNraW5Nb2RlbC5za2VsZXRvbi51cGRhdGUoKTtcclxuICAgIHRoaXMuYm9uZVJvb3QudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7XHJcbiAgICBpZiAodGhpcy5zcGxhdE1lc2guZ2VvbWV0cnkuZ2V0QXR0cmlidXRlKCdzcGxhdEluZGV4JykgJiYgdGhpcy5zZXRTa2luQXR0aWJ1dGVzID09PSBmYWxzZSkge1xyXG5cclxuICAgICAgdGhpcy5zZXRTa2luQXR0aWJ1dGVzID0gdHJ1ZTtcclxuICAgICAgY29uc3QgZ2VvbWV0cnkgPSB0aGlzLnNwbGF0TWVzaC5nZW9tZXRyeTtcclxuXHJcbiAgICAgIGNvbnN0IHNraW5JbmRleFNvdXJjZSA9IHRoaXMuc2tpbk1vZGVsLmdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbkluZGV4O1xyXG4gICAgICBjb25zdCBza2luV2VpZ2h0U291cmNlID0gdGhpcy5za2luTW9kZWwuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0O1xyXG5cclxuICAgICAgY29uc3QgbmV3U2tpbkluZGV4ID0gbmV3IEluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShcclxuICAgICAgICAgIG5ldyBza2luSW5kZXhTb3VyY2UuYXJyYXkuY29uc3RydWN0b3Ioc2tpbkluZGV4U291cmNlLmFycmF5KSxcclxuICAgICAgICAgIDQsXHJcbiAgICAgICAgICBza2luSW5kZXhTb3VyY2Uubm9ybWFsaXplZCxcclxuICAgICAgICAgIDFcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IG5ld1NraW5XZWlnaHQgPSBuZXcgSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKFxyXG4gICAgICAgICAgbmV3IHNraW5XZWlnaHRTb3VyY2UuYXJyYXkuY29uc3RydWN0b3Ioc2tpbldlaWdodFNvdXJjZS5hcnJheSksXHJcbiAgICAgICAgICA0LFxyXG4gICAgICAgICAgc2tpbldlaWdodFNvdXJjZS5ub3JtYWxpemVkLFxyXG4gICAgICAgICAgMVxyXG4gICAgICApO1xyXG4gICAgICBuZXdTa2luSW5kZXguc2V0VXNhZ2UoRHluYW1pY0RyYXdVc2FnZSk7XHJcbiAgICAgIG5ld1NraW5XZWlnaHQuc2V0VXNhZ2UoRHluYW1pY0RyYXdVc2FnZSk7XHJcbiAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc2tpbkluZGV4JywgbmV3U2tpbkluZGV4KTtcclxuICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdza2luV2VpZ2h0JywgbmV3U2tpbldlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zcGxhdE1lc2gubW9ycGhlZE1lc2ggPSBtb3JwaGVkTWVzaDtcclxuXHJcbiAgICBsZXQgc3BsYXROdW0gPSB0aGlzLnNwbGF0TWVzaC5tb3JwaGVkTWVzaC5sZW5ndGggLyAzO1xyXG4gICAgaWYgKHRoaXMuc3BsYXRNZXNoLnNwbGF0RGF0YVRleHR1cmVzWydmbGFtZU1vZGVsJ10gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVRldHVyZUFmdGVyQlNBbmRTa2VsZXRvbigwLCBzcGxhdE51bSAtIDEsIGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvKipcclxuICogR2F1c3NpYW5TcGxhdFJlbmRlcmVyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBcclxuICogSGlnaC1sZXZlbCBvcmNoZXN0cmF0aW9uIGNsYXNzIHRoYXQ6XHJcbiAqIC0gTG9hZHMgWklQIGFzc2V0cyB2aWEgZmV0Y2hcclxuICogLSBVbnBhY2tzIHdpdGggSlNaaXBcclxuICogLSBDcmVhdGVzIFZpZXdlciBpbnN0YW5jZVxyXG4gKiAtIExvYWRzIEZMQU1FL3NraW4gbW9kZWxzXHJcbiAqIC0gUnVucyB0aGUgcmVuZGVyIGxvb3BcclxuICovXHJcblxyXG4vKiBnbG9iYWwgTlByb2dyZXNzICovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgVmVjdG9yMyxcclxuICAgIEJvbmUsXHJcbiAgICBDbG9jayxcclxuICAgIEFuaW1hdGlvbk1peGVyXHJcbn0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvR0xURkxvYWRlci5qcyc7XHJcbmltcG9ydCBKU1ppcCBmcm9tICdqc3ppcCc7XHJcblxyXG4vLyBJbXBvcnQgaW50ZXJuYWwgbW9kdWxlc1xyXG5pbXBvcnQgeyBUWVZvaWNlQ2hhdFN0YXRlIH0gZnJvbSAnLi9BcHBDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBBbmltYXRpb25NYW5hZ2VyIH0gZnJvbSAnLi9BbmltYXRpb25NYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgVmlld2VyIH0gZnJvbSAnLi4vY29yZS9WaWV3ZXIuanMnO1xyXG5pbXBvcnQgeyBTY2VuZUZvcm1hdCB9IGZyb20gJy4uL2VudW1zL1NjZW5lRm9ybWF0LmpzJztcclxuaW1wb3J0IHsgU2NlbmVSZXZlYWxNb2RlIH0gZnJvbSAnLi4vZW51bXMvU2NlbmVSZXZlYWxNb2RlLmpzJztcclxuXHJcbi8vIEltcG9ydCBuZXcgdXRpbGl0aWVzIGFuZCBlcnJvciBjbGFzc2VzXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL0xvZ2dlci5qcyc7XHJcbmltcG9ydCB7XHJcbiAgICBWYWxpZGF0aW9uRXJyb3IsXHJcbiAgICBOZXR3b3JrRXJyb3IsXHJcbiAgICBBc3NldExvYWRFcnJvcixcclxuICAgIEluaXRpYWxpemF0aW9uRXJyb3IsXHJcbiAgICBSZXNvdXJjZURpc3Bvc2VkRXJyb3JcclxufSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQge1xyXG4gICAgdmFsaWRhdGVVcmwsXHJcbiAgICB2YWxpZGF0ZURPTUVsZW1lbnQsXHJcbiAgICB2YWxpZGF0ZUhleENvbG9yLFxyXG4gICAgdmFsaWRhdGVDYWxsYmFja1xyXG59IGZyb20gJy4uL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyc7XHJcbmltcG9ydCB7IEJsb2JVcmxNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvQmxvYlVybE1hbmFnZXIuanMnO1xyXG5pbXBvcnQgeyB0ZW1wVmVjdG9yM0EgfSBmcm9tICcuLi91dGlscy9PYmplY3RQb29sLmpzJztcclxuXHJcbi8vIENyZWF0ZSBsb2dnZXIgZm9yIHRoaXMgbW9kdWxlXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignR2F1c3NpYW5TcGxhdFJlbmRlcmVyJyk7XHJcblxyXG4vLyBDb25maWd1cmF0aW9uIG9iamVjdHMgLSB0aGVzZSB3b3VsZCBub3JtYWxseSBiZSBsb2FkZWQgZnJvbSB0aGUgWklQXHJcbmNvbnN0IGNoYXJhY3RvckNvbmZpZyA9IHtcclxuICAgIGNhbVBvczogeyB4OiAwLCB5OiAxLjgsIHo6IDEgfSxcclxuICAgIGNhbVJvdDogeyB4OiAtMTAsIHk6IDAsIHo6IDAgfSxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJ2ZmZmZmZidcclxufTtcclxuXHJcbmNvbnN0IG1vdGlvbkNvbmZpZyA9IHtcclxuICAgIG9mZnNldDoge30sXHJcbiAgICBzY2FsZToge31cclxufTtcclxuXHJcbi8vIEFuaW1hdGlvbiBjb25maWd1cmF0aW9uIC0gZGVmaW5lcyBob3cgYW5pbWF0aW9uIGNsaXBzIGFyZSBkaXN0cmlidXRlZCB0byBzdGF0ZXNcclxuLy8gVGhlIGFuaW1hdGlvbi5nbGIgY29udGFpbnMgY2xpcHMgaW4gb3JkZXI6IGhlbGxvKDIpLCBpZGxlKDEpLCBsaXN0ZW4oMCksIHNwZWFrKDYpLCB0aGluaygzKVxyXG5jb25zdCBhbmltYXRpb25Db25maWcgPSB7XHJcbiAgICBoZWxsbzogeyBzaXplOiAwLCBpc0dyb3VwOiBmYWxzZSB9LCAvLyBObyAnaGVsbG8nIGFuaW1hdGlvbnNcclxuICAgIHNwZWFrOiB7IHNpemU6IDMsIGlzR3JvdXA6IHRydWUgfSwgICAvLyBGaXJzdCAzIGFuaW1hdGlvbnMgYXJlIGZvciBzcGVha2luZ1xyXG4gICAgdGhpbms6IHsgc2l6ZTogMCwgaXNHcm91cDogZmFsc2UgfSwgIC8vICd0aGluaycgd2lsbCBzaGFyZSAnc3BlYWsnIGFuaW1hdGlvbnNcclxuICAgIGxpc3RlbjogeyBzaXplOiAwLCBpc0dyb3VwOiBmYWxzZX0sIC8vICdsaXN0ZW4nIHdpbGwgc2hhcmUgJ2lkbGUnIGFuaW1hdGlvbnNcclxuICAgIGlkbGU6IHsgc2l6ZTogMSwgaXNHcm91cDogZmFsc2UgfSwgICAvLyBUaGUgbmV4dCBhbmltYXRpb24gaXMgZm9yIGlkbGVcclxuICAgIG90aGVyOiBbXVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdhdXNzaWFuU3BsYXRSZW5kZXJlciAtIE1haW4gcmVuZGVyaW5nIGNsYXNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR2F1c3NpYW5TcGxhdFJlbmRlcmVyIHtcclxuICAgIC8qKlxyXG4gICAgICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IHJlbmRlcmVyIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgY2FudmFzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXNzZXRQYXRoIC0gVVJMIHRvIGNoYXJhY3RlciBaSVAgZmlsZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZG93bmxvYWRQcm9ncmVzc10gLSBEb3dubG9hZCBwcm9ncmVzcyBjYWxsYmFjayAoMC0xKVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMubG9hZFByb2dyZXNzXSAtIExvYWQgcHJvZ3Jlc3MgY2FsbGJhY2sgKDAtMSlcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdldENoYXRTdGF0ZV0gLSBDaGF0IHN0YXRlIHByb3ZpZGVyIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YV0gLSBFeHByZXNzaW9uIGRhdGEgcHJvdmlkZXIgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3JdIC0gQmFja2dyb3VuZCBjb2xvciAoaGV4IHN0cmluZylcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEdhdXNzaWFuU3BsYXRSZW5kZXJlcj59IFJlbmRlcmVyIGluc3RhbmNlXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHBhcmFtZXRlcnMgYXJlIGludmFsaWRcclxuICAgICAqIEB0aHJvd3Mge05ldHdvcmtFcnJvcn0gSWYgYXNzZXQgZG93bmxvYWQgZmFpbHNcclxuICAgICAqIEB0aHJvd3Mge0Fzc2V0TG9hZEVycm9yfSBJZiBhc3NldCBsb2FkaW5nL3BhcnNpbmcgZmFpbHNcclxuICAgICAqIEB0aHJvd3Mge0luaXRpYWxpemF0aW9uRXJyb3J9IElmIHJlbmRlcmVyIGluaXRpYWxpemF0aW9uIGZhaWxzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGUoY29udGFpbmVyLCBhc3NldFBhdGgsIG9wdGlvbnMgPSB7fSkge1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIHZhbGlkYXRlRE9NRWxlbWVudChjb250YWluZXIsICdjb250YWluZXInKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVVcmwoYXNzZXRQYXRoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIG9wdGlvbmFsIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kb3dubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNhbGxiYWNrKG9wdGlvbnMuZG93bmxvYWRQcm9ncmVzcywgJ29wdGlvbnMuZG93bmxvYWRQcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob3B0aW9ucy5sb2FkUHJvZ3Jlc3MsICdvcHRpb25zLmxvYWRQcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRDaGF0U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob3B0aW9ucy5nZXRDaGF0U3RhdGUsICdvcHRpb25zLmdldENoYXRTdGF0ZScsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDYWxsYmFjayhvcHRpb25zLmdldEV4cHJlc3Npb25EYXRhLCAnb3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YScsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSGV4Q29sb3Iob3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IsICdvcHRpb25zLmJhY2tncm91bmRDb2xvcicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnSW5pdGlhbGl6aW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlcicsIHsgYXNzZXRQYXRoIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyUGF0aCA9IGFzc2V0UGF0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIFBhcnNlIGNoYXJhY3RlciBuYW1lIGZyb20gcGF0aFxyXG4gICAgICAgICAgICBsZXQgY2hhcmFjdGVyTmFtZTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoY2hhcmFjdGVyUGF0aCwgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRobmFtZSA9IHVybC5wYXRobmFtZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBwYXRobmFtZS5tYXRjaCgvXFwvKFteL10rPylcXC56aXAvKTtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlck5hbWUgPSBtYXRjaGVzPy5bMV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFyYWN0ZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NoYXJhY3RlciBtb2RlbCBuYW1lIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBwYXRoLiBFeHBlY3RlZCBmb3JtYXQ6IC9wYXRoL25hbWUuemlwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Fzc2V0UGF0aCdcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBJbnZhbGlkIGFzc2V0IHBhdGggZm9ybWF0OiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAnYXNzZXRQYXRoJyxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2hvdyBwcm9ncmVzc1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE5Qcm9ncmVzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEb3dubG9hZCBaSVAgZmlsZVxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRG93bmxvYWRpbmcgYXNzZXQgWklQJywgeyBwYXRoOiBjaGFyYWN0ZXJQYXRoIH0pO1xyXG4gICAgICAgICAgICBsZXQgY2hhcmFjdGVyWmlwUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJaaXBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNoYXJhY3RlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFyYWN0ZXJaaXBSZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gZG93bmxvYWQgYXNzZXQ6ICR7Y2hhcmFjdGVyWmlwUmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJaaXBSZXNwb25zZS5zdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTmV0d29ya0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBOZXR3b3JrIGVycm9yIGRvd25sb2FkaW5nIGFzc2V0OiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZXBvcnQgZG93bmxvYWQgcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZG93bmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRvd25sb2FkUHJvZ3Jlc3MoMS4wKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIGRvd25sb2FkUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvYWRQcm9ncmVzcygwLjEpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gbG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE5Qcm9ncmVzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFBhcnNlIGFycmF5IGJ1ZmZlclxyXG4gICAgICAgICAgICBsZXQgYXJyYXlCdWZmZXI7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUJ1ZmZlciA9IGF3YWl0IGNoYXJhY3RlclppcFJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcmVhZCByZXNwb25zZSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIFpJUCB3aXRoIGltcG9ydGVkIEpTWmlwXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVW5wYWNraW5nIFpJUCBhcmNoaXZlJyk7XHJcbiAgICAgICAgICAgIGxldCB6aXBEYXRhO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgemlwRGF0YSA9IGF3YWl0IEpTWmlwLmxvYWRBc3luYyhhcnJheUJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byB1bnBhY2sgWklQIGFyY2hpdmU6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlclBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpbmQgZm9sZGVyIG5hbWUgaW4gWklQXHJcbiAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHppcERhdGEuZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5kaXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGZpbGUubmFtZT8uc2xpY2UoMCwgZmlsZS5uYW1lPy5sZW5ndGggLSAxKTsgLy8gUmVtb3ZlIHRyYWlsaW5nICcvJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZmlsZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAnTm8gZm9sZGVyIGZvdW5kIGluIFpJUCBhcmNoaXZlLiBFeHBlY3RlZCBaSVAgdG8gY29udGFpbiBhIGZvbGRlciB3aXRoIG1vZGVsIGZpbGVzLicsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyUGF0aFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGb3VuZCBtb2RlbCBmb2xkZXIgaW4gWklQJywgeyBmaWxlTmFtZSB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSByZW5kZXJlciBpbnN0YW5jZVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NyZWF0aW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlciBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBHYXVzc2lhblNwbGF0UmVuZGVyZXIoY29udGFpbmVyLCB6aXBEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldHVwIGNhbWVyYSBwb3NpdGlvbiAodXNlIG9iamVjdCBwb29sIGZvciB0ZW1wIHZlY3RvcnMpXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYVBvcyA9IHRlbXBWZWN0b3IzQS5zZXQoXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUG9zPy54ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUG9zPy55ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUG9zPy56ID8/IDFcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYVJvdGF0aW9uID0gbmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUm90Py54ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUm90Py55ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUm90Py56ID8/IDBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FtZXJhIHNldHVwJywge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHsgeDogY2FtZXJhUG9zLngsIHk6IGNhbWVyYVBvcy55LCB6OiBjYW1lcmFQb3MueiB9LFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246IHsgeDogY2FtZXJhUm90YXRpb24ueCwgeTogY2FtZXJhUm90YXRpb24ueSwgejogY2FtZXJhUm90YXRpb24ueiB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQmFja2dyb3VuZCBjb2xvciB3aXRoIHZhbGlkYXRpb25cclxuICAgICAgICAgICAgbGV0IGJhY2tncm91bmRDb2xvciA9IDB4ZmZmZmZmO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJhY3RvckNvbmZpZy5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludChjaGFyYWN0b3JDb25maWcuYmFja2dyb3VuZENvbG9yLCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignSW52YWxpZCBiYWNrZ3JvdW5kQ29sb3IgaW4gY29uZmlnLCB1c2luZyBkZWZhdWx0Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNoYXJhY3RvckNvbmZpZy5iYWNrZ3JvdW5kQ29sb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LmJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlci5pc0hleENvbG9yU3RyaWN0KG9wdGlvbnMuYmFja2dyb3VuZENvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBwYXJzZUludChvcHRpb25zLmJhY2tncm91bmRDb2xvciwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbnZhbGlkIGJhY2tncm91bmRDb2xvciBvcHRpb24sIHVzaW5nIGNvbmZpZyB2YWx1ZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb25zLmJhY2tncm91bmRDb2xvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgcGFyc2luZyBiYWNrZ3JvdW5kQ29sb3IsIHVzaW5nIGRlZmF1bHQnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQmFja2dyb3VuZCBjb2xvciBzZXQnLCB7IGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLnRvU3RyaW5nKDE2KSB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICByZW5kZXJlci5nZXRDaGF0U3RhdGUgPSBvcHRpb25zPy5nZXRDaGF0U3RhdGU7XHJcbiAgICAgICAgICAgIHJlbmRlcmVyLmdldEV4cHJlc3Npb25EYXRhID0gb3B0aW9ucz8uZ2V0RXhwcmVzc2lvbkRhdGE7XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIGlyaXMgb2NjbHVzaW9uIGNvbmZpZ3VyYXRpb24gQkVGT1JFIGNyZWF0aW5nIHZpZXdlciAob3B0aW9uYWwpXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2hlY2tpbmcgZm9yIGlyaXNfb2NjbHVzaW9uLmpzb24nKTtcclxuICAgICAgICAgICAgbGV0IGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaXJpc09jY2x1c2lvbkNvbmZpZyA9IGF3YWl0IHJlbmRlcmVyLl9sb2FkSnNvbkZyb21aaXAoZmlsZU5hbWUgKyAnL2lyaXNfb2NjbHVzaW9uLmpzb24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChpcmlzT2NjbHVzaW9uQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0lyaXMgb2NjbHVzaW9uIGNvbmZpZ3VyYXRpb24gbG9hZGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodElyaXNSYW5nZXM6IGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpcz8ubGVuZ3RoID8/IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRJcmlzUmFuZ2VzOiBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpcz8ubGVuZ3RoID8/IDBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5pcmlzT2NjbHVzaW9uQ29uZmlnID0gaXJpc09jY2x1c2lvbkNvbmZpZztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBpcmlzX29jY2x1c2lvbi5qc29uIGZvdW5kLCBpcmlzIG9jY2x1c2lvbiB3aWxsIGJlIGRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMb2cgYnV0IGRvbid0IGZhaWwgLSBpcmlzIG9jY2x1c2lvbiBpcyBvcHRpb25hbFxyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBsb2FkIGlyaXNfb2NjbHVzaW9uLmpzb24sIGNvbnRpbnVpbmcgd2l0aG91dCBpdCcsIHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlci5pcmlzT2NjbHVzaW9uQ29uZmlnID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIFZpZXdlciB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZ1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NyZWF0aW5nIFZpZXdlciBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIudmlld2VyID0gbmV3IFZpZXdlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdEVsZW1lbnQ6IGNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgICAgICB0aHJlZWpzQ2FudmFzOiByZW5kZXJlci5fY2FudmFzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYVVwOiBbMCwgMSwgMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbENhbWVyYVBvc2l0aW9uOiBbY2FtZXJhUG9zLngsIGNhbWVyYVBvcy55LCBjYW1lcmFQb3Muel0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbENhbWVyYVJvdGF0aW9uOiBbY2FtZXJhUm90YXRpb24ueCwgY2FtZXJhUm90YXRpb24ueSwgY2FtZXJhUm90YXRpb24uel0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lUmV2ZWFsTW9kZTogU2NlbmVSZXZlYWxNb2RlLkRlZmF1bHQsICAvLyBEZWZhdWx0IHJldmVhbCBtb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllcjogMy4wLCAgLy8gM3ggZmFzdGVyIGZhZGUtaW5cclxuICAgICAgICAgICAgICAgICAgICBpcmlzT2NjbHVzaW9uQ29uZmlnOiBpcmlzT2NjbHVzaW9uQ29uZmlnICAvLyBQYXNzIGlyaXMgY29uZmlnIHRvIHZpZXdlclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW5pdGlhbGl6YXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGNyZWF0ZSBWaWV3ZXIgaW5zdGFuY2U6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIG1vZGVsIChub24tRkxBTUUgbW9kZSBvbmx5KVxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnTG9hZGluZyBtb2RlbCcsIHsgZmlsZU5hbWUgfSk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW5kZXJlci5sb2FkTW9kZWwoZmlsZU5hbWUsIGFuaW1hdGlvbkNvbmZpZywgbW90aW9uQ29uZmlnKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGxvYWQgbW9kZWw6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9ncmVzcyBjYWxsYmFjayB3aXRoIGVycm9yIGlzb2xhdGlvblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5sb2FkUHJvZ3Jlc3MoMC4yKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIGxvYWRQcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBvZmZzZXQgUExZXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTG9hZGluZyBvZmZzZXQgUExZIGZpbGUnKTtcclxuICAgICAgICAgICAgbGV0IG9mZnNldEZpbGVVcmw7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRGaWxlVXJsID0gYXdhaXQgcmVuZGVyZXIudW5wYWNrRmlsZUFzQmxvYihmaWxlTmFtZSArICcvb2Zmc2V0LnBseScpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gbG9hZCBvZmZzZXQucGx5OiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSArICcvb2Zmc2V0LnBseScsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFByb2dyZXNzIGNhbGxiYWNrIHdpdGggZXJyb3IgaXNvbGF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvYWRQcm9ncmVzcygwLjMpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gbG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgc3BsYXQgc2NlbmVcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBZGRpbmcgc3BsYXQgc2NlbmUnKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlbmRlcmVyLnZpZXdlci5hZGRTcGxhdFNjZW5lKG9mZnNldEZpbGVVcmwsIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc2l2ZUxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVkTWVtb3J5Rm9yV29ya2VyczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRpbmdVSTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBTY2VuZUZvcm1hdC5QbHlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBhZGQgc3BsYXQgc2NlbmU6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJbml0aWFsIHJlbmRlclxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGluaXRpYWwgcmVuZGVyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgdGhyb3cgLSByZW5kZXIgZXJyb3JzIGFyZSBub24tZmF0YWxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgY2FsbGJhY2sgd2l0aCBlcnJvciBpc29sYXRpb25cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubG9hZFByb2dyZXNzKDEpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gbG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnR2F1c3NpYW5TcGxhdFJlbmRlcmVyIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyZXI7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIFJlLXRocm93IGN1c3RvbSBlcnJvcnMgYXMtaXNcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yIHx8XHJcbiAgICAgICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIE5ldHdvcmtFcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBBc3NldExvYWRFcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBJbml0aWFsaXphdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0luaXRpYWxpemF0aW9uIGZhaWxlZCcsIHsgZXJyb3JDb2RlOiBlcnJvci5jb2RlLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFdyYXAgdW5leHBlY3RlZCBlcnJvcnNcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGR1cmluZyBpbml0aWFsaXphdGlvbicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgVW5leHBlY3RlZCBlcnJvciBpbml0aWFsaXppbmcgR2F1c3NpYW5TcGxhdFJlbmRlcmVyOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGNyZWF0ZSgpIGluc3RlYWQuIFRoaXMgbWV0aG9kIGlzIGtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgY2FudmFzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXNzZXRQYXRoIC0gVVJMIHRvIGNoYXJhY3RlciBaSVAgZmlsZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8R2F1c3NpYW5TcGxhdFJlbmRlcmVyPn0gUmVuZGVyZXIgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGdldEluc3RhbmNlKGNvbnRhaW5lciwgYXNzZXRQYXRoLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsb2dnZXIud2FybignZ2V0SW5zdGFuY2UoKSBpcyBkZXByZWNhdGVkLiBVc2UgY3JlYXRlKCkgaW5zdGVhZC4gRWFjaCBjYWxsIGNyZWF0ZXMgYSBuZXcgaW5zdGFuY2UuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlKGNvbnRhaW5lciwgYXNzZXRQYXRoLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIC0gQ3JlYXRlcyBhIG5ldyBHYXVzc2lhblNwbGF0UmVuZGVyZXIgaW5zdGFuY2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBfY29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBlbGVtZW50IGZvciB0aGUgcmVuZGVyZXJcclxuICAgICAqIEBwYXJhbSB7SlNaaXB9IHppcERhdGEgLSBMb2FkZWQgWklQIGFyY2hpdmUgY29udGFpbmluZyBtb2RlbCBkYXRhXHJcbiAgICAgKiBAcHJpdmF0ZSAtIFVzZSBjcmVhdGUoKSBmYWN0b3J5IG1ldGhvZCBpbnN0ZWFkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKF9jb250YWluZXIsIHppcERhdGEpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBjb25zdHJ1Y3RvciBjYWxsZWQnKTtcclxuXHJcbiAgICAgICAgLy8gRGlzcG9zYWwgdHJhY2tpbmdcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBCbG9iVXJsTWFuYWdlciBmb3IgdHJhY2tpbmcgYmxvYiBVUkxzXHJcbiAgICAgICAgdGhpcy5fYmxvYlVybE1hbmFnZXIgPSBuZXcgQmxvYlVybE1hbmFnZXIoKTtcclxuXHJcbiAgICAgICAgLy8gWklQIGZpbGUgY2FjaGVcclxuICAgICAgICB0aGlzLnppcFVybHMgPSB7XHJcbiAgICAgICAgICAgIHVybHM6IG5ldyBNYXAoKSxcclxuICAgICAgICAgICAgemlwOiB6aXBEYXRhXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU3RhdGVcclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMDtcclxuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2hhdFN0YXRlID0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgaW5zdGFuY2Utc3BlY2lmaWMgY2FudmFzXHJcbiAgICAgICAgdGhpcy5fY2FudmFzID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBfY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IF9jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpO1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NhbnZhcyBzZXR1cCcsIHsgd2lkdGgsIGhlaWdodCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFuaW1hdGlvbiB0aW1pbmdcclxuICAgICAgICB0aGlzLmNsb2NrID0gbmV3IENsb2NrKCk7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDAuMDtcclxuXHJcbiAgICAgICAgLy8gVGhlc2Ugd2lsbCBiZSBzZXQgZHVyaW5nIGxvYWRpbmdcclxuICAgICAgICB0aGlzLnZpZXdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5taXhlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pcmlzT2NjbHVzaW9uQ29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1vdGlvbmNmZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nZXRDaGF0U3RhdGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEgPSBudWxsO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBpbnN0YW5jZSBjcmVhdGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnQgcmVuZGVyZXIgaXMgbm90IGRpc3Bvc2VkXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHRocm93cyB7UmVzb3VyY2VEaXNwb3NlZEVycm9yfSBJZiByZW5kZXJlciBoYXMgYmVlbiBkaXNwb3NlZFxyXG4gICAgICovXHJcbiAgICBfYXNzZXJ0Tm90RGlzcG9zZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXNvdXJjZURpc3Bvc2VkRXJyb3IoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBoYXMgYmVlbiBkaXNwb3NlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgcmVuZGVyZXIgYW5kIGZyZWUgYWxsIHJlc291cmNlc1xyXG4gICAgICpcclxuICAgICAqIFByb3Blcmx5IGNsZWFucyB1cDpcclxuICAgICAqIC0gTW9kZWwgcmVzb3VyY2VzIChtZXNoLCBhbmltYXRpb25zLCB0ZXh0dXJlcylcclxuICAgICAqIC0gQmxvYiBVUkxzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXHJcbiAgICAgKiAtIFZpZXdlciBpbnN0YW5jZVxyXG4gICAgICogLSBDYW52YXMgdmlzaWJpbGl0eVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybignR2F1c3NpYW5TcGxhdFJlbmRlcmVyLmRpc3Bvc2UoKSBjYWxsZWQgb24gYWxyZWFkeSBkaXNwb3NlZCBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnRGlzcG9zaW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlcicpO1xyXG5cclxuICAgICAgICAvLyBIaWRlIGFuZCByZW1vdmUgY2FudmFzXHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbnZhcykge1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2FudmFzLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fY2FudmFzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERpc3Bvc2UgbW9kZWwgcmVzb3VyY2VzXHJcbiAgICAgICAgdGhpcy5kaXNwb3NlTW9kZWwoKTtcclxuXHJcbiAgICAgICAgLy8gUmV2b2tlIGFsbCBibG9iIFVSTHMgdXNpbmcgQmxvYlVybE1hbmFnZXJcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLl9ibG9iVXJsTWFuYWdlcj8uZGlzcG9zZSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZGlzcG9zaW5nIEJsb2JVcmxNYW5hZ2VyJywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGVnYWN5IGJsb2IgVVJMIGNsZWFudXAgKGZvciBVUkxzIGNyZWF0ZWQgYmVmb3JlIEJsb2JVcmxNYW5hZ2VyKVxyXG4gICAgICAgIGlmICh0aGlzLnppcFVybHM/LnVybHMpIHtcclxuICAgICAgICAgICAgdGhpcy56aXBVcmxzLnVybHMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciByZXZva2luZyBibG9iIFVSTCcsIHsgdXJsOiB2YWx1ZSwgZXJyb3IgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnppcFVybHMudXJscy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTnVsbGlmeSByZWZlcmVuY2VzIHRvIGFpZCBHQ1xyXG4gICAgICAgIHRoaXMudmlld2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1peGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFuaW1NYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1vdGlvbmNmZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nZXRDaGF0U3RhdGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuemlwVXJscyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIE1hcmsgYXMgZGlzcG9zZWRcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIENsZWFyIHNpbmdsZXRvbiBpbnN0YW5jZVxyXG4gICAgICAgIEdhdXNzaWFuU3BsYXRSZW5kZXJlci5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdHYXVzc2lhblNwbGF0UmVuZGVyZXIgZGlzcG9zZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIG1vZGVsLXNwZWNpZmljIHJlc291cmNlc1xyXG4gICAgICpcclxuICAgICAqIENsZWFucyB1cDpcclxuICAgICAqIC0gQW5pbWF0aW9uIG1peGVyIGFuZCBjYWNoZWQgYWN0aW9uc1xyXG4gICAgICogLSBBbmltYXRpb24gbWFuYWdlclxyXG4gICAgICogLSBWaWV3ZXIgaW5zdGFuY2VcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgZGlzcG9zZU1vZGVsKCkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzcG9zaW5nIG1vZGVsIHJlc291cmNlcycpO1xyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIGFuaW1hdGlvbiBtaXhlclxyXG4gICAgICAgIGlmICh0aGlzLm1peGVyKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1peGVyLnN0b3BBbGxBY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdlcj8uYXZhdGFyTWVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWl4ZXIudW5jYWNoZVJvb3QodGhpcy52aWV3ZXIuYXZhdGFyTWVzaCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGRpc3Bvc2luZyBhbmltYXRpb24gbWl4ZXInLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5taXhlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIGFuaW1hdGlvbiBtYW5hZ2VyXHJcbiAgICAgICAgaWYgKHRoaXMuYW5pbU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbU1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkaXNwb3NpbmcgYW5pbWF0aW9uIG1hbmFnZXInLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIHZpZXdlclxyXG4gICAgICAgIGlmICh0aGlzLnZpZXdlcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkaXNwb3Npbmcgdmlld2VyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnTW9kZWwgcmVzb3VyY2VzIGRpc3Bvc2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIFRocmVlLmpzIGNhbWVyYVxyXG4gICAgICogQHJldHVybnMge1RIUkVFLkNhbWVyYX1cclxuICAgICAqL1xyXG4gICAgZ2V0Q2FtZXJhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdlcj8uY2FtZXJhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGJsZW5kc2hhcGUgd2VpZ2h0cyBmcm9tIGFjdGlvbiBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYWN0aW9uRGF0YSAtIEJsZW5kc2hhcGUgd2VpZ2h0c1xyXG4gICAgICogQHJldHVybnMge29iamVjdH0gUHJvY2Vzc2VkIGluZmx1ZW5jZSB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQlMoYWN0aW9uRGF0YSkge1xyXG4gICAgICAgIC8vIERlZmF1bHQgaW5mbHVlbmNlIHZhbHVlcyAtIGFsbCA1MiBBUktpdCBibGVuZHNoYXBlc1xyXG4gICAgICAgIGxldCBpbmZsdWVuY2UgPSB7XHJcbiAgICAgICAgICAgIGJyb3dEb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBicm93RG93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGJyb3dJbm5lclVwOiAwLjAsXHJcbiAgICAgICAgICAgIGJyb3dPdXRlclVwTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBicm93T3V0ZXJVcFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoQ2hlZWtQdWZmOiAwLjAsXHJcbiAgICAgICAgICAgIGNoZWVrU3F1aW50TGVmdDogMC4wLFxyXG4gICAgICAgICAgICBjaGVla1NxdWludFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUJsaW5rTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVCbGlua1JpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tEb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVMb29rRG93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tJbkxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va0luUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va091dExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va091dFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tVcExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va1VwUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgZXllU3F1aW50TGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVTcXVpbnRSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBleWVXaWRlTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVXaWRlUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgamF3Rm9yd2FyZDogMC4wLFxyXG4gICAgICAgICAgICBqYXdMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIGphd09wZW46IDAuMCxcclxuICAgICAgICAgICAgamF3UmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhDbG9zZTogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aERpbXBsZUxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhEaW1wbGVSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aEZyb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aEZyb3duUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhGdW5uZWw6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoTG93ZXJEb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aExvd2VyRG93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUHJlc3NMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUHJlc3NSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFB1Y2tlcjogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUm9sbExvd2VyOiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUm9sbFVwcGVyOiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU2hydWdMb3dlcjogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFNocnVnVXBwZXI6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTbWlsZUxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTbWlsZVJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU3RyZXRjaExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTdHJldGNoUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhVcHBlclVwTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFVwcGVyVXBSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBub3NlU25lZXJMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG5vc2VTbmVlclJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIHRvbmd1ZU91dDogMC4wXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGlvbkRhdGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbmZsdWVuY2UgPSBhY3Rpb25EYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZmx1ZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1haW4gcmVuZGVyIGxvb3BcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpZXdlciAmJiB0aGlzLnZpZXdlci5zZWxmRHJpdmVuTW9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5yZXF1ZXN0RnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnJlbmRlcigpKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lSW5mb0ludGVybmFsID0gMS4wIC8gMzAuMDtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGRpdmlzaW9uIGJ5IHplcm8gaWYgdG90YWxGcmFtZXMgaXMgMCBvciBub3Qgc2V0XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsRnJhbWVzID0gdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgfHwgMTtcclxuICAgICAgICAgICAgY29uc3QgY2FsY0RlbHRhID0gKGN1cnJlbnRUaW1lIC0gdGhpcy5zdGFydFRpbWUpICUgKHRvdGFsRnJhbWVzICogZnJhbWVJbmZvSW50ZXJuYWwpO1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gTWF0aC5mbG9vcihjYWxjRGVsdGEgLyBmcmFtZUluZm9JbnRlcm5hbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyLmZyYW1lID0gZnJhbWVJbmRleDtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjaGF0IHN0YXRlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldENoYXRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGF0U3RhdGUgPSB0aGlzLmdldENoYXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyBzdGF0ZSB0cmFuc2l0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9sYXN0TG9nZ2VkU3RhdGUgfHwgdGhpcy5fbGFzdExvZ2dlZFN0YXRlICE9PSB0aGlzLmNoYXRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2hhdCBzdGF0ZSBjaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZTogdGhpcy5jaGF0U3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0FuaW1NYW5hZ2VyOiAhIXRoaXMuYW5pbU1hbmFnZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0TG9nZ2VkU3RhdGUgPSB0aGlzLmNoYXRTdGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbU1hbmFnZXI/LnVwZGF0ZSh0aGlzLmNoYXRTdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBleHByZXNzaW9uIGRhdGFcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkRhdGEgPSB0aGlzLnVwZGF0ZUJTKHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFuaW1hdGlvbiBtaXhlciB1cGRhdGVcclxuICAgICAgICAgICAgaWYgKCF0aGlzLm1peGVyIHx8ICF0aGlzLmFuaW1NYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3dhcm5lZE9uY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignTWl4ZXIgb3IgYW5pbU1hbmFnZXIgbm90IGluaXRpYWxpemVkLCBza2lwcGluZyBhbmltYXRpb24gdXBkYXRlJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNNaXhlcjogISF0aGlzLm1peGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNBbmltTWFuYWdlcjogISF0aGlzLmFuaW1NYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2FybmVkT25jZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBTdGlsbCB1cGRhdGUgZXhwcmVzc2lvbnMgZXZlbiB3aXRob3V0IG1peGVyL2FuaW1NYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEV4cHJlc3Npb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1peGVyVXBkYXRlRGVsdGEgPSB0aGlzLmNsb2NrLmdldERlbHRhKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1peGVyLnVwZGF0ZShtaXhlclVwZGF0ZURlbHRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBtb3Rpb24gY29uZmlnIG9mZnNldHMvc2NhbGVzXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb3Rpb25jZmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vcnBoVGFyZ2V0IGluIHRoaXMuZXhwcmVzc2lvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5tb3Rpb25jZmcub2Zmc2V0Py5bbW9ycGhUYXJnZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IHRoaXMubW90aW9uY2ZnLnNjYWxlPy5bbW9ycGhUYXJnZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgc2NhbGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uRGF0YVttb3JwaFRhcmdldF0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkRhdGFbbW9ycGhUYXJnZXRdICogc2NhbGUgKyBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFeHByZXNzaW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2aWV3ZXJcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIudXBkYXRlKHRoaXMudmlld2VyLnJlbmRlcmVyLCB0aGlzLnZpZXdlci5jYW1lcmEpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVuZGVyIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZW5kZXIgPSB0aGlzLnZpZXdlci5zaG91bGRSZW5kZXIoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlckxvZ0NvdW50IDw9IDMpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zygnc2hvdWxkUmVuZGVyIGNoZWNrJywgeyBzaG91bGRSZW5kZXIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNob3VsZFJlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdlci5jb25zZWN1dGl2ZVJlbmRlckZyYW1lcysrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5yZW5kZXJOZXh0RnJhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIuc2VsZkRyaXZlbk1vZGVSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzdGFydCB2aWV3ZXIgdW5sZXNzIGl0IGlzIGluIHNlbGYgZHJpdmVuIG1vZGUuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgaGV4IGNvbG9yIHN0cmluZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQ29sb3Igc3RyaW5nIHRvIHZhbGlkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgaXNIZXhDb2xvclN0cmljdCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgaGV4Q29sb3JSZWdleCA9IC9eKCN8MHgpWzAtOUEtRmEtZl17Nn0kL2k7XHJcbiAgICAgICAgcmV0dXJuIGhleENvbG9yUmVnZXgudGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSBleHByZXNzaW9uIGRhdGEgdG8gbWVzaFxyXG4gICAgICovXHJcbiAgICBzZXRFeHByZXNzaW9uKCkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBzcGxhdCBtZXNoIGJsZW5kc2hhcGVzXHJcbiAgICAgICAgaWYgKHRoaXMudmlld2VyPy5zcGxhdE1lc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIuc3BsYXRNZXNoLmJzV2VpZ2h0ID0gdGhpcy5leHByZXNzaW9uRGF0YTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBleWUgYmxpbmsgdW5pZm9ybXMgZm9yIHNtb290aCBpcmlzIGZhZGVcclxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLnZpZXdlci5zcGxhdE1lc2gubWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbD8udW5pZm9ybXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV5ZUJsaW5rTGVmdCA9IHRoaXMuZXhwcmVzc2lvbkRhdGEuZXllQmxpbmtMZWZ0IHx8IDAuMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV5ZUJsaW5rUmlnaHQgPSB0aGlzLmV4cHJlc3Npb25EYXRhLmV5ZUJsaW5rUmlnaHQgfHwgMC4wO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLnVuaWZvcm1zLmV5ZUJsaW5rTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmV5ZUJsaW5rTGVmdC52YWx1ZSA9IGV5ZUJsaW5rTGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC51bmlmb3Jtcy5leWVCbGlua1JpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuZXllQmxpbmtSaWdodC52YWx1ZSA9IGV5ZUJsaW5rUmlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBtb3JwaCB0YXJnZXRzIG9uIGF2YXRhciBtb2RlbFxyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pc01lc2ggfHwgb2JqZWN0LmlzU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3JwaEF0dHJpYnV0ZXMgPSBvYmplY3QuZ2VvbWV0cnk/Lm1vcnBoQXR0cmlidXRlcztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNNb3JwaFRhcmdldHMgPSBtb3JwaEF0dHJpYnV0ZXMgJiYgT2JqZWN0LmtleXMobW9ycGhBdHRyaWJ1dGVzKS5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNNb3JwaFRhcmdldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9ycGhUYXJnZXREaWN0aW9uYXJ5ID0gb2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb3JwaFRhcmdldCBpbiBtb3JwaFRhcmdldERpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG1vcnBoVGFyZ2V0RGljdGlvbmFyeVttb3JwaFRhcmdldF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5leHByZXNzaW9uRGF0YVttb3JwaFRhcmdldF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t0YXJnZXRdID0gTWF0aC5tYXgoMC4wLCBNYXRoLm1pbigxLjAsIGRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBtb2RlbCB3aXRoIGFuaW1hdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhOYW1lIC0gUGF0aCB3aXRoaW4gWklQXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYW5pbWF0aW9uQ29uZmlnIC0gQW5pbWF0aW9uIGNvbmZpZ3VyYXRpb25cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb3Rpb25Db25maWcgLSBNb3Rpb24gY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkTW9kZWwocGF0aE5hbWUsIGFuaW1hdGlvbkNvbmZpZywgbW90aW9uQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgW3NraW5Nb2RlbCwgYW5pY2xpcCwgaW5kZXhlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIHRoaXMudW5wYWNrQW5kTG9hZEdsYihwYXRoTmFtZSArICcvc2tpbi5nbGInKSxcclxuICAgICAgICAgICAgdGhpcy51bnBhY2tBbmRMb2FkR2xiKHBhdGhOYW1lICsgJy9hbmltYXRpb24uZ2xiJyksXHJcbiAgICAgICAgICAgIHRoaXMudW5wYWNrQW5kTG9hZEpzb24ocGF0aE5hbWUgKyAnL3ZlcnRleF9vcmRlci5qc29uJylcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnZpZXdlcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbmRlciB2aWV3ZXIgaXMgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2tpbk1vZGVsU2tpbm5lZE1lc2g7XHJcbiAgICAgICAgbGV0IGJvbmVSb290O1xyXG5cclxuICAgICAgICBza2luTW9kZWwudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0LmlzU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgICAgIHNraW5Nb2RlbFNraW5uZWRNZXNoID0gb2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBCb25lICYmIG9iamVjdC5uYW1lID09PSAnaGlwJykge1xyXG4gICAgICAgICAgICAgICAgYm9uZVJvb3QgPSBvYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3ZXIuc29ydGVkSW5kZXhlcyA9IGluZGV4ZXM7XHJcblxyXG4gICAgICAgIGlmIChza2luTW9kZWxTa2lubmVkTWVzaCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5nYXVzc2lhblNwbGF0Q291bnQgPSBza2luTW9kZWxTa2lubmVkTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52aWV3ZXIuYXZhdGFyTWVzaCA9IHNraW5Nb2RlbDtcclxuICAgICAgICB0aGlzLnZpZXdlci5za2luTW9kZWwgPSBza2luTW9kZWxTa2lubmVkTWVzaDtcclxuICAgICAgICB0aGlzLnZpZXdlci5ib25lUm9vdCA9IGJvbmVSb290O1xyXG5cclxuICAgICAgICAvLyBTZXR1cCBhbmltYXRpb25cclxuICAgICAgICB0aGlzLm1peGVyID0gbmV3IEFuaW1hdGlvbk1peGVyKHNraW5Nb2RlbCk7XHJcbiAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG5ldyBBbmltYXRpb25NYW5hZ2VyKHRoaXMubWl4ZXIsIGFuaWNsaXAsIGFuaW1hdGlvbkNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5tb3Rpb25jZmcgPSBtb3Rpb25Db25maWc7XHJcblxyXG4gICAgICAgIC8vIFNldCB0b3RhbEZyYW1lcyBmcm9tIGFuaW1hdGlvbiBjbGlwcyBvciBkZWZhdWx0IHRvIDFcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhbmljbGlwKSAmJiBhbmljbGlwLmxlbmd0aCA+IDAgJiYgYW5pY2xpcFswXS5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci50b3RhbEZyYW1lcyA9IE1hdGguZmxvb3IoYW5pY2xpcFswXS5kdXJhdGlvbiAqIDMwKTsgLy8gMzAgZnBzXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ1RvdGFsIGZyYW1lcyBjYWxjdWxhdGVkJywgeyB0b3RhbEZyYW1lczogdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgfSk7XHJcblxyXG4gICAgICAgIGlmIChza2luTW9kZWxTa2lubmVkTWVzaCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci51cGRhdGVNb3JwaFRhcmdldChza2luTW9kZWxTa2lubmVkTWVzaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZpZXdlci50aHJlZVNjZW5lLmFkZChza2luTW9kZWwpO1xyXG4gICAgICAgIHNraW5Nb2RlbC52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChza2luTW9kZWxTa2lubmVkTWVzaCkge1xyXG4gICAgICAgICAgICBza2luTW9kZWxTa2lubmVkTWVzaC5za2VsZXRvbi5jb21wdXRlQm9uZVRleHR1cmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhY2sgZmlsZSBmcm9tIFpJUCBhbmQgY3JlYXRlIGEgYmxvYiBVUkxcclxuICAgICAqXHJcbiAgICAgKiBVc2VzIEJsb2JVcmxNYW5hZ2VyIHRvIHRyYWNrIGJsb2IgVVJMcyBmb3IgYXV0b21hdGljIGNsZWFudXAuXHJcbiAgICAgKiBDYWNoZXMgVVJMcyBmb3IgcmVwZWF0ZWQgYWNjZXNzIHRvIHRoZSBzYW1lIGZpbGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHRvIGZpbGUgd2l0aGluIFpJUCBhcmNoaXZlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBCbG9iIFVSTCB0byB0aGUgZmlsZVxyXG4gICAgICogQHRocm93cyB7QXNzZXRMb2FkRXJyb3J9IElmIGZpbGUgY2Fubm90IGJlIHVucGFja2VkXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHVucGFja0ZpbGVBc0Jsb2IocGF0aCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiBjYWNoZWQgVVJMIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICh0aGlzLnppcFVybHMudXJscy5oYXMocGF0aCkpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSZXR1cm5pbmcgY2FjaGVkIGJsb2IgVVJMJywgeyBwYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy56aXBVcmxzLnVybHMuZ2V0KHBhdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdVbnBhY2tpbmcgZmlsZSBmcm9tIFpJUCcsIHsgcGF0aCB9KTtcclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCBmaWxlIGZyb20gWklQXHJcbiAgICAgICAgY29uc3QgZmlsZUVudHJ5ID0gdGhpcy56aXBVcmxzLnppcD8uZmlsZShwYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGVFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmlsZSBub3QgZm91bmQgaW4gWklQIGFyY2hpdmU6ICR7cGF0aH1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1vZGVsRmlsZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtb2RlbEZpbGUgPSBhd2FpdCBmaWxlRW50cnkuYXN5bmMoJ2Jsb2InKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGV4dHJhY3QgZmlsZSBmcm9tIFpJUDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbW9kZWxGaWxlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgIGBGaWxlIGV4dHJhY3RlZCBidXQgYmxvYiBpcyBlbXB0eTogJHtwYXRofWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYmxvYiBVUkwgdXNpbmcgQmxvYlVybE1hbmFnZXIgZm9yIHRyYWNraW5nXHJcbiAgICAgICAgY29uc3QgbWltZVR5cGUgPSB0aGlzLl9nZXRNaW1lVHlwZShwYXRoKTtcclxuICAgICAgICBjb25zdCBtb2RlbFVybCA9IHRoaXMuX2Jsb2JVcmxNYW5hZ2VyLmNyZWF0ZUJsb2JVcmwoXHJcbiAgICAgICAgICAgIG1vZGVsRmlsZSxcclxuICAgICAgICAgICAgbWltZVR5cGUsXHJcbiAgICAgICAgICAgIGB6aXA6JHtwYXRofWBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSBmb3IgZnV0dXJlIGFjY2Vzc1xyXG4gICAgICAgIHRoaXMuemlwVXJscy51cmxzLnNldChwYXRoLCBtb2RlbFVybCk7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdCbG9iIFVSTCBjcmVhdGVkIGFuZCBjYWNoZWQnLCB7IHBhdGgsIHVybDogbW9kZWxVcmwuc3Vic3RyaW5nKDAsIDUwKSB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGVsVXJsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBKU09OIGZpbGUgZnJvbSBaSVAgYXJjaGl2ZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gUGF0aCB0byBKU09OIGZpbGUgd2l0aGluIFpJUCBhcmNoaXZlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFBhcnNlZCBKU09OIG9iamVjdCwgb3IgbnVsbCBpZiBmaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAqIEB0aHJvd3Mge1BhcnNlRXJyb3J9IElmIEpTT04gcGFyc2luZyBmYWlsc1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX2xvYWRKc29uRnJvbVppcChwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdHRlbXB0aW5nIHRvIGxvYWQgSlNPTiBmcm9tIFpJUCcsIHsgcGF0aCB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgaW4gWklQXHJcbiAgICAgICAgY29uc3QgZmlsZUVudHJ5ID0gdGhpcy56aXBVcmxzLnppcD8uZmlsZShwYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGVFbnRyeSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0pTT04gZmlsZSBub3QgZm91bmQgaW4gWklQLCByZXR1cm5pbmcgbnVsbCcsIHsgcGF0aCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFeHRyYWN0IGZpbGUgYXMgdGV4dFxyXG4gICAgICAgIGxldCBqc29uVGV4dDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBqc29uVGV4dCA9IGF3YWl0IGZpbGVFbnRyeS5hc3luYygndGV4dCcpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBleHRyYWN0IEpTT04gZmlsZSBmcm9tIFpJUDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBhcnNlIEpTT05cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoanNvblRleHQpO1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0pTT04gZmlsZSBsb2FkZWQgc3VjY2Vzc2Z1bGx5JywgeyBwYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIEpTT04gZmlsZTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhY2sgR0xCIGZpbGUgZnJvbSBaSVAgYW5kIGxvYWQgaXRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFBhdGggdG8gR0xCIGZpbGUgd2l0aGluIFpJUCBhcmNoaXZlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxUSFJFRS5Hcm91cHxUSFJFRS5BbmltYXRpb25DbGlwW10+fSBMb2FkZWQgR0xURiBtb2RlbFxyXG4gICAgICogQHRocm93cyB7QXNzZXRMb2FkRXJyb3J9IElmIGZpbGUgY2Fubm90IGJlIHVucGFja2VkIG9yIGxvYWRlZFxyXG4gICAgICovXHJcbiAgICBhc3luYyB1bnBhY2tBbmRMb2FkR2xiKHBhdGgpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gY2FjaGVkIFVSTCBpZiBhdmFpbGFibGVcclxuICAgICAgICBpZiAodGhpcy56aXBVcmxzLnVybHMuaGFzKHBhdGgpKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgY2FjaGVkIEdMQiBVUkwnLCB7IHBhdGggfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkxvYWRHTFRGKHRoaXMuemlwVXJscy51cmxzLmdldChwYXRoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ1VucGFja2luZyBHTEIgZnJvbSBaSVAnLCB7IHBhdGggfSk7XHJcblxyXG4gICAgICAgIC8vIEV4dHJhY3QgZmlsZSBmcm9tIFpJUCBhcyBBcnJheUJ1ZmZlclxyXG4gICAgICAgIGNvbnN0IGZpbGVFbnRyeSA9IHRoaXMuemlwVXJscy56aXA/LmZpbGUocGF0aCk7XHJcbiAgICAgICAgaWYgKCFmaWxlRW50cnkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEdMQiBmaWxlIG5vdCBmb3VuZCBpbiBaSVAgYXJjaGl2ZTogJHtwYXRofWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbW9kZWxGaWxlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG1vZGVsRmlsZSA9IGF3YWl0IGZpbGVFbnRyeS5hc3luYygnYXJyYXlidWZmZXInKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGV4dHJhY3QgR0xCIGZyb20gWklQOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFtb2RlbEZpbGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEdMQiBleHRyYWN0ZWQgYnV0IEFycmF5QnVmZmVyIGlzIGVtcHR5OiAke3BhdGh9YCxcclxuICAgICAgICAgICAgICAgIHBhdGhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBibG9iIFVSTCB1c2luZyBCbG9iVXJsTWFuYWdlclxyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbbW9kZWxGaWxlXSwgeyB0eXBlOiAnbW9kZWwvZ2x0Zi1iaW5hcnknIH0pO1xyXG4gICAgICAgIGNvbnN0IG1vZGVsVXJsID0gdGhpcy5fYmxvYlVybE1hbmFnZXIuY3JlYXRlQmxvYlVybChcclxuICAgICAgICAgICAgYmxvYixcclxuICAgICAgICAgICAgJ21vZGVsL2dsdGYtYmluYXJ5JyxcclxuICAgICAgICAgICAgYHppcDoke3BhdGh9YFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIENhY2hlIGZvciBmdXR1cmUgYWNjZXNzXHJcbiAgICAgICAgdGhpcy56aXBVcmxzLnVybHMuc2V0KHBhdGgsIG1vZGVsVXJsKTtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0dMQiBibG9iIFVSTCBjcmVhdGVkIGFuZCBjYWNoZWQnLCB7IHBhdGggfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLkxvYWRHTFRGKG1vZGVsVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBNSU1FIHR5cGUgZnJvbSBmaWxlIGV4dGVuc2lvblxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gRmlsZSBwYXRoXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBNSU1FIHR5cGVcclxuICAgICAqL1xyXG4gICAgX2dldE1pbWVUeXBlKHBhdGgpIHtcclxuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBwYXRoLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgbWltZVR5cGVzID0ge1xyXG4gICAgICAgICAgICAncGx5JzogJ21vZGVsL3BseScsXHJcbiAgICAgICAgICAgICdnbGInOiAnbW9kZWwvZ2x0Zi1iaW5hcnknLFxyXG4gICAgICAgICAgICAnZ2x0Zic6ICdtb2RlbC9nbHRmK2pzb24nLFxyXG4gICAgICAgICAgICAnanNvbic6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgJ2Jpbic6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxyXG4gICAgICAgICAgICAncG5nJzogJ2ltYWdlL3BuZycsXHJcbiAgICAgICAgICAgICdqcGcnOiAnaW1hZ2UvanBlZycsXHJcbiAgICAgICAgICAgICdqcGVnJzogJ2ltYWdlL2pwZWcnXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbWltZVR5cGVzW2V4dGVuc2lvbl0gfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhY2sgYW5kIHBhcnNlIEpTT04gZmlsZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHdpdGhpbiBaSVBcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHVucGFja0FuZExvYWRKc29uKHBhdGgpIHtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy56aXBVcmxzLnppcD8uZmlsZShwYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlIG5vdCBmb3VuZCBpbiBaSVA6ICR7cGF0aH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QganNvbkZpbGUgPSBhd2FpdCBmaWxlLmFzeW5jKCdzdHJpbmcnKTtcclxuICAgICAgICBpZiAoIWpzb25GaWxlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlYWQgZmlsZSBmcm9tIFpJUDogJHtwYXRofWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uRmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIEdMVEYgZmlsZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byBHTFRGL0dMQiBmaWxlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxUSFJFRS5Hcm91cHxUSFJFRS5BbmltYXRpb25DbGlwW10+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBMb2FkR0xURih1cmwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpO1xyXG4gICAgICAgICAgICBsb2FkZXIubG9hZChcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIChnbHRmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdsdGYuYW5pbWF0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2x0Zi5hbmltYXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdsdGYuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHYXVzc2lhblNwbGF0UmVuZGVyZXI7XHJcbiIsIi8qKlxyXG4gKiBGbGFtZUNvbnN0YW50c1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogRkxBTUUtc3BlY2lmaWMgY29uc3RhbnRzIGZvciBwYXJhbWV0cmljIGhlYWQgbW9kZWwuXHJcbiAqIFxyXG4gKiBOb3RlOiBHZW5lcmFsIGVuZ2luZSBjb25zdGFudHMgKE1heFNjZW5lcywgZXRjLikgYXJlIGluIGVudW1zL0VuZ2luZUNvbnN0YW50cy5qc1xyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBDb25zdGFudHMgPSB7XHJcbiAgICAvLyBGTEFNRSBtb2RlbCBjb25zdGFudHNcclxuICAgIEZsYW1lQm9uZXNDb3VudDogNSwgIC8vIHJvb3QsIG5lY2ssIGphdywgbGVmdEV5ZSwgcmlnaHRFeWVcclxuICAgIERlZmF1bHRCbGVuZHNoYXBlQ291bnQ6IDUyLCAgLy8gQVJLaXQgYmxlbmRzaGFwZXNcclxuICAgIFxyXG4gICAgLy8gVGV4dHVyZSBzaXplcyBmb3IgRkxBTUUgZGF0YVxyXG4gICAgRmxhbWVNb2RlbFRleHR1cmVTaXplOiB7IHdpZHRoOiA0MDk2LCBoZWlnaHQ6IDIwNDggfSxcclxuICAgIEJvbmVUZXh0dXJlU2l6ZTogeyB3aWR0aDogNCwgaGVpZ2h0OiAzMiB9LFxyXG4gICAgQm9uZVdlaWdodFRleHR1cmVTaXplOiB7IHdpZHRoOiA1MTIsIGhlaWdodDogNTEyIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbnN0YW50cztcclxuIiwiLyoqXHJcbiAqIEZMQU1FIFV0aWxpdHkgRnVuY3Rpb25zXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBDb250YWlucyBlbmNvZGluZyBmdW5jdGlvbnMgYW5kIGhlbHBlcnMgZm9yIEdQVSB0ZXh0dXJlIGRhdGEuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEVuY29kZSBmbG9hdCBhcyB1aW50MzIgZm9yIEdQVSB0ZXh0dXJlIHN0b3JhZ2VcclxuICogVXNlcyBGbG9hdDMyQXJyYXkvSW50MzJBcnJheSB2aWV3IHRyaWNrIHRvIHJlaW50ZXJwcmV0IGZsb2F0IGJpdHMgYXMgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHVpbnRFbmNvZGVkRmxvYXQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBmbG9hdFZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KDEpO1xyXG4gICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZmxvYXRWaWV3LmJ1ZmZlcik7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGYpIHtcclxuICAgICAgICBmbG9hdFZpZXdbMF0gPSBmO1xyXG4gICAgICAgIHJldHVybiBpbnQzMlZpZXdbMF07XHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgUkdCQSB2YWx1ZXMgdG8gYSBzaW5nbGUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJnYmFUb0ludGVnZXIgPSBmdW5jdGlvbihyLCBnLCBiLCBhKSB7XHJcbiAgICByZXR1cm4gciArIChnIDw8IDgpICsgKGIgPDwgMTYpICsgKGEgPDwgMjQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgUkdCQSBhcnJheSBhdCBvZmZzZXQgdG8gYSBzaW5nbGUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJnYmFBcnJheVRvSW50ZWdlciA9IGZ1bmN0aW9uKGFyciwgb2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gYXJyW29mZnNldF0gKyAoYXJyW29mZnNldCArIDFdIDw8IDgpICsgKGFycltvZmZzZXQgKyAyXSA8PCAxNikgKyAoYXJyW29mZnNldCArIDNdIDw8IDI0KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb25zdGFudHMgZm9yIHRleHR1cmUgZGF0YSBsYXlvdXRcclxuICovXHJcbmV4cG9ydCBjb25zdCBUZXh0dXJlQ29uc3RhbnRzID0ge1xyXG4gICAgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUw6IDQsXHJcbiAgICBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVDogNCxcclxuICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9TVE9SRUQ6IDIsXHJcbiAgICBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQUxMT0NBVEVEOiA0LFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEOiAyLFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfQUxMT0NBVEVEOiA0LFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUOiA2LFxyXG4gICAgU0NBTEVTX1JPVEFUSU9OU19FTEVNRU5UU19QRVJfVEVYRUw6IDQsXHJcbiAgICBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTDogMSxcclxuICAgIE1BWF9URVhUVVJFX1RFWEVMUzogNDA5NiAqIDQwOTZcclxufTtcclxuIiwiLyoqXHJcbiAqIEZsYW1lVGV4dHVyZU1hbmFnZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBnYXVzc2lhbi1zcGxhdC1yZW5kZXJlci1mb3ItbGFtXHJcbiAqIFxyXG4gKiBNYW5hZ2VzIEdQVSB0ZXh0dXJlcyBmb3IgRkxBTUUgcGFyYW1ldHJpYyBoZWFkIG1vZGVsOlxyXG4gKiAtIEJsZW5kc2hhcGUgbW9ycGggdGFyZ2V0IGRhdGEgdGV4dHVyZXNcclxuICogLSBCb25lIG1hdHJpeCB0ZXh0dXJlcyBmb3Igc2tlbGV0b24gYW5pbWF0aW9uXHJcbiAqIC0gTEJTIHdlaWdodCB0ZXh0dXJlcyBmb3Igc2tpbm5pbmdcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgVmVjdG9yMixcclxuICAgIERhdGFUZXh0dXJlLFxyXG4gICAgUkdCQUludGVnZXJGb3JtYXQsXHJcbiAgICBVbnNpZ25lZEludFR5cGVcclxufSBmcm9tICd0aHJlZSc7XHJcblxyXG5pbXBvcnQgeyB1aW50RW5jb2RlZEZsb2F0IH0gZnJvbSAnLi91dGlscy5qcyc7XHJcblxyXG4vKipcclxuICogQnVpbGQgdGhlIEZMQU1FIG1vZGVsIHRleHR1cmUgY29udGFpbmluZyBibGVuZHNoYXBlIHBvc2l0aW9uc1xyXG4gKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBmbGFtZU1vZGVsIC0gVGhlIEZMQU1FIG1lc2ggd2l0aCBtb3JwaCB0YXJnZXRzXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9IG1hdGVyaWFsIC0gVGhlIHNwbGF0IG1hdGVyaWFsIHRvIHVwZGF0ZSB1bmlmb3Jtc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gZ2F1c3NpYW5TcGxhdENvdW50IC0gTnVtYmVyIG9mIGdhdXNzaWFuIHNwbGF0c1xyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUZXh0dXJlIGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRNb2RlbFRleHR1cmUoZmxhbWVNb2RlbCwgbWF0ZXJpYWwsIGdhdXNzaWFuU3BsYXRDb3VudCkge1xyXG4gICAgY29uc3QgZmxhbWVNb2RlbFRleFNpemUgPSBuZXcgVmVjdG9yMig0MDk2LCAyMDQ4KTtcclxuXHJcbiAgICBjb25zdCBzaGFwZWRNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgbGV0IHNoYXBlZE1lc2hBcnJheSA9IFtdO1xyXG4gICAgY29uc3QgcG9pbnROdW0gPSBzaGFwZWRNZXNoLmxlbmd0aCAvIDM7XHJcbiAgICBjb25zdCBic0xlbmd0aCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDtcclxuXHJcbiAgICAvLyBTb3J0IG1vcnBoIHRhcmdldHMgYnkgZGljdGlvbmFyeSBvcmRlclxyXG4gICAgY29uc3QgbW9ycGhUYXJnZXROYW1lcyA9IE9iamVjdC5rZXlzKGZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5KTtcclxuICAgIG1vcnBoVGFyZ2V0TmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSW5kZXggPSBmbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuYW1lXTtcclxuICAgICAgICBjb25zdCBic01lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbltvcmlnaW5hbEluZGV4XTtcclxuICAgICAgICBzaGFwZWRNZXNoQXJyYXkgPSBzaGFwZWRNZXNoQXJyYXkuY29uY2F0KEFycmF5LmZyb20oYnNNZXNoLmFycmF5KSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQWRkIGJhc2UgbWVzaCBwb3NpdGlvbnNcclxuICAgIHNoYXBlZE1lc2hBcnJheSA9IHNoYXBlZE1lc2hBcnJheS5jb25jYXQoQXJyYXkuZnJvbShzaGFwZWRNZXNoKSk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRleHR1cmUgZGF0YVxyXG4gICAgY29uc3QgZmxhbWVNb2RlbERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGZsYW1lTW9kZWxUZXhTaXplLnggKiBmbGFtZU1vZGVsVGV4U2l6ZS55ICogNCk7XHJcbiAgICBjb25zdCBmbGFtZU1vZGVsRGF0YUludCA9IG5ldyBVaW50MzJBcnJheShmbGFtZU1vZGVsVGV4U2l6ZS54ICogZmxhbWVNb2RlbFRleFNpemUueSAqIDQpO1xyXG4gICAgXHJcbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IHBvaW50TnVtICogKGJzTGVuZ3RoICsgMSk7IGMrKykge1xyXG4gICAgICAgIGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMF0gPSBzaGFwZWRNZXNoQXJyYXlbYyAqIDMgKyAwXTtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YVtjICogNCArIDFdID0gc2hhcGVkTWVzaEFycmF5W2MgKiAzICsgMV07XHJcbiAgICAgICAgZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAyXSA9IHNoYXBlZE1lc2hBcnJheVtjICogMyArIDJdO1xyXG5cclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDBdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDBdKTtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDFdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDFdKTtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDJdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDJdKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmbGFtZU1vZGVsVGV4ID0gbmV3IERhdGFUZXh0dXJlKFxyXG4gICAgICAgIGZsYW1lTW9kZWxEYXRhSW50LFxyXG4gICAgICAgIGZsYW1lTW9kZWxUZXhTaXplLngsXHJcbiAgICAgICAgZmxhbWVNb2RlbFRleFNpemUueSxcclxuICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCxcclxuICAgICAgICBVbnNpZ25lZEludFR5cGVcclxuICAgICk7XHJcbiAgICBmbGFtZU1vZGVsVGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgIGZsYW1lTW9kZWxUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBtYXRlcmlhbCB1bmlmb3Jtc1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuZmxhbWVNb2RlbFRleHR1cmUudmFsdWUgPSBmbGFtZU1vZGVsVGV4O1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuZmxhbWVNb2RlbFRleHR1cmVTaXplLnZhbHVlLmNvcHkoZmxhbWVNb2RlbFRleFNpemUpO1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuZ2F1c3NpYW5TcGxhdENvdW50LnZhbHVlID0gZ2F1c3NpYW5TcGxhdENvdW50O1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IGZsYW1lTW9kZWxEYXRhSW50LFxyXG4gICAgICAgIHRleHR1cmU6IGZsYW1lTW9kZWxUZXgsXHJcbiAgICAgICAgc2l6ZTogZmxhbWVNb2RlbFRleFNpemUsXHJcbiAgICAgICAgYmFzZURhdGE6IHsgZmxhbWVNb2RlbFBvczogZmxhbWVNb2RlbERhdGEgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIGJvbmUgbWF0cml4IHRleHR1cmUgZm9yIHNrZWxldG9uIGFuaW1hdGlvblxyXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gYm9uZXNNYXRyaXggLSBGbGF0dGVuZWQgYm9uZSBtYXRyaWNlc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYm9uZXNOdW0gLSBOdW1iZXIgb2YgYm9uZXNcclxuICogQHBhcmFtIHtvYmplY3R9IGJzV2VpZ2h0IC0gQmxlbmRzaGFwZSB3ZWlnaHRzIG9iamVjdFxyXG4gKiBAcGFyYW0ge29iamVjdH0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5IC0gTWFwcyBibGVuZHNoYXBlIG5hbWVzIHRvIGluZGljZXNcclxuICogQHBhcmFtIHtUSFJFRS5Ta2lubmVkTWVzaH0gZmxhbWVNb2RlbCAtIFRoZSBGTEFNRSBtZXNoXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9IG1hdGVyaWFsIC0gVGhlIHNwbGF0IG1hdGVyaWFsXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlRmxhbWVNb2RlbCAtIFVzZSBGTEFNRSBtb2RlXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IFRleHR1cmUgZGF0YSBvYmplY3RcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEJvbmVNYXRyaXhUZXh0dXJlKFxyXG4gICAgYm9uZXNNYXRyaXgsXHJcbiAgICBib25lc051bSxcclxuICAgIGJzV2VpZ2h0LFxyXG4gICAgbW9ycGhUYXJnZXREaWN0aW9uYXJ5LFxyXG4gICAgZmxhbWVNb2RlbCxcclxuICAgIG1hdGVyaWFsLFxyXG4gICAgdXNlRmxhbWVNb2RlbFxyXG4pIHtcclxuICAgIGlmICghYnNXZWlnaHQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIGJvbmVzTnVtICsgZXhwcmVzc2lvbkJTTnVtIC8gNCA9IDMwLCBzbyB0ZXh0dXJlIGhlaWdodCBpcyAzMlxyXG4gICAgY29uc3QgYm9uZVRleHR1cmVTaXplID0gbmV3IFZlY3RvcjIoNCwgMzIpO1xyXG4gICAgY29uc3QgYm9uZU1hdHJpeFRleHR1cmVEYXRhID0gbmV3IEZsb2F0MzJBcnJheShib25lc01hdHJpeCk7XHJcbiAgICBjb25zdCBib25lTWF0cml4VGV4dHVyZURhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoYm9uZVRleHR1cmVTaXplLnggKiBib25lVGV4dHVyZVNpemUueSAqIDQpO1xyXG5cclxuICAgIGlmICh1c2VGbGFtZU1vZGVsKSB7XHJcbiAgICAgICAgLy8gRW5jb2RlIGJvbmUgbWF0cmljZXNcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGJvbmVzTnVtICogMTY7IGMrKykge1xyXG4gICAgICAgICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnRbY10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVNYXRyaXhUZXh0dXJlRGF0YVtjXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNldCBza2VsZXRvbiB1bmlmb3Jtc1xyXG4gICAgICAgIGlmIChmbGFtZU1vZGVsICYmIGZsYW1lTW9kZWwuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUwLnZhbHVlID0gZmxhbWVNb2RlbC5za2VsZXRvbi5ib25lVGV4dHVyZTtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeC52YWx1ZSA9IGZsYW1lTW9kZWwuYmluZE1hdHJpeDtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeEludmVyc2UudmFsdWUgPSBmbGFtZU1vZGVsLmJpbmRNYXRyaXhJbnZlcnNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbmNvZGUgYmxlbmRzaGFwZSB3ZWlnaHRzXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBic1dlaWdodCkge1xyXG4gICAgICAgIGlmIChPYmplY3QuaGFzT3duKGJzV2VpZ2h0LCBrZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYnNXZWlnaHRba2V5XTtcclxuICAgICAgICAgICAgY29uc3QgaWR4ID0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5W2tleV07XHJcbiAgICAgICAgICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludFtpZHggKyBib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib25lTWF0cml4VGV4ID0gbmV3IERhdGFUZXh0dXJlKFxyXG4gICAgICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCxcclxuICAgICAgICBib25lVGV4dHVyZVNpemUueCxcclxuICAgICAgICBib25lVGV4dHVyZVNpemUueSxcclxuICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCxcclxuICAgICAgICBVbnNpZ25lZEludFR5cGVcclxuICAgICk7XHJcbiAgICBib25lTWF0cml4VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgIGJvbmVNYXRyaXhUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlLnZhbHVlID0gYm9uZU1hdHJpeFRleDtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGJvbmVUZXh0dXJlU2l6ZSk7XHJcbiAgICBtYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YTogYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgIHRleHR1cmU6IGJvbmVNYXRyaXhUZXgsXHJcbiAgICAgICAgc2l6ZTogYm9uZVRleHR1cmVTaXplLFxyXG4gICAgICAgIGJhc2VEYXRhOiB7IGJvbmVNYXRyaXg6IGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGJvbmUgbWF0cml4IHRleHR1cmUgd2l0aCBuZXcgYW5pbWF0aW9uIGRhdGFcclxuICogQHBhcmFtIHtvYmplY3R9IHNwbGF0RGF0YVRleHR1cmVzIC0gVGV4dHVyZSBkYXRhIHN0b3JhZ2VcclxuICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGJvbmVzTWF0cml4IC0gVXBkYXRlZCBib25lIG1hdHJpY2VzXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBib25lc051bSAtIE51bWJlciBvZiBib25lc1xyXG4gKiBAcGFyYW0ge29iamVjdH0gYnNXZWlnaHQgLSBVcGRhdGVkIGJsZW5kc2hhcGUgd2VpZ2h0c1xyXG4gKiBAcGFyYW0ge29iamVjdH0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5IC0gQmxlbmRzaGFwZSBuYW1lIHRvIGluZGV4IG1hcFxyXG4gKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBmbGFtZU1vZGVsIC0gVGhlIEZMQU1FIG1lc2hcclxuICogQHBhcmFtIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH0gbWF0ZXJpYWwgLSBUaGUgc3BsYXQgbWF0ZXJpYWxcclxuICogQHBhcmFtIHtib29sZWFufSB1cGRhdGVGbGFtZUJvbmVNYXRyaXggLSBXaGV0aGVyIHRvIHVwZGF0ZSBib25lIG1hdHJpY2VzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQm9uZU1hdHJpeFRleHR1cmUoXHJcbiAgICBzcGxhdERhdGFUZXh0dXJlcyxcclxuICAgIGJvbmVzTWF0cml4LFxyXG4gICAgYm9uZXNOdW0sXHJcbiAgICBic1dlaWdodCxcclxuICAgIG1vcnBoVGFyZ2V0RGljdGlvbmFyeSxcclxuICAgIGZsYW1lTW9kZWwsXHJcbiAgICBtYXRlcmlhbCxcclxuICAgIHVwZGF0ZUZsYW1lQm9uZU1hdHJpeCA9IGZhbHNlXHJcbikge1xyXG4gICAgaWYgKCFic1dlaWdodCB8fCAhbW9ycGhUYXJnZXREaWN0aW9uYXJ5KSByZXR1cm47XHJcblxyXG4gICAgaWYgKHVwZGF0ZUZsYW1lQm9uZU1hdHJpeCkge1xyXG4gICAgICAgIGNvbnN0IGJvbmVNYXRyaXhUZXh0dXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYm9uZXNNYXRyaXgpO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYm9uZXNOdW0gKiAxNjsgYysrKSB7XHJcbiAgICAgICAgICAgIHNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J11bY10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVNYXRyaXhUZXh0dXJlRGF0YVtjXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBibGVuZHNoYXBlIHdlaWdodHNcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGJzV2VpZ2h0KSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oYnNXZWlnaHQsIGtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBic1dlaWdodFtrZXldO1xyXG4gICAgICAgICAgICBjb25zdCBpZHggPSBtb3JwaFRhcmdldERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVNYXRyaXgnXVtpZHggKyBib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgdGV4dHVyZSBkYXRhXHJcbiAgICBzcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ10uZGF0YSA9IHNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J107XHJcbiAgICBzcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ10ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUudmFsdWUgPSBzcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ107XHJcblxyXG4gICAgLy8gVXBkYXRlIHNrZWxldG9uIHVuaWZvcm1zXHJcbiAgICBpZiAoZmxhbWVNb2RlbC5za2VsZXRvbikge1xyXG4gICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlMC52YWx1ZSA9IGZsYW1lTW9kZWwuc2tlbGV0b24uYm9uZVRleHR1cmU7XHJcbiAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeC52YWx1ZSA9IGZsYW1lTW9kZWwuYmluZE1hdHJpeDtcclxuICAgICAgICBtYXRlcmlhbC51bmlmb3Jtcy5iaW5kTWF0cml4SW52ZXJzZS52YWx1ZSA9IGZsYW1lTW9kZWwuYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIExCUyB3ZWlnaHQgdGV4dHVyZSBmb3Igc2tpbiBkZWZvcm1hdGlvblxyXG4gKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBmbGFtZU1vZGVsIC0gVGhlIEZMQU1FIG1lc2hcclxuICogQHBhcmFtIHtBcnJheX0gYm9uZXNXZWlnaHQgLSBQZXItdmVydGV4IGJvbmUgd2VpZ2h0cyBhcnJheVxyXG4gKiBAcGFyYW0ge1RIUkVFLlNoYWRlck1hdGVyaWFsfSBtYXRlcmlhbCAtIFRoZSBzcGxhdCBtYXRlcmlhbFxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUZXh0dXJlIGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRCb25lV2VpZ2h0VGV4dHVyZShmbGFtZU1vZGVsLCBib25lc1dlaWdodCwgbWF0ZXJpYWwpIHtcclxuICAgIGNvbnN0IHNoYXBlZE1lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcbiAgICBjb25zdCBwb2ludE51bSA9IHNoYXBlZE1lc2gubGVuZ3RoIC8gMztcclxuICAgIFxyXG4gICAgY29uc3QgYm9uZVdlaWdodFRleHR1cmVTaXplID0gbmV3IFZlY3RvcjIoNTEyLCA1MTIpO1xyXG4gICAgY29uc3QgYm9uZVdlaWdodFRleHR1cmVEYXRhID0gbmV3IEZsb2F0MzJBcnJheShib25lV2VpZ2h0VGV4dHVyZVNpemUueCAqIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55ICogNCk7XHJcbiAgICBjb25zdCBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoYm9uZVdlaWdodFRleHR1cmVTaXplLnggKiBib25lV2VpZ2h0VGV4dHVyZVNpemUueSAqIDQpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnROdW07IGkrKykge1xyXG4gICAgICAgIC8vIFN0b3JlIDUgYm9uZSB3ZWlnaHRzIHBlciB2ZXJ0ZXggKDIgdGV4ZWxzKVxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDBdID0gYm9uZXNXZWlnaHRbaV1bMF07XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgMV0gPSBib25lc1dlaWdodFtpXVsxXTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAyXSA9IGJvbmVzV2VpZ2h0W2ldWzJdO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDNdID0gYm9uZXNXZWlnaHRbaV1bM107XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgNF0gPSBib25lc1dlaWdodFtpXVs0XTtcclxuXHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgMF0gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVzV2VpZ2h0W2ldWzBdKTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAxXSA9IHVpbnRFbmNvZGVkRmxvYXQoYm9uZXNXZWlnaHRbaV1bMV0pO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDJdID0gdWludEVuY29kZWRGbG9hdChib25lc1dlaWdodFtpXVsyXSk7XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgM10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVzV2VpZ2h0W2ldWzNdKTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyA0XSA9IHVpbnRFbmNvZGVkRmxvYXQoYm9uZXNXZWlnaHRbaV1bNF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvbmVXZWlnaHRUZXggPSBuZXcgRGF0YVRleHR1cmUoXHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS54LFxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55LFxyXG4gICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LFxyXG4gICAgICAgIFVuc2lnbmVkSW50VHlwZVxyXG4gICAgKTtcclxuICAgIGJvbmVXZWlnaHRUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgYm9uZVdlaWdodFRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVdlaWdodFRleHR1cmUudmFsdWUgPSBib25lV2VpZ2h0VGV4O1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVdlaWdodFRleHR1cmVTaXplLnZhbHVlLmNvcHkoYm9uZVdlaWdodFRleHR1cmVTaXplKTtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQsXHJcbiAgICAgICAgdGV4dHVyZTogYm9uZVdlaWdodFRleCxcclxuICAgICAgICBzaXplOiBib25lV2VpZ2h0VGV4dHVyZVNpemUsXHJcbiAgICAgICAgYmFzZURhdGE6IHsgYm9uZVdlaWdodDogYm9uZVdlaWdodFRleHR1cmVEYXRhSW50IH1cclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdXBkYXRlZCBib25lIG1hdHJpY2VzIGZyb20gc2tlbGV0b25cclxuICogQHBhcmFtIHtUSFJFRS5Ta2VsZXRvbn0gc2tlbGV0b24gLSBUaGUgc2tlbGV0b24gdG8gcmVhZCBtYXRyaWNlcyBmcm9tXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBib25lTnVtIC0gTnVtYmVyIG9mIGJvbmVzXHJcbiAqIEByZXR1cm5zIHtGbG9hdDMyQXJyYXl9IEZsYXR0ZW5lZCBib25lIG1hdHJpY2VzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXBkYXRlZEJvbmVNYXRyaWNlcyhza2VsZXRvbiwgYm9uZU51bSkge1xyXG4gICAgY29uc3QgdXBkYXRlZEJvbmVNYXRyaWNlcyA9IFtdO1xyXG4gICAgXHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvbmVOdW07IGorKykge1xyXG4gICAgICAgIGNvbnN0IGJvbmVNYXRyaXggPSBza2VsZXRvbi5ib25lc1tqXS5tYXRyaXhXb3JsZC5jbG9uZSgpXHJcbiAgICAgICAgICAgIC5tdWx0aXBseShza2VsZXRvbi5ib25lSW52ZXJzZXNbal0uY2xvbmUoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gYm9uZU1hdHJpeC5lbGVtZW50cztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRCb25lTWF0cmljZXMucHVzaChlbGVtZW50c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh1cGRhdGVkQm9uZU1hdHJpY2VzKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEZsYW1lVGV4dHVyZU1hbmFnZXIgPSB7XHJcbiAgICBidWlsZE1vZGVsVGV4dHVyZSxcclxuICAgIGJ1aWxkQm9uZU1hdHJpeFRleHR1cmUsXHJcbiAgICB1cGRhdGVCb25lTWF0cml4VGV4dHVyZSxcclxuICAgIGJ1aWxkQm9uZVdlaWdodFRleHR1cmUsXHJcbiAgICBnZXRVcGRhdGVkQm9uZU1hdHJpY2VzXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGbGFtZVRleHR1cmVNYW5hZ2VyO1xyXG4iLCIvKipcclxuICogRmxhbWVBbmltYXRvciAtIEZMQU1FIFBhcmFtZXRyaWMgSGVhZCBNb2RlbCBBbmltYXRpb24gQ29udHJvbGxlclxyXG4gKlxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKlxyXG4gKiBNYW5hZ2VzIEZMQU1FIChGYWNlcyBMZWFybmVkIHdpdGggYW4gQXJ0aWN1bGF0ZWQgTW9kZWwgYW5kIEV4cHJlc3Npb25zKSBtb2RlbCBhbmltYXRpb246XHJcbiAqIC0gU2tlbGV0YWwgYm9uZSByb3RhdGlvbiBmcm9tIEZMQU1FIHBhcmFtZXRlcnNcclxuICogLSBCbGVuZHNoYXBlIHdlaWdodCB1cGRhdGVzIGZvciBmYWNpYWwgZXhwcmVzc2lvbnNcclxuICogLSBTa2VsZXRvbi1tZXNoIHN5bmNocm9uaXphdGlvbiBmb3IgZ2F1c3NpYW4gc3BsYXQgcmVuZGVyaW5nXHJcbiAqIC0gTGluZWFyIGJsZW5kIHNraW5uaW5nIChMQlMpIHdpdGggYm9uZSB3ZWlnaHRzXHJcbiAqXHJcbiAqIEZMQU1FIHVzZXMgNSBib25lczogcm9vdCwgbmVjaywgamF3LCBsZWZ0IGV5ZSwgcmlnaHQgZXllXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIE1hdHJpeDQsXHJcbiAgICBCb25lLFxyXG4gICAgU2tlbGV0b25cclxufSBmcm9tICd0aHJlZSc7XHJcblxyXG5pbXBvcnQgeyBGbGFtZVRleHR1cmVNYW5hZ2VyIH0gZnJvbSAnLi9GbGFtZVRleHR1cmVNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBSZXNvdXJjZURpc3Bvc2VkRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZVJlcXVpcmVkUHJvcGVydGllcyB9IGZyb20gJy4uL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyc7XHJcbmltcG9ydCB7IHZlY3RvcjNQb29sLCBxdWF0ZXJuaW9uUG9vbCB9IGZyb20gJy4uL3V0aWxzL09iamVjdFBvb2wuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdGbGFtZUFuaW1hdG9yJyk7XHJcblxyXG4vKipcclxuICogRmxhbWVBbmltYXRvciAtIE1hbmFnZXMgRkxBTUUgcGFyYW1ldHJpYyBoZWFkIG1vZGVsIGFuaW1hdGlvblxyXG4gKlxyXG4gKiBQcm92aWRlcyBza2VsZXRhbCBhbmltYXRpb24sIGJsZW5kc2hhcGUgbW9ycGhpbmcsIGFuZCBtZXNoIGRlZm9ybWF0aW9uXHJcbiAqIGZvciBGTEFNRS1iYXNlZCBhdmF0YXIgaGVhZHMgd2l0aCBnYXVzc2lhbiBzcGxhdHRpbmcgcmVuZGVyaW5nLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZsYW1lQW5pbWF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBGbGFtZUFuaW1hdG9yIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7VEhSRUUuU2tlbGV0b258bnVsbH0gRkxBTUUgc2tlbGV0b24gd2l0aCA1IGJvbmVzICovXHJcbiAgICAgICAgdGhpcy5za2VsZXRvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7VEhSRUUuQm9uZVtdfG51bGx9IEFycmF5IG9mIHNrZWxldG9uIGJvbmVzICovXHJcbiAgICAgICAgdGhpcy5ib25lcyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fG51bGx9IEZMQU1FIGFuaW1hdGlvbiBwYXJhbWV0ZXJzIChyb3RhdGlvbiwgZXhwciwgbmVja19wb3NlLCBqYXdfcG9zZSwgZXllc19wb3NlKSAqL1xyXG4gICAgICAgIHRoaXMuZmxhbWVQYXJhbXMgPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge0FycmF5fG51bGx9IExpbmVhciBibGVuZCBza2lubmluZyB3ZWlnaHRzICovXHJcbiAgICAgICAgdGhpcy5sYnNXZWlnaHQgPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gQ3VycmVudCBhbmltYXRpb24gZnJhbWUgKi9cclxuICAgICAgICB0aGlzLmZyYW1lID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9IFRvdGFsIGZyYW1lcyBpbiBhbmltYXRpb24gc2VxdWVuY2UgKi9cclxuICAgICAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSBXaGV0aGVyIEZMQU1FIG1vZGUgaXMgZW5hYmxlZCAqL1xyXG4gICAgICAgIHRoaXMudXNlRmxhbWUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1RIUkVFLlNraW5uZWRNZXNofG51bGx9IFRoZSBGTEFNRSBhdmF0YXIgbWVzaCAqL1xyXG4gICAgICAgIHRoaXMuYXZhdGFyTWVzaCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSBOdW1iZXIgb2YgZ2F1c3NpYW4gc3BsYXRzIGluIHRoZSBtZXNoICovXHJcbiAgICAgICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSAwO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge2Jvb2xlYW59IFdoZXRoZXIgYW5pbWF0b3IgaGFzIGJlZW4gZGlzcG9zZWQgKi9cclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0ZsYW1lQW5pbWF0b3IgaW5zdGFuY2UgY3JlYXRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXNzZXJ0IGFuaW1hdG9yIGlzIG5vdCBkaXNwb3NlZFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0aHJvd3Mge1Jlc291cmNlRGlzcG9zZWRFcnJvcn0gSWYgYW5pbWF0b3IgaGFzIGJlZW4gZGlzcG9zZWRcclxuICAgICAqL1xyXG4gICAgX2Fzc2VydE5vdERpc3Bvc2VkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVzb3VyY2VEaXNwb3NlZEVycm9yKCdGbGFtZUFuaW1hdG9yIGhhcyBiZWVuIGRpc3Bvc2VkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbmltYXRvciB3aXRoIEZMQU1FIHBhcmFtZXRlcnMgYW5kIHNrZWxldG9uIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBTZXRzIHVwIHRoZSBGTEFNRSBhbmltYXRpb24gc3lzdGVtIHdpdGggcGFyYW1ldGVycyBmb3IgYm9uZSByb3RhdGlvbnMsXHJcbiAgICAgKiBleHByZXNzaW9ucywgYW5kIGxpbmVhciBibGVuZCBza2lubmluZyB3ZWlnaHRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmbGFtZVBhcmFtcyAtIEZMQU1FIGFuaW1hdGlvbiBwYXJhbWV0ZXJzXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmbGFtZVBhcmFtcy5yb3RhdGlvbiAtIFJvb3QgYm9uZSByb3RhdGlvbnMgcGVyIGZyYW1lIChheGlzLWFuZ2xlKVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMuZXhwciAtIEV4cHJlc3Npb24gYmxlbmRzaGFwZSB3ZWlnaHRzIHBlciBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMubmVja19wb3NlIC0gTmVjayBib25lIHJvdGF0aW9ucyBwZXIgZnJhbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZsYW1lUGFyYW1zLmphd19wb3NlIC0gSmF3IGJvbmUgcm90YXRpb25zIHBlciBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMuZXllc19wb3NlIC0gRXllIGJvbmUgcm90YXRpb25zIHBlciBmcmFtZSAoNiB2YWx1ZXM6IGxlZnQgMywgcmlnaHQgMylcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBib25lVHJlZSAtIFNrZWxldG9uIGhpZXJhcmNoeSBkZWZpbml0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsYnNXZWlnaHQgLSBMaW5lYXIgYmxlbmQgc2tpbm5pbmcgd2VpZ2h0cyBmb3IgZWFjaCB2ZXJ0ZXhcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuU2tpbm5lZE1lc2h9IGF2YXRhck1lc2ggLSBUaGUgRkxBTUUgYXZhdGFyIG1lc2hcclxuICAgICAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgcmVxdWlyZWQgcGFyYW1ldGVycyBhcmUgbWlzc2luZyBvciBpbnZhbGlkXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZShmbGFtZVBhcmFtcywgYm9uZVRyZWUsIGxic1dlaWdodCwgYXZhdGFyTWVzaCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIHBhcmFtZXRlcnNcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVJlcXVpcmVkUHJvcGVydGllcyhmbGFtZVBhcmFtcywgWydyb3RhdGlvbicsICdleHByJywgJ25lY2tfcG9zZScsICdqYXdfcG9zZScsICdleWVzX3Bvc2UnXSwgJ2ZsYW1lUGFyYW1zJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbnZhbGlkIGZsYW1lUGFyYW1zJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXZhdGFyTWVzaCB8fCAhYXZhdGFyTWVzaC5nZW9tZXRyeSB8fCAhYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzIHx8ICFhdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ2F2YXRhck1lc2ggbXVzdCBoYXZlIGdlb21ldHJ5IHdpdGggcG9zaXRpb24gYXR0cmlidXRlJyxcclxuICAgICAgICAgICAgICAgICdhdmF0YXJNZXNoJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ludmFsaWQgYXZhdGFyTWVzaCcsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnSW5pdGlhbGl6aW5nIEZsYW1lQW5pbWF0b3InLCB7XHJcbiAgICAgICAgICAgIGZyYW1lQ291bnQ6IGZsYW1lUGFyYW1zLnJvdGF0aW9uPy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHNwbGF0Q291bnQ6IGF2YXRhck1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmZsYW1lUGFyYW1zID0gZmxhbWVQYXJhbXM7XHJcbiAgICAgICAgdGhpcy5sYnNXZWlnaHQgPSBsYnNXZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5hdmF0YXJNZXNoID0gYXZhdGFyTWVzaDtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIGZyYW1lcyBmcm9tIHJvdGF0aW9uIGRhdGFcclxuICAgICAgICBpZiAoZmxhbWVQYXJhbXMucm90YXRpb24gJiYgQXJyYXkuaXNBcnJheShmbGFtZVBhcmFtcy5yb3RhdGlvbikpIHtcclxuICAgICAgICAgICAgdGhpcy50b3RhbEZyYW1lcyA9IGZsYW1lUGFyYW1zLnJvdGF0aW9uLmxlbmd0aDtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBbmltYXRpb24gaGFzIGZyYW1lcycsIHsgdG90YWxGcmFtZXM6IHRoaXMudG90YWxGcmFtZXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ05vIHJvdGF0aW9uIGRhdGEgZm91bmQsIHRvdGFsRnJhbWVzIHNldCB0byAwJyk7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxGcmFtZXMgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSBhdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnQ7XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIHNrZWxldG9uIGZyb20gYm9uZSB0cmVlXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5idWlsZFNrZWxldG9uKGJvbmVUcmVlKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTa2VsZXRvbiBidWlsdCBzdWNjZXNzZnVsbHknLCB7IGJvbmVDb3VudDogdGhpcy5ib25lcz8ubGVuZ3RoIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGJ1aWxkIHNrZWxldG9uJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBidWlsZCBza2VsZXRvbjogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAnYm9uZVRyZWUnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCBza2VsZXRvbiBmcm9tIGJvbmUgdHJlZSBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYm9uZVRyZWUgLSBTa2VsZXRvbiBoaWVyYXJjaHkgZGVmaW5pdGlvblxyXG4gICAgICovXHJcbiAgICBidWlsZFNrZWxldG9uKGJvbmVUcmVlKSB7XHJcbiAgICAgICAgaWYgKCFib25lVHJlZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmJvbmVzID0gW107XHJcbiAgICAgICAgY29uc3QgYm9uZUludmVyc2VzID0gW107XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBib25lcyBmcm9tIHRyZWUgc3RydWN0dXJlXHJcbiAgICAgICAgY29uc3QgY3JlYXRlQm9uZSA9IChib25lRGF0YSwgcGFyZW50Qm9uZSA9IG51bGwpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9uZSA9IG5ldyBCb25lKCk7XHJcbiAgICAgICAgICAgIGJvbmUubmFtZSA9IGJvbmVEYXRhLm5hbWUgfHwgYGJvbmVfJHt0aGlzLmJvbmVzLmxlbmd0aH1gO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBib25lLnBvc2l0aW9uLmZyb21BcnJheShib25lRGF0YS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBib25lLnJvdGF0aW9uLmZyb21BcnJheShib25lRGF0YS5yb3RhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnNjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICBib25lLnNjYWxlLmZyb21BcnJheShib25lRGF0YS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRCb25lKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRCb25lLmFkZChib25lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ib25lcy5wdXNoKGJvbmUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGludmVyc2UgYmluZCBtYXRyaXhcclxuICAgICAgICAgICAgY29uc3QgaW52ZXJzZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgICAgIGlmIChib25lRGF0YS5pbnZlcnNlQmluZE1hdHJpeCkge1xyXG4gICAgICAgICAgICAgICAgaW52ZXJzZU1hdHJpeC5mcm9tQXJyYXkoYm9uZURhdGEuaW52ZXJzZUJpbmRNYXRyaXgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9uZS51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGludmVyc2VNYXRyaXguY29weShib25lLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib25lSW52ZXJzZXMucHVzaChpbnZlcnNlTWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgY2hpbGRyZW5cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBib25lRGF0YS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IGNyZWF0ZUJvbmUoY2hpbGQsIGJvbmUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIElmIGJvbmVUcmVlIGlzIGFycmF5LCBjcmVhdGUgYm9uZXMgZGlyZWN0bHlcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShib25lVHJlZSkpIHtcclxuICAgICAgICAgICAgYm9uZVRyZWUuZm9yRWFjaCgoYm9uZURhdGEsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib25lID0gbmV3IEJvbmUoKTtcclxuICAgICAgICAgICAgICAgIGJvbmUubmFtZSA9IGJvbmVEYXRhLm5hbWUgfHwgYGJvbmVfJHtpbmRleH1gO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9uZURhdGEucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBib25lLnBvc2l0aW9uLmZyb21BcnJheShib25lRGF0YS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXMucHVzaChib25lKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW52ZXJzZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9uZURhdGEuaW52ZXJzZUJpbmRNYXRyaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZlcnNlTWF0cml4LmZyb21BcnJheShib25lRGF0YS5pbnZlcnNlQmluZE1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBib25lSW52ZXJzZXMucHVzaChpbnZlcnNlTWF0cml4KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgdXAgaGllcmFyY2h5IChGTEFNRTogcm9vdCAtPiBuZWNrIC0+IGphdywgZXllcylcclxuICAgICAgICAgICAgaWYgKHRoaXMuYm9uZXMubGVuZ3RoID49IDUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXNbMF0uYWRkKHRoaXMuYm9uZXNbMV0pOyAvLyByb290IC0+IG5lY2tcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXNbMV0uYWRkKHRoaXMuYm9uZXNbMl0pOyAvLyBuZWNrIC0+IGphd1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib25lc1sxXS5hZGQodGhpcy5ib25lc1szXSk7IC8vIG5lY2sgLT4gbGVmdEV5ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ib25lc1sxXS5hZGQodGhpcy5ib25lc1s0XSk7IC8vIG5lY2sgLT4gcmlnaHRFeWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoYm9uZVRyZWUucm9vdCkge1xyXG4gICAgICAgICAgICBjcmVhdGVCb25lKGJvbmVUcmVlLnJvb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNrZWxldG9uXHJcbiAgICAgICAgdGhpcy5za2VsZXRvbiA9IG5ldyBTa2VsZXRvbih0aGlzLmJvbmVzLCBib25lSW52ZXJzZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGJvbmUgcm90YXRpb24gZnJvbSBheGlzLWFuZ2xlIG9yIHF1YXRlcm5pb24gcmVwcmVzZW50YXRpb25cclxuICAgICAqXHJcbiAgICAgKiBDb252ZXJ0cyByb3RhdGlvbiBkYXRhIHRvIHF1YXRlcm5pb24gYW5kIGFwcGxpZXMgaXQgdG8gdGhlIGJvbmUuXHJcbiAgICAgKiBVc2VzIG9iamVjdCBwb29saW5nIHRvIGF2b2lkIGFsbG9jYXRpb25zIGluIGFuaW1hdGlvbiBsb29wLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuQm9uZX0gYm9uZSAtIFRhcmdldCBib25lIHRvIHJvdGF0ZVxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmdsZXMgLSBSb3RhdGlvbiB2YWx1ZXMgKDMgZm9yIGF4aXMtYW5nbGUsIDQgZm9yIHF1YXRlcm5pb24pXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1F1YXQ9ZmFsc2VdIC0gV2hldGhlciBhbmdsZXMgYXJlIHF1YXRlcm5pb24gW3gsIHksIHosIHddXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIGJvbmUgb3IgYW5nbGVzIGFyZSBpbnZhbGlkXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc2V0Qm9uZVJvdGF0aW9uKGJvbmUsIGFuZ2xlcywgaXNRdWF0ID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAoIWJvbmUgfHwgIWFuZ2xlcyB8fCAhQXJyYXkuaXNBcnJheShhbmdsZXMpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnYm9uZSBhbmQgYW5nbGVzIGFycmF5IGFyZSByZXF1aXJlZCcsXHJcbiAgICAgICAgICAgICAgICAnYm9uZS9hbmdsZXMnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVc2Ugb2JqZWN0IHBvb2xpbmcgZm9yIHRlbXAgb2JqZWN0c1xyXG4gICAgICAgIGNvbnN0IHF1YXRlcm5pb24gPSBxdWF0ZXJuaW9uUG9vbC5hY3F1aXJlKCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChpc1F1YXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIERpcmVjdCBxdWF0ZXJuaW9uIChYWVpXIGZvcm1hdClcclxuICAgICAgICAgICAgICAgIGlmIChhbmdsZXMubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1F1YXRlcm5pb24gcmVxdWlyZXMgNCB2YWx1ZXMnLCAnYW5nbGVzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBxdWF0ZXJuaW9uLnNldChhbmdsZXNbMF0sIGFuZ2xlc1sxXSwgYW5nbGVzWzJdLCBhbmdsZXNbM10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQXhpcy1hbmdsZSByZXByZXNlbnRhdGlvbjogW3gsIHksIHpdIHdoZXJlIG1hZ25pdHVkZSBpcyBhbmdsZVxyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ2xlcy5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignQXhpcy1hbmdsZSByZXF1aXJlcyAzIHZhbHVlcycsICdhbmdsZXMnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBheGlzID0gdmVjdG9yM1Bvb2wuYWNxdWlyZSgpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBheGlzLnNldChhbmdsZXNbMF0sIGFuZ2xlc1sxXSwgYW5nbGVzWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZUluUmFkaWFucyA9IGF4aXMubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYXhpcywgYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZWN0b3IzUG9vbC5yZWxlYXNlKGF4aXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBcHBseSByb3RhdGlvbiB0byBib25lXHJcbiAgICAgICAgICAgIGJvbmUucXVhdGVybmlvbi5jb3B5KHF1YXRlcm5pb24pO1xyXG4gICAgICAgICAgICBib25lLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHF1YXRlcm5pb25Qb29sLnJlbGVhc2UocXVhdGVybmlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIEZMQU1FIGJvbmVzIGZyb20gY3VycmVudCBmcmFtZSBwYXJhbWV0ZXJzXHJcbiAgICAgKlxyXG4gICAgICogQXBwbGllcyBib25lIHJvdGF0aW9ucyBmb3IgYWxsIDUgRkxBTUUgYm9uZXMgKHJvb3QsIG5lY2ssIGphdywgbGVmdCBleWUsIHJpZ2h0IGV5ZSlcclxuICAgICAqIGZyb20gdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lLiBVcGRhdGVzIHNrZWxldG9uIG1hdHJpY2VzIGFuZCByZXR1cm5zIGRhdGFcclxuICAgICAqIG5lZWRlZCBmb3IgbWVzaCBkZWZvcm1hdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBCb25lIGFuZCBibGVuZHNoYXBlIGRhdGEgZm9yIHJlbmRlcmluZ1xyXG4gICAgICogQHJldHVybnMge0FycmF5fSByZXR1cm4uYnNXZWlnaHQgLSBFeHByZXNzaW9uIGJsZW5kc2hhcGUgd2VpZ2h0cyBmb3IgY3VycmVudCBmcmFtZVxyXG4gICAgICogQHJldHVybnMge0Zsb2F0MzJBcnJheX0gcmV0dXJuLmJvbmVzTWF0cml4IC0gVXBkYXRlZCBib25lIHRyYW5zZm9ybWF0aW9uIG1hdHJpY2VzXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSByZXR1cm4uYm9uZXNOdW0gLSBOdW1iZXIgb2YgYm9uZXMgKGFsd2F5cyA1IGZvciBGTEFNRSlcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gcmV0dXJuLmJvbmVzV2VpZ2h0IC0gTEJTIHdlaWdodHMgZm9yIHZlcnRpY2VzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUZsYW1lQm9uZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmZsYW1lUGFyYW1zIHx8ICF0aGlzLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdDYW5ub3QgdXBkYXRlIGJvbmVzOiBmbGFtZVBhcmFtcyBvciBza2VsZXRvbiBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLmZyYW1lO1xyXG5cclxuICAgICAgICAvLyBHZXQgYmxlbmRzaGFwZSB3ZWlnaHRzIGZvciB0aGlzIGZyYW1lXHJcbiAgICAgICAgY29uc3QgYnNXZWlnaHQgPSB0aGlzLmZsYW1lUGFyYW1zWydleHByJ11bZnJhbWVdO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBib25lIHJvdGF0aW9ucyBmb3IgY3VycmVudCBmcmFtZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFJvb3QgYm9uZSByb3RhdGlvbiAoZ2xvYmFsIGhlYWQgb3JpZW50YXRpb24pXHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RBbmdsZSA9IHRoaXMuZmxhbWVQYXJhbXNbJ3JvdGF0aW9uJ11bZnJhbWVdO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzBdLCByb290QW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gTmVjayByb3RhdGlvblxyXG4gICAgICAgICAgICBjb25zdCBuZWNrQW5nbGUgPSB0aGlzLmZsYW1lUGFyYW1zWyduZWNrX3Bvc2UnXVtmcmFtZV07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Qm9uZVJvdGF0aW9uKHRoaXMuc2tlbGV0b24uYm9uZXNbMV0sIG5lY2tBbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBKYXcgcm90YXRpb25cclxuICAgICAgICAgICAgY29uc3QgamF3QW5nbGUgPSB0aGlzLmZsYW1lUGFyYW1zWydqYXdfcG9zZSddW2ZyYW1lXTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCb25lUm90YXRpb24odGhpcy5za2VsZXRvbi5ib25lc1syXSwgamF3QW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXllcyByb3RhdGlvbiAoNiB2YWx1ZXM6IGxlZnQgZXllIHh5eiwgcmlnaHQgZXllIHh5eilcclxuICAgICAgICAgICAgY29uc3QgZXllc0FuZ2xlID0gdGhpcy5mbGFtZVBhcmFtc1snZXllc19wb3NlJ11bZnJhbWVdO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzNdLCBleWVzQW5nbGUuc2xpY2UoMCwgMykpOyAgICAgICAgICAvLyBMZWZ0IGV5ZVxyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzRdLCBleWVzQW5nbGUuc2xpY2UoMywgNikpOyAgICAgICAgICAvLyBSaWdodCBleWVcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNldHRpbmcgYm9uZSByb3RhdGlvbnMnLCB7IGZyYW1lLCBlcnJvciB9KTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgc2tlbGV0b24gbWF0cmljZXMgYWZ0ZXIgYWxsIHJvdGF0aW9ucyBhcmUgc2V0XHJcbiAgICAgICAgdGhpcy5za2VsZXRvbi51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IHVwZGF0ZWQgYm9uZSBtYXRyaWNlcyBmb3Igc2hhZGVyXHJcbiAgICAgICAgY29uc3QgbnVtQm9uZXMgPSA1O1xyXG4gICAgICAgIGNvbnN0IGJvbmVzTWF0cml4ID0gRmxhbWVUZXh0dXJlTWFuYWdlci5nZXRVcGRhdGVkQm9uZU1hdHJpY2VzKHRoaXMuc2tlbGV0b24sIG51bUJvbmVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYnNXZWlnaHQsXHJcbiAgICAgICAgICAgIGJvbmVzTWF0cml4LFxyXG4gICAgICAgICAgICBib25lc051bTogbnVtQm9uZXMsXHJcbiAgICAgICAgICAgIGJvbmVzV2VpZ2h0OiB0aGlzLmxic1dlaWdodFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSdW4gbW9ycGggdXBkYXRlIC0gbWFpbiBhbmltYXRpb24gbG9vcCBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTcGxhdE1lc2h9IHNwbGF0TWVzaCAtIFRoZSBnYXVzc2lhbiBzcGxhdCBtZXNoIHRvIHVwZGF0ZVxyXG4gICAgICovXHJcbiAgICBydW5Nb3JwaFVwZGF0ZShzcGxhdE1lc2gpIHtcclxuICAgICAgICBjb25zdCBtb3JwaGVkTWVzaCA9IG5ldyBGbG9hdDMyQXJyYXkoXHJcbiAgICAgICAgICAgIHRoaXMuYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc3BsYXRNZXNoLmdhdXNzaWFuU3BsYXRDb3VudCA9IHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50O1xyXG4gICAgICAgIHNwbGF0TWVzaC5ib25lc051bSA9IDU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUZsYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLnVwZGF0ZUZsYW1lQm9uZXMoKTtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJzV2VpZ2h0ID0gdXBkYXRlRGF0YS5ic1dlaWdodDtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJvbmVzTWF0cml4ID0gdXBkYXRlRGF0YS5ib25lc01hdHJpeDtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJvbmVzTnVtID0gdXBkYXRlRGF0YS5ib25lc051bTtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJvbmVzV2VpZ2h0ID0gdXBkYXRlRGF0YS5ib25lc1dlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNwbGF0TWVzaC5tb3JwaGVkTWVzaCA9IG1vcnBoZWRNZXNoO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGV4dHVyZXNcclxuICAgICAgICBjb25zdCBzcGxhdE51bSA9IHNwbGF0TWVzaC5tb3JwaGVkTWVzaC5sZW5ndGggLyAzO1xyXG4gICAgICAgIGlmIChzcGxhdE1lc2guc3BsYXREYXRhVGV4dHVyZXMgJiYgc3BsYXRNZXNoLnNwbGF0RGF0YVRleHR1cmVzWydmbGFtZU1vZGVsJ10pIHtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLnVwZGF0ZVRleHR1cmVBZnRlckJTQW5kU2tlbGV0b24oMCwgc3BsYXROdW0gLSAxLCB0aGlzLnVzZUZsYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgY3VycmVudCBhbmltYXRpb24gZnJhbWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZnJhbWUgLSBGcmFtZSBudW1iZXIgdG8gc2V0ICh3aWxsIHdyYXAgaWYgZXhjZWVkcyB0b3RhbEZyYW1lcylcclxuICAgICAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgZnJhbWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc2V0RnJhbWUoZnJhbWUpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGZyYW1lICE9PSAnbnVtYmVyJyB8fCBpc05hTihmcmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignZnJhbWUgbXVzdCBiZSBhIHZhbGlkIG51bWJlcicsICdmcmFtZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudG90YWxGcmFtZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAoKGZyYW1lICUgdGhpcy50b3RhbEZyYW1lcykgKyB0aGlzLnRvdGFsRnJhbWVzKSAlIHRoaXMudG90YWxGcmFtZXM7IC8vIEhhbmRsZSBuZWdhdGl2ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkdmFuY2UgdG8gbmV4dCBmcmFtZSBpbiBhbmltYXRpb24gc2VxdWVuY2VcclxuICAgICAqXHJcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHdyYXBzIHRvIGZyYW1lIDAgYWZ0ZXIgcmVhY2hpbmcgdG90YWxGcmFtZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIG5leHRGcmFtZSgpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50b3RhbEZyYW1lcyA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZSA9ICh0aGlzLmZyYW1lICsgMSkgJSB0aGlzLnRvdGFsRnJhbWVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBza2VsZXRvbiBmb3IgZXh0ZXJuYWwgdXNlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1RIUkVFLlNrZWxldG9ufG51bGx9IFRoZSBGTEFNRSBza2VsZXRvbiBvciBudWxsIGlmIG5vdCBpbml0aWFsaXplZFxyXG4gICAgICovXHJcbiAgICBnZXRTa2VsZXRvbigpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNrZWxldG9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgZnJhbWUgbnVtYmVyXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gQ3VycmVudCBhbmltYXRpb24gZnJhbWUgaW5kZXhcclxuICAgICAqL1xyXG4gICAgZ2V0RnJhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0b3RhbCBmcmFtZSBjb3VudFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRvdGFsIG51bWJlciBvZiBhbmltYXRpb24gZnJhbWVzXHJcbiAgICAgKi9cclxuICAgIGdldFRvdGFsRnJhbWVzKCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxGcmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIGFuaW1hdG9yIGFuZCBmcmVlIHJlc291cmNlc1xyXG4gICAgICpcclxuICAgICAqIFByb3Blcmx5IGNsZWFucyB1cDpcclxuICAgICAqIC0gU2tlbGV0b24gYW5kIGJvbmVzXHJcbiAgICAgKiAtIFJlZmVyZW5jZXMgdG8gbWVzaGVzIGFuZCBwYXJhbWV0ZXJzXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGbGFtZUFuaW1hdG9yLmRpc3Bvc2UoKSBjYWxsZWQgb24gYWxyZWFkeSBkaXNwb3NlZCBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnRGlzcG9zaW5nIEZsYW1lQW5pbWF0b3InKTtcclxuXHJcbiAgICAgICAgLy8gRGlzcG9zZSBza2VsZXRvbiAoYm9uZXMgYXJlIHBhcnQgb2Ygc2tlbGV0b24pXHJcbiAgICAgICAgaWYgKHRoaXMuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5za2VsZXRvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2tlbGV0b24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTnVsbGlmeSBhbGwgcmVmZXJlbmNlcyB0byBhaWQgR0NcclxuICAgICAgICB0aGlzLmJvbmVzID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZsYW1lUGFyYW1zID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxic1dlaWdodCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdmF0YXJNZXNoID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gUmVzZXQgc3RhdGVcclxuICAgICAgICB0aGlzLmZyYW1lID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcclxuICAgICAgICB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIC8vIE1hcmsgYXMgZGlzcG9zZWRcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRmxhbWVBbmltYXRvciBkaXNwb3NlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmxhbWVBbmltYXRvcjtcclxuIl0sIm5hbWVzIjpbIkNvbnN0YW50cyIsIkNPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVCIsIkNFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFUIiwiQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX1NUT1JFRCIsIkNPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQiLCJDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9TVE9SRUQiLCJDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9BTExPQ0FURUQiLCJTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCIsIkNFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMIiwiU0NFTkVfSU5ERVhFU19FTEVNRU5UU19QRVJfVEVYRUwiLCJTQ0VORV9GQURFSU5fUkFURV9GQVNUIiwiU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCIsImxvZ2dlciIsInRvSGFsZkZsb2F0IiwiRGF0YVV0aWxzIiwiZnJvbUhhbGZGbG9hdCIsInRvVW5jb21wcmVzc2VkRmxvYXQiLCJmcm9tVWludDgiLCJ0b1VpbnQ4IiwiZnJvbUhhbGZGbG9hdFRvVWludDgiLCJkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbCIsImNvcHlCZXR3ZWVuQnVmZmVycyIsInVpbnRFbmNvZGVkRmxvYXQiLCJCQVNFX0NPTVBPTkVOVF9DT1VOVCIsIlZlY3RvcjMiLCJNYXRyaXg0IiwiUXVhdGVybmlvbiIsIkV1bGVyIiwiTG9vcFJlcGVhdCIsIkxvb3BPbmNlIiwiT2JqZWN0M0QiLCJCdWZmZXJHZW9tZXRyeSIsIkJ1ZmZlckF0dHJpYnV0ZSIsIkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5IiwiSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlIiwiRHluYW1pY0RyYXdVc2FnZSIsIlZlY3RvcjIiLCJDb2xvciIsIlNoYWRlck1hdGVyaWFsIiwiTm9ybWFsQmxlbmRpbmciLCJEb3VibGVTaWRlIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJVbnNpZ25lZEJ5dGVUeXBlIiwiRmxvYXRUeXBlIiwiSGFsZkZsb2F0VHlwZSIsIlJHQkFGb3JtYXQiLCJSZWRGb3JtYXQiLCJSZWRJbnRlZ2VyRm9ybWF0IiwiUkdGb3JtYXQiLCJSR0ludGVnZXJGb3JtYXQiLCJSR0JJbnRlZ2VyRm9ybWF0IiwiUkdCQUludGVnZXJGb3JtYXQiLCJNZXNoIiwiQm94MyIsIlZlY3RvcjQiLCJEYXRhVGV4dHVyZSIsIlVuc2lnbmVkSW50VHlwZSIsIk1hdHJpeDMiLCJQYXJzZUVycm9yIiwiVEhSRUUiLCJTY2VuZSIsIlBlcnNwZWN0aXZlQ2FtZXJhIiwiT3J0aG9ncmFwaGljQ2FtZXJhIiwiTWF0aFV0aWxzIiwiV2ViR0xSZW5kZXJlciIsIk9yYml0Q29udHJvbHMiLCJDbG9jayIsIkJvbmUiLCJBbmltYXRpb25NaXhlciIsIkdMVEZMb2FkZXIiLCJTa2VsZXRvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDWSxNQUFDLFFBQVEsR0FBRztBQUN4QixJQUFJLElBQUksRUFBRSxDQUFDO0FBQ1gsSUFBSSxL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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5RyxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDM0MsWUFBWSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBWSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBWSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBWSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsWUFBWSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEU7QUFDQSxZQUFZLHdCQUF3QixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUdkLGtCQUFnQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRixZQUFZLHdCQUF3QixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUdBLGtCQUFnQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FB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LENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLElBQUksQ0FBQyxDQUFDO0FBQ047QUFDQSxJQUFJLE9BQU8sUUFBUSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsU0FBUyxLQUFLO0FBQ3ZELFFBQVEsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0MsUUFBUSxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUMzQyxRQUFRLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzNDLElBQUksQ0FBQyxDQUFDO0FBQ047QUFDQSxJQUFJLE9BQU8sSUFBSSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxZQUFZLEVBQUUsUUFBUSxLQUFLO0FBQ2xFLFFBQVEsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3BELFFBQVEsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLFFBQVEsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLFFBQVEsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLFFBQVEsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLFFBQVEsTUFBTSxFQUFFLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDM0UsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDM0UsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksT0FBTyx5QkFBeUIsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxLQUFLO0FBQ2pHLFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDckQsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNyRCxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3JELElBQUksQ0FBQyxDQUFDO0FBQ047QUFDQSxJQUFJLE9BQU8seUJBQXlCLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztBQUNwRix3Q0FBd0MsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxLQUFLO0FBQzVHO0FBQ0EsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMvQyxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQy9DLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDL0MsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMvQyxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ2hEO0FBQ0EsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRDtBQUNBLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0UsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRDtBQUNBLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVM7QUFDdkYsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0csUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUcsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5RyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTO0FBQ3ZGLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9HLFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRDtBQUNBLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0UsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRDtBQUNBLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0QsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksT0FBTyxXQUFXLENBQUMsTUFBTSxFQUFFO0FBQy9CLFFBQVEsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN4RixRQUFRLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxXQUFXLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzlGLFFBQVEsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDOUYsUUFBUSxNQUFNLGtCQUFrQixHQUFHLElBQUksWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsV0FBVyxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNoRyxRQUFRLE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pELFFBQVEsTUFBTSxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakQsUUFBUSxNQUFNLGVBQWUsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRCxRQUFRLE1BQU0sWUFBWSxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xELFFBQVEsTUFBTSxhQUFhLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQsUUFBUSxNQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRCxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdkQsUUFBUSxNQUFNLFdBQVcsR0FBRyxJQUFJRixhQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RztBQUNBLFFBQVEsTUFBTSwwQkFBMEIsR0FBRyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGlEQUFpRCxDQUFDO0FBQ3ZILFFBQVEsTUFBTSwwQkFBMEIsR0FBRyxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsSUFBSSxpREFBaUQsQ0FBQztBQUN2SDtBQUNBLFFBQVEsT0FBTztBQUNmLFlBQVksWUFBWTtBQUN4QixZQUFZLFlBQVk7QUFDeEIsWUFBWSxlQUFlO0FBQzNCLFlBQVksWUFBWTtBQUN4QixZQUFZLGFBQWE7QUFDekIsWUFBWSxVQUFVO0FBQ3RCLFlBQVksZ0JBQWdCO0FBQzVCLFlBQVksV0FBVztBQUN2QixZQUFZLDBCQUEwQjtBQUN0QyxZQUFZLDBCQUEwQjtBQUN0QyxTQUFTLENBQUM7QUFDVixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksT0FBTyx5QkFBeUIsQ0FBQyxZQUFZLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRTtBQUN2RSxRQUFRLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxXQUFXLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzlGLFFBQVEsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDO0FBQzVDLFFBQVEsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDO0FBQzFDLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDL0MsUUFBUSxNQUFNLGdCQUFnQixHQUFHLElBQUksVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsV0FBVyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3hGLFFBQVEsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDOUYsUUFBUSxNQUFNLGlCQUFpQixHQUFHLElBQUksV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsV0FBVyxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5RixRQUFRLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxXQUFXLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2hHLFFBQVEsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUNsRCxRQUFRLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDbEQsUUFBUSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEMsUUFBUSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEMsUUFBUSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsZUFBZSxDQUFDO0FBQ3RELFFBQVEsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUNuRCxRQUFRLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUM7QUFDcEQsUUFBUSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO0FBQ2pELFFBQVEsaUJBQWlCLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixDQUFDO0FBQ3hELFFBQVEsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7QUFDckQsUUFBUSxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztBQUNyRCxRQUFRLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBQ3JELFFBQVEsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLDBCQUEwQixJQUFJLENBQUMsaURBQWlELENBQUM7QUFDeEgsUUFBUSxrQkFBa0IsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsMEJBQTBCLElBQUksaURBQWlELENBQUM7QUFDeEgsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE9BQU8sbUJBQW1CLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFLG9CQUFvQixFQUFFO0FBQ2pGLFFBQVEsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUM7QUFDekQ7QUFDQSxRQUFRLE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUM7QUFDdkQsUUFBUSxNQUFNLHdCQUF3QixHQUFHLElBQUksV0FBVyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsZUFBZSxHQUFHLFdBQVcsQ0FBQyxzQkFBc0IsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNuSSxRQUFRLE1BQU0sd0JBQXdCLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxlQUFlLEdBQUcsV0FBVyxDQUFDLHNCQUFzQixHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ25JLFFBQVEsTUFBTSx5QkFBeUIsR0FBRyxJQUFJLFlBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLGVBQWUsR0FBRyxXQUFXLENBQUMsc0JBQXNCLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDckk7QUFDQSxRQUFRLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUNsQyxRQUFRLElBQUksaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO0FBQ2xDLFFBQVEsSUFBSSx1QkFBdUIsR0FBRyxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDNUQsUUFBUSxJQUFJLHVCQUF1QixHQUFHLGlCQUFpQixHQUFHLENBQUMsQ0FBQztBQUM1RCxRQUFRLElBQUksV0FBVyxHQUFHLFdBQVcsQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLGVBQWUsR0FBRyxXQUFXLENBQUMsc0JBQXNCLENBQUM7QUFDcEgsUUFBUSxJQUFJLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUNqQyxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxlQUFlLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbEQsWUFBWSxNQUFNLGFBQWEsR0FBRyx3QkFBd0IsQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN4RixZQUFZLE1BQU0sVUFBVSxHQUFHLHdCQUF3QixDQUFDLHVCQUF1QixHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3JGLFlBQVksTUFBTSxXQUFXLEdBQUcsd0JBQXdCLENBQUMsdUJBQXVCLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDdEYsWUFBWSxNQUFNLGVBQWUsR0FBRyx5QkFBeUIsQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMzRixZQUFZLE1BQU0sbUJBQW1CLEdBQUcsZUFBZSxHQUFHLEdBQUcsQ0FBQztBQUM5RCxZQUFZLE1BQU0sc0JBQXNCLEdBQUcsd0JBQXdCLENBQUMsdUJBQXVCLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDbEcsWUFBWSxNQUFNLHFCQUFxQixHQUFHLHdCQUF3QixDQUFDLHVCQUF1QixHQUFHLENBQUMsQ0FBQztBQUMvRiwwQ0FBMEMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUMsVUFBVSxDQUFDO0FBQ3JHLFlBQVksTUFBTSxlQUFlLEdBQUcsd0JBQXdCLENBQUMsdUJBQXVCLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDMUYsWUFBWSxNQUFNLDBCQUEwQixHQUFHLHdCQUF3QixDQUFDLHVCQUF1QixHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3JHLFlBQVksTUFBTSx3QkFBd0IsR0FBRywwQkFBMEIsR0FBRyxDQUFDLENBQUM7QUFDNUUsWUFBWSxNQUFNLHVCQUF1QixHQUFHLHNCQUFzQixHQUFHLFdBQVcsR0FBRyx3QkFBd0IsQ0FBQztBQUM1RztBQUNBLFlBQVksTUFBTSx3QkFBd0IsR0FBRyx3QkFBd0IsQ0FBQyx1QkFBdUIsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUNwRyxZQUFZLE1BQU0sRUFBRSxhQUFhLEVBQUUsR0FBRyxXQUFXLENBQUMseUJBQXlCLENBQUMsZ0JBQWdCLEVBQUUsd0JBQXdCLENBQUMsQ0FBQztBQUN4SDtBQUNBLFlBQVksTUFBTSx5QkFBeUIsR0FBRyxhQUFhLEdBQUcsYUFBYSxDQUFDO0FBQzVFLFlBQVksTUFBTSxnQkFBZ0IsR0FBRyx5QkFBeUIsR0FBRyx1QkFBdUIsQ0FBQztBQUN6RixZQUFZLE1BQU0sYUFBYSxHQUFHO0FBQ2xDLGdCQUFnQixhQUFhLEVBQUUsYUFBYTtBQUM1QyxnQkFBZ0IsZ0JBQWdCLEVBQUUsZ0JBQWdCO0FBQ2xELGdCQUFnQixVQUFVLEVBQUUsb0JBQW9CLEdBQUcsYUFBYSxHQUFHLENBQUM7QUFDcEUsZ0JBQWdCLGFBQWEsRUFBRSxhQUFhO0FBQzVDLGdCQUFnQixVQUFVLEVBQUUsVUFBVTtBQUN0QyxnQkFBZ0IsV0FBVyxFQUFFLFdBQVc7QUFDeEMsZ0JBQWdCLGVBQWUsRUFBRSxlQUFlO0FBQ2hELGdCQUFnQixtQkFBbUIsRUFBRSxtQkFBbUI7QUFDeEQsZ0JBQWdCLHNCQUFzQixFQUFFLHNCQUFzQjtBQUM5RCxnQkFBZ0IsdUJBQXVCLEVBQUUsdUJBQXVCO0FBQ2hFLGdCQUFnQix5QkFBeUIsRUFBRSx5QkFBeUI7QUFDcEUsZ0JBQWdCLGdCQUFnQixFQUFFLGdCQUFnQjtBQUNsRCxnQkFBZ0IscUJBQXFCLEVBQUUscUJBQXFCO0FBQzVELGdCQUFnQixzQkFBc0IsRUFBRSxtQkFBbUIsR0FBRyxxQkFBcUI7QUFDbkYsZ0JBQWdCLElBQUksRUFBRSxXQUFXO0FBQ2pDLGdCQUFnQixXQUFXLEVBQUUsV0FBVyxHQUFHLHdCQUF3QjtBQUNuRSxnQkFBZ0IsUUFBUSxFQUFFLFdBQVcsR0FBRyx1QkFBdUI7QUFDL0QsZ0JBQWdCLGVBQWUsRUFBRSxlQUFlO0FBQ2hELGdCQUFnQiwwQkFBMEIsRUFBRSwwQkFBMEI7QUFDdEUsZ0JBQWdCLHdCQUF3QixFQUFFLHdCQUF3QjtBQUNsRSxhQUFhLENBQUM7QUFDZCxZQUFZLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUM7QUFDOUMsWUFBWSxXQUFXLElBQUksZ0JBQWdCLENBQUM7QUFDNUMsWUFBWSxpQkFBaUIsSUFBSSxXQUFXLENBQUMsc0JBQXNCLENBQUM7QUFDcEUsWUFBWSx1QkFBdUIsR0FBRyxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDNUQsWUFBWSx1QkFBdUIsR0FBRyxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDNUQsWUFBWSxnQkFBZ0IsSUFBSSxhQUFhLENBQUM7QUFDOUMsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE9BQU8sY0FBYyxDQUFDO0FBQzlCLElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQSxJQUFJLE9BQU8sMEJBQTBCLENBQUMsYUFBYSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sRUFBRSxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzNGLFFBQVEsTUFBTSx1QkFBdUIsR0FBRyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLFdBQVcsQ0FBQyxzQkFBc0IsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNoSCxRQUFRLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLENBQUMsc0JBQXNCLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDaEgsUUFBUSxNQUFNLHdCQUF3QixHQUFHLElBQUksWUFBWSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsV0FBVyxDQUFDLHNCQUFzQixHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2xIO0FBQ0EsUUFBUSx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsVUFBVSxDQUFDO0FBQzlELFFBQVEsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDLGFBQWEsQ0FBQztBQUNqRSxRQUFRLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixJQUFJLENBQUMsR0FBRyxhQUFhLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUMxRixRQUFRLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixJQUFJLENBQUMsR0FBRyxhQUFhLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUMzRixRQUFRLHdCQUF3QixDQUFDLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixJQUFJLENBQUMsR0FBRyxhQUFhLENBQUMsZUFBZSxHQUFHLEdBQUcsQ0FBQztBQUNsRyxRQUFRLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxHQUFHLGdCQUFnQixJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsc0JBQXNCLEdBQUcsQ0FBQyxDQUFDO0FBQ3JHLFFBQVEsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLElBQUksQ0FBQyxHQUFHLGFBQWEsQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLENBQUM7QUFDckcsUUFBUSx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsZ0JBQWdCLENBQUM7QUFDcEUsUUFBUSx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsSUFBSSxDQUFDLEdBQUcsYUFBYSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7QUFDL0YsUUFBUSx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsSUFBSSxDQUFDLEdBQUcsYUFBYSxDQUFDLDBCQUEwQixHQUFHLENBQUMsQ0FBQztBQUMxRyxRQUFRLHVCQUF1QixDQUFDLEVBQUUsQ0FBQyxHQUFHLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQztBQUM3RTtBQUNBLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLG9DQUFvQyxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNoRixRQUFRLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLENBQUMsc0JBQXNCLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDaEgsUUFBUSx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7QUFDaEQsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLG1CQUFtQixDQUFDLFVBQVUsRUFBRSxvQkFBb0IsRUFBRTtBQUMxRCxRQUFRLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0FBQ3JDO0FBQ0EsUUFBUSxJQUFJLENBQUMsb0NBQW9DLEdBQUcsRUFBRSxDQUFDO0FBQ3ZELFFBQVEsSUFBSSxDQUFDLDRCQUE0QixHQUFHLEVBQUUsQ0FBQztBQUMvQztBQUNBLFFBQVEsTUFBTSxNQUFNLEdBQUcsV0FBVyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDaEUsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDaEQsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDaEQsUUFBUSxJQUFJLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUM7QUFDdEQsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLG9CQUFvQixHQUFHLE1BQU0sQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO0FBQzlFLFFBQVEsSUFBSSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQ2xELFFBQVEsSUFBSSxDQUFDLFVBQVUsR0FBRyxvQkFBb0IsR0FBRyxNQUFNLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQztBQUMxRSxRQUFRLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUM7QUFDeEQsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbEUsUUFBUSxJQUFJLENBQUMsMEJBQTBCLEdBQUcsTUFBTSxDQUFDLDBCQUEwQixDQUFDO0FBQzVFLFFBQVEsSUFBSSxDQUFDLDBCQUEwQixHQUFHLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQztBQUM1RTtBQUNBLFFBQVEsSUFBSSxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLGVBQWUsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3BJO0FBQ0EsUUFBUSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUNoQyxRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUN6QixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksT0FBTyx5QkFBeUIsQ0FBQyxnQkFBZ0IsRUFBRSx3QkFBd0IsRUFBRTtBQUNqRixRQUFRLE1BQU0sY0FBYyxHQUFHLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGNBQWMsQ0FBQztBQUM5RixRQUFRLE1BQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGFBQWEsQ0FBQztBQUM1RixRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsV0FBVyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUMsZ0JBQWdCLENBQUM7QUFDbEcsUUFBUSxNQUFNLGFBQWEsR0FBRyxXQUFXLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDNUYsUUFBUSxNQUFNLG9DQUFvQyxHQUFHLDRDQUE0QyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDNUgsUUFBUSxNQUFNLCtCQUErQixHQUFHLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLG1DQUFtQztBQUNuSSxnREFBZ0Qsb0NBQW9DLENBQUM7QUFDckYsUUFBUSxNQUFNLGFBQWEsR0FBRyxjQUFjLEdBQUcsYUFBYSxHQUFHLGdCQUFnQjtBQUMvRSw4QkFBOEIsYUFBYSxHQUFHLCtCQUErQixDQUFDO0FBQzlFLFFBQVEsT0FBTztBQUNmLFlBQVksY0FBYztBQUMxQixZQUFZLGFBQWE7QUFDekIsWUFBWSxnQkFBZ0I7QUFDNUIsWUFBWSxhQUFhO0FBQ3pCLFlBQVksb0NBQW9DO0FBQ2hELFlBQVksK0JBQStCO0FBQzNDLFlBQVksYUFBYTtBQUN6QixTQUFTLENBQUM7QUFDVixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksZ0JBQWdCLEdBQUc7QUFDdkIsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2RCxZQUFZLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0MsWUFBWSxPQUFPLENBQUMsV0FBVyxHQUFHLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLFdBQVc7QUFDdkYsbURBQW1ELE9BQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDOUcsWUFBWSxJQUFJLE9BQU8sQ0FBQywwQkFBMEIsR0FBRyxDQUFDLEVBQUU7QUFDeEQsZ0JBQWdCLE9BQU8sQ0FBQyw0QkFBNEIsR0FBRyxJQUFJLFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxJQUFJO0FBQ3BHLHVFQUF1RSxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUMzRyxZQUFZLENBQUM7QUFDYixRQUFRLENBQUM7QUFDVCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksU0FBUyxHQUFHO0FBQ2hCLFFBQVEsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUM7QUFDckMsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2RCxZQUFZLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0MsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM1RCxnQkFBZ0IsTUFBTSxnQkFBZ0IsR0FBRyxvQkFBb0IsR0FBRyxDQUFDLENBQUM7QUFDbEUsZ0JBQWdCLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRixnQkFBZ0IsSUFBSSxDQUFDLDRCQUE0QixDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hFLFlBQVksQ0FBQztBQUNiLFlBQVksb0JBQW9CLElBQUksT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUMxRCxRQUFRLENBQUM7QUFDVCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksa0JBQWtCLENBQUMsZUFBZSxFQUFFLGFBQWEsRUFBRTtBQUN2RCxRQUFRLFdBQVcsQ0FBQyx5QkFBeUIsQ0FBQyxlQUFlLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMvRixRQUFRLElBQUksQ0FBQyxZQUFZLEdBQUcsZUFBZSxDQUFDO0FBQzVDLFFBQVEsSUFBSSxDQUFDLFVBQVUsR0FBRyxhQUFhLENBQUM7QUFDeEMsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLHlCQUF5QixDQUFDLFlBQVksRUFBRSxhQUFhLEVBQUU7QUFDM0QsUUFBUSxNQUFNLG1CQUFtQixHQUFHLFdBQVcsQ0FBQyxlQUFlLEdBQUcsV0FBVyxDQUFDLHNCQUFzQixHQUFHLFlBQVksQ0FBQztBQUNwSCxRQUFRLFdBQVcsQ0FBQyxvQ0FBb0MsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQzlHLFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxVQUFVLEdBQUcsYUFBYSxDQUFDO0FBQy9ELElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLDZCQUE2QixHQUFHLFdBQVc7QUFDdEQ7QUFDQSxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDckQsUUFBUSxNQUFNLGVBQWUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNwRCxRQUFRLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdkQsUUFBUSxNQUFNLGVBQWUsR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuRCxRQUFRLE1BQU0sWUFBWSxHQUFHLElBQUksV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2xELFFBQVEsTUFBTSxPQUFPLEdBQUcsSUFBSUUsZ0JBQVUsRUFBRSxDQUFDO0FBQ3pDLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSUYsYUFBTyxFQUFFLENBQUM7QUFDeEMsUUFBUSxNQUFNLGlCQUFpQixHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDO0FBQ2hEO0FBQ0EsUUFBUSxNQUFNO0FBQ2QsWUFBWSxDQUFDLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLFFBQVE7QUFDakQsWUFBWSxNQUFNLEVBQUUsYUFBYSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLGFBQWE7QUFDL0UsWUFBWSxTQUFTLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsV0FBVztBQUMxRyxZQUFZLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxjQUFjO0FBQzVGLFlBQVksSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsV0FBVztBQUNoRCxTQUFTLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDO0FBQzFDO0FBQ0EsUUFBUSxNQUFNLHNCQUFzQixHQUFHLENBQUMsQ0FBQyxFQUFFLHNCQUFzQixFQUFFLHFCQUFxQixLQUFLO0FBQzdGLFlBQVksTUFBTSwyQkFBMkIsR0FBRyxxQkFBcUIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlFLFlBQVksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLHNCQUFzQixDQUFDLEdBQUcscUJBQXFCLENBQUM7QUFDL0UsWUFBWSxPQUFPLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLDJCQUEyQixDQUFDLENBQUM7QUFDNUQsUUFBUSxDQUFDLENBQUM7QUFDVjtBQUNBLFFBQVEsT0FBTyxTQUFTLFdBQVcsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLHdCQUF3QjtBQUM1Ryx3QkFBd0IsWUFBWSxFQUFFLHNCQUFzQixFQUFFLHFCQUFxQjtBQUNuRix3QkFBd0IsMEJBQTBCLEdBQUcsQ0FBQyxpREFBaUQ7QUFDdkcsd0JBQXdCLDBCQUEwQixHQUFHLGlEQUFpRCxFQUFFO0FBQ3hHO0FBQ0EsWUFBWSxNQUFNLG9DQUFvQyxHQUFHLDRDQUE0QyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDaEksWUFBWSxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxjQUFjLENBQUM7QUFDbEcsWUFBWSxNQUFNLGFBQWEsR0FBRyxXQUFXLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxhQUFhLENBQUM7QUFDaEcsWUFBWSxNQUFNLGdCQUFnQixHQUFHLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGdCQUFnQixDQUFDO0FBQ3RHLFlBQVksTUFBTSxhQUFhLEdBQUcsV0FBVyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUMsYUFBYSxDQUFDO0FBQ2hHO0FBQ0EsWUFBWSxNQUFNLFVBQVUsR0FBRyxZQUFZLENBQUM7QUFDNUMsWUFBWSxNQUFNLFNBQVMsR0FBRyxVQUFVLEdBQUcsY0FBYyxDQUFDO0FBQzFELFlBQVksTUFBTSxZQUFZLEdBQUcsU0FBUyxHQUFHLGFBQWEsQ0FBQztBQUMzRCxZQUFZLE1BQU0sU0FBUyxHQUFHLFlBQVksR0FBRyxnQkFBZ0IsQ0FBQztBQUM5RCxZQUFZLE1BQU0sc0JBQXNCLEdBQUcsU0FBUyxHQUFHLGFBQWEsQ0FBQztBQUNyRTtBQUNBLFlBQVksSUFBSSxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssU0FBUyxFQUFFO0FBQ3hELGdCQUFnQixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDLEVBQUUsV0FBVyxDQUFDLFdBQVcsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBQ3BJLGdCQUFnQixPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDcEMsWUFBWSxDQUFDLE1BQU07QUFDbkIsZ0JBQWdCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDaEQsWUFBWSxDQUFDO0FBQ2I7QUFDQSxZQUFZLElBQUksV0FBVyxDQUFDLGFBQWEsQ0FBQyxLQUFLLFNBQVMsRUFBRTtBQUMxRCxnQkFBZ0IsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztBQUM3RCw4QkFBOEIsV0FBVyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUM7QUFDN0QsOEJBQThCLFdBQVcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUMvRCxZQUFZLENBQUMsTUFBTTtBQUNuQixnQkFBZ0IsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxJQUFJLGdCQUFnQixLQUFLLENBQUMsRUFBRTtBQUN4QyxnQkFBZ0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUMsYUFBYSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUM3RyxnQkFBZ0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxZQUFZLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxXQUFXLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUM5RyxnQkFBZ0IsTUFBTSxLQUFLLEdBQUcsSUFBSSxZQUFZLENBQUMsYUFBYSxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUMxRztBQUNBLGdCQUFnQixHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEUsZ0JBQWdCLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkUsZ0JBQWdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEc7QUFDQSxnQkFBZ0IsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLEVBQUU7QUFDbEQsb0JBQW9CLE1BQU0sS0FBSyxHQUFHLElBQUksWUFBWSxDQUFDLGFBQWEsRUFBRSxzQkFBc0IsRUFBRSxvQ0FBb0MsQ0FBQyxDQUFDO0FBQ2hJLG9CQUFvQixJQUFJLHdCQUF3QixJQUFJLENBQUMsRUFBRTtBQUN2RCw0QkFBNEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckcsNEJBQTRCLElBQUksd0JBQXdCLElBQUksQ0FBQyxFQUFFO0FBQy9ELGdDQUFnQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUcsNEJBQTRCLENBQUM7QUFDN0Isb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDLE1BQU07QUFDbkIsZ0JBQWdCLE1BQU0sTUFBTSxHQUFHLElBQUksV0FBVyxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxXQUFXLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUN0RyxnQkFBZ0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxXQUFXLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3ZHLGdCQUFnQixNQUFNLEtBQUssR0FBRyxJQUFJLFdBQVcsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ25HO0FBQ0EsZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxSCxnQkFBZ0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxRztBQUNBLGdCQUFnQixpQkFBaUIsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDN0gsZ0JBQWdCLGlCQUFpQixDQUFDLENBQUMsR0FBRyxzQkFBc0IsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsc0JBQXNCLEVBQUUscUJBQXFCLENBQUMsQ0FBQztBQUNqSSxnQkFBZ0IsaUJBQWlCLENBQUMsQ0FBQyxHQUFHLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDLENBQUMsRUFBRSxzQkFBc0IsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO0FBQ2pJLGdCQUFnQixpQkFBaUIsQ0FBQyxDQUFDLEdBQUcsc0JBQXNCLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLHNCQUFzQixFQUFFLHFCQUFxQixDQUFDLENBQUM7QUFDakksZ0JBQWdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUY7QUFDQSxnQkFBZ0IsSUFBSSx3QkFBd0IsR0FBRyxDQUFDLEVBQUU7QUFDbEQsb0JBQW9CLE1BQU0sV0FBVyxHQUFHLGdCQUFnQixLQUFLLENBQUMsR0FBRyxXQUFXLEdBQUcsVUFBVSxDQUFDO0FBQzFGLG9CQUFvQixNQUFNLG1CQUFtQixHQUFHLGdCQUFnQixLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQy9FLG9CQUFvQixNQUFNLEtBQUssR0FBRyxJQUFJLFdBQVcsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLG9DQUFvQyxDQUFDLENBQUM7QUFDekcsb0JBQW9CLElBQUksd0JBQXdCLElBQUksQ0FBQyxFQUFFO0FBQ3ZELHdCQUF3QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3BELDRCQUE0QixNQUFNLE1BQU0sR0FBRyxXQUFXLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM3RSw0QkFBNEIsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixLQUFLLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDO0FBQ25GLHVDQUF1QyxPQUFPLENBQUMsTUFBTSxFQUFFLDBCQUEwQixFQUFFLDBCQUEwQixDQUFDLENBQUM7QUFDL0csd0JBQXdCLENBQUM7QUFDekIsd0JBQXdCLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxHQUFHLG1CQUFtQixDQUFDO0FBQ3pFLHdCQUF3QixrQkFBa0IsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxhQUFhLEVBQUUsc0JBQXNCLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztBQUNySCx3QkFBd0IsSUFBSSx3QkFBd0IsSUFBSSxDQUFDLEVBQUU7QUFDM0QsNEJBQTRCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDekQsZ0NBQWdDLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pGLGdDQUFnQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixLQUFLLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDO0FBQzNGLCtDQUErQyxPQUFPLENBQUMsTUFBTSxFQUFFLDBCQUEwQixFQUFFLDBCQUEwQixDQUFDLENBQUM7QUFDdkgsNEJBQTRCLENBQUM7QUFDN0IsNEJBQTRCLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYTtBQUM1RiwrQ0FBK0Msc0JBQXNCLEdBQUcsZ0JBQWdCLEVBQUUsRUFBRSxHQUFHLG1CQUFtQixDQUFDLENBQUM7QUFDcEgsd0JBQXdCLENBQUM7QUFDekIsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakI7QUFDQSxnQkFBZ0Isa0JBQWtCLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNuRixnQkFBZ0Isa0JBQWtCLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNqRixnQkFBZ0Isa0JBQWtCLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsRixZQUFZLENBQUM7QUFDYjtBQUNBLFlBQVksTUFBTSxJQUFJLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsV0FBVyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwSCxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZEO0FBQ0EsWUFBWSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxhQUFhLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzVFLFFBQVEsQ0FBQyxDQUFDO0FBQ1Y7QUFDQSxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ1I7QUFDQSxJQUFJLE9BQU8sbUNBQW1DLENBQUMsV0FBVyxFQUFFLFlBQVksRUFBRSxnQkFBZ0I7QUFDMUYsK0NBQStDLFdBQVcsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUU7QUFDakc7QUFDQSxRQUFRLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztBQUN6QixRQUFRLEtBQUssSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxXQUFXLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFO0FBQ3pELFlBQVksTUFBTSxVQUFVLEdBQUcsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQy9DLFlBQVksUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLHdCQUF3QixFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQy9FLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxJQUFJLDBCQUEwQixDQUFDO0FBQ3ZDLFFBQVEsSUFBSSwwQkFBMEIsQ0FBQztBQUN2QztBQUNBLFFBQVEsS0FBSyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUU7QUFDekQsWUFBWSxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDL0MsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDL0QsZ0JBQWdCLE1BQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQsZ0JBQWdCLEtBQUssSUFBSSxFQUFFLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFFLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLEtBQUssSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUN2SSxvQkFBb0IsSUFBSSxDQUFDLDBCQUEwQixJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRywwQkFBMEIsRUFBRTtBQUMvRix3QkFBd0IsMEJBQTBCLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQy9ELG9CQUFvQixDQUFDO0FBQ3JCLG9CQUFvQixJQUFJLENBQUMsMEJBQTBCLElBQUksS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLDBCQUEwQixFQUFFO0FBQy9GLHdCQUF3QiwwQkFBMEIsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDL0Qsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2IsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLDBCQUEwQixHQUFHLDBCQUEwQixJQUFJLENBQUMsaURBQWlELENBQUM7QUFDdEgsUUFBUSwwQkFBMEIsR0FBRywwQkFBMEIsSUFBSSxpREFBaUQsQ0FBQztBQUNySDtBQUNBLFFBQVEsTUFBTSxFQUFFLGFBQWEsRUFBRSxHQUFHLFdBQVcsQ0FBQyx5QkFBeUIsQ0FBQyxnQkFBZ0IsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNwRyxRQUFRLE1BQU0scUJBQXFCLEdBQUcsV0FBVyxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLENBQUMsVUFBVSxDQUFDO0FBQ2pHO0FBQ0EsUUFBUSxNQUFNLGNBQWMsR0FBRyxFQUFFLENBQUM7QUFDbEMsUUFBUSxNQUFNLG9CQUFvQixHQUFHLEVBQUUsQ0FBQztBQUN4QyxRQUFRLElBQUksZUFBZSxHQUFHLENBQUMsQ0FBQztBQUNoQztBQUNBLFFBQVEsS0FBSyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUU7QUFDekQsWUFBWSxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDL0MsWUFBWSxNQUFNLFdBQVcsR0FBRyxJQUFJLHNCQUFzQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3JFLFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUQsZ0JBQWdCLE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekQsZ0JBQWdCLElBQUksQ0FBQyxXQUFXLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxZQUFZLEVBQUU7QUFDL0Ysb0JBQW9CLFdBQVcsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEQsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2I7QUFDQSxZQUFZLE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDckQsWUFBWSxNQUFNLGdCQUFnQixHQUFHLENBQUMsY0FBYyxDQUFDLGVBQWUsSUFBSSxDQUFDLEtBQUssU0FBUyxJQUFJLFdBQVcsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN4SCxZQUFZLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLEtBQUssVUFBVSxJQUFJLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQ2pJO0FBQ0EsWUFBWSxNQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsdUNBQXVDLENBQUMsV0FBVyxFQUFFLGdCQUFnQixFQUFFLGlCQUFpQixDQUFDLENBQUM7QUFDckksWUFBWSxNQUFNLGVBQWUsR0FBRyxVQUFVLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQztBQUNsRSxZQUFZLE1BQU0sMEJBQTBCLEdBQUcsVUFBVSxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3JILFlBQVksTUFBTSwwQkFBMEIsR0FBRywwQkFBMEIsQ0FBQyxNQUFNLENBQUM7QUFDakYsWUFBWSxNQUFNLE9BQU8sR0FBRyxDQUFDLEdBQUcsVUFBVSxDQUFDLFdBQVcsRUFBRSxHQUFHLFVBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQzVGO0FBQ0EsWUFBWSxNQUFNLG9CQUFvQixHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQztBQUNuRixZQUFZLE1BQU0sdUJBQXVCLEdBQUcsMEJBQTBCLEdBQUcsQ0FBQyxDQUFDO0FBQzNFLFlBQVksTUFBTSxlQUFlLEdBQUcsZ0JBQWdCLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNO0FBQzFFLDREQUE0RCxXQUFXLENBQUMsc0JBQXNCLEdBQUcsdUJBQXVCLEdBQUcsQ0FBQyxDQUFDO0FBQzdILFlBQVksTUFBTSxnQkFBZ0IsR0FBRyxvQkFBb0IsR0FBRyxlQUFlLENBQUM7QUFDNUUsWUFBWSxNQUFNLGFBQWEsR0FBRyxJQUFJLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3BFO0FBQ0EsWUFBWSxNQUFNLHNCQUFzQixHQUFHLHFCQUFxQixJQUFJLGdCQUFnQixHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQzVGLFlBQVksTUFBTSxZQUFZLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUM7QUFDL0M7QUFDQSxZQUFZLElBQUksYUFBYSxHQUFHLENBQUMsQ0FBQztBQUNsQyxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3JELGdCQUFnQixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUMsZ0JBQWdCLFlBQVksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3RELGdCQUFnQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDL0Qsb0JBQW9CLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0Msb0JBQW9CLE1BQU0sV0FBVyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEUsb0JBQW9CLE1BQU0sWUFBWSxHQUFHLGVBQWUsR0FBRyxhQUFhLEdBQUcsYUFBYSxDQUFDO0FBQ3pGLG9CQUFvQixXQUFXLENBQUMsNkJBQTZCLENBQUMsV0FBVyxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUTtBQUNsSSw4REFBOEQsWUFBWSxFQUFFLHNCQUFzQixFQUFFLHFCQUFxQjtBQUN6SCw4REFBOEQsMEJBQTBCLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztBQUN0SCxvQkFBb0IsYUFBYSxFQUFFLENBQUM7QUFDcEMsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2IsWUFBWSxlQUFlLElBQUksYUFBYSxDQUFDO0FBQzdDO0FBQ0EsWUFBWSxJQUFJLGdCQUFnQixJQUFJLENBQUMsRUFBRTtBQUN2QyxnQkFBZ0IsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLFdBQVcsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxFQUFFLDBCQUEwQixDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNySCxnQkFBZ0IsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLDBCQUEwQixDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsRUFBRTtBQUNuRixvQkFBb0IsbUJBQW1CLENBQUMsR0FBRyxDQUFDLEdBQUcsMEJBQTBCLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDL0UsZ0JBQWdCLENBQUM7QUFDakIsZ0JBQWdCLE1BQU0sV0FBVyxHQUFHLElBQUksWUFBWSxDQUFDLGFBQWEsRUFBRSx1QkFBdUI7QUFDM0YscURBQXFELE9BQU8sQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDM0csZ0JBQWdCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3pELG9CQUFvQixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUMsb0JBQW9CLE1BQU0sSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdkMsb0JBQW9CLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pELG9CQUFvQixXQUFXLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0Qsb0JBQW9CLFdBQVcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUM7QUFDYixZQUFZLGNBQWMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDL0M7QUFDQSxZQUFZLE1BQU0sbUJBQW1CLEdBQUcsSUFBSSxXQUFXLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDNUYsWUFBWSxXQUFXLENBQUMsMEJBQTBCLENBQUM7QUFDbkQsZ0JBQWdCLGFBQWEsRUFBRSxhQUFhO0FBQzVDLGdCQUFnQixVQUFVLEVBQUUsYUFBYTtBQUN6QyxnQkFBZ0IsVUFBVSxFQUFFLGlCQUFpQjtBQUM3QyxnQkFBZ0IsV0FBVyxFQUFFLE9BQU8sQ0FBQyxNQUFNO0FBQzNDLGdCQUFnQixlQUFlLEVBQUUsZ0JBQWdCO0FBQ2pELGdCQUFnQixxQkFBcUIsRUFBRSxxQkFBcUI7QUFDNUQsZ0JBQWdCLGdCQUFnQixFQUFFLGdCQUFnQjtBQUNsRCxnQkFBZ0IsZUFBZSxFQUFFLGVBQWU7QUFDaEQsZ0JBQWdCLDBCQUEwQixFQUFFLDBCQUEwQjtBQUN0RSxnQkFBZ0Isd0JBQXdCLEVBQUUsUUFBUTtBQUNsRCxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDekQsWUFBWSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUMzRDtBQUNBLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxJQUFJLDJCQUEyQixHQUFHLENBQUMsQ0FBQztBQUM1QyxRQUFRLEtBQUssSUFBSSxhQUFhLElBQUksY0FBYyxFQUFFLDJCQUEyQixJQUFJLGFBQWEsQ0FBQyxVQUFVLENBQUM7QUFDMUcsUUFBUSxNQUFNLGlCQUFpQixHQUFHLFdBQVcsQ0FBQyxlQUFlO0FBQzdELGtDQUFrQyxXQUFXLENBQUMsc0JBQXNCLEdBQUcsY0FBYyxDQUFDLE1BQU0sR0FBRywyQkFBMkIsQ0FBQztBQUMzSCxRQUFRLE1BQU0sYUFBYSxHQUFHLElBQUksV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDakU7QUFDQSxRQUFRLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQztBQUN4QyxZQUFZLFlBQVksRUFBRSxDQUFDO0FBQzNCLFlBQVksWUFBWSxFQUFFLENBQUM7QUFDM0IsWUFBWSxlQUFlLEVBQUUsY0FBYyxDQUFDLE1BQU07QUFDbEQsWUFBWSxZQUFZLEVBQUUsY0FBYyxDQUFDLE1BQU07QUFDL0MsWUFBWSxhQUFhLEVBQUUsZUFBZTtBQUMxQyxZQUFZLFVBQVUsRUFBRSxlQUFlO0FBQ3ZDLFlBQVksZ0JBQWdCLEVBQUUsZ0JBQWdCO0FBQzlDLFlBQVksV0FBVyxFQUFFLFdBQVc7QUFDcEMsWUFBWSwwQkFBMEIsRUFBRSwwQkFBMEI7QUFDbEUsWUFBWSwwQkFBMEIsRUFBRSwwQkFBMEI7QUFDbEUsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQzFCO0FBQ0EsUUFBUSxJQUFJLGtCQUFrQixHQUFHLFdBQVcsQ0FBQyxlQUFlLENBQUM7QUFDN0QsUUFBUSxLQUFLLElBQUksbUJBQW1CLElBQUksb0JBQW9CLEVBQUU7QUFDOUQsWUFBWSxJQUFJLFVBQVUsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCLEVBQUUsV0FBVyxDQUFDLHNCQUFzQixDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksVUFBVSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQztBQUMzSSxZQUFZLGtCQUFrQixJQUFJLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQztBQUNyRSxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsS0FBSyxJQUFJLGFBQWEsSUFBSSxjQUFjLEVBQUU7QUFDbEQsWUFBWSxJQUFJLFVBQVUsQ0FBQyxhQUFhLEVBQUUsa0JBQWtCLEVBQUUsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0FBQzNILFlBQVksa0JBQWtCLElBQUksYUFBYSxDQUFDLFVBQVUsQ0FBQztBQUMzRCxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDM0QsUUFBUSxPQUFPLFdBQVcsQ0FBQztBQUMzQixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksT0FBTyx1Q0FBdUMsQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRTtBQUN0RixRQUFRLElBQUksVUFBVSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUM7QUFDL0MsUUFBUSxNQUFNLGFBQWEsR0FBRyxTQUFTLEdBQUcsR0FBRyxDQUFDO0FBQzlDO0FBQ0EsUUFBUSxNQUFNLEdBQUcsR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUNsQyxRQUFRLE1BQU0sR0FBRyxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDO0FBQ2xDO0FBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzdDLFlBQVksTUFBTSxXQUFXLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRCxZQUFZLE1BQU0sTUFBTSxHQUFHLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDeEUsNEJBQTRCLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3hFLDRCQUE0QixXQUFXLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUUsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEUsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE1BQU0sVUFBVSxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUQsUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDNUQsUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDNUQ7QUFDQSxRQUFRLE1BQU0sV0FBVyxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDO0FBQzFDLFFBQVEsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQy9CLFFBQVEsTUFBTSxvQkFBb0IsR0FBRyxFQUFFLENBQUM7QUFDeEM7QUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDN0MsWUFBWSxNQUFNLFdBQVcsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JELFlBQVksTUFBTSxNQUFNLEdBQUcsQ0FBQyxXQUFXLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN4RSw0QkFBNEIsV0FBVyxDQUFDLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDeEUsNEJBQTRCLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxRSxZQUFZLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQztBQUN2RSxZQUFZLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQztBQUN2RSxZQUFZLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQztBQUN2RTtBQUNBLFlBQVksV0FBVyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDO0FBQ3ZFLFlBQVksV0FBVyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDO0FBQ3ZFLFlBQVksV0FBVyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDO0FBQ3ZFO0FBQ0EsWUFBWSxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxHQUFHLE1BQU0sR0FBRyxPQUFPLEdBQUcsTUFBTSxDQUFDO0FBQ3RGLFlBQVksSUFBSSxNQUFNLEdBQUcsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDeEQsWUFBWSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3pCLGdCQUFnQixvQkFBb0IsQ0FBQyxRQUFRLENBQUMsR0FBRyxNQUFNLEdBQUc7QUFDMUQsb0JBQW9CLFFBQVEsRUFBRSxFQUFFO0FBQ2hDLG9CQUFvQixRQUFRLEVBQUUsV0FBVyxDQUFDLE9BQU8sRUFBRTtBQUNuRCxpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBLFlBQVksTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEMsWUFBWSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLFVBQVUsRUFBRTtBQUNwRCxnQkFBZ0IsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN6QyxnQkFBZ0Isb0JBQW9CLENBQUMsUUFBUSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQ3RELFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxNQUFNLHdCQUF3QixHQUFHLEVBQUUsQ0FBQztBQUM1QyxRQUFRLEtBQUssSUFBSSxRQUFRLElBQUksb0JBQW9CLEVBQUU7QUFDbkQsWUFBWSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEVBQUUsUUFBUSxDQUFDLEVBQUU7QUFDL0QsZ0JBQWdCLE1BQU0sTUFBTSxHQUFHLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzlELGdCQUFnQixJQUFJLE1BQU0sRUFBRTtBQUM1QixvQkFBb0Isd0JBQXdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzFELGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxPQUFPO0FBQ2YsWUFBWSxhQUFhLEVBQUUsV0FBVztBQUN0QyxZQUFZLHNCQUFzQixFQUFFLHdCQUF3QjtBQUM1RCxTQUFTLENBQUM7QUFDVixJQUFJLENBQUM7QUFDTDtBQUNBOztBQ2ozQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNPLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUI7QUFDQSxJQUFJLFdBQVcsQ0FBQyxZQUFZLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixFQUFFLGtCQUFrQixFQUFFO0FBQ3RGLFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7QUFDekMsUUFBUSxJQUFJLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztBQUM3QyxRQUFRLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztBQUNyRCxRQUFRLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztBQUNyRCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksK0JBQStCLENBQUMsVUFBVSxFQUFFO0FBQ2hELFFBQVEsSUFBSSxrQkFBa0IsQ0FBQztBQUMvQixRQUFRLElBQUksWUFBWSxDQUFDO0FBQ3pCLFFBQVEsSUFBSSxjQUFjLENBQUM7QUFDM0IsUUFBUSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtBQUNyQyxZQUFZLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoRSxZQUFZLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUM1RCxZQUFZLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ2hELFlBQVksY0FBYyxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDcEQsUUFBUSxDQUFDLE1BQU07QUFDZixZQUFZLGtCQUFrQixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztBQUN6RCxZQUFZLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQzdDLFlBQVksY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7QUFDakQsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE1BQU0sU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUM3QixRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDL0MsWUFBWSxNQUFNLGFBQWEsR0FBRyxJQUFJLHNCQUFzQixDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2xHLFlBQVksTUFBTSxhQUFhLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BELFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUQsZ0JBQWdCLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ3RDLG9CQUFvQixhQUFhLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqRSxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUM7QUFDYixZQUFZLFNBQVMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDMUMsUUFBUSxDQUFDO0FBQ1QsUUFBUSxPQUFPO0FBQ2YsWUFBWSxXQUFXLEVBQUUsU0FBUztBQUNsQyxZQUFZLFVBQVUsRUFBRSxrQkFBa0I7QUFDMUMsU0FBUyxDQUFDO0FBQ1YsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE9BQU8sc0JBQXNCLENBQUMsYUFBYSxHQUFHLENBQUMsRUFBRSxXQUFXLEdBQUcsSUFBSUEsYUFBTyxFQUFFO0FBQ2hGLGtDQUFrQyxTQUFTLEdBQUcsV0FBVyxDQUFDLGVBQWUsRUFBRSxVQUFVLEdBQUcsV0FBVyxDQUFDLFVBQVUsRUFBRTtBQUNoSDtBQUNBLFFBQVEsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLFVBQVUsS0FBSztBQUNuRDtBQUNBLFlBQVksTUFBTSxRQUFRLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUM3RCxZQUFZLE1BQU0sUUFBUSxHQUFHLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDN0QsWUFBWSxNQUFNLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzdEO0FBQ0EsWUFBWSxJQUFJLGFBQWEsSUFBSSxDQUFDLEVBQUUsYUFBYSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUM7QUFDMUU7QUFDQSxZQUFZLE1BQU0sTUFBTSxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDO0FBQ3pDLFlBQVksTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDO0FBQ3RDLFlBQVksTUFBTSxVQUFVLEdBQUcsQ0FBQyxLQUFLLEtBQUs7QUFDMUMsZ0JBQWdCLEtBQUssQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxHQUFHLGFBQWEsQ0FBQztBQUM5RSxnQkFBZ0IsS0FBSyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDLEdBQUcsYUFBYSxDQUFDO0FBQzlFLGdCQUFnQixLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsR0FBRyxhQUFhLENBQUM7QUFDOUUsWUFBWSxDQUFDLENBQUM7QUFDZCxZQUFZLFVBQVUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLO0FBQ2pELGdCQUFnQixNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQy9GLGdCQUFnQixVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDbkMsZ0JBQWdCLEtBQUssQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQ3JELFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDZixZQUFZLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSztBQUM3QyxnQkFBZ0IsSUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUMvQyxnQkFBZ0IsSUFBSSxXQUFXLEdBQUcsQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUMvQyxnQkFBZ0IsSUFBSSxXQUFXLEdBQUcsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3hELHFCQUFxQixPQUFPLEVBQUUsQ0FBQztBQUMvQixZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ2Y7QUFDQSxZQUFZLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUN0QyxZQUFZLE1BQU0sa0JBQWtCLEdBQUcsRUFBRSxDQUFDO0FBQzFDLFlBQVksYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUMzRSxZQUFZLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsR0FBRyxhQUFhLENBQUMsQ0FBQztBQUNuRixZQUFZLElBQUksaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO0FBQ3RDLFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGFBQWEsRUFBRSxDQUFDLEdBQUcsRUFBRTtBQUNyRCxnQkFBZ0IsSUFBSSxVQUFVLEdBQUcsaUJBQWlCLENBQUM7QUFDbkQsZ0JBQWdCLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEtBQUs7QUFDcEQsb0JBQW9CLE9BQU8sVUFBVSxJQUFJLFVBQVUsSUFBSSxVQUFVLEdBQUcsVUFBVSxHQUFHLGFBQWEsQ0FBQztBQUMvRixnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7QUFDbkIsZ0JBQWdCLGtCQUFrQixDQUFDLElBQUksQ0FBQztBQUN4QyxvQkFBb0IsWUFBWSxFQUFFLFNBQVM7QUFDM0Msb0JBQW9CLFlBQVksRUFBRSxVQUFVO0FBQzVDLGlCQUFpQixDQUFDLENBQUM7QUFDbkIsZ0JBQWdCLGlCQUFpQixJQUFJLGFBQWEsQ0FBQztBQUNuRCxZQUFZLENBQUM7QUFDYixZQUFZLE9BQU87QUFDbkIsZ0JBQWdCLGNBQWMsRUFBRSxjQUFjLENBQUMsTUFBTTtBQUNyRCxnQkFBZ0IsY0FBYztBQUM5QixnQkFBZ0Isa0JBQWtCO0FBQ2xDLGFBQWEsQ0FBQztBQUNkLFFBQVEsQ0FBQyxDQUFDO0FBQ1YsUUFBUSxPQUFPLElBQUksZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztBQUN6RixJQUFJLENBQUM7QUFDTDs7QUM3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNPLE1BQU0sb0JBQW9CLENBQUM7QUFDbEM7QUFDQSxJQUFJLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxxQkFBcUIsRUFBRSxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUU7QUFDNUgsUUFBUSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7QUFDakQsUUFBUSxJQUFJLENBQUMscUJBQXFCLEdBQUcscUJBQXFCLENBQUM7QUFDM0QsUUFBUSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7QUFDakQsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztBQUN2QyxRQUFRLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxTQUFTLENBQUM7QUFDckYsUUFBUSxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUNuQyxRQUFRLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0FBQ3JDLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxrQ0FBa0MsQ0FBQyxVQUFVLEVBQUU7QUFDbkQsUUFBUSxNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQywrQkFBK0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuRyxRQUFRLE9BQU8sV0FBVyxDQUFDLG1DQUFtQyxDQUFDLGdCQUFnQixDQUFDLFdBQVc7QUFDM0YsK0RBQStELElBQUksQ0FBQyxxQkFBcUIsRUFBRSxJQUFJLENBQUMsZ0JBQWdCO0FBQ2hILCtEQUErRCxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFVBQVU7QUFDaEgsK0RBQStELGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzVGLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLG9CQUFvQixDQUFDLHFCQUFxQixHQUFHLENBQUMsRUFBRSxnQkFBZ0IsR0FBRyxDQUFDLEVBQUUsV0FBVyxHQUFHLENBQUMsRUFBRSxXQUFXLEdBQUcsSUFBSUEsYUFBTyxFQUFFO0FBQzdILGdDQUFnQyxTQUFTLEdBQUcsV0FBVyxDQUFDLGVBQWUsRUFBRSxVQUFVLEdBQUcsV0FBVyxDQUFDLFVBQVUsRUFBRTtBQUM5RyxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDMUgsUUFBUSxPQUFPLElBQUksb0JBQW9CLENBQUMsZ0JBQWdCLEVBQUUscUJBQXFCLEVBQUUsZ0JBQWdCO0FBQ2pHLHdDQUF3QyxXQUFXLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN6RixJQUFJLENBQUM7QUFDTDs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDWSxNQUFDLFNBQVMsR0FBRztBQUN6QixJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQ2hCLEVBQUU7QUFDRjtBQUNBO0FBQ08sTUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDNUIsTUFBTSxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCLE1BQU0sZUFBZSxHQUFHLENBQUMsQ0FBQztBQUMxQixNQUFNLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUMzQixNQUFNLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUMzQixNQUFNLGlCQUFpQixHQUFHLENBQUMsQ0FBQztBQUM1QixNQUFNLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUNsQztBQUNZLE1BQUMsa0JBQWtCLEdBQUc7QUFDbEMsSUFBSSxRQUFRLEVBQUUsaUJBQWlCO0FBQy9CLElBQUksS0FBSyxFQUFFLGNBQWM7QUFDekIsSUFBSSxNQUFNLEVBQUUsZUFBZTtBQUMzQixJQUFJLE9BQU8sRUFBRSxnQkFBZ0I7QUFDN0IsSUFBSSxPQUFPLEVBQUUsZ0JBQWdCO0FBQzdCLElBQUksUUFBUSxFQUFFLGlCQUFpQjtBQUMvQixJQUFJLE9BQU8sRUFBRSxnQkFBZ0I7QUFDN0IsRUFBRTtBQUNGO0FBQ1ksTUFBQyxTQUFTLEdBQUc7QUFDekIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLENBQUM7QUFDMUIsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDO0FBQ3ZCLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQztBQUN4QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQztBQUN6QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQztBQUN6QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQztBQUMxQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQztBQUN6QixFQUFFO0FBQ0Y7QUFDTyxNQUFNLGNBQWMsQ0FBQztBQUM1QjtBQUNBLElBQUksT0FBTyxjQUFjLEdBQUcsWUFBWSxDQUFDO0FBQ3pDO0FBQ0EsSUFBSSxXQUFXLEdBQUc7QUFDbEIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxjQUFjLEVBQUUsZUFBZSxHQUFHLENBQUMsRUFBRTtBQUMxRTtBQUNBLFFBQVEsTUFBTSxjQUFjLEdBQUcsRUFBRSxDQUFDO0FBQ2xDO0FBQ0EsUUFBUSxJQUFJLGlCQUFpQixHQUFHLEtBQUssQ0FBQztBQUN0QyxRQUFRLElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQztBQUMvQixRQUFRLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztBQUM1QixRQUFRLElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQztBQUNoQyxRQUFRLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQztBQUMvQjtBQUNBLFFBQVEsTUFBTSxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQzVCLFFBQVEsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzlCLFFBQVEsTUFBTSxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBRWpDLFFBQVEsTUFBTSxnQkFBZ0IsR0FBRyxFQUFFLENBQUM7QUFDcEM7QUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsZUFBZSxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ25FLFlBQVksTUFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9DLFlBQVksSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFO0FBQzVDLGdCQUFnQixJQUFJLGlCQUFpQixFQUFFO0FBQ3ZDLG9CQUFvQixhQUFhLEVBQUUsQ0FBQztBQUNwQyxvQkFBb0IsTUFBTTtBQUMxQixnQkFBZ0IsQ0FBQyxNQUFNO0FBQ3ZCLG9CQUFvQixpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDN0Msb0JBQW9CLGVBQWUsR0FBRyxDQUFDLENBQUM7QUFDeEMsb0JBQW9CLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFDdEMsb0JBQW9CLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDM0Qsb0JBQW9CLElBQUksZUFBZSxHQUFHLENBQUMsQ0FBQztBQUM1QyxvQkFBb0IsS0FBSyxJQUFJLGFBQWEsSUFBSSxjQUFjLEVBQUU7QUFDOUQsd0JBQXdCLE1BQU0sZ0JBQWdCLEdBQUcsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3RFLHdCQUF3QixJQUFJLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDekQsNEJBQTRCLGVBQWUsRUFBRSxDQUFDO0FBQzlDLDRCQUE0QixJQUFJLGVBQWUsS0FBSyxDQUFDLEVBQUU7QUFDdkQsZ0NBQWdDLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQztBQUMvRCw0QkFBNEIsQ0FBQyxNQUFNLElBQUksZUFBZSxLQUFLLENBQUMsRUFBRTtBQUM5RCxnQ0FBZ0MsV0FBVyxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3pFLDRCQUE0QixDQUFDO0FBQzdCLHdCQUF3QixDQUFDO0FBQ3pCLG9CQUFvQixDQUFDO0FBQ3JCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUNwRCxnQkFBZ0IsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ3ZFLGdCQUFnQixJQUFJLFVBQVUsRUFBRTtBQUNoQyxvQkFBb0IsTUFBTSxZQUFZLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELG9CQUFvQixNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDcEQsb0JBQW9CLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbEQsb0JBQW9CLE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM5RCxvQkFBb0IsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEdBQUcsWUFBWSxDQUFDO0FBQy9ELG9CQUFvQixNQUFNLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN2RSxvQkFBb0IsSUFBSSxPQUFPLEtBQUssU0FBUyxFQUFFO0FBRS9DLHdCQUF3QixRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9DLHdCQUF3QixVQUFVLENBQUMsT0FBTyxDQUFDLEdBQUcsU0FBUyxDQUFDO0FBQ3hELG9CQUFvQixDQUFDO0FBQ3JCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiLFlBQVksSUFBSSxJQUFJLEtBQUssY0FBYyxDQUFDLGNBQWMsRUFBRTtBQUN4RCxnQkFBZ0IsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNuQyxnQkFBZ0IsTUFBTTtBQUN0QixZQUFZLENBQUM7QUFDYixZQUFZLElBQUksaUJBQWlCLEVBQUU7QUFDbkMsZ0JBQWdCLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDMUMsZ0JBQWdCLGFBQWEsRUFBRSxDQUFDO0FBQ2hDLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDaEMsUUFBUSxJQUFJLGNBQWMsR0FBRyxDQUFDLENBQUM7QUFDL0IsUUFBUSxLQUFLLElBQUksU0FBUyxJQUFJLGFBQWEsRUFBRTtBQUM3QyxZQUFZLE1BQU0sU0FBUyxHQUFHLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQzFELFlBQVksSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxFQUFFO0FBQzVELGdCQUFnQixNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDMUQsZ0JBQWdCLElBQUksT0FBTyxLQUFLLFNBQVMsRUFBRTtBQUMzQyxvQkFBb0IsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLGNBQWMsQ0FBQztBQUMzRCxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUM7QUFDYixZQUFZLGNBQWMsSUFBSSxTQUFTLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztBQUN2RSxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLENBQUMseUNBQXlDLENBQUMsYUFBYSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ2pIO0FBQ0EsUUFBUSxPQUFPO0FBQ2YsWUFBWSxhQUFhLEVBQUUsY0FBYztBQUN6QyxZQUFZLGlCQUFpQixFQUFFLGVBQWU7QUFDOUMsWUFBWSxlQUFlLEVBQUUsYUFBYTtBQUMxQyxZQUFZLFlBQVksRUFBRSxVQUFVO0FBQ3BDLFlBQVksVUFBVSxFQUFFLFFBQVE7QUFDaEMsWUFBWSxjQUFjLEVBQUUsWUFBWTtBQUN4QyxZQUFZLGdCQUFnQixFQUFFLGNBQWM7QUFDNUMsWUFBWSxhQUFhLEVBQUUsV0FBVztBQUN0QyxZQUFZLGVBQWUsRUFBRSxjQUFjLEdBQUcsV0FBVztBQUN6RCxZQUFZLGFBQWEsRUFBRSxXQUFXO0FBQ3RDLFlBQVksYUFBYSxFQUFFLFdBQVc7QUFDdEMsWUFBWSwwQkFBMEIsRUFBRSxrQkFBa0IsQ0FBQyxNQUFNO0FBQ2pFLFlBQVksMENBQTBDLEVBQUUsa0JBQWtCLENBQUMsc0JBQXNCO0FBQ2pHLFlBQVksaUNBQWlDLEVBQUUsa0JBQWtCLENBQUMsYUFBYTtBQUMvRSxZQUFZLGlDQUFpQyxFQUFFLGtCQUFrQixDQUFDLGFBQWE7QUFDL0UsU0FBUyxDQUFDO0FBQ1YsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLHlDQUF5QyxDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUU7QUFDMUUsUUFBUSxJQUFJLDRCQUE0QixHQUFHLENBQUMsQ0FBQztBQUM3QyxRQUFRLElBQUksc0JBQXNCLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDLFFBQVEsS0FBSyxJQUFJLFNBQVMsSUFBSSxVQUFVLEVBQUU7QUFDMUMsWUFBWSxJQUFJLFNBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUUsNEJBQTRCLEVBQUUsQ0FBQztBQUMvRSxRQUFRLENBQUM7QUFDVCxRQUFRLHNCQUFzQixHQUFHLDRCQUE0QixHQUFHLENBQUMsQ0FBQztBQUNsRSxRQUFRLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN2QixRQUFRLElBQUksc0JBQXNCLElBQUksQ0FBQyxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDcEQsUUFBUSxJQUFJLHNCQUFzQixJQUFJLENBQUMsRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3BEO0FBQ0EsUUFBUSxJQUFJLGFBQWEsR0FBRyxFQUFFLENBQUM7QUFDL0IsUUFBUSxJQUFJLGFBQWEsR0FBRyxFQUFFLENBQUM7QUFDL0I7QUFDQSxRQUFRLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUU7QUFDMUMsWUFBWSxJQUFJLE1BQU0sSUFBSSxDQUFDLEVBQUU7QUFDN0IsZ0JBQWdCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUMsb0JBQW9CLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsSUFBSSxDQUFDLEdBQUcsc0JBQXNCLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZHLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiLFlBQVksSUFBSSxNQUFNLElBQUksQ0FBQyxFQUFFO0FBQzdCLGdCQUFnQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzVDLG9CQUFvQixhQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLElBQUksQ0FBQyxHQUFHLHNCQUFzQixHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0csZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2IsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE9BQU87QUFDZixZQUFZLFFBQVEsRUFBRSxNQUFNO0FBQzVCLFlBQVksd0JBQXdCLEVBQUUsc0JBQXNCO0FBQzVELFlBQVksZUFBZSxFQUFFLGFBQWE7QUFDMUMsWUFBWSxlQUFlLEVBQUUsYUFBYTtBQUMxQyxTQUFTLENBQUM7QUFDVixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksT0FBTyxxQkFBcUIsQ0FBQyxXQUFXLEVBQUU7QUFDOUMsUUFBUSxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDaEMsUUFBUSxLQUFLLElBQUksVUFBVSxJQUFJLFdBQVcsRUFBRTtBQUM1QyxZQUFZLElBQUksVUFBVSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsRUFBRTtBQUNsRCxnQkFBZ0IsTUFBTSxjQUFjLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM3RCxnQkFBZ0IsSUFBSSxlQUFlLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLGdCQUFnQixLQUFLLElBQUksYUFBYSxJQUFJLGNBQWMsRUFBRTtBQUMxRCxvQkFBb0IsTUFBTSxnQkFBZ0IsR0FBRyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDbEUsb0JBQW9CLElBQUksZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNyRCx3QkFBd0IsZUFBZSxFQUFFLENBQUM7QUFDMUMsd0JBQXdCLElBQUksZUFBZSxLQUFLLENBQUMsRUFBRTtBQUNuRCw0QkFBNEIsWUFBWSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2hFLHdCQUF3QixDQUFDO0FBQ3pCLG9CQUFvQixDQUFDO0FBQ3JCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNULFFBQVEsT0FBTyxZQUFZLENBQUM7QUFDNUIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE9BQU8scUJBQXFCLENBQUMsaUJBQWlCLEVBQUU7QUFDcEQsUUFBUSxJQUFJLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDLEVBQUU7QUFDdkUsWUFBWSxPQUFPLElBQUksQ0FBQztBQUN4QixRQUFRLENBQUM7QUFDVCxRQUFRLE9BQU8sS0FBSyxDQUFDO0FBQ3JCLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLHVCQUF1QixDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRTtBQUM1RSxRQUFRLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxTQUFTLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUMzRyxRQUFRLE1BQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3JFLFFBQVEsT0FBTyxjQUFjLENBQUMscUJBQXFCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2RSxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksT0FBTyw2QkFBNkIsQ0FBQyxTQUFTLEVBQUU7QUFDcEQsUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQzFDLFFBQVEsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLFFBQVEsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzVCLFFBQVEsTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDO0FBQ2xDO0FBQ0EsUUFBUSxPQUFPLElBQUksRUFBRTtBQUNyQixZQUFZLElBQUksWUFBWSxHQUFHLGFBQWEsSUFBSSxTQUFTLENBQUMsVUFBVSxFQUFFO0FBQ3RFLGdCQUFnQixNQUFNLElBQUksS0FBSyxDQUFDLHVEQUF1RCxDQUFDLENBQUM7QUFDekYsWUFBWSxDQUFDO0FBQ2IsWUFBWSxNQUFNLFdBQVcsR0FBRyxJQUFJLFVBQVUsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ3ZGLFlBQVksVUFBVSxJQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEQsWUFBWSxZQUFZLElBQUksYUFBYSxDQUFDO0FBQzFDO0FBQ0EsWUFBWSxJQUFJLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLGFBQWEsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDLEVBQUU7QUFDN0csZ0JBQWdCLE1BQU07QUFDdEIsWUFBWSxDQUFDO0FBQ2IsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE9BQU8sVUFBVSxDQUFDO0FBQzFCLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxvQkFBb0IsQ0FBQyxTQUFTLEVBQUU7QUFDcEMsUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO0FBQzFDLFFBQVEsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLFFBQVEsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzVCLFFBQVEsTUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDO0FBQ2xDO0FBQ0EsUUFBUSxPQUFPLElBQUksRUFBRTtBQUNyQixZQUFZLElBQUksWUFBWSxHQUFHLGFBQWEsSUFBSSxTQUFTLENBQUMsVUFBVSxFQUFFO0FBQ3RFLGdCQUFnQixNQUFNLElBQUksS0FBSyxDQUFDLHVEQUF1RCxDQUFDLENBQUM7QUFDekYsWUFBWSxDQUFDO0FBQ2IsWUFBWSxNQUFNLFdBQVcsR0FBRyxJQUFJLFVBQVUsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ3ZGLFlBQVksVUFBVSxJQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEQsWUFBWSxZQUFZLElBQUksYUFBYSxDQUFDO0FBQzFDO0FBQ0EsWUFBWSxJQUFJLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLGFBQWEsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDLEVBQUU7QUFDN0csZ0JBQWdCLE1BQU07QUFDdEIsWUFBWSxDQUFDO0FBQ2IsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE9BQU8sVUFBVSxDQUFDO0FBQzFCLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLHdCQUF3QixDQUFDLFVBQVUsRUFBRTtBQUNoRCxRQUFRLE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkQsUUFBUSxNQUFNLFdBQVcsR0FBRyxFQUFFLENBQUM7QUFDL0IsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNyRCxZQUFZLE1BQU0sSUFBSSxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMvQyxZQUFZLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkMsWUFBWSxJQUFJLElBQUksS0FBSyxjQUFjLENBQUMsY0FBYyxFQUFFO0FBQ3hELGdCQUFnQixNQUFNO0FBQ3RCLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNULFFBQVEsT0FBTyxXQUFXLENBQUM7QUFDM0IsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE9BQU8sbUNBQW1DLENBQUMsV0FBVyxFQUFFO0FBQzVEO0FBQ0EsUUFBUSxPQUFPLFNBQVMsQ0FBQyxPQUFPLENBQUM7QUFDakMsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE9BQU8sa0NBQWtDLENBQUMsU0FBUyxFQUFFO0FBQ3pELFFBQVEsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLDZCQUE2QixDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3BGLFFBQVEsT0FBTyxjQUFjLENBQUMsbUNBQW1DLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDL0UsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE9BQU8sVUFBVSxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFNBQVMsR0FBRyxJQUFJLEVBQUU7QUFDdEcsUUFBUSxNQUFNLE1BQU0sR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUM7QUFDaEUsUUFBUSxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDO0FBQ2pELFFBQVEsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztBQUM3QyxRQUFRLEtBQUssSUFBSSxPQUFPLElBQUksWUFBWSxFQUFFO0FBQzFDLFlBQVksTUFBTSxTQUFTLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2xELFlBQVksSUFBSSxTQUFTLEtBQUssZ0JBQWdCLEVBQUU7QUFDaEQsZ0JBQWdCLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDakcsWUFBWSxDQUFDLE1BQU0sSUFBSSxTQUFTLEtBQUssZ0JBQWdCLEVBQUU7QUFDdkQsZ0JBQWdCLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0YsWUFBWSxDQUFDLE1BQU0sSUFBSSxTQUFTLEtBQUssaUJBQWlCLEVBQUU7QUFDeEQsZ0JBQWdCLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEcsWUFBWSxDQUFDLE1BQU0sSUFBSSxTQUFTLEtBQUssY0FBYyxFQUFFO0FBQ3JELGdCQUFnQixTQUFTLENBQUMsT0FBTyxDQUFDLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQy9GLFlBQVksQ0FBQyxNQUFNLElBQUksU0FBUyxLQUFLLGVBQWUsRUFBRTtBQUN0RCxnQkFBZ0IsU0FBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNoRyxZQUFZLENBQUMsTUFBTSxJQUFJLFNBQVMsS0FBSyxnQkFBZ0IsRUFBRTtBQUN2RCxnQkFBZ0IsSUFBSSxTQUFTLEVBQUU7QUFDL0Isb0JBQW9CLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDckcsZ0JBQWdCLENBQUMsTUFBTTtBQUN2QixvQkFBb0IsU0FBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQzdGLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMOztBQ3RUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBLE1BQU0sb0JBQW9CLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO0FBQ2hILDhCQUE4QixRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDM0c7QUFDQSxNQUFNLHVCQUF1QixHQUFHLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdEU7QUFDQSxNQUFNO0FBQ04sUUFBUSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLFFBQVE7QUFDbkksT0FBTyxHQUFHLHVCQUF1QixDQUFDO0FBQ2xDO0FBQ08sTUFBTSxnQkFBZ0IsQ0FBQztBQUM5QjtBQUNBLElBQUksV0FBVyxHQUFHO0FBQ2xCLFFBQVEsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDO0FBQ25ELElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxpQkFBaUIsQ0FBQyxXQUFXLEVBQUU7QUFDbkM7QUFDQSxRQUFRLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztBQUM1QixRQUFRLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUs7QUFDdEMsWUFBWSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsV0FBVyxFQUFFLENBQUM7QUFDeEQsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNYO0FBQ0EsUUFBUSxJQUFJLG1CQUFtQixHQUFHLENBQUMsQ0FBQztBQUNwQyxRQUFRLElBQUksV0FBVyxJQUFJLEVBQUUsRUFBRTtBQUMvQixZQUFZLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztBQUNyQyxRQUFRLENBQUMsTUFBTSxJQUFJLFdBQVcsSUFBSSxFQUFFLEVBQUU7QUFDdEMsWUFBWSxtQkFBbUIsR0FBRyxFQUFFLENBQUM7QUFDckMsUUFBUSxDQUFDLE1BQU0sSUFBSSxXQUFXLElBQUksQ0FBQyxFQUFFO0FBQ3JDLFlBQVksbUJBQW1CLEdBQUcsQ0FBQyxDQUFDO0FBQ3BDLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxNQUFNLG1CQUFtQixHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RixRQUFRLElBQUksMkJBQTJCLEdBQUcsbUJBQW1CLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLEtBQUssS0FBSyxDQUFDLE9BQU8sRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdHO0FBQ0EsUUFBUSxNQUFNLGdCQUFnQixHQUFHLENBQUMsR0FBRyxvQkFBb0IsRUFBRSxHQUFHLDJCQUEyQixDQUFDLENBQUM7QUFDM0YsUUFBUSxNQUFNLG1CQUFtQixHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdEU7QUFDQSxRQUFRLE1BQU0sY0FBYyxHQUFHLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxPQUFPLEtBQUs7QUFDNUUsWUFBWSxHQUFHLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUM7QUFDckQsWUFBWSxPQUFPLEdBQUcsQ0FBQztBQUN2QixRQUFRLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNmLFFBQVEsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQy9GLFFBQVEsTUFBTSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDO0FBQy9DLFFBQVEsTUFBTSxDQUFDLGFBQWEsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDO0FBQ3JELFFBQVEsTUFBTSxDQUFDLG1CQUFtQixHQUFHLG1CQUFtQixDQUFDO0FBQ3pELFFBQVEsT0FBTyxNQUFNLENBQUM7QUFDdEIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLGdCQUFnQixDQUFDLFVBQVUsRUFBRTtBQUNqQyxRQUFRLE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoRixRQUFRLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUMzRCxRQUFRLE1BQU0sQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0FBQ3ZDLFFBQVEsTUFBTSxDQUFDLGVBQWUsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsR0FBRyxjQUFjLENBQUMsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDOUgsUUFBUSxPQUFPLE1BQU0sQ0FBQztBQUN0QixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksc0JBQXNCLENBQUMsU0FBUyxFQUFFO0FBQ3RDLFFBQVEsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvRSxRQUFRLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2pELElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxhQUFhLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRTtBQUNyQyxRQUFRLE9BQU8sSUFBSSxRQUFRLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUMvRCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUkscUNBQXFDLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLGVBQWU7QUFDaEcsMENBQTBDLFFBQVEsRUFBRSxRQUFRLEVBQUUsMkJBQTJCLEdBQUcsQ0FBQyxFQUFFO0FBQy9GLFFBQVEsMkJBQTJCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsRUFBRSxNQUFNLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUM3RyxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLDJCQUEyQixDQUFDLENBQUMsYUFBYSxDQUFDO0FBQ3ZJO0FBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLElBQUksT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ25ELFlBQVksTUFBTSxXQUFXLEdBQUcsZ0JBQWdCLENBQUMsd0JBQXdCLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxNQUFNO0FBQzlGLDBFQUEwRSxlQUFlLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztBQUN4SCxZQUFZLE1BQU0sT0FBTyxHQUFHLENBQUMsR0FBRyxnQkFBZ0IsR0FBRyxRQUFRLENBQUM7QUFDNUQsWUFBWSxXQUFXLENBQUMsNkJBQTZCLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLDJCQUEyQixDQUFDLENBQUM7QUFDdEgsUUFBUSxDQUFDO0FBQ1QsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLG9DQUFvQyxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxlQUFlO0FBQy9GLHlDQUF5QyxVQUFVLEVBQUUsMkJBQTJCLEdBQUcsQ0FBQyxFQUFFO0FBQ3RGLFFBQVEsMkJBQTJCLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsRUFBRSxNQUFNLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUM3RyxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsSUFBSSxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbkQsWUFBWSxNQUFNLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyx3QkFBd0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLE1BQU07QUFDOUYsMEVBQTBFLGVBQWUsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0FBQ3hILFlBQVksVUFBVSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUM3QyxRQUFRLENBQUM7QUFDVCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksc0JBQXNCLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSwyQkFBMkIsRUFBRTtBQUNyRyxRQUFRLDJCQUEyQixHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEVBQUUsYUFBYSxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDcEgsUUFBUSxNQUFNLFVBQVUsR0FBRyxJQUFJLHNCQUFzQixDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFDbkYsUUFBUSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsVUFBVSxFQUFFLEdBQUcsRUFBRSxFQUFFO0FBQ25ELFlBQVksTUFBTSxRQUFRLEdBQUcsZ0JBQWdCLENBQUMsd0JBQXdCLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLGFBQWE7QUFDM0csdUVBQXVFLENBQUMsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0FBQ3ZHLFlBQVksVUFBVSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQyxRQUFRLENBQUM7QUFDVCxRQUFRLE9BQU8sVUFBVSxDQUFDO0FBQzFCLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLHdCQUF3QixHQUFHLFdBQVc7QUFDakQ7QUFDQSxRQUFRLElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUMxQixRQUFRLE1BQU0sWUFBWSxHQUFHLElBQUlFLGdCQUFVLEVBQUUsQ0FBQztBQUM5QztBQUNBLFFBQVEsTUFBTSxRQUFRLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUN6RCxRQUFRLE1BQU0sUUFBUSxHQUFHLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDekQsUUFBUSxNQUFNLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3pEO0FBQ0EsUUFBUSxNQUFNLGFBQWEsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ25FLFFBQVEsTUFBTSxhQUFhLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNuRSxRQUFRLE1BQU0sYUFBYSxHQUFHLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDbkU7QUFDQSxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUN6RSxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUN6RSxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUN6RSxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUN6RTtBQUNBLFFBQVEsTUFBTSxXQUFXLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztBQUMvRCxRQUFRLE1BQU0sV0FBVyxHQUFHLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDL0QsUUFBUSxNQUFNLFdBQVcsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQy9ELFFBQVEsTUFBTSxjQUFjLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUNyRTtBQUNBLFFBQVEsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0FBQzlCO0FBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3JDLFlBQVksVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO0FBQ25FLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxPQUFPLFNBQVMsU0FBUyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsZUFBZSxHQUFHLENBQUMsRUFBRSwyQkFBMkIsR0FBRyxDQUFDLEVBQUU7QUFDdEcsWUFBWSwyQkFBMkIsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLDJCQUEyQixFQUFFLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2pILFlBQVksZ0JBQWdCLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMxRixZQUFZLE1BQU0sUUFBUSxHQUFHLHNCQUFzQixDQUFDLFdBQVcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQzdGLFlBQVksSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssU0FBUyxFQUFFO0FBQ2pELGdCQUFnQixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUN0RSxnQkFBZ0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDdEUsZ0JBQWdCLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLFlBQVksQ0FBQyxNQUFNO0FBQ25CLGdCQUFnQixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQy9DLGdCQUFnQixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQy9DLGdCQUFnQixRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQy9DLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxTQUFTLEVBQUU7QUFFaEQsZ0JBQWdCLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQy9ELGdCQUFnQixRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUMvRCxnQkFBZ0IsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDL0QsWUFBWSxDQUFDLE1BQU0sSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssU0FBUyxFQUFFO0FBQ3BELGdCQUFnQixRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUM1RCxnQkFBZ0IsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDOUQsZ0JBQWdCLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzdELFlBQVksQ0FBQyxNQUFNO0FBQ25CLGdCQUFnQixRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLGdCQUFnQixRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLGdCQUFnQixRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFDLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxTQUFTLEVBQUU7QUFDakQsZ0JBQWdCLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDO0FBQzFGLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxRQUFRLENBQUMsV0FBVyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3JGLFlBQVksUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNyRixZQUFZLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDckYsWUFBWSxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzNGO0FBQ0EsWUFBWSxJQUFJLDJCQUEyQixJQUFJLENBQUMsRUFBRTtBQUNsRCxnQkFBZ0IsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssU0FBUyxFQUFFO0FBQ3RELG9CQUFvQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2hELHdCQUF3QixRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RHLG9CQUFvQixDQUFDO0FBQ3JCLG9CQUFvQixJQUFJLDJCQUEyQixJQUFJLENBQUMsRUFBRTtBQUMxRCx3QkFBd0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUNyRCw0QkFBNEIsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLCtCQUErQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUcsd0JBQXdCLENBQUM7QUFDekIsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2I7QUFDQSxZQUFZLFlBQVksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDakcsWUFBWSxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDckM7QUFDQSxZQUFZLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDeEQsWUFBWSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ3hELFlBQVksUUFBUSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUN4RCxZQUFZLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDeEQ7QUFDQSxZQUFZLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0MsWUFBWSxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdDLFlBQVksUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QztBQUNBLFlBQVksT0FBTyxRQUFRLENBQUM7QUFDNUIsUUFBUSxDQUFDLENBQUM7QUFDVjtBQUNBLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDUjtBQUNBLElBQUksT0FBTyxTQUFTLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRTtBQUNuRSxRQUFRLE9BQU8sY0FBYyxDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLG1CQUFtQixFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN6SCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksNkJBQTZCLENBQUMsU0FBUyxFQUFFLDJCQUEyQixHQUFHLENBQUMsRUFBRTtBQUM5RSxRQUFRLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM5RCxRQUFRLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7QUFDN0MsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNoRSxRQUFRLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSwyQkFBMkIsQ0FBQyxDQUFDO0FBQ25ILFFBQVEsT0FBTyxVQUFVLENBQUM7QUFDMUIsSUFBSSxDQUFDO0FBQ0w7O0FDOU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ08sTUFBTSxTQUFTLENBQUM7QUFDdkI7QUFDQSxJQUFJLE9BQU8sNkJBQTZCLENBQUMsU0FBUyxFQUFFLDJCQUEyQixHQUFHLENBQUMsRUFBRTtBQUNyRjtBQUNBLFFBQVEsT0FBTyxJQUFJLGdCQUFnQixFQUFFLENBQUMsNkJBQTZCLENBQUMsU0FBUyxFQUFFLDJCQUEyQixDQUFDLENBQUM7QUFDNUcsSUFBSSxDQUFDO0FBQ0w7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBLE1BQU1kLFFBQU0sR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQzdDLElBQUksSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0FBQ3BCLElBQUksS0FBSyxJQUFJLEtBQUssSUFBSSxNQUFNLEVBQUU7QUFDOUIsUUFBUSxPQUFPLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQztBQUNuQyxJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxVQUFVLEdBQUcsT0FBTyxFQUFFO0FBQ2hELFFBQVEsTUFBTSxHQUFHLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFDLElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQSxJQUFJLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztBQUNuQixJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksTUFBTSxFQUFFO0FBQzlCLFFBQVEsSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN4RSxRQUFRLE1BQU0sSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDO0FBQ2xDLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLE1BQU0sQ0FBQztBQUNsQixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFO0FBQzFJLElBQUksSUFBSTtBQUNSLFFBQVEsSUFBSSxpQkFBaUIsRUFBRTtBQUMvQixZQUFZLE1BQU0sb0JBQW9CLEdBQUcsb0JBQW9CLENBQUMsb0JBQW9CO0FBQ2xGLGdCQUFnQixZQUFZO0FBQzVCLGdCQUFnQixnQkFBZ0I7QUFDaEMsZ0JBQWdCLFdBQVc7QUFDM0IsZ0JBQWdCLFdBQVc7QUFDM0IsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFVBQVU7QUFDMUIsYUFBYSxDQUFDO0FBQ2QsWUFBWSxPQUFPLG9CQUFvQixDQUFDLGtDQUFrQyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3RGLFFBQVEsQ0FBQyxNQUFNO0FBQ2YsWUFBWSxPQUFPLFdBQVcsQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLFlBQVksRUFBRSxDQUFDLEVBQUUsSUFBSVksYUFBTyxFQUFFLENBQUMsQ0FBQztBQUNoSCxRQUFRLENBQUM7QUFDVCxJQUFJLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUNwQixRQUFRLE1BQU0sSUFBSWtDLFlBQVU7QUFDNUIsWUFBWSxDQUFDLCtCQUErQixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM3RCxZQUFZLFdBQVc7QUFDdkIsWUFBWSxLQUFLO0FBQ2pCLFNBQVMsQ0FBQztBQUNWLElBQUksQ0FBQztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLE1BQU0sU0FBUyxDQUFDO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksT0FBTyxXQUFXLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSx3QkFBd0IsRUFBRSxnQ0FBZ0M7QUFDdkcsdUJBQXVCLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsR0FBRyxJQUFJLEVBQUUsMkJBQTJCLEdBQUcsQ0FBQztBQUNoSCx1QkFBdUIsT0FBTyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRTtBQUNqRjtBQUNBO0FBQ0EsUUFBUSxJQUFJO0FBQ1osWUFBWSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDbEMsUUFBUSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDeEIsWUFBWTlDLFFBQU0sQ0FBQyxLQUFLLENBQUMscUNBQXFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUNyRixZQUFZLE1BQU0sS0FBSyxDQUFDO0FBQ3hCLFFBQVEsQ0FBQztBQUNUO0FBQ0E7QUFDQSxRQUFRLElBQUksVUFBVSxFQUFFO0FBQ3hCLFlBQVksZ0JBQWdCLENBQUMsVUFBVSxFQUFFLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM5RCxRQUFRLENBQUM7QUFDVCxRQUFRLElBQUksZ0NBQWdDLEVBQUU7QUFDOUMsWUFBWSxnQkFBZ0IsQ0FBQyxnQ0FBZ0MsRUFBRSxrQ0FBa0MsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMxRyxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVFBLFFBQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsRUFBRSxRQUFRLEVBQUUsaUJBQWlCLEVBQUUsMkJBQTJCLEVBQUUsQ0FBQyxDQUFDO0FBQzFHO0FBQ0EsUUFBUSxJQUFJLGdCQUFnQixHQUFHLHdCQUF3QixHQUFHLGdCQUFnQixDQUFDLG1CQUFtQixHQUFHLGdCQUFnQixDQUFDLGtCQUFrQixDQUFDO0FBQ3JJLFFBQVEsSUFBSSxpQkFBaUIsRUFBRSxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQztBQUN0RjtBQUNBLFFBQVEsTUFBTSwwQkFBMEIsR0FBR1osV0FBUyxDQUFDLDBCQUEwQixDQUFDO0FBQ2hGLFFBQVEsTUFBTSxvQkFBb0IsR0FBRyxXQUFXLENBQUMsZUFBZSxHQUFHLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQztBQUN0RyxRQUFRLE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQztBQUMvQjtBQUNBLFFBQVEsSUFBSSxrQkFBa0IsQ0FBQztBQUMvQixRQUFRLElBQUksbUJBQW1CLENBQUM7QUFDaEMsUUFBUSxJQUFJLHFCQUFxQixDQUFDO0FBQ2xDLFFBQVEsSUFBSSxhQUFhLEdBQUcsQ0FBQyxDQUFDO0FBQzlCLFFBQVEsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBQzNCO0FBQ0EsUUFBUSxJQUFJLFlBQVksR0FBRyxLQUFLLENBQUM7QUFDakMsUUFBUSxJQUFJLG9CQUFvQixHQUFHLEtBQUssQ0FBQztBQUN6QztBQUNBLFFBQVEsTUFBTSxXQUFXLEdBQUcsb0NBQW9DLEVBQUUsQ0FBQztBQUNuRTtBQUNBLFFBQVEsSUFBSSxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7QUFDakMsUUFBUSxJQUFJLGNBQWMsR0FBRyxDQUFDLENBQUM7QUFDL0IsUUFBUSxJQUFJLGtCQUFrQixHQUFHLENBQUMsQ0FBQztBQUNuQyxRQUFRLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUM1QixRQUFRLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQztBQUMxQixRQUFRLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUN4QjtBQUNBLFFBQVEsSUFBSSxrQ0FBa0MsQ0FBQztBQUMvQztBQUNBLFFBQVEsTUFBTSxXQUFXLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztBQUM5QyxRQUFRLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0FBQ3hEO0FBQ0EsUUFBUSxNQUFNLGVBQWUsR0FBRyxDQUFDLE9BQU8sRUFBRSxZQUFZLEVBQUUsU0FBUyxLQUFLO0FBQ3RFLFlBQVksTUFBTSxZQUFZLEdBQUcsT0FBTyxJQUFJLEdBQUcsQ0FBQztBQUNoRDtBQUNBLFlBQVksSUFBSSxTQUFTLEVBQUU7QUFDM0IsZ0JBQWdCLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDNUIsb0JBQW9CLE1BQU0sRUFBRSxTQUFTO0FBQ3JDLG9CQUFvQixXQUFXLEVBQUUsU0FBUyxDQUFDLFVBQVU7QUFDckQsb0JBQW9CLFlBQVksRUFBRSxrQkFBa0I7QUFDcEQsb0JBQW9CLFVBQVUsRUFBRSxrQkFBa0IsR0FBRyxTQUFTLENBQUMsVUFBVTtBQUN6RSxpQkFBaUIsQ0FBQyxDQUFDO0FBQ25CLGdCQUFnQixrQkFBa0IsSUFBSSxTQUFTLENBQUMsVUFBVSxDQUFDO0FBQzNELFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxJQUFJLGdCQUFnQixLQUFLLGdCQUFnQixDQUFDLHdCQUF3QixFQUFFO0FBQ2hGLGdCQUFnQixJQUFJLFlBQVksRUFBRTtBQUNsQyxvQkFBb0IsV0FBVyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNoRCxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUMsTUFBTTtBQUNuQixnQkFBZ0IsSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNuQyxvQkFBb0IsVUFBVSxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDaEUsb0JBQW9CLElBQUksY0FBYyxDQUFDLHFCQUFxQixDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQzFFO0FBQ0Esd0JBQXdCLElBQUk7QUFDNUIsNEJBQTRCLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNuRiw0QkFBNEIsYUFBYSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7QUFDOUQsNEJBQTRCLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN4RDtBQUNBLDRCQUE0QlksUUFBTSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRTtBQUMvRCxnQ0FBZ0MsVUFBVSxFQUFFLGFBQWE7QUFDekQsZ0NBQWdDLHdCQUF3QixFQUFFLE1BQU0sQ0FBQyx3QkFBd0I7QUFDekYsNkJBQTZCLENBQUMsQ0FBQztBQUMvQjtBQUNBLDRCQUE0QiwyQkFBMkIsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLDJCQUEyQixFQUFFLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ2pJLHdCQUF3QixDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDeEMsNEJBQTRCLE1BQU0sVUFBVSxHQUFHLElBQUk4QyxZQUFVO0FBQzdELGdDQUFnQyxDQUFDLDZCQUE2QixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMvRSxnQ0FBZ0MsWUFBWTtBQUM1QyxnQ0FBZ0MsS0FBSztBQUNyQyw2QkFBNkIsQ0FBQztBQUM5Qiw0QkFBNEI5QyxRQUFNLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzlFLDRCQUE0QixXQUFXLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzNELDRCQUE0QixPQUFPO0FBQ25DLHdCQUF3QixDQUFDO0FBQ3pCO0FBQ0Esd0JBQXdCLE1BQU0sWUFBWSxHQUFHLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQ3JJLHdCQUF3QixNQUFNLG9CQUFvQixHQUFHLG9CQUFvQixHQUFHLFlBQVksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO0FBQ3ZIO0FBQ0Esd0JBQXdCLElBQUksZ0JBQWdCLEtBQUssZ0JBQWdCLENBQUMsbUJBQW1CLEVBQUU7QUFDdkYsNEJBQTRCLG1CQUFtQixHQUFHLElBQUksV0FBVyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDeEYsNEJBQTRCLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQztBQUM1RCxnQ0FBZ0MsWUFBWSxFQUFFLFdBQVcsQ0FBQyxtQkFBbUI7QUFDN0UsZ0NBQWdDLFlBQVksRUFBRSxXQUFXLENBQUMsbUJBQW1CO0FBQzdFLGdDQUFnQyxlQUFlLEVBQUUsWUFBWTtBQUM3RCxnQ0FBZ0MsWUFBWSxFQUFFLFlBQVk7QUFDMUQsZ0NBQWdDLGFBQWEsRUFBRSxhQUFhO0FBQzVELGdDQUFnQyxVQUFVLEVBQUUsVUFBVTtBQUN0RCxnQ0FBZ0MsZ0JBQWdCLEVBQUUsQ0FBQztBQUNuRCxnQ0FBZ0MsV0FBVyxFQUFFLElBQUlZLGFBQU8sRUFBRTtBQUMxRCw2QkFBNkIsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3BELHdCQUF3QixDQUFDLE1BQU07QUFDL0IsNEJBQTRCLGtDQUFrQyxHQUFHLElBQUksc0JBQXNCLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN6SCx3QkFBd0IsQ0FBQztBQUN6QjtBQUNBLHdCQUF3QixnQkFBZ0IsR0FBRyxNQUFNLENBQUMsZUFBZSxDQUFDO0FBQ2xFLHdCQUF3QixjQUFjLEdBQUcsTUFBTSxDQUFDLGVBQWUsQ0FBQztBQUNoRSx3QkFBd0IsWUFBWSxHQUFHLElBQUksQ0FBQztBQUM1QyxvQkFBb0IsQ0FBQztBQUNyQixnQkFBZ0IsQ0FBQztBQUNqQjtBQUNBLGdCQUFnQixJQUFJLFlBQVksSUFBSSxvQkFBb0IsRUFBRTtBQUMxRDtBQUNBLG9CQUFvQixJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzNDO0FBQ0Esd0JBQXdCLGtCQUFrQixHQUFHLG1CQUFtQixDQUFDLE1BQU0sRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0FBQzdGO0FBQ0Esd0JBQXdCLE1BQU0sbUNBQW1DLEdBQUcsa0JBQWtCLEdBQUcsZ0JBQWdCLENBQUM7QUFDMUcsd0JBQXdCLElBQUksbUNBQW1DLEdBQUcsMEJBQTBCLElBQUksWUFBWSxFQUFFO0FBQzlHLDRCQUE0QixNQUFNLGlCQUFpQixHQUFHLGtCQUFrQixHQUFHLGNBQWMsQ0FBQztBQUMxRiw0QkFBNEIsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDekcsNEJBQTRCLE1BQU0sZUFBZSxHQUFHLGVBQWUsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQzNGLDRCQUE0QixNQUFNLGdCQUFnQixHQUFHLGlCQUFpQixHQUFHLGVBQWUsQ0FBQztBQUN6Riw0QkFBNEIsTUFBTSxhQUFhLEdBQUcsVUFBVSxHQUFHLGVBQWUsQ0FBQztBQUMvRSw0QkFBNEIsTUFBTSxvQkFBb0IsR0FBRyxjQUFjLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUMvRiw0QkFBNEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxRQUFRLENBQUMsa0JBQWtCLEVBQUUsb0JBQW9CLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDeEg7QUFDQSw0QkFBNEIsTUFBTSxZQUFZLEdBQUcsV0FBVyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLHlCQUF5QixDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFDekksNEJBQTRCLE1BQU0sU0FBUyxHQUFHLFVBQVUsR0FBRyxZQUFZLENBQUMsYUFBYSxHQUFHLG9CQUFvQixDQUFDO0FBQzdHO0FBQ0E7QUFDQSw0QkFBNEIsSUFBSTtBQUNoQyxnQ0FBZ0MsSUFBSSxnQkFBZ0IsS0FBSyxnQkFBZ0IsQ0FBQyxtQkFBbUIsRUFBRTtBQUMvRixvQ0FBb0MsZ0JBQWdCLENBQUMscUNBQXFDO0FBQzFGLHdDQUF3QyxNQUFNLEVBQUUsQ0FBQyxFQUFFLGVBQWUsR0FBRyxDQUFDLEVBQUUsV0FBVztBQUNuRix3Q0FBd0MsQ0FBQyxFQUFFLG1CQUFtQixFQUFFLFNBQVM7QUFDekUsd0NBQXdDLDJCQUEyQjtBQUNuRSxxQ0FBcUMsQ0FBQztBQUN0QyxnQ0FBZ0MsQ0FBQyxNQUFNO0FBQ3ZDLG9DQUFvQyxnQkFBZ0IsQ0FBQyxvQ0FBb0M7QUFDekYsd0NBQXdDLE1BQU0sRUFBRSxDQUFDLEVBQUUsZUFBZSxHQUFHLENBQUMsRUFBRSxXQUFXO0FBQ25GLHdDQUF3QyxDQUFDLEVBQUUsa0NBQWtDO0FBQzdFLHdDQUF3QywyQkFBMkI7QUFDbkUscUNBQXFDLENBQUM7QUFDdEMsZ0NBQWdDLENBQUM7QUFDakMsNEJBQTRCLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUM1QyxnQ0FBZ0MsTUFBTSxVQUFVLEdBQUcsSUFBSWtDLFlBQVU7QUFDakUsb0NBQW9DLENBQUMsb0NBQW9DLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzFGLG9DQUFvQyxXQUFXO0FBQy9DLG9DQUFvQyxLQUFLO0FBQ3pDLGlDQUFpQyxDQUFDO0FBQ2xDLGdDQUFnQzlDLFFBQU0sQ0FBQyxLQUFLLENBQUMsMkJBQTJCLEVBQUUsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7QUFDbEgsZ0NBQWdDLFdBQVcsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDL0QsZ0NBQWdDLE9BQU87QUFDdkMsNEJBQTRCLENBQUM7QUFDN0I7QUFDQSw0QkFBNEIsVUFBVSxHQUFHLGFBQWEsQ0FBQztBQUN2RDtBQUNBLDRCQUE0QixJQUFJLGdCQUFnQixLQUFLLGdCQUFnQixDQUFDLG1CQUFtQixFQUFFO0FBQzNGLGdDQUFnQyxJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDNUQsb0NBQW9DLFdBQVcsQ0FBQywwQkFBMEIsQ0FBQztBQUMzRSx3Q0FBd0MsYUFBYSxFQUFFLGFBQWE7QUFDcEUsd0NBQXdDLFVBQVUsRUFBRSxVQUFVO0FBQzlELHdDQUF3QyxVQUFVLEVBQUUsQ0FBQztBQUNyRCx3Q0FBd0MsV0FBVyxFQUFFLENBQUM7QUFDdEQsd0NBQXdDLGVBQWUsRUFBRSxDQUFDO0FBQzFELHdDQUF3QyxxQkFBcUIsRUFBRSxDQUFDO0FBQ2hFLHdDQUF3QyxnQkFBZ0IsRUFBRSxDQUFDO0FBQzNELHdDQUF3QyxlQUFlLEVBQUUsQ0FBQztBQUMxRCx3Q0FBd0MsMEJBQTBCLEVBQUUsQ0FBQztBQUNyRSx3Q0FBd0Msd0JBQXdCLEVBQUUsMkJBQTJCO0FBQzdGLHFDQUFxQyxFQUFFLENBQUMsRUFBRSxtQkFBbUIsRUFBRSxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDNUYsb0NBQW9DLHFCQUFxQixHQUFHLElBQUksV0FBVyxDQUFDLG1CQUFtQixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3hHLGdDQUFnQyxDQUFDO0FBQ2pDLGdDQUFnQyxxQkFBcUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDeEYsZ0NBQWdDLElBQUksZ0NBQWdDLEVBQUU7QUFDdEUsb0NBQW9DLGdDQUFnQyxDQUFDLHFCQUFxQixFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzFHLGdDQUFnQyxDQUFDO0FBQ2pDLDRCQUE0QixDQUFDO0FBQzdCO0FBQ0EsNEJBQTRCLGdCQUFnQixJQUFJLDBCQUEwQixDQUFDO0FBQzNFLDRCQUE0QixjQUFjLElBQUksZUFBZSxDQUFDO0FBQzlEO0FBQ0EsNEJBQTRCLElBQUksZ0JBQWdCLEtBQUssQ0FBQyxFQUFFO0FBQ3hELGdDQUFnQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQzVDLDRCQUE0QixDQUFDLE1BQU07QUFDbkMsZ0NBQWdDLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUNwRCxnQ0FBZ0MsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQ2pELGdDQUFnQyxLQUFLLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDN0Usb0NBQW9DLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RCxvQ0FBb0MsUUFBUSxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUM7QUFDaEUsb0NBQW9DLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUQsb0NBQW9DLElBQUksUUFBUSxJQUFJLGdCQUFnQixFQUFFLE1BQU07QUFDNUUsZ0NBQWdDLENBQUM7QUFDakMsZ0NBQWdDLE1BQU0sR0FBRyxVQUFVLENBQUM7QUFDcEQsNEJBQTRCLENBQUM7QUFDN0Isd0JBQXdCLENBQUM7QUFDekIsb0JBQW9CLENBQUM7QUFDckI7QUFDQSxvQkFBb0IsSUFBSSxZQUFZLEVBQUU7QUFDdEMsd0JBQXdCLElBQUksZ0JBQWdCLEtBQUssZ0JBQWdCLENBQUMsbUJBQW1CLEVBQUU7QUFDdkYsNEJBQTRCLFdBQVcsQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUN2RSx3QkFBd0IsQ0FBQyxNQUFNO0FBQy9CLDRCQUE0QixXQUFXLENBQUMsT0FBTyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7QUFDcEYsd0JBQXdCLENBQUM7QUFDekIsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVksSUFBSSxVQUFVLEVBQUU7QUFDNUIsZ0JBQWdCLElBQUk7QUFDcEIsb0JBQW9CLFVBQVUsQ0FBQyxPQUFPLEVBQUUsWUFBWSxFQUFFLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoRixnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ2hDLG9CQUFvQkEsUUFBTSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUN2RSxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUM7QUFDYixRQUFRLENBQUMsQ0FBQztBQUNWO0FBQ0E7QUFDQSxRQUFRLElBQUksVUFBVSxFQUFFO0FBQ3hCLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsVUFBVSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzlELFlBQVksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQzVCLGdCQUFnQkEsUUFBTSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNuRSxZQUFZLENBQUM7QUFDYixRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxPQUFPLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQztBQUMzRSxhQUFhLElBQUksQ0FBQyxNQUFNO0FBQ3hCLGdCQUFnQixJQUFJLFVBQVUsRUFBRTtBQUNoQyxvQkFBb0IsSUFBSTtBQUN4Qix3QkFBd0IsVUFBVSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3JFLG9CQUFvQixDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDcEMsd0JBQXdCQSxRQUFNLENBQUMsSUFBSSxDQUFDLDhCQUE4QixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzNFLG9CQUFvQixDQUFDO0FBQ3JCLGdCQUFnQixDQUFDO0FBQ2pCLGdCQUFnQixPQUFPLFdBQVcsQ0FBQyxPQUFPLENBQUM7QUFDM0MsWUFBWSxDQUFDLENBQUM7QUFDZCxhQUFhLElBQUksQ0FBQyxDQUFDLFNBQVMsS0FBSztBQUNqQyxnQkFBZ0IsSUFBSSxVQUFVLEVBQUU7QUFDaEMsb0JBQW9CLElBQUk7QUFDeEIsd0JBQXdCLFVBQVUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNuRSxvQkFBb0IsQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ3BDLHdCQUF3QkEsUUFBTSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMzRSxvQkFBb0IsQ0FBQztBQUNyQixnQkFBZ0IsQ0FBQztBQUNqQjtBQUNBLGdCQUFnQkEsUUFBTSxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsRUFBRTtBQUM3RCxvQkFBb0IsZ0JBQWdCO0FBQ3BDLG9CQUFvQixVQUFVLEVBQUUsU0FBUyxFQUFFLFVBQVUsSUFBSSxTQUFTO0FBQ2xFLGlCQUFpQixDQUFDLENBQUM7QUFDbkI7QUFDQTtBQUNBLGdCQUFnQixJQUFJLGdCQUFnQixLQUFLLGdCQUFnQixDQUFDLHdCQUF3QixFQUFFO0FBQ3BGLG9CQUFvQixNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6RSxvQkFBb0IsT0FBTyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLEVBQUU7QUFDN0QseUJBQXlCLElBQUksQ0FBQyxDQUFDLFdBQVcsS0FBSztBQUMvQyw0QkFBNEIsT0FBTyxTQUFTLENBQUMsZ0JBQWdCO0FBQzdELGdDQUFnQyxXQUFXLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLGlCQUFpQjtBQUM5RixnQ0FBZ0MsMkJBQTJCLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsVUFBVTtBQUM1Ryw2QkFBNkIsQ0FBQztBQUM5Qix3QkFBd0IsQ0FBQyxDQUFDO0FBQzFCLHlCQUF5QixLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUs7QUFDMUMsNEJBQTRCLE1BQU0sSUFBSSxjQUFjO0FBQ3BELGdDQUFnQyxDQUFDLHVDQUF1QyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6RixnQ0FBZ0MsUUFBUTtBQUN4QyxnQ0FBZ0MsS0FBSztBQUNyQyw2QkFBNkIsQ0FBQztBQUM5Qix3QkFBd0IsQ0FBQyxDQUFDLENBQUM7QUFDM0IsZ0JBQWdCLENBQUMsTUFBTSxJQUFJLGdCQUFnQixLQUFLLGdCQUFnQixDQUFDLG1CQUFtQixFQUFFO0FBQ3RGLG9CQUFvQixPQUFPLFNBQVMsQ0FBQztBQUNyQyxnQkFBZ0IsQ0FBQyxNQUFNO0FBQ3ZCLG9CQUFvQixPQUFPLGNBQWMsQ0FBQyxNQUFNO0FBQ2hELHdCQUF3QixPQUFPLGlCQUFpQjtBQUNoRCw0QkFBNEIsU0FBUyxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxnQkFBZ0I7QUFDeEYsNEJBQTRCLFdBQVcsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLFVBQVU7QUFDM0UseUJBQXlCLENBQUM7QUFDMUIsb0JBQW9CLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQyxDQUFDO0FBQ2QsYUFBYSxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUs7QUFDOUI7QUFDQSxnQkFBZ0IsSUFBSSxLQUFLLFlBQVksZUFBZTtBQUNwRCxvQkFBb0IsS0FBSyxZQUFZLFlBQVk7QUFDakQsb0JBQW9CLEtBQUssWUFBWThDLFlBQVU7QUFDL0Msb0JBQW9CLEtBQUssWUFBWSxjQUFjLEVBQUU7QUFDckQsb0JBQW9COUMsUUFBTSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFDNUYsb0JBQW9CLE1BQU0sS0FBSyxDQUFDO0FBQ2hDLGdCQUFnQixDQUFDO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0JBLFFBQU0sQ0FBQyxLQUFLLENBQUMsOEJBQThCLEVBQUUsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUNsRixnQkFBZ0IsTUFBTSxJQUFJLGNBQWM7QUFDeEMsb0JBQW9CLENBQUMsbUNBQW1DLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pFLG9CQUFvQixRQUFRO0FBQzVCLG9CQUFvQixLQUFLO0FBQ3pCLGlCQUFpQixDQUFDO0FBQ2xCLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDZixJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLE9BQU8sZ0JBQWdCLENBQUMsV0FBVyxFQUFFLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFBRSwyQkFBMkIsR0FBRyxDQUFDO0FBQzNILDRCQUE0QixXQUFXLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUU7QUFDN0U7QUFDQSxRQUFRLElBQUk7QUFDWixZQUFZLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUM1RCxRQUFRLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUN4QixZQUFZQSxRQUFNLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pELFlBQVksT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pDLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUUEsUUFBTSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsRUFBRTtBQUNsRCxZQUFZLFNBQVMsRUFBRSxXQUFXLENBQUMsVUFBVTtBQUM3QyxZQUFZLGlCQUFpQjtBQUM3QixZQUFZLDJCQUEyQjtBQUN2QyxTQUFTLENBQUMsQ0FBQztBQUNYO0FBQ0EsUUFBUSxPQUFPLGNBQWMsQ0FBQyxNQUFNO0FBQ3BDLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsT0FBTyxTQUFTLENBQUMsNkJBQTZCLENBQUMsV0FBVyxFQUFFLDJCQUEyQixDQUFDLENBQUM7QUFDekcsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCLE1BQU0sSUFBSThDLFlBQVU7QUFDcEMsb0JBQW9CLENBQUMsK0JBQStCLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JFLG9CQUFvQixhQUFhO0FBQ2pDLG9CQUFvQixLQUFLO0FBQ3pCLGlCQUFpQixDQUFDO0FBQ2xCLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQyxDQUFDO0FBQ1YsU0FBUyxJQUFJLENBQUMsQ0FBQyxVQUFVLEtBQUs7QUFDOUIsWUFBWTlDLFFBQU0sQ0FBQyxLQUFLLENBQUMseUJBQXlCLEVBQUU7QUFDcEQsZ0JBQWdCLFVBQVUsRUFBRSxVQUFVLEVBQUUsVUFBVSxJQUFJLFNBQVM7QUFDL0QsYUFBYSxDQUFDLENBQUM7QUFDZjtBQUNBLFlBQVksT0FBTyxpQkFBaUI7QUFDcEMsZ0JBQWdCLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsZ0JBQWdCO0FBQzdFLGdCQUFnQixXQUFXLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxVQUFVO0FBQy9ELGFBQWEsQ0FBQztBQUNkLFFBQVEsQ0FBQyxDQUFDO0FBQ1YsU0FBUyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUs7QUFDMUI7QUFDQSxZQUFZLElBQUksS0FBSyxZQUFZLGVBQWUsSUFBSSxLQUFLLFlBQVk4QyxZQUFVLEVBQUU7QUFDakYsZ0JBQWdCOUMsUUFBTSxDQUFDLEtBQUssQ0FBQyw4QkFBOEIsRUFBRSxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUN4RixnQkFBZ0IsTUFBTSxLQUFLLENBQUM7QUFDNUIsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVlBLFFBQU0sQ0FBQyxLQUFLLENBQUMsNkNBQTZDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDL0UsWUFBWSxNQUFNLElBQUk4QyxZQUFVO0FBQ2hDLGdCQUFnQixDQUFDLG1DQUFtQyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNyRSxnQkFBZ0IsYUFBYTtBQUM3QixnQkFBZ0IsS0FBSztBQUNyQixhQUFhLENBQUM7QUFDZCxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ1gsSUFBSSxDQUFDO0FBQ0w7O0FDdGdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBLE1BQU0sV0FBVyxHQUFHLElBQUlDLGdCQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDL0MsTUFBTSxRQUFRLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1QyxNQUFNLGNBQWMsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2xEO0FBQ08sTUFBTSxHQUFHLENBQUM7QUFDakI7QUFDQSxJQUFJLFdBQVcsQ0FBQyxNQUFNLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRSxTQUFTLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsRUFBRTtBQUMvRSxRQUFRLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMxQyxRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUM3QyxRQUFRLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQzlDLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxhQUFhLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRTtBQUNyQyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2pDLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDbkQsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFO0FBQzFDLFFBQVEsT0FBTyxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU8sSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU87QUFDN0UsZUFBZSxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU8sSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU87QUFDN0UsZUFBZSxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU8sSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU8sR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQzdGLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxZQUFZLEdBQUcsV0FBVztBQUM5QjtBQUNBLFFBQVEsTUFBTSxzQkFBc0IsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzNELFFBQVEsTUFBTSwyQkFBMkIsR0FBRyxFQUFFLENBQUM7QUFDL0MsUUFBUSxNQUFNLFdBQVcsR0FBRyxFQUFFLENBQUM7QUFDL0IsUUFBUSxNQUFNLGNBQWMsR0FBRyxFQUFFLENBQUM7QUFDbEM7QUFDQSxRQUFRLE9BQU8sU0FBUyxHQUFHLEVBQUUsTUFBTSxFQUFFO0FBQ3JDO0FBQ0EsWUFBWSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDM0MsWUFBWSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDM0MsWUFBWSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDM0MsWUFBWSxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDakQsWUFBWSxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDakQsWUFBWSxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDakQ7QUFDQSxZQUFZLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxFQUFFO0FBQ2pFLGdCQUFnQixJQUFJLE1BQU0sRUFBRTtBQUM1QixvQkFBb0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3BELG9CQUFvQixNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQy9DLG9CQUFvQixNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUN6QyxnQkFBZ0IsQ0FBQztBQUNqQixnQkFBZ0IsT0FBTyxJQUFJLENBQUM7QUFDNUIsWUFBWSxDQUFDO0FBQ2I7QUFDQSxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDeEMsZ0JBQWdCLElBQUksY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRSxTQUFTO0FBQ3ZEO0FBQ0EsZ0JBQWdCLE1BQU0sU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsV0FBVyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxHQUFHLGNBQWMsQ0FBQztBQUM1RixnQkFBZ0IsTUFBTSxVQUFVLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUM7QUFDN0UsZ0JBQWdCLElBQUksVUFBVSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRCxnQkFBZ0IsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBQzlHLGdCQUFnQixJQUFJLE1BQU0sR0FBRywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0U7QUFDQSxnQkFBZ0IsSUFBSSxNQUFNLEdBQUcsVUFBVSxHQUFHLENBQUMsRUFBRTtBQUM3QyxvQkFBb0IsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM3QyxvQkFBb0IsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM3QyxvQkFBb0IsMkJBQTJCLENBQUMsQ0FBQyxDQUFDLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNILG9CQUFvQiwyQkFBMkIsQ0FBQyxDQUFDLENBQUMsR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0gsb0JBQW9CLHNCQUFzQixDQUFDLEdBQUcsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUM7QUFDN0UsK0NBQStDLDJCQUEyQixDQUFDLElBQUksQ0FBQztBQUNoRiwrQ0FBK0MsMkJBQTJCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNsRixvQkFBb0IsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sQ0FBQyxFQUFFO0FBQ3BGLHdCQUF3QixJQUFJLE1BQU0sRUFBRTtBQUNwQyw0QkFBNEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUN2RSw0QkFBNEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3JGLDRCQUE0QixNQUFNLENBQUMsUUFBUSxHQUFHLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDL0Ysd0JBQXdCLENBQUM7QUFDekIsd0JBQXdCLE9BQU8sSUFBSSxDQUFDO0FBQ3BDLG9CQUFvQixDQUFDO0FBQ3JCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxPQUFPLEtBQUssQ0FBQztBQUN6QixRQUFRLENBQUMsQ0FBQztBQUNWO0FBQ0EsSUFBSSxDQUFDLEVBQUUsQ0FBQztBQUNSO0FBQ0EsSUFBSSxlQUFlLEdBQUcsV0FBVztBQUNqQztBQUNBLFFBQVEsTUFBTSxpQkFBaUIsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3REO0FBQ0EsUUFBUSxPQUFPLFNBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7QUFDaEQsWUFBWSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM1RCxZQUFZLE1BQU0saUJBQWlCLEdBQUcsaUJBQWlCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM1RSxZQUFZLE1BQU0sbUJBQW1CLEdBQUcsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUM7QUFDOUUsWUFBWSxNQUFNLGdCQUFnQixHQUFHLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQzlFLFlBQVksTUFBTSxNQUFNLEdBQUcsZ0JBQWdCLEdBQUcsbUJBQW1CLENBQUM7QUFDbEUsWUFBWSxNQUFNLFFBQVEsR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQzdDO0FBQ0EsWUFBWSxJQUFJLE1BQU0sR0FBRyxRQUFRLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFDaEQ7QUFDQSxZQUFZLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxDQUFDO0FBQ3JELFlBQVksTUFBTSxFQUFFLEdBQUcsaUJBQWlCLEdBQUcsR0FBRyxDQUFDO0FBQy9DLFlBQVksTUFBTSxFQUFFLEdBQUcsaUJBQWlCLEdBQUcsR0FBRyxDQUFDO0FBQy9DO0FBQ0EsWUFBWSxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFDckMsWUFBWSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDckM7QUFDQSxZQUFZLElBQUksTUFBTSxFQUFFO0FBQ3hCLGdCQUFnQixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbkYsZ0JBQWdCLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDMUUsZ0JBQWdCLE1BQU0sQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBQ3BDLFlBQVksQ0FBQztBQUNiLFlBQVksT0FBTyxJQUFJLENBQUM7QUFDeEIsUUFBUSxDQUFDLENBQUM7QUFDVjtBQUNBLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDUjs7QUMxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDTyxNQUFNLEdBQUcsQ0FBQztBQUNqQjtBQUNBLElBQUksV0FBVyxHQUFHO0FBQ2xCLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzFDLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzFDLFFBQVEsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDMUIsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUM1QixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRTtBQUM5QyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2pDLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDakMsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUNqQyxRQUFRLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0FBQ3JDLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxLQUFLLEdBQUc7QUFDWixRQUFRLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDbkMsUUFBUSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUMsUUFBUSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDMUMsUUFBUSxRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDMUMsUUFBUSxRQUFRLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7QUFDOUMsUUFBUSxPQUFPLFFBQVEsQ0FBQztBQUN4QixJQUFJLENBQUM7QUFDTDtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNPLE1BQU0sU0FBUyxDQUFDO0FBQ3ZCO0FBQ0EsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLFNBQVMsRUFBRSxnQ0FBZ0MsR0FBRyxLQUFLLEVBQUU7QUFDN0UsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztBQUM5QyxRQUFRLElBQUksQ0FBQyxnQ0FBZ0MsR0FBRyxnQ0FBZ0MsQ0FBQztBQUNqRixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksOEJBQThCLEdBQUcsV0FBVztBQUNoRDtBQUNBLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUM5QztBQUNBLFFBQVEsT0FBTyxTQUFTLE1BQU0sRUFBRSxjQUFjLEVBQUUsZ0JBQWdCLEVBQUU7QUFDbEUsWUFBWSxTQUFTLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDNUUsWUFBWSxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDLElBQUksZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDbkcsWUFBWSxJQUFJLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRTtBQUM1QyxnQkFBZ0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzFFLGdCQUFnQixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUMxSCxnQkFBZ0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDckMsWUFBWSxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsb0JBQW9CLEVBQUU7QUFDcEQsZ0JBQWdCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQzVELG1DQUFtQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsS0FBSyxNQUFNLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM5RyxnQkFBZ0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3hGLGdCQUFnQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUNyQyxZQUFZLENBQUMsTUFBTTtBQUNuQixnQkFBZ0IsTUFBTSxJQUFJLEtBQUssQ0FBQyx3RUFBd0UsQ0FBQyxDQUFDO0FBQzFHLFlBQVksQ0FBQztBQUNiLFFBQVEsQ0FBQyxDQUFDO0FBQ1Y7QUFDQSxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ1I7QUFDQSxJQUFJLGtCQUFrQixHQUFHLFdBQVc7QUFDcEM7QUFDQSxRQUFRLE1BQU0sT0FBTyxHQUFHLElBQUlBLGdCQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDNUMsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzlDLFFBQVEsTUFBTSxjQUFjLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNuRCxRQUFRLE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDbkMsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQzlDO0FBQ0EsUUFBUSxPQUFPLFNBQVMsU0FBUyxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUU7QUFDakQsWUFBWSxNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdkQ7QUFDQSxZQUFZLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTztBQUNuQztBQUNBLFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2hFLGdCQUFnQixNQUFNLE9BQU8sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3REO0FBQ0EsZ0JBQWdCLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RELGdCQUFnQixJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUU7QUFDM0Msb0JBQW9CLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDbkUsb0JBQW9CLFNBQVMsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDdkQsZ0JBQWdCLENBQUM7QUFDakIsZ0JBQWdCLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDakQ7QUFDQSxnQkFBZ0IsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDNUUsZ0JBQWdCLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDakYsZ0JBQWdCLFFBQVEsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDMUY7QUFDQSxnQkFBZ0IsTUFBTSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7QUFDN0MsZ0JBQWdCLElBQUksT0FBTyxDQUFDLFFBQVEsRUFBRTtBQUN0QyxvQkFBb0IsSUFBSSxDQUFDLHNCQUFzQixDQUFDLFFBQVEsRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQzFHLGdCQUFnQixDQUFDO0FBQ2pCO0FBQ0EsZ0JBQWdCLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsS0FBSztBQUNuRCxvQkFBb0IsR0FBRyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDdkQsb0JBQW9CLEdBQUcsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQ25FLG9CQUFvQixHQUFHLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzVGLGdCQUFnQixDQUFDLENBQUMsQ0FBQztBQUNuQjtBQUNBLGdCQUFnQixPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsaUJBQWlCLENBQUMsQ0FBQztBQUNuRCxZQUFZLENBQUM7QUFDYjtBQUNBLFlBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUs7QUFDbkMsZ0JBQWdCLElBQUksQ0FBQyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3RELHFCQUFxQixPQUFPLEVBQUUsQ0FBQztBQUMvQixZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ2Y7QUFDQSxZQUFZLE9BQU8sT0FBTyxDQUFDO0FBQzNCLFFBQVEsQ0FBQyxDQUFDO0FBQ1Y7QUFDQSxJQUFJLENBQUMsRUFBRSxDQUFDO0FBQ1I7QUFDQSxJQUFJLHNCQUFzQixHQUFHLFdBQVc7QUFDeEM7QUFDQSxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUlBLGdCQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDOUMsUUFBUSxNQUFNLFVBQVUsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQy9DLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUM5QyxRQUFRLE1BQU0sWUFBWSxHQUFHLElBQUlBLGdCQUFLLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDcEQsUUFBUSxNQUFNLE9BQU8sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ2xDLFFBQVEsTUFBTSxZQUFZLEdBQUcsU0FBUyxDQUFDO0FBQ3ZDO0FBQ0EsUUFBUSxNQUFNLE1BQU0sR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2xELFFBQVEsTUFBTSxrQkFBa0IsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3ZELFFBQVEsTUFBTSxXQUFXLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNoRCxRQUFRLE1BQU0sY0FBYyxHQUFHLElBQUlBLGdCQUFLLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDbkQsUUFBUSxNQUFNLGFBQWEsR0FBRyxJQUFJQSxnQkFBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2xELFFBQVEsTUFBTSxlQUFlLEdBQUcsSUFBSUEsZ0JBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNwRCxRQUFRLE1BQU0sT0FBTyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDbEM7QUFDQSxRQUFRLE9BQU8sU0FBUyxHQUFHLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxPQUFPLEdBQUcsRUFBRSxFQUFFO0FBQzVELFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO0FBQ3JELGdCQUFnQixPQUFPO0FBQ3ZCLFlBQVksQ0FBQztBQUNiLFlBQVksSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDaEYsZ0JBQWdCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbkU7QUFDQSxvQkFBb0IsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRSxvQkFBb0IsTUFBTSxlQUFlLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxxQkFBcUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3hHLG9CQUFvQixNQUFNLFVBQVUsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNyRixvQkFBb0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsU0FBUztBQUN0RDtBQUNBLG9CQUFvQixTQUFTLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNuRixvQkFBb0IsU0FBUyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDckYsb0JBQW9CLFNBQVMsQ0FBQyxTQUFTLENBQUMsd0JBQXdCLENBQUMsZ0JBQWdCLEVBQUUsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzVHO0FBQ0Esb0JBQW9CLElBQUksU0FBUyxDQUFDLENBQUMsSUFBSSxZQUFZLElBQUksU0FBUyxDQUFDLENBQUMsSUFBSSxZQUFZO0FBQ2xGLHdCQUF3QixTQUFTLENBQUMsU0FBUyxDQUFDLGVBQWUsS0FBSyxlQUFlLENBQUMsTUFBTSxJQUFJLFNBQVMsQ0FBQyxDQUFDLElBQUksWUFBWSxFQUFFO0FBQ3ZILHdCQUF3QixTQUFTO0FBQ2pDLG9CQUFvQixDQUFDO0FBQ3JCO0FBQ0Esb0JBQW9CLElBQUksQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUU7QUFDaEUsd0JBQXdCLElBQUksTUFBTSxJQUFJLFNBQVMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pFLHdCQUF3QixJQUFJLGNBQWMsR0FBRyxDQUFDLENBQUM7QUFDL0Msd0JBQXdCLElBQUksU0FBUyxDQUFDLFNBQVMsQ0FBQyxlQUFlLEtBQUssZUFBZSxDQUFDLE1BQU0sRUFBRTtBQUM1Riw0QkFBNEIsTUFBTSxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDbEQsNEJBQTRCLGNBQWMsR0FBRyxDQUFDLENBQUM7QUFDL0Msd0JBQXdCLENBQUM7QUFDekIsd0JBQXdCLE1BQU0sR0FBRyxNQUFNLEdBQUcsY0FBYyxDQUFDO0FBQ3pELHdCQUF3QixJQUFJLEdBQUcsQ0FBQyxlQUFlLENBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRTtBQUM5RSw0QkFBNEIsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQzdELDRCQUE0QixRQUFRLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDO0FBQ25FLDRCQUE0QixPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ25ELHdCQUF3QixDQUFDO0FBQ3pCLG9CQUFvQixDQUFDLE1BQU07QUFDM0Isd0JBQXdCLFdBQVcsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRix3QkFBd0IsY0FBYyxDQUFDLDBCQUEwQixDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQ2hGLHdCQUF3QixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDM0Usd0JBQXdCLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsWUFBWSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQy9GLHdCQUF3QixlQUFlLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoSCx3QkFBd0IsYUFBYSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUNyRSx3QkFBd0IsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDcEcsd0JBQXdCLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM5Rix3QkFBd0IsT0FBTyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUN0Ryx3QkFBd0IsSUFBSSxPQUFPLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQUU7QUFDM0UsNEJBQTRCLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUM3RCw0QkFBNEIsUUFBUSxDQUFDLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQztBQUNuRSw0QkFBNEIsUUFBUSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzFGLDRCQUE0QixPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ25ELHdCQUF3QixDQUFDO0FBQ3pCLG9CQUFvQixDQUFDO0FBQ3JCLGdCQUFnQixDQUFDO0FBQ2pCLGFBQWEsQ0FBQztBQUNkLFlBQVksSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUMzRCxnQkFBZ0IsS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ2pELG9CQUFvQixJQUFJLENBQUMsc0JBQXNCLENBQUMsR0FBRyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDaEYsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2IsWUFBWSxPQUFPLE9BQU8sQ0FBQztBQUMzQixRQUFRLENBQUMsQ0FBQztBQUNWO0FBQ0EsSUFBSSxDQUFDLEVBQUUsQ0FBQztBQUNSOztBQzlLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0EsTUFBTSxVQUFVLEdBQUcsODZGQUE4NkYsQ0FBQztBQUNsOEY7QUFDQSxNQUFNLGdCQUFnQixHQUFHLDh1RkFBOHVGLENBQUM7QUFDeHdGO0FBQ0EsTUFBTSxtQkFBbUIsR0FBRywwMEZBQTAwRixDQUFDO0FBQ3YyRjtBQUNBLE1BQU0seUJBQXlCLEdBQUcsMHVGQUEwdUYsQ0FBQztBQUM3d0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsVUFBVSxDQUFDLElBQUksRUFBRTtBQUMxQjtBQUNBLElBQUksSUFBSSxZQUFZLENBQUM7QUFDckIsSUFBSSxJQUFJLFVBQVUsQ0FBQztBQUNuQixJQUFJLElBQUksZUFBZSxDQUFDO0FBQ3hCLElBQUksSUFBSSxnQkFBZ0IsQ0FBQztBQUN6QixJQUFJLElBQUksV0FBVyxDQUFDO0FBQ3BCLElBQUksSUFBSSxVQUFVLENBQUM7QUFDbkIsSUFBSSxJQUFJLG1CQUFtQixDQUFDO0FBQzVCLElBQUksSUFBSSxtQkFBbUIsQ0FBQztBQUM1QixJQUFJLElBQUksa0JBQWtCLENBQUM7QUFDM0IsSUFBSSxJQUFJLGdCQUFnQixDQUFDO0FBQ3pCLElBQUksSUFBSSwwQkFBMEIsQ0FBQztBQUNuQyxJQUFJLElBQUkscUJBQXFCLENBQUM7QUFDOUIsSUFBSSxJQUFJLGlCQUFpQixDQUFDO0FBQzFCLElBQUksSUFBSSxhQUFhLENBQUM7QUFDdEIsSUFBSSxJQUFJLG1CQUFtQixDQUFDO0FBQzVCLElBQUksSUFBSSxVQUFVLENBQUM7QUFDbkIsSUFBSSxJQUFJLGdCQUFnQixDQUFDO0FBQ3pCLElBQUksSUFBSSxnQkFBZ0IsQ0FBQztBQUN6QixJQUFJLElBQUksa0JBQWtCLENBQUM7QUFDM0IsSUFBSSxJQUFJLFNBQVMsQ0FBQztBQUNsQjtBQUNBLElBQUksU0FBUyxJQUFJLENBQUMsY0FBYyxFQUFFLGdCQUFnQixFQUFFLGFBQWE7QUFDakUsa0JBQWtCLHVCQUF1QixFQUFFLGlCQUFpQixFQUFFLHdCQUF3QixFQUFFLGNBQWMsRUFBRTtBQUN4RyxRQUFRLE1BQU0sYUFBYSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNoRDtBQUNBLFFBQVEsSUFBSSxDQUFDLGVBQWUsRUFBRTtBQUM5QixZQUFZLE1BQU0sYUFBYSxHQUFHLElBQUksV0FBVyxDQUFDLFVBQVUsRUFBRSxtQkFBbUIsRUFBRSxpQkFBaUIsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3pJLFlBQVksYUFBYSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ2pELFlBQVksTUFBTSxVQUFVLEdBQUcsSUFBSSxZQUFZLENBQUMsVUFBVSxFQUFFLGdCQUFnQixFQUFFLGNBQWMsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ25JLFlBQVksVUFBVSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUMzQyxZQUFZLElBQUksdUJBQXVCLEVBQUU7QUFDekMsZ0JBQWdCLElBQUksb0JBQW9CLENBQUM7QUFDekMsZ0JBQWdCLElBQUksZ0JBQWdCLEVBQUU7QUFDdEMsb0JBQW9CLG9CQUFvQixHQUFHLElBQUksVUFBVSxDQUFDLFVBQVUsRUFBRSwwQkFBMEI7QUFDaEcsMERBQTBELHdCQUF3QixDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdkgsZ0JBQWdCLENBQUMsTUFBTTtBQUN2QixvQkFBb0Isb0JBQW9CLEdBQUcsSUFBSSxZQUFZLENBQUMsVUFBVSxFQUFFLDBCQUEwQjtBQUNsRyw0REFBNEQsd0JBQXdCLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUMzSCxnQkFBZ0IsQ0FBQztBQUNqQixnQkFBZ0Isb0JBQW9CLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDbkUsWUFBWSxDQUFDO0FBQ2IsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLElBQUksQ0FBQyxVQUFVLEVBQUUsVUFBVSxHQUFHLElBQUksV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDeEUsUUFBUSxJQUFJLFlBQVksQ0FBQyxVQUFVLEVBQUUsbUJBQW1CLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ2pGLFFBQVEsSUFBSSxXQUFXLENBQUMsVUFBVSxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3pGLFFBQVEsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsbUJBQW1CLEVBQUUsYUFBYSxFQUFFLDBCQUEwQjtBQUN2Ryx5Q0FBeUMscUJBQXFCLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CO0FBQ3RHLHlDQUF5QyxtQkFBbUIsRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxnQkFBZ0I7QUFDcEgseUNBQXlDLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLEVBQUUsdUJBQXVCLEVBQUUsZ0JBQWdCO0FBQ2hJLHlDQUF5QyxXQUFXLENBQUMsQ0FBQztBQUN0RDtBQUNBLFFBQVEsTUFBTSxXQUFXLEdBQUc7QUFDNUIsWUFBWSxVQUFVLEVBQUUsSUFBSTtBQUM1QixZQUFZLGdCQUFnQixFQUFFLGNBQWM7QUFDNUMsWUFBWSxrQkFBa0IsRUFBRSxnQkFBZ0I7QUFDaEQsWUFBWSxVQUFVLEVBQUUsQ0FBQztBQUN6QixTQUFTLENBQUM7QUFDVixRQUFRLElBQUksQ0FBQyxlQUFlLEVBQUU7QUFDOUIsWUFBWSxNQUFNLGFBQWEsR0FBRyxJQUFJLFdBQVcsQ0FBQyxVQUFVLEVBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztBQUNyRyxZQUFZLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCLEVBQUU7QUFDakYsZ0JBQWdCLGdCQUFnQixHQUFHLElBQUksV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDckUsWUFBWSxDQUFDO0FBQ2IsWUFBWSxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDaEQsWUFBWSxXQUFXLENBQUMsYUFBYSxHQUFHLGdCQUFnQixDQUFDO0FBQ3pELFFBQVEsQ0FBQztBQUNULFFBQVEsTUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzlDO0FBQ0EsUUFBUSxXQUFXLENBQUMsUUFBUSxHQUFHLFdBQVcsR0FBRyxhQUFhLENBQUM7QUFDM0Q7QUFDQSxRQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdEMsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEtBQUs7QUFDNUIsUUFBUSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO0FBQzVCLFlBQVksSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDekMsWUFBWSxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztBQUNuRCxZQUFZLElBQUksZ0JBQWdCLEVBQUU7QUFDbEMsZ0JBQWdCLElBQUksVUFBVSxDQUFDLFVBQVUsRUFBRSxhQUFhLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxXQUFXLEdBQUcsQ0FBQztBQUN4RywrQkFBK0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3BGLFlBQVksQ0FBQyxNQUFNO0FBQ25CLGdCQUFnQixJQUFJLFlBQVksQ0FBQyxVQUFVLEVBQUUsYUFBYSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsYUFBYSxHQUFHLENBQUM7QUFDNUcsaUNBQWlDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUN4RixZQUFZLENBQUM7QUFDYixZQUFZLElBQUksV0FBVyxFQUFFO0FBQzdCLGdCQUFnQixJQUFJLFdBQVcsQ0FBQyxVQUFVLEVBQUUsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUM7QUFDdEYsZ0NBQWdDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ3ZGLFlBQVksQ0FBQztBQUNiLFlBQVksa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQztBQUN4RSxRQUFRLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ2hDLFlBQVksTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztBQUNoRyxZQUFZLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxJQUFJLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0FBQzVGLFlBQVksTUFBTSx1QkFBdUIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztBQUNoRjtBQUNBLFlBQVksSUFBSSxpQkFBaUIsQ0FBQztBQUNsQyxZQUFZLElBQUksd0JBQXdCLENBQUM7QUFDekMsWUFBWSxJQUFJLGNBQWMsQ0FBQztBQUMvQixZQUFZLElBQUksQ0FBQyxlQUFlLEVBQUU7QUFDbEMsZ0JBQWdCLGlCQUFpQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztBQUM5RCxnQkFBZ0IsY0FBYyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztBQUN4RCxnQkFBZ0IsSUFBSSx1QkFBdUIsRUFBRSx3QkFBd0IsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztBQUN6RyxZQUFZLENBQUM7QUFDYixZQUFZLElBQUksQ0FBQyxTQUFTLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSx1QkFBdUI7QUFDM0YsaUJBQWlCLGlCQUFpQixFQUFFLHdCQUF3QixFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQzlFLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDaEM7QUFDQSxZQUFZLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7QUFDOUM7QUFDQSxZQUFZLFVBQVUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7QUFDaEQsWUFBWSxlQUFlLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDO0FBQzFELFlBQVksZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7QUFDNUQsWUFBWSxXQUFXLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0FBQ2xELFlBQVksZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7QUFDNUQsWUFBWSxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFDbkM7QUFDQSxZQUFZLE1BQU0sdUJBQXVCLEdBQUcsZ0JBQWdCLElBQUksU0FBUyxDQUFDLFdBQVcsR0FBRyxDQUFDLEtBQUssU0FBUyxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMzSDtBQUNBLFlBQVksTUFBTSxlQUFlLEdBQUcsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDaEY7QUFDQSxZQUFZLE1BQU0sVUFBVSxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUMsYUFBYSxDQUFDO0FBQzVELFlBQVksTUFBTSw4QkFBOEIsR0FBRyxVQUFVLEdBQUcsU0FBUyxDQUFDLFdBQVcsQ0FBQztBQUN0RixZQUFZLE1BQU0sd0JBQXdCLEdBQUcsVUFBVSxHQUFHLHVCQUF1QixDQUFDO0FBQ2xGLFlBQVksTUFBTSwwQ0FBMEMsR0FBRyxVQUFVLENBQUM7QUFDMUUsWUFBWSxNQUFNLHFDQUFxQyxHQUFHLGdCQUFnQjtBQUMxRSwyREFBMkQsVUFBVSxHQUFHLFNBQVMsQ0FBQyxXQUFXLEtBQUssVUFBVSxHQUFHLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN4SSxZQUFZLE1BQU0sZ0NBQWdDLEdBQUcsVUFBVSxHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7QUFDeEYsWUFBWSxNQUFNLDhCQUE4QixHQUFHLFVBQVUsR0FBRyxTQUFTLENBQUMsV0FBVyxDQUFDO0FBQ3RGLFlBQVksTUFBTSx3Q0FBd0MsR0FBRyxnQkFBZ0IsSUFBSSxnQkFBZ0IsR0FBRyxTQUFTLENBQUMsV0FBVyxHQUFHLENBQUM7QUFDN0gsaUZBQWlGLGdCQUFnQixHQUFHLFNBQVMsQ0FBQyxhQUFhLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDakksWUFBWSxNQUFNLGlDQUFpQyxHQUFHLFdBQVcsSUFBSSxVQUFVLEdBQUcsU0FBUyxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUM7QUFDN0csWUFBWSxNQUFNLDJCQUEyQixHQUFHLFdBQVcsSUFBSSxTQUFTLENBQUMsU0FBUyxHQUFHLFVBQVUsSUFBSSxDQUFDLENBQUM7QUFDckcsWUFBWSxNQUFNLFdBQVcsR0FBRyxTQUFTLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUM5RDtBQUNBLFlBQVksTUFBTSxtQkFBbUIsR0FBRyw4QkFBOEI7QUFDdEUsd0NBQXdDLHdCQUF3QjtBQUNoRSx3Q0FBd0MsMENBQTBDO0FBQ2xGLHdDQUF3QyxxQ0FBcUM7QUFDN0Usd0NBQXdDLGdDQUFnQztBQUN4RSx3Q0FBd0Msd0NBQXdDO0FBQ2hGLHdDQUF3Qyw4QkFBOEI7QUFDdEUsd0NBQXdDLGlDQUFpQztBQUN6RSx3Q0FBd0MsMkJBQTJCO0FBQ25FLHdDQUF3QyxXQUFXLENBQUM7QUFDcEQsWUFBWSxNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEdBQUcsU0FBUyxDQUFDLGNBQWMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN2RyxZQUFZLE1BQU0sZ0JBQWdCLEdBQUc7QUFDckMsZ0JBQWdCLE1BQU0sRUFBRSxFQUFFO0FBQzFCLGdCQUFnQixHQUFHLEVBQUU7QUFDckIsb0JBQW9CLE1BQU0sRUFBRSxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUM7QUFDbkQsd0JBQXdCLE9BQU8sRUFBRSxrQkFBa0I7QUFDbkQsd0JBQXdCLE9BQU8sRUFBRSxrQkFBa0I7QUFDbkQsd0JBQXdCLE1BQU0sRUFBRSxJQUFJO0FBQ3BDLHFCQUFxQixDQUFDO0FBQ3RCLGlCQUFpQjtBQUNqQixhQUFhLENBQUM7QUFDZCxZQUFZLFdBQVcsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ2hELGFBQWEsSUFBSSxDQUFDLENBQUMsVUFBVSxLQUFLO0FBQ2xDLGdCQUFnQixPQUFPLFdBQVcsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLGdCQUFnQixDQUFDLENBQUM7QUFDN0UsWUFBWSxDQUFDLENBQUM7QUFDZCxhQUFhLElBQUksQ0FBQyxDQUFDLFFBQVEsS0FBSztBQUNoQyxnQkFBZ0IsWUFBWSxHQUFHLFFBQVEsQ0FBQztBQUN4QyxnQkFBZ0IsbUJBQW1CLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLGdCQUFnQixhQUFhLEdBQUcsbUJBQW1CLEdBQUcsOEJBQThCLENBQUM7QUFDckYsZ0JBQWdCLG1CQUFtQixHQUFHLGFBQWEsR0FBRyx3QkFBd0IsQ0FBQztBQUMvRSxnQkFBZ0IsMEJBQTBCLEdBQUcsbUJBQW1CLEdBQUcsMENBQTBDLENBQUM7QUFDOUcsZ0JBQWdCLHFCQUFxQixHQUFHLDBCQUEwQixHQUFHLHFDQUFxQyxDQUFDO0FBQzNHLGdCQUFnQixpQkFBaUIsR0FBRyxxQkFBcUIsR0FBRyxnQ0FBZ0MsQ0FBQztBQUM3RixnQkFBZ0IsbUJBQW1CLEdBQUcsaUJBQWlCLEdBQUcsd0NBQXdDLENBQUM7QUFDbkcsZ0JBQWdCLGtCQUFrQixHQUFHLG1CQUFtQixHQUFHLDhCQUE4QixDQUFDO0FBQzFGLGdCQUFnQixnQkFBZ0IsR0FBRyxrQkFBa0IsR0FBRyxpQ0FBaUMsQ0FBQztBQUMxRixnQkFBZ0IsVUFBVSxHQUFHLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ2hFLGdCQUFnQixJQUFJLGVBQWUsRUFBRTtBQUNyQyxvQkFBb0IsSUFBSSxDQUFDLFdBQVcsQ0FBQztBQUNyQyx3QkFBd0IseUJBQXlCLEVBQUUsSUFBSTtBQUN2RCx3QkFBd0IscUJBQXFCLEVBQUUsVUFBVTtBQUN6RCx3QkFBd0IscUJBQXFCLEVBQUUsbUJBQW1CO0FBQ2xFLHdCQUF3QixxQkFBcUIsRUFBRSxVQUFVO0FBQ3pELHdCQUF3QixxQkFBcUIsRUFBRSxtQkFBbUI7QUFDbEUsd0JBQXdCLDRCQUE0QixFQUFFLFVBQVU7QUFDaEUsd0JBQXdCLDRCQUE0QixFQUFFLDBCQUEwQjtBQUNoRix3QkFBd0Isa0JBQWtCLEVBQUUsVUFBVTtBQUN0RCx3QkFBd0Isa0JBQWtCLEVBQUUsZ0JBQWdCO0FBQzVELHFCQUFxQixDQUFDLENBQUM7QUFDdkIsZ0JBQWdCLENBQUMsTUFBTTtBQUN2QixvQkFBb0IsSUFBSSxDQUFDLFdBQVcsQ0FBQztBQUNyQyx3QkFBd0IseUJBQXlCLEVBQUUsSUFBSTtBQUN2RCxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3ZCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDZixRQUFRLENBQUM7QUFDVCxJQUFJLENBQUMsQ0FBQztBQUNOLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBUyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixFQUFFLFdBQVc7QUFDN0csaUNBQWlDLDZCQUE2QixHQUFHM0QsV0FBUyxDQUFDLG9DQUFvQyxFQUFFO0FBQ2pILElBQUksTUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNO0FBQzdCLFFBQVEsR0FBRyxDQUFDLGVBQWU7QUFDM0IsWUFBWSxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsUUFBUSxFQUFFLEVBQUUsU0FBUyxDQUFDLEVBQUU7QUFDOUQsZ0JBQWdCLElBQUksRUFBRSx3QkFBd0I7QUFDOUMsYUFBYSxDQUFDO0FBQ2QsU0FBUztBQUNULEtBQUssQ0FBQztBQUNOO0FBQ0EsSUFBSSxJQUFJLFVBQVUsR0FBRyxVQUFVLENBQUM7QUFDaEM7QUFDQTtBQUNBLElBQUksTUFBTSxTQUFTLEdBQUcsS0FBSyxFQUFFLEdBQUcsYUFBYSxFQUFFLEdBQUcsSUFBSSxDQUFDO0FBQ3ZELElBQUksSUFBSSxDQUFDLGdCQUFnQixJQUFJLENBQUMsZUFBZSxFQUFFO0FBQy9DLFFBQVEsVUFBVSxHQUFHLGdCQUFnQixDQUFDO0FBQ3RDO0FBQ0E7QUFDQSxRQUFRLElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxLQUFLLElBQUksRUFBRSxJQUFJLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFO0FBQ3ZFLFlBQVksVUFBVSxHQUFHLHlCQUF5QixDQUFDO0FBQ25ELFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtBQUNsQyxRQUFRLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQztBQUN0QyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsZUFBZSxFQUFFO0FBQ2pDO0FBQ0EsUUFBUSxJQUFJLFNBQVMsSUFBSSxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUUsSUFBSSxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRTtBQUN2RSxZQUFZLFVBQVUsR0FBRyxtQkFBbUIsQ0FBQztBQUM3QyxRQUFRLENBQUM7QUFDVCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksTUFBTSxzQkFBc0IsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEQsSUFBSSxNQUFNLGVBQWUsR0FBRyxJQUFJLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMxRSxJQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxzQkFBc0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUQsUUFBUSxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsc0JBQXNCLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xFLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDO0FBQ3ZCLFFBQVEsTUFBTSxFQUFFO0FBQ2hCLFlBQVksaUJBQWlCLEVBQUUsZUFBZSxDQUFDLE1BQU07QUFDckQsWUFBWSxZQUFZLEVBQUUsVUFBVTtBQUNwQyxZQUFZLGlCQUFpQixFQUFFLGVBQWU7QUFDOUMsWUFBWSxrQkFBa0IsRUFBRSxnQkFBZ0I7QUFDaEQsWUFBWSxhQUFhLEVBQUUsV0FBVztBQUN0QyxZQUFZLGtCQUFrQixFQUFFLENBQUMsSUFBSSw2QkFBNkI7QUFDbEU7QUFDQSxZQUFZLFdBQVcsRUFBRTtBQUN6QixnQkFBZ0IsZUFBZSxFQUFFQSxXQUFTLENBQUMsYUFBYTtBQUN4RCxnQkFBZ0IsYUFBYSxFQUFFQSxXQUFTLENBQUMsV0FBVztBQUNwRCxnQkFBZ0IsZ0JBQWdCLEVBQUVBLFdBQVMsQ0FBQyxjQUFjO0FBQzFELGdCQUFnQixXQUFXLEVBQUVBLFdBQVMsQ0FBQyxTQUFTO0FBQ2hELGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSyxDQUFDLENBQUM7QUFDUCxJQUFJLE9BQU8sTUFBTSxDQUFDO0FBQ2xCOztBQzNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdCQTtBQUNBLE1BQU1ZLFFBQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7QUF5Qm5DO0FBQ0E7QUFDQSxNQUFNLGNBQWMsQ0FBQztBQUNyQixJQUFJLFdBQVcsQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3BELElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztBQUNiLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztBQUNiLElBQUksWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdEIsSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakQsSUFBSSxVQUFVLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNyQixJQUFJLGNBQWMsR0FBRyxFQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN6QyxJQUFJLGlCQUFpQixDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQ2pDLENBQUM7QUFDRDtBQUNBLE1BQU0sa0JBQWtCLENBQUM7QUFDekIsSUFBSSxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztBQUM3QixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7QUFDYixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7QUFDYixJQUFJLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3RCLElBQUksV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDckIsQ0FBQztBQUNEO0FBQ0EsTUFBTSxXQUFXLENBQUM7QUFDbEIsSUFBSSxXQUFXLENBQUMsS0FBSyxFQUFFO0FBQ3ZCLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDM0IsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUMvQixRQUFRLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7QUFDdkMsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNoQyxRQUFRLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFDcEMsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztBQUNqQyxRQUFRLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7QUFDekMsSUFBSSxDQUFDO0FBQ0wsSUFBSSxlQUFlLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLElBQUksZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCLElBQUksaUJBQWlCLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLElBQUksZ0JBQWdCLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFDcEMsSUFBSSxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQztBQUMxRCxJQUFJLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3BDLElBQUksd0JBQXdCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNsQyxJQUFJLHFCQUFxQixDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELElBQUkscUJBQXFCLEdBQUcsRUFBRSxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7QUFDL0QsSUFBSSw0QkFBNEIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUM3QyxJQUFJLDJCQUEyQixDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0FBQzVDLElBQUksdUJBQXVCLENBQUMsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDMUUsSUFBSSx3QkFBd0IsR0FBRyxFQUFFLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztBQUNqRSxJQUFJLHlCQUF5QixDQUFDLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQzlFLElBQUksNkJBQTZCLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBQ3RELElBQUksbUJBQW1CLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFDdEMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0FBQ2hCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sTUFBTSxNQUFNLENBQUM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxXQUFXLENBQUMsT0FBTyxHQUFHLEVBQUUsRUFBRTtBQUM1QjtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN4RCxJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSVksYUFBTyxFQUFFLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM5RDtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLHFCQUFxQjtBQUN0QyxNQUFNLE9BQU8sQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbEQsSUFBSSxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUMsU0FBUztBQUN4RCxNQUFNLE9BQU8sQ0FBQyxxQkFBcUI7QUFDbkMsS0FBSyxDQUFDO0FBQ047QUFDQSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCO0FBQ3RDLFFBQVEsT0FBTyxDQUFDLHFCQUFxQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsRCxNQUFNLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQyxTQUFTO0FBQzFELFFBQVEsT0FBTyxDQUFDLHFCQUFxQjtBQUNyQyxLQUFLLENBQUM7QUFDTixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUNuRDtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixJQUFJLElBQUksQ0FBQztBQUNuRTtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxtQkFBbUIsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDOUUsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUMsU0FBUztBQUN0RCxNQUFNLE9BQU8sQ0FBQyxtQkFBbUI7QUFDakMsS0FBSyxDQUFDO0FBQ047QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQztBQUNsRDtBQUNBO0FBQ0EsSUFBSSxJQUFJLE9BQU8sQ0FBQyxjQUFjLEtBQUssU0FBUyxJQUFJLE9BQU8sQ0FBQyxjQUFjLEtBQUssSUFBSTtBQUMvRSxNQUFNLE9BQU8sQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0FBQ3BDLElBQUksSUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsY0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztBQUNyRSxJQUFJLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pFO0FBQ0E7QUFDQSxJQUFJLElBQUksT0FBTyxDQUFDLGtCQUFrQixLQUFLLFNBQVM7QUFDaEQsTUFBTSxPQUFPLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO0FBQ3hDLElBQUksSUFBSSxDQUFDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQztBQUN6RDtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDM0MsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDeEM7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLHNCQUFzQixHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsSUFBSSxLQUFLLENBQUM7QUFDMUUsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLHNCQUFzQjtBQUN2RCxRQUFRLENBQUM7QUFDVCxRQUFRLE1BQU0sQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLENBQUM7QUFDckM7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLDZCQUE2QjtBQUN0QyxNQUFNLE9BQU8sQ0FBQyw2QkFBNkIsSUFBSSxLQUFLLENBQUM7QUFDckQ7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3pDO0FBQ0EsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDckM7QUFDQSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUNqQztBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxPQUFPLENBQUMsa0JBQWtCLElBQUksS0FBSyxDQUFDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLE1BQU0sT0FBTyxDQUFDLGdCQUFnQixLQUFLLFNBQVM7QUFDNUMsTUFBTSxPQUFPLENBQUMsZ0JBQWdCLEtBQUssSUFBSTtBQUN2QyxNQUFNO0FBQ04sTUFBTSxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQ3RDLElBQUksQ0FBQztBQUNMLElBQUksSUFBSSxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osTUFBTSxPQUFPLENBQUMsc0JBQXNCLEtBQUssU0FBUztBQUNsRCxNQUFNLE9BQU8sQ0FBQyxzQkFBc0IsS0FBSyxJQUFJO0FBQzdDO0FBQ0EsTUFBTSxPQUFPLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDO0FBQzVDLElBQUksSUFBSSxDQUFDLHNCQUFzQixHQUFHLEtBQUssQ0FBQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsV0FBVyxJQUFJLEtBQUssQ0FBQztBQUNwRDtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsWUFBWTtBQUNyQixNQUFNLE9BQU8sQ0FBQyxZQUFZLEtBQUssU0FBUyxHQUFHLEdBQUcsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxJQUFJLFVBQVUsQ0FBQyxNQUFNLENBQUM7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsZUFBZSxJQUFJLGVBQWUsQ0FBQyxPQUFPLENBQUM7QUFDOUU7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQyxlQUFlLElBQUksR0FBRyxDQUFDO0FBQzFEO0FBQ0E7QUFDQSxJQUFJLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxPQUFPLENBQUMsdUJBQXVCLElBQUksSUFBSSxDQUFDO0FBQzNFO0FBQ0E7QUFDQSxJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLHdCQUF3QixHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsSUFBSSxDQUFDLENBQUM7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxPQUFPLENBQUMscUJBQXFCLElBQUksS0FBSyxDQUFDO0FBQ3hFO0FBQ0E7QUFDQSxJQUFJO0FBQ0osTUFBTSxPQUFPLENBQUMsZ0JBQWdCLEtBQUssU0FBUztBQUM1QyxNQUFNLE9BQU8sQ0FBQyxnQkFBZ0IsS0FBSyxJQUFJO0FBQ3ZDO0FBQ0EsTUFBTSxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQ3RDLElBQUksSUFBSSxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUNyRDtBQUNBO0FBQ0EsSUFBSTtBQUNKLE1BQU0sT0FBTyxDQUFDLHdCQUF3QixLQUFLLFNBQVM7QUFDcEQsTUFBTSxPQUFPLENBQUMsd0JBQXdCLEtBQUssSUFBSTtBQUMvQyxNQUFNO0FBQ04sTUFBTSxPQUFPLENBQUMsd0JBQXdCLEdBQUcsQ0FBQyxDQUFDO0FBQzNDLElBQUksQ0FBQztBQUNMLElBQUksSUFBSSxDQUFDLHdCQUF3QixHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztBQUNyRTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osTUFBTSxPQUFPLENBQUMsaUJBQWlCLEtBQUssU0FBUztBQUM3QyxNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsS0FBSyxJQUFJO0FBQ3hDLE1BQU07QUFDTixNQUFNLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDdkMsSUFBSSxDQUFDO0FBQ0wsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLE1BQU0sT0FBTyxDQUFDLHlCQUF5QixLQUFLLFNBQVM7QUFDckQsTUFBTSxPQUFPLENBQUMseUJBQXlCLEtBQUssSUFBSTtBQUNoRCxNQUFNO0FBQ04sTUFBTSxPQUFPLENBQUMseUJBQXlCLEdBQUcsS0FBSyxDQUFDO0FBQ2hELElBQUksQ0FBQztBQUNMLElBQUksSUFBSSxDQUFDLHlCQUF5QixHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUksS0FBSyxFQUFFLEVBQUU7QUFDakIsTUFBTSxNQUFNLE1BQU0sR0FBRyxhQUFhLEVBQUUsQ0FBQztBQUNyQyxNQUFNLElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxFQUFFLEVBQUU7QUFDN0IsUUFBUSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0FBQ3RDLE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxNQUFNLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRTtBQUM3QixRQUFRLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxLQUFLLENBQUM7QUFDNUMsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSixNQUFNLE9BQU8sQ0FBQyxlQUFlLEtBQUssU0FBUztBQUMzQyxNQUFNLE9BQU8sQ0FBQyxlQUFlLEtBQUssSUFBSTtBQUN0QyxNQUFNO0FBQ04sTUFBTSxPQUFPLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQyxNQUFNLENBQUM7QUFDdkQsSUFBSSxDQUFDO0FBQ0wsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFDbkQ7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLHlCQUF5QixHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsSUFBSSxHQUFHLENBQUM7QUFDOUU7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLDZCQUE2QjtBQUN0QyxNQUFNLE9BQU8sQ0FBQyw2QkFBNkI7QUFDM0MsTUFBTXhCLFdBQVMsQ0FBQyxvQ0FBb0MsQ0FBQztBQUNyRCxJQUFJLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO0FBQ3pELElBQUksSUFBSSxDQUFDLDZCQUE2QixHQUFHLEtBQUs7QUFDOUMsTUFBTSxJQUFJLENBQUMsNkJBQTZCO0FBQ3hDLE1BQU0sRUFBRTtBQUNSLE1BQU0sWUFBWTtBQUNsQixLQUFLLENBQUM7QUFDTjtBQUNBLElBQUksSUFBSSxDQUFDLDBCQUEwQixHQUFHLElBQUksQ0FBQztBQUMzQyxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUMzQjtBQUNBLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDekIsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ3BDLElBQUksSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUNyQztBQUNBLElBQUksSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUNuQyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDbEM7QUFDQSxJQUFJLElBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO0FBQ2hDLElBQUksSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztBQUNsQyxJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0FBQzFCO0FBQ0EsSUFBSSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUM1QjtBQUNBLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDM0IsSUFBSSxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztBQUM3QixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxDQUFDLENBQUM7QUFDOUIsSUFBSSxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQztBQUM1QixJQUFJLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxDQUFDLENBQUM7QUFDaEMsSUFBSSxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxDQUFDO0FBQ3hDLElBQUksSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQztBQUN4QyxJQUFJLElBQUksQ0FBQyw4QkFBOEIsR0FBRyxJQUFJLENBQUM7QUFDL0MsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3JDLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7QUFDOUIsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBQy9CO0FBQ0EsSUFBSSxJQUFJLENBQUMscUJBQXFCLEdBQUcsS0FBSyxDQUFDO0FBQ3ZDLElBQUksSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztBQUNsQztBQUNBLElBQUksSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQ3JDO0FBQ0EsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztBQUMxQjtBQUNBLElBQUksSUFBSSxDQUFDLHVCQUF1QixHQUFHLEtBQUssQ0FBQztBQUN6QztBQUNBLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFDeEIsSUFBSSxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztBQUMxQixJQUFJLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLENBQUM7QUFDckM7QUFDQSxJQUFJLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJd0IsYUFBTyxFQUFFLENBQUM7QUFDOUMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUM7QUFDMUM7QUFDQSxJQUFJLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSVksYUFBTyxFQUFFLENBQUM7QUFDdkMsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUM7QUFDM0MsSUFBSSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztBQUM5QjtBQUNBLElBQUksSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7QUFDL0IsSUFBSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0FBQ2xDLElBQUksSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztBQUNsQyxJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDaEM7QUFDQSxJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQzVCLElBQUksSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUNwQyxJQUFJLElBQUksQ0FBQyw2QkFBNkIsR0FBRyxFQUFFLENBQUM7QUFDNUMsSUFBSSxJQUFJLENBQUMsMEJBQTBCLEdBQUcsRUFBRSxDQUFDO0FBQ3pDLElBQUksSUFBSSxDQUFDLGlDQUFpQyxHQUFHLElBQUksQ0FBQztBQUNsRCxJQUFJLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUM7QUFDekM7QUFDQSxJQUFJLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxjQUFjO0FBQzVDLE1BQU0sSUFBSTtBQUNWLE1BQU0sSUFBSSxDQUFDLFdBQVcsSUFBSSxRQUFRLENBQUMsSUFBSTtBQUN2QyxLQUFLLENBQUM7QUFDTixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDL0IsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxrQkFBa0I7QUFDcEQsTUFBTSxJQUFJLENBQUMsV0FBVyxJQUFJLFFBQVEsQ0FBQyxJQUFJO0FBQ3ZDLEtBQUssQ0FBQztBQUNOLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQUcsS0FBSyxDQUFDO0FBQzdFLElBQUksSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLEdBQUcsS0FBSyxDQUFDO0FBQ2pGO0FBQ0EsSUFBSSxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztBQUM3QixJQUFJLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0FBQzNCLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7QUFDMUIsSUFBSSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztBQUMvQjtBQUNBLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDdEIsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7QUFDekIsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztBQUNuQixJQUFJLElBQUksRUFBRSxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzVCLElBQUksSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDMUIsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztBQUN6QixJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0FBQ3pCLElBQUksSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztBQUNsQztBQUNBLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3RDLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxlQUFlLEdBQUc7QUFDcEIsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksU0FBUztBQUNsQyxNQUFNLElBQUksQ0FBQyxlQUFlO0FBQzFCLE1BQU0sSUFBSSxDQUFDLFlBQVk7QUFDdkIsTUFBTSxJQUFJLENBQUMscUJBQXFCO0FBQ2hDLE1BQU0sSUFBSSxDQUFDLDZCQUE2QjtBQUN4QyxNQUFNLElBQUksQ0FBQyxnQkFBZ0I7QUFDM0IsTUFBTSxJQUFJLENBQUMsa0JBQWtCO0FBQzdCLE1BQU0sSUFBSSxDQUFDLGdCQUFnQjtBQUMzQixNQUFNLElBQUksQ0FBQyxXQUFXO0FBQ3RCLE1BQU0sSUFBSSxDQUFDLHVCQUF1QjtBQUNsQyxNQUFNLElBQUksQ0FBQyxRQUFRO0FBQ25CLE1BQU0sSUFBSSxDQUFDLHdCQUF3QjtBQUNuQyxNQUFNLElBQUksQ0FBQyx5QkFBeUI7QUFDcEMsTUFBTSxJQUFJLENBQUMsWUFBWTtBQUN2QixNQUFNLElBQUksQ0FBQyxtQkFBbUI7QUFDOUIsS0FBSyxDQUFDO0FBQ047QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7QUFDekMsSUFBSSxJQUFJLElBQUksQ0FBQywwQkFBMEIsRUFBRSxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztBQUMzRSxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsSUFBSSxHQUFHO0FBQ1QsSUFBSSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsTUFBTTtBQUNoQztBQUNBLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDM0IsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFO0FBQ3ZDLFFBQVEsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pELFFBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztBQUM5QyxRQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDL0MsUUFBUSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQ3JELFFBQVEsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUM7QUFDckUsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztBQUN2QixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUN6QjtBQUNBO0FBQ0EsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUM5QjtBQUNBLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUl3QixXQUFLLEVBQUUsQ0FBQztBQUNyRCxJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3hELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLEVBQUUsQ0FBQztBQUN2QyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUN4QyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztBQUN6QztBQUNBLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDM0QsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdkQ7QUFDQTtBQUNBLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDNUIsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLFdBQVcsR0FBRztBQUNoQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7QUFDbkMsTUFBTSxNQUFNLGdCQUFnQixHQUFHLElBQUl4QixhQUFPLEVBQUUsQ0FBQztBQUM3QyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2pEO0FBQ0EsTUFBTSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSXlCLHVCQUFpQjtBQUNwRCxRQUFRLGdCQUFnQjtBQUN4QixRQUFRLGdCQUFnQixDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQy9DLFFBQVEsR0FBRztBQUNYLFFBQVEsSUFBSTtBQUNaLE9BQU8sQ0FBQztBQUNSLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUlDLHdCQUFrQjtBQUN0RCxRQUFRLGdCQUFnQixDQUFDLENBQUMsR0FBRyxFQUFFO0FBQy9CLFFBQVEsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDOUIsUUFBUSxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQztBQUM5QixRQUFRLGdCQUFnQixDQUFDLENBQUMsR0FBRyxFQUFFO0FBQy9CLFFBQVEsR0FBRztBQUNYLFFBQVEsSUFBSTtBQUNaLE9BQU8sQ0FBQztBQUNSLE1BQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsdUJBQXVCO0FBQ2hELFVBQVUsSUFBSSxDQUFDLGtCQUFrQjtBQUNqQyxVQUFVLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztBQUNqQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUM1RDtBQUNBO0FBQ0EsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQ0MsZUFBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RSxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDQSxlQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVFLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUNBLGVBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUUsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLGFBQWEsR0FBRztBQUNsQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDckMsTUFBTSxNQUFNLGdCQUFnQixHQUFHLElBQUkzQixhQUFPLEVBQUUsQ0FBQztBQUM3QyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2pEO0FBQ0EsTUFBTSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUk0QixtQkFBYSxDQUFDO0FBQ3hDLFFBQVEsU0FBUyxFQUFFLEtBQUs7QUFDeEIsUUFBUSxTQUFTLEVBQUUsT0FBTztBQUMxQixRQUFRLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtBQUMzQixPQUFPLENBQUMsQ0FBQztBQUNULE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDekQsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDckMsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzdEO0FBQ0EsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDcEU7QUFDQSxNQUFNLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxjQUFjLENBQUMsTUFBTTtBQUNyRCxRQUFRLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ25ELFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLFFBQVEsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7QUFDcEMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNULE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM3RCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsYUFBYSxHQUFHO0FBQ2xCLElBQUksSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7QUFDakMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO0FBQ3JDLFFBQVEsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUlDLDhCQUFhO0FBQ3BELFVBQVUsSUFBSSxDQUFDLGlCQUFpQjtBQUNoQyxVQUFVLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVTtBQUNsQyxTQUFTLENBQUM7QUFDVixRQUFRLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJQSw4QkFBYTtBQUNyRCxVQUFVLElBQUksQ0FBQyxrQkFBa0I7QUFDakMsVUFBVSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVU7QUFDbEMsU0FBUyxDQUFDO0FBQ1YsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRTtBQUM5QyxVQUFVLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJQSw4QkFBYTtBQUN2RCxZQUFZLElBQUksQ0FBQyxNQUFNO0FBQ3ZCLFlBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVO0FBQ3BDLFdBQVcsQ0FBQztBQUNaLFFBQVEsQ0FBQyxNQUFNO0FBQ2YsVUFBVSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSUEsOEJBQWE7QUFDdEQsWUFBWSxJQUFJLENBQUMsTUFBTTtBQUN2QixZQUFZLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVTtBQUNwQyxXQUFXLENBQUM7QUFDWixRQUFRLENBQUM7QUFDVCxNQUFNLENBQUM7QUFDUCxNQUFNLEtBQUssSUFBSSxRQUFRLElBQUk7QUFDM0IsUUFBUSxJQUFJLENBQUMsb0JBQW9CO0FBQ2pDLFFBQVEsSUFBSSxDQUFDLG1CQUFtQjtBQUNoQyxPQUFPLEVBQUU7QUFDVCxRQUFRLElBQUksUUFBUSxFQUFFO0FBQ3RCLFVBQVUsUUFBUSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLFVBQVUsUUFBUSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFDckMsVUFBVSxRQUFRLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO0FBQ2pELFVBQVUsUUFBUSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQztBQUNqRCxVQUFVLFFBQVEsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztBQUNuRCxVQUFVLFFBQVEsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7QUFDbEQsVUFBVSxRQUFRLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztBQUN4QyxVQUFVLFFBQVEsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ3hDLFVBQVUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDekQsVUFBVSxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDNUIsUUFBUSxDQUFDO0FBQ1QsTUFBTSxDQUFDO0FBQ1AsTUFBTSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CO0FBQ3RELFVBQVUsSUFBSSxDQUFDLG9CQUFvQjtBQUNuQyxVQUFVLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztBQUNuQyxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDN0IsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLGtCQUFrQixHQUFHO0FBQ3ZCLElBQUksSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7QUFDakMsTUFBTSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0QsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0I7QUFDL0MsUUFBUSxhQUFhO0FBQ3JCLFFBQVEsSUFBSSxDQUFDLGlCQUFpQjtBQUM5QixRQUFRLEtBQUs7QUFDYixPQUFPLENBQUM7QUFDUixNQUFNLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMzRCxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLGdCQUFnQjtBQUMvQyxRQUFRLGFBQWE7QUFDckIsUUFBUSxJQUFJLENBQUMsaUJBQWlCO0FBQzlCLFFBQVEsS0FBSztBQUNiLE9BQU8sQ0FBQztBQUNSLE1BQU0sSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2RCxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLGdCQUFnQjtBQUMvQyxRQUFRLFdBQVc7QUFDbkIsUUFBUSxJQUFJLENBQUMsZUFBZTtBQUM1QixRQUFRLEtBQUs7QUFDYixPQUFPLENBQUM7QUFDUixNQUFNLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdkQsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLG1CQUFtQixHQUFHO0FBQ3hCLElBQUksSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUU7QUFDakMsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQkFBbUI7QUFDbEQsUUFBUSxhQUFhO0FBQ3JCLFFBQVEsSUFBSSxDQUFDLGlCQUFpQjtBQUM5QixPQUFPLENBQUM7QUFDUixNQUFNLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDcEMsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQkFBbUI7QUFDbEQsUUFBUSxhQUFhO0FBQ3JCLFFBQVEsSUFBSSxDQUFDLGlCQUFpQjtBQUM5QixPQUFPLENBQUM7QUFDUixNQUFNLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7QUFDcEMsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxtQkFBbUI7QUFDbEQsUUFBUSxXQUFXO0FBQ25CLFFBQVEsSUFBSSxDQUFDLGVBQWU7QUFDNUIsT0FBTyxDQUFDO0FBQ1IsTUFBTSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztBQUNsQyxNQUFNLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ2xFLE1BQU0sSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7QUFDbEMsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLGFBQWEsQ0FBQyxVQUFVLEVBQUU7QUFDNUIsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztBQUNqQyxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsa0NBQWtDLENBQUMsK0JBQStCLEVBQUU7QUFDdEUsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsd0JBQXdCLENBQUMsS0FBSztBQUNuRSxNQUFNLCtCQUErQixDQUFDO0FBQ3RDLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO0FBQ3RELEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxrQkFBa0IsQ0FBQyxRQUFRLEVBQUU7QUFDL0IsSUFBSSxJQUFJLENBQUMsMEJBQTBCLEdBQUcsUUFBUSxDQUFDO0FBQy9DLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxXQUFXLEdBQUcsSUFBSXpDLGFBQU8sRUFBRTtBQUM3QixFQUFFLGNBQWMsR0FBRyxJQUFJQyxhQUFPLEVBQUU7QUFDaEMsRUFBRSxlQUFlLEdBQUcsSUFBSUEsYUFBTyxFQUFFO0FBQ2pDLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxLQUFLO0FBQ3JCLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNuQyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNqRSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQzFFLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUM1RSxJQUFJLFFBQVEsQ0FBQyxDQUFDLElBQUk7QUFDbEIsTUFBTSxLQUFLLE1BQU07QUFDakIsUUFBUSxJQUFJLENBQUMsZUFBZSxJQUFJLElBQUksQ0FBQztBQUNyQyxRQUFRLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQ3BDLFFBQVEsS0FBSztBQUNiLE1BQU0sS0FBSyxNQUFNO0FBQ2pCLFFBQVEsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUM7QUFDckMsUUFBUSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztBQUNwQyxRQUFRLEtBQUs7QUFDYixNQUFNLEtBQUssV0FBVztBQUN0QixRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUMvRCxRQUFRLEtBQUs7QUFDYixNQUFNLEtBQUssWUFBWTtBQUN2QixRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNoRSxRQUFRLEtBQUs7QUFDYixNQUFNLEtBQUssTUFBTTtBQUNqQixRQUFRLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDO0FBQ25ELFFBQVEsS0FBSztBQUNiLE1BQU0sS0FBSyxNQUFNO0FBQ2pCLFFBQVEsSUFBSSxDQUFDLGdCQUFnQixHQUFHLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDO0FBQ3ZELFFBQVEsS0FBSztBQUNiLE1BQU0sS0FBSyxNQUFNO0FBQ2pCLFFBQVEsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7QUFDdkMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FJbEI7QUFDVCxRQUFRLEtBQUs7QUFDYixNQUFNLEtBQUssTUFBTTtBQUNqQixRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7QUFDdkMsVUFBVSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDdEUsUUFBUSxDQUFDO0FBQ1QsUUFBUSxLQUFLO0FBQ2IsTUFBTSxLQUFLLE1BQU07QUFDakIsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO0FBQ3ZDLFVBQVUsSUFBSSxDQUFDLFNBQVMsQ0FBQyx3QkFBd0I7QUFDakQsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsd0JBQXdCLEVBQUU7QUFDdEQsV0FBVyxDQUFDO0FBQ1osUUFBUSxDQUFDO0FBQ1QsUUFBUSxLQUFLO0FBQ2IsTUFBTSxLQUFLLE9BQU87QUFDbEIsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO0FBQ3ZDLFVBQVUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUM5RSxRQUFRLENBQUM7QUFDVCxRQUFRLEtBQUs7QUFDYixNQUFNLEtBQUssT0FBTztBQUNsQixRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUU7QUFDdkMsVUFBVSxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWE7QUFDdEMsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLEdBQUcsSUFBSSxFQUFFLEdBQUcsQ0FBQztBQUNoRSxXQUFXLENBQUM7QUFDWixRQUFRLENBQUM7QUFDVCxRQUFRLEtBQUs7QUFDYixLQUFLO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUU7QUFDckIsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6RCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsV0FBVyxHQUFHO0FBQ2hCLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDcEQsSUFBSSxJQUFJLENBQUMsYUFBYSxHQUFHLGNBQWMsRUFBRSxDQUFDO0FBQzFDLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxTQUFTLEdBQUcsQ0FBQyxZQUFZO0FBQzNCLElBQUksTUFBTSxXQUFXLEdBQUcsSUFBSVcsYUFBTyxFQUFFLENBQUM7QUFDdEM7QUFDQSxJQUFJLE9BQU8sVUFBVSxLQUFLLEVBQUU7QUFDNUIsTUFBTSxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDdkUsTUFBTSxNQUFNLFdBQVcsR0FBRyxjQUFjLEVBQUUsQ0FBQztBQUMzQyxNQUFNLE1BQU0sUUFBUTtBQUNwQixRQUFRLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzNFLE1BQU0sSUFBSSxRQUFRLEVBQUU7QUFDcEIsUUFBUSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2pDLE1BQU0sQ0FBQztBQUNQLElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQyxHQUFHO0FBQ047QUFDQSxFQUFFLFlBQVksQ0FBQyxLQUFLLEVBQUU7QUFDdEIsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6RCxJQUFJLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO0FBQ3BDLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSwwQkFBMEIsR0FBRyxJQUFJQSxhQUFPLEVBQUU7QUFDNUMsRUFBRSx5QkFBeUIsR0FBRyxJQUFJWixhQUFPLEVBQUU7QUFDM0MsRUFBRSxpQkFBaUIsR0FBRyxFQUFFO0FBQ3hCLEVBQUUsd0JBQXdCLEdBQUcsTUFBTTtBQUNuQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMseUJBQXlCLEVBQUU7QUFDekMsTUFBTSxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDaEUsTUFBTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN4QyxNQUFNLElBQUksQ0FBQyxTQUFTLENBQUMsOEJBQThCO0FBQ25ELFFBQVEsSUFBSSxDQUFDLE1BQU07QUFDbkIsUUFBUSxJQUFJLENBQUMsYUFBYTtBQUMxQixRQUFRLElBQUksQ0FBQywwQkFBMEI7QUFDdkMsT0FBTyxDQUFDO0FBQ1IsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFDaEYsTUFBTSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzdDLFFBQVEsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlDLFFBQVEsTUFBTSxpQkFBaUIsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQzdDLFFBQVEsSUFBSSxDQUFDLHlCQUF5QjtBQUN0QyxXQUFXLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztBQUNsQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3JDLFFBQVE7QUFDUixVQUFVLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxNQUFNLEVBQUU7QUFDakQsVUFBVSxtQ0FBbUM7QUFDN0MsVUFBVTtBQUNWLFVBQVUsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQy9ELFVBQVUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ3hELFVBQVUsSUFBSSxDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQztBQUNoRCxVQUFVLElBQUksQ0FBQyxrQ0FBa0MsR0FBRyxjQUFjLEVBQUUsQ0FBQztBQUNyRSxRQUFRLENBQUM7QUFDVCxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsbUJBQW1CLENBQUMsYUFBYSxFQUFFO0FBQ3JDLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQzFCLE1BQU0sYUFBYSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQztBQUNyRCxNQUFNLGFBQWEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUM7QUFDdEQsSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzNDLElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxtQkFBbUIsQ0FBQyxnQkFBZ0IsRUFBRTtBQUN4QyxJQUFJLElBQUksZ0JBQWdCLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRSxNQUFNO0FBQ3JFLElBQUksTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUNuQyxJQUFJLE1BQU0sUUFBUSxHQUFHLGdCQUFnQjtBQUNyQyxRQUFRLElBQUksQ0FBQyxrQkFBa0I7QUFDL0IsUUFBUSxJQUFJLENBQUMsaUJBQWlCLENBQUM7QUFDL0IsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDaEQsSUFBSSxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDcEMsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDaEQsSUFBSSxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEQsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDNUMsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQztBQUMzQjtBQUNBLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3ZCLE1BQU0sTUFBTSxhQUFhLEdBQUcsQ0FBQyxRQUFRLEtBQUs7QUFDMUMsUUFBUSxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDN0IsUUFBUSxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDekIsTUFBTSxDQUFDLENBQUM7QUFDUjtBQUNBLE1BQU0sTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUN6QyxNQUFNLE1BQU0sVUFBVSxHQUFHLGdCQUFnQjtBQUN6QyxVQUFVLElBQUksQ0FBQyxvQkFBb0I7QUFDbkMsVUFBVSxJQUFJLENBQUMsbUJBQW1CLENBQUM7QUFDbkM7QUFDQSxNQUFNLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoQyxNQUFNLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUNsQztBQUNBLE1BQU0sVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2xELE1BQU0sSUFBSSxnQkFBZ0IsRUFBRTtBQUM1QixRQUFRLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzdFLE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxNQUFNLENBQUMseUJBQXlCLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUMzRSxNQUFNLENBQUM7QUFDUCxNQUFNLElBQUksQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQ2pDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMvQyxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsT0FBTyx5QkFBeUIsR0FBRyxDQUFDLFlBQVk7QUFDbEQsSUFBSSxNQUFNLFVBQVUsR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUNyQztBQUNBLElBQUksT0FBTyxVQUFVLGNBQWMsRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFO0FBQzdELE1BQU0sTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLElBQUksWUFBWSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQztBQUMvRCxNQUFNLFVBQVU7QUFDaEIsU0FBUyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztBQUM5QixTQUFTLEdBQUcsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDO0FBQ3JDLFNBQVMsU0FBUyxFQUFFO0FBQ3BCLFNBQVMsY0FBYyxDQUFDLGdCQUFnQixDQUFDO0FBQ3pDLFNBQVMsTUFBTSxFQUFFLENBQUM7QUFDbEIsTUFBTSxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BFLElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQyxHQUFHO0FBQ047QUFDQSxFQUFFLE9BQU8seUJBQXlCLEdBQUcsQ0FBQyxZQUFZO0FBQ2xELElBQUksTUFBTSxVQUFVLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUM7QUFDckM7QUFDQSxJQUFJLE9BQU8sVUFBVSxVQUFVLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRTtBQUMzRCxNQUFNLE1BQU0sZ0JBQWdCLEdBQUcsVUFBVTtBQUN6QyxTQUFTLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO0FBQzlCLFNBQVMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUM7QUFDckMsU0FBUyxNQUFNLEVBQUUsQ0FBQztBQUNsQixNQUFNLFVBQVUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLGdCQUFnQixHQUFHLEtBQUssQ0FBQyxDQUFDO0FBQ3ZELElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQyxHQUFHO0FBQ047QUFDQSxFQUFFLGVBQWUsR0FBRyxDQUFDLFlBQVk7QUFDakMsSUFBSSxNQUFNLGdCQUFnQixHQUFHLElBQUlZLGFBQU8sRUFBRSxDQUFDO0FBQzNDO0FBQ0EsSUFBSSxPQUFPLFlBQVk7QUFDdkIsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxNQUFNO0FBQ2pDLE1BQU0sTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUN4RCxNQUFNLElBQUksVUFBVSxHQUFHLENBQUMsRUFBRTtBQUMxQixRQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsK0JBQStCLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzdFLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0FBQzFDLFFBQVEsSUFBSSxDQUFDLG1CQUFtQixDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDbkQsUUFBUSxNQUFNLFlBQVk7QUFDMUIsVUFBVSxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDbEQsVUFBVSxHQUFHO0FBQ2IsVUFBVSxJQUFJLENBQUMsZ0JBQWdCO0FBQy9CLFVBQVUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0FBQzdCLFFBQVEsTUFBTSxZQUFZO0FBQzFCLFVBQVUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQ2xELFVBQVUsR0FBRztBQUNiLFVBQVUsSUFBSSxDQUFDLGdCQUFnQjtBQUMvQixVQUFVLGdCQUFnQixDQUFDLENBQUMsQ0FBQztBQUM3QjtBQUNBLFFBQVEsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0I7QUFDaEUsWUFBWSxHQUFHLEdBQUcsSUFBSSxDQUFDLGdCQUFnQjtBQUN2QyxZQUFZLEdBQUcsQ0FBQztBQUNoQixRQUFRLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO0FBQ3ZFLFFBQVEsTUFBTSxzQkFBc0IsR0FBRyxHQUFHLEdBQUcsZUFBZSxDQUFDO0FBQzdEO0FBQ0EsUUFBUSxJQUFJLENBQUMsb0JBQW9CLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNwRCxRQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYztBQUNyQyxVQUFVLGdCQUFnQjtBQUMxQixVQUFVLFlBQVksR0FBRyxlQUFlO0FBQ3hDLFVBQVUsWUFBWSxHQUFHLGVBQWU7QUFDeEMsVUFBVSxJQUFJLENBQUMsTUFBTSxDQUFDLG9CQUFvQjtBQUMxQyxVQUFVLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLEdBQUc7QUFDakMsVUFBVSxzQkFBc0I7QUFDaEMsU0FBUyxDQUFDO0FBQ1YsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDLEdBQUc7QUFDTjtBQUNBLEVBQUUsb0JBQW9CLENBQUMsZ0JBQWdCLEVBQUU7QUFDekM7QUFDQSxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQ3pDLE1BQU0sTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDcEQsTUFBTSxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25FLE1BQU0sTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDcEUsTUFBTSxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUMxRCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsb0JBQW9CLEdBQUc7QUFDekIsSUFBSTtBQUNKLE1BQU0sTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQztBQUM3RCxNQUFNLElBQUksQ0FBQyxpQ0FBaUMsS0FBSyxJQUFJO0FBQ3JELE1BQU0sSUFBSSxDQUFDLHdCQUF3QixLQUFLLElBQUk7QUFDNUMsS0FBSztBQUNMLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxxQkFBcUIsR0FBRztBQUMxQixJQUFJLE9BQU8sSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsUUFBUTtBQUMxQyxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsK0JBQStCLENBQUMsVUFBVSxFQUFFO0FBQzlDLElBQUksSUFBSSxDQUFDLDZCQUE2QixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUN4RCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsa0NBQWtDLENBQUMsVUFBVSxFQUFFO0FBQ2pELElBQUksTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLDZCQUE2QixDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUN6RSxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsRUFBRTtBQUNwQixRQUFRLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzVELElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSw0QkFBNEIsQ0FBQyxPQUFPLEVBQUU7QUFDeEMsSUFBSSxJQUFJLENBQUMsMEJBQTBCLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQztBQUMxRCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsK0JBQStCLENBQUMsT0FBTyxFQUFFO0FBQzNDLElBQUksT0FBTyxJQUFJLENBQUMsMEJBQTBCLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZELEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxvQ0FBb0MsQ0FBQyxPQUFPLEVBQUU7QUFDaEQsSUFBSSxJQUFJLENBQUMsaUNBQWlDLEdBQUcsT0FBTyxDQUFDO0FBQ3JELEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxzQ0FBc0MsR0FBRztBQUMzQyxJQUFJLElBQUksQ0FBQyxpQ0FBaUMsR0FBRyxJQUFJLENBQUM7QUFDbEQsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsYUFBYSxDQUFDLElBQUksRUFBRSxPQUFPLEdBQUcsRUFBRSxFQUFFO0FBQ3BDLElBQUksSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsRUFBRTtBQUNyQyxNQUFNLE1BQU0sSUFBSSxLQUFLO0FBQ3JCLFFBQVEsNkVBQTZFO0FBQ3JGLE9BQU87QUFDUCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUUsRUFBRTtBQUN0QyxNQUFNLE1BQU0sSUFBSSxLQUFLLENBQUMsbURBQW1ELENBQUM7QUFDMUUsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJO0FBQ0osTUFBTSxPQUFPLENBQUMsZUFBZTtBQUM3QixNQUFNLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTTtBQUMzQixNQUFNLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO0FBQ3RDLE1BQU07QUFDTixNQUFNeEIsUUFBTSxDQUFDLElBQUk7QUFDakIsUUFBUSwwRkFBMEY7QUFDbEcsT0FBTyxDQUFDO0FBQ1IsTUFBTSxPQUFPLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztBQUN0QyxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksTUFBTSxNQUFNO0FBQ2hCLE1BQU0sT0FBTyxDQUFDLE1BQU0sS0FBSyxTQUFTLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxJQUFJO0FBQzdELFVBQVUsT0FBTyxDQUFDLE1BQU07QUFDeEIsVUFBVSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNwQyxJQUFJLE1BQU0sZUFBZTtBQUN6QixNQUFNLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQ3hFLElBQUksTUFBTSxhQUFhO0FBQ3ZCLE1BQU0sT0FBTyxDQUFDLGFBQWEsS0FBSyxTQUFTLElBQUksT0FBTyxDQUFDLGFBQWEsS0FBSyxJQUFJO0FBQzNFLFVBQVUsT0FBTyxDQUFDLGFBQWE7QUFDL0IsVUFBVSxJQUFJLENBQUM7QUFDZjtBQUNBLElBQUksSUFBSSxlQUFlLEdBQUcsSUFBSSxDQUFDO0FBQy9CLElBQUksSUFBSSxhQUFhLEVBQUU7QUFDdkIsTUFBTSxJQUFJLENBQUMsY0FBYyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQzNDLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDdEUsSUFBSSxDQUFDO0FBQ0wsSUFBSSxNQUFNLGFBQWEsR0FBRyxNQUFNO0FBQ2hDLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3JDLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUMzQyxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxNQUFNLGtCQUFrQixHQUFHO0FBQy9CLE1BQU0sZUFBZTtBQUNyQixNQUFNLG9CQUFvQjtBQUMxQixNQUFNLFlBQVk7QUFDbEIsU0FBUztBQUNULE1BQU0sSUFBSSxhQUFhLEVBQUU7QUFDekIsUUFBUSxJQUFJLFlBQVksS0FBSyxZQUFZLENBQUMsV0FBVyxFQUFFO0FBQ3ZELFVBQVUsSUFBSSxlQUFlLElBQUksR0FBRyxFQUFFO0FBQ3RDLFlBQVksSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUI7QUFDakQsY0FBYyxlQUFlO0FBQzdCLGNBQWMsb0JBQW9CO0FBQ2xDLGFBQWEsQ0FBQztBQUNkLFVBQVUsQ0FBQyxNQUFNO0FBQ2pCLFlBQVksSUFBSSxlQUFlLEVBQUU7QUFDakMsY0FBYyxJQUFJLENBQUMsY0FBYyxDQUFDLGlCQUFpQjtBQUNuRCxnQkFBZ0IsZUFBZTtBQUMvQixnQkFBZ0IsdUJBQXVCO0FBQ3ZDLGVBQWUsQ0FBQztBQUNoQixZQUFZLENBQUMsTUFBTTtBQUNuQixjQUFjLE1BQU0sTUFBTSxHQUFHLG9CQUFvQjtBQUNqRCxrQkFBa0IsQ0FBQyxFQUFFLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztBQUM3QyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN4QixjQUFjLElBQUksQ0FBQyxjQUFjLENBQUMsaUJBQWlCO0FBQ25ELGdCQUFnQixlQUFlO0FBQy9CLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN0QyxlQUFlLENBQUM7QUFDaEIsWUFBWSxDQUFDO0FBQ2IsVUFBVSxDQUFDO0FBQ1gsUUFBUSxDQUFDLE1BQU0sSUFBSSxZQUFZLEtBQUssWUFBWSxDQUFDLFVBQVUsRUFBRTtBQUM3RCxVQUFVQSxRQUFNLENBQUMsS0FBSyxDQUFDLDBDQUEwQyxDQUFDLENBQUM7QUFDbkUsVUFBVSxJQUFJLENBQUMsY0FBYyxDQUFDLGlCQUFpQjtBQUMvQyxZQUFZLGVBQWU7QUFDM0IsWUFBWSxzQkFBc0I7QUFDbEMsV0FBVyxDQUFDO0FBQ1osUUFBUSxDQUFDO0FBQ1QsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDO0FBQzdCLElBQUksSUFBSSxvQkFBb0IsR0FBRyxDQUFDLENBQUM7QUFDakMsSUFBSSxNQUFNLHlCQUF5QixHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsS0FBSztBQUNsRSxNQUFNLElBQUksYUFBYSxFQUFFO0FBQ3pCLFFBQVE7QUFDUixVQUFVLENBQUMsVUFBVSxJQUFJLGVBQWU7QUFDeEMsV0FBVyxVQUFVLElBQUksQ0FBQyxlQUFlLENBQUM7QUFDMUMsVUFBVTtBQUNWLFVBQVUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDMUQsVUFBVSxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUMzRSxRQUFRLENBQUM7QUFDVCxRQUFRLElBQUksZUFBZSxFQUFFO0FBQzdCLFVBQVUsSUFBSSxVQUFVLEVBQUU7QUFDMUIsWUFBWSxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLFlBQVksSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxDQUFDO0FBQzNDLFVBQVUsQ0FBQyxNQUFNO0FBQ2pCLFlBQVksSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3RFLFVBQVUsQ0FBQztBQUNYLFFBQVEsQ0FBQztBQUNULE1BQU0sQ0FBQztBQUNQLElBQUksQ0FBQyxDQUFDO0FBQ047QUFDQSxJQUFJLE1BQU0sVUFBVSxHQUFHO0FBQ3ZCLE1BQU0sZUFBZTtBQUNyQixNQUFNLG9CQUFvQjtBQUMxQixNQUFNLFlBQVk7QUFDbEIsU0FBUztBQUNULE1BQU0sb0JBQW9CLEdBQUcsZUFBZSxDQUFDO0FBQzdDLE1BQU0sa0JBQWtCLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzlFLE1BQU0sSUFBSSxPQUFPLENBQUMsVUFBVTtBQUM1QixRQUFRLE9BQU8sQ0FBQyxVQUFVLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ2hGLElBQUksQ0FBQyxDQUFDO0FBQ047QUFDQSxJQUFJLE1BQU0sWUFBWSxHQUFHLENBQUMsV0FBVyxFQUFFLFVBQVUsRUFBRSxVQUFVLEtBQUs7QUFDbEUsTUFBTSxJQUFJLENBQUMsZUFBZSxJQUFJLE9BQU8sQ0FBQyxVQUFVO0FBQ2hELFFBQVEsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM3RCxNQUFNLE1BQU0scUJBQXFCLEdBQUc7QUFDcEMsUUFBUSxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVEsSUFBSSxPQUFPLENBQUMsV0FBVztBQUN6RCxRQUFRLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUTtBQUNsQyxRQUFRLEtBQUssRUFBRSxPQUFPLENBQUMsS0FBSztBQUM1QixRQUFRLDBCQUEwQixFQUFFLE9BQU8sQ0FBQywwQkFBMEI7QUFDdEUsT0FBTyxDQUFDO0FBQ1IsTUFBTSxPQUFPLElBQUksQ0FBQyxlQUFlO0FBQ2pDLFFBQVEsQ0FBQyxXQUFXLENBQUM7QUFDckIsUUFBUSxDQUFDLHFCQUFxQixDQUFDO0FBQy9CLFFBQVEsVUFBVTtBQUNsQixRQUFRLFVBQVUsSUFBSSxhQUFhO0FBQ25DLFFBQVEsYUFBYTtBQUNyQixRQUFRLGVBQWU7QUFDdkIsUUFBUSxlQUFlO0FBQ3ZCLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTTtBQUNuQixRQUFRLElBQUksQ0FBQyxlQUFlLElBQUksT0FBTyxDQUFDLFVBQVU7QUFDbEQsVUFBVSxPQUFPLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25FLFFBQVEseUJBQXlCLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQzFELE1BQU0sQ0FBQyxDQUFDO0FBQ1IsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksTUFBTSxRQUFRLEdBQUcsZUFBZTtBQUNwQyxRQUFRLElBQUksQ0FBQywrQ0FBK0MsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ3ZFLFFBQVEsSUFBSSxDQUFDLDRDQUE0QyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyRSxJQUFJLE9BQU8sUUFBUTtBQUNuQixNQUFNLElBQUk7QUFDVixNQUFNLE1BQU07QUFDWixNQUFNLE9BQU8sQ0FBQywwQkFBMEI7QUFDeEMsTUFBTSxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUM3QixNQUFNLFVBQVU7QUFDaEIsTUFBTSxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztBQUM5QixNQUFNLE9BQU8sQ0FBQyxPQUFPO0FBQ3JCLEtBQUs7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw0Q0FBNEM7QUFDOUMsSUFBSSxJQUFJO0FBQ1IsSUFBSSxNQUFNO0FBQ1YsSUFBSSwwQkFBMEI7QUFDOUIsSUFBSSxTQUFTO0FBQ2IsSUFBSSxVQUFVO0FBQ2QsSUFBSSxXQUFXO0FBQ2YsSUFBSSxPQUFPO0FBQ1gsSUFBSTtBQUNKLElBQUksTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLCtCQUErQjtBQUNoRSxNQUFNLElBQUk7QUFDVixNQUFNLDBCQUEwQjtBQUNoQyxNQUFNLFVBQVU7QUFDaEIsTUFBTSxLQUFLO0FBQ1gsTUFBTSxTQUFTO0FBQ2YsTUFBTSxNQUFNO0FBQ1osTUFBTSxPQUFPO0FBQ2IsS0FBSyxDQUFDO0FBQ047QUFDQTtBQUNBLElBQUksTUFBTSx1QkFBdUIsR0FBRyx1Q0FBdUM7QUFDM0UsTUFBTSxlQUFlLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLFNBQVM7QUFDckYsS0FBSyxDQUFDO0FBQ047QUFDQSxJQUFJLGVBQWU7QUFDbkIsT0FBTyxJQUFJLENBQUMsQ0FBQyxXQUFXLEtBQUs7QUFDN0IsUUFBUSxJQUFJLENBQUMsK0JBQStCLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDOUQsUUFBUSxPQUFPLFNBQVMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQzdELFVBQVUsdUJBQXVCLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDNUMsVUFBVSxJQUFJLENBQUMsc0NBQXNDLEVBQUUsQ0FBQztBQUN4RCxRQUFRLENBQUMsQ0FBQztBQUNWLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUs7QUFDcEIsUUFBUSxJQUFJLFdBQVcsRUFBRSxXQUFXLEVBQUUsQ0FBQztBQUN2QyxRQUFRLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxDQUFDO0FBQ3RELFFBQVEsSUFBSSxDQUFDLCtCQUErQixDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzlELFFBQVEsTUFBTSxLQUFLO0FBQ25CLFVBQVUsQ0FBQyxDQUFDLFlBQVksbUJBQW1CLElBQUksQ0FBQyxDQUFDLElBQUksS0FBSyxZQUFZO0FBQ3RFLGNBQWMsQ0FBQztBQUNmLGNBQWMsSUFBSSxLQUFLLENBQUMsQ0FBQyw2Q0FBNkMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEYsUUFBUSx1QkFBdUIsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNUO0FBQ0EsSUFBSSxJQUFJLENBQUMsNEJBQTRCLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDdkQsSUFBSSxJQUFJLENBQUMsb0NBQW9DLENBQUMsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDL0U7QUFDQSxJQUFJLE9BQU8sdUJBQXVCLENBQUMsT0FBTztBQUMxQyxFQUFFLENBQUM7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrQ0FBK0M7QUFDakQsSUFBSSxJQUFJO0FBQ1IsSUFBSSxNQUFNO0FBQ1YsSUFBSSwwQkFBMEI7QUFDOUIsSUFBSSxTQUFTO0FBQ2IsSUFBSSxrQkFBa0I7QUFDdEIsSUFBSSxtQkFBbUI7QUFDdkIsSUFBSSxPQUFPO0FBQ1gsSUFBSTtBQUNKLElBQUksSUFBSSxrQ0FBa0MsR0FBRyxDQUFDLENBQUM7QUFDL0MsSUFBSSxJQUFJLGdDQUFnQyxHQUFHLEtBQUssQ0FBQztBQUNqRCxJQUFJLE1BQU0sa0NBQWtDLEdBQUcsRUFBRSxDQUFDO0FBQ2xEO0FBQ0EsSUFBSSxNQUFNLG9DQUFvQyxHQUFHLE1BQU07QUFDdkQsTUFBTTtBQUNOLFFBQVEsa0NBQWtDLENBQUMsTUFBTSxHQUFHLENBQUM7QUFDckQsUUFBUSxDQUFDLGdDQUFnQztBQUN6QyxRQUFRLENBQUMsSUFBSSxDQUFDLHFCQUFxQixFQUFFO0FBQ3JDLFFBQVE7QUFDUixRQUFRLGdDQUFnQyxHQUFHLElBQUksQ0FBQztBQUNoRCxRQUFRLE1BQU0sV0FBVyxHQUFHLGtDQUFrQyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ3ZFLFFBQVEsU0FBUztBQUNqQixVQUFVLFdBQVcsQ0FBQyxXQUFXO0FBQ2pDLFVBQVUsV0FBVyxDQUFDLFVBQVU7QUFDaEMsVUFBVSxXQUFXLENBQUMsVUFBVTtBQUNoQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDckIsVUFBVSxnQ0FBZ0MsR0FBRyxLQUFLLENBQUM7QUFDbkQsVUFBVSxJQUFJLFdBQVcsQ0FBQyxVQUFVLEVBQUU7QUFDdEMsWUFBWSx1Q0FBdUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUM5RCxVQUFVLENBQUMsTUFBTSxJQUFJLFdBQVcsQ0FBQyxVQUFVLEVBQUU7QUFDN0MsWUFBWSxpQ0FBaUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUN4RCxZQUFZLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxDQUFDO0FBQzFELFVBQVUsQ0FBQztBQUNYLFVBQVUsSUFBSSxrQ0FBa0MsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzdELFlBQVksY0FBYyxDQUFDLE1BQU0sb0NBQW9DLEVBQUUsQ0FBQyxDQUFDO0FBQ3pFLFVBQVUsQ0FBQztBQUNYLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDWCxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxNQUFNLGdDQUFnQyxHQUFHLENBQUMsV0FBVyxFQUFFLFVBQVUsS0FBSztBQUMxRSxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsRUFBRTtBQUN6QyxRQUFRO0FBQ1IsVUFBVSxVQUFVO0FBQ3BCLFVBQVUsa0NBQWtDLENBQUMsTUFBTSxLQUFLLENBQUM7QUFDekQsVUFBVSxXQUFXLENBQUMsYUFBYSxFQUFFO0FBQ3JDLFlBQVksa0NBQWtDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLGFBQWEsRUFBRTtBQUM3RSxVQUFVO0FBQ1YsVUFBVSxrQ0FBa0MsQ0FBQyxJQUFJLENBQUM7QUFDbEQsWUFBWSxXQUFXO0FBQ3ZCLFlBQVksVUFBVSxFQUFFLGtDQUFrQyxLQUFLLENBQUM7QUFDaEUsWUFBWSxVQUFVO0FBQ3RCLFdBQVcsQ0FBQyxDQUFDO0FBQ2IsVUFBVSxrQ0FBa0MsRUFBRSxDQUFDO0FBQy9DLFVBQVUsb0NBQW9DLEVBQUUsQ0FBQztBQUNqRCxRQUFRLENBQUM7QUFDVCxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxNQUFNLHlCQUF5QixHQUFHLElBQUksQ0FBQywrQkFBK0I7QUFDMUUsTUFBTSxJQUFJO0FBQ1YsTUFBTSwwQkFBMEI7QUFDaEMsTUFBTSxrQkFBa0I7QUFDeEIsTUFBTSxJQUFJO0FBQ1YsTUFBTSxnQ0FBZ0M7QUFDdEMsTUFBTSxNQUFNO0FBQ1osTUFBTSxPQUFPO0FBQ2IsS0FBSyxDQUFDO0FBQ047QUFDQTtBQUNBLElBQUksTUFBTSxZQUFZLEdBQUcseUJBQXlCLENBQUMsS0FBSztBQUN4RCxRQUFRLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMseUJBQXlCLENBQUM7QUFDdkUsUUFBUSxTQUFTLENBQUM7QUFDbEI7QUFDQSxJQUFJLE1BQU0sdUNBQXVDO0FBQ2pELE1BQU0sdUNBQXVDLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDNUQ7QUFDQSxJQUFJLE1BQU0saUNBQWlDO0FBQzNDLE1BQU0sdUNBQXVDLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDNUQ7QUFDQSxJQUFJLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0FBQ2pFLElBQUksSUFBSSxDQUFDLG9DQUFvQztBQUM3QyxNQUFNLGlDQUFpQyxDQUFDLE9BQU87QUFDL0MsS0FBSyxDQUFDO0FBQ047QUFDQSxJQUFJLHlCQUF5QjtBQUM3QixPQUFPLElBQUksQ0FBQyxNQUFNO0FBQ2xCLFFBQVEsSUFBSSxDQUFDLCtCQUErQixDQUFDLHlCQUF5QixDQUFDLENBQUM7QUFDeEUsTUFBTSxDQUFDLENBQUM7QUFDUixPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSztBQUNwQixRQUFRQSxRQUFNLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFFBQVEsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLENBQUM7QUFDdEQsUUFBUSxJQUFJLENBQUMsK0JBQStCLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUN4RSxRQUFRLE1BQU0sS0FBSztBQUNuQixVQUFVLENBQUMsQ0FBQyxZQUFZLG1CQUFtQixJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssWUFBWTtBQUN0RSxjQUFjLENBQUM7QUFDZixjQUFjLElBQUksS0FBSztBQUN2QixnQkFBZ0IsQ0FBQyw0REFBNEQsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDMUYsZUFBZSxDQUFDO0FBQ2hCLFFBQVEsdUNBQXVDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzlELFFBQVEsSUFBSSxtQkFBbUIsRUFBRSxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM1RCxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ1Q7QUFDQSxJQUFJLE9BQU8sdUNBQXVDLENBQUMsT0FBTztBQUMxRCxFQUFFLENBQUM7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsY0FBYyxDQUFDLFlBQVksRUFBRSxhQUFhLEdBQUcsSUFBSSxFQUFFLFVBQVUsR0FBRyxTQUFTLEVBQUU7QUFDN0UsSUFBSSxJQUFJLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxFQUFFO0FBQ3JDLE1BQU0sTUFBTSxJQUFJLEtBQUs7QUFDckIsUUFBUSw2RUFBNkU7QUFDckYsT0FBTztBQUNQLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxFQUFFO0FBQ3RDLE1BQU0sTUFBTSxJQUFJLEtBQUssQ0FBQyxtREFBbUQsQ0FBQztBQUMxRSxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQztBQUMxQyxJQUFJLE1BQU0sZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUMvQjtBQUNBLElBQUksSUFBSSxlQUFlLENBQUM7QUFDeEIsSUFBSSxJQUFJLGFBQWEsRUFBRTtBQUN2QixNQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDM0MsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUN0RSxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksTUFBTSxjQUFjLEdBQUcsQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxZQUFZLEtBQUs7QUFDL0UsTUFBTSxlQUFlLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDO0FBQzNDLE1BQU0sSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLE1BQU0sS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUU7QUFDeEMsUUFBUSxZQUFZLElBQUksZUFBZSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNoRCxNQUFNLFlBQVksR0FBRyxZQUFZLEdBQUcsU0FBUyxDQUFDO0FBQzlDLE1BQU0sWUFBWSxHQUFHLENBQUMsRUFBRSxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25ELE1BQU0sSUFBSSxhQUFhLEVBQUU7QUFDekIsUUFBUSxJQUFJLFlBQVksS0FBSyxZQUFZLENBQUMsV0FBVyxFQUFFO0FBQ3ZELFVBQVUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUI7QUFDL0MsWUFBWSxlQUFlO0FBQzNCLFlBQVksWUFBWSxJQUFJLEdBQUc7QUFDL0IsZ0JBQWdCLENBQUMsa0JBQWtCLENBQUM7QUFDcEMsZ0JBQWdCLENBQUMsYUFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzlDLFdBQVcsQ0FBQztBQUNaLFFBQVEsQ0FBQztBQUNULE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxVQUFVLEVBQUUsVUFBVSxDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDM0UsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksTUFBTSxlQUFlLEdBQUcsSUFBSSxlQUFlLEVBQUUsQ0FBQztBQUNsRCxJQUFJLE1BQU0sTUFBTSxHQUFHLGVBQWUsQ0FBQyxNQUFNLENBQUM7QUFDMUMsSUFBSSxJQUFJLENBQUMsK0JBQStCLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDMUQ7QUFDQSxJQUFJLE1BQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO0FBQ2hDLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDbEQsTUFBTSxNQUFNLE9BQU8sR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEMsTUFBTSxNQUFNLE1BQU07QUFDbEIsUUFBUSxPQUFPLENBQUMsTUFBTSxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLElBQUk7QUFDL0QsWUFBWSxPQUFPLENBQUMsTUFBTTtBQUMxQixZQUFZLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM5QyxNQUFNLE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQywrQkFBK0I7QUFDbEUsUUFBUSxPQUFPLENBQUMsSUFBSTtBQUNwQixRQUFRLE9BQU8sQ0FBQywwQkFBMEI7QUFDMUMsUUFBUSxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7QUFDcEMsUUFBUSxLQUFLO0FBQ2IsUUFBUSxTQUFTO0FBQ2pCLFFBQVEsTUFBTTtBQUNkLFFBQVEsT0FBTyxDQUFDLE9BQU87QUFDdkIsUUFBUSxNQUFNO0FBQ2QsT0FBTyxDQUFDO0FBQ1IsTUFBTSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDN0MsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE1BQU0sdUJBQXVCLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQztBQUNqRSxPQUFPLElBQUksQ0FBQyxDQUFDLFlBQVksS0FBSztBQUM5QixRQUFRLElBQUksYUFBYSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsSUFBSSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3JFLFFBQVEsT0FBTyxJQUFJLENBQUMsZUFBZTtBQUNuQyxVQUFVLFlBQVk7QUFDdEIsVUFBVSxZQUFZO0FBQ3RCLFVBQVUsSUFBSTtBQUNkLFVBQVUsYUFBYTtBQUN2QixVQUFVLGFBQWE7QUFDdkIsVUFBVSxLQUFLO0FBQ2YsVUFBVSxLQUFLO0FBQ2YsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3JCLFVBQVUsSUFBSSxVQUFVLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzNFLFVBQVUsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLENBQUM7QUFDeEQsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNYLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUs7QUFDcEIsUUFBUSxJQUFJLGFBQWEsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUMzRSxRQUFRLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxDQUFDO0FBQ3RELFFBQVEsTUFBTSxLQUFLO0FBQ25CLFVBQVUsQ0FBQyxDQUFDLElBQUksS0FBSyxZQUFZO0FBQ2pDLGNBQWMsQ0FBQztBQUNmLGNBQWMsSUFBSSxLQUFLO0FBQ3ZCLGdCQUFnQixDQUFDLGtFQUFrRSxDQUFDO0FBQ3BGLGVBQWUsQ0FBQztBQUNoQixRQUFRLE1BQU0sS0FBSyxDQUFDO0FBQ3BCLE1BQU0sQ0FBQyxDQUFDO0FBQ1IsT0FBTyxPQUFPLENBQUMsTUFBTTtBQUNyQixRQUFRLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNqRSxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ1Q7QUFDQSxJQUFJLElBQUksQ0FBQyxvQ0FBb0MsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ3ZFLElBQUksT0FBTyx1QkFBdUI7QUFDbEMsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrQkFBK0I7QUFDakMsSUFBSSxJQUFJO0FBQ1IsSUFBSSwwQkFBMEIsR0FBRyxDQUFDO0FBQ2xDLElBQUksVUFBVSxHQUFHLFNBQVM7QUFDMUIsSUFBSSxnQkFBZ0IsR0FBRyxLQUFLO0FBQzVCLElBQUksY0FBYyxHQUFHLFNBQVM7QUFDOUIsSUFBSSxNQUFNO0FBQ1YsSUFBSSxPQUFPO0FBQ1gsSUFBSTtBQUNKLElBQUksTUFBTSxpQkFBaUIsR0FBRyxnQkFBZ0IsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDO0FBQ2hGLElBQUksSUFBSTtBQUNSLE1BQU0sSUFBSSxNQUFNLEtBQUssV0FBVyxDQUFDLEdBQUcsRUFBRTtBQUN0QyxRQUFRLE9BQU8sU0FBUyxDQUFDLFdBQVc7QUFDcEMsVUFBVSxJQUFJO0FBQ2QsVUFBVSxVQUFVO0FBQ3BCLFVBQVUsZ0JBQWdCO0FBQzFCLFVBQVUsY0FBYztBQUN4QixVQUFVLDBCQUEwQjtBQUNwQyxVQUFVLElBQUksQ0FBQyx3QkFBd0I7QUFDdkMsVUFBVSxpQkFBaUI7QUFDM0IsVUFBVSxJQUFJLENBQUMsd0JBQXdCO0FBQ3ZDLFVBQVUsT0FBTztBQUNqQixTQUFTO0FBQ1QsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDaEIsTUFBTSxJQUFJLENBQUMsWUFBWSxlQUFlLEVBQUU7QUFDeEMsUUFBUSxNQUFNLElBQUksS0FBSztBQUN2QixVQUFVLDJEQUEyRDtBQUNyRSxTQUFTO0FBQ1QsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLE1BQU0sQ0FBQztBQUNmLE1BQU0sQ0FBQztBQUNQLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxNQUFNLElBQUksS0FBSztBQUNuQixNQUFNLENBQUMsc0VBQXNFLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDckYsS0FBSztBQUNMLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxPQUFPLHVCQUF1QixDQUFDLE1BQU0sRUFBRTtBQUN6QyxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsQ0FBQyxHQUFHO0FBQ3JDLEVBQUUsQ0FBQztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGVBQWUsR0FBRztBQUNwQixJQUFJLFlBQVk7QUFDaEIsSUFBSSxrQkFBa0IsR0FBRyxFQUFFO0FBQzNCLElBQUksVUFBVSxHQUFHLElBQUk7QUFDckIsSUFBSSxhQUFhLEdBQUcsSUFBSTtBQUN4QixJQUFJLDhCQUE4QixHQUFHLElBQUk7QUFDekMsSUFBSSxlQUFlLEdBQUcsS0FBSztBQUMzQixJQUFJLDJCQUEyQixHQUFHLEtBQUs7QUFDdkMsSUFBSSxxQkFBcUIsR0FBRyxJQUFJO0FBQ2hDLE9BQU87QUFDUCxJQUFJLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsT0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFO0FBQzlEO0FBQ0EsSUFBSSxJQUFJLHFCQUFxQixHQUFHLElBQUksQ0FBQztBQUNyQyxJQUFJLE1BQU0seUJBQXlCLEdBQUcsTUFBTTtBQUM1QyxNQUFNLElBQUkscUJBQXFCLEtBQUssSUFBSSxFQUFFO0FBQzFDLFFBQVEsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMscUJBQXFCLENBQUMsQ0FBQztBQUM5RCxRQUFRLHFCQUFxQixHQUFHLElBQUksQ0FBQztBQUNyQyxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0FBQ2xDLElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sS0FBSztBQUNwQyxNQUFNLElBQUksYUFBYSxFQUFFO0FBQ3pCLFFBQVEscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPO0FBQzNELFVBQVUsc0JBQXNCO0FBQ2hDLFNBQVMsQ0FBQztBQUNWLE1BQU0sQ0FBQztBQUNQLE1BQU0sY0FBYyxDQUFDLE1BQU07QUFDM0IsUUFBUSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxFQUFFO0FBQzFDLFVBQVUsT0FBTyxFQUFFLENBQUM7QUFDcEIsUUFBUSxDQUFDLE1BQU07QUFDZixVQUFVLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxxQkFBcUI7QUFDekQsWUFBWSxZQUFZO0FBQ3hCLFlBQVksa0JBQWtCO0FBQzlCLFlBQVksVUFBVTtBQUN0QixZQUFZLDhCQUE4QjtBQUMxQyxZQUFZLGVBQWU7QUFDM0IsWUFBWSxxQkFBcUI7QUFDakMsV0FBVyxDQUFDO0FBQ1o7QUFDQSxVQUFVLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUNsRSxVQUFVO0FBQ1YsWUFBWSxJQUFJLENBQUMsVUFBVTtBQUMzQixZQUFZLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxLQUFLLGFBQWE7QUFDM0Q7QUFDQSxZQUFZLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0FBQ3JDO0FBQ0E7QUFDQSxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7QUFDeEMsWUFBWSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztBQUN0QyxjQUFjLE9BQU8sRUFBRSxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU07QUFDbEQsY0FBYyxZQUFZLEVBQUUsWUFBWSxDQUFDLFlBQVksQ0FBQyxNQUFNO0FBQzVELGNBQWMsS0FBSyxFQUFFO0FBQ3JCLGdCQUFnQixJQUFJLEVBQUUsWUFBWSxDQUFDLElBQUk7QUFDdkMsZ0JBQWdCLEVBQUUsRUFBRSxZQUFZLENBQUMsRUFBRTtBQUNuQyxnQkFBZ0IsS0FBSyxFQUFFLFlBQVksQ0FBQyxLQUFLO0FBQ3pDLGVBQWU7QUFDZixhQUFhLENBQUMsQ0FBQztBQUNmLFVBQVUsQ0FBQztBQUNYLFVBQVUsTUFBTSxzQkFBc0I7QUFDdEMsWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksYUFBYSxHQUFHLENBQUM7QUFDakQsZ0JBQWdCLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztBQUNwRCxnQkFBZ0IsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2xDLFVBQVUsc0JBQXNCLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDNUMsWUFBWSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLE1BQU07QUFDcEQsWUFBWSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLEtBQUs7QUFDaEUsY0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUNwRCxnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztBQUM3QyxnQkFBZ0IseUJBQXlCLEVBQUUsQ0FBQztBQUM1QyxnQkFBZ0IsT0FBTyxFQUFFLENBQUM7QUFDMUIsY0FBYyxDQUFDLE1BQU07QUFDckIsZ0JBQWdCLElBQUksMkJBQTJCLEVBQUU7QUFDakQsa0JBQWtCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7QUFDL0MsZ0JBQWdCLENBQUMsTUFBTTtBQUN2QixrQkFBa0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ25ELG9CQUFvQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQ2pELGtCQUFrQixDQUFDLENBQUMsQ0FBQztBQUNyQixnQkFBZ0IsQ0FBQztBQUNqQixnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ2pELGtCQUFrQix5QkFBeUIsRUFBRSxDQUFDO0FBQzlDLGtCQUFrQixPQUFPLEVBQUUsQ0FBQztBQUM1QixnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7QUFDbkIsY0FBYyxDQUFDO0FBQ2YsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUNmLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDYixRQUFRLENBQUM7QUFDVCxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNmLElBQUksQ0FBQyxDQUFDO0FBQ04sRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxxQkFBcUIsR0FBRyxDQUFDLFlBQVk7QUFDdkMsSUFBSSxJQUFJLHFCQUFxQixDQUFDO0FBQzlCO0FBQ0EsSUFBSSxPQUFPO0FBQ1gsTUFBTSxZQUFZO0FBQ2xCLE1BQU0sa0JBQWtCO0FBQ3hCLE1BQU0sVUFBVSxHQUFHLElBQUk7QUFDdkIsTUFBTSw4QkFBOEIsR0FBRyxLQUFLO0FBQzVDLE1BQU0sZUFBZSxHQUFHLEtBQUs7QUFDN0IsTUFBTSxxQkFBcUIsR0FBRyxJQUFJO0FBQ2xDLE1BQU07QUFDTixNQUFNLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTTtBQUM5QyxNQUFNLElBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUMvQixNQUFNLElBQUkscUJBQXFCLEdBQUcsRUFBRSxDQUFDO0FBQ3JDLE1BQU0sSUFBSSxDQUFDLGVBQWUsRUFBRTtBQUM1QixRQUFRLGVBQWU7QUFDdkIsVUFBVSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEtBQUssS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUN4RSxRQUFRLHFCQUFxQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWTtBQUMzRCxZQUFZLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksS0FBSyxZQUFZLENBQUM7QUFDM0UsWUFBWSxFQUFFLENBQUM7QUFDZixNQUFNLENBQUM7QUFDUCxNQUFNLGVBQWUsQ0FBQyxJQUFJLENBQUMsR0FBRyxZQUFZLENBQUMsQ0FBQztBQUM1QyxNQUFNLHFCQUFxQixDQUFDLElBQUksQ0FBQyxHQUFHLGtCQUFrQixDQUFDLENBQUM7QUFDeEQsTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ25FLE1BQU0sTUFBTSx3QkFBd0IsR0FBRyxDQUFDLFFBQVEsS0FBSztBQUNyRCxRQUFRLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUUsTUFBTTtBQUNoRCxRQUFRLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDMUQsUUFBUTtBQUNSLFVBQVUsOEJBQThCO0FBQ3hDLFVBQVUsVUFBVSxJQUFJLGtEQUFrRDtBQUMxRSxVQUFVO0FBQ1YsVUFBVSxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDbkQsWUFBWSxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDekQsWUFBWSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU87QUFDL0QsY0FBYywrQkFBK0I7QUFDN0MsYUFBYSxDQUFDO0FBQ2QsVUFBVSxDQUFDO0FBQ1gsUUFBUSxDQUFDO0FBQ1QsTUFBTSxDQUFDLENBQUM7QUFDUixNQUFNLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxRQUFRLEtBQUs7QUFDN0MsUUFBUSxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLE1BQU07QUFDaEQsUUFBUSxJQUFJLFFBQVEsSUFBSSxxQkFBcUIsRUFBRTtBQUMvQyxVQUFVLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDaEUsVUFBVSxxQkFBcUIsR0FBRyxJQUFJLENBQUM7QUFDdkMsUUFBUSxDQUFDO0FBQ1QsTUFBTSxDQUFDLENBQUM7QUFDUixNQUFNLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSztBQUMvQyxRQUFRLGVBQWU7QUFDdkIsUUFBUSxxQkFBcUI7QUFDN0IsUUFBUSxJQUFJO0FBQ1osUUFBUSxVQUFVO0FBQ2xCLFFBQVEsd0JBQXdCO0FBQ2hDLFFBQVEsZ0JBQWdCO0FBQ3hCLFFBQVEscUJBQXFCO0FBQzdCLE9BQU8sQ0FBQztBQUNSLE1BQU0sSUFBSSxVQUFVLElBQUksSUFBSSxDQUFDLHlCQUF5QjtBQUN0RCxRQUFRLElBQUksQ0FBQyxTQUFTLENBQUMseUJBQXlCLEVBQUUsQ0FBQztBQUNuRCxNQUFNLE9BQU8sWUFBWTtBQUN6QixJQUFJLENBQUM7QUFDTCxFQUFFLENBQUMsR0FBRztBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsTUFBTSxlQUFlLENBQUMsU0FBUyxFQUFFO0FBQ25DLElBQUksSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUUsRUFBRSxNQUFNO0FBQzVDLElBQUksTUFBTSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsZ0JBQWdCO0FBQ3BELFFBQVEsVUFBVTtBQUNsQixRQUFRLFlBQVksQ0FBQztBQUNyQixJQUFJLE1BQU0sVUFBVSxHQUFHLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUNqRCxJQUFJLE1BQU0sYUFBYSxHQUFHLFNBQVMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0FBQ3ZELElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLGdCQUFnQjtBQUM1QyxNQUFNLGFBQWE7QUFDbkIsTUFBTSxJQUFJLENBQUMsc0JBQXNCO0FBQ2pDLE1BQU0sSUFBSSxDQUFDLGdCQUFnQjtBQUMzQixNQUFNLElBQUksQ0FBQyxnQkFBZ0I7QUFDM0IsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVc7QUFDaEMsTUFBTSxJQUFJLENBQUMsNkJBQTZCO0FBQ3hDLEtBQUssQ0FBQztBQUNOLElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sS0FBSztBQUNwQyxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxLQUFLO0FBQ3pDLFFBQVEsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUM3QixVQUFVLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQ25DLFVBQTZCLEtBQUssQ0FBQyxJQUFJO0FBQ3ZDLFlBQVksRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFO0FBQy9DLFlBQVksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUM7QUFDdkIsWUFBWTtBQUNaLFVBQVUsSUFBSSxJQUFJLENBQUMsc0JBQXNCLEVBQUU7QUFDM0MsWUFBWSxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFtQjtBQUM5QyxjQUFjLElBQUksQ0FBQyx1QkFBdUI7QUFDMUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUNyQyxhQUFhLENBQUM7QUFDZCxVQUFVLENBQUMsTUFBTTtBQUNqQixZQUFZLE1BQU0sYUFBYSxHQUFHLElBQUksV0FBVztBQUNqRCxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU07QUFDekMsY0FBYyxDQUFDO0FBQ2YsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUNyQyxhQUFhLENBQUM7QUFDZCxZQUFZLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CO0FBQzlDLGNBQWMsYUFBYTtBQUMzQixjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCO0FBQ3JDLGFBQWEsQ0FBQztBQUNkLFVBQVUsQ0FBQztBQUNYO0FBQ0EsVUFBVSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztBQUN4RDtBQUNBLFVBQVUsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztBQUM5QyxVQUFVLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0FBQ3JDLFVBQVUsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUMxQyxVQUFVLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQ3RDLFVBQVUsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNoRCxZQUFZLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUs7QUFDcEQsY0FBYyxJQUFJLEVBQUUsQ0FBQztBQUNyQixZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ2YsWUFBWSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUM3QyxVQUFVLENBQUM7QUFDWCxRQUFRLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ3hDLFVBQVUsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFDbkMsUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFO0FBQ25ELFVBQVUsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxJQUFJO0FBQzVDLFlBQVlBLFFBQU0sQ0FBQyxJQUFJLENBQUMseUNBQXlDLENBQUMsQ0FBQztBQUNuRSxVQUFVLElBQUksSUFBSSxDQUFDLHNCQUFzQixFQUFFO0FBQzNDLFlBQVksSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksV0FBVztBQUMxRCxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CO0FBQ3hDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUI7QUFDeEMsY0FBYyxhQUFhO0FBQzNCLGFBQWEsQ0FBQztBQUNkLFlBQVksSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksV0FBVztBQUMxRCxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CO0FBQ3hDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxtQkFBbUI7QUFDeEMsY0FBYyxhQUFhO0FBQzNCLGFBQWEsQ0FBQztBQUNkLFlBQVksSUFBSSxDQUFDLDhCQUE4QixHQUFHLElBQUksa0JBQWtCO0FBQ3hFLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQywwQkFBMEI7QUFDL0MsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLDBCQUEwQjtBQUMvQyxjQUFjLGFBQWE7QUFDM0IsYUFBYSxDQUFDO0FBQ2QsWUFBWSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxZQUFZO0FBQ3hELGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0I7QUFDckMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQjtBQUNyQyxjQUFjWixXQUFTLENBQUMsU0FBUyxHQUFHLEVBQUU7QUFDdEMsYUFBYSxDQUFDO0FBQ2QsVUFBVSxDQUFDLE1BQU07QUFDakIsWUFBWSxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDMUUsWUFBWSxJQUFJLENBQUMsOEJBQThCLEdBQUcsSUFBSSxrQkFBa0I7QUFDeEUsY0FBYyxhQUFhO0FBQzNCLGFBQWEsQ0FBQztBQUNkLFlBQVksSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksWUFBWTtBQUN4RCxjQUFjQSxXQUFTLENBQUMsU0FBUyxHQUFHLEVBQUU7QUFDdEMsYUFBYSxDQUFDO0FBQ2QsVUFBVSxDQUFDO0FBQ1gsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRTtBQUM3QyxZQUFZLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEQsVUFBVSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7QUFDeEQ7QUFDQSxVQUFVLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxRQUFRLENBQUMsSUFBSSxFQUFFO0FBQzlDLFlBQVlZLFFBQU0sQ0FBQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUNyRCxZQUFZLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQzVFLFlBQVksTUFBTSxzQkFBc0IsR0FBRyxpQkFBaUIsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO0FBQzlFLFlBQVksTUFBTSx3QkFBd0IsR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDO0FBQ2pGLFlBQVlBLFFBQU0sQ0FBQyxJQUFJO0FBQ3ZCLGNBQWMsNEJBQTRCO0FBQzFDLGdCQUFnQixzQkFBc0IsQ0FBQyxDQUFDO0FBQ3hDLGdCQUFnQixLQUFLO0FBQ3JCLGdCQUFnQixzQkFBc0IsQ0FBQyxDQUFDO0FBQ3hDLGFBQWEsQ0FBQztBQUNkLFlBQVlBLFFBQU0sQ0FBQyxJQUFJO0FBQ3ZCLGNBQWMsK0JBQStCO0FBQzdDLGdCQUFnQix3QkFBd0IsQ0FBQyxDQUFDO0FBQzFDLGdCQUFnQixLQUFLO0FBQ3JCLGdCQUFnQix3QkFBd0IsQ0FBQyxDQUFDO0FBQzFDLGFBQWEsQ0FBQztBQUNkLFVBQVUsQ0FBQztBQUNYO0FBQ0EsVUFBVSxPQUFPLEVBQUUsQ0FBQztBQUNwQixRQUFRLENBQUM7QUFDVCxNQUFNLENBQUMsQ0FBQztBQUNSLElBQUksQ0FBQyxDQUFDO0FBQ04sRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLGlCQUFpQixHQUFHO0FBQ3RCLElBQUksSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDckQsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUMzQixJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQzVCLElBQUksSUFBSSxJQUFJLENBQUMsbUJBQW1CLEVBQUU7QUFDbEMsTUFBTSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztBQUNqQyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUM7QUFDdEMsSUFBSSxDQUFDO0FBQ0wsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUM5QixJQUFJLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQzdCLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsYUFBYSxHQUFHLElBQUksRUFBRTtBQUN4RCxJQUFJLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsYUFBYSxDQUFDLEVBQUUsYUFBYSxDQUFDO0FBQ2pFLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsYUFBYSxHQUFHLElBQUksRUFBRTtBQUMzRCxJQUFJLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLEVBQUU7QUFDckMsTUFBTSxNQUFNLElBQUksS0FBSztBQUNyQixRQUFRLGdGQUFnRjtBQUN4RixPQUFPO0FBQ1AsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUU7QUFDdEMsTUFBTSxNQUFNLElBQUksS0FBSyxDQUFDLHNEQUFzRCxDQUFDO0FBQzdFLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxJQUFJLFdBQVcsQ0FBQztBQUNwQjtBQUNBLElBQUksSUFBSSxDQUFDLHdCQUF3QixHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sS0FBSztBQUNyRSxNQUFNLElBQUksY0FBYyxDQUFDO0FBQ3pCO0FBQ0EsTUFBTSxJQUFJLGFBQWEsRUFBRTtBQUN6QixRQUFRLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDN0MsUUFBUSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ25DLFFBQVEsY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUM7QUFDaEYsTUFBTSxDQUFDO0FBQ1A7QUFDQSxNQUFNLE1BQU0scUJBQXFCLEdBQUcsTUFBTTtBQUMxQyxRQUFRLElBQUksYUFBYSxFQUFFO0FBQzNCLFVBQVUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNyQyxVQUFVLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ3pELFFBQVEsQ0FBQztBQUNULE1BQU0sQ0FBQyxDQUFDO0FBQ1I7QUFDQSxNQUFNLE1BQU0sTUFBTSxHQUFHLENBQUMsS0FBSyxLQUFLO0FBQ2hDLFFBQVEscUJBQXFCLEVBQUUsQ0FBQztBQUNoQyxRQUFRLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxJQUFJLENBQUM7QUFDN0MsUUFBUSxJQUFJLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQzlCLGFBQWEsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzNCLE1BQU0sQ0FBQyxDQUFDO0FBQ1I7QUFDQSxNQUFNLE1BQU0saUJBQWlCLEdBQUcsTUFBTTtBQUN0QyxRQUFRLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLEVBQUU7QUFDMUMsVUFBVSxNQUFNLEVBQUUsQ0FBQztBQUNuQixVQUFVLE9BQU8sSUFBSTtBQUNyQixRQUFRLENBQUM7QUFDVCxRQUFRLE9BQU8sS0FBSztBQUNwQixNQUFNLENBQUMsQ0FBQztBQUNSO0FBQ0EsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDMUQsTUFBTSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDN0IsUUFBUSxJQUFJLGlCQUFpQixFQUFFLEVBQUUsTUFBTTtBQUN2QyxRQUFRLE1BQU0saUJBQWlCLEdBQUcsRUFBRSxDQUFDO0FBQ3JDLFFBQVEsTUFBTSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7QUFDckMsUUFBUSxNQUFNLDZCQUE2QixHQUFHLEVBQUUsQ0FBQztBQUNqRCxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDL0QsVUFBVSxJQUFJLFlBQVksR0FBRyxLQUFLLENBQUM7QUFDbkMsVUFBVSxLQUFLLElBQUksYUFBYSxJQUFJLGVBQWUsRUFBRTtBQUNyRCxZQUFZLElBQUksYUFBYSxLQUFLLENBQUMsRUFBRTtBQUNyQyxjQUFjLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDbEMsY0FBYyxLQUFLO0FBQ25CLFlBQVksQ0FBQztBQUNiLFVBQVUsQ0FBQztBQUNYLFVBQVUsSUFBSSxDQUFDLFlBQVksRUFBRTtBQUM3QixZQUFZLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25ELFlBQVksaUJBQWlCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN0RCxZQUFZLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25FLFlBQVksNkJBQTZCLENBQUMsSUFBSSxDQUFDO0FBQy9DLGNBQWMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQzlDLGNBQWMsVUFBVSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFO0FBQ2xELGNBQWMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFO0FBQ3hDLGFBQWEsQ0FBQyxDQUFDO0FBQ2YsVUFBVSxDQUFDO0FBQ1gsUUFBUSxDQUFDO0FBQ1QsUUFBUSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztBQUNqQyxRQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDakMsUUFBUSxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQyxPQUFPLENBQUM7QUFDdkQsUUFBUSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7QUFDL0IsUUFBUSxJQUFJLENBQUMsZUFBZTtBQUM1QixVQUFVLGlCQUFpQjtBQUMzQixVQUFVLGlCQUFpQjtBQUMzQixVQUFVLElBQUk7QUFDZCxVQUFVLEtBQUs7QUFDZixVQUFVLElBQUk7QUFDZCxTQUFTO0FBQ1QsV0FBVyxJQUFJLENBQUMsTUFBTTtBQUN0QixZQUFZLElBQUksaUJBQWlCLEVBQUUsRUFBRSxNQUFNO0FBQzNDLFlBQVkscUJBQXFCLEVBQUUsQ0FBQztBQUNwQyxZQUFZLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFLLEtBQUs7QUFDNUQsY0FBYyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNqRixjQUFjLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSTtBQUNuQyxnQkFBZ0IsNkJBQTZCLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVTtBQUMvRCxlQUFlLENBQUM7QUFDaEIsY0FBYyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzRSxZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ2YsWUFBWSxJQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixFQUFFLENBQUM7QUFDOUMsWUFBWSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0FBQzFDO0FBQ0EsWUFBWSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQy9DLGNBQWMsSUFBSSxpQkFBaUIsRUFBRSxFQUFFO0FBQ3ZDLGdCQUFnQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQzdDLGdCQUFnQixNQUFNO0FBQ3RCLGNBQWMsQ0FBQztBQUNmLGNBQWMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2xFLGNBQWMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNO0FBQ3JDLGdCQUFnQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQzdDLGdCQUFnQixNQUFNLEVBQUUsQ0FBQztBQUN6QixjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDZixVQUFVLENBQUMsQ0FBQztBQUNaLFdBQVcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLO0FBQ3hCLFlBQVksTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RCLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDYixNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ1QsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNQO0FBQ0EsSUFBSSxPQUFPLElBQUksQ0FBQyx3QkFBd0I7QUFDeEMsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLEtBQUssR0FBRztBQUNWLElBQUksSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO0FBQzdCLE1BQU0sSUFBSSxDQUFDLGNBQWMsR0FBRyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUM3RSxNQUFNLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUM7QUFDeEMsSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLE1BQU0sSUFBSSxLQUFLLENBQUMsdURBQXVELENBQUM7QUFDOUUsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUksR0FBRztBQUNULElBQUksSUFBSSxJQUFJLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtBQUMzRCxNQUFNLG9CQUFvQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUNoRCxNQUFNLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxLQUFLLENBQUM7QUFDekMsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLE1BQU0sT0FBTyxHQUFHO0FBQ2xCLElBQUksSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUUsRUFBRSxPQUFPLElBQUksQ0FBQyxjQUFjO0FBQ2hFO0FBQ0EsSUFBSSxLQUFLLElBQUksVUFBVSxJQUFJLElBQUksQ0FBQyw2QkFBNkIsRUFBRTtBQUMvRCxRQUFRLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUMzQixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksSUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQzFCLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQzFCLE1BQU0sWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDMUMsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQzFCLElBQUksSUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNO0FBQ2xFLE1BQU0sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2xCLE1BQU0sSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7QUFDckMsUUFBUSxJQUFJLENBQUMsb0JBQW9CLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDNUMsUUFBUSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDO0FBQ3pDLE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxJQUFJLENBQUMsbUJBQW1CLEVBQUU7QUFDcEMsUUFBUSxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDM0MsUUFBUSxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ3hDLE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDM0IsTUFBTSxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDMUIsUUFBUSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2pDLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDOUIsTUFBTSxDQUFDO0FBQ1AsTUFBTSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7QUFDM0IsUUFBUSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDMUMsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUMvQixNQUFNLENBQUM7QUFDUCxNQUFNLElBQUksSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUM1QixRQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDbkMsUUFBUSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNoQyxNQUFNLENBQUM7QUFDUCxNQUFNLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtBQUMvQixRQUFRLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN4RCxRQUFRLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO0FBQ25DLE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7QUFDL0IsTUFBTSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztBQUNqQztBQUNBLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUMzQyxNQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdDLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxDQUFDO0FBQ3JDLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqRDtBQUNBO0FBQ0EsTUFBTSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztBQUN6QixNQUFNLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQzdCLE1BQU0sSUFBSSxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztBQUNwQyxNQUFNLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO0FBQy9CLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3pCLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRTtBQUN6QyxVQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDakUsVUFBVSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ2xDLFFBQVEsQ0FBQztBQUNULFFBQVEsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDN0IsTUFBTSxDQUFDO0FBQ1A7QUFDQSxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FFaEM7QUFDUDtBQUNBLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQztBQUMxQyxNQUFNLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUM7QUFDMUMsTUFBTSxJQUFJLENBQUMsOEJBQThCLEdBQUcsSUFBSSxDQUFDO0FBQ2pELE1BQU0sSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQztBQUN2QyxNQUFNLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0FBQzNCLE1BQU0sSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDN0IsTUFBTSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztBQUNqQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ1AsSUFBSSxPQUFPLElBQUksQ0FBQyxjQUFjO0FBQzlCLEVBQUUsQ0FBQztBQUNILEVBQUUsUUFBUSxHQUFHLENBQUM7QUFDZCxFQUFFLGdCQUFnQixHQUFHO0FBQ3JCLElBQUksSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO0FBQzdCLFFBQVEsSUFBSSxDQUFDLGNBQWMsR0FBRyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxDQUFDO0FBQ0wsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDdEI7QUFDQSxJQUFJLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3pDLE1BQU0sTUFBTTtBQUNaLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztBQUN4QjtBQUNBLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ2xCLElBQUksSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLEVBQUU7QUFDN0I7QUFDQTtBQUNBLE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3BCLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDckMsSUFBSSxDQUFDLE1BQU07QUFDWCxNQUFNLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxDQUFDLENBQUM7QUFDdkMsSUFBSSxDQUFDO0FBQ0wsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztBQUNqQyxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsb0JBQW9CLEdBQUc7QUFDekIsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztBQUNoQyxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsWUFBWSxHQUFHLENBQUMsWUFBWTtBQUM5QixJQUFJLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN4QixJQUFJLE1BQU0sa0JBQWtCLEdBQUcsSUFBSVksYUFBTyxFQUFFLENBQUM7QUFDN0MsSUFBSSxNQUFNLHFCQUFxQixHQUFHLElBQUlFLGdCQUFVLEVBQUUsQ0FBQztBQUNuRCxJQUFJLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQztBQUNqQztBQUNBLElBQUksT0FBTyxZQUFZO0FBQ3ZCLE1BQU07QUFDTixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDekIsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0I7QUFDOUIsUUFBUSxJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDcEM7QUFDQSxRQUFRLE9BQU8sS0FBSztBQUNwQjtBQUNBLE1BQU0sSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDO0FBQy9CLE1BQU0sSUFBSSxhQUFhLEdBQUcsS0FBSyxDQUFDO0FBQ2hDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3ZCLFFBQVEsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDeEMsUUFBUSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQztBQUMxQyxRQUFRLGFBQWE7QUFDckIsVUFBVSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBYTtBQUMvRCxVQUFVLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhO0FBQy9ELFVBQVUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWE7QUFDL0QsVUFBVSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcscUJBQXFCLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBYTtBQUNsRSxVQUFVLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxhQUFhO0FBQ2xFLFVBQVUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWE7QUFDbEUsVUFBVSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcscUJBQXFCLENBQUMsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDO0FBQ25FLE1BQU0sQ0FBQztBQUNQO0FBQ0EsTUFBTSxZQUFZO0FBQ2xCLFFBQVEsSUFBSSxDQUFDLFVBQVUsS0FBSyxVQUFVLENBQUMsS0FBSztBQUM1QyxTQUFTLFdBQVcsS0FBSyxDQUFDO0FBQzFCLFVBQVUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxxQkFBcUI7QUFDOUMsVUFBVSxhQUFhO0FBQ3ZCLFVBQVUsSUFBSSxDQUFDLFVBQVUsS0FBSyxVQUFVLENBQUMsTUFBTTtBQUMvQyxVQUFVLElBQUksQ0FBQyxXQUFXLEtBQUssSUFBSTtBQUNuQyxVQUFVLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNoQztBQUNBLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO0FBQ3ZCLFFBQVEsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDdEQsUUFBUSxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMzRCxNQUFNLENBQUM7QUFDUDtBQUNBLE1BQU0sV0FBVyxFQUFFLENBQUM7QUFDcEIsTUFBTSxPQUFPLFlBQVk7QUFDekIsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDLEdBQUc7QUFDTjtBQUNBLEVBQUUsTUFBTSxHQUFHLENBQUMsWUFBWTtBQUN4QixJQUFJLE9BQU8sWUFBWTtBQUN2QixNQUFNO0FBQ04sUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQ3pCLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCO0FBQzlCLFFBQVEsSUFBSSxDQUFDLHFCQUFxQixFQUFFO0FBQ3BDO0FBQ0EsUUFBUSxNQUFNO0FBQ2Q7QUFDQSxNQUFNLE1BQU0sY0FBYyxHQUFHLENBQUMsVUFBVSxLQUFLO0FBQzdDLFFBQVEsS0FBSyxJQUFJLEtBQUssSUFBSSxVQUFVLENBQUMsUUFBUSxFQUFFO0FBQy9DLFVBQVUsSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLE9BQU8sSUFBSTtBQUN4QyxRQUFRLENBQUM7QUFDVCxRQUFRLE9BQU8sS0FBSztBQUNwQixNQUFNLENBQUMsQ0FBQztBQUNSO0FBQ0EsTUFBTSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQztBQUNwRCxNQUFNLElBQUksY0FBYyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtBQUMzQyxRQUFRLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNELFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO0FBQ3hDLE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEQsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDdEMsTUFBTSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMscUJBQXFCLEVBQUUsR0FBRyxHQUFHO0FBQ3hELFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3hFLE1BQU0sSUFBSSxJQUFJLENBQUMsZ0JBQWdCO0FBQy9CLFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3pFLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDO0FBQzlDLElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQyxHQUFHO0FBQ047QUFDQTtBQUNBLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUU7QUFDM0I7QUFDQSxJQUFJLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEQsSUFBSSxJQUFJLE1BQU0sRUFBRTtBQUNoQixNQUFNLE1BQU0sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDckQsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsV0FBVztBQUNyQyxRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZCO0FBQ0EsSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNwRTtBQUNBLElBQUk7QUFDSixNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVc7QUFDdkIsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0I7QUFDNUIsTUFBTSxJQUFJLENBQUMscUJBQXFCLEVBQUU7QUFDbEM7QUFDQSxNQUFNLE1BQU07QUFDWjtBQUNBLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO0FBQ3ZCLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUM3QixNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtBQUN6RSxRQUFRLE1BQU0sQ0FBQyx5QkFBeUI7QUFDeEMsVUFBVSxJQUFJLENBQUMsTUFBTTtBQUNyQixVQUFVLElBQUksQ0FBQyxNQUFNO0FBQ3JCLFVBQVUsSUFBSSxDQUFDLFFBQVE7QUFDdkIsU0FBUyxDQUFDO0FBQ1YsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDO0FBQ0wsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7QUFDMUIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQVNqQztBQUNBLElBQUksSUFBSSxDQUFDLDRCQUE0QixFQUFFLENBQUM7QUFDeEMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7QUFDM0IsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUM1QixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUNyQixJQUFJLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQ2xDO0FBQ0EsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUM5QixFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsYUFBYTtBQUNmLEVBQUUsbUJBQW1CLENBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUN4QyxJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0FBQzdCLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNsRSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3pCLElBQUksSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUNyRCxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNoQixFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsWUFBWSxHQUFHLGNBQWMsRUFBRTtBQUNqQyxFQUFFLGFBQWEsR0FBRyxDQUFDO0FBQ25CLEVBQUUsU0FBUyxHQUFHLE1BQU07QUFDcEIsSUFBSTtBQUNKLE1BQU0sSUFBSSxDQUFDLHVCQUF1QjtBQUNsQyxNQUFNLCtDQUErQztBQUNyRCxNQUFNO0FBQ04sTUFBTSxNQUFNLFdBQVcsR0FBRyxjQUFjLEVBQUUsQ0FBQztBQUMzQyxNQUFNLE1BQU0sU0FBUyxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO0FBQ3hELE1BQU0sSUFBSSxTQUFTLElBQUksR0FBRyxFQUFFO0FBQzVCLFFBQVEsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO0FBQzdDLFFBQVEsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFDL0IsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQztBQUN4QyxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQzdCLE1BQU0sQ0FBQztBQUNQLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUM3QixJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsNEJBQTRCLEdBQUcsQ0FBQyxZQUFZO0FBQzlDLElBQUksTUFBTSxnQkFBZ0IsR0FBRyxJQUFJVSxhQUFPLEVBQUUsQ0FBQztBQUMzQyxJQUFJLE1BQU0sbUJBQW1CLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUM7QUFDOUMsSUFBSSxJQUFJLHNCQUFzQixDQUFDO0FBQy9CO0FBQ0EsSUFBSSxPQUFPLFlBQVk7QUFDdkIsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO0FBQ3JDLFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNuRCxRQUFRO0FBQ1IsVUFBVSxzQkFBc0IsS0FBSyxTQUFTO0FBQzlDLFVBQVUsc0JBQXNCLEtBQUssSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0I7QUFDckUsVUFBVSxtQkFBbUIsQ0FBQyxDQUFDLEtBQUssZ0JBQWdCLENBQUMsQ0FBQztBQUN0RCxVQUFVLG1CQUFtQixDQUFDLENBQUMsS0FBSyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3RELFVBQVU7QUFDVixVQUFVLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRTtBQUNoRCxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztBQUM1RCxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLG1CQUFtQixDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDNUQsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxtQkFBbUIsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzFELFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0FBQzlELFVBQVUsQ0FBQyxNQUFNO0FBQ2pCLFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsbUJBQW1CLENBQUMsQ0FBQyxHQUFHLG1CQUFtQixDQUFDLENBQUMsQ0FBQztBQUMvRSxVQUFVLENBQUM7QUFDWCxVQUFVLElBQUksQ0FBQyxNQUFNLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztBQUMvQyxVQUFVLGdCQUFnQixDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3JELFVBQVUsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQztBQUNwRSxRQUFRLENBQUM7QUFDVCxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUMsR0FBRztBQUNOO0FBQ0EsRUFBRSxzQkFBc0IsR0FBRyxDQUFDLFlBQVk7QUFDeEMsSUFBSSxJQUFJLGNBQWMsQ0FBQztBQUN2QjtBQUNBLElBQUksT0FBTyxZQUFZO0FBQ3ZCLE1BQU0sTUFBTSxXQUFXLEdBQUcsY0FBYyxFQUFFLENBQUM7QUFDM0MsTUFBTSxJQUFJLENBQUMsY0FBYyxFQUFFLGNBQWMsR0FBRyxXQUFXLENBQUM7QUFDeEQsTUFBTSxNQUFNLFNBQVMsR0FBRyxXQUFXLEdBQUcsY0FBYyxDQUFDO0FBQ3JEO0FBQ0EsTUFBTSxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDL0MsTUFBTSxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDeEM7QUFDQSxNQUFNLGNBQWMsR0FBRyxXQUFXLENBQUM7QUFDbkMsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDLEdBQUc7QUFDTjtBQUNBLEVBQUUsZ0JBQWdCLEdBQUcsSUFBSVosYUFBTyxFQUFFO0FBQ2xDLEVBQUUsZ0JBQWdCLEdBQUcsSUFBSUEsYUFBTyxFQUFFO0FBQ2xDLEVBQUUsWUFBWSxHQUFHLElBQUlBLGFBQU8sRUFBRTtBQUM5QixFQUFFLHNCQUFzQixHQUFHLENBQUMsV0FBVyxLQUFLO0FBQzVDLElBQUksSUFBSSxJQUFJLENBQUMseUJBQXlCLEVBQUU7QUFDeEMsTUFBTSxJQUFJLENBQUMsZ0JBQWdCO0FBQzNCLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztBQUN4QyxTQUFTLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztBQUNsQyxTQUFTLFNBQVMsRUFBRSxDQUFDO0FBQ3JCLE1BQU0sSUFBSSxDQUFDLFlBQVk7QUFDdkIsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDO0FBQ3BDLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO0FBQ2xDLFNBQVMsU0FBUyxFQUFFLENBQUM7QUFDckIsTUFBTSxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSTtBQUNyQyxRQUFRLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztBQUNwRCxPQUFPLENBQUM7QUFDUixNQUFNLE1BQU0sYUFBYSxHQUFHLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUN6RSxNQUFNLE1BQU0sQ0FBQztBQUNiLFFBQVEsQ0FBQyxhQUFhLEdBQUcsYUFBYTtBQUN0QyxTQUFTLFdBQVcsR0FBRyxJQUFJLENBQUMsa0NBQWtDLENBQUMsQ0FBQztBQUNoRSxNQUFNLElBQUksQ0FBQyxnQkFBZ0I7QUFDM0IsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDO0FBQ3hDLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN4QyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2hELE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3ZELE1BQU0sSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFO0FBQ3BCLFFBQVEsSUFBSSxDQUFDLHlCQUF5QixHQUFHLEtBQUssQ0FBQztBQUMvQyxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBLEVBQUUsaUJBQWlCLEdBQUcsQ0FBQyxZQUFZO0FBQ25DLElBQUksTUFBTSxnQkFBZ0IsR0FBRyxJQUFJWSxhQUFPLEVBQUUsQ0FBQztBQUMzQyxJQUFJLElBQUksZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0FBQ2pDO0FBQ0EsSUFBSSxPQUFPLFVBQVUsU0FBUyxFQUFFO0FBQ2hDLE1BQU0sSUFBSSxDQUFDLG1CQUFtQixDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDakQsTUFBTSxJQUFJLElBQUksQ0FBQyx5QkFBeUIsRUFBRTtBQUMxQyxRQUFRLElBQUksQ0FBQyxXQUFXLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDeEQsUUFBUSxNQUFNLHlCQUF5QixHQUFHLElBQUksQ0FBQyxHQUFHO0FBQ2xELFVBQVUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRTtBQUNsRCxVQUFVLEdBQUc7QUFDYixTQUFTLENBQUM7QUFDVixRQUFRLElBQUkscUJBQXFCLEdBQUcsSUFBSSxDQUFDLEdBQUc7QUFDNUMsVUFBVSx5QkFBeUIsR0FBRywwQkFBMEIsR0FBRyxTQUFTO0FBQzVFLFVBQVUsR0FBRztBQUNiLFNBQVMsQ0FBQztBQUNWLFFBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBQ3RFLFFBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUI7QUFDMUMsVUFBVSxJQUFJLENBQUMsZ0JBQWdCO0FBQy9CLFVBQVUsSUFBSSxDQUFDLE1BQU07QUFDckIsVUFBVSxnQkFBZ0I7QUFDMUIsU0FBUyxDQUFDO0FBQ1YsUUFBUSxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7QUFDaEMsUUFBUSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztBQUNwQyxNQUFNLENBQUMsTUFBTTtBQUNiLFFBQVEsSUFBSSx5QkFBeUIsQ0FBQztBQUN0QyxRQUFRLElBQUksZ0JBQWdCLEVBQUUseUJBQXlCLEdBQUcsR0FBRyxDQUFDO0FBQzlEO0FBQ0EsVUFBVSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsR0FBRztBQUM5QyxZQUFZLElBQUksQ0FBQyxXQUFXLENBQUMscUJBQXFCLEVBQUU7QUFDcEQsWUFBWSxHQUFHO0FBQ2YsV0FBVyxDQUFDO0FBQ1osUUFBUSxJQUFJLHlCQUF5QixHQUFHLENBQUMsRUFBRTtBQUMzQyxVQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCO0FBQzVDLFlBQVksSUFBSSxDQUFDLGdCQUFnQjtBQUNqQyxZQUFZLElBQUksQ0FBQyxNQUFNO0FBQ3ZCLFlBQVksZ0JBQWdCO0FBQzVCLFdBQVcsQ0FBQztBQUNaLFVBQVUsSUFBSSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsR0FBRztBQUM5QyxZQUFZLHlCQUF5QixHQUFHLDJCQUEyQixHQUFHLFNBQVM7QUFDL0UsWUFBWSxHQUFHO0FBQ2YsV0FBVyxDQUFDO0FBQ1osVUFBVSxJQUFJLENBQUMsV0FBVyxDQUFDLHFCQUFxQixDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDeEUsVUFBVSxJQUFJLHFCQUFxQixLQUFLLEdBQUc7QUFDM0MsWUFBWSxJQUFJLENBQUMsV0FBVyxDQUFDLHdCQUF3QixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzdELFFBQVEsQ0FBQztBQUNULFFBQVEsSUFBSSx5QkFBeUIsR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7QUFDekUsUUFBUSxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7QUFDakMsTUFBTSxDQUFDO0FBQ1AsSUFBSSxDQUFDO0FBQ0wsRUFBRSxDQUFDLEdBQUc7QUFDTjtBQUNBLEVBQUUsZ0JBQWdCLEdBQUcsQ0FBQyxZQUFZO0FBQ2xDLElBQUksTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ3ZCLElBQUksTUFBTSxnQkFBZ0IsR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUMzQztBQUNBLElBQUksT0FBTyxZQUFZO0FBQ3ZCLE1BQU0sSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO0FBQy9CLFFBQVEsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7QUFDcEMsUUFBUSxJQUFJLENBQUMsbUJBQW1CLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNuRCxRQUFRLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyw4QkFBOEI7QUFDckQsVUFBVSxJQUFJLENBQUMsTUFBTTtBQUNyQixVQUFVLElBQUksQ0FBQyxhQUFhO0FBQzVCLFVBQVUsZ0JBQWdCO0FBQzFCLFNBQVMsQ0FBQztBQUNWLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ25FLFFBQVEsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUNoQyxVQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekQsVUFBVSxJQUFJLENBQUMsV0FBVyxDQUFDLDJCQUEyQjtBQUN0RCxZQUFZLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNO0FBQzdCLFlBQVksSUFBSSxDQUFDLE1BQU07QUFDdkIsV0FBVyxDQUFDO0FBQ1osUUFBUSxDQUFDLE1BQU07QUFDZixVQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsdUJBQXVCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDMUQsUUFBUSxDQUFDO0FBQ1QsTUFBTSxDQUFDLE1BQU07QUFDYixRQUFRLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyx3QkFBd0IsRUFBRTtBQUN2RCxVQUFVLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQ3RDLFFBQVEsSUFBSSxDQUFDLFdBQVcsQ0FBQyx1QkFBdUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN4RCxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUMsR0FBRztBQUNOO0FBQ0EsRUFBRSxlQUFlLEdBQUcsQ0FBQyxZQUFZO0FBQ2pDLElBQUksTUFBTSxnQkFBZ0IsR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUMzQztBQUNBLElBQUksT0FBTyxZQUFZO0FBQ3ZCLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsTUFBTTtBQUNoQyxNQUFNLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDeEQsTUFBTSxJQUFJLENBQUMsbUJBQW1CLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUNqRCxNQUFtQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLEtBQUs7QUFDL0UsTUFBaUMsSUFBSSxDQUFDLGNBQWM7QUFDcEQsVUFBVSxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxRQUFRO0FBQzlDLFVBQVUsS0FBSztBQUNmLE1BQ1EsVUFBVSxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxVQUFVLElBQUksR0FBRyxHQUFHLEVBQUU7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUMsR0FBRztBQUNOO0FBQ0EsRUFBRSxrQkFBa0IsR0FBRztBQUN2QixJQUFJLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO0FBQy9CLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2RCxNQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsNkJBQTZCO0FBQ3BELFFBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNO0FBQzVCLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ3RCLE9BQU8sQ0FBQztBQUNSLElBQUksQ0FBQyxNQUFNO0FBQ1gsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLHlCQUF5QixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3hELElBQUksQ0FBQztBQUNMLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxTQUFTLEdBQUcsSUFBSVgsYUFBTyxFQUFFO0FBQzNCLEVBQUUsbUJBQW1CLEdBQUcsRUFBRTtBQUMxQixFQUFFLGVBQWUsR0FBRyxJQUFJRCxhQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDekMsRUFBRSxXQUFXLEdBQUcsSUFBSUEsYUFBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQ3JDLEVBQUUsZUFBZSxHQUFHLElBQUlBLGFBQU8sRUFBRTtBQUNqQyxFQUFFLGNBQWMsR0FBRyxJQUFJQSxhQUFPLEVBQUU7QUFDaEMsRUFBRSxXQUFXLEdBQUcsRUFBRTtBQUNsQjtBQUNBLEVBQUUsWUFBWSxHQUFHO0FBQ2pCLElBQUk7QUFDSixNQUFNLGNBQWMsRUFBRSxJQUFJO0FBQzFCLE1BQU0sYUFBYSxFQUFFLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUM7QUFDM0MsS0FBSztBQUNMLElBQUk7QUFDSixNQUFNLGNBQWMsRUFBRSxJQUFJO0FBQzFCLE1BQU0sYUFBYSxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQztBQUN2QyxLQUFLO0FBQ0wsSUFBSTtBQUNKLE1BQU0sY0FBYyxFQUFFLEdBQUc7QUFDekIsTUFBTSxhQUFhLEVBQUUsQ0FBQyxHQUFHLENBQUM7QUFDMUIsS0FBSztBQUNMLEdBQUc7QUFDSCxFQUFFLFlBQVksR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLEVBQUUsWUFBWSxHQUFHLEtBQUssS0FBSztBQUMxRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDeEQsSUFBSSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN0RCxJQUFJLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLEVBQUU7QUFDN0MsTUFBTSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLE1BQU0sT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztBQUNuQyxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQ3RCLElBQUksSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0FBQ3pCLElBQUksSUFBSSx1QkFBdUIsR0FBRyxLQUFLLENBQUM7QUFDeEMsSUFBSSxJQUFJLHVCQUF1QixHQUFHLEtBQUssQ0FBQztBQUN4QztBQUNBLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMzRSxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDM0QsSUFBSSxZQUFZLEdBQUcsSUFBSSxDQUFDLGNBQWM7QUFDdEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7QUFDakMsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztBQUNoQyxPQUFPLE1BQU0sRUFBRSxDQUFDO0FBQ2hCO0FBQ0EsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO0FBQ2hCLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUN4RSxRQUFRLElBQUksU0FBUyxJQUFJLElBQUksRUFBRSx1QkFBdUIsR0FBRyxJQUFJLENBQUM7QUFDOUQsUUFBUSxJQUFJLFlBQVksSUFBSSxHQUFHLEVBQUUsdUJBQXVCLEdBQUcsSUFBSSxDQUFDO0FBQ2hFLFFBQVEsSUFBSSxDQUFDLHVCQUF1QixJQUFJLENBQUMsdUJBQXVCO0FBQ2hFLFVBQVUsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztBQUN2QyxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDNUIsSUFBSSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsYUFBYSxFQUFFLEdBQUcsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDN0UsSUFBSSxhQUFhLEdBQUcsYUFBYSxJQUFJLFlBQVksQ0FBQztBQUNsRCxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztBQUM3QztBQUNBLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMxRCxJQUFJLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQzVELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDM0QsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXO0FBQ25DLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUMxRDtBQUNBLElBQUksSUFBSSx5QkFBeUIsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzFELElBQUk7QUFDSixNQUFNLElBQUksQ0FBQyxrQkFBa0I7QUFDN0IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6RSxNQUFNO0FBQ04sTUFBTSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLHFCQUFxQjtBQUN0RSxRQUFRLElBQUksQ0FBQyxTQUFTO0FBQ3RCLFFBQVEsSUFBSSxDQUFDLDhCQUE4QjtBQUMzQyxPQUFPLENBQUM7QUFDUixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUkseUJBQXlCLENBQUMsSUFBSSxDQUFDLE1BQU07QUFDekMsTUFBTSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtBQUN6QyxRQUFRLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLElBQUksYUFBYSxFQUFFO0FBQ3pELFVBQVUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7QUFDdkQsUUFBUSxDQUFDLE1BQU07QUFDZixVQUFVLEtBQUssSUFBSSxXQUFXLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtBQUNyRCxZQUFZLElBQUksU0FBUyxHQUFHLFdBQVcsQ0FBQyxjQUFjLEVBQUU7QUFDeEQsY0FBYyxLQUFLLElBQUksWUFBWSxJQUFJLFdBQVcsQ0FBQyxhQUFhLEVBQUU7QUFDbEUsZ0JBQWdCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSTtBQUNyQyxrQkFBa0IsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsWUFBWSxDQUFDO0FBQ2xFLGlCQUFpQixDQUFDO0FBQ2xCLGNBQWMsQ0FBQztBQUNmLGNBQWMsS0FBSztBQUNuQixZQUFZLENBQUM7QUFDYixVQUFVLENBQUM7QUFDWCxVQUFVLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3ZELFFBQVEsQ0FBQztBQUNULE1BQU0sQ0FBQztBQUNQLE1BQU0sSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2hGLE1BQU0sSUFBSSxDQUFDLGNBQWMsR0FBRyxTQUFTLENBQUM7QUFDdEM7QUFDQSxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDM0QsTUFBTSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0FBQzNELE1BQU0sSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUMzRDtBQUNBLE1BQU0sTUFBTSxXQUFXLEdBQUc7QUFDMUIsUUFBUSxhQUFhLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRO0FBQzlDLFFBQVEsY0FBYyxFQUFFLElBQUksQ0FBQyxtQkFBbUI7QUFDaEQsUUFBUSxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsZ0JBQWdCO0FBQy9DLFFBQVEsY0FBYyxFQUFFLFNBQVM7QUFDakMsUUFBUSx1QkFBdUIsRUFBRSxJQUFJLENBQUMsa0JBQWtCO0FBQ3hELE9BQU8sQ0FBQztBQUNSLE1BQU0sSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRTtBQUN0QyxRQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDdEUsTUFBTSxDQUFDO0FBQ1AsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFO0FBQ3hDLFFBQVEsV0FBVyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUM7QUFDakUsUUFBUSxXQUFXLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztBQUMzRCxRQUFRLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO0FBQ3JDLFVBQVUsV0FBVyxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyw4QkFBOEIsQ0FBQztBQUNqRixRQUFRLENBQUM7QUFDVCxNQUFNLENBQUM7QUFDUDtBQUNBLE1BQU0sSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sS0FBSztBQUNsRCxRQUFRLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxPQUFPLENBQUM7QUFDM0MsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNUO0FBQ0EsTUFBTSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUMzQyxRQUFRLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxLQUFLO0FBQ2xELFVBQVUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDL0MsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNYLFFBQVEsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7QUFDbEMsTUFBTSxDQUFDO0FBQ1AsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQztBQUNsQyxRQUFRLElBQUksRUFBRSxXQUFXO0FBQ3pCLE9BQU8sQ0FBQyxDQUFDO0FBQ1Q7QUFDQSxNQUFNLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQ3pDLFFBQVEsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUN4RCxRQUFRLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwRCxNQUFNLENBQUM7QUFDUDtBQUNBLE1BQU0sT0FBTyxJQUFJO0FBQ2pCLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDUDtBQUNBLElBQUksT0FBTyx5QkFBeUI7QUFDcEMsRUFBRSxDQUFDO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLHVCQUF1QixHQUFHLENBQUMsWUFBWTtBQUN6QyxJQUFJLE1BQU0sY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUM5QixJQUFJLElBQUksbUJBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ25DLElBQUksTUFBTSxZQUFZLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUM7QUFDdkMsSUFBSSxNQUFNLFlBQVksR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUN2QyxJQUFJLE1BQU0sVUFBVSxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDO0FBQ3JDLElBQUksTUFBTSxTQUFTLEdBQUcsSUFBSUMsYUFBTyxFQUFFLENBQUM7QUFDcEMsSUFBSSxNQUFNLGFBQWEsR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUN4QyxJQUFJLE1BQU0sY0FBYyxHQUFHLElBQUlBLGFBQU8sRUFBRSxDQUFDO0FBQ3pDLElBQUksTUFBTSxnQkFBZ0IsR0FBRyxJQUFJRCxhQUFPLEVBQUUsQ0FBQztBQUMzQyxJQUFJLE1BQU0sT0FBTyxHQUFHLElBQUlBLGFBQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQzFDO0FBQ0EsSUFBSSxNQUFNLE9BQU8sR0FBRyxJQUFJQSxhQUFPLEVBQUUsQ0FBQztBQUNsQyxJQUFJLE1BQU0sUUFBUSxHQUFHLENBQUMsSUFBSSxLQUFLO0FBQy9CLE1BQU0sT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRTtBQUMxRCxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxPQUFPLFVBQVUsY0FBYyxHQUFHLEtBQUssRUFBRTtBQUM3QyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ2pELE1BQU0sTUFBTSxpQkFBaUI7QUFDN0IsUUFBUSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQzFCLFFBQVEsR0FBRztBQUNYLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSXVDLGVBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM5RCxNQUFNLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ2hGLE1BQU0sTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLGlCQUFpQixDQUFDLENBQUM7QUFDaEYsTUFBTSxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQy9DLE1BQU0sTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUMvQztBQUNBLE1BQU0sTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUN0RDtBQUNBLE1BQU0sSUFBSSxTQUFTLEVBQUU7QUFDckIsUUFBUSxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDN0QsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXO0FBQ3ZDLFVBQVUsYUFBYSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzdEO0FBQ0EsUUFBUSxJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUM7QUFDaEMsUUFBUSxJQUFJLGdCQUFnQixHQUFHLENBQUMsQ0FBQztBQUNqQztBQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzVELFVBQVUsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRCxVQUFVLFNBQVMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDeEMsVUFBVSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFO0FBQzFDLFlBQVksSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDaEUsWUFBWSxTQUFTLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQy9DLFVBQVUsQ0FBQztBQUNYLFVBQVUsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQztBQUM1RCxVQUFVLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDOUMsWUFBWSxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckQsWUFBWTtBQUNaLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUN4QixjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO0FBQ2hDLGNBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUM7QUFDNUM7QUFDQSxjQUFjLFFBQVE7QUFDdEIsWUFBWSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDakU7QUFDQSxZQUFZLE1BQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUN2RCxZQUFZLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUNuQztBQUNBLFlBQVksWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7QUFDOUQsWUFBWSxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztBQUM5RDtBQUNBLFlBQVksTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQy9ELFlBQVksTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQy9EO0FBQ0EsWUFBWSxNQUFNLEVBQUUsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdEMsWUFBWSxNQUFNLFNBQVMsR0FBRyxnQkFBZ0IsR0FBRyxZQUFZLEdBQUcsR0FBRyxDQUFDO0FBQ3BFLFlBQVksTUFBTSxTQUFTLEdBQUcsZ0JBQWdCLEdBQUcsWUFBWSxHQUFHLEdBQUcsQ0FBQztBQUNwRSxZQUFZO0FBQ1osY0FBYyxDQUFDLGNBQWM7QUFDN0IsZUFBZSxTQUFTLElBQUksU0FBUyxDQUFDO0FBQ3RDLGNBQWMsY0FBYyxHQUFHLEVBQUU7QUFDakMsY0FBYztBQUNkLGNBQWMsUUFBUTtBQUN0QixZQUFZLENBQUM7QUFDYixZQUFZLGdCQUFnQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUN6RCxZQUFZLGNBQWMsQ0FBQyxlQUFlLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDbkQsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7QUFDdEQsWUFBWSxlQUFlLEVBQUUsQ0FBQztBQUM5QixVQUFVLENBQUM7QUFDWCxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsY0FBYyxDQUFDLE1BQU0sR0FBRyxlQUFlLENBQUM7QUFDaEQsUUFBUSxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSztBQUN0QyxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsT0FBTyxFQUFFO0FBQ3RFLGVBQWUsT0FBTyxDQUFDO0FBQ3ZCLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDWDtBQUNBLFFBQVEsSUFBSSxpQkFBaUIsR0FBRyxnQkFBZ0IsR0FBRy9ELFdBQVMsQ0FBQyxXQUFXLENBQUM7QUFDekUsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsZUFBZSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2xELFVBQVUsTUFBTSxJQUFJLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLFVBQVUsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzFELFVBQVUsTUFBTSxlQUFlLEdBQUcsY0FBYyxHQUFHQSxXQUFTLENBQUMsV0FBVyxDQUFDO0FBQ3pFLFVBQVUsSUFBSSxRQUFRLEdBQUcsSUFBSSxXQUFXO0FBQ3hDLFlBQVksSUFBSSxDQUFDLHVCQUF1QixDQUFDLE1BQU07QUFDL0MsWUFBWSxpQkFBaUIsR0FBRyxlQUFlO0FBQy9DLFlBQVksY0FBYztBQUMxQixXQUFXLENBQUM7QUFDWixVQUFVLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUMxQyxVQUFVLGlCQUFpQixJQUFJLGVBQWUsQ0FBQztBQUMvQyxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsT0FBTztBQUNmLFVBQVUsZ0JBQWdCLEVBQUUsZ0JBQWdCO0FBQzVDLFVBQVUsYUFBYSxFQUFFLEtBQUs7QUFDOUIsU0FBUztBQUNULE1BQU0sQ0FBQyxNQUFNO0FBQ2IsUUFBUSxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQy9ELFFBQVE7QUFDUixVQUFVLENBQUMsbUJBQW1CO0FBQzlCLFVBQVUsbUJBQW1CLENBQUMsTUFBTSxLQUFLLGVBQWU7QUFDeEQsVUFBVTtBQUNWLFVBQVUsbUJBQW1CLEdBQUcsSUFBSSxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDakUsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsZUFBZSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3BELFlBQVksbUJBQW1CLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDLFVBQVUsQ0FBQztBQUNYLFFBQVEsQ0FBQztBQUNULFFBQVEsSUFBSSxDQUFDLHVCQUF1QixDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQzlELFFBQVEsT0FBTztBQUNmLFVBQVUsZ0JBQWdCLEVBQUUsZUFBZTtBQUMzQyxVQUFVLGFBQWEsRUFBRSxJQUFJO0FBQzdCLFNBQVM7QUFDVCxNQUFNLENBQUM7QUFDUCxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUMsR0FBRztBQUNOO0FBQ0EsRUFBRSxZQUFZLEdBQUc7QUFDakIsSUFBSSxPQUFPLElBQUksQ0FBQyxTQUFTO0FBQ3pCLEVBQUUsQ0FBQztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsYUFBYSxDQUFDLFVBQVUsRUFBRTtBQUM1QixJQUFJLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDO0FBQzlDLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxhQUFhLEdBQUc7QUFDbEIsSUFBSSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFO0FBQ3pDLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxRQUFRLEdBQUc7QUFDYixJQUFJLE9BQU8sU0FBUyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDO0FBQy9DLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxpQkFBaUIsQ0FBQyxTQUFTLEVBQUU7QUFDL0IsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztBQUNoQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQztBQUMxQztBQUNBLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQzFCLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7QUFDaEUsRUFBRSxDQUFDO0FBQ0g7QUFDQSxFQUFFLGNBQWMsR0FBRztBQUNuQixJQUFJLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztBQUNqRixJQUFJLElBQUksV0FBVyxHQUFHLElBQUksWUFBWTtBQUN0QyxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSztBQUN4RCxLQUFLLENBQUM7QUFDTixJQUFJLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQztBQUN2QixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUN2QztBQUNBLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDckMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzFDLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLElBQUksSUFBSSxDQUFDLGdCQUFnQixLQUFLLEtBQUssRUFBRTtBQUMvRjtBQUNBLE1BQU0sSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQztBQUNuQyxNQUFNLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQy9DO0FBQ0EsTUFBTSxNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDO0FBQzNFLE1BQU0sTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDO0FBQzdFO0FBQ0EsTUFBTSxNQUFNLFlBQVksR0FBRyxJQUFJa0MsOEJBQXdCO0FBQ3ZELFVBQVUsSUFBSSxlQUFlLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDO0FBQ3RFLFVBQVUsQ0FBQztBQUNYLFVBQVUsZUFBZSxDQUFDLFVBQVU7QUFDcEMsVUFBVSxDQUFDO0FBQ1gsT0FBTyxDQUFDO0FBQ1I7QUFDQSxNQUFNLE1BQU0sYUFBYSxHQUFHLElBQUlBLDhCQUF3QjtBQUN4RCxVQUFVLElBQUksZ0JBQWdCLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7QUFDeEUsVUFBVSxDQUFDO0FBQ1gsVUFBVSxnQkFBZ0IsQ0FBQyxVQUFVO0FBQ3JDLFVBQVUsQ0FBQztBQUNYLE9BQU8sQ0FBQztBQUNSLE1BQU0sWUFBWSxDQUFDLFFBQVEsQ0FBQ0Msc0JBQWdCLENBQUMsQ0FBQztBQUM5QyxNQUFNLGFBQWEsQ0FBQyxRQUFRLENBQUNBLHNCQUFnQixDQUFDLENBQUM7QUFDL0MsTUFBTSxRQUFRLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxZQUFZLENBQUMsQ0FBQztBQUN2RCxNQUFNLFFBQVEsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ3pELElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7QUFDN0M7QUFDQSxJQUFJLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDekQsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsWUFBWSxDQUFDLElBQUksU0FBUyxFQUFFO0FBQ3JFLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLEVBQUUsUUFBUSxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM1RSxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDs7QUM3ckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBb0NBO0FBQ0E7QUFDQSxNQUFNdkIsUUFBTSxHQUFHLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ2xEO0FBQ0E7QUFDQSxNQUFNLGVBQWUsR0FBRztBQUN4QixJQUFJLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0FBQ2xDLElBQUksTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDbEMsSUFBSSxlQUFlLEVBQUUsUUFBUTtBQUM3QixDQUFDLENBQUM7QUFDRjtBQUNBLE1BQU0sWUFBWSxHQUFHO0FBQ3JCLElBQUksTUFBTSxFQUFFLEVBQUU7QUFDZCxJQUFJLEtBQUssRUFBRSxFQUFFO0FBQ2IsQ0FBQyxDQUFDO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsTUFBTSxlQUFlLEdBQUc7QUFDeEIsSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDdEMsSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUU7QUFDckMsSUFBSSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDdEMsSUFBSSxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUM7QUFDdEMsSUFBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDckMsSUFBSSxLQUFLLEVBQUUsRUFBRTtBQUNiLENBQUMsQ0FBQztBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ08sTUFBTSxxQkFBcUIsQ0FBQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxhQUFhLE1BQU0sQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLE9BQU8sR0FBRyxFQUFFLEVBQUU7QUFDNUQ7QUFDQSxRQUFRLElBQUk7QUFDWjtBQUNBLFlBQVksa0JBQWtCLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZELFlBQVksV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ25DO0FBQ0E7QUFDQSxZQUFZLElBQUksT0FBTyxDQUFDLGdCQUFnQixFQUFFO0FBQzFDLGdCQUFnQixnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsMEJBQTBCLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDOUYsWUFBWSxDQUFDO0FBQ2IsWUFBWSxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUU7QUFDdEMsZ0JBQWdCLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdEYsWUFBWSxDQUFDO0FBQ2IsWUFBWSxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUU7QUFDdEMsZ0JBQWdCLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdEYsWUFBWSxDQUFDO0FBQ2IsWUFBWSxJQUFJLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRTtBQUMzQyxnQkFBZ0IsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGlCQUFpQixFQUFFLDJCQUEyQixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2hHLFlBQVksQ0FBQztBQUNiLFlBQVksSUFBSSxPQUFPLENBQUMsZUFBZSxFQUFFO0FBQ3pDLGdCQUFnQixnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLHlCQUF5QixDQUFDLENBQUM7QUFDckYsWUFBWSxDQUFDO0FBQ2I7QUFDQSxZQUFZQSxRQUFNLENBQUMsSUFBSSxDQUFDLG9DQUFvQyxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztBQUM3RTtBQUNBLFlBQVksTUFBTSxhQUFhLEdBQUcsU0FBUyxDQUFDO0FBQzVDO0FBQ0E7QUFDQSxZQUFZLElBQUksYUFBYSxDQUFDO0FBQzlCLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsYUFBYSxFQUFFLE9BQU8sTUFBTSxLQUFLLFdBQVcsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsQ0FBQztBQUNySCxnQkFBZ0IsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQztBQUM5QyxnQkFBZ0IsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ2xFLGdCQUFnQixhQUFhLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzdDO0FBQ0EsZ0JBQWdCLElBQUksQ0FBQyxhQUFhLEVBQUU7QUFDcEMsb0JBQW9CLE1BQU0sSUFBSSxlQUFlO0FBQzdDLHdCQUF3Qix3RkFBd0Y7QUFDaEgsd0JBQXdCLFdBQVc7QUFDbkMscUJBQXFCLENBQUM7QUFDdEIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCLElBQUksS0FBSyxZQUFZLGVBQWUsRUFBRTtBQUN0RCxvQkFBb0IsTUFBTSxLQUFLLENBQUM7QUFDaEMsZ0JBQWdCLENBQUM7QUFDakIsZ0JBQWdCLE1BQU0sSUFBSSxlQUFlO0FBQ3pDLG9CQUFvQixDQUFDLDJCQUEyQixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqRSxvQkFBb0IsV0FBVztBQUMvQixvQkFBb0IsS0FBSztBQUN6QixpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWSxJQUFJLE9BQU8sU0FBUyxLQUFLLFdBQVcsRUFBRTtBQUNsRCxnQkFBZ0IsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2xDLFlBQVksQ0FBQztBQUNiO0FBQ0E7QUFDQSxZQUFZQSxRQUFNLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLEVBQUUsSUFBSSxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUM7QUFDMUUsWUFBWSxJQUFJLG9CQUFvQixDQUFDO0FBQ3JDLFlBQVksSUFBSTtBQUNoQixnQkFBZ0Isb0JBQW9CLEdBQUcsTUFBTSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDbEUsZ0JBQWdCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLEVBQUU7QUFDOUMsb0JBQW9CLE1BQU0sSUFBSSxZQUFZO0FBQzFDLHdCQUF3QixDQUFDLDBCQUEwQixFQUFFLG9CQUFvQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3RGLHdCQUF3QixvQkFBb0IsQ0FBQyxNQUFNO0FBQ25ELHFCQUFxQixDQUFDO0FBQ3RCLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQzVCLGdCQUFnQixJQUFJLEtBQUssWUFBWSxZQUFZLEVBQUU7QUFDbkQsb0JBQW9CLE1BQU0sS0FBSyxDQUFDO0FBQ2hDLGdCQUFnQixDQUFDO0FBQ2pCLGdCQUFnQixNQUFNLElBQUksWUFBWTtBQUN0QyxvQkFBb0IsQ0FBQyxpQ0FBaUMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDdkUsb0JBQW9CLENBQUM7QUFDckIsb0JBQW9CLEtBQUs7QUFDekIsaUJBQWlCLENBQUM7QUFDbEIsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVksSUFBSSxPQUFPLENBQUMsZ0JBQWdCLEVBQUU7QUFDMUMsZ0JBQWdCLElBQUk7QUFDcEIsb0JBQW9CLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsRCxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ2hDLG9CQUFvQkEsUUFBTSxDQUFDLElBQUksQ0FBQyxvQ0FBb0MsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM3RSxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUM7QUFDYjtBQUNBLFlBQVksSUFBSSxPQUFPLENBQUMsWUFBWSxFQUFFO0FBQ3RDLGdCQUFnQixJQUFJO0FBQ3BCLG9CQUFvQixPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzlDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDaEMsb0JBQW9CQSxRQUFNLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pFLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxJQUFJLE9BQU8sU0FBUyxLQUFLLFdBQVcsRUFBRTtBQUNsRCxnQkFBZ0IsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2pDLFlBQVksQ0FBQztBQUNiO0FBQ0E7QUFDQSxZQUFZLElBQUksV0FBVyxDQUFDO0FBQzVCLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsV0FBVyxHQUFHLE1BQU0sb0JBQW9CLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDdkUsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCLE1BQU0sSUFBSSxZQUFZO0FBQ3RDLG9CQUFvQixDQUFDLDhCQUE4QixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNwRSxvQkFBb0IsQ0FBQztBQUNyQixvQkFBb0IsS0FBSztBQUN6QixpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWUEsUUFBTSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ2xELFlBQVksSUFBSSxPQUFPLENBQUM7QUFDeEIsWUFBWSxJQUFJO0FBQ2hCLGdCQUFnQixPQUFPLEdBQUcsTUFBTSxLQUFLLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzdELFlBQVksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQzVCLGdCQUFnQixNQUFNLElBQUksY0FBYztBQUN4QyxvQkFBb0IsQ0FBQyw4QkFBOEIsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDcEUsb0JBQW9CLGFBQWE7QUFDakMsb0JBQW9CLEtBQUs7QUFDekIsaUJBQWlCLENBQUM7QUFDbEIsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVksSUFBSSxRQUFRLEdBQUcsRUFBRSxDQUFDO0FBQzlCLFlBQVksTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSTtBQUN6RCxnQkFBZ0IsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQzlCLG9CQUFvQixRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzFFLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQyxDQUFDLENBQUM7QUFDZjtBQUNBLFlBQVksSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUMzQixnQkFBZ0IsTUFBTSxJQUFJLGNBQWM7QUFDeEMsb0JBQW9CLG9GQUFvRjtBQUN4RyxvQkFBb0IsYUFBYTtBQUNqQyxpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBLFlBQVlBLFFBQU0sQ0FBQyxLQUFLLENBQUMsMkJBQTJCLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFO0FBQ0E7QUFDQSxZQUFZQSxRQUFNLENBQUMsS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFDcEUsWUFBWSxNQUFNLFFBQVEsR0FBRyxJQUFJLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUMzRTtBQUNBO0FBQ0EsWUFBWSxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsR0FBRztBQUM5QyxnQkFBZ0IsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUM5QyxnQkFBZ0IsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUM5QyxnQkFBZ0IsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUM5QyxhQUFhLENBQUM7QUFDZDtBQUNBLFlBQVksTUFBTSxjQUFjLEdBQUcsSUFBSVksYUFBTztBQUM5QyxnQkFBZ0IsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUM5QyxnQkFBZ0IsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUM5QyxnQkFBZ0IsZUFBZSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUM5QyxhQUFhLENBQUM7QUFDZDtBQUNBLFlBQVlaLFFBQU0sQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFO0FBQ3pDLGdCQUFnQixRQUFRLEVBQUUsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsRUFBRTtBQUM1RSxnQkFBZ0IsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDLEVBQUU7QUFDM0YsYUFBYSxDQUFDLENBQUM7QUFDZjtBQUNBO0FBQ0EsWUFBWSxJQUFJLGVBQWUsR0FBRyxRQUFRLENBQUM7QUFDM0MsWUFBWSxJQUFJO0FBQ2hCLGdCQUFnQixJQUFJLGVBQWUsQ0FBQyxlQUFlLEVBQUU7QUFDckQsb0JBQW9CLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsZUFBZSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ2pGLG9CQUFvQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ3hDLHdCQUF3QixlQUFlLEdBQUcsTUFBTSxDQUFDO0FBQ2pELG9CQUFvQixDQUFDLE1BQU07QUFDM0Isd0JBQXdCQSxRQUFNLENBQUMsSUFBSSxDQUFDLGtEQUFrRCxFQUFFO0FBQ3hGLDRCQUE0QixLQUFLLEVBQUUsZUFBZSxDQUFDLGVBQWU7QUFDbEUseUJBQXlCLENBQUMsQ0FBQztBQUMzQixvQkFBb0IsQ0FBQztBQUNyQixnQkFBZ0IsQ0FBQztBQUNqQixnQkFBZ0IsSUFBSSxPQUFPLEVBQUUsZUFBZSxFQUFFO0FBQzlDLG9CQUFvQixJQUFJLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEVBQUU7QUFDNUUsd0JBQXdCLGVBQWUsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNoRixvQkFBb0IsQ0FBQyxNQUFNO0FBQzNCLHdCQUF3QkEsUUFBTSxDQUFDLElBQUksQ0FBQyxvREFBb0QsRUFBRTtBQUMxRiw0QkFBNEIsS0FBSyxFQUFFLE9BQU8sQ0FBQyxlQUFlO0FBQzFELHlCQUF5QixDQUFDLENBQUM7QUFDM0Isb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCQSxRQUFNLENBQUMsSUFBSSxDQUFDLDhDQUE4QyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ25GLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWUEsUUFBTSxDQUFDLEtBQUssQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLGVBQWUsRUFBRSxlQUFlLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNwRztBQUNBO0FBQ0EsWUFBWSxRQUFRLENBQUMsWUFBWSxHQUFHLE9BQU8sRUFBRSxZQUFZLENBQUM7QUFDMUQsWUFBWSxRQUFRLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxFQUFFLGlCQUFpQixDQUFDO0FBQ3BFO0FBQ0E7QUFDQSxZQUFZQSxRQUFNLENBQUMsS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7QUFDN0QsWUFBWSxJQUFJLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUMzQyxZQUFZLElBQUk7QUFDaEIsZ0JBQWdCLG1CQUFtQixHQUFHLE1BQU0sUUFBUSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3pHLGdCQUFnQixJQUFJLG1CQUFtQixFQUFFO0FBQ3pDLG9CQUFvQkEsUUFBTSxDQUFDLElBQUksQ0FBQyxxQ0FBcUMsRUFBRTtBQUN2RSx3QkFBd0IsZUFBZSxFQUFFLG1CQUFtQixDQUFDLFVBQVUsRUFBRSxNQUFNLElBQUksQ0FBQztBQUNwRix3QkFBd0IsY0FBYyxFQUFFLG1CQUFtQixDQUFDLFNBQVMsRUFBRSxNQUFNLElBQUksQ0FBQztBQUNsRixxQkFBcUIsQ0FBQyxDQUFDO0FBQ3ZCLG9CQUFvQixRQUFRLENBQUMsbUJBQW1CLEdBQUcsbUJBQW1CLENBQUM7QUFDdkUsZ0JBQWdCLENBQUMsTUFBTTtBQUN2QixvQkFBb0JBLFFBQU0sQ0FBQyxLQUFLLENBQUMsK0RBQStELENBQUMsQ0FBQztBQUNsRyxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUM1QjtBQUNBLGdCQUFnQkEsUUFBTSxDQUFDLElBQUksQ0FBQywyREFBMkQsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztBQUNuSCxnQkFBZ0IsUUFBUSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztBQUNwRCxZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWUEsUUFBTSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ3JELFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQztBQUM3QyxvQkFBb0IsV0FBVyxFQUFFLFNBQVM7QUFDMUMsb0JBQW9CLGFBQWEsRUFBRSxRQUFRLENBQUMsT0FBTztBQUNuRCxvQkFBb0IsUUFBUSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDdkMsb0JBQW9CLHFCQUFxQixFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7QUFDbEYsb0JBQW9CLHFCQUFxQixFQUFFLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDakcsb0JBQW9CLHdCQUF3QixFQUFFLENBQUM7QUFDL0Msb0JBQW9CLGVBQWUsRUFBRSxlQUFlO0FBQ3BELG9CQUFvQixlQUFlLEVBQUUsZUFBZSxDQUFDLE9BQU87QUFDNUQsb0JBQW9CLHlCQUF5QixFQUFFLEdBQUc7QUFDbEQsb0JBQW9CLG1CQUFtQixFQUFFLG1CQUFtQjtBQUM1RCxpQkFBaUIsQ0FBQyxDQUFDO0FBQ25CLFlBQVksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQzVCLGdCQUFnQixNQUFNLElBQUksbUJBQW1CO0FBQzdDLG9CQUFvQixDQUFDLGtDQUFrQyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN4RSxvQkFBb0IsS0FBSztBQUN6QixpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWUEsUUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZELFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsTUFBTSxRQUFRLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDbEYsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCLE1BQU0sSUFBSSxjQUFjO0FBQ3hDLG9CQUFvQixDQUFDLHNCQUFzQixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM1RCxvQkFBb0IsUUFBUTtBQUM1QixvQkFBb0IsS0FBSztBQUN6QixpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWSxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUU7QUFDdEMsZ0JBQWdCLElBQUk7QUFDcEIsb0JBQW9CLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUNoQyxvQkFBb0JBLFFBQU0sQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekUsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVlBLFFBQU0sQ0FBQyxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUNwRCxZQUFZLElBQUksYUFBYSxDQUFDO0FBQzlCLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsYUFBYSxHQUFHLE1BQU0sUUFBUSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsR0FBRyxhQUFhLENBQUMsQ0FBQztBQUMxRixZQUFZLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUM1QixnQkFBZ0IsTUFBTSxJQUFJLGNBQWM7QUFDeEMsb0JBQW9CLENBQUMsMkJBQTJCLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2pFLG9CQUFvQixRQUFRLEdBQUcsYUFBYTtBQUM1QyxvQkFBb0IsS0FBSztBQUN6QixpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWSxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUU7QUFDdEMsZ0JBQWdCLElBQUk7QUFDcEIsb0JBQW9CLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDOUMsZ0JBQWdCLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUNoQyxvQkFBb0JBLFFBQU0sQ0FBQyxJQUFJLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekUsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVlBLFFBQU0sQ0FBQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUMvQyxZQUFZLElBQUk7QUFDaEIsZ0JBQWdCLE1BQU0sUUFBUSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsYUFBYSxFQUFFO0FBQ25FLG9CQUFvQixlQUFlLEVBQUUsSUFBSTtBQUN6QyxvQkFBb0Isc0JBQXNCLEVBQUUsS0FBSztBQUNqRCxvQkFBb0IsYUFBYSxFQUFFLEtBQUs7QUFDeEMsb0JBQW9CLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRztBQUMzQyxpQkFBaUIsQ0FBQyxDQUFDO0FBQ25CLFlBQVksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQzVCLGdCQUFnQixNQUFNLElBQUksbUJBQW1CO0FBQzdDLG9CQUFvQixDQUFDLDJCQUEyQixFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqRSxvQkFBb0IsS0FBSztBQUN6QixpQkFBaUIsQ0FBQztBQUNsQixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWSxJQUFJO0FBQ2hCLGdCQUFnQixRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDbEMsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCQSxRQUFNLENBQUMsS0FBSyxDQUFDLHlCQUF5QixFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQy9EO0FBQ0EsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVksSUFBSSxPQUFPLENBQUMsWUFBWSxFQUFFO0FBQ3RDLGdCQUFnQixJQUFJO0FBQ3BCLG9CQUFvQixPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDaEMsb0JBQW9CQSxRQUFNLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pFLGdCQUFnQixDQUFDO0FBQ2pCLFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWUEsUUFBTSxDQUFDLElBQUksQ0FBQyxnREFBZ0QsQ0FBQyxDQUFDO0FBQzFFLFlBQVksT0FBTyxRQUFRLENBQUM7QUFDNUI7QUFDQSxRQUFRLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUN4QjtBQUNBLFlBQVksSUFBSSxLQUFLLFlBQVksZUFBZTtBQUNoRCxnQkFBZ0IsS0FBSyxZQUFZLFlBQVk7QUFDN0MsZ0JBQWdCLEtBQUssWUFBWSxjQUFjO0FBQy9DLGdCQUFnQixLQUFLLFlBQVksbUJBQW1CLEVBQUU7QUFDdEQsZ0JBQWdCQSxRQUFNLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0FBQ3pHLGdCQUFnQixNQUFNLEtBQUssQ0FBQztBQUM1QixZQUFZLENBQUM7QUFDYjtBQUNBO0FBQ0EsWUFBWUEsUUFBTSxDQUFDLEtBQUssQ0FBQyx3Q0FBd0MsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMxRSxZQUFZLE1BQU0sSUFBSSxtQkFBbUI7QUFDekMsZ0JBQWdCLENBQUMscURBQXFELEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZGLGdCQUFnQixLQUFLO0FBQ3JCLGFBQWEsQ0FBQztBQUNkLFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGFBQWEsV0FBVyxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsT0FBTyxHQUFHLEVBQUUsRUFBRTtBQUNqRSxRQUFRQSxRQUFNLENBQUMsSUFBSSxDQUFDLHNGQUFzRixDQUFDLENBQUM7QUFDNUcsUUFBUSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUMxRCxJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxXQUFXLENBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRTtBQUNyQyxRQUFRQSxRQUFNLENBQUMsS0FBSyxDQUFDLDBDQUEwQyxDQUFDLENBQUM7QUFDakU7QUFDQTtBQUNBLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDL0I7QUFDQTtBQUNBLFFBQVEsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDO0FBQ3BEO0FBQ0E7QUFDQSxRQUFRLElBQUksQ0FBQyxPQUFPLEdBQUc7QUFDdkIsWUFBWSxJQUFJLEVBQUUsSUFBSSxHQUFHLEVBQUU7QUFDM0IsWUFBWSxHQUFHLEVBQUUsT0FBTztBQUN4QixTQUFTLENBQUM7QUFDVjtBQUNBO0FBQ0EsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQztBQUMxQixRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQzNCLFFBQVEsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7QUFDakMsUUFBUSxJQUFJLENBQUMsU0FBUyxHQUFHLGdCQUFnQixDQUFDLElBQUksQ0FBQztBQUMvQztBQUNBO0FBQ0EsUUFBUSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUM1QixRQUFRLElBQUksT0FBTyxRQUFRLEtBQUssV0FBVyxJQUFJLFVBQVUsRUFBRTtBQUMzRCxZQUFZLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM1RCxZQUFZLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLHFCQUFxQixFQUFFLENBQUM7QUFDekUsWUFBWSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO0FBQ3RELFlBQVksSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ3ZDLFlBQVksSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3pDLFlBQVksVUFBVSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDakQsWUFBWUEsUUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQztBQUM1RCxRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUlzRCxXQUFLLEVBQUUsQ0FBQztBQUNqQyxRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQztBQUNwRDtBQUNBO0FBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztBQUMzQixRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQzFCLFFBQVEsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDaEMsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUMxQixRQUFRLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUM7QUFDeEMsUUFBUSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztBQUM5QixRQUFRLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ2pDLFFBQVEsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztBQUN0QztBQUNBLFFBQVF0RCxRQUFNLENBQUMsS0FBSyxDQUFDLHdDQUF3QyxDQUFDLENBQUM7QUFDL0QsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrQkFBa0IsR0FBRztBQUN6QixRQUFRLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUM1QixZQUFZLE1BQU0sSUFBSSxxQkFBcUIsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0FBQ3ZGLFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksT0FBTyxHQUFHO0FBQ2QsUUFBUSxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDNUIsWUFBWUEsUUFBTSxDQUFDLElBQUksQ0FBQyxxRUFBcUUsQ0FBQyxDQUFDO0FBQy9GLFlBQVksT0FBTztBQUNuQixRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVFBLFFBQU0sQ0FBQyxJQUFJLENBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUN2RDtBQUNBO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7QUFDMUIsWUFBWSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDO0FBQ3JELFlBQVksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRTtBQUN6QyxnQkFBZ0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNsRSxZQUFZLENBQUM7QUFDYixZQUFZLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLFFBQVEsQ0FBQztBQUNUO0FBQ0E7QUFDQSxRQUFRLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUM1QjtBQUNBO0FBQ0EsUUFBUSxJQUFJO0FBQ1osWUFBWSxJQUFJLENBQUMsZUFBZSxFQUFFLE9BQU8sRUFBRSxDQUFDO0FBQzVDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ3hCLFlBQVlBLFFBQU0sQ0FBQyxLQUFLLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDbEUsUUFBUSxDQUFDO0FBQ1Q7QUFDQTtBQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNoQyxZQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssS0FBSztBQUNqRCxnQkFBZ0IsSUFBSTtBQUNwQixvQkFBb0IsR0FBRyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMvQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ2hDLG9CQUFvQkEsUUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUNsRixnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUMsQ0FBQyxDQUFDO0FBQ2YsWUFBWSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUN0QyxRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztBQUMzQixRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBQzFCLFFBQVEsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7QUFDaEMsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUMxQixRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQzlCLFFBQVEsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDakMsUUFBUSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0FBQ3RDLFFBQVEsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDNUI7QUFDQTtBQUNBLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7QUFDOUI7QUFDQTtBQUNBLFFBQVEscUJBQXFCLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztBQUNuRDtBQUNBLFFBQVFBLFFBQU0sQ0FBQyxLQUFLLENBQUMsNkNBQTZDLENBQUMsQ0FBQztBQUNwRSxJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxZQUFZLEdBQUc7QUFDbkIsUUFBUUEsUUFBTSxDQUFDLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQ2xEO0FBQ0E7QUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtBQUN4QixZQUFZLElBQUk7QUFDaEIsZ0JBQWdCLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7QUFDM0MsZ0JBQWdCLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUU7QUFDN0Msb0JBQW9CLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDbkUsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDNUIsZ0JBQWdCQSxRQUFNLENBQUMsS0FBSyxDQUFDLGlDQUFpQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3ZFLFlBQVksQ0FBQztBQUNiLFlBQVksSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7QUFDOUIsUUFBUSxDQUFDO0FBQ1Q7QUFDQTtBQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQzlCLFlBQVksSUFBSTtBQUNoQixnQkFBZ0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUMzQyxZQUFZLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUM1QixnQkFBZ0JBLFFBQU0sQ0FBQyxLQUFLLENBQUMsbUNBQW1DLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekUsWUFBWSxDQUFDO0FBQ2IsWUFBWSxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNwQyxRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDekIsWUFBWSxJQUFJO0FBQ2hCLGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3RDLFlBQVksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQzVCLGdCQUFnQkEsUUFBTSxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM5RCxZQUFZLENBQUM7QUFDYixZQUFZLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO0FBQy9CLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUUEsUUFBTSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ2pELElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLFNBQVMsR0FBRztBQUNoQixRQUFRLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUM7QUFDbkMsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxRQUFRLENBQUMsVUFBVSxFQUFFO0FBQ3pCO0FBQ0EsUUFBUSxJQUFJLFNBQVMsR0FBRztBQUN4QixZQUFZLFlBQVksRUFBRSxHQUFHO0FBQzdCLFlBQVksYUFBYSxFQUFFLEdBQUc7QUFDOUIsWUFBWSxXQUFXLEVBQUUsR0FBRztBQUM1QixZQUFZLGVBQWUsRUFBRSxHQUFHO0FBQ2hDLFlBQVksZ0JBQWdCLEVBQUUsR0FBRztBQUNqQyxZQUFZLGNBQWMsRUFBRSxHQUFHO0FBQy9CLFlBQVksZUFBZSxFQUFFLEdBQUc7QUFDaEMsWUFBWSxnQkFBZ0IsRUFBRSxHQUFHO0FBQ2pDLFlBQVksWUFBWSxFQUFFLEdBQUc7QUFDN0IsWUFBWSxhQUFhLEVBQUUsR0FBRztBQUM5QixZQUFZLGVBQWUsRUFBRSxHQUFHO0FBQ2hDLFlBQVksZ0JBQWdCLEVBQUUsR0FBRztBQUNqQyxZQUFZLGFBQWEsRUFBRSxHQUFHO0FBQzlCLFlBQVksY0FBYyxFQUFFLEdBQUc7QUFDL0IsWUFBWSxjQUFjLEVBQUUsR0FBRztBQUMvQixZQUFZLGVBQWUsRUFBRSxHQUFHO0FBQ2hDLFlBQVksYUFBYSxFQUFFLEdBQUc7QUFDOUIsWUFBWSxjQUFjLEVBQUUsR0FBRztBQUMvQixZQUFZLGFBQWEsRUFBRSxHQUFHO0FBQzlCLFlBQVksY0FBYyxFQUFFLEdBQUc7QUFDL0IsWUFBWSxXQUFXLEVBQUUsR0FBRztBQUM1QixZQUFZLFlBQVksRUFBRSxHQUFHO0FBQzdCLFlBQVksVUFBVSxFQUFFLEdBQUc7QUFDM0IsWUFBWSxPQUFPLEVBQUUsR0FBRztBQUN4QixZQUFZLE9BQU8sRUFBRSxHQUFHO0FBQ3hCLFlBQVksUUFBUSxFQUFFLEdBQUc7QUFDekIsWUFBWSxVQUFVLEVBQUUsR0FBRztBQUMzQixZQUFZLGVBQWUsRUFBRSxHQUFHO0FBQ2hDLFlBQVksZ0JBQWdCLEVBQUUsR0FBRztBQUNqQyxZQUFZLGNBQWMsRUFBRSxHQUFHO0FBQy9CLFlBQVksZUFBZSxFQUFFLEdBQUc7QUFDaEMsWUFBWSxXQUFXLEVBQUUsR0FBRztBQUM1QixZQUFZLFNBQVMsRUFBRSxHQUFHO0FBQzFCLFlBQVksa0JBQWtCLEVBQUUsR0FBRztBQUNuQyxZQUFZLG1CQUFtQixFQUFFLEdBQUc7QUFDcEMsWUFBWSxjQUFjLEVBQUUsR0FBRztBQUMvQixZQUFZLGVBQWUsRUFBRSxHQUFHO0FBQ2hDLFlBQVksV0FBVyxFQUFFLEdBQUc7QUFDNUIsWUFBWSxVQUFVLEVBQUUsR0FBRztBQUMzQixZQUFZLGNBQWMsRUFBRSxHQUFHO0FBQy9CLFlBQVksY0FBYyxFQUFFLEdBQUc7QUFDL0IsWUFBWSxlQUFlLEVBQUUsR0FBRztBQUNoQyxZQUFZLGVBQWUsRUFBRSxHQUFHO0FBQ2hDLFlBQVksY0FBYyxFQUFFLEdBQUc7QUFDL0IsWUFBWSxlQUFlLEVBQUUsR0FBRztBQUNoQyxZQUFZLGdCQUFnQixFQUFFLEdBQUc7QUFDakMsWUFBWSxpQkFBaUIsRUFBRSxHQUFHO0FBQ2xDLFlBQVksZ0JBQWdCLEVBQUUsR0FBRztBQUNqQyxZQUFZLGlCQUFpQixFQUFFLEdBQUc7QUFDbEMsWUFBWSxhQUFhLEVBQUUsR0FBRztBQUM5QixZQUFZLGNBQWMsRUFBRSxHQUFHO0FBQy9CLFlBQVksU0FBUyxFQUFFLEdBQUc7QUFDMUIsU0FBUyxDQUFDO0FBQ1Y7QUFDQSxRQUFRLElBQUksVUFBVSxJQUFJLElBQUksRUFBRTtBQUNoQyxZQUFZLFNBQVMsR0FBRyxVQUFVLENBQUM7QUFDbkMsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLE9BQU8sU0FBUyxDQUFDO0FBQ3pCLElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxNQUFNLEdBQUc7QUFDYixRQUFRLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRTtBQUN2RCxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxHQUFHLHFCQUFxQixDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7QUFDcEY7QUFDQSxZQUFZLE1BQU0saUJBQWlCLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztBQUNqRCxZQUFZLE1BQU0sV0FBVyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7QUFDekQ7QUFDQTtBQUNBLFlBQVksTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDO0FBQzdELFlBQVksTUFBTSxTQUFTLEdBQUcsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsS0FBSyxXQUFXLEdBQUcsaUJBQWlCLENBQUMsQ0FBQztBQUNqRyxZQUFZLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLGlCQUFpQixDQUFDLENBQUM7QUFDekUsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUM7QUFDM0M7QUFDQTtBQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ25DLGdCQUFnQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUNyRDtBQUNBLGdCQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsS0FBSyxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ3hGLG9CQUFvQkEsUUFBTSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRTtBQUN2RCx3QkFBd0IsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTO0FBQ2hELHdCQUF3QixjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQzFELHFCQUFxQixDQUFDLENBQUM7QUFDdkIsb0JBQW9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO0FBQzNELGdCQUFnQixDQUFDO0FBQ2pCLGdCQUFnQixJQUFJLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDekQsWUFBWSxDQUFDO0FBQ2I7QUFDQTtBQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7QUFDeEMsZ0JBQWdCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0FBQzlFLFlBQVksQ0FBQztBQUNiO0FBQ0E7QUFDQSxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUNsRCxnQkFBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUU7QUFDdkMsb0JBQW9CQSxRQUFNLENBQUMsSUFBSSxDQUFDLGlFQUFpRSxFQUFFO0FBQ25HLHdCQUF3QixRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLO0FBQzlDLHdCQUF3QixjQUFjLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO0FBQzFELHFCQUFxQixDQUFDLENBQUM7QUFDdkIsb0JBQW9CLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQzVDLGdCQUFnQixDQUFDO0FBQ2pCO0FBQ0EsZ0JBQWdCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztBQUNyQyxZQUFZLENBQUMsTUFBTTtBQUNuQixnQkFBZ0IsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQy9ELGdCQUFnQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3BEO0FBQ0E7QUFDQSxnQkFBZ0IsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ3BDLG9CQUFvQixLQUFLLE1BQU0sV0FBVyxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDbkUsd0JBQXdCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxDQUFDO0FBQzVFLHdCQUF3QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsQ0FBQztBQUMxRSx3QkFBd0IsSUFBSSxNQUFNLEtBQUssU0FBUyxJQUFJLEtBQUssS0FBSyxTQUFTLEVBQUU7QUFDekUsNEJBQTRCLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDO0FBQzVELGdDQUFnQyxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEtBQUssR0FBRyxNQUFNLENBQUM7QUFDbEYsd0JBQXdCLENBQUM7QUFDekIsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakI7QUFDQSxnQkFBZ0IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0FBQ3JDLFlBQVksQ0FBQztBQUNiO0FBQ0E7QUFDQSxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDekU7QUFDQTtBQUNBLFlBQVksTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUM1RCxZQUFZLElBQUksSUFBSSxDQUFDLGVBQWUsSUFBSSxDQUFDLEVBQUU7QUFDM0MsZ0JBQWdCQSxRQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztBQUNyRSxZQUFZLENBQUM7QUFDYixZQUFZLElBQUksWUFBWSxFQUFFO0FBQzlCLGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3JDLGdCQUFnQixJQUFJLENBQUMsTUFBTSxDQUFDLHVCQUF1QixFQUFFLENBQUM7QUFDdEQsWUFBWSxDQUFDLE1BQU07QUFDbkIsZ0JBQWdCLElBQUksQ0FBQyxNQUFNLENBQUMsdUJBQXVCLEdBQUcsQ0FBQyxDQUFDO0FBQ3hELFlBQVksQ0FBQztBQUNiO0FBQ0EsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7QUFDaEQsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQztBQUNyRCxRQUFRLENBQUMsTUFBTTtBQUNmLFlBQVksTUFBTSxJQUFJLEtBQUssQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO0FBQ3JGLFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0JBQWdCLENBQUMsS0FBSyxFQUFFO0FBQzVCLFFBQVEsSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFDcEQsUUFBUSxNQUFNLGFBQWEsR0FBRyx5QkFBeUIsQ0FBQztBQUN4RCxRQUFRLE9BQU8sYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN6QyxJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksYUFBYSxHQUFHO0FBQ3BCO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFO0FBQ3BDLFlBQVksSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7QUFDakU7QUFDQTtBQUNBLFlBQVksTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQzVELFlBQVksSUFBSSxRQUFRLEVBQUUsUUFBUSxFQUFFO0FBQ3BDLGdCQUFnQixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksSUFBSSxHQUFHLENBQUM7QUFDN0UsZ0JBQWdCLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxJQUFJLEdBQUcsQ0FBQztBQUMvRSxnQkFBZ0IsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRTtBQUNwRCxvQkFBb0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQztBQUN4RSxnQkFBZ0IsQ0FBQztBQUNqQixnQkFBZ0IsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRTtBQUNyRCxvQkFBb0IsUUFBUSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQztBQUMxRSxnQkFBZ0IsQ0FBQztBQUNqQixZQUFZLENBQUM7QUFDYixRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7QUFDeEIsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sS0FBSztBQUM1QyxnQkFBZ0IsSUFBSSxNQUFNLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxhQUFhLEVBQUU7QUFDM0Qsb0JBQW9CLE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsZUFBZSxDQUFDO0FBQzdFLG9CQUFvQixNQUFNLGVBQWUsR0FBRyxlQUFlLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZHO0FBQ0Esb0JBQW9CLElBQUksZUFBZSxFQUFFO0FBQ3pDLHdCQUF3QixNQUFNLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQztBQUNuRix3QkFBd0IsS0FBSyxNQUFNLFdBQVcsSUFBSSxxQkFBcUIsRUFBRTtBQUN6RSw0QkFBNEIsTUFBTSxNQUFNLEdBQUcscUJBQXFCLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDOUUsNEJBQTRCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDMUUsNEJBQTRCLElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtBQUNwRCxnQ0FBZ0MsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDMUcsNEJBQTRCLENBQUM7QUFDN0Isd0JBQXdCLENBQUM7QUFDekIsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsWUFBWSxDQUFDLENBQUMsQ0FBQztBQUNmLFFBQVEsQ0FBQztBQUNULElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxNQUFNLFNBQVMsQ0FBQyxRQUFRLEVBQUUsZUFBZSxFQUFFLFlBQVksRUFBRTtBQUM3RCxRQUFRLE1BQU0sQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUNoRSxZQUFZLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDO0FBQ3pELFlBQVksSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQztBQUM5RCxZQUFZLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEdBQUcsb0JBQW9CLENBQUM7QUFDbkUsU0FBUyxDQUFDLENBQUM7QUFDWDtBQUNBLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDMUIsWUFBWSxNQUFNLElBQUksS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7QUFDaEUsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLElBQUksb0JBQW9CLENBQUM7QUFDakMsUUFBUSxJQUFJLFFBQVEsQ0FBQztBQUNyQjtBQUNBLFFBQVEsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sS0FBSztBQUN2QyxZQUFZLElBQUksTUFBTSxDQUFDLGFBQWEsRUFBRTtBQUN0QyxnQkFBZ0Isb0JBQW9CLEdBQUcsTUFBTSxDQUFDO0FBQzlDLFlBQVksQ0FBQztBQUNiLFlBQVksSUFBSSxNQUFNLFlBQVl1RCxVQUFJLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxLQUFLLEVBQUU7QUFDakUsZ0JBQWdCLFFBQVEsR0FBRyxNQUFNLENBQUM7QUFDbEMsWUFBWSxDQUFDO0FBQ2IsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNYO0FBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUM7QUFDNUM7QUFDQSxRQUFRLElBQUksb0JBQW9CLEVBQUU7QUFDbEMsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLGtCQUFrQixHQUFHLG9CQUFvQixDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztBQUNyRyxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO0FBQzNDLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsb0JBQW9CLENBQUM7QUFDckQsUUFBUSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7QUFDeEM7QUFDQTtBQUNBLFFBQVEsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJQyxvQkFBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ25ELFFBQVEsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0FBQ3RGLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7QUFDdEM7QUFDQTtBQUNBLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7QUFDakYsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLENBQUM7QUFDM0UsUUFBUSxDQUFDLE1BQU07QUFDZixZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN4QyxRQUFRLENBQUM7QUFDVCxRQUFReEQsUUFBTSxDQUFDLEtBQUssQ0FBQyx5QkFBeUIsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDMUY7QUFDQSxRQUFRLElBQUksb0JBQW9CLEVBQUU7QUFDbEMsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFDaEUsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUM5QyxRQUFRLFNBQVMsQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO0FBQ2xDO0FBQ0EsUUFBUSxJQUFJLG9CQUFvQixFQUFFO0FBQ2xDLFlBQVksb0JBQW9CLENBQUMsUUFBUSxDQUFDLGtCQUFrQixFQUFFLENBQUM7QUFDL0QsUUFBUSxDQUFDO0FBQ1QsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksTUFBTSxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUU7QUFDakMsUUFBUSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUNsQztBQUNBO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUN6QyxZQUFZQSxRQUFNLENBQUMsS0FBSyxDQUFDLDJCQUEyQixFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNoRSxZQUFZLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQy9DLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUUEsUUFBTSxDQUFDLEtBQUssQ0FBQyx5QkFBeUIsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFDMUQ7QUFDQTtBQUNBLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZELFFBQVEsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN4QixZQUFZLE1BQU0sSUFBSSxjQUFjO0FBQ3BDLGdCQUFnQixDQUFDLCtCQUErQixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3hELGdCQUFnQixJQUFJO0FBQ3BCLGFBQWEsQ0FBQztBQUNkLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxJQUFJLFNBQVMsQ0FBQztBQUN0QixRQUFRLElBQUk7QUFDWixZQUFZLFNBQVMsR0FBRyxNQUFNLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdEQsUUFBUSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDeEIsWUFBWSxNQUFNLElBQUksY0FBYztBQUNwQyxnQkFBZ0IsQ0FBQyxpQ0FBaUMsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDbkUsZ0JBQWdCLElBQUk7QUFDcEIsZ0JBQWdCLEtBQUs7QUFDckIsYUFBYSxDQUFDO0FBQ2QsUUFBUSxDQUFDO0FBQ1Q7QUFDQSxRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDeEIsWUFBWSxNQUFNLElBQUksY0FBYztBQUNwQyxnQkFBZ0IsQ0FBQyxrQ0FBa0MsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMzRCxnQkFBZ0IsSUFBSTtBQUNwQixhQUFhLENBQUM7QUFDZCxRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pELFFBQVEsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhO0FBQzNELFlBQVksU0FBUztBQUNyQixZQUFZLFFBQVE7QUFDcEIsWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN6QixTQUFTLENBQUM7QUFDVjtBQUNBO0FBQ0EsUUFBUSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzlDLFFBQVFBLFFBQU0sQ0FBQyxLQUFLLENBQUMsNkJBQTZCLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM5RjtBQUNBLFFBQVEsT0FBTyxRQUFRLENBQUM7QUFDeEIsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxNQUFNLGdCQUFnQixDQUFDLElBQUksRUFBRTtBQUNqQyxRQUFRLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0FBQ2xDO0FBQ0EsUUFBUUEsUUFBTSxDQUFDLEtBQUssQ0FBQyxrQ0FBa0MsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7QUFDbkU7QUFDQTtBQUNBLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZELFFBQVEsSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUN4QixZQUFZQSxRQUFNLENBQUMsS0FBSyxDQUFDLDRDQUE0QyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNqRixZQUFZLE9BQU8sSUFBSSxDQUFDO0FBQ3hCLFFBQVEsQ0FBQztBQUNUO0FBQ0E7QUFDQSxRQUFRLElBQUksUUFBUSxDQUFDO0FBQ3JCLFFBQVEsSUFBSTtBQUNaLFlBQVksUUFBUSxHQUFHLE1BQU0sU0FBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNyRCxRQUFRLENBQUMsQ0FBQyxPQUFPLEtBQUssRUFBRTtBQUN4QixZQUFZLE1BQU0sSUFBSSxVQUFVO0FBQ2hDLGdCQUFnQixDQUFDLHNDQUFzQyxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN4RSxnQkFBZ0IsSUFBSTtBQUNwQixnQkFBZ0IsS0FBSztBQUNyQixhQUFhLENBQUM7QUFDZCxRQUFRLENBQUM7QUFDVDtBQUNBO0FBQ0EsUUFBUSxJQUFJO0FBQ1osWUFBWSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2xELFlBQVlBLFFBQU0sQ0FBQyxLQUFLLENBQUMsK0JBQStCLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFLFlBQVksT0FBTyxRQUFRLENBQUM7QUFDNUIsUUFBUSxDQUFDLENBQUMsT0FBTyxLQUFLLEVBQUU7QUFDeEIsWUFBWSxNQUFNLElBQUksVUFBVTtBQUNoQyxnQkFBZ0IsQ0FBQywyQkFBMkIsRUFBRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDN0QsZ0JBQWdCLElBQUk7QUFDcEIsZ0JBQWdCLEtBQUs7QUFDckIsYUFBYSxDQUFDO0FBQ2QsUUFBUSxDQUFDO0FBQ1QsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksTUFBTSxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUU7QUFDakMsUUFBUSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztBQUNsQztBQUNBO0FBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUN6QyxZQUFZQSxRQUFNLENBQUMsS0FBSyxDQUFDLHNCQUFzQixFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUMzRCxZQUFZLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUM5RCxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVFBLFFBQU0sQ0FBQyxLQUFLLENBQUMsd0JBQXdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0FBQ3pEO0FBQ0E7QUFDQSxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2RCxRQUFRLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDeEIsWUFBWSxNQUFNLElBQUksY0FBYztBQUNwQyxnQkFBZ0IsQ0FBQyxtQ0FBbUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM1RCxnQkFBZ0IsSUFBSTtBQUNwQixhQUFhLENBQUM7QUFDZCxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsSUFBSSxTQUFTLENBQUM7QUFDdEIsUUFBUSxJQUFJO0FBQ1osWUFBWSxTQUFTLEdBQUcsTUFBTSxTQUFTLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQzdELFFBQVEsQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ3hCLFlBQVksTUFBTSxJQUFJLGNBQWM7QUFDcEMsZ0JBQWdCLENBQUMsZ0NBQWdDLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ2xFLGdCQUFnQixJQUFJO0FBQ3BCLGdCQUFnQixLQUFLO0FBQ3JCLGFBQWEsQ0FBQztBQUNkLFFBQVEsQ0FBQztBQUNUO0FBQ0EsUUFBUSxJQUFJLENBQUMsU0FBUyxFQUFFO0FBQ3hCLFlBQVksTUFBTSxJQUFJLGNBQWM7QUFDcEMsZ0JBQWdCLENBQUMsd0NBQXdDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDakUsZ0JBQWdCLElBQUk7QUFDcEIsYUFBYSxDQUFDO0FBQ2QsUUFBUSxDQUFDO0FBQ1Q7QUFDQTtBQUNBLFFBQVEsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBRSxDQUFDLENBQUM7QUFDMUUsUUFBUSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLGFBQWE7QUFDM0QsWUFBWSxJQUFJO0FBQ2hCLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDekIsU0FBUyxDQUFDO0FBQ1Y7QUFDQTtBQUNBLFFBQVEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztBQUM5QyxRQUFRQSxRQUFNLENBQUMsS0FBSyxDQUFDLGlDQUFpQyxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUNsRTtBQUNBLFFBQVEsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZDLElBQUksQ0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFO0FBQ3ZCLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQztBQUMvRCxRQUFRLE1BQU0sU0FBUyxHQUFHO0FBQzFCLFlBQVksS0FBSyxFQUFFLFdBQVc7QUFDOUIsWUFBWSxLQUFLLEVBQUUsbUJBQW1CO0FBQ3RDLFlBQVksTUFBTSxFQUFFLGlCQUFpQjtBQUNyQyxZQUFZLE1BQU0sRUFBRSxrQkFBa0I7QUFDdEMsWUFBWSxLQUFLLEVBQUUsMEJBQTBCO0FBQzdDLFlBQVksS0FBSyxFQUFFLFdBQVc7QUFDOUIsWUFBWSxLQUFLLEVBQUUsWUFBWTtBQUMvQixZQUFZLE1BQU0sRUFBRSxZQUFZO0FBQ2hDLFNBQVMsQ0FBQztBQUNWLFFBQVEsT0FBTyxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksMEJBQTBCLENBQUM7QUFDbEUsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxNQUFNLGlCQUFpQixDQUFDLElBQUksRUFBRTtBQUNsQyxRQUFRLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNsRCxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7QUFDbkIsWUFBWSxNQUFNLElBQUksS0FBSyxDQUFDLENBQUMsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlELFFBQVEsQ0FBQztBQUNULFFBQVEsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3BELFFBQVEsSUFBSSxDQUFDLFFBQVEsRUFBRTtBQUN2QixZQUFZLE1BQU0sSUFBSSxLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckUsUUFBUSxDQUFDO0FBQ1QsUUFBUSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDcEMsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxNQUFNLFFBQVEsQ0FBQyxHQUFHLEVBQUU7QUFDeEIsUUFBUSxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sS0FBSztBQUNoRCxZQUFZLE1BQU0sTUFBTSxHQUFHLElBQUl5RCx3QkFBVSxFQUFFLENBQUM7QUFDNUMsWUFBWSxNQUFNLENBQUMsSUFBSTtBQUN2QixnQkFBZ0IsR0FBRztBQUNuQixnQkFBZ0IsQ0FBQyxJQUFJLEtBQUs7QUFDMUIsb0JBQW9CLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3BELHdCQUF3QixPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ2pELG9CQUFvQixDQUFDLE1BQU07QUFDM0Isd0JBQXdCLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDNUMsb0JBQW9CLENBQUM7QUFDckIsZ0JBQWdCLENBQUM7QUFDakIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLENBQUMsS0FBSyxLQUFLO0FBQzNCLG9CQUFvQixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEMsZ0JBQWdCLENBQUM7QUFDakIsYUFBYSxDQUFDO0FBQ2QsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNYLElBQUksQ0FBQztBQUNMOztBQ3puQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ1ksTUFBQyxTQUFTLEdBQUc7QUFDekI7QUFDQSxJQUFJLGVBQWUsRUFBRSxDQUFDO0FBQ3RCLElBQUksc0JBQXNCLEVBQUUsRUFBRTtBQUM5QjtBQUNBO0FBQ0EsSUFBSSxxQkFBcUIsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtBQUN4RCxJQUFJLGVBQWUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRTtBQUM3QyxJQUFJLHFCQUFxQixFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFO0FBQ3REOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLFdBQVc7QUFDNUMsSUFBSSxNQUFNLFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxQyxJQUFJLE1BQU0sU0FBUyxHQUFHLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN2RDtBQUNBLElBQUksT0FBTyxTQUFTLENBQUMsRUFBRTtBQUN2QixRQUFRLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDekIsUUFBUSxPQUFPLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1QixJQUFJLENBQUMsQ0FBQztBQUNOLENBQUMsR0FBRyxDQUFDO0FBZUw7QUFDQTtBQUNBO0FBQ0E7QUFDWSxNQUFDLGdCQUFnQixHQUFHO0FBQ2hDLElBQUksZ0NBQWdDLEVBQUUsQ0FBQztBQUN2QyxJQUFJLGdDQUFnQyxFQUFFLENBQUM7QUFDdkMsSUFBSSxxQ0FBcUMsRUFBRSxDQUFDO0FBQzVDLElBQUksd0NBQXdDLEVBQUUsQ0FBQztBQUMvQyxJQUFJLGdEQUFnRCxFQUFFLENBQUM7QUFDdkQsSUFBSSxtREFBbUQsRUFBRSxDQUFDO0FBQzFELElBQUksOEJBQThCLEVBQUUsQ0FBQztBQUNyQyxJQUFJLG1DQUFtQyxFQUFFLENBQUM7QUFDMUMsSUFBSSxnQ0FBZ0MsRUFBRSxDQUFDO0FBQ3ZDLElBQUksa0JBQWtCLEVBQUUsSUFBSSxHQUFHLElBQUk7QUFDbkM7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBUyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLGtCQUFrQixFQUFFO0FBQzVFLElBQUksTUFBTSxpQkFBaUIsR0FBRyxJQUFJakMsYUFBTyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN0RDtBQUNBLElBQUksTUFBTSxVQUFVLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztBQUNyRSxJQUFJLElBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQztBQUM3QixJQUFJLE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzNDLElBQUksTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztBQUN6RTtBQUNBO0FBQ0EsSUFBSSxNQUFNLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDM0UsSUFBSSxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUs7QUFDdkMsUUFBUSxNQUFNLGFBQWEsR0FBRyxVQUFVLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckUsUUFBUSxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDbkYsUUFBUSxlQUFlLEdBQUcsZUFBZSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzNFLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDUDtBQUNBO0FBQ0EsSUFBSSxlQUFlLEdBQUcsZUFBZSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDckU7QUFDQTtBQUNBLElBQUksTUFBTSxjQUFjLEdBQUcsSUFBSSxZQUFZLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMzRixJQUFJLE1BQU0saUJBQWlCLEdBQUcsSUFBSSxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM3RjtBQUNBLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDeEQsUUFBUSxjQUFjLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxlQUFlLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMvRCxRQUFRLGNBQWMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLGVBQWUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFFBQVEsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZUFBZSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDL0Q7QUFDQSxRQUFRLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuRixRQUFRLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuRixRQUFRLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuRixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksTUFBTSxhQUFhLEdBQUcsSUFBSW1CLGlCQUFXO0FBQ3pDLFFBQVEsaUJBQWlCO0FBQ3pCLFFBQVEsaUJBQWlCLENBQUMsQ0FBQztBQUMzQixRQUFRLGlCQUFpQixDQUFDLENBQUM7QUFDM0IsUUFBUUosdUJBQWlCO0FBQ3pCLFFBQVFLLHFCQUFlO0FBQ3ZCLEtBQUssQ0FBQztBQUNOLElBQUksYUFBYSxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUM7QUFDOUMsSUFBSSxhQUFhLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNyQztBQUNBO0FBQ0EsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEtBQUssR0FBRyxhQUFhLENBQUM7QUFDOUQsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUMxRSxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsS0FBSyxHQUFHLGtCQUFrQixDQUFDO0FBQ3BFLElBQUksUUFBUSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUN2QztBQUNBLElBQUksT0FBTztBQUNYLFFBQVEsSUFBSSxFQUFFLGlCQUFpQjtBQUMvQixRQUFRLE9BQU8sRUFBRSxhQUFhO0FBQzlCLFFBQVEsSUFBSSxFQUFFLGlCQUFpQjtBQUMvQixRQUFRLFFBQVEsRUFBRSxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUU7QUFDbkQsS0FBSyxDQUFDO0FBQ04sQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVMsc0JBQXNCO0FBQ3RDLElBQUksV0FBVztBQUNmLElBQUksUUFBUTtBQUNaLElBQUksUUFBUTtBQUNaLElBQUkscUJBQXFCO0FBQ3pCLElBQUksVUFBVTtBQUNkLElBQUksUUFBUTtBQUNaLElBQUksYUFBYTtBQUNqQixFQUFFO0FBQ0YsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLE9BQU8sSUFBSSxDQUFDO0FBQy9CO0FBQ0E7QUFDQSxJQUFJLE1BQU0sZUFBZSxHQUFHLElBQUlwQixhQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQy9DLElBQUksTUFBTSxxQkFBcUIsR0FBRyxJQUFJLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNoRSxJQUFJLE1BQU0sd0JBQXdCLEdBQUcsSUFBSSxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUMsR0FBRyxlQUFlLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ2hHO0FBQ0EsSUFBSSxJQUFJLGFBQWEsRUFBRTtBQUN2QjtBQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDaEQsWUFBWSx3QkFBd0IsQ0FBQyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JGLFFBQVEsQ0FBQztBQUNUO0FBQ0E7QUFDQSxRQUFRLElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxRQUFRLEVBQUU7QUFDL0MsWUFBWSxRQUFRLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUM7QUFDbkYsWUFBWSxRQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQztBQUN2RSxZQUFZLFFBQVEsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQztBQUNyRixRQUFRLENBQUM7QUFDVCxJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0EsSUFBSSxLQUFLLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBRTtBQUNoQyxRQUFRLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLEVBQUU7QUFDMUMsWUFBWSxNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDeEMsWUFBWSxNQUFNLEdBQUcsR0FBRyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNuRCxZQUFZLHdCQUF3QixDQUFDLEdBQUcsR0FBRyxRQUFRLEdBQUcsRUFBRSxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDcEYsUUFBUSxDQUFDO0FBQ1QsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLE1BQU0sYUFBYSxHQUFHLElBQUltQixpQkFBVztBQUN6QyxRQUFRLHdCQUF3QjtBQUNoQyxRQUFRLGVBQWUsQ0FBQyxDQUFDO0FBQ3pCLFFBQVEsZUFBZSxDQUFDLENBQUM7QUFDekIsUUFBUUosdUJBQWlCO0FBQ3pCLFFBQVFLLHFCQUFlO0FBQ3ZCLEtBQUssQ0FBQztBQUNOLElBQUksYUFBYSxDQUFDLGNBQWMsR0FBRyxVQUFVLENBQUM7QUFDOUMsSUFBSSxhQUFhLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNyQztBQUNBLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQztBQUN4RCxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDbEUsSUFBSSxRQUFRLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO0FBQ3ZDO0FBQ0EsSUFBSSxPQUFPO0FBQ1gsUUFBUSxJQUFJLEVBQUUsd0JBQXdCO0FBQ3RDLFFBQVEsT0FBTyxFQUFFLGFBQWE7QUFDOUIsUUFBUSxJQUFJLEVBQUUsZUFBZTtBQUM3QixRQUFRLFFBQVEsRUFBRSxFQUFFLFVBQVUsRUFBRSx3QkFBd0IsRUFBRTtBQUMxRCxLQUFLLENBQUM7QUFDTixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBUyx1QkFBdUI7QUFDdkMsSUFBSSxpQkFBaUI7QUFDckIsSUFBSSxXQUFXO0FBQ2YsSUFBSSxRQUFRO0FBQ1osSUFBSSxRQUFRO0FBQ1osSUFBSSxxQkFBcUI7QUFDekIsSUFBSSxVQUFVO0FBQ2QsSUFBSSxRQUFRO0FBQ1osSUFBSSxxQkFBcUIsR0FBRyxLQUFLO0FBQ2pDLEVBQUU7QUFDRixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxPQUFPO0FBQ3BEO0FBQ0EsSUFBSSxJQUFJLHFCQUFxQixFQUFFO0FBQy9CLFFBQVEsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUNwRSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2hELFlBQVksaUJBQWlCLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDckcsUUFBUSxDQUFDO0FBQ1QsSUFBSSxDQUFDO0FBQ0w7QUFDQTtBQUNBLElBQUksS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7QUFDaEMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxFQUFFO0FBQzFDLFlBQVksTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLFlBQVksTUFBTSxHQUFHLEdBQUcscUJBQXFCLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbkQsWUFBWSxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxHQUFHLFFBQVEsR0FBRyxFQUFFLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNwRyxRQUFRLENBQUM7QUFDVCxJQUFJLENBQUM7QUFDTDtBQUNBO0FBQ0EsSUFBSSxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEdBQUcsaUJBQWlCLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQy9GLElBQUksaUJBQWlCLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztBQUNsRSxJQUFJLFFBQVEsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNyRjtBQUNBO0FBQ0EsSUFBSSxJQUFJLFVBQVUsQ0FBQyxRQUFRLEVBQUU7QUFDN0IsUUFBUSxRQUFRLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUM7QUFDL0UsUUFBUSxRQUFRLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQztBQUNuRSxRQUFRLFFBQVEsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQztBQUNqRixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksUUFBUSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztBQUN2QyxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUU7QUFDMUUsSUFBSSxNQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO0FBQ3JFLElBQUksTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDM0M7QUFDQSxJQUFJLE1BQU0scUJBQXFCLEdBQUcsSUFBSXBCLGFBQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDeEQsSUFBSSxNQUFNLHFCQUFxQixHQUFHLElBQUksWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUMsR0FBRyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDMUcsSUFBSSxNQUFNLHdCQUF3QixHQUFHLElBQUksV0FBVyxDQUFDLHFCQUFxQixDQUFDLENBQUMsR0FBRyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUc7QUFDQSxJQUFJLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdkM7QUFDQSxRQUFRLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEscUJBQXFCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEscUJBQXFCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0Q7QUFDQSxRQUFRLHdCQUF3QixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEYsUUFBUSx3QkFBd0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xGLFFBQVEsd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRixRQUFRLHdCQUF3QixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdC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
