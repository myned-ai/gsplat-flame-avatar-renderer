'use strict';

var THREE = require('three');
var GLTFLoader_js = require('three/examples/jsm/loaders/GLTFLoader.js');
var JSZip = require('jszip');
var OrbitControls_js = require('three/examples/jsm/controls/OrbitControls.js');

function _interopNamespaceDefault(e) {
    var n = Object.create(null);
    if (e) {
        Object.keys(e).forEach(function (k) {
            if (k !== 'default') {
                var d = Object.getOwnPropertyDescriptor(e, k);
                Object.defineProperty(n, k, d.get ? d : {
                    enumerable: true,
                    get: function () { return e[k]; }
                });
            }
        });
    }
    n.default = e;
    return Object.freeze(n);
}

var THREE__namespace = /*#__PURE__*/_interopNamespaceDefault(THREE);

/**
 * Log level enumeration for controlling verbosity
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const LogLevel = {
    None: 0,
    Error: 1,
    Warning: 2,
    Info: 3,
    Debug: 4
};

/**
 * Render mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const RenderMode = {
    Always: 0,
    OnChange: 1,
    Never: 2
};

/**
 * Scene format enumeration for supported file types
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar usage - only PLY format is supported.
 */
const SceneFormat = {
    'Ply': 0
};

/**
 * Determine scene format from file path
 * @param {string} path - File path
 * @returns {number|null} Scene format or null if unknown
 */
const sceneFormatFromPath = (path) => {
    if (path.endsWith('.ply')) return SceneFormat.Ply;
    return null;
};

/**
 * Scene reveal mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const SceneRevealMode = {
    Default: 0,
    Gradual: 1,
    Instant: 2
};

/**
 * Splat render mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const SplatRenderMode = {
    ThreeD: 0,
    TwoD: 1
};

/**
 * EngineConstants
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Core constants for Gaussian Splat rendering.
 */

let Constants$1 = class Constants {
    static DefaultSplatSortDistanceMapPrecision = 16;
    static MemoryPageSize = 65536;
    static BytesPerFloat = 4;
    static BytesPerInt = 4;
    static MaxScenes = 32;
    static ProgressiveLoadSectionSize = 262144;
    static ProgressiveLoadSectionDelayDuration = 15;
    static SphericalHarmonics8BitCompressionRange = 3;
};

const DefaultSphericalHarmonics8BitCompressionRange = Constants$1.SphericalHarmonics8BitCompressionRange;

// SplatMesh constants
const COVARIANCES_ELEMENTS_PER_SPLAT$1 = 6;
const CENTER_COLORS_ELEMENTS_PER_SPLAT$1 = 4;

const COVARIANCES_ELEMENTS_PER_TEXEL_STORED$1 = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED$1 = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED$1 = 6;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED$1 = 8;
const SCALES_ROTATIONS_ELEMENTS_PER_TEXEL$1 = 4;
const CENTER_COLORS_ELEMENTS_PER_TEXEL$1 = 4;
const SCENE_INDEXES_ELEMENTS_PER_TEXEL$1 = 1;

const SCENE_FADEIN_RATE_FAST$1 = 0.012;
const SCENE_FADEIN_RATE_GRADUAL$1 = 0.003;

// Viewer constants
const THREE_CAMERA_FOV = 50;
const MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT = 0.5;
const CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION = 60;
const MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER = 1500000;
const FOCUS_MARKER_FADE_IN_SPEED = 0.4;
const FOCUS_MARKER_FADE_OUT_SPEED = 0.12;

// Internal load types for loaders
const InternalLoadType = {
    DirectToSplatBuffer: 0,
    DirectToSplatArray: 1,
    DownloadBeforeProcessing: 2
};

// Loader status
const LoaderStatus = {
    'Downloading': 0,
    'Processing': 1,
    'Done': 2
};

/**
 * LoaderUtils
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Loader utilities for decoding text and resolving URLs.
 */

class LoaderUtils {

    /**
     * @deprecated Use TextDecoder instead
     */
    static decodeText(array) {
        if (typeof TextDecoder !== 'undefined') {
            return new TextDecoder().decode(array);
        }

        // Fallback for environments without TextDecoder
        let s = '';

        for (let i = 0, il = array.length; i < il; i++) {
            // Implicitly assumes little-endian.
            s += String.fromCharCode(array[i]);
        }

        try {
            // merges multi-byte utf-8 characters.
            return decodeURIComponent(escape(s));
        } catch {
            // see #16358 - ignore decoding errors
            return s;
        }
    }

    static extractUrlBase(url) {
        const index = url.lastIndexOf('/');

        if (index === -1) return './';

        return url.slice(0, index + 1);
    }

    static resolveURL(url, path) {
        // Invalid URL
        if (typeof url !== 'string' || url === '') return '';

        // Host Relative URL
        if (/^https?:\/\//i.test(path) && /^\//.test(url)) {
            path = path.replace(/(^https?:\/\/[^/]+).*/i, '$1');
        }

        // Absolute URL http://,https://,//
        if (/^(https?:)?\/\//i.test(url)) return url;

        // Data URI
        if (/^data:.*,.*$/i.test(url)) return url;

        // Blob URL
        if (/^blob:.*$/i.test(url)) return url;

        // Relative URL
        return path + url;
    }
}

/**
 * ApplicationError - Base error class for all application errors
 *
 * Provides structured error handling with error codes and cause tracking.
 * All domain-specific errors should extend this class.
 *
 * @extends Error
 */
class ApplicationError extends Error {
    /**
     * Create an ApplicationError
     * @param {string} message - Human-readable error message
     * @param {string} code - Machine-readable error code for programmatic handling
     * @param {Error} [cause=null] - Original error that caused this error (for error chaining)
     */
    constructor(message, code, cause = null) {
        super(message);
        this.name = this.constructor.name;
        this.code = code;
        this.cause = cause;

        // Capture stack trace, excluding constructor call from it
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
        }
    }

    /**
     * Convert error to JSON for logging/transmission
     * @returns {object} JSON representation of error
     */
    toJSON() {
        return {
            name: this.name,
            message: this.message,
            code: this.code,
            stack: this.stack,
            cause: this.cause ? {
                name: this.cause.name,
                message: this.cause.message
            } : null
        };
    }
}

/**
 * ValidationError - Thrown when input validation fails
 *
 * Used for invalid parameters, out-of-range values, or malformed data.
 *
 * @extends ApplicationError
 */
class ValidationError extends ApplicationError {
    /**
     * Create a ValidationError
     * @param {string} message - Validation failure description
     * @param {string} field - Name of the field that failed validation
     * @param {Error} [cause=null] - Original error that caused this validation failure
     */
    constructor(message, field, cause = null) {
        super(message, 'VALIDATION_ERROR', cause);
        this.field = field;
    }
}

/**
 * NetworkError - Thrown when network operations fail
 *
 * Used for fetch failures, timeouts, or HTTP error responses.
 *
 * @extends ApplicationError
 */
class NetworkError extends ApplicationError {
    /**
     * Create a NetworkError
     * @param {string} message - Network error description
     * @param {number} [statusCode=0] - HTTP status code (if applicable)
     * @param {Error} [cause=null] - Original error that caused this network failure
     */
    constructor(message, statusCode = 0, cause = null) {
        super(message, 'NETWORK_ERROR', cause);
        this.statusCode = statusCode;
    }
}

/**
 * AssetLoadError - Thrown when asset loading fails
 *
 * Used for failures loading models, textures, or other asset files.
 *
 * @extends ApplicationError
 */
class AssetLoadError extends ApplicationError {
    /**
     * Create an AssetLoadError
     * @param {string} message - Asset load failure description
     * @param {string} assetPath - Path to the asset that failed to load
     * @param {Error} [cause=null] - Original error that caused this load failure
     */
    constructor(message, assetPath, cause = null) {
        super(message, 'ASSET_LOAD_ERROR', cause);
        this.assetPath = assetPath;
    }
}

/**
 * ResourceDisposedError - Thrown when attempting to use a disposed resource
 *
 * Used to prevent use-after-dispose bugs.
 *
 * @extends ApplicationError
 */
class ResourceDisposedError extends ApplicationError {
    /**
     * Create a ResourceDisposedError
     * @param {string} resourceName - Name of the disposed resource
     */
    constructor(resourceName) {
        super(
            `Cannot use ${resourceName}: resource has been disposed`,
            'RESOURCE_DISPOSED_ERROR'
        );
        this.resourceName = resourceName;
    }
}

/**
 * InitializationError - Thrown when initialization fails
 *
 * Used when required setup steps fail or prerequisites are not met.
 *
 * @extends ApplicationError
 */
class InitializationError extends ApplicationError {
    /**
     * Create an InitializationError
     * @param {string} message - Initialization failure description
     * @param {string} component - Name of component that failed to initialize
     * @param {Error} [cause=null] - Original error that caused this initialization failure
     */
    constructor(message, component, cause = null) {
        super(message, 'INITIALIZATION_ERROR', cause);
        this.component = component;
    }
}

/**
 * ParseError - Thrown when parsing data fails
 *
 * Used for malformed file formats, invalid JSON, or corrupt data.
 *
 * @extends ApplicationError
 */
let ParseError$1 = class ParseError extends ApplicationError {
    /**
     * Create a ParseError
     * @param {string} message - Parse failure description
     * @param {string} dataType - Type of data being parsed (e.g., 'JSON', 'PLY', 'GLB')
     * @param {Error} [cause=null] - Original error that caused this parse failure
     */
    constructor(message, dataType, cause = null) {
        super(message, 'PARSE_ERROR', cause);
        this.dataType = dataType;
    }
};

/**
 * Logger - Structured logging system
 *
 * Provides leveled logging with optional output suppression for production.
 * Replaces direct console.log calls for better control and debugging.
 */

/**
 * Logger levels in order of severity
 * Note: Named LoggerLevel to avoid conflict with existing LogLevel enum
 */
const LoggerLevel = Object.freeze({
    DEBUG: 0,
    INFO: 1,
    WARN: 2,
    ERROR: 3,
    NONE: 4
});

/**
 * Logger class for structured application logging
 */
class Logger {
    /**
     * Create a Logger instance
     * @param {string} namespace - Logger namespace (e.g., 'Renderer', 'Loader')
     * @param {number} [minLevel=LoggerLevel.INFO] - Minimum log level to output
     */
    constructor(namespace, minLevel = LoggerLevel.INFO) {
        this.namespace = namespace;
        this.minLevel = minLevel;
    }

    /**
     * Set minimum log level
     * @param {number} level - Minimum level from LoggerLevel enum
     */
    setLevel(level) {
        this.minLevel = level;
    }

    /**
     * Format log message with namespace and timestamp
     * @private
     * @param {string} level - Log level name
     * @param {Array} args - Log arguments
     * @returns {Array} Formatted arguments
     */
    _format(level, args) {
        const timestamp = new Date().toISOString();
        const prefix = `[${timestamp}] [${level}] [${this.namespace}]`;
        return [prefix, ...args];
    }

    /**
     * Log debug message (most verbose)
     * @param {...*} args - Arguments to log
     */
    debug(...args) {
        if (this.minLevel <= LoggerLevel.DEBUG) {
            console.debug(...this._format('DEBUG', args));
        }
    }

    /**
     * Log info message
     * @param {...*} args - Arguments to log
     */
    info(...args) {
        if (this.minLevel <= LoggerLevel.INFO) {
            console.info(...this._format('INFO', args));
        }
    }

    /**
     * Log warning message
     * @param {...*} args - Arguments to log
     */
    warn(...args) {
        if (this.minLevel <= LoggerLevel.WARN) {
            console.warn(...this._format('WARN', args));
        }
    }

    /**
     * Log error message
     * @param {...*} args - Arguments to log
     */
    error(...args) {
        if (this.minLevel <= LoggerLevel.ERROR) {
            console.error(...this._format('ERROR', args));
        }
    }

    /**
     * Log error with stack trace
     * @param {Error} error - Error object
     * @param {string} [context] - Additional context
     */
    errorWithTrace(error, context = '') {
        if (this.minLevel <= LoggerLevel.ERROR) {
            const contextStr = context ? ` Context: ${context}` : '';
            console.error(...this._format('ERROR', [
                `${error.message}${contextStr}`,
                '\nStack:', error.stack
            ]));
        }
    }

    /**
     * Create a child logger with extended namespace
     * @param {string} childNamespace - Child namespace to append
     * @returns {Logger} New logger with combined namespace
     */
    child(childNamespace) {
        return new Logger(`${this.namespace}:${childNamespace}`, this.minLevel);
    }
}

/**
 * Global logger registry
 * @private
 */
const loggers = new Map();

/**
 * Global log level (affects all new loggers)
 * @private
 */
let globalLogLevel = LoggerLevel.INFO;

/**
 * Set global log level for all loggers
 * @param {number} level - Log level from LoggerLevel enum
 */
function setGlobalLogLevel(level) {
    globalLogLevel = level;
    // Update existing loggers
    for (const logger of loggers.values()) {
        logger.setLevel(level);
    }
}

/**
 * Get or create a logger for a namespace
 * @param {string} namespace - Logger namespace
 * @returns {Logger} Logger instance
 */
function getLogger(namespace) {
    if (!loggers.has(namespace)) {
        loggers.set(namespace, new Logger(namespace, globalLogLevel));
    }
    return loggers.get(namespace);
}

/**
 * Configure logging for production (suppress all logs)
 */
function configureForProduction() {
    setGlobalLogLevel(LoggerLevel.NONE);
}

/**
 * Configure logging for development (show all logs)
 */
function configureForDevelopment() {
    setGlobalLogLevel(LoggerLevel.DEBUG);
}

// Export default logger for convenience
getLogger('App');

/**
 * Core utility functions for Gaussian Splat rendering
 *
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 *
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const logger$9 = getLogger('Util');

/**
 * Custom error for aborted operations
 * @deprecated Use NetworkError instead for consistency
 */
class AbortedPromiseError extends Error {
    constructor(msg) {
        super(msg);
        this.name = 'AbortedPromiseError';
        this.code = 'ABORTED';
    }
}

/**
 * Fetch with progress tracking using standard AbortController
 *
 * @param {string} path - URL to fetch
 * @param {Function} [onProgress] - Progress callback (percent, percentLabel, chunk, fileSize)
 * @param {boolean} [saveChunks=true] - Whether to save and return downloaded chunks
 * @param {object} [headers] - Optional HTTP headers
 * @returns {Promise<ArrayBuffer>} Promise that resolves with downloaded data
 * @throws {NetworkError} If fetch fails or is aborted
 */
const fetchWithProgress = function(path, onProgress, saveChunks = true, headers) {

    const abortController = new AbortController();
    const signal = abortController.signal;
    let aborted = false;

    let onProgressCalledAtComplete = false;
    const localOnProgress = (percent, percentLabel, chunk, fileSize) => {
        if (onProgress && !onProgressCalledAtComplete) {
            try {
                onProgress(percent, percentLabel, chunk, fileSize);
                if (percent === 100) {
                    onProgressCalledAtComplete = true;
                }
            } catch (error) {
                // Don't let progress callback errors break the download
                logger$9.error('Error in progress callback:', error);
            }
        }
    };

    const promise = new Promise((resolve, reject) => {
        const fetchOptions = { signal };
        if (headers) fetchOptions.headers = headers;

        fetch(path, fetchOptions)
        .then(async (data) => {
            // Handle HTTP error responses
            if (!data.ok) {
                let errorText = '';
                try {
                    errorText = await data.text();
                } catch {
                    // Ignore if we can't read error text
                }
                reject(new NetworkError(
                    `Fetch failed: ${data.statusText}${errorText ? ' - ' + errorText : ''}`,
                    data.status
                ));
                return;
            }

            const reader = data.body?.getReader();
            if (!reader) {
                reject(new NetworkError('Response body is not readable', 0));
                return;
            }

            let bytesDownloaded = 0;
            const _fileSize = data.headers.get('Content-Length');
            const fileSize = _fileSize ? parseInt(_fileSize, 10) : undefined;

            const chunks = [];

            while (!aborted) {
                try {
                    const { value: chunk, done } = await reader.read();
                    if (done) {
                        localOnProgress(100, '100%', chunk, fileSize);
                        if (saveChunks) {
                            const buffer = new Blob(chunks).arrayBuffer();
                            resolve(buffer);
                        } else {
                            resolve();
                        }
                        break;
                    }
                    bytesDownloaded += chunk.length;
                    let percent;
                    let percentLabel;
                    if (fileSize !== undefined) {
                        percent = (bytesDownloaded / fileSize) * 100;
                        percentLabel = `${percent.toFixed(2)}%`;
                    }
                    if (saveChunks) {
                        chunks.push(chunk);
                    }
                    localOnProgress(percent, percentLabel, chunk, fileSize);
                } catch (error) {
                    reject(new NetworkError(
                        `Error reading response stream: ${error.message}`,
                        0,
                        error
                    ));
                    return;
                }
            }
        })
        .catch((error) => {
            // Don't wrap if already a NetworkError
            if (error instanceof NetworkError) {
                reject(error);
            } else if (error.name === 'AbortError') {
                reject(new NetworkError('Fetch aborted by user', 0, error));
            } else {
                reject(new NetworkError(
                    `Fetch failed: ${error.message || 'Unknown error'}`,
                    0,
                    error
                ));
            }
        });
    });

    // Attach abort functionality to the promise
    promise.abort = (reason) => {
        aborted = true;
        abortController.abort(reason);
    };
    promise.abortController = abortController;

    return promise;
};

// Clamp value between min and max
const clamp = function(val, min, max) {
    return Math.max(Math.min(val, max), min);
};

// Get current time in seconds
const getCurrentTime = function() {
    return performance.now() / 1000;
};

// Dispose all meshes in a scene graph
const disposeAllMeshes = (object3D) => {
    if (object3D.geometry) {
        object3D.geometry.dispose();
        object3D.geometry = null;
    }
    if (object3D.material) {
        object3D.material.dispose();
        object3D.material = null;
    }
    if (object3D.children) {
        for (let child of object3D.children) {
            disposeAllMeshes(child);
        }
    }
};

// Delayed execution helper
const delayedExecute = (func, fast) => {
    return new Promise((resolve) => {
        window.setTimeout(() => {
            resolve(func());
        }, fast ? 1 : 50);
    });
};

// Get spherical harmonics component count for degree
const getSphericalHarmonicsComponentCountForDegree = (sphericalHarmonicsDegree = 0) => {
    switch (sphericalHarmonicsDegree) {
        case 1:
            return 9;
        case 2:
            return 24;
    }
    return 0;
};

// Create native promise with extracted components
const nativePromiseWithExtractedComponents = () => {
    let resolver;
    let rejecter;
    const promise = new Promise((resolve, reject) => {
        resolver = resolve;
        rejecter = reject;
    });
    return {
        'promise': promise,
        'resolve': resolver,
        'reject': rejecter
    };
};

/**
 * Create a promise with extracted resolve/reject functions and optional abort capability
 * Uses standard Promise with attached abort method
 */
const abortablePromiseWithExtractedComponents = (abortHandler) => {
    let resolver;
    let rejecter;
    const promise = new Promise((resolve, reject) => {
        resolver = resolve;
        rejecter = reject;
    });
    
    // Attach abort method to promise
    promise.abort = abortHandler || (() => {});
    
    return {
        'promise': promise,
        'resolve': resolver,
        'reject': rejecter
    };
};

// Semver class for version handling
class Semver {
    constructor(major, minor, patch) {
        this.major = major;
        this.minor = minor;
        this.patch = patch;
    }

    toString() {
        return `${this.major}_${this.minor}_${this.patch}`;
    }
}

// iOS detection
function isIOS() {
    const ua = navigator.userAgent;
    return ua.indexOf('iPhone') > 0 || ua.indexOf('iPad') > 0;
}

function getIOSSemever() {
    if (isIOS()) {
        const extract = navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
        return new Semver(
            parseInt(extract[1] || 0, 10),
            parseInt(extract[2] || 0, 10),
            parseInt(extract[3] || 0, 10)
        );
    }
    return null;
}

// Half float conversion utilities
const toHalfFloat$1 = THREE.DataUtils.toHalfFloat.bind(THREE.DataUtils);
const fromHalfFloat$1 = THREE.DataUtils.fromHalfFloat.bind(THREE.DataUtils);
const DefaultSphericalHarmonics8BitCompressionHalfRange = DefaultSphericalHarmonics8BitCompressionRange / 2.0;

// Uncompress float based on compression level
const toUncompressedFloat$1 = (f, compressionLevel, isSH = false, range8BitMin, range8BitMax) => {
    if (compressionLevel === 0) {
        return f;
    } else if (compressionLevel === 1 || (compressionLevel === 2 && !isSH)) {
        return THREE.DataUtils.fromHalfFloat(f);
    } else if (compressionLevel === 2) {
        return fromUint8$1(f, range8BitMin, range8BitMax);
    }
};

// Convert to uint8
const toUint8$1 = (v, rangeMin, rangeMax) => {
    v = clamp(v, rangeMin, rangeMax);
    const range = (rangeMax - rangeMin);
    return clamp(Math.floor((v - rangeMin) / range * 255), 0, 255);
};

// Convert from uint8
const fromUint8$1 = (v, rangeMin, rangeMax) => {
    const range = (rangeMax - rangeMin);
    return (v / 255 * range + rangeMin);
};

// Half float to uint8
const fromHalfFloatToUint8$1 = (v, rangeMin, rangeMax) => {
    return toUint8$1(fromHalfFloat$1(v), rangeMin, rangeMax);
};

// Uint8 to half float
const fromUint8ToHalfFloat = (v, rangeMin, rangeMax) => {
    return toHalfFloat$1(fromUint8$1(v, rangeMin, rangeMax));
};

// Read float from DataView based on compression level
const dataViewFloatForCompressionLevel$1 = (dataView, floatIndex, compressionLevel, isSH = false) => {
    if (compressionLevel === 0) {
        return dataView.getFloat32(floatIndex * 4, true);
    } else if (compressionLevel === 1 || (compressionLevel === 2 && !isSH)) {
        return dataView.getUint16(floatIndex * 2, true);
    } else {
        return dataView.getUint8(floatIndex, true);
    }
};

// Convert between compression levels
const convertBetweenCompressionLevels = function() {
    const noop = (v) => v;

    return function(val, fromLevel, toLevel, isSH = false) {
        if (fromLevel === toLevel) return val;
        let outputConversionFunc = noop;

        if (fromLevel === 2 && isSH) {
            if (toLevel === 1) outputConversionFunc = fromUint8ToHalfFloat;
            else if (toLevel === 0) {
                outputConversionFunc = fromUint8$1;
            }
        } else if (fromLevel === 2 || fromLevel === 1) {
            if (toLevel === 0) outputConversionFunc = fromHalfFloat$1;
            else if (toLevel === 2) {
                if (!isSH) outputConversionFunc = noop;
                else outputConversionFunc = fromHalfFloatToUint8$1;
            }
        } else if (fromLevel === 0) {
            if (toLevel === 1) outputConversionFunc = toHalfFloat$1;
            else if (toLevel === 2) {
                if (!isSH) outputConversionFunc = toHalfFloat$1;
                else outputConversionFunc = toUint8$1;
            }
        }

        return outputConversionFunc(val);
    };
}();

// Copy between buffers
const copyBetweenBuffers$1 = (srcBuffer, srcOffset, destBuffer, destOffset, byteCount = 0) => {
    const src = new Uint8Array(srcBuffer, srcOffset);
    const dest = new Uint8Array(destBuffer, destOffset);
    for (let i = 0; i < byteCount; i++) {
        dest[i] = src[i];
    }
};

// Float to half float conversion
const floatToHalf = function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(val) {
        floatView[0] = val;
        const x = int32View[0];

        let bits = (x >> 16) & 0x8000;
        let m = (x >> 12) & 0x07ff;
        const e = (x >> 23) & 0xff;

        if (e < 103) return bits;

        if (e > 142) {
            bits |= 0x7c00;
            bits |= ((e == 255) ? 0 : 1) && (x & 0x007fffff);
            return bits;
        }

        if (e < 113) {
            m |= 0x0800;
            bits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);
            return bits;
        }

        bits |= ((e - 112) << 10) | (m >> 1);
        bits += m & 1;
        return bits;
    };
}();

// Encode float as uint
const uintEncodedFloat$1 = function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(f) {
        floatView[0] = f;
        return int32View[0];
    };
}();

// RGBA to integer
const rgbaToInteger = function(r, g, b, a) {
    return r + (g << 8) + (b << 16) + (a << 24);
};

// RGBA array to integer
const rgbaArrayToInteger = function(arr, offset) {
    return arr[offset] + (arr[offset + 1] << 8) + (arr[offset + 2] << 16) + (arr[offset + 3] << 24);
};

// BASE_COMPONENT_COUNT for UncompressedSplatArray
const BASE_COMPONENT_COUNT$1 = 14;

/**
 * ValidationUtils - Security-focused validation utilities
 *
 * CRITICAL: All external inputs MUST be validated before use.
 * This module provides allowlist-based validation following security best practices.
 */


/**
 * Allowed URL protocols (allowlist approach)
 */
const ALLOWED_PROTOCOLS = Object.freeze(['https:', 'http:', 'blob:', 'data:']);

/**
 * Validate and sanitize a URL
 *
 * @param {string} url - URL to validate
 * @param {string} [baseURL] - Base URL for relative URLs (defaults to window.location.href)
 * @returns {string} Sanitized absolute URL
 * @throws {ValidationError} If URL is invalid or uses disallowed protocol
 */
function validateUrl(url, baseURL) {
    if (typeof url !== 'string' || url.length === 0) {
        throw new ValidationError('URL must be a non-empty string', 'url');
    }

    let parsed;
    try {
        // Use base URL if provided, otherwise use window location (browser only)
        const base = baseURL || (typeof window !== 'undefined' ? window.location.href : undefined);
        parsed = new URL(url, base);
    } catch (error) {
        throw new ValidationError(
            `Invalid URL format: ${url}`,
            'url',
            error
        );
    }

    // Validate protocol against allowlist
    if (!ALLOWED_PROTOCOLS.includes(parsed.protocol)) {
        throw new ValidationError(
            `Disallowed protocol: ${parsed.protocol}. Allowed protocols: ${ALLOWED_PROTOCOLS.join(', ')}`,
            'url.protocol'
        );
    }

    return parsed.href;
}

/**
 * Validate asset path to prevent path traversal attacks
 *
 * @param {string} path - File path to validate
 * @returns {string} Validated path
 * @throws {ValidationError} If path contains traversal sequences
 */
function validateAssetPath(path) {
    if (typeof path !== 'string' || path.length === 0) {
        throw new ValidationError('Asset path must be a non-empty string', 'path');
    }

    // Check for path traversal sequences
    const dangerousPatterns = ['../', '..\\', '%2e%2e/', '%2e%2e\\'];
    const normalizedPath = path.toLowerCase();

    for (const pattern of dangerousPatterns) {
        if (normalizedPath.includes(pattern)) {
            throw new ValidationError(
                `Path traversal detected in asset path: ${path}`,
                'path'
            );
        }
    }

    return path;
}

/**
 * Validate file extension against allowlist
 *
 * @param {string} filename - Filename to validate
 * @param {string[]} allowedExtensions - Array of allowed extensions (e.g., ['.ply', '.glb'])
 * @returns {string} Validated filename
 * @throws {ValidationError} If extension is not allowed
 */
function validateFileExtension(filename, allowedExtensions) {
    if (typeof filename !== 'string' || filename.length === 0) {
        throw new ValidationError('Filename must be a non-empty string', 'filename');
    }

    if (!Array.isArray(allowedExtensions) || allowedExtensions.length === 0) {
        throw new ValidationError(
            'allowedExtensions must be a non-empty array',
            'allowedExtensions'
        );
    }

    const extension = filename.slice(filename.lastIndexOf('.')).toLowerCase();
    const normalizedAllowed = allowedExtensions.map(ext => ext.toLowerCase());

    if (!normalizedAllowed.includes(extension)) {
        throw new ValidationError(
            `File extension ${extension} not allowed. Allowed: ${allowedExtensions.join(', ')}`,
            'filename'
        );
    }

    return filename;
}

/**
 * Validate numeric value is within range
 *
 * @param {number} value - Value to validate
 * @param {number} min - Minimum allowed value (inclusive)
 * @param {number} max - Maximum allowed value (inclusive)
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated value
 * @throws {ValidationError} If value is not a number or out of range
 */
function validateNumberInRange(value, min, max, fieldName) {
    if (typeof value !== 'number' || isNaN(value)) {
        throw new ValidationError(
            `${fieldName} must be a valid number`,
            fieldName
        );
    }

    if (value < min || value > max) {
        throw new ValidationError(
            `${fieldName} must be between ${min} and ${max}, got ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate integer value
 *
 * @param {number} value - Value to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated integer
 * @throws {ValidationError} If value is not an integer
 */
function validateInteger(value, fieldName) {
    if (typeof value !== 'number' || !Number.isInteger(value)) {
        throw new ValidationError(
            `${fieldName} must be an integer`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate positive integer
 *
 * @param {number} value - Value to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated positive integer
 * @throws {ValidationError} If value is not a positive integer
 */
function validatePositiveInteger(value, fieldName) {
    validateInteger(value, fieldName);

    if (value <= 0) {
        throw new ValidationError(
            `${fieldName} must be positive, got ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate object has required properties
 *
 * @param {object} obj - Object to validate
 * @param {string[]} requiredProps - Array of required property names
 * @param {string} objectName - Name of object for error messages
 * @returns {object} Validated object
 * @throws {ValidationError} If object is invalid or missing required properties
 */
function validateRequiredProperties(obj, requiredProps, objectName) {
    if (obj === null || typeof obj !== 'object') {
        throw new ValidationError(
            `${objectName} must be an object`,
            objectName
        );
    }

    for (const prop of requiredProps) {
        if (!(prop in obj) || obj[prop] === undefined) {
            throw new ValidationError(
                `${objectName} missing required property: ${prop}`,
                `${objectName}.${prop}`
            );
        }
    }

    return obj;
}

/**
 * Validate array buffer
 *
 * @param {ArrayBuffer} buffer - Buffer to validate
 * @param {string} fieldName - Name of field for error messages
 * @param {number} [minSize=0] - Minimum size in bytes
 * @returns {ArrayBuffer} Validated buffer
 * @throws {ValidationError} If buffer is invalid or too small
 */
function validateArrayBuffer(buffer, fieldName, minSize = 0) {
    if (!(buffer instanceof ArrayBuffer)) {
        throw new ValidationError(
            `${fieldName} must be an ArrayBuffer`,
            fieldName
        );
    }

    if (buffer.byteLength < minSize) {
        throw new ValidationError(
            `${fieldName} must be at least ${minSize} bytes, got ${buffer.byteLength}`,
            fieldName
        );
    }

    return buffer;
}

/**
 * Validate enum value against allowed values
 *
 * @param {*} value - Value to validate
 * @param {Array} allowedValues - Array of allowed values
 * @param {string} fieldName - Name of field for error messages
 * @returns {*} Validated value
 * @throws {ValidationError} If value is not in allowed values
 */
function validateEnum(value, allowedValues, fieldName) {
    if (!allowedValues.includes(value)) {
        throw new ValidationError(
            `${fieldName} must be one of: ${allowedValues.join(', ')}. Got: ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate callback function
 *
 * @param {Function} callback - Callback to validate
 * @param {string} fieldName - Name of field for error messages
 * @param {boolean} [required=true] - Whether callback is required
 * @returns {Function|null} Validated callback or null if not required and not provided
 * @throws {ValidationError} If callback is required but not a function
 */
function validateCallback(callback, fieldName, required = true) {
    if (callback === null || callback === undefined) {
        if (required) {
            throw new ValidationError(
                `${fieldName} is required`,
                fieldName
            );
        }
        return null;
    }

    if (typeof callback !== 'function') {
        throw new ValidationError(
            `${fieldName} must be a function`,
            fieldName
        );
    }

    return callback;
}

/**
 * Validate hex color string
 *
 * @param {string} value - Color string to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {string} Validated color string
 * @throws {ValidationError} If color format is invalid
 */
function validateHexColor(value, fieldName) {
    if (typeof value !== 'string') {
        throw new ValidationError(
            `${fieldName} must be a string`,
            fieldName
        );
    }

    const hexColorRegex = /^(#|0x)[0-9A-Fa-f]{6}$/i;
    if (!hexColorRegex.test(value)) {
        throw new ValidationError(
            `${fieldName} must be a valid hex color (e.g., #FFFFFF or 0xFFFFFF)`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate DOM element
 *
 * @param {HTMLElement} element - Element to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {HTMLElement} Validated element
 * @throws {ValidationError} If element is not a valid DOM element
 */
function validateDOMElement(element, fieldName) {
    if (typeof HTMLElement !== 'undefined' && !(element instanceof HTMLElement)) {
        throw new ValidationError(
            `${fieldName} must be a valid HTML element`,
            fieldName
        );
    }

    return element;
}

/**
 * ObjectPool - Memory-efficient object pooling
 *
 * Reduces garbage collection pressure by reusing objects instead of
 * repeatedly allocating and deallocating them. Critical for real-time rendering.
 */


/**
 * Generic object pool
 */
class ObjectPool {
    /**
     * Create an ObjectPool
     * @param {Function} factory - Function that creates new objects
     * @param {Function} reset - Function that resets an object to initial state
     * @param {number} [initialSize=10] - Number of objects to pre-allocate
     */
    constructor(factory, reset, initialSize = 10) {
        this._factory = factory;
        this._reset = reset;
        this._pool = [];
        this._allocated = 0;
        this._maxSize = initialSize * 10; // Prevent unbounded growth

        // Pre-allocate initial objects
        for (let i = 0; i < initialSize; i++) {
            this._pool.push(factory());
        }
    }

    /**
     * Acquire an object from the pool
     * @returns {*} Pooled object
     */
    acquire() {
        this._allocated++;
        if (this._pool.length > 0) {
            return this._pool.pop();
        }
        // Pool exhausted, create new object
        return this._factory();
    }

    /**
     * Release an object back to the pool
     * @param {*} obj - Object to return to pool
     */
    release(obj) {
        this._allocated--;
        if (this._pool.length < this._maxSize) {
            this._reset(obj);
            this._pool.push(obj);
        }
        // If pool is at max size, let object be garbage collected
    }

    /**
     * Release multiple objects
     * @param {Array} objects - Objects to return to pool
     */
    releaseAll(objects) {
        for (const obj of objects) {
            this.release(obj);
        }
    }

    /**
     * Get pool statistics
     * @returns {object} Pool stats
     */
    getStats() {
        return {
            available: this._pool.length,
            allocated: this._allocated,
            maxSize: this._maxSize
        };
    }

    /**
     * Clear the pool and release all objects
     */
    dispose() {
        this._pool.length = 0;
        this._allocated = 0;
    }
}

/**
 * Pre-configured pools for common Three.js objects
 */

/**
 * Vector3 pool
 * @type {ObjectPool}
 */
const vector3Pool = new ObjectPool(
    () => new THREE.Vector3(),
    (v) => v.set(0, 0, 0),
    50 // Pre-allocate 50 vectors
);

/**
 * Matrix4 pool
 * @type {ObjectPool}
 */
const matrix4Pool = new ObjectPool(
    () => new THREE.Matrix4(),
    (m) => m.identity(),
    20 // Pre-allocate 20 matrices
);

/**
 * Quaternion pool
 * @type {ObjectPool}
 */
const quaternionPool = new ObjectPool(
    () => new THREE.Quaternion(),
    (q) => q.set(0, 0, 0, 1),
    30 // Pre-allocate 30 quaternions
);

/**
 * Euler pool
 * @type {ObjectPool}
 */
const eulerPool = new ObjectPool(
    () => new THREE.Euler(),
    (e) => e.set(0, 0, 0),
    30 // Pre-allocate 30 eulers
);

/**
 * Scoped pool allocation helper
 *
 * Automatically releases pooled objects when scope exits.
 * Use with try/finally to ensure cleanup.
 *
 * @example
 * const scope = new PoolScope();
 * try {
 *   const v1 = scope.vector3();
 *   const v2 = scope.vector3();
 *   // Use vectors...
 * } finally {
 *   scope.releaseAll();
 * }
 */
class PoolScope {
    constructor() {
        this._allocated = [];
    }

    /**
     * Acquire a Vector3 from pool
     * @returns {Vector3} Pooled vector
     */
    vector3() {
        const obj = vector3Pool.acquire();
        this._allocated.push({ pool: vector3Pool, obj });
        return obj;
    }

    /**
     * Acquire a Matrix4 from pool
     * @returns {Matrix4} Pooled matrix
     */
    matrix4() {
        const obj = matrix4Pool.acquire();
        this._allocated.push({ pool: matrix4Pool, obj });
        return obj;
    }

    /**
     * Acquire a Quaternion from pool
     * @returns {Quaternion} Pooled quaternion
     */
    quaternion() {
        const obj = quaternionPool.acquire();
        this._allocated.push({ pool: quaternionPool, obj });
        return obj;
    }

    /**
     * Acquire an Euler from pool
     * @returns {Euler} Pooled euler
     */
    euler() {
        const obj = eulerPool.acquire();
        this._allocated.push({ pool: eulerPool, obj });
        return obj;
    }

    /**
     * Release all objects allocated in this scope
     */
    releaseAll() {
        for (const { pool, obj } of this._allocated) {
            pool.release(obj);
        }
        this._allocated.length = 0;
    }

    /**
     * Get count of allocated objects in this scope
     * @returns {number} Number of allocated objects
     */
    getAllocatedCount() {
        return this._allocated.length;
    }
}

/**
 * Module-level temporary objects for hot-path reuse
 * IMPORTANT: These are NOT thread-safe. Only use in single-threaded contexts.
 * Reset these before use to avoid stale data.
 */
const tempVector3A = new THREE.Vector3();
const tempVector3B = new THREE.Vector3();
const tempVector3C = new THREE.Vector3();
const tempMatrix4A = new THREE.Matrix4();
const tempMatrix4B = new THREE.Matrix4();
const tempQuaternionA = new THREE.Quaternion();
const tempQuaternionB = new THREE.Quaternion();

/**
 * Get pool statistics for all pre-configured pools
 * @returns {object} Statistics for all pools
 */
function getPoolStats() {
    return {
        vector3: vector3Pool.getStats(),
        matrix4: matrix4Pool.getStats(),
        quaternion: quaternionPool.getStats(),
        euler: eulerPool.getStats()
    };
}

/**
 * Dispose all pre-configured pools
 */
function disposeAllPools() {
    vector3Pool.dispose();
    matrix4Pool.dispose();
    quaternionPool.dispose();
    eulerPool.dispose();
}

/**
 * BlobUrlManager - Secure blob URL lifecycle management
 *
 * Tracks blob URLs and ensures they are revoked to prevent memory leaks
 * and unauthorized access. Critical for security and resource management.
 */


const logger$8 = getLogger('BlobUrlManager');

/**
 * BlobUrlManager - Manages blob URL lifecycle
 */
class BlobUrlManager {
    constructor() {
        /**
         * Map of blob URL to metadata
         * @private
         */
        this._urls = new Map();

        /**
         * Whether manager has been disposed
         * @private
         */
        this._disposed = false;
    }

    /**
     * Assert manager is not disposed
     * @private
     * @throws {Error} If manager is disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new Error('BlobUrlManager has been disposed');
        }
    }

    /**
     * Create a blob URL from data
     *
     * @param {Blob|ArrayBuffer|Uint8Array} data - Data to create blob from
     * @param {string} mimeType - MIME type (e.g., 'model/gltf-binary')
     * @param {string} [label] - Optional label for debugging
     * @returns {string} Blob URL
     * @throws {ValidationError} If data or mimeType is invalid
     */
    createBlobUrl(data, mimeType, label = '') {
        this._assertNotDisposed();

        // Validate mimeType
        if (typeof mimeType !== 'string' || mimeType.length === 0) {
            throw new ValidationError(
                'mimeType must be a non-empty string',
                'mimeType'
            );
        }

        // Convert data to Blob if needed
        let blob;
        if (data instanceof Blob) {
            blob = data;
        } else if (data instanceof ArrayBuffer || data instanceof Uint8Array) {
            blob = new Blob([data], { type: mimeType });
        } else {
            throw new ValidationError(
                'data must be Blob, ArrayBuffer, or Uint8Array',
                'data'
            );
        }

        // Create blob URL
        const url = URL.createObjectURL(blob);

        // Track metadata
        this._urls.set(url, {
            createdAt: Date.now(),
            mimeType,
            label: label || 'unlabeled',
            size: blob.size
        });

        logger$8.debug(`Created blob URL: ${label || url.substring(0, 50)}, size: ${blob.size} bytes`);

        return url;
    }

    /**
     * Register an externally created blob URL for tracking
     *
     * @param {string} url - Blob URL to track
     * @param {string} [label] - Optional label for debugging
     * @throws {ValidationError} If URL is not a blob URL
     */
    registerBlobUrl(url, label = '') {
        this._assertNotDisposed();

        if (typeof url !== 'string' || !url.startsWith('blob:')) {
            throw new ValidationError(
                'url must be a valid blob URL',
                'url'
            );
        }

        if (!this._urls.has(url)) {
            this._urls.set(url, {
                createdAt: Date.now(),
                mimeType: 'unknown',
                label: label || 'registered-external',
                size: 0
            });

            logger$8.debug(`Registered external blob URL: ${label || url.substring(0, 50)}`);
        }
    }

    /**
     * Revoke a blob URL and remove from tracking
     *
     * @param {string} url - Blob URL to revoke
     * @returns {boolean} True if URL was tracked and revoked
     */
    revokeBlobUrl(url) {
        this._assertNotDisposed();

        if (this._urls.has(url)) {
            const metadata = this._urls.get(url);
            URL.revokeObjectURL(url);
            this._urls.delete(url);

            logger$8.debug(`Revoked blob URL: ${metadata.label}, age: ${Date.now() - metadata.createdAt}ms`);
            return true;
        }

        return false;
    }

    /**
     * Revoke all blob URLs and clear tracking
     */
    revokeAll() {
        this._assertNotDisposed();

        logger$8.debug(`Revoking ${this._urls.size} blob URLs`);

        for (const url of this._urls.keys()) {
            URL.revokeObjectURL(url);
        }

        this._urls.clear();
    }

    /**
     * Get tracked blob URL metadata
     *
     * @param {string} url - Blob URL
     * @returns {object|null} Metadata or null if not tracked
     */
    getMetadata(url) {
        return this._urls.get(url) || null;
    }

    /**
     * Get all tracked blob URLs
     *
     * @returns {Array<{url: string, metadata: object}>} Array of URL info
     */
    getAllTrackedUrls() {
        const urls = [];
        for (const [url, metadata] of this._urls.entries()) {
            urls.push({ url, metadata });
        }
        return urls;
    }

    /**
     * Get statistics about tracked URLs
     *
     * @returns {object} Statistics
     */
    getStats() {
        let totalSize = 0;
        let oldestAge = 0;
        const now = Date.now();

        for (const metadata of this._urls.values()) {
            totalSize += metadata.size;
            const age = now - metadata.createdAt;
            if (age > oldestAge) {
                oldestAge = age;
            }
        }

        return {
            count: this._urls.size,
            totalSize,
            oldestAge
        };
    }

    /**
     * Revoke blob URLs older than specified age
     *
     * @param {number} maxAgeMs - Maximum age in milliseconds
     * @returns {number} Number of URLs revoked
     */
    revokeOlderThan(maxAgeMs) {
        this._assertNotDisposed();

        const now = Date.now();
        const toRevoke = [];

        for (const [url, metadata] of this._urls.entries()) {
            const age = now - metadata.createdAt;
            if (age > maxAgeMs) {
                toRevoke.push(url);
            }
        }

        for (const url of toRevoke) {
            this.revokeBlobUrl(url);
        }

        if (toRevoke.length > 0) {
            logger$8.info(`Revoked ${toRevoke.length} blob URLs older than ${maxAgeMs}ms`);
        }

        return toRevoke.length;
    }

    /**
     * Check if a URL is being tracked
     *
     * @param {string} url - URL to check
     * @returns {boolean} True if URL is tracked
     */
    isTracked(url) {
        return this._urls.has(url);
    }

    /**
     * Dispose manager and revoke all URLs
     */
    dispose() {
        if (this._disposed) {
            return;
        }

        logger$8.debug('Disposing BlobUrlManager');
        this.revokeAll();
        this._disposed = true;
    }
}

/**
 * Global blob URL manager instance
 * @type {BlobUrlManager}
 */
const globalBlobUrlManager = new BlobUrlManager();

/**
 * Get the global blob URL manager
 * @returns {BlobUrlManager} Global manager instance
 */
function getGlobalBlobUrlManager() {
    return globalBlobUrlManager;
}

/**
 * Helper function to create a blob URL with automatic tracking
 *
 * @param {Blob|ArrayBuffer|Uint8Array} data - Data to create blob from
 * @param {string} mimeType - MIME type
 * @param {string} [label] - Optional label for debugging
 * @returns {string} Blob URL
 */
function createTrackedBlobUrl(data, mimeType, label) {
    return globalBlobUrlManager.createBlobUrl(data, mimeType, label);
}

/**
 * Helper function to revoke a blob URL
 *
 * @param {string} url - Blob URL to revoke
 * @returns {boolean} True if URL was tracked and revoked
 */
function revokeTrackedBlobUrl(url) {
    return globalBlobUrlManager.revokeBlobUrl(url);
}

/**
 * RenderLoop - Frame-independent animation loop with budget management
 *
 * Provides a robust requestAnimationFrame loop with:
 * - Delta time calculation for frame-independent updates
 * - Frame budget management to prevent frame drops
 * - Deferred task execution
 * - Performance monitoring
 */


const logger$7 = getLogger('RenderLoop');

/**
 * RenderLoop - Manages animation frame loop
 */
class RenderLoop {
    /**
     * Create a RenderLoop
     * @param {Function} updateFn - Update function called each frame with deltaTime
     * @param {Function} renderFn - Render function called each frame
     * @param {object} [options] - Configuration options
     * @param {number} [options.targetFps=60] - Target frames per second
     * @param {number} [options.maxDeltaTime=0.1] - Maximum delta time in seconds (prevents spiral of death)
     */
    constructor(updateFn, renderFn, options = {}) {
        this._update = updateFn;
        this._render = renderFn;

        this._targetFps = options.targetFps || 60;
        this._maxDeltaTime = options.maxDeltaTime || 0.1; // 100ms max
        this._frameBudget = 1000 / this._targetFps; // ms per frame

        this._running = false;
        this._rafId = null;
        this._lastTime = 0;
        this._frameCount = 0;
        this._deferredTasks = [];

        // Performance tracking
        this._fpsHistory = [];
        this._fpsHistorySize = 60; // Track last 60 frames
        this._lastFpsUpdate = 0;
        this._currentFps = 0;
    }

    /**
     * Start the render loop
     */
    start() {
        if (this._running) {
            logger$7.warn('RenderLoop already running');
            return;
        }

        this._running = true;
        this._lastTime = performance.now();
        this._frameCount = 0;
        logger$7.info('RenderLoop started');

        this._tick();
    }

    /**
     * Stop the render loop
     */
    stop() {
        if (!this._running) {
            return;
        }

        this._running = false;

        if (this._rafId !== null) {
            cancelAnimationFrame(this._rafId);
            this._rafId = null;
        }

        logger$7.info(`RenderLoop stopped after ${this._frameCount} frames`);
    }

    /**
     * Main loop tick
     * @private
     */
    _tick = () => {
        if (!this._running) {
            return;
        }

        const frameStart = performance.now();
        const rawDeltaTime = (frameStart - this._lastTime) / 1000; // Convert to seconds

        // Clamp delta time to prevent spiral of death
        const deltaTime = Math.min(rawDeltaTime, this._maxDeltaTime);

        this._lastTime = frameStart;
        this._frameCount++;

        try {
            // Update logic
            this._update(deltaTime);

            // Render
            this._render();

            // Process deferred tasks if time permits
            const frameElapsed = performance.now() - frameStart;
            const remainingTime = this._frameBudget - frameElapsed;

            if (remainingTime > 1 && this._deferredTasks.length > 0) {
                this._processDeferredTasks(remainingTime - 1); // Leave 1ms margin
            }

            // Update FPS tracking
            this._updateFpsTracking(performance.now() - frameStart);

        } catch (error) {
            logger$7.error('Error in render loop:', error);
            // Continue loop despite error
        }

        // Schedule next frame
        this._rafId = requestAnimationFrame(this._tick);
    };

    /**
     * Update FPS tracking
     * @private
     * @param {number} frameTime - Time taken for this frame in ms
     */
    _updateFpsTracking(frameTime) {
        this._fpsHistory.push(1000 / frameTime);

        if (this._fpsHistory.length > this._fpsHistorySize) {
            this._fpsHistory.shift();
        }

        // Update FPS every second
        const now = performance.now();
        if (now - this._lastFpsUpdate > 1000) {
            this._currentFps = this._fpsHistory.reduce((a, b) => a + b, 0) / this._fpsHistory.length;
            this._lastFpsUpdate = now;
        }
    }

    /**
     * Process deferred tasks within time budget
     * @private
     * @param {number} maxTime - Maximum time in ms to spend on tasks
     */
    _processDeferredTasks(maxTime) {
        const startTime = performance.now();

        while (this._deferredTasks.length > 0) {
            if (performance.now() - startTime >= maxTime) {
                break;
            }

            const task = this._deferredTasks.shift();

            try {
                task.fn();
            } catch (error) {
                logger$7.error(`Error in deferred task: ${task.label}`, error);
            }
        }
    }

    /**
     * Execute task if within frame budget, otherwise defer
     *
     * @param {Function} task - Task function to execute
     * @param {number} [priority=0] - Task priority (higher = more important)
     * @param {string} [label=''] - Task label for debugging
     */
    executeOrDefer(task, priority = 0, label = '') {
        const frameElapsed = performance.now() - this._lastTime;

        if (frameElapsed < this._frameBudget * 0.8) {
            // Within budget, execute now
            task();
        } else {
            // Over budget, defer
            this._deferredTasks.push({ fn: task, priority, label });

            // Sort by priority (higher first)
            this._deferredTasks.sort((a, b) => b.priority - a.priority);
        }
    }

    /**
     * Get current FPS
     * @returns {number} Average FPS over recent frames
     */
    getFps() {
        return Math.round(this._currentFps);
    }

    /**
     * Get performance stats
     * @returns {object} Performance statistics
     */
    getStats() {
        return {
            fps: this.getFps(),
            frameCount: this._frameCount,
            deferredTaskCount: this._deferredTasks.length,
            running: this._running
        };
    }

    /**
     * Check if loop is running
     * @returns {boolean} True if running
     */
    isRunning() {
        return this._running;
    }

    /**
     * Get frame count
     * @returns {number} Total frames rendered
     */
    getFrameCount() {
        return this._frameCount;
    }

    /**
     * Clear all deferred tasks
     */
    clearDeferredTasks() {
        this._deferredTasks.length = 0;
        logger$7.debug('Cleared all deferred tasks');
    }
}

/**
 * FrameBudgetMonitor - Monitors and alerts on frame budget violations
 */
class FrameBudgetMonitor {
    /**
     * Create a FrameBudgetMonitor
     * @param {number} [targetFps=60] - Target FPS
     * @param {Function} [onViolation] - Callback when budget is violated
     */
    constructor(targetFps = 60, onViolation = null) {
        this._targetFps = targetFps;
        this._frameBudget = 1000 / targetFps;
        this._onViolation = onViolation;
        this._violations = 0;
        this._frameStart = 0;
    }

    /**
     * Mark start of frame
     */
    startFrame() {
        this._frameStart = performance.now();
    }

    /**
     * Check if frame is within budget
     * @param {string} [location] - Location identifier for debugging
     * @returns {boolean} True if within budget
     */
    checkBudget(location = '') {
        const elapsed = performance.now() - this._frameStart;
        const withinBudget = elapsed < this._frameBudget;

        if (!withinBudget) {
            this._violations++;

            if (this._onViolation) {
                this._onViolation({
                    location,
                    elapsed,
                    budget: this._frameBudget,
                    overrun: elapsed - this._frameBudget
                });
            }

            logger$7.warn(`Frame budget violation at ${location}: ${elapsed.toFixed(2)}ms / ${this._frameBudget.toFixed(2)}ms`);
        }

        return withinBudget;
    }

    /**
     * Get violation count
     * @returns {number} Total violations
     */
    getViolationCount() {
        return this._violations;
    }

    /**
     * Reset violation count
     */
    resetViolations() {
        this._violations = 0;
    }
}

/**
 * EventEmitter - Observer pattern implementation for event-driven communication
 *
 * Provides decoupled event handling with automatic cleanup to prevent memory leaks.
 * Critical for managing state changes and component communication.
 */


const logger$6 = getLogger('EventEmitter');

/**
 * EventEmitter - Pub/sub event system
 */
class EventEmitter {
    constructor() {
        /**
         * Map of event name to Set of listeners
         * @private
         */
        this._listeners = new Map();

        /**
         * Whether emitter has been disposed
         * @private
         */
        this._disposed = false;

        /**
         * Event emission history for debugging (last N events)
         * @private
         */
        this._eventHistory = [];
        this._maxHistorySize = 50;
    }

    /**
     * Assert emitter is not disposed
     * @private
     * @throws {Error} If emitter is disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new Error('EventEmitter has been disposed');
        }
    }

    /**
     * Subscribe to an event
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler
     * @param {object} [options] - Subscription options
     * @param {boolean} [options.once=false] - Auto-unsubscribe after first call
     * @returns {Function} Unsubscribe function
     * @throws {ValidationError} If parameters are invalid
     */
    on(event, callback, options = {}) {
        this._assertNotDisposed();

        if (typeof event !== 'string' || event.length === 0) {
            throw new ValidationError(
                'event must be a non-empty string',
                'event'
            );
        }

        if (typeof callback !== 'function') {
            throw new ValidationError(
                'callback must be a function',
                'callback'
            );
        }

        // Wrap callback if once option is set
        const wrappedCallback = options.once
            ? (...args) => {
                this.off(event, wrappedCallback);
                callback(...args);
            }
            : callback;

        // Store original callback reference for removal
        if (options.once) {
            wrappedCallback._originalCallback = callback;
        }

        // Add listener
        if (!this._listeners.has(event)) {
            this._listeners.set(event, new Set());
        }
        this._listeners.get(event).add(wrappedCallback);

        logger$6.debug(`Subscribed to event: ${event}`);

        // Return unsubscribe function
        return () => this.off(event, wrappedCallback);
    }

    /**
     * Subscribe to an event (fires once then auto-unsubscribes)
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler
     * @returns {Function} Unsubscribe function
     */
    once(event, callback) {
        return this.on(event, callback, { once: true });
    }

    /**
     * Unsubscribe from an event
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler to remove
     * @returns {boolean} True if callback was found and removed
     */
    off(event, callback) {
        this._assertNotDisposed();

        const listeners = this._listeners.get(event);
        if (!listeners) {
            return false;
        }

        // Try to remove directly
        if (listeners.delete(callback)) {
            logger$6.debug(`Unsubscribed from event: ${event}`);
            return true;
        }

        // Try to find by original callback (for once listeners)
        for (const listener of listeners) {
            if (listener._originalCallback === callback) {
                listeners.delete(listener);
                logger$6.debug(`Unsubscribed from event: ${event} (once listener)`);
                return true;
            }
        }

        return false;
    }

    /**
     * Remove all listeners for an event (or all events if no event specified)
     *
     * @param {string} [event] - Event name (optional)
     */
    removeAllListeners(event = null) {
        this._assertNotDisposed();

        if (event) {
            const count = this._listeners.get(event)?.size || 0;
            this._listeners.delete(event);
            logger$6.debug(`Removed ${count} listeners for event: ${event}`);
        } else {
            const totalCount = Array.from(this._listeners.values())
                .reduce((sum, set) => sum + set.size, 0);
            this._listeners.clear();
            logger$6.debug(`Removed all ${totalCount} listeners`);
        }
    }

    /**
     * Emit an event to all subscribers
     *
     * @param {string} event - Event name
     * @param {...*} args - Arguments to pass to listeners
     * @returns {boolean} True if event had listeners
     */
    emit(event, ...args) {
        this._assertNotDisposed();

        const listeners = this._listeners.get(event);
        if (!listeners || listeners.size === 0) {
            return false;
        }

        // Record in history for debugging
        this._recordEvent(event, args);

        // Call all listeners
        let callCount = 0;
        for (const callback of listeners) {
            try {
                callback(...args);
                callCount++;
            } catch (error) {
                logger$6.error(`Error in event listener for '${event}':`, error);
                // Continue calling other listeners
            }
        }

        logger$6.debug(`Emitted event: ${event} to ${callCount} listeners`);

        return true;
    }

    /**
     * Record event in history for debugging
     * @private
     * @param {string} event - Event name
     * @param {Array} args - Event arguments
     */
    _recordEvent(event, args) {
        this._eventHistory.push({
            event,
            timestamp: Date.now(),
            argCount: args.length
        });

        // Keep history bounded
        if (this._eventHistory.length > this._maxHistorySize) {
            this._eventHistory.shift();
        }
    }

    /**
     * Get event emission history
     * @returns {Array} Array of event records
     */
    getEventHistory() {
        return [...this._eventHistory];
    }

    /**
     * Check if event has listeners
     *
     * @param {string} event - Event name
     * @returns {boolean} True if event has listeners
     */
    hasListeners(event) {
        const listeners = this._listeners.get(event);
        return listeners ? listeners.size > 0 : false;
    }

    /**
     * Get listener count for an event
     *
     * @param {string} event - Event name
     * @returns {number} Number of listeners
     */
    listenerCount(event) {
        const listeners = this._listeners.get(event);
        return listeners ? listeners.size : 0;
    }

    /**
     * Get all event names with listeners
     *
     * @returns {string[]} Array of event names
     */
    eventNames() {
        return Array.from(this._listeners.keys());
    }

    /**
     * Get statistics about listeners
     *
     * @returns {object} Statistics
     */
    getStats() {
        const stats = {
            totalEvents: this._listeners.size,
            totalListeners: 0,
            eventBreakdown: {}
        };

        for (const [event, listeners] of this._listeners.entries()) {
            const count = listeners.size;
            stats.totalListeners += count;
            stats.eventBreakdown[event] = count;
        }

        return stats;
    }

    /**
     * Dispose emitter and remove all listeners
     */
    dispose() {
        if (this._disposed) {
            return;
        }

        logger$6.debug('Disposing EventEmitter');
        this.removeAllListeners();
        this._eventHistory.length = 0;
        this._disposed = true;
    }
}

/**
 * TypedEventEmitter - Type-safe event emitter with event registry
 *
 * Ensures events are pre-registered, preventing typos and providing
 * better developer experience.
 */
class TypedEventEmitter extends EventEmitter {
    /**
     * Create a TypedEventEmitter
     * @param {string[]} allowedEvents - Array of allowed event names
     */
    constructor(allowedEvents) {
        super();

        /**
         * Set of allowed event names
         * @private
         */
        this._allowedEvents = new Set(allowedEvents);
    }

    /**
     * Validate event name is allowed
     * @private
     * @param {string} event - Event name
     * @throws {ValidationError} If event is not allowed
     */
    _validateEvent(event) {
        if (!this._allowedEvents.has(event)) {
            throw new ValidationError(
                `Event '${event}' is not registered. Allowed events: ${Array.from(this._allowedEvents).join(', ')}`,
                'event'
            );
        }
    }

    /**
     * Subscribe to an event (override to add validation)
     * @override
     */
    on(event, callback, options) {
        this._validateEvent(event);
        return super.on(event, callback, options);
    }

    /**
     * Emit an event (override to add validation)
     * @override
     */
    emit(event, ...args) {
        this._validateEvent(event);
        return super.emit(event, ...args);
    }
}

/**
 * AppConstants
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * Animation state constants and ARKit blendshape mappings.
 */

/**
 * Voice chat state enumeration
 * Controls the rendering and behavior modes of the avatar
 */
const TYVoiceChatState = {
    Idle: 'Idle',           // Idle/waiting state
    Listening: 'Listening', // Listening to user input
    Responding: 'Responding', // Speaking/responding animation
    Thinking: 'Thinking'    // Processing/thinking animation
};

/**
 * ARKit blendshape names (52 expressions)
 * Used for facial expression mapping from ARKit face tracking
 */
const ARKitBlendshapes = [
    'browDownLeft',
    'browDownRight',
    'browInnerUp',
    'browOuterUpLeft',
    'browOuterUpRight',
    'cheekPuff',
    'cheekSquintLeft',
    'cheekSquintRight',
    'eyeBlinkLeft',
    'eyeBlinkRight',
    'eyeLookDownLeft',
    'eyeLookDownRight',
    'eyeLookInLeft',
    'eyeLookInRight',
    'eyeLookOutLeft',
    'eyeLookOutRight',
    'eyeLookUpLeft',
    'eyeLookUpRight',
    'eyeSquintLeft',
    'eyeSquintRight',
    'eyeWideLeft',
    'eyeWideRight',
    'jawForward',
    'jawLeft',
    'jawOpen',
    'jawRight',
    'mouthClose',
    'mouthDimpleLeft',
    'mouthDimpleRight',
    'mouthFrownLeft',
    'mouthFrownRight',
    'mouthFunnel',
    'mouthLeft',
    'mouthLowerDownLeft',
    'mouthLowerDownRight',
    'mouthPressLeft',
    'mouthPressRight',
    'mouthPucker',
    'mouthRight',
    'mouthRollLower',
    'mouthRollUpper',
    'mouthShrugLower',
    'mouthShrugUpper',
    'mouthSmileLeft',
    'mouthSmileRight',
    'mouthStretchLeft',
    'mouthStretchRight',
    'mouthUpperUpLeft',
    'mouthUpperUpRight',
    'noseSneerLeft',
    'noseSneerRight',
    'tongueOut'
];

/**
 * FLAME model bone names
 */
const FlameBoneNames = [
    'root',
    'neck',
    'jaw',
    'leftEye',
    'rightEye'
];

/**
 * Constants derived from the arrays
 */
const ARKIT_BLENDSHAPES_COUNT = ARKitBlendshapes.length;
const FLAME_BONES_COUNT = FlameBoneNames.length;

/**
 * AnimationManager
 *
 * Derived from gaussian-splat-renderer-for-lam
 * Manages animation state machine with Three.js AnimationMixer.
 */


const logger$5 = getLogger('AnimationManager');

/**
 * Base State class for animation states
 */
class State {
    constructor(actions, isGroup) {
        this.isPlaying = false;
        this.stage = 0;
        this.actions = actions || [];
        this.blendingTime = 0.5;
        this.isGroup = isGroup || false;
    }

    dispose() {
        this.actions = [];
    }

    update(state) {
        // Override in subclasses
    }
}

/**
 * Hello state - initial greeting animation
 */
class Hello extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopRepeat;
            this.actions[this.stage].clampWhenFinished = false;
            this.actions[this.stage].paused = false;
            this.actions[this.stage].play();
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Idle &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === true) {
            if (this.actions[this.stage].time >
                this.actions[this.stage].getClip().duration - this.blendingTime) {
                let nextStage = this.stage + 1;
                if (nextStage >= this.actions.length) nextStage = 0;
                this.actions[nextStage].time = 0;
                AnimationManager.SetWeight(this.actions[nextStage], 1.0);
                this.actions[nextStage].loop = THREE.LoopRepeat;
                this.actions[nextStage].play();
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[nextStage], this.blendingTime);
                this.stage = nextStage;
            }
        }
    }
}

/**
 * Idle state - resting animation
 */
class Idle extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopRepeat;
            this.actions[this.stage].clampWhenFinished = false;
            this.actions[this.stage].paused = false;
            this.actions[this.stage].play();
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Idle &&
            state !== TYVoiceChatState.Idle &&
            this.isPlaying === true &&
            this.stage === 0) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Listen state - listening animation
 */
class Listen extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Listening &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = this.isGroup ? THREE.LoopOnce : THREE.LoopRepeat;
            this.actions[this.stage].clampWhenFinished = this.isGroup ? true : false;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (this.isGroup) {
            if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
                state === TYVoiceChatState.Listening &&
                this.isPlaying === true &&
                this.stage === 0) {
                if (this.actions[this.stage].time >
                    this.actions[this.stage].getClip().duration - this.blendingTime) {
                    this.actions[this.stage + 1].time = 0;
                    AnimationManager.SetWeight(this.actions[this.stage + 1], 1.0);
                    this.actions[this.stage + 1].loop = THREE.LoopRepeat;
                    this.actions[this.stage + 1].play();
                    AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[this.stage + 1], this.blendingTime);
                    this.stage = 1;
                }
            }

            if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
                state !== TYVoiceChatState.Listening &&
                this.isPlaying === true &&
                (this.stage === 0 || this.stage === 1)) {
                this.actions[2].time = 0;
                this.actions[2].play();
                AnimationManager.SetWeight(this.actions[2], 1.0);
                this.actions[2].loop = THREE.LoopOnce;
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[2], this.blendingTime);
                this.stage = 2;
            }
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
            state !== TYVoiceChatState.Listening &&
            this.isPlaying === true &&
            this.stage === (this.isGroup ? this.actions.length - 1 : 0)) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Think state - thinking animation
 */
class Think extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Thinking &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopOnce;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (this.isGroup) {
            if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
                state === TYVoiceChatState.Thinking &&
                this.isPlaying === true &&
                this.stage === 0) {
                if (this.actions[this.stage].time >
                    this.actions[this.stage].getClip().duration - this.blendingTime) {
                    this.actions[this.stage + 1].time = 0;
                    AnimationManager.SetWeight(this.actions[this.stage + 1], 1.0);
                    this.actions[this.stage + 1].loop = THREE.LoopRepeat;
                    this.actions[this.stage + 1].play();
                    AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[this.stage + 1], this.blendingTime);
                    this.stage = 1;
                }
            }

            if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
                state !== TYVoiceChatState.Thinking &&
                this.isPlaying === true &&
                (this.stage === 0 || this.stage === 1)) {
                this.actions[2].time = 0;
                this.actions[2].play();
                AnimationManager.SetWeight(this.actions[2], 1.0);
                this.actions[2].loop = THREE.LoopOnce;
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[2], this.blendingTime);
                this.stage = 2;
            }
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
            state !== TYVoiceChatState.Thinking &&
            this.isPlaying === true &&
            this.stage === (this.isGroup ? this.actions.length - 1 : 0)) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Speak state - speaking animation with random movement selection
 */
class Speak extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
        logger$5.debug('[SPEAK] Initialized with', actions?.length || 0, 'actions, isGroup:', isGroup);
    }

    /**
     * Get a random number in range [min, max]
     */
    getRandomNumber(max, min) {
        const range = max - min;
        return min + Math.round(Math.random() * range);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) {
            if (!this._warnedNoActions) {
                logger$5.warn('[SPEAK] No actions available!');
                this._warnedNoActions = true;
            }
            return;
        }
        
        // Start speaking - pick a random animation
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Responding &&
            this.isPlaying === false) {
            // Randomly select initial animation
            this.stage = Math.ceil(this.getRandomNumber(0, this.actions.length - 1));
            logger$5.debug('[SPEAK] Starting animation, stage:', this.stage, 'of', this.actions.length);
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        // Continue speaking - cycle through random animations
        if (AnimationManager.CurPlaying === TYVoiceChatState.Responding &&
            state === TYVoiceChatState.Responding &&
            this.isPlaying === true) {
            if (this.actions[this.stage].time >=
                this.actions[this.stage].getClip().duration - this.blendingTime) {
                const lastAction = this.actions[this.stage];
                // Pick a different random animation
                this.stage = (this.stage + Math.ceil(this.getRandomNumber(1, this.actions.length - 1))) % this.actions.length;
                logger$5.debug('[SPEAK] Cycling to next animation, stage:', this.stage);
                this.actions[this.stage].time = 0;
                this.actions[this.stage].play();
                AnimationManager.SetWeight(this.actions[this.stage], 1.0);
                this.actions[this.stage].loop = THREE.LoopOnce;
                this.actions[this.stage].clampWhenFinished = true;
                AnimationManager.PrepareCrossFade(lastAction, this.actions[this.stage], this.blendingTime);
            }
        }

        // Stop speaking - finish current animation
        if (AnimationManager.CurPlaying === TYVoiceChatState.Responding &&
            state !== TYVoiceChatState.Responding &&
            this.isPlaying === true) {
            this.actions[this.stage].loop = THREE.LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * AnimationManager - Main animation controller
 * Manages state machine with crossfade transitions between animation states
 */
class AnimationManager {
    // Static properties
    static IsBlending = false;
    static actions = [];
    static NeedReset = false;
    static NeedFullReset = false;
    static LastAction = undefined;
    static CurPlaying = undefined;

    /**
     * Set animation action weight
     */
    static SetWeight(action, weight) {
        action.enabled = true;
        action.setEffectiveTimeScale(1);
        action.setEffectiveWeight(weight);
    }

    /**
     * Prepare crossfade between two actions
     */
    static PrepareCrossFade(startAction, endAction, defaultDuration) {
        const duration = defaultDuration;
        AnimationManager.UnPauseAllActions();
        AnimationManager.ExecuteCrossFade(startAction, endAction, duration);
        AnimationManager.IsBlending = true;
        setTimeout(() => {
            AnimationManager.IsBlending = false;
        }, defaultDuration + 0.1);
    }

    /**
     * Pause all animation actions
     */
    static PauseAllActions() {
        AnimationManager.actions.forEach(function(action) {
            action.paused = true;
        });
    }

    /**
     * Unpause all animation actions
     */
    static UnPauseAllActions() {
        AnimationManager.actions.forEach(function(action) {
            action.paused = false;
        });
    }

    /**
     * Execute crossfade between two actions
     */
    static ExecuteCrossFade(startAction, endAction, duration) {
        AnimationManager.SetWeight(endAction, 1);
        endAction.time = 0;
        startAction.crossFadeTo(endAction, duration, true);
    }

    /**
     * Constructor
     * @param {THREE.AnimationMixer} mixer - Three.js animation mixer
     * @param {THREE.AnimationClip[]} animations - Animation clips
     * @param {object} animationcfg - Animation configuration
     */
    constructor(mixer, animations, animationcfg) {
        const helloActions = [];
        const idleActions = [];
        const listenActions = [];
        const speakActions = [];
        const thinkActions = [];

        this.mixer = mixer;

        // Calculate action indices based on config
        const helloIdx = animationcfg?.hello?.size || 0;
        const idleIdx = (animationcfg?.idle?.size || 0) + helloIdx;
        const listenIdx = (animationcfg?.listen?.size || 0) + idleIdx;
        const speakIdx = (animationcfg?.speak?.size || 0) + listenIdx;
        const thinkIdx = (animationcfg?.think?.size || 0) + speakIdx;

        // Distribute animation clips to state action arrays
        if (animations && animations.length > 0) {
            for (let i = 0; i < animations.length; i++) {
                const clip = animations[i];
                const action = mixer.clipAction(clip);

                if (i < helloIdx) {
                    helloActions.push(action);
                } else if (i < idleIdx) {
                    idleActions.push(action);
                    // Duplicate for states that share idle
                    if (listenIdx === idleIdx) {
                        listenActions.push(mixer.clipAction(clip.clone()));
                    }
                    if (speakIdx === listenIdx) {
                        speakActions.push(mixer.clipAction(clip.clone()));
                    }
                    if (thinkIdx === speakIdx) {
                        thinkActions.push(mixer.clipAction(clip.clone()));
                    }
                } else if (i < listenIdx) {
                    listenActions.push(action);
                } else if (i < speakIdx) {
                    speakActions.push(action);
                } else if (i < thinkIdx) {
                    thinkActions.push(action);
                }

                AnimationManager.actions.push(action);
                AnimationManager.SetWeight(action, 0);
            }
        }

        // Create state instances
        this.hello = new Hello(helloActions, animationcfg?.hello?.isGroup || false);
        this.idle = new Idle(idleActions, animationcfg?.idle?.isGroup || false);
        this.listen = new Listen(listenActions, animationcfg?.listen?.isGroup || false);
        this.think = new Think(thinkActions, animationcfg?.think?.isGroup || false);
        this.speak = new Speak(speakActions, animationcfg?.speak?.isGroup || false);
    }

    /**
     * Get currently playing state
     */
    curPlaying() {
        if (this.hello.isPlaying) return TYVoiceChatState.Idle;
        if (this.idle.isPlaying) return TYVoiceChatState.Idle;
        if (this.listen.isPlaying) return TYVoiceChatState.Listening;
        if (this.think.isPlaying) return TYVoiceChatState.Thinking;
        if (this.speak.isPlaying) return TYVoiceChatState.Responding;
        return undefined;
    }

    /**
     * Dispose animation manager
     */
    dispose() {
        this.hello.dispose();
        this.idle.dispose();
        this.listen.dispose();
        this.think.dispose();
        this.speak.dispose();
        AnimationManager.actions = [];
    }

    /**
     * Reset all animation actions
     */
    resetAllActions(ignoreBlending = false) {
        const curPlaying = this.curPlaying();
        
        switch (curPlaying) {
            case TYVoiceChatState.Idle:
                AnimationManager.LastAction = this.hello.actions[this.hello.stage];
                break;
            case TYVoiceChatState.Listening:
                AnimationManager.LastAction = this.listen.actions[this.listen.stage];
                break;
            case TYVoiceChatState.Thinking:
                AnimationManager.LastAction = this.think.actions[this.think.stage];
                break;
            case TYVoiceChatState.Responding:
                AnimationManager.LastAction = this.speak.actions[this.speak.stage];
                break;
            default:
                AnimationManager.LastAction = undefined;
                break;
        }

        if (AnimationManager.LastAction) {
            AnimationManager.LastAction.loop = THREE.LoopOnce;
            AnimationManager.LastAction.clampWhenFinished = true;
            AnimationManager.SetWeight(AnimationManager.LastAction, 1.0);
        }

        if (ignoreBlending) {
            AnimationManager.PauseAllActions();
            AnimationManager.actions.forEach(function(action) {
                action.time = 0;
                AnimationManager.SetWeight(action, 0.0);
            });
            AnimationManager.LastAction = undefined;
        }

        this.hello.isPlaying = false;
        this.idle.isPlaying = false;
        this.listen.isPlaying = false;
        this.think.isPlaying = false;
        this.speak.isPlaying = false;
    }

    /**
     * Update animation state
     * @param {string} state - Target state (TYVoiceChatState)
     */
    update(state) {
        if (AnimationManager.IsBlending) return;

        AnimationManager.CurPlaying = this.curPlaying();

        if (AnimationManager.CurPlaying === undefined) {
            switch (state) {
                case TYVoiceChatState.Idle:
                    this.idle.update(state);
                    break;
                case TYVoiceChatState.Listening:
                    this.listen.update(state);
                    break;
                case TYVoiceChatState.Thinking:
                    this.think.update(state);
                    break;
                case TYVoiceChatState.Responding:
                    this.speak.update(state);
                    break;
                default:
                    this.idle.update(state);
                    break;
            }
        } else {
            switch (AnimationManager.CurPlaying) {
                case TYVoiceChatState.Idle:
                    this.idle.update(state);
                    break;
                case TYVoiceChatState.Listening:
                    this.listen.update(state);
                    break;
                case TYVoiceChatState.Thinking:
                    this.think.update(state);
                    break;
                case TYVoiceChatState.Responding:
                    this.speak.update(state);
                    break;
                default:
                    this.idle.update(state);
                    break;
            }
        }
    }
}

/**
 * SplatScene
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class SplatScene extends THREE.Object3D {

    constructor(splatBuffer, position = new THREE.Vector3(), quaternion = new THREE.Quaternion(),
                scale = new THREE.Vector3(1, 1, 1), minimumAlpha = 1, opacity = 1.0, visible = true) {
        super();
        this.splatBuffer = splatBuffer;
        this.position.copy(position);
        this.quaternion.copy(quaternion);
        this.scale.copy(scale);
        this.transform = new THREE.Matrix4();
        this.minimumAlpha = minimumAlpha;
        this.opacity = opacity;
        this.visible = visible;
    }

    copyTransformData(otherScene) {
        this.position.copy(otherScene.position);
        this.quaternion.copy(otherScene.quaternion);
        this.scale.copy(otherScene.scale);
        this.transform.copy(otherScene.transform);
    }

    updateTransform(dynamicMode) {
        if (dynamicMode) {
            if (this.matrixWorldAutoUpdate) this.updateWorldMatrix(true, false);
            this.transform.copy(this.matrixWorld);
        } else {
            if (this.matrixAutoUpdate) this.updateMatrix();
            this.transform.copy(this.matrix);
        }
    }
}

/**
 * SplatGeometry
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class SplatGeometry {

    /**
     * Build the Three.js geometry that will be used to render the splats. The geometry is instanced and is made up of
     * vertices for a single quad as well as an attribute buffer for the splat indexes.
     * @param {number} maxSplatCount The maximum number of splats that the geometry will need to accomodate
     * @return {THREE.InstancedBufferGeometry}
     */
    static build(maxSplatCount) {

        const baseGeometry = new THREE.BufferGeometry();
        baseGeometry.setIndex([0, 1, 2, 0, 2, 3]);

        // Vertices for the instanced quad
        const positionsArray = new Float32Array(4 * 3);
        const positions = new THREE.BufferAttribute(positionsArray, 3);
        baseGeometry.setAttribute('position', positions);
        positions.setXYZ(0, -1, -1, 0.0);
        positions.setXYZ(1, -1, 1.0, 0.0);
        positions.setXYZ(2, 1.0, 1.0, 0.0);
        positions.setXYZ(3, 1.0, -1, 0.0);
        positions.needsUpdate = true;

        const geometry = new THREE.InstancedBufferGeometry().copy(baseGeometry);

        // Splat index buffer
        const splatIndexArray = new Uint32Array(maxSplatCount);

        const splatIndexes = new THREE.InstancedBufferAttribute(splatIndexArray, 1, false);
        splatIndexes.setUsage(THREE.DynamicDrawUsage);
        geometry.setAttribute('splatIndex', splatIndexes);

        geometry.instanceCount = 0;

        return geometry;
    }
}

/**
 * SplatTree
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


// Worker-related functions (simplified stubs - the actual worker is handled differently)
const checkAndCreateWorker = () => {
    // Worker creation is handled by the build system
    return null;
};

const workerProcessCenters = (worker, centers, buffers, maxDepth, maxCentersPerNode) => {
    // Worker message passing
    if (worker) {
        worker.postMessage({
            'process': {
                'centers': centers,
                'maxDepth': maxDepth,
                'maxCentersPerNode': maxCentersPerNode
            }
        }, buffers);
    }
};

// SplatSubTree helper class
class SplatSubTree {
    constructor() {
        this.rootNode = null;
        this.splatMesh = null;
    }

    static convertWorkerSubTree(workerSubTree, splatMesh) {
        const subTree = new SplatSubTree();
        subTree.rootNode = workerSubTree.rootNode;
        subTree.splatMesh = splatMesh;
        return subTree;
    }
}

class SplatTree {

    constructor(maxDepth, maxCentersPerNode) {
        this.maxDepth = maxDepth;
        this.maxCentersPerNode = maxCentersPerNode;
        this.subTrees = [];
        this.splatMesh = null;
    }


    dispose() {
        this.diposeSplatTreeWorker();
        this.disposed = true;
    }

    diposeSplatTreeWorker() {
        if (this.splatTreeWorker) this.splatTreeWorker.terminate();
        this.splatTreeWorker = null;
    };

    /**
     * Construct this instance of SplatTree from an instance of SplatMesh.
     *
     * @param {SplatMesh} splatMesh The instance of SplatMesh from which to construct this splat tree.
     * @param {function} filterFunc Optional function to filter out unwanted splats.
     * @param {function} onIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                   builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {undefined}
     */
    processSplatMesh = (splatMesh, filterFunc = () => true, onIndexesUpload, onSplatTreeConstruction) => {
        if (!this.splatTreeWorker) this.splatTreeWorker = checkAndCreateWorker();

        this.splatMesh = splatMesh;
        this.subTrees = [];
        const center = new THREE.Vector3();

        const addCentersForScene = (splatOffset, splatCount) => {
            const sceneCenters = new Float32Array(splatCount * 4);
            let addedCount = 0;
            for (let i = 0; i < splatCount; i++) {
                const globalSplatIndex = i + splatOffset;
                if (filterFunc(globalSplatIndex)) {
                    splatMesh.getSplatCenter(globalSplatIndex, center);
                    const addBase = addedCount * 4;
                    sceneCenters[addBase] = center.x;
                    sceneCenters[addBase + 1] = center.y;
                    sceneCenters[addBase + 2] = center.z;
                    sceneCenters[addBase + 3] = globalSplatIndex;
                    addedCount++;
                }
            }
            return sceneCenters;
        };

        return new Promise((resolve) => {

            const checkForEarlyExit = () => {
                if (this.disposed) {
                    this.diposeSplatTreeWorker();
                    resolve();
                    return true;
                }
                return false;
            };

            if (onIndexesUpload) onIndexesUpload(false);

            delayedExecute(() => {

                if (checkForEarlyExit()) return;

                const allCenters = [];
                if (splatMesh.dynamicMode) {
                    let splatOffset = 0;
                    for (let s = 0; s < splatMesh.scenes.length; s++) {
                        const scene = splatMesh.getScene(s);
                        const splatCount = scene.splatBuffer.getSplatCount();
                        const sceneCenters = addCentersForScene(splatOffset, splatCount);
                        allCenters.push(sceneCenters);
                        splatOffset += splatCount;
                    }
                } else {
                    const sceneCenters = addCentersForScene(0, splatMesh.getSplatCount());
                    allCenters.push(sceneCenters);
                }

                this.splatTreeWorker.onmessage = (e) => {

                    if (checkForEarlyExit()) return;

                    if (e.data.subTrees) {

                        if (onSplatTreeConstruction) onSplatTreeConstruction(false);

                        delayedExecute(() => {

                            if (checkForEarlyExit()) return;

                            for (let workerSubTree of e.data.subTrees) {
                                const convertedSubTree = SplatSubTree.convertWorkerSubTree(workerSubTree, splatMesh);
                                this.subTrees.push(convertedSubTree);
                            }
                            this.diposeSplatTreeWorker();

                            if (onSplatTreeConstruction) onSplatTreeConstruction(true);

                            delayedExecute(() => {
                                resolve();
                            });

                        });
                    }
                };

                delayedExecute(() => {
                    if (checkForEarlyExit()) return;
                    if (onIndexesUpload) onIndexesUpload(true);
                    const transferBuffers = allCenters.map((array) => array.buffer);
                    workerProcessCenters(this.splatTreeWorker, allCenters, transferBuffers, this.maxDepth, this.maxCentersPerNode);
                });

            });

        });

    };

    countLeaves() {

        let leafCount = 0;
        this.visitLeaves(() => {
            leafCount++;
        });

        return leafCount;
    }

    visitLeaves(visitFunc) {

        const visitLeavesFromNode = (node, visitFunc) => {
            if (node.children.length === 0) visitFunc(node);
            for (let child of node.children) {
                visitLeavesFromNode(child, visitFunc);
            }
        };

        for (let subTree of this.subTrees) {
            visitLeavesFromNode(subTree.rootNode, visitFunc);
        }
    }

}

/**
 * SplatMaterial
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME bone/pose uniforms and textures
 * - Added expression blendshape support
 * - Extended vertex shader with GPU skinning
 * - Additional ~500 lines of FLAME-specific shader code
 */


class SplatMaterial {

    static buildVertexShaderBase(dynamicMode = false, enableOptionalEffects = false, maxSphericalHarmonicsDegree = 0, customVars = '') {
        let vertexShaderSource = `#define USE_SKINNING

        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D flameModelTexture;
        uniform highp usampler2D boneTexture;
        uniform highp usampler2D boneWeightTexture;


        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
        uniform int gaussianSplatCount;
        uniform int bsCount;
        uniform float headBoneIndex;
        #ifdef USE_SKINNING
            attribute vec4 skinIndex;
            attribute vec4 skinWeight;
        #endif
    `;

    if (enableOptionalEffects) {
        vertexShaderSource += `
            uniform float sceneOpacity[${Constants$1.MaxScenes}];
            uniform int sceneVisibility[${Constants$1.MaxScenes}];
        `;
    }

    if (dynamicMode) {
        vertexShaderSource += `
            uniform highp mat4 transforms[${Constants$1.MaxScenes}];
        `;
    }

    vertexShaderSource += `
        ${customVars}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform vec2 flameModelTextureSize;
        uniform vec2 boneWeightTextureSize;
        uniform vec2 boneTextureSize;

        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${Constants$1.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${Constants$1.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;
        varying vec2 vSplatIndex;
        #ifdef USE_SKINNING
            uniform mat4 bindMatrix;
            uniform mat4 bindMatrixInverse;
            uniform highp sampler2D boneTexture0;
            mat4 getBoneMatrix0( const in float i ) {
                int size = textureSize( boneTexture0, 0 ).x;
                int j = int( i ) * 4;
                int x = j % size;
                int y = j / size;
                vec4 v1 = texelFetch( boneTexture0, ivec2( x, y ), 0 );
                vec4 v2 = texelFetch( boneTexture0, ivec2( x + 1, y ), 0 );
                vec4 v3 = texelFetch( boneTexture0, ivec2( x + 2, y ), 0 );
                vec4 v4 = texelFetch( boneTexture0, ivec2( x + 3, y ), 0 );
                return mat4( v1, v2, v3, v4 );
            }
        #endif

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        int internal = 1;//show a gaussian splatting point every internal points.
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }
        float getRealIndex(int sIndex, int reducedFactor) {
            int remainder = sIndex % reducedFactor;

            if(remainder == int(0)) {
                return float(sIndex);
            }
            else
            {
                return float(sIndex - remainder);
            }
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(getRealIndex(int(splatIndex), internal)) * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getFlameDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset) + uint(gaussianSplatCount * bsCount)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getBoneWeightUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getBSFlameDataUV(in int bsInedex, in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset) + uint(gaussianSplatCount * bsInedex)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(getRealIndex(int(sIndex), internal)) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        mat4 getBoneMatrix( float i ) {
            float y = i;
            float x = 0.0;

            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(i * 4.0) / boneTextureSize.x;//4
            samplerUV.y = float(floor(d)) / boneTextureSize.y;//5
            samplerUV.x = fract(d);

            vec4 v1 = uintBitsToFloat(texture( boneTexture, samplerUV ));
            vec4 v2 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 1.0 / boneTextureSize.x, samplerUV.y)));
            vec4 v3 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 2.0 / boneTextureSize.x, samplerUV.y) ));
            vec4 v4 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 3.0 / boneTextureSize.x, samplerUV.y)));

            return mat4( v1, v2, v3, v4 );
        }

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            // vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uvec3 sampledCenter = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize)).gba;
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenter));

            vec2 flameTextureUV = getBSFlameDataUV(bsCount, 1, 0, flameModelTextureSize);
            uvec3 sampledflamePos = texture(flameModelTexture, flameTextureUV).rgb;
            // splatCenter += uintBitsToFloat(uvec3(sampledflamePos.rgb));

            for(int i = 0; i < bsCount; ++i) {
                vec2 flameBSTextureUV = getBSFlameDataUV(i, 1, 0, flameModelTextureSize);
                uvec3 sampledBSPos = texture(flameModelTexture, flameBSTextureUV).rgb;

                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(i / 4 + 5 * 4) / boneTextureSize.x;//4
                samplerUV.y = float(floor(d)) / boneTextureSize.y;//32
                samplerUV.x = fract(d);

                vec4 bsWeight = uintBitsToFloat(texture(boneTexture, samplerUV));
                float weight = bsWeight.r;
                if(i % 4 == 1) {
                    weight = bsWeight.g;
                }
                if(i % 4 == 2) {
                    weight = bsWeight.b;
                }
                if(i % 4 == 3) {
                    weight = bsWeight.a;
                }

                splatCenter = splatCenter + weight * uintBitsToFloat(sampledBSPos);
            }


            #ifdef USE_SKINNING
                mat4 boneMatX = getBoneMatrix0( skinIndex.x );
                mat4 boneMatY = getBoneMatrix0( skinIndex.y );
                mat4 boneMatZ = getBoneMatrix0( skinIndex.z );
                mat4 boneMatW = getBoneMatrix0( skinIndex.w );
            #endif
            #ifdef USE_SKINNING
                mat4 skinMatrix = mat4( 0.0 );
                skinMatrix += skinWeight.x * boneMatX;
                skinMatrix += skinWeight.y * boneMatY;
                skinMatrix += skinWeight.z * boneMatZ;
                skinMatrix += skinWeight.w * boneMatW;
                // skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
            #endif
            vec3 transformed = vec3(splatCenter.xyz);
            #ifdef USE_SKINNING
                // vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
                vec4 skinVertex = vec4( transformed, 1.0 );

                vec4 skinned = vec4( 0.0 );
                // There is an offset between the Gaussian point and the mesh vertex,
                // which will cause defects in the skeletal animation driving the Gaussian point. 
                //In order to circumvent this problem, only the head bone(index is 110 currently) is used to drive

                if (headBoneIndex >= 0.0)
                {
                    mat4 boneMat = getBoneMatrix0( headBoneIndex );
                    skinned += boneMat * skinVertex * 1.0;
                }

                // skinned += boneMatX * skinVertex * skinWeight.x;
                // skinned += boneMatY * skinVertex * skinWeight.y;
                // skinned += boneMatZ * skinVertex * skinWeight.z;
                // skinned += boneMatW * skinVertex * skinWeight.w;

                // transformed = ( bindMatrixInverse * skinned ).xyz;
                transformed = skinned.xyz;

            #endif
            splatCenter = transformed.xyz;

            #ifdef USE_FLAME
                mat4 boneMatX = getBoneMatrix( 0.0 );
                mat4 boneMatY = getBoneMatrix( 1.0 );
                mat4 boneMatZ = getBoneMatrix( 2.0 );
                mat4 boneMatW = getBoneMatrix( 3.0 );   
                mat4 boneMat0 = getBoneMatrix( 4.0 );   
                
                vec2 boneWeightUV0 = getBoneWeightUV(2, 0, boneWeightTextureSize);
                vec2 boneWeightUV1 = getBoneWeightUV(2, 1, boneWeightTextureSize);

                uvec4 sampledBoneMatrixValue = texture(boneWeightTexture, boneWeightUV0);
                uvec4 sampledBoneMatrixValue0 = texture(boneWeightTexture, boneWeightUV1);

                vec4 boneMatrixValue = uintBitsToFloat(sampledBoneMatrixValue);
                vec4 boneMatrixValue0 = uintBitsToFloat(sampledBoneMatrixValue0);

                vec4 skinVertex = vec4( splatCenter, 1.0 );
                vec4 skinned = vec4( 0.0 );
                float minWeight = min(boneMatrixValue.x,min(boneMatrixValue.y, min(boneMatrixValue.z, min(boneMatrixValue.w, boneMatrixValue0.x))));
                
                if(boneMatrixValue.x > 0.0 && boneMatrixValue.x > minWeight)
                    skinned += boneMatX * skinVertex * boneMatrixValue.x;
                
                if(boneMatrixValue.y > 0.0 && boneMatrixValue.y > minWeight)
                    skinned += boneMatY * skinVertex * boneMatrixValue.y;
                
                if(boneMatrixValue.z > 0.0 && boneMatrixValue.z > minWeight)
                    skinned += boneMatZ * skinVertex * boneMatrixValue.z;
                
                if(boneMatrixValue.w > 0.0 && boneMatrixValue.w > minWeight)
                    skinned += boneMatW * skinVertex * boneMatrixValue.w;
                
                if(boneMatrixValue0.x > 0.0 && boneMatrixValue0.x > minWeight)
                    skinned += boneMat0 * skinVertex * boneMatrixValue0.x;
                
                splatCenter = skinned.xyz;
            #endif

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `;

        if (enableOptionalEffects) {
            vertexShaderSource += `
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `;
        }

        if (dynamicMode) {
            vertexShaderSource += `
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
                #ifdef USE_SKINNING
                    transformModelViewMatrix = transformModelViewMatrix * skinMatrix;
                #endif
            `;
        } else {
            vertexShaderSource += `mat4 transformModelViewMatrix = modelViewMatrix;`;
        }

        vertexShaderSource += `
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vSplatIndex = vec2(splatIndex, splatIndex);

            vColor = uintToRGBAVec(sampledCenterColor.r);
        `;

        // Proceed to sampling and rendering 1st degree spherical harmonics
        if (maxSphericalHarmonicsDegree >= 1) {

            vertexShaderSource += `   
            if (sphericalHarmonicsDegree >= 1) {
            `;

            if (dynamicMode) {
                vertexShaderSource += `
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `;
            } else {
                vertexShaderSource += `
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `;
            }

            vertexShaderSource += `
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `;

            if (maxSphericalHarmonicsDegree >= 2) {
                vertexShaderSource += `
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `;
            }

            // Determining how to sample spherical harmonics textures to get the coefficients for calculations for a given degree
            // depends on how many total degrees (maxSphericalHarmonicsDegree) are present in the textures. This is because that
            // number affects how they are packed in the textures, and therefore the offset & stride required to access them.

            // Sample spherical harmonics textures with 1 degree worth of data for 1st degree calculations, and store in sh1, sh2, and sh3
            if (maxSphericalHarmonicsDegree === 1) {
                vertexShaderSource += `
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `;
            // Sample spherical harmonics textures with 2 degrees worth of data for 1st degree calculations, and store in sh1, sh2, and sh3
            } else if (maxSphericalHarmonicsDegree === 2) {
                vertexShaderSource += `
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `;
            }

            // Perform 1st degree spherical harmonics calculations
            vertexShaderSource += `
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `;

            // Proceed to sampling and rendering 2nd degree spherical harmonics
            if (maxSphericalHarmonicsDegree >= 2) {

                vertexShaderSource += `
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `;

                // Sample spherical harmonics textures with 2 degrees worth of data for 2nd degree calculations,
                // and store in sh4, sh5, sh6, sh7, and sh8
                if (maxSphericalHarmonicsDegree === 2) {
                    vertexShaderSource += `
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `;
                }

                // Perform 2nd degree spherical harmonics calculations
                vertexShaderSource += `
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `;
            }

            vertexShaderSource += `

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `;
        }

        return vertexShaderSource;
    }

    static getVertexShaderFadeIn() {
        return `
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `;
    }

    static getUniforms(dynamicMode = false, enableOptionalEffects = false, maxSphericalHarmonicsDegree = 0,
                       splatScale = 1.0, pointCloudModeEnabled = false) {

        const uniforms = {
            'sceneCenter': {
                'type': 'v3',
                'value': new THREE.Vector3()
            },
            'fadeInComplete': {
                'type': 'i',
                'value': 0
            },
            'orthographicMode': {
                'type': 'i',
                'value': 0
            },
            'visibleRegionFadeStartRadius': {
                'type': 'f',
                'value': 0.0
            },
            'visibleRegionRadius': {
                'type': 'f',
                'value': 0.0
            },
            'bindMatrix': {
                'type': 'm4',
                'value': new THREE.Matrix4()
            },
            'bindMatrixInverse': {
                'type': 'm4',
                'value': new THREE.Matrix4()
            },
            'currentTime': {
                'type': 'f',
                'value': 0.0
            },
            'firstRenderTime': {
                'type': 'f',
                'value': 0.0
            },
            'centersColorsTexture': {
                'type': 't',
                'value': null
            },
            'flameModelTexture': {
                'type': 't',
                'value': null
            },
            'boneTexture': {
                'type': 't',
                'value': null
            },
            'boneTexture0': {
                'type': 't',
                'value': null
            },
            'boneWeightTexture': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTexture': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureR': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureG': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureB': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonics8BitCompressionRangeMin': {
                'type': 'f',
                'value': []
            },
            'sphericalHarmonics8BitCompressionRangeMax': {
                'type': 'f',
                'value': []
            },
            'focal': {
                'type': 'v2',
                'value': new THREE.Vector2()
            },
            'orthoZoom': {
                'type': 'f',
                'value': 1.0
            },
            'inverseFocalAdjustment': {
                'type': 'f',
                'value': 1.0
            },
            'viewport': {
                'type': 'v2',
                'value': new THREE.Vector2()
            },
            'basisViewport': {
                'type': 'v2',
                'value': new THREE.Vector2()
            },
            'debugColor': {
                'type': 'v3',
                'value': new THREE.Color()
            },
            'centersColorsTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(1024, 1024)
            },
            'flameModelTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(4096, 2048)
            },
            'boneTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(4, 32)
            },
            'boneWeightTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(512, 512)
            },
            
            'sphericalHarmonicsDegree': {
                'type': 'i',
                'value': maxSphericalHarmonicsDegree
            },
            'sphericalHarmonicsTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(1024, 1024)
            },
            'sphericalHarmonics8BitMode': {
                'type': 'i',
                'value': 0
            },
            'sphericalHarmonicsMultiTextureMode': {
                'type': 'i',
                'value': 0
            },
            'splatScale': {
                'type': 'f',
                'value': splatScale
            },
            'pointCloudModeEnabled': {
                'type': 'i',
                'value': pointCloudModeEnabled ? 1 : 0
            },
            'sceneIndexesTexture': {
                'type': 't',
                'value': null
            },
            'sceneIndexesTextureSize': {
                'type': 'v2',
                'value': new THREE.Vector2(1024, 1024)
            },
            'sceneCount': {
                'type': 'i',
                'value': 1
            },
            'gaussianSplatCount': {
                'type': 'i',
                'value': 1
            },
            'bsCount': {
                'type': 'i',
                'value': 1
            },
            'headBoneIndex': {
                'type': 'f',
                'value': -1
            },
            'eyeBlinkLeft': {
                'type': 'f',
                'value': 0.0
            },
            'eyeBlinkRight': {
                'type': 'f',
                'value': 0.0
            }
        };
        for (let i = 0; i < Constants$1.MaxScenes; i++) {
            uniforms.sphericalHarmonics8BitCompressionRangeMin.value.push(-Constants$1.SphericalHarmonics8BitCompressionRange / 2.0);
            uniforms.sphericalHarmonics8BitCompressionRangeMax.value.push(Constants$1.SphericalHarmonics8BitCompressionRange / 2.0);
        }

        if (enableOptionalEffects) {
            const sceneOpacity = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                sceneOpacity.push(1.0);
            }
            uniforms['sceneOpacity'] ={
                'type': 'f',
                'value': sceneOpacity
            };

            const sceneVisibility = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                sceneVisibility.push(1);
            }
            uniforms['sceneVisibility'] ={
                'type': 'i',
                'value': sceneVisibility
            };
        }

        if (dynamicMode) {
            const transformMatrices = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                transformMatrices.push(new THREE.Matrix4());
            }
            uniforms['transforms'] = {
                'type': 'mat4',
                'value': transformMatrices
            };
        }

        return uniforms;
    }

}

/**
 * SplatMaterial3D
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Modified for FLAME avatar support:
 * - Extended vertex shader for FLAME integration
 */


class SplatMaterial3D {

    /**
     * Build the Three.js material that is used to render the splats.
     * @param {number} dynamicMode If true, it means the scene geometry represented by this splat mesh is not stationary or
     *                             that the splat count might change
     * @param {boolean} enableOptionalEffects When true, allows for usage of extra properties and attributes in the shader for effects
     *                                        such as opacity adjustment. Default is false for performance reasons.
     * @param {boolean} antialiased If true, calculate compensation factor to deal with gaussians being rendered at a significantly
     *                              different resolution than that of their training
     * @param {number} maxScreenSpaceSplatSize The maximum clip space splat size
     * @param {number} splatScale Value by which all splats are scaled in screen-space (default is 1.0)
     * @param {number} pointCloudModeEnabled Render all splats as screen-space circles
     * @param {number} maxSphericalHarmonicsDegree Degree of spherical harmonics to utilize in rendering splats
     * @return {THREE.ShaderMaterial}
     */
    static build(dynamicMode = false, enableOptionalEffects = false, antialiased = false, maxScreenSpaceSplatSize = 2048,
                 splatScale = 1.0, pointCloudModeEnabled = false, maxSphericalHarmonicsDegree = 0, kernel2DSize = 0.3, irisOcclusionConfig = null) {

        const customVertexVars = `
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;

        // Add a varying for iris splats
        let vertexShaderSource = SplatMaterial.buildVertexShaderBase(dynamicMode, enableOptionalEffects,
                                         maxSphericalHarmonicsDegree, customVertexVars);
        vertexShaderSource += SplatMaterial3D.buildVertexShaderProjection(antialiased, enableOptionalEffects,
                                          maxScreenSpaceSplatSize, kernel2DSize);
        const fragmentShaderSource = SplatMaterial3D.buildFragmentShader(irisOcclusionConfig);

        const uniforms = SplatMaterial.getUniforms(dynamicMode, enableOptionalEffects,
                                                   maxSphericalHarmonicsDegree, splatScale, pointCloudModeEnabled);

        uniforms['covariancesTextureSize'] = {
            'type': 'v2',
            'value': new THREE.Vector2(1024, 1024)
        };
        uniforms['covariancesTexture'] = {
            'type': 't',
            'value': null
        };
        uniforms['covariancesTextureHalfFloat'] = {
            'type': 't',
            'value': null
        };
        uniforms['covariancesAreHalfFloat'] = {
            'type': 'i',
            'value': 0
        };

        const material = new THREE.ShaderMaterial({
            uniforms: uniforms,
            vertexShader: vertexShaderSource,
            fragmentShader: fragmentShaderSource,
            transparent: true,
            alphaTest: 1.0,
            blending: THREE.NormalBlending,
            depthTest: true,
            depthWrite: false,
            side: THREE.DoubleSide
        });

        return material;
    }

    static buildVertexShaderProjection(antialiased, enableOptionalEffects, maxScreenSpaceSplatSize, kernel2DSize) {
        let vertexShaderSource = `

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;

        if (antialiased) {
            vertexShaderSource += `
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${kernel2DSize};
                cov2Dm[1][1] += ${kernel2DSize};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `;
        } else {
            vertexShaderSource += `
                cov2Dm[0][0] += ${kernel2DSize};
                cov2Dm[1][1] += ${kernel2DSize};
            `;
        }

        vertexShaderSource += `

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(maxScreenSpaceSplatSize)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(maxScreenSpaceSplatSize)}.0);
            `;

        if (enableOptionalEffects) {
            vertexShaderSource += `
                vColor.a *= splatOpacityFromScene;
            `;
        }

        vertexShaderSource += `
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `;

        vertexShaderSource += SplatMaterial.getVertexShaderFadeIn();
        vertexShaderSource += `}`;

        return vertexShaderSource;
    }

    static buildFragmentShader(irisOcclusionConfig = null) {
        let fragmentShaderSource = `
            precision highp float;
            #include <common>

            uniform float eyeBlinkLeft;
            uniform float eyeBlinkRight;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying vec2 vSplatIndex;
        `;

        fragmentShaderSource += `
            void main () {
                float A = dot(vPosition, vPosition);
                float opacity = exp(-0.5 * A) * vColor.a;
                if (opacity < 1.0 / 255.0)
                    discard;
                `;

        // Generate iris occlusion code only if config exists
        if (irisOcclusionConfig && (irisOcclusionConfig.right_iris || irisOcclusionConfig.left_iris)) {
            fragmentShaderSource += `
                float idx = vSplatIndex.x;
                `;

            // Generate right iris checks
            if (irisOcclusionConfig.right_iris && irisOcclusionConfig.right_iris.length > 0) {
                const rightConditions = irisOcclusionConfig.right_iris
                    .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                    .join(' ||\n                                   ');

                fragmentShaderSource += `
                // Check if this splat is part of right iris
                bool isRightIris = ${rightConditions};
                `;
            } else {
                fragmentShaderSource += `
                bool isRightIris = false;
                `;
            }

            // Generate left iris checks
            if (irisOcclusionConfig.left_iris && irisOcclusionConfig.left_iris.length > 0) {
                const leftConditions = irisOcclusionConfig.left_iris
                    .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                    .join(' ||\n                                  ');

                fragmentShaderSource += `
                // Check if this splat is part of left iris
                bool isLeftIris = ${leftConditions};
                `;
            } else {
                fragmentShaderSource += `
                bool isLeftIris = false;
                `;
            }

            fragmentShaderSource += `
                float finalOpacity = opacity;

                // Very narrow fade window at high blink values only
                // Iris stays visible until eye is almost completely closed
                if (isRightIris) {
                    float fadeFactor = 1.0 - smoothstep(0.5, 0.7, eyeBlinkRight);
                    finalOpacity = opacity * fadeFactor;
                } else if (isLeftIris) {
                    float fadeFactor = 1.0 - smoothstep(0.5, 0.7, eyeBlinkLeft);
                    finalOpacity = opacity * fadeFactor;
                }

                if (finalOpacity < 1.0 / 255.0)
                    discard;

                gl_FragColor = vec4(vColor.rgb, finalOpacity);
            }
        `;
        } else {
            // No iris occlusion - simple rendering
            fragmentShaderSource += `
                gl_FragColor = vec4(vColor.rgb, opacity);
            }
        `;
        }

        return fragmentShaderSource;
    }

}

/**
 * SplatMaterial2D
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Modified for FLAME avatar support:
 * - Extended vertex shader for FLAME integration
 */


class SplatMaterial2D {

    /**
     * Build the Three.js material that is used to render the splats.
     * @param {number} dynamicMode If true, it means the scene geometry represented by this splat mesh is not stationary or
     *                             that the splat count might change
     * @param {boolean} enableOptionalEffects When true, allows for usage of extra properties and attributes in the shader for effects
     *                                        such as opacity adjustment. Default is false for performance reasons.
     * @param {number} splatScale Value by which all splats are scaled in screen-space (default is 1.0)
     * @param {number} pointCloudModeEnabled Render all splats as screen-space circles
     * @param {number} maxSphericalHarmonicsDegree Degree of spherical harmonics to utilize in rendering splats
     * @return {THREE.ShaderMaterial}
     */
    static build(dynamicMode = false, enableOptionalEffects = false, splatScale = 1.0,
                 pointCloudModeEnabled = false, maxSphericalHarmonicsDegree = 0) {

        const customVertexVars = `
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;

        let vertexShaderSource = SplatMaterial.buildVertexShaderBase(dynamicMode, enableOptionalEffects,
                                                                     maxSphericalHarmonicsDegree, customVertexVars);
        vertexShaderSource += SplatMaterial2D.buildVertexShaderProjection();
        const fragmentShaderSource = SplatMaterial2D.buildFragmentShader();

        const uniforms = SplatMaterial.getUniforms(dynamicMode, enableOptionalEffects,
                                                   maxSphericalHarmonicsDegree, splatScale, pointCloudModeEnabled);

        uniforms['scaleRotationsTexture'] = {
            'type': 't',
            'value': null
        };
        uniforms['scaleRotationsTextureSize'] = {
            'type': 'v2',
            'value': new THREE.Vector2(1024, 1024)
        };

        const material = new THREE.ShaderMaterial({
            uniforms: uniforms,
            vertexShader: vertexShaderSource,
            fragmentShader: fragmentShaderSource,
            transparent: true,
            alphaTest: 1.0,
            blending: THREE.NormalBlending,
            depthTest: true,
            depthWrite: false,
            side: THREE.DoubleSide
        });

        return material;
    }

    static buildVertexShaderProjection() {

        // Original CUDA code for calculating splat-to-screen transformation, for reference
        /*
            glm::mat3 R = quat_to_rotmat(rot);
            glm::mat3 S = scale_to_mat(scale, mod);
            glm::mat3 L = R * S;

            // center of Gaussians in the camera coordinate
            glm::mat3x4 splat2world = glm::mat3x4(
                glm::vec4(L[0], 0.0),
                glm::vec4(L[1], 0.0),
                glm::vec4(p_orig.x, p_orig.y, p_orig.z, 1)
            );

            glm::mat4 world2ndc = glm::mat4(
                projmatrix[0], projmatrix[4], projmatrix[8], projmatrix[12],
                projmatrix[1], projmatrix[5], projmatrix[9], projmatrix[13],
                projmatrix[2], projmatrix[6], projmatrix[10], projmatrix[14],
                projmatrix[3], projmatrix[7], projmatrix[11], projmatrix[15]
            );

            glm::mat3x4 ndc2pix = glm::mat3x4(
                glm::vec4(float(W) / 2.0, 0.0, 0.0, float(W-1) / 2.0),
                glm::vec4(0.0, float(H) / 2.0, 0.0, float(H-1) / 2.0),
                glm::vec4(0.0, 0.0, 0.0, 1.0)
            );

            T = glm::transpose(splat2world) * world2ndc * ndc2pix;
            normal = transformVec4x3({L[2].x, L[2].y, L[2].z}, viewmatrix);
        */

        // Compute a 2D-to-2D mapping matrix from a tangent plane into a image plane
        // given a 2D gaussian parameters. T = WH (from the paper: https://arxiv.org/pdf/2403.17888)
        let vertexShaderSource = `

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;

        // Original CUDA code for projection to 2D, for reference
        /*
            float3 T0 = {T[0][0], T[0][1], T[0][2]};
            float3 T1 = {T[1][0], T[1][1], T[1][2]};
            float3 T3 = {T[2][0], T[2][1], T[2][2]};

            // Compute AABB
            float3 temp_point = {1.0f, 1.0f, -1.0f};
            float distance = sumf3(T3 * T3 * temp_point);
            float3 f = (1 / distance) * temp_point;
            if (distance == 0.0) return false;

            point_image = {
                sumf3(f * T0 * T3),
                sumf3(f * T1 * T3)
            };

            float2 temp = {
                sumf3(f * T0 * T0),
                sumf3(f * T1 * T1)
            };
            float2 half_extend = point_image * point_image - temp;
            extent = sqrtf2(maxf2(1e-4, half_extend));
            return true;
        */

        // Computing the bounding box of the 2D Gaussian and its center
        // The center of the bounding box is used to create a low pass filter.
        // This code is based off the reference implementation and creates an AABB aligned
        // with the screen for the quad to be rendered.
        const referenceQuadGeneration = `
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        `;
        {
            // Create a quad that is aligned with the eigen vectors of the projected gaussian for rendering.
            // This is a different approach than the reference implementation, similar to how the rendering of
            // 3D gaussians in this viewer differs from the reference implementation. If the quad is too small
            // (smaller than a pixel), then revert to the reference implementation.
            vertexShaderSource += `

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    ${referenceQuadGeneration}
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `;
        }

        vertexShaderSource += SplatMaterial.getVertexShaderFadeIn();
        vertexShaderSource += `}`;

        return vertexShaderSource;
    }

    static buildFragmentShader() {

        // Original CUDA code for splat intersection, for reference
        /*
            const float2 xy = collected_xy[j];
            const float3 Tu = collected_Tu[j];
            const float3 Tv = collected_Tv[j];
            const float3 Tw = collected_Tw[j];
            float3 k = pix.x * Tw - Tu;
            float3 l = pix.y * Tw - Tv;
            float3 p = cross(k, l);
            if (p.z == 0.0) continue;
            float2 s = {p.x / p.z, p.y / p.z};
            float rho3d = (s.x * s.x + s.y * s.y);
            float2 d = {xy.x - pixf.x, xy.y - pixf.y};
            float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y);

            // compute intersection and depth
            float rho = min(rho3d, rho2d);
            float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z;
            if (depth < near_n) continue;
            float4 nor_o = collected_normal_opacity[j];
            float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
            float opa = nor_o.w;

            float power = -0.5f * rho;
            if (power > 0.0f)
                continue;

            // Eq. (2) from 3D Gaussian splatting paper.
            // Obtain alpha by multiplying with Gaussian opacity
            // and its exponential falloff from mean.
            // Avoid numerical instabilities (see paper appendix).
            float alpha = min(0.99f, opa * exp(power));
            if (alpha < 1.0f / 255.0f)
                continue;
            float test_T = T * (1 - alpha);
            if (test_T < 0.0001f)
            {
                done = true;
                continue;
            }

            float w = alpha * T;
        */
        let fragmentShaderSource = `
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `;

        return fragmentShaderSource;
    }
}

/**
 * SplatMesh
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME bone texture handling
 * - Added expression blendshape support
 * - Extended with skinning data management
 * - Additional ~800 lines of FLAME-specific code
 */


const logger$4 = getLogger('SplatMesh');

// Dummy geometry and material for initial Mesh construction
const dummyGeometry = new THREE.BufferGeometry();
const dummyMaterial = new THREE.MeshBasicMaterial();

/**
 * WebGL Extensions helper (from Three.js internals)
 */
function WebGLExtensions$1(gl) {
    const extensions = {};

    function getExtension(name) {
        if (extensions[name] !== undefined) {
            return extensions[name];
        }

        let extension;
        switch (name) {
            case 'WEBGL_depth_texture':
                extension = gl.getExtension('WEBGL_depth_texture') || gl.getExtension('MOZ_WEBGL_depth_texture') ||
                            gl.getExtension('WEBKIT_WEBGL_depth_texture');
                break;
            case 'EXT_texture_filter_anisotropic':
                extension = gl.getExtension('EXT_texture_filter_anisotropic') ||
                            gl.getExtension('MOZ_EXT_texture_filter_anisotropic') ||
                            gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');
                break;
            case 'WEBGL_compressed_texture_s3tc':
                extension = gl.getExtension('WEBGL_compressed_texture_s3tc') ||
                            gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') ||
                            gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');
                break;
            case 'WEBGL_compressed_texture_pvrtc':
                extension = gl.getExtension('WEBGL_compressed_texture_pvrtc') ||
                            gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');
                break;
            default:
                extension = gl.getExtension(name);
        }

        extensions[name] = extension;
        return extension;
    }

    return {
        has: function(name) {
            return getExtension(name) !== null;
        },
        init: function(capabilities) {
            if (capabilities.isWebGL2) {
                getExtension('EXT_color_buffer_float');
                getExtension('WEBGL_clip_cull_distance');
            } else {
                getExtension('WEBGL_depth_texture');
                getExtension('OES_texture_float');
                getExtension('OES_texture_half_float');
                getExtension('OES_texture_half_float_linear');
                getExtension('OES_standard_derivatives');
                getExtension('OES_element_index_uint');
                getExtension('OES_vertex_array_object');
                getExtension('ANGLE_instanced_arrays');
            }
            getExtension('OES_texture_float_linear');
            getExtension('EXT_color_buffer_half_float');
            getExtension('WEBGL_multisampled_render_to_texture');
        },
        get: function(name) {
            const extension = getExtension(name);
            if (extension === null) {
                logger$4.warn('THREE.WebGLRenderer: ' + name + ' extension not supported.');
            }
            return extension;
        }
    };
}

/**
 * WebGL Capabilities helper (from Three.js internals)
 */
function WebGLCapabilities$1(gl, extensions, parameters) {
    let maxAnisotropy;

    function getMaxAnisotropy() {
        if (maxAnisotropy !== undefined) return maxAnisotropy;
        if (extensions.has('EXT_texture_filter_anisotropic') === true) {
            const extension = extensions.get('EXT_texture_filter_anisotropic');
            maxAnisotropy = gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
        } else {
            maxAnisotropy = 0;
        }
        return maxAnisotropy;
    }

    function getMaxPrecision(precision) {
        if (precision === 'highp') {
            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision > 0 &&
                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision > 0) {
                return 'highp';
            }
            precision = 'mediump';
        }
        if (precision === 'mediump') {
            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision > 0 &&
                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision > 0) {
                return 'mediump';
            }
        }
        return 'lowp';
    }

    const isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl.constructor.name === 'WebGL2RenderingContext';

    let precision = parameters.precision !== undefined ? parameters.precision : 'highp';
    const maxPrecision = getMaxPrecision(precision);

    if (maxPrecision !== precision) {
        logger$4.warn('THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.');
        precision = maxPrecision;
    }

    const drawBuffers = isWebGL2 || extensions.has('WEBGL_draw_buffers');
    const logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;

    const maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
    const maxVertexTextures = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
    const maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);
    const maxCubemapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);

    const maxAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);
    const maxVertexUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
    const maxVaryings = gl.getParameter(gl.MAX_VARYING_VECTORS);
    const maxFragmentUniforms = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);

    const vertexTextures = maxVertexTextures > 0;
    const floatFragmentTextures = isWebGL2 || extensions.has('OES_texture_float');
    const floatVertexTextures = vertexTextures && floatFragmentTextures;

    const maxSamples = isWebGL2 ? gl.getParameter(gl.MAX_SAMPLES) : 0;

    return {
        isWebGL2: isWebGL2,
        drawBuffers: drawBuffers,
        getMaxAnisotropy: getMaxAnisotropy,
        getMaxPrecision: getMaxPrecision,
        precision: precision,
        logarithmicDepthBuffer: logarithmicDepthBuffer,
        maxTextures: maxTextures,
        maxVertexTextures: maxVertexTextures,
        maxTextureSize: maxTextureSize,
        maxCubemapSize: maxCubemapSize,
        maxAttributes: maxAttributes,
        maxVertexUniforms: maxVertexUniforms,
        maxVaryings: maxVaryings,
        maxFragmentUniforms: maxFragmentUniforms,
        vertexTextures: vertexTextures,
        floatFragmentTextures: floatFragmentTextures,
        floatVertexTextures: floatVertexTextures,
        maxSamples: maxSamples
    };
}

/**
 * WebGL Utils helper (from Three.js internals)
 */
function WebGLUtils$1(gl, extensions, capabilities) {
    const isWebGL2 = capabilities.isWebGL2;

    function convert(p, colorSpace) {
        let extension;

        if (p === THREE.UnsignedByteType) return gl.UNSIGNED_BYTE;
        if (p === 1017) return gl.UNSIGNED_SHORT_4_4_4_4;
        if (p === 1018) return gl.UNSIGNED_SHORT_5_5_5_1;
        if (p === 1010) return gl.BYTE;
        if (p === 1011) return gl.SHORT;
        if (p === 1012) return gl.UNSIGNED_SHORT;
        if (p === 1013) return gl.INT;
        if (p === 1014) return gl.UNSIGNED_INT;
        if (p === THREE.FloatType) return gl.FLOAT;

        if (p === THREE.HalfFloatType) {
            if (isWebGL2) return gl.HALF_FLOAT;
            extension = extensions.get('OES_texture_half_float');
            if (extension !== null) {
                return extension.HALF_FLOAT_OES;
            } else {
                return null;
            }
        }

        if (p === 1021) return gl.ALPHA;
        if (p === 1022) return gl.RGB;
        if (p === THREE.RGBAFormat) return gl.RGBA;
        if (p === 1024) return gl.LUMINANCE;
        if (p === 1025) return gl.LUMINANCE_ALPHA;
        if (p === 1026) return gl.DEPTH_COMPONENT;
        if (p === 1027) return gl.DEPTH_STENCIL;

        // WebGL2 formats
        if (p === THREE.RedFormat) return gl.RED;
        if (p === THREE.RedIntegerFormat) return gl.RED_INTEGER;
        if (p === THREE.RGFormat) return gl.RG;
        if (p === THREE.RGIntegerFormat) return gl.RG_INTEGER;
        if (p === THREE.RGBIntegerFormat) return gl.RGB_INTEGER;
        if (p === THREE.RGBAIntegerFormat) return gl.RGBA_INTEGER;

        // S3TC
        if (p === 33776 || p === 33777 || p === 33778 || p === 33779) {
            extension = extensions.get('WEBGL_compressed_texture_s3tc');
            if (extension !== null) {
                if (p === 33776) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (p === 33777) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (p === 33778) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (p === 33779) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            } else {
                return null;
            }
        }

        // PVRTC
        if (p === 35840 || p === 35841 || p === 35842 || p === 35843) {
            extension = extensions.get('WEBGL_compressed_texture_pvrtc');
            if (extension !== null) {
                if (p === 35840) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (p === 35841) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (p === 35842) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (p === 35843) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            } else {
                return null;
            }
        }

        // ETC
        if (p === 36196) {
            extension = extensions.get('WEBGL_compressed_texture_etc1');
            if (extension !== null) {
                return extension.COMPRESSED_RGB_ETC1_WEBGL;
            } else {
                return null;
            }
        }

        // ASTC
        if (p >= 37808 && p <= 37814 || p >= 37840 && p <= 37846) {
            extension = extensions.get('WEBGL_compressed_texture_astc');
            if (extension !== null) {
                return p;
            } else {
                return null;
            }
        }

        // BPTC
        if (p === 36492 || p === 36494 || p === 36495) {
            extension = extensions.get('EXT_texture_compression_bptc');
            if (extension !== null) {
                return p;
            } else {
                return null;
            }
        }

        if (p === 34042) return gl.UNSIGNED_INT_24_8;

        // Internal formats for float/half-float textures
        if (isWebGL2) {
            if (p === 6407) return gl.RGB;
            if (p === 6408) return gl.RGBA;
        }

        return (gl[p] !== undefined) ? gl[p] : null;
    }

    return {
        convert: convert
    };
}

// Constants for texture element counts
const COVARIANCES_ELEMENTS_PER_SPLAT = 6;
const CENTER_COLORS_ELEMENTS_PER_SPLAT = 4;

const COVARIANCES_ELEMENTS_PER_TEXEL_STORED = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED = 6;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED = 8;
const SCALES_ROTATIONS_ELEMENTS_PER_TEXEL = 4;
const CENTER_COLORS_ELEMENTS_PER_TEXEL = 4;
const SCENE_INDEXES_ELEMENTS_PER_TEXEL = 1;

const SCENE_FADEIN_RATE_FAST = 0.012;
const SCENE_FADEIN_RATE_GRADUAL = 0.003;

const VISIBLE_REGION_EXPANSION_DELTA = 1;

const MAX_TEXTURE_TEXELS = 16777216;

class SplatMesh extends THREE.Mesh {

    constructor(splatRenderMode = SplatRenderMode.ThreeD, dynamicMode = false, enableOptionalEffects = false,
                halfPrecisionCovariancesOnGPU = false, devicePixelRatio = 1, enableDistancesComputationOnGPU = true,
                integerBasedDistancesComputation = false, antialiased = false, maxScreenSpaceSplatSize = 1024, logLevel = LogLevel.None,
                sphericalHarmonicsDegree = 0, sceneFadeInRateMultiplier = 1.0, kernel2DSize = 0.3, irisOcclusionConfig = null) {
        super(dummyGeometry, dummyMaterial);

        // Reference to a Three.js renderer
        this.renderer = undefined;

        // Determine how the splats are rendered
        this.splatRenderMode = splatRenderMode;

        // When 'dynamicMode' is true, scenes are assumed to be non-static. Dynamic scenes are handled differently
        // and certain optimizations cannot be made for them. Additionally, by default, all splat data retrieved from
        // this splat mesh will not have their scene transform applied to them if the splat mesh is dynamic. That
        // can be overriden via parameters to the individual functions that are used to retrieve splat data.
        this.dynamicMode = dynamicMode;

        // When true, allows for usage of extra properties and attributes during rendering for effects such as opacity adjustment.
        // Default is false for performance reasons. These properties are separate from transform properties (scale, rotation, position)
        // that are enabled by the 'dynamicScene' parameter.
        this.enableOptionalEffects = enableOptionalEffects;

        // Use 16-bit floating point values when storing splat covariance data in textures, instead of 32-bit
        this.halfPrecisionCovariancesOnGPU = halfPrecisionCovariancesOnGPU;

        // Ratio of the resolution in physical pixels to the resolution in CSS pixels for the current display device
        this.devicePixelRatio = devicePixelRatio;

        // Use a transform feedback to calculate splat distances from the camera
        this.enableDistancesComputationOnGPU = enableDistancesComputationOnGPU;

        // Use a faster integer-based approach for calculating splat distances from the camera
        this.integerBasedDistancesComputation = integerBasedDistancesComputation;

        // When true, will perform additional steps during rendering to address artifacts caused by the rendering of gaussians at a
        // substantially different resolution than that at which they were rendered during training. This will only work correctly
        // for models that were trained using a process that utilizes this compensation calculation. For more details:
        // https://github.com/nerfstudio-project/gsplat/pull/117
        // https://github.com/graphdeco-inria/gaussian-splatting/issues/294#issuecomment-1772688093
        this.antialiased = antialiased;

        // The size of the 2D kernel used for splat rendering
        // This will adjust the 2D kernel size after the projection
        this.kernel2DSize = kernel2DSize;

        // Specify the maximum clip space splat size, can help deal with large splats that get too unwieldy
        this.maxScreenSpaceSplatSize = maxScreenSpaceSplatSize;

        // The verbosity of console logging
        this.logLevel = logLevel;

        // Degree 0 means no spherical harmonics
        this.sphericalHarmonicsDegree = sphericalHarmonicsDegree;
        this.minSphericalHarmonicsDegree = 0;

        this.sceneFadeInRateMultiplier = sceneFadeInRateMultiplier;

        // The individual splat scenes stored in this splat mesh, each containing their own transform
        this.scenes = [];

        // Special octree tailored to SplatMesh instances
        this.splatTree = null;
        this.baseSplatTree = null;

        // Cache textures and the intermediate data used to populate them
        this.splatDataTextures = {};
        this.flameModel = null;
        this.expressionBSNum = 0;
        this.bsWeight = [];

        this.bonesMatrix = null;
        this.bonesNum = null;
        this.bonesWeight = null;
        this.gaussianSplatCount = null;

        this.morphTargetDictionary = null;
        this.distancesTransformFeedback = {
            'id': null,
            'vertexShader': null,
            'fragmentShader': null,
            'program': null,
            'centersBuffer': null,
            'sceneIndexesBuffer': null,
            'outDistancesBuffer': null,
            'centersLoc': -1,
            'modelViewProjLoc': -1,
            'sceneIndexesLoc': -1,
            'transformsLocs': []
        };

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSceneIndexMap = [];

        // Optional iris occlusion configuration from avatar ZIP
        this.irisOcclusionConfig = irisOcclusionConfig;

        this.lastBuildSplatCount = 0;
        this.lastBuildScenes = [];
        this.lastBuildMaxSplatCount = 0;
        this.lastBuildSceneCount = 0;
        this.firstRenderTime = -1;
        this.finalBuild = false;

        this.webGLUtils = null;

        this.boundingBox = new THREE.Box3();
        this.calculatedSceneCenter = new THREE.Vector3();
        this.maxSplatDistanceFromSceneCenter = 0;
        this.visibleRegionBufferRadius = 0;
        this.visibleRegionRadius = 0;
        this.visibleRegionFadeStartRadius = 0;
        this.visibleRegionChanging = false;

        this.splatScale = 1.0;
        this.pointCloudModeEnabled = false;

        this.disposed = false;
        this.lastRenderer = null;
        this.visible = false;
    }

    /**
     * Build a container for each scene managed by this splat mesh based on an instance of SplatBuffer, along with optional
     * transform data (position, scale, rotation) passed to the splat mesh during the build process.
     * @param {Array<THREE.Matrix4>} splatBuffers SplatBuffer instances containing splats for each scene
     * @param {Array<object>} sceneOptions Array of options objects: {
     *
     *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
     *
     *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
     *
     *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
     * }
     * @return {Array<THREE.Matrix4>}
     */
    static buildScenes(parentObject, splatBuffers, sceneOptions) {
        const scenes = [];
        scenes.length = splatBuffers.length;
        for (let i = 0; i < splatBuffers.length; i++) {
            const splatBuffer = splatBuffers[i];
            const options = sceneOptions[i] || {};
            let positionArray = options['position'] || [0, 0, 0];
            let rotationArray = options['rotation'] || [0, 0, 0, 1];
            let scaleArray = options['scale'] || [1, 1, 1];
            const position = new THREE.Vector3().fromArray(positionArray);
            const rotation = new THREE.Quaternion().fromArray(rotationArray);
            const scale = new THREE.Vector3().fromArray(scaleArray);
            const scene = SplatMesh.createScene(splatBuffer, position, rotation, scale,
                                                options.splatAlphaRemovalThreshold || 1, options.opacity, options.visible);
            parentObject.add(scene);
            scenes[i] = scene;
        }
        return scenes;
    }



    static createScene(splatBuffer, position, rotation, scale, minimumAlpha, opacity = 1.0, visible = true) {
        return new SplatScene(splatBuffer, position, rotation, scale, minimumAlpha, opacity, visible);
    }

    /**
     * Build data structures that map global splat indexes (based on a unified index across all splat buffers) to
     * local data within a single scene.
     * @param {Array<SplatBuffer>} splatBuffers Instances of SplatBuffer off which to build the maps
     * @return {object}
     */
    static buildSplatIndexMaps(splatBuffers) {
        const localSplatIndexMap = [];
        const sceneIndexMap = [];
        let totalSplatCount = 0;
        for (let s = 0; s < splatBuffers.length; s++) {
            const splatBuffer = splatBuffers[s];
            const maxSplatCount = splatBuffer.getMaxSplatCount();
            for (let i = 0; i < maxSplatCount; i++) {
                localSplatIndexMap[totalSplatCount] = i;
                sceneIndexMap[totalSplatCount] = s;
                totalSplatCount++;
            }
        }
        return {
            localSplatIndexMap,
            sceneIndexMap
        };
    }

    /**
     * Build an instance of SplatTree (a specialized octree) for the given splat mesh.
     * @param {Array<number>} minAlphas Array of minimum splat slphas for each scene
     * @param {function} onSplatTreeIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                            builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {SplatTree}
     */
     buildSplatTree = (minAlphas = [], onSplatTreeIndexesUpload, onSplatTreeConstruction) => {
        return new Promise((resolve) => {
            this.disposeSplatTree();
            // TODO: expose SplatTree constructor parameters (maximumDepth and maxCentersPerNode) so that they can
            // be configured on a per-scene basis
            this.baseSplatTree = new SplatTree(8, 1000);
            const buildStartTime = performance.now();
            const splatColor = new THREE.Vector4();
            this.baseSplatTree.processSplatMesh(this, (splatIndex) => {
                this.getSplatColor(splatIndex, splatColor);
                const sceneIndex = this.getSceneIndexForSplat(splatIndex);
                const minAlpha = minAlphas[sceneIndex] || 1;
                return splatColor.w >= minAlpha;
            }, onSplatTreeIndexesUpload, onSplatTreeConstruction)
            .then(() => {
                const buildTime = performance.now() - buildStartTime;
                if (this.logLevel >= LogLevel.Info) logger$4.info('SplatTree build: ' + buildTime + ' ms');
                if (this.disposed) {
                    resolve();
                } else {

                    this.splatTree = this.baseSplatTree;
                    this.baseSplatTree = null;

                    let leavesWithVertices = 0;
                    let avgSplatCount = 0;
                    let nodeCount = 0;

                    this.splatTree.visitLeaves((node) => {
                        const nodeSplatCount = node.data.indexes.length;
                        if (nodeSplatCount > 0) {
                            avgSplatCount += nodeSplatCount;
                            nodeCount++;
                            leavesWithVertices++;
                        }
                    });
                    if (this.logLevel >= LogLevel.Info) {
                        logger$4.info(`SplatTree leaves: ${this.splatTree.countLeaves()}`);
                        logger$4.info(`SplatTree leaves with splats:${leavesWithVertices}`);
                        avgSplatCount = avgSplatCount / nodeCount;
                        logger$4.info(`Avg splat count per node: ${avgSplatCount}`);
                        logger$4.info(`Total splat count: ${this.getSplatCount()}`);
                    }
                    resolve();
                }
            });
        });
    };

    /**
     * Construct this instance of SplatMesh.
     * @param {Array<SplatBuffer>} splatBuffers The base splat data, instances of SplatBuffer
     * @param {Array<object>} sceneOptions Dynamic options for each scene {
     *
     *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
     *                                     value (valid range: 0 - 255), defaults to 1
     *
     *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
     *
     *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
     *
     *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
     *
     * }
     * @param {boolean} keepSceneTransforms For a scene that already exists and is being overwritten, this flag
     *                                      says to keep the transform from the existing scene.
     * @param {boolean} finalBuild Will the splat mesh be in its final state after this build?
     * @param {function} onSplatTreeIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                            builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {object} Object containing info about the splats that are updated
     */
    build(splatBuffers, sceneOptions, keepSceneTransforms = true, finalBuild = false,
          onSplatTreeIndexesUpload, onSplatTreeConstruction, preserveVisibleRegion = true) {

        this.sceneOptions = sceneOptions;
        this.finalBuild = finalBuild;

        const maxSplatCount = SplatMesh.getTotalMaxSplatCountForSplatBuffers(splatBuffers);

        const newScenes = SplatMesh.buildScenes(this, splatBuffers, sceneOptions);
        if (keepSceneTransforms) {
            for (let i = 0; i < this.scenes.length && i < newScenes.length; i++) {
                const newScene = newScenes[i];
                const existingScene = this.getScene(i);
                newScene.copyTransformData(existingScene);
            }
        }
        this.scenes = newScenes;

        let minSphericalHarmonicsDegree = 3;
        for (let splatBuffer of splatBuffers) {
            const splatBufferSphericalHarmonicsDegree = splatBuffer.getMinSphericalHarmonicsDegree();
            if (splatBufferSphericalHarmonicsDegree < minSphericalHarmonicsDegree) {
                minSphericalHarmonicsDegree = splatBufferSphericalHarmonicsDegree;
            }
        }
        this.minSphericalHarmonicsDegree = Math.min(minSphericalHarmonicsDegree, this.sphericalHarmonicsDegree);

        let splatBuffersChanged = false;
        if (splatBuffers.length !== this.lastBuildScenes.length) {
            splatBuffersChanged = true;
        } else {
            for (let i = 0; i < splatBuffers.length; i++) {
                const splatBuffer = splatBuffers[i];
                if (splatBuffer !== this.lastBuildScenes[i].splatBuffer) {
                    splatBuffersChanged = true;
                    break;
                }
            }
        }

        let isUpdateBuild = true;
        if (this.scenes.length !== 1 ||
            this.lastBuildSceneCount !== this.scenes.length ||
            this.lastBuildMaxSplatCount !== maxSplatCount ||
            splatBuffersChanged) {
                isUpdateBuild = false;
       }

       if (!isUpdateBuild) {
            this.boundingBox = new THREE.Box3();
            if (!preserveVisibleRegion) {
                this.maxSplatDistanceFromSceneCenter = 0;
                this.visibleRegionBufferRadius = 0;
                this.visibleRegionRadius = 0;
                this.visibleRegionFadeStartRadius = 0;
                this.firstRenderTime = -1;
            }
            this.lastBuildScenes = [];
            this.lastBuildSplatCount = 0;
            this.lastBuildMaxSplatCount = 0;
            this.disposeMeshData();
            this.geometry = SplatGeometry.build(maxSplatCount);
            if (this.splatRenderMode === SplatRenderMode.ThreeD) {
                this.material = SplatMaterial3D.build(this.dynamicMode, this.enableOptionalEffects, this.antialiased,
                                                      this.maxScreenSpaceSplatSize, this.splatScale, this.pointCloudModeEnabled,
                                                      this.minSphericalHarmonicsDegree, this.kernel2DSize, this.irisOcclusionConfig);
            } else {
                this.material = SplatMaterial2D.build(this.dynamicMode, this.enableOptionalEffects,
                                                      this.splatScale, this.pointCloudModeEnabled, this.minSphericalHarmonicsDegree);
            }

            const indexMaps = SplatMesh.buildSplatIndexMaps(splatBuffers);
            this.globalSplatIndexToLocalSplatIndexMap = indexMaps.localSplatIndexMap;
            this.globalSplatIndexToSceneIndexMap = indexMaps.sceneIndexMap;
        }

        const splatBufferSplatCount = this.getSplatCount(true);
        if (this.enableDistancesComputationOnGPU) this.setupDistancesComputationTransformFeedback();
        const dataUpdateResults = this.refreshGPUDataFromSplatBuffers(isUpdateBuild);

        for (let i = 0; i < this.scenes.length; i++) {
            this.lastBuildScenes[i] = this.scenes[i];
        }
        this.lastBuildSplatCount = splatBufferSplatCount;
        this.lastBuildMaxSplatCount = this.getMaxSplatCount();
        this.lastBuildSceneCount = this.scenes.length;

        // if (finalBuild && this.scenes.length > 0) {
        //     this.buildSplatTree(sceneOptions.map(options => options.splatAlphaRemovalThreshold || 1),
        //                         onSplatTreeIndexesUpload, onSplatTreeConstruction)
        //     .then(() => {
        //         if (this.onSplatTreeReadyCallback) this.onSplatTreeReadyCallback(this.splatTree);
        //         this.onSplatTreeReadyCallback = null;
        //     });
        // }

        this.visible = (this.scenes.length > 0);

        return dataUpdateResults;
    }

    freeIntermediateSplatData() {

        const deleteTextureData = (texture) => {
            delete texture.source.data;
            delete texture.image;
            texture.onUpdate = null;
        };

        delete this.splatDataTextures.baseData.covariances;
        delete this.splatDataTextures.baseData.centers;
        delete this.splatDataTextures.baseData.colors;
        delete this.splatDataTextures.baseData.sphericalHarmonics;

        delete this.splatDataTextures.centerColors.data;
        delete this.splatDataTextures.covariances.data;
        if (this.splatDataTextures.sphericalHarmonics) {
            delete this.splatDataTextures.sphericalHarmonics.data;
        }
        if (this.splatDataTextures.sceneIndexes) {
            delete this.splatDataTextures.sceneIndexes.data;
        }

        this.splatDataTextures.centerColors.texture.needsUpdate = true;
        this.splatDataTextures.centerColors.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.centerColors.texture);
        };

        this.splatDataTextures.flameModelPosTexture.texture.needsUpdate = true;
        this.splatDataTextures.flameModelPosTexture.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.flameModelPosTexture.texture);
        };

        this.splatDataTextures.covariances.texture.needsUpdate = true;
        this.splatDataTextures.covariances.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.covariances.texture);
        };

        if (this.splatDataTextures.sphericalHarmonics) {
            if (this.splatDataTextures.sphericalHarmonics.texture) {
                this.splatDataTextures.sphericalHarmonics.texture.needsUpdate = true;
                this.splatDataTextures.sphericalHarmonics.texture.onUpdate = () => {
                    deleteTextureData(this.splatDataTextures.sphericalHarmonics.texture);
                };
            } else {
                this.splatDataTextures.sphericalHarmonics.textures.forEach((texture) => {
                    texture.needsUpdate = true;
                    texture.onUpdate = () => {
                        deleteTextureData(texture);
                    };
                });
            }
        }
        if (this.splatDataTextures.sceneIndexes) {
            this.splatDataTextures.sceneIndexes.texture.needsUpdate = true;
            this.splatDataTextures.sceneIndexes.texture.onUpdate = () => {
                deleteTextureData(this.splatDataTextures.sceneIndexes.texture);
            };
        }
    }
    /**
     * Dispose all resources held by the splat mesh
     */
    dispose() {
        this.disposeMeshData();
        this.disposeTextures();
        this.disposeSplatTree();
        if (this.enableDistancesComputationOnGPU) {
            if (this.computeDistancesOnGPUSyncTimeout) {
                clearTimeout(this.computeDistancesOnGPUSyncTimeout);
                this.computeDistancesOnGPUSyncTimeout = null;
            }
            this.disposeDistancesComputationGPUResources();
        }
        this.scenes = [];
        this.distancesTransformFeedback = {
            'id': null,
            'vertexShader': null,
            'fragmentShader': null,
            'program': null,
            'centersBuffer': null,
            'sceneIndexesBuffer': null,
            'outDistancesBuffer': null,
            'centersLoc': -1,
            'modelViewProjLoc': -1,
            'sceneIndexesLoc': -1,
            'transformsLocs': []
        };
        this.renderer = null;

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSceneIndexMap = [];

        this.lastBuildSplatCount = 0;
        this.lastBuildScenes = [];
        this.lastBuildMaxSplatCount = 0;
        this.lastBuildSceneCount = 0;
        this.firstRenderTime = -1;
        this.finalBuild = false;

        this.webGLUtils = null;

        this.boundingBox = new THREE.Box3();
        this.calculatedSceneCenter = new THREE.Vector3();
        this.maxSplatDistanceFromSceneCenter = 0;
        this.visibleRegionBufferRadius = 0;
        this.visibleRegionRadius = 0;
        this.visibleRegionFadeStartRadius = 0;
        this.visibleRegionChanging = false;

        this.splatScale = 1.0;
        this.pointCloudModeEnabled = false;

        this.disposed = true;
        this.lastRenderer = null;
        this.visible = false;
    }

    /**
     * Dispose of only the Three.js mesh resources (geometry, material, and texture)
     */
    disposeMeshData() {
        if (this.geometry && this.geometry !== dummyGeometry) {
            this.geometry.dispose();
            this.geometry = null;
        }
        if (this.material) {
            this.material.dispose();
            this.material = null;
        }
    }

    disposeTextures() {
        for (let textureKey in this.splatDataTextures) {
            if (Object.hasOwn(this.splatDataTextures, textureKey)) {
                const textureContainer = this.splatDataTextures[textureKey];
                if (textureContainer.texture) {
                    textureContainer.texture.dispose();
                    textureContainer.texture = null;
                }
            }
        }
        this.splatDataTextures = null;
    }

    disposeSplatTree() {
        if (this.splatTree) {
            this.splatTree.dispose();
            this.splatTree = null;
        }
        if (this.baseSplatTree) {
            this.baseSplatTree.dispose();
            this.baseSplatTree = null;
        }
    }

    getSplatTree() {
        return this.splatTree;
    }

    onSplatTreeReady(callback) {
        this.onSplatTreeReadyCallback = callback;
    }

    /**
     * Get copies of data that are necessary for splat distance computation: splat center positions and splat
     * scene indexes (necessary for applying dynamic scene transformations during distance computation)
     * @param {*} start The index at which to start copying data
     * @param {*} end  The index at which to stop copying data
     * @return {object}
     */
    getDataForDistancesComputation(start, end) {
        const centers = this.integerBasedDistancesComputation ?
                        this.getIntegerCenters(start, end, true) :
                        this.getFloatCenters(start, end, true);
        const sceneIndexes = this.getSceneIndexes(start, end);
        return {
            centers,
            sceneIndexes
        };
    }

    /**
     * Refresh data textures and GPU buffers with splat data from the splat buffers belonging to this mesh.
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     * @return {object}
     */
    refreshGPUDataFromSplatBuffers(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        this.refreshDataTexturesFromSplatBuffers(sinceLastBuildOnly);
        const updateStart = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        const { centers, sceneIndexes } = this.getDataForDistancesComputation(updateStart, splatCount - 1);
        if (this.enableDistancesComputationOnGPU) {
            this.refreshGPUBuffersForDistancesComputation(centers, sceneIndexes, sinceLastBuildOnly);
        }
        return {
            'from': updateStart,
            'to': splatCount - 1,
            'count': splatCount - updateStart,
            'centers': centers,
            'sceneIndexes': sceneIndexes
        };
    }

    /**
     * Update the GPU buffers that are used for computing splat distances on the GPU.
     * @param {Array<number>} centers Splat center positions
     * @param {Array<number>} sceneIndexes Indexes of the scene to which each splat belongs
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     */
    refreshGPUBuffersForDistancesComputation(centers, sceneIndexes, sinceLastBuildOnly = false) {
        const offset = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        this.updateGPUCentersBufferForDistancesComputation(sinceLastBuildOnly, centers, offset);
        this.updateGPUTransformIndexesBufferForDistancesComputation(sinceLastBuildOnly, sceneIndexes, offset);
    }

    /**
     * Refresh data textures with data from the splat buffers for this mesh.
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     */
    refreshDataTexturesFromSplatBuffers(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        const fromSplat = this.lastBuildSplatCount;
        const toSplat = splatCount - 1;

        if (!sinceLastBuildOnly) {
            this.setupDataTextures();
            this.updateBaseDataFromSplatBuffers();
        } else {
            this.updateBaseDataFromSplatBuffers(fromSplat, toSplat);
        }

        this.updateDataTexturesFromBaseData(fromSplat, toSplat);
        this.updateVisibleRegion(sinceLastBuildOnly);
    }

    setupDataTextures() {
        const maxSplatCount = this.getMaxSplatCount();
        const splatCount = this.getSplatCount(true);

        this.disposeTextures();

        const computeDataTextureSize = (elementsPerTexel, elementsPerSplat) => {
            const texSize = new THREE.Vector2(4096, 1024);
            while (texSize.x * texSize.y * elementsPerTexel < maxSplatCount * elementsPerSplat) texSize.y *= 2;
            return texSize;
        };

        const getCovariancesElementsPertexelStored = (compressionLevel) => {
            return compressionLevel >= 1 ? COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED : COVARIANCES_ELEMENTS_PER_TEXEL_STORED;
        };

        const getCovariancesInitialTextureSpecs = (compressionLevel) => {
            const elementsPerTexelStored = getCovariancesElementsPertexelStored(compressionLevel);
            const texSize = computeDataTextureSize(elementsPerTexelStored, 6);
            return {elementsPerTexelStored, texSize};
        };

        let covarianceCompressionLevel = this.getTargetCovarianceCompressionLevel();
        const scaleRotationCompressionLevel = 0;
        const shCompressionLevel = this.getTargetSphericalHarmonicsCompressionLevel();

        let covariances;
        let scales;
        let rotations;
        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            const initialCovTexSpecs = getCovariancesInitialTextureSpecs(covarianceCompressionLevel);
            if (initialCovTexSpecs.texSize.x * initialCovTexSpecs.texSize.y > MAX_TEXTURE_TEXELS && covarianceCompressionLevel === 0) {
                covarianceCompressionLevel = 1;
            }
            covariances = new Float32Array(maxSplatCount * COVARIANCES_ELEMENTS_PER_SPLAT);
        } else {
            scales = new Float32Array(maxSplatCount * 3);
            rotations = new Float32Array(maxSplatCount * 4);
        }

        const centers = new Float32Array(maxSplatCount * 3);
        const colors = new Uint8Array(maxSplatCount * 4);

        let SphericalHarmonicsArrayType = Float32Array;
        if (shCompressionLevel === 1) SphericalHarmonicsArrayType = Uint16Array;
        else if (shCompressionLevel === 2) SphericalHarmonicsArrayType = Uint8Array;
        const shComponentCount = getSphericalHarmonicsComponentCountForDegree(this.minSphericalHarmonicsDegree);
        const shData = this.minSphericalHarmonicsDegree ? new SphericalHarmonicsArrayType(maxSplatCount * shComponentCount) : undefined;

        // set up centers/colors data texture
        const centersColsTexSize = computeDataTextureSize(CENTER_COLORS_ELEMENTS_PER_TEXEL, 4);
        const paddedCentersCols = new Uint32Array(centersColsTexSize.x * centersColsTexSize.y * CENTER_COLORS_ELEMENTS_PER_TEXEL);
        SplatMesh.updateCenterColorsPaddedData(0, splatCount - 1, centers, colors, paddedCentersCols);

        const centersColsTex = new THREE.DataTexture(paddedCentersCols, centersColsTexSize.x, centersColsTexSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        centersColsTex.internalFormat = 'RGBA32UI';
        centersColsTex.needsUpdate = true;
        this.material.uniforms.centersColorsTexture.value = centersColsTex;
        this.material.uniforms.centersColorsTextureSize.value.copy(centersColsTexSize);
        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures = {
            'baseData': {
                'covariances': covariances,
                'scales': scales,
                'rotations': rotations,
                'centers': centers,
                'colors': colors,
                'sphericalHarmonics': shData
            },
            'centerColors': {
                'data': paddedCentersCols,
                'texture': centersColsTex,
                'size': centersColsTexSize
            }
        };

        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            // set up covariances data texture

            const covTexSpecs = getCovariancesInitialTextureSpecs(covarianceCompressionLevel);
            const covariancesElementsPerTexelStored = covTexSpecs.elementsPerTexelStored;
            const covTexSize = covTexSpecs.texSize;

            let CovariancesDataType = covarianceCompressionLevel >= 1 ? Uint32Array : Float32Array;
            const covariancesElementsPerTexelAllocated = covarianceCompressionLevel >= 1 ?
                                                         COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED :
                                                         COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED;
            const covariancesTextureData = new CovariancesDataType(covTexSize.x * covTexSize.y * covariancesElementsPerTexelAllocated);

            if (covarianceCompressionLevel === 0) {
                covariancesTextureData.set(covariances);
            } else {
                SplatMesh.updatePaddedCompressedCovariancesTextureData(covariances, covariancesTextureData, 0, 0, covariances.length);
            }

            let covTex;
            if (covarianceCompressionLevel >= 1) {
                covTex = new THREE.DataTexture(covariancesTextureData, covTexSize.x, covTexSize.y,
                                               THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
                covTex.internalFormat = 'RGBA32UI';
                this.material.uniforms.covariancesTextureHalfFloat.value = covTex;
            } else {
                covTex = new THREE.DataTexture(covariancesTextureData, covTexSize.x, covTexSize.y, THREE.RGBAFormat, THREE.FloatType);
                this.material.uniforms.covariancesTexture.value = covTex;

                // For some reason a usampler2D needs to have a valid texture attached or WebGL complains
                const dummyTex = new THREE.DataTexture(new Uint32Array(32), 2, 2, THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
                dummyTex.internalFormat = 'RGBA32UI';
                this.material.uniforms.covariancesTextureHalfFloat.value = dummyTex;
                dummyTex.needsUpdate = true;
            }
            covTex.needsUpdate = true;

            this.material.uniforms.covariancesAreHalfFloat.value = (covarianceCompressionLevel >= 1) ? 1 : 0;
            this.material.uniforms.covariancesTextureSize.value.copy(covTexSize);

            this.splatDataTextures['covariances'] = {
                'data': covariancesTextureData,
                'texture': covTex,
                'size': covTexSize,
                'compressionLevel': covarianceCompressionLevel,
                'elementsPerTexelStored': covariancesElementsPerTexelStored,
                'elementsPerTexelAllocated': covariancesElementsPerTexelAllocated
            };
        } else {
            // set up scale & rotations data texture
            const elementsPerSplat = 6;
            const scaleRotationsTexSize = computeDataTextureSize(SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, elementsPerSplat);
            let ScaleRotationsDataType = Float32Array;
            let scaleRotationsTextureType = THREE.FloatType;
            const paddedScaleRotations = new ScaleRotationsDataType(scaleRotationsTexSize.x * scaleRotationsTexSize.y *
                                                                    SCALES_ROTATIONS_ELEMENTS_PER_TEXEL);

            SplatMesh.updateScaleRotationsPaddedData(0, splatCount - 1, scales, rotations, paddedScaleRotations);

            const scaleRotationsTex = new THREE.DataTexture(paddedScaleRotations, scaleRotationsTexSize.x, scaleRotationsTexSize.y,
                                                            THREE.RGBAFormat, scaleRotationsTextureType);
            scaleRotationsTex.needsUpdate = true;
            this.material.uniforms.scaleRotationsTexture.value = scaleRotationsTex;
            this.material.uniforms.scaleRotationsTextureSize.value.copy(scaleRotationsTexSize);

            this.splatDataTextures['scaleRotations'] = {
                'data': paddedScaleRotations,
                'texture': scaleRotationsTex,
                'size': scaleRotationsTexSize,
                'compressionLevel': scaleRotationCompressionLevel
            };
        }

        if (shData) {
            const shTextureType = shCompressionLevel === 2 ? THREE.UnsignedByteType : THREE.HalfFloatType;

            let paddedSHComponentCount = shComponentCount;
            if (paddedSHComponentCount % 2 !== 0) paddedSHComponentCount++;
            const shElementsPerTexel = this.minSphericalHarmonicsDegree === 2 ? 4 : 2;
            const texelFormat = shElementsPerTexel === 4 ? THREE.RGBAFormat : THREE.RGFormat;
            let shTexSize = computeDataTextureSize(shElementsPerTexel, paddedSHComponentCount);

            // Use one texture for all spherical harmonics data
            if (shTexSize.x * shTexSize.y <= MAX_TEXTURE_TEXELS) {
                const paddedSHArraySize = shTexSize.x * shTexSize.y * shElementsPerTexel;
                const paddedSHArray = new SphericalHarmonicsArrayType(paddedSHArraySize);
                for (let c = 0; c < splatCount; c++) {
                    const srcBase = shComponentCount * c;
                    const destBase = paddedSHComponentCount * c;
                    for (let i = 0; i < shComponentCount; i++) {
                        paddedSHArray[destBase + i] = shData[srcBase + i];
                    }
                }

                const shTexture = new THREE.DataTexture(paddedSHArray, shTexSize.x, shTexSize.y, texelFormat, shTextureType);
                shTexture.needsUpdate = true;
                this.material.uniforms.sphericalHarmonicsTexture.value = shTexture;
                this.splatDataTextures['sphericalHarmonics'] = {
                    'componentCount': shComponentCount,
                    'paddedComponentCount': paddedSHComponentCount,
                    'data': paddedSHArray,
                    'textureCount': 1,
                    'texture': shTexture,
                    'size': shTexSize,
                    'compressionLevel': shCompressionLevel,
                    'elementsPerTexel': shElementsPerTexel
                };
            // Use three textures for spherical harmonics data, one per color channel
            } else {
                const shComponentCountPerChannel = shComponentCount / 3;
                paddedSHComponentCount = shComponentCountPerChannel;
                if (paddedSHComponentCount % 2 !== 0) paddedSHComponentCount++;
                shTexSize = computeDataTextureSize(shElementsPerTexel, paddedSHComponentCount);

                const paddedSHArraySize = shTexSize.x * shTexSize.y * shElementsPerTexel;
                const textureUniforms = [this.material.uniforms.sphericalHarmonicsTextureR,
                                         this.material.uniforms.sphericalHarmonicsTextureG,
                                         this.material.uniforms.sphericalHarmonicsTextureB];
                const paddedSHArrays = [];
                const shTextures = [];
                for (let t = 0; t < 3; t++) {
                    const paddedSHArray = new SphericalHarmonicsArrayType(paddedSHArraySize);
                    paddedSHArrays.push(paddedSHArray);
                    for (let c = 0; c < splatCount; c++) {
                        const srcBase = shComponentCount * c;
                        const destBase = paddedSHComponentCount * c;
                        if (shComponentCountPerChannel >= 3) {
                            for (let i = 0; i < 3; i++) paddedSHArray[destBase + i] = shData[srcBase + t * 3 + i];
                            if (shComponentCountPerChannel >= 8) {
                                for (let i = 0; i < 5; i++) paddedSHArray[destBase + 3 + i] = shData[srcBase + 9 + t * 5 + i];
                            }
                        }
                    }

                    const shTexture = new THREE.DataTexture(paddedSHArray, shTexSize.x, shTexSize.y, texelFormat, shTextureType);
                    shTextures.push(shTexture);
                    shTexture.needsUpdate = true;
                    textureUniforms[t].value = shTexture;
                }

                this.material.uniforms.sphericalHarmonicsMultiTextureMode.value = 1;
                this.splatDataTextures['sphericalHarmonics'] = {
                    'componentCount': shComponentCount,
                    'componentCountPerChannel': shComponentCountPerChannel,
                    'paddedComponentCount': paddedSHComponentCount,
                    'data': paddedSHArrays,
                    'textureCount': 3,
                    'textures': shTextures,
                    'size': shTexSize,
                    'compressionLevel': shCompressionLevel,
                    'elementsPerTexel': shElementsPerTexel
                };
            }

            this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(shTexSize);
            this.material.uniforms.sphericalHarmonics8BitMode.value = shCompressionLevel === 2 ? 1 : 0;
            for (let s = 0; s < this.scenes.length; s++) {
                const splatBuffer = this.scenes[s].splatBuffer;
                this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[s] =
                    splatBuffer.minSphericalHarmonicsCoeff;
                this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[s] =
                    splatBuffer.maxSphericalHarmonicsCoeff;
            }
            this.material.uniformsNeedUpdate = true;
        }

        const sceneIndexesTexSize = computeDataTextureSize(SCENE_INDEXES_ELEMENTS_PER_TEXEL, 4);
        const paddedTransformIndexes = new Uint32Array(sceneIndexesTexSize.x *
                                                       sceneIndexesTexSize.y * SCENE_INDEXES_ELEMENTS_PER_TEXEL);
        for (let c = 0; c < splatCount; c++) paddedTransformIndexes[c] = this.globalSplatIndexToSceneIndexMap[c];
        const sceneIndexesTexture = new THREE.DataTexture(paddedTransformIndexes, sceneIndexesTexSize.x, sceneIndexesTexSize.y,
                                                          THREE.RedIntegerFormat, THREE.UnsignedIntType);
        sceneIndexesTexture.internalFormat = 'R32UI';
        sceneIndexesTexture.needsUpdate = true;
        this.material.uniforms.sceneIndexesTexture.value = sceneIndexesTexture;
        this.material.uniforms.sceneIndexesTextureSize.value.copy(sceneIndexesTexSize);
        this.material.uniformsNeedUpdate = true;
        this.splatDataTextures['sceneIndexes'] = {
            'data': paddedTransformIndexes,
            'texture': sceneIndexesTexture,
            'size': sceneIndexesTexSize
        };
        this.material.uniforms.sceneCount.value = this.scenes.length;

        // FLAME-specific setup (only if flameModel has required data)
        if (this.flameModel && this.flameModel.geometry && this.flameModel.geometry.morphAttributes && this.flameModel.skeleton) {
            this.expressionBSNum = this.flameModel.geometry.morphAttributes.position.length;
            this.material.uniforms.bsCount.value = this.expressionBSNum;

            this.flameModel.skeleton.bones.forEach((bone, index) => {
                if (bone.name == 'head')
                    this.material.uniforms.headBoneIndex.value = index;
            });

            this.buildModelTexture(this.flameModel);
            this.buildBoneMatrixTexture();
            this.buildBoneWeightTexture(this.flameModel);
        }
    }

    buildBoneMatrixTexture() {
        if (!this.bsWeight)
            return

        // Guard: Requires FLAME model with morphTargetDictionary
        if (!this.flameModel || !this.flameModel.morphTargetDictionary) {
            return;
        }

        //this.bonesNum + this.expressionBSNum / 4 = 30, so 32
        const boneTextureSize = new THREE.Vector2(4, 32);
        let boneMatrixTextureData = new Float32Array(this.bonesMatrix);
        let boneMatrixTextureDataInt = new Uint32Array(boneTextureSize.x * boneTextureSize.y * 4);
        this.morphTargetDictionary = this.flameModel.morphTargetDictionary;

        for (let c = 0; c < this.bonesNum * 16; c++) {
            boneMatrixTextureDataInt[c] = uintEncodedFloat$1(boneMatrixTextureData[c]);
        }
        if (this.flameModel && this.flameModel.skeleton) {
            this.material.uniforms.boneTexture0.value = this.flameModel.skeleton.boneTexture;
            this.material.uniforms.bindMatrix.value = this.flameModel.bindMatrix;
            this.material.uniforms.bindMatrixInverse.value = this.flameModel.bindMatrixInverse;
        }
        for (const key in this.bsWeight) {
            if (Object.hasOwn(this.bsWeight, key)) {
                const value = this.bsWeight[key];
                const idx = this.morphTargetDictionary[key];
                boneMatrixTextureDataInt[idx + this.bonesNum * 16] = uintEncodedFloat$1(value);
            }
        }

        // for (let c = 0; c < this.bsWeight.length; c++) {
        //     this.morphTargetDictionary
        //     boneMatrixTextureDataInt[c + this.bonesNum * 16] = uintEncodedFloat(this.bsWeight[c]);
        // }

        const boneMatrixTex = new THREE.DataTexture(boneMatrixTextureDataInt, boneTextureSize.x, boneTextureSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        boneMatrixTex.internalFormat = 'RGBA32UI';
        boneMatrixTex.needsUpdate = true;
        this.material.uniforms.boneTexture.value = boneMatrixTex;
        this.material.uniforms.boneTextureSize.value.copy(boneTextureSize);

        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures['boneMatrix'] = {
            'data': boneMatrixTextureDataInt,
            'texture': boneMatrixTex,
            'size': boneTextureSize,
        };
        this.splatDataTextures.baseData['boneMatrix'] = boneMatrixTextureDataInt;
    }

    updateBoneMatrixTexture() {
        if (!this.bsWeight || !this.morphTargetDictionary)
            return

        for (const key in this.bsWeight) {
            if (Object.hasOwn(this.bsWeight, key)) {
                const value = this.bsWeight[key];
                const idx = this.morphTargetDictionary[key];
                this.splatDataTextures.baseData['boneMatrix'][idx + this.bonesNum * 16] = uintEncodedFloat$1(value);
            }
        }

        // for (let c = 0; c < this.bsWeight.length; c++) {
        //     this.splatDataTextures.baseData['boneMatrix'][c + this.bonesNum * 16] = uintEncodedFloat(this.bsWeight[c]);
        // }
        this.splatDataTextures['boneMatrix']['texture'].data = this.splatDataTextures.baseData['boneMatrix'];
        
        this.splatDataTextures['boneMatrix']['texture'].needsUpdate = true;
        this.material.uniforms.boneTexture.value = this.splatDataTextures['boneMatrix']['texture'];

        if (this.flameModel.skeleton) {
            this.material.uniforms.boneTexture0.value = this.flameModel.skeleton.boneTexture;
            this.material.uniforms.bindMatrix.value = this.flameModel.bindMatrix;
            this.material.uniforms.bindMatrixInverse.value = this.flameModel.bindMatrixInverse;
        }
        
        this.material.uniformsNeedUpdate = true;
    }

    buildBoneWeightTexture(flameModel) {
        // Guard: bonesWeight is required for FLAME bone weight texture building
        if (!this.bonesWeight) {
            return;
        }

        let shapedMesh = flameModel.geometry.attributes.position.array;

        let pointNum = shapedMesh.length / 3;
        const boneWeightTextureSize = new THREE.Vector2(512, 512);
        let boneWeightTextureData = new Float32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
        let boneWeightTextureDataInt = new Uint32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
        for (let i = 0; i < pointNum; i++) {
            boneWeightTextureData[i * 8 + 0] = this.bonesWeight[i][0];
            boneWeightTextureData[i * 8 + 1] = this.bonesWeight[i][1];
            boneWeightTextureData[i * 8 + 2] = this.bonesWeight[i][2];
            boneWeightTextureData[i * 8 + 3] = this.bonesWeight[i][3];
            boneWeightTextureData[i * 8 + 4] = this.bonesWeight[i][4];

            boneWeightTextureDataInt[i * 8 + 0] = uintEncodedFloat$1(this.bonesWeight[i][0]);
            boneWeightTextureDataInt[i * 8 + 1] = uintEncodedFloat$1(this.bonesWeight[i][1]);
            boneWeightTextureDataInt[i * 8 + 2] = uintEncodedFloat$1(this.bonesWeight[i][2]);
            boneWeightTextureDataInt[i * 8 + 3] = uintEncodedFloat$1(this.bonesWeight[i][3]);
            boneWeightTextureDataInt[i * 8 + 4] = uintEncodedFloat$1(this.bonesWeight[i][4]);

        }
        const boneWeightTex = new THREE.DataTexture(boneWeightTextureDataInt, boneWeightTextureSize.x, boneWeightTextureSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        
        boneWeightTex.internalFormat = 'RGBA32UI';
        boneWeightTex.needsUpdate = true;
        this.material.uniforms.boneWeightTexture.value = boneWeightTex;
        this.material.uniforms.boneWeightTextureSize.value.copy(boneWeightTextureSize);
        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures['boneWeight'] = {
            'data': boneWeightTextureDataInt,
            'texture': boneWeightTex,
            'size': boneWeightTextureSize,
        };
        this.splatDataTextures.baseData['boneWeight'] = boneWeightTextureDataInt;
    }


    buildModelTexture(flameModel) {
        // Guard: Requires FLAME model with morph attributes
        if (!flameModel || !flameModel.geometry || !flameModel.geometry.morphAttributes || !flameModel.morphTargetDictionary) {
            return;
        }

        const flameModelTexSize = new THREE.Vector2(4096, 2048);

        var shapedMesh = flameModel.geometry.attributes.position.array;
        var shapedMeshArray = [];//Array.from(shapedMesh);
        let pointNum = shapedMesh.length / 3;

        let bsLength = flameModel.geometry.morphAttributes.position.length;

        const morphTargetNames = Object.keys(flameModel.morphTargetDictionary);
        morphTargetNames.forEach((name, newIndex) => {
            const originalIndex = flameModel.morphTargetDictionary[name];
            var bsMesh = flameModel.geometry.morphAttributes.position[originalIndex];
            shapedMeshArray = shapedMeshArray.concat(Array.from(bsMesh.array));
            
          });
        shapedMeshArray = shapedMeshArray.concat(Array.from(shapedMesh));

        let flameModelData = new Float32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
        let flameModelDataInt = new Uint32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
        for (let c = 0; c < pointNum * (bsLength + 1); c++) {
            flameModelData[c * 4 + 0] = shapedMeshArray[c * 3 + 0];
            flameModelData[c * 4 + 1] = shapedMeshArray[c * 3 + 1];
            flameModelData[c * 4 + 2] = shapedMeshArray[c * 3 + 2];

            flameModelDataInt[c * 4 + 0] = uintEncodedFloat$1(flameModelData[c * 4 + 0]);
            flameModelDataInt[c * 4 + 1] = uintEncodedFloat$1(flameModelData[c * 4 + 1]);
            flameModelDataInt[c * 4 + 2] = uintEncodedFloat$1(flameModelData[c * 4 + 2]);
        }

        const flameModelTex = new THREE.DataTexture(flameModelDataInt, flameModelTexSize.x, flameModelTexSize.y,
                                                     THREE.RGBAIntegerFormat, THREE.UnsignedIntType);
        flameModelTex.internalFormat = 'RGBA32UI';
        flameModelTex.needsUpdate = true;
        this.material.uniforms.flameModelTexture.value = flameModelTex;
        this.material.uniforms.flameModelTextureSize.value.copy(flameModelTexSize);
        this.material.uniformsNeedUpdate = true;
        this.material.uniforms.gaussianSplatCount.value = this.gaussianSplatCount;

        this.splatDataTextures['flameModel'] = {
            'data': flameModelDataInt,
            'texture': flameModelTex,
            'size': flameModelTexSize,
        };
        this.splatDataTextures.baseData['flameModelPos'] = flameModelData;
    }

    updateTetureAfterBSAndSkeleton(fromSplat, toSplat) {
        const sceneTransform = new THREE.Matrix4();

        this.getSceneTransform(0, sceneTransform);
        this.getScene(0).splatBuffer.fillSplatCenterArray(this.morphedMesh, this.splatDataTextures.baseData.centers, sceneTransform, fromSplat, toSplat, 0);

        // Update center & color data texture
        const centerColorsTextureDescriptor = this.splatDataTextures['centerColors'];
        const paddedCenterColors = centerColorsTextureDescriptor.data;
        const centerColorsTexture = centerColorsTextureDescriptor.texture;
        SplatMesh.updateCenterColorsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.centers,
                                                this.splatDataTextures.baseData.colors, paddedCenterColors);
        const centerColorsTextureProps = this.renderer ? this.renderer.properties.get(centerColorsTexture) : null;
        if (!centerColorsTextureProps || !centerColorsTextureProps.__webglTexture) {
            centerColorsTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedCenterColors, centerColorsTextureDescriptor.texture, centerColorsTextureDescriptor.size,
                                    centerColorsTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 4,
                                    fromSplat, toSplat);
        }

        this.updateBoneMatrixTexture();
    }

    updateBaseDataFromSplatBuffers(fromSplat, toSplat) {
        const covarancesTextureDesc = this.splatDataTextures['covariances'];
        const covarianceCompressionLevel = covarancesTextureDesc ? covarancesTextureDesc.compressionLevel : undefined;
        const scaleRotationsTextureDesc = this.splatDataTextures['scaleRotations'];
        const scaleRotationCompressionLevel = scaleRotationsTextureDesc ? scaleRotationsTextureDesc.compressionLevel : undefined;
        const shITextureDesc = this.splatDataTextures['sphericalHarmonics'];
        const shCompressionLevel = shITextureDesc ? shITextureDesc.compressionLevel : 0;

        this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances, this.splatDataTextures.baseData.scales,
                                 this.splatDataTextures.baseData.rotations, this.splatDataTextures.baseData.centers,
                                 this.splatDataTextures.baseData.colors, this.splatDataTextures.baseData.sphericalHarmonics, 
                                 this.splatDataTextures.baseData.flameModelPos,
                                 undefined,
                                 covarianceCompressionLevel, scaleRotationCompressionLevel, shCompressionLevel,
                                 fromSplat, toSplat, fromSplat);
    }

    updateDataTexturesFromBaseData(fromSplat, toSplat) {
        const covarancesTextureDesc = this.splatDataTextures['covariances'];
        const covarianceCompressionLevel = covarancesTextureDesc ? covarancesTextureDesc.compressionLevel : undefined;
        const scaleRotationsTextureDesc = this.splatDataTextures['scaleRotations'];
        const scaleRotationCompressionLevel = scaleRotationsTextureDesc ? scaleRotationsTextureDesc.compressionLevel : undefined;
        const shTextureDesc = this.splatDataTextures['sphericalHarmonics'];
        const shCompressionLevel = shTextureDesc ? shTextureDesc.compressionLevel : 0;

        // Update flame data texture
        const flameModelTextureDescriptor = this.splatDataTextures['flameModel'];
        const flameModelPos = flameModelTextureDescriptor.data;
        const flameModelPosTexture = flameModelTextureDescriptor.texture;

        const flameModelPosTextureProps = this.renderer ? this.renderer.properties.get(flameModelPosTexture) : null;
        if (!flameModelPosTextureProps || !flameModelPosTextureProps.__webglTexture) {
            flameModelPosTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(flameModelPos, flameModelTextureDescriptor.texture, flameModelTextureDescriptor.size,
                flameModelPosTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 3,
                                   fromSplat, toSplat);
        }

        // Update center & color data texture
        const centerColorsTextureDescriptor = this.splatDataTextures['centerColors'];
        const paddedCenterColors = centerColorsTextureDescriptor.data;
        const centerColorsTexture = centerColorsTextureDescriptor.texture;
        SplatMesh.updateCenterColorsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.centers,
                                               this.splatDataTextures.baseData.colors, paddedCenterColors);
        const centerColorsTextureProps = this.renderer ? this.renderer.properties.get(centerColorsTexture) : null;
        if (!centerColorsTextureProps || !centerColorsTextureProps.__webglTexture) {
            centerColorsTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedCenterColors, centerColorsTextureDescriptor.texture, centerColorsTextureDescriptor.size,
                                   centerColorsTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 4,
                                   fromSplat, toSplat);
        }

        // update covariance data texture
        if (covarancesTextureDesc) {
            const covariancesTexture = covarancesTextureDesc.texture;
            const covarancesStartElement = fromSplat * COVARIANCES_ELEMENTS_PER_SPLAT;
            const covariancesEndElement = toSplat * COVARIANCES_ELEMENTS_PER_SPLAT;

            if (covarianceCompressionLevel === 0) {
                for (let i = covarancesStartElement; i <= covariancesEndElement; i++) {
                    const covariance = this.splatDataTextures.baseData.covariances[i];
                    covarancesTextureDesc.data[i] = covariance;
                }
            } else {
                SplatMesh.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,
                                                                       covarancesTextureDesc.data,
                                                                       fromSplat * covarancesTextureDesc.elementsPerTexelAllocated,
                                                                       covarancesStartElement, covariancesEndElement);
            }

            const covariancesTextureProps = this.renderer ? this.renderer.properties.get(covariancesTexture) : null;
            if (!covariancesTextureProps || !covariancesTextureProps.__webglTexture) {
                covariancesTexture.needsUpdate = true;
            } else {
                if (covarianceCompressionLevel === 0) {
                    this.updateDataTexture(covarancesTextureDesc.data, covarancesTextureDesc.texture, covarancesTextureDesc.size,
                                           covariancesTextureProps, covarancesTextureDesc.elementsPerTexelStored,
                                           COVARIANCES_ELEMENTS_PER_SPLAT, 4, fromSplat, toSplat);
                } else {
                    this.updateDataTexture(covarancesTextureDesc.data, covarancesTextureDesc.texture, covarancesTextureDesc.size,
                                           covariancesTextureProps, covarancesTextureDesc.elementsPerTexelAllocated,
                                           covarancesTextureDesc.elementsPerTexelAllocated, 2, fromSplat, toSplat);
                }
            }
        }

        // update scale and rotation data texture
        if (scaleRotationsTextureDesc) {
            const paddedScaleRotations = scaleRotationsTextureDesc.data;
            const scaleRotationsTexture = scaleRotationsTextureDesc.texture;
            const elementsPerSplat = 6;
            const bytesPerElement = scaleRotationCompressionLevel === 0 ? 4 : 2;

            SplatMesh.updateScaleRotationsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.scales,
                                                     this.splatDataTextures.baseData.rotations, paddedScaleRotations);
            const scaleRotationsTextureProps = this.renderer ? this.renderer.properties.get(scaleRotationsTexture) : null;
            if (!scaleRotationsTextureProps || !scaleRotationsTextureProps.__webglTexture) {
                scaleRotationsTexture.needsUpdate = true;
            } else {
                this.updateDataTexture(paddedScaleRotations, scaleRotationsTextureDesc.texture, scaleRotationsTextureDesc.size,
                                       scaleRotationsTextureProps, SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, elementsPerSplat, bytesPerElement,
                                       fromSplat, toSplat);
            }
        }

        // update spherical harmonics data texture
        const shData = this.splatDataTextures.baseData.sphericalHarmonics;
        if (shData) {
            let shBytesPerElement = 4;
            if (shCompressionLevel === 1) shBytesPerElement = 2;
            else if (shCompressionLevel === 2) shBytesPerElement = 1;

            const updateTexture = (shTexture, shTextureSize, elementsPerTexel, paddedSHArray, paddedSHComponentCount) => {
                const shTextureProps = this.renderer ? this.renderer.properties.get(shTexture) : null;
                if (!shTextureProps || !shTextureProps.__webglTexture) {
                    shTexture.needsUpdate = true;
                } else {
                    this.updateDataTexture(paddedSHArray, shTexture, shTextureSize, shTextureProps, elementsPerTexel,
                                           paddedSHComponentCount, shBytesPerElement, fromSplat, toSplat);
                }
            };

            const shComponentCount = shTextureDesc.componentCount;
            const paddedSHComponentCount = shTextureDesc.paddedComponentCount;

            // Update for the case of a single texture for all spherical harmonics data
            if (shTextureDesc.textureCount === 1) {
                const paddedSHArray = shTextureDesc.data;
                for (let c = fromSplat; c <= toSplat; c++) {
                    const srcBase = shComponentCount * c;
                    const destBase = paddedSHComponentCount * c;
                    for (let i = 0; i < shComponentCount; i++) {
                        paddedSHArray[destBase + i] = shData[srcBase + i];
                    }
                }
                updateTexture(shTextureDesc.texture, shTextureDesc.size,
                              shTextureDesc.elementsPerTexel, paddedSHArray, paddedSHComponentCount);
            // Update for the case of spherical harmonics data split among three textures, one for each color channel
            } else {
                const shComponentCountPerChannel = shTextureDesc.componentCountPerChannel;
                for (let t = 0; t < 3; t++) {
                    const paddedSHArray = shTextureDesc.data[t];
                    for (let c = fromSplat; c <= toSplat; c++) {
                        const srcBase = shComponentCount * c;
                        const destBase = paddedSHComponentCount * c;
                        if (shComponentCountPerChannel >= 3) {
                            for (let i = 0; i < 3; i++) paddedSHArray[destBase + i] = shData[srcBase + t * 3 + i];
                            if (shComponentCountPerChannel >= 8) {
                                for (let i = 0; i < 5; i++) paddedSHArray[destBase + 3 + i] = shData[srcBase + 9 + t * 5 + i];
                            }
                        }
                    }
                    updateTexture(shTextureDesc.textures[t], shTextureDesc.size,
                                  shTextureDesc.elementsPerTexel, paddedSHArray, paddedSHComponentCount);
                }
            }
        }

        // update scene index & transform data
        const sceneIndexesTexDesc = this.splatDataTextures['sceneIndexes'];
        const paddedSceneIndexes = sceneIndexesTexDesc.data;
        for (let c = this.lastBuildSplatCount; c <= toSplat; c++) {
            paddedSceneIndexes[c] = this.globalSplatIndexToSceneIndexMap[c];
        }
        const sceneIndexesTexture = sceneIndexesTexDesc.texture;
        const sceneIndexesTextureProps = this.renderer ? this.renderer.properties.get(sceneIndexesTexture) : null;
        if (!sceneIndexesTextureProps || !sceneIndexesTextureProps.__webglTexture) {
            sceneIndexesTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedSceneIndexes, sceneIndexesTexDesc.texture, sceneIndexesTexDesc.size,
                                   sceneIndexesTextureProps, 1, 1, 1, this.lastBuildSplatCount, toSplat);
        }
    }

    getTargetCovarianceCompressionLevel() {
        return this.halfPrecisionCovariancesOnGPU ? 1 : 0;
    }

    getTargetSphericalHarmonicsCompressionLevel() {
        return Math.max(1, this.getMaximumSplatBufferCompressionLevel());
    }

    getMaximumSplatBufferCompressionLevel() {
        let maxCompressionLevel;
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            if (i === 0 || splatBuffer.compressionLevel > maxCompressionLevel) {
                maxCompressionLevel = splatBuffer.compressionLevel;
            }
        }
        return maxCompressionLevel;
    }

    getMinimumSplatBufferCompressionLevel() {
        let minCompressionLevel;
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            if (i === 0 || splatBuffer.compressionLevel < minCompressionLevel) {
                minCompressionLevel = splatBuffer.compressionLevel;
            }
        }
        return minCompressionLevel;
    }

    static computeTextureUpdateRegion(startSplat, endSplat, textureWidth, elementsPerTexel, elementsPerSplat) {
        const texelsPerSplat = elementsPerSplat / elementsPerTexel;

        const startSplatTexels = startSplat * texelsPerSplat;
        const startRow = Math.floor(startSplatTexels / textureWidth);
        const startRowElement = startRow * textureWidth * elementsPerTexel;

        const endSplatTexels = endSplat * texelsPerSplat;
        const endRow = Math.floor(endSplatTexels / textureWidth);
        const endRowEndElement = endRow * textureWidth * elementsPerTexel + (textureWidth * elementsPerTexel);

        return {
            'dataStart': startRowElement,
            'dataEnd': endRowEndElement,
            'startRow': startRow,
            'endRow': endRow
        };
    }

    updateDataTexture(paddedData, texture, textureSize, textureProps, elementsPerTexel, elementsPerSplat, bytesPerElement, from, to) {
        const gl = this.renderer.getContext();
        const updateRegion = SplatMesh.computeTextureUpdateRegion(from, to, textureSize.x, elementsPerTexel, elementsPerSplat);
        const updateElementCount = updateRegion.dataEnd - updateRegion.dataStart;
        const updateDataView = new paddedData.constructor(paddedData.buffer,
                                                          updateRegion.dataStart * bytesPerElement, updateElementCount);
        const updateHeight = updateRegion.endRow - updateRegion.startRow + 1;
        const glType = this.webGLUtils.convert(texture.type);
        const glFormat = this.webGLUtils.convert(texture.format, texture.colorSpace);
        const currentTexture = gl.getParameter(gl.TEXTURE_BINDING_2D);
        gl.bindTexture(gl.TEXTURE_2D, textureProps.__webglTexture);
        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, updateRegion.startRow,
                         textureSize.x, updateHeight, glFormat, glType, updateDataView);
        gl.bindTexture(gl.TEXTURE_2D, currentTexture);
    }

    static updatePaddedCompressedCovariancesTextureData(sourceData, textureData, textureDataStartIndex, fromElement, toElement) {
        let textureDataView = new DataView(textureData.buffer);
        let textureDataIndex = textureDataStartIndex;
        let sequentialCount = 0;
        for (let i = fromElement; i <= toElement; i+=2) {
            textureDataView.setUint16(textureDataIndex * 2, sourceData[i], true);
            textureDataView.setUint16(textureDataIndex * 2 + 2, sourceData[i + 1], true);
            textureDataIndex += 2;
            sequentialCount++;
            if (sequentialCount >= 3) {
                textureDataIndex += 2;
                sequentialCount = 0;
            }
        }
    }

    static updateCenterColorsPaddedData(from, to, centers, colors, paddedCenterColors) {
        for (let c = from; c <= to; c++) {
            const colorsBase = c * 4;
            const centersBase = c * 3;
            const centerColorsBase = c * 4;
            paddedCenterColors[centerColorsBase] = rgbaArrayToInteger(colors, colorsBase);
            paddedCenterColors[centerColorsBase + 1] = uintEncodedFloat$1(centers[centersBase]);
            paddedCenterColors[centerColorsBase + 2] = uintEncodedFloat$1(centers[centersBase + 1]);
            paddedCenterColors[centerColorsBase + 3] = uintEncodedFloat$1(centers[centersBase + 2]);
        }
    }

    static updateScaleRotationsPaddedData(from, to, scales, rotations, paddedScaleRotations) {
        const combinedSize = 6;
        for (let c = from; c <= to; c++) {
            const scaleBase = c * 3;
            const rotationBase = c * 4;
            const scaleRotationsBase = c * combinedSize;

            paddedScaleRotations[scaleRotationsBase] = scales[scaleBase];
            paddedScaleRotations[scaleRotationsBase + 1] = scales[scaleBase + 1];
            paddedScaleRotations[scaleRotationsBase + 2] = scales[scaleBase + 2];

            paddedScaleRotations[scaleRotationsBase + 3] = rotations[rotationBase];
            paddedScaleRotations[scaleRotationsBase + 4] = rotations[rotationBase + 1];
            paddedScaleRotations[scaleRotationsBase + 5] = rotations[rotationBase + 2];
        }
    }

    updateVisibleRegion(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        const tempCenter = new THREE.Vector3();
        if (!sinceLastBuildOnly) {
            const avgCenter = new THREE.Vector3();
            this.scenes.forEach((scene) => {
                avgCenter.add(scene.splatBuffer.sceneCenter);
            });
            avgCenter.multiplyScalar(1.0 / this.scenes.length);
            this.calculatedSceneCenter.copy(avgCenter);
            this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter);
            this.material.uniformsNeedUpdate = true;
        }

        const startSplatFormMaxDistanceCalc = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        for (let i = startSplatFormMaxDistanceCalc; i < splatCount; i++) {
            this.getSplatCenter(this.morphedMesh, i, tempCenter, true);
            const distFromCSceneCenter = tempCenter.sub(this.calculatedSceneCenter).length();
            if (distFromCSceneCenter > this.maxSplatDistanceFromSceneCenter) this.maxSplatDistanceFromSceneCenter = distFromCSceneCenter;
        }

        if (this.maxSplatDistanceFromSceneCenter - this.visibleRegionBufferRadius > VISIBLE_REGION_EXPANSION_DELTA) {
            this.visibleRegionBufferRadius = this.maxSplatDistanceFromSceneCenter;
            this.visibleRegionRadius = Math.max(this.visibleRegionBufferRadius - VISIBLE_REGION_EXPANSION_DELTA, 0.0);
        }
        if (this.finalBuild) this.visibleRegionRadius = this.visibleRegionBufferRadius = this.maxSplatDistanceFromSceneCenter;
        this.updateVisibleRegionFadeDistance();
    }

    updateVisibleRegionFadeDistance(sceneRevealMode = SceneRevealMode.Default) {
        const fastFadeRate = SCENE_FADEIN_RATE_FAST * this.sceneFadeInRateMultiplier;
        const gradualFadeRate = SCENE_FADEIN_RATE_GRADUAL * this.sceneFadeInRateMultiplier;
        const defaultFadeInRate = this.finalBuild ? fastFadeRate : gradualFadeRate;
        const fadeInRate = sceneRevealMode === SceneRevealMode.Default ? defaultFadeInRate : gradualFadeRate;
        this.visibleRegionFadeStartRadius = (this.visibleRegionRadius - this.visibleRegionFadeStartRadius) *
                                             fadeInRate + this.visibleRegionFadeStartRadius;
        const fadeInPercentage = (this.visibleRegionBufferRadius > 0) ?
                                 (this.visibleRegionFadeStartRadius / this.visibleRegionBufferRadius) : 0;
        const fadeInComplete = fadeInPercentage > 0.99;
        const shaderFadeInComplete = (fadeInComplete || sceneRevealMode === SceneRevealMode.Instant) ? 1 : 0;

        this.material.uniforms.visibleRegionFadeStartRadius.value = this.visibleRegionFadeStartRadius;
        this.material.uniforms.visibleRegionRadius.value = this.visibleRegionRadius;
        this.material.uniforms.firstRenderTime.value = this.firstRenderTime;
        this.material.uniforms.currentTime.value = performance.now();
        this.material.uniforms.fadeInComplete.value = shaderFadeInComplete;
        this.material.uniformsNeedUpdate = true;
        this.visibleRegionChanging = !fadeInComplete;
    }

    /**
     * Set the indexes of splats that should be rendered; should be sorted in desired render order.
     * @param {Uint32Array} globalIndexes Sorted index list of splats to be rendered
     * @param {number} renderSplatCount Total number of splats to be rendered. Necessary because we may not want to render
     *                                  every splat.
     */
    updateRenderIndexes(globalIndexes, renderSplatCount) {
        const geometry = this.geometry;
        geometry.attributes.splatIndex.set(globalIndexes);
        geometry.attributes.splatIndex.needsUpdate = true;
        if (renderSplatCount > 0 && this.firstRenderTime === -1) this.firstRenderTime = performance.now();
        geometry.instanceCount = renderSplatCount;
        geometry.setDrawRange(0, renderSplatCount);
    }

    /**
     * Update the transforms for each scene in this splat mesh from their individual components (position,
     * quaternion, and scale)
     */
    updateTransforms() {
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            scene.updateTransform(this.dynamicMode);
        }
    }

    updateUniforms = function() {

        const viewport = new THREE.Vector2();

        return function(renderDimensions, cameraFocalLengthX, cameraFocalLengthY,
                        orthographicMode, orthographicZoom, inverseFocalAdjustment) {
            const splatCount = this.getSplatCount();
            if (splatCount > 0) {
                viewport.set(renderDimensions.x * this.devicePixelRatio,
                             renderDimensions.y * this.devicePixelRatio);
                this.material.uniforms.viewport.value.copy(viewport);
                this.material.uniforms.basisViewport.value.set(1.0 / viewport.x, 1.0 / viewport.y);
                this.material.uniforms.focal.value.set(cameraFocalLengthX, cameraFocalLengthY);
                this.material.uniforms.orthographicMode.value = orthographicMode ? 1 : 0;
                this.material.uniforms.orthoZoom.value = orthographicZoom;
                this.material.uniforms.inverseFocalAdjustment.value = inverseFocalAdjustment;
                if (this.dynamicMode) {
                    for (let i = 0; i < this.scenes.length; i++) {
                        this.material.uniforms.transforms.value[i].copy(this.getScene(i).transform);
                    }
                }
                if (this.enableOptionalEffects) {
                    for (let i = 0; i < this.scenes.length; i++) {
                        this.material.uniforms.sceneOpacity.value[i] = clamp(this.getScene(i).opacity, 0.0, 1.0);
                        this.material.uniforms.sceneVisibility.value[i] = this.getScene(i).visible ? 1 : 0;
                        this.material.uniformsNeedUpdate = true;
                    }
                }
                this.material.uniformsNeedUpdate = true;
            }
        };

    }();

    setSplatScale(splatScale = 1) {
        this.splatScale = splatScale;
        this.material.uniforms.splatScale.value = splatScale;
        this.material.uniformsNeedUpdate = true;
    }

    getSplatScale() {
        return this.splatScale;
    }

    setPointCloudModeEnabled(enabled) {
        this.pointCloudModeEnabled = enabled;
        this.material.uniforms.pointCloudModeEnabled.value = enabled ? 1 : 0;
        this.material.uniformsNeedUpdate = true;
    }

    getPointCloudModeEnabled() {
        return this.pointCloudModeEnabled;
    }

    getSplatDataTextures() {
        return this.splatDataTextures;
    }

    getSplatCount(includeSinceLastBuild = false) {
        if (!includeSinceLastBuild) return this.lastBuildSplatCount;
        else return SplatMesh.getTotalSplatCountForScenes(this.scenes);
    }

    static getTotalSplatCountForScenes(scenes) {
        let totalSplatCount = 0;
        for (let scene of scenes) {
            if (scene && scene.splatBuffer) totalSplatCount += scene.splatBuffer.getSplatCount();
        }
        return totalSplatCount;
    }

    static getTotalSplatCountForSplatBuffers(splatBuffers) {
        let totalSplatCount = 0;
        for (let splatBuffer of splatBuffers) totalSplatCount += splatBuffer.getSplatCount();
        return totalSplatCount;
    }

    getMaxSplatCount() {
        return SplatMesh.getTotalMaxSplatCountForScenes(this.scenes);
    }

    static getTotalMaxSplatCountForScenes(scenes) {
        let totalSplatCount = 0;
        for (let scene of scenes) {
            if (scene && scene.splatBuffer) totalSplatCount += scene.splatBuffer.getMaxSplatCount();
        }
        return totalSplatCount;
    }

    static getTotalMaxSplatCountForSplatBuffers(splatBuffers) {
        let totalSplatCount = 0;
        for (let splatBuffer of splatBuffers) totalSplatCount += splatBuffer.getMaxSplatCount();
        return totalSplatCount;
    }

    disposeDistancesComputationGPUResources() {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        if (this.distancesTransformFeedback.vao) {
            gl.deleteVertexArray(this.distancesTransformFeedback.vao);
            this.distancesTransformFeedback.vao = null;
        }
        if (this.distancesTransformFeedback.program) {
            gl.deleteProgram(this.distancesTransformFeedback.program);
            gl.deleteShader(this.distancesTransformFeedback.vertexShader);
            gl.deleteShader(this.distancesTransformFeedback.fragmentShader);
            this.distancesTransformFeedback.program = null;
            this.distancesTransformFeedback.vertexShader = null;
            this.distancesTransformFeedback.fragmentShader = null;
        }
        this.disposeDistancesComputationGPUBufferResources();
        if (this.distancesTransformFeedback.id) {
            gl.deleteTransformFeedback(this.distancesTransformFeedback.id);
            this.distancesTransformFeedback.id = null;
        }
    }

    disposeDistancesComputationGPUBufferResources() {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        if (this.distancesTransformFeedback.centersBuffer) {
            this.distancesTransformFeedback.centersBuffer = null;
            gl.deleteBuffer(this.distancesTransformFeedback.centersBuffer);
        }
        if (this.distancesTransformFeedback.outDistancesBuffer) {
            gl.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer);
            this.distancesTransformFeedback.outDistancesBuffer = null;
        }
    }

    /**
     * Set the Three.js renderer used by this splat mesh
     * @param {THREE.WebGLRenderer} renderer Instance of THREE.WebGLRenderer
     */
    setRenderer(renderer) {
        if (renderer !== this.renderer) {
            this.renderer = renderer;
            const gl = this.renderer.getContext();
            const extensions = new WebGLExtensions$1(gl);
            const capabilities = new WebGLCapabilities$1(gl, extensions, {});
            extensions.init(capabilities);
            this.webGLUtils = new WebGLUtils$1(gl, extensions, capabilities);
            if (this.enableDistancesComputationOnGPU && this.getSplatCount() > 0) {
                this.setupDistancesComputationTransformFeedback();
                const { centers, sceneIndexes } = this.getDataForDistancesComputation(0, this.getSplatCount() - 1);
                this.refreshGPUBuffersForDistancesComputation(centers, sceneIndexes);
            }
        }
    }

    setupDistancesComputationTransformFeedback = function() {

        let currentMaxSplatCount;

        return () => {
            const maxSplatCount = this.getMaxSplatCount();

            if (!this.renderer) return;

            const rebuildGPUObjects = (this.lastRenderer !== this.renderer);
            const rebuildBuffers = currentMaxSplatCount !== maxSplatCount;

            if (!rebuildGPUObjects && !rebuildBuffers) return;

            if (rebuildGPUObjects) {
                this.disposeDistancesComputationGPUResources();
            } else if (rebuildBuffers) {
                this.disposeDistancesComputationGPUBufferResources();
            }

            const gl = this.renderer.getContext();

            const createShader = (gl, type, source) => {
                const shader = gl.createShader(type);
                if (!shader) {
                    logger$4.error('Fatal error: gl could not create a shader object.');
                    return null;
                }

                gl.shaderSource(shader, source);
                gl.compileShader(shader);

                const compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
                if (!compiled) {
                    let typeName = 'unknown';
                    if (type === gl.VERTEX_SHADER) typeName = 'vertex shader';
                    else if (type === gl.FRAGMENT_SHADER) typeName = 'fragement shader';
                    const errors = gl.getShaderInfoLog(shader);
                    logger$4.error('Failed to compile ' + typeName + ' with these errors:' + errors);
                    gl.deleteShader(shader);
                    return null;
                }

                return shader;
            };

            let vsSource;
            if (this.integerBasedDistancesComputation) {
                vsSource =
                `#version 300 es
                in ivec4 center;
                flat out int distance;`;
                if (this.dynamicMode) {
                    vsSource += `
                        in uint sceneIndex;
                        uniform ivec4 transforms[${Constants$1.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `;
                } else {
                    vsSource += `
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `;
                }
            } else {
                vsSource =
                `#version 300 es
                in vec4 center;
                flat out float distance;`;
                if (this.dynamicMode) {
                    vsSource += `
                        in uint sceneIndex;
                        uniform mat4 transforms[${Constants$1.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `;
                } else {
                    vsSource += `
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `;
                }
            }

            const fsSource =
            `#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `;

            const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
            const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
            const currentProgramDeleted = currentProgram ? gl.getProgramParameter(currentProgram, gl.DELETE_STATUS) : false;

            if (rebuildGPUObjects) {
                this.distancesTransformFeedback.vao = gl.createVertexArray();
            }

            gl.bindVertexArray(this.distancesTransformFeedback.vao);

            if (rebuildGPUObjects) {
                const program = gl.createProgram();
                const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
                const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
                if (!vertexShader || !fragmentShader) {
                    throw new Error('Could not compile shaders for distances computation on GPU.');
                }
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.transformFeedbackVaryings(program, ['distance'], gl.SEPARATE_ATTRIBS);
                gl.linkProgram(program);

                const linked = gl.getProgramParameter(program, gl.LINK_STATUS);
                if (!linked) {
                    const error = gl.getProgramInfoLog(program);
                    logger$4.error('Fatal error: Failed to link program: ' + error);
                    gl.deleteProgram(program);
                    gl.deleteShader(fragmentShader);
                    gl.deleteShader(vertexShader);
                    throw new Error('Could not link shaders for distances computation on GPU.');
                }

                this.distancesTransformFeedback.program = program;
                this.distancesTransformFeedback.vertexShader = vertexShader;
                this.distancesTransformFeedback.vertexShader = fragmentShader;
            }

            gl.useProgram(this.distancesTransformFeedback.program);

            this.distancesTransformFeedback.centersLoc =
                gl.getAttribLocation(this.distancesTransformFeedback.program, 'center');
            if (this.dynamicMode) {
                this.distancesTransformFeedback.sceneIndexesLoc =
                    gl.getAttribLocation(this.distancesTransformFeedback.program, 'sceneIndex');
                for (let i = 0; i < this.scenes.length; i++) {
                    this.distancesTransformFeedback.transformsLocs[i] =
                        gl.getUniformLocation(this.distancesTransformFeedback.program, `transforms[${i}]`);
                }
            } else {
                this.distancesTransformFeedback.modelViewProjLoc =
                    gl.getUniformLocation(this.distancesTransformFeedback.program, 'modelViewProj');
            }

            if (rebuildGPUObjects || rebuildBuffers) {
                this.distancesTransformFeedback.centersBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);
                gl.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc);
                if (this.integerBasedDistancesComputation) {
                    gl.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc, 4, gl.INT, 0, 0);
                } else {
                    gl.vertexAttribPointer(this.distancesTransformFeedback.centersLoc, 4, gl.FLOAT, false, 0, 0);
                }

                if (this.dynamicMode) {
                    this.distancesTransformFeedback.sceneIndexesBuffer = gl.createBuffer();
                    gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);
                    gl.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc);
                    gl.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc, 1, gl.UNSIGNED_INT, 0, 0);
                }
            }

            if (rebuildGPUObjects || rebuildBuffers) {
                this.distancesTransformFeedback.outDistancesBuffer = gl.createBuffer();
            }
            gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.outDistancesBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, maxSplatCount * 4, gl.STATIC_READ);

            if (rebuildGPUObjects) {
                this.distancesTransformFeedback.id = gl.createTransformFeedback();
            }
            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.distancesTransformFeedback.id);
            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.distancesTransformFeedback.outDistancesBuffer);

            if (currentProgram && currentProgramDeleted !== true) gl.useProgram(currentProgram);
            if (currentVao) gl.bindVertexArray(currentVao);

            this.lastRenderer = this.renderer;
            currentMaxSplatCount = maxSplatCount;
        };

    }();

    /**
     * Refresh GPU buffers used for computing splat distances with centers data from the scenes for this mesh.
     * @param {boolean} isUpdate Specify whether or not to update the GPU buffer or to initialize & fill
     * @param {Array<number>} centers The splat centers data
     * @param {number} offsetSplats Offset in the GPU buffer at which to start updating data, specified in splats
     */
    updateGPUCentersBufferForDistancesComputation(isUpdate, centers, offsetSplats) {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
        gl.bindVertexArray(this.distancesTransformFeedback.vao);

        const ArrayType = this.integerBasedDistancesComputation ? Uint32Array : Float32Array;
        const attributeBytesPerCenter = 16;
        const subBufferOffset = offsetSplats * attributeBytesPerCenter;

        gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);

        if (isUpdate) {
            gl.bufferSubData(gl.ARRAY_BUFFER, subBufferOffset, centers);
        } else {
            const maxArray = new ArrayType(this.getMaxSplatCount() * attributeBytesPerCenter);
            maxArray.set(centers);
            gl.bufferData(gl.ARRAY_BUFFER, maxArray, gl.STATIC_DRAW);
        }

        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        if (currentVao) gl.bindVertexArray(currentVao);
    }

    /**
     * Refresh GPU buffers used for pre-computing splat distances with centers data from the scenes for this mesh.
     * @param {boolean} isUpdate Specify whether or not to update the GPU buffer or to initialize & fill
     * @param {Array<number>} sceneIndexes The splat scene indexes
     * @param {number} offsetSplats Offset in the GPU buffer at which to start updating data, specified in splats
     */
    updateGPUTransformIndexesBufferForDistancesComputation(isUpdate, sceneIndexes, offsetSplats) {

        if (!this.renderer || !this.dynamicMode) return;

        const gl = this.renderer.getContext();

        const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
        gl.bindVertexArray(this.distancesTransformFeedback.vao);

        const subBufferOffset = offsetSplats * 4;

        gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);

        if (isUpdate) {
            gl.bufferSubData(gl.ARRAY_BUFFER, subBufferOffset, sceneIndexes);
        } else {
            const maxArray = new Uint32Array(this.getMaxSplatCount() * 4);
            maxArray.set(sceneIndexes);
            gl.bufferData(gl.ARRAY_BUFFER, maxArray, gl.STATIC_DRAW);
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        if (currentVao) gl.bindVertexArray(currentVao);
    }

    /**
     * Get a typed array containing a mapping from global splat indexes to their scene index.
     * @param {number} start Starting splat index to store
     * @param {number} end Ending splat index to store
     * @return {Uint32Array}
     */
    getSceneIndexes(start, end) {

        let sceneIndexes;
        const fillCount = end - start + 1;
        sceneIndexes = new Uint32Array(fillCount);
        for (let i = start; i <= end; i++) {
            sceneIndexes[i] = this.globalSplatIndexToSceneIndexMap[i];
        }

        return sceneIndexes;
    }

    /**
     * Fill 'array' with the transforms for each scene in this splat mesh.
     * @param {Array} array Empty array to be filled with scene transforms. If not empty, contents will be overwritten.
     */
    fillTransformsArray = function() {

        const tempArray = [];

        return function(array) {
            if (tempArray.length !== array.length) tempArray.length = array.length;
            for (let i = 0; i < this.scenes.length; i++) {
                const sceneTransform = this.getScene(i).transform;
                const sceneTransformElements = sceneTransform.elements;
                for (let j = 0; j < 16; j++) {
                    tempArray[i * 16 + j] = sceneTransformElements[j];
                }
            }
            array.set(tempArray);
        };

    }();

    computeDistancesOnGPU = function() {

        const tempMatrix = new THREE.Matrix4();

        return (modelViewProjMatrix, outComputedDistances) => {
            if (!this.renderer) return;

            const gl = this.renderer.getContext();

            const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
            const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
            const currentProgramDeleted = currentProgram ? gl.getProgramParameter(currentProgram, gl.DELETE_STATUS) : false;

            gl.bindVertexArray(this.distancesTransformFeedback.vao);
            gl.useProgram(this.distancesTransformFeedback.program);

            gl.enable(gl.RASTERIZER_DISCARD);

            if (this.dynamicMode) {
                for (let i = 0; i < this.scenes.length; i++) {
                    tempMatrix.copy(this.getScene(i).transform);
                    tempMatrix.premultiply(modelViewProjMatrix);

                    if (this.integerBasedDistancesComputation) {
                        const iTempMatrix = SplatMesh.getIntegerMatrixArray(tempMatrix);
                        const iTransform = [iTempMatrix[2], iTempMatrix[6], iTempMatrix[10], iTempMatrix[14]];
                        gl.uniform4i(this.distancesTransformFeedback.transformsLocs[i], iTransform[0], iTransform[1],
                                                                                        iTransform[2], iTransform[3]);
                    } else {
                        gl.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[i], false, tempMatrix.elements);
                    }
                }
            } else {
                if (this.integerBasedDistancesComputation) {
                    const iViewProjMatrix = SplatMesh.getIntegerMatrixArray(modelViewProjMatrix);
                    const iViewProj = [iViewProjMatrix[2], iViewProjMatrix[6], iViewProjMatrix[10]];
                    gl.uniform3i(this.distancesTransformFeedback.modelViewProjLoc, iViewProj[0], iViewProj[1], iViewProj[2]);
                } else {
                    const viewProj = [modelViewProjMatrix.elements[2], modelViewProjMatrix.elements[6], modelViewProjMatrix.elements[10]];
                    gl.uniform3f(this.distancesTransformFeedback.modelViewProjLoc, viewProj[0], viewProj[1], viewProj[2]);
                }
            }

            gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);
            gl.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc);
            if (this.integerBasedDistancesComputation) {
                gl.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc, 4, gl.INT, 0, 0);
            } else {
                gl.vertexAttribPointer(this.distancesTransformFeedback.centersLoc, 4, gl.FLOAT, false, 0, 0);
            }

            if (this.dynamicMode) {
                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);
                gl.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc);
                gl.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc, 1, gl.UNSIGNED_INT, 0, 0);
            }

            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.distancesTransformFeedback.id);
            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.distancesTransformFeedback.outDistancesBuffer);

            gl.beginTransformFeedback(gl.POINTS);
            gl.drawArrays(gl.POINTS, 0, this.getSplatCount());
            gl.endTransformFeedback();

            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);
            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);

            gl.disable(gl.RASTERIZER_DISCARD);

            const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);
            gl.flush();

            const promise = new Promise((resolve) => {
                const checkSync = () => {
                    if (this.disposed) {
                        resolve();
                    } else {
                        const timeout = 0;
                        const bitflags = 0;
                        const status = gl.clientWaitSync(sync, bitflags, timeout);
                        switch (status) {
                            case gl.TIMEOUT_EXPIRED:
                                this.computeDistancesOnGPUSyncTimeout = setTimeout(checkSync);
                                return this.computeDistancesOnGPUSyncTimeout;
                            case gl.WAIT_FAILED:
                                throw new Error('should never get here');
                            default: {
                                this.computeDistancesOnGPUSyncTimeout = null;
                                gl.deleteSync(sync);
                                const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
                                gl.bindVertexArray(this.distancesTransformFeedback.vao);
                                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.outDistancesBuffer);
                                gl.getBufferSubData(gl.ARRAY_BUFFER, 0, outComputedDistances);
                                gl.bindBuffer(gl.ARRAY_BUFFER, null);

                                if (currentVao) gl.bindVertexArray(currentVao);

                                resolve();
                            }
                        }
                    }
                };
                this.computeDistancesOnGPUSyncTimeout = setTimeout(checkSync);
            });

            if (currentProgram && currentProgramDeleted !== true) gl.useProgram(currentProgram);
            if (currentVao) gl.bindVertexArray(currentVao);

            return promise;
        };

    }();

    /**
     * Given a global splat index, return corresponding local data (splat buffer, index of splat in that splat
     * buffer, and the corresponding transform)
     * @param {number} globalIndex Global splat index
     * @param {object} paramsObj Object in which to store local data
     * @param {boolean} returnSceneTransform By default, the transform of the scene to which the splat at 'globalIndex' belongs will be
     *                                       returned via the 'sceneTransform' property of 'paramsObj' only if the splat mesh is static.
     *                                       If 'returnSceneTransform' is true, the 'sceneTransform' property will always contain the scene
     *                                       transform, and if 'returnSceneTransform' is false, the 'sceneTransform' property will always
     *                                       be null.
     */
    getLocalSplatParameters(globalIndex, paramsObj, returnSceneTransform) {
        if (returnSceneTransform === undefined || returnSceneTransform === null) {
            returnSceneTransform = this.dynamicMode ? false : true;
        }
        paramsObj.splatBuffer = this.getSplatBufferForSplat(globalIndex);
        paramsObj.localIndex = this.getSplatLocalIndex(globalIndex);
        paramsObj.sceneTransform = returnSceneTransform ? this.getSceneTransformForSplat(globalIndex) : null;
    }

    /**
     * Fill arrays with splat data and apply transforms if appropriate. Each array is optional.
     * @param {Float32Array} covariances Target storage for splat covariances
     * @param {Float32Array} scales Target storage for splat scales
     * @param {Float32Array} rotations Target storage for splat rotations
     * @param {Float32Array} centers Target storage for splat centers
     * @param {Uint8Array} colors Target storage for splat colors
     * @param {Float32Array} sphericalHarmonics Target storage for spherical harmonics
     * @param {boolean} applySceneTransform By default, scene transforms are applied to relevant splat data only if the splat mesh is
     *                                      static. If 'applySceneTransform' is true, scene transforms will always be applied and if
     *                                      it is false, they will never be applied. If undefined, the default behavior will apply.
     * @param {number} covarianceCompressionLevel The compression level for covariances in the destination array
     * @param {number} sphericalHarmonicsCompressionLevel The compression level for spherical harmonics in the destination array
     * @param {number} srcStart The start location from which to pull source data
     * @param {number} srcEnd The end location from which to pull source data
     * @param {number} destStart The start location from which to write data
     */
    fillSplatDataArrays(covariances, scales, rotations, centers, colors, sphericalHarmonics, flameModelPos,
                         applySceneTransform,
                        covarianceCompressionLevel = 0, scaleRotationCompressionLevel = 0, sphericalHarmonicsCompressionLevel = 1,
                        srcStart, srcEnd, destStart = 0, sceneIndex) {
        const scaleOverride = new THREE.Vector3();
        scaleOverride.x = undefined;
        scaleOverride.y = undefined;
        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            scaleOverride.z = undefined;
        } else {
            scaleOverride.z = 1;
        }
        const tempTransform = new THREE.Matrix4();

        let startSceneIndex = 0;
        let endSceneIndex = this.scenes.length - 1;
        if (sceneIndex !== undefined && sceneIndex !== null && sceneIndex >= 0 && sceneIndex <= this.scenes.length) {
            startSceneIndex = sceneIndex;
            endSceneIndex = sceneIndex;
        }
        for (let i = startSceneIndex; i <= endSceneIndex; i++) {
            if (applySceneTransform === undefined || applySceneTransform === null) {
                applySceneTransform = this.dynamicMode ? false : true;
            }

            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            let sceneTransform;
            if (applySceneTransform) {
                this.getSceneTransform(i, tempTransform);
                sceneTransform = tempTransform;
            }
            if (covariances) {
                splatBuffer.fillSplatCovarianceArray(covariances, sceneTransform, srcStart, srcEnd, destStart, covarianceCompressionLevel);
            }
            if (scales || rotations) {
                if (!scales || !rotations) {
                    throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');
                }
                splatBuffer.fillSplatScaleRotationArray(scales, rotations, sceneTransform,
                                                        srcStart, srcEnd, destStart, scaleRotationCompressionLevel, scaleOverride);
            }
            if (centers) splatBuffer.fillSplatCenterArray(this.morphedMesh, centers, sceneTransform, srcStart, srcEnd, destStart);
            if (colors) splatBuffer.fillSplatColorArray(colors, scene.minimumAlpha, srcStart, srcEnd, destStart);
            if (sphericalHarmonics) {
                splatBuffer.fillSphericalHarmonicsArray(sphericalHarmonics, this.minSphericalHarmonicsDegree,
                                                        sceneTransform, srcStart, srcEnd, destStart, sphericalHarmonicsCompressionLevel);
            }

            destStart += splatBuffer.getSplatCount();
        }
    }

    morphedMesh;
    /**
     * Convert splat centers, which are floating point values, to an array of integers and multiply
     * each by 1000. Centers will get transformed as appropriate before conversion to integer.
     * @param {number} start The index at which to start retrieving data
     * @param {number} end The index at which to stop retrieving data
     * @param {boolean} padFour Enforce alignment of 4 by inserting a 1 after every 3 values
     * @return {Int32Array}
     */
    getIntegerCenters(start, end, padFour = false) {
        const splatCount = end - start + 1;
        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, undefined, undefined, undefined, undefined, start);
        let intCenters;
        let componentCount = padFour ? 4 : 3;
        intCenters = new Int32Array(splatCount * componentCount);
        for (let i = 0; i < splatCount; i++) {
            for (let t = 0; t < 3; t++) {
                intCenters[i * componentCount + t] = Math.round(floatCenters[i * 3 + t] * 1000.0);
            }
            if (padFour) intCenters[i * componentCount + 3] = 1000;
        }
        return intCenters;
    }

    /**
     * Returns an array of splat centers, transformed as appropriate, optionally padded.
     * @param {number} start The index at which to start retrieving data
     * @param {number} end The index at which to stop retrieving data
     * @param {boolean} padFour Enforce alignment of 4 by inserting a 1 after every 3 values
     * @return {Float32Array}
     */
    getFloatCenters(start, end, padFour = false) {
        const splatCount = end - start + 1;
        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, undefined, undefined, undefined, undefined, start);
        if (!padFour) return floatCenters;
        let paddedFloatCenters = new Float32Array(splatCount * 4);
        for (let i = 0; i < splatCount; i++) {
            for (let t = 0; t < 3; t++) {
                paddedFloatCenters[i * 4 + t] = floatCenters[i * 3 + t];
            }
            paddedFloatCenters[i * 4 + 3] = 1.0;
        }
        return paddedFloatCenters;
    }

    /**
     * Get the center for a splat, transformed as appropriate.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector3} outCenter THREE.Vector3 instance in which to store splat center
     * @param {boolean} applySceneTransform By default, if the splat mesh is static, the transform of the scene to which the splat at
     *                                      'globalIndex' belongs will be applied to the splat center. If 'applySceneTransform' is true,
     *                                      the scene transform will always be applied and if 'applySceneTransform' is false, the
     *                                      scene transform will never be applied. If undefined, the default behavior will apply.
     */
    getSplatCenter = function() {

        const paramsObj = {};

        return function(morphedMesh, globalIndex, outCenter, applySceneTransform) {
            this.getLocalSplatParameters(globalIndex, paramsObj, applySceneTransform);
            paramsObj.splatBuffer.getSplatCenter(morphedMesh, paramsObj.localIndex, outCenter, paramsObj.sceneTransform);
        };

    }();

    /**
     * Get the scale and rotation for a splat, transformed as appropriate.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector3} outScale THREE.Vector3 instance in which to store splat scale
     * @param {THREE.Quaternion} outRotation THREE.Quaternion instance in which to store splat rotation
     * @param {boolean} applySceneTransform By default, if the splat mesh is static, the transform of the scene to which the splat at
     *                                      'globalIndex' belongs will be applied to the splat scale and rotation. If
     *                                      'applySceneTransform' is true, the scene transform will always be applied and if
     *                                      'applySceneTransform' is false, the scene transform will never be applied. If undefined,
     *                                      the default behavior will apply.
     */
    getSplatScaleAndRotation = function() {

        const paramsObj = {};
        const scaleOverride = new THREE.Vector3();

        return function(globalIndex, outScale, outRotation, applySceneTransform) {
            this.getLocalSplatParameters(globalIndex, paramsObj, applySceneTransform);
            scaleOverride.x = undefined;
            scaleOverride.y = undefined;
            scaleOverride.z = undefined;
            if (this.splatRenderMode === SplatRenderMode.TwoD) scaleOverride.z = 0;
            paramsObj.splatBuffer.getSplatScaleAndRotation(paramsObj.localIndex, outScale, outRotation,
                                                           paramsObj.sceneTransform, scaleOverride);
        };

    }();

    /**
     * Get the color for a splat.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector4} outColor THREE.Vector4 instance in which to store splat color
     */
    getSplatColor = function() {

        const paramsObj = {};

        return function(globalIndex, outColor) {
            this.getLocalSplatParameters(globalIndex, paramsObj);
            paramsObj.splatBuffer.getSplatColor(paramsObj.localIndex, outColor);
        };

    }();

    /**
     * Store the transform of the scene at 'sceneIndex' in 'outTransform'.
     * @param {number} sceneIndex Index of the desired scene
     * @param {THREE.Matrix4} outTransform Instance of THREE.Matrix4 in which to store the scene's transform
     */
    getSceneTransform(sceneIndex, outTransform) {
        const scene = this.getScene(sceneIndex);
        scene.updateTransform(this.dynamicMode);
        outTransform.copy(scene.transform);
    }

    /**
     * Get the scene at 'sceneIndex'.
     * @param {number} sceneIndex Index of the desired scene
     * @return {SplatScene}
     */
    getScene(sceneIndex) {
        if (sceneIndex < 0 || sceneIndex >= this.scenes.length) {
            throw new Error('SplatMesh::getScene() -> Invalid scene index.');
        }
        return this.scenes[sceneIndex];
    }

    getSceneCount() {
        return this.scenes.length;
    }

    getSplatBufferForSplat(globalIndex) {
        return this.getScene(this.globalSplatIndexToSceneIndexMap[globalIndex]).splatBuffer;
    }

    getSceneIndexForSplat(globalIndex) {
        return this.globalSplatIndexToSceneIndexMap[globalIndex];
    }

    getSceneTransformForSplat(globalIndex) {
        return this.getScene(this.globalSplatIndexToSceneIndexMap[globalIndex]).transform;
    }

    getSplatLocalIndex(globalIndex) {
        return this.globalSplatIndexToLocalSplatIndexMap[globalIndex];
    }

    static getIntegerMatrixArray(matrix) {
        const matrixElements = matrix.elements;
        const intMatrixArray = [];
        for (let i = 0; i < 16; i++) {
            intMatrixArray[i] = Math.round(matrixElements[i] * 1000.0);
        }
        return intMatrixArray;
    }

    computeBoundingBox(applySceneTransforms = false, sceneIndex) {
        let splatCount = this.getSplatCount();
        if (sceneIndex !== undefined && sceneIndex !== null) {
            if (sceneIndex < 0 || sceneIndex >= this.scenes.length) {
                throw new Error('SplatMesh::computeBoundingBox() -> Invalid scene index.');
            }
            splatCount = this.scenes[sceneIndex].splatBuffer.getSplatCount();
        }

        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, applySceneTransforms,
                                 undefined, undefined, undefined, undefined, sceneIndex);

        const min = new THREE.Vector3();
        const max = new THREE.Vector3();
        for (let i = 0; i < splatCount; i++) {
            const offset = i * 3;
            const x = floatCenters[offset];
            const y = floatCenters[offset + 1];
            const z = floatCenters[offset + 2];
            if (i === 0 || x < min.x) min.x = x;
            if (i === 0 || y < min.y) min.y = y;
            if (i === 0 || z < min.z) min.z = z;
            if (i === 0 || x > max.x) max.x = x;
            if (i === 0 || y > max.y) max.y = y;
            if (i === 0 || z > max.z) max.z = z;
        }

        return new THREE.Box3(min, max);
    }
}

/**
 * DirectLoadError
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Minor enhancement: Added this.name property for better error identification.
 */
class DirectLoadError extends Error {
    constructor(msg) {
        super(msg);
        this.name = 'DirectLoadError';
    }
}

/**
 * UncompressedSplatArray
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const BASE_COMPONENT_COUNT = 14;

class UncompressedSplatArray {

    static OFFSET = {
        X: 0,
        Y: 1,
        Z: 2,
        SCALE0: 3,
        SCALE1: 4,
        SCALE2: 5,
        ROTATION0: 6,
        ROTATION1: 7,
        ROTATION2: 8,
        ROTATION3: 9,
        FDC0: 10,
        FDC1: 11,
        FDC2: 12,
        OPACITY: 13,
        FRC0: 14,
        FRC1: 15,
        FRC2: 16,
        FRC3: 17,
        FRC4: 18,
        FRC5: 19,
        FRC6: 20,
        FRC7: 21,
        FRC8: 22,
        FRC9: 23,
        FRC10: 24,
        FRC11: 25,
        FRC12: 26,
        FRC13: 27,
        FRC14: 28,
        FRC15: 29,
        FRC16: 30,
        FRC17: 31,
        FRC18: 32,
        FRC19: 33,
        FRC20: 34,
        FRC21: 35,
        FRC22: 36,
        FRC23: 37
    };

    constructor(sphericalHarmonicsDegree = 0) {
        this.sphericalHarmonicsDegree = sphericalHarmonicsDegree;
        this.sphericalHarmonicsCount = getSphericalHarmonicsComponentCountForDegree(this.sphericalHarmonicsDegree);
        this.componentCount = this.sphericalHarmonicsCount + BASE_COMPONENT_COUNT;
        this.defaultSphericalHarmonics = new Array(this.sphericalHarmonicsCount).fill(0);
        this.splats = [];
        this.splatCount = 0;
    }

    static createSplat(sphericalHarmonicsDegree = 0) {
        const baseSplat = [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0];
        let shEntries = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
        for (let i = 0; i < shEntries; i++) baseSplat.push(0);
        return baseSplat;
    }

    addSplat(splat) {
        this.splats.push(splat);
        this.splatCount++;
    }

    getSplat(index) {
        return this.splats[index];
    }

    addDefaultSplat() {
        const newSplat = UncompressedSplatArray.createSplat(this.sphericalHarmonicsDegree);
        this.addSplat(newSplat);
        return newSplat;
    }

    addSplatFromComonents(x, y, z, scale0, scale1, scale2, rot0, rot1, rot2, rot3, r, g, b, opacity, ...rest) {
        const newSplat = [x, y, z, scale0, scale1, scale2, rot0, rot1, rot2, rot3, r, g, b, opacity, ...this.defaultSphericalHarmonics];
        for (let i = 0; i < rest.length && i < this.sphericalHarmonicsCount; i++) {
            newSplat[i] = rest[i];
        }
        this.addSplat(newSplat);
        return newSplat;
    }

    addSplatFromArray(src, srcIndex) {
        const srcSplat = src.splats[srcIndex];
        const newSplat = UncompressedSplatArray.createSplat(this.sphericalHarmonicsDegree);
        for (let i = 0; i < this.componentCount && i < srcSplat.length; i++) {
            newSplat[i] = srcSplat[i];
        }
        this.addSplat(newSplat);
    }
}

/**
 * SplatBuffer
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


/**
 * Helper function to copy bytes between buffers
 */
const copyBetweenBuffers = (srcBuffer, srcOffset, destBuffer, destOffset, byteCount = 0) => {
    const src = new Uint8Array(srcBuffer, srcOffset);
    const dest = new Uint8Array(destBuffer, destOffset);
    for (let i = 0; i < byteCount; i++) {
        dest[i] = src[i];
    }
};

// Compression/decompression helper functions
Constants$1.SphericalHarmonics8BitCompressionRange;

const toHalfFloat = THREE.DataUtils.toHalfFloat.bind(THREE.DataUtils);
const fromHalfFloat = THREE.DataUtils.fromHalfFloat.bind(THREE.DataUtils);

const toUncompressedFloat = (f, compressionLevel, isSH = false, range8BitMin, range8BitMax) => {
    if (compressionLevel === 0) {
        return f;
    } else if (compressionLevel === 1 || compressionLevel === 2 && !isSH) {
        return THREE.DataUtils.fromHalfFloat(f);
    } else if (compressionLevel === 2) {
        return fromUint8(f, range8BitMin, range8BitMax);
    }
};

const toUint8 = (v, rangeMin, rangeMax) => {
    v = clamp(v, rangeMin, rangeMax);
    const range = (rangeMax - rangeMin);
    return clamp(Math.floor((v - rangeMin) / range * 255), 0, 255);
};

const fromUint8 = (v, rangeMin, rangeMax) => {
    const range = (rangeMax - rangeMin);
    return (v / 255 * range + rangeMin);
};

const fromHalfFloatToUint8 = (v, rangeMin, rangeMax) => {
    return toUint8(fromHalfFloat(v), rangeMin, rangeMax);
};

const dataViewFloatForCompressionLevel = (dataView, floatIndex, compressionLevel, isSH = false) => {
    if (compressionLevel === 0) {
        return dataView.getFloat32(floatIndex * 4, true);
    } else if (compressionLevel === 1 || compressionLevel === 2 && !isSH) {
        return dataView.getUint16(floatIndex * 2, true);
    } else {
        return dataView.getUint8(floatIndex, true);
    }
};

class SplatBuffer {

    static CurrentMajorVersion = 0;
    static CurrentMinorVersion = 1;

    static CenterComponentCount = 3;
    static ScaleComponentCount = 3;
    static RotationComponentCount = 4;
    static ColorComponentCount = 4;
    static CovarianceComponentCount = 6;

    static SplatScaleOffsetFloat = 3;
    static SplatRotationOffsetFloat = 6;

    static CompressionLevels = {
        0: {
            BytesPerCenter: 12,
            BytesPerScale: 12,
            BytesPerRotation: 16,
            BytesPerColor: 4,
            ScaleOffsetBytes: 12,
            RotationffsetBytes: 24,
            ColorOffsetBytes: 40,
            SphericalHarmonicsOffsetBytes: 44,
            ScaleRange: 1,
            BytesPerSphericalHarmonicsComponent: 4,
            SphericalHarmonicsOffsetFloat: 11,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 44 },
                1: { BytesPerSplat: 80 },
                2: { BytesPerSplat: 140 }
            },
        },
        1: {
            BytesPerCenter: 6,
            BytesPerScale: 6,
            BytesPerRotation: 8,
            BytesPerColor: 4,
            ScaleOffsetBytes: 6,
            RotationffsetBytes: 12,
            ColorOffsetBytes: 20,
            SphericalHarmonicsOffsetBytes: 24,
            ScaleRange: 32767,
            BytesPerSphericalHarmonicsComponent: 2,
            SphericalHarmonicsOffsetFloat: 12,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 24 },
                1: { BytesPerSplat: 42 },
                2: { BytesPerSplat: 72 }
            },
        },
        2: {
            BytesPerCenter: 6,
            BytesPerScale: 6,
            BytesPerRotation: 8,
            BytesPerColor: 4,
            ScaleOffsetBytes: 6,
            RotationffsetBytes: 12,
            ColorOffsetBytes: 20,
            SphericalHarmonicsOffsetBytes: 24,
            ScaleRange: 32767,
            BytesPerSphericalHarmonicsComponent: 1,
            SphericalHarmonicsOffsetFloat: 12,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 24 },
                1: { BytesPerSplat: 33 },
                2: { BytesPerSplat: 48 }
            },
        }
    };

    static CovarianceSizeFloats = 6;

    static HeaderSizeBytes = 4096;
    static SectionHeaderSizeBytes = 1024;

    static BucketStorageSizeBytes = 12;
    static BucketStorageSizeFloats = 3;

    static BucketBlockSize = 5.0;
    static BucketSize = 256;

    constructor(bufferData, secLoadedCountsToMax = true) {
        this.constructFromBuffer(bufferData, secLoadedCountsToMax);
    }

    getSplatCount() {
        return this.splatCount;
    }

    getMaxSplatCount() {
        return this.maxSplatCount;
    }

    getMinSphericalHarmonicsDegree() {
        let minSphericalHarmonicsDegree = 0;
        for (let i = 0; i < this.sections.length; i++) {
            const section = this.sections[i];
            if (i === 0 || section.sphericalHarmonicsDegree < minSphericalHarmonicsDegree) {
                minSphericalHarmonicsDegree = section.sphericalHarmonicsDegree;
            }
        }
        return minSphericalHarmonicsDegree;
    }

    getBucketIndex(section, localSplatIndex) {
        let bucketIndex;
        const maxSplatIndexInFullBuckets = section.fullBucketCount * section.bucketSize;
        if (localSplatIndex < maxSplatIndexInFullBuckets) {
            bucketIndex = Math.floor(localSplatIndex / section.bucketSize);
        } else {
            let bucketSplatIndex = maxSplatIndexInFullBuckets;
            bucketIndex = section.fullBucketCount;
            let partiallyFullBucketIndex = 0;
            while (bucketSplatIndex < section.splatCount) {
                let currentPartiallyFilledBucketSize = section.partiallyFilledBucketLengths[partiallyFullBucketIndex];
                if (localSplatIndex >= bucketSplatIndex && localSplatIndex < bucketSplatIndex + currentPartiallyFilledBucketSize) {
                    break;
                }
                bucketSplatIndex += currentPartiallyFilledBucketSize;
                bucketIndex++;
                partiallyFullBucketIndex++;
            }
        }
        return bucketIndex;
    }

    getSplatCenter(morphedMesh, globalSplatIndex, outCenter, transform) {
        const sectionIndex = this.globalSplatIndexToSectionMap[globalSplatIndex];
        const section = this.sections[sectionIndex];
        const localSplatIndex = globalSplatIndex - section.splatCountOffset;

        const srcSplatCentersBase = section.bytesPerSplat * localSplatIndex;
        const dataView = new DataView(this.bufferData, section.dataBase + srcSplatCentersBase);

        const x = dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
        const y = dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
        const z = dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);
        if (this.compressionLevel >= 1) {
            const bucketIndex = this.getBucketIndex(section, localSplatIndex);
            const bucketBase = bucketIndex * SplatBuffer.BucketStorageSizeFloats;
            const sf = section.compressionScaleFactor;
            const sr = section.compressionScaleRange;
            outCenter.x = (x - sr) * sf + section.bucketArray[bucketBase];
            outCenter.y = (y - sr) * sf + section.bucketArray[bucketBase + 1];
            outCenter.z = (z - sr) * sf + section.bucketArray[bucketBase + 2];
        } else {
            outCenter.x = x;
            outCenter.y = y;
            outCenter.z = z;
        }

        outCenter.x += morphedMesh[globalSplatIndex * 3 + 0];
        outCenter.y += morphedMesh[globalSplatIndex * 3 + 1];
        outCenter.z += morphedMesh[globalSplatIndex * 3 + 2];


        if (transform) outCenter.applyMatrix4(transform);
    }

    getSplatScaleAndRotation = function() {

        const scaleMatrix = new THREE.Matrix4();
        const rotationMatrix = new THREE.Matrix4();
        const tempMatrix = new THREE.Matrix4();
        const tempPosition = new THREE.Vector3();
        const scale = new THREE.Vector3();
        const rotation = new THREE.Quaternion();

        return function(index, outScale, outRotation, transform, scaleOverride) {
            const sectionIndex = this.globalSplatIndexToSectionMap[index];
            const section = this.sections[sectionIndex];
            const localSplatIndex = index - section.splatCountOffset;

            const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

            scale.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel), this.compressionLevel));
            if (scaleOverride) {
                if (scaleOverride.x !== undefined) scale.x = scaleOverride.x;
                if (scaleOverride.y !== undefined) scale.y = scaleOverride.y;
                if (scaleOverride.z !== undefined) scale.z = scaleOverride.z;
            }

            rotation.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel), this.compressionLevel));

            if (transform) {
                scaleMatrix.makeScale(scale.x, scale.y, scale.z);
                rotationMatrix.makeRotationFromQuaternion(rotation);
                tempMatrix.copy(scaleMatrix).multiply(rotationMatrix).multiply(transform);
                tempMatrix.decompose(tempPosition, outRotation, outScale);
            } else {
                outScale.copy(scale);
                outRotation.copy(rotation);
            }
        };

    }();

    getSplatColor(globalSplatIndex, outColor) {
        const sectionIndex = this.globalSplatIndexToSectionMap[globalSplatIndex];
        const section = this.sections[sectionIndex];
        const localSplatIndex = globalSplatIndex - section.splatCountOffset;

        const srcSplatColorsBase = section.bytesPerSplat * localSplatIndex +
                                   SplatBuffer.CompressionLevels[this.compressionLevel].ColorOffsetBytes;
        const splatColorsArray = new Uint8Array(this.bufferData, section.dataBase + srcSplatColorsBase, 4);

        outColor.set(splatColorsArray[0], splatColorsArray[1],
                     splatColorsArray[2], splatColorsArray[3]);
    }

    fillSplatCenterArray(morphedMesh, outCenterArray, transform, srcFrom, srcTo, destFrom) {
        const splatCount = this.splatCount;

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        const center = new THREE.Vector3();
        for (let i = srcFrom; i <= srcTo; i++) {
            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;
            const centerDestBase = (i - srcFrom + destFrom) * SplatBuffer.CenterComponentCount;

            const srcSplatCentersBase = section.bytesPerSplat * localSplatIndex;
            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatCentersBase);

            const x = dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
            const y = dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
            const z = dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);
            if (this.compressionLevel >= 1) {
                const bucketIndex = this.getBucketIndex(section, localSplatIndex);
                const bucketBase = bucketIndex * SplatBuffer.BucketStorageSizeFloats;
                const sf = section.compressionScaleFactor;
                const sr = section.compressionScaleRange;
                center.x = (x - sr) * sf + section.bucketArray[bucketBase];
                center.y = (y - sr) * sf + section.bucketArray[bucketBase + 1];
                center.z = (z - sr) * sf + section.bucketArray[bucketBase + 2];
            } else {
                center.x = x;
                center.y = y;
                center.z = z;
            }
            if (transform) {
                center.applyMatrix4(transform);
            }

            outCenterArray[centerDestBase] = center.x + morphedMesh[i * 3 + 0];
            outCenterArray[centerDestBase + 1] = center.y + morphedMesh[i * 3 + 1];
            outCenterArray[centerDestBase + 2] = center.z + morphedMesh[i * 3 + 2];

            // outCenterArray[centerDestBase] = morphedMesh[centerDestBase];
            // outCenterArray[centerDestBase + 1] = morphedMesh[centerDestBase + 1];
            // outCenterArray[centerDestBase + 2] = morphedMesh[centerDestBase + 2];

            // outCenterArray[centerDestBase] = center.x;
            // outCenterArray[centerDestBase + 1] = center.y;
            // outCenterArray[centerDestBase + 2] = center.z;
        }
    }

    fillSplatScaleRotationArray = function() {

        const scaleMatrix = new THREE.Matrix4();
        const rotationMatrix = new THREE.Matrix4();
        const tempMatrix = new THREE.Matrix4();
        const scale = new THREE.Vector3();
        const rotation = new THREE.Quaternion();
        const tempPosition = new THREE.Vector3();

        const ensurePositiveW = (quaternion) => {
            const flip = quaternion.w < 0 ? -1 : 1;
            quaternion.x *= flip;
            quaternion.y *= flip;
            quaternion.z *= flip;
            quaternion.w *= flip;
        };

        return function(outScaleArray, outRotationArray, transform, srcFrom, srcTo, destFrom,
                        desiredOutputCompressionLevel, scaleOverride) {
            const splatCount = this.splatCount;

            srcFrom = srcFrom || 0;
            srcTo = srcTo || splatCount - 1;
            if (destFrom === undefined) destFrom = srcFrom;

            const outputConversion = (value, srcCompressionLevel) => {
                return convertBetweenCompressionLevels(value, srcCompressionLevel, desiredOutputCompressionLevel);
            };

            for (let i = srcFrom; i <= srcTo; i++) {
                const sectionIndex = this.globalSplatIndexToSectionMap[i];
                const section = this.sections[sectionIndex];
                const localSplatIndex = i - section.splatCountOffset;

                const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                        SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

                const scaleDestBase = (i - srcFrom + destFrom) * SplatBuffer.ScaleComponentCount;
                const rotationDestBase = (i - srcFrom + destFrom) * SplatBuffer.RotationComponentCount;
                const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

                const srcScaleX = (scaleOverride && scaleOverride.x !== undefined) ? scaleOverride.x :
                                   dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
                const srcScaleY = (scaleOverride && scaleOverride.y !== undefined) ? scaleOverride.y :
                                   dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
                const srcScaleZ = (scaleOverride && scaleOverride.z !== undefined) ? scaleOverride.z :
                                   dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);

                const srcRotationW = dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel);
                const srcRotationX = dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel);
                const srcRotationY = dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel);
                const srcRotationZ = dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel);

                scale.set(toUncompressedFloat(srcScaleX, this.compressionLevel),
                          toUncompressedFloat(srcScaleY, this.compressionLevel),
                          toUncompressedFloat(srcScaleZ, this.compressionLevel));

                rotation.set(toUncompressedFloat(srcRotationX, this.compressionLevel),
                             toUncompressedFloat(srcRotationY, this.compressionLevel),
                             toUncompressedFloat(srcRotationZ, this.compressionLevel),
                             toUncompressedFloat(srcRotationW, this.compressionLevel)).normalize();

                if (transform) {
                    tempPosition.set(0, 0, 0);
                    scaleMatrix.makeScale(scale.x, scale.y, scale.z);
                    rotationMatrix.makeRotationFromQuaternion(rotation);
                    tempMatrix.identity().premultiply(scaleMatrix).premultiply(rotationMatrix);
                    tempMatrix.premultiply(transform);
                    tempMatrix.decompose(tempPosition, rotation, scale);
                    rotation.normalize();
                }

                ensurePositiveW(rotation);

                if (outScaleArray) {
                    outScaleArray[scaleDestBase] = outputConversion(scale.x, 0);
                    outScaleArray[scaleDestBase + 1] = outputConversion(scale.y, 0);
                    outScaleArray[scaleDestBase + 2] = outputConversion(scale.z, 0);
                }

                if (outRotationArray) {
                    outRotationArray[rotationDestBase] = outputConversion(rotation.x, 0);
                    outRotationArray[rotationDestBase + 1] = outputConversion(rotation.y, 0);
                    outRotationArray[rotationDestBase + 2] = outputConversion(rotation.z, 0);
                    outRotationArray[rotationDestBase + 3] = outputConversion(rotation.w, 0);
                }
            }
        };
    }();

    static computeCovariance = function() {

        const tempMatrix4 = new THREE.Matrix4();
        const scaleMatrix = new THREE.Matrix3();
        const rotationMatrix = new THREE.Matrix3();
        const covarianceMatrix = new THREE.Matrix3();
        const transformedCovariance = new THREE.Matrix3();
        const transform3x3 = new THREE.Matrix3();
        const transform3x3Transpose = new THREE.Matrix3();

        return function(scale, rotation, transform, outCovariance, outOffset = 0, desiredOutputCompressionLevel) {

            tempMatrix4.makeScale(scale.x, scale.y, scale.z);
            scaleMatrix.setFromMatrix4(tempMatrix4);

            tempMatrix4.makeRotationFromQuaternion(rotation);
            rotationMatrix.setFromMatrix4(tempMatrix4);

            covarianceMatrix.copy(rotationMatrix).multiply(scaleMatrix);
            transformedCovariance.copy(covarianceMatrix).transpose().premultiply(covarianceMatrix);

            if (transform) {
                transform3x3.setFromMatrix4(transform);
                transform3x3Transpose.copy(transform3x3).transpose();
                transformedCovariance.multiply(transform3x3Transpose);
                transformedCovariance.premultiply(transform3x3);
            }

            if (desiredOutputCompressionLevel >= 1) {
                outCovariance[outOffset] = toHalfFloat(transformedCovariance.elements[0]);
                outCovariance[outOffset + 1] = toHalfFloat(transformedCovariance.elements[3]);
                outCovariance[outOffset + 2] = toHalfFloat(transformedCovariance.elements[6]);
                outCovariance[outOffset + 3] = toHalfFloat(transformedCovariance.elements[4]);
                outCovariance[outOffset + 4] = toHalfFloat(transformedCovariance.elements[7]);
                outCovariance[outOffset + 5] = toHalfFloat(transformedCovariance.elements[8]);
            } else {
                outCovariance[outOffset] = transformedCovariance.elements[0];
                outCovariance[outOffset + 1] = transformedCovariance.elements[3];
                outCovariance[outOffset + 2] = transformedCovariance.elements[6];
                outCovariance[outOffset + 3] = transformedCovariance.elements[4];
                outCovariance[outOffset + 4] = transformedCovariance.elements[7];
                outCovariance[outOffset + 5] = transformedCovariance.elements[8];
            }

        };

    }();

    fillSplatCovarianceArray(covarianceArray, transform, srcFrom, srcTo, destFrom, desiredOutputCompressionLevel) {
        const splatCount = this.splatCount;

        const scale = new THREE.Vector3();
        const rotation = new THREE.Quaternion();

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        for (let i = srcFrom; i <= srcTo; i++) {
            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;

            const covarianceDestBase = (i - srcFrom + destFrom) * SplatBuffer.CovarianceComponentCount;
            const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

            scale.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel), this.compressionLevel));

            rotation.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel), this.compressionLevel));

            SplatBuffer.computeCovariance(scale, rotation, transform, covarianceArray, covarianceDestBase, desiredOutputCompressionLevel);
        }
    }

    fillSplatColorArray(outColorArray, minimumAlpha, srcFrom, srcTo, destFrom) {
        const splatCount = this.splatCount;

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        for (let i = srcFrom; i <= srcTo; i++) {

            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;

            const colorDestBase = (i - srcFrom + destFrom) * SplatBuffer.ColorComponentCount;
            const srcSplatColorsBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ColorOffsetBytes;

            const dataView = new Uint8Array(this.bufferData, section.dataBase + srcSplatColorsBase);

            let alpha = dataView[3];
            alpha = (alpha >= minimumAlpha) ? alpha : 0;

            outColorArray[colorDestBase] = dataView[0];
            outColorArray[colorDestBase + 1] = dataView[1];
            outColorArray[colorDestBase + 2] = dataView[2];
            outColorArray[colorDestBase + 3] = alpha;
        }
    }

    fillSphericalHarmonicsArray = function() {
        for (let i = 0; i < 15; i++) {
            new THREE.Vector3();
        }

        const tempMatrix3 = new THREE.Matrix3();
        const tempMatrix4 = new THREE.Matrix4();

        const tempTranslation = new THREE.Vector3();
        const tempScale = new THREE.Vector3();
        const tempRotation = new THREE.Quaternion();

        const sh11 = [];
        const sh12 = [];
        const sh13 = [];

        const sh21 = [];
        const sh22 = [];
        const sh23 = [];
        const sh24 = [];
        const sh25 = [];

        const shIn1 = [];
        const shIn2 = [];
        const shIn3 = [];
        const shIn4 = [];
        const shIn5 = [];

        const shOut1 = [];
        const shOut2 = [];
        const shOut3 = [];
        const shOut4 = [];
        const shOut5 = [];

        const noop = (v) => v;

        const set3 = (array, val1, val2, val3) => {
            array[0] = val1;
            array[1] = val2;
            array[2] = val3;
        };

        const set3FromArray = (array, srcDestView, stride, srcBase, compressionLevel) => {
            array[0] = dataViewFloatForCompressionLevel(srcDestView, srcBase, compressionLevel, true);
            array[1] = dataViewFloatForCompressionLevel(srcDestView, srcBase + stride, compressionLevel, true);
            array[2] = dataViewFloatForCompressionLevel(srcDestView, srcBase + stride + stride, compressionLevel, true);
        };

        const copy3 = (srcArray, destArray) => {
            destArray[0] = srcArray[0];
            destArray[1] = srcArray[1];
            destArray[2] = srcArray[2];
        };

        const setOutput3 = (srcArray, destArray, destBase, conversionFunc) => {
            destArray[destBase] = conversionFunc(srcArray[0]);
            destArray[destBase + 1] = conversionFunc(srcArray[1]);
            destArray[destBase + 2] = conversionFunc(srcArray[2]);
        };

        const toUncompressedFloatArray3 = (src, dest, compressionLevel, range8BitMin, range8BitMax) => {
            dest[0] = toUncompressedFloat(src[0], compressionLevel, true, range8BitMin, range8BitMax);
            dest[1] = toUncompressedFloat(src[1], compressionLevel, true, range8BitMin, range8BitMax);
            dest[2] = toUncompressedFloat(src[2], compressionLevel, true, range8BitMin, range8BitMax);
            return dest;
        };

        return function(outSphericalHarmonicsArray, outSphericalHarmonicsDegree, transform,
                        srcFrom, srcTo, destFrom, desiredOutputCompressionLevel) {
            const splatCount = this.splatCount;

            srcFrom = srcFrom || 0;
            srcTo = srcTo || splatCount - 1;
            if (destFrom === undefined) destFrom = srcFrom;

            if (transform && outSphericalHarmonicsDegree >= 1) {
                tempMatrix4.copy(transform);
                tempMatrix4.decompose(tempTranslation, tempRotation, tempScale);
                tempRotation.normalize();
                tempMatrix4.makeRotationFromQuaternion(tempRotation);
                tempMatrix3.setFromMatrix4(tempMatrix4);
                set3(sh11, tempMatrix3.elements[4], -tempMatrix3.elements[7], tempMatrix3.elements[1]);
                set3(sh12, -tempMatrix3.elements[5], tempMatrix3.elements[8], -tempMatrix3.elements[2]);
                set3(sh13, tempMatrix3.elements[3], -tempMatrix3.elements[6], tempMatrix3.elements[0]);
            }

            const localFromHalfFloatToUint8 = (v) => {
                return fromHalfFloatToUint8(v, this.minSphericalHarmonicsCoeff, this.maxSphericalHarmonicsCoeff);
            };

            const localToUint8 = (v) => {
                return toUint8(v, this.minSphericalHarmonicsCoeff, this.maxSphericalHarmonicsCoeff);
            };

            for (let i = srcFrom; i <= srcTo; i++) {

                const sectionIndex = this.globalSplatIndexToSectionMap[i];
                const section = this.sections[sectionIndex];
                outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, section.sphericalHarmonicsDegree);
                const outSphericalHarmonicsComponentsCount = getSphericalHarmonicsComponentCountForDegree(outSphericalHarmonicsDegree);

                const localSplatIndex = i - section.splatCountOffset;

                const srcSplatSHBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes;

                const dataView = new DataView(this.bufferData, section.dataBase + srcSplatSHBase);

                const shDestBase = (i - srcFrom + destFrom) * outSphericalHarmonicsComponentsCount;

                let compressionLevelForOutputConversion = transform ? 0 : this.compressionLevel;
                let outputConversionFunc = noop;
                if (compressionLevelForOutputConversion !== desiredOutputCompressionLevel) {
                    if (compressionLevelForOutputConversion === 1) {
                        if (desiredOutputCompressionLevel === 0) outputConversionFunc = fromHalfFloat;
                        else if (desiredOutputCompressionLevel == 2) outputConversionFunc = localFromHalfFloatToUint8;
                    } else if (compressionLevelForOutputConversion === 0) {
                        if (desiredOutputCompressionLevel === 1) outputConversionFunc = toHalfFloat;
                        else if (desiredOutputCompressionLevel == 2) outputConversionFunc = localToUint8;
                    }
                }

                const minShCoeff = this.minSphericalHarmonicsCoeff;
                const maxShCoeff = this.maxSphericalHarmonicsCoeff;

                if (outSphericalHarmonicsDegree >= 1) {

                    set3FromArray(shIn1, dataView, 3, 0, this.compressionLevel);
                    set3FromArray(shIn2, dataView, 3, 1, this.compressionLevel);
                    set3FromArray(shIn3, dataView, 3, 2, this.compressionLevel);

                    if (transform) {
                        toUncompressedFloatArray3(shIn1, shIn1, this.compressionLevel, minShCoeff, maxShCoeff);
                        toUncompressedFloatArray3(shIn2, shIn2, this.compressionLevel, minShCoeff, maxShCoeff);
                        toUncompressedFloatArray3(shIn3, shIn3, this.compressionLevel, minShCoeff, maxShCoeff);
                        SplatBuffer.rotateSphericalHarmonics3(shIn1, shIn2, shIn3, sh11, sh12, sh13, shOut1, shOut2, shOut3);
                    } else {
                        copy3(shIn1, shOut1);
                        copy3(shIn2, shOut2);
                        copy3(shIn3, shOut3);
                    }

                    setOutput3(shOut1, outSphericalHarmonicsArray, shDestBase, outputConversionFunc);
                    setOutput3(shOut2, outSphericalHarmonicsArray, shDestBase + 3, outputConversionFunc);
                    setOutput3(shOut3, outSphericalHarmonicsArray, shDestBase + 6, outputConversionFunc);

                    if (outSphericalHarmonicsDegree >= 2) {

                        set3FromArray(shIn1, dataView, 5, 9, this.compressionLevel);
                        set3FromArray(shIn2, dataView, 5, 10, this.compressionLevel);
                        set3FromArray(shIn3, dataView, 5, 11, this.compressionLevel);
                        set3FromArray(shIn4, dataView, 5, 12, this.compressionLevel);
                        set3FromArray(shIn5, dataView, 5, 13, this.compressionLevel);

                        if (transform) {
                            toUncompressedFloatArray3(shIn1, shIn1, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn2, shIn2, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn3, shIn3, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn4, shIn4, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn5, shIn5, this.compressionLevel, minShCoeff, maxShCoeff);
                            SplatBuffer.rotateSphericalHarmonics5(shIn1, shIn2, shIn3, shIn4, shIn5,
                                                                  sh11, sh12, sh13, sh21, sh22, sh23, sh24, sh25,
                                                                  shOut1, shOut2, shOut3, shOut4, shOut5);
                        } else {
                            copy3(shIn1, shOut1);
                            copy3(shIn2, shOut2);
                            copy3(shIn3, shOut3);
                            copy3(shIn4, shOut4);
                            copy3(shIn5, shOut5);
                        }

                        setOutput3(shOut1, outSphericalHarmonicsArray, shDestBase + 9, outputConversionFunc);
                        setOutput3(shOut2, outSphericalHarmonicsArray, shDestBase + 12, outputConversionFunc);
                        setOutput3(shOut3, outSphericalHarmonicsArray, shDestBase + 15, outputConversionFunc);
                        setOutput3(shOut4, outSphericalHarmonicsArray, shDestBase + 18, outputConversionFunc);
                        setOutput3(shOut5, outSphericalHarmonicsArray, shDestBase + 21, outputConversionFunc);
                    }
                }
            }
        };

    }();

    static dot3 = (v1, v2, v3, transformRow, outArray) => {
        outArray[0] = outArray[1] = outArray[2] = 0;
        const t0 = transformRow[0];
        const t1 = transformRow[1];
        const t2 = transformRow[2];
        SplatBuffer.addInto3(v1[0] * t0, v1[1] * t0, v1[2] * t0, outArray);
        SplatBuffer.addInto3(v2[0] * t1, v2[1] * t1, v2[2] * t1, outArray);
        SplatBuffer.addInto3(v3[0] * t2, v3[1] * t2, v3[2] * t2, outArray);
    };

    static addInto3 = (val1, val2, val3, destArray) => {
        destArray[0] = destArray[0] + val1;
        destArray[1] = destArray[1] + val2;
        destArray[2] = destArray[2] + val3;
    };

    static dot5 = (v1, v2, v3, v4, v5, transformRow, outArray) => {
        outArray[0] = outArray[1] = outArray[2] = 0;
        const t0 = transformRow[0];
        const t1 = transformRow[1];
        const t2 = transformRow[2];
        const t3 = transformRow[3];
        const t4 = transformRow[4];
        SplatBuffer.addInto3(v1[0] * t0, v1[1] * t0, v1[2] * t0, outArray);
        SplatBuffer.addInto3(v2[0] * t1, v2[1] * t1, v2[2] * t1, outArray);
        SplatBuffer.addInto3(v3[0] * t2, v3[1] * t2, v3[2] * t2, outArray);
        SplatBuffer.addInto3(v4[0] * t3, v4[1] * t3, v4[2] * t3, outArray);
        SplatBuffer.addInto3(v5[0] * t4, v5[1] * t4, v5[2] * t4, outArray);
    };

    static rotateSphericalHarmonics3 = (in1, in2, in3, tsh11, tsh12, tsh13, out1, out2, out3) => {
        SplatBuffer.dot3(in1, in2, in3, tsh11, out1);
        SplatBuffer.dot3(in1, in2, in3, tsh12, out2);
        SplatBuffer.dot3(in1, in2, in3, tsh13, out3);
    };

    static rotateSphericalHarmonics5 = (in1, in2, in3, in4, in5, tsh11, tsh12, tsh13,
                                        tsh21, tsh22, tsh23, tsh24, tsh25, out1, out2, out3, out4, out5) => {

        const kSqrt0104 = Math.sqrt(1.0 / 4.0);
        const kSqrt0304 = Math.sqrt(3.0 / 4.0);
        const kSqrt0103 = Math.sqrt(1.0 / 3.0);
        const kSqrt0403 = Math.sqrt(4.0 / 3.0);
        const kSqrt0112 = Math.sqrt(1.0 / 12.0);

        tsh21[0] = kSqrt0104 * ((tsh13[2] * tsh11[0] + tsh13[0] * tsh11[2]) + (tsh11[2] * tsh13[0] + tsh11[0] * tsh13[2]));
        tsh21[1] = (tsh13[1] * tsh11[0] + tsh11[1] * tsh13[0]);
        tsh21[2] = kSqrt0304 * (tsh13[1] * tsh11[1] + tsh11[1] * tsh13[1]);
        tsh21[3] = (tsh13[1] * tsh11[2] + tsh11[1] * tsh13[2]);
        tsh21[4] = kSqrt0104 * ((tsh13[2] * tsh11[2] - tsh13[0] * tsh11[0]) + (tsh11[2] * tsh13[2] - tsh11[0] * tsh13[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh21, out1);

        tsh22[0] = kSqrt0104 * ((tsh12[2] * tsh11[0] + tsh12[0] * tsh11[2]) + (tsh11[2] * tsh12[0] + tsh11[0] * tsh12[2]));
        tsh22[1] = tsh12[1] * tsh11[0] + tsh11[1] * tsh12[0];
        tsh22[2] = kSqrt0304 * (tsh12[1] * tsh11[1] + tsh11[1] * tsh12[1]);
        tsh22[3] = tsh12[1] * tsh11[2] + tsh11[1] * tsh12[2];
        tsh22[4] = kSqrt0104 * ((tsh12[2] * tsh11[2] - tsh12[0] * tsh11[0]) + (tsh11[2] * tsh12[2] - tsh11[0] * tsh12[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh22, out2);

        tsh23[0] = kSqrt0103 * (tsh12[2] * tsh12[0] + tsh12[0] * tsh12[2]) + -kSqrt0112 *
                   ((tsh13[2] * tsh13[0] + tsh13[0] * tsh13[2]) + (tsh11[2] * tsh11[0] + tsh11[0] * tsh11[2]));
        tsh23[1] = kSqrt0403 * tsh12[1] * tsh12[0] + -kSqrt0103 * (tsh13[1] * tsh13[0] + tsh11[1] * tsh11[0]);
        tsh23[2] = tsh12[1] * tsh12[1] + -kSqrt0104 * (tsh13[1] * tsh13[1] + tsh11[1] * tsh11[1]);
        tsh23[3] = kSqrt0403 * tsh12[1] * tsh12[2] + -kSqrt0103 * (tsh13[1] * tsh13[2] + tsh11[1] * tsh11[2]);
        tsh23[4] = kSqrt0103 * (tsh12[2] * tsh12[2] - tsh12[0] * tsh12[0]) + -kSqrt0112 *
                   ((tsh13[2] * tsh13[2] - tsh13[0] * tsh13[0]) + (tsh11[2] * tsh11[2] - tsh11[0] * tsh11[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh23, out3);

        tsh24[0] = kSqrt0104 * ((tsh12[2] * tsh13[0] + tsh12[0] * tsh13[2]) + (tsh13[2] * tsh12[0] + tsh13[0] * tsh12[2]));
        tsh24[1] = tsh12[1] * tsh13[0] + tsh13[1] * tsh12[0];
        tsh24[2] = kSqrt0304 * (tsh12[1] * tsh13[1] + tsh13[1] * tsh12[1]);
        tsh24[3] = tsh12[1] * tsh13[2] + tsh13[1] * tsh12[2];
        tsh24[4] = kSqrt0104 * ((tsh12[2] * tsh13[2] - tsh12[0] * tsh13[0]) + (tsh13[2] * tsh12[2] - tsh13[0] * tsh12[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh24, out4);

        tsh25[0] = kSqrt0104 * ((tsh13[2] * tsh13[0] + tsh13[0] * tsh13[2]) - (tsh11[2] * tsh11[0] + tsh11[0] * tsh11[2]));
        tsh25[1] = (tsh13[1] * tsh13[0] - tsh11[1] * tsh11[0]);
        tsh25[2] = kSqrt0304 * (tsh13[1] * tsh13[1] - tsh11[1] * tsh11[1]);
        tsh25[3] = (tsh13[1] * tsh13[2] - tsh11[1] * tsh11[2]);
        tsh25[4] = kSqrt0104 * ((tsh13[2] * tsh13[2] - tsh13[0] * tsh13[0]) - (tsh11[2] * tsh11[2] - tsh11[0] * tsh11[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh25, out5);
    };

    static parseHeader(buffer) {
        const headerArrayUint8 = new Uint8Array(buffer, 0, SplatBuffer.HeaderSizeBytes);
        const headerArrayUint16 = new Uint16Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 2);
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const headerArrayFloat32 = new Float32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const versionMajor = headerArrayUint8[0];
        const versionMinor = headerArrayUint8[1];
        const maxSectionCount = headerArrayUint32[1];
        const sectionCount = headerArrayUint32[2];
        const maxSplatCount = headerArrayUint32[3];
        const splatCount = headerArrayUint32[4];
        const compressionLevel = headerArrayUint16[10];
        const sceneCenter = new THREE.Vector3(headerArrayFloat32[6], headerArrayFloat32[7], headerArrayFloat32[8]);

        const minSphericalHarmonicsCoeff = headerArrayFloat32[9] || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        const maxSphericalHarmonicsCoeff = headerArrayFloat32[10] || DefaultSphericalHarmonics8BitCompressionHalfRange;

        return {
            versionMajor,
            versionMinor,
            maxSectionCount,
            sectionCount,
            maxSplatCount,
            splatCount,
            compressionLevel,
            sceneCenter,
            minSphericalHarmonicsCoeff,
            maxSphericalHarmonicsCoeff
        };
    }

    static writeHeaderCountsToBuffer(sectionCount, splatCount, buffer) {
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        headerArrayUint32[2] = sectionCount;
        headerArrayUint32[4] = splatCount;
    }

    static writeHeaderToBuffer(header, buffer) {
        const headerArrayUint8 = new Uint8Array(buffer, 0, SplatBuffer.HeaderSizeBytes);
        const headerArrayUint16 = new Uint16Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 2);
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const headerArrayFloat32 = new Float32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        headerArrayUint8[0] = header.versionMajor;
        headerArrayUint8[1] = header.versionMinor;
        headerArrayUint8[2] = 0; // unused for now
        headerArrayUint8[3] = 0; // unused for now
        headerArrayUint32[1] = header.maxSectionCount;
        headerArrayUint32[2] = header.sectionCount;
        headerArrayUint32[3] = header.maxSplatCount;
        headerArrayUint32[4] = header.splatCount;
        headerArrayUint16[10] = header.compressionLevel;
        headerArrayFloat32[6] = header.sceneCenter.x;
        headerArrayFloat32[7] = header.sceneCenter.y;
        headerArrayFloat32[8] = header.sceneCenter.z;
        headerArrayFloat32[9] = header.minSphericalHarmonicsCoeff || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        headerArrayFloat32[10] = header.maxSphericalHarmonicsCoeff || DefaultSphericalHarmonics8BitCompressionHalfRange;
    }

    static parseSectionHeaders(header, buffer, offset = 0, secLoadedCountsToMax) {
        const compressionLevel = header.compressionLevel;

        const maxSectionCount = header.maxSectionCount;
        const sectionHeaderArrayUint16 = new Uint16Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 2);
        const sectionHeaderArrayUint32 = new Uint32Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 4);
        const sectionHeaderArrayFloat32 = new Float32Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 4);

        const sectionHeaders = [];
        let sectionHeaderBase = 0;
        let sectionHeaderBaseUint16 = sectionHeaderBase / 2;
        let sectionHeaderBaseUint32 = sectionHeaderBase / 4;
        let sectionBase = SplatBuffer.HeaderSizeBytes + header.maxSectionCount * SplatBuffer.SectionHeaderSizeBytes;
        let splatCountOffset = 0;
        for (let i = 0; i < maxSectionCount; i++) {
            const maxSplatCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 1];
            const bucketSize = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 2];
            const bucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 3];
            const bucketBlockSize = sectionHeaderArrayFloat32[sectionHeaderBaseUint32 + 4];
            const halfBucketBlockSize = bucketBlockSize / 2.0;
            const bucketStorageSizeBytes = sectionHeaderArrayUint16[sectionHeaderBaseUint16 + 10];
            const compressionScaleRange = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 6] ||
                                          SplatBuffer.CompressionLevels[compressionLevel].ScaleRange;
            const fullBucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 8];
            const partiallyFilledBucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 9];
            const bucketsMetaDataSizeBytes = partiallyFilledBucketCount * 4;
            const bucketsStorageSizeBytes = bucketStorageSizeBytes * bucketCount + bucketsMetaDataSizeBytes;

            const sphericalHarmonicsDegree = sectionHeaderArrayUint16[sectionHeaderBaseUint16 + 20];
            const { bytesPerSplat } = SplatBuffer.calculateComponentStorage(compressionLevel, sphericalHarmonicsDegree);

            const splatDataStorageSizeBytes = bytesPerSplat * maxSplatCount;
            const storageSizeBytes = splatDataStorageSizeBytes + bucketsStorageSizeBytes;
            const sectionHeader = {
                bytesPerSplat: bytesPerSplat,
                splatCountOffset: splatCountOffset,
                splatCount: secLoadedCountsToMax ? maxSplatCount : 0,
                maxSplatCount: maxSplatCount,
                bucketSize: bucketSize,
                bucketCount: bucketCount,
                bucketBlockSize: bucketBlockSize,
                halfBucketBlockSize: halfBucketBlockSize,
                bucketStorageSizeBytes: bucketStorageSizeBytes,
                bucketsStorageSizeBytes: bucketsStorageSizeBytes,
                splatDataStorageSizeBytes: splatDataStorageSizeBytes,
                storageSizeBytes: storageSizeBytes,
                compressionScaleRange: compressionScaleRange,
                compressionScaleFactor: halfBucketBlockSize / compressionScaleRange,
                base: sectionBase,
                bucketsBase: sectionBase + bucketsMetaDataSizeBytes,
                dataBase: sectionBase + bucketsStorageSizeBytes,
                fullBucketCount: fullBucketCount,
                partiallyFilledBucketCount: partiallyFilledBucketCount,
                sphericalHarmonicsDegree: sphericalHarmonicsDegree
            };
            sectionHeaders[i] = sectionHeader;
            sectionBase += storageSizeBytes;
            sectionHeaderBase += SplatBuffer.SectionHeaderSizeBytes;
            sectionHeaderBaseUint16 = sectionHeaderBase / 2;
            sectionHeaderBaseUint32 = sectionHeaderBase / 4;
            splatCountOffset += maxSplatCount;
        }

        return sectionHeaders;
    }


    static writeSectionHeaderToBuffer(sectionHeader, compressionLevel, buffer, offset = 0) {
        const sectionHeadeArrayUint16 = new Uint16Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 2);
        const sectionHeadeArrayUint32 = new Uint32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);
        const sectionHeadeArrayFloat32 = new Float32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);

        sectionHeadeArrayUint32[0] = sectionHeader.splatCount;
        sectionHeadeArrayUint32[1] = sectionHeader.maxSplatCount;
        sectionHeadeArrayUint32[2] = compressionLevel >= 1 ? sectionHeader.bucketSize : 0;
        sectionHeadeArrayUint32[3] = compressionLevel >= 1 ? sectionHeader.bucketCount : 0;
        sectionHeadeArrayFloat32[4] = compressionLevel >= 1 ? sectionHeader.bucketBlockSize : 0.0;
        sectionHeadeArrayUint16[10] = compressionLevel >= 1 ? SplatBuffer.BucketStorageSizeBytes : 0;
        sectionHeadeArrayUint32[6] = compressionLevel >= 1 ? sectionHeader.compressionScaleRange : 0;
        sectionHeadeArrayUint32[7] = sectionHeader.storageSizeBytes;
        sectionHeadeArrayUint32[8] = compressionLevel >= 1 ? sectionHeader.fullBucketCount : 0;
        sectionHeadeArrayUint32[9] = compressionLevel >= 1 ? sectionHeader.partiallyFilledBucketCount : 0;
        sectionHeadeArrayUint16[20] = sectionHeader.sphericalHarmonicsDegree;

    }

    static writeSectionHeaderSplatCountToBuffer(splatCount, buffer, offset = 0) {
        const sectionHeadeArrayUint32 = new Uint32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);
        sectionHeadeArrayUint32[0] = splatCount;
    }

    constructFromBuffer(bufferData, secLoadedCountsToMax) {
        this.bufferData = bufferData;

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSectionMap = [];

        const header = SplatBuffer.parseHeader(this.bufferData);
        this.versionMajor = header.versionMajor;
        this.versionMinor = header.versionMinor;
        this.maxSectionCount = header.maxSectionCount;
        this.sectionCount = secLoadedCountsToMax ? header.maxSectionCount : 0;
        this.maxSplatCount = header.maxSplatCount;
        this.splatCount = secLoadedCountsToMax ? header.maxSplatCount : 0;
        this.compressionLevel = header.compressionLevel;
        this.sceneCenter = new THREE.Vector3().copy(header.sceneCenter);
        this.minSphericalHarmonicsCoeff = header.minSphericalHarmonicsCoeff;
        this.maxSphericalHarmonicsCoeff = header.maxSphericalHarmonicsCoeff;

        this.sections = SplatBuffer.parseSectionHeaders(header, this.bufferData, SplatBuffer.HeaderSizeBytes, secLoadedCountsToMax);

        this.linkBufferArrays();
        this.buildMaps();
    }

    static calculateComponentStorage(compressionLevel, sphericalHarmonicsDegree) {
        const bytesPerCenter = SplatBuffer.CompressionLevels[compressionLevel].BytesPerCenter;
        const bytesPerScale = SplatBuffer.CompressionLevels[compressionLevel].BytesPerScale;
        const bytesPerRotation = SplatBuffer.CompressionLevels[compressionLevel].BytesPerRotation;
        const bytesPerColor = SplatBuffer.CompressionLevels[compressionLevel].BytesPerColor;
        const sphericalHarmonicsComponentsPerSplat = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
        const sphericalHarmonicsBytesPerSplat = SplatBuffer.CompressionLevels[compressionLevel].BytesPerSphericalHarmonicsComponent *
                                                sphericalHarmonicsComponentsPerSplat;
        const bytesPerSplat = bytesPerCenter + bytesPerScale + bytesPerRotation +
                              bytesPerColor + sphericalHarmonicsBytesPerSplat;
        return {
            bytesPerCenter,
            bytesPerScale,
            bytesPerRotation,
            bytesPerColor,
            sphericalHarmonicsComponentsPerSplat,
            sphericalHarmonicsBytesPerSplat,
            bytesPerSplat
        };
    }

    linkBufferArrays() {
        for (let i = 0; i < this.maxSectionCount; i++) {
            const section = this.sections[i];
            section.bucketArray = new Float32Array(this.bufferData, section.bucketsBase,
                                                   section.bucketCount * SplatBuffer.BucketStorageSizeFloats);
            if (section.partiallyFilledBucketCount > 0) {
                section.partiallyFilledBucketLengths = new Uint32Array(this.bufferData, section.base,
                                                                       section.partiallyFilledBucketCount);
            }
        }
    }

    buildMaps() {
        let cumulativeSplatCount = 0;
        for (let i = 0; i < this.maxSectionCount; i++) {
            const section = this.sections[i];
            for (let j = 0; j < section.maxSplatCount; j++) {
                const globalSplatIndex = cumulativeSplatCount + j;
                this.globalSplatIndexToLocalSplatIndexMap[globalSplatIndex] = j;
                this.globalSplatIndexToSectionMap[globalSplatIndex] = i;
            }
            cumulativeSplatCount += section.maxSplatCount;
        }
    }

    updateLoadedCounts(newSectionCount, newSplatCount) {
        SplatBuffer.writeHeaderCountsToBuffer(newSectionCount, newSplatCount, this.bufferData);
        this.sectionCount = newSectionCount;
        this.splatCount = newSplatCount;
    }

    updateSectionLoadedCounts(sectionIndex, newSplatCount) {
        const sectionHeaderOffset = SplatBuffer.HeaderSizeBytes + SplatBuffer.SectionHeaderSizeBytes * sectionIndex;
        SplatBuffer.writeSectionHeaderSplatCountToBuffer(newSplatCount, this.bufferData, sectionHeaderOffset);
        this.sections[sectionIndex].splatCount = newSplatCount;
    }

    static writeSplatDataToSectionBuffer = function() {

        const tempCenterBuffer = new ArrayBuffer(12);
        const tempScaleBuffer = new ArrayBuffer(12);
        const tempRotationBuffer = new ArrayBuffer(16);
        const tempColorBuffer = new ArrayBuffer(4);
        const tempSHBuffer = new ArrayBuffer(256);
        const tempRot = new THREE.Quaternion();
        const tempScale = new THREE.Vector3();
        const bucketCenterDelta = new THREE.Vector3();

        const {
            X: OFFSET_X, Y: OFFSET_Y, Z: OFFSET_Z,
            SCALE0: OFFSET_SCALE0, SCALE1: OFFSET_SCALE1, SCALE2: OFFSET_SCALE2,
            ROTATION0: OFFSET_ROT0, ROTATION1: OFFSET_ROT1, ROTATION2: OFFSET_ROT2, ROTATION3: OFFSET_ROT3,
            FDC0: OFFSET_FDC0, FDC1: OFFSET_FDC1, FDC2: OFFSET_FDC2, OPACITY: OFFSET_OPACITY,
            FRC0: OFFSET_FRC0, FRC9: OFFSET_FRC9,
        } = UncompressedSplatArray.OFFSET;

        const compressPositionOffset = (v, compressionScaleFactor, compressionScaleRange) => {
            const doubleCompressionScaleRange = compressionScaleRange * 2 + 1;
            v = Math.round(v * compressionScaleFactor) + compressionScaleRange;
            return clamp(v, 0, doubleCompressionScaleRange);
        };

        return function(targetSplat, sectionBuffer, bufferOffset, compressionLevel, sphericalHarmonicsDegree,
                        bucketCenter, compressionScaleFactor, compressionScaleRange,
                        minSphericalHarmonicsCoeff = -DefaultSphericalHarmonics8BitCompressionHalfRange,
                        maxSphericalHarmonicsCoeff = DefaultSphericalHarmonics8BitCompressionHalfRange) {

            const sphericalHarmonicsComponentsPerSplat = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
            const bytesPerCenter = SplatBuffer.CompressionLevels[compressionLevel].BytesPerCenter;
            const bytesPerScale = SplatBuffer.CompressionLevels[compressionLevel].BytesPerScale;
            const bytesPerRotation = SplatBuffer.CompressionLevels[compressionLevel].BytesPerRotation;
            const bytesPerColor = SplatBuffer.CompressionLevels[compressionLevel].BytesPerColor;

            const centerBase = bufferOffset;
            const scaleBase = centerBase + bytesPerCenter;
            const rotationBase = scaleBase + bytesPerScale;
            const colorBase = rotationBase + bytesPerRotation;
            const sphericalHarmonicsBase = colorBase + bytesPerColor;

            if (targetSplat[OFFSET_ROT0] !== undefined) {
                tempRot.set(targetSplat[OFFSET_ROT0], targetSplat[OFFSET_ROT1], targetSplat[OFFSET_ROT2], targetSplat[OFFSET_ROT3]);
                tempRot.normalize();
            } else {
                tempRot.set(1.0, 0.0, 0.0, 0.0);
            }

            if (targetSplat[OFFSET_SCALE0] !== undefined) {
                tempScale.set(targetSplat[OFFSET_SCALE0] || 0,
                              targetSplat[OFFSET_SCALE1] || 0,
                              targetSplat[OFFSET_SCALE2] || 0);
            } else {
                tempScale.set(0, 0, 0);
            }

            if (compressionLevel === 0) {
                const center = new Float32Array(sectionBuffer, centerBase, SplatBuffer.CenterComponentCount);
                const rot = new Float32Array(sectionBuffer, rotationBase, SplatBuffer.RotationComponentCount);
                const scale = new Float32Array(sectionBuffer, scaleBase, SplatBuffer.ScaleComponentCount);

                rot.set([tempRot.x, tempRot.y, tempRot.z, tempRot.w]);
                scale.set([tempScale.x, tempScale.y, tempScale.z]);
                center.set([targetSplat[OFFSET_X], targetSplat[OFFSET_Y], targetSplat[OFFSET_Z]]);

                if (sphericalHarmonicsDegree > 0) {
                    const shOut = new Float32Array(sectionBuffer, sphericalHarmonicsBase, sphericalHarmonicsComponentsPerSplat);
                    if (sphericalHarmonicsDegree >= 1) {
                            for (let s = 0; s < 9; s++) shOut[s] = targetSplat[OFFSET_FRC0 + s] || 0;
                            if (sphericalHarmonicsDegree >= 2) {
                                for (let s = 0; s < 15; s++) shOut[s + 9] = targetSplat[OFFSET_FRC9 + s] || 0;
                            }
                    }
                }
            } else {
                const center = new Uint16Array(tempCenterBuffer, 0, SplatBuffer.CenterComponentCount);
                const rot = new Uint16Array(tempRotationBuffer, 0, SplatBuffer.RotationComponentCount);
                const scale = new Uint16Array(tempScaleBuffer, 0, SplatBuffer.ScaleComponentCount);

                rot.set([toHalfFloat(tempRot.x), toHalfFloat(tempRot.y), toHalfFloat(tempRot.z), toHalfFloat(tempRot.w)]);
                scale.set([toHalfFloat(tempScale.x), toHalfFloat(tempScale.y), toHalfFloat(tempScale.z)]);

                bucketCenterDelta.set(targetSplat[OFFSET_X], targetSplat[OFFSET_Y], targetSplat[OFFSET_Z]).sub(bucketCenter);
                bucketCenterDelta.x = compressPositionOffset(bucketCenterDelta.x, compressionScaleFactor, compressionScaleRange);
                bucketCenterDelta.y = compressPositionOffset(bucketCenterDelta.y, compressionScaleFactor, compressionScaleRange);
                bucketCenterDelta.z = compressPositionOffset(bucketCenterDelta.z, compressionScaleFactor, compressionScaleRange);
                center.set([bucketCenterDelta.x, bucketCenterDelta.y, bucketCenterDelta.z]);

                if (sphericalHarmonicsDegree > 0) {
                    const SHArrayType = compressionLevel === 1 ? Uint16Array : Uint8Array;
                    const bytesPerSHComponent = compressionLevel === 1 ? 2 : 1;
                    const shOut = new SHArrayType(tempSHBuffer, 0, sphericalHarmonicsComponentsPerSplat);
                    if (sphericalHarmonicsDegree >= 1) {
                        for (let s = 0; s < 9; s++) {
                            const srcVal = targetSplat[OFFSET_FRC0 + s] || 0;
                            shOut[s] = compressionLevel === 1 ? toHalfFloat(srcVal) :
                                       toUint8(srcVal, minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                        }
                        const degree1ByteCount = 9 * bytesPerSHComponent;
                        copyBetweenBuffers(shOut.buffer, 0, sectionBuffer, sphericalHarmonicsBase, degree1ByteCount);
                        if (sphericalHarmonicsDegree >= 2) {
                            for (let s = 0; s < 15; s++) {
                                const srcVal = targetSplat[OFFSET_FRC9 + s] || 0;
                                shOut[s + 9] = compressionLevel === 1 ? toHalfFloat(srcVal) :
                                               toUint8(srcVal, minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                            }
                            copyBetweenBuffers(shOut.buffer, degree1ByteCount, sectionBuffer,
                                               sphericalHarmonicsBase + degree1ByteCount, 15 * bytesPerSHComponent);
                        }
                    }
                }

                copyBetweenBuffers(center.buffer, 0, sectionBuffer, centerBase, 6);
                copyBetweenBuffers(scale.buffer, 0, sectionBuffer, scaleBase, 6);
                copyBetweenBuffers(rot.buffer, 0, sectionBuffer, rotationBase, 8);
            }

            const rgba = new Uint8ClampedArray(tempColorBuffer, 0, 4);
            rgba.set([targetSplat[OFFSET_FDC0] || 0, targetSplat[OFFSET_FDC1] || 0, targetSplat[OFFSET_FDC2] || 0]);
            rgba[3] = targetSplat[OFFSET_OPACITY] || 0;

            copyBetweenBuffers(rgba.buffer, 0, sectionBuffer, colorBase, 4);
        };

    }();

    static generateFromUncompressedSplatArrays(splatArrays, minimumAlpha, compressionLevel,
                                               sceneCenter, blockSize, bucketSize, options = []) {

        let shDegree = 0;
        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            shDegree = Math.max(splatArray.sphericalHarmonicsDegree, shDegree);
        }

        let minSphericalHarmonicsCoeff;
        let maxSphericalHarmonicsCoeff;

        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            for (let i = 0; i < splatArray.splats.length; i++) {
                const splat = splatArray.splats[i];
                for (let sc = UncompressedSplatArray.OFFSET.FRC0; sc < UncompressedSplatArray.OFFSET.FRC23 && sc < splat.length; sc++) {
                    if (!minSphericalHarmonicsCoeff || splat[sc] < minSphericalHarmonicsCoeff) {
                        minSphericalHarmonicsCoeff = splat[sc];
                    }
                    if (!maxSphericalHarmonicsCoeff || splat[sc] > maxSphericalHarmonicsCoeff) {
                        maxSphericalHarmonicsCoeff = splat[sc];
                    }
                }
            }
        }

        minSphericalHarmonicsCoeff = minSphericalHarmonicsCoeff || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        maxSphericalHarmonicsCoeff = maxSphericalHarmonicsCoeff || DefaultSphericalHarmonics8BitCompressionHalfRange;

        const { bytesPerSplat } = SplatBuffer.calculateComponentStorage(compressionLevel, shDegree);
        const compressionScaleRange = SplatBuffer.CompressionLevels[compressionLevel].ScaleRange;

        const sectionBuffers = [];
        const sectionHeaderBuffers = [];
        let totalSplatCount = 0;

        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            const validSplats = new UncompressedSplatArray(shDegree);
            for (let i = 0; i < splatArray.splatCount; i++) {
                const targetSplat = splatArray.splats[i];
                if ((targetSplat[UncompressedSplatArray.OFFSET.OPACITY] || 0) >= minimumAlpha) {
                    validSplats.addSplat(targetSplat);
                }
            }

            const sectionOptions = options[sa] || {};
            const sectionBlockSize = (sectionOptions.blockSizeFactor || 1) * (blockSize || SplatBuffer.BucketBlockSize);
            const sectionBucketSize = Math.ceil((sectionOptions.bucketSizeFactor || 1) * (bucketSize || SplatBuffer.BucketSize));

            const bucketInfo = SplatBuffer.computeBucketsForUncompressedSplatArray(validSplats, sectionBlockSize, sectionBucketSize);
            const fullBucketCount = bucketInfo.fullBuckets.length;
            const partiallyFullBucketLengths = bucketInfo.partiallyFullBuckets.map((bucket) => bucket.splats.length);
            const partiallyFilledBucketCount = partiallyFullBucketLengths.length;
            const buckets = [...bucketInfo.fullBuckets, ...bucketInfo.partiallyFullBuckets];

            const sectionDataSizeBytes = validSplats.splats.length * bytesPerSplat;
            const bucketMetaDataSizeBytes = partiallyFilledBucketCount * 4;
            const bucketDataBytes = compressionLevel >= 1 ? buckets.length *
                                                            SplatBuffer.BucketStorageSizeBytes + bucketMetaDataSizeBytes : 0;
            const sectionSizeBytes = sectionDataSizeBytes + bucketDataBytes;
            const sectionBuffer = new ArrayBuffer(sectionSizeBytes);

            const compressionScaleFactor = compressionScaleRange / (sectionBlockSize * 0.5);
            const bucketCenter = new THREE.Vector3();

            let outSplatCount = 0;
            for (let b = 0; b < buckets.length; b++) {
                const bucket = buckets[b];
                bucketCenter.fromArray(bucket.center);
                for (let i = 0; i < bucket.splats.length; i++) {
                    let row = bucket.splats[i];
                    const targetSplat = validSplats.splats[row];
                    const bufferOffset = bucketDataBytes + outSplatCount * bytesPerSplat;
                    SplatBuffer.writeSplatDataToSectionBuffer(targetSplat, sectionBuffer, bufferOffset, compressionLevel, shDegree,
                                                              bucketCenter, compressionScaleFactor, compressionScaleRange,
                                                              minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                    outSplatCount++;
                }
            }
            totalSplatCount += outSplatCount;

            if (compressionLevel >= 1) {
                const bucketMetaDataArray = new Uint32Array(sectionBuffer, 0, partiallyFullBucketLengths.length * 4);
                for (let pfb = 0; pfb < partiallyFullBucketLengths.length; pfb ++) {
                    bucketMetaDataArray[pfb] = partiallyFullBucketLengths[pfb];
                }
                const bucketArray = new Float32Array(sectionBuffer, bucketMetaDataSizeBytes,
                                                     buckets.length * SplatBuffer.BucketStorageSizeFloats);
                for (let b = 0; b < buckets.length; b++) {
                    const bucket = buckets[b];
                    const base = b * 3;
                    bucketArray[base] = bucket.center[0];
                    bucketArray[base + 1] = bucket.center[1];
                    bucketArray[base + 2] = bucket.center[2];
                }
            }
            sectionBuffers.push(sectionBuffer);

            const sectionHeaderBuffer = new ArrayBuffer(SplatBuffer.SectionHeaderSizeBytes);
            SplatBuffer.writeSectionHeaderToBuffer({
                maxSplatCount: outSplatCount,
                splatCount: outSplatCount,
                bucketSize: sectionBucketSize,
                bucketCount: buckets.length,
                bucketBlockSize: sectionBlockSize,
                compressionScaleRange: compressionScaleRange,
                storageSizeBytes: sectionSizeBytes,
                fullBucketCount: fullBucketCount,
                partiallyFilledBucketCount: partiallyFilledBucketCount,
                sphericalHarmonicsDegree: shDegree
            }, compressionLevel, sectionHeaderBuffer, 0);
            sectionHeaderBuffers.push(sectionHeaderBuffer);

        }

        let sectionsCumulativeSizeBytes = 0;
        for (let sectionBuffer of sectionBuffers) sectionsCumulativeSizeBytes += sectionBuffer.byteLength;
        const unifiedBufferSize = SplatBuffer.HeaderSizeBytes +
                                  SplatBuffer.SectionHeaderSizeBytes * sectionBuffers.length + sectionsCumulativeSizeBytes;
        const unifiedBuffer = new ArrayBuffer(unifiedBufferSize);

        SplatBuffer.writeHeaderToBuffer({
            versionMajor: 0,
            versionMinor: 1,
            maxSectionCount: sectionBuffers.length,
            sectionCount: sectionBuffers.length,
            maxSplatCount: totalSplatCount,
            splatCount: totalSplatCount,
            compressionLevel: compressionLevel,
            sceneCenter: sceneCenter,
            minSphericalHarmonicsCoeff: minSphericalHarmonicsCoeff,
            maxSphericalHarmonicsCoeff: maxSphericalHarmonicsCoeff
        }, unifiedBuffer);

        let currentUnifiedBase = SplatBuffer.HeaderSizeBytes;
        for (let sectionHeaderBuffer of sectionHeaderBuffers) {
            new Uint8Array(unifiedBuffer, currentUnifiedBase, SplatBuffer.SectionHeaderSizeBytes).set(new Uint8Array(sectionHeaderBuffer));
            currentUnifiedBase += SplatBuffer.SectionHeaderSizeBytes;
        }

        for (let sectionBuffer of sectionBuffers) {
            new Uint8Array(unifiedBuffer, currentUnifiedBase, sectionBuffer.byteLength).set(new Uint8Array(sectionBuffer));
            currentUnifiedBase += sectionBuffer.byteLength;
        }

        const splatBuffer = new SplatBuffer(unifiedBuffer);
        return splatBuffer;
    }

    static computeBucketsForUncompressedSplatArray(splatArray, blockSize, bucketSize) {
        let splatCount = splatArray.splatCount;
        const halfBlockSize = blockSize / 2.0;

        const min = new THREE.Vector3();
        const max = new THREE.Vector3();

        for (let i = 0; i < splatCount; i++) {
            const targetSplat = splatArray.splats[i];
            const center = [targetSplat[UncompressedSplatArray.OFFSET.X],
                            targetSplat[UncompressedSplatArray.OFFSET.Y],
                            targetSplat[UncompressedSplatArray.OFFSET.Z]];
            if (i === 0 || center[0] < min.x) min.x = center[0];
            if (i === 0 || center[0] > max.x) max.x = center[0];
            if (i === 0 || center[1] < min.y) min.y = center[1];
            if (i === 0 || center[1] > max.y) max.y = center[1];
            if (i === 0 || center[2] < min.z) min.z = center[2];
            if (i === 0 || center[2] > max.z) max.z = center[2];
        }

        const dimensions = new THREE.Vector3().copy(max).sub(min);
        const yBlocks = Math.ceil(dimensions.y / blockSize);
        const zBlocks = Math.ceil(dimensions.z / blockSize);

        const blockCenter = new THREE.Vector3();
        const fullBuckets = [];
        const partiallyFullBuckets = {};

        for (let i = 0; i < splatCount; i++) {
            const targetSplat = splatArray.splats[i];
            const center = [targetSplat[UncompressedSplatArray.OFFSET.X],
                            targetSplat[UncompressedSplatArray.OFFSET.Y],
                            targetSplat[UncompressedSplatArray.OFFSET.Z]];
            const xBlock = Math.floor((center[0] - min.x) / blockSize);
            const yBlock = Math.floor((center[1] - min.y) / blockSize);
            const zBlock = Math.floor((center[2] - min.z) / blockSize);

            blockCenter.x = xBlock * blockSize + min.x + halfBlockSize;
            blockCenter.y = yBlock * blockSize + min.y + halfBlockSize;
            blockCenter.z = zBlock * blockSize + min.z + halfBlockSize;

            const bucketId = xBlock * (yBlocks * zBlocks) + yBlock * zBlocks + zBlock;
            let bucket = partiallyFullBuckets[bucketId];
            if (!bucket) {
                partiallyFullBuckets[bucketId] = bucket = {
                    'splats': [],
                    'center': blockCenter.toArray()
                };
            }

            bucket.splats.push(i);
            if (bucket.splats.length >= bucketSize) {
                fullBuckets.push(bucket);
                partiallyFullBuckets[bucketId] = null;
            }
        }

        const partiallyFullBucketArray = [];
        for (let bucketId in partiallyFullBuckets) {
            if (Object.hasOwn(partiallyFullBuckets, bucketId)) {
                const bucket = partiallyFullBuckets[bucketId];
                if (bucket) {
                    partiallyFullBucketArray.push(bucket);
                }
            }
        }

        return {
            'fullBuckets': fullBuckets,
            'partiallyFullBuckets': partiallyFullBucketArray,
        };
    }

}

/**
 * SplatPartitioner
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class SplatPartitioner {

    constructor(sectionCount, sectionFilters, groupingParameters, partitionGenerator) {
        this.sectionCount = sectionCount;
        this.sectionFilters = sectionFilters;
        this.groupingParameters = groupingParameters;
        this.partitionGenerator = partitionGenerator;
    }

    partitionUncompressedSplatArray(splatArray) {
        let groupingParameters;
        let sectionCount;
        let sectionFilters;
        if (this.partitionGenerator) {
            const results = this.partitionGenerator(splatArray);
            groupingParameters = results.groupingParameters;
            sectionCount = results.sectionCount;
            sectionFilters = results.sectionFilters;
        } else {
            groupingParameters = this.groupingParameters;
            sectionCount = this.sectionCount;
            sectionFilters = this.sectionFilters;
        }

        const newArrays = [];
        for (let s = 0; s < sectionCount; s++) {
            const sectionSplats = new UncompressedSplatArray(splatArray.sphericalHarmonicsDegree);
            const sectionFilter = sectionFilters[s];
            for (let i = 0; i < splatArray.splatCount; i++) {
                if (sectionFilter(i)) {
                    sectionSplats.addSplat(splatArray.splats[i]);
                }
            }
            newArrays.push(sectionSplats);
        }
        return {
            splatArrays: newArrays,
            parameters: groupingParameters
        };
    }

    static getStandardPartitioner(partitionSize = 0, sceneCenter = new THREE.Vector3(),
                                  blockSize = SplatBuffer.BucketBlockSize, bucketSize = SplatBuffer.BucketSize) {

        const partitionGenerator = (splatArray) => {

            const OFFSET_X = UncompressedSplatArray.OFFSET.X;
            const OFFSET_Y = UncompressedSplatArray.OFFSET.Y;
            const OFFSET_Z = UncompressedSplatArray.OFFSET.Z;

            if (partitionSize <= 0) partitionSize = splatArray.splatCount;

            const center = new THREE.Vector3();
            const clampDistance = 0.5;
            const clampPoint = (point) => {
                point.x = Math.floor(point.x / clampDistance) * clampDistance;
                point.y = Math.floor(point.y / clampDistance) * clampDistance;
                point.z = Math.floor(point.z / clampDistance) * clampDistance;
            };
            splatArray.splats.forEach((splat) => {
                center.set(splat[OFFSET_X], splat[OFFSET_Y], splat[OFFSET_Z]).sub(sceneCenter);
                clampPoint(center);
                splat.centerDist = center.lengthSq();
            });
            splatArray.splats.sort((a, b) => {
                let centerADist = a.centerDist;
                let centerBDist = b.centerDist;
                if (centerADist > centerBDist) return 1;
                else return -1;
            });

            const sectionFilters = [];
            const groupingParameters = [];
            partitionSize = Math.min(splatArray.splatCount, partitionSize);
            const patitionCount = Math.ceil(splatArray.splatCount / partitionSize);
            let currentStartSplat = 0;
            for (let i = 0; i < patitionCount; i ++) {
                let startSplat = currentStartSplat;
                sectionFilters.push((splatIndex) => {
                    return splatIndex >= startSplat && splatIndex < startSplat + partitionSize;
                });
                groupingParameters.push({
                    'blocksSize': blockSize,
                    'bucketSize': bucketSize,
                });
                currentStartSplat += partitionSize;
            }
            return {
                'sectionCount': sectionFilters.length,
                sectionFilters,
                groupingParameters
            };
        };
        return new SplatPartitioner(undefined, undefined, undefined, partitionGenerator);
    }
}

/**
 * SplatBufferGenerator
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class SplatBufferGenerator {

    constructor(splatPartitioner, alphaRemovalThreshold, compressionLevel, sectionSize, sceneCenter, blockSize, bucketSize) {
        this.splatPartitioner = splatPartitioner;
        this.alphaRemovalThreshold = alphaRemovalThreshold;
        this.compressionLevel = compressionLevel;
        this.sectionSize = sectionSize;
        this.sceneCenter = sceneCenter ? new THREE.Vector3().copy(sceneCenter) : undefined;
        this.blockSize = blockSize;
        this.bucketSize = bucketSize;
    }

    generateFromUncompressedSplatArray(splatArray) {
        const partitionResults = this.splatPartitioner.partitionUncompressedSplatArray(splatArray);
        return SplatBuffer.generateFromUncompressedSplatArrays(partitionResults.splatArrays,
                                                               this.alphaRemovalThreshold, this.compressionLevel,
                                                               this.sceneCenter, this.blockSize, this.bucketSize,
                                                               partitionResults.parameters);
    }

    static getStandardGenerator(alphaRemovalThreshold = 1, compressionLevel = 1, sectionSize = 0, sceneCenter = new THREE.Vector3(),
                                blockSize = SplatBuffer.BucketBlockSize, bucketSize = SplatBuffer.BucketSize) {
        const splatPartitioner = SplatPartitioner.getStandardPartitioner(sectionSize, sceneCenter, blockSize, bucketSize);
        return new SplatBufferGenerator(splatPartitioner, alphaRemovalThreshold, compressionLevel,
                                        sectionSize, sceneCenter, blockSize, bucketSize);
    }
}

/**
 * PlyParserUtils and related constants
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar - only supports INRIAV1 format.
 */

// Ply format types (simplified - FLAME uses INRIAV1)
const PlyFormat = {
    'INRIAV1': 0
};

// Field size IDs
const FieldSizeIdDouble = 0;
const FieldSizeIdInt = 1;
const FieldSizeIdUInt = 2;
const FieldSizeIdFloat = 3;
const FieldSizeIdShort = 4;
const FieldSizeIdUShort = 5;
const FieldSizeIdUChar = 6;

const FieldSizeStringMap = {
    'double': FieldSizeIdDouble,
    'int': FieldSizeIdInt,
    'uint': FieldSizeIdUInt,
    'float': FieldSizeIdFloat,
    'short': FieldSizeIdShort,
    'ushort': FieldSizeIdUShort,
    'uchar': FieldSizeIdUChar,
};

const FieldSize = {
    [FieldSizeIdDouble]: 8,
    [FieldSizeIdInt]: 4,
    [FieldSizeIdUInt]: 4,
    [FieldSizeIdFloat]: 4,
    [FieldSizeIdShort]: 2,
    [FieldSizeIdUShort]: 2,
    [FieldSizeIdUChar]: 1,
};

class PlyParserUtils {

    static HeaderEndToken = 'end_header';

    constructor() {
    }

    decodeSectionHeader(headerLines, fieldNameIdMap, headerStartLine = 0) {

        const extractedLines = [];

        let processingSection = false;
        let headerEndLine = -1;
        let vertexCount = 0;
        let endOfHeader = false;
        let sectionName = null;

        const fieldIds = [];
        const fieldTypes = [];
        const allFieldNames = [];
        const fieldTypesByName = {};

        for (let i = headerStartLine; i < headerLines.length; i++) {
            const line = headerLines[i].trim();
            if (line.startsWith('element')) {
                if (processingSection) {
                    headerEndLine--;
                    break;
                } else {
                    processingSection = true;
                    headerStartLine = i;
                    headerEndLine = i;
                    const lineComponents = line.split(' ');
                    let validComponents = 0;
                    for (let lineComponent of lineComponents) {
                        const trimmedComponent = lineComponent.trim();
                        if (trimmedComponent.length > 0) {
                            validComponents++;
                            if (validComponents === 2) {
                                sectionName = trimmedComponent;
                            } else if (validComponents === 3) {
                                vertexCount = parseInt(trimmedComponent);
                            }
                        }
                    }
                }
            } else if (line.startsWith('property')) {
                const fieldMatch = line.match(/(\w+)\s+(\w+)\s+(\w+)/);
                if (fieldMatch) {
                    const fieldTypeStr = fieldMatch[2];
                    const fieldName = fieldMatch[3];
                    allFieldNames.push(fieldName);
                    const fieldId = fieldNameIdMap[fieldName];
                    fieldTypesByName[fieldName] = fieldTypeStr;
                    const fieldType = FieldSizeStringMap[fieldTypeStr];
                    if (fieldId !== undefined) {
                        fieldIds.push(fieldId);
                        fieldTypes[fieldId] = fieldType;
                    }
                }
            }
            if (line === PlyParserUtils.HeaderEndToken) {
                endOfHeader = true;
                break;
            }
            if (processingSection) {
                extractedLines.push(line);
                headerEndLine++;
            }
        }

        const fieldOffsets = [];
        let bytesPerVertex = 0;
        for (let fieldName of allFieldNames) {
            const fieldType = fieldTypesByName[fieldName];
            if (Object.hasOwn(fieldTypesByName, fieldName)) {
                const fieldId = fieldNameIdMap[fieldName];
                if (fieldId !== undefined) {
                    fieldOffsets[fieldId] = bytesPerVertex;
                }
            }
            bytesPerVertex += FieldSize[FieldSizeStringMap[fieldType]];
        }

        const sphericalHarmonics = this.decodeSphericalHarmonicsFromSectionHeader(allFieldNames, fieldNameIdMap);

        return {
            'headerLines': extractedLines,
            'headerStartLine': headerStartLine,
            'headerEndLine': headerEndLine,
            'fieldTypes': fieldTypes,
            'fieldIds': fieldIds,
            'fieldOffsets': fieldOffsets,
            'bytesPerVertex': bytesPerVertex,
            'vertexCount': vertexCount,
            'dataSizeBytes': bytesPerVertex * vertexCount,
            'endOfHeader': endOfHeader,
            'sectionName': sectionName,
            'sphericalHarmonicsDegree': sphericalHarmonics.degree,
            'sphericalHarmonicsCoefficientsPerChannel': sphericalHarmonics.coefficientsPerChannel,
            'sphericalHarmonicsDegree1Fields': sphericalHarmonics.degree1Fields,
            'sphericalHarmonicsDegree2Fields': sphericalHarmonics.degree2Fields
        };
    }

    decodeSphericalHarmonicsFromSectionHeader(fieldNames, fieldNameIdMap) {
        let sphericalHarmonicsFieldCount = 0;
        let coefficientsPerChannel = 0;
        for (let fieldName of fieldNames) {
            if (fieldName.startsWith('f_rest')) sphericalHarmonicsFieldCount++;
        }
        coefficientsPerChannel = sphericalHarmonicsFieldCount / 3;
        let degree = 0;
        if (coefficientsPerChannel >= 3) degree = 1;
        if (coefficientsPerChannel >= 8) degree = 2;

        let degree1Fields = [];
        let degree2Fields = [];

        for (let rgb = 0; rgb < 3; rgb++) {
            if (degree >= 1) {
                for (let i = 0; i < 3; i++) {
                    degree1Fields.push(fieldNameIdMap['f_rest_' + (i + coefficientsPerChannel * rgb)]);
                }
            }
            if (degree >= 2) {
                for (let i = 0; i < 5; i++) {
                    degree2Fields.push(fieldNameIdMap['f_rest_' + (i + coefficientsPerChannel * rgb + 3)]);
                }
            }
        }

        return {
            'degree': degree,
            'coefficientsPerChannel': coefficientsPerChannel,
            'degree1Fields': degree1Fields,
            'degree2Fields': degree2Fields
        };
    }

    static getHeaderSectionNames(headerLines) {
        const sectionNames = [];
        for (let headerLine of headerLines) {
            if (headerLine.startsWith('element')) {
                const lineComponents = headerLine.split(' ');
                let validComponents = 0;
                for (let lineComponent of lineComponents) {
                    const trimmedComponent = lineComponent.trim();
                    if (trimmedComponent.length > 0) {
                        validComponents++;
                        if (validComponents === 2) {
                            sectionNames.push(trimmedComponent);
                        }
                    }
                }
            }
        }
        return sectionNames;
    }

    static checkTextForEndHeader(endHeaderTestText) {
        if (endHeaderTestText.includes(PlyParserUtils.HeaderEndToken)) {
            return true;
        }
        return false;
    }

    static checkBufferForEndHeader(buffer, searchOfset, chunkSize, decoder) {
        const endHeaderTestChunk = new Uint8Array(buffer, Math.max(0, searchOfset - chunkSize), chunkSize);
        const endHeaderTestText = decoder.decode(endHeaderTestChunk);
        return PlyParserUtils.checkTextForEndHeader(endHeaderTestText);
    }

    static extractHeaderFromBufferToText(plyBuffer) {
        const decoder = new TextDecoder();
        let headerOffset = 0;
        let headerText = '';
        const readChunkSize = 100;

        while (true) {
            if (headerOffset + readChunkSize >= plyBuffer.byteLength) {
                throw new Error('End of file reached while searching for end of header');
            }
            const headerChunk = new Uint8Array(plyBuffer, headerOffset, readChunkSize);
            headerText += decoder.decode(headerChunk);
            headerOffset += readChunkSize;

            if (PlyParserUtils.checkBufferForEndHeader(plyBuffer, headerOffset, readChunkSize * 2, decoder)) {
                break;
            }
        }

        return headerText;
    }

    readHeaderFromBuffer(plyBuffer) {
        const decoder = new TextDecoder();
        let headerOffset = 0;
        let headerText = '';
        const readChunkSize = 100;

        while (true) {
            if (headerOffset + readChunkSize >= plyBuffer.byteLength) {
                throw new Error('End of file reached while searching for end of header');
            }
            const headerChunk = new Uint8Array(plyBuffer, headerOffset, readChunkSize);
            headerText += decoder.decode(headerChunk);
            headerOffset += readChunkSize;

            if (PlyParserUtils.checkBufferForEndHeader(plyBuffer, headerOffset, readChunkSize * 2, decoder)) {
                break;
            }
        }

        return headerText;
    }

    static convertHeaderTextToLines(headerText) {
        const headerLines = headerText.split('\n');
        const prunedLines = [];
        for (let i = 0; i < headerLines.length; i++) {
            const line = headerLines[i].trim();
            prunedLines.push(line);
            if (line === PlyParserUtils.HeaderEndToken) {
                break;
            }
        }
        return prunedLines;
    }

    static determineHeaderFormatFromHeaderText(_headerText) {
        // Simplified - FLAME avatars always use INRIAV1 format
        return PlyFormat.INRIAV1;
    }

    static determineHeaderFormatFromPlyBuffer(plyBuffer) {
        const headertText = PlyParserUtils.extractHeaderFromBufferToText(plyBuffer);
        return PlyParserUtils.determineHeaderFormatFromHeaderText(headertText);
    }

    static readVertex(vertexData, header, row, dataOffset, fieldsToRead, rawVertex, normalize = true) {
        const offset = row * header.bytesPerVertex + dataOffset;
        const fieldOffsets = header.fieldOffsets;
        const fieldTypes = header.fieldTypes;
        for (let fieldId of fieldsToRead) {
            const fieldType = fieldTypes[fieldId];
            if (fieldType === FieldSizeIdFloat) {
                rawVertex[fieldId] = vertexData.getFloat32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdShort) {
                rawVertex[fieldId] = vertexData.getInt16(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUShort) {
                rawVertex[fieldId] = vertexData.getUint16(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdInt) {
                rawVertex[fieldId] = vertexData.getInt32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUInt) {
                rawVertex[fieldId] = vertexData.getUint32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUChar) {
                if (normalize) {
                    rawVertex[fieldId] = vertexData.getUint8(offset + fieldOffsets[fieldId]) / 255.0;
                } else {
                    rawVertex[fieldId] = vertexData.getUint8(offset + fieldOffsets[fieldId]);
                }
            }
        }
    }
}

/**
 * INRIAV1PlyParser
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const BaseFieldNamesToRead = ['scale_0', 'scale_1', 'scale_2', 'rot_0', 'rot_1', 'rot_2', 'rot_3', 'x', 'y', 'z',
                              'f_dc_0', 'f_dc_1', 'f_dc_2', 'opacity', 'red', 'green', 'blue', 'f_rest_0'];

const BaseFieldsToReadIndexes = BaseFieldNamesToRead.map((e, i) => i);

const [
        SCALE_0, SCALE_1, SCALE_2, ROT_0, ROT_1, ROT_2, ROT_3, X, Y, Z, F_DC_0, F_DC_1, F_DC_2, OPACITY, RED, GREEN, BLUE, F_REST_0
      ] = BaseFieldsToReadIndexes;

class INRIAV1PlyParser {

    constructor() {
        this.plyParserutils = new PlyParserUtils();
    }

    decodeHeaderLines(headerLines) {

        let shLineCount = 0;
        headerLines.forEach((line) => {
            if (line.includes('f_rest_')) shLineCount++;
        });

        let shFieldsToReadCount = 0;
        if (shLineCount >= 45) {
            shFieldsToReadCount = 45;
        } else if (shLineCount >= 24) {
            shFieldsToReadCount = 24;
        } else if (shLineCount >= 9) {
            shFieldsToReadCount = 9;
        }

        const shFieldIndexesToMap = Array.from(Array(Math.max(shFieldsToReadCount - 1, 0)));
        let shRemainingFieldNamesToRead = shFieldIndexesToMap.map((element, index) => `f_rest_${index + 1}`);

        const fieldNamesToRead = [...BaseFieldNamesToRead, ...shRemainingFieldNamesToRead];
        const fieldsToReadIndexes = fieldNamesToRead.map((e, i) => i);

        const fieldNameIdMap = fieldsToReadIndexes.reduce((acc, element) => {
            acc[fieldNamesToRead[element]] = element;
            return acc;
        }, {});
        const header = this.plyParserutils.decodeSectionHeader(headerLines, fieldNameIdMap, 0);
        header.splatCount = header.vertexCount;
        header.bytesPerSplat = header.bytesPerVertex;
        header.fieldsToReadIndexes = fieldsToReadIndexes;
        return header;
    }

    decodeHeaderText(headerText) {
        const headerLines = PlyParserUtils.convertHeaderTextToLines(headerText);
        const header = this.decodeHeaderLines(headerLines);
        header.headerText = headerText;
        header.headerSizeBytes = headerText.indexOf(PlyParserUtils.HeaderEndToken) + PlyParserUtils.HeaderEndToken.length + 1;
        return header;
    }

    decodeHeaderFromBuffer(plyBuffer) {
        const headerText = this.plyParserutils.readHeaderFromBuffer(plyBuffer);
        return this.decodeHeaderText(headerText);
    }

    findSplatData(plyBuffer, header) {
        return new DataView(plyBuffer, header.headerSizeBytes);
    }

    parseToUncompressedSplatBufferSection(header, fromSplat, toSplat, splatData, splatDataOffset,
                                          toBuffer, toOffset, outSphericalHarmonicsDegree = 0) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
        const outBytesPerSplat = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree].BytesPerSplat;

        for (let i = fromSplat; i <= toSplat; i++) {
            const parsedSplat = INRIAV1PlyParser.parseToUncompressedSplat(splatData, i, header,
                                                                          splatDataOffset, outSphericalHarmonicsDegree);
            const outBase = i * outBytesPerSplat + toOffset;
            SplatBuffer.writeSplatDataToSectionBuffer(parsedSplat, toBuffer, outBase, 0, outSphericalHarmonicsDegree);
        }
    }

    parseToUncompressedSplatArraySection(header, fromSplat, toSplat, splatData, splatDataOffset,
                                         splatArray, outSphericalHarmonicsDegree = 0) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
        for (let i = fromSplat; i <= toSplat; i++) {
            const parsedSplat = INRIAV1PlyParser.parseToUncompressedSplat(splatData, i, header,
                                                                          splatDataOffset, outSphericalHarmonicsDegree);
            splatArray.addSplat(parsedSplat);
        }
    }

    decodeSectionSplatData(sectionSplatData, splatCount, sectionHeader, outSphericalHarmonicsDegree) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, sectionHeader.sphericalHarmonicsDegree);
        const splatArray = new UncompressedSplatArray(outSphericalHarmonicsDegree);
        for (let row = 0; row < splatCount; row++) {
            const newSplat = INRIAV1PlyParser.parseToUncompressedSplat(sectionSplatData, row, sectionHeader,
                                                                       0, outSphericalHarmonicsDegree);
            splatArray.addSplat(newSplat);
        }
        return splatArray;
    }

    static parseToUncompressedSplat = function() {

        let rawSplat = [];
        const tempRotation = new THREE.Quaternion();

        const OFFSET_X = UncompressedSplatArray.OFFSET.X;
        const OFFSET_Y = UncompressedSplatArray.OFFSET.Y;
        const OFFSET_Z = UncompressedSplatArray.OFFSET.Z;

        const OFFSET_SCALE0 = UncompressedSplatArray.OFFSET.SCALE0;
        const OFFSET_SCALE1 = UncompressedSplatArray.OFFSET.SCALE1;
        const OFFSET_SCALE2 = UncompressedSplatArray.OFFSET.SCALE2;

        const OFFSET_ROTATION0 = UncompressedSplatArray.OFFSET.ROTATION0;
        const OFFSET_ROTATION1 = UncompressedSplatArray.OFFSET.ROTATION1;
        const OFFSET_ROTATION2 = UncompressedSplatArray.OFFSET.ROTATION2;
        const OFFSET_ROTATION3 = UncompressedSplatArray.OFFSET.ROTATION3;

        const OFFSET_FDC0 = UncompressedSplatArray.OFFSET.FDC0;
        const OFFSET_FDC1 = UncompressedSplatArray.OFFSET.FDC1;
        const OFFSET_FDC2 = UncompressedSplatArray.OFFSET.FDC2;
        const OFFSET_OPACITY = UncompressedSplatArray.OFFSET.OPACITY;

        const OFFSET_FRC = [];

        for (let i = 0; i < 45; i++) {
            OFFSET_FRC[i] = UncompressedSplatArray.OFFSET.FRC0 + i;
        }

        return function(splatData, row, header, splatDataOffset = 0, outSphericalHarmonicsDegree = 0) {
            outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
            INRIAV1PlyParser.readSplat(splatData, header, row, splatDataOffset, rawSplat);
            const newSplat = UncompressedSplatArray.createSplat(outSphericalHarmonicsDegree);
            if (rawSplat[SCALE_0] !== undefined) {
                newSplat[OFFSET_SCALE0] = Math.exp(rawSplat[SCALE_0]);
                newSplat[OFFSET_SCALE1] = Math.exp(rawSplat[SCALE_1]);
                newSplat[OFFSET_SCALE2] = Math.exp(rawSplat[SCALE_2]);
            } else {
                newSplat[OFFSET_SCALE0] = 0.01;
                newSplat[OFFSET_SCALE1] = 0.01;
                newSplat[OFFSET_SCALE2] = 0.01;
            }

            if (rawSplat[F_DC_0] !== undefined) {
                newSplat[OFFSET_FDC0] = rawSplat[F_DC_0] * 255;
                newSplat[OFFSET_FDC1] = rawSplat[F_DC_1] * 255;
                newSplat[OFFSET_FDC2] = rawSplat[F_DC_2] * 255;
            } else if (rawSplat[RED] !== undefined) {
                newSplat[OFFSET_FDC0] = rawSplat[RED] * 255;
                newSplat[OFFSET_FDC1] = rawSplat[GREEN] * 255;
                newSplat[OFFSET_FDC2] = rawSplat[BLUE] * 255;
            } else {
                newSplat[OFFSET_FDC0] = 0;
                newSplat[OFFSET_FDC1] = 0;
                newSplat[OFFSET_FDC2] = 0;
            }

            if (rawSplat[OPACITY] !== undefined) {
                newSplat[OFFSET_OPACITY] = (1 / (1 + Math.exp(-rawSplat[OPACITY]))) * 255;
            }

            newSplat[OFFSET_FDC0] = clamp(Math.floor(newSplat[OFFSET_FDC0]), 0, 255);
            newSplat[OFFSET_FDC1] = clamp(Math.floor(newSplat[OFFSET_FDC1]), 0, 255);
            newSplat[OFFSET_FDC2] = clamp(Math.floor(newSplat[OFFSET_FDC2]), 0, 255);
            newSplat[OFFSET_OPACITY] = clamp(Math.floor(newSplat[OFFSET_OPACITY]), 0, 255);

            if (outSphericalHarmonicsDegree >= 1) {
                if (rawSplat[F_REST_0] !== undefined) {
                    for (let i = 0; i < 9; i++) {
                        newSplat[OFFSET_FRC[i]] = rawSplat[header.sphericalHarmonicsDegree1Fields[i]];
                    }
                    if (outSphericalHarmonicsDegree >= 2) {
                        for (let i = 0; i < 15; i++) {
                            newSplat[OFFSET_FRC[9 + i]] = rawSplat[header.sphericalHarmonicsDegree2Fields[i]];
                        }
                    }
                }
            }

            tempRotation.set(rawSplat[ROT_0], rawSplat[ROT_1], rawSplat[ROT_2], rawSplat[ROT_3]);
            tempRotation.normalize();

            newSplat[OFFSET_ROTATION0] = tempRotation.x;
            newSplat[OFFSET_ROTATION1] = tempRotation.y;
            newSplat[OFFSET_ROTATION2] = tempRotation.z;
            newSplat[OFFSET_ROTATION3] = tempRotation.w;

            newSplat[OFFSET_X] = rawSplat[X];
            newSplat[OFFSET_Y] = rawSplat[Y];
            newSplat[OFFSET_Z] = rawSplat[Z];

            return newSplat;
        };

    }();

    static readSplat(splatData, header, row, dataOffset, rawSplat) {
        return PlyParserUtils.readVertex(splatData, header, row, dataOffset, header.fieldsToReadIndexes, rawSplat, true);
    }

    parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree = 0) {
        const header = this.decodeHeaderFromBuffer(plyBuffer);
        const splatCount = header.splatCount;
        const splatData = this.findSplatData(plyBuffer, header);
        const splatArray = this.decodeSectionSplatData(splatData, splatCount, header, outSphericalHarmonicsDegree);
        return splatArray;
    }
}

/**
 * PlyParser
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar - only supports INRIAV1 PLY format.
 */


class PlyParser {

    static parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree = 0) {
        // FLAME avatars use INRIAV1 PLY format
        return new INRIAV1PlyParser().parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree);
    }

}

/**
 * PlyLoader - Loads and parses PLY format Gaussian Splat files
 *
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 *
 * Simplified for FLAME avatar - only supports INRIAV1 PLY format.
 * Provides both progressive streaming and file-based loading.
 */


const logger$3 = getLogger('PlyLoader');

/**
 * Store data chunks into a single ArrayBuffer
 *
 * Combines multiple downloaded chunks into a contiguous buffer for parsing.
 * Reallocates buffer if needed to fit all chunks.
 *
 * @private
 * @param {Array<{data: Uint8Array, sizeBytes: number}>} chunks - Array of data chunks
 * @param {ArrayBuffer} [buffer] - Existing buffer to reuse (will reallocate if too small)
 * @returns {ArrayBuffer} Buffer containing all chunk data
 */
function storeChunksInBuffer(chunks, buffer) {
    let inBytes = 0;
    for (let chunk of chunks) {
        inBytes += chunk.sizeBytes;
    }

    // Reallocate if buffer doesn't exist or is too small
    if (!buffer || buffer.byteLength < inBytes) {
        buffer = new ArrayBuffer(inBytes);
    }

    // Copy all chunks into buffer sequentially
    let offset = 0;
    for (let chunk of chunks) {
        new Uint8Array(buffer, offset, chunk.sizeBytes).set(chunk.data);
        offset += chunk.sizeBytes;
    }

    return buffer;
}

/**
 * Finalize splat data into a SplatBuffer
 *
 * Converts UncompressedSplatArray into final optimized SplatBuffer format.
 * Applies compression and optimization if requested.
 *
 * @private
 * @param {UncompressedSplatArray} splatData - Parsed splat data
 * @param {boolean} optimizeSplatData - Whether to optimize/compress the data
 * @param {number} minimumAlpha - Minimum alpha threshold for splat culling
 * @param {number} compressionLevel - Compression level (0-2)
 * @param {number} sectionSize - Section size for partitioning
 * @param {Vector3} sceneCenter - Center point of the scene
 * @param {number} blockSize - Block size for spatial partitioning
 * @param {number} bucketSize - Bucket size for sorting
 * @returns {SplatBuffer} Finalized splat buffer ready for rendering
 * @throws {ParseError} If splat data is invalid or finalization fails
 */
function finalizeSplatData(splatData, optimizeSplatData, minimumAlpha, compressionLevel, sectionSize, sceneCenter, blockSize, bucketSize) {
    try {
        if (optimizeSplatData) {
            const splatBufferGenerator = SplatBufferGenerator.getStandardGenerator(
                minimumAlpha,
                compressionLevel,
                sectionSize,
                sceneCenter,
                blockSize,
                bucketSize
            );
            return splatBufferGenerator.generateFromUncompressedSplatArray(splatData);
        } else {
            return SplatBuffer.generateFromUncompressedSplatArrays([splatData], minimumAlpha, 0, new THREE.Vector3());
        }
    } catch (error) {
        throw new ParseError$1(
            `Failed to finalize splat data: ${error.message}`,
            'splatData',
            error
        );
    }
}

/**
 * PlyLoader - Loads and parses PLY format Gaussian Splat files
 *
 * Supports both progressive streaming and complete file loading.
 * Optimized for INRIAV1 PLY format used in FLAME avatars.
 */
class PlyLoader {

    /**
     * Load PLY file from URL with progressive streaming support
     *
     * Downloads and parses PLY data progressively, enabling render during load.
     * Supports both direct-to-buffer and array-based loading modes.
     *
     * @static
     * @param {string} fileName - URL to the PLY file
     * @param {Function} [onProgress] - Progress callback (percent, percentLabel, status)
     * @param {boolean} [loadDirectoToSplatBuffer=false] - Load directly to SplatBuffer (faster but less flexible)
     * @param {Function} [onProgressiveLoadSectionProgress] - Callback for progressive section updates
     * @param {number} [minimumAlpha=1] - Minimum alpha threshold for splat culling
     * @param {number} [compressionLevel=0] - Compression level (0=none, 1=medium, 2=high)
     * @param {boolean} [optimizeSplatData=true] - Whether to optimize/compress splat data
     * @param {number} [outSphericalHarmonicsDegree=0] - Spherical harmonics degree (0-3)
     * @param {Object} [headers] - HTTP headers for fetch request
     * @param {number} [sectionSize] - Section size for partitioning
     * @param {Vector3} [sceneCenter] - Center point of the scene
     * @param {number} [blockSize] - Block size for spatial partitioning
     * @param {number} [bucketSize] - Bucket size for sorting
     * @returns {Promise<SplatBuffer>} Loaded and parsed splat buffer
     * @throws {ValidationError} If parameters are invalid
     * @throws {NetworkError} If file download fails
     * @throws {ParseError} If PLY parsing fails
     * @throws {AssetLoadError} If asset loading fails
     */
    static loadFromURL(fileName, onProgress, loadDirectoToSplatBuffer, onProgressiveLoadSectionProgress,
                       minimumAlpha, compressionLevel, optimizeSplatData = true, outSphericalHarmonicsDegree = 0,
                       headers, sectionSize, sceneCenter, blockSize, bucketSize) {

        // Validate required parameters
        try {
            validateUrl(fileName);
        } catch (error) {
            logger$3.error('Invalid URL provided to loadFromURL', { fileName, error });
            throw error;
        }

        // Validate optional callbacks
        if (onProgress) {
            validateCallback(onProgress, 'onProgress', false);
        }
        if (onProgressiveLoadSectionProgress) {
            validateCallback(onProgressiveLoadSectionProgress, 'onProgressiveLoadSectionProgress', false);
        }

        logger$3.info('Loading PLY from URL', { fileName, optimizeSplatData, outSphericalHarmonicsDegree });

        let internalLoadType = loadDirectoToSplatBuffer ? InternalLoadType.DirectToSplatBuffer : InternalLoadType.DirectToSplatArray;
        if (optimizeSplatData) internalLoadType = InternalLoadType.DirectToSplatArray;

        const directLoadSectionSizeBytes = Constants$1.ProgressiveLoadSectionSize;
        const splatDataOffsetBytes = SplatBuffer.HeaderSizeBytes + SplatBuffer.SectionHeaderSizeBytes;
        const sectionCount = 1;

        let directLoadBufferIn;
        let directLoadBufferOut;
        let directLoadSplatBuffer;
        let maxSplatCount = 0;
        let splatCount = 0;

        let headerLoaded = false;
        let readyToLoadSplatData = false;

        const loadPromise = nativePromiseWithExtractedComponents();

        let numBytesStreamed = 0;
        let numBytesParsed = 0;
        let numBytesDownloaded = 0;
        let headerText = '';
        let header = null;
        let chunks = [];

        let standardLoadUncompressedSplatArray;

        const textDecoder = new TextDecoder();
        const inriaV1PlyParser = new INRIAV1PlyParser();

        const localOnProgress = (percent, percentLabel, chunkData) => {
            const loadComplete = percent >= 100;

            if (chunkData) {
                chunks.push({
                    'data': chunkData,
                    'sizeBytes': chunkData.byteLength,
                    'startBytes': numBytesDownloaded,
                    'endBytes': numBytesDownloaded + chunkData.byteLength
                });
                numBytesDownloaded += chunkData.byteLength;
            }

            if (internalLoadType === InternalLoadType.DownloadBeforeProcessing) {
                if (loadComplete) {
                    loadPromise.resolve(chunks);
                }
            } else {
                if (!headerLoaded) {
                    headerText += textDecoder.decode(chunkData);
                    if (PlyParserUtils.checkTextForEndHeader(headerText)) {
                        // FLAME avatars use INRIAV1 format - parse header
                        try {
                            header = inriaV1PlyParser.decodeHeaderText(headerText);
                            maxSplatCount = header.splatCount;
                            readyToLoadSplatData = true;

                            logger$3.debug('PLY header decoded', {
                                splatCount: maxSplatCount,
                                sphericalHarmonicsDegree: header.sphericalHarmonicsDegree
                            });

                            outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
                        } catch (error) {
                            const parseError = new ParseError$1(
                                `Failed to decode PLY header: ${error.message}`,
                                'headerText',
                                error
                            );
                            logger$3.error('Header parsing failed', parseError);
                            loadPromise.reject(parseError);
                            return;
                        }

                        const shDescriptor = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree];
                        const splatBufferSizeBytes = splatDataOffsetBytes + shDescriptor.BytesPerSplat * maxSplatCount;

                        if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                            directLoadBufferOut = new ArrayBuffer(splatBufferSizeBytes);
                            SplatBuffer.writeHeaderToBuffer({
                                versionMajor: SplatBuffer.CurrentMajorVersion,
                                versionMinor: SplatBuffer.CurrentMinorVersion,
                                maxSectionCount: sectionCount,
                                sectionCount: sectionCount,
                                maxSplatCount: maxSplatCount,
                                splatCount: splatCount,
                                compressionLevel: 0,
                                sceneCenter: new THREE.Vector3()
                            }, directLoadBufferOut);
                        } else {
                            standardLoadUncompressedSplatArray = new UncompressedSplatArray(outSphericalHarmonicsDegree);
                        }

                        numBytesStreamed = header.headerSizeBytes;
                        numBytesParsed = header.headerSizeBytes;
                        headerLoaded = true;
                    }
                }

                if (headerLoaded && readyToLoadSplatData) {

                    if (chunks.length > 0) {

                        directLoadBufferIn = storeChunksInBuffer(chunks, directLoadBufferIn);

                        const bytesLoadedSinceLastStreamedSection = numBytesDownloaded - numBytesStreamed;
                        if (bytesLoadedSinceLastStreamedSection > directLoadSectionSizeBytes || loadComplete) {
                            const numBytesToProcess = numBytesDownloaded - numBytesParsed;
                            const addedSplatCount = Math.floor(numBytesToProcess / header.bytesPerSplat);
                            const numBytesToParse = addedSplatCount * header.bytesPerSplat;
                            const numBytesLeftOver = numBytesToProcess - numBytesToParse;
                            const newSplatCount = splatCount + addedSplatCount;
                            const parsedDataViewOffset = numBytesParsed - chunks[0].startBytes;
                            const dataToParse = new DataView(directLoadBufferIn, parsedDataViewOffset, numBytesToParse);

                            const shDescriptor = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree];
                            const outOffset = splatCount * shDescriptor.BytesPerSplat + splatDataOffsetBytes;

                            // Parse splat data with error handling
                            try {
                                if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                                    inriaV1PlyParser.parseToUncompressedSplatBufferSection(
                                        header, 0, addedSplatCount - 1, dataToParse,
                                        0, directLoadBufferOut, outOffset,
                                        outSphericalHarmonicsDegree
                                    );
                                } else {
                                    inriaV1PlyParser.parseToUncompressedSplatArraySection(
                                        header, 0, addedSplatCount - 1, dataToParse,
                                        0, standardLoadUncompressedSplatArray,
                                        outSphericalHarmonicsDegree
                                    );
                                }
                            } catch (error) {
                                const parseError = new ParseError$1(
                                    `Failed to parse splat data section: ${error.message}`,
                                    'splatData',
                                    error
                                );
                                logger$3.error('Splat data parsing failed', { splatCount, addedSplatCount, error });
                                loadPromise.reject(parseError);
                                return;
                            }

                            splatCount = newSplatCount;

                            if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                                if (!directLoadSplatBuffer) {
                                    SplatBuffer.writeSectionHeaderToBuffer({
                                        maxSplatCount: maxSplatCount,
                                        splatCount: splatCount,
                                        bucketSize: 0,
                                        bucketCount: 0,
                                        bucketBlockSize: 0,
                                        compressionScaleRange: 0,
                                        storageSizeBytes: 0,
                                        fullBucketCount: 0,
                                        partiallyFilledBucketCount: 0,
                                        sphericalHarmonicsDegree: outSphericalHarmonicsDegree
                                    }, 0, directLoadBufferOut, SplatBuffer.HeaderSizeBytes);
                                    directLoadSplatBuffer = new SplatBuffer(directLoadBufferOut, false);
                                }
                                directLoadSplatBuffer.updateLoadedCounts(1, splatCount);
                                if (onProgressiveLoadSectionProgress) {
                                    onProgressiveLoadSectionProgress(directLoadSplatBuffer, loadComplete);
                                }
                            }

                            numBytesStreamed += directLoadSectionSizeBytes;
                            numBytesParsed += numBytesToParse;

                            if (numBytesLeftOver === 0) {
                                chunks = [];
                            } else {
                                let keepChunks = [];
                                let keepSize = 0;
                                for (let i = chunks.length - 1; i >= 0; i--) {
                                    const chunk = chunks[i];
                                    keepSize += chunk.sizeBytes;
                                    keepChunks.unshift(chunk);
                                    if (keepSize >= numBytesLeftOver) break;
                                }
                                chunks = keepChunks;
                            }
                        }
                    }

                    if (loadComplete) {
                        if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                            loadPromise.resolve(directLoadSplatBuffer);
                        } else {
                            loadPromise.resolve(standardLoadUncompressedSplatArray);
                        }
                    }
                }
            }

            // Progress callback with error isolation
            if (onProgress) {
                try {
                    onProgress(percent, percentLabel, LoaderStatus.Downloading);
                } catch (error) {
                    logger$3.warn('Error in onProgress callback', error);
                }
            }
        };

        // Initial progress callback
        if (onProgress) {
            try {
                onProgress(0, '0%', LoaderStatus.Downloading);
            } catch (error) {
                logger$3.warn('Error in onProgress callback', error);
            }
        }

        // Fetch and process the PLY file
        return fetchWithProgress(fileName, localOnProgress, false, headers)
            .then(() => {
                if (onProgress) {
                    try {
                        onProgress(0, '0%', LoaderStatus.Processing);
                    } catch (error) {
                        logger$3.warn('Error in onProgress callback', error);
                    }
                }
                return loadPromise.promise;
            })
            .then((splatData) => {
                if (onProgress) {
                    try {
                        onProgress(100, '100%', LoaderStatus.Done);
                    } catch (error) {
                        logger$3.warn('Error in onProgress callback', error);
                    }
                }

                logger$3.debug('PLY data loaded successfully', {
                    internalLoadType,
                    splatCount: splatData?.splatCount || 'unknown'
                });

                // Process based on load type
                if (internalLoadType === InternalLoadType.DownloadBeforeProcessing) {
                    const chunkDatas = chunks.map((chunk) => chunk.data);
                    return new Blob(chunkDatas).arrayBuffer()
                        .then((plyFileData) => {
                            return PlyLoader.loadFromFileData(
                                plyFileData, minimumAlpha, compressionLevel, optimizeSplatData,
                                outSphericalHarmonicsDegree, sectionSize, sceneCenter, blockSize, bucketSize
                            );
                        })
                        .catch((error) => {
                            throw new AssetLoadError(
                                `Failed to process downloaded PLY data: ${error.message}`,
                                fileName,
                                error
                            );
                        });
                } else if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                    return splatData;
                } else {
                    return delayedExecute(() => {
                        return finalizeSplatData(
                            splatData, optimizeSplatData, minimumAlpha, compressionLevel,
                            sectionSize, sceneCenter, blockSize, bucketSize
                        );
                    });
                }
            })
            .catch((error) => {
                // Re-throw custom errors as-is
                if (error instanceof ValidationError ||
                    error instanceof NetworkError ||
                    error instanceof ParseError$1 ||
                    error instanceof AssetLoadError) {
                    logger$3.error('PLY loading failed', { fileName, errorCode: error.code });
                    throw error;
                }

                // Wrap unexpected errors
                logger$3.error('Unexpected error loading PLY', { fileName, error });
                throw new AssetLoadError(
                    `Unexpected error loading PLY file: ${error.message}`,
                    fileName,
                    error
                );
            });
    }

    /**
     * Load PLY file from raw ArrayBuffer data
     *
     * Parses PLY data that has already been downloaded. Useful for loading
     * from local files or when data is provided directly.
     *
     * @static
     * @param {ArrayBuffer} plyFileData - Raw PLY file data as ArrayBuffer
     * @param {number} [minimumAlpha=1] - Minimum alpha threshold for splat culling
     * @param {number} [compressionLevel=0] - Compression level (0=none, 1=medium, 2=high)
     * @param {boolean} [optimizeSplatData=true] - Whether to optimize/compress splat data
     * @param {number} [outSphericalHarmonicsDegree=0] - Spherical harmonics degree (0-3)
     * @param {number} [sectionSize] - Section size for partitioning
     * @param {Vector3} [sceneCenter] - Center point of the scene
     * @param {number} [blockSize] - Block size for spatial partitioning
     * @param {number} [bucketSize] - Bucket size for sorting
     * @returns {Promise<SplatBuffer>} Parsed and finalized splat buffer
     * @throws {ValidationError} If plyFileData is invalid
     * @throws {ParseError} If parsing fails
     */
    static loadFromFileData(plyFileData, minimumAlpha, compressionLevel, optimizeSplatData, outSphericalHarmonicsDegree = 0,
                            sectionSize, sceneCenter, blockSize, bucketSize) {
        // Validate input
        try {
            validateArrayBuffer(plyFileData, 'plyFileData');
        } catch (error) {
            logger$3.error('Invalid PLY file data', error);
            return Promise.reject(error);
        }

        logger$3.info('Loading PLY from file data', {
            sizeBytes: plyFileData.byteLength,
            optimizeSplatData,
            outSphericalHarmonicsDegree
        });

        return delayedExecute(() => {
            try {
                return PlyParser.parseToUncompressedSplatArray(plyFileData, outSphericalHarmonicsDegree);
            } catch (error) {
                throw new ParseError$1(
                    `Failed to parse PLY file data: ${error.message}`,
                    'plyFileData',
                    error
                );
            }
        })
        .then((splatArray) => {
            logger$3.debug('PLY parsed successfully', {
                splatCount: splatArray?.splatCount || 'unknown'
            });

            return finalizeSplatData(
                splatArray, optimizeSplatData, minimumAlpha, compressionLevel,
                sectionSize, sceneCenter, blockSize, bucketSize
            );
        })
        .catch((error) => {
            // Re-throw custom errors as-is
            if (error instanceof ValidationError || error instanceof ParseError$1) {
                logger$3.error('PLY file data loading failed', { errorCode: error.code });
                throw error;
            }

            // Wrap unexpected errors
            logger$3.error('Unexpected error loading PLY from file data', error);
            throw new ParseError$1(
                `Unexpected error parsing PLY data: ${error.message}`,
                'plyFileData',
                error
            );
        });
    }
}

/**
 * Ray
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


const VectorRight = new THREE__namespace.Vector3(1, 0, 0);
const VectorUp = new THREE__namespace.Vector3(0, 1, 0);
const VectorBackward = new THREE__namespace.Vector3(0, 0, 1);

class Ray {

    constructor(origin = new THREE__namespace.Vector3(), direction = new THREE__namespace.Vector3()) {
        this.origin = new THREE__namespace.Vector3();
        this.direction = new THREE__namespace.Vector3();
        this.setParameters(origin, direction);
    }

    setParameters(origin, direction) {
        this.origin.copy(origin);
        this.direction.copy(direction).normalize();
    }

    boxContainsPoint(box, point, epsilon) {
        return point.x < box.min.x - epsilon || point.x > box.max.x + epsilon ||
               point.y < box.min.y - epsilon || point.y > box.max.y + epsilon ||
               point.z < box.min.z - epsilon || point.z > box.max.z + epsilon ? false : true;
    }

    intersectBox = function() {

        const planeIntersectionPoint = new THREE__namespace.Vector3();
        const planeIntersectionPointArray = [];
        const originArray = [];
        const directionArray = [];

        return function(box, outHit) {

            originArray[0] = this.origin.x;
            originArray[1] = this.origin.y;
            originArray[2] = this.origin.z;
            directionArray[0] = this.direction.x;
            directionArray[1] = this.direction.y;
            directionArray[2] = this.direction.z;

            if (this.boxContainsPoint(box, this.origin, 0.0001)) {
                if (outHit) {
                    outHit.origin.copy(this.origin);
                    outHit.normal.set(0, 0, 0);
                    outHit.distance = -1;
                }
                return true;
            }

            for (let i = 0; i < 3; i++) {
                if (directionArray[i] == 0.0) continue;

                const hitNormal = i == 0 ? VectorRight : i == 1 ? VectorUp : VectorBackward;
                const extremeVec = directionArray[i] < 0 ? box.max : box.min;
                let multiplier = -Math.sign(directionArray[i]);
                planeIntersectionPointArray[0] = i == 0 ? extremeVec.x : i == 1 ? extremeVec.y : extremeVec.z;
                let toSide = planeIntersectionPointArray[0] - originArray[i];

                if (toSide * multiplier < 0) {
                    const idx1 = (i + 1) % 3;
                    const idx2 = (i + 2) % 3;
                    planeIntersectionPointArray[2] = directionArray[idx1] / directionArray[i] * toSide + originArray[idx1];
                    planeIntersectionPointArray[1] = directionArray[idx2] / directionArray[i] * toSide + originArray[idx2];
                    planeIntersectionPoint.set(planeIntersectionPointArray[i],
                                               planeIntersectionPointArray[idx2],
                                               planeIntersectionPointArray[idx1]);
                    if (this.boxContainsPoint(box, planeIntersectionPoint, 0.0001)) {
                        if (outHit) {
                            outHit.origin.copy(planeIntersectionPoint);
                            outHit.normal.copy(hitNormal).multiplyScalar(multiplier);
                            outHit.distance = planeIntersectionPoint.sub(this.origin).length();
                        }
                        return true;
                    }
                }
            }

            return false;
        };

    }();

    intersectSphere = function() {

        const toSphereCenterVec = new THREE__namespace.Vector3();

        return function(center, radius, outHit) {
            toSphereCenterVec.copy(center).sub(this.origin);
            const toClosestApproach = toSphereCenterVec.dot(this.direction);
            const toClosestApproachSq = toClosestApproach * toClosestApproach;
            const toSphereCenterSq = toSphereCenterVec.dot(toSphereCenterVec);
            const diffSq = toSphereCenterSq - toClosestApproachSq;
            const radiusSq = radius * radius;

            if (diffSq > radiusSq) return false;

            const thc = Math.sqrt(radiusSq - diffSq);
            const t0 = toClosestApproach - thc;
            const t1 = toClosestApproach + thc;

            if (t1 < 0) return false;
            let t = t0 < 0 ? t1 : t0;

            if (outHit) {
                outHit.origin.copy(this.origin).addScaledVector(this.direction, t);
                outHit.normal.copy(outHit.origin).sub(center).normalize();
                outHit.distance = t;
            }
            return true;
        };

    }();
}

/**
 * Hit
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class Hit {

    constructor() {
        this.origin = new THREE__namespace.Vector3();
        this.normal = new THREE__namespace.Vector3();
        this.distance = 0;
        this.splatIndex = 0;
    }

    set(origin, normal, distance, splatIndex) {
        this.origin.copy(origin);
        this.normal.copy(normal);
        this.distance = distance;
        this.splatIndex = splatIndex;
    }

    clone() {
        const hitClone = new Hit();
        hitClone.origin.copy(this.origin);
        hitClone.normal.copy(this.normal);
        hitClone.distance = this.distance;
        hitClone.splatIndex = this.splatIndex;
        return hitClone;
    }

}

/**
 * Raycaster
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class Raycaster {

    constructor(origin, direction, raycastAgainstTrueSplatEllipsoid = false) {
        this.ray = new Ray(origin, direction);
        this.raycastAgainstTrueSplatEllipsoid = raycastAgainstTrueSplatEllipsoid;
    }

    setFromCameraAndScreenPosition = function() {

        const ndcCoords = new THREE__namespace.Vector2();

        return function(camera, screenPosition, screenDimensions) {
            ndcCoords.x = screenPosition.x / screenDimensions.x * 2.0 - 1.0;
            ndcCoords.y = (screenDimensions.y - screenPosition.y) / screenDimensions.y * 2.0 - 1.0;
            if (camera.isPerspectiveCamera) {
                this.ray.origin.setFromMatrixPosition(camera.matrixWorld);
                this.ray.direction.set(ndcCoords.x, ndcCoords.y, 0.5 ).unproject(camera).sub(this.ray.origin).normalize();
                this.camera = camera;
            } else if (camera.isOrthographicCamera) {
                this.ray.origin.set(ndcCoords.x, ndcCoords.y,
                                   (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera);
                this.ray.direction.set(0, 0, -1).transformDirection(camera.matrixWorld);
                this.camera = camera;
            } else {
                throw new Error('Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type');
            }
        };

    }();

    intersectSplatMesh = function() {

        const toLocal = new THREE__namespace.Matrix4();
        const fromLocal = new THREE__namespace.Matrix4();
        const sceneTransform = new THREE__namespace.Matrix4();
        const localRay = new Ray();
        const tempPoint = new THREE__namespace.Vector3();

        return function(splatMesh, outHits = []) {
            const splatTree = splatMesh.getSplatTree();

            if (!splatTree) return;

            for (let s = 0; s < splatTree.subTrees.length; s++) {
                const subTree = splatTree.subTrees[s];

                fromLocal.copy(splatMesh.matrixWorld);
                if (splatMesh.dynamicMode) {
                    splatMesh.getSceneTransform(s, sceneTransform);
                    fromLocal.multiply(sceneTransform);
                }
                toLocal.copy(fromLocal).invert();

                localRay.origin.copy(this.ray.origin).applyMatrix4(toLocal);
                localRay.direction.copy(this.ray.origin).add(this.ray.direction);
                localRay.direction.applyMatrix4(toLocal).sub(localRay.origin).normalize();

                const outHitsForSubTree = [];
                if (subTree.rootNode) {
                    this.castRayAtSplatTreeNode(localRay, splatTree, subTree.rootNode, outHitsForSubTree);
                }

                outHitsForSubTree.forEach((hit) => {
                    hit.origin.applyMatrix4(fromLocal);
                    hit.normal.applyMatrix4(fromLocal).normalize();
                    hit.distance = tempPoint.copy(hit.origin).sub(this.ray.origin).length();
                });

                outHits.push(...outHitsForSubTree);
            }

            outHits.sort((a, b) => {
                if (a.distance > b.distance) return 1;
                else return -1;
            });

            return outHits;
        };

    }();

    castRayAtSplatTreeNode = function() {

        const tempColor = new THREE__namespace.Vector4();
        const tempCenter = new THREE__namespace.Vector3();
        const tempScale = new THREE__namespace.Vector3();
        const tempRotation = new THREE__namespace.Quaternion();
        const tempHit = new Hit();
        const scaleEpsilon = 0.0000001;

        const origin = new THREE__namespace.Vector3(0, 0, 0);
        const uniformScaleMatrix = new THREE__namespace.Matrix4();
        const scaleMatrix = new THREE__namespace.Matrix4();
        const rotationMatrix = new THREE__namespace.Matrix4();
        const toSphereSpace = new THREE__namespace.Matrix4();
        const fromSphereSpace = new THREE__namespace.Matrix4();
        const tempRay = new Ray();

        return function(ray, splatTree, node, outHits = []) {
            if (!ray.intersectBox(node.boundingBox)) {
                return;
            }
            if (node.data && node.data.indexes && node.data.indexes.length > 0) {
                for (let i = 0; i < node.data.indexes.length; i++) {

                    const splatGlobalIndex = node.data.indexes[i];
                    const splatSceneIndex = splatTree.splatMesh.getSceneIndexForSplat(splatGlobalIndex);
                    const splatScene = splatTree.splatMesh.getScene(splatSceneIndex);
                    if (!splatScene.visible) continue;

                    splatTree.splatMesh.getSplatColor(splatGlobalIndex, tempColor);
                    splatTree.splatMesh.getSplatCenter(splatGlobalIndex, tempCenter);
                    splatTree.splatMesh.getSplatScaleAndRotation(splatGlobalIndex, tempScale, tempRotation);

                    if (tempScale.x <= scaleEpsilon || tempScale.y <= scaleEpsilon ||
                        splatTree.splatMesh.splatRenderMode === SplatRenderMode.ThreeD && tempScale.z <= scaleEpsilon) {
                        continue;
                    }

                    if (!this.raycastAgainstTrueSplatEllipsoid) {
                        let radius = (tempScale.x + tempScale.y);
                        let componentCount = 2;
                        if (splatTree.splatMesh.splatRenderMode === SplatRenderMode.ThreeD) {
                            radius += tempScale.z;
                            componentCount = 3;
                        }
                        radius = radius / componentCount;
                        if (ray.intersectSphere(tempCenter, radius, tempHit)) {
                            const hitClone = tempHit.clone();
                            hitClone.splatIndex = splatGlobalIndex;
                            outHits.push(hitClone);
                        }
                    } else {
                        scaleMatrix.makeScale(tempScale.x, tempScale.y, tempScale.z);
                        rotationMatrix.makeRotationFromQuaternion(tempRotation);
                        const uniformScale = Math.log10(tempColor.w) * 2.0;
                        uniformScaleMatrix.makeScale(uniformScale, uniformScale, uniformScale);
                        fromSphereSpace.copy(uniformScaleMatrix).multiply(rotationMatrix).multiply(scaleMatrix);
                        toSphereSpace.copy(fromSphereSpace).invert();
                        tempRay.origin.copy(ray.origin).sub(tempCenter).applyMatrix4(toSphereSpace);
                        tempRay.direction.copy(ray.origin).add(ray.direction).sub(tempCenter);
                        tempRay.direction.applyMatrix4(toSphereSpace).sub(tempRay.origin).normalize();
                        if (tempRay.intersectSphere(origin, 1.0, tempHit)) {
                            const hitClone = tempHit.clone();
                            hitClone.splatIndex = splatGlobalIndex;
                            hitClone.origin.applyMatrix4(fromSphereSpace).add(tempCenter);
                            outHits.push(hitClone);
                        }
                    }
                }
             }
            if (node.children && node.children.length > 0) {
                for (let child of node.children) {
                    this.castRayAtSplatTreeNode(ray, splatTree, child, outHits);
                }
            }
            return outHits;
        };

    }();
}

/**
 * SortWorker
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Handles GPU-based sorting using WebAssembly
 */


// Base64 encoded WASM modules for sorting
const SorterWasm = "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";

const SorterWasmNoSIMD = "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";

const SorterWasmNonShared = "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";

const SorterWasmNoSIMDNonShared = "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";

/**
 * Sort worker function that runs in a Web Worker
 * Handles the actual sorting logic using WebAssembly
 */
function sortWorker(self) {

    let wasmInstance;
    let wasmMemory;
    let useSharedMemory;
    let integerBasedSort;
    let dynamicMode;
    let splatCount;
    let indexesToSortOffset;
    let sortedIndexesOffset;
    let sceneIndexesOffset;
    let transformsOffset;
    let precomputedDistancesOffset;
    let mappedDistancesOffset;
    let frequenciesOffset;
    let centersOffset;
    let modelViewProjOffset;
    let countsZero;
    let sortedIndexesOut;
    let distanceMapRange;
    let uploadedSplatCount;
    let Constants;

    function sort(splatSortCount, splatRenderCount, modelViewProj,
                  usePrecomputedDistances, copyIndexesToSort, copyPrecomputedDistances, copyTransforms) {
        const sortStartTime = performance.now();

        if (!useSharedMemory) {
            const indexesToSort = new Uint32Array(wasmMemory, indexesToSortOffset, copyIndexesToSort.byteLength / Constants.BytesPerInt);
            indexesToSort.set(copyIndexesToSort);
            const transforms = new Float32Array(wasmMemory, transformsOffset, copyTransforms.byteLength / Constants.BytesPerFloat);
            transforms.set(copyTransforms);
            if (usePrecomputedDistances) {
                let precomputedDistances;
                if (integerBasedSort) {
                    precomputedDistances = new Int32Array(wasmMemory, precomputedDistancesOffset,
                                                          copyPrecomputedDistances.byteLength / Constants.BytesPerInt);
                } else {
                    precomputedDistances = new Float32Array(wasmMemory, precomputedDistancesOffset,
                                                            copyPrecomputedDistances.byteLength / Constants.BytesPerFloat);
                }
                precomputedDistances.set(copyPrecomputedDistances);
            }
        }

        if (!countsZero) countsZero = new Uint32Array(distanceMapRange);
        new Float32Array(wasmMemory, modelViewProjOffset, 16).set(modelViewProj);
        new Uint32Array(wasmMemory, frequenciesOffset, distanceMapRange).set(countsZero);
        wasmInstance.exports.sortIndexes(indexesToSortOffset, centersOffset, precomputedDistancesOffset,
                                         mappedDistancesOffset, frequenciesOffset, modelViewProjOffset,
                                         sortedIndexesOffset, sceneIndexesOffset, transformsOffset, distanceMapRange,
                                         splatSortCount, splatRenderCount, splatCount, usePrecomputedDistances, integerBasedSort,
                                         dynamicMode);

        const sortMessage = {
            'sortDone': true,
            'splatSortCount': splatSortCount,
            'splatRenderCount': splatRenderCount,
            'sortTime': 0
        };
        if (!useSharedMemory) {
            const sortedIndexes = new Uint32Array(wasmMemory, sortedIndexesOffset, splatRenderCount);
            if (!sortedIndexesOut || sortedIndexesOut.length < splatRenderCount) {
                sortedIndexesOut = new Uint32Array(splatRenderCount);
            }
            sortedIndexesOut.set(sortedIndexes);
            sortMessage.sortedIndexes = sortedIndexesOut;
        }
        const sortEndTime = performance.now();

        sortMessage.sortTime = sortEndTime - sortStartTime;

        self.postMessage(sortMessage);
    }

    self.onmessage = (e) => {
        if (e.data.centers) {
            let centers = e.data.centers;
            let sceneIndexes = e.data.sceneIndexes;
            if (integerBasedSort) {
                new Int32Array(wasmMemory, centersOffset + e.data.range.from * Constants.BytesPerInt * 4,
                               e.data.range.count * 4).set(new Int32Array(centers));
            } else {
                new Float32Array(wasmMemory, centersOffset + e.data.range.from * Constants.BytesPerFloat * 4,
                                 e.data.range.count * 4).set(new Float32Array(centers));
            }
            if (dynamicMode) {
                new Uint32Array(wasmMemory, sceneIndexesOffset + e.data.range.from * 4,
                                e.data.range.count).set(new Uint32Array(sceneIndexes));
            }
            uploadedSplatCount = e.data.range.from + e.data.range.count;
        } else if (e.data.sort) {
            const renderCount = Math.min(e.data.sort.splatRenderCount || 0, uploadedSplatCount);
            const sortCount = Math.min(e.data.sort.splatSortCount || 0, uploadedSplatCount);
            const usePrecomputedDistances = e.data.sort.usePrecomputedDistances;

            let copyIndexesToSort;
            let copyPrecomputedDistances;
            let copyTransforms;
            if (!useSharedMemory) {
                copyIndexesToSort = e.data.sort.indexesToSort;
                copyTransforms = e.data.sort.transforms;
                if (usePrecomputedDistances) copyPrecomputedDistances = e.data.sort.precomputedDistances;
            }
            sort(sortCount, renderCount, e.data.sort.modelViewProj, usePrecomputedDistances,
                 copyIndexesToSort, copyPrecomputedDistances, copyTransforms);
        } else if (e.data.init) {
            // Yep, this is super hacky and gross :(
            Constants = e.data.init.Constants;

            splatCount = e.data.init.splatCount;
            useSharedMemory = e.data.init.useSharedMemory;
            integerBasedSort = e.data.init.integerBasedSort;
            dynamicMode = e.data.init.dynamicMode;
            distanceMapRange = e.data.init.distanceMapRange;
            uploadedSplatCount = 0;

            const CENTERS_BYTES_PER_ENTRY = integerBasedSort ? (Constants.BytesPerInt * 4) : (Constants.BytesPerFloat * 4);

            const sorterWasmBytes = new Uint8Array(e.data.init.sorterWasmBytes);

            const matrixSize = 16 * Constants.BytesPerFloat;
            const memoryRequiredForIndexesToSort = splatCount * Constants.BytesPerInt;
            const memoryRequiredForCenters = splatCount * CENTERS_BYTES_PER_ENTRY;
            const memoryRequiredForModelViewProjectionMatrix = matrixSize;
            const memoryRequiredForPrecomputedDistances = integerBasedSort ?
                                                          (splatCount * Constants.BytesPerInt) : (splatCount * Constants.BytesPerFloat);
            const memoryRequiredForMappedDistances = splatCount * Constants.BytesPerInt;
            const memoryRequiredForSortedIndexes = splatCount * Constants.BytesPerInt;
            const memoryRequiredForIntermediateSortBuffers = integerBasedSort ? (distanceMapRange * Constants.BytesPerInt * 2) :
                                                                                (distanceMapRange * Constants.BytesPerFloat * 2);
            const memoryRequiredforTransformIndexes = dynamicMode ? (splatCount * Constants.BytesPerInt) : 0;
            const memoryRequiredforTransforms = dynamicMode ? (Constants.MaxScenes * matrixSize) : 0;
            const extraMemory = Constants.MemoryPageSize * 32;

            const totalRequiredMemory = memoryRequiredForIndexesToSort +
                                        memoryRequiredForCenters +
                                        memoryRequiredForModelViewProjectionMatrix +
                                        memoryRequiredForPrecomputedDistances +
                                        memoryRequiredForMappedDistances +
                                        memoryRequiredForIntermediateSortBuffers +
                                        memoryRequiredForSortedIndexes +
                                        memoryRequiredforTransformIndexes +
                                        memoryRequiredforTransforms +
                                        extraMemory;
            const totalPagesRequired = Math.floor(totalRequiredMemory / Constants.MemoryPageSize ) + 1;
            const sorterWasmImport = {
                module: {},
                env: {
                    memory: new WebAssembly.Memory({
                        initial: totalPagesRequired,
                        maximum: totalPagesRequired,
                        shared: true,
                    }),
                }
            };
            WebAssembly.compile(sorterWasmBytes)
            .then((wasmModule) => {
                return WebAssembly.instantiate(wasmModule, sorterWasmImport);
            })
            .then((instance) => {
                wasmInstance = instance;
                indexesToSortOffset = 0;
                centersOffset = indexesToSortOffset + memoryRequiredForIndexesToSort;
                modelViewProjOffset = centersOffset + memoryRequiredForCenters;
                precomputedDistancesOffset = modelViewProjOffset + memoryRequiredForModelViewProjectionMatrix;
                mappedDistancesOffset = precomputedDistancesOffset + memoryRequiredForPrecomputedDistances;
                frequenciesOffset = mappedDistancesOffset + memoryRequiredForMappedDistances;
                sortedIndexesOffset = frequenciesOffset + memoryRequiredForIntermediateSortBuffers;
                sceneIndexesOffset = sortedIndexesOffset + memoryRequiredForSortedIndexes;
                transformsOffset = sceneIndexesOffset + memoryRequiredforTransformIndexes;
                wasmMemory = sorterWasmImport.env.memory.buffer;
                if (useSharedMemory) {
                    self.postMessage({
                        'sortSetupPhase1Complete': true,
                        'indexesToSortBuffer': wasmMemory,
                        'indexesToSortOffset': indexesToSortOffset,
                        'sortedIndexesBuffer': wasmMemory,
                        'sortedIndexesOffset': sortedIndexesOffset,
                        'precomputedDistancesBuffer': wasmMemory,
                        'precomputedDistancesOffset': precomputedDistancesOffset,
                        'transformsBuffer': wasmMemory,
                        'transformsOffset': transformsOffset
                    });
                } else {
                    self.postMessage({
                        'sortSetupPhase1Complete': true
                    });
                }
            });
        }
    };
}

/**
 * Creates a sort worker for GPU-based sorting
 * @param {number} splatCount - Number of splats to sort
 * @param {boolean} useSharedMemory - Whether to use shared memory
 * @param {boolean} enableSIMDInSort - Whether to enable SIMD instructions
 * @param {boolean} integerBasedSort - Whether to use integer-based sorting
 * @param {boolean} dynamicMode - Whether dynamic mode is enabled
 * @param {number} splatSortDistanceMapPrecision - Precision for distance map
 * @returns {Worker} The created sort worker
 */
function createSortWorker(splatCount, useSharedMemory, enableSIMDInSort, integerBasedSort, dynamicMode,
                                 splatSortDistanceMapPrecision = Constants$1.DefaultSplatSortDistanceMapPrecision) {
    const worker = new Worker(
        URL.createObjectURL(
            new Blob(['(', sortWorker.toString(), ')(self)'], {
                type: 'application/javascript',
            }),
        ),
    );

    let sourceWasm = SorterWasm;

    // iOS makes choosing the right WebAssembly configuration tricky :(
    const iOSSemVer = isIOS() ? getIOSSemever() : null;
    if (!enableSIMDInSort && !useSharedMemory) {
        sourceWasm = SorterWasmNoSIMD;
        // Testing on various devices has shown that even when shared memory is disabled, the WASM module with shared
        // memory can still be used most of the time -- the exception seems to be iOS devices below 16.4
        if (iOSSemVer && iOSSemVer.major <= 16 && iOSSemVer.minor < 4) {
            sourceWasm = SorterWasmNoSIMDNonShared;
        }
    } else if (!enableSIMDInSort) {
        sourceWasm = SorterWasmNoSIMD;
    } else if (!useSharedMemory) {
        // Same issue with shared memory as above on iOS devices
        if (iOSSemVer && iOSSemVer.major <= 16 && iOSSemVer.minor < 4) {
            sourceWasm = SorterWasmNonShared;
        }
    }

    const sorterWasmBinaryString = atob(sourceWasm);
    const sorterWasmBytes = new Uint8Array(sorterWasmBinaryString.length);
    for (let i = 0; i < sorterWasmBinaryString.length; i++) {
        sorterWasmBytes[i] = sorterWasmBinaryString.charCodeAt(i);
    }

    worker.postMessage({
        'init': {
            'sorterWasmBytes': sorterWasmBytes.buffer,
            'splatCount': splatCount,
            'useSharedMemory': useSharedMemory,
            'integerBasedSort': integerBasedSort,
            'dynamicMode': dynamicMode,
            'distanceMapRange': 1 << splatSortDistanceMapPrecision,
            // Super hacky
            'Constants': {
                'BytesPerFloat': Constants$1.BytesPerFloat,
                'BytesPerInt': Constants$1.BytesPerInt,
                'MemoryPageSize': Constants$1.MemoryPageSize,
                'MaxScenes': Constants$1.MaxScenes
            }
        }
    });
    return worker;
}

/**
 * Viewer
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME head model integration
 * - Extended with expression/pose controls
 * - Additional rendering pipeline modifications
 * - Additional ~900 lines of FLAME-specific code
 */


const logger$2 = getLogger('Viewer');

// UI components - stub implementations for now
class LoadingSpinner {
    constructor(msg, container) { this.tasks = []; }
    show() {}
    hide() {}
    setContainer(c) {}
    addTask(msg) { return this.tasks.push(msg); }
    removeTask(id) {}
    removeAllTasks() { this.tasks = []; }
    setMessageForTask(id, msg) {}
}

class LoadingProgressBar {
    constructor(container) {}
    show() {}
    hide() {}
    setContainer(c) {}
    setProgress(p) {}
}

class SceneHelper {
    constructor(scene) { 
        this.scene = scene; 
        this.meshCursor = null;
        this.meshCursorVisible = false;
        this.focusMarker = null;
        this.focusMarkerOpacity = 0;
        this.controlPlane = null;
        this.controlPlaneVisible = false;
    }
    setupMeshCursor() {}
    setupFocusMarker() {}
    setupControlPlane() {}
    updateMeshCursor(pos, active) {}
    updateFocusMarker(target, camera, renderDimensions) {}
    updateControlPlane(cam, ctrl) {}
    setFocusMarkerVisibility(v) {}
    setFocusMarkerOpacity(o) { this.focusMarkerOpacity = o; }
    getFocusMarkerOpacity() { return this.focusMarkerOpacity; }
    positionAndOrientFocusMarker(pos, cam) {}
    positionAndOrientMeshCursor(pos, cam) {}
    setMeshCursorVisibility(visible) { this.meshCursorVisible = visible; }
    getMeschCursorVisibility() { return this.meshCursorVisible; }
    setControlPlaneVisibility(visible) { this.controlPlaneVisible = visible; }
    positionAndOrientControlPlane(pos, quat, scale) {}
    updateForRenderMode(mode, mesh) {}
    dispose() {}
}

/**
 * Viewer - Core Gaussian Splatting Viewer
 * Handles the Three.js scene, camera, controls, and rendering loop.
 */
class Viewer {
  /**
   * @param {object} options - Configuration options
   * @param {Array<number>} [options.cameraUp=[0, 1, 0]] - Camera up vector
   * @param {Array<number>} [options.initialCameraPosition=[0, 10, 15]] - Initial camera position
   * @param {Array<number>} [options.initialCameraRotation=[0, 0, 0]] - Initial camera rotation
   * @param {Array<number>} [options.initialCameraLookAt=[0, 0, 0]] - Initial camera look-at point
   * @param {boolean} [options.dropInMode=false] - If true, viewer is used as a Three.js scene object
   * @param {boolean} [options.selfDrivenMode=true] - If true, viewer manages its own render loop
   * @param {boolean} [options.useBuiltInControls=true] - If true, uses OrbitControls
   * @param {HTMLElement} [options.rootElement] - Parent element for the canvas
   * @param {HTMLCanvasElement} [options.threejsCanvas] - Existing canvas to use
   * @param {boolean} [options.ignoreDevicePixelRatio=false] - If true, forces DPR to 1
   * @param {boolean} [options.halfPrecisionCovariancesOnGPU=false] - Use 16-bit float for covariances
   * @param {THREE.Scene} [options.threeScene] - External Three.js scene to render
   * @param {THREE.WebGLRenderer} [options.renderer] - External Three.js renderer
   * @param {THREE.Camera} [options.camera] - External Three.js camera
   * @param {boolean} [options.gpuAcceleratedSort=false] - Use GPU for sorting distances
   * @param {boolean} [options.integerBasedSort=true] - Use integer arithmetic for sorting
   * @param {boolean} [options.sharedMemoryForWorkers=true] - Use SharedArrayBuffer for workers
   * @param {boolean} [options.dynamicScene=false] - Optimize for dynamic scenes
   */
  constructor(options = {}) {
    // The natural 'up' vector for viewing the scene (only has an effect when used with orbit controls and
    // when the viewer uses its own camera).
    if (!options.cameraUp) options.cameraUp = [0, 1, 0];
    this.cameraUp = new THREE.Vector3().fromArray(options.cameraUp);

    // The camera's initial position (only used when the viewer uses its own camera).
    if (!options.initialCameraPosition)
      options.initialCameraPosition = [0, 10, 15];
    this.initialCameraPosition = new THREE.Vector3().fromArray(
      options.initialCameraPosition
    );

    if (!options.initialCameraRotation)
        options.initialCameraRotation = [0, 0, 0];
      this.initialCameraRotation = new THREE.Vector3().fromArray(
        options.initialCameraRotation
    );
    this.backgroundColor = options.backgroundColor;

    // Iris occlusion configuration for FLAME avatars
    this.irisOcclusionConfig = options.irisOcclusionConfig || null;

    // The initial focal point of the camera and center of the camera's orbit (only used when the viewer uses its own camera).
    if (!options.initialCameraLookAt) options.initialCameraLookAt = [0, 0, 0];
    this.initialCameraLookAt = new THREE.Vector3().fromArray(
      options.initialCameraLookAt
    );

    // 'dropInMode' is a flag that is used internally to support the usage of the viewer as a Three.js scene object
    this.dropInMode = options.dropInMode || false;

    // If 'selfDrivenMode' is true, the viewer manages its own update/animation loop via requestAnimationFrame()
    if (options.selfDrivenMode === undefined || options.selfDrivenMode === null)
      options.selfDrivenMode = true;
    this.selfDrivenMode = options.selfDrivenMode && !this.dropInMode;
    this.selfDrivenUpdateFunc = this.selfDrivenUpdate.bind(this);

    // If 'useBuiltInControls' is true, the viewer will create its own instance of OrbitControls and attach to the camera
    if (options.useBuiltInControls === undefined)
      options.useBuiltInControls = true;
    this.useBuiltInControls = options.useBuiltInControls;

    // parent element of the Three.js renderer canvas
    this.rootElement = options.rootElement;
    this.canvas = options.threejsCanvas;
    // Tells the viewer to pretend the device pixel ratio is 1, which can boost performance on devices where it is larger,
    // at a small cost to visual quality
    this.ignoreDevicePixelRatio = options.ignoreDevicePixelRatio || false;
    this.devicePixelRatio = this.ignoreDevicePixelRatio
      ? 1
      : window.devicePixelRatio || 1;

    // Tells the viewer to use 16-bit floating point values when storing splat covariance data in textures, instead of 32-bit
    this.halfPrecisionCovariancesOnGPU =
      options.halfPrecisionCovariancesOnGPU || false;

    // If 'threeScene' is valid, it will be rendered by the viewer along with the splat mesh
    this.threeScene = options.threeScene;
    // Allows for usage of an external Three.js renderer
    this.renderer = options.renderer;
    // Allows for usage of an external Three.js camera
    this.camera = options.camera;

    // If 'gpuAcceleratedSort' is true, a partially GPU-accelerated approach to sorting splats will be used.
    // Currently this means pre-computing splat distances from the camera on the GPU
    this.gpuAcceleratedSort = options.gpuAcceleratedSort || false;

    // if 'integerBasedSort' is true, the integer version of splat centers as well as other values used to calculate
    // splat distances are used instead of the float version. This speeds up computation, but introduces the possibility of
    // overflow in larger scenes.
    if (
      options.integerBasedSort === undefined ||
      options.integerBasedSort === null
    ) {
      options.integerBasedSort = true;
    }
    this.integerBasedSort = options.integerBasedSort;

    // If 'sharedMemoryForWorkers' is true, a SharedArrayBuffer will be used to communicate with web workers. This method
    // is faster than copying memory to or from web workers, but comes with security implications as outlined here:
    // https://web.dev/articles/cross-origin-isolation-guide
    // If enabled, it requires specific CORS headers to be present in the response from the server that is sent when
    // loading the application. More information is available in the README.
    if (
      options.sharedMemoryForWorkers === undefined ||
      options.sharedMemoryForWorkers === null
    )
      options.sharedMemoryForWorkers = true;
    this.sharedMemoryForWorkers = false; //options.sharedMemoryForWorkers;

    // if 'dynamicScene' is true, it tells the viewer to assume scene elements are not stationary or that the number of splats in the
    // scene may change. This prevents optimizations that depend on a static scene from being made. Additionally, if 'dynamicScene' is
    // true it tells the splat mesh to not apply scene tranforms to splat data that is returned by functions like
    // SplatMesh.getSplatCenter() by default.
    this.dynamicScene = !!options.dynamicScene;

    // When true, will perform additional steps during rendering to address artifacts caused by the rendering of gaussians at a
    // substantially different resolution than that at which they were rendered during training. This will only work correctly
    // for models that were trained using a process that utilizes this compensation calculation. For more details:
    // https://github.com/nerfstudio-project/gsplat/pull/117
    // https://github.com/graphdeco-inria/gaussian-splatting/issues/294#issuecomment-1772688093
    this.antialiased = options.antialiased || false;

    // This constant is added to the projected 2D screen-space splat scales
    this.kernel2DSize =
      options.kernel2DSize === undefined ? 0.3 : options.kernel2DSize;

    // if 'renderMode' is RenderMode.Always, then the viewer will rrender the scene on every update. If it is RenderMode.OnChange,
    // it will only render when something in the scene has changed.
    this.renderMode = options.renderMode || RenderMode.Always;

    // SceneRevealMode.Default results in a nice, slow fade-in effect for progressively loaded scenes,
    // and a fast fade-in for non progressively loaded scenes.
    // SceneRevealMode.Gradual will force a slow fade-in for all scenes.
    // SceneRevealMode.Instant will force all loaded scene data to be immediately visible.
    this.sceneRevealMode = options.sceneRevealMode || SceneRevealMode.Default;

    // Hacky, experimental, non-scientific parameter for tweaking focal length related calculations. For scenes with very
    // small gaussians, small details, and small dimensions -- increasing this value can help improve visual quality.
    this.focalAdjustment = options.focalAdjustment || 1.0;

    // Specify the maximum screen-space splat size, can help deal with large splats that get too unwieldy
    this.maxScreenSpaceSplatSize = options.maxScreenSpaceSplatSize || 1024;

    // The verbosity of console logging
    this.logLevel = options.logLevel || LogLevel.None;

    // Degree of spherical harmonics to utilize in rendering splats (assuming the data is present in the splat scene).
    // Valid values are 0 - 2. Default value is 0.
    this.sphericalHarmonicsDegree = options.sphericalHarmonicsDegree || 0;

    // When true, allows for usage of extra properties and attributes during rendering for effects such as opacity adjustment.
    // Default is false for performance reasons. These properties are separate from transform properties (scale, rotation, position)
    // that are enabled by the 'dynamicScene' parameter.
    this.enableOptionalEffects = options.enableOptionalEffects || false;

    // Enable the usage of SIMD WebAssembly instructions for the splat sort
    if (
      options.enableSIMDInSort === undefined ||
      options.enableSIMDInSort === null
    )
      options.enableSIMDInSort = true;
    this.enableSIMDInSort = options.enableSIMDInSort;

    // Level to compress non KSPLAT files when loading them for direct rendering
    if (
      options.inMemoryCompressionLevel === undefined ||
      options.inMemoryCompressionLevel === null
    ) {
      options.inMemoryCompressionLevel = 0;
    }
    this.inMemoryCompressionLevel = options.inMemoryCompressionLevel;

    // Reorder splat data in memory after loading is complete to optimize cache utilization. Default is true.
    // Does not apply if splat scene is progressively loaded.
    if (
      options.optimizeSplatData === undefined ||
      options.optimizeSplatData === null
    ) {
      options.optimizeSplatData = true;
    }
    this.optimizeSplatData = options.optimizeSplatData;

    // When true, the intermediate splat data that is the result of decompressing splat bufffer(s) and is used to
    // populate the data textures will be freed. This will reduces memory usage, but if that data needs to be modified
    // it will need to be re-populated from the splat buffer(s). Default is false.
    if (
      options.freeIntermediateSplatData === undefined ||
      options.freeIntermediateSplatData === null
    ) {
      options.freeIntermediateSplatData = false;
    }
    this.freeIntermediateSplatData = options.freeIntermediateSplatData;

    // It appears that for certain iOS versions, special actions need to be taken with the
    // usage of SIMD instructions and shared memory
    if (isIOS()) {
      const semver = getIOSSemever();
      if (semver.major < 17) {
        this.enableSIMDInSort = false;
      }
      if (semver.major < 16) {
        this.sharedMemoryForWorkers = false;
      }
    }

    // Tell the viewer how to render the splats
    if (
      options.splatRenderMode === undefined ||
      options.splatRenderMode === null
    ) {
      options.splatRenderMode = SplatRenderMode.ThreeD;
    }
    this.splatRenderMode = options.splatRenderMode;

    // Customize the speed at which the scene is revealed
    this.sceneFadeInRateMultiplier = options.sceneFadeInRateMultiplier || 1.0;

    // Set the range for the depth map for the counting sort used to sort the splats
    this.splatSortDistanceMapPrecision =
      options.splatSortDistanceMapPrecision ||
      Constants$1.DefaultSplatSortDistanceMapPrecision;
    const maxPrecision = this.integerBasedSort ? 20 : 24;
    this.splatSortDistanceMapPrecision = clamp(
      this.splatSortDistanceMapPrecision,
      10,
      maxPrecision
    );

    this.onSplatMeshChangedCallback = null;
    this.createSplatMesh();

    this.controls = null;
    this.perspectiveControls = null;
    this.orthographicControls = null;

    this.orthographicCamera = null;
    this.perspectiveCamera = null;

    this.showMeshCursor = false;
    this.showControlPlane = false;
    this.showInfo = false;

    this.sceneHelper = null;

    this.sortWorker = null;
    this.sortRunning = false;
    this.splatRenderCount = 0;
    this.splatSortCount = 0;
    this.lastSplatSortCount = 0;
    this.sortWorkerIndexesToSort = null;
    this.sortWorkerSortedIndexes = null;
    this.sortWorkerPrecomputedDistances = null;
    this.sortWorkerTransforms = null;
    this.preSortMessages = [];
    this.runAfterNextSort = [];

    this.selfDrivenModeRunning = false;
    this.splatRenderReady = false;

    this.raycaster = new Raycaster();

    this.infoPanel = null;

    this.startInOrthographicMode = false;

    this.currentFPS = 0;
    this.lastSortTime = 0;
    this.consecutiveRenderFrames = 0;

    this.previousCameraTarget = new THREE.Vector3();
    this.nextCameraTarget = new THREE.Vector3();

    this.mousePosition = new THREE.Vector2();
    this.mouseDownPosition = new THREE.Vector2();
    this.mouseDownTime = null;

    this.resizeObserver = null;
    this.mouseMoveListener = null;
    this.mouseDownListener = null;
    this.mouseUpListener = null;
    this.keyDownListener = null;

    this.sortPromise = null;
    this.sortPromiseResolver = null;
    this.splatSceneDownloadControllers = [];
    this.splatSceneDownloadPromises = {};
    this.splatSceneDownloadAndBuildPromise = null;
    this.splatSceneRemovalPromise = null;

    this.loadingSpinner = new LoadingSpinner(
      null,
      this.rootElement || document.body
    );
    this.loadingSpinner.hide();
    this.loadingProgressBar = new LoadingProgressBar(
      this.rootElement || document.body
    );
    this.loadingProgressBar.hide();
    // this.infoPanel = new InfoPanel(this.rootElement || document.body)
    // this.infoPanel.hide()

    this.usingExternalCamera = this.dropInMode || this.camera ? true : false;
    this.usingExternalRenderer = this.dropInMode || this.renderer ? true : false;

    this.initialized = false;
    this.disposing = false;
    this.disposed = false;
    this.disposePromise = null;

    this.lastTime = 0;
    this.gaussianSplatCount = 0;
    this.totalFrames = 0;
    this.frame = 0;
    this. avatarMesh = null;
    this.skinModel = null;
    this.boneRoot = null;
    this.baseMesh = null;
    this.setSkinAttibutes = false;

    if (!this.dropInMode) this.init();
  }

  createSplatMesh() {
    this.splatMesh = new SplatMesh(
      this.splatRenderMode,
      this.dynamicScene,
      this.enableOptionalEffects,
      this.halfPrecisionCovariancesOnGPU,
      this.devicePixelRatio,
      this.gpuAcceleratedSort,
      this.integerBasedSort,
      this.antialiased,
      this.maxScreenSpaceSplatSize,
      this.logLevel,
      this.sphericalHarmonicsDegree,
      this.sceneFadeInRateMultiplier,
      this.kernel2DSize,
      this.irisOcclusionConfig  // Pass iris config to constructor
    );

    // Config is now set via constructor parameter
    // this.splatMesh.irisOcclusionConfig = this.irisOcclusionConfig;
    this.splatMesh.frustumCulled = false;
    if (this.onSplatMeshChangedCallback) this.onSplatMeshChangedCallback();
  }

  init() {
    if (this.initialized) return

    if (!this.rootElement) {
      if (!this.usingExternalRenderer) {
        this.rootElement = document.createElement('div');
        this.rootElement.style.width = '100%';
        this.rootElement.style.height = '100%';
        this.rootElement.style.position = 'absolute';
        document.body.appendChild(this.rootElement);
      } else {
        this.rootElement = this.renderer.domElement || document.body;
      }
    }

    this.setupCamera();
    this.setupRenderer();
    // 
    // this.setupControls()
    this.setupEventHandlers();

    this.threeScene = this.threeScene || new THREE.Scene();
    this.sceneHelper = new SceneHelper(this.threeScene);
    this.sceneHelper.setupMeshCursor();
    this.sceneHelper.setupFocusMarker();
    this.sceneHelper.setupControlPlane();

    this.loadingProgressBar.setContainer(this.rootElement);
    this.loadingSpinner.setContainer(this.rootElement);
    // this.infoPanel.setContainer(this.rootElement)

    this.initialized = true;
  }

  setupCamera() {
    if (!this.usingExternalCamera) {
      const renderDimensions = new THREE.Vector2();
      this.getRenderDimensions(renderDimensions);

      this.perspectiveCamera = new THREE.PerspectiveCamera(
        THREE_CAMERA_FOV,
        renderDimensions.x / renderDimensions.y,
        0.1,
        1000
      );
      this.orthographicCamera = new THREE.OrthographicCamera(
        renderDimensions.x / -2,
        renderDimensions.x / 2,
        renderDimensions.y / 2,
        renderDimensions.y / -2,
        0.1,
        1000
      );
      this.camera = this.startInOrthographicMode
        ? this.orthographicCamera
        : this.perspectiveCamera;
      this.camera.position.copy(this.initialCameraPosition);
      // this.camera.up.copy(this.cameraUp).normalize()
      // this.camera.lookAt(this.initialCameraLookAt)
      this.camera.rotateX(THREE.MathUtils.degToRad(this.initialCameraRotation.x));
      this.camera.rotateY(THREE.MathUtils.degToRad(this.initialCameraRotation.y));
      this.camera.rotateZ(THREE.MathUtils.degToRad(this.initialCameraRotation.z));
    }
  }

  setupRenderer() {
    if (!this.usingExternalRenderer) {
      const renderDimensions = new THREE.Vector2();
      this.getRenderDimensions(renderDimensions);

      this.renderer = new THREE.WebGLRenderer({
        antialias: false,
        precision: 'highp',
        canvas: this.canvas
      });
      this.renderer.setPixelRatio(this.devicePixelRatio);
      this.renderer.autoClear = true;
      this.renderer.setClearColor(this.backgroundColor, 1.0); // set background color according to the config

      this.renderer.setSize(renderDimensions.x, renderDimensions.y);

      this.resizeObserver = new ResizeObserver(() => {
        this.getRenderDimensions(renderDimensions);
        this.renderer.setSize(renderDimensions.x, renderDimensions.y);
        this.forceRenderNextFrame();
      });
      this.resizeObserver.observe(this.rootElement);
      this.rootElement.appendChild(this.renderer.domElement);
    }
  }

  setupControls() {
    if (this.useBuiltInControls) {
      if (!this.usingExternalCamera) {
        this.perspectiveControls = new OrbitControls_js.OrbitControls(
          this.perspectiveCamera,
          this.renderer.domElement
        );
        this.orthographicControls = new OrbitControls_js.OrbitControls(
          this.orthographicCamera,
          this.renderer.domElement
        );
      } else {
        if (this.camera.isOrthographicCamera) {
          this.orthographicControls = new OrbitControls_js.OrbitControls(
            this.camera,
            this.renderer.domElement
          );
        } else {
          this.perspectiveControls = new OrbitControls_js.OrbitControls(
            this.camera,
            this.renderer.domElement
          );
        }
      }
      for (let controls of [
        this.orthographicControls,
        this.perspectiveControls
      ]) {
        if (controls) {
          controls.listenToKeyEvents(window);
          controls.rotateSpeed = 0.5;
          controls.maxPolarAngle = Math.PI * 0.5;// + Math.PI / 24
          controls.minPolarAngle = Math.PI * 0.5;// - Math.PI / 24
          controls.minAzimuthAngle = -Math.PI / 72;
          controls.maxAzimuthAngle = Math.PI / 72;
          controls.enableDamping = true;
          controls.dampingFactor = 0.05;
          controls.target.copy(this.initialCameraLookAt);
          controls.update();
        }
      }
      this.controls = this.camera.isOrthographicCamera
        ? this.orthographicControls
        : this.perspectiveControls;
      this.controls.update();
    }
  }

  setupEventHandlers() {
    if (this.useBuiltInControls) {
      this.mouseMoveListener = this.onMouseMove.bind(this);
      this.renderer.domElement.addEventListener(
        'pointermove',
        this.mouseMoveListener,
        false
      );
      this.mouseDownListener = this.onMouseDown.bind(this);
      this.renderer.domElement.addEventListener(
        'pointerdown',
        this.mouseDownListener,
        false
      );
      this.mouseUpListener = this.onMouseUp.bind(this);
      this.renderer.domElement.addEventListener(
        'pointerup',
        this.mouseUpListener,
        false
      );
      this.keyDownListener = this.onKeyDown.bind(this);
    }
  }

  removeEventHandlers() {
    if (this.useBuiltInControls) {
      this.renderer.domElement.removeEventListener(
        'pointermove',
        this.mouseMoveListener
      );
      this.mouseMoveListener = null;
      this.renderer.domElement.removeEventListener(
        'pointerdown',
        this.mouseDownListener
      );
      this.mouseDownListener = null;
      this.renderer.domElement.removeEventListener(
        'pointerup',
        this.mouseUpListener
      );
      this.mouseUpListener = null;
      window.removeEventListener('keydown', this.keyDownListener);
      this.keyDownListener = null;
    }
  }

  setRenderMode(renderMode) {
    this.renderMode = renderMode;
  }

  setActiveSphericalHarmonicsDegrees(activeSphericalHarmonicsDegrees) {
    this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value =
      activeSphericalHarmonicsDegrees;
    this.splatMesh.material.uniformsNeedUpdate = true;
  }

  onSplatMeshChanged(callback) {
    this.onSplatMeshChangedCallback = callback;
  }

  tempForward = new THREE.Vector3()
  tempMatrixLeft = new THREE.Matrix4()
  tempMatrixRight = new THREE.Matrix4()
  onKeyDown = (e) => {
    this.tempForward.set(0, 0, -1);
    this.tempForward.transformDirection(this.camera.matrixWorld);
    this.tempMatrixLeft.makeRotationAxis(this.tempForward, Math.PI / 128);
    this.tempMatrixRight.makeRotationAxis(this.tempForward, -Math.PI / 128);
    switch (e.code) {
      case 'KeyG':
        this.focalAdjustment += 0.02;
        this.forceRenderNextFrame();
        break
      case 'KeyF':
        this.focalAdjustment -= 0.02;
        this.forceRenderNextFrame();
        break
      case 'ArrowLeft':
        this.camera.up.transformDirection(this.tempMatrixLeft);
        break
      case 'ArrowRight':
        this.camera.up.transformDirection(this.tempMatrixRight);
        break
      case 'KeyC':
        this.showMeshCursor = !this.showMeshCursor;
        break
      case 'KeyU':
        this.showControlPlane = !this.showControlPlane;
        break
      case 'KeyI':
        this.showInfo = !this.showInfo;
        if (this.showInfo) ;
        break
      case 'KeyO':
        if (!this.usingExternalCamera) {
          this.setOrthographicMode(!this.camera.isOrthographicCamera);
        }
        break
      case 'KeyP':
        if (!this.usingExternalCamera) {
          this.splatMesh.setPointCloudModeEnabled(
            !this.splatMesh.getPointCloudModeEnabled()
          );
        }
        break
      case 'Equal':
        if (!this.usingExternalCamera) {
          this.splatMesh.setSplatScale(this.splatMesh.getSplatScale() + 0.05);
        }
        break
      case 'Minus':
        if (!this.usingExternalCamera) {
          this.splatMesh.setSplatScale(
            Math.max(this.splatMesh.getSplatScale() - 0.05, 0.0)
          );
        }
        break
    }
  }

  onMouseMove(mouse) {
    this.mousePosition.set(mouse.offsetX, mouse.offsetY);
  }

  onMouseDown() {
    this.mouseDownPosition.copy(this.mousePosition);
    this.mouseDownTime = getCurrentTime();
  }

  onMouseUp = (function () {
    const clickOffset = new THREE.Vector2();

    return function (mouse) {
      clickOffset.copy(this.mousePosition).sub(this.mouseDownPosition);
      const mouseUpTime = getCurrentTime();
      const wasClick =
        mouseUpTime - this.mouseDownTime < 0.5 && clickOffset.length() < 2;
      if (wasClick) {
        this.onMouseClick(mouse);
      }
    }
  })()

  onMouseClick(mouse) {
    this.mousePosition.set(mouse.offsetX, mouse.offsetY);
    this.checkForFocalPointChange();
  }

  checkPointRenderDimensions = new THREE.Vector2()
  checkPointToNewFocalPoint = new THREE.Vector3()
  checkPointOutHits = []
  checkForFocalPointChange = () => {
    if (!this.transitioningCameraTarget) {
      this.getRenderDimensions(this.checkPointRenderDimensions);
      this.checkPointOutHits.length = 0;
      this.raycaster.setFromCameraAndScreenPosition(
        this.camera,
        this.mousePosition,
        this.checkPointRenderDimensions
      );
      this.raycaster.intersectSplatMesh(this.splatMesh, this.checkPointOutHits);
      if (this.checkPointOutHits.length > 0) {
        const hit = this.checkPointOutHits[0];
        const intersectionPoint = hit.origin;
        this.checkPointToNewFocalPoint
          .copy(intersectionPoint)
          .sub(this.camera.position);
        if (
          this.checkPointToNewFocalPoint.length() >
          MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT
        ) {
          this.previousCameraTarget.copy(this.controls.target);
          this.nextCameraTarget.copy(intersectionPoint);
          this.transitioningCameraTarget = true;
          this.transitioningCameraTargetStartTime = getCurrentTime();
        }
      }
    }
  }

  getRenderDimensions(outDimensions) {
    if (this.rootElement) {
      outDimensions.x = this.rootElement.offsetWidth;
      outDimensions.y = this.rootElement.offsetHeight;
    } else {
      this.renderer.getSize(outDimensions);
    }
  }

  setOrthographicMode(orthographicMode) {
    if (orthographicMode === this.camera.isOrthographicCamera) return
    const fromCamera = this.camera;
    const toCamera = orthographicMode
      ? this.orthographicCamera
      : this.perspectiveCamera;
    toCamera.position.copy(fromCamera.position);
    toCamera.up.copy(fromCamera.up);
    toCamera.rotation.copy(fromCamera.rotation);
    toCamera.quaternion.copy(fromCamera.quaternion);
    toCamera.matrix.copy(fromCamera.matrix);
    this.camera = toCamera;

    if (this.controls) {
      const resetControls = (controls) => {
        controls.saveState();
        controls.reset();
      };

      const fromControls = this.controls;
      const toControls = orthographicMode
        ? this.orthographicControls
        : this.perspectiveControls;

      resetControls(toControls);
      resetControls(fromControls);

      toControls.target.copy(fromControls.target);
      if (orthographicMode) {
        Viewer.setCameraZoomFromPosition(toCamera, fromCamera, fromControls);
      } else {
        Viewer.setCameraPositionFromZoom(toCamera, fromCamera, toControls);
      }
      this.controls = toControls;
      this.camera.lookAt(this.controls.target);
    }
  }

  static setCameraPositionFromZoom = (function () {
    const tempVector = new THREE.Vector3();

    return function (positionCamera, zoomedCamera, controls) {
      const toLookAtDistance = 1 / (zoomedCamera.zoom * 0.001);
      tempVector
        .copy(controls.target)
        .sub(positionCamera.position)
        .normalize()
        .multiplyScalar(toLookAtDistance)
        .negate();
      positionCamera.position.copy(controls.target).add(tempVector);
    }
  })()

  static setCameraZoomFromPosition = (function () {
    const tempVector = new THREE.Vector3();

    return function (zoomCamera, positionZamera, controls) {
      const toLookAtDistance = tempVector
        .copy(controls.target)
        .sub(positionZamera.position)
        .length();
      zoomCamera.zoom = 1 / (toLookAtDistance * 0.001);
    }
  })()

  updateSplatMesh = (function () {
    const renderDimensions = new THREE.Vector2();

    return function () {
      if (!this.splatMesh) return
      const splatCount = this.splatMesh.getSplatCount();
      if (splatCount > 0) {
        this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode);
        this.splatMesh.updateTransforms();
        this.getRenderDimensions(renderDimensions);
        const focalLengthX =
          this.camera.projectionMatrix.elements[0] *
          0.5 *
          this.devicePixelRatio *
          renderDimensions.x;
        const focalLengthY =
          this.camera.projectionMatrix.elements[5] *
          0.5 *
          this.devicePixelRatio *
          renderDimensions.y;

        const focalMultiplier = this.camera.isOrthographicCamera
          ? 1.0 / this.devicePixelRatio
          : 1.0;
        const focalAdjustment = this.focalAdjustment * focalMultiplier;
        const inverseFocalAdjustment = 1.0 / focalAdjustment;

        this.adjustForWebXRStereo(renderDimensions);
        this.splatMesh.updateUniforms(
          renderDimensions,
          focalLengthX * focalAdjustment,
          focalLengthY * focalAdjustment,
          this.camera.isOrthographicCamera,
          this.camera.zoom || 1.0,
          inverseFocalAdjustment
        );
      }
    }
  })()

  adjustForWebXRStereo(renderDimensions) {
    // TODO: Figure out a less hacky way to determine if stereo rendering is active
    if (this.camera && this.webXRActive) {
      const xrCamera = this.renderer.xr.getCamera();
      const xrCameraProj00 = xrCamera.projectionMatrix.elements[0];
      const cameraProj00 = this.camera.projectionMatrix.elements[0];
      renderDimensions.x *= cameraProj00 / xrCameraProj00;
    }
  }

  isLoadingOrUnloading() {
    return (
      Object.keys(this.splatSceneDownloadPromises).length > 0 ||
      this.splatSceneDownloadAndBuildPromise !== null ||
      this.splatSceneRemovalPromise !== null
    )
  }

  isDisposingOrDisposed() {
    return this.disposing || this.disposed
  }

  addSplatSceneDownloadController(controller) {
    this.splatSceneDownloadControllers.push(controller);
  }

  removeSplatSceneDownloadController(controller) {
    const index = this.splatSceneDownloadControllers.indexOf(controller);
    if (index > -1) {
        this.splatSceneDownloadControllers.splice(index, 1);
    }
  }

  addSplatSceneDownloadPromise(promise) {
    this.splatSceneDownloadPromises[promise.id] = promise;
  }

  removeSplatSceneDownloadPromise(promise) {
    delete this.splatSceneDownloadPromises[promise.id];
  }

  setSplatSceneDownloadAndBuildPromise(promise) {
    this.splatSceneDownloadAndBuildPromise = promise;
  }

  clearSplatSceneDownloadAndBuildPromise() {
    this.splatSceneDownloadAndBuildPromise = null;
  }

  /**
   * Add a splat scene to the viewer and display any loading UI if appropriate.
   * @param {string} path Path to splat scene to be loaded
   * @param {object} options {
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         showLoadingUI:         Display a loading spinner while the scene is loading, defaults to true
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   *
   *         onProgress:                 Function to be called as file data are received, or other processing occurs
   *
   *         headers:                    Optional HTTP headers to be sent along with splat requests
   * }
   * @return {Promise}
   */
  addSplatScene(path, options = {}) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot add splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot add splat scene after dispose() is called.')
    }

    if (
      options.progressiveLoad &&
      this.splatMesh.scenes &&
      this.splatMesh.scenes.length > 0
    ) {
      logger$2.warn(
        'addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'
      );
      options.progressiveLoad = false;
    }

    const format =
      options.format !== undefined && options.format !== null
        ? options.format
        : sceneFormatFromPath(path);
    const progressiveLoad =
      Viewer.isProgressivelyLoadable(format) && options.progressiveLoad;
    const showLoadingUI =
      options.showLoadingUI !== undefined && options.showLoadingUI !== null
        ? options.showLoadingUI
        : true;

    let loadingUITaskId = null;
    if (showLoadingUI) {
      this.loadingSpinner.removeAllTasks();
      loadingUITaskId = this.loadingSpinner.addTask('Downloading...');
    }
    const hideLoadingUI = () => {
      this.loadingProgressBar.hide();
      this.loadingSpinner.removeAllTasks();
    };

    const onProgressUIUpdate = (
      percentComplete,
      percentCompleteLabel,
      loaderStatus
    ) => {
      if (showLoadingUI) {
        if (loaderStatus === LoaderStatus.Downloading) {
          if (percentComplete == 100) {
            this.loadingSpinner.setMessageForTask(
              loadingUITaskId,
              'Download complete!'
            );
          } else {
            if (progressiveLoad) {
              this.loadingSpinner.setMessageForTask(
                loadingUITaskId,
                'Downloading splats...'
              );
            } else {
              const suffix = percentCompleteLabel
                ? `: ${percentCompleteLabel}`
                : `...`;
              this.loadingSpinner.setMessageForTask(
                loadingUITaskId,
                `Downloading${suffix}`
              );
            }
          }
        } else if (loaderStatus === LoaderStatus.Processing) {
          logger$2.debug('loaderStatus === LoaderStatus.Processing');
          this.loadingSpinner.setMessageForTask(
            loadingUITaskId,
            'Processing splats...'
          );
        }
      }
    };

    let downloadDone = false;
    let downloadedPercentage = 0;
    const splatBuffersAddedUIUpdate = (firstBuild, finalBuild) => {
      if (showLoadingUI) {
        if (
          (firstBuild && progressiveLoad) ||
          (finalBuild && !progressiveLoad)
        ) {
          this.loadingSpinner.removeTask(loadingUITaskId);
          if (!finalBuild && !downloadDone) this.loadingProgressBar.show();
        }
        if (progressiveLoad) {
          if (finalBuild) {
            downloadDone = true;
            this.loadingProgressBar.hide();
          } else {
            this.loadingProgressBar.setProgress(downloadedPercentage);
          }
        }
      }
    };

    const onProgress = (
      percentComplete,
      percentCompleteLabel,
      loaderStatus
    ) => {
      downloadedPercentage = percentComplete;
      onProgressUIUpdate(percentComplete, percentCompleteLabel, loaderStatus);
      if (options.onProgress)
        options.onProgress(percentComplete, percentCompleteLabel, loaderStatus);
    };

    const buildSection = (splatBuffer, firstBuild, finalBuild) => {
      if (!progressiveLoad && options.onProgress)
        options.onProgress(0, '0%', LoaderStatus.Processing);
      const addSplatBufferOptions = {
        rotation: options.rotation || options.orientation,
        position: options.position,
        scale: options.scale,
        splatAlphaRemovalThreshold: options.splatAlphaRemovalThreshold
      };
      return this.addSplatBuffers(
        [splatBuffer],
        [addSplatBufferOptions],
        finalBuild,
        firstBuild && showLoadingUI,
        showLoadingUI,
        progressiveLoad,
        progressiveLoad
      ).then(() => {
        if (!progressiveLoad && options.onProgress)
          options.onProgress(100, '100%', LoaderStatus.Processing);
        splatBuffersAddedUIUpdate(firstBuild, finalBuild);
      })
    };

    const loadFunc = progressiveLoad
      ? this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this)
      : this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this);
    return loadFunc(
      path,
      format,
      options.splatAlphaRemovalThreshold,
      buildSection.bind(this),
      onProgress,
      hideLoadingUI.bind(this),
      options.headers
    )
  }

  /**
   * Download a single splat scene, convert to splat buffer and then rebuild the viewer's splat mesh
   * by calling 'buildFunc' -- all before displaying the scene. Also sets/clears relevant instance synchronization objects,
   * and calls appropriate functions on success or failure.
   * @param {string} path Path to splat scene to be loaded
   * @param {SceneFormat} format Format of the splat scene file
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified value (valid range: 0 - 255)
   * @param {function} buildFunc Function to build the viewer's splat mesh with the downloaded splat buffer
   * @param {function} onProgress Function to be called as file data are received, or other processing occurs
   * @param {function} onException Function to be called when exception occurs
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @return {Promise}
   */
  downloadAndBuildSingleSplatSceneStandardLoad(
    path,
    format,
    splatAlphaRemovalThreshold,
    buildFunc,
    onProgress,
    onException,
    headers
  ) {
    const downloadPromise = this.downloadSplatSceneToSplatBuffer(
      path,
      splatAlphaRemovalThreshold,
      onProgress,
      false,
      undefined,
      format,
      headers
    );

    // Create a promise that can be resolved/rejected externally, with abort capability
    const downloadAndBuildPromise = abortablePromiseWithExtractedComponents(
      downloadPromise.abort ? downloadPromise.abort.bind(downloadPromise) : undefined
    );

    downloadPromise
      .then((splatBuffer) => {
        this.removeSplatSceneDownloadPromise(downloadPromise);
        return buildFunc(splatBuffer, true, true).then(() => {
          downloadAndBuildPromise.resolve();
          this.clearSplatSceneDownloadAndBuildPromise();
        })
      })
      .catch((e) => {
        if (onException) onException();
        this.clearSplatSceneDownloadAndBuildPromise();
        this.removeSplatSceneDownloadPromise(downloadPromise);
        const error =
          (e instanceof AbortedPromiseError || e.name === 'AbortError')
            ? e
            : new Error(`Viewer::addSplatScene -> Could not load file ${path}`);
        downloadAndBuildPromise.reject(error);
      });

    this.addSplatSceneDownloadPromise(downloadPromise);
    this.setSplatSceneDownloadAndBuildPromise(downloadAndBuildPromise.promise);

    return downloadAndBuildPromise.promise
  }

  /**
   * Download a single splat scene and convert to splat buffer in a progressive manner, allowing rendering as the file downloads.
   * As each section is downloaded, the viewer's splat mesh is rebuilt by calling 'buildFunc'
   * Also sets/clears relevant instance synchronization objects, and calls appropriate functions on success or failure.
   * @param {string} path Path to splat scene to be loaded
   * @param {SceneFormat} format Format of the splat scene file
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified value (valid range: 0 - 255)
   * @param {function} buildFunc Function to rebuild the viewer's splat mesh after a new splat buffer section is downloaded
   * @param {function} onDownloadProgress Function to be called as file data are received
   * @param {function} onDownloadException Function to be called when exception occurs at any point during the full download
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @return {Promise}
   */
  downloadAndBuildSingleSplatSceneProgressiveLoad(
    path,
    format,
    splatAlphaRemovalThreshold,
    buildFunc,
    onDownloadProgress,
    onDownloadException,
    headers
  ) {
    let progressiveLoadedSectionBuildCount = 0;
    let progressiveLoadedSectionBuilding = false;
    const queuedProgressiveLoadSectionBuilds = [];

    const checkAndBuildProgressiveLoadSections = () => {
      if (
        queuedProgressiveLoadSectionBuilds.length > 0 &&
        !progressiveLoadedSectionBuilding &&
        !this.isDisposingOrDisposed()
      ) {
        progressiveLoadedSectionBuilding = true;
        const queuedBuild = queuedProgressiveLoadSectionBuilds.shift();
        buildFunc(
          queuedBuild.splatBuffer,
          queuedBuild.firstBuild,
          queuedBuild.finalBuild
        ).then(() => {
          progressiveLoadedSectionBuilding = false;
          if (queuedBuild.firstBuild) {
            progressiveLoadFirstSectionBuildPromise.resolve();
          } else if (queuedBuild.finalBuild) {
            splatSceneDownloadAndBuildPromise.resolve();
            this.clearSplatSceneDownloadAndBuildPromise();
          }
          if (queuedProgressiveLoadSectionBuilds.length > 0) {
            delayedExecute(() => checkAndBuildProgressiveLoadSections());
          }
        });
      }
    };

    const onProgressiveLoadSectionProgress = (splatBuffer, finalBuild) => {
      if (!this.isDisposingOrDisposed()) {
        if (
          finalBuild ||
          queuedProgressiveLoadSectionBuilds.length === 0 ||
          splatBuffer.getSplatCount() >
            queuedProgressiveLoadSectionBuilds[0].splatBuffer.getSplatCount()
        ) {
          queuedProgressiveLoadSectionBuilds.push({
            splatBuffer,
            firstBuild: progressiveLoadedSectionBuildCount === 0,
            finalBuild
          });
          progressiveLoadedSectionBuildCount++;
          checkAndBuildProgressiveLoadSections();
        }
      }
    };

    const splatSceneDownloadPromise = this.downloadSplatSceneToSplatBuffer(
      path,
      splatAlphaRemovalThreshold,
      onDownloadProgress,
      true,
      onProgressiveLoadSectionProgress,
      format,
      headers
    );

    // Get abort handler from download promise
    const abortHandler = splatSceneDownloadPromise.abort 
      ? splatSceneDownloadPromise.abort.bind(splatSceneDownloadPromise) 
      : undefined;

    const progressiveLoadFirstSectionBuildPromise =
      abortablePromiseWithExtractedComponents(abortHandler);

    const splatSceneDownloadAndBuildPromise =
      abortablePromiseWithExtractedComponents(abortHandler);

    this.addSplatSceneDownloadPromise(splatSceneDownloadPromise);
    this.setSplatSceneDownloadAndBuildPromise(
      splatSceneDownloadAndBuildPromise.promise
    );

    splatSceneDownloadPromise
      .then(() => {
        this.removeSplatSceneDownloadPromise(splatSceneDownloadPromise);
      })
      .catch((e) => {
        logger$2.error('Viewer::addSplatScene actual error:', e);
        this.clearSplatSceneDownloadAndBuildPromise();
        this.removeSplatSceneDownloadPromise(splatSceneDownloadPromise);
        const error =
          (e instanceof AbortedPromiseError || e.name === 'AbortError')
            ? e
            : new Error(
                `Viewer::addSplatScene -> Could not load one or more scenes: ${e.message}`
              );
        progressiveLoadFirstSectionBuildPromise.reject(error);
        if (onDownloadException) onDownloadException(error);
      });

    return progressiveLoadFirstSectionBuildPromise.promise
  }

  /**
   * Add multiple splat scenes to the viewer and display any loading UI if appropriate.
   * @param {Array<object>} sceneOptions Array of per-scene options: {
   *
   *         path: Path to splat scene to be loaded
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   *
   *         headers:                    Optional HTTP headers to be sent along with splat requests
   *
   *         format (SceneFormat)        Optional, the format of the scene data (.ply, .ksplat, .splat). If not present, the
   *                                     file extension in 'path' will be used to determine the format (if it is present)
   * }
   * @param {boolean} showLoadingUI Display a loading spinner while the scene is loading, defaults to true
   * @param {function} onProgress Function to be called as file data are received
   * @return {Promise}
   */
  addSplatScenes(sceneOptions, showLoadingUI = true, onProgress = undefined) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot add splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot add splat scene after dispose() is called.')
    }

    const fileCount = sceneOptions.length;
    const percentComplete = [];

    let loadingUITaskId;
    if (showLoadingUI) {
      this.loadingSpinner.removeAllTasks();
      loadingUITaskId = this.loadingSpinner.addTask('Downloading...');
    }

    const onLoadProgress = (fileIndex, percent, percentLabel, loaderStatus) => {
      percentComplete[fileIndex] = percent;
      let totalPercent = 0;
      for (let i = 0; i < fileCount; i++)
        totalPercent += percentComplete[i] || 0;
      totalPercent = totalPercent / fileCount;
      percentLabel = `${totalPercent.toFixed(2)}%`;
      if (showLoadingUI) {
        if (loaderStatus === LoaderStatus.Downloading) {
          this.loadingSpinner.setMessageForTask(
            loadingUITaskId,
            totalPercent == 100
              ? `Download complete!`
              : `Downloading: ${percentLabel}`
          );
        }
      }
      if (onProgress) onProgress(totalPercent, percentLabel, loaderStatus);
    };

    const abortController = new AbortController();
    const signal = abortController.signal;
    this.addSplatSceneDownloadController(abortController);

    const downloadPromises = [];
    for (let i = 0; i < sceneOptions.length; i++) {
      const options = sceneOptions[i];
      const format =
        options.format !== undefined && options.format !== null
          ? options.format
          : sceneFormatFromPath(options.path);
      const downloadPromise = this.downloadSplatSceneToSplatBuffer(
        options.path,
        options.splatAlphaRemovalThreshold,
        onLoadProgress.bind(this, i),
        false,
        undefined,
        format,
        options.headers,
        signal
      );
      downloadPromises.push(downloadPromise);
    }

    const downloadAndBuildPromise = Promise.all(downloadPromises)
      .then((splatBuffers) => {
        if (showLoadingUI) this.loadingSpinner.removeTask(loadingUITaskId);
        if (onProgress) onProgress(0, '0%', LoaderStatus.Processing);
        return this.addSplatBuffers(
          splatBuffers,
          sceneOptions,
          true,
          showLoadingUI,
          showLoadingUI,
          false,
          false
        ).then(() => {
          if (onProgress) onProgress(100, '100%', LoaderStatus.Processing);
          this.clearSplatSceneDownloadAndBuildPromise();
        });
      })
      .catch((e) => {
        if (showLoadingUI) this.loadingSpinner.removeTask(loadingUITaskId);
        this.clearSplatSceneDownloadAndBuildPromise();
        const error =
          e.name === 'AbortError'
            ? e
            : new Error(
                `Viewer::addSplatScenes -> Could not load one or more splat scenes.`
              );
        throw error;
      })
      .finally(() => {
        this.removeSplatSceneDownloadController(abortController);
      });

    this.setSplatSceneDownloadAndBuildPromise(downloadAndBuildPromise);
    return downloadAndBuildPromise
  }

  /**
   * Download a splat scene and convert to SplatBuffer instance.
   * @param {string} path Path to splat scene to be loaded
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified
   *                                            value (valid range: 0 - 255), defaults to 1
   *
   * @param {function} onProgress Function to be called as file data are received
   * @param {boolean} progressiveBuild Construct file sections into splat buffers as they are downloaded
   * @param {function} onSectionBuilt Function to be called when new section is added to the file
   * @param {string} format File format of the scene
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @param {AbortSignal} signal Optional AbortSignal to cancel the download
   * @return {AbortablePromise}
   */
  downloadSplatSceneToSplatBuffer(
    path,
    splatAlphaRemovalThreshold = 1,
    onProgress = undefined,
    progressiveBuild = false,
    onSectionBuilt = undefined,
    format,
    headers
  ) {
    const optimizeSplatData = progressiveBuild ? false : this.optimizeSplatData;
    try {
      if (format === SceneFormat.Ply) {
        return PlyLoader.loadFromURL(
          path,
          onProgress,
          progressiveBuild,
          onSectionBuilt,
          splatAlphaRemovalThreshold,
          this.inMemoryCompressionLevel,
          optimizeSplatData,
          this.sphericalHarmonicsDegree,
          headers
        )
      }
    } catch (e) {
      if (e instanceof DirectLoadError) {
        throw new Error(
          'File type or server does not support progressive loading.'
        )
      } else {
        throw e
      }
    }

    throw new Error(
      `Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${path}`
    )
  }

  static isProgressivelyLoadable(format) {
    return format === SceneFormat.Ply
  }

  /**
   * Add one or more instances of SplatBuffer to the SplatMesh instance managed by the viewer and set up the sorting web worker.
   * This function will terminate the existing sort worker (if there is one).
   */
  addSplatBuffers = (
    splatBuffers,
    splatBufferOptions = [],
    finalBuild = true,
    showLoadingUI = true,
    showLoadingUIForSplatTreeBuild = true,
    replaceExisting = false,
    enableRenderBeforeFirstSort = false,
    preserveVisibleRegion = true
  ) => {
    if (this.isDisposingOrDisposed()) return Promise.resolve()

    let splatProcessingTaskId = null;
    const removeSplatProcessingTask = () => {
      if (splatProcessingTaskId !== null) {
        this.loadingSpinner.removeTask(splatProcessingTaskId);
        splatProcessingTaskId = null;
      }
    };

    this.splatRenderReady = false;
    return new Promise((resolve) => {
      if (showLoadingUI) {
        splatProcessingTaskId = this.loadingSpinner.addTask(
          'Processing splats...'
        );
      }
      delayedExecute(() => {
        if (this.isDisposingOrDisposed()) {
          resolve();
        } else {
          const buildResults = this.addSplatBuffersToMesh(
            splatBuffers,
            splatBufferOptions,
            finalBuild,
            showLoadingUIForSplatTreeBuild,
            replaceExisting,
            preserveVisibleRegion
          );

          const maxSplatCount = this.splatMesh.getMaxSplatCount();
          if (
            this.sortWorker &&
            this.sortWorker.maxSplatCount !== maxSplatCount
          )
            this.disposeSortWorker();
          // If we aren't calculating the splat distances from the center on the GPU, the sorting worker needs
          // splat centers and transform indexes so that it can calculate those distance values.
          if (!this.gpuAcceleratedSort) {
            this.preSortMessages.push({
              centers: buildResults.centers.buffer,
              sceneIndexes: buildResults.sceneIndexes.buffer,
              range: {
                from: buildResults.from,
                to: buildResults.to,
                count: buildResults.count
              }
            });
          }
          const sortWorkerSetupPromise =
            !this.sortWorker && maxSplatCount > 0
              ? this.setupSortWorker(this.splatMesh)
              : Promise.resolve();
          sortWorkerSetupPromise.then(() => {
            if (this.isDisposingOrDisposed()) return
            this.runSplatSort(true, true).then((sortRunning) => {
              if (!this.sortWorker || !sortRunning) {
                this.splatRenderReady = true;
                removeSplatProcessingTask();
                resolve();
              } else {
                if (enableRenderBeforeFirstSort) {
                  this.splatRenderReady = true;
                } else {
                  this.runAfterNextSort.push(() => {
                    this.splatRenderReady = true;
                  });
                }
                this.runAfterNextSort.push(() => {
                  removeSplatProcessingTask();
                  resolve();
                });
              }
            });
          });
        }
      }, true);
    })
  }

  /**
   * Add one or more instances of SplatBuffer to the SplatMesh instance managed by the viewer. By default, this function is additive;
   * all splat buffers contained by the viewer's splat mesh before calling this function will be preserved. This behavior can be
   * changed by passing 'true' for 'replaceExisting'.
   * @param {Array<SplatBuffer>} splatBuffers SplatBuffer instances
   * @param {Array<object>} splatBufferOptions Array of options objects: {
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   * }
   * @param {boolean} finalBuild Will the splat mesh be in its final state after this build?
   * @param {boolean} showLoadingUIForSplatTreeBuild Whether or not to show the loading spinner during construction of the splat tree.
   * @return {object} Object containing info about the splats that are updated
   */
  addSplatBuffersToMesh = (function () {
    let splatOptimizingTaskId;

    return function (
      splatBuffers,
      splatBufferOptions,
      finalBuild = true,
      showLoadingUIForSplatTreeBuild = false,
      replaceExisting = false,
      preserveVisibleRegion = true
    ) {
      if (this.isDisposingOrDisposed()) return
      let allSplatBuffers = [];
      let allSplatBufferOptions = [];
      if (!replaceExisting) {
        allSplatBuffers =
          this.splatMesh.scenes.map((scene) => scene.splatBuffer) || [];
        allSplatBufferOptions = this.splatMesh.sceneOptions
          ? this.splatMesh.sceneOptions.map((sceneOptions) => sceneOptions)
          : [];
      }
      allSplatBuffers.push(...splatBuffers);
      allSplatBufferOptions.push(...splatBufferOptions);
      if (this.renderer) this.splatMesh.setRenderer(this.renderer);
      const onSplatTreeIndexesUpload = (finished) => {
        if (this.isDisposingOrDisposed()) return
        const splatCount = this.splatMesh.getSplatCount();
        if (
          showLoadingUIForSplatTreeBuild &&
          splatCount >= MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER
        ) {
          if (!finished && !splatOptimizingTaskId) {
            this.loadingSpinner.setMinimized(true, true);
            splatOptimizingTaskId = this.loadingSpinner.addTask(
              'Optimizing data structures...'
            );
          }
        }
      };
      const onSplatTreeReady = (finished) => {
        if (this.isDisposingOrDisposed()) return
        if (finished && splatOptimizingTaskId) {
          this.loadingSpinner.removeTask(splatOptimizingTaskId);
          splatOptimizingTaskId = null;
        }
      };
      const buildResults = this.splatMesh.build(
        allSplatBuffers,
        allSplatBufferOptions,
        true,
        finalBuild,
        onSplatTreeIndexesUpload,
        onSplatTreeReady,
        preserveVisibleRegion
      );
      if (finalBuild && this.freeIntermediateSplatData)
        this.splatMesh.freeIntermediateSplatData();
      return buildResults
    }
  })()

  /**
   * Set up the splat sorting web worker.
   * @param {SplatMesh} splatMesh SplatMesh instance that contains the splats to be sorted
   * @return {Promise}
   */
  async setupSortWorker(splatMesh) {
    if (this.isDisposingOrDisposed()) return
    const DistancesArrayType = this.integerBasedSort
      ? Int32Array
      : Float32Array;
    const splatCount = splatMesh.getSplatCount();
    const maxSplatCount = splatMesh.getMaxSplatCount();
    this.sortWorker = await createSortWorker(
      maxSplatCount,
      this.sharedMemoryForWorkers,
      this.enableSIMDInSort,
      this.integerBasedSort,
      this.splatMesh.dynamicMode,
      this.splatSortDistanceMapPrecision
    );
    return new Promise((resolve) => {
      this.sortWorker.onmessage = (e) => {
        if (e.data.sortDone) {
          this.sortRunning = false;
          Array.from(
            { length: this.gaussianSplatCount },
            (_, i) => i
          );
          if (this.sharedMemoryForWorkers) {
            this.splatMesh.updateRenderIndexes(
              this.sortWorkerSortedIndexes,
              e.data.splatRenderCount
            );
          } else {
            const sortedIndexes = new Uint32Array(
              e.data.sortedIndexes.buffer,
              0,
              e.data.splatRenderCount
            );
            this.splatMesh.updateRenderIndexes(
              sortedIndexes,
              e.data.splatRenderCount
            );
          }

          this.lastSplatSortCount = this.splatSortCount;

          this.lastSortTime = e.data.sortTime;
          this.sortPromiseResolver();
          this.sortPromiseResolver = null;
          this.forceRenderNextFrame();
          if (this.runAfterNextSort.length > 0) {
            this.runAfterNextSort.forEach((func) => {
              func();
            });
            this.runAfterNextSort.length = 0;
          }
        } else if (e.data.sortCanceled) {
          this.sortRunning = false;
        } else if (e.data.sortSetupPhase1Complete) {
          if (this.logLevel >= LogLevel.Info)
            logger$2.info('Sorting web worker WASM setup complete.');
          if (this.sharedMemoryForWorkers) {
            this.sortWorkerSortedIndexes = new Uint32Array(
              e.data.sortedIndexesBuffer,
              e.data.sortedIndexesOffset,
              maxSplatCount
            );
            this.sortWorkerIndexesToSort = new Uint32Array(
              e.data.indexesToSortBuffer,
              e.data.indexesToSortOffset,
              maxSplatCount
            );
            this.sortWorkerPrecomputedDistances = new DistancesArrayType(
              e.data.precomputedDistancesBuffer,
              e.data.precomputedDistancesOffset,
              maxSplatCount
            );
            this.sortWorkerTransforms = new Float32Array(
              e.data.transformsBuffer,
              e.data.transformsOffset,
              Constants$1.MaxScenes * 16
            );
          } else {
            this.sortWorkerIndexesToSort = new Uint32Array(maxSplatCount);
            this.sortWorkerPrecomputedDistances = new DistancesArrayType(
              maxSplatCount
            );
            this.sortWorkerTransforms = new Float32Array(
              Constants$1.MaxScenes * 16
            );
          }
          for (let i = 0; i < splatCount; i++)
            this.sortWorkerIndexesToSort[i] = i;
          this.sortWorker.maxSplatCount = maxSplatCount;

          if (this.logLevel >= LogLevel.Info) {
            logger$2.info('Sorting web worker ready.');
            const splatDataTextures = this.splatMesh.getSplatDataTextures();
            const covariancesTextureSize = splatDataTextures.covariances.size;
            const centersColorsTextureSize = splatDataTextures.centerColors.size;
            logger$2.info(
              'Covariances texture size: ' +
                covariancesTextureSize.x +
                ' x ' +
                covariancesTextureSize.y
            );
            logger$2.info(
              'Centers/colors texture size: ' +
                centersColorsTextureSize.x +
                ' x ' +
                centersColorsTextureSize.y
            );
          }

          resolve();
        }
      };
    })
  }

  disposeSortWorker() {
    if (this.sortWorker) this.sortWorker.terminate();
    this.sortWorker = null;
    this.sortPromise = null;
    if (this.sortPromiseResolver) {
      this.sortPromiseResolver();
      this.sortPromiseResolver = null;
    }
    this.preSortMessages = [];
    this.sortRunning = false;
  }

  removeSplatScene(indexToRemove, showLoadingUI = true) {
    return this.removeSplatScenes([indexToRemove], showLoadingUI)
  }

  removeSplatScenes(indexesToRemove, showLoadingUI = true) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot remove splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot remove splat scene after dispose() is called.')
    }

    let sortPromise;

    this.splatSceneRemovalPromise = new Promise((resolve, reject) => {
      let revmovalTaskId;

      if (showLoadingUI) {
        this.loadingSpinner.removeAllTasks();
        this.loadingSpinner.show();
        revmovalTaskId = this.loadingSpinner.addTask('Removing splat scene...');
      }

      const checkAndHideLoadingUI = () => {
        if (showLoadingUI) {
          this.loadingSpinner.hide();
          this.loadingSpinner.removeTask(revmovalTaskId);
        }
      };

      const onDone = (error) => {
        checkAndHideLoadingUI();
        this.splatSceneRemovalPromise = null;
        if (!error) resolve();
        else reject(error);
      };

      const checkForEarlyExit = () => {
        if (this.isDisposingOrDisposed()) {
          onDone();
          return true
        }
        return false
      };

      sortPromise = this.sortPromise || Promise.resolve();
      sortPromise.then(() => {
        if (checkForEarlyExit()) return
        const savedSplatBuffers = [];
        const savedSceneOptions = [];
        const savedSceneTransformComponents = [];
        for (let i = 0; i < this.splatMesh.scenes.length; i++) {
          let shouldRemove = false;
          for (let indexToRemove of indexesToRemove) {
            if (indexToRemove === i) {
              shouldRemove = true;
              break
            }
          }
          if (!shouldRemove) {
            const scene = this.splatMesh.scenes[i];
            savedSplatBuffers.push(scene.splatBuffer);
            savedSceneOptions.push(this.splatMesh.sceneOptions[i]);
            savedSceneTransformComponents.push({
              position: scene.position.clone(),
              quaternion: scene.quaternion.clone(),
              scale: scene.scale.clone()
            });
          }
        }
        this.disposeSortWorker();
        this.splatMesh.dispose();
        this.sceneRevealMode = SceneRevealMode.Instant;
        this.createSplatMesh();
        this.addSplatBuffers(
          savedSplatBuffers,
          savedSceneOptions,
          true,
          false,
          true
        )
          .then(() => {
            if (checkForEarlyExit()) return
            checkAndHideLoadingUI();
            this.splatMesh.scenes.forEach((scene, index) => {
              scene.position.copy(savedSceneTransformComponents[index].position);
              scene.quaternion.copy(
                savedSceneTransformComponents[index].quaternion
              );
              scene.scale.copy(savedSceneTransformComponents[index].scale);
            });
            this.splatMesh.updateTransforms();
            this.splatRenderReady = false;

            this.runSplatSort(true).then(() => {
              if (checkForEarlyExit()) {
                this.splatRenderReady = true;
                return
              }
              sortPromise = this.sortPromise || Promise.resolve();
              sortPromise.then(() => {
                this.splatRenderReady = true;
                onDone();
              });
            });
          })
          .catch((e) => {
            onDone(e);
          });
      });
    });

    return this.splatSceneRemovalPromise
  }

  /**
   * Start self-driven mode
   */
  start() {
    if (this.selfDrivenMode) {
      this.requestFrameId = requestAnimationFrame(this.selfDrivenUpdateFunc);
      this.selfDrivenModeRunning = true;
    } else {
      throw new Error('Cannot start viewer unless it is in self driven mode.')
    }
  }

  /**
   * Stop self-driven mode
   */
  stop() {
    if (this.selfDrivenMode && this.selfDrivenModeRunning) {
      cancelAnimationFrame(this.requestFrameId);
      this.selfDrivenModeRunning = false;
    }
  }

  /**
   * Dispose of all resources held directly and indirectly by this viewer.
   */
  async dispose() {
    if (this.isDisposingOrDisposed()) return this.disposePromise

    for (let controller of this.splatSceneDownloadControllers) {
        controller.abort();
    }

    let waitPromises = [];
    if (this.sortPromise) {
      waitPromises.push(this.sortPromise);
    }

    this.disposing = true;
    this.disposePromise = Promise.all(waitPromises).finally(() => {
      this.stop();
      if (this.orthographicControls) {
        this.orthographicControls.dispose();
        this.orthographicControls = null;
      }
      if (this.perspectiveControls) {
        this.perspectiveControls.dispose();
        this.perspectiveControls = null;
      }
      this.controls = null;
      if (this.splatMesh) {
        this.splatMesh.dispose();
        this.splatMesh = null;
      }
      if (this.avatarMesh) {
        disposeAllMeshes(this.avatarMesh);
        this.avatarMesh = null;
      }
      if (this.sceneHelper) {
        this.sceneHelper.dispose();
        this.sceneHelper = null;
      }
      if (this.resizeObserver) {
        this.resizeObserver.unobserve(this.rootElement);
        this.resizeObserver = null;
      }
      this.disposeSortWorker();
      this.removeEventHandlers();

      this.loadingSpinner.removeAllTasks();
      this.loadingSpinner.setContainer(null);
      this.loadingProgressBar.hide();
      this.loadingProgressBar.setContainer(null);
      // this.infoPanel.setContainer(null)

      this.camera = null;
      this.threeScene = null;
      this.splatRenderReady = false;
      this.initialized = false;
      if (this.renderer) {
        if (!this.usingExternalRenderer) {
          this.rootElement.removeChild(this.renderer.domElement);
          this.renderer.dispose();
        }
        this.renderer = null;
      }

      if (!this.usingExternalRenderer) ;

      this.sortWorkerSortedIndexes = null;
      this.sortWorkerIndexesToSort = null;
      this.sortWorkerPrecomputedDistances = null;
      this.sortWorkerTransforms = null;
      this.disposed = true;
      this.disposing = false;
      this.disposePromise = null;
    });
    return this.disposePromise
  }
  vsyncNum = 4
  selfDrivenUpdate() {
    if (this.selfDrivenMode) {
        this.requestFrameId = requestAnimationFrame(this.selfDrivenUpdateFunc);

        // const currentTime = getCurrentTime();
        // const calcDelta = currentTime - this.lastTime;
        // if (calcDelta >= 1.0 / 30.0) {
        //     this.lastTime = currentTime;
        // } else {
        //     return
        // }
    }
    this.vsyncCount++;

    if (this.vsyncCount < this.vsyncNum) {
      return
    }

    this.vsyncCount = 0;

    this.update();
    if (this.shouldRender()) {
      //add expression

      this.render();
      this.consecutiveRenderFrames++;
    } else {
      this.consecutiveRenderFrames = 0;
    }
    this.renderNextFrame = false;
  }

  forceRenderNextFrame() {
    this.renderNextFrame = true;
  }

  shouldRender = (function () {
    let renderCount = 0;
    const lastCameraPosition = new THREE.Vector3();
    const lastCameraOrientation = new THREE.Quaternion();
    const changeEpsilon = 0.0001;

    return function () {
      if (
        !this.initialized ||
        !this.splatRenderReady ||
        this.isDisposingOrDisposed()
      )
        return false

      let shouldRender = false;
      let cameraChanged = false;
      if (this.camera) {
        const cp = this.camera.position;
        const co = this.camera.quaternion;
        cameraChanged =
          Math.abs(cp.x - lastCameraPosition.x) > changeEpsilon ||
          Math.abs(cp.y - lastCameraPosition.y) > changeEpsilon ||
          Math.abs(cp.z - lastCameraPosition.z) > changeEpsilon ||
          Math.abs(co.x - lastCameraOrientation.x) > changeEpsilon ||
          Math.abs(co.y - lastCameraOrientation.y) > changeEpsilon ||
          Math.abs(co.z - lastCameraOrientation.z) > changeEpsilon ||
          Math.abs(co.w - lastCameraOrientation.w) > changeEpsilon;
      }

      shouldRender =
        this.renderMode !== RenderMode.Never &&
        (renderCount === 0 ||
          this.splatMesh.visibleRegionChanging ||
          cameraChanged ||
          this.renderMode === RenderMode.Always ||
          this.dynamicMode === true ||
          this.renderNextFrame);

      if (this.camera) {
        lastCameraPosition.copy(this.camera.position);
        lastCameraOrientation.copy(this.camera.quaternion);
      }

      renderCount++;
      return shouldRender
    }
  })()

  render = (function () {
    return function () {
      if (
        !this.initialized ||
        !this.splatRenderReady ||
        this.isDisposingOrDisposed()
      )
        return

      const hasRenderables = (threeScene) => {
        for (let child of threeScene.children) {
          if (child.visible) return true
        }
        return false
      };

      const savedAuoClear = this.renderer.autoClear;
      if (hasRenderables(this.threeScene)) {
        this.renderer.render(this.threeScene, this.camera);
        this.renderer.autoClear = false;
      }
      this.renderer.render(this.splatMesh, this.camera);
      this.renderer.autoClear = false;
      if (this.sceneHelper.getFocusMarkerOpacity() > 0.0)
        this.renderer.render(this.sceneHelper.focusMarker, this.camera);
      if (this.showControlPlane)
        this.renderer.render(this.sceneHelper.controlPlane, this.camera);
      this.renderer.autoClear = savedAuoClear;
    }
  })()


  update(renderer, camera) {
    // this.frame++
    const fpsDiv = document.getElementById('fps');
    if (fpsDiv) {
      fpsDiv.textContent = `FPS: ${this.currentFPS}`;
    }

    if(this.frame >= this.totalFrames) 
        this.frame = 0;
    
    if (this.dropInMode) this.updateForDropInMode(renderer, camera);

    if (
      !this.initialized ||
      !this.splatRenderReady ||
      this.isDisposingOrDisposed()
    )
      return

    if (this.controls) {
      this.controls.update();
      if (this.camera.isOrthographicCamera && !this.usingExternalCamera) {
        Viewer.setCameraPositionFromZoom(
          this.camera,
          this.camera,
          this.controls
        );
      }
    }
    this.runMorphUpdate();
    this.runSplatSort(true,true);

    this.updateForRendererSizeChanges();
    this.updateSplatMesh();
    this.updateMeshCursor();
    this.updateFPS();
    this.timingSensitiveUpdates();
    // this.updateInfoPanel()
    this.updateControlPlane();
  }

  sortedIndexes
  updateForDropInMode(renderer, camera) {
    this.renderer = renderer;
    if (this.splatMesh) this.splatMesh.setRenderer(this.renderer);
    this.camera = camera;
    if (this.controls) this.controls.object = camera;
    this.init();
  }

  lastCalcTime = getCurrentTime()
  fpsFrameCount = 0
  updateFPS = () => {
    if (
      this.consecutiveRenderFrames >
      CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION
    ) {
      const currentTime = getCurrentTime();
      const calcDelta = currentTime - this.lastCalcTime;
      if (calcDelta >= 1.0) {
        this.currentFPS = this.fpsFrameCount;
        this.fpsFrameCount = 0;
        this.lastCalcTime = currentTime;
      } else {
        this.fpsFrameCount++;
      }
    } else {
      this.currentFPS = null;
    }
  }

  updateForRendererSizeChanges = (function () {
    const lastRendererSize = new THREE.Vector2();
    const currentRendererSize = new THREE.Vector2();
    let lastCameraOrthographic;

    return function () {
      if (!this.usingExternalCamera) {
        this.renderer.getSize(currentRendererSize);
        if (
          lastCameraOrthographic === undefined ||
          lastCameraOrthographic !== this.camera.isOrthographicCamera ||
          currentRendererSize.x !== lastRendererSize.x ||
          currentRendererSize.y !== lastRendererSize.y
        ) {
          if (this.camera.isOrthographicCamera) {
            this.camera.left = -currentRendererSize.x / 2.0;
            this.camera.right = currentRendererSize.x / 2.0;
            this.camera.top = currentRendererSize.y / 2.0;
            this.camera.bottom = -currentRendererSize.y / 2.0;
          } else {
            this.camera.aspect = currentRendererSize.x / currentRendererSize.y;
          }
          this.camera.updateProjectionMatrix();
          lastRendererSize.copy(currentRendererSize);
          lastCameraOrthographic = this.camera.isOrthographicCamera;
        }
      }
    }
  })()

  timingSensitiveUpdates = (function () {
    let lastUpdateTime;

    return function () {
      const currentTime = getCurrentTime();
      if (!lastUpdateTime) lastUpdateTime = currentTime;
      const timeDelta = currentTime - lastUpdateTime;

      this.updateCameraTransition(currentTime);
      this.updateFocusMarker(timeDelta);

      lastUpdateTime = currentTime;
    }
  })()

  tempCameraTarget = new THREE.Vector3()
  toPreviousTarget = new THREE.Vector3()
  toNextTarget = new THREE.Vector3()
  updateCameraTransition = (currentTime) => {
    if (this.transitioningCameraTarget) {
      this.toPreviousTarget
        .copy(this.previousCameraTarget)
        .sub(this.camera.position)
        .normalize();
      this.toNextTarget
        .copy(this.nextCameraTarget)
        .sub(this.camera.position)
        .normalize();
      const rotationAngle = Math.acos(
        this.toPreviousTarget.dot(this.toNextTarget)
      );
      const rotationSpeed = (rotationAngle / (Math.PI / 3)) * 0.65 + 0.3;
      const t =
        (rotationSpeed / rotationAngle) *
        (currentTime - this.transitioningCameraTargetStartTime);
      this.tempCameraTarget
        .copy(this.previousCameraTarget)
        .lerp(this.nextCameraTarget, t);
      this.camera.lookAt(this.tempCameraTarget);
      this.controls.target.copy(this.tempCameraTarget);
      if (t >= 1.0) {
        this.transitioningCameraTarget = false;
      }
    }
  }

  updateFocusMarker = (function () {
    const renderDimensions = new THREE.Vector2();
    let wasTransitioning = false;

    return function (timeDelta) {
      this.getRenderDimensions(renderDimensions);
      if (this.transitioningCameraTarget) {
        this.sceneHelper.setFocusMarkerVisibility(true);
        const currentFocusMarkerOpacity = Math.max(
          this.sceneHelper.getFocusMarkerOpacity(),
          0.0
        );
        let newFocusMarkerOpacity = Math.min(
          currentFocusMarkerOpacity + FOCUS_MARKER_FADE_IN_SPEED * timeDelta,
          1.0
        );
        this.sceneHelper.setFocusMarkerOpacity(newFocusMarkerOpacity);
        this.sceneHelper.updateFocusMarker(
          this.nextCameraTarget,
          this.camera,
          renderDimensions
        );
        wasTransitioning = true;
        this.forceRenderNextFrame();
      } else {
        let currentFocusMarkerOpacity;
        if (wasTransitioning) currentFocusMarkerOpacity = 1.0;
        else
          currentFocusMarkerOpacity = Math.min(
            this.sceneHelper.getFocusMarkerOpacity(),
            1.0
          );
        if (currentFocusMarkerOpacity > 0) {
          this.sceneHelper.updateFocusMarker(
            this.nextCameraTarget,
            this.camera,
            renderDimensions
          );
          let newFocusMarkerOpacity = Math.max(
            currentFocusMarkerOpacity - FOCUS_MARKER_FADE_OUT_SPEED * timeDelta,
            0.0
          );
          this.sceneHelper.setFocusMarkerOpacity(newFocusMarkerOpacity);
          if (newFocusMarkerOpacity === 0.0)
            this.sceneHelper.setFocusMarkerVisibility(false);
        }
        if (currentFocusMarkerOpacity > 0.0) this.forceRenderNextFrame();
        wasTransitioning = false;
      }
    }
  })()

  updateMeshCursor = (function () {
    const outHits = [];
    const renderDimensions = new THREE.Vector2();

    return function () {
      if (this.showMeshCursor) {
        this.forceRenderNextFrame();
        this.getRenderDimensions(renderDimensions);
        outHits.length = 0;
        this.raycaster.setFromCameraAndScreenPosition(
          this.camera,
          this.mousePosition,
          renderDimensions
        );
        this.raycaster.intersectSplatMesh(this.splatMesh, outHits);
        if (outHits.length > 0) {
          this.sceneHelper.setMeshCursorVisibility(true);
          this.sceneHelper.positionAndOrientMeshCursor(
            outHits[0].origin,
            this.camera
          );
        } else {
          this.sceneHelper.setMeshCursorVisibility(false);
        }
      } else {
        if (this.sceneHelper.getMeschCursorVisibility())
          this.forceRenderNextFrame();
        this.sceneHelper.setMeshCursorVisibility(false);
      }
    }
  })()

  updateInfoPanel = (function () {
    const renderDimensions = new THREE.Vector2();

    return function () {
      if (!this.showInfo) return
      const splatCount = this.splatMesh.getSplatCount();
      this.getRenderDimensions(renderDimensions);
      this.controls ? this.controls.target : null;
      this.showMeshCursor
        ? this.sceneHelper.meshCursor.position
        : null;
      splatCount > 0 ? (this.splatRenderCount / splatCount) * 100 : 0;
      // this.infoPanel.update(
      //   renderDimensions,
      //   this.camera.position,
      //   cameraLookAtPosition,
      //   this.camera.up,
      //   this.camera.isOrthographicCamera,
      //   meshCursorPosition,
      //   this.currentFPS || 'N/A',
      //   splatCount,
      //   this.splatRenderCount,
      //   splatRenderCountPct,
      //   this.lastSortTime,
      //   this.focalAdjustment,
      //   this.splatMesh.getSplatScale(),
      //   this.splatMesh.getPointCloudModeEnabled()
      // )
    }
  })()

  updateControlPlane() {
    if (this.showControlPlane) {
      this.sceneHelper.setControlPlaneVisibility(true);
      this.sceneHelper.positionAndOrientControlPlane(
        this.controls.target,
        this.camera.up
      );
    } else {
      this.sceneHelper.setControlPlaneVisibility(false);
    }
  }

  mvpMatrix = new THREE.Matrix4()
  cameraPositionArray = []
  lastSortViewDir = new THREE.Vector3(0, 0, -1)
  sortViewDir = new THREE.Vector3(0, 0, -1)
  lastSortViewPos = new THREE.Vector3()
  sortViewOffset = new THREE.Vector3()
  queuedSorts = []

  partialSorts = [
    {
      angleThreshold: 0.55,
      sortFractions: [0.125, 0.33333, 0.75]
    },
    {
      angleThreshold: 0.65,
      sortFractions: [0.33333, 0.66667]
    },
    {
      angleThreshold: 0.8,
      sortFractions: [0.5]
    }
  ]
  runSplatSort = (force = false, forceSortAll = false) => {
    if (!this.initialized) return Promise.resolve(false)
    if (this.sortRunning) return Promise.resolve(true)
    if (this.splatMesh.getSplatCount() <= 0) {
      this.splatRenderCount = 0;
      return Promise.resolve(false)
    }

    let angleDiff = 0;
    let positionDiff = 0;
    let needsRefreshForRotation = false;
    let needsRefreshForPosition = false;

    this.sortViewDir.set(0, 0, -1).applyQuaternion(this.camera.quaternion);
    angleDiff = this.sortViewDir.dot(this.lastSortViewDir);
    positionDiff = this.sortViewOffset
      .copy(this.camera.position)
      .sub(this.lastSortViewPos)
      .length();

    if (!force) {
      if (!this.splatMesh.dynamicMode && this.queuedSorts.length === 0) {
        if (angleDiff <= 0.99) needsRefreshForRotation = true;
        if (positionDiff >= 1.0) needsRefreshForPosition = true;
        if (!needsRefreshForRotation && !needsRefreshForPosition)
          return Promise.resolve(false)
      }
    }

    this.sortRunning = true;
    let { splatRenderCount, shouldSortAll } = this.gatherSceneNodesForSort();
    shouldSortAll = shouldSortAll || forceSortAll;
    this.splatRenderCount = splatRenderCount;

    this.mvpMatrix.copy(this.camera.matrixWorld).invert();
    const mvpCamera = this.perspectiveCamera || this.camera;
    this.mvpMatrix.premultiply(mvpCamera.projectionMatrix);
    if (!this.splatMesh.dynamicMode)
      this.mvpMatrix.multiply(this.splatMesh.matrixWorld);

    let gpuAcceleratedSortPromise = Promise.resolve(true);
    if (
      this.gpuAcceleratedSort &&
      (this.queuedSorts.length <= 1 || this.queuedSorts.length % 2 === 0)
    ) {
      gpuAcceleratedSortPromise = this.splatMesh.computeDistancesOnGPU(
        this.mvpMatrix,
        this.sortWorkerPrecomputedDistances
      );
    }

    gpuAcceleratedSortPromise.then(() => {
      if (this.queuedSorts.length === 0) {
        if (this.splatMesh.dynamicMode || shouldSortAll) {
          this.queuedSorts.push(this.splatRenderCount);
        } else {
          for (let partialSort of this.partialSorts) {
            if (angleDiff < partialSort.angleThreshold) {
              for (let sortFraction of partialSort.sortFractions) {
                this.queuedSorts.push(
                  Math.floor(this.splatRenderCount * sortFraction)
                );
              }
              break
            }
          }
          this.queuedSorts.push(this.splatRenderCount);
        }
      }
      let sortCount = Math.min(this.queuedSorts.shift(), this.splatRenderCount);
      this.splatSortCount = sortCount;

      this.cameraPositionArray[0] = this.camera.position.x;
      this.cameraPositionArray[1] = this.camera.position.y;
      this.cameraPositionArray[2] = this.camera.position.z;

      const sortMessage = {
        modelViewProj: this.mvpMatrix.elements,
        cameraPosition: this.cameraPositionArray,
        splatRenderCount: this.splatRenderCount,
        splatSortCount: sortCount,
        usePrecomputedDistances: this.gpuAcceleratedSort
      };
      if (this.splatMesh.dynamicMode) {
        this.splatMesh.fillTransformsArray(this.sortWorkerTransforms);
      }
      if (!this.sharedMemoryForWorkers) {
        sortMessage.indexesToSort = this.sortWorkerIndexesToSort;
        sortMessage.transforms = this.sortWorkerTransforms;
        if (this.gpuAcceleratedSort) {
          sortMessage.precomputedDistances = this.sortWorkerPrecomputedDistances;
        }
      }

      this.sortPromise = new Promise((resolve) => {
        this.sortPromiseResolver = resolve;
      });

      if (this.preSortMessages.length > 0) {
        this.preSortMessages.forEach((message) => {
          this.sortWorker.postMessage(message);
        });
        this.preSortMessages = [];
      }
      this.sortWorker.postMessage({
        sort: sortMessage
      });

      if (this.queuedSorts.length === 0) {
        this.lastSortViewPos.copy(this.camera.position);
        this.lastSortViewDir.copy(this.sortViewDir);
      }

      return true
    });

    return gpuAcceleratedSortPromise
  }

  /**
   * Determine which splats to render by checking which are inside or close to the view frustum
   */
  gatherSceneNodesForSort = (function () {
    const nodeRenderList = [];
    let allSplatsSortBuffer = null;
    const tempVectorYZ = new THREE.Vector3();
    const tempVectorXZ = new THREE.Vector3();
    const tempVector = new THREE.Vector3();
    const modelView = new THREE.Matrix4();
    const baseModelView = new THREE.Matrix4();
    const sceneTransform = new THREE.Matrix4();
    const renderDimensions = new THREE.Vector3();
    const forward = new THREE.Vector3(0, 0, -1);

    const tempMax = new THREE.Vector3();
    const nodeSize = (node) => {
      return tempMax.copy(node.max).sub(node.min).length()
    };

    return function (gatherAllNodes = false) {
      this.getRenderDimensions(renderDimensions);
      const cameraFocalLength =
        renderDimensions.y /
        2.0 /
        Math.tan((this.camera.fov / 2.0) * THREE.MathUtils.DEG2RAD);
      const fovXOver2 = Math.atan(renderDimensions.x / 2.0 / cameraFocalLength);
      const fovYOver2 = Math.atan(renderDimensions.y / 2.0 / cameraFocalLength);
      const cosFovXOver2 = Math.cos(fovXOver2);
      const cosFovYOver2 = Math.cos(fovYOver2);

      const splatTree = this.splatMesh.getSplatTree();

      if (splatTree) {
        baseModelView.copy(this.camera.matrixWorld).invert();
        if (!this.splatMesh.dynamicMode)
          baseModelView.multiply(this.splatMesh.matrixWorld);

        let nodeRenderCount = 0;
        let splatRenderCount = 0;

        for (let s = 0; s < splatTree.subTrees.length; s++) {
          const subTree = splatTree.subTrees[s];
          modelView.copy(baseModelView);
          if (this.splatMesh.dynamicMode) {
            this.splatMesh.getSceneTransform(s, sceneTransform);
            modelView.multiply(sceneTransform);
          }
          const nodeCount = subTree.nodesWithIndexes.length;
          for (let i = 0; i < nodeCount; i++) {
            const node = subTree.nodesWithIndexes[i];
            if (
              !node.data ||
              !node.data.indexes ||
              node.data.indexes.length === 0
            )
              continue
            tempVector.copy(node.center).applyMatrix4(modelView);

            const distanceToNode = tempVector.length();
            tempVector.normalize();

            tempVectorYZ.copy(tempVector).setX(0).normalize();
            tempVectorXZ.copy(tempVector).setY(0).normalize();

            const cameraAngleXZDot = forward.dot(tempVectorXZ);
            const cameraAngleYZDot = forward.dot(tempVectorYZ);

            const ns = nodeSize(node);
            const outOfFovY = cameraAngleYZDot < cosFovYOver2 - 0.6;
            const outOfFovX = cameraAngleXZDot < cosFovXOver2 - 0.6;
            if (
              !gatherAllNodes &&
              (outOfFovX || outOfFovY) &&
              distanceToNode > ns
            ) {
              continue
            }
            splatRenderCount += node.data.indexes.length;
            nodeRenderList[nodeRenderCount] = node;
            node.data.distanceToNode = distanceToNode;
            nodeRenderCount++;
          }
        }

        nodeRenderList.length = nodeRenderCount;
        nodeRenderList.sort((a, b) => {
          if (a.data.distanceToNode < b.data.distanceToNode) return -1
          else return 1
        });

        let currentByteOffset = splatRenderCount * Constants$1.BytesPerInt;
        for (let i = 0; i < nodeRenderCount; i++) {
          const node = nodeRenderList[i];
          const windowSizeInts = node.data.indexes.length;
          const windowSizeBytes = windowSizeInts * Constants$1.BytesPerInt;
          let destView = new Uint32Array(
            this.sortWorkerIndexesToSort.buffer,
            currentByteOffset - windowSizeBytes,
            windowSizeInts
          );
          destView.set(node.data.indexes);
          currentByteOffset -= windowSizeBytes;
        }

        return {
          splatRenderCount: splatRenderCount,
          shouldSortAll: false
        }
      } else {
        const totalSplatCount = this.splatMesh.getSplatCount();
        if (
          !allSplatsSortBuffer ||
          allSplatsSortBuffer.length !== totalSplatCount
        ) {
          allSplatsSortBuffer = new Uint32Array(totalSplatCount);
          for (let i = 0; i < totalSplatCount; i++) {
            allSplatsSortBuffer[i] = i;
          }
        }
        this.sortWorkerIndexesToSort.set(allSplatsSortBuffer);
        return {
          splatRenderCount: totalSplatCount,
          shouldSortAll: true
        }
      }
    }
  })()

  getSplatMesh() {
    return this.splatMesh
  }

  /**
   * Get a reference to a splat scene.
   * @param {number} sceneIndex The index of the scene to which the reference will be returned
   * @return {SplatScene}
   */
  getSplatScene(sceneIndex) {
    return this.splatMesh.getScene(sceneIndex)
  }

  getSceneCount() {
    return this.splatMesh.getSceneCount()
  }

  isMobile() {
    return navigator.userAgent.includes('Mobi')
  }

  updateMorphTarget(inputMesh) {
    this.avatarMesh = inputMesh;
    this.splatMesh.flameModel = inputMesh;

    this.runMorphUpdate();
    this.splatMesh.gaussianSplatCount = this.gaussianSplatCount;
  }

  runMorphUpdate() {
    this.gaussianSplatCount = this.avatarMesh.geometry.attributes.position.count;
    var morphedMesh = new Float32Array(
      this.avatarMesh.geometry.attributes.position.array
    );
    const numBones = 5;
    this.splatMesh.bonesNum = numBones;

    this.skinModel.skeleton.update();
    this.boneRoot.updateMatrixWorld(true);
    if (this.splatMesh.geometry.getAttribute('splatIndex') && this.setSkinAttibutes === false) {

      this.setSkinAttibutes = true;
      const geometry = this.splatMesh.geometry;

      const skinIndexSource = this.skinModel.geometry.attributes.skinIndex;
      const skinWeightSource = this.skinModel.geometry.attributes.skinWeight;

      const newSkinIndex = new THREE.InstancedBufferAttribute(
          new skinIndexSource.array.constructor(skinIndexSource.array),
          4,
          skinIndexSource.normalized,
          1
      );

      const newSkinWeight = new THREE.InstancedBufferAttribute(
          new skinWeightSource.array.constructor(skinWeightSource.array),
          4,
          skinWeightSource.normalized,
          1
      );
      newSkinIndex.setUsage(THREE.DynamicDrawUsage);
      newSkinWeight.setUsage(THREE.DynamicDrawUsage);
      geometry.setAttribute('skinIndex', newSkinIndex);
      geometry.setAttribute('skinWeight', newSkinWeight);
    }

    this.splatMesh.morphedMesh = morphedMesh;

    let splatNum = this.splatMesh.morphedMesh.length / 3;
    if (this.splatMesh.splatDataTextures['flameModel'] != undefined) {
      this.splatMesh.updateTetureAfterBSAndSkeleton(0, splatNum - 1, false);
    }
  }
}

/**
 * GaussianSplatRenderer
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * 
 * High-level orchestration class that:
 * - Loads ZIP assets via fetch
 * - Unpacks with JSZip
 * - Creates Viewer instance
 * - Loads FLAME/skin models
 * - Runs the render loop
 */


// Create logger for this module
const logger$1 = getLogger('GaussianSplatRenderer');

// Configuration objects - these would normally be loaded from the ZIP
const charactorConfig = {
    camPos: { x: 0, y: 1.8, z: 1 },
    camRot: { x: -10, y: 0, z: 0 },
    backgroundColor: 'ffffff'
};

const motionConfig = {
    offset: {},
    scale: {}
};

// Animation configuration - defines how animation clips are distributed to states
// The animation.glb contains clips in order: hello(2), idle(1), listen(0), speak(6), think(3)
const animationConfig = {
    hello: { size: 2, isGroup: false },
    idle: { size: 1, isGroup: false },
    listen: { size: 0, isGroup: false },
    speak: { size: 6, isGroup: false },
    think: { size: 3, isGroup: true },
    other: []
};

/**
 * GaussianSplatRenderer - Main rendering class
 */
class GaussianSplatRenderer {
    /**
     * Factory method to create a new renderer instance
     *
     * @param {HTMLElement} container - DOM container for canvas
     * @param {string} assetPath - URL to character ZIP file
     * @param {object} [options={}] - Configuration options
     * @param {Function} [options.downloadProgress] - Download progress callback (0-1)
     * @param {Function} [options.loadProgress] - Load progress callback (0-1)
     * @param {Function} [options.getChatState] - Chat state provider function
     * @param {Function} [options.getExpressionData] - Expression data provider function
     * @param {string} [options.backgroundColor] - Background color (hex string)
     * @returns {Promise<GaussianSplatRenderer>} Renderer instance
     * @throws {ValidationError} If parameters are invalid
     * @throws {NetworkError} If asset download fails
     * @throws {AssetLoadError} If asset loading/parsing fails
     * @throws {InitializationError} If renderer initialization fails
     */
    static async create(container, assetPath, options = {}) {

        try {
            // Validate required parameters
            validateDOMElement(container, 'container');
            validateUrl(assetPath);

            // Validate optional callbacks
            if (options.downloadProgress) {
                validateCallback(options.downloadProgress, 'options.downloadProgress', false);
            }
            if (options.loadProgress) {
                validateCallback(options.loadProgress, 'options.loadProgress', false);
            }
            if (options.getChatState) {
                validateCallback(options.getChatState, 'options.getChatState', false);
            }
            if (options.getExpressionData) {
                validateCallback(options.getExpressionData, 'options.getExpressionData', false);
            }
            if (options.backgroundColor) {
                validateHexColor(options.backgroundColor, 'options.backgroundColor');
            }

            logger$1.info('Initializing GaussianSplatRenderer', { assetPath });

            const characterPath = assetPath;

            // Parse character name from path
            let characterName;
            try {
                const url = new URL(characterPath, typeof window !== 'undefined' ? window.location.href : undefined);
                const pathname = url.pathname;
                const matches = pathname.match(/\/([^/]+?)\.zip/);
                characterName = matches?.[1];

                if (!characterName) {
                    throw new ValidationError(
                        'Character model name could not be extracted from path. Expected format: /path/name.zip',
                        'assetPath'
                    );
                }
            } catch (error) {
                if (error instanceof ValidationError) {
                    throw error;
                }
                throw new ValidationError(
                    `Invalid asset path format: ${error.message}`,
                    'assetPath',
                    error
                );
            }

            // Show progress
            if (typeof NProgress !== 'undefined') {
                NProgress.start();
            }

            // Download ZIP file
            logger$1.info('Downloading asset ZIP', { path: characterPath });
            let characterZipResponse;
            try {
                characterZipResponse = await fetch(characterPath);
                if (!characterZipResponse.ok) {
                    throw new NetworkError(
                        `Failed to download asset: ${characterZipResponse.statusText}`,
                        characterZipResponse.status
                    );
                }
            } catch (error) {
                if (error instanceof NetworkError) {
                    throw error;
                }
                throw new NetworkError(
                    `Network error downloading asset: ${error.message}`,
                    0,
                    error
                );
            }

            // Report download progress
            if (options.downloadProgress) {
                try {
                    options.downloadProgress(1.0);
                } catch (error) {
                    logger$1.warn('Error in downloadProgress callback', error);
                }
            }

            if (options.loadProgress) {
                try {
                    options.loadProgress(0.1);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            if (typeof NProgress !== 'undefined') {
                NProgress.done();
            }

            // Parse array buffer
            let arrayBuffer;
            try {
                arrayBuffer = await characterZipResponse.arrayBuffer();
            } catch (error) {
                throw new NetworkError(
                    `Failed to read response data: ${error.message}`,
                    0,
                    error
                );
            }

            // Load ZIP with imported JSZip
            logger$1.debug('Unpacking ZIP archive');
            let zipData;
            try {
                zipData = await JSZip.loadAsync(arrayBuffer);
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to unpack ZIP archive: ${error.message}`,
                    characterPath,
                    error
                );
            }

            // Find folder name in ZIP
            let fileName = '';
            Object.values(zipData.files).forEach(file => {
                if (file.dir) {
                    fileName = file.name?.slice(0, file.name?.length - 1); // Remove trailing '/'
                }
            });

            if (!fileName) {
                throw new AssetLoadError(
                    'No folder found in ZIP archive. Expected ZIP to contain a folder with model files.',
                    characterPath
                );
            }

            logger$1.debug('Found model folder in ZIP', { fileName });

            // Create renderer instance
            logger$1.debug('Creating GaussianSplatRenderer instance');
            const renderer = new GaussianSplatRenderer(container, zipData);

            // Setup camera position (use object pool for temp vectors)
            const cameraPos = tempVector3A.set(
                charactorConfig.camPos?.x ?? 0,
                charactorConfig.camPos?.y ?? 0,
                charactorConfig.camPos?.z ?? 1
            );

            const cameraRotation = new THREE.Vector3(
                charactorConfig.camRot?.x ?? 0,
                charactorConfig.camRot?.y ?? 0,
                charactorConfig.camRot?.z ?? 0
            );

            logger$1.debug('Camera setup', {
                position: { x: cameraPos.x, y: cameraPos.y, z: cameraPos.z },
                rotation: { x: cameraRotation.x, y: cameraRotation.y, z: cameraRotation.z }
            });

            // Background color with validation
            let backgroundColor = 0xffffff;
            try {
                if (charactorConfig.backgroundColor) {
                    const parsed = parseInt(charactorConfig.backgroundColor, 16);
                    if (!isNaN(parsed)) {
                        backgroundColor = parsed;
                    } else {
                        logger$1.warn('Invalid backgroundColor in config, using default', {
                            value: charactorConfig.backgroundColor
                        });
                    }
                }
                if (options?.backgroundColor) {
                    if (renderer.isHexColorStrict(options.backgroundColor)) {
                        backgroundColor = parseInt(options.backgroundColor, 16);
                    } else {
                        logger$1.warn('Invalid backgroundColor option, using config value', {
                            value: options.backgroundColor
                        });
                    }
                }
            } catch (error) {
                logger$1.warn('Error parsing backgroundColor, using default', error);
            }

            logger$1.debug('Background color set', { backgroundColor: backgroundColor.toString(16) });

            // Store callbacks
            renderer.getChatState = options?.getChatState;
            renderer.getExpressionData = options?.getExpressionData;

            // Load iris occlusion configuration BEFORE creating viewer (optional)
            logger$1.debug('Checking for iris_occlusion.json');
            let irisOcclusionConfig = null;
            try {
                irisOcclusionConfig = await renderer._loadJsonFromZip(fileName + '/iris_occlusion.json');
                if (irisOcclusionConfig) {
                    logger$1.info('Iris occlusion configuration loaded', {
                        rightIrisRanges: irisOcclusionConfig.right_iris?.length ?? 0,
                        leftIrisRanges: irisOcclusionConfig.left_iris?.length ?? 0
                    });
                    renderer.irisOcclusionConfig = irisOcclusionConfig;
                } else {
                    logger$1.debug('No iris_occlusion.json found, iris occlusion will be disabled');
                }
            } catch (error) {
                // Log but don't fail - iris occlusion is optional
                logger$1.warn('Failed to load iris_occlusion.json, continuing without it', { error: error.message });
                renderer.irisOcclusionConfig = null;
            }

            // Create Viewer with proper error handling
            logger$1.debug('Creating Viewer instance');
            try {
                renderer.viewer = new Viewer({
                    rootElement: container,
                    threejsCanvas: renderer._canvas,
                    cameraUp: [0, 1, 0],
                    initialCameraPosition: [cameraPos.x, cameraPos.y, cameraPos.z],
                    initialCameraRotation: [cameraRotation.x, cameraRotation.y, cameraRotation.z],
                    sphericalHarmonicsDegree: 0,
                    backgroundColor: backgroundColor,
                    sceneRevealMode: SceneRevealMode.Default,  // Default reveal mode
                    sceneFadeInRateMultiplier: 3.0,  // 3x faster fade-in
                    irisOcclusionConfig: irisOcclusionConfig  // Pass iris config to viewer
                });
            } catch (error) {
                throw new InitializationError(
                    `Failed to create Viewer instance: ${error.message}`,
                    error
                );
            }

            // Load model (non-FLAME mode only)
            logger$1.info('Loading model', { fileName });
            try {
                await renderer.loadModel(fileName, animationConfig, motionConfig);
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to load model: ${error.message}`,
                    fileName,
                    error
                );
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(0.2);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            // Load offset PLY
            logger$1.debug('Loading offset PLY file');
            let offsetFileUrl;
            try {
                offsetFileUrl = await renderer.unpackFileAsBlob(fileName + '/offset.ply');
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to load offset.ply: ${error.message}`,
                    fileName + '/offset.ply',
                    error
                );
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(0.3);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            // Add splat scene
            logger$1.debug('Adding splat scene');
            try {
                await renderer.viewer.addSplatScene(offsetFileUrl, {
                    progressiveLoad: true,
                    sharedMemoryForWorkers: false,
                    showLoadingUI: false,
                    format: SceneFormat.Ply
                });
            } catch (error) {
                throw new InitializationError(
                    `Failed to add splat scene: ${error.message}`,
                    error
                );
            }

            // Initial render
            try {
                renderer.render();
            } catch (error) {
                logger$1.error('Error in initial render', error);
                // Don't throw - render errors are non-fatal
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(1);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            logger$1.info('GaussianSplatRenderer initialized successfully');
            return renderer;

        } catch (error) {
            // Re-throw custom errors as-is
            if (error instanceof ValidationError ||
                error instanceof NetworkError ||
                error instanceof AssetLoadError ||
                error instanceof InitializationError) {
                logger$1.error('Initialization failed', { errorCode: error.code, message: error.message });
                throw error;
            }

            // Wrap unexpected errors
            logger$1.error('Unexpected error during initialization', error);
            throw new InitializationError(
                `Unexpected error initializing GaussianSplatRenderer: ${error.message}`,
                error
            );
        }
    }

    /**
     * @deprecated Use create() instead. This method is kept for backwards compatibility.
     * @param {HTMLElement} container - DOM container for canvas
     * @param {string} assetPath - URL to character ZIP file
     * @param {object} [options={}] - Configuration options
     * @returns {Promise<GaussianSplatRenderer>} Renderer instance
     */
    static async getInstance(container, assetPath, options = {}) {
        logger$1.warn('getInstance() is deprecated. Use create() instead. Each call creates a new instance.');
        return this.create(container, assetPath, options);
    }

    /**
     * Constructor - Creates a new GaussianSplatRenderer instance
     *
     * @param {HTMLElement} _container - DOM container element for the renderer
     * @param {JSZip} zipData - Loaded ZIP archive containing model data
     * @private - Use create() factory method instead
     */
    constructor(_container, zipData) {
        logger$1.debug('GaussianSplatRenderer constructor called');

        // Disposal tracking
        this._disposed = false;

        // BlobUrlManager for tracking blob URLs
        this._blobUrlManager = new BlobUrlManager();

        // ZIP file cache
        this.zipUrls = {
            urls: new Map(),
            zip: zipData
        };

        // State
        this.lastTime = 0;
        this.startTime = 0;
        this.expressionData = {};
        this.chatState = TYVoiceChatState.Idle;

        // Create instance-specific canvas
        this._canvas = null;
        if (typeof document !== 'undefined' && _container) {
            this._canvas = document.createElement('canvas');
            const { width, height } = _container.getBoundingClientRect();
            this._canvas.style.visibility = 'visible';
            this._canvas.width = width;
            this._canvas.height = height;
            _container.appendChild(this._canvas);
            logger$1.debug('Canvas setup', { width, height });
        }

        // Animation timing
        this.clock = new THREE.Clock();
        this.startTime = performance.now() / 1000.0;

        // These will be set during loading
        this.viewer = null;
        this.mixer = null;
        this.animManager = null;
        this.model = null;
        this.irisOcclusionConfig = null;
        this.motioncfg = null;
        this.getChatState = null;
        this.getExpressionData = null;

        logger$1.debug('GaussianSplatRenderer instance created');
    }

    /**
     * Assert renderer is not disposed
     * @private
     * @throws {ResourceDisposedError} If renderer has been disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new ResourceDisposedError('GaussianSplatRenderer has been disposed');
        }
    }

    /**
     * Dispose renderer and free all resources
     *
     * Properly cleans up:
     * - Model resources (mesh, animations, textures)
     * - Blob URLs to prevent memory leaks
     * - Viewer instance
     * - Canvas visibility
     *
     * @returns {void}
     */
    dispose() {
        if (this._disposed) {
            logger$1.warn('GaussianSplatRenderer.dispose() called on already disposed instance');
            return;
        }

        logger$1.info('Disposing GaussianSplatRenderer');

        // Hide and remove canvas
        if (this._canvas) {
            this._canvas.style.visibility = 'hidden';
            if (this._canvas.parentNode) {
                this._canvas.parentNode.removeChild(this._canvas);
            }
            this._canvas = null;
        }

        // Dispose model resources
        this.disposeModel();

        // Revoke all blob URLs using BlobUrlManager
        try {
            this._blobUrlManager?.dispose();
        } catch (error) {
            logger$1.error('Error disposing BlobUrlManager', error);
        }

        // Legacy blob URL cleanup (for URLs created before BlobUrlManager)
        if (this.zipUrls?.urls) {
            this.zipUrls.urls.forEach((value) => {
                try {
                    URL.revokeObjectURL(value);
                } catch (error) {
                    logger$1.warn('Error revoking blob URL', { url: value, error });
                }
            });
            this.zipUrls.urls.clear();
        }

        // Nullify references to aid GC
        this.viewer = null;
        this.mixer = null;
        this.animManager = null;
        this.model = null;
        this.motioncfg = null;
        this.getChatState = null;
        this.getExpressionData = null;
        this.zipUrls = null;

        // Mark as disposed
        this._disposed = true;

        // Clear singleton instance
        GaussianSplatRenderer.instance = undefined;

        logger$1.debug('GaussianSplatRenderer disposed successfully');
    }

    /**
     * Dispose model-specific resources
     *
     * Cleans up:
     * - Animation mixer and cached actions
     * - Animation manager
     * - Viewer instance
     *
     * @returns {void}
     */
    disposeModel() {
        logger$1.debug('Disposing model resources');

        // Dispose animation mixer
        if (this.mixer) {
            try {
                this.mixer.stopAllAction();
                if (this.viewer?.avatarMesh) {
                    this.mixer.uncacheRoot(this.viewer.avatarMesh);
                }
            } catch (error) {
                logger$1.error('Error disposing animation mixer', error);
            }
            this.mixer = null;
        }

        // Dispose animation manager
        if (this.animManager) {
            try {
                this.animManager.dispose();
            } catch (error) {
                logger$1.error('Error disposing animation manager', error);
            }
            this.animManager = null;
        }

        // Dispose viewer
        if (this.viewer) {
            try {
                this.viewer.dispose();
            } catch (error) {
                logger$1.error('Error disposing viewer', error);
            }
            this.viewer = null;
        }

        logger$1.debug('Model resources disposed');
    }

    /**
     * Get the Three.js camera
     * @returns {THREE.Camera}
     */
    getCamera() {
        return this.viewer?.camera;
    }

    /**
     * Update blendshape weights from action data
     * @param {object} actionData - Blendshape weights
     * @returns {object} Processed influence values
     */
    updateBS(actionData) {
        // Default influence values - all 52 ARKit blendshapes
        let influence = {
            browDownLeft: 0.0,
            browDownRight: 0.0,
            browInnerUp: 0.0,
            browOuterUpLeft: 0.0,
            browOuterUpRight: 0.0,
            mouthCheekPuff: 0.0,
            cheekSquintLeft: 0.0,
            cheekSquintRight: 0.0,
            eyeBlinkLeft: 0.0,
            eyeBlinkRight: 0.0,
            eyeLookDownLeft: 0.0,
            eyeLookDownRight: 0.0,
            eyeLookInLeft: 0.0,
            eyeLookInRight: 0.0,
            eyeLookOutLeft: 0.0,
            eyeLookOutRight: 0.0,
            eyeLookUpLeft: 0.0,
            eyeLookUpRight: 0.0,
            eyeSquintLeft: 0.0,
            eyeSquintRight: 0.0,
            eyeWideLeft: 0.0,
            eyeWideRight: 0.0,
            jawForward: 0.0,
            jawLeft: 0.0,
            jawOpen: 0.0,
            jawRight: 0.0,
            mouthClose: 0.0,
            mouthDimpleLeft: 0.0,
            mouthDimpleRight: 0.0,
            mouthFrownLeft: 0.0,
            mouthFrownRight: 0.0,
            mouthFunnel: 0.0,
            mouthLeft: 0.0,
            mouthLowerDownLeft: 0.0,
            mouthLowerDownRight: 0.0,
            mouthPressLeft: 0.0,
            mouthPressRight: 0.0,
            mouthPucker: 0.0,
            mouthRight: 0.0,
            mouthRollLower: 0.0,
            mouthRollUpper: 0.0,
            mouthShrugLower: 0.0,
            mouthShrugUpper: 0.0,
            mouthSmileLeft: 0.0,
            mouthSmileRight: 0.0,
            mouthStretchLeft: 0.0,
            mouthStretchRight: 0.0,
            mouthUpperUpLeft: 0.0,
            mouthUpperUpRight: 0.0,
            noseSneerLeft: 0.0,
            noseSneerRight: 0.0,
            tongueOut: 0.0
        };

        if (actionData != null) {
            influence = actionData;
        }

        return influence;
    }

    /**
     * Main render loop
     */
    render() {
        if (this.viewer && this.viewer.selfDrivenMode) {
            this.viewer.requestFrameId = requestAnimationFrame(() => this.render());

            const frameInfoInternal = 1.0 / 30.0;
            const currentTime = performance.now() / 1000;
            
            // Prevent division by zero if totalFrames is 0 or not set
            const totalFrames = this.viewer.totalFrames || 1;
            const calcDelta = (currentTime - this.startTime) % (totalFrames * frameInfoInternal);
            const frameIndex = Math.floor(calcDelta / frameInfoInternal);
            this.viewer.frame = frameIndex;

            // Update chat state
            if (this.getChatState) {
                this.chatState = this.getChatState();
                // DEBUG: Log state transitions
                if (!this._lastLoggedState || this._lastLoggedState !== this.chatState) {
                    logger$1.debug('Chat state changed', {
                        newState: this.chatState,
                        hasAnimManager: !!this.animManager
                    });
                    this._lastLoggedState = this.chatState;
                }
                this.animManager?.update(this.chatState);
            }

            // Update expression data
            if (this.getExpressionData) {
                this.expressionData = this.updateBS(this.getExpressionData());
            }

            // Animation mixer update
            if (!this.mixer || !this.animManager) {
                if (!this._warnedOnce) {
                    logger$1.warn('Mixer or animManager not initialized, skipping animation update', {
                        hasMixer: !!this.mixer,
                        hasAnimManager: !!this.animManager
                    });
                    this._warnedOnce = true;
                }
                // Still update expressions even without mixer/animManager
                this.setExpression();
            } else {
                const mixerUpdateDelta = this.clock.getDelta();
                this.mixer.update(mixerUpdateDelta);

                // Apply motion config offsets/scales
                if (this.motioncfg) {
                    for (const morphTarget in this.expressionData) {
                        const offset = this.motioncfg.offset?.[morphTarget];
                        const scale = this.motioncfg.scale?.[morphTarget];
                        if (offset !== undefined && scale !== undefined) {
                            this.expressionData[morphTarget] =
                                this.expressionData[morphTarget] * scale + offset;
                        }
                    }
                }

                this.setExpression();
            }

            // Update viewer
            this.viewer.update(this.viewer.renderer, this.viewer.camera);

            // Render if needed
            const shouldRender = this.viewer.shouldRender();
            if (this._renderLogCount <= 3) {
                logger$1.debug('shouldRender check', { shouldRender });
            }
            if (shouldRender) {
                this.viewer.render();
                this.viewer.consecutiveRenderFrames++;
            } else {
                this.viewer.consecutiveRenderFrames = 0;
            }

            this.viewer.renderNextFrame = false;
            this.viewer.selfDrivenModeRunning = true;
        } else {
            throw new Error('Cannot start viewer unless it is in self driven mode.');
        }
    }

    /**
     * Validate hex color string
     * @param {string} value - Color string to validate
     * @returns {boolean}
     */
    isHexColorStrict(value) {
        if (typeof value !== 'string') return false;
        const hexColorRegex = /^(#|0x)[0-9A-Fa-f]{6}$/i;
        return hexColorRegex.test(value);
    }

    /**
     * Apply expression data to mesh
     */
    setExpression() {
        // Update splat mesh blendshapes
        if (this.viewer?.splatMesh) {
            this.viewer.splatMesh.bsWeight = this.expressionData;
            
            // Update eye blink uniforms for smooth iris fade
            const material = this.viewer.splatMesh.material;
            if (material?.uniforms) {
                const eyeBlinkLeft = this.expressionData.eyeBlinkLeft || 0.0;
                const eyeBlinkRight = this.expressionData.eyeBlinkRight || 0.0;
                if (material.uniforms.eyeBlinkLeft) {
                    material.uniforms.eyeBlinkLeft.value = eyeBlinkLeft;
                }
                if (material.uniforms.eyeBlinkRight) {
                    material.uniforms.eyeBlinkRight.value = eyeBlinkRight;
                }
            }
        }

        // Update morph targets on avatar model
        if (this.model) {
            this.model.traverse((object) => {
                if (object.isMesh || object.isSkinnedMesh) {
                    const morphAttributes = object.geometry?.morphAttributes;
                    const hasMorphTargets = morphAttributes && Object.keys(morphAttributes).length > 0;
                    
                    if (hasMorphTargets) {
                        const morphTargetDictionary = object.morphTargetDictionary;
                        for (const morphTarget in morphTargetDictionary) {
                            const target = morphTargetDictionary[morphTarget];
                            const data = this.expressionData[morphTarget];
                            if (data !== undefined) {
                                object.morphTargetInfluences[target] = Math.max(0.0, Math.min(1.0, data));
                            }
                        }
                    }
                }
            });
        }
    }

    /**
     * Load model with animation
     * @param {string} pathName - Path within ZIP
     * @param {object} animationConfig - Animation configuration
     * @param {object} motionConfig - Motion configuration
     */
    async loadModel(pathName, animationConfig, motionConfig) {
        const [skinModel, aniclip, indexes] = await Promise.all([
            this.unpackAndLoadGlb(pathName + '/skin.glb'),
            this.unpackAndLoadGlb(pathName + '/animation.glb'),
            this.unpackAndLoadJson(pathName + '/vertex_order.json')
        ]);

        if (!this.viewer) {
            throw new Error('render viewer is not initialized');
        }

        let skinModelSkinnedMesh;
        let boneRoot;

        skinModel.traverse((object) => {
            if (object.isSkinnedMesh) {
                skinModelSkinnedMesh = object;
            }
            if (object instanceof THREE.Bone && object.name === 'hip') {
                boneRoot = object;
            }
        });

        this.viewer.sortedIndexes = indexes;

        if (skinModelSkinnedMesh) {
            this.viewer.gaussianSplatCount = skinModelSkinnedMesh.geometry.attributes.position.count;
        }

        this.viewer.avatarMesh = skinModel;
        this.viewer.skinModel = skinModelSkinnedMesh;
        this.viewer.boneRoot = boneRoot;

        // Setup animation
        this.mixer = new THREE.AnimationMixer(skinModel);
        this.animManager = new AnimationManager(this.mixer, aniclip, animationConfig);
        this.motioncfg = motionConfig;

        // Set totalFrames from animation clips or default to 1
        if (Array.isArray(aniclip) && aniclip.length > 0 && aniclip[0].duration) {
            this.viewer.totalFrames = Math.floor(aniclip[0].duration * 30); // 30 fps
        } else {
            this.viewer.totalFrames = 1;
        }
        logger$1.debug('Total frames calculated', { totalFrames: this.viewer.totalFrames });

        if (skinModelSkinnedMesh) {
            this.viewer.updateMorphTarget(skinModelSkinnedMesh);
        }

        this.viewer.threeScene.add(skinModel);
        skinModel.visible = false;

        if (skinModelSkinnedMesh) {
            skinModelSkinnedMesh.skeleton.computeBoneTexture();
        }
    }

    /**
     * Unpack file from ZIP and create a blob URL
     *
     * Uses BlobUrlManager to track blob URLs for automatic cleanup.
     * Caches URLs for repeated access to the same file.
     *
     * @param {string} path - Path to file within ZIP archive
     * @returns {Promise<string>} Blob URL to the file
     * @throws {AssetLoadError} If file cannot be unpacked
     */
    async unpackFileAsBlob(path) {
        this._assertNotDisposed();

        // Return cached URL if available
        if (this.zipUrls.urls.has(path)) {
            logger$1.debug('Returning cached blob URL', { path });
            return this.zipUrls.urls.get(path);
        }

        logger$1.debug('Unpacking file from ZIP', { path });

        // Extract file from ZIP
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            throw new AssetLoadError(
                `File not found in ZIP archive: ${path}`,
                path
            );
        }

        let modelFile;
        try {
            modelFile = await fileEntry.async('blob');
        } catch (error) {
            throw new AssetLoadError(
                `Failed to extract file from ZIP: ${error.message}`,
                path,
                error
            );
        }

        if (!modelFile) {
            throw new AssetLoadError(
                `File extracted but blob is empty: ${path}`,
                path
            );
        }

        // Create blob URL using BlobUrlManager for tracking
        const mimeType = this._getMimeType(path);
        const modelUrl = this._blobUrlManager.createBlobUrl(
            modelFile,
            mimeType,
            `zip:${path}`
        );

        // Cache for future access
        this.zipUrls.urls.set(path, modelUrl);
        logger$1.debug('Blob URL created and cached', { path, url: modelUrl.substring(0, 50) });

        return modelUrl;
    }

    /**
     * Load JSON file from ZIP archive
     *
     * @param {string} path - Path to JSON file within ZIP archive
     * @returns {Promise<Object|null>} Parsed JSON object, or null if file doesn't exist
     * @throws {ParseError} If JSON parsing fails
     * @private
     */
    async _loadJsonFromZip(path) {
        this._assertNotDisposed();

        logger$1.debug('Attempting to load JSON from ZIP', { path });

        // Check if file exists in ZIP
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            logger$1.debug('JSON file not found in ZIP, returning null', { path });
            return null;
        }

        // Extract file as text
        let jsonText;
        try {
            jsonText = await fileEntry.async('text');
        } catch (error) {
            throw new ParseError(
                `Failed to extract JSON file from ZIP: ${error.message}`,
                path,
                error
            );
        }

        // Parse JSON
        try {
            const jsonData = JSON.parse(jsonText);
            logger$1.debug('JSON file loaded successfully', { path });
            return jsonData;
        } catch (error) {
            throw new ParseError(
                `Failed to parse JSON file: ${error.message}`,
                path,
                error
            );
        }
    }

    /**
     * Unpack GLB file from ZIP and load it
     *
     * @param {string} path - Path to GLB file within ZIP archive
     * @returns {Promise<THREE.Group|THREE.AnimationClip[]>} Loaded GLTF model
     * @throws {AssetLoadError} If file cannot be unpacked or loaded
     */
    async unpackAndLoadGlb(path) {
        this._assertNotDisposed();

        // Return cached URL if available
        if (this.zipUrls.urls.has(path)) {
            logger$1.debug('Using cached GLB URL', { path });
            return this.LoadGLTF(this.zipUrls.urls.get(path));
        }

        logger$1.debug('Unpacking GLB from ZIP', { path });

        // Extract file from ZIP as ArrayBuffer
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            throw new AssetLoadError(
                `GLB file not found in ZIP archive: ${path}`,
                path
            );
        }

        let modelFile;
        try {
            modelFile = await fileEntry.async('arraybuffer');
        } catch (error) {
            throw new AssetLoadError(
                `Failed to extract GLB from ZIP: ${error.message}`,
                path,
                error
            );
        }

        if (!modelFile) {
            throw new AssetLoadError(
                `GLB extracted but ArrayBuffer is empty: ${path}`,
                path
            );
        }

        // Create blob URL using BlobUrlManager
        const blob = new Blob([modelFile], { type: 'model/gltf-binary' });
        const modelUrl = this._blobUrlManager.createBlobUrl(
            blob,
            'model/gltf-binary',
            `zip:${path}`
        );

        // Cache for future access
        this.zipUrls.urls.set(path, modelUrl);
        logger$1.debug('GLB blob URL created and cached', { path });

        return this.LoadGLTF(modelUrl);
    }

    /**
     * Get MIME type from file extension
     * @private
     * @param {string} path - File path
     * @returns {string} MIME type
     */
    _getMimeType(path) {
        const extension = path.split('.').pop()?.toLowerCase();
        const mimeTypes = {
            'ply': 'model/ply',
            'glb': 'model/gltf-binary',
            'gltf': 'model/gltf+json',
            'json': 'application/json',
            'bin': 'application/octet-stream',
            'png': 'image/png',
            'jpg': 'image/jpeg',
            'jpeg': 'image/jpeg'
        };
        return mimeTypes[extension] || 'application/octet-stream';
    }

    /**
     * Unpack and parse JSON file
     * @param {string} path - Path within ZIP
     * @returns {Promise<object>}
     */
    async unpackAndLoadJson(path) {
        const file = this.zipUrls.zip?.file(path);
        if (!file) {
            throw new Error(`File not found in ZIP: ${path}`);
        }
        const jsonFile = await file.async('string');
        if (!jsonFile) {
            throw new Error(`Failed to read file from ZIP: ${path}`);
        }
        return JSON.parse(jsonFile);
    }

    /**
     * Load GLTF file
     * @param {string} url - URL to GLTF/GLB file
     * @returns {Promise<THREE.Group|THREE.AnimationClip[]>}
     */
    async LoadGLTF(url) {
        return new Promise((resolve, reject) => {
            const loader = new GLTFLoader_js.GLTFLoader();
            loader.load(
                url,
                (gltf) => {
                    if (gltf.animations.length > 0) {
                        resolve(gltf.animations);
                    } else {
                        resolve(gltf.scene);
                    }
                },
                undefined,
                (error) => {
                    reject(error);
                }
            );
        });
    }
}

/**
 * FlameConstants
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * FLAME-specific constants for parametric head model.
 * 
 * Note: General engine constants (MaxScenes, etc.) are in enums/EngineConstants.js
 */

const Constants = {
    // FLAME model constants
    FlameBonesCount: 5,  // root, neck, jaw, leftEye, rightEye
    DefaultBlendshapeCount: 52,  // ARKit blendshapes
    
    // Texture sizes for FLAME data
    FlameModelTextureSize: { width: 4096, height: 2048 },
    BoneTextureSize: { width: 4, height: 32 },
    BoneWeightTextureSize: { width: 512, height: 512 }
};

/**
 * FLAME Utility Functions
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * Contains encoding functions and helpers for GPU texture data.
 */

/**
 * Encode float as uint32 for GPU texture storage
 * Uses Float32Array/Int32Array view trick to reinterpret float bits as integer
 */
const uintEncodedFloat = (function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(f) {
        floatView[0] = f;
        return int32View[0];
    };
})();

/**
 * Constants for texture data layout
 */
const TextureConstants = {
    CENTER_COLORS_ELEMENTS_PER_TEXEL: 4,
    CENTER_COLORS_ELEMENTS_PER_SPLAT: 4,
    COVARIANCES_ELEMENTS_PER_TEXEL_STORED: 2,
    COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED: 4,
    COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED: 2,
    COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED: 4,
    COVARIANCES_ELEMENTS_PER_SPLAT: 6,
    SCALES_ROTATIONS_ELEMENTS_PER_TEXEL: 4,
    SCENE_INDEXES_ELEMENTS_PER_TEXEL: 1,
    MAX_TEXTURE_TEXELS: 4096 * 4096
};

/**
 * FlameTextureManager
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * 
 * Manages GPU textures for FLAME parametric head model:
 * - Blendshape morph target data textures
 * - Bone matrix textures for skeleton animation
 * - LBS weight textures for skinning
 */


/**
 * Build the FLAME model texture containing blendshape positions
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh with morph targets
 * @param {THREE.ShaderMaterial} material - The splat material to update uniforms
 * @param {number} gaussianSplatCount - Number of gaussian splats
 * @returns {object} Texture data object
 */
function buildModelTexture(flameModel, material, gaussianSplatCount) {
    const flameModelTexSize = new THREE.Vector2(4096, 2048);

    const shapedMesh = flameModel.geometry.attributes.position.array;
    let shapedMeshArray = [];
    const pointNum = shapedMesh.length / 3;
    const bsLength = flameModel.geometry.morphAttributes.position.length;

    // Sort morph targets by dictionary order
    const morphTargetNames = Object.keys(flameModel.morphTargetDictionary);
    morphTargetNames.forEach((name) => {
        const originalIndex = flameModel.morphTargetDictionary[name];
        const bsMesh = flameModel.geometry.morphAttributes.position[originalIndex];
        shapedMeshArray = shapedMeshArray.concat(Array.from(bsMesh.array));
    });
    
    // Add base mesh positions
    shapedMeshArray = shapedMeshArray.concat(Array.from(shapedMesh));

    // Create texture data
    const flameModelData = new Float32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
    const flameModelDataInt = new Uint32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
    
    for (let c = 0; c < pointNum * (bsLength + 1); c++) {
        flameModelData[c * 4 + 0] = shapedMeshArray[c * 3 + 0];
        flameModelData[c * 4 + 1] = shapedMeshArray[c * 3 + 1];
        flameModelData[c * 4 + 2] = shapedMeshArray[c * 3 + 2];

        flameModelDataInt[c * 4 + 0] = uintEncodedFloat(flameModelData[c * 4 + 0]);
        flameModelDataInt[c * 4 + 1] = uintEncodedFloat(flameModelData[c * 4 + 1]);
        flameModelDataInt[c * 4 + 2] = uintEncodedFloat(flameModelData[c * 4 + 2]);
    }

    const flameModelTex = new THREE.DataTexture(
        flameModelDataInt,
        flameModelTexSize.x,
        flameModelTexSize.y,
        THREE.RGBAIntegerFormat,
        THREE.UnsignedIntType
    );
    flameModelTex.internalFormat = 'RGBA32UI';
    flameModelTex.needsUpdate = true;

    // Update material uniforms
    material.uniforms.flameModelTexture.value = flameModelTex;
    material.uniforms.flameModelTextureSize.value.copy(flameModelTexSize);
    material.uniforms.gaussianSplatCount.value = gaussianSplatCount;
    material.uniformsNeedUpdate = true;

    return {
        data: flameModelDataInt,
        texture: flameModelTex,
        size: flameModelTexSize,
        baseData: { flameModelPos: flameModelData }
    };
}

/**
 * Build bone matrix texture for skeleton animation
 * @param {Float32Array} bonesMatrix - Flattened bone matrices
 * @param {number} bonesNum - Number of bones
 * @param {object} bsWeight - Blendshape weights object
 * @param {object} morphTargetDictionary - Maps blendshape names to indices
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {THREE.ShaderMaterial} material - The splat material
 * @param {boolean} useFlameModel - Use FLAME mode
 * @returns {object} Texture data object
 */
function buildBoneMatrixTexture(
    bonesMatrix,
    bonesNum,
    bsWeight,
    morphTargetDictionary,
    flameModel,
    material,
    useFlameModel
) {
    if (!bsWeight) return null;

    // bonesNum + expressionBSNum / 4 = 30, so texture height is 32
    const boneTextureSize = new THREE.Vector2(4, 32);
    const boneMatrixTextureData = new Float32Array(bonesMatrix);
    const boneMatrixTextureDataInt = new Uint32Array(boneTextureSize.x * boneTextureSize.y * 4);

    if (useFlameModel) {
        // Encode bone matrices
        for (let c = 0; c < bonesNum * 16; c++) {
            boneMatrixTextureDataInt[c] = uintEncodedFloat(boneMatrixTextureData[c]);
        }
        
        // Set skeleton uniforms
        if (flameModel && flameModel.skeleton) {
            material.uniforms.boneTexture0.value = flameModel.skeleton.boneTexture;
            material.uniforms.bindMatrix.value = flameModel.bindMatrix;
            material.uniforms.bindMatrixInverse.value = flameModel.bindMatrixInverse;
        }
    }

    // Encode blendshape weights
    for (const key in bsWeight) {
        if (Object.hasOwn(bsWeight, key)) {
            const value = bsWeight[key];
            const idx = morphTargetDictionary[key];
            boneMatrixTextureDataInt[idx + bonesNum * 16] = uintEncodedFloat(value);
        }
    }

    const boneMatrixTex = new THREE.DataTexture(
        boneMatrixTextureDataInt,
        boneTextureSize.x,
        boneTextureSize.y,
        THREE.RGBAIntegerFormat,
        THREE.UnsignedIntType
    );
    boneMatrixTex.internalFormat = 'RGBA32UI';
    boneMatrixTex.needsUpdate = true;

    material.uniforms.boneTexture.value = boneMatrixTex;
    material.uniforms.boneTextureSize.value.copy(boneTextureSize);
    material.uniformsNeedUpdate = true;

    return {
        data: boneMatrixTextureDataInt,
        texture: boneMatrixTex,
        size: boneTextureSize,
        baseData: { boneMatrix: boneMatrixTextureDataInt }
    };
}

/**
 * Update bone matrix texture with new animation data
 * @param {object} splatDataTextures - Texture data storage
 * @param {Float32Array} bonesMatrix - Updated bone matrices
 * @param {number} bonesNum - Number of bones
 * @param {object} bsWeight - Updated blendshape weights
 * @param {object} morphTargetDictionary - Blendshape name to index map
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {THREE.ShaderMaterial} material - The splat material
 * @param {boolean} updateFlameBoneMatrix - Whether to update bone matrices
 */
function updateBoneMatrixTexture(
    splatDataTextures,
    bonesMatrix,
    bonesNum,
    bsWeight,
    morphTargetDictionary,
    flameModel,
    material,
    updateFlameBoneMatrix = false
) {
    if (!bsWeight || !morphTargetDictionary) return;

    if (updateFlameBoneMatrix) {
        const boneMatrixTextureData = new Float32Array(bonesMatrix);
        for (let c = 0; c < bonesNum * 16; c++) {
            splatDataTextures.baseData['boneMatrix'][c] = uintEncodedFloat(boneMatrixTextureData[c]);
        }
    }

    // Update blendshape weights
    for (const key in bsWeight) {
        if (Object.hasOwn(bsWeight, key)) {
            const value = bsWeight[key];
            const idx = morphTargetDictionary[key];
            splatDataTextures.baseData['boneMatrix'][idx + bonesNum * 16] = uintEncodedFloat(value);
        }
    }

    // Update texture data
    splatDataTextures['boneMatrix']['texture'].data = splatDataTextures.baseData['boneMatrix'];
    splatDataTextures['boneMatrix']['texture'].needsUpdate = true;
    material.uniforms.boneTexture.value = splatDataTextures['boneMatrix']['texture'];

    // Update skeleton uniforms
    if (flameModel.skeleton) {
        material.uniforms.boneTexture0.value = flameModel.skeleton.boneTexture;
        material.uniforms.bindMatrix.value = flameModel.bindMatrix;
        material.uniforms.bindMatrixInverse.value = flameModel.bindMatrixInverse;
    }

    material.uniformsNeedUpdate = true;
}

/**
 * Build LBS weight texture for skin deformation
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {Array} bonesWeight - Per-vertex bone weights array
 * @param {THREE.ShaderMaterial} material - The splat material
 * @returns {object} Texture data object
 */
function buildBoneWeightTexture(flameModel, bonesWeight, material) {
    const shapedMesh = flameModel.geometry.attributes.position.array;
    const pointNum = shapedMesh.length / 3;
    
    const boneWeightTextureSize = new THREE.Vector2(512, 512);
    const boneWeightTextureData = new Float32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
    const boneWeightTextureDataInt = new Uint32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);

    for (let i = 0; i < pointNum; i++) {
        // Store 5 bone weights per vertex (2 texels)
        boneWeightTextureData[i * 8 + 0] = bonesWeight[i][0];
        boneWeightTextureData[i * 8 + 1] = bonesWeight[i][1];
        boneWeightTextureData[i * 8 + 2] = bonesWeight[i][2];
        boneWeightTextureData[i * 8 + 3] = bonesWeight[i][3];
        boneWeightTextureData[i * 8 + 4] = bonesWeight[i][4];

        boneWeightTextureDataInt[i * 8 + 0] = uintEncodedFloat(bonesWeight[i][0]);
        boneWeightTextureDataInt[i * 8 + 1] = uintEncodedFloat(bonesWeight[i][1]);
        boneWeightTextureDataInt[i * 8 + 2] = uintEncodedFloat(bonesWeight[i][2]);
        boneWeightTextureDataInt[i * 8 + 3] = uintEncodedFloat(bonesWeight[i][3]);
        boneWeightTextureDataInt[i * 8 + 4] = uintEncodedFloat(bonesWeight[i][4]);
    }

    const boneWeightTex = new THREE.DataTexture(
        boneWeightTextureDataInt,
        boneWeightTextureSize.x,
        boneWeightTextureSize.y,
        THREE.RGBAIntegerFormat,
        THREE.UnsignedIntType
    );
    boneWeightTex.internalFormat = 'RGBA32UI';
    boneWeightTex.needsUpdate = true;

    material.uniforms.boneWeightTexture.value = boneWeightTex;
    material.uniforms.boneWeightTextureSize.value.copy(boneWeightTextureSize);
    material.uniformsNeedUpdate = true;

    return {
        data: boneWeightTextureDataInt,
        texture: boneWeightTex,
        size: boneWeightTextureSize,
        baseData: { boneWeight: boneWeightTextureDataInt }
    };
}

/**
 * Get updated bone matrices from skeleton
 * @param {THREE.Skeleton} skeleton - The skeleton to read matrices from
 * @param {number} boneNum - Number of bones
 * @returns {Float32Array} Flattened bone matrices
 */
function getUpdatedBoneMatrices(skeleton, boneNum) {
    const updatedBoneMatrices = [];
    
    for (let j = 0; j < boneNum; j++) {
        const boneMatrix = skeleton.bones[j].matrixWorld.clone()
            .multiply(skeleton.boneInverses[j].clone());

        const elements = boneMatrix.elements;
        for (let i = 0; i < elements.length; i++) {
            updatedBoneMatrices.push(elements[i]);
        }
    }
    
    return new Float32Array(updatedBoneMatrices);
}

const FlameTextureManager = {
    buildModelTexture,
    buildBoneMatrixTexture,
    updateBoneMatrixTexture,
    buildBoneWeightTexture,
    getUpdatedBoneMatrices
};

/**
 * FlameAnimator - FLAME Parametric Head Model Animation Controller
 *
 * Derived from gaussian-splat-renderer-for-lam
 *
 * Manages FLAME (Faces Learned with an Articulated Model and Expressions) model animation:
 * - Skeletal bone rotation from FLAME parameters
 * - Blendshape weight updates for facial expressions
 * - Skeleton-mesh synchronization for gaussian splat rendering
 * - Linear blend skinning (LBS) with bone weights
 *
 * FLAME uses 5 bones: root, neck, jaw, left eye, right eye
 */


const logger = getLogger('FlameAnimator');

/**
 * FlameAnimator - Manages FLAME parametric head model animation
 *
 * Provides skeletal animation, blendshape morphing, and mesh deformation
 * for FLAME-based avatar heads with gaussian splatting rendering.
 */
class FlameAnimator {
    /**
     * Create a FlameAnimator instance
     *
     * @constructor
     */
    constructor() {
        /** @type {THREE.Skeleton|null} FLAME skeleton with 5 bones */
        this.skeleton = null;

        /** @type {THREE.Bone[]|null} Array of skeleton bones */
        this.bones = null;

        /** @type {Object|null} FLAME animation parameters (rotation, expr, neck_pose, jaw_pose, eyes_pose) */
        this.flameParams = null;

        /** @type {Array|null} Linear blend skinning weights */
        this.lbsWeight = null;

        /** @type {number} Current animation frame */
        this.frame = 0;

        /** @type {number} Total frames in animation sequence */
        this.totalFrames = 0;

        /** @type {boolean} Whether FLAME mode is enabled */
        this.useFlame = true;

        /** @type {THREE.SkinnedMesh|null} The FLAME avatar mesh */
        this.avatarMesh = null;

        /** @type {number} Number of gaussian splats in the mesh */
        this.gaussianSplatCount = 0;

        /** @type {boolean} Whether animator has been disposed */
        this._disposed = false;

        logger.debug('FlameAnimator instance created');
    }

    /**
     * Assert animator is not disposed
     * @private
     * @throws {ResourceDisposedError} If animator has been disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new ResourceDisposedError('FlameAnimator has been disposed');
        }
    }

    /**
     * Initialize animator with FLAME parameters and skeleton data
     *
     * Sets up the FLAME animation system with parameters for bone rotations,
     * expressions, and linear blend skinning weights.
     *
     * @param {Object} flameParams - FLAME animation parameters
     * @param {Array} flameParams.rotation - Root bone rotations per frame (axis-angle)
     * @param {Array} flameParams.expr - Expression blendshape weights per frame
     * @param {Array} flameParams.neck_pose - Neck bone rotations per frame
     * @param {Array} flameParams.jaw_pose - Jaw bone rotations per frame
     * @param {Array} flameParams.eyes_pose - Eye bone rotations per frame (6 values: left 3, right 3)
     * @param {Object|Array} boneTree - Skeleton hierarchy definition
     * @param {Array} lbsWeight - Linear blend skinning weights for each vertex
     * @param {THREE.SkinnedMesh} avatarMesh - The FLAME avatar mesh
     * @throws {ValidationError} If required parameters are missing or invalid
     * @returns {void}
     */
    initialize(flameParams, boneTree, lbsWeight, avatarMesh) {
        this._assertNotDisposed();

        // Validate required parameters
        try {
            validateRequiredProperties(flameParams, ['rotation', 'expr', 'neck_pose', 'jaw_pose', 'eyes_pose'], 'flameParams');
        } catch (error) {
            logger.error('Invalid flameParams', error);
            throw error;
        }

        if (!avatarMesh || !avatarMesh.geometry || !avatarMesh.geometry.attributes || !avatarMesh.geometry.attributes.position) {
            const error = new ValidationError(
                'avatarMesh must have geometry with position attribute',
                'avatarMesh'
            );
            logger.error('Invalid avatarMesh', error);
            throw error;
        }

        logger.info('Initializing FlameAnimator', {
            frameCount: flameParams.rotation?.length,
            splatCount: avatarMesh.geometry.attributes.position.count
        });

        this.flameParams = flameParams;
        this.lbsWeight = lbsWeight;
        this.avatarMesh = avatarMesh;

        // Calculate total frames from rotation data
        if (flameParams.rotation && Array.isArray(flameParams.rotation)) {
            this.totalFrames = flameParams.rotation.length;
            logger.debug('Animation has frames', { totalFrames: this.totalFrames });
        } else {
            logger.warn('No rotation data found, totalFrames set to 0');
            this.totalFrames = 0;
        }

        this.gaussianSplatCount = avatarMesh.geometry.attributes.position.count;

        // Build skeleton from bone tree
        try {
            this.buildSkeleton(boneTree);
            logger.debug('Skeleton built successfully', { boneCount: this.bones?.length });
        } catch (error) {
            logger.error('Failed to build skeleton', error);
            throw new ValidationError(
                `Failed to build skeleton: ${error.message}`,
                'boneTree',
                error
            );
        }
    }

    /**
     * Build skeleton from bone tree data
     * @param {object} boneTree - Skeleton hierarchy definition
     */
    buildSkeleton(boneTree) {
        if (!boneTree) return;

        this.bones = [];
        const boneInverses = [];

        // Create bones from tree structure
        const createBone = (boneData, parentBone = null) => {
            const bone = new THREE.Bone();
            bone.name = boneData.name || `bone_${this.bones.length}`;

            if (boneData.position) {
                bone.position.fromArray(boneData.position);
            }
            if (boneData.rotation) {
                bone.rotation.fromArray(boneData.rotation);
            }
            if (boneData.scale) {
                bone.scale.fromArray(boneData.scale);
            }

            if (parentBone) {
                parentBone.add(bone);
            }

            this.bones.push(bone);

            // Create inverse bind matrix
            const inverseMatrix = new THREE.Matrix4();
            if (boneData.inverseBindMatrix) {
                inverseMatrix.fromArray(boneData.inverseBindMatrix);
            } else {
                bone.updateMatrixWorld(true);
                inverseMatrix.copy(bone.matrixWorld).invert();
            }
            boneInverses.push(inverseMatrix);

            // Process children
            if (boneData.children) {
                boneData.children.forEach(child => createBone(child, bone));
            }
        };

        // If boneTree is array, create bones directly
        if (Array.isArray(boneTree)) {
            boneTree.forEach((boneData, index) => {
                const bone = new THREE.Bone();
                bone.name = boneData.name || `bone_${index}`;
                
                if (boneData.position) {
                    bone.position.fromArray(boneData.position);
                }
                
                this.bones.push(bone);
                
                const inverseMatrix = new THREE.Matrix4();
                if (boneData.inverseBindMatrix) {
                    inverseMatrix.fromArray(boneData.inverseBindMatrix);
                }
                boneInverses.push(inverseMatrix);
            });

            // Set up hierarchy (FLAME: root -> neck -> jaw, eyes)
            if (this.bones.length >= 5) {
                this.bones[0].add(this.bones[1]); // root -> neck
                this.bones[1].add(this.bones[2]); // neck -> jaw
                this.bones[1].add(this.bones[3]); // neck -> leftEye
                this.bones[1].add(this.bones[4]); // neck -> rightEye
            }
        } else if (boneTree.root) {
            createBone(boneTree.root);
        }

        // Create skeleton
        this.skeleton = new THREE.Skeleton(this.bones, boneInverses);
    }

    /**
     * Set bone rotation from axis-angle or quaternion representation
     *
     * Converts rotation data to quaternion and applies it to the bone.
     * Uses object pooling to avoid allocations in animation loop.
     *
     * @param {THREE.Bone} bone - Target bone to rotate
     * @param {Array<number>} angles - Rotation values (3 for axis-angle, 4 for quaternion)
     * @param {boolean} [isQuat=false] - Whether angles are quaternion [x, y, z, w]
     * @throws {ValidationError} If bone or angles are invalid
     * @returns {void}
     */
    setBoneRotation(bone, angles, isQuat = false) {
        this._assertNotDisposed();

        if (!bone || !angles || !Array.isArray(angles)) {
            throw new ValidationError(
                'bone and angles array are required',
                'bone/angles'
            );
        }

        // Use object pooling for temp objects
        const quaternion = quaternionPool.acquire();

        try {
            if (isQuat) {
                // Direct quaternion (XYZW format)
                if (angles.length < 4) {
                    throw new ValidationError('Quaternion requires 4 values', 'angles');
                }
                quaternion.set(angles[0], angles[1], angles[2], angles[3]);
            } else {
                // Axis-angle representation: [x, y, z] where magnitude is angle
                if (angles.length < 3) {
                    throw new ValidationError('Axis-angle requires 3 values', 'angles');
                }

                const axis = vector3Pool.acquire();
                try {
                    axis.set(angles[0], angles[1], angles[2]);
                    const angleInRadians = axis.length();
                    axis.normalize();
                    quaternion.setFromAxisAngle(axis, angleInRadians);
                } finally {
                    vector3Pool.release(axis);
                }
            }

            // Apply rotation to bone
            bone.quaternion.copy(quaternion);
            bone.updateMatrixWorld(true);
        } finally {
            quaternionPool.release(quaternion);
        }
    }

    /**
     * Update FLAME bones from current frame parameters
     *
     * Applies bone rotations for all 5 FLAME bones (root, neck, jaw, left eye, right eye)
     * from the current animation frame. Updates skeleton matrices and returns data
     * needed for mesh deformation.
     *
     * @returns {Object} Bone and blendshape data for rendering
     * @returns {Array} return.bsWeight - Expression blendshape weights for current frame
     * @returns {Float32Array} return.bonesMatrix - Updated bone transformation matrices
     * @returns {number} return.bonesNum - Number of bones (always 5 for FLAME)
     * @returns {Array} return.bonesWeight - LBS weights for vertices
     */
    updateFlameBones() {
        this._assertNotDisposed();

        if (!this.flameParams || !this.skeleton) {
            logger.warn('Cannot update bones: flameParams or skeleton not initialized');
            return {};
        }

        const frame = this.frame;

        // Get blendshape weights for this frame
        const bsWeight = this.flameParams['expr'][frame];

        // Apply bone rotations for current frame
        try {
            // Root bone rotation (global head orientation)
            const rootAngle = this.flameParams['rotation'][frame];
            this.setBoneRotation(this.skeleton.bones[0], rootAngle);

            // Neck rotation
            const neckAngle = this.flameParams['neck_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[1], neckAngle);

            // Jaw rotation
            const jawAngle = this.flameParams['jaw_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[2], jawAngle);

            // Eyes rotation (6 values: left eye xyz, right eye xyz)
            const eyesAngle = this.flameParams['eyes_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[3], eyesAngle.slice(0, 3));          // Left eye
            this.setBoneRotation(this.skeleton.bones[4], eyesAngle.slice(3, 6));          // Right eye
        } catch (error) {
            logger.error('Error setting bone rotations', { frame, error });
            throw error;
        }

        // Update skeleton matrices after all rotations are set
        this.skeleton.update();

        // Get updated bone matrices for shader
        const numBones = 5;
        const bonesMatrix = FlameTextureManager.getUpdatedBoneMatrices(this.skeleton, numBones);

        return {
            bsWeight,
            bonesMatrix,
            bonesNum: numBones,
            bonesWeight: this.lbsWeight
        };
    }

    /**
     * Run morph update - main animation loop function
     * @param {SplatMesh} splatMesh - The gaussian splat mesh to update
     */
    runMorphUpdate(splatMesh) {
        const morphedMesh = new Float32Array(
            this.avatarMesh.geometry.attributes.position.array
        );

        splatMesh.gaussianSplatCount = this.gaussianSplatCount;
        splatMesh.bonesNum = 5;

        if (this.useFlame) {
            const updateData = this.updateFlameBones();
            splatMesh.bsWeight = updateData.bsWeight;
            splatMesh.bonesMatrix = updateData.bonesMatrix;
            splatMesh.bonesNum = updateData.bonesNum;
            splatMesh.bonesWeight = updateData.bonesWeight;
        }

        splatMesh.morphedMesh = morphedMesh;

        // Update textures
        const splatNum = splatMesh.morphedMesh.length / 3;
        if (splatMesh.splatDataTextures && splatMesh.splatDataTextures['flameModel']) {
            splatMesh.updateTextureAfterBSAndSkeleton(0, splatNum - 1, this.useFlame);
        }
    }

    /**
     * Set current animation frame
     *
     * @param {number} frame - Frame number to set (will wrap if exceeds totalFrames)
     * @throws {ValidationError} If frame is not a valid number
     * @returns {void}
     */
    setFrame(frame) {
        this._assertNotDisposed();

        if (typeof frame !== 'number' || isNaN(frame)) {
            throw new ValidationError('frame must be a valid number', 'frame');
        }

        if (this.totalFrames > 0) {
            this.frame = ((frame % this.totalFrames) + this.totalFrames) % this.totalFrames; // Handle negative
        } else {
            this.frame = 0;
        }
    }

    /**
     * Advance to next frame in animation sequence
     *
     * Automatically wraps to frame 0 after reaching totalFrames.
     *
     * @returns {void}
     */
    nextFrame() {
        this._assertNotDisposed();

        if (this.totalFrames > 0) {
            this.frame = (this.frame + 1) % this.totalFrames;
        }
    }

    /**
     * Get skeleton for external use
     *
     * @returns {THREE.Skeleton|null} The FLAME skeleton or null if not initialized
     */
    getSkeleton() {
        this._assertNotDisposed();
        return this.skeleton;
    }

    /**
     * Get current frame number
     *
     * @returns {number} Current animation frame index
     */
    getFrame() {
        this._assertNotDisposed();
        return this.frame;
    }

    /**
     * Get total frame count
     *
     * @returns {number} Total number of animation frames
     */
    getTotalFrames() {
        this._assertNotDisposed();
        return this.totalFrames;
    }

    /**
     * Dispose animator and free resources
     *
     * Properly cleans up:
     * - Skeleton and bones
     * - References to meshes and parameters
     *
     * @returns {void}
     */
    dispose() {
        if (this._disposed) {
            logger.warn('FlameAnimator.dispose() called on already disposed instance');
            return;
        }

        logger.info('Disposing FlameAnimator');

        // Dispose skeleton (bones are part of skeleton)
        if (this.skeleton) {
            this.skeleton.dispose();
            this.skeleton = null;
        }

        // Nullify all references to aid GC
        this.bones = null;
        this.flameParams = null;
        this.lbsWeight = null;
        this.avatarMesh = null;

        // Reset state
        this.frame = 0;
        this.totalFrames = 0;
        this.gaussianSplatCount = 0;

        // Mark as disposed
        this._disposed = true;

        logger.debug('FlameAnimator disposed successfully');
    }
}

exports.ARKIT_BLENDSHAPES_COUNT = ARKIT_BLENDSHAPES_COUNT;
exports.ARKitBlendshapes = ARKitBlendshapes;
exports.AbortedPromiseError = AbortedPromiseError;
exports.AnimationManager = AnimationManager;
exports.BASE_COMPONENT_COUNT = BASE_COMPONENT_COUNT$1;
exports.BlobUrlManager = BlobUrlManager;
exports.CENTER_COLORS_ELEMENTS_PER_SPLAT = CENTER_COLORS_ELEMENTS_PER_SPLAT$1;
exports.CENTER_COLORS_ELEMENTS_PER_TEXEL = CENTER_COLORS_ELEMENTS_PER_TEXEL$1;
exports.CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION = CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION;
exports.COVARIANCES_ELEMENTS_PER_SPLAT = COVARIANCES_ELEMENTS_PER_SPLAT$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED = COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED = COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED = COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED$1;
exports.COVARIANCES_ELEMENTS_PER_TEXEL_STORED = COVARIANCES_ELEMENTS_PER_TEXEL_STORED$1;
exports.Constants = Constants$1;
exports.DefaultSphericalHarmonics8BitCompressionHalfRange = DefaultSphericalHarmonics8BitCompressionHalfRange;
exports.DefaultSphericalHarmonics8BitCompressionRange = DefaultSphericalHarmonics8BitCompressionRange;
exports.DirectLoadError = DirectLoadError;
exports.EventEmitter = EventEmitter;
exports.FLAME_BONES_COUNT = FLAME_BONES_COUNT;
exports.FOCUS_MARKER_FADE_IN_SPEED = FOCUS_MARKER_FADE_IN_SPEED;
exports.FOCUS_MARKER_FADE_OUT_SPEED = FOCUS_MARKER_FADE_OUT_SPEED;
exports.FieldSize = FieldSize;
exports.FieldSizeStringMap = FieldSizeStringMap;
exports.FlameAnimator = FlameAnimator;
exports.FlameBoneNames = FlameBoneNames;
exports.FlameConstants = Constants;
exports.FlameTextureManager = FlameTextureManager;
exports.FrameBudgetMonitor = FrameBudgetMonitor;
exports.GaussianSplatRenderer = GaussianSplatRenderer;
exports.Hello = Hello;
exports.Hit = Hit;
exports.INRIAV1PlyParser = INRIAV1PlyParser;
exports.Idle = Idle;
exports.InternalLoadType = InternalLoadType;
exports.Listen = Listen;
exports.LoaderStatus = LoaderStatus;
exports.LoaderUtils = LoaderUtils;
exports.LogLevel = LogLevel;
exports.Logger = Logger;
exports.LoggerLevel = LoggerLevel;
exports.MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT = MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT;
exports.MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER = MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER;
exports.ObjectPool = ObjectPool;
exports.PlyFormat = PlyFormat;
exports.PlyLoader = PlyLoader;
exports.PlyParser = PlyParser;
exports.PlyParserUtils = PlyParserUtils;
exports.PoolScope = PoolScope;
exports.Ray = Ray;
exports.Raycaster = Raycaster;
exports.RenderLoop = RenderLoop;
exports.RenderMode = RenderMode;
exports.SCALES_ROTATIONS_ELEMENTS_PER_TEXEL = SCALES_ROTATIONS_ELEMENTS_PER_TEXEL$1;
exports.SCENE_FADEIN_RATE_FAST = SCENE_FADEIN_RATE_FAST$1;
exports.SCENE_FADEIN_RATE_GRADUAL = SCENE_FADEIN_RATE_GRADUAL$1;
exports.SCENE_INDEXES_ELEMENTS_PER_TEXEL = SCENE_INDEXES_ELEMENTS_PER_TEXEL$1;
exports.SceneFormat = SceneFormat;
exports.SceneRevealMode = SceneRevealMode;
exports.Semver = Semver;
exports.Speak = Speak;
exports.SplatBuffer = SplatBuffer;
exports.SplatBufferGenerator = SplatBufferGenerator;
exports.SplatGeometry = SplatGeometry;
exports.SplatMaterial = SplatMaterial;
exports.SplatMaterial2D = SplatMaterial2D;
exports.SplatMaterial3D = SplatMaterial3D;
exports.SplatMesh = SplatMesh;
exports.SplatPartitioner = SplatPartitioner;
exports.SplatRenderMode = SplatRenderMode;
exports.SplatScene = SplatScene;
exports.SplatTree = SplatTree;
exports.State = State;
exports.THREE_CAMERA_FOV = THREE_CAMERA_FOV;
exports.TYVoiceChatState = TYVoiceChatState;
exports.TextureConstants = TextureConstants;
exports.Think = Think;
exports.TypedEventEmitter = TypedEventEmitter;
exports.UncompressedSplatArray = UncompressedSplatArray;
exports.Viewer = Viewer;
exports.abortablePromiseWithExtractedComponents = abortablePromiseWithExtractedComponents;
exports.buildBoneMatrixTexture = buildBoneMatrixTexture;
exports.buildBoneWeightTexture = buildBoneWeightTexture;
exports.buildModelTexture = buildModelTexture;
exports.clamp = clamp;
exports.configureForDevelopment = configureForDevelopment;
exports.configureForProduction = configureForProduction;
exports.convertBetweenCompressionLevels = convertBetweenCompressionLevels;
exports.copyBetweenBuffers = copyBetweenBuffers$1;
exports.createTrackedBlobUrl = createTrackedBlobUrl;
exports.dataViewFloatForCompressionLevel = dataViewFloatForCompressionLevel$1;
exports.delayedExecute = delayedExecute;
exports.disposeAllMeshes = disposeAllMeshes;
exports.disposeAllPools = disposeAllPools;
exports.eulerPool = eulerPool;
exports.fetchWithProgress = fetchWithProgress;
exports.floatToHalf = floatToHalf;
exports.fromHalfFloat = fromHalfFloat$1;
exports.fromHalfFloatToUint8 = fromHalfFloatToUint8$1;
exports.fromUint8 = fromUint8$1;
exports.fromUint8ToHalfFloat = fromUint8ToHalfFloat;
exports.getCurrentTime = getCurrentTime;
exports.getGlobalBlobUrlManager = getGlobalBlobUrlManager;
exports.getIOSSemever = getIOSSemever;
exports.getLogger = getLogger;
exports.getPoolStats = getPoolStats;
exports.getSphericalHarmonicsComponentCountForDegree = getSphericalHarmonicsComponentCountForDegree;
exports.getUpdatedBoneMatrices = getUpdatedBoneMatrices;
exports.isIOS = isIOS;
exports.matrix4Pool = matrix4Pool;
exports.nativePromiseWithExtractedComponents = nativePromiseWithExtractedComponents;
exports.quaternionPool = quaternionPool;
exports.revokeTrackedBlobUrl = revokeTrackedBlobUrl;
exports.rgbaArrayToInteger = rgbaArrayToInteger;
exports.rgbaToInteger = rgbaToInteger;
exports.sceneFormatFromPath = sceneFormatFromPath;
exports.setGlobalLogLevel = setGlobalLogLevel;
exports.tempMatrix4A = tempMatrix4A;
exports.tempMatrix4B = tempMatrix4B;
exports.tempQuaternionA = tempQuaternionA;
exports.tempQuaternionB = tempQuaternionB;
exports.tempVector3A = tempVector3A;
exports.tempVector3B = tempVector3B;
exports.tempVector3C = tempVector3C;
exports.toHalfFloat = toHalfFloat$1;
exports.toUint8 = toUint8$1;
exports.toUncompressedFloat = toUncompressedFloat$1;
exports.uintEncodedFloat = uintEncodedFloat$1;
exports.updateBoneMatrixTexture = updateBoneMatrixTexture;
exports.validateArrayBuffer = validateArrayBuffer;
exports.validateAssetPath = validateAssetPath;
exports.validateCallback = validateCallback;
exports.validateDOMElement = validateDOMElement;
exports.validateEnum = validateEnum;
exports.validateFileExtension = validateFileExtension;
exports.validateHexColor = validateHexColor;
exports.validateInteger = validateInteger;
exports.validateNumberInRange = validateNumberInRange;
exports.validatePositiveInteger = validatePositiveInteger;
exports.validateRequiredProperties = validateRequiredProperties;
exports.validateUrl = validateUrl;
exports.vector3Pool = vector3Pool;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3NwbGF0LWZsYW1lLWF2YXRhci1yZW5kZXJlci5janMuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9lbnVtcy9Mb2dMZXZlbC5qcyIsIi4uL3NyYy9lbnVtcy9SZW5kZXJNb2RlLmpzIiwiLi4vc3JjL2VudW1zL1NjZW5lRm9ybWF0LmpzIiwiLi4vc3JjL2VudW1zL1NjZW5lUmV2ZWFsTW9kZS5qcyIsIi4uL3NyYy9lbnVtcy9TcGxhdFJlbmRlck1vZGUuanMiLCIuLi9zcmMvZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzIiwiLi4vc3JjL3V0aWxzL0xvYWRlclV0aWxzLmpzIiwiLi4vc3JjL2Vycm9ycy9BcHBsaWNhdGlvbkVycm9yLmpzIiwiLi4vc3JjL3V0aWxzL0xvZ2dlci5qcyIsIi4uL3NyYy91dGlscy9VdGlsLmpzIiwiLi4vc3JjL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyIsIi4uL3NyYy91dGlscy9PYmplY3RQb29sLmpzIiwiLi4vc3JjL3V0aWxzL0Jsb2JVcmxNYW5hZ2VyLmpzIiwiLi4vc3JjL3V0aWxzL1JlbmRlckxvb3AuanMiLCIuLi9zcmMvdXRpbHMvRXZlbnRFbWl0dGVyLmpzIiwiLi4vc3JjL3JlbmRlcmVyL0FwcENvbnN0YW50cy5qcyIsIi4uL3NyYy9yZW5kZXJlci9BbmltYXRpb25NYW5hZ2VyLmpzIiwiLi4vc3JjL2NvcmUvU3BsYXRTY2VuZS5qcyIsIi4uL3NyYy9jb3JlL1NwbGF0R2VvbWV0cnkuanMiLCIuLi9zcmMvY29yZS9TcGxhdFRyZWUuanMiLCIuLi9zcmMvbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwuanMiLCIuLi9zcmMvbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwzRC5qcyIsIi4uL3NyYy9tYXRlcmlhbHMvU3BsYXRNYXRlcmlhbDJELmpzIiwiLi4vc3JjL2NvcmUvU3BsYXRNZXNoLmpzIiwiLi4vc3JjL2xvYWRlcnMvRGlyZWN0TG9hZEVycm9yLmpzIiwiLi4vc3JjL2J1ZmZlcnMvVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyIsIi4uL3NyYy9idWZmZXJzL1NwbGF0QnVmZmVyLmpzIiwiLi4vc3JjL2J1ZmZlcnMvU3BsYXRQYXJ0aXRpb25lci5qcyIsIi4uL3NyYy9idWZmZXJzL1NwbGF0QnVmZmVyR2VuZXJhdG9yLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5UGFyc2VyVXRpbHMuanMiLCIuLi9zcmMvbG9hZGVycy9JTlJJQVYxUGx5UGFyc2VyLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5UGFyc2VyLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5TG9hZGVyLmpzIiwiLi4vc3JjL3JheWNhc3Rlci9SYXkuanMiLCIuLi9zcmMvcmF5Y2FzdGVyL0hpdC5qcyIsIi4uL3NyYy9yYXljYXN0ZXIvUmF5Y2FzdGVyLmpzIiwiLi4vc3JjL3dvcmtlci9Tb3J0V29ya2VyLmpzIiwiLi4vc3JjL2NvcmUvVmlld2VyLmpzIiwiLi4vc3JjL3JlbmRlcmVyL0dhdXNzaWFuU3BsYXRSZW5kZXJlci5qcyIsIi4uL3NyYy9mbGFtZS9GbGFtZUNvbnN0YW50cy5qcyIsIi4uL3NyYy9mbGFtZS91dGlscy5qcyIsIi4uL3NyYy9mbGFtZS9GbGFtZVRleHR1cmVNYW5hZ2VyLmpzIiwiLi4vc3JjL2ZsYW1lL0ZsYW1lQW5pbWF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExvZyBsZXZlbCBlbnVtZXJhdGlvbiBmb3IgY29udHJvbGxpbmcgdmVyYm9zaXR5XHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICovXHJcbmV4cG9ydCBjb25zdCBMb2dMZXZlbCA9IHtcclxuICAgIE5vbmU6IDAsXHJcbiAgICBFcnJvcjogMSxcclxuICAgIFdhcm5pbmc6IDIsXHJcbiAgICBJbmZvOiAzLFxyXG4gICAgRGVidWc6IDRcclxufTtcclxuIiwiLyoqXHJcbiAqIFJlbmRlciBtb2RlIGVudW1lcmF0aW9uXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICovXHJcbmV4cG9ydCBjb25zdCBSZW5kZXJNb2RlID0ge1xyXG4gICAgQWx3YXlzOiAwLFxyXG4gICAgT25DaGFuZ2U6IDEsXHJcbiAgICBOZXZlcjogMlxyXG59O1xyXG4iLCIvKipcclxuICogU2NlbmUgZm9ybWF0IGVudW1lcmF0aW9uIGZvciBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBTaW1wbGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgdXNhZ2UgLSBvbmx5IFBMWSBmb3JtYXQgaXMgc3VwcG9ydGVkLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNjZW5lRm9ybWF0ID0ge1xyXG4gICAgJ1BseSc6IDBcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgc2NlbmUgZm9ybWF0IGZyb20gZmlsZSBwYXRoXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gRmlsZSBwYXRoXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ8bnVsbH0gU2NlbmUgZm9ybWF0IG9yIG51bGwgaWYgdW5rbm93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNjZW5lRm9ybWF0RnJvbVBhdGggPSAocGF0aCkgPT4ge1xyXG4gICAgaWYgKHBhdGguZW5kc1dpdGgoJy5wbHknKSkgcmV0dXJuIFNjZW5lRm9ybWF0LlBseTtcclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4iLCIvKipcclxuICogU2NlbmUgcmV2ZWFsIG1vZGUgZW51bWVyYXRpb25cclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNjZW5lUmV2ZWFsTW9kZSA9IHtcclxuICAgIERlZmF1bHQ6IDAsXHJcbiAgICBHcmFkdWFsOiAxLFxyXG4gICAgSW5zdGFudDogMlxyXG59O1xyXG4iLCIvKipcclxuICogU3BsYXQgcmVuZGVyIG1vZGUgZW51bWVyYXRpb25cclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNwbGF0UmVuZGVyTW9kZSA9IHtcclxuICAgIFRocmVlRDogMCxcclxuICAgIFR3b0Q6IDFcclxufTtcclxuIiwiLyoqXHJcbiAqIEVuZ2luZUNvbnN0YW50c1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBDb3JlIGNvbnN0YW50cyBmb3IgR2F1c3NpYW4gU3BsYXQgcmVuZGVyaW5nLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25zdGFudHMge1xyXG4gICAgc3RhdGljIERlZmF1bHRTcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiA9IDE2O1xyXG4gICAgc3RhdGljIE1lbW9yeVBhZ2VTaXplID0gNjU1MzY7XHJcbiAgICBzdGF0aWMgQnl0ZXNQZXJGbG9hdCA9IDQ7XHJcbiAgICBzdGF0aWMgQnl0ZXNQZXJJbnQgPSA0O1xyXG4gICAgc3RhdGljIE1heFNjZW5lcyA9IDMyO1xyXG4gICAgc3RhdGljIFByb2dyZXNzaXZlTG9hZFNlY3Rpb25TaXplID0gMjYyMTQ0O1xyXG4gICAgc3RhdGljIFByb2dyZXNzaXZlTG9hZFNlY3Rpb25EZWxheUR1cmF0aW9uID0gMTU7XHJcbiAgICBzdGF0aWMgU3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2UgPSAzO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlID0gQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlO1xyXG5cclxuLy8gU3BsYXRNZXNoIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNjtcclxuZXhwb3J0IGNvbnN0IENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNDtcclxuXHJcbmV4cG9ydCBjb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEID0gNDtcclxuZXhwb3J0IGNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQgPSA0O1xyXG5leHBvcnQgY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEID0gNjtcclxuZXhwb3J0IGNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRCA9IDg7XHJcbmV4cG9ydCBjb25zdCBTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDE7XHJcblxyXG5leHBvcnQgY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfRkFTVCA9IDAuMDEyO1xyXG5leHBvcnQgY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCA9IDAuMDAzO1xyXG5cclxuLy8gVmlld2VyIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgVEhSRUVfQ0FNRVJBX0ZPViA9IDUwO1xyXG5leHBvcnQgY29uc3QgTUlOSU1VTV9ESVNUQU5DRV9UT19ORVdfRk9DQUxfUE9JTlQgPSAwLjU7XHJcbmV4cG9ydCBjb25zdCBDT05TRUNVVElWRV9SRU5ERVJFRF9GUkFNRVNfRk9SX0ZQU19DQUxDVUxBVElPTiA9IDYwO1xyXG5leHBvcnQgY29uc3QgTUlOX1NQTEFUX0NPVU5UX1RPX1NIT1dfU1BMQVRfVFJFRV9MT0FESU5HX1NQSU5ORVIgPSAxNTAwMDAwO1xyXG5leHBvcnQgY29uc3QgRk9DVVNfTUFSS0VSX0ZBREVfSU5fU1BFRUQgPSAwLjQ7XHJcbmV4cG9ydCBjb25zdCBGT0NVU19NQVJLRVJfRkFERV9PVVRfU1BFRUQgPSAwLjEyO1xyXG5cclxuLy8gSW50ZXJuYWwgbG9hZCB0eXBlcyBmb3IgbG9hZGVyc1xyXG5leHBvcnQgY29uc3QgSW50ZXJuYWxMb2FkVHlwZSA9IHtcclxuICAgIERpcmVjdFRvU3BsYXRCdWZmZXI6IDAsXHJcbiAgICBEaXJlY3RUb1NwbGF0QXJyYXk6IDEsXHJcbiAgICBEb3dubG9hZEJlZm9yZVByb2Nlc3Npbmc6IDJcclxufTtcclxuXHJcbi8vIExvYWRlciBzdGF0dXNcclxuZXhwb3J0IGNvbnN0IExvYWRlclN0YXR1cyA9IHtcclxuICAgICdEb3dubG9hZGluZyc6IDAsXHJcbiAgICAnUHJvY2Vzc2luZyc6IDEsXHJcbiAgICAnRG9uZSc6IDJcclxufTtcclxuIiwiLyoqXHJcbiAqIExvYWRlclV0aWxzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIExvYWRlciB1dGlsaXRpZXMgZm9yIGRlY29kaW5nIHRleHQgYW5kIHJlc29sdmluZyBVUkxzLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBMb2FkZXJVdGlscyB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgVGV4dERlY29kZXIgaW5zdGVhZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGVjb2RlVGV4dChhcnJheSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXJyYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmFsbGJhY2sgZm9yIGVudmlyb25tZW50cyB3aXRob3V0IFRleHREZWNvZGVyXHJcbiAgICAgICAgbGV0IHMgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlsID0gYXJyYXkubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBJbXBsaWNpdGx5IGFzc3VtZXMgbGl0dGxlLWVuZGlhbi5cclxuICAgICAgICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFycmF5W2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIG1lcmdlcyBtdWx0aS1ieXRlIHV0Zi04IGNoYXJhY3RlcnMuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHMpKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgLy8gc2VlICMxNjM1OCAtIGlnbm9yZSBkZWNvZGluZyBlcnJvcnNcclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBleHRyYWN0VXJsQmFzZSh1cmwpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHVybC5sYXN0SW5kZXhPZignLycpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gJy4vJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybC5zbGljZSgwLCBpbmRleCArIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZXNvbHZlVVJMKHVybCwgcGF0aCkge1xyXG4gICAgICAgIC8vIEludmFsaWQgVVJMXHJcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnIHx8IHVybCA9PT0gJycpIHJldHVybiAnJztcclxuXHJcbiAgICAgICAgLy8gSG9zdCBSZWxhdGl2ZSBVUkxcclxuICAgICAgICBpZiAoL15odHRwcz86XFwvXFwvL2kudGVzdChwYXRoKSAmJiAvXlxcLy8udGVzdCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLyheaHR0cHM/OlxcL1xcL1teL10rKS4qL2ksICckMScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWJzb2x1dGUgVVJMIGh0dHA6Ly8saHR0cHM6Ly8sLy9cclxuICAgICAgICBpZiAoL14oaHR0cHM/Oik/XFwvXFwvL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBEYXRhIFVSSVxyXG4gICAgICAgIGlmICgvXmRhdGE6LiosLiokL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBCbG9iIFVSTFxyXG4gICAgICAgIGlmICgvXmJsb2I6LiokL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBSZWxhdGl2ZSBVUkxcclxuICAgICAgICByZXR1cm4gcGF0aCArIHVybDtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogQXBwbGljYXRpb25FcnJvciAtIEJhc2UgZXJyb3IgY2xhc3MgZm9yIGFsbCBhcHBsaWNhdGlvbiBlcnJvcnNcclxuICpcclxuICogUHJvdmlkZXMgc3RydWN0dXJlZCBlcnJvciBoYW5kbGluZyB3aXRoIGVycm9yIGNvZGVzIGFuZCBjYXVzZSB0cmFja2luZy5cclxuICogQWxsIGRvbWFpbi1zcGVjaWZpYyBlcnJvcnMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBFcnJvclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFwcGxpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBBcHBsaWNhdGlvbkVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEh1bWFuLXJlYWRhYmxlIGVycm9yIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIC0gTWFjaGluZS1yZWFkYWJsZSBlcnJvciBjb2RlIGZvciBwcm9ncmFtbWF0aWMgaGFuZGxpbmdcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgZXJyb3IgKGZvciBlcnJvciBjaGFpbmluZylcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xyXG5cclxuICAgICAgICAvLyBDYXB0dXJlIHN0YWNrIHRyYWNlLCBleGNsdWRpbmcgY29uc3RydWN0b3IgY2FsbCBmcm9tIGl0XHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgZXJyb3IgdG8gSlNPTiBmb3IgbG9nZ2luZy90cmFuc21pc3Npb25cclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEpTT04gcmVwcmVzZW50YXRpb24gb2YgZXJyb3JcclxuICAgICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxyXG4gICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXHJcbiAgICAgICAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxyXG4gICAgICAgICAgICBjYXVzZTogdGhpcy5jYXVzZSA/IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY2F1c2UubmFtZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuY2F1c2UubWVzc2FnZVxyXG4gICAgICAgICAgICB9IDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0aW9uRXJyb3IgLSBUaHJvd24gd2hlbiBpbnB1dCB2YWxpZGF0aW9uIGZhaWxzXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGludmFsaWQgcGFyYW1ldGVycywgb3V0LW9mLXJhbmdlIHZhbHVlcywgb3IgbWFsZm9ybWVkIGRhdGEuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgVmFsaWRhdGlvbkVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIFZhbGlkYXRpb24gZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gTmFtZSBvZiB0aGUgZmllbGQgdGhhdCBmYWlsZWQgdmFsaWRhdGlvblxyXG4gICAgICogQHBhcmFtIHtFcnJvcn0gW2NhdXNlPW51bGxdIC0gT3JpZ2luYWwgZXJyb3IgdGhhdCBjYXVzZWQgdGhpcyB2YWxpZGF0aW9uIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGQsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdWQUxJREFUSU9OX0VSUk9SJywgY2F1c2UpO1xyXG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE5ldHdvcmtFcnJvciAtIFRocm93biB3aGVuIG5ldHdvcmsgb3BlcmF0aW9ucyBmYWlsXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGZldGNoIGZhaWx1cmVzLCB0aW1lb3V0cywgb3IgSFRUUCBlcnJvciByZXNwb25zZXMuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOZXR3b3JrRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgTmV0d29ya0Vycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIE5ldHdvcmsgZXJyb3IgZGVzY3JpcHRpb25cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhdHVzQ29kZT0wXSAtIEhUVFAgc3RhdHVzIGNvZGUgKGlmIGFwcGxpY2FibGUpXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIG5ldHdvcmsgZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlID0gMCwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ05FVFdPUktfRVJST1InLCBjYXVzZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFzc2V0TG9hZEVycm9yIC0gVGhyb3duIHdoZW4gYXNzZXQgbG9hZGluZyBmYWlsc1xyXG4gKlxyXG4gKiBVc2VkIGZvciBmYWlsdXJlcyBsb2FkaW5nIG1vZGVscywgdGV4dHVyZXMsIG9yIG90aGVyIGFzc2V0IGZpbGVzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXNzZXRMb2FkRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIEFzc2V0TG9hZEVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEFzc2V0IGxvYWQgZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFzc2V0UGF0aCAtIFBhdGggdG8gdGhlIGFzc2V0IHRoYXQgZmFpbGVkIHRvIGxvYWRcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgbG9hZCBmYWlsdXJlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGFzc2V0UGF0aCwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ0FTU0VUX0xPQURfRVJST1InLCBjYXVzZSk7XHJcbiAgICAgICAgdGhpcy5hc3NldFBhdGggPSBhc3NldFBhdGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNvdXJjZURpc3Bvc2VkRXJyb3IgLSBUaHJvd24gd2hlbiBhdHRlbXB0aW5nIHRvIHVzZSBhIGRpc3Bvc2VkIHJlc291cmNlXHJcbiAqXHJcbiAqIFVzZWQgdG8gcHJldmVudCB1c2UtYWZ0ZXItZGlzcG9zZSBidWdzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VEaXNwb3NlZEVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJlc291cmNlRGlzcG9zZWRFcnJvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc291cmNlTmFtZSAtIE5hbWUgb2YgdGhlIGRpc3Bvc2VkIHJlc291cmNlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJlc291cmNlTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBgQ2Fubm90IHVzZSAke3Jlc291cmNlTmFtZX06IHJlc291cmNlIGhhcyBiZWVuIGRpc3Bvc2VkYCxcclxuICAgICAgICAgICAgJ1JFU09VUkNFX0RJU1BPU0VEX0VSUk9SJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZU5hbWUgPSByZXNvdXJjZU5hbWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXphdGlvbkVycm9yIC0gVGhyb3duIHdoZW4gaW5pdGlhbGl6YXRpb24gZmFpbHNcclxuICpcclxuICogVXNlZCB3aGVuIHJlcXVpcmVkIHNldHVwIHN0ZXBzIGZhaWwgb3IgcHJlcmVxdWlzaXRlcyBhcmUgbm90IG1ldC5cclxuICpcclxuICogQGV4dGVuZHMgQXBwbGljYXRpb25FcnJvclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluaXRpYWxpemF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIEluaXRpYWxpemF0aW9uRXJyb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gSW5pdGlhbGl6YXRpb24gZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudCAtIE5hbWUgb2YgY29tcG9uZW50IHRoYXQgZmFpbGVkIHRvIGluaXRpYWxpemVcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgaW5pdGlhbGl6YXRpb24gZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb21wb25lbnQsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdJTklUSUFMSVpBVElPTl9FUlJPUicsIGNhdXNlKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlRXJyb3IgLSBUaHJvd24gd2hlbiBwYXJzaW5nIGRhdGEgZmFpbHNcclxuICpcclxuICogVXNlZCBmb3IgbWFsZm9ybWVkIGZpbGUgZm9ybWF0cywgaW52YWxpZCBKU09OLCBvciBjb3JydXB0IGRhdGEuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBQYXJzZUVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFBhcnNlRXJyb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gUGFyc2UgZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFUeXBlIC0gVHlwZSBvZiBkYXRhIGJlaW5nIHBhcnNlZCAoZS5nLiwgJ0pTT04nLCAnUExZJywgJ0dMQicpXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIHBhcnNlIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZGF0YVR5cGUsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdQQVJTRV9FUlJPUicsIGNhdXNlKTtcclxuICAgICAgICB0aGlzLmRhdGFUeXBlID0gZGF0YVR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25maWd1cmF0aW9uRXJyb3IgLSBUaHJvd24gd2hlbiBjb25maWd1cmF0aW9uIGlzIGludmFsaWRcclxuICpcclxuICogVXNlZCBmb3IgaW52YWxpZCBzZXR0aW5ncywgbWlzc2luZyByZXF1aXJlZCBjb25maWd1cmF0aW9uLCBvciBjb25mbGljdGluZyBvcHRpb25zLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbkVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIENvbmZpZ3VyYXRpb25FcnJvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBDb25maWd1cmF0aW9uIGVycm9yIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnS2V5IC0gQ29uZmlndXJhdGlvbiBrZXkgdGhhdCBpcyBpbnZhbGlkXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb25maWdLZXksIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdDT05GSUdVUkFUSU9OX0VSUk9SJywgY2F1c2UpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnS2V5ID0gY29uZmlnS2V5O1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBMb2dnZXIgLSBTdHJ1Y3R1cmVkIGxvZ2dpbmcgc3lzdGVtXHJcbiAqXHJcbiAqIFByb3ZpZGVzIGxldmVsZWQgbG9nZ2luZyB3aXRoIG9wdGlvbmFsIG91dHB1dCBzdXBwcmVzc2lvbiBmb3IgcHJvZHVjdGlvbi5cclxuICogUmVwbGFjZXMgZGlyZWN0IGNvbnNvbGUubG9nIGNhbGxzIGZvciBiZXR0ZXIgY29udHJvbCBhbmQgZGVidWdnaW5nLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBMb2dnZXIgbGV2ZWxzIGluIG9yZGVyIG9mIHNldmVyaXR5XHJcbiAqIE5vdGU6IE5hbWVkIExvZ2dlckxldmVsIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggZXhpc3RpbmcgTG9nTGV2ZWwgZW51bVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IExvZ2dlckxldmVsID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBERUJVRzogMCxcclxuICAgIElORk86IDEsXHJcbiAgICBXQVJOOiAyLFxyXG4gICAgRVJST1I6IDMsXHJcbiAgICBOT05FOiA0XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIExvZ2dlciBjbGFzcyBmb3Igc3RydWN0dXJlZCBhcHBsaWNhdGlvbiBsb2dnaW5nXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgTG9nZ2VyIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZXNwYWNlIC0gTG9nZ2VyIG5hbWVzcGFjZSAoZS5nLiwgJ1JlbmRlcmVyJywgJ0xvYWRlcicpXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbkxldmVsPUxvZ2dlckxldmVsLklORk9dIC0gTWluaW11bSBsb2cgbGV2ZWwgdG8gb3V0cHV0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWVzcGFjZSwgbWluTGV2ZWwgPSBMb2dnZXJMZXZlbC5JTkZPKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XHJcbiAgICAgICAgdGhpcy5taW5MZXZlbCA9IG1pbkxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IG1pbmltdW0gbG9nIGxldmVsXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBNaW5pbXVtIGxldmVsIGZyb20gTG9nZ2VyTGV2ZWwgZW51bVxyXG4gICAgICovXHJcbiAgICBzZXRMZXZlbChsZXZlbCkge1xyXG4gICAgICAgIHRoaXMubWluTGV2ZWwgPSBsZXZlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBsb2cgbWVzc2FnZSB3aXRoIG5hbWVzcGFjZSBhbmQgdGltZXN0YW1wXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxldmVsIC0gTG9nIGxldmVsIG5hbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBMb2cgYXJndW1lbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEZvcm1hdHRlZCBhcmd1bWVudHNcclxuICAgICAqL1xyXG4gICAgX2Zvcm1hdChsZXZlbCwgYXJncykge1xyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBwcmVmaXggPSBgWyR7dGltZXN0YW1wfV0gWyR7bGV2ZWx9XSBbJHt0aGlzLm5hbWVzcGFjZX1dYDtcclxuICAgICAgICByZXR1cm4gW3ByZWZpeCwgLi4uYXJnc107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2cgZGVidWcgbWVzc2FnZSAobW9zdCB2ZXJib3NlKVxyXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIC0gQXJndW1lbnRzIHRvIGxvZ1xyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyguLi50aGlzLl9mb3JtYXQoJ0RFQlVHJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBpbmZvIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBsb2dcclxuICAgICAqL1xyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuSU5GTykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oLi4udGhpcy5fZm9ybWF0KCdJTkZPJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyB3YXJuaW5nIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBsb2dcclxuICAgICAqL1xyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuV0FSTikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oLi4udGhpcy5fZm9ybWF0KCdXQVJOJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBlcnJvciBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgLSBBcmd1bWVudHMgdG8gbG9nXHJcbiAgICAgKi9cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5taW5MZXZlbCA8PSBMb2dnZXJMZXZlbC5FUlJPUikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKC4uLnRoaXMuX2Zvcm1hdCgnRVJST1InLCBhcmdzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9nIGVycm9yIHdpdGggc3RhY2sgdHJhY2VcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIC0gRXJyb3Igb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbnRleHRdIC0gQWRkaXRpb25hbCBjb250ZXh0XHJcbiAgICAgKi9cclxuICAgIGVycm9yV2l0aFRyYWNlKGVycm9yLCBjb250ZXh0ID0gJycpIHtcclxuICAgICAgICBpZiAodGhpcy5taW5MZXZlbCA8PSBMb2dnZXJMZXZlbC5FUlJPUikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0U3RyID0gY29udGV4dCA/IGAgQ29udGV4dDogJHtjb250ZXh0fWAgOiAnJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvciguLi50aGlzLl9mb3JtYXQoJ0VSUk9SJywgW1xyXG4gICAgICAgICAgICAgICAgYCR7ZXJyb3IubWVzc2FnZX0ke2NvbnRleHRTdHJ9YCxcclxuICAgICAgICAgICAgICAgICdcXG5TdGFjazonLCBlcnJvci5zdGFja1xyXG4gICAgICAgICAgICBdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgY2hpbGQgbG9nZ2VyIHdpdGggZXh0ZW5kZWQgbmFtZXNwYWNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGROYW1lc3BhY2UgLSBDaGlsZCBuYW1lc3BhY2UgdG8gYXBwZW5kXHJcbiAgICAgKiBAcmV0dXJucyB7TG9nZ2VyfSBOZXcgbG9nZ2VyIHdpdGggY29tYmluZWQgbmFtZXNwYWNlXHJcbiAgICAgKi9cclxuICAgIGNoaWxkKGNoaWxkTmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMb2dnZXIoYCR7dGhpcy5uYW1lc3BhY2V9OiR7Y2hpbGROYW1lc3BhY2V9YCwgdGhpcy5taW5MZXZlbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgbG9nZ2VyIHJlZ2lzdHJ5XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBsb2dnZXJzID0gbmV3IE1hcCgpO1xyXG5cclxuLyoqXHJcbiAqIEdsb2JhbCBsb2cgbGV2ZWwgKGFmZmVjdHMgYWxsIG5ldyBsb2dnZXJzKVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxubGV0IGdsb2JhbExvZ0xldmVsID0gTG9nZ2VyTGV2ZWwuSU5GTztcclxuXHJcbi8qKlxyXG4gKiBTZXQgZ2xvYmFsIGxvZyBsZXZlbCBmb3IgYWxsIGxvZ2dlcnNcclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIC0gTG9nIGxldmVsIGZyb20gTG9nZ2VyTGV2ZWwgZW51bVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEdsb2JhbExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBnbG9iYWxMb2dMZXZlbCA9IGxldmVsO1xyXG4gICAgLy8gVXBkYXRlIGV4aXN0aW5nIGxvZ2dlcnNcclxuICAgIGZvciAoY29uc3QgbG9nZ2VyIG9mIGxvZ2dlcnMudmFsdWVzKCkpIHtcclxuICAgICAgICBsb2dnZXIuc2V0TGV2ZWwobGV2ZWwpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IG9yIGNyZWF0ZSBhIGxvZ2dlciBmb3IgYSBuYW1lc3BhY2VcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIExvZ2dlciBuYW1lc3BhY2VcclxuICogQHJldHVybnMge0xvZ2dlcn0gTG9nZ2VyIGluc3RhbmNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSkge1xyXG4gICAgaWYgKCFsb2dnZXJzLmhhcyhuYW1lc3BhY2UpKSB7XHJcbiAgICAgICAgbG9nZ2Vycy5zZXQobmFtZXNwYWNlLCBuZXcgTG9nZ2VyKG5hbWVzcGFjZSwgZ2xvYmFsTG9nTGV2ZWwpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsb2dnZXJzLmdldChuYW1lc3BhY2UpO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJlIGxvZ2dpbmcgZm9yIHByb2R1Y3Rpb24gKHN1cHByZXNzIGFsbCBsb2dzKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZUZvclByb2R1Y3Rpb24oKSB7XHJcbiAgICBzZXRHbG9iYWxMb2dMZXZlbChMb2dnZXJMZXZlbC5OT05FKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbmZpZ3VyZSBsb2dnaW5nIGZvciBkZXZlbG9wbWVudCAoc2hvdyBhbGwgbG9ncylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVGb3JEZXZlbG9wbWVudCgpIHtcclxuICAgIHNldEdsb2JhbExvZ0xldmVsKExvZ2dlckxldmVsLkRFQlVHKTtcclxufVxyXG5cclxuLy8gRXhwb3J0IGRlZmF1bHQgbG9nZ2VyIGZvciBjb252ZW5pZW5jZVxyXG5leHBvcnQgZGVmYXVsdCBnZXRMb2dnZXIoJ0FwcCcpO1xyXG4iLCIvKipcclxuICogQ29yZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgR2F1c3NpYW4gU3BsYXQgcmVuZGVyaW5nXHJcbiAqXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0YVV0aWxzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBOZXR3b3JrRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuL0xvZ2dlci5qcyc7XHJcblxyXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBDdXN0b20gZXJyb3IgZm9yIGFib3J0ZWQgb3BlcmF0aW9uc1xyXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmV0d29ya0Vycm9yIGluc3RlYWQgZm9yIGNvbnNpc3RlbmN5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWJvcnRlZFByb21pc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKG1zZykge1xyXG4gICAgICAgIHN1cGVyKG1zZyk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ0Fib3J0ZWRQcm9taXNlRXJyb3InO1xyXG4gICAgICAgIHRoaXMuY29kZSA9ICdBQk9SVEVEJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIHdpdGggcHJvZ3Jlc3MgdHJhY2tpbmcgdXNpbmcgc3RhbmRhcmQgQWJvcnRDb250cm9sbGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVVJMIHRvIGZldGNoXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzXSAtIFByb2dyZXNzIGNhbGxiYWNrIChwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rLCBmaWxlU2l6ZSlcclxuICogQHBhcmFtIHtib29sZWFufSBbc2F2ZUNodW5rcz10cnVlXSAtIFdoZXRoZXIgdG8gc2F2ZSBhbmQgcmV0dXJuIGRvd25sb2FkZWQgY2h1bmtzXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbaGVhZGVyc10gLSBPcHRpb25hbCBIVFRQIGhlYWRlcnNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXlCdWZmZXI+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBkb3dubG9hZGVkIGRhdGFcclxuICogQHRocm93cyB7TmV0d29ya0Vycm9yfSBJZiBmZXRjaCBmYWlscyBvciBpcyBhYm9ydGVkXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZmV0Y2hXaXRoUHJvZ3Jlc3MgPSBmdW5jdGlvbihwYXRoLCBvblByb2dyZXNzLCBzYXZlQ2h1bmtzID0gdHJ1ZSwgaGVhZGVycykge1xyXG5cclxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XHJcbiAgICBsZXQgYWJvcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIGxldCBvblByb2dyZXNzQ2FsbGVkQXRDb21wbGV0ZSA9IGZhbHNlO1xyXG4gICAgY29uc3QgbG9jYWxPblByb2dyZXNzID0gKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmssIGZpbGVTaXplKSA9PiB7XHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MgJiYgIW9uUHJvZ3Jlc3NDYWxsZWRBdENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmssIGZpbGVTaXplKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJjZW50ID09PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2FsbGVkQXRDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBsZXQgcHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3JzIGJyZWFrIHRoZSBkb3dubG9hZFxyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBwcm9ncmVzcyBjYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0geyBzaWduYWwgfTtcclxuICAgICAgICBpZiAoaGVhZGVycykgZmV0Y2hPcHRpb25zLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG5cclxuICAgICAgICBmZXRjaChwYXRoLCBmZXRjaE9wdGlvbnMpXHJcbiAgICAgICAgLnRoZW4oYXN5bmMgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIEhUVFAgZXJyb3IgcmVzcG9uc2VzXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yVGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQgPSBhd2FpdCBkYXRhLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBpZiB3ZSBjYW4ndCByZWFkIGVycm9yIHRleHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGZXRjaCBmYWlsZWQ6ICR7ZGF0YS5zdGF0dXNUZXh0fSR7ZXJyb3JUZXh0ID8gJyAtICcgKyBlcnJvclRleHQgOiAnJ31gLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gZGF0YS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgaWYgKCFyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKCdSZXNwb25zZSBib2R5IGlzIG5vdCByZWFkYWJsZScsIDApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGJ5dGVzRG93bmxvYWRlZCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IF9maWxlU2l6ZSA9IGRhdGEuaGVhZGVycy5nZXQoJ0NvbnRlbnQtTGVuZ3RoJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVTaXplID0gX2ZpbGVTaXplID8gcGFyc2VJbnQoX2ZpbGVTaXplLCAxMCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghYWJvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBjaHVuaywgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbE9uUHJvZ3Jlc3MoMTAwLCAnMTAwJScsIGNodW5rLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlQ2h1bmtzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQmxvYihjaHVua3MpLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzRG93bmxvYWRlZCArPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnRMYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZVNpemUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gKGJ5dGVzRG93bmxvYWRlZCAvIGZpbGVTaXplKSAqIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudExhYmVsID0gYCR7cGVyY2VudC50b0ZpeGVkKDIpfSVgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZUNodW5rcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsT25Qcm9ncmVzcyhwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgcmVhZGluZyByZXNwb25zZSBzdHJlYW06ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBEb24ndCB3cmFwIGlmIGFscmVhZHkgYSBOZXR3b3JrRXJyb3JcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTmV0d29ya0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOZXR3b3JrRXJyb3IoJ0ZldGNoIGFib3J0ZWQgYnkgdXNlcicsIDAsIGVycm9yKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IE5ldHdvcmtFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmV0Y2ggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEF0dGFjaCBhYm9ydCBmdW5jdGlvbmFsaXR5IHRvIHRoZSBwcm9taXNlXHJcbiAgICBwcm9taXNlLmFib3J0ID0gKHJlYXNvbikgPT4ge1xyXG4gICAgICAgIGFib3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydChyZWFzb24pO1xyXG4gICAgfTtcclxuICAgIHByb21pc2UuYWJvcnRDb250cm9sbGVyID0gYWJvcnRDb250cm9sbGVyO1xyXG5cclxuICAgIHJldHVybiBwcm9taXNlO1xyXG59O1xyXG5cclxuLy8gQ2xhbXAgdmFsdWUgYmV0d2VlbiBtaW4gYW5kIG1heFxyXG5leHBvcnQgY29uc3QgY2xhbXAgPSBmdW5jdGlvbih2YWwsIG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xyXG59O1xyXG5cclxuLy8gR2V0IGN1cnJlbnQgdGltZSBpbiBzZWNvbmRzXHJcbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDtcclxufTtcclxuXHJcbi8vIERpc3Bvc2UgYWxsIG1lc2hlcyBpbiBhIHNjZW5lIGdyYXBoXHJcbmV4cG9ydCBjb25zdCBkaXNwb3NlQWxsTWVzaGVzID0gKG9iamVjdDNEKSA9PiB7XHJcbiAgICBpZiAob2JqZWN0M0QuZ2VvbWV0cnkpIHtcclxuICAgICAgICBvYmplY3QzRC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgb2JqZWN0M0QuZ2VvbWV0cnkgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iamVjdDNELm1hdGVyaWFsKSB7XHJcbiAgICAgICAgb2JqZWN0M0QubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgIG9iamVjdDNELm1hdGVyaWFsID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmIChvYmplY3QzRC5jaGlsZHJlbikge1xyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG9iamVjdDNELmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGRpc3Bvc2VBbGxNZXNoZXMoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8vIERlbGF5ZWQgZXhlY3V0aW9uIGhlbHBlclxyXG5leHBvcnQgY29uc3QgZGVsYXllZEV4ZWN1dGUgPSAoZnVuYywgZmFzdCkgPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKGZ1bmMoKSk7XHJcbiAgICAgICAgfSwgZmFzdCA/IDEgOiA1MCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIEdldCBzcGhlcmljYWwgaGFybW9uaWNzIGNvbXBvbmVudCBjb3VudCBmb3IgZGVncmVlXHJcbmV4cG9ydCBjb25zdCBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSA9IChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSA9PiB7XHJcbiAgICBzd2l0Y2ggKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuIDk7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICByZXR1cm4gMjQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBuYXRpdmUgcHJvbWlzZSB3aXRoIGV4dHJhY3RlZCBjb21wb25lbnRzXHJcbmV4cG9ydCBjb25zdCBuYXRpdmVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMgPSAoKSA9PiB7XHJcbiAgICBsZXQgcmVzb2x2ZXI7XHJcbiAgICBsZXQgcmVqZWN0ZXI7XHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmVyID0gcmVzb2x2ZTtcclxuICAgICAgICByZWplY3RlciA9IHJlamVjdDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAncHJvbWlzZSc6IHByb21pc2UsXHJcbiAgICAgICAgJ3Jlc29sdmUnOiByZXNvbHZlcixcclxuICAgICAgICAncmVqZWN0JzogcmVqZWN0ZXJcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgcHJvbWlzZSB3aXRoIGV4dHJhY3RlZCByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnMgYW5kIG9wdGlvbmFsIGFib3J0IGNhcGFiaWxpdHlcclxuICogVXNlcyBzdGFuZGFyZCBQcm9taXNlIHdpdGggYXR0YWNoZWQgYWJvcnQgbWV0aG9kXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzID0gKGFib3J0SGFuZGxlcikgPT4ge1xyXG4gICAgbGV0IHJlc29sdmVyO1xyXG4gICAgbGV0IHJlamVjdGVyO1xyXG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXNvbHZlciA9IHJlc29sdmU7XHJcbiAgICAgICAgcmVqZWN0ZXIgPSByZWplY3Q7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQXR0YWNoIGFib3J0IG1ldGhvZCB0byBwcm9taXNlXHJcbiAgICBwcm9taXNlLmFib3J0ID0gYWJvcnRIYW5kbGVyIHx8ICgoKSA9PiB7fSk7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgJ3Byb21pc2UnOiBwcm9taXNlLFxyXG4gICAgICAgICdyZXNvbHZlJzogcmVzb2x2ZXIsXHJcbiAgICAgICAgJ3JlamVjdCc6IHJlamVjdGVyXHJcbiAgICB9O1xyXG59O1xyXG5cclxuLy8gU2VtdmVyIGNsYXNzIGZvciB2ZXJzaW9uIGhhbmRsaW5nXHJcbmV4cG9ydCBjbGFzcyBTZW12ZXIge1xyXG4gICAgY29uc3RydWN0b3IobWFqb3IsIG1pbm9yLCBwYXRjaCkge1xyXG4gICAgICAgIHRoaXMubWFqb3IgPSBtYWpvcjtcclxuICAgICAgICB0aGlzLm1pbm9yID0gbWlub3I7XHJcbiAgICAgICAgdGhpcy5wYXRjaCA9IHBhdGNoO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1ham9yfV8ke3RoaXMubWlub3J9XyR7dGhpcy5wYXRjaH1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBpT1MgZGV0ZWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0lPUygpIHtcclxuICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdpUGhvbmUnKSA+IDAgfHwgdWEuaW5kZXhPZignaVBhZCcpID4gMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElPU1NlbWV2ZXIoKSB7XHJcbiAgICBpZiAoaXNJT1MoKSkge1xyXG4gICAgICAgIGNvbnN0IGV4dHJhY3QgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTZW12ZXIoXHJcbiAgICAgICAgICAgIHBhcnNlSW50KGV4dHJhY3RbMV0gfHwgMCwgMTApLFxyXG4gICAgICAgICAgICBwYXJzZUludChleHRyYWN0WzJdIHx8IDAsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoZXh0cmFjdFszXSB8fCAwLCAxMClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vIEhhbGYgZmxvYXQgY29udmVyc2lvbiB1dGlsaXRpZXNcclxuZXhwb3J0IGNvbnN0IHRvSGFsZkZsb2F0ID0gRGF0YVV0aWxzLnRvSGFsZkZsb2F0LmJpbmQoRGF0YVV0aWxzKTtcclxuZXhwb3J0IGNvbnN0IGZyb21IYWxmRmxvYXQgPSBEYXRhVXRpbHMuZnJvbUhhbGZGbG9hdC5iaW5kKERhdGFVdGlscyk7XHJcblxyXG4vLyBEZWZhdWx0IHNwaGVyaWNhbCBoYXJtb25pY3MgY29tcHJlc3Npb24gcmFuZ2UgKGltcG9ydGVkIGZyb20gZW51bXMpXHJcbmltcG9ydCB7IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSB9IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcbmV4cG9ydCB7IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSB9O1xyXG5leHBvcnQgY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZSA9IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSAvIDIuMDtcclxuXHJcbi8vIFVuY29tcHJlc3MgZmxvYXQgYmFzZWQgb24gY29tcHJlc3Npb24gbGV2ZWxcclxuZXhwb3J0IGNvbnN0IHRvVW5jb21wcmVzc2VkRmxvYXQgPSAoZiwgY29tcHJlc3Npb25MZXZlbCwgaXNTSCA9IGZhbHNlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCkgPT4ge1xyXG4gICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gZjtcclxuICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMSB8fCAoY29tcHJlc3Npb25MZXZlbCA9PT0gMiAmJiAhaXNTSCkpIHtcclxuICAgICAgICByZXR1cm4gRGF0YVV0aWxzLmZyb21IYWxmRmxvYXQoZik7XHJcbiAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gZnJvbVVpbnQ4KGYsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIENvbnZlcnQgdG8gdWludDhcclxuZXhwb3J0IGNvbnN0IHRvVWludDggPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICB2ID0gY2xhbXAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KTtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuIGNsYW1wKE1hdGguZmxvb3IoKHYgLSByYW5nZU1pbikgLyByYW5nZSAqIDI1NSksIDAsIDI1NSk7XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGZyb20gdWludDhcclxuZXhwb3J0IGNvbnN0IGZyb21VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuICh2IC8gMjU1ICogcmFuZ2UgKyByYW5nZU1pbik7XHJcbn07XHJcblxyXG4vLyBIYWxmIGZsb2F0IHRvIHVpbnQ4XHJcbmV4cG9ydCBjb25zdCBmcm9tSGFsZkZsb2F0VG9VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b1VpbnQ4KGZyb21IYWxmRmxvYXQodiksIHJhbmdlTWluLCByYW5nZU1heCk7XHJcbn07XHJcblxyXG4vLyBVaW50OCB0byBoYWxmIGZsb2F0XHJcbmV4cG9ydCBjb25zdCBmcm9tVWludDhUb0hhbGZGbG9hdCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b0hhbGZGbG9hdChmcm9tVWludDgodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSk7XHJcbn07XHJcblxyXG4vLyBSZWFkIGZsb2F0IGZyb20gRGF0YVZpZXcgYmFzZWQgb24gY29tcHJlc3Npb24gbGV2ZWxcclxuZXhwb3J0IGNvbnN0IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsID0gKGRhdGFWaWV3LCBmbG9hdEluZGV4LCBjb21wcmVzc2lvbkxldmVsLCBpc1NIID0gZmFsc2UpID0+IHtcclxuICAgIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldEZsb2F0MzIoZmxvYXRJbmRleCAqIDQsIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAxIHx8IChjb21wcmVzc2lvbkxldmVsID09PSAyICYmICFpc1NIKSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MTYoZmxvYXRJbmRleCAqIDIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDgoZmxvYXRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGJldHdlZW4gY29tcHJlc3Npb24gbGV2ZWxzXHJcbmV4cG9ydCBjb25zdCBjb252ZXJ0QmV0d2VlbkNvbXByZXNzaW9uTGV2ZWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBub29wID0gKHYpID0+IHY7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCwgZnJvbUxldmVsLCB0b0xldmVsLCBpc1NIID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoZnJvbUxldmVsID09PSB0b0xldmVsKSByZXR1cm4gdmFsO1xyXG4gICAgICAgIGxldCBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcblxyXG4gICAgICAgIGlmIChmcm9tTGV2ZWwgPT09IDIgJiYgaXNTSCkge1xyXG4gICAgICAgICAgICBpZiAodG9MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tVWludDhUb0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGZyb21MZXZlbCA9PT0gMiB8fCBmcm9tTGV2ZWwgPT09IDEpIHtcclxuICAgICAgICAgICAgaWYgKHRvTGV2ZWwgPT09IDApIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NIKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICBlbHNlIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdFRvVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGZyb21MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpZiAodG9MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSB0b0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NIKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICAgICAgZWxzZSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvdXRwdXRDb252ZXJzaW9uRnVuYyh2YWwpO1xyXG4gICAgfTtcclxufSgpO1xyXG5cclxuLy8gQ29weSBiZXR3ZWVuIGJ1ZmZlcnNcclxuZXhwb3J0IGNvbnN0IGNvcHlCZXR3ZWVuQnVmZmVycyA9IChzcmNCdWZmZXIsIHNyY09mZnNldCwgZGVzdEJ1ZmZlciwgZGVzdE9mZnNldCwgYnl0ZUNvdW50ID0gMCkgPT4ge1xyXG4gICAgY29uc3Qgc3JjID0gbmV3IFVpbnQ4QXJyYXkoc3JjQnVmZmVyLCBzcmNPZmZzZXQpO1xyXG4gICAgY29uc3QgZGVzdCA9IG5ldyBVaW50OEFycmF5KGRlc3RCdWZmZXIsIGRlc3RPZmZzZXQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ291bnQ7IGkrKykge1xyXG4gICAgICAgIGRlc3RbaV0gPSBzcmNbaV07XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBGbG9hdCB0byBoYWxmIGZsb2F0IGNvbnZlcnNpb25cclxuZXhwb3J0IGNvbnN0IGZsb2F0VG9IYWxmID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBmbG9hdFZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KDEpO1xyXG4gICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZmxvYXRWaWV3LmJ1ZmZlcik7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIGZsb2F0Vmlld1swXSA9IHZhbDtcclxuICAgICAgICBjb25zdCB4ID0gaW50MzJWaWV3WzBdO1xyXG5cclxuICAgICAgICBsZXQgYml0cyA9ICh4ID4+IDE2KSAmIDB4ODAwMDtcclxuICAgICAgICBsZXQgbSA9ICh4ID4+IDEyKSAmIDB4MDdmZjtcclxuICAgICAgICBjb25zdCBlID0gKHggPj4gMjMpICYgMHhmZjtcclxuXHJcbiAgICAgICAgaWYgKGUgPCAxMDMpIHJldHVybiBiaXRzO1xyXG5cclxuICAgICAgICBpZiAoZSA+IDE0Mikge1xyXG4gICAgICAgICAgICBiaXRzIHw9IDB4N2MwMDtcclxuICAgICAgICAgICAgYml0cyB8PSAoKGUgPT0gMjU1KSA/IDAgOiAxKSAmJiAoeCAmIDB4MDA3ZmZmZmYpO1xyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlIDwgMTEzKSB7XHJcbiAgICAgICAgICAgIG0gfD0gMHgwODAwO1xyXG4gICAgICAgICAgICBiaXRzIHw9IChtID4+ICgxMTQgLSBlKSkgKyAoKG0gPj4gKDExMyAtIGUpKSAmIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJpdHMgfD0gKChlIC0gMTEyKSA8PCAxMCkgfCAobSA+PiAxKTtcclxuICAgICAgICBiaXRzICs9IG0gJiAxO1xyXG4gICAgICAgIHJldHVybiBiaXRzO1xyXG4gICAgfTtcclxufSgpO1xyXG5cclxuLy8gRW5jb2RlIGZsb2F0IGFzIHVpbnRcclxuZXhwb3J0IGNvbnN0IHVpbnRFbmNvZGVkRmxvYXQgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGZsb2F0VmlldyA9IG5ldyBGbG9hdDMyQXJyYXkoMSk7XHJcbiAgICBjb25zdCBpbnQzMlZpZXcgPSBuZXcgSW50MzJBcnJheShmbG9hdFZpZXcuYnVmZmVyKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZikge1xyXG4gICAgICAgIGZsb2F0Vmlld1swXSA9IGY7XHJcbiAgICAgICAgcmV0dXJuIGludDMyVmlld1swXTtcclxuICAgIH07XHJcbn0oKTtcclxuXHJcbi8vIFJHQkEgdG8gaW50ZWdlclxyXG5leHBvcnQgY29uc3QgcmdiYVRvSW50ZWdlciA9IGZ1bmN0aW9uKHIsIGcsIGIsIGEpIHtcclxuICAgIHJldHVybiByICsgKGcgPDwgOCkgKyAoYiA8PCAxNikgKyAoYSA8PCAyNCk7XHJcbn07XHJcblxyXG4vLyBSR0JBIGFycmF5IHRvIGludGVnZXJcclxuZXhwb3J0IGNvbnN0IHJnYmFBcnJheVRvSW50ZWdlciA9IGZ1bmN0aW9uKGFyciwgb2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gYXJyW29mZnNldF0gKyAoYXJyW29mZnNldCArIDFdIDw8IDgpICsgKGFycltvZmZzZXQgKyAyXSA8PCAxNikgKyAoYXJyW29mZnNldCArIDNdIDw8IDI0KTtcclxufTtcclxuXHJcbi8vIEJBU0VfQ09NUE9ORU5UX0NPVU5UIGZvciBVbmNvbXByZXNzZWRTcGxhdEFycmF5XHJcbmV4cG9ydCBjb25zdCBCQVNFX0NPTVBPTkVOVF9DT1VOVCA9IDE0O1xyXG4iLCIvKipcclxuICogVmFsaWRhdGlvblV0aWxzIC0gU2VjdXJpdHktZm9jdXNlZCB2YWxpZGF0aW9uIHV0aWxpdGllc1xyXG4gKlxyXG4gKiBDUklUSUNBTDogQWxsIGV4dGVybmFsIGlucHV0cyBNVVNUIGJlIHZhbGlkYXRlZCBiZWZvcmUgdXNlLlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBhbGxvd2xpc3QtYmFzZWQgdmFsaWRhdGlvbiBmb2xsb3dpbmcgc2VjdXJpdHkgYmVzdCBwcmFjdGljZXMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuXHJcbi8qKlxyXG4gKiBBbGxvd2VkIFVSTCBwcm90b2NvbHMgKGFsbG93bGlzdCBhcHByb2FjaClcclxuICovXHJcbmNvbnN0IEFMTE9XRURfUFJPVE9DT0xTID0gT2JqZWN0LmZyZWV6ZShbJ2h0dHBzOicsICdodHRwOicsICdibG9iOicsICdkYXRhOiddKTtcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBhbmQgc2FuaXRpemUgYSBVUkxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byB2YWxpZGF0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2Jhc2VVUkxdIC0gQmFzZSBVUkwgZm9yIHJlbGF0aXZlIFVSTHMgKGRlZmF1bHRzIHRvIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBTYW5pdGl6ZWQgYWJzb2x1dGUgVVJMXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgVVJMIGlzIGludmFsaWQgb3IgdXNlcyBkaXNhbGxvd2VkIHByb3RvY29sXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVcmwodXJsLCBiYXNlVVJMKSB7XHJcbiAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1VSTCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICd1cmwnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGFyc2VkO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBVc2UgYmFzZSBVUkwgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2Ugd2luZG93IGxvY2F0aW9uIChicm93c2VyIG9ubHkpXHJcbiAgICAgICAgY29uc3QgYmFzZSA9IGJhc2VVUkwgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLmhyZWYgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIHBhcnNlZCA9IG5ldyBVUkwodXJsLCBiYXNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYEludmFsaWQgVVJMIGZvcm1hdDogJHt1cmx9YCxcclxuICAgICAgICAgICAgJ3VybCcsXHJcbiAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBwcm90b2NvbCBhZ2FpbnN0IGFsbG93bGlzdFxyXG4gICAgaWYgKCFBTExPV0VEX1BST1RPQ09MUy5pbmNsdWRlcyhwYXJzZWQucHJvdG9jb2wpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYERpc2FsbG93ZWQgcHJvdG9jb2w6ICR7cGFyc2VkLnByb3RvY29sfS4gQWxsb3dlZCBwcm90b2NvbHM6ICR7QUxMT1dFRF9QUk9UT0NPTFMuam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICAndXJsLnByb3RvY29sJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZC5ocmVmO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgYXNzZXQgcGF0aCB0byBwcmV2ZW50IHBhdGggdHJhdmVyc2FsIGF0dGFja3NcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBGaWxlIHBhdGggdG8gdmFsaWRhdGVcclxuICogQHJldHVybnMge3N0cmluZ30gVmFsaWRhdGVkIHBhdGhcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXRoIGNvbnRhaW5zIHRyYXZlcnNhbCBzZXF1ZW5jZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFzc2V0UGF0aChwYXRoKSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggIT09ICdzdHJpbmcnIHx8IHBhdGgubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignQXNzZXQgcGF0aCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICdwYXRoJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHBhdGggdHJhdmVyc2FsIHNlcXVlbmNlc1xyXG4gICAgY29uc3QgZGFuZ2Vyb3VzUGF0dGVybnMgPSBbJy4uLycsICcuLlxcXFwnLCAnJTJlJTJlLycsICclMmUlMmVcXFxcJ107XHJcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IHBhdGgudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZGFuZ2Vyb3VzUGF0dGVybnMpIHtcclxuICAgICAgICBpZiAobm9ybWFsaXplZFBhdGguaW5jbHVkZXMocGF0dGVybikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBQYXRoIHRyYXZlcnNhbCBkZXRlY3RlZCBpbiBhc3NldCBwYXRoOiAke3BhdGh9YCxcclxuICAgICAgICAgICAgICAgICdwYXRoJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGZpbGUgZXh0ZW5zaW9uIGFnYWluc3QgYWxsb3dsaXN0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlbmFtZSAtIEZpbGVuYW1lIHRvIHZhbGlkYXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFeHRlbnNpb25zIC0gQXJyYXkgb2YgYWxsb3dlZCBleHRlbnNpb25zIChlLmcuLCBbJy5wbHknLCAnLmdsYiddKVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBWYWxpZGF0ZWQgZmlsZW5hbWVcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBleHRlbnNpb24gaXMgbm90IGFsbG93ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpbGVFeHRlbnNpb24oZmlsZW5hbWUsIGFsbG93ZWRFeHRlbnNpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIGZpbGVuYW1lICE9PSAnc3RyaW5nJyB8fCBmaWxlbmFtZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdGaWxlbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICdmaWxlbmFtZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhbGxvd2VkRXh0ZW5zaW9ucykgfHwgYWxsb3dlZEV4dGVuc2lvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgJ2FsbG93ZWRFeHRlbnNpb25zIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknLFxyXG4gICAgICAgICAgICAnYWxsb3dlZEV4dGVuc2lvbnMnXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlbmFtZS5zbGljZShmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZEFsbG93ZWQgPSBhbGxvd2VkRXh0ZW5zaW9ucy5tYXAoZXh0ID0+IGV4dC50b0xvd2VyQ2FzZSgpKTtcclxuXHJcbiAgICBpZiAoIW5vcm1hbGl6ZWRBbGxvd2VkLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgRmlsZSBleHRlbnNpb24gJHtleHRlbnNpb259IG5vdCBhbGxvd2VkLiBBbGxvd2VkOiAke2FsbG93ZWRFeHRlbnNpb25zLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgJ2ZpbGVuYW1lJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZpbGVuYW1lO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgbnVtZXJpYyB2YWx1ZSBpcyB3aXRoaW4gcmFuZ2VcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiAtIE1pbmltdW0gYWxsb3dlZCB2YWx1ZSAoaW5jbHVzaXZlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gTWF4aW11bSBhbGxvd2VkIHZhbHVlIChpbmNsdXNpdmUpXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBOYW1lIG9mIGZpZWxkIGZvciBlcnJvciBtZXNzYWdlc1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWxpZGF0ZWQgdmFsdWVcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiB2YWx1ZSBpcyBub3QgYSBudW1iZXIgb3Igb3V0IG9mIHJhbmdlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXJJblJhbmdlKHZhbHVlLCBtaW4sIG1heCwgZmllbGROYW1lKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCBpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSB2YWxpZCBudW1iZXJgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWx1ZSA8IG1pbiB8fCB2YWx1ZSA+IG1heCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBiZXR3ZWVuICR7bWlufSBhbmQgJHttYXh9LCBnb3QgJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGludGVnZXIgdmFsdWVcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbGlkYXRlZCBpbnRlZ2VyXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGFuIGludGVnZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUludGVnZXIodmFsdWUsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIHBvc2l0aXZlIGludGVnZXJcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbGlkYXRlZCBwb3NpdGl2ZSBpbnRlZ2VyXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGEgcG9zaXRpdmUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKHZhbHVlLCBmaWVsZE5hbWUpIHtcclxuICAgIHZhbGlkYXRlSW50ZWdlcih2YWx1ZSwgZmllbGROYW1lKTtcclxuXHJcbiAgICBpZiAodmFsdWUgPD0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBwb3NpdGl2ZSwgZ290ICR7dmFsdWV9YCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBvYmplY3QgaGFzIHJlcXVpcmVkIHByb3BlcnRpZXNcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IG9iaiAtIE9iamVjdCB0byB2YWxpZGF0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSByZXF1aXJlZFByb3BzIC0gQXJyYXkgb2YgcmVxdWlyZWQgcHJvcGVydHkgbmFtZXNcclxuICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWUgLSBOYW1lIG9mIG9iamVjdCBmb3IgZXJyb3IgbWVzc2FnZXNcclxuICogQHJldHVybnMge29iamVjdH0gVmFsaWRhdGVkIG9iamVjdFxyXG4gKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIG9iamVjdCBpcyBpbnZhbGlkIG9yIG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmVxdWlyZWRQcm9wZXJ0aWVzKG9iaiwgcmVxdWlyZWRQcm9wcywgb2JqZWN0TmFtZSkge1xyXG4gICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9IG11c3QgYmUgYW4gb2JqZWN0YCxcclxuICAgICAgICAgICAgb2JqZWN0TmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBwcm9wIG9mIHJlcXVpcmVkUHJvcHMpIHtcclxuICAgICAgICBpZiAoIShwcm9wIGluIG9iaikgfHwgb2JqW3Byb3BdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGAke29iamVjdE5hbWV9IG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6ICR7cHJvcH1gLFxyXG4gICAgICAgICAgICAgICAgYCR7b2JqZWN0TmFtZX0uJHtwcm9wfWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGFycmF5IGJ1ZmZlclxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXIgLSBCdWZmZXIgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluU2l6ZT0wXSAtIE1pbmltdW0gc2l6ZSBpbiBieXRlc1xyXG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IFZhbGlkYXRlZCBidWZmZXJcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBidWZmZXIgaXMgaW52YWxpZCBvciB0b28gc21hbGxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFycmF5QnVmZmVyKGJ1ZmZlciwgZmllbGROYW1lLCBtaW5TaXplID0gMCkge1xyXG4gICAgaWYgKCEoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyYCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYnVmZmVyLmJ5dGVMZW5ndGggPCBtaW5TaXplKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGF0IGxlYXN0ICR7bWluU2l6ZX0gYnl0ZXMsIGdvdCAke2J1ZmZlci5ieXRlTGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ1ZmZlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGVudW0gdmFsdWUgYWdhaW5zdCBhbGxvd2VkIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtBcnJheX0gYWxsb3dlZFZhbHVlcyAtIEFycmF5IG9mIGFsbG93ZWQgdmFsdWVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBOYW1lIG9mIGZpZWxkIGZvciBlcnJvciBtZXNzYWdlc1xyXG4gKiBAcmV0dXJucyB7Kn0gVmFsaWRhdGVkIHZhbHVlXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGluIGFsbG93ZWQgdmFsdWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbnVtKHZhbHVlLCBhbGxvd2VkVmFsdWVzLCBmaWVsZE5hbWUpIHtcclxuICAgIGlmICghYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyh2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgb25lIG9mOiAke2FsbG93ZWRWYWx1ZXMuam9pbignLCAnKX0uIEdvdDogJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcXVpcmVkPXRydWVdIC0gV2hldGhlciBjYWxsYmFjayBpcyByZXF1aXJlZFxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258bnVsbH0gVmFsaWRhdGVkIGNhbGxiYWNrIG9yIG51bGwgaWYgbm90IHJlcXVpcmVkIGFuZCBub3QgcHJvdmlkZWRcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBjYWxsYmFjayBpcyByZXF1aXJlZCBidXQgbm90IGEgZnVuY3Rpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGNhbGxiYWNrLCBmaWVsZE5hbWUsIHJlcXVpcmVkID0gdHJ1ZSkge1xyXG4gICAgaWYgKGNhbGxiYWNrID09PSBudWxsIHx8IGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gaXMgcmVxdWlyZWRgLFxyXG4gICAgICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSBmdW5jdGlvbmAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhbGxiYWNrO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgaGV4IGNvbG9yIHN0cmluZ1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBDb2xvciBzdHJpbmcgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFZhbGlkYXRlZCBjb2xvciBzdHJpbmdcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBjb2xvciBmb3JtYXQgaXMgaW52YWxpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSGV4Q29sb3IodmFsdWUsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSBzdHJpbmdgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGhleENvbG9yUmVnZXggPSAvXigjfDB4KVswLTlBLUZhLWZdezZ9JC9pO1xyXG4gICAgaWYgKCFoZXhDb2xvclJlZ2V4LnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgaGV4IGNvbG9yIChlLmcuLCAjRkZGRkZGIG9yIDB4RkZGRkZGKWAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgRE9NIGVsZW1lbnRcclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIEVsZW1lbnQgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gVmFsaWRhdGVkIGVsZW1lbnRcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBlbGVtZW50IGlzIG5vdCBhIHZhbGlkIERPTSBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVET01FbGVtZW50KGVsZW1lbnQsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgSFRNTCBlbGVtZW50YCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxufVxyXG4iLCIvKipcclxuICogT2JqZWN0UG9vbCAtIE1lbW9yeS1lZmZpY2llbnQgb2JqZWN0IHBvb2xpbmdcclxuICpcclxuICogUmVkdWNlcyBnYXJiYWdlIGNvbGxlY3Rpb24gcHJlc3N1cmUgYnkgcmV1c2luZyBvYmplY3RzIGluc3RlYWQgb2ZcclxuICogcmVwZWF0ZWRseSBhbGxvY2F0aW5nIGFuZCBkZWFsbG9jYXRpbmcgdGhlbS4gQ3JpdGljYWwgZm9yIHJlYWwtdGltZSByZW5kZXJpbmcuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yMywgTWF0cml4NCwgUXVhdGVybmlvbiwgRXVsZXIgfSBmcm9tICd0aHJlZSc7XHJcblxyXG4vKipcclxuICogR2VuZXJpYyBvYmplY3QgcG9vbFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9iamVjdFBvb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gT2JqZWN0UG9vbFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSAtIEZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBuZXcgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzZXQgLSBGdW5jdGlvbiB0aGF0IHJlc2V0cyBhbiBvYmplY3QgdG8gaW5pdGlhbCBzdGF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtpbml0aWFsU2l6ZT0xMF0gLSBOdW1iZXIgb2Ygb2JqZWN0cyB0byBwcmUtYWxsb2NhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSwgcmVzZXQsIGluaXRpYWxTaXplID0gMTApIHtcclxuICAgICAgICB0aGlzLl9mYWN0b3J5ID0gZmFjdG9yeTtcclxuICAgICAgICB0aGlzLl9yZXNldCA9IHJlc2V0O1xyXG4gICAgICAgIHRoaXMuX3Bvb2wgPSBbXTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuX21heFNpemUgPSBpbml0aWFsU2l6ZSAqIDEwOyAvLyBQcmV2ZW50IHVuYm91bmRlZCBncm93dGhcclxuXHJcbiAgICAgICAgLy8gUHJlLWFsbG9jYXRlIGluaXRpYWwgb2JqZWN0c1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9wb29sLnB1c2goZmFjdG9yeSgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3F1aXJlIGFuIG9iamVjdCBmcm9tIHRoZSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gUG9vbGVkIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhY3F1aXJlKCkge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCsrO1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvb2wucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvb2wgZXhoYXVzdGVkLCBjcmVhdGUgbmV3IG9iamVjdFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWN0b3J5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWxlYXNlIGFuIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sXHJcbiAgICAgKiBAcGFyYW0geyp9IG9iaiAtIE9iamVjdCB0byByZXR1cm4gdG8gcG9vbFxyXG4gICAgICovXHJcbiAgICByZWxlYXNlKG9iaikge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZC0tO1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sLmxlbmd0aCA8IHRoaXMuX21heFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzZXQob2JqKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9vbC5wdXNoKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHBvb2wgaXMgYXQgbWF4IHNpemUsIGxldCBvYmplY3QgYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgbXVsdGlwbGUgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gb2JqZWN0cyAtIE9iamVjdHMgdG8gcmV0dXJuIHRvIHBvb2xcclxuICAgICAqL1xyXG4gICAgcmVsZWFzZUFsbChvYmplY3RzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygb2JqZWN0cykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2Uob2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcG9vbCBzdGF0aXN0aWNzXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBQb29sIHN0YXRzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZTogdGhpcy5fcG9vbC5sZW5ndGgsXHJcbiAgICAgICAgICAgIGFsbG9jYXRlZDogdGhpcy5fYWxsb2NhdGVkLFxyXG4gICAgICAgICAgICBtYXhTaXplOiB0aGlzLl9tYXhTaXplXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoZSBwb29sIGFuZCByZWxlYXNlIGFsbCBvYmplY3RzXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9vbC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmUtY29uZmlndXJlZCBwb29scyBmb3IgY29tbW9uIFRocmVlLmpzIG9iamVjdHNcclxuICovXHJcblxyXG4vKipcclxuICogVmVjdG9yMyBwb29sXHJcbiAqIEB0eXBlIHtPYmplY3RQb29sfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZlY3RvcjNQb29sID0gbmV3IE9iamVjdFBvb2woXHJcbiAgICAoKSA9PiBuZXcgVmVjdG9yMygpLFxyXG4gICAgKHYpID0+IHYuc2V0KDAsIDAsIDApLFxyXG4gICAgNTAgLy8gUHJlLWFsbG9jYXRlIDUwIHZlY3RvcnNcclxuKTtcclxuXHJcbi8qKlxyXG4gKiBNYXRyaXg0IHBvb2xcclxuICogQHR5cGUge09iamVjdFBvb2x9XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0cml4NFBvb2wgPSBuZXcgT2JqZWN0UG9vbChcclxuICAgICgpID0+IG5ldyBNYXRyaXg0KCksXHJcbiAgICAobSkgPT4gbS5pZGVudGl0eSgpLFxyXG4gICAgMjAgLy8gUHJlLWFsbG9jYXRlIDIwIG1hdHJpY2VzXHJcbik7XHJcblxyXG4vKipcclxuICogUXVhdGVybmlvbiBwb29sXHJcbiAqIEB0eXBlIHtPYmplY3RQb29sfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHF1YXRlcm5pb25Qb29sID0gbmV3IE9iamVjdFBvb2woXHJcbiAgICAoKSA9PiBuZXcgUXVhdGVybmlvbigpLFxyXG4gICAgKHEpID0+IHEuc2V0KDAsIDAsIDAsIDEpLFxyXG4gICAgMzAgLy8gUHJlLWFsbG9jYXRlIDMwIHF1YXRlcm5pb25zXHJcbik7XHJcblxyXG4vKipcclxuICogRXVsZXIgcG9vbFxyXG4gKiBAdHlwZSB7T2JqZWN0UG9vbH1cclxuICovXHJcbmV4cG9ydCBjb25zdCBldWxlclBvb2wgPSBuZXcgT2JqZWN0UG9vbChcclxuICAgICgpID0+IG5ldyBFdWxlcigpLFxyXG4gICAgKGUpID0+IGUuc2V0KDAsIDAsIDApLFxyXG4gICAgMzAgLy8gUHJlLWFsbG9jYXRlIDMwIGV1bGVyc1xyXG4pO1xyXG5cclxuLyoqXHJcbiAqIFNjb3BlZCBwb29sIGFsbG9jYXRpb24gaGVscGVyXHJcbiAqXHJcbiAqIEF1dG9tYXRpY2FsbHkgcmVsZWFzZXMgcG9vbGVkIG9iamVjdHMgd2hlbiBzY29wZSBleGl0cy5cclxuICogVXNlIHdpdGggdHJ5L2ZpbmFsbHkgdG8gZW5zdXJlIGNsZWFudXAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGNvbnN0IHNjb3BlID0gbmV3IFBvb2xTY29wZSgpO1xyXG4gKiB0cnkge1xyXG4gKiAgIGNvbnN0IHYxID0gc2NvcGUudmVjdG9yMygpO1xyXG4gKiAgIGNvbnN0IHYyID0gc2NvcGUudmVjdG9yMygpO1xyXG4gKiAgIC8vIFVzZSB2ZWN0b3JzLi4uXHJcbiAqIH0gZmluYWxseSB7XHJcbiAqICAgc2NvcGUucmVsZWFzZUFsbCgpO1xyXG4gKiB9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUG9vbFNjb3BlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNxdWlyZSBhIFZlY3RvcjMgZnJvbSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7VmVjdG9yM30gUG9vbGVkIHZlY3RvclxyXG4gICAgICovXHJcbiAgICB2ZWN0b3IzKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHZlY3RvcjNQb29sLmFjcXVpcmUoKTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQucHVzaCh7IHBvb2w6IHZlY3RvcjNQb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjcXVpcmUgYSBNYXRyaXg0IGZyb20gcG9vbFxyXG4gICAgICogQHJldHVybnMge01hdHJpeDR9IFBvb2xlZCBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgbWF0cml4NCgpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBtYXRyaXg0UG9vbC5hY3F1aXJlKCk7XHJcbiAgICAgICAgdGhpcy5fYWxsb2NhdGVkLnB1c2goeyBwb29sOiBtYXRyaXg0UG9vbCwgb2JqIH0pO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3F1aXJlIGEgUXVhdGVybmlvbiBmcm9tIHBvb2xcclxuICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBQb29sZWQgcXVhdGVybmlvblxyXG4gICAgICovXHJcbiAgICBxdWF0ZXJuaW9uKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHF1YXRlcm5pb25Qb29sLmFjcXVpcmUoKTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQucHVzaCh7IHBvb2w6IHF1YXRlcm5pb25Qb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjcXVpcmUgYW4gRXVsZXIgZnJvbSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7RXVsZXJ9IFBvb2xlZCBldWxlclxyXG4gICAgICovXHJcbiAgICBldWxlcigpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBldWxlclBvb2wuYWNxdWlyZSgpO1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZC5wdXNoKHsgcG9vbDogZXVsZXJQb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgYWxsIG9iamVjdHMgYWxsb2NhdGVkIGluIHRoaXMgc2NvcGVcclxuICAgICAqL1xyXG4gICAgcmVsZWFzZUFsbCgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgcG9vbCwgb2JqIH0gb2YgdGhpcy5fYWxsb2NhdGVkKSB7XHJcbiAgICAgICAgICAgIHBvb2wucmVsZWFzZShvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjb3VudCBvZiBhbGxvY2F0ZWQgb2JqZWN0cyBpbiB0aGlzIHNjb3BlXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBOdW1iZXIgb2YgYWxsb2NhdGVkIG9iamVjdHNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsb2NhdGVkQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsbG9jYXRlZC5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2R1bGUtbGV2ZWwgdGVtcG9yYXJ5IG9iamVjdHMgZm9yIGhvdC1wYXRoIHJldXNlXHJcbiAqIElNUE9SVEFOVDogVGhlc2UgYXJlIE5PVCB0aHJlYWQtc2FmZS4gT25seSB1c2UgaW4gc2luZ2xlLXRocmVhZGVkIGNvbnRleHRzLlxyXG4gKiBSZXNldCB0aGVzZSBiZWZvcmUgdXNlIHRvIGF2b2lkIHN0YWxlIGRhdGEuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdGVtcFZlY3RvcjNBID0gbmV3IFZlY3RvcjMoKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBWZWN0b3IzQiA9IG5ldyBWZWN0b3IzKCk7XHJcbmV4cG9ydCBjb25zdCB0ZW1wVmVjdG9yM0MgPSBuZXcgVmVjdG9yMygpO1xyXG5leHBvcnQgY29uc3QgdGVtcE1hdHJpeDRBID0gbmV3IE1hdHJpeDQoKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBNYXRyaXg0QiA9IG5ldyBNYXRyaXg0KCk7XHJcbmV4cG9ydCBjb25zdCB0ZW1wUXVhdGVybmlvbkEgPSBuZXcgUXVhdGVybmlvbigpO1xyXG5leHBvcnQgY29uc3QgdGVtcFF1YXRlcm5pb25CID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcG9vbCBzdGF0aXN0aWNzIGZvciBhbGwgcHJlLWNvbmZpZ3VyZWQgcG9vbHNcclxuICogQHJldHVybnMge29iamVjdH0gU3RhdGlzdGljcyBmb3IgYWxsIHBvb2xzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbFN0YXRzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2ZWN0b3IzOiB2ZWN0b3IzUG9vbC5nZXRTdGF0cygpLFxyXG4gICAgICAgIG1hdHJpeDQ6IG1hdHJpeDRQb29sLmdldFN0YXRzKCksXHJcbiAgICAgICAgcXVhdGVybmlvbjogcXVhdGVybmlvblBvb2wuZ2V0U3RhdHMoKSxcclxuICAgICAgICBldWxlcjogZXVsZXJQb29sLmdldFN0YXRzKClcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEaXNwb3NlIGFsbCBwcmUtY29uZmlndXJlZCBwb29sc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VBbGxQb29scygpIHtcclxuICAgIHZlY3RvcjNQb29sLmRpc3Bvc2UoKTtcclxuICAgIG1hdHJpeDRQb29sLmRpc3Bvc2UoKTtcclxuICAgIHF1YXRlcm5pb25Qb29sLmRpc3Bvc2UoKTtcclxuICAgIGV1bGVyUG9vbC5kaXNwb3NlKCk7XHJcbn1cclxuIiwiLyoqXHJcbiAqIEJsb2JVcmxNYW5hZ2VyIC0gU2VjdXJlIGJsb2IgVVJMIGxpZmVjeWNsZSBtYW5hZ2VtZW50XHJcbiAqXHJcbiAqIFRyYWNrcyBibG9iIFVSTHMgYW5kIGVuc3VyZXMgdGhleSBhcmUgcmV2b2tlZCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xyXG4gKiBhbmQgdW5hdXRob3JpemVkIGFjY2Vzcy4gQ3JpdGljYWwgZm9yIHNlY3VyaXR5IGFuZCByZXNvdXJjZSBtYW5hZ2VtZW50LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignQmxvYlVybE1hbmFnZXInKTtcclxuXHJcbi8qKlxyXG4gKiBCbG9iVXJsTWFuYWdlciAtIE1hbmFnZXMgYmxvYiBVUkwgbGlmZWN5Y2xlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmxvYlVybE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwIG9mIGJsb2IgVVJMIHRvIG1ldGFkYXRhXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91cmxzID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIG1hbmFnZXIgaGFzIGJlZW4gZGlzcG9zZWRcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnQgbWFuYWdlciBpcyBub3QgZGlzcG9zZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgbWFuYWdlciBpcyBkaXNwb3NlZFxyXG4gICAgICovXHJcbiAgICBfYXNzZXJ0Tm90RGlzcG9zZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmxvYlVybE1hbmFnZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBibG9iIFVSTCBmcm9tIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Jsb2J8QXJyYXlCdWZmZXJ8VWludDhBcnJheX0gZGF0YSAtIERhdGEgdG8gY3JlYXRlIGJsb2IgZnJvbVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1pbWVUeXBlIC0gTUlNRSB0eXBlIChlLmcuLCAnbW9kZWwvZ2x0Zi1iaW5hcnknKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYWJlbF0gLSBPcHRpb25hbCBsYWJlbCBmb3IgZGVidWdnaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBCbG9iIFVSTFxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBkYXRhIG9yIG1pbWVUeXBlIGlzIGludmFsaWRcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQmxvYlVybChkYXRhLCBtaW1lVHlwZSwgbGFiZWwgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIG1pbWVUeXBlXHJcbiAgICAgICAgaWYgKHR5cGVvZiBtaW1lVHlwZSAhPT0gJ3N0cmluZycgfHwgbWltZVR5cGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnbWltZVR5cGUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ21pbWVUeXBlJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBkYXRhIHRvIEJsb2IgaWYgbmVlZGVkXHJcbiAgICAgICAgbGV0IGJsb2I7XHJcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIGJsb2IgPSBkYXRhO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsgdHlwZTogbWltZVR5cGUgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICdkYXRhIG11c3QgYmUgQmxvYiwgQXJyYXlCdWZmZXIsIG9yIFVpbnQ4QXJyYXknLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYmxvYiBVUkxcclxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cclxuICAgICAgICAvLyBUcmFjayBtZXRhZGF0YVxyXG4gICAgICAgIHRoaXMuX3VybHMuc2V0KHVybCwge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIG1pbWVUeXBlLFxyXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgfHwgJ3VubGFiZWxlZCcsXHJcbiAgICAgICAgICAgIHNpemU6IGJsb2Iuc2l6ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0ZWQgYmxvYiBVUkw6ICR7bGFiZWwgfHwgdXJsLnN1YnN0cmluZygwLCA1MCl9LCBzaXplOiAke2Jsb2Iuc2l6ZX0gYnl0ZXNgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIGFuIGV4dGVybmFsbHkgY3JlYXRlZCBibG9iIFVSTCBmb3IgdHJhY2tpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gQmxvYiBVUkwgdG8gdHJhY2tcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFiZWxdIC0gT3B0aW9uYWwgbGFiZWwgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBVUkwgaXMgbm90IGEgYmxvYiBVUkxcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJCbG9iVXJsKHVybCwgbGFiZWwgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJyB8fCAhdXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICd1cmwgbXVzdCBiZSBhIHZhbGlkIGJsb2IgVVJMJyxcclxuICAgICAgICAgICAgICAgICd1cmwnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3VybHMuaGFzKHVybCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXJscy5zZXQodXJsLCB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsIHx8ICdyZWdpc3RlcmVkLWV4dGVybmFsJyxcclxuICAgICAgICAgICAgICAgIHNpemU6IDBcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJlZ2lzdGVyZWQgZXh0ZXJuYWwgYmxvYiBVUkw6ICR7bGFiZWwgfHwgdXJsLnN1YnN0cmluZygwLCA1MCl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV2b2tlIGEgYmxvYiBVUkwgYW5kIHJlbW92ZSBmcm9tIHRyYWNraW5nXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMIHRvIHJldm9rZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHdhcyB0cmFja2VkIGFuZCByZXZva2VkXHJcbiAgICAgKi9cclxuICAgIHJldm9rZUJsb2JVcmwodXJsKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3VybHMuaGFzKHVybCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLl91cmxzLmdldCh1cmwpO1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VybHMuZGVsZXRlKHVybCk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJldm9rZWQgYmxvYiBVUkw6ICR7bWV0YWRhdGEubGFiZWx9LCBhZ2U6ICR7RGF0ZS5ub3coKSAtIG1ldGFkYXRhLmNyZWF0ZWRBdH1tc2ApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldm9rZSBhbGwgYmxvYiBVUkxzIGFuZCBjbGVhciB0cmFja2luZ1xyXG4gICAgICovXHJcbiAgICByZXZva2VBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXZva2luZyAke3RoaXMuX3VybHMuc2l6ZX0gYmxvYiBVUkxzYCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgdXJsIG9mIHRoaXMuX3VybHMua2V5cygpKSB7XHJcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3VybHMuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0cmFja2VkIGJsb2IgVVJMIG1ldGFkYXRhXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fG51bGx9IE1ldGFkYXRhIG9yIG51bGwgaWYgbm90IHRyYWNrZWRcclxuICAgICAqL1xyXG4gICAgZ2V0TWV0YWRhdGEodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VybHMuZ2V0KHVybCkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgdHJhY2tlZCBibG9iIFVSTHNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8e3VybDogc3RyaW5nLCBtZXRhZGF0YTogb2JqZWN0fT59IEFycmF5IG9mIFVSTCBpbmZvXHJcbiAgICAgKi9cclxuICAgIGdldEFsbFRyYWNrZWRVcmxzKCkge1xyXG4gICAgICAgIGNvbnN0IHVybHMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IFt1cmwsIG1ldGFkYXRhXSBvZiB0aGlzLl91cmxzLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICB1cmxzLnB1c2goeyB1cmwsIG1ldGFkYXRhIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJscztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBzdGF0aXN0aWNzIGFib3V0IHRyYWNrZWQgVVJMc1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU2l6ZSA9IDA7XHJcbiAgICAgICAgbGV0IG9sZGVzdEFnZSA9IDA7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXRhZGF0YSBvZiB0aGlzLl91cmxzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICAgIHRvdGFsU2l6ZSArPSBtZXRhZGF0YS5zaXplO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgICAgIGlmIChhZ2UgPiBvbGRlc3RBZ2UpIHtcclxuICAgICAgICAgICAgICAgIG9sZGVzdEFnZSA9IGFnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY291bnQ6IHRoaXMuX3VybHMuc2l6ZSxcclxuICAgICAgICAgICAgdG90YWxTaXplLFxyXG4gICAgICAgICAgICBvbGRlc3RBZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV2b2tlIGJsb2IgVVJMcyBvbGRlciB0aGFuIHNwZWNpZmllZCBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4QWdlTXMgLSBNYXhpbXVtIGFnZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IE51bWJlciBvZiBVUkxzIHJldm9rZWRcclxuICAgICAqL1xyXG4gICAgcmV2b2tlT2xkZXJUaGFuKG1heEFnZU1zKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCB0b1Jldm9rZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFt1cmwsIG1ldGFkYXRhXSBvZiB0aGlzLl91cmxzLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgICAgIGlmIChhZ2UgPiBtYXhBZ2VNcykge1xyXG4gICAgICAgICAgICAgICAgdG9SZXZva2UucHVzaCh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiB0b1Jldm9rZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJldm9rZUJsb2JVcmwodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0b1Jldm9rZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBSZXZva2VkICR7dG9SZXZva2UubGVuZ3RofSBibG9iIFVSTHMgb2xkZXIgdGhhbiAke21heEFnZU1zfW1zYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG9SZXZva2UubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBVUkwgaXMgYmVpbmcgdHJhY2tlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gY2hlY2tcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBpcyB0cmFja2VkXHJcbiAgICAgKi9cclxuICAgIGlzVHJhY2tlZCh1cmwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXJscy5oYXModXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgbWFuYWdlciBhbmQgcmV2b2tlIGFsbCBVUkxzXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzcG9zaW5nIEJsb2JVcmxNYW5hZ2VyJyk7XHJcbiAgICAgICAgdGhpcy5yZXZva2VBbGwoKTtcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgYmxvYiBVUkwgbWFuYWdlciBpbnN0YW5jZVxyXG4gKiBAdHlwZSB7QmxvYlVybE1hbmFnZXJ9XHJcbiAqL1xyXG5jb25zdCBnbG9iYWxCbG9iVXJsTWFuYWdlciA9IG5ldyBCbG9iVXJsTWFuYWdlcigpO1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZ2xvYmFsIGJsb2IgVVJMIG1hbmFnZXJcclxuICogQHJldHVybnMge0Jsb2JVcmxNYW5hZ2VyfSBHbG9iYWwgbWFuYWdlciBpbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbEJsb2JVcmxNYW5hZ2VyKCkge1xyXG4gICAgcmV0dXJuIGdsb2JhbEJsb2JVcmxNYW5hZ2VyO1xyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJsb2IgVVJMIHdpdGggYXV0b21hdGljIHRyYWNraW5nXHJcbiAqXHJcbiAqIEBwYXJhbSB7QmxvYnxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fSBkYXRhIC0gRGF0YSB0byBjcmVhdGUgYmxvYiBmcm9tXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtaW1lVHlwZSAtIE1JTUUgdHlwZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXSAtIE9wdGlvbmFsIGxhYmVsIGZvciBkZWJ1Z2dpbmdcclxuICogQHJldHVybnMge3N0cmluZ30gQmxvYiBVUkxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFja2VkQmxvYlVybChkYXRhLCBtaW1lVHlwZSwgbGFiZWwpIHtcclxuICAgIHJldHVybiBnbG9iYWxCbG9iVXJsTWFuYWdlci5jcmVhdGVCbG9iVXJsKGRhdGEsIG1pbWVUeXBlLCBsYWJlbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gcmV2b2tlIGEgYmxvYiBVUkxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMIHRvIHJldm9rZVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgd2FzIHRyYWNrZWQgYW5kIHJldm9rZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXZva2VUcmFja2VkQmxvYlVybCh1cmwpIHtcclxuICAgIHJldHVybiBnbG9iYWxCbG9iVXJsTWFuYWdlci5yZXZva2VCbG9iVXJsKHVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJsb2JVcmxNYW5hZ2VyO1xyXG4iLCIvKipcclxuICogUmVuZGVyTG9vcCAtIEZyYW1lLWluZGVwZW5kZW50IGFuaW1hdGlvbiBsb29wIHdpdGggYnVkZ2V0IG1hbmFnZW1lbnRcclxuICpcclxuICogUHJvdmlkZXMgYSByb2J1c3QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGxvb3Agd2l0aDpcclxuICogLSBEZWx0YSB0aW1lIGNhbGN1bGF0aW9uIGZvciBmcmFtZS1pbmRlcGVuZGVudCB1cGRhdGVzXHJcbiAqIC0gRnJhbWUgYnVkZ2V0IG1hbmFnZW1lbnQgdG8gcHJldmVudCBmcmFtZSBkcm9wc1xyXG4gKiAtIERlZmVycmVkIHRhc2sgZXhlY3V0aW9uXHJcbiAqIC0gUGVyZm9ybWFuY2UgbW9uaXRvcmluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignUmVuZGVyTG9vcCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlbmRlckxvb3AgLSBNYW5hZ2VzIGFuaW1hdGlvbiBmcmFtZSBsb29wXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVuZGVyTG9vcCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJlbmRlckxvb3BcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUZuIC0gVXBkYXRlIGZ1bmN0aW9uIGNhbGxlZCBlYWNoIGZyYW1lIHdpdGggZGVsdGFUaW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJGbiAtIFJlbmRlciBmdW5jdGlvbiBjYWxsZWQgZWFjaCBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnRhcmdldEZwcz02MF0gLSBUYXJnZXQgZnJhbWVzIHBlciBzZWNvbmRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhEZWx0YVRpbWU9MC4xXSAtIE1heGltdW0gZGVsdGEgdGltZSBpbiBzZWNvbmRzIChwcmV2ZW50cyBzcGlyYWwgb2YgZGVhdGgpXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZUZuLCByZW5kZXJGbiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlID0gdXBkYXRlRm47XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyID0gcmVuZGVyRm47XHJcblxyXG4gICAgICAgIHRoaXMuX3RhcmdldEZwcyA9IG9wdGlvbnMudGFyZ2V0RnBzIHx8IDYwO1xyXG4gICAgICAgIHRoaXMuX21heERlbHRhVGltZSA9IG9wdGlvbnMubWF4RGVsdGFUaW1lIHx8IDAuMTsgLy8gMTAwbXMgbWF4XHJcbiAgICAgICAgdGhpcy5fZnJhbWVCdWRnZXQgPSAxMDAwIC8gdGhpcy5fdGFyZ2V0RnBzOyAvLyBtcyBwZXIgZnJhbWVcclxuXHJcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JhZklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVmZXJyZWRUYXNrcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBQZXJmb3JtYW5jZSB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuX2Zwc0hpc3RvcnkgPSBbXTtcclxuICAgICAgICB0aGlzLl9mcHNIaXN0b3J5U2l6ZSA9IDYwOyAvLyBUcmFjayBsYXN0IDYwIGZyYW1lc1xyXG4gICAgICAgIHRoaXMuX2xhc3RGcHNVcGRhdGUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRGcHMgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgdGhlIHJlbmRlciBsb29wXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZW5kZXJMb29wIGFscmVhZHkgcnVubmluZycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ291bnQgPSAwO1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdSZW5kZXJMb29wIHN0YXJ0ZWQnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcCB0aGUgcmVuZGVyIGxvb3BcclxuICAgICAqL1xyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcmFmSWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmFmSWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9yYWZJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbyhgUmVuZGVyTG9vcCBzdG9wcGVkIGFmdGVyICR7dGhpcy5fZnJhbWVDb3VudH0gZnJhbWVzYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWluIGxvb3AgdGlja1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3RpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZyYW1lU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBjb25zdCByYXdEZWx0YVRpbWUgPSAoZnJhbWVTdGFydCAtIHRoaXMuX2xhc3RUaW1lKSAvIDEwMDA7IC8vIENvbnZlcnQgdG8gc2Vjb25kc1xyXG5cclxuICAgICAgICAvLyBDbGFtcCBkZWx0YSB0aW1lIHRvIHByZXZlbnQgc3BpcmFsIG9mIGRlYXRoXHJcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gTWF0aC5taW4ocmF3RGVsdGFUaW1lLCB0aGlzLl9tYXhEZWx0YVRpbWUpO1xyXG5cclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IGZyYW1lU3RhcnQ7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVDb3VudCsrO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgbG9naWNcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlKGRlbHRhVGltZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW5kZXJcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGRlZmVycmVkIHRhc2tzIGlmIHRpbWUgcGVybWl0c1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZUVsYXBzZWQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGZyYW1lU3RhcnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSB0aGlzLl9mcmFtZUJ1ZGdldCAtIGZyYW1lRWxhcHNlZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lID4gMSAmJiB0aGlzLl9kZWZlcnJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NEZWZlcnJlZFRhc2tzKHJlbWFpbmluZ1RpbWUgLSAxKTsgLy8gTGVhdmUgMW1zIG1hcmdpblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgRlBTIHRyYWNraW5nXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUZwc1RyYWNraW5nKHBlcmZvcm1hbmNlLm5vdygpIC0gZnJhbWVTdGFydCk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gcmVuZGVyIGxvb3A6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBDb250aW51ZSBsb29wIGRlc3BpdGUgZXJyb3JcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNjaGVkdWxlIG5leHQgZnJhbWVcclxuICAgICAgICB0aGlzLl9yYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl90aWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgRlBTIHRyYWNraW5nXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lVGltZSAtIFRpbWUgdGFrZW4gZm9yIHRoaXMgZnJhbWUgaW4gbXNcclxuICAgICAqL1xyXG4gICAgX3VwZGF0ZUZwc1RyYWNraW5nKGZyYW1lVGltZSkge1xyXG4gICAgICAgIHRoaXMuX2Zwc0hpc3RvcnkucHVzaCgxMDAwIC8gZnJhbWVUaW1lKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2Zwc0hpc3RvcnkubGVuZ3RoID4gdGhpcy5fZnBzSGlzdG9yeVNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZnBzSGlzdG9yeS5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIEZQUyBldmVyeSBzZWNvbmRcclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBpZiAobm93IC0gdGhpcy5fbGFzdEZwc1VwZGF0ZSA+IDEwMDApIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudEZwcyA9IHRoaXMuX2Zwc0hpc3RvcnkucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyB0aGlzLl9mcHNIaXN0b3J5Lmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEZwc1VwZGF0ZSA9IG5vdztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIGRlZmVycmVkIHRhc2tzIHdpdGhpbiB0aW1lIGJ1ZGdldFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUaW1lIC0gTWF4aW11bSB0aW1lIGluIG1zIHRvIHNwZW5kIG9uIHRhc2tzXHJcbiAgICAgKi9cclxuICAgIF9wcm9jZXNzRGVmZXJyZWRUYXNrcyhtYXhUaW1lKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIHdoaWxlICh0aGlzLl9kZWZlcnJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lID49IG1heFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXNrID0gdGhpcy5fZGVmZXJyZWRUYXNrcy5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRhc2suZm4oKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgaW4gZGVmZXJyZWQgdGFzazogJHt0YXNrLmxhYmVsfWAsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGUgdGFzayBpZiB3aXRoaW4gZnJhbWUgYnVkZ2V0LCBvdGhlcndpc2UgZGVmZXJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXNrIC0gVGFzayBmdW5jdGlvbiB0byBleGVjdXRlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTBdIC0gVGFzayBwcmlvcml0eSAoaGlnaGVyID0gbW9yZSBpbXBvcnRhbnQpXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsPScnXSAtIFRhc2sgbGFiZWwgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICovXHJcbiAgICBleGVjdXRlT3JEZWZlcih0YXNrLCBwcmlvcml0eSA9IDAsIGxhYmVsID0gJycpIHtcclxuICAgICAgICBjb25zdCBmcmFtZUVsYXBzZWQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuX2xhc3RUaW1lO1xyXG5cclxuICAgICAgICBpZiAoZnJhbWVFbGFwc2VkIDwgdGhpcy5fZnJhbWVCdWRnZXQgKiAwLjgpIHtcclxuICAgICAgICAgICAgLy8gV2l0aGluIGJ1ZGdldCwgZXhlY3V0ZSBub3dcclxuICAgICAgICAgICAgdGFzaygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE92ZXIgYnVkZ2V0LCBkZWZlclxyXG4gICAgICAgICAgICB0aGlzLl9kZWZlcnJlZFRhc2tzLnB1c2goeyBmbjogdGFzaywgcHJpb3JpdHksIGxhYmVsIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU29ydCBieSBwcmlvcml0eSAoaGlnaGVyIGZpcnN0KVxyXG4gICAgICAgICAgICB0aGlzLl9kZWZlcnJlZFRhc2tzLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBGUFNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEF2ZXJhZ2UgRlBTIG92ZXIgcmVjZW50IGZyYW1lc1xyXG4gICAgICovXHJcbiAgICBnZXRGcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5fY3VycmVudEZwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcGVyZm9ybWFuY2Ugc3RhdHNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFBlcmZvcm1hbmNlIHN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZnBzOiB0aGlzLmdldEZwcygpLFxyXG4gICAgICAgICAgICBmcmFtZUNvdW50OiB0aGlzLl9mcmFtZUNvdW50LFxyXG4gICAgICAgICAgICBkZWZlcnJlZFRhc2tDb3VudDogdGhpcy5fZGVmZXJyZWRUYXNrcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHJ1bm5pbmc6IHRoaXMuX3J1bm5pbmdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgbG9vcCBpcyBydW5uaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBydW5uaW5nXHJcbiAgICAgKi9cclxuICAgIGlzUnVubmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcnVubmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBmcmFtZSBjb3VudFxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgZnJhbWVzIHJlbmRlcmVkXHJcbiAgICAgKi9cclxuICAgIGdldEZyYW1lQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciBhbGwgZGVmZXJyZWQgdGFza3NcclxuICAgICAqL1xyXG4gICAgY2xlYXJEZWZlcnJlZFRhc2tzKCkge1xyXG4gICAgICAgIHRoaXMuX2RlZmVycmVkVGFza3MubGVuZ3RoID0gMDtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0NsZWFyZWQgYWxsIGRlZmVycmVkIHRhc2tzJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGcmFtZUJ1ZGdldE1vbml0b3IgLSBNb25pdG9ycyBhbmQgYWxlcnRzIG9uIGZyYW1lIGJ1ZGdldCB2aW9sYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRnJhbWVCdWRnZXRNb25pdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgRnJhbWVCdWRnZXRNb25pdG9yXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RhcmdldEZwcz02MF0gLSBUYXJnZXQgRlBTXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25WaW9sYXRpb25dIC0gQ2FsbGJhY2sgd2hlbiBidWRnZXQgaXMgdmlvbGF0ZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0RnBzID0gNjAsIG9uVmlvbGF0aW9uID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuX3RhcmdldEZwcyA9IHRhcmdldEZwcztcclxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZGdldCA9IDEwMDAgLyB0YXJnZXRGcHM7XHJcbiAgICAgICAgdGhpcy5fb25WaW9sYXRpb24gPSBvblZpb2xhdGlvbjtcclxuICAgICAgICB0aGlzLl92aW9sYXRpb25zID0gMDtcclxuICAgICAgICB0aGlzLl9mcmFtZVN0YXJ0ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hcmsgc3RhcnQgb2YgZnJhbWVcclxuICAgICAqL1xyXG4gICAgc3RhcnRGcmFtZSgpIHtcclxuICAgICAgICB0aGlzLl9mcmFtZVN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBmcmFtZSBpcyB3aXRoaW4gYnVkZ2V0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xvY2F0aW9uXSAtIExvY2F0aW9uIGlkZW50aWZpZXIgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgd2l0aGluIGJ1ZGdldFxyXG4gICAgICovXHJcbiAgICBjaGVja0J1ZGdldChsb2NhdGlvbiA9ICcnKSB7XHJcbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5fZnJhbWVTdGFydDtcclxuICAgICAgICBjb25zdCB3aXRoaW5CdWRnZXQgPSBlbGFwc2VkIDwgdGhpcy5fZnJhbWVCdWRnZXQ7XHJcblxyXG4gICAgICAgIGlmICghd2l0aGluQnVkZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpb2xhdGlvbnMrKztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vblZpb2xhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25WaW9sYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVkZ2V0OiB0aGlzLl9mcmFtZUJ1ZGdldCxcclxuICAgICAgICAgICAgICAgICAgICBvdmVycnVuOiBlbGFwc2VkIC0gdGhpcy5fZnJhbWVCdWRnZXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgRnJhbWUgYnVkZ2V0IHZpb2xhdGlvbiBhdCAke2xvY2F0aW9ufTogJHtlbGFwc2VkLnRvRml4ZWQoMil9bXMgLyAke3RoaXMuX2ZyYW1lQnVkZ2V0LnRvRml4ZWQoMil9bXNgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB3aXRoaW5CdWRnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdmlvbGF0aW9uIGNvdW50XHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCB2aW9sYXRpb25zXHJcbiAgICAgKi9cclxuICAgIGdldFZpb2xhdGlvbkNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92aW9sYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdmlvbGF0aW9uIGNvdW50XHJcbiAgICAgKi9cclxuICAgIHJlc2V0VmlvbGF0aW9ucygpIHtcclxuICAgICAgICB0aGlzLl92aW9sYXRpb25zID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyTG9vcDtcclxuIiwiLyoqXHJcbiAqIEV2ZW50RW1pdHRlciAtIE9ic2VydmVyIHBhdHRlcm4gaW1wbGVtZW50YXRpb24gZm9yIGV2ZW50LWRyaXZlbiBjb21tdW5pY2F0aW9uXHJcbiAqXHJcbiAqIFByb3ZpZGVzIGRlY291cGxlZCBldmVudCBoYW5kbGluZyB3aXRoIGF1dG9tYXRpYyBjbGVhbnVwIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLlxyXG4gKiBDcml0aWNhbCBmb3IgbWFuYWdpbmcgc3RhdGUgY2hhbmdlcyBhbmQgY29tcG9uZW50IGNvbW11bmljYXRpb24uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi9Mb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdFdmVudEVtaXR0ZXInKTtcclxuXHJcbi8qKlxyXG4gKiBFdmVudEVtaXR0ZXIgLSBQdWIvc3ViIGV2ZW50IHN5c3RlbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXAgb2YgZXZlbnQgbmFtZSB0byBTZXQgb2YgbGlzdGVuZXJzXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgZW1pdHRlciBoYXMgYmVlbiBkaXNwb3NlZFxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgZW1pc3Npb24gaGlzdG9yeSBmb3IgZGVidWdnaW5nIChsYXN0IE4gZXZlbnRzKVxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZXZlbnRIaXN0b3J5ID0gW107XHJcbiAgICAgICAgdGhpcy5fbWF4SGlzdG9yeVNpemUgPSA1MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzc2VydCBlbWl0dGVyIGlzIG5vdCBkaXNwb3NlZFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiBlbWl0dGVyIGlzIGRpc3Bvc2VkXHJcbiAgICAgKi9cclxuICAgIF9hc3NlcnROb3REaXNwb3NlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudEVtaXR0ZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEV2ZW50IGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBTdWJzY3JpcHRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vbmNlPWZhbHNlXSAtIEF1dG8tdW5zdWJzY3JpYmUgYWZ0ZXIgZmlyc3QgY2FsbFxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ3N0cmluZycgfHwgZXZlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnZXZlbnQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ2V2ZW50J1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicsXHJcbiAgICAgICAgICAgICAgICAnY2FsbGJhY2snXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXcmFwIGNhbGxiYWNrIGlmIG9uY2Ugb3B0aW9uIGlzIHNldFxyXG4gICAgICAgIGNvbnN0IHdyYXBwZWRDYWxsYmFjayA9IG9wdGlvbnMub25jZVxyXG4gICAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogY2FsbGJhY2s7XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIGNhbGxiYWNrIHJlZmVyZW5jZSBmb3IgcmVtb3ZhbFxyXG4gICAgICAgIGlmIChvcHRpb25zLm9uY2UpIHtcclxuICAgICAgICAgICAgd3JhcHBlZENhbGxiYWNrLl9vcmlnaW5hbENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgbGlzdGVuZXJcclxuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycy5oYXMoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zZXQoZXZlbnQsIG5ldyBTZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5nZXQoZXZlbnQpLmFkZCh3cmFwcGVkQ2FsbGJhY2spO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoYFN1YnNjcmliZWQgdG8gZXZlbnQ6ICR7ZXZlbnR9YCk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB1bnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB0aGlzLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSB0byBhbiBldmVudCAoZmlyZXMgb25jZSB0aGVuIGF1dG8tdW5zdWJzY3JpYmVzKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRXZlbnQgaGFuZGxlclxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBvbmNlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50LCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgZnJvbSBhbiBldmVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRXZlbnQgaGFuZGxlciB0byByZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGNhbGxiYWNrIHdhcyBmb3VuZCBhbmQgcmVtb3ZlZFxyXG4gICAgICovXHJcbiAgICBvZmYoZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVHJ5IHRvIHJlbW92ZSBkaXJlY3RseVxyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVuc3Vic2NyaWJlZCBmcm9tIGV2ZW50OiAke2V2ZW50fWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGJ5IG9yaWdpbmFsIGNhbGxiYWNrIChmb3Igb25jZSBsaXN0ZW5lcnMpXHJcbiAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLl9vcmlnaW5hbENhbGxiYWNrID09PSBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVuc3Vic2NyaWJlZCBmcm9tIGV2ZW50OiAke2V2ZW50fSAob25jZSBsaXN0ZW5lcilgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgYW4gZXZlbnQgKG9yIGFsbCBldmVudHMgaWYgbm8gZXZlbnQgc3BlY2lmaWVkKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXZlbnRdIC0gRXZlbnQgbmFtZSAob3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KGV2ZW50KT8uc2l6ZSB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMuZGVsZXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZW1vdmVkICR7Y291bnR9IGxpc3RlbmVycyBmb3IgZXZlbnQ6ICR7ZXZlbnR9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IEFycmF5LmZyb20odGhpcy5fbGlzdGVuZXJzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBzZXQpID0+IHN1bSArIHNldC5zaXplLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVtb3ZlZCBhbGwgJHt0b3RhbENvdW50fSBsaXN0ZW5lcnNgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbWl0IGFuIGV2ZW50IHRvIGFsbCBzdWJzY3JpYmVyc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBwYXNzIHRvIGxpc3RlbmVyc1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgZXZlbnQgaGFkIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMgfHwgbGlzdGVuZXJzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVjb3JkIGluIGhpc3RvcnkgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgIHRoaXMuX3JlY29yZEV2ZW50KGV2ZW50LCBhcmdzKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsbCBhbGwgbGlzdGVuZXJzXHJcbiAgICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbENvdW50Kys7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGluIGV2ZW50IGxpc3RlbmVyIGZvciAnJHtldmVudH0nOmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIGNhbGxpbmcgb3RoZXIgbGlzdGVuZXJzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRW1pdHRlZCBldmVudDogJHtldmVudH0gdG8gJHtjYWxsQ291bnR9IGxpc3RlbmVyc2ApO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY29yZCBldmVudCBpbiBoaXN0b3J5IGZvciBkZWJ1Z2dpbmdcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIC0gRXZlbnQgYXJndW1lbnRzXHJcbiAgICAgKi9cclxuICAgIF9yZWNvcmRFdmVudChldmVudCwgYXJncykge1xyXG4gICAgICAgIHRoaXMuX2V2ZW50SGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgYXJnQ291bnQ6IGFyZ3MubGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEtlZXAgaGlzdG9yeSBib3VuZGVkXHJcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50SGlzdG9yeS5sZW5ndGggPiB0aGlzLl9tYXhIaXN0b3J5U2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEhpc3Rvcnkuc2hpZnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZXZlbnQgZW1pc3Npb24gaGlzdG9yeVxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBldmVudCByZWNvcmRzXHJcbiAgICAgKi9cclxuICAgIGdldEV2ZW50SGlzdG9yeSgpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuX2V2ZW50SGlzdG9yeV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBldmVudCBoYXMgbGlzdGVuZXJzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgZXZlbnQgaGFzIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBoYXNMaXN0ZW5lcnMoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KGV2ZW50KTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzID8gbGlzdGVuZXJzLnNpemUgPiAwIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbGlzdGVuZXIgY291bnQgZm9yIGFuIGV2ZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gTnVtYmVyIG9mIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVycyA/IGxpc3RlbmVycy5zaXplIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgZXZlbnQgbmFtZXMgd2l0aCBsaXN0ZW5lcnNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEFycmF5IG9mIGV2ZW50IG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGV2ZW50TmFtZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fbGlzdGVuZXJzLmtleXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc3RhdGlzdGljcyBhYm91dCBsaXN0ZW5lcnNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBTdGF0aXN0aWNzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xyXG4gICAgICAgICAgICB0b3RhbEV2ZW50czogdGhpcy5fbGlzdGVuZXJzLnNpemUsXHJcbiAgICAgICAgICAgIHRvdGFsTGlzdGVuZXJzOiAwLFxyXG4gICAgICAgICAgICBldmVudEJyZWFrZG93bjoge31cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFtldmVudCwgbGlzdGVuZXJzXSBvZiB0aGlzLl9saXN0ZW5lcnMuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbGlzdGVuZXJzLnNpemU7XHJcbiAgICAgICAgICAgIHN0YXRzLnRvdGFsTGlzdGVuZXJzICs9IGNvdW50O1xyXG4gICAgICAgICAgICBzdGF0cy5ldmVudEJyZWFrZG93bltldmVudF0gPSBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgZW1pdHRlciBhbmQgcmVtb3ZlIGFsbCBsaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNwb3NpbmcgRXZlbnRFbWl0dGVyJyk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9ldmVudEhpc3RvcnkubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUeXBlZEV2ZW50RW1pdHRlciAtIFR5cGUtc2FmZSBldmVudCBlbWl0dGVyIHdpdGggZXZlbnQgcmVnaXN0cnlcclxuICpcclxuICogRW5zdXJlcyBldmVudHMgYXJlIHByZS1yZWdpc3RlcmVkLCBwcmV2ZW50aW5nIHR5cG9zIGFuZCBwcm92aWRpbmdcclxuICogYmV0dGVyIGRldmVsb3BlciBleHBlcmllbmNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFR5cGVkRXZlbnRFbWl0dGVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgVHlwZWRFdmVudEVtaXR0ZXJcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFdmVudHMgLSBBcnJheSBvZiBhbGxvd2VkIGV2ZW50IG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFsbG93ZWRFdmVudHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgb2YgYWxsb3dlZCBldmVudCBuYW1lc1xyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fYWxsb3dlZEV2ZW50cyA9IG5ldyBTZXQoYWxsb3dlZEV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBldmVudCBuYW1lIGlzIGFsbG93ZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIGV2ZW50IGlzIG5vdCBhbGxvd2VkXHJcbiAgICAgKi9cclxuICAgIF92YWxpZGF0ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9hbGxvd2VkRXZlbnRzLmhhcyhldmVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBFdmVudCAnJHtldmVudH0nIGlzIG5vdCByZWdpc3RlcmVkLiBBbGxvd2VkIGV2ZW50czogJHtBcnJheS5mcm9tKHRoaXMuX2FsbG93ZWRFdmVudHMpLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgICAgICdldmVudCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnQgKG92ZXJyaWRlIHRvIGFkZCB2YWxpZGF0aW9uKVxyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5vbihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW1pdCBhbiBldmVudCAob3ZlcnJpZGUgdG8gYWRkIHZhbGlkYXRpb24pXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgZW1pdChldmVudCwgLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRXZlbnRFbWl0dGVyO1xyXG4iLCIvKipcclxuICogQXBwQ29uc3RhbnRzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBBbmltYXRpb24gc3RhdGUgY29uc3RhbnRzIGFuZCBBUktpdCBibGVuZHNoYXBlIG1hcHBpbmdzLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBWb2ljZSBjaGF0IHN0YXRlIGVudW1lcmF0aW9uXHJcbiAqIENvbnRyb2xzIHRoZSByZW5kZXJpbmcgYW5kIGJlaGF2aW9yIG1vZGVzIG9mIHRoZSBhdmF0YXJcclxuICovXHJcbmV4cG9ydCBjb25zdCBUWVZvaWNlQ2hhdFN0YXRlID0ge1xyXG4gICAgSWRsZTogJ0lkbGUnLCAgICAgICAgICAgLy8gSWRsZS93YWl0aW5nIHN0YXRlXHJcbiAgICBMaXN0ZW5pbmc6ICdMaXN0ZW5pbmcnLCAvLyBMaXN0ZW5pbmcgdG8gdXNlciBpbnB1dFxyXG4gICAgUmVzcG9uZGluZzogJ1Jlc3BvbmRpbmcnLCAvLyBTcGVha2luZy9yZXNwb25kaW5nIGFuaW1hdGlvblxyXG4gICAgVGhpbmtpbmc6ICdUaGlua2luZycgICAgLy8gUHJvY2Vzc2luZy90aGlua2luZyBhbmltYXRpb25cclxufTtcclxuXHJcbi8qKlxyXG4gKiBBUktpdCBibGVuZHNoYXBlIG5hbWVzICg1MiBleHByZXNzaW9ucylcclxuICogVXNlZCBmb3IgZmFjaWFsIGV4cHJlc3Npb24gbWFwcGluZyBmcm9tIEFSS2l0IGZhY2UgdHJhY2tpbmdcclxuICovXHJcbmV4cG9ydCBjb25zdCBBUktpdEJsZW5kc2hhcGVzID0gW1xyXG4gICAgJ2Jyb3dEb3duTGVmdCcsXHJcbiAgICAnYnJvd0Rvd25SaWdodCcsXHJcbiAgICAnYnJvd0lubmVyVXAnLFxyXG4gICAgJ2Jyb3dPdXRlclVwTGVmdCcsXHJcbiAgICAnYnJvd091dGVyVXBSaWdodCcsXHJcbiAgICAnY2hlZWtQdWZmJyxcclxuICAgICdjaGVla1NxdWludExlZnQnLFxyXG4gICAgJ2NoZWVrU3F1aW50UmlnaHQnLFxyXG4gICAgJ2V5ZUJsaW5rTGVmdCcsXHJcbiAgICAnZXllQmxpbmtSaWdodCcsXHJcbiAgICAnZXllTG9va0Rvd25MZWZ0JyxcclxuICAgICdleWVMb29rRG93blJpZ2h0JyxcclxuICAgICdleWVMb29rSW5MZWZ0JyxcclxuICAgICdleWVMb29rSW5SaWdodCcsXHJcbiAgICAnZXllTG9va091dExlZnQnLFxyXG4gICAgJ2V5ZUxvb2tPdXRSaWdodCcsXHJcbiAgICAnZXllTG9va1VwTGVmdCcsXHJcbiAgICAnZXllTG9va1VwUmlnaHQnLFxyXG4gICAgJ2V5ZVNxdWludExlZnQnLFxyXG4gICAgJ2V5ZVNxdWludFJpZ2h0JyxcclxuICAgICdleWVXaWRlTGVmdCcsXHJcbiAgICAnZXllV2lkZVJpZ2h0JyxcclxuICAgICdqYXdGb3J3YXJkJyxcclxuICAgICdqYXdMZWZ0JyxcclxuICAgICdqYXdPcGVuJyxcclxuICAgICdqYXdSaWdodCcsXHJcbiAgICAnbW91dGhDbG9zZScsXHJcbiAgICAnbW91dGhEaW1wbGVMZWZ0JyxcclxuICAgICdtb3V0aERpbXBsZVJpZ2h0JyxcclxuICAgICdtb3V0aEZyb3duTGVmdCcsXHJcbiAgICAnbW91dGhGcm93blJpZ2h0JyxcclxuICAgICdtb3V0aEZ1bm5lbCcsXHJcbiAgICAnbW91dGhMZWZ0JyxcclxuICAgICdtb3V0aExvd2VyRG93bkxlZnQnLFxyXG4gICAgJ21vdXRoTG93ZXJEb3duUmlnaHQnLFxyXG4gICAgJ21vdXRoUHJlc3NMZWZ0JyxcclxuICAgICdtb3V0aFByZXNzUmlnaHQnLFxyXG4gICAgJ21vdXRoUHVja2VyJyxcclxuICAgICdtb3V0aFJpZ2h0JyxcclxuICAgICdtb3V0aFJvbGxMb3dlcicsXHJcbiAgICAnbW91dGhSb2xsVXBwZXInLFxyXG4gICAgJ21vdXRoU2hydWdMb3dlcicsXHJcbiAgICAnbW91dGhTaHJ1Z1VwcGVyJyxcclxuICAgICdtb3V0aFNtaWxlTGVmdCcsXHJcbiAgICAnbW91dGhTbWlsZVJpZ2h0JyxcclxuICAgICdtb3V0aFN0cmV0Y2hMZWZ0JyxcclxuICAgICdtb3V0aFN0cmV0Y2hSaWdodCcsXHJcbiAgICAnbW91dGhVcHBlclVwTGVmdCcsXHJcbiAgICAnbW91dGhVcHBlclVwUmlnaHQnLFxyXG4gICAgJ25vc2VTbmVlckxlZnQnLFxyXG4gICAgJ25vc2VTbmVlclJpZ2h0JyxcclxuICAgICd0b25ndWVPdXQnXHJcbl07XHJcblxyXG4vKipcclxuICogRkxBTUUgbW9kZWwgYm9uZSBuYW1lc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEZsYW1lQm9uZU5hbWVzID0gW1xyXG4gICAgJ3Jvb3QnLFxyXG4gICAgJ25lY2snLFxyXG4gICAgJ2phdycsXHJcbiAgICAnbGVmdEV5ZScsXHJcbiAgICAncmlnaHRFeWUnXHJcbl07XHJcblxyXG4vKipcclxuICogQ29uc3RhbnRzIGRlcml2ZWQgZnJvbSB0aGUgYXJyYXlzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQVJLSVRfQkxFTkRTSEFQRVNfQ09VTlQgPSBBUktpdEJsZW5kc2hhcGVzLmxlbmd0aDtcclxuZXhwb3J0IGNvbnN0IEZMQU1FX0JPTkVTX0NPVU5UID0gRmxhbWVCb25lTmFtZXMubGVuZ3RoO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgVFlWb2ljZUNoYXRTdGF0ZSxcclxuICAgIEFSS2l0QmxlbmRzaGFwZXMsXHJcbiAgICBGbGFtZUJvbmVOYW1lcyxcclxuICAgIEFSS0lUX0JMRU5EU0hBUEVTX0NPVU5ULFxyXG4gICAgRkxBTUVfQk9ORVNfQ09VTlRcclxufTtcclxuIiwiLyoqXHJcbiAqIEFuaW1hdGlvbk1hbmFnZXJcclxuICpcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogTWFuYWdlcyBhbmltYXRpb24gc3RhdGUgbWFjaGluZSB3aXRoIFRocmVlLmpzIEFuaW1hdGlvbk1peGVyLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IExvb3BPbmNlLCBMb29wUmVwZWF0IH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBUWVZvaWNlQ2hhdFN0YXRlIH0gZnJvbSAnLi9BcHBDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdBbmltYXRpb25NYW5hZ2VyJyk7XHJcblxyXG4vKipcclxuICogQmFzZSBTdGF0ZSBjbGFzcyBmb3IgYW5pbWF0aW9uIHN0YXRlc1xyXG4gKi9cclxuY2xhc3MgU3RhdGUge1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9ucywgaXNHcm91cCkge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gYWN0aW9ucyB8fCBbXTtcclxuICAgICAgICB0aGlzLmJsZW5kaW5nVGltZSA9IDAuNTtcclxuICAgICAgICB0aGlzLmlzR3JvdXAgPSBpc0dyb3VwIHx8IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gT3ZlcnJpZGUgaW4gc3ViY2xhc3Nlc1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGVsbG8gc3RhdGUgLSBpbml0aWFsIGdyZWV0aW5nIGFuaW1hdGlvblxyXG4gKi9cclxuY2xhc3MgSGVsbG8gZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLklkbGUgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA9IDA7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgMS4wKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wUmVwZWF0O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ucGxheSgpO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuSWRsZSAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uZ2V0Q2xpcCgpLmR1cmF0aW9uIC0gdGhpcy5ibGVuZGluZ1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0U3RhZ2UgPSB0aGlzLnN0YWdlICsgMTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhZ2UgPj0gdGhpcy5hY3Rpb25zLmxlbmd0aCkgbmV4dFN0YWdlID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW25leHRTdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbbmV4dFN0YWdlXS5sb29wID0gTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZSh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gbmV4dFN0YWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSWRsZSBzdGF0ZSAtIHJlc3RpbmcgYW5pbWF0aW9uXHJcbiAqL1xyXG5jbGFzcyBJZGxlIGV4dGVuZHMgU3RhdGUge1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9ucywgaXNHcm91cCkge1xyXG4gICAgICAgIHN1cGVyKGFjdGlvbnMsIGlzR3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShzdGF0ZSkge1xyXG4gICAgICAgIC8vIFNhZmV0eSBjaGVjazogcmV0dXJuIGVhcmx5IGlmIG5vIGFjdGlvbnMgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGlvbnMgfHwgdGhpcy5hY3Rpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlByZXBhcmVDcm9zc0ZhZGUoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uLCB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYmxlbmRpbmdUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLklkbGUgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuSWRsZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaXN0ZW4gc3RhdGUgLSBsaXN0ZW5pbmcgYW5pbWF0aW9uXHJcbiAqL1xyXG5jbGFzcyBMaXN0ZW4gZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ubG9vcCA9IHRoaXMuaXNHcm91cCA/IExvb3BPbmNlIDogTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdGhpcy5pc0dyb3VwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzR3JvdXApIHtcclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmcgJiZcclxuICAgICAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZSArIDFdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlICsgMV0ubG9vcCA9IExvb3BSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3RhZ2UgPT09IDAgfHwgdGhpcy5zdGFnZSA9PT0gMSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1syXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1syXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbMl0sIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0ubG9vcCA9IExvb3BPbmNlO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zWzJdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmcgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09ICh0aGlzLmlzR3JvdXAgPyB0aGlzLmFjdGlvbnMubGVuZ3RoIC0gMSA6IDApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGluayBzdGF0ZSAtIHRoaW5raW5nIGFuaW1hdGlvblxyXG4gKi9cclxuY2xhc3MgVGhpbmsgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ucGxheSgpO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNHcm91cCkge1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZSArIDFdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlICsgMV0ubG9vcCA9IExvb3BSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSAhPT0gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgICh0aGlzLnN0YWdlID09PSAwIHx8IHRoaXMuc3RhZ2UgPT09IDEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0udGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0ucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zWzJdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zWzJdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZSh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYWN0aW9uc1syXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZSA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmcgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmcgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSA9PT0gKHRoaXMuaXNHcm91cCA/IHRoaXMuYWN0aW9ucy5sZW5ndGggLSAxIDogMCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNwZWFrIHN0YXRlIC0gc3BlYWtpbmcgYW5pbWF0aW9uIHdpdGggcmFuZG9tIG1vdmVtZW50IHNlbGVjdGlvblxyXG4gKi9cclxuY2xhc3MgU3BlYWsgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIEluaXRpYWxpemVkIHdpdGgnLCBhY3Rpb25zPy5sZW5ndGggfHwgMCwgJ2FjdGlvbnMsIGlzR3JvdXA6JywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSByYW5kb20gbnVtYmVyIGluIHJhbmdlIFttaW4sIG1heF1cclxuICAgICAqL1xyXG4gICAgZ2V0UmFuZG9tTnVtYmVyKG1heCwgbWluKSB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW47XHJcbiAgICAgICAgcmV0dXJuIG1pbiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIHJhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoc3RhdGUpIHtcclxuICAgICAgICAvLyBTYWZldHkgY2hlY2s6IHJldHVybiBlYXJseSBpZiBubyBhY3Rpb25zIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICghdGhpcy5hY3Rpb25zIHx8IHRoaXMuYWN0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl93YXJuZWROb0FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdbU1BFQUtdIE5vIGFjdGlvbnMgYXZhaWxhYmxlIScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2FybmVkTm9BY3Rpb25zID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN0YXJ0IHNwZWFraW5nIC0gcGljayBhIHJhbmRvbSBhbmltYXRpb25cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc3RhdGUgPT09IFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZyAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gUmFuZG9tbHkgc2VsZWN0IGluaXRpYWwgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSBNYXRoLmNlaWwodGhpcy5nZXRSYW5kb21OdW1iZXIoMCwgdGhpcy5hY3Rpb25zLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIFN0YXJ0aW5nIGFuaW1hdGlvbiwgc3RhZ2U6JywgdGhpcy5zdGFnZSwgJ29mJywgdGhpcy5hY3Rpb25zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ubG9vcCA9IExvb3BPbmNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbnRpbnVlIHNwZWFraW5nIC0gY3ljbGUgdGhyb3VnaCByYW5kb20gYW5pbWF0aW9uc1xyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZyAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+PVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgICAgICAgICAgLy8gUGljayBhIGRpZmZlcmVudCByYW5kb20gYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gKHRoaXMuc3RhZ2UgKyBNYXRoLmNlaWwodGhpcy5nZXRSYW5kb21OdW1iZXIoMSwgdGhpcy5hY3Rpb25zLmxlbmd0aCAtIDEpKSkgJSB0aGlzLmFjdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIEN5Y2xpbmcgdG8gbmV4dCBhbmltYXRpb24sIHN0YWdlOicsIHRoaXMuc3RhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgMS4wKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKGxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdG9wIHNwZWFraW5nIC0gZmluaXNoIGN1cnJlbnQgYW5pbWF0aW9uXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nICYmXHJcbiAgICAgICAgICAgIHN0YXRlICE9PSBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmcgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuaW1hdGlvbk1hbmFnZXIgLSBNYWluIGFuaW1hdGlvbiBjb250cm9sbGVyXHJcbiAqIE1hbmFnZXMgc3RhdGUgbWFjaGluZSB3aXRoIGNyb3NzZmFkZSB0cmFuc2l0aW9ucyBiZXR3ZWVuIGFuaW1hdGlvbiBzdGF0ZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb25NYW5hZ2VyIHtcclxuICAgIC8vIFN0YXRpYyBwcm9wZXJ0aWVzXHJcbiAgICBzdGF0aWMgSXNCbGVuZGluZyA9IGZhbHNlO1xyXG4gICAgc3RhdGljIGFjdGlvbnMgPSBbXTtcclxuICAgIHN0YXRpYyBOZWVkUmVzZXQgPSBmYWxzZTtcclxuICAgIHN0YXRpYyBOZWVkRnVsbFJlc2V0ID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgTGFzdEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgIHN0YXRpYyBDdXJQbGF5aW5nID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGFuaW1hdGlvbiBhY3Rpb24gd2VpZ2h0XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBTZXRXZWlnaHQoYWN0aW9uLCB3ZWlnaHQpIHtcclxuICAgICAgICBhY3Rpb24uZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgYWN0aW9uLnNldEVmZmVjdGl2ZVRpbWVTY2FsZSgxKTtcclxuICAgICAgICBhY3Rpb24uc2V0RWZmZWN0aXZlV2VpZ2h0KHdlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIGNyb3NzZmFkZSBiZXR3ZWVuIHR3byBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBQcmVwYXJlQ3Jvc3NGYWRlKHN0YXJ0QWN0aW9uLCBlbmRBY3Rpb24sIGRlZmF1bHREdXJhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZGVmYXVsdER1cmF0aW9uO1xyXG4gICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuVW5QYXVzZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkV4ZWN1dGVDcm9zc0ZhZGUoc3RhcnRBY3Rpb24sIGVuZEFjdGlvbiwgZHVyYXRpb24pO1xyXG4gICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZyA9IHRydWU7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0sIGRlZmF1bHREdXJhdGlvbiArIDAuMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXVzZSBhbGwgYW5pbWF0aW9uIGFjdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFBhdXNlQWxsQWN0aW9ucygpIHtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgYWN0aW9uLnBhdXNlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhdXNlIGFsbCBhbmltYXRpb24gYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVW5QYXVzZUFsbEFjdGlvbnMoKSB7XHJcbiAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbi5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGUgY3Jvc3NmYWRlIGJldHdlZW4gdHdvIGFjdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEV4ZWN1dGVDcm9zc0ZhZGUoc3RhcnRBY3Rpb24sIGVuZEFjdGlvbiwgZHVyYXRpb24pIHtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodChlbmRBY3Rpb24sIDEpO1xyXG4gICAgICAgIGVuZEFjdGlvbi50aW1lID0gMDtcclxuICAgICAgICBzdGFydEFjdGlvbi5jcm9zc0ZhZGVUbyhlbmRBY3Rpb24sIGR1cmF0aW9uLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLkFuaW1hdGlvbk1peGVyfSBtaXhlciAtIFRocmVlLmpzIGFuaW1hdGlvbiBtaXhlclxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5BbmltYXRpb25DbGlwW119IGFuaW1hdGlvbnMgLSBBbmltYXRpb24gY2xpcHNcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbmltYXRpb25jZmcgLSBBbmltYXRpb24gY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtaXhlciwgYW5pbWF0aW9ucywgYW5pbWF0aW9uY2ZnKSB7XHJcbiAgICAgICAgY29uc3QgaGVsbG9BY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgaWRsZUFjdGlvbnMgPSBbXTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5BY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3Qgc3BlYWtBY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgdGhpbmtBY3Rpb25zID0gW107XHJcblxyXG4gICAgICAgIHRoaXMubWl4ZXIgPSBtaXhlcjtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGFjdGlvbiBpbmRpY2VzIGJhc2VkIG9uIGNvbmZpZ1xyXG4gICAgICAgIGNvbnN0IGhlbGxvSWR4ID0gYW5pbWF0aW9uY2ZnPy5oZWxsbz8uc2l6ZSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IGlkbGVJZHggPSAoYW5pbWF0aW9uY2ZnPy5pZGxlPy5zaXplIHx8IDApICsgaGVsbG9JZHg7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuSWR4ID0gKGFuaW1hdGlvbmNmZz8ubGlzdGVuPy5zaXplIHx8IDApICsgaWRsZUlkeDtcclxuICAgICAgICBjb25zdCBzcGVha0lkeCA9IChhbmltYXRpb25jZmc/LnNwZWFrPy5zaXplIHx8IDApICsgbGlzdGVuSWR4O1xyXG4gICAgICAgIGNvbnN0IHRoaW5rSWR4ID0gKGFuaW1hdGlvbmNmZz8udGhpbms/LnNpemUgfHwgMCkgKyBzcGVha0lkeDtcclxuXHJcbiAgICAgICAgLy8gRGlzdHJpYnV0ZSBhbmltYXRpb24gY2xpcHMgdG8gc3RhdGUgYWN0aW9uIGFycmF5c1xyXG4gICAgICAgIGlmIChhbmltYXRpb25zICYmIGFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaXAgPSBhbmltYXRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gbWl4ZXIuY2xpcEFjdGlvbihjbGlwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IGhlbGxvSWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVsbG9BY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IGlkbGVJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZGxlQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRHVwbGljYXRlIGZvciBzdGF0ZXMgdGhhdCBzaGFyZSBpZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbklkeCA9PT0gaWRsZUlkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5BY3Rpb25zLnB1c2gobWl4ZXIuY2xpcEFjdGlvbihjbGlwLmNsb25lKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwZWFrSWR4ID09PSBsaXN0ZW5JZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlYWtBY3Rpb25zLnB1c2gobWl4ZXIuY2xpcEFjdGlvbihjbGlwLmNsb25lKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaW5rSWR4ID09PSBzcGVha0lkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlua0FjdGlvbnMucHVzaChtaXhlci5jbGlwQWN0aW9uKGNsaXAuY2xvbmUoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IGxpc3RlbklkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbkFjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgc3BlYWtJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGVha0FjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgdGhpbmtJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlua0FjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuYWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodChhY3Rpb24sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgc3RhdGUgaW5zdGFuY2VzXHJcbiAgICAgICAgdGhpcy5oZWxsbyA9IG5ldyBIZWxsbyhoZWxsb0FjdGlvbnMsIGFuaW1hdGlvbmNmZz8uaGVsbG8/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuaWRsZSA9IG5ldyBJZGxlKGlkbGVBY3Rpb25zLCBhbmltYXRpb25jZmc/LmlkbGU/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuID0gbmV3IExpc3RlbihsaXN0ZW5BY3Rpb25zLCBhbmltYXRpb25jZmc/Lmxpc3Rlbj8uaXNHcm91cCB8fCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50aGluayA9IG5ldyBUaGluayh0aGlua0FjdGlvbnMsIGFuaW1hdGlvbmNmZz8udGhpbms/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc3BlYWsgPSBuZXcgU3BlYWsoc3BlYWtBY3Rpb25zLCBhbmltYXRpb25jZmc/LnNwZWFrPy5pc0dyb3VwIHx8IGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50bHkgcGxheWluZyBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBjdXJQbGF5aW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlbGxvLmlzUGxheWluZykgcmV0dXJuIFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuICAgICAgICBpZiAodGhpcy5pZGxlLmlzUGxheWluZykgcmV0dXJuIFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW4uaXNQbGF5aW5nKSByZXR1cm4gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmc7XHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmsuaXNQbGF5aW5nKSByZXR1cm4gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZztcclxuICAgICAgICBpZiAodGhpcy5zcGVhay5pc1BsYXlpbmcpIHJldHVybiBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmc7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgYW5pbWF0aW9uIG1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLmhlbGxvLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLmlkbGUuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnRoaW5rLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnNwZWFrLmRpc3Bvc2UoKTtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGFsbCBhbmltYXRpb24gYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICByZXNldEFsbEFjdGlvbnMoaWdub3JlQmxlbmRpbmcgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGN1clBsYXlpbmcgPSB0aGlzLmN1clBsYXlpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKGN1clBsYXlpbmcpIHtcclxuICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24gPSB0aGlzLmhlbGxvLmFjdGlvbnNbdGhpcy5oZWxsby5zdGFnZV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMubGlzdGVuLmFjdGlvbnNbdGhpcy5saXN0ZW4uc3RhZ2VdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMudGhpbmsuYWN0aW9uc1t0aGlzLnRoaW5rLnN0YWdlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuc3BlYWsuYWN0aW9uc1t0aGlzLnNwZWFrLnN0YWdlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbi5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbi5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiwgMS4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpZ25vcmVCbGVuZGluZykge1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlBhdXNlQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbi50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KGFjdGlvbiwgMC4wKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGVsbG8uaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pZGxlLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGhpbmsuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zcGVhay5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhbmltYXRpb24gc3RhdGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZSAtIFRhcmdldCBzdGF0ZSAoVFlWb2ljZUNoYXRTdGF0ZSlcclxuICAgICAqL1xyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPSB0aGlzLmN1clBsYXlpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRsZS51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rlbi51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BlYWsudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGxlLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGxlLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluay51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVhay51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkbGUudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RhdGUsIEhlbGxvLCBJZGxlLCBMaXN0ZW4sIFRoaW5rLCBTcGVhayB9O1xyXG5leHBvcnQgZGVmYXVsdCBBbmltYXRpb25NYW5hZ2VyO1xyXG4iLCIvKipcclxuICogU3BsYXRTY2VuZVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWF0cml4NCwgT2JqZWN0M0QsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRTY2VuZSBleHRlbmRzIE9iamVjdDNEIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGxhdEJ1ZmZlciwgcG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLCBxdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlID0gbmV3IFZlY3RvcjMoMSwgMSwgMSksIG1pbmltdW1BbHBoYSA9IDEsIG9wYWNpdHkgPSAxLjAsIHZpc2libGUgPSB0cnVlKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnNwbGF0QnVmZmVyID0gc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKTtcclxuICAgICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICB0aGlzLm1pbmltdW1BbHBoYSA9IG1pbmltdW1BbHBoYTtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICB9XHJcblxyXG4gICAgY29weVRyYW5zZm9ybURhdGEob3RoZXJTY2VuZSkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uY29weShvdGhlclNjZW5lLnBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvdGhlclNjZW5lLnF1YXRlcm5pb24pO1xyXG4gICAgICAgIHRoaXMuc2NhbGUuY29weShvdGhlclNjZW5lLnNjYWxlKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb3B5KG90aGVyU2NlbmUudHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUcmFuc2Zvcm0oZHluYW1pY01vZGUpIHtcclxuICAgICAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4V29ybGRBdXRvVXBkYXRlKSB0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uY29weSh0aGlzLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXhBdXRvVXBkYXRlKSB0aGlzLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb3B5KHRoaXMubWF0cml4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRHZW9tZXRyeVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQnVmZmVyQXR0cmlidXRlLCBCdWZmZXJHZW9tZXRyeSwgRHluYW1pY0RyYXdVc2FnZSwgSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLCBJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSB9IGZyb20gJ3RocmVlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdEdlb21ldHJ5IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBUaHJlZS5qcyBnZW9tZXRyeSB0aGF0IHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy4gVGhlIGdlb21ldHJ5IGlzIGluc3RhbmNlZCBhbmQgaXMgbWFkZSB1cCBvZlxyXG4gICAgICogdmVydGljZXMgZm9yIGEgc2luZ2xlIHF1YWQgYXMgd2VsbCBhcyBhbiBhdHRyaWJ1dGUgYnVmZmVyIGZvciB0aGUgc3BsYXQgaW5kZXhlcy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTcGxhdENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBzcGxhdHMgdGhhdCB0aGUgZ2VvbWV0cnkgd2lsbCBuZWVkIHRvIGFjY29tb2RhdGVcclxuICAgICAqIEByZXR1cm4ge1RIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnVpbGQobWF4U3BsYXRDb3VudCkge1xyXG5cclxuICAgICAgICBjb25zdCBiYXNlR2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgICAgICBiYXNlR2VvbWV0cnkuc2V0SW5kZXgoWzAsIDEsIDIsIDAsIDIsIDNdKTtcclxuXHJcbiAgICAgICAgLy8gVmVydGljZXMgZm9yIHRoZSBpbnN0YW5jZWQgcXVhZFxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0ICogMyk7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnNBcnJheSwgMyk7XHJcbiAgICAgICAgYmFzZUdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBwb3NpdGlvbnMpO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zZXRYWVooMCwgLTEuMCwgLTEuMCwgMC4wKTtcclxuICAgICAgICBwb3NpdGlvbnMuc2V0WFlaKDEsIC0xLjAsIDEuMCwgMC4wKTtcclxuICAgICAgICBwb3NpdGlvbnMuc2V0WFlaKDIsIDEuMCwgMS4wLCAwLjApO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zZXRYWVooMywgMS4wLCAtMS4wLCAwLjApO1xyXG4gICAgICAgIHBvc2l0aW9ucy5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5KCkuY29weShiYXNlR2VvbWV0cnkpO1xyXG5cclxuICAgICAgICAvLyBTcGxhdCBpbmRleCBidWZmZXJcclxuICAgICAgICBjb25zdCBzcGxhdEluZGV4QXJyYXkgPSBuZXcgVWludDMyQXJyYXkobWF4U3BsYXRDb3VudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwbGF0SW5kZXhlcyA9IG5ldyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUoc3BsYXRJbmRleEFycmF5LCAxLCBmYWxzZSk7XHJcbiAgICAgICAgc3BsYXRJbmRleGVzLnNldFVzYWdlKER5bmFtaWNEcmF3VXNhZ2UpO1xyXG4gICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc3BsYXRJbmRleCcsIHNwbGF0SW5kZXhlcyk7XHJcblxyXG4gICAgICAgIGdlb21ldHJ5Lmluc3RhbmNlQ291bnQgPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRUcmVlXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICovXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBkZWxheWVkRXhlY3V0ZSB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5cclxuLy8gV29ya2VyLXJlbGF0ZWQgZnVuY3Rpb25zIChzaW1wbGlmaWVkIHN0dWJzIC0gdGhlIGFjdHVhbCB3b3JrZXIgaXMgaGFuZGxlZCBkaWZmZXJlbnRseSlcclxuY29uc3QgY2hlY2tBbmRDcmVhdGVXb3JrZXIgPSAoKSA9PiB7XHJcbiAgICAvLyBXb3JrZXIgY3JlYXRpb24gaXMgaGFuZGxlZCBieSB0aGUgYnVpbGQgc3lzdGVtXHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmNvbnN0IHdvcmtlclByb2Nlc3NDZW50ZXJzID0gKHdvcmtlciwgY2VudGVycywgYnVmZmVycywgbWF4RGVwdGgsIG1heENlbnRlcnNQZXJOb2RlKSA9PiB7XHJcbiAgICAvLyBXb3JrZXIgbWVzc2FnZSBwYXNzaW5nXHJcbiAgICBpZiAod29ya2VyKSB7XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgJ3Byb2Nlc3MnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2VudGVycyc6IGNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAnbWF4RGVwdGgnOiBtYXhEZXB0aCxcclxuICAgICAgICAgICAgICAgICdtYXhDZW50ZXJzUGVyTm9kZSc6IG1heENlbnRlcnNQZXJOb2RlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBidWZmZXJzKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFNwbGF0U3ViVHJlZSBoZWxwZXIgY2xhc3NcclxuY2xhc3MgU3BsYXRTdWJUcmVlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucm9vdE5vZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29udmVydFdvcmtlclN1YlRyZWUod29ya2VyU3ViVHJlZSwgc3BsYXRNZXNoKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViVHJlZSA9IG5ldyBTcGxhdFN1YlRyZWUoKTtcclxuICAgICAgICBzdWJUcmVlLnJvb3ROb2RlID0gd29ya2VyU3ViVHJlZS5yb290Tm9kZTtcclxuICAgICAgICBzdWJUcmVlLnNwbGF0TWVzaCA9IHNwbGF0TWVzaDtcclxuICAgICAgICByZXR1cm4gc3ViVHJlZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0VHJlZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWF4RGVwdGgsIG1heENlbnRlcnNQZXJOb2RlKSB7XHJcbiAgICAgICAgdGhpcy5tYXhEZXB0aCA9IG1heERlcHRoO1xyXG4gICAgICAgIHRoaXMubWF4Q2VudGVyc1Blck5vZGUgPSBtYXhDZW50ZXJzUGVyTm9kZTtcclxuICAgICAgICB0aGlzLnN1YlRyZWVzID0gW107XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuZGlwb3NlU3BsYXRUcmVlV29ya2VyKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGlwb3NlU3BsYXRUcmVlV29ya2VyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0VHJlZVdvcmtlcikgdGhpcy5zcGxhdFRyZWVXb3JrZXIudGVybWluYXRlKCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdFRyZWVXb3JrZXIgPSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCB0aGlzIGluc3RhbmNlIG9mIFNwbGF0VHJlZSBmcm9tIGFuIGluc3RhbmNlIG9mIFNwbGF0TWVzaC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1NwbGF0TWVzaH0gc3BsYXRNZXNoIFRoZSBpbnN0YW5jZSBvZiBTcGxhdE1lc2ggZnJvbSB3aGljaCB0byBjb25zdHJ1Y3QgdGhpcyBzcGxhdCB0cmVlLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZmlsdGVyRnVuYyBPcHRpb25hbCBmdW5jdGlvbiB0byBmaWx0ZXIgb3V0IHVud2FudGVkIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uSW5kZXhlc1VwbG9hZCBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXBsb2FkIG9mIHNwbGF0IGNlbnRlcnMgdG8gdGhlIHNwbGF0IHRyZWVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGZpbmlzaGVzLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGNvbnZlcnNpb24gb2YgdGhlIGxvY2FsIHNwbGF0IHRyZWUgZnJvbVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGZvcm1hdCBwcm9kdWNlZCBieSB0aGUgc3BsYXQgdHJlZSBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGVuZHMuXHJcbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NTcGxhdE1lc2ggPSAoc3BsYXRNZXNoLCBmaWx0ZXJGdW5jID0gKCkgPT4gdHJ1ZSwgb25JbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbikgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zcGxhdFRyZWVXb3JrZXIpIHRoaXMuc3BsYXRUcmVlV29ya2VyID0gY2hlY2tBbmRDcmVhdGVXb3JrZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBzcGxhdE1lc2g7XHJcbiAgICAgICAgdGhpcy5zdWJUcmVlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENlbnRlcnNGb3JTY2VuZSA9IChzcGxhdE9mZnNldCwgc3BsYXRDb3VudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZUNlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiA0KTtcclxuICAgICAgICAgICAgbGV0IGFkZGVkQ291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsU3BsYXRJbmRleCA9IGkgKyBzcGxhdE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGdW5jKGdsb2JhbFNwbGF0SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRNZXNoLmdldFNwbGF0Q2VudGVyKGdsb2JhbFNwbGF0SW5kZXgsIGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkQmFzZSA9IGFkZGVkQ291bnQgKiA0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyc1thZGRCYXNlXSA9IGNlbnRlci54O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyc1thZGRCYXNlICsgMV0gPSBjZW50ZXIueTtcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZUNlbnRlcnNbYWRkQmFzZSArIDJdID0gY2VudGVyLno7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVDZW50ZXJzW2FkZEJhc2UgKyAzXSA9IGdsb2JhbFNwbGF0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzY2VuZUNlbnRlcnM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja0ZvckVhcmx5RXhpdCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXBvc2VTcGxhdFRyZWVXb3JrZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAob25JbmRleGVzVXBsb2FkKSBvbkluZGV4ZXNVcGxvYWQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZGVsYXllZEV4ZWN1dGUoKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGVja0ZvckVhcmx5RXhpdCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQ2VudGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwbGF0TWVzaC5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxhdE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzcGxhdE1lc2guc2NlbmVzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gc3BsYXRNZXNoLmdldFNjZW5lKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gc2NlbmUuc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2VuZUNlbnRlcnMgPSBhZGRDZW50ZXJzRm9yU2NlbmUoc3BsYXRPZmZzZXQsIHNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxDZW50ZXJzLnB1c2goc2NlbmVDZW50ZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRPZmZzZXQgKz0gc3BsYXRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lQ2VudGVycyA9IGFkZENlbnRlcnNGb3JTY2VuZSgwLCBzcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxDZW50ZXJzLnB1c2goc2NlbmVDZW50ZXJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0VHJlZVdvcmtlci5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnN1YlRyZWVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24pIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHdvcmtlclN1YlRyZWUgb2YgZS5kYXRhLnN1YlRyZWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkU3ViVHJlZSA9IFNwbGF0U3ViVHJlZS5jb252ZXJ0V29ya2VyU3ViVHJlZSh3b3JrZXJTdWJUcmVlLCBzcGxhdE1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViVHJlZXMucHVzaChjb252ZXJ0ZWRTdWJUcmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlwb3NlU3BsYXRUcmVlV29ya2VyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKSBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbih0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheWVkRXhlY3V0ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkluZGV4ZXNVcGxvYWQpIG9uSW5kZXhlc1VwbG9hZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2ZlckJ1ZmZlcnMgPSBhbGxDZW50ZXJzLm1hcCgoYXJyYXkpID0+IGFycmF5LmJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyUHJvY2Vzc0NlbnRlcnModGhpcy5zcGxhdFRyZWVXb3JrZXIsIGFsbENlbnRlcnMsIHRyYW5zZmVyQnVmZmVycywgdGhpcy5tYXhEZXB0aCwgdGhpcy5tYXhDZW50ZXJzUGVyTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGNvdW50TGVhdmVzKCkge1xyXG5cclxuICAgICAgICBsZXQgbGVhZkNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnZpc2l0TGVhdmVzKCgpID0+IHtcclxuICAgICAgICAgICAgbGVhZkNvdW50Kys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBsZWFmQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRMZWF2ZXModmlzaXRGdW5jKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpc2l0TGVhdmVzRnJvbU5vZGUgPSAobm9kZSwgdmlzaXRGdW5jKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgdmlzaXRGdW5jKG5vZGUpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICB2aXNpdExlYXZlc0Zyb21Ob2RlKGNoaWxkLCB2aXNpdEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgc3ViVHJlZSBvZiB0aGlzLnN1YlRyZWVzKSB7XHJcbiAgICAgICAgICAgIHZpc2l0TGVhdmVzRnJvbU5vZGUoc3ViVHJlZS5yb290Tm9kZSwgdmlzaXRGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0TWF0ZXJpYWxcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIRUFWSUxZIE1PRElGSUVEIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBBZGRlZCBGTEFNRSBib25lL3Bvc2UgdW5pZm9ybXMgYW5kIHRleHR1cmVzXHJcbiAqIC0gQWRkZWQgZXhwcmVzc2lvbiBibGVuZHNoYXBlIHN1cHBvcnRcclxuICogLSBFeHRlbmRlZCB2ZXJ0ZXggc2hhZGVyIHdpdGggR1BVIHNraW5uaW5nXHJcbiAqIC0gQWRkaXRpb25hbCB+NTAwIGxpbmVzIG9mIEZMQU1FLXNwZWNpZmljIHNoYWRlciBjb2RlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29sb3IsIERvdWJsZVNpZGUsIE1hdHJpeDQsIE5vcm1hbEJsZW5kaW5nLCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdE1hdGVyaWFsIHtcclxuXHJcbiAgICBzdGF0aWMgYnVpbGRWZXJ0ZXhTaGFkZXJCYXNlKGR5bmFtaWNNb2RlID0gZmFsc2UsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGZhbHNlLCBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLCBjdXN0b21WYXJzID0gJycpIHtcclxuICAgICAgICBsZXQgdmVydGV4U2hhZGVyU291cmNlID0gYCNkZWZpbmUgVVNFX1NLSU5OSU5HXHJcblxyXG4gICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAjaW5jbHVkZSA8Y29tbW9uPlxyXG5cclxuICAgICAgICBhdHRyaWJ1dGUgdWludCBzcGxhdEluZGV4O1xyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBmbGFtZU1vZGVsVGV4dHVyZTtcclxuICAgICAgICB1bmlmb3JtIGhpZ2hwIHVzYW1wbGVyMkQgYm9uZVRleHR1cmU7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB1c2FtcGxlcjJEIGJvbmVXZWlnaHRUZXh0dXJlO1xyXG5cclxuXHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB1c2FtcGxlcjJEIGNlbnRlcnNDb2xvcnNUZXh0dXJlO1xyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmU7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVI7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUc7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUI7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBzY2VuZUluZGV4ZXNUZXh0dXJlO1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBzY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZTtcclxuICAgICAgICB1bmlmb3JtIGludCBzY2VuZUNvdW50O1xyXG4gICAgICAgIHVuaWZvcm0gaW50IGdhdXNzaWFuU3BsYXRDb3VudDtcclxuICAgICAgICB1bmlmb3JtIGludCBic0NvdW50O1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgaGVhZEJvbmVJbmRleDtcclxuICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDtcclxuICAgICAgICAgICAgYXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcclxuICAgICAgICAjZW5kaWZcclxuICAgIGA7XHJcblxyXG4gICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgc2NlbmVPcGFjaXR5WyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGludCBzY2VuZVZpc2liaWxpdHlbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIG1hdDQgdHJhbnNmb3Jtc1ske0NvbnN0YW50cy5NYXhTY2VuZXN9XTtcclxuICAgICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgJHtjdXN0b21WYXJzfVxyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBmb2NhbDtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IG9ydGhvWm9vbTtcclxuICAgICAgICB1bmlmb3JtIGludCBvcnRob2dyYXBoaWNNb2RlO1xyXG4gICAgICAgIHVuaWZvcm0gaW50IHBvaW50Q2xvdWRNb2RlRW5hYmxlZDtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIHZpZXdwb3J0O1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBiYXNpc1ZpZXdwb3J0O1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemU7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIGZsYW1lTW9kZWxUZXh0dXJlU2l6ZTtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgYm9uZVdlaWdodFRleHR1cmVTaXplO1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBib25lVGV4dHVyZVNpemU7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gaW50IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZTtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHZpc2libGVSZWdpb25SYWRpdXM7XHJcbiAgICAgICAgdW5pZm9ybSBmbG9hdCB2aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgZmlyc3RSZW5kZXJUaW1lO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgY3VycmVudFRpbWU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgZmFkZUluQ29tcGxldGU7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMzIHNjZW5lQ2VudGVyO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BsYXRTY2FsZTtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluWyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcblxyXG4gICAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XHJcbiAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICB2YXJ5aW5nIHZlYzIgdlBvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgdmVjMiB2U3BsYXRJbmRleDtcclxuICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4O1xyXG4gICAgICAgICAgICB1bmlmb3JtIG1hdDQgYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIGJvbmVUZXh0dXJlMDtcclxuICAgICAgICAgICAgbWF0NCBnZXRCb25lTWF0cml4MCggY29uc3QgaW4gZmxvYXQgaSApIHtcclxuICAgICAgICAgICAgICAgIGludCBzaXplID0gdGV4dHVyZVNpemUoIGJvbmVUZXh0dXJlMCwgMCApLng7XHJcbiAgICAgICAgICAgICAgICBpbnQgaiA9IGludCggaSApICogNDtcclxuICAgICAgICAgICAgICAgIGludCB4ID0gaiAlIHNpemU7XHJcbiAgICAgICAgICAgICAgICBpbnQgeSA9IGogLyBzaXplO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB2MSA9IHRleGVsRmV0Y2goIGJvbmVUZXh0dXJlMCwgaXZlYzIoIHgsIHkgKSwgMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB2MiA9IHRleGVsRmV0Y2goIGJvbmVUZXh0dXJlMCwgaXZlYzIoIHggKyAxLCB5ICksIDAgKTtcclxuICAgICAgICAgICAgICAgIHZlYzQgdjMgPSB0ZXhlbEZldGNoKCBib25lVGV4dHVyZTAsIGl2ZWMyKCB4ICsgMiwgeSApLCAwICk7XHJcbiAgICAgICAgICAgICAgICB2ZWM0IHY0ID0gdGV4ZWxGZXRjaCggYm9uZVRleHR1cmUwLCBpdmVjMiggeCArIDMsIHkgKSwgMCApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAjZW5kaWZcclxuXHJcbiAgICAgICAgbWF0MyBxdWF0ZXJuaW9uVG9Sb3RhdGlvbk1hdHJpeChmbG9hdCB4LCBmbG9hdCB5LCBmbG9hdCB6LCBmbG9hdCB3KSB7XHJcbiAgICAgICAgICAgIGZsb2F0IHMgPSAxLjAgLyBzcXJ0KHcgKiB3ICsgeCAqIHggKyB5ICogeSArIHogKiB6KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG1hdDMoXHJcbiAgICAgICAgICAgICAgICAxLiAtIDIuICogKHkgKiB5ICsgeiAqIHopLFxyXG4gICAgICAgICAgICAgICAgMi4gKiAoeCAqIHkgKyB3ICogeiksXHJcbiAgICAgICAgICAgICAgICAyLiAqICh4ICogeiAtIHcgKiB5KSxcclxuICAgICAgICAgICAgICAgIDIuICogKHggKiB5IC0gdyAqIHopLFxyXG4gICAgICAgICAgICAgICAgMS4gLSAyLiAqICh4ICogeCArIHogKiB6KSxcclxuICAgICAgICAgICAgICAgIDIuICogKHkgKiB6ICsgdyAqIHgpLFxyXG4gICAgICAgICAgICAgICAgMi4gKiAoeCAqIHogKyB3ICogeSksXHJcbiAgICAgICAgICAgICAgICAyLiAqICh5ICogeiAtIHcgKiB4KSxcclxuICAgICAgICAgICAgICAgIDEuIC0gMi4gKiAoeCAqIHggKyB5ICogeSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZsb2F0IHNxcnQ4ID0gc3FydCg4LjApO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0IG1pbkFscGhhID0gMS4wIC8gMjU1LjA7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlYzQgZW5jb2RlTm9ybTQgPSB2ZWM0KDEuMCAvIDI1NS4wLCAxLjAgLyAyNTUuMCwgMS4wIC8gMjU1LjAsIDEuMCAvIDI1NS4wKTtcclxuICAgICAgICBjb25zdCB1dmVjNCBtYXNrNCA9IHV2ZWM0KHVpbnQoMHgwMDAwMDBGRiksIHVpbnQoMHgwMDAwRkYwMCksIHVpbnQoMHgwMEZGMDAwMCksIHVpbnQoMHhGRjAwMDAwMCkpO1xyXG4gICAgICAgIGNvbnN0IHV2ZWM0IHNoaWZ0NCA9IHV2ZWM0KDAsIDgsIDE2LCAyNCk7XHJcbiAgICAgICAgaW50IGludGVybmFsID0gMTsvL3Nob3cgYSBnYXVzc2lhbiBzcGxhdHRpbmcgcG9pbnQgZXZlcnkgaW50ZXJuYWwgcG9pbnRzLlxyXG4gICAgICAgIHZlYzQgdWludFRvUkdCQVZlYyAodWludCB1KSB7XHJcbiAgICAgICAgICAgdXZlYzQgdXJnYmEgPSBtYXNrNCAmIHU7XHJcbiAgICAgICAgICAgdXJnYmEgPSB1cmdiYSA+PiBzaGlmdDQ7XHJcbiAgICAgICAgICAgdmVjNCByZ2JhID0gdmVjNCh1cmdiYSkgKiBlbmNvZGVOb3JtNDtcclxuICAgICAgICAgICByZXR1cm4gcmdiYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmxvYXQgZ2V0UmVhbEluZGV4KGludCBzSW5kZXgsIGludCByZWR1Y2VkRmFjdG9yKSB7XHJcbiAgICAgICAgICAgIGludCByZW1haW5kZXIgPSBzSW5kZXggJSByZWR1Y2VkRmFjdG9yO1xyXG5cclxuICAgICAgICAgICAgaWYocmVtYWluZGVyID09IGludCgwKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsb2F0KHNJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmxvYXQoc0luZGV4IC0gcmVtYWluZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVjMiBnZXREYXRhVVYoaW4gaW50IHN0cmlkZSwgaW4gaW50IG9mZnNldCwgaW4gdmVjMiBkaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdCh1aW50KGdldFJlYWxJbmRleChpbnQoc3BsYXRJbmRleCksIGludGVybmFsKSkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0RmxhbWVEYXRhVVYoaW4gaW50IHN0cmlkZSwgaW4gaW50IG9mZnNldCwgaW4gdmVjMiBkaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdCh1aW50KGludChzcGxhdEluZGV4KSAvIGludGVybmFsKSAqIHVpbnQoc3RyaWRlKSArIHVpbnQob2Zmc2V0KSArIHVpbnQoZ2F1c3NpYW5TcGxhdENvdW50ICogYnNDb3VudCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0Qm9uZVdlaWdodFVWKGluIGludCBzdHJpZGUsIGluIGludCBvZmZzZXQsIGluIHZlYzIgZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gZmxvYXQodWludChpbnQoc3BsYXRJbmRleCkgLyBpbnRlcm5hbCkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0QlNGbGFtZURhdGFVVihpbiBpbnQgYnNJbmVkZXgsIGluIGludCBzdHJpZGUsIGluIGludCBvZmZzZXQsIGluIHZlYzIgZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gZmxvYXQodWludChpbnQoc3BsYXRJbmRleCkgLyBpbnRlcm5hbCkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkgKyB1aW50KGdhdXNzaWFuU3BsYXRDb3VudCAqIGJzSW5lZGV4KSkgLyBkaW1lbnNpb25zLng7XHJcbiAgICAgICAgICAgIHNhbXBsZXJVVi55ID0gZmxvYXQoZmxvb3IoZCkpIC8gZGltZW5zaW9ucy55O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlclVWO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVjMiBnZXREYXRhVVZGKGluIHVpbnQgc0luZGV4LCBpbiBmbG9hdCBzdHJpZGUsIGluIHVpbnQgb2Zmc2V0LCBpbiB2ZWMyIGRpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgdmVjMiBzYW1wbGVyVVYgPSB2ZWMyKDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IGZsb2F0KHVpbnQoZmxvYXQoZ2V0UmVhbEluZGV4KGludChzSW5kZXgpLCBpbnRlcm5hbCkpICogc3RyaWRlKSArIG9mZnNldCkgLyBkaW1lbnNpb25zLng7XHJcbiAgICAgICAgICAgIHNhbXBsZXJVVi55ID0gZmxvYXQoZmxvb3IoZCkpIC8gZGltZW5zaW9ucy55O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlclVWO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmxvYXQgU0hfQzEgPSAwLjQ4ODYwMjUxMTkwMjkxOTlmO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0WzVdIFNIX0MyID0gZmxvYXRbXSgxLjA5MjU0ODQsIC0xLjA5MjU0ODQsIDAuMzE1MzkxNiwgLTEuMDkyNTQ4NCwgMC41NDYyNzQyKTtcclxuXHJcbiAgICAgICAgbWF0NCBnZXRCb25lTWF0cml4KCBmbG9hdCBpICkge1xyXG4gICAgICAgICAgICBmbG9hdCB5ID0gaTtcclxuICAgICAgICAgICAgZmxvYXQgeCA9IDAuMDtcclxuXHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdChpICogNC4wKSAvIGJvbmVUZXh0dXJlU2l6ZS54Oy8vNFxyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGJvbmVUZXh0dXJlU2l6ZS55Oy8vNVxyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG5cclxuICAgICAgICAgICAgdmVjNCB2MSA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKCBib25lVGV4dHVyZSwgc2FtcGxlclVWICkpO1xyXG4gICAgICAgICAgICB2ZWM0IHYyID0gdWludEJpdHNUb0Zsb2F0KHRleHR1cmUoIGJvbmVUZXh0dXJlLCB2ZWMyKHNhbXBsZXJVVi54ICsgMS4wIC8gYm9uZVRleHR1cmVTaXplLngsIHNhbXBsZXJVVi55KSkpO1xyXG4gICAgICAgICAgICB2ZWM0IHYzID0gdWludEJpdHNUb0Zsb2F0KHRleHR1cmUoIGJvbmVUZXh0dXJlLCB2ZWMyKHNhbXBsZXJVVi54ICsgMi4wIC8gYm9uZVRleHR1cmVTaXplLngsIHNhbXBsZXJVVi55KSApKTtcclxuICAgICAgICAgICAgdmVjNCB2NCA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKCBib25lVGV4dHVyZSwgdmVjMihzYW1wbGVyVVYueCArIDMuMCAvIGJvbmVUZXh0dXJlU2l6ZS54LCBzYW1wbGVyVVYueSkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBtYWluICgpIHtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgb2RkT2Zmc2V0ID0gc3BsYXRJbmRleCAmIHVpbnQoMHgwMDAwMDAwMSk7XHJcbiAgICAgICAgICAgIHVpbnQgZG91YmxlT2RkT2Zmc2V0ID0gb2RkT2Zmc2V0ICogdWludCgyKTtcclxuICAgICAgICAgICAgYm9vbCBpc0V2ZW4gPSBvZGRPZmZzZXQgPT0gdWludCgwKTtcclxuICAgICAgICAgICAgdWludCBuZWFyZXN0RXZlbkluZGV4ID0gc3BsYXRJbmRleCAtIG9kZE9mZnNldDtcclxuICAgICAgICAgICAgZmxvYXQgZk9kZE9mZnNldCA9IGZsb2F0KG9kZE9mZnNldCk7XHJcblxyXG4gICAgICAgICAgICB1dmVjNCBzYW1wbGVkQ2VudGVyQ29sb3IgPSB0ZXh0dXJlKGNlbnRlcnNDb2xvcnNUZXh0dXJlLCBnZXREYXRhVVYoMSwgMCwgY2VudGVyc0NvbG9yc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgIC8vIHZlYzMgc3BsYXRDZW50ZXIgPSB1aW50Qml0c1RvRmxvYXQodXZlYzMoc2FtcGxlZENlbnRlckNvbG9yLmdiYSkpO1xyXG5cclxuICAgICAgICAgICAgdXZlYzMgc2FtcGxlZENlbnRlciA9IHRleHR1cmUoY2VudGVyc0NvbG9yc1RleHR1cmUsIGdldERhdGFVVigxLCAwLCBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUpKS5nYmE7XHJcbiAgICAgICAgICAgIHZlYzMgc3BsYXRDZW50ZXIgPSB1aW50Qml0c1RvRmxvYXQodXZlYzMoc2FtcGxlZENlbnRlcikpO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBmbGFtZVRleHR1cmVVViA9IGdldEJTRmxhbWVEYXRhVVYoYnNDb3VudCwgMSwgMCwgZmxhbWVNb2RlbFRleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgdXZlYzMgc2FtcGxlZGZsYW1lUG9zID0gdGV4dHVyZShmbGFtZU1vZGVsVGV4dHVyZSwgZmxhbWVUZXh0dXJlVVYpLnJnYjtcclxuICAgICAgICAgICAgLy8gc3BsYXRDZW50ZXIgKz0gdWludEJpdHNUb0Zsb2F0KHV2ZWMzKHNhbXBsZWRmbGFtZVBvcy5yZ2IpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBic0NvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZlYzIgZmxhbWVCU1RleHR1cmVVViA9IGdldEJTRmxhbWVEYXRhVVYoaSwgMSwgMCwgZmxhbWVNb2RlbFRleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgICAgIHV2ZWMzIHNhbXBsZWRCU1BvcyA9IHRleHR1cmUoZmxhbWVNb2RlbFRleHR1cmUsIGZsYW1lQlNUZXh0dXJlVVYpLnJnYjtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZCA9IGZsb2F0KGkgLyA0ICsgNSAqIDQpIC8gYm9uZVRleHR1cmVTaXplLng7Ly80XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGJvbmVUZXh0dXJlU2l6ZS55Oy8vMzJcclxuICAgICAgICAgICAgICAgIHNhbXBsZXJVVi54ID0gZnJhY3QoZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBic1dlaWdodCA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKGJvbmVUZXh0dXJlLCBzYW1wbGVyVVYpKTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHdlaWdodCA9IGJzV2VpZ2h0LnI7XHJcbiAgICAgICAgICAgICAgICBpZihpICUgNCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ID0gYnNXZWlnaHQuZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGkgJSA0ID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQgPSBic1dlaWdodC5iO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoaSAlIDQgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IGJzV2VpZ2h0LmE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSBzcGxhdENlbnRlciArIHdlaWdodCAqIHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQlNQb3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueCApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueSApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueiApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgudyApO1xyXG4gICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgbWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xyXG4gICAgICAgICAgICAgICAgc2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcclxuICAgICAgICAgICAgICAgIHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XHJcbiAgICAgICAgICAgICAgICBza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xyXG4gICAgICAgICAgICAgICAgLy8gc2tpbk1hdHJpeCA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XHJcbiAgICAgICAgICAgICNlbmRpZlxyXG4gICAgICAgICAgICB2ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyhzcGxhdENlbnRlci54eXopO1xyXG4gICAgICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgICAgICAvLyB2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCBza2luVmVydGV4ID0gdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYW4gb2Zmc2V0IGJldHdlZW4gdGhlIEdhdXNzaWFuIHBvaW50IGFuZCB0aGUgbWVzaCB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCB3aWxsIGNhdXNlIGRlZmVjdHMgaW4gdGhlIHNrZWxldGFsIGFuaW1hdGlvbiBkcml2aW5nIHRoZSBHYXVzc2lhbiBwb2ludC4gXHJcbiAgICAgICAgICAgICAgICAvL0luIG9yZGVyIHRvIGNpcmN1bXZlbnQgdGhpcyBwcm9ibGVtLCBvbmx5IHRoZSBoZWFkIGJvbmUoaW5kZXggaXMgMTEwIGN1cnJlbnRseSkgaXMgdXNlZCB0byBkcml2ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoZWFkQm9uZUluZGV4ID49IDAuMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXQgPSBnZXRCb25lTWF0cml4MCggaGVhZEJvbmVJbmRleCApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWQgKz0gYm9uZU1hdCAqIHNraW5WZXJ0ZXggKiAxLjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XHJcbiAgICAgICAgICAgICAgICAvLyBza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcclxuICAgICAgICAgICAgICAgIC8vIHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xyXG4gICAgICAgICAgICAgICAgLy8gc2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtZWQgPSAoIGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZCApLnh5ejtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gc2tpbm5lZC54eXo7XHJcblxyXG4gICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSB0cmFuc2Zvcm1lZC54eXo7XHJcblxyXG4gICAgICAgICAgICAjaWZkZWYgVVNFX0ZMQU1FXHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggMS4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggMi4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRXID0gZ2V0Qm9uZU1hdHJpeCggMy4wICk7ICAgXHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXQwID0gZ2V0Qm9uZU1hdHJpeCggNC4wICk7ICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZlYzIgYm9uZVdlaWdodFVWMCA9IGdldEJvbmVXZWlnaHRVVigyLCAwLCBib25lV2VpZ2h0VGV4dHVyZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBib25lV2VpZ2h0VVYxID0gZ2V0Qm9uZVdlaWdodFVWKDIsIDEsIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZEJvbmVNYXRyaXhWYWx1ZSA9IHRleHR1cmUoYm9uZVdlaWdodFRleHR1cmUsIGJvbmVXZWlnaHRVVjApO1xyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZEJvbmVNYXRyaXhWYWx1ZTAgPSB0ZXh0dXJlKGJvbmVXZWlnaHRUZXh0dXJlLCBib25lV2VpZ2h0VVYxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWM0IGJvbmVNYXRyaXhWYWx1ZSA9IHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQm9uZU1hdHJpeFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHZlYzQgYm9uZU1hdHJpeFZhbHVlMCA9IHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQm9uZU1hdHJpeFZhbHVlMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBza2luVmVydGV4ID0gdmVjNCggc3BsYXRDZW50ZXIsIDEuMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCBza2lubmVkID0gdmVjNCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBtaW5XZWlnaHQgPSBtaW4oYm9uZU1hdHJpeFZhbHVlLngsbWluKGJvbmVNYXRyaXhWYWx1ZS55LCBtaW4oYm9uZU1hdHJpeFZhbHVlLnosIG1pbihib25lTWF0cml4VmFsdWUudywgYm9uZU1hdHJpeFZhbHVlMC54KSkpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnggPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnggPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUueDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnkgPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnkgPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUueTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnogPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnogPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WiAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUuejtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLncgPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLncgPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUudztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlMC54ID4gMC4wICYmIGJvbmVNYXRyaXhWYWx1ZTAueCA+IG1pbldlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBza2lubmVkICs9IGJvbmVNYXQwICogc2tpblZlcnRleCAqIGJvbmVNYXRyaXhWYWx1ZTAueDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSBza2lubmVkLnh5ejtcclxuICAgICAgICAgICAgI2VuZGlmXHJcblxyXG4gICAgICAgICAgICB1aW50IHNjZW5lSW5kZXggPSB1aW50KDApO1xyXG4gICAgICAgICAgICBpZiAoc2NlbmVDb3VudCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHNjZW5lSW5kZXggPSB0ZXh0dXJlKHNjZW5lSW5kZXhlc1RleHR1cmUsIGdldERhdGFVVigxLCAwLCBzY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZSkpLnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgc3BsYXRPcGFjaXR5RnJvbVNjZW5lID0gc2NlbmVPcGFjaXR5W3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaW50IHNjZW5lVmlzaWJsZSA9IHNjZW5lVmlzaWJpbGl0eVtzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChzcGxhdE9wYWNpdHlGcm9tU2NlbmUgPD0gMC4wMSB8fCBzY2VuZVZpc2libGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMi4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkeW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgbWF0NCB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgbWF0NCB0cmFuc2Zvcm1Nb2RlbFZpZXdNYXRyaXggPSB2aWV3TWF0cml4ICogdHJhbnNmb3JtO1xyXG4gICAgICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCA9IHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCAqIHNraW5NYXRyaXg7XHJcbiAgICAgICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYG1hdDQgdHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4ID0gbW9kZWxWaWV3TWF0cml4O2A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICBmbG9hdCBzaDhCaXRDb21wcmVzc2lvblJhbmdlTWluRm9yU2NlbmUgPSBzcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZU1pbltzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgZmxvYXQgc2g4Qml0Q29tcHJlc3Npb25SYW5nZU1heEZvclNjZW5lID0gc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhbc2NlbmVJbmRleF07XHJcbiAgICAgICAgICAgIGZsb2F0IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSA9IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhGb3JTY2VuZSAtIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VNaW5Gb3JTY2VuZTtcclxuICAgICAgICAgICAgZmxvYXQgc2g4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2VGb3JTY2VuZSA9IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSAvIDIuMDtcclxuICAgICAgICAgICAgdmVjMyB2ZWM4Qml0U0hTaGlmdCA9IHZlYzMoc2g4Qml0Q29tcHJlc3Npb25SYW5nZU1pbkZvclNjZW5lKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzQgdmlld0NlbnRlciA9IHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCAqIHZlYzQoc3BsYXRDZW50ZXIsIDEuMCk7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IGNsaXBDZW50ZXIgPSBwcm9qZWN0aW9uTWF0cml4ICogdmlld0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IGNsaXAgPSAxLjIgKiBjbGlwQ2VudGVyLnc7XHJcbiAgICAgICAgICAgIGlmIChjbGlwQ2VudGVyLnogPCAtY2xpcCB8fCBjbGlwQ2VudGVyLnggPCAtY2xpcCB8fCBjbGlwQ2VudGVyLnggPiBjbGlwIHx8IGNsaXBDZW50ZXIueSA8IC1jbGlwIHx8IGNsaXBDZW50ZXIueSA+IGNsaXApIHtcclxuICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMi4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2ZWMzIG5kY0NlbnRlciA9IGNsaXBDZW50ZXIueHl6IC8gY2xpcENlbnRlci53O1xyXG5cclxuICAgICAgICAgICAgdlBvc2l0aW9uID0gcG9zaXRpb24ueHk7XHJcbiAgICAgICAgICAgIHZTcGxhdEluZGV4ID0gdmVjMihzcGxhdEluZGV4LCBzcGxhdEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHZDb2xvciA9IHVpbnRUb1JHQkFWZWMoc2FtcGxlZENlbnRlckNvbG9yLnIpO1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIFByb2NlZWQgdG8gc2FtcGxpbmcgYW5kIHJlbmRlcmluZyAxc3QgZGVncmVlIHNwaGVyaWNhbCBoYXJtb25pY3NcclxuICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgICAgXHJcbiAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzMgd29ybGRWaWV3RGlyID0gbm9ybWFsaXplKHNwbGF0Q2VudGVyIC0gdmVjMyhpbnZlcnNlKHRyYW5zZm9ybSkgKiB2ZWM0KGNhbWVyYVBvc2l0aW9uLCAxLjApKSk7XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICB2ZWMzIHdvcmxkVmlld0RpciA9IG5vcm1hbGl6ZShzcGxhdENlbnRlciAtIGNhbWVyYVBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICB2ZWMzIHNoMTtcclxuICAgICAgICAgICAgICAgIHZlYzMgc2gyO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBzaDM7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDY7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDg7XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmluZyBob3cgdG8gc2FtcGxlIHNwaGVyaWNhbCBoYXJtb25pY3MgdGV4dHVyZXMgdG8gZ2V0IHRoZSBjb2VmZmljaWVudHMgZm9yIGNhbGN1bGF0aW9ucyBmb3IgYSBnaXZlbiBkZWdyZWVcclxuICAgICAgICAgICAgLy8gZGVwZW5kcyBvbiBob3cgbWFueSB0b3RhbCBkZWdyZWVzIChtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIGFyZSBwcmVzZW50IGluIHRoZSB0ZXh0dXJlcy4gVGhpcyBpcyBiZWNhdXNlIHRoYXRcclxuICAgICAgICAgICAgLy8gbnVtYmVyIGFmZmVjdHMgaG93IHRoZXkgYXJlIHBhY2tlZCBpbiB0aGUgdGV4dHVyZXMsIGFuZCB0aGVyZWZvcmUgdGhlIG9mZnNldCAmIHN0cmlkZSByZXF1aXJlZCB0byBhY2Nlc3MgdGhlbS5cclxuXHJcbiAgICAgICAgICAgIC8vIFNhbXBsZSBzcGhlcmljYWwgaGFybW9uaWNzIHRleHR1cmVzIHdpdGggMSBkZWdyZWUgd29ydGggb2YgZGF0YSBmb3IgMXN0IGRlZ3JlZSBjYWxjdWxhdGlvbnMsIGFuZCBzdG9yZSBpbiBzaDEsIHNoMiwgYW5kIHNoM1xyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NNdWx0aVRleHR1cmVNb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzaFVWID0gZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAyLjUsIGRvdWJsZU9kZE9mZnNldCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDAxMjMgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIHNoVVYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaFVWID0gZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAyLjUsIGRvdWJsZU9kZE9mZnNldCArIHVpbnQoMSksIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0g0NTY3ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBzaFVWKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hVViA9IGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMi41LCBkb3VibGVPZGRPZmZzZXQgKyB1aW50KDIpLCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIODkxMDExID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBzaFVWKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMTIzLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgKyB2ZWMzKHNhbXBsZWRTSDAxMjMuYmEsIHNhbXBsZWRTSDQ1NjcucikgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDIgPSB2ZWMzKHNhbXBsZWRTSDAxMjMuYSwgc2FtcGxlZFNINDU2Ny5yZykgKiAoMS4wIC0gZk9kZE9mZnNldCkgKyB2ZWMzKHNhbXBsZWRTSDQ1NjcuZ2JhKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHZlYzMoc2FtcGxlZFNINDU2Ny5iYSwgc2FtcGxlZFNIODkxMDExLnIpICogKDEuMCAtIGZPZGRPZmZzZXQpICsgdmVjMyhzYW1wbGVkU0g4OTEwMTEucmdiKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMVIgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMUcgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMUIgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMVIucmcsIHNhbXBsZWRTSDIzUi5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gyID0gdmVjMyhzYW1wbGVkU0gwMUcucmcsIHNhbXBsZWRTSDIzRy5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gzID0gdmVjMyhzYW1wbGVkU0gwMUIucmcsIHNhbXBsZWRTSDIzQi5yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAvLyBTYW1wbGUgc3BoZXJpY2FsIGhhcm1vbmljcyB0ZXh0dXJlcyB3aXRoIDIgZGVncmVlcyB3b3J0aCBvZiBkYXRhIGZvciAxc3QgZGVncmVlIGNhbGN1bGF0aW9ucywgYW5kIHN0b3JlIGluIHNoMSwgc2gyLCBhbmQgc2gzXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMDEyMztcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDQ1Njc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0g4OTEwMTE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMDEyM1I7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0gwMTIzRztcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDAxMjNCO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZWRTSDAxMjMgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIGdldERhdGFVVig2LCAwLCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVkU0g0NTY3ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIODkxMDExID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMiwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gc2FtcGxlZFNIMDEyMy5yZ2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMiA9IHZlYzMoc2FtcGxlZFNIMDEyMy5hLCBzYW1wbGVkU0g0NTY3LnJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gzID0gdmVjMyhzYW1wbGVkU0g0NTY3LmJhLCBzYW1wbGVkU0g4OTEwMTEucik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMTIzUi5yZ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDIgPSB2ZWMzKHNhbXBsZWRTSDAxMjNHLnJnYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHZlYzMoc2FtcGxlZFNIMDEyM0IucmdiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQZXJmb3JtIDFzdCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljcyBjYWxjdWxhdGlvbnNcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDEgPSBzaDEgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gyID0gc2gyICogc2g4Qml0Q29tcHJlc3Npb25SYW5nZUZvclNjZW5lICsgdmVjOEJpdFNIU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHNoMyAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCB4ID0gd29ybGRWaWV3RGlyLng7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgeSA9IHdvcmxkVmlld0Rpci55O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHogPSB3b3JsZFZpZXdEaXIuejtcclxuICAgICAgICAgICAgICAgICAgICB2Q29sb3IucmdiICs9IFNIX0MxICogKC1zaDEgKiB5ICsgc2gyICogeiAtIHNoMyAqIHgpO1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvY2VlZCB0byBzYW1wbGluZyBhbmQgcmVuZGVyaW5nIDJuZCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljc1xyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eCA9IHggKiB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB5eSA9IHkgKiB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB6eiA9IHogKiB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eSA9IHggKiB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB5eiA9IHkgKiB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eiA9IHggKiB6O1xyXG4gICAgICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTYW1wbGUgc3BoZXJpY2FsIGhhcm1vbmljcyB0ZXh0dXJlcyB3aXRoIDIgZGVncmVlcyB3b3J0aCBvZiBkYXRhIGZvciAybmQgZGVncmVlIGNhbGN1bGF0aW9ucyxcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBzdG9yZSBpbiBzaDQsIHNoNSwgc2g2LCBzaDcsIGFuZCBzaDhcclxuICAgICAgICAgICAgICAgIGlmIChtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDEyMTMxNDE1ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMywgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMTYxNzE4MTkgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIGdldERhdGFVVig2LCA0LCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0gyMDIxMjIyMyA9IHRleHR1cmUoc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZSwgZ2V0RGF0YVVWKDYsIDUsIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDQgPSBzYW1wbGVkU0g4OTEwMTEuZ2JhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g1ID0gc2FtcGxlZFNIMTIxMzE0MTUucmdiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2ID0gdmVjMyhzYW1wbGVkU0gxMjEzMTQxNS5hLCBzYW1wbGVkU0gxNjE3MTgxOS5yZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSB2ZWMzKHNhbXBsZWRTSDE2MTcxODE5LmJhLCBzYW1wbGVkU0gyMDIxMjIyMy5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoOCA9IHNhbXBsZWRTSDIwMjEyMjIzLmdiYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNCA9IHZlYzMoc2FtcGxlZFNIMDEyM1IuYSwgc2FtcGxlZFNINDU2N1IucmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g1ID0gdmVjMyhzYW1wbGVkU0g0NTY3Ui5iYSwgc2FtcGxlZFNIMDEyM0cuYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDYgPSB2ZWMzKHNhbXBsZWRTSDQ1NjdHLnJnYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSB2ZWMzKHNhbXBsZWRTSDQ1NjdHLmEsIHNhbXBsZWRTSDAxMjNCLmEsIHNhbXBsZWRTSDQ1NjdCLnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g4ID0gdmVjMyhzYW1wbGVkU0g0NTY3Qi5nYmEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIDJuZCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljcyBjYWxjdWxhdGlvbnNcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDQgPSBzaDQgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNSA9IHNoNSAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2ID0gc2g2ICogc2g4Qml0Q29tcHJlc3Npb25SYW5nZUZvclNjZW5lICsgdmVjOEJpdFNIU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSBzaDcgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoOCA9IHNoOCAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2Q29sb3IucmdiICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU0hfQzJbMF0gKiB4eSkgKiBzaDQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNIX0MyWzFdICogeXopICogc2g1ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTSF9DMlsyXSAqICgyLjAgKiB6eiAtIHh4IC0geXkpKSAqIHNoNiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU0hfQzJbM10gKiB4eikgKiBzaDcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNIX0MyWzRdICogKHh4IC0geXkpKSAqIHNoODtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG5cclxuICAgICAgICAgICAgICAgIHZDb2xvci5yZ2IgPSBjbGFtcCh2Q29sb3IucmdiLCB2ZWMzKDAuKSwgdmVjMygxLikpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFZlcnRleFNoYWRlckZhZGVJbigpIHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICBpZiAoZmFkZUluQ29tcGxldGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgb3BhY2l0eUFkanVzdCA9IDEuMDtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGNlbnRlckRpc3QgPSBsZW5ndGgoc3BsYXRDZW50ZXIgLSBzY2VuZUNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByZW5kZXJUaW1lID0gbWF4KGN1cnJlbnRUaW1lIC0gZmlyc3RSZW5kZXJUaW1lLCAwLjApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IGZhZGVEaXN0YW5jZSA9IDAuNzU7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBkaXN0YW5jZUxvYWRGYWRlSW5GYWN0b3IgPSBzdGVwKHZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMsIGNlbnRlckRpc3QpO1xyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VMb2FkRmFkZUluRmFjdG9yID0gKDEuMCAtIGRpc3RhbmNlTG9hZEZhZGVJbkZhY3RvcikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDEuMCAtIGNsYW1wKChjZW50ZXJEaXN0IC0gdmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cykgLyBmYWRlRGlzdGFuY2UsIDAuMCwgMS4wKSkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VMb2FkRmFkZUluRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eUFkanVzdCAqPSBkaXN0YW5jZUxvYWRGYWRlSW5GYWN0b3I7XHJcbiAgICAgICAgICAgICAgICB2Q29sb3IuYSAqPSBvcGFjaXR5QWRqdXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUgPSBmYWxzZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRTY2FsZSA9IDEuMCwgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICdzY2VuZUNlbnRlcic6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YzJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IzKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhZGVJbkNvbXBsZXRlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdvcnRob2dyYXBoaWNNb2RlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICd2aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3Zpc2libGVSZWdpb25SYWRpdXMnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYmluZE1hdHJpeCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ200JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBNYXRyaXg0KClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JpbmRNYXRyaXhJbnZlcnNlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnbTQnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IE1hdHJpeDQoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY3VycmVudFRpbWUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmlyc3RSZW5kZXJUaW1lJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2NlbnRlcnNDb2xvcnNUZXh0dXJlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmbGFtZU1vZGVsVGV4dHVyZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYm9uZVRleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JvbmVUZXh0dXJlMCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYm9uZVdlaWdodFRleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlRyc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUInOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBbXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXgnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IFtdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmb2NhbCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ29ydGhvWm9vbSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMS4wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdpbnZlcnNlRm9jYWxBZGp1c3RtZW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3ZpZXdwb3J0Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndjInLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYmFzaXNWaWV3cG9ydCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2RlYnVnQ29sb3InOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MycsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgQ29sb3IoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY2VudGVyc0NvbG9yc1RleHR1cmVTaXplJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndjInLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZsYW1lTW9kZWxUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDQwOTYsIDIwNDgpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdib25lVGV4dHVyZVNpemUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgVmVjdG9yMig0LCAzMilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JvbmVXZWlnaHRUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDUxMiwgNTEyKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BsYXRTY2FsZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogc3BsYXRTY2FsZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncG9pbnRDbG91ZE1vZGVFbmFibGVkJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBwb2ludENsb3VkTW9kZUVuYWJsZWQgPyAxIDogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzVGV4dHVyZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzVGV4dHVyZVNpemUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgVmVjdG9yMigxMDI0LCAxMDI0KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVDb3VudCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZ2F1c3NpYW5TcGxhdENvdW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdic0NvdW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdoZWFkQm9uZUluZGV4Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAtMS4wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdleWVCbGlua0xlZnQnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZXllQmxpbmtSaWdodCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMC4wXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluLnZhbHVlLnB1c2goLUNvbnN0YW50cy5TcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSAvIDIuMCk7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWF4LnZhbHVlLnB1c2goQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlIC8gMi4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmVPcGFjaXR5ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzY2VuZU9wYWNpdHkucHVzaCgxLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaWZvcm1zWydzY2VuZU9wYWNpdHknXSA9e1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBzY2VuZU9wYWNpdHlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lVmlzaWJpbGl0eSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENvbnN0YW50cy5NYXhTY2VuZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc2NlbmVWaXNpYmlsaXR5LnB1c2goMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdW5pZm9ybXNbJ3NjZW5lVmlzaWJpbGl0eSddID17XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdpJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNjZW5lVmlzaWJpbGl0eVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybU1hdHJpY2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1NYXRyaWNlcy5wdXNoKG5ldyBNYXRyaXg0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaWZvcm1zWyd0cmFuc2Zvcm1zJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdtYXQ0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHRyYW5zZm9ybU1hdHJpY2VzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5pZm9ybXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBTcGxhdE1hdGVyaWFsM0Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgdGhlIFRocmVlLmpzIG1hdGVyaWFsIHRoYXQgaXMgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkeW5hbWljTW9kZSBJZiB0cnVlLCBpdCBtZWFucyB0aGUgc2NlbmUgZ2VvbWV0cnkgcmVwcmVzZW50ZWQgYnkgdGhpcyBzcGxhdCBtZXNoIGlzIG5vdCBzdGF0aW9uYXJ5IG9yXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgc3BsYXQgY291bnQgbWlnaHQgY2hhbmdlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZU9wdGlvbmFsRWZmZWN0cyBXaGVuIHRydWUsIGFsbG93cyBmb3IgdXNhZ2Ugb2YgZXh0cmEgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBpbiB0aGUgc2hhZGVyIGZvciBlZmZlY3RzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNoIGFzIG9wYWNpdHkgYWRqdXN0bWVudC4gRGVmYXVsdCBpcyBmYWxzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYW50aWFsaWFzZWQgSWYgdHJ1ZSwgY2FsY3VsYXRlIGNvbXBlbnNhdGlvbiBmYWN0b3IgdG8gZGVhbCB3aXRoIGdhdXNzaWFucyBiZWluZyByZW5kZXJlZCBhdCBhIHNpZ25pZmljYW50bHlcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW50IHJlc29sdXRpb24gdGhhbiB0aGF0IG9mIHRoZWlyIHRyYWluaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgVGhlIG1heGltdW0gY2xpcCBzcGFjZSBzcGxhdCBzaXplXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3BsYXRTY2FsZSBWYWx1ZSBieSB3aGljaCBhbGwgc3BsYXRzIGFyZSBzY2FsZWQgaW4gc2NyZWVuLXNwYWNlIChkZWZhdWx0IGlzIDEuMClcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludENsb3VkTW9kZUVuYWJsZWQgUmVuZGVyIGFsbCBzcGxhdHMgYXMgc2NyZWVuLXNwYWNlIGNpcmNsZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgRGVncmVlIG9mIHNwaGVyaWNhbCBoYXJtb25pY3MgdG8gdXRpbGl6ZSBpbiByZW5kZXJpbmcgc3BsYXRzXHJcbiAgICAgKiBAcmV0dXJuIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ1aWxkKGR5bmFtaWNNb2RlID0gZmFsc2UsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGZhbHNlLCBhbnRpYWxpYXNlZCA9IGZhbHNlLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSA9IDIwNDgsXHJcbiAgICAgICAgICAgICAgICAgc3BsYXRTY2FsZSA9IDEuMCwgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsIGtlcm5lbDJEU2l6ZSA9IDAuMykge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21WZXJ0ZXhWYXJzID0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzIgY292YXJpYW5jZXNUZXh0dXJlU2l6ZTtcclxuICAgICAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgY292YXJpYW5jZXNUZXh0dXJlO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIHVzYW1wbGVyMkQgY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICB1bmlmb3JtIGludCBjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdDtcclxuXHJcbiAgICAgICAgICAgIHZvaWQgZnJvbUNvdmFyaWFuY2VIYWxmRmxvYXRWNCh1dmVjNCB2YWwsIG91dCB2ZWM0IGZpcnN0LCBvdXQgdmVjNCBzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgIHZlYzIgciA9IHVucGFja0hhbGYyeDE2KHZhbC5yKTtcclxuICAgICAgICAgICAgICAgIHZlYzIgZyA9IHVucGFja0hhbGYyeDE2KHZhbC5nKTtcclxuICAgICAgICAgICAgICAgIHZlYzIgYiA9IHVucGFja0hhbGYyeDE2KHZhbC5iKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaXJzdCA9IHZlYzQoci54LCByLnksIGcueCwgZy55KTtcclxuICAgICAgICAgICAgICAgIHNlY29uZCA9IHZlYzQoYi54LCBiLnksIDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsLmJ1aWxkVmVydGV4U2hhZGVyQmFzZShkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKGFudGlhbGlhc2VkLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIGtlcm5lbDJEU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRGcmFnbWVudFNoYWRlcigpO1xyXG5cclxuICAgICAgICBjb25zdCB1bmlmb3JtcyA9IFNwbGF0TWF0ZXJpYWwuZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzcGxhdFNjYWxlLCBwb2ludENsb3VkTW9kZUVuYWJsZWQpO1xyXG5cclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlU2l6ZSddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0J10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNBcmVIYWxmRmxvYXQnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB1bmlmb3JtcyxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJTb3VyY2UsXHJcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFscGhhVGVzdDogMS4wLFxyXG4gICAgICAgICAgICBibGVuZGluZzogTm9ybWFsQmxlbmRpbmcsXHJcbiAgICAgICAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oYW50aWFsaWFzZWQsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cywgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIGtlcm5lbDJEU2l6ZSkge1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBgXHJcblxyXG4gICAgICAgICAgICB2ZWM0IHNhbXBsZWRDb3ZhcmlhbmNlQTtcclxuICAgICAgICAgICAgdmVjNCBzYW1wbGVkQ292YXJpYW5jZUI7XHJcbiAgICAgICAgICAgIHZlYzMgY292M0RfTTExX00xMl9NMTM7XHJcbiAgICAgICAgICAgIHZlYzMgY292M0RfTTIyX00yM19NMzM7XHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVkQ292YXJpYW5jZUEgPSB0ZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZSwgZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAxLjUsIG9kZE9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgIHNhbXBsZWRDb3ZhcmlhbmNlQiA9IHRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSwgb2RkT2Zmc2V0ICsgdWludCgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMyA9IHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5iYSwgc2FtcGxlZENvdmFyaWFuY2VCLnIpICogZk9kZE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGNvdjNEX00yMl9NMjNfTTMzID0gdmVjMyhzYW1wbGVkQ292YXJpYW5jZUEuYSwgc2FtcGxlZENvdmFyaWFuY2VCLnJnKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2FtcGxlZENvdmFyaWFuY2VCLmdiYSkgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZENvdmFyaWFuY2VVID0gdGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQsIGdldERhdGFVVigxLCAwLCBjb3ZhcmlhbmNlc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgICAgICBmcm9tQ292YXJpYW5jZUhhbGZGbG9hdFY0KHNhbXBsZWRDb3ZhcmlhbmNlVSwgc2FtcGxlZENvdmFyaWFuY2VBLCBzYW1wbGVkQ292YXJpYW5jZUIpO1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMgPSBzYW1wbGVkQ292YXJpYW5jZUEucmdiO1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTIyX00yM19NMzMgPSB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5hLCBzYW1wbGVkQ292YXJpYW5jZUIucmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgM0QgY292YXJpYW5jZSBtYXRyaXhcclxuICAgICAgICAgICAgbWF0MyBWcmsgPSBtYXQzKFxyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMueCwgY292M0RfTTExX00xMl9NMTMueSwgY292M0RfTTExX00xMl9NMTMueixcclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzLnksIGNvdjNEX00yMl9NMjNfTTMzLngsIGNvdjNEX00yMl9NMjNfTTMzLnksXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMy56LCBjb3YzRF9NMjJfTTIzX00zMy55LCBjb3YzRF9NMjJfTTIzX00zMy56XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBtYXQzIEo7XHJcbiAgICAgICAgICAgIGlmIChvcnRob2dyYXBoaWNNb2RlID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBwcm9qZWN0aW9uIGlzIGxpbmVhciwgd2UgZG9uJ3QgbmVlZCBhbiBhcHByb3hpbWF0aW9uXHJcbiAgICAgICAgICAgICAgICBKID0gdHJhbnNwb3NlKG1hdDMob3J0aG9ab29tLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjAsIG9ydGhvWm9vbSwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgMC4wLCAwLjApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgSmFjb2JpYW4gb2YgdGhlIGFmZmluZSBhcHByb3hpbWF0aW9uIG9mIHRoZSBwcm9qZWN0aW9uIG1hdHJpeC4gSXQgd2lsbCBiZSB1c2VkIHRvIHRyYW5zZm9ybSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIDNEIGNvdmFyaWFuY2UgbWF0cml4IGluc3RlYWQgb2YgdXNpbmcgdGhlIGFjdHVhbCBwcm9qZWN0aW9uIG1hdHJpeCBiZWNhdXNlIHRoYXQgdHJhbnNmb3JtYXRpb24gd291bGRcclxuICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUgYSBub24tbGluZWFyIGNvbXBvbmVudCAocGVyc3BlY3RpdmUgZGl2aXNpb24pIHdoaWNoIHdvdWxkIHlpZWxkIGEgbm9uLWdhdXNzaWFuIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHMgPSAxLjAgLyAodmlld0NlbnRlci56ICogdmlld0NlbnRlci56KTtcclxuICAgICAgICAgICAgICAgIEogPSBtYXQzKFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY2FsLnggLyB2aWV3Q2VudGVyLnosIDAuLCAtKGZvY2FsLnggKiB2aWV3Q2VudGVyLngpICogcyxcclxuICAgICAgICAgICAgICAgICAgICAwLiwgZm9jYWwueSAvIHZpZXdDZW50ZXIueiwgLShmb2NhbC55ICogdmlld0NlbnRlci55KSAqIHMsXHJcbiAgICAgICAgICAgICAgICAgICAgMC4sIDAuLCAwLlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ29uY2F0ZW5hdGUgdGhlIHByb2plY3Rpb24gYXBwcm94aW1hdGlvbiB3aXRoIHRoZSBtb2RlbC12aWV3IHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIG1hdDMgVyA9IHRyYW5zcG9zZShtYXQzKHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCkpO1xyXG4gICAgICAgICAgICBtYXQzIFQgPSBXICogSjtcclxuXHJcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgM0QgY292YXJpYW5jZSBtYXRyaXggKFZyaykgdG8gY29tcHV0ZSB0aGUgMkQgY292YXJpYW5jZSBtYXRyaXhcclxuICAgICAgICAgICAgbWF0MyBjb3YyRG0gPSB0cmFuc3Bvc2UoVCkgKiBWcmsgKiBUO1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICBpZiAoYW50aWFsaWFzZWQpIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRldE9yaWcgPSBjb3YyRG1bMF1bMF0gKiBjb3YyRG1bMV1bMV0gLSBjb3YyRG1bMF1bMV0gKiBjb3YyRG1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMF1bMF0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgY292MkRtWzFdWzFdICs9ICR7a2VybmVsMkRTaXplfTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRldEJsdXIgPSBjb3YyRG1bMF1bMF0gKiBjb3YyRG1bMV1bMV0gLSBjb3YyRG1bMF1bMV0gKiBjb3YyRG1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICB2Q29sb3IuYSAqPSBzcXJ0KG1heChkZXRPcmlnIC8gZGV0Qmx1ciwgMC4wKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodkNvbG9yLmEgPCBtaW5BbHBoYSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMF1bMF0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgY292MkRtWzFdWzFdICs9ICR7a2VybmVsMkRTaXplfTtcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcblxyXG4gICAgICAgICAgICAvLyBXZSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgdXBwZXItbGVmdCAyeDIgcG9ydGlvbiBvZiB0aGUgcHJvamVjdGVkIDNEIGNvdmFyaWFuY2UgbWF0cml4IGJlY2F1c2VcclxuICAgICAgICAgICAgLy8gd2Ugb25seSBjYXJlIGFib3V0IHRoZSBYIGFuZCBZIHZhbHVlcy4gV2Ugd2FudCB0aGUgWC1kaWFnb25hbCwgY292MkRtWzBdWzBdLFxyXG4gICAgICAgICAgICAvLyB0aGUgWS1kaWFnb25hbCwgY292MkRtWzFdWzFdLCBhbmQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHR3byBjb3YyRG1bMF1bMV0uIFdlIGRvbid0XHJcbiAgICAgICAgICAgIC8vIG5lZWQgY292MkRtWzFdWzBdIGJlY2F1c2UgaXQgaXMgYSBzeW1ldHJpYyBtYXRyaXguXHJcbiAgICAgICAgICAgIHZlYzMgY292MkR2ID0gdmVjMyhjb3YyRG1bMF1bMF0sIGNvdjJEbVswXVsxXSwgY292MkRtWzFdWzFdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIG5vdyBuZWVkIHRvIHNvbHZlIGZvciB0aGUgZWlnZW4tdmFsdWVzIGFuZCBlaWdlbiB2ZWN0b3JzIG9mIHRoZSAyRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgdGhlIDJEIGJhc2lzIGZvciB0aGUgc3BsYXQuIFRoaXMgaXMgZG9uZSB1c2luZyB0aGUgbWV0aG9kIGRlc2NyaWJlZFxyXG4gICAgICAgICAgICAvLyBoZXJlOiBodHRwczovL3Blb3BsZS5tYXRoLmhhcnZhcmQuZWR1L35rbmlsbC90ZWFjaGluZy9tYXRoMjFiMjAwNC9leGhpYml0cy8yZG1hdHJpY2VzL2luZGV4Lmh0bWxcclxuICAgICAgICAgICAgLy8gQWZ0ZXIgY2FsY3VsYXRpbmcgdGhlIGVpZ2VuLXZhbHVlcyBhbmQgZWlnZW4tdmVjdG9ycywgd2UgY2FsY3VsYXRlIHRoZSBiYXNpcyBmb3IgcmVuZGVyaW5nIHRoZSBzcGxhdFxyXG4gICAgICAgICAgICAvLyBieSBub3JtYWxpemluZyB0aGUgZWlnZW4tdmVjdG9ycyBhbmQgdGhlbiBtdWx0aXBseWluZyB0aGVtIGJ5IChzcXJ0KDgpICogc3FydChlaWdlbi12YWx1ZSkpLCB3aGljaCBpc1xyXG4gICAgICAgICAgICAvLyBlcXVhbCB0byBzY2FsaW5nIHRoZW0gYnkgc3FydCg4KSBzdGFuZGFyZCBkZXZpYXRpb25zLlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGlmZmVyZW50IGFwcHJvYWNoIHRoYW4gaW4gdGhlIG9yaWdpbmFsIHdvcmsgYXQgSU5SSUEuIEluIHRoYXQgd29yayB0aGV5IGNvbXB1dGUgdGhlXHJcbiAgICAgICAgICAgIC8vIG1heCBleHRlbnRzIG9mIHRoZSBwcm9qZWN0ZWQgc3BsYXQgaW4gc2NyZWVuIHNwYWNlIHRvIGZvcm0gYSBzY3JlZW4tc3BhY2UgYWxpZ25lZCBib3VuZGluZyByZWN0YW5nbGVcclxuICAgICAgICAgICAgLy8gd2hpY2ggZm9ybXMgdGhlIGdlb21ldHJ5IHRoYXQgaXMgYWN0dWFsbHkgcmFzdGVyaXplZC4gVGhlIGRpbWVuc2lvbnMgb2YgdGhhdCBib3VuZGluZyBib3ggYXJlIDMuMFxyXG4gICAgICAgICAgICAvLyB0aW1lcyB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIG1heGltdW0gZWlnZW4tdmFsdWUsIG9yIDMgc3RhbmRhcmQgZGV2aWF0aW9ucy4gVGhleSB0aGVuIHVzZSB0aGUgaW52ZXJzZVxyXG4gICAgICAgICAgICAvLyAyRCBjb3ZhcmlhbmNlIG1hdHJpeCAoY2FsbGVkICdjb25pYycpIGluIHRoZSBDVURBIHJlbmRlcmluZyB0aHJlYWQgdG8gZGV0ZXJtaW5lIGZyYWdtZW50IG9wYWNpdHkgYnlcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgdGhlIGZ1bGwgZ2F1c3NpYW46IGV4cCgtMC41ICogKFggLSBtZWFuKSAqIGNvbmljICogKFggLSBtZWFuKSkgKiBzcGxhdCBvcGFjaXR5XHJcbiAgICAgICAgICAgIGZsb2F0IGEgPSBjb3YyRHYueDtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IGNvdjJEdi56O1xyXG4gICAgICAgICAgICBmbG9hdCBiID0gY292MkR2Lnk7XHJcbiAgICAgICAgICAgIGZsb2F0IEQgPSBhICogZCAtIGIgKiBiO1xyXG4gICAgICAgICAgICBmbG9hdCB0cmFjZSA9IGEgKyBkO1xyXG4gICAgICAgICAgICBmbG9hdCB0cmFjZU92ZXIyID0gMC41ICogdHJhY2U7XHJcbiAgICAgICAgICAgIGZsb2F0IHRlcm0yID0gc3FydChtYXgoMC4xZiwgdHJhY2VPdmVyMiAqIHRyYWNlT3ZlcjIgLSBEKSk7XHJcbiAgICAgICAgICAgIGZsb2F0IGVpZ2VuVmFsdWUxID0gdHJhY2VPdmVyMiArIHRlcm0yO1xyXG4gICAgICAgICAgICBmbG9hdCBlaWdlblZhbHVlMiA9IHRyYWNlT3ZlcjIgLSB0ZXJtMjtcclxuXHJcbiAgICAgICAgICAgIGlmIChwb2ludENsb3VkTW9kZUVuYWJsZWQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgZWlnZW5WYWx1ZTEgPSBlaWdlblZhbHVlMiA9IDAuMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVpZ2VuVmFsdWUyIDw9IDAuMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBlaWdlblZlY3RvcjEgPSBub3JtYWxpemUodmVjMihiLCBlaWdlblZhbHVlMSAtIGEpKTtcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGVpZ2VuIHZlY3RvcnMgYXJlIG9ydGhvZ29uYWwsIHdlIGRlcml2ZSB0aGUgc2Vjb25kIG9uZSBmcm9tIHRoZSBmaXJzdFxyXG4gICAgICAgICAgICB2ZWMyIGVpZ2VuVmVjdG9yMiA9IHZlYzIoZWlnZW5WZWN0b3IxLnksIC1laWdlblZlY3RvcjEueCk7XHJcblxyXG4gICAgICAgICAgICAvLyBXZSB1c2Ugc3FydCg4KSBzdGFuZGFyZCBkZXZpYXRpb25zIGluc3RlYWQgb2YgMyB0byBlbGltaW5hdGUgbW9yZSBvZiB0aGUgc3BsYXQgd2l0aCBhIHZlcnkgbG93IG9wYWNpdHkuXHJcbiAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IxID0gZWlnZW5WZWN0b3IxICogc3BsYXRTY2FsZSAqIG1pbihzcXJ0OCAqIHNxcnQoZWlnZW5WYWx1ZTEpLCAke3BhcnNlSW50KG1heFNjcmVlblNwYWNlU3BsYXRTaXplKX0uMCk7XHJcbiAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IyID0gZWlnZW5WZWN0b3IyICogc3BsYXRTY2FsZSAqIG1pbihzcXJ0OCAqIHNxcnQoZWlnZW5WYWx1ZTIpLCAke3BhcnNlSW50KG1heFNjcmVlblNwYWNlU3BsYXRTaXplKX0uMCk7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIHZDb2xvci5hICo9IHNwbGF0T3BhY2l0eUZyb21TY2VuZTtcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgIHZlYzIgbmRjT2Zmc2V0ID0gdmVjMih2UG9zaXRpb24ueCAqIGJhc2lzVmVjdG9yMSArIHZQb3NpdGlvbi55ICogYmFzaXNWZWN0b3IyKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzaXNWaWV3cG9ydCAqIDIuMCAqIGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IHF1YWRQb3MgPSB2ZWM0KG5kY0NlbnRlci54eSArIG5kY09mZnNldCwgbmRjQ2VudGVyLnosIDEuMCk7XHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcXVhZFBvcztcclxuXHJcbiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSBwb3NpdGlvbiBkYXRhIHdlIHNlbmQgdG8gdGhlIGZyYWdtZW50IHNoYWRlclxyXG4gICAgICAgICAgICB2UG9zaXRpb24gKj0gc3FydDg7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IFNwbGF0TWF0ZXJpYWwuZ2V0VmVydGV4U2hhZGVyRmFkZUluKCk7XHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGB9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRleFNoYWRlclNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYnVpbGRGcmFnbWVudFNoYWRlcigpIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBgXHJcbiAgICAgICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAgICAgI2luY2x1ZGUgPGNvbW1vbj5cclxuIFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgZGVidWdDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2VXY7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2U3BsYXRJbmRleDtcclxuXHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb25hbCBzcXVhcmVkIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgc3BsYXQgdG8gdGhlIGN1cnJlbnQgZnJhZ21lbnQuXHJcbiAgICAgICAgICAgICAgICBmbG9hdCBBID0gZG90KHZQb3NpdGlvbiwgdlBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBwb3NpdGlvbmFsIGRhdGEgaW4gdlBvc2l0aW9uIGhhcyBiZWVuIHNjYWxlZCBieSBzcXJ0KDgpLCB0aGUgc3F1YXJlZCByZXN1bHQgd2lsbCBiZVxyXG4gICAgICAgICAgICAgICAgLy8gc2NhbGVkIGJ5IGEgZmFjdG9yIG9mIDguIElmIHRoZSBzcXVhcmVkIHJlc3VsdCBpcyBsYXJnZXIgdGhhbiA4LCBpdCBtZWFucyBpdCBpcyBvdXRzaWRlIHRoZSBlbGxpcHNlXHJcbiAgICAgICAgICAgICAgICAvLyBkZWZpbmVkIGJ5IHRoZSByZWN0YW5nbGUgZm9ybWVkIGJ5IHZQb3NpdGlvbi4gSXQgYWxzbyBtZWFucyBpdCdzIGZhcnRoZXJcclxuICAgICAgICAgICAgICAgIC8vIGF3YXkgdGhhbiBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVhbi5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZih2U3BsYXRJbmRleC54ID4gMjAwMDAuMCkgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIC8vIGlmIChBID4gOC4wKSBkaXNjYXJkO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBjb2xvciA9IHZDb2xvci5yZ2I7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhlIHJlbmRlcmVkIHNwbGF0IGlzIHNjYWxlZCBieSBzcXJ0KDgpLCB0aGUgaW52ZXJzZSBjb3ZhcmlhbmNlIG1hdHJpeCB0aGF0IGlzIHBhcnQgb2ZcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBnYXVzc2lhbiBmb3JtdWxhIGJlY29tZXMgdGhlIGlkZW50aXR5IG1hdHJpeC4gV2UncmUgdGhlbiBsZWZ0IHdpdGggKFggLSBtZWFuKSAqIChYIC0gbWVhbiksXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2luY2UgJ21lYW4nIGlzIHplcm8sIHdlIGhhdmUgWCAqIFgsIHdoaWNoIGlzIHRoZSBzYW1lIGFzIEE6XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBvcGFjaXR5ID0gZXhwKCAtMC41KkEpICogdkNvbG9yLmE7XHJcbiAgICAgICAgICAgICAgICBpZihvcGFjaXR5IDwgMS4wIC8gMjU1LjApXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1aW50IGEgPSB1aW50KDI1NSk7XHJcbiAgICAgICAgICAgICAgICAvLyB2ZWMzIGMgPSB2ZWMzKHZTcGxhdEluZGV4LnggLyAyNTYuMCAvIDI1Ni4wLCBmbG9hdCh1aW50KHZTcGxhdEluZGV4LnggLyAyNTYuMCApJSBhKSAvIDI1Ni4wLCBmbG9hdCh1aW50KHZTcGxhdEluZGV4LngpJSBhKSAvIDI1Ni4wKTtcclxuICAgICAgICAgICAgICAgIC8vIGdsX0ZyYWdDb2xvciA9IHZlYzQoYywgMS4wKTtcclxuICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIG9wYWNpdHkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0TWF0ZXJpYWwzRFxyXG4gKiBcclxuICogQmFzZWQgb24gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIE1vZGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBFeHRlbmRlZCB2ZXJ0ZXggc2hhZGVyIGZvciBGTEFNRSBpbnRlZ3JhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERvdWJsZVNpZGUsIE5vcm1hbEJsZW5kaW5nLCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMiB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgU3BsYXRNYXRlcmlhbCB9IGZyb20gJy4vU3BsYXRNYXRlcmlhbC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRNYXRlcmlhbDNEIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBUaHJlZS5qcyBtYXRlcmlhbCB0aGF0IGlzIHVzZWQgdG8gcmVuZGVyIHRoZSBzcGxhdHMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHluYW1pY01vZGUgSWYgdHJ1ZSwgaXQgbWVhbnMgdGhlIHNjZW5lIGdlb21ldHJ5IHJlcHJlc2VudGVkIGJ5IHRoaXMgc3BsYXQgbWVzaCBpcyBub3Qgc3RhdGlvbmFyeSBvclxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgdGhlIHNwbGF0IGNvdW50IG1pZ2h0IGNoYW5nZVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVPcHRpb25hbEVmZmVjdHMgV2hlbiB0cnVlLCBhbGxvd3MgZm9yIHVzYWdlIG9mIGV4dHJhIHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMgaW4gdGhlIHNoYWRlciBmb3IgZWZmZWN0c1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjaCBhcyBvcGFjaXR5IGFkanVzdG1lbnQuIERlZmF1bHQgaXMgZmFsc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFudGlhbGlhc2VkIElmIHRydWUsIGNhbGN1bGF0ZSBjb21wZW5zYXRpb24gZmFjdG9yIHRvIGRlYWwgd2l0aCBnYXVzc2lhbnMgYmVpbmcgcmVuZGVyZWQgYXQgYSBzaWduaWZpY2FudGx5XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVudCByZXNvbHV0aW9uIHRoYW4gdGhhdCBvZiB0aGVpciB0cmFpbmluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFNjcmVlblNwYWNlU3BsYXRTaXplIFRoZSBtYXhpbXVtIGNsaXAgc3BhY2Ugc3BsYXQgc2l6ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0U2NhbGUgVmFsdWUgYnkgd2hpY2ggYWxsIHNwbGF0cyBhcmUgc2NhbGVkIGluIHNjcmVlbi1zcGFjZSAoZGVmYXVsdCBpcyAxLjApXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRDbG91ZE1vZGVFbmFibGVkIFJlbmRlciBhbGwgc3BsYXRzIGFzIHNjcmVlbi1zcGFjZSBjaXJjbGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIERlZ3JlZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIHRvIHV0aWxpemUgaW4gcmVuZGVyaW5nIHNwbGF0c1xyXG4gICAgICogQHJldHVybiB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZChkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSwgYW50aWFsaWFzZWQgPSBmYWxzZSwgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgPSAyMDQ4LFxyXG4gICAgICAgICAgICAgICAgIHNwbGF0U2NhbGUgPSAxLjAsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9IGZhbHNlLCBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLCBrZXJuZWwyRFNpemUgPSAwLjMsIGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbVZlcnRleFZhcnMgPSBgXHJcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMiBjb3ZhcmlhbmNlc1RleHR1cmVTaXplO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBjb3ZhcmlhbmNlc1RleHR1cmU7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQ7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaW50IGNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0O1xyXG5cclxuICAgICAgICAgICAgdm9pZCBmcm9tQ292YXJpYW5jZUhhbGZGbG9hdFY0KHV2ZWM0IHZhbCwgb3V0IHZlYzQgZmlyc3QsIG91dCB2ZWM0IHNlY29uZCkge1xyXG4gICAgICAgICAgICAgICAgdmVjMiByID0gdW5wYWNrSGFsZjJ4MTYodmFsLnIpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBnID0gdW5wYWNrSGFsZjJ4MTYodmFsLmcpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBiID0gdW5wYWNrSGFsZjJ4MTYodmFsLmIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpcnN0ID0gdmVjNChyLngsIHIueSwgZy54LCBnLnkpO1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kID0gdmVjNChiLngsIGIueSwgMC4wLCAwLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gQWRkIGEgdmFyeWluZyBmb3IgaXJpcyBzcGxhdHNcclxuICAgICAgICBsZXQgdmVydGV4U2hhZGVyU291cmNlID0gU3BsYXRNYXRlcmlhbC5idWlsZFZlcnRleFNoYWRlckJhc2UoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKGFudGlhbGlhc2VkLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNjcmVlblNwYWNlU3BsYXRTaXplLCBrZXJuZWwyRFNpemUpO1xyXG4gICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyU291cmNlID0gU3BsYXRNYXRlcmlhbDNELmJ1aWxkRnJhZ21lbnRTaGFkZXIoaXJpc09jY2x1c2lvbkNvbmZpZyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gU3BsYXRNYXRlcmlhbC5nZXRVbmlmb3JtcyhkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNwbGF0U2NhbGUsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCk7XHJcblxyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmVTaXplJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmUnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdCddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICdpJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgdW5pZm9ybXM6IHVuaWZvcm1zLFxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXI6IHZlcnRleFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXI6IGZyYWdtZW50U2hhZGVyU291cmNlLFxyXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgICAgICAgICAgYWxwaGFUZXN0OiAxLjAsXHJcbiAgICAgICAgICAgIGJsZW5kaW5nOiBOb3JtYWxCbGVuZGluZyxcclxuICAgICAgICAgICAgZGVwdGhUZXN0OiB0cnVlLFxyXG4gICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2lkZTogRG91YmxlU2lkZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGJ1aWxkVmVydGV4U2hhZGVyUHJvamVjdGlvbihhbnRpYWxpYXNlZCwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSwga2VybmVsMkRTaXplKSB7XHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IGBcclxuXHJcbiAgICAgICAgICAgIHZlYzQgc2FtcGxlZENvdmFyaWFuY2VBO1xyXG4gICAgICAgICAgICB2ZWM0IHNhbXBsZWRDb3ZhcmlhbmNlQjtcclxuICAgICAgICAgICAgdmVjMyBjb3YzRF9NMTFfTTEyX00xMztcclxuICAgICAgICAgICAgdmVjMyBjb3YzRF9NMjJfTTIzX00zMztcclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0ID09IDApIHtcclxuICAgICAgICAgICAgICAgIHNhbXBsZWRDb3ZhcmlhbmNlQSA9IHRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSwgb2RkT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgc2FtcGxlZENvdmFyaWFuY2VCID0gdGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmUsIGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMS41LCBvZGRPZmZzZXQgKyB1aW50KDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzID0gdmVjMyhzYW1wbGVkQ292YXJpYW5jZUEucmdiKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLmJhLCBzYW1wbGVkQ292YXJpYW5jZUIucikgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTIyX00yM19NMzMgPSB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5hLCBzYW1wbGVkQ292YXJpYW5jZUIucmcpICogKDEuMCAtIGZPZGRPZmZzZXQpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMyhzYW1wbGVkQ292YXJpYW5jZUIuZ2JhKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1dmVjNCBzYW1wbGVkQ292YXJpYW5jZVUgPSB0ZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZUhhbGZGbG9hdCwgZ2V0RGF0YVVWKDEsIDAsIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgIGZyb21Db3ZhcmlhbmNlSGFsZkZsb2F0VjQoc2FtcGxlZENvdmFyaWFuY2VVLCBzYW1wbGVkQ292YXJpYW5jZUEsIHNhbXBsZWRDb3ZhcmlhbmNlQik7XHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMyA9IHNhbXBsZWRDb3ZhcmlhbmNlQS5yZ2I7XHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMjJfTTIzX00zMyA9IHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLmEsIHNhbXBsZWRDb3ZhcmlhbmNlQi5yZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSAzRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICBtYXQzIFZyayA9IG1hdDMoXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMy54LCBjb3YzRF9NMTFfTTEyX00xMy55LCBjb3YzRF9NMTFfTTEyX00xMy56LFxyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMueSwgY292M0RfTTIyX00yM19NMzMueCwgY292M0RfTTIyX00yM19NMzMueSxcclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzLnosIGNvdjNEX00yMl9NMjNfTTMzLnksIGNvdjNEX00yMl9NMjNfTTMzLnpcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDMgSjtcclxuICAgICAgICAgICAgaWYgKG9ydGhvZ3JhcGhpY01vZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhlIHByb2plY3Rpb24gaXMgbGluZWFyLCB3ZSBkb24ndCBuZWVkIGFuIGFwcHJveGltYXRpb25cclxuICAgICAgICAgICAgICAgIEogPSB0cmFuc3Bvc2UobWF0MyhvcnRob1pvb20sIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgb3J0aG9ab29tLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAwLjAsIDAuMCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBKYWNvYmlhbiBvZiB0aGUgYWZmaW5lIGFwcHJveGltYXRpb24gb2YgdGhlIHByb2plY3Rpb24gbWF0cml4LiBJdCB3aWxsIGJlIHVzZWQgdG8gdHJhbnNmb3JtIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gM0QgY292YXJpYW5jZSBtYXRyaXggaW5zdGVhZCBvZiB1c2luZyB0aGUgYWN0dWFsIHByb2plY3Rpb24gbWF0cml4IGJlY2F1c2UgdGhhdCB0cmFuc2Zvcm1hdGlvbiB3b3VsZFxyXG4gICAgICAgICAgICAgICAgLy8gcmVxdWlyZSBhIG5vbi1saW5lYXIgY29tcG9uZW50IChwZXJzcGVjdGl2ZSBkaXZpc2lvbikgd2hpY2ggd291bGQgeWllbGQgYSBub24tZ2F1c3NpYW4gcmVzdWx0LlxyXG4gICAgICAgICAgICAgICAgZmxvYXQgcyA9IDEuMCAvICh2aWV3Q2VudGVyLnogKiB2aWV3Q2VudGVyLnopO1xyXG4gICAgICAgICAgICAgICAgSiA9IG1hdDMoXHJcbiAgICAgICAgICAgICAgICAgICAgZm9jYWwueCAvIHZpZXdDZW50ZXIueiwgMC4sIC0oZm9jYWwueCAqIHZpZXdDZW50ZXIueCkgKiBzLFxyXG4gICAgICAgICAgICAgICAgICAgIDAuLCBmb2NhbC55IC8gdmlld0NlbnRlci56LCAtKGZvY2FsLnkgKiB2aWV3Q2VudGVyLnkpICogcyxcclxuICAgICAgICAgICAgICAgICAgICAwLiwgMC4sIDAuXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb25jYXRlbmF0ZSB0aGUgcHJvamVjdGlvbiBhcHByb3hpbWF0aW9uIHdpdGggdGhlIG1vZGVsLXZpZXcgdHJhbnNmb3JtYXRpb25cclxuICAgICAgICAgICAgbWF0MyBXID0gdHJhbnNwb3NlKG1hdDModHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4KSk7XHJcbiAgICAgICAgICAgIG1hdDMgVCA9IFcgKiBKO1xyXG5cclxuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIHRoZSAzRCBjb3ZhcmlhbmNlIG1hdHJpeCAoVnJrKSB0byBjb21wdXRlIHRoZSAyRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICBtYXQzIGNvdjJEbSA9IHRyYW5zcG9zZShUKSAqIFZyayAqIFQ7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIGlmIChhbnRpYWxpYXNlZCkge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGV0T3JpZyA9IGNvdjJEbVswXVswXSAqIGNvdjJEbVsxXVsxXSAtIGNvdjJEbVswXVsxXSAqIGNvdjJEbVswXVsxXTtcclxuICAgICAgICAgICAgICAgIGNvdjJEbVswXVswXSArPSAke2tlcm5lbDJEU2l6ZX07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMV1bMV0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGV0Qmx1ciA9IGNvdjJEbVswXVswXSAqIGNvdjJEbVsxXVsxXSAtIGNvdjJEbVswXVsxXSAqIGNvdjJEbVswXVsxXTtcclxuICAgICAgICAgICAgICAgIHZDb2xvci5hICo9IHNxcnQobWF4KGRldE9yaWcgLyBkZXRCbHVyLCAwLjApKTtcclxuICAgICAgICAgICAgICAgIGlmICh2Q29sb3IuYSA8IG1pbkFscGhhKSByZXR1cm47XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGNvdjJEbVswXVswXSArPSAke2tlcm5lbDJEU2l6ZX07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMV1bMV0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIGFyZSBpbnRlcmVzdGVkIGluIHRoZSB1cHBlci1sZWZ0IDJ4MiBwb3J0aW9uIG9mIHRoZSBwcm9qZWN0ZWQgM0QgY292YXJpYW5jZSBtYXRyaXggYmVjYXVzZVxyXG4gICAgICAgICAgICAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgdGhlIFggYW5kIFkgdmFsdWVzLiBXZSB3YW50IHRoZSBYLWRpYWdvbmFsLCBjb3YyRG1bMF1bMF0sXHJcbiAgICAgICAgICAgIC8vIHRoZSBZLWRpYWdvbmFsLCBjb3YyRG1bMV1bMV0sIGFuZCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgdHdvIGNvdjJEbVswXVsxXS4gV2UgZG9uJ3RcclxuICAgICAgICAgICAgLy8gbmVlZCBjb3YyRG1bMV1bMF0gYmVjYXVzZSBpdCBpcyBhIHN5bWV0cmljIG1hdHJpeC5cclxuICAgICAgICAgICAgdmVjMyBjb3YyRHYgPSB2ZWMzKGNvdjJEbVswXVswXSwgY292MkRtWzBdWzFdLCBjb3YyRG1bMV1bMV0pO1xyXG5cclxuICAgICAgICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gc29sdmUgZm9yIHRoZSBlaWdlbi12YWx1ZXMgYW5kIGVpZ2VuIHZlY3RvcnMgb2YgdGhlIDJEIGNvdmFyaWFuY2UgbWF0cml4XHJcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB0aGUgMkQgYmFzaXMgZm9yIHRoZSBzcGxhdC4gVGhpcyBpcyBkb25lIHVzaW5nIHRoZSBtZXRob2QgZGVzY3JpYmVkXHJcbiAgICAgICAgICAgIC8vIGhlcmU6IGh0dHBzOi8vcGVvcGxlLm1hdGguaGFydmFyZC5lZHUvfmtuaWxsL3RlYWNoaW5nL21hdGgyMWIyMDA0L2V4aGliaXRzLzJkbWF0cmljZXMvaW5kZXguaHRtbFxyXG4gICAgICAgICAgICAvLyBBZnRlciBjYWxjdWxhdGluZyB0aGUgZWlnZW4tdmFsdWVzIGFuZCBlaWdlbi12ZWN0b3JzLCB3ZSBjYWxjdWxhdGUgdGhlIGJhc2lzIGZvciByZW5kZXJpbmcgdGhlIHNwbGF0XHJcbiAgICAgICAgICAgIC8vIGJ5IG5vcm1hbGl6aW5nIHRoZSBlaWdlbi12ZWN0b3JzIGFuZCB0aGVuIG11bHRpcGx5aW5nIHRoZW0gYnkgKHNxcnQoOCkgKiBzcXJ0KGVpZ2VuLXZhbHVlKSksIHdoaWNoIGlzXHJcbiAgICAgICAgICAgIC8vIGVxdWFsIHRvIHNjYWxpbmcgdGhlbSBieSBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBkaWZmZXJlbnQgYXBwcm9hY2ggdGhhbiBpbiB0aGUgb3JpZ2luYWwgd29yayBhdCBJTlJJQS4gSW4gdGhhdCB3b3JrIHRoZXkgY29tcHV0ZSB0aGVcclxuICAgICAgICAgICAgLy8gbWF4IGV4dGVudHMgb2YgdGhlIHByb2plY3RlZCBzcGxhdCBpbiBzY3JlZW4gc3BhY2UgdG8gZm9ybSBhIHNjcmVlbi1zcGFjZSBhbGlnbmVkIGJvdW5kaW5nIHJlY3RhbmdsZVxyXG4gICAgICAgICAgICAvLyB3aGljaCBmb3JtcyB0aGUgZ2VvbWV0cnkgdGhhdCBpcyBhY3R1YWxseSByYXN0ZXJpemVkLiBUaGUgZGltZW5zaW9ucyBvZiB0aGF0IGJvdW5kaW5nIGJveCBhcmUgMy4wXHJcbiAgICAgICAgICAgIC8vIHRpbWVzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgbWF4aW11bSBlaWdlbi12YWx1ZSwgb3IgMyBzdGFuZGFyZCBkZXZpYXRpb25zLiBUaGV5IHRoZW4gdXNlIHRoZSBpbnZlcnNlXHJcbiAgICAgICAgICAgIC8vIDJEIGNvdmFyaWFuY2UgbWF0cml4IChjYWxsZWQgJ2NvbmljJykgaW4gdGhlIENVREEgcmVuZGVyaW5nIHRocmVhZCB0byBkZXRlcm1pbmUgZnJhZ21lbnQgb3BhY2l0eSBieVxyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGluZyB0aGUgZnVsbCBnYXVzc2lhbjogZXhwKC0wLjUgKiAoWCAtIG1lYW4pICogY29uaWMgKiAoWCAtIG1lYW4pKSAqIHNwbGF0IG9wYWNpdHlcclxuICAgICAgICAgICAgZmxvYXQgYSA9IGNvdjJEdi54O1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gY292MkR2Lno7XHJcbiAgICAgICAgICAgIGZsb2F0IGIgPSBjb3YyRHYueTtcclxuICAgICAgICAgICAgZmxvYXQgRCA9IGEgKiBkIC0gYiAqIGI7XHJcbiAgICAgICAgICAgIGZsb2F0IHRyYWNlID0gYSArIGQ7XHJcbiAgICAgICAgICAgIGZsb2F0IHRyYWNlT3ZlcjIgPSAwLjUgKiB0cmFjZTtcclxuICAgICAgICAgICAgZmxvYXQgdGVybTIgPSBzcXJ0KG1heCgwLjFmLCB0cmFjZU92ZXIyICogdHJhY2VPdmVyMiAtIEQpKTtcclxuICAgICAgICAgICAgZmxvYXQgZWlnZW5WYWx1ZTEgPSB0cmFjZU92ZXIyICsgdGVybTI7XHJcbiAgICAgICAgICAgIGZsb2F0IGVpZ2VuVmFsdWUyID0gdHJhY2VPdmVyMiAtIHRlcm0yO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBlaWdlblZhbHVlMSA9IGVpZ2VuVmFsdWUyID0gMC4yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWlnZW5WYWx1ZTIgPD0gMC4wKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2ZWMyIGVpZ2VuVmVjdG9yMSA9IG5vcm1hbGl6ZSh2ZWMyKGIsIGVpZ2VuVmFsdWUxIC0gYSkpO1xyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgZWlnZW4gdmVjdG9ycyBhcmUgb3J0aG9nb25hbCwgd2UgZGVyaXZlIHRoZSBzZWNvbmQgb25lIGZyb20gdGhlIGZpcnN0XHJcbiAgICAgICAgICAgIHZlYzIgZWlnZW5WZWN0b3IyID0gdmVjMihlaWdlblZlY3RvcjEueSwgLWVpZ2VuVmVjdG9yMS54KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIHVzZSBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMgaW5zdGVhZCBvZiAzIHRvIGVsaW1pbmF0ZSBtb3JlIG9mIHRoZSBzcGxhdCB3aXRoIGEgdmVyeSBsb3cgb3BhY2l0eS5cclxuICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjEgPSBlaWdlblZlY3RvcjEgKiBzcGxhdFNjYWxlICogbWluKHNxcnQ4ICogc3FydChlaWdlblZhbHVlMSksICR7cGFyc2VJbnQobWF4U2NyZWVuU3BhY2VTcGxhdFNpemUpfS4wKTtcclxuICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjIgPSBlaWdlblZlY3RvcjIgKiBzcGxhdFNjYWxlICogbWluKHNxcnQ4ICogc3FydChlaWdlblZhbHVlMiksICR7cGFyc2VJbnQobWF4U2NyZWVuU3BhY2VTcGxhdFNpemUpfS4wKTtcclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgdkNvbG9yLmEgKj0gc3BsYXRPcGFjaXR5RnJvbVNjZW5lO1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgdmVjMiBuZGNPZmZzZXQgPSB2ZWMyKHZQb3NpdGlvbi54ICogYmFzaXNWZWN0b3IxICsgdlBvc2l0aW9uLnkgKiBiYXNpc1ZlY3RvcjIpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNpc1ZpZXdwb3J0ICogMi4wICogaW52ZXJzZUZvY2FsQWRqdXN0bWVudDtcclxuXHJcbiAgICAgICAgICAgIHZlYzQgcXVhZFBvcyA9IHZlYzQobmRjQ2VudGVyLnh5ICsgbmRjT2Zmc2V0LCBuZGNDZW50ZXIueiwgMS4wKTtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBxdWFkUG9zO1xyXG5cclxuICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHBvc2l0aW9uIGRhdGEgd2Ugc2VuZCB0byB0aGUgZnJhZ21lbnQgc2hhZGVyXHJcbiAgICAgICAgICAgIHZQb3NpdGlvbiAqPSBzcXJ0ODtcclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gU3BsYXRNYXRlcmlhbC5nZXRWZXJ0ZXhTaGFkZXJGYWRlSW4oKTtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZEZyYWdtZW50U2hhZGVyKGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsKSB7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50U2hhZGVyU291cmNlID0gYFxyXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcbiAgICAgICAgICAgICNpbmNsdWRlIDxjb21tb24+XHJcblxyXG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGV5ZUJsaW5rTGVmdDtcclxuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBleWVCbGlua1JpZ2h0O1xyXG5cclxuICAgICAgICAgICAgdmFyeWluZyB2ZWM0IHZDb2xvcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZQb3NpdGlvbjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZTcGxhdEluZGV4O1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICAgICAgICAgIGZsb2F0IEEgPSBkb3QodlBvc2l0aW9uLCB2UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgb3BhY2l0eSA9IGV4cCgtMC41ICogQSkgKiB2Q29sb3IuYTtcclxuICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5IDwgMS4wIC8gMjU1LjApXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGlyaXMgb2NjbHVzaW9uIGNvZGUgb25seSBpZiBjb25maWcgZXhpc3RzXHJcbiAgICAgICAgaWYgKGlyaXNPY2NsdXNpb25Db25maWcgJiYgKGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpcyB8fCBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpcykpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgaWR4ID0gdlNwbGF0SW5kZXgueDtcclxuICAgICAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSByaWdodCBpcmlzIGNoZWNrc1xyXG4gICAgICAgICAgICBpZiAoaXJpc09jY2x1c2lvbkNvbmZpZy5yaWdodF9pcmlzICYmIGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodENvbmRpdGlvbnMgPSBpcmlzT2NjbHVzaW9uQ29uZmlnLnJpZ2h0X2lyaXNcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChbc3RhcnQsIGVuZF0pID0+IGAoaWR4ID49ICR7c3RhcnR9LjAgJiYgaWR4IDw9ICR7ZW5kfS4wKWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyB8fFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBzcGxhdCBpcyBwYXJ0IG9mIHJpZ2h0IGlyaXNcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXMgPSAke3JpZ2h0Q29uZGl0aW9uc307XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgYm9vbCBpc1JpZ2h0SXJpcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbGVmdCBpcmlzIGNoZWNrc1xyXG4gICAgICAgICAgICBpZiAoaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXMgJiYgaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdENvbmRpdGlvbnMgPSBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKFtzdGFydCwgZW5kXSkgPT4gYChpZHggPj0gJHtzdGFydH0uMCAmJiBpZHggPD0gJHtlbmR9LjApYClcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignIHx8XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgc3BsYXQgaXMgcGFydCBvZiBsZWZ0IGlyaXNcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpcyA9ICR7bGVmdENvbmRpdGlvbnN9O1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgZmluYWxPcGFjaXR5ID0gb3BhY2l0eTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBWZXJ5IG5hcnJvdyBmYWRlIHdpbmRvdyBhdCBoaWdoIGJsaW5rIHZhbHVlcyBvbmx5XHJcbiAgICAgICAgICAgICAgICAvLyBJcmlzIHN0YXlzIHZpc2libGUgdW50aWwgZXllIGlzIGFsbW9zdCBjb21wbGV0ZWx5IGNsb3NlZFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmlnaHRJcmlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC41LCAwLjcsIGV5ZUJsaW5rUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT3BhY2l0eSA9IG9wYWNpdHkgKiBmYWRlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRJcmlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC41LCAwLjcsIGV5ZUJsaW5rTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxPcGFjaXR5ID0gb3BhY2l0eSAqIGZhZGVGYWN0b3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsT3BhY2l0eSA8IDEuMCAvIDI1NS4wKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2NhcmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2Q29sb3IucmdiLCBmaW5hbE9wYWNpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyBpcmlzIG9jY2x1c2lvbiAtIHNpbXBsZSByZW5kZXJpbmdcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2Q29sb3IucmdiLCBvcGFjaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qKlxyXG4gKiBTcGxhdE1hdGVyaWFsMkRcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBNb2RpZmllZCBmb3IgRkxBTUUgYXZhdGFyIHN1cHBvcnQ6XHJcbiAqIC0gRXh0ZW5kZWQgdmVydGV4IHNoYWRlciBmb3IgRkxBTUUgaW50ZWdyYXRpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBEb3VibGVTaWRlLCBOb3JtYWxCbGVuZGluZywgU2hhZGVyTWF0ZXJpYWwsIFZlY3RvcjIgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0TWF0ZXJpYWwgfSBmcm9tICcuL1NwbGF0TWF0ZXJpYWwuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0TWF0ZXJpYWwyRCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCB0aGUgVGhyZWUuanMgbWF0ZXJpYWwgdGhhdCBpcyB1c2VkIHRvIHJlbmRlciB0aGUgc3BsYXRzLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR5bmFtaWNNb2RlIElmIHRydWUsIGl0IG1lYW5zIHRoZSBzY2VuZSBnZW9tZXRyeSByZXByZXNlbnRlZCBieSB0aGlzIHNwbGF0IG1lc2ggaXMgbm90IHN0YXRpb25hcnkgb3JcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0IHRoZSBzcGxhdCBjb3VudCBtaWdodCBjaGFuZ2VcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlT3B0aW9uYWxFZmZlY3RzIFdoZW4gdHJ1ZSwgYWxsb3dzIGZvciB1c2FnZSBvZiBleHRyYSBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzIGluIHRoZSBzaGFkZXIgZm9yIGVmZmVjdHNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2ggYXMgb3BhY2l0eSBhZGp1c3RtZW50LiBEZWZhdWx0IGlzIGZhbHNlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0U2NhbGUgVmFsdWUgYnkgd2hpY2ggYWxsIHNwbGF0cyBhcmUgc2NhbGVkIGluIHNjcmVlbi1zcGFjZSAoZGVmYXVsdCBpcyAxLjApXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRDbG91ZE1vZGVFbmFibGVkIFJlbmRlciBhbGwgc3BsYXRzIGFzIHNjcmVlbi1zcGFjZSBjaXJjbGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIERlZ3JlZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIHRvIHV0aWxpemUgaW4gcmVuZGVyaW5nIHNwbGF0c1xyXG4gICAgICogQHJldHVybiB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZChkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSwgc3BsYXRTY2FsZSA9IDEuMCxcclxuICAgICAgICAgICAgICAgICBwb2ludENsb3VkTW9kZUVuYWJsZWQgPSBmYWxzZSwgbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21WZXJ0ZXhWYXJzID0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzIgc2NhbGVSb3RhdGlvbnNUZXh0dXJlU2l6ZTtcclxuICAgICAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2NhbGVSb3RhdGlvbnNUZXh0dXJlO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIG1hdDMgdlQ7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UXVhZENlbnRlcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZGcmFnQ29vcmQ7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IFNwbGF0TWF0ZXJpYWwuYnVpbGRWZXJ0ZXhTaGFkZXJCYXNlKGR5bmFtaWNNb2RlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgY3VzdG9tVmVydGV4VmFycyk7XHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IFNwbGF0TWF0ZXJpYWwyRC5idWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oKTtcclxuICAgICAgICBjb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IFNwbGF0TWF0ZXJpYWwyRC5idWlsZEZyYWdtZW50U2hhZGVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gU3BsYXRNYXRlcmlhbC5nZXRVbmlmb3JtcyhkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNwbGF0U2NhbGUsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCk7XHJcblxyXG4gICAgICAgIHVuaWZvcm1zWydzY2FsZVJvdGF0aW9uc1RleHR1cmUnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydzY2FsZVJvdGF0aW9uc1RleHR1cmVTaXplJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB1bmlmb3JtcyxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJTb3VyY2UsXHJcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFscGhhVGVzdDogMS4wLFxyXG4gICAgICAgICAgICBibGVuZGluZzogTm9ybWFsQmxlbmRpbmcsXHJcbiAgICAgICAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8vIE9yaWdpbmFsIENVREEgY29kZSBmb3IgY2FsY3VsYXRpbmcgc3BsYXQtdG8tc2NyZWVuIHRyYW5zZm9ybWF0aW9uLCBmb3IgcmVmZXJlbmNlXHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgZ2xtOjptYXQzIFIgPSBxdWF0X3RvX3JvdG1hdChyb3QpO1xyXG4gICAgICAgICAgICBnbG06Om1hdDMgUyA9IHNjYWxlX3RvX21hdChzY2FsZSwgbW9kKTtcclxuICAgICAgICAgICAgZ2xtOjptYXQzIEwgPSBSICogUztcclxuXHJcbiAgICAgICAgICAgIC8vIGNlbnRlciBvZiBHYXVzc2lhbnMgaW4gdGhlIGNhbWVyYSBjb29yZGluYXRlXHJcbiAgICAgICAgICAgIGdsbTo6bWF0M3g0IHNwbGF0MndvcmxkID0gZ2xtOjptYXQzeDQoXHJcbiAgICAgICAgICAgICAgICBnbG06OnZlYzQoTFswXSwgMC4wKSxcclxuICAgICAgICAgICAgICAgIGdsbTo6dmVjNChMWzFdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgZ2xtOjp2ZWM0KHBfb3JpZy54LCBwX29yaWcueSwgcF9vcmlnLnosIDEpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBnbG06Om1hdDQgd29ybGQybmRjID0gZ2xtOjptYXQ0KFxyXG4gICAgICAgICAgICAgICAgcHJvam1hdHJpeFswXSwgcHJvam1hdHJpeFs0XSwgcHJvam1hdHJpeFs4XSwgcHJvam1hdHJpeFsxMl0sXHJcbiAgICAgICAgICAgICAgICBwcm9qbWF0cml4WzFdLCBwcm9qbWF0cml4WzVdLCBwcm9qbWF0cml4WzldLCBwcm9qbWF0cml4WzEzXSxcclxuICAgICAgICAgICAgICAgIHByb2ptYXRyaXhbMl0sIHByb2ptYXRyaXhbNl0sIHByb2ptYXRyaXhbMTBdLCBwcm9qbWF0cml4WzE0XSxcclxuICAgICAgICAgICAgICAgIHByb2ptYXRyaXhbM10sIHByb2ptYXRyaXhbN10sIHByb2ptYXRyaXhbMTFdLCBwcm9qbWF0cml4WzE1XVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZ2xtOjptYXQzeDQgbmRjMnBpeCA9IGdsbTo6bWF0M3g0KFxyXG4gICAgICAgICAgICAgICAgZ2xtOjp2ZWM0KGZsb2F0KFcpIC8gMi4wLCAwLjAsIDAuMCwgZmxvYXQoVy0xKSAvIDIuMCksXHJcbiAgICAgICAgICAgICAgICBnbG06OnZlYzQoMC4wLCBmbG9hdChIKSAvIDIuMCwgMC4wLCBmbG9hdChILTEpIC8gMi4wKSxcclxuICAgICAgICAgICAgICAgIGdsbTo6dmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBUID0gZ2xtOjp0cmFuc3Bvc2Uoc3BsYXQyd29ybGQpICogd29ybGQybmRjICogbmRjMnBpeDtcclxuICAgICAgICAgICAgbm9ybWFsID0gdHJhbnNmb3JtVmVjNHgzKHtMWzJdLngsIExbMl0ueSwgTFsyXS56fSwgdmlld21hdHJpeCk7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgLy8gQ29tcHV0ZSBhIDJELXRvLTJEIG1hcHBpbmcgbWF0cml4IGZyb20gYSB0YW5nZW50IHBsYW5lIGludG8gYSBpbWFnZSBwbGFuZVxyXG4gICAgICAgIC8vIGdpdmVuIGEgMkQgZ2F1c3NpYW4gcGFyYW1ldGVycy4gVCA9IFdIIChmcm9tIHRoZSBwYXBlcjogaHR0cHM6Ly9hcnhpdi5vcmcvcGRmLzI0MDMuMTc4ODgpXHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IGBcclxuXHJcbiAgICAgICAgICAgIHZlYzQgc2NhbGVSb3RhdGlvbkEgPSB0ZXh0dXJlKHNjYWxlUm90YXRpb25zVGV4dHVyZSwgZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAxLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZGRPZmZzZXQsIHNjYWxlUm90YXRpb25zVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgdmVjNCBzY2FsZVJvdGF0aW9uQiA9IHRleHR1cmUoc2NhbGVSb3RhdGlvbnNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9kZE9mZnNldCArIHVpbnQoMSksIHNjYWxlUm90YXRpb25zVGV4dHVyZVNpemUpKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzMgc2NhbGVSb3RhdGlvbjEyMyA9IHZlYzMoc2NhbGVSb3RhdGlvbkEucmdiKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2NhbGVSb3RhdGlvbkEuYmEsIHNjYWxlUm90YXRpb25CLnIpICogZk9kZE9mZnNldDtcclxuICAgICAgICAgICAgdmVjMyBzY2FsZVJvdGF0aW9uNDU2ID0gdmVjMyhzY2FsZVJvdGF0aW9uQS5hLCBzY2FsZVJvdGF0aW9uQi5yZykgKiAoMS4wIC0gZk9kZE9mZnNldCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKHNjYWxlUm90YXRpb25CLmdiYSkgKiBmT2RkT2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgbWlzc2luZ1cgPSBzcXJ0KDEuMCAtIHNjYWxlUm90YXRpb240NTYueCAqIHNjYWxlUm90YXRpb240NTYueCAtIHNjYWxlUm90YXRpb240NTYueSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlUm90YXRpb240NTYueSAtIHNjYWxlUm90YXRpb240NTYueiAqIHNjYWxlUm90YXRpb240NTYueik7XHJcbiAgICAgICAgICAgIG1hdDMgUiA9IHF1YXRlcm5pb25Ub1JvdGF0aW9uTWF0cml4KHNjYWxlUm90YXRpb240NTYuciwgc2NhbGVSb3RhdGlvbjQ1Ni5nLCBzY2FsZVJvdGF0aW9uNDU2LmIsIG1pc3NpbmdXKTtcclxuICAgICAgICAgICAgbWF0MyBTID0gbWF0MyhzY2FsZVJvdGF0aW9uMTIzLnIsIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCBzY2FsZVJvdGF0aW9uMTIzLmcsIDAuMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgMC4wLCBzY2FsZVJvdGF0aW9uMTIzLmIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbWF0MyBMID0gUiAqIFM7XHJcblxyXG4gICAgICAgICAgICBtYXQzeDQgc3BsYXQyV29ybGQgPSBtYXQzeDQodmVjNChMWzBdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChMWzFdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChzcGxhdENlbnRlci54LCBzcGxhdENlbnRlci55LCBzcGxhdENlbnRlci56LCAxLjApKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDQgd29ybGQybmRjID0gdHJhbnNwb3NlKHByb2plY3Rpb25NYXRyaXggKiB0cmFuc2Zvcm1Nb2RlbFZpZXdNYXRyaXgpO1xyXG5cclxuICAgICAgICAgICAgbWF0M3g0IG5kYzJwaXggPSBtYXQzeDQodmVjNCh2aWV3cG9ydC54IC8gMi4wLCAwLjAsIDAuMCwgKHZpZXdwb3J0LnggLSAxLjApIC8gMi4wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCgwLjAsIHZpZXdwb3J0LnkgLyAyLjAsIDAuMCwgKHZpZXdwb3J0LnkgLSAxLjApIC8gMi4wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDMgVCA9IHRyYW5zcG9zZShzcGxhdDJXb3JsZCkgKiB3b3JsZDJuZGMgKiBuZGMycGl4O1xyXG4gICAgICAgICAgICB2ZWMzIG5vcm1hbCA9IHZlYzModmlld01hdHJpeCAqIHZlYzQoTFswXVsyXSwgTFsxXVsyXSwgTFsyXVsyXSwgMC4wKSk7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gT3JpZ2luYWwgQ1VEQSBjb2RlIGZvciBwcm9qZWN0aW9uIHRvIDJELCBmb3IgcmVmZXJlbmNlXHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgZmxvYXQzIFQwID0ge1RbMF1bMF0sIFRbMF1bMV0sIFRbMF1bMl19O1xyXG4gICAgICAgICAgICBmbG9hdDMgVDEgPSB7VFsxXVswXSwgVFsxXVsxXSwgVFsxXVsyXX07XHJcbiAgICAgICAgICAgIGZsb2F0MyBUMyA9IHtUWzJdWzBdLCBUWzJdWzFdLCBUWzJdWzJdfTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgQUFCQlxyXG4gICAgICAgICAgICBmbG9hdDMgdGVtcF9wb2ludCA9IHsxLjBmLCAxLjBmLCAtMS4wZn07XHJcbiAgICAgICAgICAgIGZsb2F0IGRpc3RhbmNlID0gc3VtZjMoVDMgKiBUMyAqIHRlbXBfcG9pbnQpO1xyXG4gICAgICAgICAgICBmbG9hdDMgZiA9ICgxIC8gZGlzdGFuY2UpICogdGVtcF9wb2ludDtcclxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlID09IDAuMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcG9pbnRfaW1hZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBzdW1mMyhmICogVDAgKiBUMyksXHJcbiAgICAgICAgICAgICAgICBzdW1mMyhmICogVDEgKiBUMylcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0MiB0ZW1wID0ge1xyXG4gICAgICAgICAgICAgICAgc3VtZjMoZiAqIFQwICogVDApLFxyXG4gICAgICAgICAgICAgICAgc3VtZjMoZiAqIFQxICogVDEpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZsb2F0MiBoYWxmX2V4dGVuZCA9IHBvaW50X2ltYWdlICogcG9pbnRfaW1hZ2UgLSB0ZW1wO1xyXG4gICAgICAgICAgICBleHRlbnQgPSBzcXJ0ZjIobWF4ZjIoMWUtNCwgaGFsZl9leHRlbmQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgLy8gQ29tcHV0aW5nIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIDJEIEdhdXNzaWFuIGFuZCBpdHMgY2VudGVyXHJcbiAgICAgICAgLy8gVGhlIGNlbnRlciBvZiB0aGUgYm91bmRpbmcgYm94IGlzIHVzZWQgdG8gY3JlYXRlIGEgbG93IHBhc3MgZmlsdGVyLlxyXG4gICAgICAgIC8vIFRoaXMgY29kZSBpcyBiYXNlZCBvZmYgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBhbmQgY3JlYXRlcyBhbiBBQUJCIGFsaWduZWRcclxuICAgICAgICAvLyB3aXRoIHRoZSBzY3JlZW4gZm9yIHRoZSBxdWFkIHRvIGJlIHJlbmRlcmVkLlxyXG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZVF1YWRHZW5lcmF0aW9uID0gYFxyXG4gICAgICAgICAgICB2ZWMzIFQwID0gdmVjMyhUWzBdWzBdLCBUWzBdWzFdLCBUWzBdWzJdKTtcclxuICAgICAgICAgICAgdmVjMyBUMSA9IHZlYzMoVFsxXVswXSwgVFsxXVsxXSwgVFsxXVsyXSk7XHJcbiAgICAgICAgICAgIHZlYzMgVDMgPSB2ZWMzKFRbMl1bMF0sIFRbMl1bMV0sIFRbMl1bMl0pO1xyXG5cclxuICAgICAgICAgICAgdmVjMyB0ZW1wUG9pbnQgPSB2ZWMzKDEuMCwgMS4wLCAtMS4wKTtcclxuICAgICAgICAgICAgZmxvYXQgZGlzdGFuY2UgPSAoVDMueCAqIFQzLnggKiB0ZW1wUG9pbnQueCkgKyAoVDMueSAqIFQzLnkgKiB0ZW1wUG9pbnQueSkgKyAoVDMueiAqIFQzLnogKiB0ZW1wUG9pbnQueik7XHJcbiAgICAgICAgICAgIHZlYzMgZiA9ICgxLjAgLyBkaXN0YW5jZSkgKiB0ZW1wUG9pbnQ7XHJcbiAgICAgICAgICAgIGlmIChhYnMoZGlzdGFuY2UpIDwgMC4wMDAwMSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgcG9pbnRJbWFnZVggPSAoVDAueCAqIFQzLnggKiBmLngpICsgKFQwLnkgKiBUMy55ICogZi55KSArIChUMC56ICogVDMueiAqIGYueik7XHJcbiAgICAgICAgICAgIGZsb2F0IHBvaW50SW1hZ2VZID0gKFQxLnggKiBUMy54ICogZi54KSArIChUMS55ICogVDMueSAqIGYueSkgKyAoVDEueiAqIFQzLnogKiBmLnopO1xyXG4gICAgICAgICAgICB2ZWMyIHBvaW50SW1hZ2UgPSB2ZWMyKHBvaW50SW1hZ2VYLCBwb2ludEltYWdlWSk7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCB0ZW1wWCA9IChUMC54ICogVDAueCAqIGYueCkgKyAoVDAueSAqIFQwLnkgKiBmLnkpICsgKFQwLnogKiBUMC56ICogZi56KTtcclxuICAgICAgICAgICAgZmxvYXQgdGVtcFkgPSAoVDEueCAqIFQxLnggKiBmLngpICsgKFQxLnkgKiBUMS55ICogZi55KSArIChUMS56ICogVDEueiAqIGYueik7XHJcbiAgICAgICAgICAgIHZlYzIgdGVtcCA9IHZlYzIodGVtcFgsIHRlbXBZKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzIgaGFsZkV4dGVuZCA9IHBvaW50SW1hZ2UgKiBwb2ludEltYWdlIC0gdGVtcDtcclxuICAgICAgICAgICAgdmVjMiBleHRlbnQgPSBzcXJ0KG1heCh2ZWMyKDAuMDAwMSksIGhhbGZFeHRlbmQpKTtcclxuICAgICAgICAgICAgZmxvYXQgcmFkaXVzID0gbWF4KGV4dGVudC54LCBleHRlbnQueSk7XHJcblxyXG4gICAgICAgICAgICB2ZWMyIG5kY09mZnNldCA9ICgocG9zaXRpb24ueHkgKiByYWRpdXMgKiAzLjApICogYmFzaXNWaWV3cG9ydCAqIDIuMCk7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IHF1YWRQb3MgPSB2ZWM0KG5kY0NlbnRlci54eSArIG5kY09mZnNldCwgbmRjQ2VudGVyLnosIDEuMCk7XHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcXVhZFBvcztcclxuXHJcbiAgICAgICAgICAgIHZUID0gVDtcclxuICAgICAgICAgICAgdlF1YWRDZW50ZXIgPSBwb2ludEltYWdlO1xyXG4gICAgICAgICAgICB2RnJhZ0Nvb3JkID0gKHF1YWRQb3MueHkgKiAwLjUgKyAwLjUpICogdmlld3BvcnQ7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgY29uc3QgdXNlUmVmSW1wbGVtZW50YXRpb24gPSBmYWxzZTtcclxuICAgICAgICBpZiAodXNlUmVmSW1wbGVtZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IHJlZmVyZW5jZVF1YWRHZW5lcmF0aW9uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHF1YWQgdGhhdCBpcyBhbGlnbmVkIHdpdGggdGhlIGVpZ2VuIHZlY3RvcnMgb2YgdGhlIHByb2plY3RlZCBnYXVzc2lhbiBmb3IgcmVuZGVyaW5nLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGlmZmVyZW50IGFwcHJvYWNoIHRoYW4gdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiwgc2ltaWxhciB0byBob3cgdGhlIHJlbmRlcmluZyBvZlxyXG4gICAgICAgICAgICAvLyAzRCBnYXVzc2lhbnMgaW4gdGhpcyB2aWV3ZXIgZGlmZmVycyBmcm9tIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24uIElmIHRoZSBxdWFkIGlzIHRvbyBzbWFsbFxyXG4gICAgICAgICAgICAvLyAoc21hbGxlciB0aGFuIGEgcGl4ZWwpLCB0aGVuIHJldmVydCB0byB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uLlxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG5cclxuICAgICAgICAgICAgICAgIG1hdDQgc3BsYXQyV29ybGQ0ID0gbWF0NCh2ZWM0KExbMF0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0KExbMV0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0KExbMl0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0KHNwbGF0Q2VudGVyLngsIHNwbGF0Q2VudGVyLnksIHNwbGF0Q2VudGVyLnosIDEuMCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hdDQgVHQgPSB0cmFuc3Bvc2UodHJhbnNwb3NlKHNwbGF0MldvcmxkNCkgKiB3b3JsZDJuZGMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzQgdGVtcFBvaW50MSA9IFR0ICogdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgdGVtcFBvaW50MSAvPSB0ZW1wUG9pbnQxLnc7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCB0ZW1wUG9pbnQyID0gVHQgKiB2ZWM0KDAuMCwgMS4wLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUG9pbnQyIC89IHRlbXBQb2ludDIudztcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWM0IGNlbnRlciA9IFR0ICogdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyIC89IGNlbnRlci53O1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IxID0gdGVtcFBvaW50MS54eSAtIGNlbnRlci54eTtcclxuICAgICAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IyID0gdGVtcFBvaW50Mi54eSAtIGNlbnRlci54eTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIGJhc2lzVmVjdG9yMVNjcmVlbiA9IGJhc2lzVmVjdG9yMSAqIDAuNSAqIHZpZXdwb3J0O1xyXG4gICAgICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjJTY3JlZW4gPSBiYXNpc1ZlY3RvcjIgKiAwLjUgKiB2aWV3cG9ydDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbG9hdCBtaW5QaXggPSAxLjtcclxuICAgICAgICAgICAgICAgIGlmIChsZW5ndGgoYmFzaXNWZWN0b3IxU2NyZWVuKSA8IG1pblBpeCB8fCBsZW5ndGgoYmFzaXNWZWN0b3IyU2NyZWVuKSA8IG1pblBpeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICR7cmVmZXJlbmNlUXVhZEdlbmVyYXRpb259XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlYzIgbmRjT2Zmc2V0ID0gdmVjMihwb3NpdGlvbi54ICogYmFzaXNWZWN0b3IxICsgcG9zaXRpb24ueSAqIGJhc2lzVmVjdG9yMikgKiAzLjAgKiBpbnZlcnNlRm9jYWxBZGp1c3RtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgcXVhZFBvcyA9IHZlYzQobmRjQ2VudGVyLnh5ICsgbmRjT2Zmc2V0LCBuZGNDZW50ZXIueiwgMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHF1YWRQb3M7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZUID0gVDtcclxuICAgICAgICAgICAgICAgICAgICB2UXVhZENlbnRlciA9IGNlbnRlci54eTtcclxuICAgICAgICAgICAgICAgICAgICB2RnJhZ0Nvb3JkID0gKHF1YWRQb3MueHkgKiAwLjUgKyAwLjUpICogdmlld3BvcnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gU3BsYXRNYXRlcmlhbC5nZXRWZXJ0ZXhTaGFkZXJGYWRlSW4oKTtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZEZyYWdtZW50U2hhZGVyKCkge1xyXG5cclxuICAgICAgICAvLyBPcmlnaW5hbCBDVURBIGNvZGUgZm9yIHNwbGF0IGludGVyc2VjdGlvbiwgZm9yIHJlZmVyZW5jZVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0MiB4eSA9IGNvbGxlY3RlZF94eVtqXTtcclxuICAgICAgICAgICAgY29uc3QgZmxvYXQzIFR1ID0gY29sbGVjdGVkX1R1W2pdO1xyXG4gICAgICAgICAgICBjb25zdCBmbG9hdDMgVHYgPSBjb2xsZWN0ZWRfVHZbal07XHJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0MyBUdyA9IGNvbGxlY3RlZF9Ud1tqXTtcclxuICAgICAgICAgICAgZmxvYXQzIGsgPSBwaXgueCAqIFR3IC0gVHU7XHJcbiAgICAgICAgICAgIGZsb2F0MyBsID0gcGl4LnkgKiBUdyAtIFR2O1xyXG4gICAgICAgICAgICBmbG9hdDMgcCA9IGNyb3NzKGssIGwpO1xyXG4gICAgICAgICAgICBpZiAocC56ID09IDAuMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGZsb2F0MiBzID0ge3AueCAvIHAueiwgcC55IC8gcC56fTtcclxuICAgICAgICAgICAgZmxvYXQgcmhvM2QgPSAocy54ICogcy54ICsgcy55ICogcy55KTtcclxuICAgICAgICAgICAgZmxvYXQyIGQgPSB7eHkueCAtIHBpeGYueCwgeHkueSAtIHBpeGYueX07XHJcbiAgICAgICAgICAgIGZsb2F0IHJobzJkID0gRmlsdGVySW52U3F1YXJlICogKGQueCAqIGQueCArIGQueSAqIGQueSk7XHJcblxyXG4gICAgICAgICAgICAvLyBjb21wdXRlIGludGVyc2VjdGlvbiBhbmQgZGVwdGhcclxuICAgICAgICAgICAgZmxvYXQgcmhvID0gbWluKHJobzNkLCByaG8yZCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGRlcHRoID0gKHJobzNkIDw9IHJobzJkKSA/IChzLnggKiBUdy54ICsgcy55ICogVHcueSkgKyBUdy56IDogVHcuejtcclxuICAgICAgICAgICAgaWYgKGRlcHRoIDwgbmVhcl9uKSBjb250aW51ZTtcclxuICAgICAgICAgICAgZmxvYXQ0IG5vcl9vID0gY29sbGVjdGVkX25vcm1hbF9vcGFjaXR5W2pdO1xyXG4gICAgICAgICAgICBmbG9hdCBub3JtYWxbM10gPSB7bm9yX28ueCwgbm9yX28ueSwgbm9yX28uen07XHJcbiAgICAgICAgICAgIGZsb2F0IG9wYSA9IG5vcl9vLnc7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCBwb3dlciA9IC0wLjVmICogcmhvO1xyXG4gICAgICAgICAgICBpZiAocG93ZXIgPiAwLjBmKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAvLyBFcS4gKDIpIGZyb20gM0QgR2F1c3NpYW4gc3BsYXR0aW5nIHBhcGVyLlxyXG4gICAgICAgICAgICAvLyBPYnRhaW4gYWxwaGEgYnkgbXVsdGlwbHlpbmcgd2l0aCBHYXVzc2lhbiBvcGFjaXR5XHJcbiAgICAgICAgICAgIC8vIGFuZCBpdHMgZXhwb25lbnRpYWwgZmFsbG9mZiBmcm9tIG1lYW4uXHJcbiAgICAgICAgICAgIC8vIEF2b2lkIG51bWVyaWNhbCBpbnN0YWJpbGl0aWVzIChzZWUgcGFwZXIgYXBwZW5kaXgpLlxyXG4gICAgICAgICAgICBmbG9hdCBhbHBoYSA9IG1pbigwLjk5Ziwgb3BhICogZXhwKHBvd2VyKSk7XHJcbiAgICAgICAgICAgIGlmIChhbHBoYSA8IDEuMGYgLyAyNTUuMGYpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgZmxvYXQgdGVzdF9UID0gVCAqICgxIC0gYWxwaGEpO1xyXG4gICAgICAgICAgICBpZiAodGVzdF9UIDwgMC4wMDAxZilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmxvYXQgdyA9IGFscGhhICogVDtcclxuICAgICAgICAqL1xyXG4gICAgICAgIGxldCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGBcclxuICAgICAgICAgICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xyXG4gICAgICAgICAgICAjaW5jbHVkZSA8Y29tbW9uPlxyXG5cclxuICAgICAgICAgICAgdW5pZm9ybSB2ZWMzIGRlYnVnQ29sb3I7XHJcblxyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzQgdkNvbG9yO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdlV2O1xyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdlBvc2l0aW9uO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIG1hdDMgdlQ7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UXVhZENlbnRlcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZGcmFnQ29vcmQ7XHJcblxyXG4gICAgICAgICAgICB2b2lkIG1haW4gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0IEZpbHRlckludlNxdWFyZSA9IDIuMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0IG5lYXJfbiA9IDAuMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0IFQgPSAxLjA7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjMiB4eSA9IHZRdWFkQ2VudGVyO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBUdSA9IHZUWzBdO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBUdiA9IHZUWzFdO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBUdyA9IHZUWzJdO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBrID0gdkZyYWdDb29yZC54ICogVHcgLSBUdTtcclxuICAgICAgICAgICAgICAgIHZlYzMgbCA9IHZGcmFnQ29vcmQueSAqIFR3IC0gVHY7XHJcbiAgICAgICAgICAgICAgICB2ZWMzIHAgPSBjcm9zcyhrLCBsKTtcclxuICAgICAgICAgICAgICAgIGlmIChwLnogPT0gMC4wKSBkaXNjYXJkO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBzID0gdmVjMihwLnggLyBwLnosIHAueSAvIHAueik7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByaG8zZCA9IChzLnggKiBzLnggKyBzLnkgKiBzLnkpOyBcclxuICAgICAgICAgICAgICAgIHZlYzIgZCA9IHZlYzIoeHkueCAtIHZGcmFnQ29vcmQueCwgeHkueSAtIHZGcmFnQ29vcmQueSk7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByaG8yZCA9IEZpbHRlckludlNxdWFyZSAqIChkLnggKiBkLnggKyBkLnkgKiBkLnkpOyBcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wdXRlIGludGVyc2VjdGlvbiBhbmQgZGVwdGhcclxuICAgICAgICAgICAgICAgIGZsb2F0IHJobyA9IG1pbihyaG8zZCwgcmhvMmQpO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGVwdGggPSAocmhvM2QgPD0gcmhvMmQpID8gKHMueCAqIFR3LnggKyBzLnkgKiBUdy55KSArIFR3LnogOiBUdy56OyBcclxuICAgICAgICAgICAgICAgIGlmIChkZXB0aCA8IG5lYXJfbikgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIC8vICB2ZWM0IG5vcl9vID0gY29sbGVjdGVkX25vcm1hbF9vcGFjaXR5W2pdO1xyXG4gICAgICAgICAgICAgICAgLy8gIGZsb2F0IG5vcm1hbFszXSA9IHtub3Jfby54LCBub3Jfby55LCBub3Jfby56fTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IG9wYSA9IHZDb2xvci5hO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHBvd2VyID0gLTAuNWYgKiByaG87XHJcbiAgICAgICAgICAgICAgICBpZiAocG93ZXIgPiAwLjBmKSBkaXNjYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEVxLiAoMikgZnJvbSAzRCBHYXVzc2lhbiBzcGxhdHRpbmcgcGFwZXIuXHJcbiAgICAgICAgICAgICAgICAvLyBPYnRhaW4gYWxwaGEgYnkgbXVsdGlwbHlpbmcgd2l0aCBHYXVzc2lhbiBvcGFjaXR5XHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXRzIGV4cG9uZW50aWFsIGZhbGxvZmYgZnJvbSBtZWFuLlxyXG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgbnVtZXJpY2FsIGluc3RhYmlsaXRpZXMgKHNlZSBwYXBlciBhcHBlbmRpeCkuIFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgYWxwaGEgPSBtaW4oMC45OWYsIG9wYSAqIGV4cChwb3dlcikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhIDwgMS4wZiAvIDI1NS4wZikgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHRlc3RfVCA9IFQgKiAoMS4wIC0gYWxwaGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlc3RfVCA8IDAuMDAwMSlkaXNjYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHcgPSBhbHBoYSAqIFQ7XHJcbiAgICAgICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZDb2xvci5yZ2IsIHcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBTcGxhdE1lc2hcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIRUFWSUxZIE1PRElGSUVEIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBBZGRlZCBGTEFNRSBib25lIHRleHR1cmUgaGFuZGxpbmdcclxuICogLSBBZGRlZCBleHByZXNzaW9uIGJsZW5kc2hhcGUgc3VwcG9ydFxyXG4gKiAtIEV4dGVuZGVkIHdpdGggc2tpbm5pbmcgZGF0YSBtYW5hZ2VtZW50XHJcbiAqIC0gQWRkaXRpb25hbCB+ODAwIGxpbmVzIG9mIEZMQU1FLXNwZWNpZmljIGNvZGVcclxuICovXHJcblxyXG5pbXBvcnQgeyBCb3gzLCBCdWZmZXJHZW9tZXRyeSwgRGF0YVRleHR1cmUsIEZsb2F0VHlwZSwgSGFsZkZsb2F0VHlwZSwgTWF0cml4NCwgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIFF1YXRlcm5pb24sIFJHQkFGb3JtYXQsIFJHQkFJbnRlZ2VyRm9ybWF0LCBSR0Zvcm1hdCwgUkdJbnRlZ2VyRm9ybWF0LCBSZWRGb3JtYXQsIFJlZEludGVnZXJGb3JtYXQsIFJHQkludGVnZXJGb3JtYXQsIFNjZW5lLCBVbnNpZ25lZEJ5dGVUeXBlLCBVbnNpZ25lZEludFR5cGUsIFZlY3RvcjIsIFZlY3RvcjMsIFZlY3RvcjQsIFdlYkdMUmVuZGVyZXIgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0UmVuZGVyTW9kZSB9IGZyb20gJy4uL2VudW1zL1NwbGF0UmVuZGVyTW9kZS5qcyc7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSAnLi4vZW51bXMvTG9nTGV2ZWwuanMnO1xyXG5pbXBvcnQgeyBTY2VuZVJldmVhbE1vZGUgfSBmcm9tICcuLi9lbnVtcy9TY2VuZVJldmVhbE1vZGUuanMnO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi9lbnVtcy9FbmdpbmVDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBTcGxhdFNjZW5lIH0gZnJvbSAnLi9TcGxhdFNjZW5lLmpzJztcclxuaW1wb3J0IHsgU3BsYXRHZW9tZXRyeSB9IGZyb20gJy4vU3BsYXRHZW9tZXRyeS5qcyc7XHJcbmltcG9ydCB7IFNwbGF0VHJlZSB9IGZyb20gJy4vU3BsYXRUcmVlLmpzJztcclxuaW1wb3J0IHsgU3BsYXRNYXRlcmlhbDNEIH0gZnJvbSAnLi4vbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwzRC5qcyc7XHJcbmltcG9ydCB7IFNwbGF0TWF0ZXJpYWwyRCB9IGZyb20gJy4uL21hdGVyaWFscy9TcGxhdE1hdGVyaWFsMkQuanMnO1xyXG5pbXBvcnQgeyBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSwgdWludEVuY29kZWRGbG9hdCwgcmdiYUFycmF5VG9JbnRlZ2VyLCBjbGFtcCB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdTcGxhdE1lc2gnKTtcclxuXHJcbi8vIER1bW15IGdlb21ldHJ5IGFuZCBtYXRlcmlhbCBmb3IgaW5pdGlhbCBNZXNoIGNvbnN0cnVjdGlvblxyXG5jb25zdCBkdW1teUdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XHJcbmNvbnN0IGR1bW15TWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoKTtcclxuXHJcbi8qKlxyXG4gKiBXZWJHTCBFeHRlbnNpb25zIGhlbHBlciAoZnJvbSBUaHJlZS5qcyBpbnRlcm5hbHMpXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJHTEV4dGVuc2lvbnMkMShnbCkge1xyXG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEV4dGVuc2lvbihuYW1lKSB7XHJcbiAgICAgICAgaWYgKGV4dGVuc2lvbnNbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uc1tuYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBleHRlbnNpb247XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1dFQkdMX2RlcHRoX3RleHR1cmUnOlxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZXB0aF90ZXh0dXJlJykgfHwgZ2wuZ2V0RXh0ZW5zaW9uKCdNT1pfV0VCR0xfZGVwdGhfdGV4dHVyZScpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9kZXB0aF90ZXh0dXJlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJzpcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGdsLmdldEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Yyc6XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb24gPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJzpcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb24gPSBnbC5nZXRFeHRlbnNpb24obmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHRlbnNpb25zW25hbWVdID0gZXh0ZW5zaW9uO1xyXG4gICAgICAgIHJldHVybiBleHRlbnNpb247XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoYXM6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEV4dGVuc2lvbihuYW1lKSAhPT0gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKGNhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICBpZiAoY2FwYWJpbGl0aWVzLmlzV2ViR0wyKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ0VYVF9jb2xvcl9idWZmZXJfZmxvYXQnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignV0VCR0xfY2xpcF9jdWxsX2Rpc3RhbmNlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ1dFQkdMX2RlcHRoX3RleHR1cmUnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX2VsZW1lbnRfaW5kZXhfdWludCcpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKTtcclxuICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXQnKTtcclxuICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdXRUJHTF9tdWx0aXNhbXBsZWRfcmVuZGVyX3RvX3RleHR1cmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldDogZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBnZXRFeHRlbnNpb24obmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAnICsgbmFtZSArICcgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogV2ViR0wgQ2FwYWJpbGl0aWVzIGhlbHBlciAoZnJvbSBUaHJlZS5qcyBpbnRlcm5hbHMpXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJHTENhcGFiaWxpdGllcyQxKGdsLCBleHRlbnNpb25zLCBwYXJhbWV0ZXJzKSB7XHJcbiAgICBsZXQgbWF4QW5pc290cm9weTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXhBbmlzb3Ryb3B5KCkge1xyXG4gICAgICAgIGlmIChtYXhBbmlzb3Ryb3B5ICE9PSB1bmRlZmluZWQpIHJldHVybiBtYXhBbmlzb3Ryb3B5O1xyXG4gICAgICAgIGlmIChleHRlbnNpb25zLmhhcygnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO1xyXG4gICAgICAgICAgICBtYXhBbmlzb3Ryb3B5ID0gZ2wuZ2V0UGFyYW1ldGVyKGV4dGVuc2lvbi5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1heEFuaXNvdHJvcHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF4QW5pc290cm9weTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKSB7XHJcbiAgICAgICAgaWYgKHByZWNpc2lvbiA9PT0gJ2hpZ2hwJykge1xyXG4gICAgICAgICAgICBpZiAoZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGdsLlZFUlRFWF9TSEFERVIsIGdsLkhJR0hfRkxPQVQpLnByZWNpc2lvbiA+IDAgJiZcclxuICAgICAgICAgICAgICAgIGdsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChnbC5GUkFHTUVOVF9TSEFERVIsIGdsLkhJR0hfRkxPQVQpLnByZWNpc2lvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGlnaHAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZWNpc2lvbiA9ICdtZWRpdW1wJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByZWNpc2lvbiA9PT0gJ21lZGl1bXAnKSB7XHJcbiAgICAgICAgICAgIGlmIChnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuVkVSVEVYX1NIQURFUiwgZ2wuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24gPiAwICYmXHJcbiAgICAgICAgICAgICAgICBnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLCBnbC5NRURJVU1fRkxPQVQpLnByZWNpc2lvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbWVkaXVtcCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdsb3dwJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1dlYkdMMiA9IHR5cGVvZiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ICE9PSAndW5kZWZpbmVkJyAmJiBnbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnV2ViR0wyUmVuZGVyaW5nQ29udGV4dCc7XHJcblxyXG4gICAgbGV0IHByZWNpc2lvbiA9IHBhcmFtZXRlcnMucHJlY2lzaW9uICE9PSB1bmRlZmluZWQgPyBwYXJhbWV0ZXJzLnByZWNpc2lvbiA6ICdoaWdocCc7XHJcbiAgICBjb25zdCBtYXhQcmVjaXNpb24gPSBnZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKTtcclxuXHJcbiAgICBpZiAobWF4UHJlY2lzaW9uICE9PSBwcmVjaXNpb24pIHtcclxuICAgICAgICBsb2dnZXIud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjonLCBwcmVjaXNpb24sICdub3Qgc3VwcG9ydGVkLCB1c2luZycsIG1heFByZWNpc2lvbiwgJ2luc3RlYWQuJyk7XHJcbiAgICAgICAgcHJlY2lzaW9uID0gbWF4UHJlY2lzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRyYXdCdWZmZXJzID0gaXNXZWJHTDIgfHwgZXh0ZW5zaW9ucy5oYXMoJ1dFQkdMX2RyYXdfYnVmZmVycycpO1xyXG4gICAgY29uc3QgbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciA9IHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciA9PT0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBtYXhUZXh0dXJlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7XHJcbiAgICBjb25zdCBtYXhWZXJ0ZXhUZXh0dXJlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO1xyXG4gICAgY29uc3QgbWF4VGV4dHVyZVNpemUgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfU0laRSk7XHJcbiAgICBjb25zdCBtYXhDdWJlbWFwU2l6ZSA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFKTtcclxuXHJcbiAgICBjb25zdCBtYXhBdHRyaWJ1dGVzID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfQVRUUklCUyk7XHJcbiAgICBjb25zdCBtYXhWZXJ0ZXhVbmlmb3JtcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyk7XHJcbiAgICBjb25zdCBtYXhWYXJ5aW5ncyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkFSWUlOR19WRUNUT1JTKTtcclxuICAgIGNvbnN0IG1heEZyYWdtZW50VW5pZm9ybXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0ZSQUdNRU5UX1VOSUZPUk1fVkVDVE9SUyk7XHJcblxyXG4gICAgY29uc3QgdmVydGV4VGV4dHVyZXMgPSBtYXhWZXJ0ZXhUZXh0dXJlcyA+IDA7XHJcbiAgICBjb25zdCBmbG9hdEZyYWdtZW50VGV4dHVyZXMgPSBpc1dlYkdMMiB8fCBleHRlbnNpb25zLmhhcygnT0VTX3RleHR1cmVfZmxvYXQnKTtcclxuICAgIGNvbnN0IGZsb2F0VmVydGV4VGV4dHVyZXMgPSB2ZXJ0ZXhUZXh0dXJlcyAmJiBmbG9hdEZyYWdtZW50VGV4dHVyZXM7XHJcblxyXG4gICAgY29uc3QgbWF4U2FtcGxlcyA9IGlzV2ViR0wyID8gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9TQU1QTEVTKSA6IDA7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpc1dlYkdMMjogaXNXZWJHTDIsXHJcbiAgICAgICAgZHJhd0J1ZmZlcnM6IGRyYXdCdWZmZXJzLFxyXG4gICAgICAgIGdldE1heEFuaXNvdHJvcHk6IGdldE1heEFuaXNvdHJvcHksXHJcbiAgICAgICAgZ2V0TWF4UHJlY2lzaW9uOiBnZXRNYXhQcmVjaXNpb24sXHJcbiAgICAgICAgcHJlY2lzaW9uOiBwcmVjaXNpb24sXHJcbiAgICAgICAgbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjogbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixcclxuICAgICAgICBtYXhUZXh0dXJlczogbWF4VGV4dHVyZXMsXHJcbiAgICAgICAgbWF4VmVydGV4VGV4dHVyZXM6IG1heFZlcnRleFRleHR1cmVzLFxyXG4gICAgICAgIG1heFRleHR1cmVTaXplOiBtYXhUZXh0dXJlU2l6ZSxcclxuICAgICAgICBtYXhDdWJlbWFwU2l6ZTogbWF4Q3ViZW1hcFNpemUsXHJcbiAgICAgICAgbWF4QXR0cmlidXRlczogbWF4QXR0cmlidXRlcyxcclxuICAgICAgICBtYXhWZXJ0ZXhVbmlmb3JtczogbWF4VmVydGV4VW5pZm9ybXMsXHJcbiAgICAgICAgbWF4VmFyeWluZ3M6IG1heFZhcnlpbmdzLFxyXG4gICAgICAgIG1heEZyYWdtZW50VW5pZm9ybXM6IG1heEZyYWdtZW50VW5pZm9ybXMsXHJcbiAgICAgICAgdmVydGV4VGV4dHVyZXM6IHZlcnRleFRleHR1cmVzLFxyXG4gICAgICAgIGZsb2F0RnJhZ21lbnRUZXh0dXJlczogZmxvYXRGcmFnbWVudFRleHR1cmVzLFxyXG4gICAgICAgIGZsb2F0VmVydGV4VGV4dHVyZXM6IGZsb2F0VmVydGV4VGV4dHVyZXMsXHJcbiAgICAgICAgbWF4U2FtcGxlczogbWF4U2FtcGxlc1xyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdlYkdMIFV0aWxzIGhlbHBlciAoZnJvbSBUaHJlZS5qcyBpbnRlcm5hbHMpXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJHTFV0aWxzJDEoZ2wsIGV4dGVuc2lvbnMsIGNhcGFiaWxpdGllcykge1xyXG4gICAgY29uc3QgaXNXZWJHTDIgPSBjYXBhYmlsaXRpZXMuaXNXZWJHTDI7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydChwLCBjb2xvclNwYWNlKSB7XHJcbiAgICAgICAgbGV0IGV4dGVuc2lvbjtcclxuXHJcbiAgICAgICAgaWYgKHAgPT09IFVuc2lnbmVkQnl0ZVR5cGUpIHJldHVybiBnbC5VTlNJR05FRF9CWVRFO1xyXG4gICAgICAgIGlmIChwID09PSAxMDE3KSByZXR1cm4gZ2wuVU5TSUdORURfU0hPUlRfNF80XzRfNDtcclxuICAgICAgICBpZiAocCA9PT0gMTAxOCkgcmV0dXJuIGdsLlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTApIHJldHVybiBnbC5CWVRFO1xyXG4gICAgICAgIGlmIChwID09PSAxMDExKSByZXR1cm4gZ2wuU0hPUlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTIpIHJldHVybiBnbC5VTlNJR05FRF9TSE9SVDtcclxuICAgICAgICBpZiAocCA9PT0gMTAxMykgcmV0dXJuIGdsLklOVDtcclxuICAgICAgICBpZiAocCA9PT0gMTAxNCkgcmV0dXJuIGdsLlVOU0lHTkVEX0lOVDtcclxuICAgICAgICBpZiAocCA9PT0gRmxvYXRUeXBlKSByZXR1cm4gZ2wuRkxPQVQ7XHJcblxyXG4gICAgICAgIGlmIChwID09PSBIYWxmRmxvYXRUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1dlYkdMMikgcmV0dXJuIGdsLkhBTEZfRkxPQVQ7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHRlbnNpb24uSEFMRl9GTE9BVF9PRVM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjEpIHJldHVybiBnbC5BTFBIQTtcclxuICAgICAgICBpZiAocCA9PT0gMTAyMikgcmV0dXJuIGdsLlJHQjtcclxuICAgICAgICBpZiAocCA9PT0gUkdCQUZvcm1hdCkgcmV0dXJuIGdsLlJHQkE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjQpIHJldHVybiBnbC5MVU1JTkFOQ0U7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjUpIHJldHVybiBnbC5MVU1JTkFOQ0VfQUxQSEE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjYpIHJldHVybiBnbC5ERVBUSF9DT01QT05FTlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjcpIHJldHVybiBnbC5ERVBUSF9TVEVOQ0lMO1xyXG5cclxuICAgICAgICAvLyBXZWJHTDIgZm9ybWF0c1xyXG4gICAgICAgIGlmIChwID09PSBSZWRGb3JtYXQpIHJldHVybiBnbC5SRUQ7XHJcbiAgICAgICAgaWYgKHAgPT09IFJlZEludGVnZXJGb3JtYXQpIHJldHVybiBnbC5SRURfSU5URUdFUjtcclxuICAgICAgICBpZiAocCA9PT0gUkdGb3JtYXQpIHJldHVybiBnbC5SRztcclxuICAgICAgICBpZiAocCA9PT0gUkdJbnRlZ2VyRm9ybWF0KSByZXR1cm4gZ2wuUkdfSU5URUdFUjtcclxuICAgICAgICBpZiAocCA9PT0gUkdCSW50ZWdlckZvcm1hdCkgcmV0dXJuIGdsLlJHQl9JTlRFR0VSO1xyXG4gICAgICAgIGlmIChwID09PSBSR0JBSW50ZWdlckZvcm1hdCkgcmV0dXJuIGdsLlJHQkFfSU5URUdFUjtcclxuXHJcbiAgICAgICAgLy8gUzNUQ1xyXG4gICAgICAgIGlmIChwID09PSAzMzc3NiB8fCBwID09PSAzMzc3NyB8fCBwID09PSAzMzc3OCB8fCBwID09PSAzMzc3OSkge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDMzNzc2KSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzM3NzcpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUMV9FWFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzM3NzgpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzM3NzkpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUFZSVENcclxuICAgICAgICBpZiAocCA9PT0gMzU4NDAgfHwgcCA9PT0gMzU4NDEgfHwgcCA9PT0gMzU4NDIgfHwgcCA9PT0gMzU4NDMpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzU4NDApIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfUFZSVENfNEJQUFYxX0lNRztcclxuICAgICAgICAgICAgICAgIGlmIChwID09PSAzNTg0MSkgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9QVlJUQ18yQlBQVjFfSU1HO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDM1ODQyKSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDM1ODQzKSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9QVlJUQ18yQlBQVjFfSU1HO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVUQ1xyXG4gICAgICAgIGlmIChwID09PSAzNjE5Nikge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFTVENcclxuICAgICAgICBpZiAocCA+PSAzNzgwOCAmJiBwIDw9IDM3ODE0IHx8IHAgPj0gMzc4NDAgJiYgcCA8PSAzNzg0Nikge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQlBUQ1xyXG4gICAgICAgIGlmIChwID09PSAzNjQ5MiB8fCBwID09PSAzNjQ5NCB8fCBwID09PSAzNjQ5NSkge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnRVhUX3RleHR1cmVfY29tcHJlc3Npb25fYnB0YycpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocCA9PT0gMzQwNDIpIHJldHVybiBnbC5VTlNJR05FRF9JTlRfMjRfODtcclxuXHJcbiAgICAgICAgLy8gSW50ZXJuYWwgZm9ybWF0cyBmb3IgZmxvYXQvaGFsZi1mbG9hdCB0ZXh0dXJlc1xyXG4gICAgICAgIGlmIChpc1dlYkdMMikge1xyXG4gICAgICAgICAgICBpZiAocCA9PT0gNjQwNykgcmV0dXJuIGdsLlJHQjtcclxuICAgICAgICAgICAgaWYgKHAgPT09IDY0MDgpIHJldHVybiBnbC5SR0JBO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChnbFtwXSAhPT0gdW5kZWZpbmVkKSA/IGdsW3BdIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvbnZlcnQ6IGNvbnZlcnRcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIENvbnN0YW50cyBmb3IgdGV4dHVyZSBlbGVtZW50IGNvdW50c1xyXG5jb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQgPSA2O1xyXG5jb25zdCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVCA9IDQ7XHJcblxyXG5jb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEID0gNDtcclxuY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0FMTE9DQVRFRCA9IDQ7XHJcbmNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX1NUT1JFRCA9IDY7XHJcbmNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRCA9IDg7XHJcbmNvbnN0IFNDQUxFU19ST1RBVElPTlNfRUxFTUVOVFNfUEVSX1RFWEVMID0gNDtcclxuY29uc3QgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwgPSA0O1xyXG5jb25zdCBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDE7XHJcblxyXG5jb25zdCBTQ0VORV9GQURFSU5fUkFURV9GQVNUID0gMC4wMTI7XHJcbmNvbnN0IFNDRU5FX0ZBREVJTl9SQVRFX0dSQURVQUwgPSAwLjAwMztcclxuXHJcbmNvbnN0IFZJU0lCTEVfUkVHSU9OX0VYUEFOU0lPTl9ERUxUQSA9IDE7XHJcblxyXG5jb25zdCBNQVhfVEVYVFVSRV9URVhFTFMgPSAxNjc3NzIxNjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdE1lc2ggZXh0ZW5kcyBNZXNoIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGxhdFJlbmRlck1vZGUgPSBTcGxhdFJlbmRlck1vZGUuVGhyZWVELCBkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVID0gZmFsc2UsIGRldmljZVBpeGVsUmF0aW8gPSAxLCBlbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uID0gZmFsc2UsIGFudGlhbGlhc2VkID0gZmFsc2UsIG1heFNjcmVlblNwYWNlU3BsYXRTaXplID0gMTAyNCwgbG9nTGV2ZWwgPSBMb2dMZXZlbC5Ob25lLFxyXG4gICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCwgc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllciA9IDEuMCwga2VybmVsMkRTaXplID0gMC4zLCBpcmlzT2NjbHVzaW9uQ29uZmlnID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKGR1bW15R2VvbWV0cnksIGR1bW15TWF0ZXJpYWwpO1xyXG5cclxuICAgICAgICAvLyBSZWZlcmVuY2UgdG8gYSBUaHJlZS5qcyByZW5kZXJlclxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8vIERldGVybWluZSBob3cgdGhlIHNwbGF0cyBhcmUgcmVuZGVyZWRcclxuICAgICAgICB0aGlzLnNwbGF0UmVuZGVyTW9kZSA9IHNwbGF0UmVuZGVyTW9kZTtcclxuXHJcbiAgICAgICAgLy8gV2hlbiAnZHluYW1pY01vZGUnIGlzIHRydWUsIHNjZW5lcyBhcmUgYXNzdW1lZCB0byBiZSBub24tc3RhdGljLiBEeW5hbWljIHNjZW5lcyBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseVxyXG4gICAgICAgIC8vIGFuZCBjZXJ0YWluIG9wdGltaXphdGlvbnMgY2Fubm90IGJlIG1hZGUgZm9yIHRoZW0uIEFkZGl0aW9uYWxseSwgYnkgZGVmYXVsdCwgYWxsIHNwbGF0IGRhdGEgcmV0cmlldmVkIGZyb21cclxuICAgICAgICAvLyB0aGlzIHNwbGF0IG1lc2ggd2lsbCBub3QgaGF2ZSB0aGVpciBzY2VuZSB0cmFuc2Zvcm0gYXBwbGllZCB0byB0aGVtIGlmIHRoZSBzcGxhdCBtZXNoIGlzIGR5bmFtaWMuIFRoYXRcclxuICAgICAgICAvLyBjYW4gYmUgb3ZlcnJpZGVuIHZpYSBwYXJhbWV0ZXJzIHRvIHRoZSBpbmRpdmlkdWFsIGZ1bmN0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHJldHJpZXZlIHNwbGF0IGRhdGEuXHJcbiAgICAgICAgdGhpcy5keW5hbWljTW9kZSA9IGR5bmFtaWNNb2RlO1xyXG5cclxuICAgICAgICAvLyBXaGVuIHRydWUsIGFsbG93cyBmb3IgdXNhZ2Ugb2YgZXh0cmEgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBkdXJpbmcgcmVuZGVyaW5nIGZvciBlZmZlY3RzIHN1Y2ggYXMgb3BhY2l0eSBhZGp1c3RtZW50LlxyXG4gICAgICAgIC8vIERlZmF1bHQgaXMgZmFsc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIFRoZXNlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gdHJhbnNmb3JtIHByb3BlcnRpZXMgKHNjYWxlLCByb3RhdGlvbiwgcG9zaXRpb24pXHJcbiAgICAgICAgLy8gdGhhdCBhcmUgZW5hYmxlZCBieSB0aGUgJ2R5bmFtaWNTY2VuZScgcGFyYW1ldGVyLlxyXG4gICAgICAgIHRoaXMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gZW5hYmxlT3B0aW9uYWxFZmZlY3RzO1xyXG5cclxuICAgICAgICAvLyBVc2UgMTYtYml0IGZsb2F0aW5nIHBvaW50IHZhbHVlcyB3aGVuIHN0b3Jpbmcgc3BsYXQgY292YXJpYW5jZSBkYXRhIGluIHRleHR1cmVzLCBpbnN0ZWFkIG9mIDMyLWJpdFxyXG4gICAgICAgIHRoaXMuaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFUgPSBoYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVTtcclxuXHJcbiAgICAgICAgLy8gUmF0aW8gb2YgdGhlIHJlc29sdXRpb24gaW4gcGh5c2ljYWwgcGl4ZWxzIHRvIHRoZSByZXNvbHV0aW9uIGluIENTUyBwaXhlbHMgZm9yIHRoZSBjdXJyZW50IGRpc3BsYXkgZGV2aWNlXHJcbiAgICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvID0gZGV2aWNlUGl4ZWxSYXRpbztcclxuXHJcbiAgICAgICAgLy8gVXNlIGEgdHJhbnNmb3JtIGZlZWRiYWNrIHRvIGNhbGN1bGF0ZSBzcGxhdCBkaXN0YW5jZXMgZnJvbSB0aGUgY2FtZXJhXHJcbiAgICAgICAgdGhpcy5lbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVID0gZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVTtcclxuXHJcbiAgICAgICAgLy8gVXNlIGEgZmFzdGVyIGludGVnZXItYmFzZWQgYXBwcm9hY2ggZm9yIGNhbGN1bGF0aW5nIHNwbGF0IGRpc3RhbmNlcyBmcm9tIHRoZSBjYW1lcmFcclxuICAgICAgICB0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uID0gaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb247XHJcblxyXG4gICAgICAgIC8vIFdoZW4gdHJ1ZSwgd2lsbCBwZXJmb3JtIGFkZGl0aW9uYWwgc3RlcHMgZHVyaW5nIHJlbmRlcmluZyB0byBhZGRyZXNzIGFydGlmYWN0cyBjYXVzZWQgYnkgdGhlIHJlbmRlcmluZyBvZiBnYXVzc2lhbnMgYXQgYVxyXG4gICAgICAgIC8vIHN1YnN0YW50aWFsbHkgZGlmZmVyZW50IHJlc29sdXRpb24gdGhhbiB0aGF0IGF0IHdoaWNoIHRoZXkgd2VyZSByZW5kZXJlZCBkdXJpbmcgdHJhaW5pbmcuIFRoaXMgd2lsbCBvbmx5IHdvcmsgY29ycmVjdGx5XHJcbiAgICAgICAgLy8gZm9yIG1vZGVscyB0aGF0IHdlcmUgdHJhaW5lZCB1c2luZyBhIHByb2Nlc3MgdGhhdCB1dGlsaXplcyB0aGlzIGNvbXBlbnNhdGlvbiBjYWxjdWxhdGlvbi4gRm9yIG1vcmUgZGV0YWlsczpcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbmVyZnN0dWRpby1wcm9qZWN0L2dzcGxhdC9wdWxsLzExN1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaGRlY28taW5yaWEvZ2F1c3NpYW4tc3BsYXR0aW5nL2lzc3Vlcy8yOTQjaXNzdWVjb21tZW50LTE3NzI2ODgwOTNcclxuICAgICAgICB0aGlzLmFudGlhbGlhc2VkID0gYW50aWFsaWFzZWQ7XHJcblxyXG4gICAgICAgIC8vIFRoZSBzaXplIG9mIHRoZSAyRCBrZXJuZWwgdXNlZCBmb3Igc3BsYXQgcmVuZGVyaW5nXHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIGFkanVzdCB0aGUgMkQga2VybmVsIHNpemUgYWZ0ZXIgdGhlIHByb2plY3Rpb25cclxuICAgICAgICB0aGlzLmtlcm5lbDJEU2l6ZSA9IGtlcm5lbDJEU2l6ZTtcclxuXHJcbiAgICAgICAgLy8gU3BlY2lmeSB0aGUgbWF4aW11bSBjbGlwIHNwYWNlIHNwbGF0IHNpemUsIGNhbiBoZWxwIGRlYWwgd2l0aCBsYXJnZSBzcGxhdHMgdGhhdCBnZXQgdG9vIHVud2llbGR5XHJcbiAgICAgICAgdGhpcy5tYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSA9IG1heFNjcmVlblNwYWNlU3BsYXRTaXplO1xyXG5cclxuICAgICAgICAvLyBUaGUgdmVyYm9zaXR5IG9mIGNvbnNvbGUgbG9nZ2luZ1xyXG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcclxuXHJcbiAgICAgICAgLy8gRGVncmVlIDAgbWVhbnMgbm8gc3BoZXJpY2FsIGhhcm1vbmljc1xyXG4gICAgICAgIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlO1xyXG4gICAgICAgIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyID0gc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllcjtcclxuXHJcbiAgICAgICAgLy8gVGhlIGluZGl2aWR1YWwgc3BsYXQgc2NlbmVzIHN0b3JlZCBpbiB0aGlzIHNwbGF0IG1lc2gsIGVhY2ggY29udGFpbmluZyB0aGVpciBvd24gdHJhbnNmb3JtXHJcbiAgICAgICAgdGhpcy5zY2VuZXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gU3BlY2lhbCBvY3RyZWUgdGFpbG9yZWQgdG8gU3BsYXRNZXNoIGluc3RhbmNlc1xyXG4gICAgICAgIHRoaXMuc3BsYXRUcmVlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmJhc2VTcGxhdFRyZWUgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSB0ZXh0dXJlcyBhbmQgdGhlIGludGVybWVkaWF0ZSBkYXRhIHVzZWQgdG8gcG9wdWxhdGUgdGhlbVxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMgPSB7fTtcclxuICAgICAgICB0aGlzLmZsYW1lTW9kZWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkJTTnVtID0gMDtcclxuICAgICAgICB0aGlzLmJzV2VpZ2h0ID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuYm9uZXNNYXRyaXggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYm9uZXNOdW0gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYm9uZXNXZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50ID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnkgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sgPSB7XHJcbiAgICAgICAgICAgICdpZCc6IG51bGwsXHJcbiAgICAgICAgICAgICd2ZXJ0ZXhTaGFkZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnZnJhZ21lbnRTaGFkZXInOiBudWxsLFxyXG4gICAgICAgICAgICAncHJvZ3JhbSc6IG51bGwsXHJcbiAgICAgICAgICAgICdjZW50ZXJzQnVmZmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ3NjZW5lSW5kZXhlc0J1ZmZlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdvdXREaXN0YW5jZXNCdWZmZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnY2VudGVyc0xvYyc6IC0xLFxyXG4gICAgICAgICAgICAnbW9kZWxWaWV3UHJvakxvYyc6IC0xLFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzTG9jJzogLTEsXHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm1zTG9jcyc6IFtdXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9Mb2NhbFNwbGF0SW5kZXhNYXAgPSBbXTtcclxuICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXAgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gT3B0aW9uYWwgaXJpcyBvY2NsdXNpb24gY29uZmlndXJhdGlvbiBmcm9tIGF2YXRhciBaSVBcclxuICAgICAgICB0aGlzLmlyaXNPY2NsdXNpb25Db25maWcgPSBpcmlzT2NjbHVzaW9uQ29uZmlnO1xyXG5cclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVzID0gW107XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRNYXhTcGxhdENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuZmlyc3RSZW5kZXJUaW1lID0gLTE7XHJcbiAgICAgICAgdGhpcy5maW5hbEJ1aWxkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMud2ViR0xVdGlscyA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm94MygpO1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlZFNjZW5lQ2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkNoYW5naW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXRTY2FsZSA9IDEuMDtcclxuICAgICAgICB0aGlzLnBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3Bvc2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0UmVuZGVyZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgYSBjb250YWluZXIgZm9yIGVhY2ggc2NlbmUgbWFuYWdlZCBieSB0aGlzIHNwbGF0IG1lc2ggYmFzZWQgb24gYW4gaW5zdGFuY2Ugb2YgU3BsYXRCdWZmZXIsIGFsb25nIHdpdGggb3B0aW9uYWxcclxuICAgICAqIHRyYW5zZm9ybSBkYXRhIChwb3NpdGlvbiwgc2NhbGUsIHJvdGF0aW9uKSBwYXNzZWQgdG8gdGhlIHNwbGF0IG1lc2ggZHVyaW5nIHRoZSBidWlsZCBwcm9jZXNzLlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxUSFJFRS5NYXRyaXg0Pn0gc3BsYXRCdWZmZXJzIFNwbGF0QnVmZmVyIGluc3RhbmNlcyBjb250YWluaW5nIHNwbGF0cyBmb3IgZWFjaCBzY2VuZVxyXG4gICAgICogQHBhcmFtIHtBcnJheTxvYmplY3Q+fSBzY2VuZU9wdGlvbnMgQXJyYXkgb2Ygb3B0aW9ucyBvYmplY3RzOiB7XHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICBwb3NpdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUG9zaXRpb24gb2YgdGhlIHNjZW5lLCBhY3RzIGFzIGFuIG9mZnNldCBmcm9tIGl0cyBkZWZhdWx0IHBvc2l0aW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMF1cclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHJvdGF0aW9uIChBcnJheTxudW1iZXI+KTogICBSb3RhdGlvbiBvZiB0aGUgc2NlbmUgcmVwcmVzZW50ZWQgYXMgYSBxdWF0ZXJuaW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMCwgMV1cclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHNjYWxlIChBcnJheTxudW1iZXI+KTogICAgICBTY2VuZSdzIHNjYWxlLCBkZWZhdWx0cyB0byBbMSwgMSwgMV1cclxuICAgICAqIH1cclxuICAgICAqIEByZXR1cm4ge0FycmF5PFRIUkVFLk1hdHJpeDQ+fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnVpbGRTY2VuZXMocGFyZW50T2JqZWN0LCBzcGxhdEJ1ZmZlcnMsIHNjZW5lT3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHNjZW5lcyA9IFtdO1xyXG4gICAgICAgIHNjZW5lcy5sZW5ndGggPSBzcGxhdEJ1ZmZlcnMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRCdWZmZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gc3BsYXRCdWZmZXJzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gc2NlbmVPcHRpb25zW2ldIHx8IHt9O1xyXG4gICAgICAgICAgICBsZXQgcG9zaXRpb25BcnJheSA9IG9wdGlvbnNbJ3Bvc2l0aW9uJ10gfHwgWzAsIDAsIDBdO1xyXG4gICAgICAgICAgICBsZXQgcm90YXRpb25BcnJheSA9IG9wdGlvbnNbJ3JvdGF0aW9uJ10gfHwgWzAsIDAsIDAsIDFdO1xyXG4gICAgICAgICAgICBsZXQgc2NhbGVBcnJheSA9IG9wdGlvbnNbJ3NjYWxlJ10gfHwgWzEsIDEsIDFdO1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHBvc2l0aW9uQXJyYXkpO1xyXG4gICAgICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCkuZnJvbUFycmF5KHJvdGF0aW9uQXJyYXkpO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHNjYWxlQXJyYXkpO1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IFNwbGF0TWVzaC5jcmVhdGVTY2VuZShzcGxhdEJ1ZmZlciwgcG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCB8fCAxLCBvcHRpb25zLm9wYWNpdHksIG9wdGlvbnMudmlzaWJsZSk7XHJcbiAgICAgICAgICAgIHBhcmVudE9iamVjdC5hZGQoc2NlbmUpO1xyXG4gICAgICAgICAgICBzY2VuZXNbaV0gPSBzY2VuZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNjZW5lcztcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVTY2VuZShzcGxhdEJ1ZmZlciwgcG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsZSwgbWluaW11bUFscGhhLCBvcGFjaXR5ID0gMS4wLCB2aXNpYmxlID0gdHJ1ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU3BsYXRTY2VuZShzcGxhdEJ1ZmZlciwgcG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsZSwgbWluaW11bUFscGhhLCBvcGFjaXR5LCB2aXNpYmxlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIGRhdGEgc3RydWN0dXJlcyB0aGF0IG1hcCBnbG9iYWwgc3BsYXQgaW5kZXhlcyAoYmFzZWQgb24gYSB1bmlmaWVkIGluZGV4IGFjcm9zcyBhbGwgc3BsYXQgYnVmZmVycykgdG9cclxuICAgICAqIGxvY2FsIGRhdGEgd2l0aGluIGEgc2luZ2xlIHNjZW5lLlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxTcGxhdEJ1ZmZlcj59IHNwbGF0QnVmZmVycyBJbnN0YW5jZXMgb2YgU3BsYXRCdWZmZXIgb2ZmIHdoaWNoIHRvIGJ1aWxkIHRoZSBtYXBzXHJcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZFNwbGF0SW5kZXhNYXBzKHNwbGF0QnVmZmVycykge1xyXG4gICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleE1hcCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhNYXAgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHNwbGF0QnVmZmVycy5sZW5ndGg7IHMrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHNwbGF0QnVmZmVyc1tzXTtcclxuICAgICAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IHNwbGF0QnVmZmVyLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhTcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3BsYXRJbmRleE1hcFt0b3RhbFNwbGF0Q291bnRdID0gaTtcclxuICAgICAgICAgICAgICAgIHNjZW5lSW5kZXhNYXBbdG90YWxTcGxhdENvdW50XSA9IHM7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFNwbGF0Q291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsb2NhbFNwbGF0SW5kZXhNYXAsXHJcbiAgICAgICAgICAgIHNjZW5lSW5kZXhNYXBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgYW4gaW5zdGFuY2Ugb2YgU3BsYXRUcmVlIChhIHNwZWNpYWxpemVkIG9jdHJlZSkgZm9yIHRoZSBnaXZlbiBzcGxhdCBtZXNoLlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBtaW5BbHBoYXMgQXJyYXkgb2YgbWluaW11bSBzcGxhdCBzbHBoYXMgZm9yIGVhY2ggc2NlbmVcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXBsb2FkIG9mIHNwbGF0IGNlbnRlcnMgdG8gdGhlIHNwbGF0IHRyZWVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGZpbmlzaGVzLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGNvbnZlcnNpb24gb2YgdGhlIGxvY2FsIHNwbGF0IHRyZWUgZnJvbVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGZvcm1hdCBwcm9kdWNlZCBieSB0aGUgc3BsYXQgdHJlZSBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGVuZHMuXHJcbiAgICAgKiBAcmV0dXJuIHtTcGxhdFRyZWV9XHJcbiAgICAgKi9cclxuICAgICBidWlsZFNwbGF0VHJlZSA9IChtaW5BbHBoYXMgPSBbXSwgb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbikgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VTcGxhdFRyZWUoKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogZXhwb3NlIFNwbGF0VHJlZSBjb25zdHJ1Y3RvciBwYXJhbWV0ZXJzIChtYXhpbXVtRGVwdGggYW5kIG1heENlbnRlcnNQZXJOb2RlKSBzbyB0aGF0IHRoZXkgY2FuXHJcbiAgICAgICAgICAgIC8vIGJlIGNvbmZpZ3VyZWQgb24gYSBwZXItc2NlbmUgYmFzaXNcclxuICAgICAgICAgICAgdGhpcy5iYXNlU3BsYXRUcmVlID0gbmV3IFNwbGF0VHJlZSg4LCAxMDAwKTtcclxuICAgICAgICAgICAgY29uc3QgYnVpbGRTdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRDb2xvciA9IG5ldyBWZWN0b3I0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVNwbGF0VHJlZS5wcm9jZXNzU3BsYXRNZXNoKHRoaXMsIChzcGxhdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFNwbGF0Q29sb3Ioc3BsYXRJbmRleCwgc3BsYXRDb2xvcik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2VuZUluZGV4ID0gdGhpcy5nZXRTY2VuZUluZGV4Rm9yU3BsYXQoc3BsYXRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5BbHBoYSA9IG1pbkFscGhhc1tzY2VuZUluZGV4XSB8fCAxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNwbGF0Q29sb3IudyA+PSBtaW5BbHBoYTtcclxuICAgICAgICAgICAgfSwgb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbilcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVpbGRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBidWlsZFN0YXJ0VGltZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID49IExvZ0xldmVsLkluZm8pIGxvZ2dlci5pbmZvKCdTcGxhdFRyZWUgYnVpbGQ6ICcgKyBidWlsZFRpbWUgKyAnIG1zJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRUcmVlID0gdGhpcy5iYXNlU3BsYXRUcmVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmFzZVNwbGF0VHJlZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsZWF2ZXNXaXRoVmVydGljZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhdmdTcGxhdENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWF4U3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRUcmVlLnZpc2l0TGVhdmVzKChub2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVTcGxhdENvdW50ID0gbm9kZS5kYXRhLmluZGV4ZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZVNwbGF0Q291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmdTcGxhdENvdW50ICs9IG5vZGVTcGxhdENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudCA9IE1hdGgubWF4KG1heFNwbGF0Q291bnQsIG5vZGVTcGxhdENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVhdmVzV2l0aFZlcnRpY2VzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA+PSBMb2dMZXZlbC5JbmZvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBTcGxhdFRyZWUgbGVhdmVzOiAke3RoaXMuc3BsYXRUcmVlLmNvdW50TGVhdmVzKCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBTcGxhdFRyZWUgbGVhdmVzIHdpdGggc3BsYXRzOiR7bGVhdmVzV2l0aFZlcnRpY2VzfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmdTcGxhdENvdW50ID0gYXZnU3BsYXRDb3VudCAvIG5vZGVDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYEF2ZyBzcGxhdCBjb3VudCBwZXIgbm9kZTogJHthdmdTcGxhdENvdW50fWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgVG90YWwgc3BsYXQgY291bnQ6ICR7dGhpcy5nZXRTcGxhdENvdW50KCl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IHRoaXMgaW5zdGFuY2Ugb2YgU3BsYXRNZXNoLlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxTcGxhdEJ1ZmZlcj59IHNwbGF0QnVmZmVycyBUaGUgYmFzZSBzcGxhdCBkYXRhLCBpbnN0YW5jZXMgb2YgU3BsYXRCdWZmZXJcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8b2JqZWN0Pn0gc2NlbmVPcHRpb25zIER5bmFtaWMgb3B0aW9ucyBmb3IgZWFjaCBzY2VuZSB7XHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZDogSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KSwgZGVmYXVsdHMgdG8gMVxyXG4gICAgICpcclxuICAgICAqICAgICAgICAgcG9zaXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFBvc2l0aW9uIG9mIHRoZSBzY2VuZSwgYWN0cyBhcyBhbiBvZmZzZXQgZnJvbSBpdHMgZGVmYXVsdCBwb3NpdGlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDBdXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICByb3RhdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUm90YXRpb24gb2YgdGhlIHNjZW5lIHJlcHJlc2VudGVkIGFzIGEgcXVhdGVybmlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDAsIDFdXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICBzY2FsZSAoQXJyYXk8bnVtYmVyPik6ICAgICAgU2NlbmUncyBzY2FsZSwgZGVmYXVsdHMgdG8gWzEsIDEsIDFdXHJcbiAgICAgKlxyXG4gICAgICogfVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBrZWVwU2NlbmVUcmFuc2Zvcm1zIEZvciBhIHNjZW5lIHRoYXQgYWxyZWFkeSBleGlzdHMgYW5kIGlzIGJlaW5nIG92ZXJ3cml0dGVuLCB0aGlzIGZsYWdcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXlzIHRvIGtlZXAgdGhlIHRyYW5zZm9ybSBmcm9tIHRoZSBleGlzdGluZyBzY2VuZS5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmluYWxCdWlsZCBXaWxsIHRoZSBzcGxhdCBtZXNoIGJlIGluIGl0cyBmaW5hbCBzdGF0ZSBhZnRlciB0aGlzIGJ1aWxkP1xyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSB1cGxvYWQgb2Ygc3BsYXQgY2VudGVycyB0byB0aGUgc3BsYXQgdHJlZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIgd29ya2VyIHN0YXJ0cyBhbmQgZmluaXNoZXMuXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgY29udmVyc2lvbiBvZiB0aGUgbG9jYWwgc3BsYXQgdHJlZSBmcm9tXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZm9ybWF0IHByb2R1Y2VkIGJ5IHRoZSBzcGxhdCB0cmVlIGJ1aWxkZXIgd29ya2VyIHN0YXJ0cyBhbmQgZW5kcy5cclxuICAgICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgaW5mbyBhYm91dCB0aGUgc3BsYXRzIHRoYXQgYXJlIHVwZGF0ZWRcclxuICAgICAqL1xyXG4gICAgYnVpbGQoc3BsYXRCdWZmZXJzLCBzY2VuZU9wdGlvbnMsIGtlZXBTY2VuZVRyYW5zZm9ybXMgPSB0cnVlLCBmaW5hbEJ1aWxkID0gZmFsc2UsXHJcbiAgICAgICAgICBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQsIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uLCBwcmVzZXJ2ZVZpc2libGVSZWdpb24gPSB0cnVlKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2NlbmVPcHRpb25zID0gc2NlbmVPcHRpb25zO1xyXG4gICAgICAgIHRoaXMuZmluYWxCdWlsZCA9IGZpbmFsQnVpbGQ7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSBTcGxhdE1lc2guZ2V0VG90YWxNYXhTcGxhdENvdW50Rm9yU3BsYXRCdWZmZXJzKHNwbGF0QnVmZmVycyk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5ld1NjZW5lcyA9IFNwbGF0TWVzaC5idWlsZFNjZW5lcyh0aGlzLCBzcGxhdEJ1ZmZlcnMsIHNjZW5lT3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKGtlZXBTY2VuZVRyYW5zZm9ybXMpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGggJiYgaSA8IG5ld1NjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3U2NlbmUgPSBuZXdTY2VuZXNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1NjZW5lID0gdGhpcy5nZXRTY2VuZShpKTtcclxuICAgICAgICAgICAgICAgIG5ld1NjZW5lLmNvcHlUcmFuc2Zvcm1EYXRhKGV4aXN0aW5nU2NlbmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NlbmVzID0gbmV3U2NlbmVzO1xyXG5cclxuICAgICAgICBsZXQgbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMztcclxuICAgICAgICBmb3IgKGxldCBzcGxhdEJ1ZmZlciBvZiBzcGxhdEJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXJTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBzcGxhdEJ1ZmZlci5nZXRNaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUoKTtcclxuICAgICAgICAgICAgaWYgKHNwbGF0QnVmZmVyU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIDwgbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBzcGxhdEJ1ZmZlclNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG5cclxuICAgICAgICBsZXQgc3BsYXRCdWZmZXJzQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChzcGxhdEJ1ZmZlcnMubGVuZ3RoICE9PSB0aGlzLmxhc3RCdWlsZFNjZW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc3BsYXRCdWZmZXJzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdEJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gc3BsYXRCdWZmZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwbGF0QnVmZmVyICE9PSB0aGlzLmxhc3RCdWlsZFNjZW5lc1tpXS5zcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0QnVmZmVyc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaXNVcGRhdGVCdWlsZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmVzLmxlbmd0aCAhPT0gMSB8fFxyXG4gICAgICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lQ291bnQgIT09IHRoaXMuc2NlbmVzLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICB0aGlzLmxhc3RCdWlsZE1heFNwbGF0Q291bnQgIT09IG1heFNwbGF0Q291bnQgfHxcclxuICAgICAgICAgICAgc3BsYXRCdWZmZXJzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgaXNVcGRhdGVCdWlsZCA9IGZhbHNlO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgIGlmICghaXNVcGRhdGVCdWlsZCkge1xyXG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJveDMoKTtcclxuICAgICAgICAgICAgaWYgKCFwcmVzZXJ2ZVZpc2libGVSZWdpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlciA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cyA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVuZGVyVGltZSA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEJ1aWxkTWF4U3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZU1lc2hEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBTcGxhdEdlb21ldHJ5LmJ1aWxkKG1heFNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwgPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGQodGhpcy5keW5hbWljTW9kZSwgdGhpcy5lbmFibGVPcHRpb25hbEVmZmVjdHMsIHRoaXMuYW50aWFsaWFzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIHRoaXMuc3BsYXRTY2FsZSwgdGhpcy5wb2ludENsb3VkTW9kZUVuYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCB0aGlzLmtlcm5lbDJEU2l6ZSwgdGhpcy5pcmlzT2NjbHVzaW9uQ29uZmlnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwgPSBTcGxhdE1hdGVyaWFsMkQuYnVpbGQodGhpcy5keW5hbWljTW9kZSwgdGhpcy5lbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRTY2FsZSwgdGhpcy5wb2ludENsb3VkTW9kZUVuYWJsZWQsIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgaW5kZXhNYXBzID0gU3BsYXRNZXNoLmJ1aWxkU3BsYXRJbmRleE1hcHMoc3BsYXRCdWZmZXJzKTtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9Mb2NhbFNwbGF0SW5kZXhNYXAgPSBpbmRleE1hcHMubG9jYWxTcGxhdEluZGV4TWFwO1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXAgPSBpbmRleE1hcHMuc2NlbmVJbmRleE1hcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyU3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCh0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVKSB0aGlzLnNldHVwRGlzdGFuY2VzQ29tcHV0YXRpb25UcmFuc2Zvcm1GZWVkYmFjaygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGFVcGRhdGVSZXN1bHRzID0gdGhpcy5yZWZyZXNoR1BVRGF0YUZyb21TcGxhdEJ1ZmZlcnMoaXNVcGRhdGVCdWlsZCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZXNbaV0gPSB0aGlzLnNjZW5lc1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50ID0gc3BsYXRCdWZmZXJTcGxhdENvdW50O1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkTWF4U3BsYXRDb3VudCA9IHRoaXMuZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVDb3VudCA9IHRoaXMuc2NlbmVzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8gaWYgKGZpbmFsQnVpbGQgJiYgdGhpcy5zY2VuZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmJ1aWxkU3BsYXRUcmVlKHNjZW5lT3B0aW9ucy5tYXAob3B0aW9ucyA9PiBvcHRpb25zLnNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkIHx8IDEpLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCwgb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24pXHJcbiAgICAgICAgLy8gICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgIGlmICh0aGlzLm9uU3BsYXRUcmVlUmVhZHlDYWxsYmFjaykgdGhpcy5vblNwbGF0VHJlZVJlYWR5Q2FsbGJhY2sodGhpcy5zcGxhdFRyZWUpO1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5vblNwbGF0VHJlZVJlYWR5Q2FsbGJhY2sgPSBudWxsO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9ICh0aGlzLnNjZW5lcy5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRhdGFVcGRhdGVSZXN1bHRzO1xyXG4gICAgfVxyXG5cclxuICAgIGZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZVRleHR1cmVEYXRhID0gKHRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHRleHR1cmUuc291cmNlLmRhdGE7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0ZXh0dXJlLmltYWdlO1xyXG4gICAgICAgICAgICB0ZXh0dXJlLm9uVXBkYXRlID0gbnVsbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb3ZhcmlhbmNlcztcclxuICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jZW50ZXJzO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvbG9ycztcclxuICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5zcGhlcmljYWxIYXJtb25pY3M7XHJcblxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNlbnRlckNvbG9ycy5kYXRhO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNvdmFyaWFuY2VzLmRhdGE7XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcy5kYXRhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zY2VuZUluZGV4ZXMpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc2NlbmVJbmRleGVzLmRhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNlbnRlckNvbG9ycy50ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNlbnRlckNvbG9ycy50ZXh0dXJlLm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVUZXh0dXJlRGF0YSh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNlbnRlckNvbG9ycy50ZXh0dXJlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmZsYW1lTW9kZWxQb3NUZXh0dXJlLnRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuZmxhbWVNb2RlbFBvc1RleHR1cmUudGV4dHVyZS5vblVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlVGV4dHVyZURhdGEodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5mbGFtZU1vZGVsUG9zVGV4dHVyZS50ZXh0dXJlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNvdmFyaWFuY2VzLnRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY292YXJpYW5jZXMudGV4dHVyZS5vblVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlVGV4dHVyZURhdGEodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jb3ZhcmlhbmNlcy50ZXh0dXJlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzLnRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzLnRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MudGV4dHVyZS5vblVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVUZXh0dXJlRGF0YSh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcy50ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcy50ZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5vblVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlVGV4dHVyZURhdGEodGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNjZW5lSW5kZXhlcykge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNjZW5lSW5kZXhlcy50ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zY2VuZUluZGV4ZXMudGV4dHVyZS5vblVwZGF0ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVRleHR1cmVEYXRhKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc2NlbmVJbmRleGVzLnRleHR1cmUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRGlzcG9zZSBhbGwgcmVzb3VyY2VzIGhlbGQgYnkgdGhlIHNwbGF0IG1lc2hcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLmRpc3Bvc2VNZXNoRGF0YSgpO1xyXG4gICAgICAgIHRoaXMuZGlzcG9zZVRleHR1cmVzKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlU3BsYXRUcmVlKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlRGlzdGFuY2VzQ29tcHV0YXRpb25HUFVSZXNvdXJjZXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2VuZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrID0ge1xyXG4gICAgICAgICAgICAnaWQnOiBudWxsLFxyXG4gICAgICAgICAgICAndmVydGV4U2hhZGVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ2ZyYWdtZW50U2hhZGVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ3Byb2dyYW0nOiBudWxsLFxyXG4gICAgICAgICAgICAnY2VudGVyc0J1ZmZlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdzY2VuZUluZGV4ZXNCdWZmZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnb3V0RGlzdGFuY2VzQnVmZmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ2NlbnRlcnNMb2MnOiAtMSxcclxuICAgICAgICAgICAgJ21vZGVsVmlld1Byb2pMb2MnOiAtMSxcclxuICAgICAgICAgICAgJ3NjZW5lSW5kZXhlc0xvYyc6IC0xLFxyXG4gICAgICAgICAgICAndHJhbnNmb3Jtc0xvY3MnOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvTG9jYWxTcGxhdEluZGV4TWFwID0gW107XHJcbiAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwID0gW107XHJcblxyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZE1heFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5maXJzdFJlbmRlclRpbWUgPSAtMTtcclxuICAgICAgICB0aGlzLmZpbmFsQnVpbGQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy53ZWJHTFV0aWxzID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3gzKCk7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVkU2NlbmVDZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlciA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25SYWRpdXMgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cyA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQ2hhbmdpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdFNjYWxlID0gMS4wO1xyXG4gICAgICAgIHRoaXMucG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGFzdFJlbmRlcmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2Ugb2Ygb25seSB0aGUgVGhyZWUuanMgbWVzaCByZXNvdXJjZXMgKGdlb21ldHJ5LCBtYXRlcmlhbCwgYW5kIHRleHR1cmUpXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2VNZXNoRGF0YSgpIHtcclxuICAgICAgICBpZiAodGhpcy5nZW9tZXRyeSAmJiB0aGlzLmdlb21ldHJ5ICE9PSBkdW1teUdlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlVGV4dHVyZXMoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgdGV4dHVyZUtleSBpbiB0aGlzLnNwbGF0RGF0YVRleHR1cmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMsIHRleHR1cmVLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0dXJlQ29udGFpbmVyID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1t0ZXh0dXJlS2V5XTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlQ29udGFpbmVyLnRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlQ29udGFpbmVyLnRleHR1cmUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVDb250YWluZXIudGV4dHVyZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcyA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZVNwbGF0VHJlZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zcGxhdFRyZWUpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdFRyZWUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0VHJlZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmJhc2VTcGxhdFRyZWUpIHtcclxuICAgICAgICAgICAgdGhpcy5iYXNlU3BsYXRUcmVlLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5iYXNlU3BsYXRUcmVlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRUcmVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGF0VHJlZTtcclxuICAgIH1cclxuXHJcbiAgICBvblNwbGF0VHJlZVJlYWR5KGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vblNwbGF0VHJlZVJlYWR5Q2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjb3BpZXMgb2YgZGF0YSB0aGF0IGFyZSBuZWNlc3NhcnkgZm9yIHNwbGF0IGRpc3RhbmNlIGNvbXB1dGF0aW9uOiBzcGxhdCBjZW50ZXIgcG9zaXRpb25zIGFuZCBzcGxhdFxyXG4gICAgICogc2NlbmUgaW5kZXhlcyAobmVjZXNzYXJ5IGZvciBhcHBseWluZyBkeW5hbWljIHNjZW5lIHRyYW5zZm9ybWF0aW9ucyBkdXJpbmcgZGlzdGFuY2UgY29tcHV0YXRpb24pXHJcbiAgICAgKiBAcGFyYW0geyp9IHN0YXJ0IFRoZSBpbmRleCBhdCB3aGljaCB0byBzdGFydCBjb3B5aW5nIGRhdGFcclxuICAgICAqIEBwYXJhbSB7Kn0gZW5kICBUaGUgaW5kZXggYXQgd2hpY2ggdG8gc3RvcCBjb3B5aW5nIGRhdGFcclxuICAgICAqIEByZXR1cm4ge29iamVjdH1cclxuICAgICAqL1xyXG4gICAgZ2V0RGF0YUZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKHN0YXJ0LCBlbmQpIHtcclxuICAgICAgICBjb25zdCBjZW50ZXJzID0gdGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZWdlckNlbnRlcnMoc3RhcnQsIGVuZCwgdHJ1ZSkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEZsb2F0Q2VudGVycyhzdGFydCwgZW5kLCB0cnVlKTtcclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4ZXMgPSB0aGlzLmdldFNjZW5lSW5kZXhlcyhzdGFydCwgZW5kKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjZW50ZXJzLFxyXG4gICAgICAgICAgICBzY2VuZUluZGV4ZXNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaCBkYXRhIHRleHR1cmVzIGFuZCBHUFUgYnVmZmVycyB3aXRoIHNwbGF0IGRhdGEgZnJvbSB0aGUgc3BsYXQgYnVmZmVycyBiZWxvbmdpbmcgdG8gdGhpcyBtZXNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaW5jZUxhc3RCdWlsZE9ubHkgU3BlY2lmeSB3aGV0aGVyIG9yIG5vdCB0byBvbmx5IHVwZGF0ZSBmb3Igc3BsYXRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHNpbmNlIHRoZSBsYXN0IGJ1aWxkLlxyXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICByZWZyZXNoR1BVRGF0YUZyb21TcGxhdEJ1ZmZlcnMoc2luY2VMYXN0QnVpbGRPbmx5KSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCh0cnVlKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hEYXRhVGV4dHVyZXNGcm9tU3BsYXRCdWZmZXJzKHNpbmNlTGFzdEJ1aWxkT25seSk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlU3RhcnQgPSBzaW5jZUxhc3RCdWlsZE9ubHkgPyB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgOiAwO1xyXG4gICAgICAgIGNvbnN0IHsgY2VudGVycywgc2NlbmVJbmRleGVzIH0gPSB0aGlzLmdldERhdGFGb3JEaXN0YW5jZXNDb21wdXRhdGlvbih1cGRhdGVTdGFydCwgc3BsYXRDb3VudCAtIDEpO1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZURpc3RhbmNlc0NvbXB1dGF0aW9uT25HUFUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoR1BVQnVmZmVyc0ZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKGNlbnRlcnMsIHNjZW5lSW5kZXhlcywgc2luY2VMYXN0QnVpbGRPbmx5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ2Zyb20nOiB1cGRhdGVTdGFydCxcclxuICAgICAgICAgICAgJ3RvJzogc3BsYXRDb3VudCAtIDEsXHJcbiAgICAgICAgICAgICdjb3VudCc6IHNwbGF0Q291bnQgLSB1cGRhdGVTdGFydCxcclxuICAgICAgICAgICAgJ2NlbnRlcnMnOiBjZW50ZXJzLFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzJzogc2NlbmVJbmRleGVzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgR1BVIGJ1ZmZlcnMgdGhhdCBhcmUgdXNlZCBmb3IgY29tcHV0aW5nIHNwbGF0IGRpc3RhbmNlcyBvbiB0aGUgR1BVLlxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjZW50ZXJzIFNwbGF0IGNlbnRlciBwb3NpdGlvbnNcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2NlbmVJbmRleGVzIEluZGV4ZXMgb2YgdGhlIHNjZW5lIHRvIHdoaWNoIGVhY2ggc3BsYXQgYmVsb25nc1xyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaW5jZUxhc3RCdWlsZE9ubHkgU3BlY2lmeSB3aGV0aGVyIG9yIG5vdCB0byBvbmx5IHVwZGF0ZSBmb3Igc3BsYXRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHNpbmNlIHRoZSBsYXN0IGJ1aWxkLlxyXG4gICAgICovXHJcbiAgICByZWZyZXNoR1BVQnVmZmVyc0ZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKGNlbnRlcnMsIHNjZW5lSW5kZXhlcywgc2luY2VMYXN0QnVpbGRPbmx5ID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSBzaW5jZUxhc3RCdWlsZE9ubHkgPyB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgOiAwO1xyXG4gICAgICAgIHRoaXMudXBkYXRlR1BVQ2VudGVyc0J1ZmZlckZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKHNpbmNlTGFzdEJ1aWxkT25seSwgY2VudGVycywgb2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUdQVVRyYW5zZm9ybUluZGV4ZXNCdWZmZXJGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihzaW5jZUxhc3RCdWlsZE9ubHksIHNjZW5lSW5kZXhlcywgb2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZnJlc2ggZGF0YSB0ZXh0dXJlcyB3aXRoIGRhdGEgZnJvbSB0aGUgc3BsYXQgYnVmZmVycyBmb3IgdGhpcyBtZXNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzaW5jZUxhc3RCdWlsZE9ubHkgU3BlY2lmeSB3aGV0aGVyIG9yIG5vdCB0byBvbmx5IHVwZGF0ZSBmb3Igc3BsYXRzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHNpbmNlIHRoZSBsYXN0IGJ1aWxkLlxyXG4gICAgICovXHJcbiAgICByZWZyZXNoRGF0YVRleHR1cmVzRnJvbVNwbGF0QnVmZmVycyhzaW5jZUxhc3RCdWlsZE9ubHkpIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KHRydWUpO1xyXG4gICAgICAgIGNvbnN0IGZyb21TcGxhdCA9IHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudDtcclxuICAgICAgICBjb25zdCB0b1NwbGF0ID0gc3BsYXRDb3VudCAtIDE7XHJcblxyXG4gICAgICAgIGlmICghc2luY2VMYXN0QnVpbGRPbmx5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBEYXRhVGV4dHVyZXMoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVCYXNlRGF0YUZyb21TcGxhdEJ1ZmZlcnMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhc2VEYXRhRnJvbVNwbGF0QnVmZmVycyhmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZXNGcm9tQmFzZURhdGEoZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVSZWdpb24oc2luY2VMYXN0QnVpbGRPbmx5KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR1cERhdGFUZXh0dXJlcygpIHtcclxuICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gdGhpcy5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCh0cnVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwb3NlVGV4dHVyZXMoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcHV0ZURhdGFUZXh0dXJlU2l6ZSA9IChlbGVtZW50c1BlclRleGVsLCBlbGVtZW50c1BlclNwbGF0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleFNpemUgPSBuZXcgVmVjdG9yMig0MDk2LCAxMDI0KTtcclxuICAgICAgICAgICAgd2hpbGUgKHRleFNpemUueCAqIHRleFNpemUueSAqIGVsZW1lbnRzUGVyVGV4ZWwgPCBtYXhTcGxhdENvdW50ICogZWxlbWVudHNQZXJTcGxhdCkgdGV4U2l6ZS55ICo9IDI7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXhTaXplO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGdldENvdmFyaWFuY2VzRWxlbWVudHNQZXJ0ZXhlbFN0b3JlZCA9IChjb21wcmVzc2lvbkxldmVsKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wcmVzc2lvbkxldmVsID49IDEgPyBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9TVE9SRUQgOiBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGdldENvdmFyaWFuY2VzSW5pdGlhbFRleHR1cmVTcGVjcyA9IChjb21wcmVzc2lvbkxldmVsKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzUGVyVGV4ZWxTdG9yZWQgPSBnZXRDb3ZhcmlhbmNlc0VsZW1lbnRzUGVydGV4ZWxTdG9yZWQoY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleFNpemUgPSBjb21wdXRlRGF0YVRleHR1cmVTaXplKGVsZW1lbnRzUGVyVGV4ZWxTdG9yZWQsIDYpO1xyXG4gICAgICAgICAgICByZXR1cm4ge2VsZW1lbnRzUGVyVGV4ZWxTdG9yZWQsIHRleFNpemV9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9IHRoaXMuZ2V0VGFyZ2V0Q292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwoKTtcclxuICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA9IDA7XHJcbiAgICAgICAgY29uc3Qgc2hDb21wcmVzc2lvbkxldmVsID0gdGhpcy5nZXRUYXJnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wcmVzc2lvbkxldmVsKCk7XHJcblxyXG4gICAgICAgIGxldCBjb3ZhcmlhbmNlcztcclxuICAgICAgICBsZXQgc2NhbGVzO1xyXG4gICAgICAgIGxldCByb3RhdGlvbnM7XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxDb3ZUZXhTcGVjcyA9IGdldENvdmFyaWFuY2VzSW5pdGlhbFRleHR1cmVTcGVjcyhjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIGlmIChpbml0aWFsQ292VGV4U3BlY3MudGV4U2l6ZS54ICogaW5pdGlhbENvdlRleFNwZWNzLnRleFNpemUueSA+IE1BWF9URVhUVVJFX1RFWEVMUyAmJiBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdmFyaWFuY2VzID0gbmV3IEZsb2F0MzJBcnJheShtYXhTcGxhdENvdW50ICogQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY2FsZXMgPSBuZXcgRmxvYXQzMkFycmF5KG1heFNwbGF0Q291bnQgKiAzKTtcclxuICAgICAgICAgICAgcm90YXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShtYXhTcGxhdENvdW50ICogNCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjZW50ZXJzID0gbmV3IEZsb2F0MzJBcnJheShtYXhTcGxhdENvdW50ICogMyk7XHJcbiAgICAgICAgY29uc3QgY29sb3JzID0gbmV3IFVpbnQ4QXJyYXkobWF4U3BsYXRDb3VudCAqIDQpO1xyXG5cclxuICAgICAgICBsZXQgU3BoZXJpY2FsSGFybW9uaWNzQXJyYXlUeXBlID0gRmxvYXQzMkFycmF5O1xyXG4gICAgICAgIGlmIChzaENvbXByZXNzaW9uTGV2ZWwgPT09IDEpIFNwaGVyaWNhbEhhcm1vbmljc0FycmF5VHlwZSA9IFVpbnQxNkFycmF5O1xyXG4gICAgICAgIGVsc2UgaWYgKHNoQ29tcHJlc3Npb25MZXZlbCA9PT0gMikgU3BoZXJpY2FsSGFybW9uaWNzQXJyYXlUeXBlID0gVWludDhBcnJheTtcclxuICAgICAgICBjb25zdCBzaENvbXBvbmVudENvdW50ID0gZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUodGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGNvbnN0IHNoRGF0YSA9IHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID8gbmV3IFNwaGVyaWNhbEhhcm1vbmljc0FycmF5VHlwZShtYXhTcGxhdENvdW50ICogc2hDb21wb25lbnRDb3VudCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8vIHNldCB1cCBjZW50ZXJzL2NvbG9ycyBkYXRhIHRleHR1cmVcclxuICAgICAgICBjb25zdCBjZW50ZXJzQ29sc1RleFNpemUgPSBjb21wdXRlRGF0YVRleHR1cmVTaXplKENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMLCA0KTtcclxuICAgICAgICBjb25zdCBwYWRkZWRDZW50ZXJzQ29scyA9IG5ldyBVaW50MzJBcnJheShjZW50ZXJzQ29sc1RleFNpemUueCAqIGNlbnRlcnNDb2xzVGV4U2l6ZS55ICogQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwpO1xyXG4gICAgICAgIFNwbGF0TWVzaC51cGRhdGVDZW50ZXJDb2xvcnNQYWRkZWREYXRhKDAsIHNwbGF0Q291bnQgLSAxLCBjZW50ZXJzLCBjb2xvcnMsIHBhZGRlZENlbnRlcnNDb2xzKTtcclxuXHJcbiAgICAgICAgY29uc3QgY2VudGVyc0NvbHNUZXggPSBuZXcgRGF0YVRleHR1cmUocGFkZGVkQ2VudGVyc0NvbHMsIGNlbnRlcnNDb2xzVGV4U2l6ZS54LCBjZW50ZXJzQ29sc1RleFNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICBjZW50ZXJzQ29sc1RleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICAgICAgY2VudGVyc0NvbHNUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY2VudGVyc0NvbG9yc1RleHR1cmUudmFsdWUgPSBjZW50ZXJzQ29sc1RleDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNlbnRlcnNDb2xvcnNUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGNlbnRlcnNDb2xzVGV4U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzID0ge1xyXG4gICAgICAgICAgICAnYmFzZURhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY292YXJpYW5jZXMnOiBjb3ZhcmlhbmNlcyxcclxuICAgICAgICAgICAgICAgICdzY2FsZXMnOiBzY2FsZXMsXHJcbiAgICAgICAgICAgICAgICAncm90YXRpb25zJzogcm90YXRpb25zLFxyXG4gICAgICAgICAgICAgICAgJ2NlbnRlcnMnOiBjZW50ZXJzLFxyXG4gICAgICAgICAgICAgICAgJ2NvbG9ycyc6IGNvbG9ycyxcclxuICAgICAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3MnOiBzaERhdGFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2NlbnRlckNvbG9ycyc6IHtcclxuICAgICAgICAgICAgICAgICdkYXRhJzogcGFkZGVkQ2VudGVyc0NvbHMsXHJcbiAgICAgICAgICAgICAgICAndGV4dHVyZSc6IGNlbnRlcnNDb2xzVGV4LFxyXG4gICAgICAgICAgICAgICAgJ3NpemUnOiBjZW50ZXJzQ29sc1RleFNpemVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCkge1xyXG4gICAgICAgICAgICAvLyBzZXQgdXAgY292YXJpYW5jZXMgZGF0YSB0ZXh0dXJlXHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb3ZUZXhTcGVjcyA9IGdldENvdmFyaWFuY2VzSW5pdGlhbFRleHR1cmVTcGVjcyhjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzRWxlbWVudHNQZXJUZXhlbFN0b3JlZCA9IGNvdlRleFNwZWNzLmVsZW1lbnRzUGVyVGV4ZWxTdG9yZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdlRleFNpemUgPSBjb3ZUZXhTcGVjcy50ZXhTaXplO1xyXG5cclxuICAgICAgICAgICAgbGV0IENvdmFyaWFuY2VzRGF0YVR5cGUgPSBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA+PSAxID8gVWludDMyQXJyYXkgOiBGbG9hdDMyQXJyYXk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzRWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZCA9IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID49IDEgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9BTExPQ0FURUQgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQUxMT0NBVEVEO1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc1RleHR1cmVEYXRhID0gbmV3IENvdmFyaWFuY2VzRGF0YVR5cGUoY292VGV4U2l6ZS54ICogY292VGV4U2l6ZS55ICogY292YXJpYW5jZXNFbGVtZW50c1BlclRleGVsQWxsb2NhdGVkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlRGF0YS5zZXQoY292YXJpYW5jZXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZVBhZGRlZENvbXByZXNzZWRDb3ZhcmlhbmNlc1RleHR1cmVEYXRhKGNvdmFyaWFuY2VzLCBjb3ZhcmlhbmNlc1RleHR1cmVEYXRhLCAwLCAwLCBjb3ZhcmlhbmNlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgY292VGV4O1xyXG4gICAgICAgICAgICBpZiAoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgY292VGV4ID0gbmV3IERhdGFUZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZURhdGEsIGNvdlRleFNpemUueCwgY292VGV4U2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgY292VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0LnZhbHVlID0gY292VGV4O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY292VGV4ID0gbmV3IERhdGFUZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZURhdGEsIGNvdlRleFNpemUueCwgY292VGV4U2l6ZS55LCBSR0JBRm9ybWF0LCBGbG9hdFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb3ZhcmlhbmNlc1RleHR1cmUudmFsdWUgPSBjb3ZUZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIGEgdXNhbXBsZXIyRCBuZWVkcyB0byBoYXZlIGEgdmFsaWQgdGV4dHVyZSBhdHRhY2hlZCBvciBXZWJHTCBjb21wbGFpbnNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGR1bW15VGV4ID0gbmV3IERhdGFUZXh0dXJlKG5ldyBVaW50MzJBcnJheSgzMiksIDIsIDIsIFJHQkFJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgZHVtbXlUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQudmFsdWUgPSBkdW1teVRleDtcclxuICAgICAgICAgICAgICAgIGR1bW15VGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb3ZUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdC52YWx1ZSA9IChjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA+PSAxKSA/IDEgOiAwO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvdmFyaWFuY2VzVGV4dHVyZVNpemUudmFsdWUuY29weShjb3ZUZXhTaXplKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2NvdmFyaWFuY2VzJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAnZGF0YSc6IGNvdmFyaWFuY2VzVGV4dHVyZURhdGEsXHJcbiAgICAgICAgICAgICAgICAndGV4dHVyZSc6IGNvdlRleCxcclxuICAgICAgICAgICAgICAgICdzaXplJzogY292VGV4U2l6ZSxcclxuICAgICAgICAgICAgICAgICdjb21wcmVzc2lvbkxldmVsJzogY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAnZWxlbWVudHNQZXJUZXhlbFN0b3JlZCc6IGNvdmFyaWFuY2VzRWxlbWVudHNQZXJUZXhlbFN0b3JlZCxcclxuICAgICAgICAgICAgICAgICdlbGVtZW50c1BlclRleGVsQWxsb2NhdGVkJzogY292YXJpYW5jZXNFbGVtZW50c1BlclRleGVsQWxsb2NhdGVkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gc2V0IHVwIHNjYWxlICYgcm90YXRpb25zIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50c1BlclNwbGF0ID0gNjtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNUZXhTaXplID0gY29tcHV0ZURhdGFUZXh0dXJlU2l6ZShTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCwgZWxlbWVudHNQZXJTcGxhdCk7XHJcbiAgICAgICAgICAgIGxldCBTY2FsZVJvdGF0aW9uc0RhdGFUeXBlID0gc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IFVpbnQxNkFycmF5IDogRmxvYXQzMkFycmF5O1xyXG4gICAgICAgICAgICBsZXQgc2NhbGVSb3RhdGlvbnNUZXh0dXJlVHlwZSA9IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID49IDEgPyBIYWxmRmxvYXRUeXBlIDogRmxvYXRUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCBwYWRkZWRTY2FsZVJvdGF0aW9ucyA9IG5ldyBTY2FsZVJvdGF0aW9uc0RhdGFUeXBlKHNjYWxlUm90YXRpb25zVGV4U2l6ZS54ICogc2NhbGVSb3RhdGlvbnNUZXhTaXplLnkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNDQUxFU19ST1RBVElPTlNfRUxFTUVOVFNfUEVSX1RFWEVMKTtcclxuXHJcbiAgICAgICAgICAgIFNwbGF0TWVzaC51cGRhdGVTY2FsZVJvdGF0aW9uc1BhZGRlZERhdGEoMCwgc3BsYXRDb3VudCAtIDEsIHNjYWxlcywgcm90YXRpb25zLCBwYWRkZWRTY2FsZVJvdGF0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc1RleCA9IG5ldyBEYXRhVGV4dHVyZShwYWRkZWRTY2FsZVJvdGF0aW9ucywgc2NhbGVSb3RhdGlvbnNUZXhTaXplLngsIHNjYWxlUm90YXRpb25zVGV4U2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSR0JBRm9ybWF0LCBzY2FsZVJvdGF0aW9uc1RleHR1cmVUeXBlKTtcclxuICAgICAgICAgICAgc2NhbGVSb3RhdGlvbnNUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjYWxlUm90YXRpb25zVGV4dHVyZS52YWx1ZSA9IHNjYWxlUm90YXRpb25zVGV4O1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjYWxlUm90YXRpb25zVGV4dHVyZVNpemUudmFsdWUuY29weShzY2FsZVJvdGF0aW9uc1RleFNpemUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc2NhbGVSb3RhdGlvbnMnXSA9IHtcclxuICAgICAgICAgICAgICAgICdkYXRhJzogcGFkZGVkU2NhbGVSb3RhdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAndGV4dHVyZSc6IHNjYWxlUm90YXRpb25zVGV4LFxyXG4gICAgICAgICAgICAgICAgJ3NpemUnOiBzY2FsZVJvdGF0aW9uc1RleFNpemUsXHJcbiAgICAgICAgICAgICAgICAnY29tcHJlc3Npb25MZXZlbCc6IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2hEYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoVGV4dHVyZVR5cGUgPSBzaENvbXByZXNzaW9uTGV2ZWwgPT09IDIgPyBVbnNpZ25lZEJ5dGVUeXBlIDogSGFsZkZsb2F0VHlwZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYWRkZWRTSENvbXBvbmVudENvdW50ID0gc2hDb21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgaWYgKHBhZGRlZFNIQ29tcG9uZW50Q291bnQgJSAyICE9PSAwKSBwYWRkZWRTSENvbXBvbmVudENvdW50Kys7XHJcbiAgICAgICAgICAgIGNvbnN0IHNoRWxlbWVudHNQZXJUZXhlbCA9IHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAyID8gNCA6IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleGVsRm9ybWF0ID0gc2hFbGVtZW50c1BlclRleGVsID09PSA0ID8gUkdCQUZvcm1hdCA6IFJHRm9ybWF0O1xyXG4gICAgICAgICAgICBsZXQgc2hUZXhTaXplID0gY29tcHV0ZURhdGFUZXh0dXJlU2l6ZShzaEVsZW1lbnRzUGVyVGV4ZWwsIHBhZGRlZFNIQ29tcG9uZW50Q291bnQpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXNlIG9uZSB0ZXh0dXJlIGZvciBhbGwgc3BoZXJpY2FsIGhhcm1vbmljcyBkYXRhXHJcbiAgICAgICAgICAgIGlmIChzaFRleFNpemUueCAqIHNoVGV4U2l6ZS55IDw9IE1BWF9URVhUVVJFX1RFWEVMUykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheVNpemUgPSBzaFRleFNpemUueCAqIHNoVGV4U2l6ZS55ICogc2hFbGVtZW50c1BlclRleGVsO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheSA9IG5ldyBTcGhlcmljYWxIYXJtb25pY3NBcnJheVR5cGUocGFkZGVkU0hBcnJheVNpemUpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBzcGxhdENvdW50OyBjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNCYXNlID0gc2hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdEJhc2UgPSBwYWRkZWRTSENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoQ29tcG9uZW50Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkZWRTSEFycmF5W2Rlc3RCYXNlICsgaV0gPSBzaERhdGFbc3JjQmFzZSArIGldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaFRleHR1cmUgPSBuZXcgRGF0YVRleHR1cmUocGFkZGVkU0hBcnJheSwgc2hUZXhTaXplLngsIHNoVGV4U2l6ZS55LCB0ZXhlbEZvcm1hdCwgc2hUZXh0dXJlVHlwZSk7XHJcbiAgICAgICAgICAgICAgICBzaFRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLnZhbHVlID0gc2hUZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc3BoZXJpY2FsSGFybW9uaWNzJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbXBvbmVudENvdW50Jzogc2hDb21wb25lbnRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAncGFkZGVkQ29tcG9uZW50Q291bnQnOiBwYWRkZWRTSENvbXBvbmVudENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogcGFkZGVkU0hBcnJheSxcclxuICAgICAgICAgICAgICAgICAgICAndGV4dHVyZUNvdW50JzogMSxcclxuICAgICAgICAgICAgICAgICAgICAndGV4dHVyZSc6IHNoVGV4dHVyZSxcclxuICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IHNoVGV4U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAnY29tcHJlc3Npb25MZXZlbCc6IHNoQ29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAnZWxlbWVudHNQZXJUZXhlbCc6IHNoRWxlbWVudHNQZXJUZXhlbFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gVXNlIHRocmVlIHRleHR1cmVzIGZvciBzcGhlcmljYWwgaGFybW9uaWNzIGRhdGEsIG9uZSBwZXIgY29sb3IgY2hhbm5lbFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwgPSBzaENvbXBvbmVudENvdW50IC8gMztcclxuICAgICAgICAgICAgICAgIHBhZGRlZFNIQ29tcG9uZW50Q291bnQgPSBzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbDtcclxuICAgICAgICAgICAgICAgIGlmIChwYWRkZWRTSENvbXBvbmVudENvdW50ICUgMiAhPT0gMCkgcGFkZGVkU0hDb21wb25lbnRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgc2hUZXhTaXplID0gY29tcHV0ZURhdGFUZXh0dXJlU2l6ZShzaEVsZW1lbnRzUGVyVGV4ZWwsIHBhZGRlZFNIQ29tcG9uZW50Q291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXlTaXplID0gc2hUZXhTaXplLnggKiBzaFRleFNpemUueSAqIHNoRWxlbWVudHNQZXJUZXhlbDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVVbmlmb3JtcyA9IFt0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlQl07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hUZXh0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCAzOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5ID0gbmV3IFNwaGVyaWNhbEhhcm1vbmljc0FycmF5VHlwZShwYWRkZWRTSEFycmF5U2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGVkU0hBcnJheXMucHVzaChwYWRkZWRTSEFycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHNwbGF0Q291bnQ7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNCYXNlID0gc2hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RCYXNlID0gcGFkZGVkU0hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgcGFkZGVkU0hBcnJheVtkZXN0QmFzZSArIGldID0gc2hEYXRhW3NyY0Jhc2UgKyB0ICogMyArIGldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsID49IDgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgcGFkZGVkU0hBcnJheVtkZXN0QmFzZSArIDMgKyBpXSA9IHNoRGF0YVtzcmNCYXNlICsgOSArIHQgKiA1ICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoVGV4dHVyZSA9IG5ldyBEYXRhVGV4dHVyZShwYWRkZWRTSEFycmF5LCBzaFRleFNpemUueCwgc2hUZXhTaXplLnksIHRleGVsRm9ybWF0LCBzaFRleHR1cmVUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBzaFRleHR1cmVzLnB1c2goc2hUZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBzaFRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVVbmlmb3Jtc1t0XS52YWx1ZSA9IHNoVGV4dHVyZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc011bHRpVGV4dHVyZU1vZGUudmFsdWUgPSAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc3BoZXJpY2FsSGFybW9uaWNzJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbXBvbmVudENvdW50Jzogc2hDb21wb25lbnRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAnY29tcG9uZW50Q291bnRQZXJDaGFubmVsJzogc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRlZENvbXBvbmVudENvdW50JzogcGFkZGVkU0hDb21wb25lbnRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHBhZGRlZFNIQXJyYXlzLFxyXG4gICAgICAgICAgICAgICAgICAgICd0ZXh0dXJlQ291bnQnOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICd0ZXh0dXJlcyc6IHNoVGV4dHVyZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NpemUnOiBzaFRleFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NvbXByZXNzaW9uTGV2ZWwnOiBzaENvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2VsZW1lbnRzUGVyVGV4ZWwnOiBzaEVsZW1lbnRzUGVyVGV4ZWxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUudmFsdWUuY29weShzaFRleFNpemUpO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRNb2RlLnZhbHVlID0gc2hDb21wcmVzc2lvbkxldmVsID09PSAyID8gMSA6IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBzKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gdGhpcy5zY2VuZXNbc10uc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluLnZhbHVlW3NdID1cclxuICAgICAgICAgICAgICAgICAgICBzcGxhdEJ1ZmZlci5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXgudmFsdWVbc10gPVxyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0QnVmZmVyLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhlc1RleFNpemUgPSBjb21wdXRlRGF0YVRleHR1cmVTaXplKFNDRU5FX0lOREVYRVNfRUxFTUVOVFNfUEVSX1RFWEVMLCA0KTtcclxuICAgICAgICBjb25zdCBwYWRkZWRUcmFuc2Zvcm1JbmRleGVzID0gbmV3IFVpbnQzMkFycmF5KHNjZW5lSW5kZXhlc1RleFNpemUueCAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUluZGV4ZXNUZXhTaXplLnkgKiBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCk7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBzcGxhdENvdW50OyBjKyspIHBhZGRlZFRyYW5zZm9ybUluZGV4ZXNbY10gPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXBbY107XHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleGVzVGV4dHVyZSA9IG5ldyBEYXRhVGV4dHVyZShwYWRkZWRUcmFuc2Zvcm1JbmRleGVzLCBzY2VuZUluZGV4ZXNUZXhTaXplLngsIHNjZW5lSW5kZXhlc1RleFNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZEludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgc2NlbmVJbmRleGVzVGV4dHVyZS5pbnRlcm5hbEZvcm1hdCA9ICdSMzJVSSc7XHJcbiAgICAgICAgc2NlbmVJbmRleGVzVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2VuZUluZGV4ZXNUZXh0dXJlLnZhbHVlID0gc2NlbmVJbmRleGVzVGV4dHVyZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjZW5lSW5kZXhlc1RleHR1cmVTaXplLnZhbHVlLmNvcHkoc2NlbmVJbmRleGVzVGV4U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NjZW5lSW5kZXhlcyddID0ge1xyXG4gICAgICAgICAgICAnZGF0YSc6IHBhZGRlZFRyYW5zZm9ybUluZGV4ZXMsXHJcbiAgICAgICAgICAgICd0ZXh0dXJlJzogc2NlbmVJbmRleGVzVGV4dHVyZSxcclxuICAgICAgICAgICAgJ3NpemUnOiBzY2VuZUluZGV4ZXNUZXhTaXplXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjZW5lQ291bnQudmFsdWUgPSB0aGlzLnNjZW5lcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIEZMQU1FLXNwZWNpZmljIHNldHVwIChvbmx5IGlmIGZsYW1lTW9kZWwgaGFzIHJlcXVpcmVkIGRhdGEpXHJcbiAgICAgICAgaWYgKHRoaXMuZmxhbWVNb2RlbCAmJiB0aGlzLmZsYW1lTW9kZWwuZ2VvbWV0cnkgJiYgdGhpcy5mbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyAmJiB0aGlzLmZsYW1lTW9kZWwuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uQlNOdW0gPSB0aGlzLmZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ic0NvdW50LnZhbHVlID0gdGhpcy5leHByZXNzaW9uQlNOdW07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZsYW1lTW9kZWwuc2tlbGV0b24uYm9uZXMuZm9yRWFjaCgoYm9uZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChib25lLm5hbWUgPT0gJ2hlYWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuaGVhZEJvbmVJbmRleC52YWx1ZSA9IGluZGV4O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRNb2RlbFRleHR1cmUodGhpcy5mbGFtZU1vZGVsKTtcclxuICAgICAgICAgICAgdGhpcy5idWlsZEJvbmVNYXRyaXhUZXh0dXJlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRCb25lV2VpZ2h0VGV4dHVyZSh0aGlzLmZsYW1lTW9kZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBidWlsZEJvbmVNYXRyaXhUZXh0dXJlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ic1dlaWdodClcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIC8vIEd1YXJkOiBSZXF1aXJlcyBGTEFNRSBtb2RlbCB3aXRoIG1vcnBoVGFyZ2V0RGljdGlvbmFyeVxyXG4gICAgICAgIGlmICghdGhpcy5mbGFtZU1vZGVsIHx8ICF0aGlzLmZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vdGhpcy5ib25lc051bSArIHRoaXMuZXhwcmVzc2lvbkJTTnVtIC8gNCA9IDMwLCBzbyAzMlxyXG4gICAgICAgIGNvbnN0IGJvbmVUZXh0dXJlU2l6ZSA9IG5ldyBWZWN0b3IyKDQsIDMyKTtcclxuICAgICAgICBsZXQgYm9uZU1hdHJpeFRleHR1cmVEYXRhID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmJvbmVzTWF0cml4KTtcclxuICAgICAgICBsZXQgYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50ID0gbmV3IFVpbnQzMkFycmF5KGJvbmVUZXh0dXJlU2l6ZS54ICogYm9uZVRleHR1cmVTaXplLnkgKiA0KTtcclxuICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSA9IHRoaXMuZmxhbWVNb2RlbC5tb3JwaFRhcmdldERpY3Rpb25hcnk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5ib25lc051bSAqIDE2OyBjKyspIHtcclxuICAgICAgICAgICAgYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50W2NdID0gdWludEVuY29kZWRGbG9hdChib25lTWF0cml4VGV4dHVyZURhdGFbY10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5mbGFtZU1vZGVsICYmIHRoaXMuZmxhbWVNb2RlbC5za2VsZXRvbikge1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlMC52YWx1ZSA9IHRoaXMuZmxhbWVNb2RlbC5za2VsZXRvbi5ib25lVGV4dHVyZTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5iaW5kTWF0cml4LnZhbHVlID0gdGhpcy5mbGFtZU1vZGVsLmJpbmRNYXRyaXg7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeEludmVyc2UudmFsdWUgPSB0aGlzLmZsYW1lTW9kZWwuYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuYnNXZWlnaHQpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd24odGhpcy5ic1dlaWdodCwga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmJzV2VpZ2h0W2tleV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50W2lkeCArIHRoaXMuYm9uZXNOdW0gKiAxNl0gPSB1aW50RW5jb2RlZEZsb2F0KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmJzV2VpZ2h0Lmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5XHJcbiAgICAgICAgLy8gICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludFtjICsgdGhpcy5ib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ic1dlaWdodFtjXSk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBjb25zdCBib25lTWF0cml4VGV4ID0gbmV3IERhdGFUZXh0dXJlKGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCwgYm9uZVRleHR1cmVTaXplLngsIGJvbmVUZXh0dXJlU2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgIGJvbmVNYXRyaXhUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgICAgIGJvbmVNYXRyaXhUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUudmFsdWUgPSBib25lTWF0cml4VGV4O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmVTaXplLnZhbHVlLmNvcHkoYm9uZVRleHR1cmVTaXplKTtcclxuXHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydib25lTWF0cml4J10gPSB7XHJcbiAgICAgICAgICAgICdkYXRhJzogYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgICAgICAndGV4dHVyZSc6IGJvbmVNYXRyaXhUZXgsXHJcbiAgICAgICAgICAgICdzaXplJzogYm9uZVRleHR1cmVTaXplLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZU1hdHJpeCddID0gYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50O1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUJvbmVNYXRyaXhUZXh0dXJlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5ic1dlaWdodCB8fCAhdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnkpXHJcbiAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmJzV2VpZ2h0KSB7XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duKHRoaXMuYnNXZWlnaHQsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5ic1dlaWdodFtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVNYXRyaXgnXVtpZHggKyB0aGlzLmJvbmVzTnVtICogMTZdID0gdWludEVuY29kZWRGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5ic1dlaWdodC5sZW5ndGg7IGMrKykge1xyXG4gICAgICAgIC8vICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J11bYyArIHRoaXMuYm9uZXNOdW0gKiAxNl0gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYnNXZWlnaHRbY10pO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydib25lTWF0cml4J11bJ3RleHR1cmUnXS5kYXRhID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZU1hdHJpeCddO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXVsndGV4dHVyZSddLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlLnZhbHVlID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZsYW1lTW9kZWwuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZTAudmFsdWUgPSB0aGlzLmZsYW1lTW9kZWwuc2tlbGV0b24uYm9uZVRleHR1cmU7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeC52YWx1ZSA9IHRoaXMuZmxhbWVNb2RlbC5iaW5kTWF0cml4O1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXhJbnZlcnNlLnZhbHVlID0gdGhpcy5mbGFtZU1vZGVsLmJpbmRNYXRyaXhJbnZlcnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgYnVpbGRCb25lV2VpZ2h0VGV4dHVyZShmbGFtZU1vZGVsKSB7XHJcbiAgICAgICAgLy8gR3VhcmQ6IGJvbmVzV2VpZ2h0IGlzIHJlcXVpcmVkIGZvciBGTEFNRSBib25lIHdlaWdodCB0ZXh0dXJlIGJ1aWxkaW5nXHJcbiAgICAgICAgaWYgKCF0aGlzLmJvbmVzV2VpZ2h0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzaGFwZWRNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG5cclxuICAgICAgICBsZXQgcG9pbnROdW0gPSBzaGFwZWRNZXNoLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgY29uc3QgYm9uZVdlaWdodFRleHR1cmVTaXplID0gbmV3IFZlY3RvcjIoNTEyLCA1MTIpO1xyXG4gICAgICAgIGxldCBib25lV2VpZ2h0VGV4dHVyZURhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS54ICogYm9uZVdlaWdodFRleHR1cmVTaXplLnkgKiA0KTtcclxuICAgICAgICBsZXQgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50ID0gbmV3IFVpbnQzMkFycmF5KGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS54ICogYm9uZVdlaWdodFRleHR1cmVTaXplLnkgKiA0KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50TnVtOyBpKyspIHtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgMF0gPSB0aGlzLmJvbmVzV2VpZ2h0W2ldWzBdO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAxXSA9IHRoaXMuYm9uZXNXZWlnaHRbaV1bMV07XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDJdID0gdGhpcy5ib25lc1dlaWdodFtpXVsyXTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgM10gPSB0aGlzLmJvbmVzV2VpZ2h0W2ldWzNdO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyA0XSA9IHRoaXMuYm9uZXNXZWlnaHRbaV1bNF07XHJcblxyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAwXSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ib25lc1dlaWdodFtpXVswXSk7XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDFdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJvbmVzV2VpZ2h0W2ldWzFdKTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgMl0gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYm9uZXNXZWlnaHRbaV1bMl0pO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAzXSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ib25lc1dlaWdodFtpXVszXSk7XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDRdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJvbmVzV2VpZ2h0W2ldWzRdKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJvbmVXZWlnaHRUZXggPSBuZXcgRGF0YVRleHR1cmUoYm9uZVdlaWdodFRleHR1cmVEYXRhSW50LCBib25lV2VpZ2h0VGV4dHVyZVNpemUueCwgYm9uZVdlaWdodFRleHR1cmVTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYm9uZVdlaWdodFRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICAgICAgYm9uZVdlaWdodFRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lV2VpZ2h0VGV4dHVyZS52YWx1ZSA9IGJvbmVXZWlnaHRUZXg7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lV2VpZ2h0VGV4dHVyZVNpemUudmFsdWUuY29weShib25lV2VpZ2h0VGV4dHVyZVNpemUpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snYm9uZVdlaWdodCddID0ge1xyXG4gICAgICAgICAgICAnZGF0YSc6IGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludCxcclxuICAgICAgICAgICAgJ3RleHR1cmUnOiBib25lV2VpZ2h0VGV4LFxyXG4gICAgICAgICAgICAnc2l6ZSc6IGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVXZWlnaHQnXSA9IGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYnVpbGRNb2RlbFRleHR1cmUoZmxhbWVNb2RlbCkge1xyXG4gICAgICAgIC8vIEd1YXJkOiBSZXF1aXJlcyBGTEFNRSBtb2RlbCB3aXRoIG1vcnBoIGF0dHJpYnV0ZXNcclxuICAgICAgICBpZiAoIWZsYW1lTW9kZWwgfHwgIWZsYW1lTW9kZWwuZ2VvbWV0cnkgfHwgIWZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzIHx8ICFmbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmbGFtZU1vZGVsVGV4U2l6ZSA9IG5ldyBWZWN0b3IyKDQwOTYsIDIwNDgpO1xyXG5cclxuICAgICAgICB2YXIgc2hhcGVkTWVzaCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuICAgICAgICB2YXIgc2hhcGVkTWVzaEFycmF5ID0gW107Ly9BcnJheS5mcm9tKHNoYXBlZE1lc2gpO1xyXG4gICAgICAgIGxldCBwb2ludE51bSA9IHNoYXBlZE1lc2gubGVuZ3RoIC8gMztcclxuXHJcbiAgICAgICAgbGV0IGJzTGVuZ3RoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoO1xyXG5cclxuICAgICAgICBjb25zdCBtb3JwaFRhcmdldE5hbWVzID0gT2JqZWN0LmtleXMoZmxhbWVNb2RlbC5tb3JwaFRhcmdldERpY3Rpb25hcnkpO1xyXG4gICAgICAgIG1vcnBoVGFyZ2V0TmFtZXMuZm9yRWFjaCgobmFtZSwgbmV3SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxJbmRleCA9IGZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5W25hbWVdO1xyXG4gICAgICAgICAgICB2YXIgYnNNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb25bb3JpZ2luYWxJbmRleF07XHJcbiAgICAgICAgICAgIHNoYXBlZE1lc2hBcnJheSA9IHNoYXBlZE1lc2hBcnJheS5jb25jYXQoQXJyYXkuZnJvbShic01lc2guYXJyYXkpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICBzaGFwZWRNZXNoQXJyYXkgPSBzaGFwZWRNZXNoQXJyYXkuY29uY2F0KEFycmF5LmZyb20oc2hhcGVkTWVzaCkpO1xyXG5cclxuICAgICAgICBsZXQgZmxhbWVNb2RlbERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGZsYW1lTW9kZWxUZXhTaXplLnggKiBmbGFtZU1vZGVsVGV4U2l6ZS55ICogNCk7XHJcbiAgICAgICAgbGV0IGZsYW1lTW9kZWxEYXRhSW50ID0gbmV3IFVpbnQzMkFycmF5KGZsYW1lTW9kZWxUZXhTaXplLnggKiBmbGFtZU1vZGVsVGV4U2l6ZS55ICogNCk7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBwb2ludE51bSAqIChic0xlbmd0aCArIDEpOyBjKyspIHtcclxuICAgICAgICAgICAgZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAwXSA9IHNoYXBlZE1lc2hBcnJheVtjICogMyArIDBdO1xyXG4gICAgICAgICAgICBmbGFtZU1vZGVsRGF0YVtjICogNCArIDFdID0gc2hhcGVkTWVzaEFycmF5W2MgKiAzICsgMV07XHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMl0gPSBzaGFwZWRNZXNoQXJyYXlbYyAqIDMgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxEYXRhSW50W2MgKiA0ICsgMF0gPSB1aW50RW5jb2RlZEZsb2F0KGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMF0pO1xyXG4gICAgICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDFdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDFdKTtcclxuICAgICAgICAgICAgZmxhbWVNb2RlbERhdGFJbnRbYyAqIDQgKyAyXSA9IHVpbnRFbmNvZGVkRmxvYXQoZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAyXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmbGFtZU1vZGVsVGV4ID0gbmV3IERhdGFUZXh0dXJlKGZsYW1lTW9kZWxEYXRhSW50LCBmbGFtZU1vZGVsVGV4U2l6ZS54LCBmbGFtZU1vZGVsVGV4U2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgIGZsYW1lTW9kZWxUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgICAgIGZsYW1lTW9kZWxUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZmxhbWVNb2RlbFRleHR1cmUudmFsdWUgPSBmbGFtZU1vZGVsVGV4O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZmxhbWVNb2RlbFRleHR1cmVTaXplLnZhbHVlLmNvcHkoZmxhbWVNb2RlbFRleFNpemUpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmdhdXNzaWFuU3BsYXRDb3VudC52YWx1ZSA9IHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50O1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydmbGFtZU1vZGVsJ10gPSB7XHJcbiAgICAgICAgICAgICdkYXRhJzogZmxhbWVNb2RlbERhdGFJbnQsXHJcbiAgICAgICAgICAgICd0ZXh0dXJlJzogZmxhbWVNb2RlbFRleCxcclxuICAgICAgICAgICAgJ3NpemUnOiBmbGFtZU1vZGVsVGV4U2l6ZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2ZsYW1lTW9kZWxQb3MnXSA9IGZsYW1lTW9kZWxEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVRldHVyZUFmdGVyQlNBbmRTa2VsZXRvbihmcm9tU3BsYXQsIHRvU3BsYXQpIHtcclxuICAgICAgICBjb25zdCBzY2VuZVRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0U2NlbmVUcmFuc2Zvcm0oMCwgc2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuZ2V0U2NlbmUoMCkuc3BsYXRCdWZmZXIuZmlsbFNwbGF0Q2VudGVyQXJyYXkodGhpcy5tb3JwaGVkTWVzaCwgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jZW50ZXJzLCBzY2VuZVRyYW5zZm9ybSwgZnJvbVNwbGF0LCB0b1NwbGF0LCAwKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGNlbnRlciAmIGNvbG9yIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snY2VudGVyQ29sb3JzJ107XHJcbiAgICAgICAgY29uc3QgcGFkZGVkQ2VudGVyQ29sb3JzID0gY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IuZGF0YTtcclxuICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNUZXh0dXJlID0gY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IudGV4dHVyZTtcclxuICAgICAgICBTcGxhdE1lc2gudXBkYXRlQ2VudGVyQ29sb3JzUGFkZGVkRGF0YShmcm9tU3BsYXQsIHRvU3BsYXQsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY2VudGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb2xvcnMsIHBhZGRlZENlbnRlckNvbG9ycyk7XHJcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoY2VudGVyQ29sb3JzVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgIGlmICghY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzIHx8ICFjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgY2VudGVyQ29sb3JzVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShwYWRkZWRDZW50ZXJDb2xvcnMsIGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLnRleHR1cmUsIGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNvbG9yc1RleHR1cmVQcm9wcywgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwsIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFULCA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVCb25lTWF0cml4VGV4dHVyZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUJhc2VEYXRhRnJvbVNwbGF0QnVmZmVycyhmcm9tU3BsYXQsIHRvU3BsYXQpIHtcclxuICAgICAgICBjb25zdCBjb3ZhcmFuY2VzVGV4dHVyZURlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydjb3ZhcmlhbmNlcyddO1xyXG4gICAgICAgIGNvbnN0IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID0gY292YXJhbmNlc1RleHR1cmVEZXNjID8gY292YXJhbmNlc1RleHR1cmVEZXNjLmNvbXByZXNzaW9uTGV2ZWwgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NjYWxlUm90YXRpb25zJ107XHJcbiAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPSBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjID8gc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYy5jb21wcmVzc2lvbkxldmVsIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHNoSVRleHR1cmVEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc3BoZXJpY2FsSGFybW9uaWNzJ107XHJcbiAgICAgICAgY29uc3Qgc2hDb21wcmVzc2lvbkxldmVsID0gc2hJVGV4dHVyZURlc2MgPyBzaElUZXh0dXJlRGVzYy5jb21wcmVzc2lvbkxldmVsIDogMDtcclxuXHJcbiAgICAgICAgdGhpcy5maWxsU3BsYXREYXRhQXJyYXlzKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY292YXJpYW5jZXMsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuc2NhbGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnJvdGF0aW9ucywgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jZW50ZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvbG9ycywgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5zcGhlcmljYWxIYXJtb25pY3MsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmZsYW1lTW9kZWxQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwsIHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsLCBzaENvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGxhdCwgdG9TcGxhdCwgZnJvbVNwbGF0KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVEYXRhVGV4dHVyZXNGcm9tQmFzZURhdGEoZnJvbVNwbGF0LCB0b1NwbGF0KSB7XHJcbiAgICAgICAgY29uc3QgY292YXJhbmNlc1RleHR1cmVEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snY292YXJpYW5jZXMnXTtcclxuICAgICAgICBjb25zdCBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9IGNvdmFyYW5jZXNUZXh0dXJlRGVzYyA/IGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5jb21wcmVzc2lvbkxldmVsIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzY2FsZVJvdGF0aW9ucyddO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID0gc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYyA/IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MuY29tcHJlc3Npb25MZXZlbCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBzaFRleHR1cmVEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc3BoZXJpY2FsSGFybW9uaWNzJ107XHJcbiAgICAgICAgY29uc3Qgc2hDb21wcmVzc2lvbkxldmVsID0gc2hUZXh0dXJlRGVzYyA/IHNoVGV4dHVyZURlc2MuY29tcHJlc3Npb25MZXZlbCA6IDA7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBmbGFtZSBkYXRhIHRleHR1cmVcclxuICAgICAgICBjb25zdCBmbGFtZU1vZGVsVGV4dHVyZURlc2NyaXB0b3IgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydmbGFtZU1vZGVsJ107XHJcbiAgICAgICAgY29uc3QgZmxhbWVNb2RlbFBvcyA9IGZsYW1lTW9kZWxUZXh0dXJlRGVzY3JpcHRvci5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGZsYW1lTW9kZWxQb3NUZXh0dXJlID0gZmxhbWVNb2RlbFRleHR1cmVEZXNjcmlwdG9yLnRleHR1cmU7XHJcblxyXG4gICAgICAgIGNvbnN0IGZsYW1lTW9kZWxQb3NUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChmbGFtZU1vZGVsUG9zVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgIGlmICghZmxhbWVNb2RlbFBvc1RleHR1cmVQcm9wcyB8fCAhZmxhbWVNb2RlbFBvc1RleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICBmbGFtZU1vZGVsUG9zVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShmbGFtZU1vZGVsUG9zLCBmbGFtZU1vZGVsVGV4dHVyZURlc2NyaXB0b3IudGV4dHVyZSwgZmxhbWVNb2RlbFRleHR1cmVEZXNjcmlwdG9yLnNpemUsXHJcbiAgICAgICAgICAgICAgICBmbGFtZU1vZGVsUG9zVGV4dHVyZVByb3BzLCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCwgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfU1BMQVQsIDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBjZW50ZXIgJiBjb2xvciBkYXRhIHRleHR1cmVcclxuICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvciA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2NlbnRlckNvbG9ycyddO1xyXG4gICAgICAgIGNvbnN0IHBhZGRlZENlbnRlckNvbG9ycyA9IGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLmRhdGE7XHJcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzVGV4dHVyZSA9IGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLnRleHR1cmU7XHJcbiAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZUNlbnRlckNvbG9yc1BhZGRlZERhdGEoZnJvbVNwbGF0LCB0b1NwbGF0LCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb2xvcnMsIHBhZGRlZENlbnRlckNvbG9ycyk7XHJcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoY2VudGVyQ29sb3JzVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgIGlmICghY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzIHx8ICFjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgY2VudGVyQ29sb3JzVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShwYWRkZWRDZW50ZXJDb2xvcnMsIGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLnRleHR1cmUsIGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzLCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCwgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfU1BMQVQsIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBjb3ZhcmlhbmNlIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGlmIChjb3ZhcmFuY2VzVGV4dHVyZURlc2MpIHtcclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNUZXh0dXJlID0gY292YXJhbmNlc1RleHR1cmVEZXNjLnRleHR1cmU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyYW5jZXNTdGFydEVsZW1lbnQgPSBmcm9tU3BsYXQgKiBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzRW5kRWxlbWVudCA9IHRvU3BsYXQgKiBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBjb3ZhcmFuY2VzU3RhcnRFbGVtZW50OyBpIDw9IGNvdmFyaWFuY2VzRW5kRWxlbWVudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZSA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY292YXJpYW5jZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY292YXJhbmNlc1RleHR1cmVEZXNjLmRhdGFbaV0gPSBjb3ZhcmlhbmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZVBhZGRlZENvbXByZXNzZWRDb3ZhcmlhbmNlc1RleHR1cmVEYXRhKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY292YXJpYW5jZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJhbmNlc1RleHR1cmVEZXNjLmRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwbGF0ICogY292YXJhbmNlc1RleHR1cmVEZXNjLmVsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJhbmNlc1N0YXJ0RWxlbWVudCwgY292YXJpYW5jZXNFbmRFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChjb3ZhcmlhbmNlc1RleHR1cmUpIDogbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFjb3ZhcmlhbmNlc1RleHR1cmVQcm9wcyB8fCAhY292YXJpYW5jZXNUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5kYXRhLCBjb3ZhcmFuY2VzVGV4dHVyZURlc2MudGV4dHVyZSwgY292YXJhbmNlc1RleHR1cmVEZXNjLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlc1RleHR1cmVQcm9wcywgY292YXJhbmNlc1RleHR1cmVEZXNjLmVsZW1lbnRzUGVyVGV4ZWxTdG9yZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQsIDQsIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUoY292YXJhbmNlc1RleHR1cmVEZXNjLmRhdGEsIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy50ZXh0dXJlLCBjb3ZhcmFuY2VzVGV4dHVyZURlc2Muc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVByb3BzLCBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5lbGVtZW50c1BlclRleGVsQWxsb2NhdGVkLCAyLCBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgc2NhbGUgYW5kIHJvdGF0aW9uIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGlmIChzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNjYWxlUm90YXRpb25zID0gc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYy5kYXRhO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc1RleHR1cmUgPSBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjLnRleHR1cmU7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzUGVyU3BsYXQgPSA2O1xyXG4gICAgICAgICAgICBjb25zdCBieXRlc1BlckVsZW1lbnQgPSBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA9PT0gMCA/IDQgOiAyO1xyXG5cclxuICAgICAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZVNjYWxlUm90YXRpb25zUGFkZGVkRGF0YShmcm9tU3BsYXQsIHRvU3BsYXQsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuc2NhbGVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEucm90YXRpb25zLCBwYWRkZWRTY2FsZVJvdGF0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoc2NhbGVSb3RhdGlvbnNUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgICAgIGlmICghc2NhbGVSb3RhdGlvbnNUZXh0dXJlUHJvcHMgfHwgIXNjYWxlUm90YXRpb25zVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBzY2FsZVJvdGF0aW9uc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShwYWRkZWRTY2FsZVJvdGF0aW9ucywgc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYy50ZXh0dXJlLCBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlUm90YXRpb25zVGV4dHVyZVByb3BzLCBTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCwgZWxlbWVudHNQZXJTcGxhdCwgYnl0ZXNQZXJFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgc3BoZXJpY2FsIGhhcm1vbmljcyBkYXRhIHRleHR1cmVcclxuICAgICAgICBjb25zdCBzaERhdGEgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnNwaGVyaWNhbEhhcm1vbmljcztcclxuICAgICAgICBpZiAoc2hEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBzaEJ5dGVzUGVyRWxlbWVudCA9IDQ7XHJcbiAgICAgICAgICAgIGlmIChzaENvbXByZXNzaW9uTGV2ZWwgPT09IDEpIHNoQnl0ZXNQZXJFbGVtZW50ID0gMjtcclxuICAgICAgICAgICAgZWxzZSBpZiAoc2hDb21wcmVzc2lvbkxldmVsID09PSAyKSBzaEJ5dGVzUGVyRWxlbWVudCA9IDE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVUZXh0dXJlID0gKHNoVGV4dHVyZSwgc2hUZXh0dXJlU2l6ZSwgZWxlbWVudHNQZXJUZXhlbCwgcGFkZGVkU0hBcnJheSwgcGFkZGVkU0hDb21wb25lbnRDb3VudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChzaFRleHR1cmUpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICghc2hUZXh0dXJlUHJvcHMgfHwgIXNoVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShwYWRkZWRTSEFycmF5LCBzaFRleHR1cmUsIHNoVGV4dHVyZVNpemUsIHNoVGV4dHVyZVByb3BzLCBlbGVtZW50c1BlclRleGVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGVkU0hDb21wb25lbnRDb3VudCwgc2hCeXRlc1BlckVsZW1lbnQsIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaENvbXBvbmVudENvdW50ID0gc2hUZXh0dXJlRGVzYy5jb21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hDb21wb25lbnRDb3VudCA9IHNoVGV4dHVyZURlc2MucGFkZGVkQ29tcG9uZW50Q291bnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZm9yIHRoZSBjYXNlIG9mIGEgc2luZ2xlIHRleHR1cmUgZm9yIGFsbCBzcGhlcmljYWwgaGFybW9uaWNzIGRhdGFcclxuICAgICAgICAgICAgaWYgKHNoVGV4dHVyZURlc2MudGV4dHVyZUNvdW50ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5ID0gc2hUZXh0dXJlRGVzYy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IGZyb21TcGxhdDsgYyA8PSB0b1NwbGF0OyBjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNCYXNlID0gc2hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdEJhc2UgPSBwYWRkZWRTSENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoQ29tcG9uZW50Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkZWRTSEFycmF5W2Rlc3RCYXNlICsgaV0gPSBzaERhdGFbc3JjQmFzZSArIGldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRleHR1cmUoc2hUZXh0dXJlRGVzYy50ZXh0dXJlLCBzaFRleHR1cmVEZXNjLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoVGV4dHVyZURlc2MuZWxlbWVudHNQZXJUZXhlbCwgcGFkZGVkU0hBcnJheSwgcGFkZGVkU0hDb21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmb3IgdGhlIGNhc2Ugb2Ygc3BoZXJpY2FsIGhhcm1vbmljcyBkYXRhIHNwbGl0IGFtb25nIHRocmVlIHRleHR1cmVzLCBvbmUgZm9yIGVhY2ggY29sb3IgY2hhbm5lbFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwgPSBzaFRleHR1cmVEZXNjLmNvbXBvbmVudENvdW50UGVyQ2hhbm5lbDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMzsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheSA9IHNoVGV4dHVyZURlc2MuZGF0YVt0XTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjID0gZnJvbVNwbGF0OyBjIDw9IHRvU3BsYXQ7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNCYXNlID0gc2hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RCYXNlID0gcGFkZGVkU0hDb21wb25lbnRDb3VudCAqIGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgcGFkZGVkU0hBcnJheVtkZXN0QmFzZSArIGldID0gc2hEYXRhW3NyY0Jhc2UgKyB0ICogMyArIGldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsID49IDgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgcGFkZGVkU0hBcnJheVtkZXN0QmFzZSArIDMgKyBpXSA9IHNoRGF0YVtzcmNCYXNlICsgOSArIHQgKiA1ICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGV4dHVyZShzaFRleHR1cmVEZXNjLnRleHR1cmVzW3RdLCBzaFRleHR1cmVEZXNjLnNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaFRleHR1cmVEZXNjLmVsZW1lbnRzUGVyVGV4ZWwsIHBhZGRlZFNIQXJyYXksIHBhZGRlZFNIQ29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB1cGRhdGUgc2NlbmUgaW5kZXggJiB0cmFuc2Zvcm0gZGF0YVxyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhlc1RleERlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzY2VuZUluZGV4ZXMnXTtcclxuICAgICAgICBjb25zdCBwYWRkZWRTY2VuZUluZGV4ZXMgPSBzY2VuZUluZGV4ZXNUZXhEZXNjLmRhdGE7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudDsgYyA8PSB0b1NwbGF0OyBjKyspIHtcclxuICAgICAgICAgICAgcGFkZGVkU2NlbmVJbmRleGVzW2NdID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwW2NdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4ZXNUZXh0dXJlID0gc2NlbmVJbmRleGVzVGV4RGVzYy50ZXh0dXJlO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhlc1RleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KHNjZW5lSW5kZXhlc1RleHR1cmUpIDogbnVsbDtcclxuICAgICAgICBpZiAoIXNjZW5lSW5kZXhlc1RleHR1cmVQcm9wcyB8fCAhc2NlbmVJbmRleGVzVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIHNjZW5lSW5kZXhlc1RleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUocGFkZGVkU2NlbmVJbmRleGVzLCBzY2VuZUluZGV4ZXNUZXhEZXNjLnRleHR1cmUsIHNjZW5lSW5kZXhlc1RleERlc2Muc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUluZGV4ZXNUZXh0dXJlUHJvcHMsIDEsIDEsIDEsIHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCwgdG9TcGxhdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRhcmdldENvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVID8gMSA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFyZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcHJlc3Npb25MZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgdGhpcy5nZXRNYXhpbXVtU3BsYXRCdWZmZXJDb21wcmVzc2lvbkxldmVsKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1heGltdW1TcGxhdEJ1ZmZlckNvbXByZXNzaW9uTGV2ZWwoKSB7XHJcbiAgICAgICAgbGV0IG1heENvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gc2NlbmUuc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHNwbGF0QnVmZmVyLmNvbXByZXNzaW9uTGV2ZWwgPiBtYXhDb21wcmVzc2lvbkxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBtYXhDb21wcmVzc2lvbkxldmVsID0gc3BsYXRCdWZmZXIuY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF4Q29tcHJlc3Npb25MZXZlbDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNaW5pbXVtU3BsYXRCdWZmZXJDb21wcmVzc2lvbkxldmVsKCkge1xyXG4gICAgICAgIGxldCBtaW5Db21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmdldFNjZW5lKGkpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHNjZW5lLnNwbGF0QnVmZmVyO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBzcGxhdEJ1ZmZlci5jb21wcmVzc2lvbkxldmVsIDwgbWluQ29tcHJlc3Npb25MZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgbWluQ29tcHJlc3Npb25MZXZlbCA9IHNwbGF0QnVmZmVyLmNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1pbkNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNvbXB1dGVUZXh0dXJlVXBkYXRlUmVnaW9uKHN0YXJ0U3BsYXQsIGVuZFNwbGF0LCB0ZXh0dXJlV2lkdGgsIGVsZW1lbnRzUGVyVGV4ZWwsIGVsZW1lbnRzUGVyU3BsYXQpIHtcclxuICAgICAgICBjb25zdCB0ZXhlbHNQZXJTcGxhdCA9IGVsZW1lbnRzUGVyU3BsYXQgLyBlbGVtZW50c1BlclRleGVsO1xyXG5cclxuICAgICAgICBjb25zdCBzdGFydFNwbGF0VGV4ZWxzID0gc3RhcnRTcGxhdCAqIHRleGVsc1BlclNwbGF0O1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0Um93ID0gTWF0aC5mbG9vcihzdGFydFNwbGF0VGV4ZWxzIC8gdGV4dHVyZVdpZHRoKTtcclxuICAgICAgICBjb25zdCBzdGFydFJvd0VsZW1lbnQgPSBzdGFydFJvdyAqIHRleHR1cmVXaWR0aCAqIGVsZW1lbnRzUGVyVGV4ZWw7XHJcblxyXG4gICAgICAgIGNvbnN0IGVuZFNwbGF0VGV4ZWxzID0gZW5kU3BsYXQgKiB0ZXhlbHNQZXJTcGxhdDtcclxuICAgICAgICBjb25zdCBlbmRSb3cgPSBNYXRoLmZsb29yKGVuZFNwbGF0VGV4ZWxzIC8gdGV4dHVyZVdpZHRoKTtcclxuICAgICAgICBjb25zdCBlbmRSb3dFbmRFbGVtZW50ID0gZW5kUm93ICogdGV4dHVyZVdpZHRoICogZWxlbWVudHNQZXJUZXhlbCArICh0ZXh0dXJlV2lkdGggKiBlbGVtZW50c1BlclRleGVsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ2RhdGFTdGFydCc6IHN0YXJ0Um93RWxlbWVudCxcclxuICAgICAgICAgICAgJ2RhdGFFbmQnOiBlbmRSb3dFbmRFbGVtZW50LFxyXG4gICAgICAgICAgICAnc3RhcnRSb3cnOiBzdGFydFJvdyxcclxuICAgICAgICAgICAgJ2VuZFJvdyc6IGVuZFJvd1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlRGF0YVRleHR1cmUocGFkZGVkRGF0YSwgdGV4dHVyZSwgdGV4dHVyZVNpemUsIHRleHR1cmVQcm9wcywgZWxlbWVudHNQZXJUZXhlbCwgZWxlbWVudHNQZXJTcGxhdCwgYnl0ZXNQZXJFbGVtZW50LCBmcm9tLCB0bykge1xyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlUmVnaW9uID0gU3BsYXRNZXNoLmNvbXB1dGVUZXh0dXJlVXBkYXRlUmVnaW9uKGZyb20sIHRvLCB0ZXh0dXJlU2l6ZS54LCBlbGVtZW50c1BlclRleGVsLCBlbGVtZW50c1BlclNwbGF0KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVFbGVtZW50Q291bnQgPSB1cGRhdGVSZWdpb24uZGF0YUVuZCAtIHVwZGF0ZVJlZ2lvbi5kYXRhU3RhcnQ7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YVZpZXcgPSBuZXcgcGFkZGVkRGF0YS5jb25zdHJ1Y3RvcihwYWRkZWREYXRhLmJ1ZmZlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVJlZ2lvbi5kYXRhU3RhcnQgKiBieXRlc1BlckVsZW1lbnQsIHVwZGF0ZUVsZW1lbnRDb3VudCk7XHJcbiAgICAgICAgY29uc3QgdXBkYXRlSGVpZ2h0ID0gdXBkYXRlUmVnaW9uLmVuZFJvdyAtIHVwZGF0ZVJlZ2lvbi5zdGFydFJvdyArIDE7XHJcbiAgICAgICAgY29uc3QgZ2xUeXBlID0gdGhpcy53ZWJHTFV0aWxzLmNvbnZlcnQodGV4dHVyZS50eXBlKTtcclxuICAgICAgICBjb25zdCBnbEZvcm1hdCA9IHRoaXMud2ViR0xVdGlscy5jb252ZXJ0KHRleHR1cmUuZm9ybWF0LCB0ZXh0dXJlLmNvbG9yU3BhY2UpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUZXh0dXJlID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlRFWFRVUkVfQklORElOR18yRCk7XHJcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKTtcclxuICAgICAgICBnbC50ZXhTdWJJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIDAsIHVwZGF0ZVJlZ2lvbi5zdGFydFJvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmVTaXplLngsIHVwZGF0ZUhlaWdodCwgZ2xGb3JtYXQsIGdsVHlwZSwgdXBkYXRlRGF0YVZpZXcpO1xyXG4gICAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIGN1cnJlbnRUZXh0dXJlKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXBkYXRlUGFkZGVkQ29tcHJlc3NlZENvdmFyaWFuY2VzVGV4dHVyZURhdGEoc291cmNlRGF0YSwgdGV4dHVyZURhdGEsIHRleHR1cmVEYXRhU3RhcnRJbmRleCwgZnJvbUVsZW1lbnQsIHRvRWxlbWVudCkge1xyXG4gICAgICAgIGxldCB0ZXh0dXJlRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGV4dHVyZURhdGEuYnVmZmVyKTtcclxuICAgICAgICBsZXQgdGV4dHVyZURhdGFJbmRleCA9IHRleHR1cmVEYXRhU3RhcnRJbmRleDtcclxuICAgICAgICBsZXQgc2VxdWVudGlhbENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbUVsZW1lbnQ7IGkgPD0gdG9FbGVtZW50OyBpKz0yKSB7XHJcbiAgICAgICAgICAgIHRleHR1cmVEYXRhVmlldy5zZXRVaW50MTYodGV4dHVyZURhdGFJbmRleCAqIDIsIHNvdXJjZURhdGFbaV0sIHRydWUpO1xyXG4gICAgICAgICAgICB0ZXh0dXJlRGF0YVZpZXcuc2V0VWludDE2KHRleHR1cmVEYXRhSW5kZXggKiAyICsgMiwgc291cmNlRGF0YVtpICsgMV0sIHRydWUpO1xyXG4gICAgICAgICAgICB0ZXh0dXJlRGF0YUluZGV4ICs9IDI7XHJcbiAgICAgICAgICAgIHNlcXVlbnRpYWxDb3VudCsrO1xyXG4gICAgICAgICAgICBpZiAoc2VxdWVudGlhbENvdW50ID49IDMpIHtcclxuICAgICAgICAgICAgICAgIHRleHR1cmVEYXRhSW5kZXggKz0gMjtcclxuICAgICAgICAgICAgICAgIHNlcXVlbnRpYWxDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVwZGF0ZUNlbnRlckNvbG9yc1BhZGRlZERhdGEoZnJvbSwgdG8sIGNlbnRlcnMsIGNvbG9ycywgcGFkZGVkQ2VudGVyQ29sb3JzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgYyA9IGZyb207IGMgPD0gdG87IGMrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvcnNCYXNlID0gYyAqIDQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlcnNCYXNlID0gYyAqIDM7XHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc0Jhc2UgPSBjICogNDtcclxuICAgICAgICAgICAgcGFkZGVkQ2VudGVyQ29sb3JzW2NlbnRlckNvbG9yc0Jhc2VdID0gcmdiYUFycmF5VG9JbnRlZ2VyKGNvbG9ycywgY29sb3JzQmFzZSk7XHJcbiAgICAgICAgICAgIHBhZGRlZENlbnRlckNvbG9yc1tjZW50ZXJDb2xvcnNCYXNlICsgMV0gPSB1aW50RW5jb2RlZEZsb2F0KGNlbnRlcnNbY2VudGVyc0Jhc2VdKTtcclxuICAgICAgICAgICAgcGFkZGVkQ2VudGVyQ29sb3JzW2NlbnRlckNvbG9yc0Jhc2UgKyAyXSA9IHVpbnRFbmNvZGVkRmxvYXQoY2VudGVyc1tjZW50ZXJzQmFzZSArIDFdKTtcclxuICAgICAgICAgICAgcGFkZGVkQ2VudGVyQ29sb3JzW2NlbnRlckNvbG9yc0Jhc2UgKyAzXSA9IHVpbnRFbmNvZGVkRmxvYXQoY2VudGVyc1tjZW50ZXJzQmFzZSArIDJdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVwZGF0ZVNjYWxlUm90YXRpb25zUGFkZGVkRGF0YShmcm9tLCB0bywgc2NhbGVzLCByb3RhdGlvbnMsIHBhZGRlZFNjYWxlUm90YXRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgY29tYmluZWRTaXplID0gNjtcclxuICAgICAgICBmb3IgKGxldCBjID0gZnJvbTsgYyA8PSB0bzsgYysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlQmFzZSA9IGMgKiAzO1xyXG4gICAgICAgICAgICBjb25zdCByb3RhdGlvbkJhc2UgPSBjICogNDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNCYXNlID0gYyAqIGNvbWJpbmVkU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIHBhZGRlZFNjYWxlUm90YXRpb25zW3NjYWxlUm90YXRpb25zQmFzZV0gPSBzY2FsZXNbc2NhbGVCYXNlXTtcclxuICAgICAgICAgICAgcGFkZGVkU2NhbGVSb3RhdGlvbnNbc2NhbGVSb3RhdGlvbnNCYXNlICsgMV0gPSBzY2FsZXNbc2NhbGVCYXNlICsgMV07XHJcbiAgICAgICAgICAgIHBhZGRlZFNjYWxlUm90YXRpb25zW3NjYWxlUm90YXRpb25zQmFzZSArIDJdID0gc2NhbGVzW3NjYWxlQmFzZSArIDJdO1xyXG5cclxuICAgICAgICAgICAgcGFkZGVkU2NhbGVSb3RhdGlvbnNbc2NhbGVSb3RhdGlvbnNCYXNlICsgM10gPSByb3RhdGlvbnNbcm90YXRpb25CYXNlXTtcclxuICAgICAgICAgICAgcGFkZGVkU2NhbGVSb3RhdGlvbnNbc2NhbGVSb3RhdGlvbnNCYXNlICsgNF0gPSByb3RhdGlvbnNbcm90YXRpb25CYXNlICsgMV07XHJcbiAgICAgICAgICAgIHBhZGRlZFNjYWxlUm90YXRpb25zW3NjYWxlUm90YXRpb25zQmFzZSArIDVdID0gcm90YXRpb25zW3JvdGF0aW9uQmFzZSArIDJdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWaXNpYmxlUmVnaW9uKHNpbmNlTGFzdEJ1aWxkT25seSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQodHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgdGVtcENlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgaWYgKCFzaW5jZUxhc3RCdWlsZE9ubHkpIHtcclxuICAgICAgICAgICAgY29uc3QgYXZnQ2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZXMuZm9yRWFjaCgoc2NlbmUpID0+IHtcclxuICAgICAgICAgICAgICAgIGF2Z0NlbnRlci5hZGQoc2NlbmUuc3BsYXRCdWZmZXIuc2NlbmVDZW50ZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXZnQ2VudGVyLm11bHRpcGx5U2NhbGFyKDEuMCAvIHRoaXMuc2NlbmVzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlZFNjZW5lQ2VudGVyLmNvcHkoYXZnQ2VudGVyKTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zY2VuZUNlbnRlci52YWx1ZS5jb3B5KHRoaXMuY2FsY3VsYXRlZFNjZW5lQ2VudGVyKTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RhcnRTcGxhdEZvcm1NYXhEaXN0YW5jZUNhbGMgPSBzaW5jZUxhc3RCdWlsZE9ubHkgPyB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgOiAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydFNwbGF0Rm9ybU1heERpc3RhbmNlQ2FsYzsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmdldFNwbGF0Q2VudGVyKHRoaXMubW9ycGhlZE1lc2gsIGksIHRlbXBDZW50ZXIsIHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXN0RnJvbUNTY2VuZUNlbnRlciA9IHRlbXBDZW50ZXIuc3ViKHRoaXMuY2FsY3VsYXRlZFNjZW5lQ2VudGVyKS5sZW5ndGgoKTtcclxuICAgICAgICAgICAgaWYgKGRpc3RGcm9tQ1NjZW5lQ2VudGVyID4gdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyKSB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXIgPSBkaXN0RnJvbUNTY2VuZUNlbnRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXIgLSB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPiBWSVNJQkxFX1JFR0lPTl9FWFBBTlNJT05fREVMVEEpIHtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID0gdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVSZWdpb25SYWRpdXMgPSBNYXRoLm1heCh0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgLSBWSVNJQkxFX1JFR0lPTl9FWFBBTlNJT05fREVMVEEsIDAuMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsQnVpbGQpIHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cyA9IHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA9IHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlcjtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVSZWdpb25GYWRlRGlzdGFuY2UoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVWaXNpYmxlUmVnaW9uRmFkZURpc3RhbmNlKHNjZW5lUmV2ZWFsTW9kZSA9IFNjZW5lUmV2ZWFsTW9kZS5EZWZhdWx0KSB7XHJcbiAgICAgICAgY29uc3QgZmFzdEZhZGVSYXRlID0gU0NFTkVfRkFERUlOX1JBVEVfRkFTVCAqIHRoaXMuc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllcjtcclxuICAgICAgICBjb25zdCBncmFkdWFsRmFkZVJhdGUgPSBTQ0VORV9GQURFSU5fUkFURV9HUkFEVUFMICogdGhpcy5zY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyO1xyXG4gICAgICAgIGNvbnN0IGRlZmF1bHRGYWRlSW5SYXRlID0gdGhpcy5maW5hbEJ1aWxkID8gZmFzdEZhZGVSYXRlIDogZ3JhZHVhbEZhZGVSYXRlO1xyXG4gICAgICAgIGNvbnN0IGZhZGVJblJhdGUgPSBzY2VuZVJldmVhbE1vZGUgPT09IFNjZW5lUmV2ZWFsTW9kZS5EZWZhdWx0ID8gZGVmYXVsdEZhZGVJblJhdGUgOiBncmFkdWFsRmFkZVJhdGU7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzID0gKHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cyAtIHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cykgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWRlSW5SYXRlICsgdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzO1xyXG4gICAgICAgIGNvbnN0IGZhZGVJblBlcmNlbnRhZ2UgPSAodGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID4gMCkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzIC8gdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzKSA6IDA7XHJcbiAgICAgICAgY29uc3QgZmFkZUluQ29tcGxldGUgPSBmYWRlSW5QZXJjZW50YWdlID4gMC45OTtcclxuICAgICAgICBjb25zdCBzaGFkZXJGYWRlSW5Db21wbGV0ZSA9IChmYWRlSW5Db21wbGV0ZSB8fCBzY2VuZVJldmVhbE1vZGUgPT09IFNjZW5lUmV2ZWFsTW9kZS5JbnN0YW50KSA/IDEgOiAwO1xyXG5cclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMudmFsdWUgPSB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXM7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy52aXNpYmxlUmVnaW9uUmFkaXVzLnZhbHVlID0gdGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZmlyc3RSZW5kZXJUaW1lLnZhbHVlID0gdGhpcy5maXJzdFJlbmRlclRpbWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jdXJyZW50VGltZS52YWx1ZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZmFkZUluQ29tcGxldGUudmFsdWUgPSBzaGFkZXJGYWRlSW5Db21wbGV0ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQ2hhbmdpbmcgPSAhZmFkZUluQ29tcGxldGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGluZGV4ZXMgb2Ygc3BsYXRzIHRoYXQgc2hvdWxkIGJlIHJlbmRlcmVkOyBzaG91bGQgYmUgc29ydGVkIGluIGRlc2lyZWQgcmVuZGVyIG9yZGVyLlxyXG4gICAgICogQHBhcmFtIHtVaW50MzJBcnJheX0gZ2xvYmFsSW5kZXhlcyBTb3J0ZWQgaW5kZXggbGlzdCBvZiBzcGxhdHMgdG8gYmUgcmVuZGVyZWRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZW5kZXJTcGxhdENvdW50IFRvdGFsIG51bWJlciBvZiBzcGxhdHMgdG8gYmUgcmVuZGVyZWQuIE5lY2Vzc2FyeSBiZWNhdXNlIHdlIG1heSBub3Qgd2FudCB0byByZW5kZXJcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZXJ5IHNwbGF0LlxyXG4gICAgICovXHJcbiAgICB1cGRhdGVSZW5kZXJJbmRleGVzKGdsb2JhbEluZGV4ZXMsIHJlbmRlclNwbGF0Q291bnQpIHtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XHJcbiAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5zcGxhdEluZGV4LnNldChnbG9iYWxJbmRleGVzKTtcclxuICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnNwbGF0SW5kZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChyZW5kZXJTcGxhdENvdW50ID4gMCAmJiB0aGlzLmZpcnN0UmVuZGVyVGltZSA9PT0gLTEpIHRoaXMuZmlyc3RSZW5kZXJUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgZ2VvbWV0cnkuaW5zdGFuY2VDb3VudCA9IHJlbmRlclNwbGF0Q291bnQ7XHJcbiAgICAgICAgZ2VvbWV0cnkuc2V0RHJhd1JhbmdlKDAsIHJlbmRlclNwbGF0Q291bnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSB0cmFuc2Zvcm1zIGZvciBlYWNoIHNjZW5lIGluIHRoaXMgc3BsYXQgbWVzaCBmcm9tIHRoZWlyIGluZGl2aWR1YWwgY29tcG9uZW50cyAocG9zaXRpb24sXHJcbiAgICAgKiBxdWF0ZXJuaW9uLCBhbmQgc2NhbGUpXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVRyYW5zZm9ybXMoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoaSk7XHJcbiAgICAgICAgICAgIHNjZW5lLnVwZGF0ZVRyYW5zZm9ybSh0aGlzLmR5bmFtaWNNb2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVW5pZm9ybXMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgdmlld3BvcnQgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVuZGVyRGltZW5zaW9ucywgY2FtZXJhRm9jYWxMZW5ndGhYLCBjYW1lcmFGb2NhbExlbmd0aFksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ydGhvZ3JhcGhpY01vZGUsIG9ydGhvZ3JhcGhpY1pvb20sIGludmVyc2VGb2NhbEFkanVzdG1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgICAgICBpZiAoc3BsYXRDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0LnNldChyZW5kZXJEaW1lbnNpb25zLnggKiB0aGlzLmRldmljZVBpeGVsUmF0aW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyRGltZW5zaW9ucy55ICogdGhpcy5kZXZpY2VQaXhlbFJhdGlvKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudmlld3BvcnQudmFsdWUuY29weSh2aWV3cG9ydCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJhc2lzVmlld3BvcnQudmFsdWUuc2V0KDEuMCAvIHZpZXdwb3J0LngsIDEuMCAvIHZpZXdwb3J0LnkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5mb2NhbC52YWx1ZS5zZXQoY2FtZXJhRm9jYWxMZW5ndGhYLCBjYW1lcmFGb2NhbExlbmd0aFkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5vcnRob2dyYXBoaWNNb2RlLnZhbHVlID0gb3J0aG9ncmFwaGljTW9kZSA/IDEgOiAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5vcnRob1pvb20udmFsdWUgPSBvcnRob2dyYXBoaWNab29tO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5pbnZlcnNlRm9jYWxBZGp1c3RtZW50LnZhbHVlID0gaW52ZXJzZUZvY2FsQWRqdXN0bWVudDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnRyYW5zZm9ybXMudmFsdWVbaV0uY29weSh0aGlzLmdldFNjZW5lKGkpLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjZW5lT3BhY2l0eS52YWx1ZVtpXSA9IGNsYW1wKHRoaXMuZ2V0U2NlbmUoaSkub3BhY2l0eSwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjZW5lVmlzaWJpbGl0eS52YWx1ZVtpXSA9IHRoaXMuZ2V0U2NlbmUoaSkudmlzaWJsZSA/IDEgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgc2V0U3BsYXRTY2FsZShzcGxhdFNjYWxlID0gMSkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRTY2FsZSA9IHNwbGF0U2NhbGU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGxhdFNjYWxlLnZhbHVlID0gc3BsYXRTY2FsZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRTY2FsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcGxhdFNjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBvaW50Q2xvdWRNb2RlRW5hYmxlZChlbmFibGVkKSB7XHJcbiAgICAgICAgdGhpcy5wb2ludENsb3VkTW9kZUVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMucG9pbnRDbG91ZE1vZGVFbmFibGVkLnZhbHVlID0gZW5hYmxlZCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQb2ludENsb3VkTW9kZUVuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRDbG91ZE1vZGVFbmFibGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0RGF0YVRleHR1cmVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGF0RGF0YVRleHR1cmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0Q291bnQoaW5jbHVkZVNpbmNlTGFzdEJ1aWxkID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIWluY2x1ZGVTaW5jZUxhc3RCdWlsZCkgcmV0dXJuIHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudDtcclxuICAgICAgICBlbHNlIHJldHVybiBTcGxhdE1lc2guZ2V0VG90YWxTcGxhdENvdW50Rm9yU2NlbmVzKHRoaXMuc2NlbmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VG90YWxTcGxhdENvdW50Rm9yU2NlbmVzKHNjZW5lcykge1xyXG4gICAgICAgIGxldCB0b3RhbFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHNjZW5lIG9mIHNjZW5lcykge1xyXG4gICAgICAgICAgICBpZiAoc2NlbmUgJiYgc2NlbmUuc3BsYXRCdWZmZXIpIHRvdGFsU3BsYXRDb3VudCArPSBzY2VuZS5zcGxhdEJ1ZmZlci5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0b3RhbFNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRvdGFsU3BsYXRDb3VudEZvclNwbGF0QnVmZmVycyhzcGxhdEJ1ZmZlcnMpIHtcclxuICAgICAgICBsZXQgdG90YWxTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzcGxhdEJ1ZmZlciBvZiBzcGxhdEJ1ZmZlcnMpIHRvdGFsU3BsYXRDb3VudCArPSBzcGxhdEJ1ZmZlci5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsU3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNYXhTcGxhdENvdW50KCkge1xyXG4gICAgICAgIHJldHVybiBTcGxhdE1lc2guZ2V0VG90YWxNYXhTcGxhdENvdW50Rm9yU2NlbmVzKHRoaXMuc2NlbmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VG90YWxNYXhTcGxhdENvdW50Rm9yU2NlbmVzKHNjZW5lcykge1xyXG4gICAgICAgIGxldCB0b3RhbFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHNjZW5lIG9mIHNjZW5lcykge1xyXG4gICAgICAgICAgICBpZiAoc2NlbmUgJiYgc2NlbmUuc3BsYXRCdWZmZXIpIHRvdGFsU3BsYXRDb3VudCArPSBzY2VuZS5zcGxhdEJ1ZmZlci5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0b3RhbFNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRvdGFsTWF4U3BsYXRDb3VudEZvclNwbGF0QnVmZmVycyhzcGxhdEJ1ZmZlcnMpIHtcclxuICAgICAgICBsZXQgdG90YWxTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBzcGxhdEJ1ZmZlciBvZiBzcGxhdEJ1ZmZlcnMpIHRvdGFsU3BsYXRDb3VudCArPSBzcGxhdEJ1ZmZlci5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsU3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlRGlzdGFuY2VzQ29tcHV0YXRpb25HUFVSZXNvdXJjZXMoKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pIHtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlVmVydGV4QXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0pIHtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0pO1xyXG4gICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52ZXJ0ZXhTaGFkZXIpO1xyXG4gICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5mcmFnbWVudFNoYWRlcik7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmVydGV4U2hhZGVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5mcmFnbWVudFNoYWRlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGlzcG9zZURpc3RhbmNlc0NvbXB1dGF0aW9uR1BVQnVmZmVyUmVzb3VyY2VzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suaWQpIHtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlVHJhbnNmb3JtRmVlZGJhY2sodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5pZCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suaWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlRGlzdGFuY2VzQ29tcHV0YXRpb25HUFVCdWZmZXJSZXNvdXJjZXMoKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlciA9IG51bGw7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZUJ1ZmZlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIpIHtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyKTtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgVGhyZWUuanMgcmVuZGVyZXIgdXNlZCBieSB0aGlzIHNwbGF0IG1lc2hcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuV2ViR0xSZW5kZXJlcn0gcmVuZGVyZXIgSW5zdGFuY2Ugb2YgVEhSRUUuV2ViR0xSZW5kZXJlclxyXG4gICAgICovXHJcbiAgICBzZXRSZW5kZXJlcihyZW5kZXJlcikge1xyXG4gICAgICAgIGlmIChyZW5kZXJlciAhPT0gdGhpcy5yZW5kZXJlcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBuZXcgV2ViR0xFeHRlbnNpb25zJDEoZ2wpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSBuZXcgV2ViR0xDYXBhYmlsaXRpZXMkMShnbCwgZXh0ZW5zaW9ucywge30pO1xyXG4gICAgICAgICAgICBleHRlbnNpb25zLmluaXQoY2FwYWJpbGl0aWVzKTtcclxuICAgICAgICAgICAgdGhpcy53ZWJHTFV0aWxzID0gbmV3IFdlYkdMVXRpbHMkMShnbCwgZXh0ZW5zaW9ucywgY2FwYWJpbGl0aWVzKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVSAmJiB0aGlzLmdldFNwbGF0Q291bnQoKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBEaXN0YW5jZXNDb21wdXRhdGlvblRyYW5zZm9ybUZlZWRiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNlbnRlcnMsIHNjZW5lSW5kZXhlcyB9ID0gdGhpcy5nZXREYXRhRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oMCwgdGhpcy5nZXRTcGxhdENvdW50KCkgLSAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEdQVUJ1ZmZlcnNGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihjZW50ZXJzLCBzY2VuZUluZGV4ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldHVwRGlzdGFuY2VzQ29tcHV0YXRpb25UcmFuc2Zvcm1GZWVkYmFjayA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudE1heFNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSB0aGlzLmdldE1heFNwbGF0Q291bnQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZW5kZXJlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVidWlsZEdQVU9iamVjdHMgPSAodGhpcy5sYXN0UmVuZGVyZXIgIT09IHRoaXMucmVuZGVyZXIpO1xyXG4gICAgICAgICAgICBjb25zdCByZWJ1aWxkQnVmZmVycyA9IGN1cnJlbnRNYXhTcGxhdENvdW50ICE9PSBtYXhTcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZWJ1aWxkR1BVT2JqZWN0cyAmJiAhcmVidWlsZEJ1ZmZlcnMpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkR1BVT2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlRGlzdGFuY2VzQ29tcHV0YXRpb25HUFVSZXNvdXJjZXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWJ1aWxkQnVmZmVycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlRGlzdGFuY2VzQ29tcHV0YXRpb25HUFVCdWZmZXJSZXNvdXJjZXMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZVNoYWRlciA9IChnbCwgdHlwZSwgc291cmNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNoYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmF0YWwgZXJyb3I6IGdsIGNvdWxkIG5vdCBjcmVhdGUgYSBzaGFkZXIgb2JqZWN0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZWQgPSBnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBpbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGVOYW1lID0gJ3Vua25vd24nO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSBnbC5WRVJURVhfU0hBREVSKSB0eXBlTmFtZSA9ICd2ZXJ0ZXggc2hhZGVyJztcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBnbC5GUkFHTUVOVF9TSEFERVIpIHR5cGVOYW1lID0gJ2ZyYWdlbWVudCBzaGFkZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBjb21waWxlICcgKyB0eXBlTmFtZSArICcgd2l0aCB0aGVzZSBlcnJvcnM6JyArIGVycm9ycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCB2c1NvdXJjZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHZzU291cmNlID1cclxuICAgICAgICAgICAgICAgIGAjdmVyc2lvbiAzMDAgZXNcclxuICAgICAgICAgICAgICAgIGluIGl2ZWM0IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIGZsYXQgb3V0IGludCBkaXN0YW5jZTtgO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2c1NvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluIHVpbnQgc2NlbmVJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybSBpdmVjNCB0cmFuc2Zvcm1zWyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXZlYzQgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gY2VudGVyLnggKiB0cmFuc2Zvcm0ueCArIGNlbnRlci55ICogdHJhbnNmb3JtLnkgKyBjZW50ZXIueiAqIHRyYW5zZm9ybS56ICsgdHJhbnNmb3JtLncgKiBjZW50ZXIudztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZzU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybSBpdmVjMyBtb2RlbFZpZXdQcm9qO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2b2lkIG1haW4odm9pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBjZW50ZXIueCAqIG1vZGVsVmlld1Byb2oueCArIGNlbnRlci55ICogbW9kZWxWaWV3UHJvai55ICsgY2VudGVyLnogKiBtb2RlbFZpZXdQcm9qLno7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdnNTb3VyY2UgPVxyXG4gICAgICAgICAgICAgICAgYCN2ZXJzaW9uIDMwMCBlc1xyXG4gICAgICAgICAgICAgICAgaW4gdmVjNCBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICBmbGF0IG91dCBmbG9hdCBkaXN0YW5jZTtgO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2c1NvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluIHVpbnQgc2NlbmVJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybSBtYXQ0IHRyYW5zZm9ybXNbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHRyYW5zZm9ybWVkQ2VudGVyID0gdHJhbnNmb3Jtc1tzY2VuZUluZGV4XSAqIHZlYzQoY2VudGVyLnh5eiwgMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gdHJhbnNmb3JtZWRDZW50ZXIuejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZzU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybSB2ZWMzIG1vZGVsVmlld1Byb2o7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGNlbnRlci54ICogbW9kZWxWaWV3UHJvai54ICsgY2VudGVyLnkgKiBtb2RlbFZpZXdQcm9qLnkgKyBjZW50ZXIueiAqIG1vZGVsVmlld1Byb2ouejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZzU291cmNlID1cclxuICAgICAgICAgICAgYCN2ZXJzaW9uIDMwMCBlc1xyXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uIGxvd3AgZmxvYXQ7XHJcbiAgICAgICAgICAgICAgICBvdXQgdmVjNCBmcmFnQ29sb3I7XHJcbiAgICAgICAgICAgICAgICB2b2lkIG1haW4oKXt9XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFvID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlRFWF9BUlJBWV9CSU5ESU5HKTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFByb2dyYW0gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuQ1VSUkVOVF9QUk9HUkFNKTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFByb2dyYW1EZWxldGVkID0gY3VycmVudFByb2dyYW0gPyBnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKGN1cnJlbnRQcm9ncmFtLCBnbC5ERUxFVEVfU1RBVFVTKSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGRHUFVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyA9IGdsLmNyZWF0ZVZlcnRleEFycmF5KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZEdQVU9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0ZXhTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLlZFUlRFWF9TSEFERVIsIHZzU291cmNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyID0gY3JlYXRlU2hhZGVyKGdsLCBnbC5GUkFHTUVOVF9TSEFERVIsIGZzU291cmNlKTtcclxuICAgICAgICAgICAgICAgIGlmICghdmVydGV4U2hhZGVyIHx8ICFmcmFnbWVudFNoYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGNvbXBpbGUgc2hhZGVycyBmb3IgZGlzdGFuY2VzIGNvbXB1dGF0aW9uIG9uIEdQVS4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICAgICAgICAgIGdsLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MocHJvZ3JhbSwgWydkaXN0YW5jZSddLCBnbC5TRVBBUkFURV9BVFRSSUJTKTtcclxuICAgICAgICAgICAgICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtlZCA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsaW5rZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGdsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmF0YWwgZXJyb3I6IEZhaWxlZCB0byBsaW5rIHByb2dyYW06ICcgKyBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGxpbmsgc2hhZGVycyBmb3IgZGlzdGFuY2VzIGNvbXB1dGF0aW9uIG9uIEdQVS4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0gPSBwcm9ncmFtO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52ZXJ0ZXhTaGFkZXIgPSB2ZXJ0ZXhTaGFkZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZlcnRleFNoYWRlciA9IGZyYWdtZW50U2hhZGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MgPVxyXG4gICAgICAgICAgICAgICAgZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtLCAnY2VudGVyJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0xvYyA9XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtLCAnc2NlbmVJbmRleCcpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudHJhbnNmb3Jtc0xvY3NbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtLCBgdHJhbnNmb3Jtc1ske2l9XWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5tb2RlbFZpZXdQcm9qTG9jID1cclxuICAgICAgICAgICAgICAgICAgICBnbC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtLCAnbW9kZWxWaWV3UHJvaicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZEdQVU9iamVjdHMgfHwgcmVidWlsZEJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MsIDQsIGdsLklOVCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jLCA0LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNCdWZmZXIgPSBnbC5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzTG9jKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0xvYywgMSwgZ2wuVU5TSUdORURfSU5ULCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGRHUFVPYmplY3RzIHx8IHJlYnVpbGRCdWZmZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBtYXhTcGxhdENvdW50ICogNCwgZ2wuU1RBVElDX1JFQUQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGRHUFVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmlkID0gZ2wuY3JlYXRlVHJhbnNmb3JtRmVlZGJhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnbC5iaW5kVHJhbnNmb3JtRmVlZGJhY2soZ2wuVFJBTlNGT1JNX0ZFRURCQUNLLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmlkKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMCwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQcm9ncmFtICYmIGN1cnJlbnRQcm9ncmFtRGVsZXRlZCAhPT0gdHJ1ZSkgZ2wudXNlUHJvZ3JhbShjdXJyZW50UHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50VmFvKSBnbC5iaW5kVmVydGV4QXJyYXkoY3VycmVudFZhbyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxhc3RSZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XHJcbiAgICAgICAgICAgIGN1cnJlbnRNYXhTcGxhdENvdW50ID0gbWF4U3BsYXRDb3VudDtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZnJlc2ggR1BVIGJ1ZmZlcnMgdXNlZCBmb3IgY29tcHV0aW5nIHNwbGF0IGRpc3RhbmNlcyB3aXRoIGNlbnRlcnMgZGF0YSBmcm9tIHRoZSBzY2VuZXMgZm9yIHRoaXMgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNVcGRhdGUgU3BlY2lmeSB3aGV0aGVyIG9yIG5vdCB0byB1cGRhdGUgdGhlIEdQVSBidWZmZXIgb3IgdG8gaW5pdGlhbGl6ZSAmIGZpbGxcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2VudGVycyBUaGUgc3BsYXQgY2VudGVycyBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0U3BsYXRzIE9mZnNldCBpbiB0aGUgR1BVIGJ1ZmZlciBhdCB3aGljaCB0byBzdGFydCB1cGRhdGluZyBkYXRhLCBzcGVjaWZpZWQgaW4gc3BsYXRzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUdQVUNlbnRlcnNCdWZmZXJGb3JEaXN0YW5jZXNDb21wdXRhdGlvbihpc1VwZGF0ZSwgY2VudGVycywgb2Zmc2V0U3BsYXRzKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50VmFvID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlRFWF9BUlJBWV9CSU5ESU5HKTtcclxuICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pO1xyXG5cclxuICAgICAgICBjb25zdCBBcnJheVR5cGUgPSB0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uID8gVWludDMyQXJyYXkgOiBGbG9hdDMyQXJyYXk7XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlQnl0ZXNQZXJDZW50ZXIgPSAxNjtcclxuICAgICAgICBjb25zdCBzdWJCdWZmZXJPZmZzZXQgPSBvZmZzZXRTcGxhdHMgKiBhdHRyaWJ1dGVCeXRlc1BlckNlbnRlcjtcclxuXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlcik7XHJcblxyXG4gICAgICAgIGlmIChpc1VwZGF0ZSkge1xyXG4gICAgICAgICAgICBnbC5idWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc3ViQnVmZmVyT2Zmc2V0LCBjZW50ZXJzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBtYXhBcnJheSA9IG5ldyBBcnJheVR5cGUodGhpcy5nZXRNYXhTcGxhdENvdW50KCkgKiBhdHRyaWJ1dGVCeXRlc1BlckNlbnRlcik7XHJcbiAgICAgICAgICAgIG1heEFycmF5LnNldChjZW50ZXJzKTtcclxuICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG1heEFycmF5LCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50VmFvKSBnbC5iaW5kVmVydGV4QXJyYXkoY3VycmVudFZhbyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZyZXNoIEdQVSBidWZmZXJzIHVzZWQgZm9yIHByZS1jb21wdXRpbmcgc3BsYXQgZGlzdGFuY2VzIHdpdGggY2VudGVycyBkYXRhIGZyb20gdGhlIHNjZW5lcyBmb3IgdGhpcyBtZXNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1VwZGF0ZSBTcGVjaWZ5IHdoZXRoZXIgb3Igbm90IHRvIHVwZGF0ZSB0aGUgR1BVIGJ1ZmZlciBvciB0byBpbml0aWFsaXplICYgZmlsbFxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzY2VuZUluZGV4ZXMgVGhlIHNwbGF0IHNjZW5lIGluZGV4ZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRTcGxhdHMgT2Zmc2V0IGluIHRoZSBHUFUgYnVmZmVyIGF0IHdoaWNoIHRvIHN0YXJ0IHVwZGF0aW5nIGRhdGEsIHNwZWNpZmllZCBpbiBzcGxhdHNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlR1BVVHJhbnNmb3JtSW5kZXhlc0J1ZmZlckZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKGlzVXBkYXRlLCBzY2VuZUluZGV4ZXMsIG9mZnNldFNwbGF0cykge1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXIgfHwgIXRoaXMuZHluYW1pY01vZGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudFZhbyA9IGdsLmdldFBhcmFtZXRlcihnbC5WRVJURVhfQVJSQVlfQklORElORyk7XHJcbiAgICAgICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3ViQnVmZmVyT2Zmc2V0ID0gb2Zmc2V0U3BsYXRzICogNDtcclxuXHJcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzQnVmZmVyKTtcclxuXHJcbiAgICAgICAgaWYgKGlzVXBkYXRlKSB7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdWJCdWZmZXJPZmZzZXQsIHNjZW5lSW5kZXhlcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbWF4QXJyYXkgPSBuZXcgVWludDMyQXJyYXkodGhpcy5nZXRNYXhTcGxhdENvdW50KCkgKiA0KTtcclxuICAgICAgICAgICAgbWF4QXJyYXkuc2V0KHNjZW5lSW5kZXhlcyk7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBtYXhBcnJheSwgZ2wuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50VmFvKSBnbC5iaW5kVmVydGV4QXJyYXkoY3VycmVudFZhbyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSB0eXBlZCBhcnJheSBjb250YWluaW5nIGEgbWFwcGluZyBmcm9tIGdsb2JhbCBzcGxhdCBpbmRleGVzIHRvIHRoZWlyIHNjZW5lIGluZGV4LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFN0YXJ0aW5nIHNwbGF0IGluZGV4IHRvIHN0b3JlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZGluZyBzcGxhdCBpbmRleCB0byBzdG9yZVxyXG4gICAgICogQHJldHVybiB7VWludDMyQXJyYXl9XHJcbiAgICAgKi9cclxuICAgIGdldFNjZW5lSW5kZXhlcyhzdGFydCwgZW5kKSB7XHJcblxyXG4gICAgICAgIGxldCBzY2VuZUluZGV4ZXM7XHJcbiAgICAgICAgY29uc3QgZmlsbENvdW50ID0gZW5kIC0gc3RhcnQgKyAxO1xyXG4gICAgICAgIHNjZW5lSW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheShmaWxsQ291bnQpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8PSBlbmQ7IGkrKykge1xyXG4gICAgICAgICAgICBzY2VuZUluZGV4ZXNbaV0gPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXBbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2NlbmVJbmRleGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsbCAnYXJyYXknIHdpdGggdGhlIHRyYW5zZm9ybXMgZm9yIGVhY2ggc2NlbmUgaW4gdGhpcyBzcGxhdCBtZXNoLlxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgRW1wdHkgYXJyYXkgdG8gYmUgZmlsbGVkIHdpdGggc2NlbmUgdHJhbnNmb3Jtcy4gSWYgbm90IGVtcHR5LCBjb250ZW50cyB3aWxsIGJlIG92ZXJ3cml0dGVuLlxyXG4gICAgICovXHJcbiAgICBmaWxsVHJhbnNmb3Jtc0FycmF5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKHRlbXBBcnJheS5sZW5ndGggIT09IGFycmF5Lmxlbmd0aCkgdGVtcEFycmF5Lmxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NlbmVUcmFuc2Zvcm0gPSB0aGlzLmdldFNjZW5lKGkpLnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lVHJhbnNmb3JtRWxlbWVudHMgPSBzY2VuZVRyYW5zZm9ybS5lbGVtZW50cztcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTY7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBBcnJheVtpICogMTYgKyBqXSA9IHNjZW5lVHJhbnNmb3JtRWxlbWVudHNbal07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyYXkuc2V0KHRlbXBBcnJheSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgY29tcHV0ZURpc3RhbmNlc09uR1BVID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gKG1vZGVsVmlld1Byb2pNYXRyaXgsIG91dENvbXB1dGVkRGlzdGFuY2VzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yZW5kZXJlcikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYW8gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSVEVYX0FSUkFZX0JJTkRJTkcpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UHJvZ3JhbSA9IGdsLmdldFBhcmFtZXRlcihnbC5DVVJSRU5UX1BST0dSQU0pO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UHJvZ3JhbURlbGV0ZWQgPSBjdXJyZW50UHJvZ3JhbSA/IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIoY3VycmVudFByb2dyYW0sIGdsLkRFTEVURV9TVEFUVVMpIDogZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pO1xyXG4gICAgICAgICAgICBnbC51c2VQcm9ncmFtKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSk7XHJcblxyXG4gICAgICAgICAgICBnbC5lbmFibGUoZ2wuUkFTVEVSSVpFUl9ESVNDQVJEKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5jb3B5KHRoaXMuZ2V0U2NlbmUoaSkudHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LnByZW11bHRpcGx5KG1vZGVsVmlld1Byb2pNYXRyaXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpVGVtcE1hdHJpeCA9IFNwbGF0TWVzaC5nZXRJbnRlZ2VyTWF0cml4QXJyYXkodGVtcE1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlUcmFuc2Zvcm0gPSBbaVRlbXBNYXRyaXhbMl0sIGlUZW1wTWF0cml4WzZdLCBpVGVtcE1hdHJpeFsxMF0sIGlUZW1wTWF0cml4WzE0XV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm00aSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnRyYW5zZm9ybXNMb2NzW2ldLCBpVHJhbnNmb3JtWzBdLCBpVHJhbnNmb3JtWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVRyYW5zZm9ybVsyXSwgaVRyYW5zZm9ybVszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnRyYW5zZm9ybXNMb2NzW2ldLCBmYWxzZSwgdGVtcE1hdHJpeC5lbGVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpVmlld1Byb2pNYXRyaXggPSBTcGxhdE1lc2guZ2V0SW50ZWdlck1hdHJpeEFycmF5KG1vZGVsVmlld1Byb2pNYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlWaWV3UHJvaiA9IFtpVmlld1Byb2pNYXRyaXhbMl0sIGlWaWV3UHJvak1hdHJpeFs2XSwgaVZpZXdQcm9qTWF0cml4WzEwXV07XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTNpKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2subW9kZWxWaWV3UHJvakxvYywgaVZpZXdQcm9qWzBdLCBpVmlld1Byb2pbMV0sIGlWaWV3UHJvalsyXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdQcm9qID0gW21vZGVsVmlld1Byb2pNYXRyaXguZWxlbWVudHNbMl0sIG1vZGVsVmlld1Byb2pNYXRyaXguZWxlbWVudHNbNl0sIG1vZGVsVmlld1Byb2pNYXRyaXguZWxlbWVudHNbMTBdXTtcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtM2YodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5tb2RlbFZpZXdQcm9qTG9jLCB2aWV3UHJvalswXSwgdmlld1Byb2pbMV0sIHZpZXdQcm9qWzJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlcik7XHJcbiAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MsIDQsIGdsLklOVCwgMCwgMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYywgNCwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0xvYyk7XHJcbiAgICAgICAgICAgICAgICBnbC52ZXJ0ZXhBdHRyaWJJUG9pbnRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0xvYywgMSwgZ2wuVU5TSUdORURfSU5ULCAwLCAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2wuYmluZFRyYW5zZm9ybUZlZWRiYWNrKGdsLlRSQU5TRk9STV9GRUVEQkFDSywgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5pZCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXJCYXNlKGdsLlRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVIsIDAsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGdsLmJlZ2luVHJhbnNmb3JtRmVlZGJhY2soZ2wuUE9JTlRTKTtcclxuICAgICAgICAgICAgZ2wuZHJhd0FycmF5cyhnbC5QT0lOVFMsIDAsIHRoaXMuZ2V0U3BsYXRDb3VudCgpKTtcclxuICAgICAgICAgICAgZ2wuZW5kVHJhbnNmb3JtRmVlZGJhY2soKTtcclxuXHJcbiAgICAgICAgICAgIGdsLmJpbmRCdWZmZXJCYXNlKGdsLlRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVIsIDAsIG51bGwpO1xyXG4gICAgICAgICAgICBnbC5iaW5kVHJhbnNmb3JtRmVlZGJhY2soZ2wuVFJBTlNGT1JNX0ZFRURCQUNLLCBudWxsKTtcclxuXHJcbiAgICAgICAgICAgIGdsLmRpc2FibGUoZ2wuUkFTVEVSSVpFUl9ESVNDQVJEKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHN5bmMgPSBnbC5mZW5jZVN5bmMoZ2wuU1lOQ19HUFVfQ09NTUFORFNfQ09NUExFVEUsIDApO1xyXG4gICAgICAgICAgICBnbC5mbHVzaCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja1N5bmMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaXRmbGFncyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGdsLmNsaWVudFdhaXRTeW5jKHN5bmMsIGJpdGZsYWdzLCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZ2wuVElNRU9VVF9FWFBJUkVEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQgPSBzZXRUaW1lb3V0KGNoZWNrU3luYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGdsLldBSVRfRkFJTEVEOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2hvdWxkIG5ldmVyIGdldCBoZXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuZGVsZXRlU3luYyhzeW5jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmFvID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlRFWF9BUlJBWV9CSU5ESU5HKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuZ2V0QnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIDAsIG91dENvbXB1dGVkRGlzdGFuY2VzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VmFvKSBnbC5iaW5kVmVydGV4QXJyYXkoY3VycmVudFZhbyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0ID0gc2V0VGltZW91dChjaGVja1N5bmMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UHJvZ3JhbSAmJiBjdXJyZW50UHJvZ3JhbURlbGV0ZWQgIT09IHRydWUpIGdsLnVzZVByb2dyYW0oY3VycmVudFByb2dyYW0pO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudFZhbykgZ2wuYmluZFZlcnRleEFycmF5KGN1cnJlbnRWYW8pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlbiBhIGdsb2JhbCBzcGxhdCBpbmRleCwgcmV0dXJuIGNvcnJlc3BvbmRpbmcgbG9jYWwgZGF0YSAoc3BsYXQgYnVmZmVyLCBpbmRleCBvZiBzcGxhdCBpbiB0aGF0IHNwbGF0XHJcbiAgICAgKiBidWZmZXIsIGFuZCB0aGUgY29ycmVzcG9uZGluZyB0cmFuc2Zvcm0pXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ2xvYmFsSW5kZXggR2xvYmFsIHNwbGF0IGluZGV4XHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcGFyYW1zT2JqIE9iamVjdCBpbiB3aGljaCB0byBzdG9yZSBsb2NhbCBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJldHVyblNjZW5lVHJhbnNmb3JtIEJ5IGRlZmF1bHQsIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIHNjZW5lIHRvIHdoaWNoIHRoZSBzcGxhdCBhdCAnZ2xvYmFsSW5kZXgnIGJlbG9uZ3Mgd2lsbCBiZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5lZCB2aWEgdGhlICdzY2VuZVRyYW5zZm9ybScgcHJvcGVydHkgb2YgJ3BhcmFtc09iaicgb25seSBpZiB0aGUgc3BsYXQgbWVzaCBpcyBzdGF0aWMuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmICdyZXR1cm5TY2VuZVRyYW5zZm9ybScgaXMgdHJ1ZSwgdGhlICdzY2VuZVRyYW5zZm9ybScgcHJvcGVydHkgd2lsbCBhbHdheXMgY29udGFpbiB0aGUgc2NlbmVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtLCBhbmQgaWYgJ3JldHVyblNjZW5lVHJhbnNmb3JtJyBpcyBmYWxzZSwgdGhlICdzY2VuZVRyYW5zZm9ybScgcHJvcGVydHkgd2lsbCBhbHdheXNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgbnVsbC5cclxuICAgICAqL1xyXG4gICAgZ2V0TG9jYWxTcGxhdFBhcmFtZXRlcnMoZ2xvYmFsSW5kZXgsIHBhcmFtc09iaiwgcmV0dXJuU2NlbmVUcmFuc2Zvcm0pIHtcclxuICAgICAgICBpZiAocmV0dXJuU2NlbmVUcmFuc2Zvcm0gPT09IHVuZGVmaW5lZCB8fCByZXR1cm5TY2VuZVRyYW5zZm9ybSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm5TY2VuZVRyYW5zZm9ybSA9IHRoaXMuZHluYW1pY01vZGUgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBhcmFtc09iai5zcGxhdEJ1ZmZlciA9IHRoaXMuZ2V0U3BsYXRCdWZmZXJGb3JTcGxhdChnbG9iYWxJbmRleCk7XHJcbiAgICAgICAgcGFyYW1zT2JqLmxvY2FsSW5kZXggPSB0aGlzLmdldFNwbGF0TG9jYWxJbmRleChnbG9iYWxJbmRleCk7XHJcbiAgICAgICAgcGFyYW1zT2JqLnNjZW5lVHJhbnNmb3JtID0gcmV0dXJuU2NlbmVUcmFuc2Zvcm0gPyB0aGlzLmdldFNjZW5lVHJhbnNmb3JtRm9yU3BsYXQoZ2xvYmFsSW5kZXgpIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbGwgYXJyYXlzIHdpdGggc3BsYXQgZGF0YSBhbmQgYXBwbHkgdHJhbnNmb3JtcyBpZiBhcHByb3ByaWF0ZS4gRWFjaCBhcnJheSBpcyBvcHRpb25hbC5cclxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSBjb3ZhcmlhbmNlcyBUYXJnZXQgc3RvcmFnZSBmb3Igc3BsYXQgY292YXJpYW5jZXNcclxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSBzY2FsZXMgVGFyZ2V0IHN0b3JhZ2UgZm9yIHNwbGF0IHNjYWxlc1xyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHJvdGF0aW9ucyBUYXJnZXQgc3RvcmFnZSBmb3Igc3BsYXQgcm90YXRpb25zXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gY2VudGVycyBUYXJnZXQgc3RvcmFnZSBmb3Igc3BsYXQgY2VudGVyc1xyXG4gICAgICogQHBhcmFtIHtVaW50OEFycmF5fSBjb2xvcnMgVGFyZ2V0IHN0b3JhZ2UgZm9yIHNwbGF0IGNvbG9yc1xyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHNwaGVyaWNhbEhhcm1vbmljcyBUYXJnZXQgc3RvcmFnZSBmb3Igc3BoZXJpY2FsIGhhcm1vbmljc1xyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhcHBseVNjZW5lVHJhbnNmb3JtIEJ5IGRlZmF1bHQsIHNjZW5lIHRyYW5zZm9ybXMgYXJlIGFwcGxpZWQgdG8gcmVsZXZhbnQgc3BsYXQgZGF0YSBvbmx5IGlmIHRoZSBzcGxhdCBtZXNoIGlzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGljLiBJZiAnYXBwbHlTY2VuZVRyYW5zZm9ybScgaXMgdHJ1ZSwgc2NlbmUgdHJhbnNmb3JtcyB3aWxsIGFsd2F5cyBiZSBhcHBsaWVkIGFuZCBpZlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0IGlzIGZhbHNlLCB0aGV5IHdpbGwgbmV2ZXIgYmUgYXBwbGllZC4gSWYgdW5kZWZpbmVkLCB0aGUgZGVmYXVsdCBiZWhhdmlvciB3aWxsIGFwcGx5LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsIFRoZSBjb21wcmVzc2lvbiBsZXZlbCBmb3IgY292YXJpYW5jZXMgaW4gdGhlIGRlc3RpbmF0aW9uIGFycmF5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3BoZXJpY2FsSGFybW9uaWNzQ29tcHJlc3Npb25MZXZlbCBUaGUgY29tcHJlc3Npb24gbGV2ZWwgZm9yIHNwaGVyaWNhbCBoYXJtb25pY3MgaW4gdGhlIGRlc3RpbmF0aW9uIGFycmF5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3JjU3RhcnQgVGhlIHN0YXJ0IGxvY2F0aW9uIGZyb20gd2hpY2ggdG8gcHVsbCBzb3VyY2UgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNyY0VuZCBUaGUgZW5kIGxvY2F0aW9uIGZyb20gd2hpY2ggdG8gcHVsbCBzb3VyY2UgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlc3RTdGFydCBUaGUgc3RhcnQgbG9jYXRpb24gZnJvbSB3aGljaCB0byB3cml0ZSBkYXRhXHJcbiAgICAgKi9cclxuICAgIGZpbGxTcGxhdERhdGFBcnJheXMoY292YXJpYW5jZXMsIHNjYWxlcywgcm90YXRpb25zLCBjZW50ZXJzLCBjb2xvcnMsIHNwaGVyaWNhbEhhcm1vbmljcywgZmxhbWVNb2RlbFBvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5U2NlbmVUcmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID0gMCwgc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPSAwLCBzcGhlcmljYWxIYXJtb25pY3NDb21wcmVzc2lvbkxldmVsID0gMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjU3RhcnQsIHNyY0VuZCwgZGVzdFN0YXJ0ID0gMCwgc2NlbmVJbmRleCkge1xyXG4gICAgICAgIGNvbnN0IHNjYWxlT3ZlcnJpZGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHNjYWxlT3ZlcnJpZGUueCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBzY2FsZU92ZXJyaWRlLnkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEKSB7XHJcbiAgICAgICAgICAgIHNjYWxlT3ZlcnJpZGUueiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzY2FsZU92ZXJyaWRlLnogPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0ZW1wVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcclxuXHJcbiAgICAgICAgbGV0IHN0YXJ0U2NlbmVJbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IGVuZFNjZW5lSW5kZXggPSB0aGlzLnNjZW5lcy5sZW5ndGggLSAxO1xyXG4gICAgICAgIGlmIChzY2VuZUluZGV4ICE9PSB1bmRlZmluZWQgJiYgc2NlbmVJbmRleCAhPT0gbnVsbCAmJiBzY2VuZUluZGV4ID49IDAgJiYgc2NlbmVJbmRleCA8PSB0aGlzLnNjZW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc3RhcnRTY2VuZUluZGV4ID0gc2NlbmVJbmRleDtcclxuICAgICAgICAgICAgZW5kU2NlbmVJbmRleCA9IHNjZW5lSW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydFNjZW5lSW5kZXg7IGkgPD0gZW5kU2NlbmVJbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChhcHBseVNjZW5lVHJhbnNmb3JtID09PSB1bmRlZmluZWQgfHwgYXBwbHlTY2VuZVRyYW5zZm9ybSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYXBwbHlTY2VuZVRyYW5zZm9ybSA9IHRoaXMuZHluYW1pY01vZGUgPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5nZXRTY2VuZShpKTtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBzY2VuZS5zcGxhdEJ1ZmZlcjtcclxuICAgICAgICAgICAgbGV0IHNjZW5lVHJhbnNmb3JtO1xyXG4gICAgICAgICAgICBpZiAoYXBwbHlTY2VuZVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTY2VuZVRyYW5zZm9ybShpLCB0ZW1wVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIHNjZW5lVHJhbnNmb3JtID0gdGVtcFRyYW5zZm9ybTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY292YXJpYW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIHNwbGF0QnVmZmVyLmZpbGxTcGxhdENvdmFyaWFuY2VBcnJheShjb3ZhcmlhbmNlcywgc2NlbmVUcmFuc2Zvcm0sIHNyY1N0YXJ0LCBzcmNFbmQsIGRlc3RTdGFydCwgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzY2FsZXMgfHwgcm90YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNjYWxlcyB8fCAhcm90YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTcGxhdE1lc2g6OmZpbGxTcGxhdERhdGFBcnJheXMoKSAtPiBcInNjYWxlc1wiIGFuZCBcInJvdGF0aW9uc1wiIG11c3QgYm90aCBiZSB2YWxpZC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNwbGF0QnVmZmVyLmZpbGxTcGxhdFNjYWxlUm90YXRpb25BcnJheShzY2FsZXMsIHJvdGF0aW9ucywgc2NlbmVUcmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjU3RhcnQsIHNyY0VuZCwgZGVzdFN0YXJ0LCBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCwgc2NhbGVPdmVycmlkZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNlbnRlcnMpIHNwbGF0QnVmZmVyLmZpbGxTcGxhdENlbnRlckFycmF5KHRoaXMubW9ycGhlZE1lc2gsIGNlbnRlcnMsIHNjZW5lVHJhbnNmb3JtLCBzcmNTdGFydCwgc3JjRW5kLCBkZXN0U3RhcnQpO1xyXG4gICAgICAgICAgICBpZiAoY29sb3JzKSBzcGxhdEJ1ZmZlci5maWxsU3BsYXRDb2xvckFycmF5KGNvbG9ycywgc2NlbmUubWluaW11bUFscGhhLCBzcmNTdGFydCwgc3JjRW5kLCBkZXN0U3RhcnQpO1xyXG4gICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzKSB7XHJcbiAgICAgICAgICAgICAgICBzcGxhdEJ1ZmZlci5maWxsU3BoZXJpY2FsSGFybW9uaWNzQXJyYXkoc3BoZXJpY2FsSGFybW9uaWNzLCB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVRyYW5zZm9ybSwgc3JjU3RhcnQsIHNyY0VuZCwgZGVzdFN0YXJ0LCBzcGhlcmljYWxIYXJtb25pY3NDb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVzdFN0YXJ0ICs9IHNwbGF0QnVmZmVyLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9ycGhlZE1lc2g7XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgc3BsYXQgY2VudGVycywgd2hpY2ggYXJlIGZsb2F0aW5nIHBvaW50IHZhbHVlcywgdG8gYW4gYXJyYXkgb2YgaW50ZWdlcnMgYW5kIG11bHRpcGx5XHJcbiAgICAgKiBlYWNoIGJ5IDEwMDAuIENlbnRlcnMgd2lsbCBnZXQgdHJhbnNmb3JtZWQgYXMgYXBwcm9wcmlhdGUgYmVmb3JlIGNvbnZlcnNpb24gdG8gaW50ZWdlci5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgaW5kZXggYXQgd2hpY2ggdG8gc3RhcnQgcmV0cmlldmluZyBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBpbmRleCBhdCB3aGljaCB0byBzdG9wIHJldHJpZXZpbmcgZGF0YVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBwYWRGb3VyIEVuZm9yY2UgYWxpZ25tZW50IG9mIDQgYnkgaW5zZXJ0aW5nIGEgMSBhZnRlciBldmVyeSAzIHZhbHVlc1xyXG4gICAgICogQHJldHVybiB7SW50MzJBcnJheX1cclxuICAgICAqL1xyXG4gICAgZ2V0SW50ZWdlckNlbnRlcnMoc3RhcnQsIGVuZCwgcGFkRm91ciA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IGVuZCAtIHN0YXJ0ICsgMTtcclxuICAgICAgICBjb25zdCBmbG9hdENlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiAzKTtcclxuICAgICAgICB0aGlzLmZpbGxTcGxhdERhdGFBcnJheXMobnVsbCwgbnVsbCwgbnVsbCwgZmxvYXRDZW50ZXJzLCBudWxsLCBudWxsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHN0YXJ0KTtcclxuICAgICAgICBsZXQgaW50Q2VudGVycztcclxuICAgICAgICBsZXQgY29tcG9uZW50Q291bnQgPSBwYWRGb3VyID8gNCA6IDM7XHJcbiAgICAgICAgaW50Q2VudGVycyA9IG5ldyBJbnQzMkFycmF5KHNwbGF0Q291bnQgKiBjb21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCAzOyB0KyspIHtcclxuICAgICAgICAgICAgICAgIGludENlbnRlcnNbaSAqIGNvbXBvbmVudENvdW50ICsgdF0gPSBNYXRoLnJvdW5kKGZsb2F0Q2VudGVyc1tpICogMyArIHRdICogMTAwMC4wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFkRm91cikgaW50Q2VudGVyc1tpICogY29tcG9uZW50Q291bnQgKyAzXSA9IDEwMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnRDZW50ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiBzcGxhdCBjZW50ZXJzLCB0cmFuc2Zvcm1lZCBhcyBhcHByb3ByaWF0ZSwgb3B0aW9uYWxseSBwYWRkZWQuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgVGhlIGluZGV4IGF0IHdoaWNoIHRvIHN0YXJ0IHJldHJpZXZpbmcgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgaW5kZXggYXQgd2hpY2ggdG8gc3RvcCByZXRyaWV2aW5nIGRhdGFcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcGFkRm91ciBFbmZvcmNlIGFsaWdubWVudCBvZiA0IGJ5IGluc2VydGluZyBhIDEgYWZ0ZXIgZXZlcnkgMyB2YWx1ZXNcclxuICAgICAqIEByZXR1cm4ge0Zsb2F0MzJBcnJheX1cclxuICAgICAqL1xyXG4gICAgZ2V0RmxvYXRDZW50ZXJzKHN0YXJ0LCBlbmQsIHBhZEZvdXIgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSBlbmQgLSBzdGFydCArIDE7XHJcbiAgICAgICAgY29uc3QgZmxvYXRDZW50ZXJzID0gbmV3IEZsb2F0MzJBcnJheShzcGxhdENvdW50ICogMyk7XHJcbiAgICAgICAgdGhpcy5maWxsU3BsYXREYXRhQXJyYXlzKG51bGwsIG51bGwsIG51bGwsIGZsb2F0Q2VudGVycywgbnVsbCwgbnVsbCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzdGFydCk7XHJcbiAgICAgICAgaWYgKCFwYWRGb3VyKSByZXR1cm4gZmxvYXRDZW50ZXJzO1xyXG4gICAgICAgIGxldCBwYWRkZWRGbG9hdENlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiA0KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDM7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgcGFkZGVkRmxvYXRDZW50ZXJzW2kgKiA0ICsgdF0gPSBmbG9hdENlbnRlcnNbaSAqIDMgKyB0XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYWRkZWRGbG9hdENlbnRlcnNbaSAqIDQgKyAzXSA9IDEuMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhZGRlZEZsb2F0Q2VudGVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY2VudGVyIGZvciBhIHNwbGF0LCB0cmFuc2Zvcm1lZCBhcyBhcHByb3ByaWF0ZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBnbG9iYWxJbmRleCBHbG9iYWwgaW5kZXggb2Ygc3BsYXRcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuVmVjdG9yM30gb3V0Q2VudGVyIFRIUkVFLlZlY3RvcjMgaW5zdGFuY2UgaW4gd2hpY2ggdG8gc3RvcmUgc3BsYXQgY2VudGVyXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFwcGx5U2NlbmVUcmFuc2Zvcm0gQnkgZGVmYXVsdCwgaWYgdGhlIHNwbGF0IG1lc2ggaXMgc3RhdGljLCB0aGUgdHJhbnNmb3JtIG9mIHRoZSBzY2VuZSB0byB3aGljaCB0aGUgc3BsYXQgYXRcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2xvYmFsSW5kZXgnIGJlbG9uZ3Mgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBzcGxhdCBjZW50ZXIuIElmICdhcHBseVNjZW5lVHJhbnNmb3JtJyBpcyB0cnVlLFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBzY2VuZSB0cmFuc2Zvcm0gd2lsbCBhbHdheXMgYmUgYXBwbGllZCBhbmQgaWYgJ2FwcGx5U2NlbmVUcmFuc2Zvcm0nIGlzIGZhbHNlLCB0aGVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZSB0cmFuc2Zvcm0gd2lsbCBuZXZlciBiZSBhcHBsaWVkLiBJZiB1bmRlZmluZWQsIHRoZSBkZWZhdWx0IGJlaGF2aW9yIHdpbGwgYXBwbHkuXHJcbiAgICAgKi9cclxuICAgIGdldFNwbGF0Q2VudGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmFtc09iaiA9IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24obW9ycGhlZE1lc2gsIGdsb2JhbEluZGV4LCBvdXRDZW50ZXIsIGFwcGx5U2NlbmVUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRMb2NhbFNwbGF0UGFyYW1ldGVycyhnbG9iYWxJbmRleCwgcGFyYW1zT2JqLCBhcHBseVNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgcGFyYW1zT2JqLnNwbGF0QnVmZmVyLmdldFNwbGF0Q2VudGVyKG1vcnBoZWRNZXNoLCBwYXJhbXNPYmoubG9jYWxJbmRleCwgb3V0Q2VudGVyLCBwYXJhbXNPYmouc2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBzY2FsZSBhbmQgcm90YXRpb24gZm9yIGEgc3BsYXQsIHRyYW5zZm9ybWVkIGFzIGFwcHJvcHJpYXRlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGdsb2JhbEluZGV4IEdsb2JhbCBpbmRleCBvZiBzcGxhdFxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5WZWN0b3IzfSBvdXRTY2FsZSBUSFJFRS5WZWN0b3IzIGluc3RhbmNlIGluIHdoaWNoIHRvIHN0b3JlIHNwbGF0IHNjYWxlXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLlF1YXRlcm5pb259IG91dFJvdGF0aW9uIFRIUkVFLlF1YXRlcm5pb24gaW5zdGFuY2UgaW4gd2hpY2ggdG8gc3RvcmUgc3BsYXQgcm90YXRpb25cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXBwbHlTY2VuZVRyYW5zZm9ybSBCeSBkZWZhdWx0LCBpZiB0aGUgc3BsYXQgbWVzaCBpcyBzdGF0aWMsIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIHNjZW5lIHRvIHdoaWNoIHRoZSBzcGxhdCBhdFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdnbG9iYWxJbmRleCcgYmVsb25ncyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIHNwbGF0IHNjYWxlIGFuZCByb3RhdGlvbi4gSWZcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXBwbHlTY2VuZVRyYW5zZm9ybScgaXMgdHJ1ZSwgdGhlIHNjZW5lIHRyYW5zZm9ybSB3aWxsIGFsd2F5cyBiZSBhcHBsaWVkIGFuZCBpZlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcHBseVNjZW5lVHJhbnNmb3JtJyBpcyBmYWxzZSwgdGhlIHNjZW5lIHRyYW5zZm9ybSB3aWxsIG5ldmVyIGJlIGFwcGxpZWQuIElmIHVuZGVmaW5lZCxcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZGVmYXVsdCBiZWhhdmlvciB3aWxsIGFwcGx5LlxyXG4gICAgICovXHJcbiAgICBnZXRTcGxhdFNjYWxlQW5kUm90YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGFyYW1zT2JqID0ge307XHJcbiAgICAgICAgY29uc3Qgc2NhbGVPdmVycmlkZSA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihnbG9iYWxJbmRleCwgb3V0U2NhbGUsIG91dFJvdGF0aW9uLCBhcHBseVNjZW5lVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxTcGxhdFBhcmFtZXRlcnMoZ2xvYmFsSW5kZXgsIHBhcmFtc09iaiwgYXBwbHlTY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIHNjYWxlT3ZlcnJpZGUueCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgc2NhbGVPdmVycmlkZS55ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBzY2FsZU92ZXJyaWRlLnogPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlR3b0QpIHNjYWxlT3ZlcnJpZGUueiA9IDA7XHJcbiAgICAgICAgICAgIHBhcmFtc09iai5zcGxhdEJ1ZmZlci5nZXRTcGxhdFNjYWxlQW5kUm90YXRpb24ocGFyYW1zT2JqLmxvY2FsSW5kZXgsIG91dFNjYWxlLCBvdXRSb3RhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNPYmouc2NlbmVUcmFuc2Zvcm0sIHNjYWxlT3ZlcnJpZGUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBjb2xvciBmb3IgYSBzcGxhdC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBnbG9iYWxJbmRleCBHbG9iYWwgaW5kZXggb2Ygc3BsYXRcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuVmVjdG9yNH0gb3V0Q29sb3IgVEhSRUUuVmVjdG9yNCBpbnN0YW5jZSBpbiB3aGljaCB0byBzdG9yZSBzcGxhdCBjb2xvclxyXG4gICAgICovXHJcbiAgICBnZXRTcGxhdENvbG9yID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmFtc09iaiA9IHt9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZ2xvYmFsSW5kZXgsIG91dENvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxTcGxhdFBhcmFtZXRlcnMoZ2xvYmFsSW5kZXgsIHBhcmFtc09iaik7XHJcbiAgICAgICAgICAgIHBhcmFtc09iai5zcGxhdEJ1ZmZlci5nZXRTcGxhdENvbG9yKHBhcmFtc09iai5sb2NhbEluZGV4LCBvdXRDb2xvcik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9yZSB0aGUgdHJhbnNmb3JtIG9mIHRoZSBzY2VuZSBhdCAnc2NlbmVJbmRleCcgaW4gJ291dFRyYW5zZm9ybScuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NlbmVJbmRleCBJbmRleCBvZiB0aGUgZGVzaXJlZCBzY2VuZVxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5NYXRyaXg0fSBvdXRUcmFuc2Zvcm0gSW5zdGFuY2Ugb2YgVEhSRUUuTWF0cml4NCBpbiB3aGljaCB0byBzdG9yZSB0aGUgc2NlbmUncyB0cmFuc2Zvcm1cclxuICAgICAqL1xyXG4gICAgZ2V0U2NlbmVUcmFuc2Zvcm0oc2NlbmVJbmRleCwgb3V0VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmdldFNjZW5lKHNjZW5lSW5kZXgpO1xyXG4gICAgICAgIHNjZW5lLnVwZGF0ZVRyYW5zZm9ybSh0aGlzLmR5bmFtaWNNb2RlKTtcclxuICAgICAgICBvdXRUcmFuc2Zvcm0uY29weShzY2VuZS50cmFuc2Zvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBzY2VuZSBhdCAnc2NlbmVJbmRleCcuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NlbmVJbmRleCBJbmRleCBvZiB0aGUgZGVzaXJlZCBzY2VuZVxyXG4gICAgICogQHJldHVybiB7U3BsYXRTY2VuZX1cclxuICAgICAqL1xyXG4gICAgZ2V0U2NlbmUoc2NlbmVJbmRleCkge1xyXG4gICAgICAgIGlmIChzY2VuZUluZGV4IDwgMCB8fCBzY2VuZUluZGV4ID49IHRoaXMuc2NlbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NwbGF0TWVzaDo6Z2V0U2NlbmUoKSAtPiBJbnZhbGlkIHNjZW5lIGluZGV4LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZXNbc2NlbmVJbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2NlbmVDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zY2VuZXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0QnVmZmVyRm9yU3BsYXQoZ2xvYmFsSW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTY2VuZSh0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXBbZ2xvYmFsSW5kZXhdKS5zcGxhdEJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTY2VuZUluZGV4Rm9yU3BsYXQoZ2xvYmFsSW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwW2dsb2JhbEluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTY2VuZVRyYW5zZm9ybUZvclNwbGF0KGdsb2JhbEluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2NlbmUodGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TY2VuZUluZGV4TWFwW2dsb2JhbEluZGV4XSkudHJhbnNmb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0TG9jYWxJbmRleChnbG9iYWxJbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb0xvY2FsU3BsYXRJbmRleE1hcFtnbG9iYWxJbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEludGVnZXJNYXRyaXhBcnJheShtYXRyaXgpIHtcclxuICAgICAgICBjb25zdCBtYXRyaXhFbGVtZW50cyA9IG1hdHJpeC5lbGVtZW50cztcclxuICAgICAgICBjb25zdCBpbnRNYXRyaXhBcnJheSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICBpbnRNYXRyaXhBcnJheVtpXSA9IE1hdGgucm91bmQobWF0cml4RWxlbWVudHNbaV0gKiAxMDAwLjApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW50TWF0cml4QXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcHV0ZUJvdW5kaW5nQm94KGFwcGx5U2NlbmVUcmFuc2Zvcm1zID0gZmFsc2UsIHNjZW5lSW5kZXgpIHtcclxuICAgICAgICBsZXQgc3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIGlmIChzY2VuZUluZGV4ICE9PSB1bmRlZmluZWQgJiYgc2NlbmVJbmRleCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoc2NlbmVJbmRleCA8IDAgfHwgc2NlbmVJbmRleCA+PSB0aGlzLnNjZW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3BsYXRNZXNoOjpjb21wdXRlQm91bmRpbmdCb3goKSAtPiBJbnZhbGlkIHNjZW5lIGluZGV4LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNwbGF0Q291bnQgPSB0aGlzLnNjZW5lc1tzY2VuZUluZGV4XS5zcGxhdEJ1ZmZlci5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBmbG9hdENlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiAzKTtcclxuICAgICAgICB0aGlzLmZpbGxTcGxhdERhdGFBcnJheXMobnVsbCwgbnVsbCwgbnVsbCwgZmxvYXRDZW50ZXJzLCBudWxsLCBudWxsLCBhcHBseVNjZW5lVHJhbnNmb3JtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzY2VuZUluZGV4KTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCBtYXggPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGkgKiAzO1xyXG4gICAgICAgICAgICBjb25zdCB4ID0gZmxvYXRDZW50ZXJzW29mZnNldF07XHJcbiAgICAgICAgICAgIGNvbnN0IHkgPSBmbG9hdENlbnRlcnNbb2Zmc2V0ICsgMV07XHJcbiAgICAgICAgICAgIGNvbnN0IHogPSBmbG9hdENlbnRlcnNbb2Zmc2V0ICsgMl07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHggPCBtaW4ueCkgbWluLnggPSB4O1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB5IDwgbWluLnkpIG1pbi55ID0geTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgeiA8IG1pbi56KSBtaW4ueiA9IHo7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHggPiBtYXgueCkgbWF4LnggPSB4O1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB5ID4gbWF4LnkpIG1heC55ID0geTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgeiA+IG1heC56KSBtYXgueiA9IHo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEJveDMobWluLCBtYXgpO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIERpcmVjdExvYWRFcnJvclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBNaW5vciBlbmhhbmNlbWVudDogQWRkZWQgdGhpcy5uYW1lIHByb3BlcnR5IGZvciBiZXR0ZXIgZXJyb3IgaWRlbnRpZmljYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGlyZWN0TG9hZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IobXNnKSB7XHJcbiAgICAgICAgc3VwZXIobXNnKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnRGlyZWN0TG9hZEVycm9yJztcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogVW5jb21wcmVzc2VkU3BsYXRBcnJheVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqIEltcG9ydCBwYXRocyBhZGp1c3RlZCBmb3IgZ3NwbGF0LWZsYW1lLWF2YXRhciBwYWNrYWdlIHN0cnVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5cclxuY29uc3QgQkFTRV9DT01QT05FTlRfQ09VTlQgPSAxNDtcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmNvbXByZXNzZWRTcGxhdEFycmF5IHtcclxuXHJcbiAgICBzdGF0aWMgT0ZGU0VUID0ge1xyXG4gICAgICAgIFg6IDAsXHJcbiAgICAgICAgWTogMSxcclxuICAgICAgICBaOiAyLFxyXG4gICAgICAgIFNDQUxFMDogMyxcclxuICAgICAgICBTQ0FMRTE6IDQsXHJcbiAgICAgICAgU0NBTEUyOiA1LFxyXG4gICAgICAgIFJPVEFUSU9OMDogNixcclxuICAgICAgICBST1RBVElPTjE6IDcsXHJcbiAgICAgICAgUk9UQVRJT04yOiA4LFxyXG4gICAgICAgIFJPVEFUSU9OMzogOSxcclxuICAgICAgICBGREMwOiAxMCxcclxuICAgICAgICBGREMxOiAxMSxcclxuICAgICAgICBGREMyOiAxMixcclxuICAgICAgICBPUEFDSVRZOiAxMyxcclxuICAgICAgICBGUkMwOiAxNCxcclxuICAgICAgICBGUkMxOiAxNSxcclxuICAgICAgICBGUkMyOiAxNixcclxuICAgICAgICBGUkMzOiAxNyxcclxuICAgICAgICBGUkM0OiAxOCxcclxuICAgICAgICBGUkM1OiAxOSxcclxuICAgICAgICBGUkM2OiAyMCxcclxuICAgICAgICBGUkM3OiAyMSxcclxuICAgICAgICBGUkM4OiAyMixcclxuICAgICAgICBGUkM5OiAyMyxcclxuICAgICAgICBGUkMxMDogMjQsXHJcbiAgICAgICAgRlJDMTE6IDI1LFxyXG4gICAgICAgIEZSQzEyOiAyNixcclxuICAgICAgICBGUkMxMzogMjcsXHJcbiAgICAgICAgRlJDMTQ6IDI4LFxyXG4gICAgICAgIEZSQzE1OiAyOSxcclxuICAgICAgICBGUkMxNjogMzAsXHJcbiAgICAgICAgRlJDMTc6IDMxLFxyXG4gICAgICAgIEZSQzE4OiAzMixcclxuICAgICAgICBGUkMxOTogMzMsXHJcbiAgICAgICAgRlJDMjA6IDM0LFxyXG4gICAgICAgIEZSQzIxOiAzNSxcclxuICAgICAgICBGUkMyMjogMzYsXHJcbiAgICAgICAgRlJDMjM6IDM3XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0NvdW50ID0gZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUodGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50Q291bnQgPSB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0NvdW50ICsgQkFTRV9DT01QT05FTlRfQ09VTlQ7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzID0gbmV3IEFycmF5KHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzQ291bnQpLmZpbGwoMCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdHMgPSBbXTtcclxuICAgICAgICB0aGlzLnNwbGF0Q291bnQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVTcGxhdChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgY29uc3QgYmFzZVNwbGF0ID0gWzAsIDAsIDAsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDAsIDAsIDAsIDBdO1xyXG4gICAgICAgIGxldCBzaEVudHJpZXMgPSBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZShzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hFbnRyaWVzOyBpKyspIGJhc2VTcGxhdC5wdXNoKDApO1xyXG4gICAgICAgIHJldHVybiBiYXNlU3BsYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU3BsYXQoc3BsYXQpIHtcclxuICAgICAgICB0aGlzLnNwbGF0cy5wdXNoKHNwbGF0KTtcclxuICAgICAgICB0aGlzLnNwbGF0Q291bnQrKztcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGF0c1tpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgYWRkRGVmYXVsdFNwbGF0KCkge1xyXG4gICAgICAgIGNvbnN0IG5ld1NwbGF0ID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5jcmVhdGVTcGxhdCh0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgdGhpcy5hZGRTcGxhdChuZXdTcGxhdCk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1NwbGF0O1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNwbGF0RnJvbUNvbW9uZW50cyh4LCB5LCB6LCBzY2FsZTAsIHNjYWxlMSwgc2NhbGUyLCByb3QwLCByb3QxLCByb3QyLCByb3QzLCByLCBnLCBiLCBvcGFjaXR5LCAuLi5yZXN0KSB7XHJcbiAgICAgICAgY29uc3QgbmV3U3BsYXQgPSBbeCwgeSwgeiwgc2NhbGUwLCBzY2FsZTEsIHNjYWxlMiwgcm90MCwgcm90MSwgcm90Miwgcm90MywgciwgZywgYiwgb3BhY2l0eSwgLi4udGhpcy5kZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3QubGVuZ3RoICYmIGkgPCB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0NvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgbmV3U3BsYXRbaV0gPSByZXN0W2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZFNwbGF0KG5ld1NwbGF0KTtcclxuICAgICAgICByZXR1cm4gbmV3U3BsYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU3BsYXRGcm9tQXJyYXkoc3JjLCBzcmNJbmRleCkge1xyXG4gICAgICAgIGNvbnN0IHNyY1NwbGF0ID0gc3JjLnNwbGF0c1tzcmNJbmRleF07XHJcbiAgICAgICAgY29uc3QgbmV3U3BsYXQgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5LmNyZWF0ZVNwbGF0KHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29tcG9uZW50Q291bnQgJiYgaSA8IHNyY1NwbGF0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W2ldID0gc3JjU3BsYXRbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkU3BsYXQobmV3U3BsYXQpO1xyXG4gICAgfVxyXG59IiwiLyoqXHJcbiAqIFNwbGF0QnVmZmVyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICogSW1wb3J0IHBhdGhzIGFkanVzdGVkIGZvciBnc3BsYXQtZmxhbWUtYXZhdGFyIHBhY2thZ2Ugc3RydWN0dXJlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERhdGFVdGlscywgTWF0cml4MywgTWF0cml4NCwgUXVhdGVybmlvbiwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgVW5jb21wcmVzc2VkU3BsYXRBcnJheSB9IGZyb20gJy4vVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyc7XHJcbmltcG9ydCB7IGNsYW1wLCBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSwgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZSwgY29udmVydEJldHdlZW5Db21wcmVzc2lvbkxldmVscyB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi9lbnVtcy9FbmdpbmVDb25zdGFudHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb3B5IGJ5dGVzIGJldHdlZW4gYnVmZmVyc1xyXG4gKi9cclxuY29uc3QgY29weUJldHdlZW5CdWZmZXJzID0gKHNyY0J1ZmZlciwgc3JjT2Zmc2V0LCBkZXN0QnVmZmVyLCBkZXN0T2Zmc2V0LCBieXRlQ291bnQgPSAwKSA9PiB7XHJcbiAgICBjb25zdCBzcmMgPSBuZXcgVWludDhBcnJheShzcmNCdWZmZXIsIHNyY09mZnNldCk7XHJcbiAgICBjb25zdCBkZXN0ID0gbmV3IFVpbnQ4QXJyYXkoZGVzdEJ1ZmZlciwgZGVzdE9mZnNldCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgZGVzdFtpXSA9IHNyY1tpXTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIENvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gaGVscGVyIGZ1bmN0aW9uc1xyXG5jb25zdCBEZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2UgPSBDb25zdGFudHMuU3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2U7XHJcblxyXG5jb25zdCB0b0hhbGZGbG9hdCA9IERhdGFVdGlscy50b0hhbGZGbG9hdC5iaW5kKERhdGFVdGlscyk7XHJcbmNvbnN0IGZyb21IYWxmRmxvYXQgPSBEYXRhVXRpbHMuZnJvbUhhbGZGbG9hdC5iaW5kKERhdGFVdGlscyk7XHJcblxyXG5jb25zdCB0b1VuY29tcHJlc3NlZEZsb2F0ID0gKGYsIGNvbXByZXNzaW9uTGV2ZWwsIGlzU0ggPSBmYWxzZSwgcmFuZ2U4Qml0TWluLCByYW5nZThCaXRNYXgpID0+IHtcclxuICAgIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGY7XHJcbiAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDEgfHwgY29tcHJlc3Npb25MZXZlbCA9PT0gMiAmJiAhaXNTSCkge1xyXG4gICAgICAgIHJldHVybiBEYXRhVXRpbHMuZnJvbUhhbGZGbG9hdChmKTtcclxuICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiBmcm9tVWludDgoZiwgcmFuZ2U4Qml0TWluLCByYW5nZThCaXRNYXgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgdG9VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHYgPSBjbGFtcCh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpO1xyXG4gICAgY29uc3QgcmFuZ2UgPSAocmFuZ2VNYXggLSByYW5nZU1pbik7XHJcbiAgICByZXR1cm4gY2xhbXAoTWF0aC5mbG9vcigodiAtIHJhbmdlTWluKSAvIHJhbmdlICogMjU1KSwgMCwgMjU1KTtcclxufTtcclxuXHJcbmNvbnN0IGZyb21VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuICh2IC8gMjU1ICogcmFuZ2UgKyByYW5nZU1pbik7XHJcbn07XHJcblxyXG5jb25zdCBmcm9tSGFsZkZsb2F0VG9VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b1VpbnQ4KGZyb21IYWxmRmxvYXQodiksIHJhbmdlTWluLCByYW5nZU1heCk7XHJcbn07XHJcblxyXG5jb25zdCBmcm9tVWludDhUb0hhbGZGbG9hdCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b0hhbGZGbG9hdChmcm9tVWludDgodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSk7XHJcbn07XHJcblxyXG5jb25zdCBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbCA9IChkYXRhVmlldywgZmxvYXRJbmRleCwgY29tcHJlc3Npb25MZXZlbCwgaXNTSCA9IGZhbHNlKSA9PiB7XHJcbiAgICBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRGbG9hdDMyKGZsb2F0SW5kZXggKiA0LCB0cnVlKTtcclxuICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMSB8fCBjb21wcmVzc2lvbkxldmVsID09PSAyICYmICFpc1NIKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldFVpbnQxNihmbG9hdEluZGV4ICogMiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50OChmbG9hdEluZGV4LCB0cnVlKTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdEJ1ZmZlciB7XHJcblxyXG4gICAgc3RhdGljIEN1cnJlbnRNYWpvclZlcnNpb24gPSAwO1xyXG4gICAgc3RhdGljIEN1cnJlbnRNaW5vclZlcnNpb24gPSAxO1xyXG5cclxuICAgIHN0YXRpYyBDZW50ZXJDb21wb25lbnRDb3VudCA9IDM7XHJcbiAgICBzdGF0aWMgU2NhbGVDb21wb25lbnRDb3VudCA9IDM7XHJcbiAgICBzdGF0aWMgUm90YXRpb25Db21wb25lbnRDb3VudCA9IDQ7XHJcbiAgICBzdGF0aWMgQ29sb3JDb21wb25lbnRDb3VudCA9IDQ7XHJcbiAgICBzdGF0aWMgQ292YXJpYW5jZUNvbXBvbmVudENvdW50ID0gNjtcclxuXHJcbiAgICBzdGF0aWMgU3BsYXRTY2FsZU9mZnNldEZsb2F0ID0gMztcclxuICAgIHN0YXRpYyBTcGxhdFJvdGF0aW9uT2Zmc2V0RmxvYXQgPSA2O1xyXG5cclxuICAgIHN0YXRpYyBDb21wcmVzc2lvbkxldmVscyA9IHtcclxuICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgIEJ5dGVzUGVyQ2VudGVyOiAxMixcclxuICAgICAgICAgICAgQnl0ZXNQZXJTY2FsZTogMTIsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyUm90YXRpb246IDE2LFxyXG4gICAgICAgICAgICBCeXRlc1BlckNvbG9yOiA0LFxyXG4gICAgICAgICAgICBTY2FsZU9mZnNldEJ5dGVzOiAxMixcclxuICAgICAgICAgICAgUm90YXRpb25mZnNldEJ5dGVzOiAyNCxcclxuICAgICAgICAgICAgQ29sb3JPZmZzZXRCeXRlczogNDAsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc09mZnNldEJ5dGVzOiA0NCxcclxuICAgICAgICAgICAgU2NhbGVSYW5nZTogMSxcclxuICAgICAgICAgICAgQnl0ZXNQZXJTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnQ6IDQsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc09mZnNldEZsb2F0OiAxMSxcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlczoge1xyXG4gICAgICAgICAgICAgICAgMDogeyBCeXRlc1BlclNwbGF0OiA0NCB9LFxyXG4gICAgICAgICAgICAgICAgMTogeyBCeXRlc1BlclNwbGF0OiA4MCB9LFxyXG4gICAgICAgICAgICAgICAgMjogeyBCeXRlc1BlclNwbGF0OiAxNDAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgMToge1xyXG4gICAgICAgICAgICBCeXRlc1BlckNlbnRlcjogNixcclxuICAgICAgICAgICAgQnl0ZXNQZXJTY2FsZTogNixcclxuICAgICAgICAgICAgQnl0ZXNQZXJSb3RhdGlvbjogOCxcclxuICAgICAgICAgICAgQnl0ZXNQZXJDb2xvcjogNCxcclxuICAgICAgICAgICAgU2NhbGVPZmZzZXRCeXRlczogNixcclxuICAgICAgICAgICAgUm90YXRpb25mZnNldEJ5dGVzOiAxMixcclxuICAgICAgICAgICAgQ29sb3JPZmZzZXRCeXRlczogMjAsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc09mZnNldEJ5dGVzOiAyNCxcclxuICAgICAgICAgICAgU2NhbGVSYW5nZTogMzI3NjcsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyU3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50OiAyLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NPZmZzZXRGbG9hdDogMTIsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXM6IHtcclxuICAgICAgICAgICAgICAgIDA6IHsgQnl0ZXNQZXJTcGxhdDogMjQgfSxcclxuICAgICAgICAgICAgICAgIDE6IHsgQnl0ZXNQZXJTcGxhdDogNDIgfSxcclxuICAgICAgICAgICAgICAgIDI6IHsgQnl0ZXNQZXJTcGxhdDogNzIgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgMjoge1xyXG4gICAgICAgICAgICBCeXRlc1BlckNlbnRlcjogNixcclxuICAgICAgICAgICAgQnl0ZXNQZXJTY2FsZTogNixcclxuICAgICAgICAgICAgQnl0ZXNQZXJSb3RhdGlvbjogOCxcclxuICAgICAgICAgICAgQnl0ZXNQZXJDb2xvcjogNCxcclxuICAgICAgICAgICAgU2NhbGVPZmZzZXRCeXRlczogNixcclxuICAgICAgICAgICAgUm90YXRpb25mZnNldEJ5dGVzOiAxMixcclxuICAgICAgICAgICAgQ29sb3JPZmZzZXRCeXRlczogMjAsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc09mZnNldEJ5dGVzOiAyNCxcclxuICAgICAgICAgICAgU2NhbGVSYW5nZTogMzI3NjcsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyU3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50OiAxLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NPZmZzZXRGbG9hdDogMTIsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXM6IHtcclxuICAgICAgICAgICAgICAgIDA6IHsgQnl0ZXNQZXJTcGxhdDogMjQgfSxcclxuICAgICAgICAgICAgICAgIDE6IHsgQnl0ZXNQZXJTcGxhdDogMzMgfSxcclxuICAgICAgICAgICAgICAgIDI6IHsgQnl0ZXNQZXJTcGxhdDogNDggfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIENvdmFyaWFuY2VTaXplRmxvYXRzID0gNjtcclxuXHJcbiAgICBzdGF0aWMgSGVhZGVyU2l6ZUJ5dGVzID0gNDA5NjtcclxuICAgIHN0YXRpYyBTZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzID0gMTAyNDtcclxuXHJcbiAgICBzdGF0aWMgQnVja2V0U3RvcmFnZVNpemVCeXRlcyA9IDEyO1xyXG4gICAgc3RhdGljIEJ1Y2tldFN0b3JhZ2VTaXplRmxvYXRzID0gMztcclxuXHJcbiAgICBzdGF0aWMgQnVja2V0QmxvY2tTaXplID0gNS4wO1xyXG4gICAgc3RhdGljIEJ1Y2tldFNpemUgPSAyNTY7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYnVmZmVyRGF0YSwgc2VjTG9hZGVkQ291bnRzVG9NYXggPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RGcm9tQnVmZmVyKGJ1ZmZlckRhdGEsIHNlY0xvYWRlZENvdW50c1RvTWF4KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdENvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWF4U3BsYXRDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXhTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSgpIHtcclxuICAgICAgICBsZXQgbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbaV07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHNlY3Rpb24uc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIDwgbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBzZWN0aW9uLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEJ1Y2tldEluZGV4KHNlY3Rpb24sIGxvY2FsU3BsYXRJbmRleCkge1xyXG4gICAgICAgIGxldCBidWNrZXRJbmRleDtcclxuICAgICAgICBjb25zdCBtYXhTcGxhdEluZGV4SW5GdWxsQnVja2V0cyA9IHNlY3Rpb24uZnVsbEJ1Y2tldENvdW50ICogc2VjdGlvbi5idWNrZXRTaXplO1xyXG4gICAgICAgIGlmIChsb2NhbFNwbGF0SW5kZXggPCBtYXhTcGxhdEluZGV4SW5GdWxsQnVja2V0cykge1xyXG4gICAgICAgICAgICBidWNrZXRJbmRleCA9IE1hdGguZmxvb3IobG9jYWxTcGxhdEluZGV4IC8gc2VjdGlvbi5idWNrZXRTaXplKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgYnVja2V0U3BsYXRJbmRleCA9IG1heFNwbGF0SW5kZXhJbkZ1bGxCdWNrZXRzO1xyXG4gICAgICAgICAgICBidWNrZXRJbmRleCA9IHNlY3Rpb24uZnVsbEJ1Y2tldENvdW50O1xyXG4gICAgICAgICAgICBsZXQgcGFydGlhbGx5RnVsbEJ1Y2tldEluZGV4ID0gMDtcclxuICAgICAgICAgICAgd2hpbGUgKGJ1Y2tldFNwbGF0SW5kZXggPCBzZWN0aW9uLnNwbGF0Q291bnQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UGFydGlhbGx5RmlsbGVkQnVja2V0U2l6ZSA9IHNlY3Rpb24ucGFydGlhbGx5RmlsbGVkQnVja2V0TGVuZ3Roc1twYXJ0aWFsbHlGdWxsQnVja2V0SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsU3BsYXRJbmRleCA+PSBidWNrZXRTcGxhdEluZGV4ICYmIGxvY2FsU3BsYXRJbmRleCA8IGJ1Y2tldFNwbGF0SW5kZXggKyBjdXJyZW50UGFydGlhbGx5RmlsbGVkQnVja2V0U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnVja2V0U3BsYXRJbmRleCArPSBjdXJyZW50UGFydGlhbGx5RmlsbGVkQnVja2V0U2l6ZTtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldEluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGdWxsQnVja2V0SW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYnVja2V0SW5kZXg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRDZW50ZXIobW9ycGhlZE1lc2gsIGdsb2JhbFNwbGF0SW5kZXgsIG91dENlbnRlciwgdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2dsb2JhbFNwbGF0SW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gZ2xvYmFsU3BsYXRJbmRleCAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgY29uc3Qgc3JjU3BsYXRDZW50ZXJzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleDtcclxuICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdENlbnRlcnNCYXNlKTtcclxuXHJcbiAgICAgICAgY29uc3QgeCA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgIGNvbnN0IHkgPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICBjb25zdCB6ID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcHJlc3Npb25MZXZlbCA+PSAxKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEluZGV4ID0gdGhpcy5nZXRCdWNrZXRJbmRleChzZWN0aW9uLCBsb2NhbFNwbGF0SW5kZXgpO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRCYXNlID0gYnVja2V0SW5kZXggKiBTcGxhdEJ1ZmZlci5CdWNrZXRTdG9yYWdlU2l6ZUZsb2F0cztcclxuICAgICAgICAgICAgY29uc3Qgc2YgPSBzZWN0aW9uLmNvbXByZXNzaW9uU2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgIGNvbnN0IHNyID0gc2VjdGlvbi5jb21wcmVzc2lvblNjYWxlUmFuZ2U7XHJcbiAgICAgICAgICAgIG91dENlbnRlci54ID0gKHggLSBzcikgKiBzZiArIHNlY3Rpb24uYnVja2V0QXJyYXlbYnVja2V0QmFzZV07XHJcbiAgICAgICAgICAgIG91dENlbnRlci55ID0gKHkgLSBzcikgKiBzZiArIHNlY3Rpb24uYnVja2V0QXJyYXlbYnVja2V0QmFzZSArIDFdO1xyXG4gICAgICAgICAgICBvdXRDZW50ZXIueiA9ICh6IC0gc3IpICogc2YgKyBzZWN0aW9uLmJ1Y2tldEFycmF5W2J1Y2tldEJhc2UgKyAyXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRDZW50ZXIueCA9IHg7XHJcbiAgICAgICAgICAgIG91dENlbnRlci55ID0geTtcclxuICAgICAgICAgICAgb3V0Q2VudGVyLnogPSB6O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3V0Q2VudGVyLnggKz0gbW9ycGhlZE1lc2hbZ2xvYmFsU3BsYXRJbmRleCAqIDMgKyAwXTtcclxuICAgICAgICBvdXRDZW50ZXIueSArPSBtb3JwaGVkTWVzaFtnbG9iYWxTcGxhdEluZGV4ICogMyArIDFdO1xyXG4gICAgICAgIG91dENlbnRlci56ICs9IG1vcnBoZWRNZXNoW2dsb2JhbFNwbGF0SW5kZXggKiAzICsgMl07XHJcblxyXG5cclxuICAgICAgICBpZiAodHJhbnNmb3JtKSBvdXRDZW50ZXIuYXBwbHlNYXRyaXg0KHRyYW5zZm9ybSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRTY2FsZUFuZFJvdGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgdGVtcE1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW5kZXgsIG91dFNjYWxlLCBvdXRSb3RhdGlvbiwgdHJhbnNmb3JtLCBzY2FsZU92ZXJyaWRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtpbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGluZGV4IC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3JjU3BsYXRTY2FsZXNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbdGhpcy5jb21wcmVzc2lvbkxldmVsXS5TY2FsZU9mZnNldEJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRTY2FsZXNCYXNlKTtcclxuXHJcbiAgICAgICAgICAgIHNjYWxlLnNldCh0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCkpO1xyXG4gICAgICAgICAgICBpZiAoc2NhbGVPdmVycmlkZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlT3ZlcnJpZGUueCAhPT0gdW5kZWZpbmVkKSBzY2FsZS54ID0gc2NhbGVPdmVycmlkZS54O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlT3ZlcnJpZGUueSAhPT0gdW5kZWZpbmVkKSBzY2FsZS55ID0gc2NhbGVPdmVycmlkZS55O1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjYWxlT3ZlcnJpZGUueiAhPT0gdW5kZWZpbmVkKSBzY2FsZS56ID0gc2NhbGVPdmVycmlkZS56O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByb3RhdGlvbi5zZXQodG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDUsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA2LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMywgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBzY2FsZU1hdHJpeC5tYWtlU2NhbGUoc2NhbGUueCwgc2NhbGUueSwgc2NhbGUueik7XHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbk1hdHJpeC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihyb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LmNvcHkoc2NhbGVNYXRyaXgpLm11bHRpcGx5KHJvdGF0aW9uTWF0cml4KS5tdWx0aXBseSh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5kZWNvbXBvc2UodGVtcFBvc2l0aW9uLCBvdXRSb3RhdGlvbiwgb3V0U2NhbGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3V0U2NhbGUuY29weShzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICBvdXRSb3RhdGlvbi5jb3B5KHJvdGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIGdldFNwbGF0Q29sb3IoZ2xvYmFsU3BsYXRJbmRleCwgb3V0Q29sb3IpIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbZ2xvYmFsU3BsYXRJbmRleF07XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBnbG9iYWxTcGxhdEluZGV4IC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICBjb25zdCBzcmNTcGxhdENvbG9yc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW3RoaXMuY29tcHJlc3Npb25MZXZlbF0uQ29sb3JPZmZzZXRCeXRlcztcclxuICAgICAgICBjb25zdCBzcGxhdENvbG9yc0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRDb2xvcnNCYXNlLCA0KTtcclxuXHJcbiAgICAgICAgb3V0Q29sb3Iuc2V0KHNwbGF0Q29sb3JzQXJyYXlbMF0sIHNwbGF0Q29sb3JzQXJyYXlbMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgIHNwbGF0Q29sb3JzQXJyYXlbMl0sIHNwbGF0Q29sb3JzQXJyYXlbM10pO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbGxTcGxhdENlbnRlckFycmF5KG1vcnBoZWRNZXNoLCBvdXRDZW50ZXJBcnJheSwgdHJhbnNmb3JtLCBzcmNGcm9tLCBzcmNUbywgZGVzdEZyb20pIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdENvdW50O1xyXG5cclxuICAgICAgICBzcmNGcm9tID0gc3JjRnJvbSB8fCAwO1xyXG4gICAgICAgIHNyY1RvID0gc3JjVG8gfHwgc3BsYXRDb3VudCAtIDE7XHJcbiAgICAgICAgaWYgKGRlc3RGcm9tID09PSB1bmRlZmluZWQpIGRlc3RGcm9tID0gc3JjRnJvbTtcclxuXHJcbiAgICAgICAgY29uc3QgY2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3JjRnJvbTsgaSA8PSBzcmNUbzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtpXTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gaSAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyRGVzdEJhc2UgPSAoaSAtIHNyY0Zyb20gKyBkZXN0RnJvbSkgKiBTcGxhdEJ1ZmZlci5DZW50ZXJDb21wb25lbnRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNyY1NwbGF0Q2VudGVyc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0Q2VudGVyc0Jhc2UpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgeCA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHogPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcHJlc3Npb25MZXZlbCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXRJbmRleCA9IHRoaXMuZ2V0QnVja2V0SW5kZXgoc2VjdGlvbiwgbG9jYWxTcGxhdEluZGV4KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEJhc2UgPSBidWNrZXRJbmRleCAqIFNwbGF0QnVmZmVyLkJ1Y2tldFN0b3JhZ2VTaXplRmxvYXRzO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2YgPSBzZWN0aW9uLmNvbXByZXNzaW9uU2NhbGVGYWN0b3I7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzciA9IHNlY3Rpb24uY29tcHJlc3Npb25TY2FsZVJhbmdlO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnggPSAoeCAtIHNyKSAqIHNmICsgc2VjdGlvbi5idWNrZXRBcnJheVtidWNrZXRCYXNlXTtcclxuICAgICAgICAgICAgICAgIGNlbnRlci55ID0gKHkgLSBzcikgKiBzZiArIHNlY3Rpb24uYnVja2V0QXJyYXlbYnVja2V0QmFzZSArIDFdO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnogPSAoeiAtIHNyKSAqIHNmICsgc2VjdGlvbi5idWNrZXRBcnJheVtidWNrZXRCYXNlICsgMl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIueCA9IHg7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIueSA9IHk7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIueiA9IHo7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLmFwcGx5TWF0cml4NCh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZV0gPSBjZW50ZXIueCArIG1vcnBoZWRNZXNoW2kgKiAzICsgMF07XHJcbiAgICAgICAgICAgIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlICsgMV0gPSBjZW50ZXIueSArIG1vcnBoZWRNZXNoW2kgKiAzICsgMV07XHJcbiAgICAgICAgICAgIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlICsgMl0gPSBjZW50ZXIueiArIG1vcnBoZWRNZXNoW2kgKiAzICsgMl07XHJcblxyXG4gICAgICAgICAgICAvLyBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZV0gPSBtb3JwaGVkTWVzaFtjZW50ZXJEZXN0QmFzZV07XHJcbiAgICAgICAgICAgIC8vIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlICsgMV0gPSBtb3JwaGVkTWVzaFtjZW50ZXJEZXN0QmFzZSArIDFdO1xyXG4gICAgICAgICAgICAvLyBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZSArIDJdID0gbW9ycGhlZE1lc2hbY2VudGVyRGVzdEJhc2UgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIC8vIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlXSA9IGNlbnRlci54O1xyXG4gICAgICAgICAgICAvLyBvdXRDZW50ZXJBcnJheVtjZW50ZXJEZXN0QmFzZSArIDFdID0gY2VudGVyLnk7XHJcbiAgICAgICAgICAgIC8vIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlICsgMl0gPSBjZW50ZXIuejtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFNwbGF0U2NhbGVSb3RhdGlvbkFycmF5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgdGVtcE1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgICBjb25zdCB0ZW1wUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgICAgICBjb25zdCBlbnN1cmVQb3NpdGl2ZVcgPSAocXVhdGVybmlvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmbGlwID0gcXVhdGVybmlvbi53IDwgMCA/IC0xIDogMTtcclxuICAgICAgICAgICAgcXVhdGVybmlvbi54ICo9IGZsaXA7XHJcbiAgICAgICAgICAgIHF1YXRlcm5pb24ueSAqPSBmbGlwO1xyXG4gICAgICAgICAgICBxdWF0ZXJuaW9uLnogKj0gZmxpcDtcclxuICAgICAgICAgICAgcXVhdGVybmlvbi53ICo9IGZsaXA7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG91dFNjYWxlQXJyYXksIG91dFJvdGF0aW9uQXJyYXksIHRyYW5zZm9ybSwgc3JjRnJvbSwgc3JjVG8sIGRlc3RGcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCwgc2NhbGVPdmVycmlkZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgc3JjRnJvbSA9IHNyY0Zyb20gfHwgMDtcclxuICAgICAgICAgICAgc3JjVG8gPSBzcmNUbyB8fCBzcGxhdENvdW50IC0gMTtcclxuICAgICAgICAgICAgaWYgKGRlc3RGcm9tID09PSB1bmRlZmluZWQpIGRlc3RGcm9tID0gc3JjRnJvbTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dENvbnZlcnNpb24gPSAodmFsdWUsIHNyY0NvbXByZXNzaW9uTGV2ZWwpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzcmNDb21wcmVzc2lvbkxldmVsID09PSB1bmRlZmluZWQpIHNyY0NvbXByZXNzaW9uTGV2ZWwgPSB0aGlzLmNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udmVydEJldHdlZW5Db21wcmVzc2lvbkxldmVscyh2YWx1ZSwgc3JjQ29tcHJlc3Npb25MZXZlbCwgZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNyY0Zyb207IGkgPD0gc3JjVG87IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGkgLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjU3BsYXRTY2FsZXNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW3RoaXMuY29tcHJlc3Npb25MZXZlbF0uU2NhbGVPZmZzZXRCeXRlcztcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZURlc3RCYXNlID0gKGkgLSBzcmNGcm9tICsgZGVzdEZyb20pICogU3BsYXRCdWZmZXIuU2NhbGVDb21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uRGVzdEJhc2UgPSAoaSAtIHNyY0Zyb20gKyBkZXN0RnJvbSkgKiBTcGxhdEJ1ZmZlci5Sb3RhdGlvbkNvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRTY2FsZXNCYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNTY2FsZVggPSAoc2NhbGVPdmVycmlkZSAmJiBzY2FsZU92ZXJyaWRlLnggIT09IHVuZGVmaW5lZCkgPyBzY2FsZU92ZXJyaWRlLnggOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjU2NhbGVZID0gKHNjYWxlT3ZlcnJpZGUgJiYgc2NhbGVPdmVycmlkZS55ICE9PSB1bmRlZmluZWQpID8gc2NhbGVPdmVycmlkZS55IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1NjYWxlWiA9IChzY2FsZU92ZXJyaWRlICYmIHNjYWxlT3ZlcnJpZGUueiAhPT0gdW5kZWZpbmVkKSA/IHNjYWxlT3ZlcnJpZGUueiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjUm90YXRpb25XID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDMsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNSb3RhdGlvblggPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1JvdGF0aW9uWSA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA1LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjUm90YXRpb25aID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDYsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2NhbGUuc2V0KHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjU2NhbGVYLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjU2NhbGVZLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjU2NhbGVaLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbi5zZXQodG9VbmNvbXByZXNzZWRGbG9hdChzcmNSb3RhdGlvblgsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChzcmNSb3RhdGlvblksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChzcmNSb3RhdGlvblosIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChzcmNSb3RhdGlvblcsIHRoaXMuY29tcHJlc3Npb25MZXZlbCkpLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wUG9zaXRpb24uc2V0KDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlTWF0cml4Lm1ha2VTY2FsZShzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTtcclxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbk1hdHJpeC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihyb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5pZGVudGl0eSgpLnByZW11bHRpcGx5KHNjYWxlTWF0cml4KS5wcmVtdWx0aXBseShyb3RhdGlvbk1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5wcmVtdWx0aXBseSh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBNYXRyaXguZGVjb21wb3NlKHRlbXBQb3NpdGlvbiwgcm90YXRpb24sIHNjYWxlKTtcclxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbi5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbnN1cmVQb3NpdGl2ZVcocm90YXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvdXRTY2FsZUFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0U2NhbGVBcnJheVtzY2FsZURlc3RCYXNlXSA9IG91dHB1dENvbnZlcnNpb24oc2NhbGUueCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0U2NhbGVBcnJheVtzY2FsZURlc3RCYXNlICsgMV0gPSBvdXRwdXRDb252ZXJzaW9uKHNjYWxlLnksIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFNjYWxlQXJyYXlbc2NhbGVEZXN0QmFzZSArIDJdID0gb3V0cHV0Q29udmVyc2lvbihzY2FsZS56LCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3V0Um90YXRpb25BcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFJvdGF0aW9uQXJyYXlbcm90YXRpb25EZXN0QmFzZV0gPSBvdXRwdXRDb252ZXJzaW9uKHJvdGF0aW9uLngsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFJvdGF0aW9uQXJyYXlbcm90YXRpb25EZXN0QmFzZSArIDFdID0gb3V0cHV0Q29udmVyc2lvbihyb3RhdGlvbi55LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRSb3RhdGlvbkFycmF5W3JvdGF0aW9uRGVzdEJhc2UgKyAyXSA9IG91dHB1dENvbnZlcnNpb24ocm90YXRpb24ueiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Um90YXRpb25BcnJheVtyb3RhdGlvbkRlc3RCYXNlICsgM10gPSBvdXRwdXRDb252ZXJzaW9uKHJvdGF0aW9uLncsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0oKTtcclxuXHJcbiAgICBzdGF0aWMgY29tcHV0ZUNvdmFyaWFuY2UgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcE1hdHJpeDQgPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlTWF0cml4ID0gbmV3IE1hdHJpeDMoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgzKCk7XHJcbiAgICAgICAgY29uc3QgY292YXJpYW5jZU1hdHJpeCA9IG5ldyBNYXRyaXgzKCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRDb3ZhcmlhbmNlID0gbmV3IE1hdHJpeDMoKTtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0zeDMgPSBuZXcgTWF0cml4MygpO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybTN4M1RyYW5zcG9zZSA9IG5ldyBNYXRyaXgzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY2FsZSwgcm90YXRpb24sIHRyYW5zZm9ybSwgb3V0Q292YXJpYW5jZSwgb3V0T2Zmc2V0ID0gMCwgZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwpIHtcclxuXHJcbiAgICAgICAgICAgIHRlbXBNYXRyaXg0Lm1ha2VTY2FsZShzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTtcclxuICAgICAgICAgICAgc2NhbGVNYXRyaXguc2V0RnJvbU1hdHJpeDQodGVtcE1hdHJpeDQpO1xyXG5cclxuICAgICAgICAgICAgdGVtcE1hdHJpeDQubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocm90YXRpb24pO1xyXG4gICAgICAgICAgICByb3RhdGlvbk1hdHJpeC5zZXRGcm9tTWF0cml4NCh0ZW1wTWF0cml4NCk7XHJcblxyXG4gICAgICAgICAgICBjb3ZhcmlhbmNlTWF0cml4LmNvcHkocm90YXRpb25NYXRyaXgpLm11bHRpcGx5KHNjYWxlTWF0cml4KTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmNvcHkoY292YXJpYW5jZU1hdHJpeCkudHJhbnNwb3NlKCkucHJlbXVsdGlwbHkoY292YXJpYW5jZU1hdHJpeCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0zeDMuc2V0RnJvbU1hdHJpeDQodHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTN4M1RyYW5zcG9zZS5jb3B5KHRyYW5zZm9ybTN4MykudHJhbnNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1lZENvdmFyaWFuY2UubXVsdGlwbHkodHJhbnNmb3JtM3gzVHJhbnNwb3NlKTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVkQ292YXJpYW5jZS5wcmVtdWx0aXBseSh0cmFuc2Zvcm0zeDMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXRdID0gdG9IYWxmRmxvYXQodHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzBdKTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgMV0gPSB0b0hhbGZGbG9hdCh0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbM10pO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyAyXSA9IHRvSGFsZkZsb2F0KHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s2XSk7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDNdID0gdG9IYWxmRmxvYXQodHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzRdKTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgNF0gPSB0b0hhbGZGbG9hdCh0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbN10pO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyA1XSA9IHRvSGFsZkZsb2F0KHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s4XSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldF0gPSB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbMF07XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDFdID0gdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzNdO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyAyXSA9IHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s2XTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgM10gPSB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbNF07XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDRdID0gdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzddO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyA1XSA9IHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s4XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBmaWxsU3BsYXRDb3ZhcmlhbmNlQXJyYXkoY292YXJpYW5jZUFycmF5LCB0cmFuc2Zvcm0sIHNyY0Zyb20sIHNyY1RvLCBkZXN0RnJvbSwgZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwpIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdENvdW50O1xyXG5cclxuICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG5cclxuICAgICAgICBzcmNGcm9tID0gc3JjRnJvbSB8fCAwO1xyXG4gICAgICAgIHNyY1RvID0gc3JjVG8gfHwgc3BsYXRDb3VudCAtIDE7XHJcbiAgICAgICAgaWYgKGRlc3RGcm9tID09PSB1bmRlZmluZWQpIGRlc3RGcm9tID0gc3JjRnJvbTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHNyY0Zyb207IGkgPD0gc3JjVG87IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGkgLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlRGVzdEJhc2UgPSAoaSAtIHNyY0Zyb20gKyBkZXN0RnJvbSkgKiBTcGxhdEJ1ZmZlci5Db3ZhcmlhbmNlQ29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNyY1NwbGF0U2NhbGVzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW3RoaXMuY29tcHJlc3Npb25MZXZlbF0uU2NhbGVPZmZzZXRCeXRlcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0U2NhbGVzQmFzZSk7XHJcblxyXG4gICAgICAgICAgICBzY2FsZS5zZXQodG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpKTtcclxuXHJcbiAgICAgICAgICAgIHJvdGF0aW9uLnNldCh0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA0LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDYsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAzLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpKTtcclxuXHJcbiAgICAgICAgICAgIFNwbGF0QnVmZmVyLmNvbXB1dGVDb3ZhcmlhbmNlKHNjYWxlLCByb3RhdGlvbiwgdHJhbnNmb3JtLCBjb3ZhcmlhbmNlQXJyYXksIGNvdmFyaWFuY2VEZXN0QmFzZSwgZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxsU3BsYXRDb2xvckFycmF5KG91dENvbG9yQXJyYXksIG1pbmltdW1BbHBoYSwgc3JjRnJvbSwgc3JjVG8sIGRlc3RGcm9tKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgc3JjRnJvbSA9IHNyY0Zyb20gfHwgMDtcclxuICAgICAgICBzcmNUbyA9IHNyY1RvIHx8IHNwbGF0Q291bnQgLSAxO1xyXG4gICAgICAgIGlmIChkZXN0RnJvbSA9PT0gdW5kZWZpbmVkKSBkZXN0RnJvbSA9IHNyY0Zyb207XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBzcmNGcm9tOyBpIDw9IHNyY1RvOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtpXTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gaSAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yRGVzdEJhc2UgPSAoaSAtIHNyY0Zyb20gKyBkZXN0RnJvbSkgKiBTcGxhdEJ1ZmZlci5Db2xvckNvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBzcmNTcGxhdENvbG9yc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1t0aGlzLmNvbXByZXNzaW9uTGV2ZWxdLkNvbG9yT2Zmc2V0Qnl0ZXM7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0Q29sb3JzQmFzZSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYWxwaGEgPSBkYXRhVmlld1szXTtcclxuICAgICAgICAgICAgYWxwaGEgPSAoYWxwaGEgPj0gbWluaW11bUFscGhhKSA/IGFscGhhIDogMDtcclxuXHJcbiAgICAgICAgICAgIG91dENvbG9yQXJyYXlbY29sb3JEZXN0QmFzZV0gPSBkYXRhVmlld1swXTtcclxuICAgICAgICAgICAgb3V0Q29sb3JBcnJheVtjb2xvckRlc3RCYXNlICsgMV0gPSBkYXRhVmlld1sxXTtcclxuICAgICAgICAgICAgb3V0Q29sb3JBcnJheVtjb2xvckRlc3RCYXNlICsgMl0gPSBkYXRhVmlld1syXTtcclxuICAgICAgICAgICAgb3V0Q29sb3JBcnJheVtjb2xvckRlc3RCYXNlICsgM10gPSBhbHBoYTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFNwaGVyaWNhbEhhcm1vbmljc0FycmF5ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljVmVjdG9ycyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTU7IGkrKykge1xyXG4gICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY1ZlY3RvcnNbaV0gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdGVtcE1hdHJpeDMgPSBuZXcgTWF0cml4MygpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBNYXRyaXg0ID0gbmV3IE1hdHJpeDQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcFRyYW5zbGF0aW9uID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCB0ZW1wU2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBSb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNoMTEgPSBbXTtcclxuICAgICAgICBjb25zdCBzaDEyID0gW107XHJcbiAgICAgICAgY29uc3Qgc2gxMyA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBzaDIxID0gW107XHJcbiAgICAgICAgY29uc3Qgc2gyMiA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoMjMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaDI0ID0gW107XHJcbiAgICAgICAgY29uc3Qgc2gyNSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBzaEluMSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoSW4yID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hJbjMgPSBbXTtcclxuICAgICAgICBjb25zdCBzaEluNCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoSW41ID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHNoT3V0MSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoT3V0MiA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoT3V0MyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoT3V0NCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoT3V0NSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBub29wID0gKHYpID0+IHY7XHJcblxyXG4gICAgICAgIGNvbnN0IHNldDMgPSAoYXJyYXksIHZhbDEsIHZhbDIsIHZhbDMpID0+IHtcclxuICAgICAgICAgICAgYXJyYXlbMF0gPSB2YWwxO1xyXG4gICAgICAgICAgICBhcnJheVsxXSA9IHZhbDI7XHJcbiAgICAgICAgICAgIGFycmF5WzJdID0gdmFsMztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBzZXQzRnJvbUFycmF5ID0gKGFycmF5LCBzcmNEZXN0Vmlldywgc3RyaWRlLCBzcmNCYXNlLCBjb21wcmVzc2lvbkxldmVsKSA9PiB7XHJcbiAgICAgICAgICAgIGFycmF5WzBdID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoc3JjRGVzdFZpZXcsIHNyY0Jhc2UsIGNvbXByZXNzaW9uTGV2ZWwsIHRydWUpO1xyXG4gICAgICAgICAgICBhcnJheVsxXSA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKHNyY0Rlc3RWaWV3LCBzcmNCYXNlICsgc3RyaWRlLCBjb21wcmVzc2lvbkxldmVsLCB0cnVlKTtcclxuICAgICAgICAgICAgYXJyYXlbMl0gPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChzcmNEZXN0Vmlldywgc3JjQmFzZSArIHN0cmlkZSArIHN0cmlkZSwgY29tcHJlc3Npb25MZXZlbCwgdHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgY29weTMgPSAoc3JjQXJyYXksIGRlc3RBcnJheSkgPT4ge1xyXG4gICAgICAgICAgICBkZXN0QXJyYXlbMF0gPSBzcmNBcnJheVswXTtcclxuICAgICAgICAgICAgZGVzdEFycmF5WzFdID0gc3JjQXJyYXlbMV07XHJcbiAgICAgICAgICAgIGRlc3RBcnJheVsyXSA9IHNyY0FycmF5WzJdO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHNldE91dHB1dDMgPSAoc3JjQXJyYXksIGRlc3RBcnJheSwgZGVzdEJhc2UsIGNvbnZlcnNpb25GdW5jKSA9PiB7XHJcbiAgICAgICAgICAgIGRlc3RBcnJheVtkZXN0QmFzZV0gPSBjb252ZXJzaW9uRnVuYyhzcmNBcnJheVswXSk7XHJcbiAgICAgICAgICAgIGRlc3RBcnJheVtkZXN0QmFzZSArIDFdID0gY29udmVyc2lvbkZ1bmMoc3JjQXJyYXlbMV0pO1xyXG4gICAgICAgICAgICBkZXN0QXJyYXlbZGVzdEJhc2UgKyAyXSA9IGNvbnZlcnNpb25GdW5jKHNyY0FycmF5WzJdKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzID0gKHNyYywgZGVzdCwgY29tcHJlc3Npb25MZXZlbCwgcmFuZ2U4Qml0TWluLCByYW5nZThCaXRNYXgpID0+IHtcclxuICAgICAgICAgICAgZGVzdFswXSA9IHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjWzBdLCBjb21wcmVzc2lvbkxldmVsLCB0cnVlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCk7XHJcbiAgICAgICAgICAgIGRlc3RbMV0gPSB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1sxXSwgY29tcHJlc3Npb25MZXZlbCwgdHJ1ZSwgcmFuZ2U4Qml0TWluLCByYW5nZThCaXRNYXgpO1xyXG4gICAgICAgICAgICBkZXN0WzJdID0gdG9VbmNvbXByZXNzZWRGbG9hdChzcmNbMl0sIGNvbXByZXNzaW9uTGV2ZWwsIHRydWUsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjRnJvbSwgc3JjVG8sIGRlc3RGcm9tLCBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCkge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgc3JjRnJvbSA9IHNyY0Zyb20gfHwgMDtcclxuICAgICAgICAgICAgc3JjVG8gPSBzcmNUbyB8fCBzcGxhdENvdW50IC0gMTtcclxuICAgICAgICAgICAgaWYgKGRlc3RGcm9tID09PSB1bmRlZmluZWQpIGRlc3RGcm9tID0gc3JjRnJvbTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0gJiYgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXRyaXg0LmNvcHkodHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXRyaXg0LmRlY29tcG9zZSh0ZW1wVHJhbnNsYXRpb24sIHRlbXBSb3RhdGlvbiwgdGVtcFNjYWxlKTtcclxuICAgICAgICAgICAgICAgIHRlbXBSb3RhdGlvbi5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXRyaXg0Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHRlbXBSb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF0cml4My5zZXRGcm9tTWF0cml4NCh0ZW1wTWF0cml4NCk7XHJcbiAgICAgICAgICAgICAgICBzZXQzKHNoMTEsIHRlbXBNYXRyaXgzLmVsZW1lbnRzWzRdLCAtdGVtcE1hdHJpeDMuZWxlbWVudHNbN10sIHRlbXBNYXRyaXgzLmVsZW1lbnRzWzFdKTtcclxuICAgICAgICAgICAgICAgIHNldDMoc2gxMiwgLXRlbXBNYXRyaXgzLmVsZW1lbnRzWzVdLCB0ZW1wTWF0cml4My5lbGVtZW50c1s4XSwgLXRlbXBNYXRyaXgzLmVsZW1lbnRzWzJdKTtcclxuICAgICAgICAgICAgICAgIHNldDMoc2gxMywgdGVtcE1hdHJpeDMuZWxlbWVudHNbM10sIC10ZW1wTWF0cml4My5lbGVtZW50c1s2XSwgdGVtcE1hdHJpeDMuZWxlbWVudHNbMF0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBsb2NhbEZyb21IYWxmRmxvYXRUb1VpbnQ4ID0gKHYpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmcm9tSGFsZkZsb2F0VG9VaW50OCh2LCB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLCB0aGlzLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVG9VaW50OCA9ICh2KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9VaW50OCh2LCB0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLCB0aGlzLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzcmNGcm9tOyBpIDw9IHNyY1RvOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4ob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzZWN0aW9uLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzQ291bnQgPSBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZShvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGkgLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjU3BsYXRTSEJhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1t0aGlzLmNvbXByZXNzaW9uTGV2ZWxdLlNwaGVyaWNhbEhhcm1vbmljc09mZnNldEJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0U0hCYXNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaERlc3RCYXNlID0gKGkgLSBzcmNGcm9tICsgZGVzdEZyb20pICogb3V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c0NvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjb21wcmVzc2lvbkxldmVsRm9yT3V0cHV0Q29udmVyc2lvbiA9IHRyYW5zZm9ybSA/IDAgOiB0aGlzLmNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBub29wO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbXByZXNzaW9uTGV2ZWxGb3JPdXRwdXRDb252ZXJzaW9uICE9PSBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wcmVzc2lvbkxldmVsRm9yT3V0cHV0Q29udmVyc2lvbiA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwgPT09IDApIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwgPT0gMikgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBsb2NhbEZyb21IYWxmRmxvYXRUb1VpbnQ4O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbEZvck91dHB1dENvbnZlcnNpb24gPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsID09PSAxKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCA9PSAyKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IGxvY2FsVG9VaW50ODtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbWluU2hDb2VmZiA9IHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhTaENvZWZmID0gdGhpcy5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluMSwgZGF0YVZpZXcsIDMsIDAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluMiwgZGF0YVZpZXcsIDMsIDEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluMywgZGF0YVZpZXcsIDMsIDIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluMSwgc2hJbjEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjIsIHNoSW4yLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW4zLCBzaEluMywgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIucm90YXRlU3BoZXJpY2FsSGFybW9uaWNzMyhzaEluMSwgc2hJbjIsIHNoSW4zLCBzaDExLCBzaDEyLCBzaDEzLCBzaE91dDEsIHNoT3V0Miwgc2hPdXQzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluMSwgc2hPdXQxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjIsIHNoT3V0Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW4zLCBzaE91dDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDEsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlLCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgMywgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQzLCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDYsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW4xLCBkYXRhVmlldywgNSwgOSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluMiwgZGF0YVZpZXcsIDUsIDEwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW4zLCBkYXRhVmlldywgNSwgMTEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjQsIGRhdGFWaWV3LCA1LCAxMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluNSwgZGF0YVZpZXcsIDUsIDEzLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluMSwgc2hJbjEsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW4yLCBzaEluMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjMsIHNoSW4zLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluNCwgc2hJbjQsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW41LCBzaEluNSwgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLnJvdGF0ZVNwaGVyaWNhbEhhcm1vbmljczUoc2hJbjEsIHNoSW4yLCBzaEluMywgc2hJbjQsIHNoSW41LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDExLCBzaDEyLCBzaDEzLCBzaDIxLCBzaDIyLCBzaDIzLCBzaDI0LCBzaDI1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaE91dDEsIHNoT3V0Miwgc2hPdXQzLCBzaE91dDQsIHNoT3V0NSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluMSwgc2hPdXQxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW4yLCBzaE91dDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjMsIHNoT3V0Myk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluNCwgc2hPdXQ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW41LCBzaE91dDUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0MSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyA5LCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDEyLCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQzLCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDE1LCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQ0LCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDE4LCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQ1LCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDIxLCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgc3RhdGljIGRvdDMgPSAodjEsIHYyLCB2MywgdHJhbnNmb3JtUm93LCBvdXRBcnJheSkgPT4ge1xyXG4gICAgICAgIG91dEFycmF5WzBdID0gb3V0QXJyYXlbMV0gPSBvdXRBcnJheVsyXSA9IDA7XHJcbiAgICAgICAgY29uc3QgdDAgPSB0cmFuc2Zvcm1Sb3dbMF07XHJcbiAgICAgICAgY29uc3QgdDEgPSB0cmFuc2Zvcm1Sb3dbMV07XHJcbiAgICAgICAgY29uc3QgdDIgPSB0cmFuc2Zvcm1Sb3dbMl07XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjFbMF0gKiB0MCwgdjFbMV0gKiB0MCwgdjFbMl0gKiB0MCwgb3V0QXJyYXkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHYyWzBdICogdDEsIHYyWzFdICogdDEsIHYyWzJdICogdDEsIG91dEFycmF5KTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2M1swXSAqIHQyLCB2M1sxXSAqIHQyLCB2M1syXSAqIHQyLCBvdXRBcnJheSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBhZGRJbnRvMyA9ICh2YWwxLCB2YWwyLCB2YWwzLCBkZXN0QXJyYXkpID0+IHtcclxuICAgICAgICBkZXN0QXJyYXlbMF0gPSBkZXN0QXJyYXlbMF0gKyB2YWwxO1xyXG4gICAgICAgIGRlc3RBcnJheVsxXSA9IGRlc3RBcnJheVsxXSArIHZhbDI7XHJcbiAgICAgICAgZGVzdEFycmF5WzJdID0gZGVzdEFycmF5WzJdICsgdmFsMztcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGRvdDUgPSAodjEsIHYyLCB2MywgdjQsIHY1LCB0cmFuc2Zvcm1Sb3csIG91dEFycmF5KSA9PiB7XHJcbiAgICAgICAgb3V0QXJyYXlbMF0gPSBvdXRBcnJheVsxXSA9IG91dEFycmF5WzJdID0gMDtcclxuICAgICAgICBjb25zdCB0MCA9IHRyYW5zZm9ybVJvd1swXTtcclxuICAgICAgICBjb25zdCB0MSA9IHRyYW5zZm9ybVJvd1sxXTtcclxuICAgICAgICBjb25zdCB0MiA9IHRyYW5zZm9ybVJvd1syXTtcclxuICAgICAgICBjb25zdCB0MyA9IHRyYW5zZm9ybVJvd1szXTtcclxuICAgICAgICBjb25zdCB0NCA9IHRyYW5zZm9ybVJvd1s0XTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2MVswXSAqIHQwLCB2MVsxXSAqIHQwLCB2MVsyXSAqIHQwLCBvdXRBcnJheSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjJbMF0gKiB0MSwgdjJbMV0gKiB0MSwgdjJbMl0gKiB0MSwgb3V0QXJyYXkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHYzWzBdICogdDIsIHYzWzFdICogdDIsIHYzWzJdICogdDIsIG91dEFycmF5KTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2NFswXSAqIHQzLCB2NFsxXSAqIHQzLCB2NFsyXSAqIHQzLCBvdXRBcnJheSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjVbMF0gKiB0NCwgdjVbMV0gKiB0NCwgdjVbMl0gKiB0NCwgb3V0QXJyYXkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgcm90YXRlU3BoZXJpY2FsSGFybW9uaWNzMyA9IChpbjEsIGluMiwgaW4zLCB0c2gxMSwgdHNoMTIsIHRzaDEzLCBvdXQxLCBvdXQyLCBvdXQzKSA9PiB7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90MyhpbjEsIGluMiwgaW4zLCB0c2gxMSwgb3V0MSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90MyhpbjEsIGluMiwgaW4zLCB0c2gxMiwgb3V0Mik7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90MyhpbjEsIGluMiwgaW4zLCB0c2gxMywgb3V0Myk7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyByb3RhdGVTcGhlcmljYWxIYXJtb25pY3M1ID0gKGluMSwgaW4yLCBpbjMsIGluNCwgaW41LCB0c2gxMSwgdHNoMTIsIHRzaDEzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNoMjEsIHRzaDIyLCB0c2gyMywgdHNoMjQsIHRzaDI1LCBvdXQxLCBvdXQyLCBvdXQzLCBvdXQ0LCBvdXQ1KSA9PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGtTcXJ0MDEwNCA9IE1hdGguc3FydCgxLjAgLyA0LjApO1xyXG4gICAgICAgIGNvbnN0IGtTcXJ0MDMwNCA9IE1hdGguc3FydCgzLjAgLyA0LjApO1xyXG4gICAgICAgIGNvbnN0IGtTcXJ0MDEwMyA9IE1hdGguc3FydCgxLjAgLyAzLjApO1xyXG4gICAgICAgIGNvbnN0IGtTcXJ0MDQwMyA9IE1hdGguc3FydCg0LjAgLyAzLjApO1xyXG4gICAgICAgIGNvbnN0IGtTcXJ0MDExMiA9IE1hdGguc3FydCgxLjAgLyAxMi4wKTtcclxuXHJcbiAgICAgICAgdHNoMjFbMF0gPSBrU3FydDAxMDQgKiAoKHRzaDEzWzJdICogdHNoMTFbMF0gKyB0c2gxM1swXSAqIHRzaDExWzJdKSArICh0c2gxMVsyXSAqIHRzaDEzWzBdICsgdHNoMTFbMF0gKiB0c2gxM1syXSkpO1xyXG4gICAgICAgIHRzaDIxWzFdID0gKHRzaDEzWzFdICogdHNoMTFbMF0gKyB0c2gxMVsxXSAqIHRzaDEzWzBdKTtcclxuICAgICAgICB0c2gyMVsyXSA9IGtTcXJ0MDMwNCAqICh0c2gxM1sxXSAqIHRzaDExWzFdICsgdHNoMTFbMV0gKiB0c2gxM1sxXSk7XHJcbiAgICAgICAgdHNoMjFbM10gPSAodHNoMTNbMV0gKiB0c2gxMVsyXSArIHRzaDExWzFdICogdHNoMTNbMl0pO1xyXG4gICAgICAgIHRzaDIxWzRdID0ga1NxcnQwMTA0ICogKCh0c2gxM1syXSAqIHRzaDExWzJdIC0gdHNoMTNbMF0gKiB0c2gxMVswXSkgKyAodHNoMTFbMl0gKiB0c2gxM1syXSAtIHRzaDExWzBdICogdHNoMTNbMF0pKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3Q1KGluMSwgaW4yLCBpbjMsIGluNCwgaW41LCB0c2gyMSwgb3V0MSk7XHJcblxyXG4gICAgICAgIHRzaDIyWzBdID0ga1NxcnQwMTA0ICogKCh0c2gxMlsyXSAqIHRzaDExWzBdICsgdHNoMTJbMF0gKiB0c2gxMVsyXSkgKyAodHNoMTFbMl0gKiB0c2gxMlswXSArIHRzaDExWzBdICogdHNoMTJbMl0pKTtcclxuICAgICAgICB0c2gyMlsxXSA9IHRzaDEyWzFdICogdHNoMTFbMF0gKyB0c2gxMVsxXSAqIHRzaDEyWzBdO1xyXG4gICAgICAgIHRzaDIyWzJdID0ga1NxcnQwMzA0ICogKHRzaDEyWzFdICogdHNoMTFbMV0gKyB0c2gxMVsxXSAqIHRzaDEyWzFdKTtcclxuICAgICAgICB0c2gyMlszXSA9IHRzaDEyWzFdICogdHNoMTFbMl0gKyB0c2gxMVsxXSAqIHRzaDEyWzJdO1xyXG4gICAgICAgIHRzaDIyWzRdID0ga1NxcnQwMTA0ICogKCh0c2gxMlsyXSAqIHRzaDExWzJdIC0gdHNoMTJbMF0gKiB0c2gxMVswXSkgKyAodHNoMTFbMl0gKiB0c2gxMlsyXSAtIHRzaDExWzBdICogdHNoMTJbMF0pKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3Q1KGluMSwgaW4yLCBpbjMsIGluNCwgaW41LCB0c2gyMiwgb3V0Mik7XHJcblxyXG4gICAgICAgIHRzaDIzWzBdID0ga1NxcnQwMTAzICogKHRzaDEyWzJdICogdHNoMTJbMF0gKyB0c2gxMlswXSAqIHRzaDEyWzJdKSArIC1rU3FydDAxMTIgKlxyXG4gICAgICAgICAgICAgICAgICAgKCh0c2gxM1syXSAqIHRzaDEzWzBdICsgdHNoMTNbMF0gKiB0c2gxM1syXSkgKyAodHNoMTFbMl0gKiB0c2gxMVswXSArIHRzaDExWzBdICogdHNoMTFbMl0pKTtcclxuICAgICAgICB0c2gyM1sxXSA9IGtTcXJ0MDQwMyAqIHRzaDEyWzFdICogdHNoMTJbMF0gKyAta1NxcnQwMTAzICogKHRzaDEzWzFdICogdHNoMTNbMF0gKyB0c2gxMVsxXSAqIHRzaDExWzBdKTtcclxuICAgICAgICB0c2gyM1syXSA9IHRzaDEyWzFdICogdHNoMTJbMV0gKyAta1NxcnQwMTA0ICogKHRzaDEzWzFdICogdHNoMTNbMV0gKyB0c2gxMVsxXSAqIHRzaDExWzFdKTtcclxuICAgICAgICB0c2gyM1szXSA9IGtTcXJ0MDQwMyAqIHRzaDEyWzFdICogdHNoMTJbMl0gKyAta1NxcnQwMTAzICogKHRzaDEzWzFdICogdHNoMTNbMl0gKyB0c2gxMVsxXSAqIHRzaDExWzJdKTtcclxuICAgICAgICB0c2gyM1s0XSA9IGtTcXJ0MDEwMyAqICh0c2gxMlsyXSAqIHRzaDEyWzJdIC0gdHNoMTJbMF0gKiB0c2gxMlswXSkgKyAta1NxcnQwMTEyICpcclxuICAgICAgICAgICAgICAgICAgICgodHNoMTNbMl0gKiB0c2gxM1syXSAtIHRzaDEzWzBdICogdHNoMTNbMF0pICsgKHRzaDExWzJdICogdHNoMTFbMl0gLSB0c2gxMVswXSAqIHRzaDExWzBdKSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90NShpbjEsIGluMiwgaW4zLCBpbjQsIGluNSwgdHNoMjMsIG91dDMpO1xyXG5cclxuICAgICAgICB0c2gyNFswXSA9IGtTcXJ0MDEwNCAqICgodHNoMTJbMl0gKiB0c2gxM1swXSArIHRzaDEyWzBdICogdHNoMTNbMl0pICsgKHRzaDEzWzJdICogdHNoMTJbMF0gKyB0c2gxM1swXSAqIHRzaDEyWzJdKSk7XHJcbiAgICAgICAgdHNoMjRbMV0gPSB0c2gxMlsxXSAqIHRzaDEzWzBdICsgdHNoMTNbMV0gKiB0c2gxMlswXTtcclxuICAgICAgICB0c2gyNFsyXSA9IGtTcXJ0MDMwNCAqICh0c2gxMlsxXSAqIHRzaDEzWzFdICsgdHNoMTNbMV0gKiB0c2gxMlsxXSk7XHJcbiAgICAgICAgdHNoMjRbM10gPSB0c2gxMlsxXSAqIHRzaDEzWzJdICsgdHNoMTNbMV0gKiB0c2gxMlsyXTtcclxuICAgICAgICB0c2gyNFs0XSA9IGtTcXJ0MDEwNCAqICgodHNoMTJbMl0gKiB0c2gxM1syXSAtIHRzaDEyWzBdICogdHNoMTNbMF0pICsgKHRzaDEzWzJdICogdHNoMTJbMl0gLSB0c2gxM1swXSAqIHRzaDEyWzBdKSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90NShpbjEsIGluMiwgaW4zLCBpbjQsIGluNSwgdHNoMjQsIG91dDQpO1xyXG5cclxuICAgICAgICB0c2gyNVswXSA9IGtTcXJ0MDEwNCAqICgodHNoMTNbMl0gKiB0c2gxM1swXSArIHRzaDEzWzBdICogdHNoMTNbMl0pIC0gKHRzaDExWzJdICogdHNoMTFbMF0gKyB0c2gxMVswXSAqIHRzaDExWzJdKSk7XHJcbiAgICAgICAgdHNoMjVbMV0gPSAodHNoMTNbMV0gKiB0c2gxM1swXSAtIHRzaDExWzFdICogdHNoMTFbMF0pO1xyXG4gICAgICAgIHRzaDI1WzJdID0ga1NxcnQwMzA0ICogKHRzaDEzWzFdICogdHNoMTNbMV0gLSB0c2gxMVsxXSAqIHRzaDExWzFdKTtcclxuICAgICAgICB0c2gyNVszXSA9ICh0c2gxM1sxXSAqIHRzaDEzWzJdIC0gdHNoMTFbMV0gKiB0c2gxMVsyXSk7XHJcbiAgICAgICAgdHNoMjVbNF0gPSBrU3FydDAxMDQgKiAoKHRzaDEzWzJdICogdHNoMTNbMl0gLSB0c2gxM1swXSAqIHRzaDEzWzBdKSAtICh0c2gxMVsyXSAqIHRzaDExWzJdIC0gdHNoMTFbMF0gKiB0c2gxMVswXSkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDUoaW4xLCBpbjIsIGluMywgaW40LCBpbjUsIHRzaDI1LCBvdXQ1KTtcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIHBhcnNlSGVhZGVyKGJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDggPSBuZXcgVWludDhBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50MTYgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyAyKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5RmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBjb25zdCB2ZXJzaW9uTWFqb3IgPSBoZWFkZXJBcnJheVVpbnQ4WzBdO1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb25NaW5vciA9IGhlYWRlckFycmF5VWludDhbMV07XHJcbiAgICAgICAgY29uc3QgbWF4U2VjdGlvbkNvdW50ID0gaGVhZGVyQXJyYXlVaW50MzJbMV07XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkNvdW50ID0gaGVhZGVyQXJyYXlVaW50MzJbMl07XHJcbiAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IGhlYWRlckFycmF5VWludDMyWzNdO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSBoZWFkZXJBcnJheVVpbnQzMls0XTtcclxuICAgICAgICBjb25zdCBjb21wcmVzc2lvbkxldmVsID0gaGVhZGVyQXJyYXlVaW50MTZbMTBdO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lQ2VudGVyID0gbmV3IFZlY3RvcjMoaGVhZGVyQXJyYXlGbG9hdDMyWzZdLCBoZWFkZXJBcnJheUZsb2F0MzJbN10sIGhlYWRlckFycmF5RmxvYXQzMls4XSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gaGVhZGVyQXJyYXlGbG9hdDMyWzldIHx8IC1EZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlO1xyXG4gICAgICAgIGNvbnN0IG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gaGVhZGVyQXJyYXlGbG9hdDMyWzEwXSB8fCBEZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB2ZXJzaW9uTWFqb3IsXHJcbiAgICAgICAgICAgIHZlcnNpb25NaW5vcixcclxuICAgICAgICAgICAgbWF4U2VjdGlvbkNvdW50LFxyXG4gICAgICAgICAgICBzZWN0aW9uQ291bnQsXHJcbiAgICAgICAgICAgIG1heFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgIHNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgIHNjZW5lQ2VudGVyLFxyXG4gICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZixcclxuICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmZcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB3cml0ZUhlYWRlckNvdW50c1RvQnVmZmVyKHNlY3Rpb25Db3VudCwgc3BsYXRDb3VudCwgYnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQzMlsyXSA9IHNlY3Rpb25Db3VudDtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQzMls0XSA9IHNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHdyaXRlSGVhZGVyVG9CdWZmZXIoaGVhZGVyLCBidWZmZXIpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQ4ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDE2ID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gMik7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheUZsb2F0MzIgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50OFswXSA9IGhlYWRlci52ZXJzaW9uTWFqb3I7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50OFsxXSA9IGhlYWRlci52ZXJzaW9uTWlub3I7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50OFsyXSA9IDA7IC8vIHVudXNlZCBmb3Igbm93XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50OFszXSA9IDA7IC8vIHVudXNlZCBmb3Igbm93XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MzJbMV0gPSBoZWFkZXIubWF4U2VjdGlvbkNvdW50O1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDMyWzJdID0gaGVhZGVyLnNlY3Rpb25Db3VudDtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQzMlszXSA9IGhlYWRlci5tYXhTcGxhdENvdW50O1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDMyWzRdID0gaGVhZGVyLnNwbGF0Q291bnQ7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MTZbMTBdID0gaGVhZGVyLmNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlGbG9hdDMyWzZdID0gaGVhZGVyLnNjZW5lQ2VudGVyLng7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlGbG9hdDMyWzddID0gaGVhZGVyLnNjZW5lQ2VudGVyLnk7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlGbG9hdDMyWzhdID0gaGVhZGVyLnNjZW5lQ2VudGVyLno7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlGbG9hdDMyWzldID0gaGVhZGVyLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmIHx8IC1EZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlO1xyXG4gICAgICAgIGhlYWRlckFycmF5RmxvYXQzMlsxMF0gPSBoZWFkZXIubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgfHwgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2VTZWN0aW9uSGVhZGVycyhoZWFkZXIsIGJ1ZmZlciwgb2Zmc2V0ID0gMCwgc2VjTG9hZGVkQ291bnRzVG9NYXgpIHtcclxuICAgICAgICBjb25zdCBjb21wcmVzc2lvbkxldmVsID0gaGVhZGVyLmNvbXByZXNzaW9uTGV2ZWw7XHJcblxyXG4gICAgICAgIGNvbnN0IG1heFNlY3Rpb25Db3VudCA9IGhlYWRlci5tYXhTZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlckFycmF5VWludDE2ID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBtYXhTZWN0aW9uQ291bnQgKiBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gMik7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlckFycmF5VWludDMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBtYXhTZWN0aW9uQ291bnQgKiBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlckFycmF5RmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBvZmZzZXQsIG1heFNlY3Rpb25Db3VudCAqIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlcnMgPSBbXTtcclxuICAgICAgICBsZXQgc2VjdGlvbkhlYWRlckJhc2UgPSAwO1xyXG4gICAgICAgIGxldCBzZWN0aW9uSGVhZGVyQmFzZVVpbnQxNiA9IHNlY3Rpb25IZWFkZXJCYXNlIC8gMjtcclxuICAgICAgICBsZXQgc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgPSBzZWN0aW9uSGVhZGVyQmFzZSAvIDQ7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25CYXNlID0gU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzICsgaGVhZGVyLm1heFNlY3Rpb25Db3VudCAqIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgbGV0IHNwbGF0Q291bnRPZmZzZXQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF4U2VjdGlvbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDFdO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRTaXplID0gc2VjdGlvbkhlYWRlckFycmF5VWludDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgMl07XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldENvdW50ID0gc2VjdGlvbkhlYWRlckFycmF5VWludDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgM107XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEJsb2NrU2l6ZSA9IHNlY3Rpb25IZWFkZXJBcnJheUZsb2F0MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyA0XTtcclxuICAgICAgICAgICAgY29uc3QgaGFsZkJ1Y2tldEJsb2NrU2l6ZSA9IGJ1Y2tldEJsb2NrU2l6ZSAvIDIuMDtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0U3RvcmFnZVNpemVCeXRlcyA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQxNltzZWN0aW9uSGVhZGVyQmFzZVVpbnQxNiArIDEwXTtcclxuICAgICAgICAgICAgY29uc3QgY29tcHJlc3Npb25TY2FsZVJhbmdlID0gc2VjdGlvbkhlYWRlckFycmF5VWludDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgNl0gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uU2NhbGVSYW5nZTtcclxuICAgICAgICAgICAgY29uc3QgZnVsbEJ1Y2tldENvdW50ID0gc2VjdGlvbkhlYWRlckFycmF5VWludDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgOF07XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50ID0gc2VjdGlvbkhlYWRlckFycmF5VWludDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgOV07XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldHNNZXRhRGF0YVNpemVCeXRlcyA9IHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50ICogNDtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0c1N0b3JhZ2VTaXplQnl0ZXMgPSBidWNrZXRTdG9yYWdlU2l6ZUJ5dGVzICogYnVja2V0Q291bnQgKyBidWNrZXRzTWV0YURhdGFTaXplQnl0ZXM7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MTZbc2VjdGlvbkhlYWRlckJhc2VVaW50MTYgKyAyMF07XHJcbiAgICAgICAgICAgIGNvbnN0IHsgYnl0ZXNQZXJTcGxhdCB9ID0gU3BsYXRCdWZmZXIuY2FsY3VsYXRlQ29tcG9uZW50U3RvcmFnZShjb21wcmVzc2lvbkxldmVsLCBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3BsYXREYXRhU3RvcmFnZVNpemVCeXRlcyA9IGJ5dGVzUGVyU3BsYXQgKiBtYXhTcGxhdENvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBzdG9yYWdlU2l6ZUJ5dGVzID0gc3BsYXREYXRhU3RvcmFnZVNpemVCeXRlcyArIGJ1Y2tldHNTdG9yYWdlU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0ge1xyXG4gICAgICAgICAgICAgICAgYnl0ZXNQZXJTcGxhdDogYnl0ZXNQZXJTcGxhdCxcclxuICAgICAgICAgICAgICAgIHNwbGF0Q291bnRPZmZzZXQ6IHNwbGF0Q291bnRPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBzZWNMb2FkZWRDb3VudHNUb01heCA/IG1heFNwbGF0Q291bnQgOiAwLFxyXG4gICAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudDogbWF4U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldFNpemU6IGJ1Y2tldFNpemUsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRDb3VudDogYnVja2V0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRCbG9ja1NpemU6IGJ1Y2tldEJsb2NrU2l6ZSxcclxuICAgICAgICAgICAgICAgIGhhbGZCdWNrZXRCbG9ja1NpemU6IGhhbGZCdWNrZXRCbG9ja1NpemUsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRTdG9yYWdlU2l6ZUJ5dGVzOiBidWNrZXRTdG9yYWdlU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0c1N0b3JhZ2VTaXplQnl0ZXM6IGJ1Y2tldHNTdG9yYWdlU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgc3BsYXREYXRhU3RvcmFnZVNpemVCeXRlczogc3BsYXREYXRhU3RvcmFnZVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VTaXplQnl0ZXM6IHN0b3JhZ2VTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc2lvblNjYWxlUmFuZ2U6IGNvbXByZXNzaW9uU2NhbGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uU2NhbGVGYWN0b3I6IGhhbGZCdWNrZXRCbG9ja1NpemUgLyBjb21wcmVzc2lvblNjYWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBiYXNlOiBzZWN0aW9uQmFzZSxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldHNCYXNlOiBzZWN0aW9uQmFzZSArIGJ1Y2tldHNNZXRhRGF0YVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIGRhdGFCYXNlOiBzZWN0aW9uQmFzZSArIGJ1Y2tldHNTdG9yYWdlU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgZnVsbEJ1Y2tldENvdW50OiBmdWxsQnVja2V0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudDogcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU6IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyc1tpXSA9IHNlY3Rpb25IZWFkZXI7XHJcbiAgICAgICAgICAgIHNlY3Rpb25CYXNlICs9IHN0b3JhZ2VTaXplQnl0ZXM7XHJcbiAgICAgICAgICAgIHNlY3Rpb25IZWFkZXJCYXNlICs9IFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgICAgIHNlY3Rpb25IZWFkZXJCYXNlVWludDE2ID0gc2VjdGlvbkhlYWRlckJhc2UgLyAyO1xyXG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiA9IHNlY3Rpb25IZWFkZXJCYXNlIC8gNDtcclxuICAgICAgICAgICAgc3BsYXRDb3VudE9mZnNldCArPSBtYXhTcGxhdENvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNlY3Rpb25IZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgd3JpdGVTZWN0aW9uSGVhZGVyVG9CdWZmZXIoc2VjdGlvbkhlYWRlciwgY29tcHJlc3Npb25MZXZlbCwgYnVmZmVyLCBvZmZzZXQgPSAwKSB7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlQXJyYXlVaW50MTYgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCBvZmZzZXQsIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyAyKTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIsIG9mZnNldCwgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZUFycmF5RmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBvZmZzZXQsIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuXHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbMF0gPSBzZWN0aW9uSGVhZGVyLnNwbGF0Q291bnQ7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbMV0gPSBzZWN0aW9uSGVhZGVyLm1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbMl0gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBzZWN0aW9uSGVhZGVyLmJ1Y2tldFNpemUgOiAwO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzNdID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gc2VjdGlvbkhlYWRlci5idWNrZXRDb3VudCA6IDA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlGbG9hdDMyWzRdID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gc2VjdGlvbkhlYWRlci5idWNrZXRCbG9ja1NpemUgOiAwLjA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MTZbMTBdID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gU3BsYXRCdWZmZXIuQnVja2V0U3RvcmFnZVNpemVCeXRlcyA6IDA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbNl0gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBzZWN0aW9uSGVhZGVyLmNvbXByZXNzaW9uU2NhbGVSYW5nZSA6IDA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbN10gPSBzZWN0aW9uSGVhZGVyLnN0b3JhZ2VTaXplQnl0ZXM7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbOF0gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBzZWN0aW9uSGVhZGVyLmZ1bGxCdWNrZXRDb3VudCA6IDA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbOV0gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBzZWN0aW9uSGVhZGVyLnBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50IDogMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQxNlsyMF0gPSBzZWN0aW9uSGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHdyaXRlU2VjdGlvbkhlYWRlclNwbGF0Q291bnRUb0J1ZmZlcihzcGxhdENvdW50LCBidWZmZXIsIG9mZnNldCA9IDApIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIsIG9mZnNldCwgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDMyWzBdID0gc3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RGcm9tQnVmZmVyKGJ1ZmZlckRhdGEsIHNlY0xvYWRlZENvdW50c1RvTWF4KSB7XHJcbiAgICAgICAgdGhpcy5idWZmZXJEYXRhID0gYnVmZmVyRGF0YTtcclxuXHJcbiAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9Mb2NhbFNwbGF0SW5kZXhNYXAgPSBbXTtcclxuICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXAgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gU3BsYXRCdWZmZXIucGFyc2VIZWFkZXIodGhpcy5idWZmZXJEYXRhKTtcclxuICAgICAgICB0aGlzLnZlcnNpb25NYWpvciA9IGhlYWRlci52ZXJzaW9uTWFqb3I7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uTWlub3IgPSBoZWFkZXIudmVyc2lvbk1pbm9yO1xyXG4gICAgICAgIHRoaXMubWF4U2VjdGlvbkNvdW50ID0gaGVhZGVyLm1heFNlY3Rpb25Db3VudDtcclxuICAgICAgICB0aGlzLnNlY3Rpb25Db3VudCA9IHNlY0xvYWRlZENvdW50c1RvTWF4ID8gaGVhZGVyLm1heFNlY3Rpb25Db3VudCA6IDA7XHJcbiAgICAgICAgdGhpcy5tYXhTcGxhdENvdW50ID0gaGVhZGVyLm1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgdGhpcy5zcGxhdENvdW50ID0gc2VjTG9hZGVkQ291bnRzVG9NYXggPyBoZWFkZXIubWF4U3BsYXRDb3VudCA6IDA7XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc2lvbkxldmVsID0gaGVhZGVyLmNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgdGhpcy5zY2VuZUNlbnRlciA9IG5ldyBWZWN0b3IzKCkuY29weShoZWFkZXIuc2NlbmVDZW50ZXIpO1xyXG4gICAgICAgIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBoZWFkZXIubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcbiAgICAgICAgdGhpcy5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IGhlYWRlci5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuXHJcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IFNwbGF0QnVmZmVyLnBhcnNlU2VjdGlvbkhlYWRlcnMoaGVhZGVyLCB0aGlzLmJ1ZmZlckRhdGEsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcywgc2VjTG9hZGVkQ291bnRzVG9NYXgpO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmtCdWZmZXJBcnJheXMoKTtcclxuICAgICAgICB0aGlzLmJ1aWxkTWFwcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjYWxjdWxhdGVDb21wb25lbnRTdG9yYWdlKGNvbXByZXNzaW9uTGV2ZWwsIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgIGNvbnN0IGJ5dGVzUGVyQ2VudGVyID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJDZW50ZXI7XHJcbiAgICAgICAgY29uc3QgYnl0ZXNQZXJTY2FsZSA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyU2NhbGU7XHJcbiAgICAgICAgY29uc3QgYnl0ZXNQZXJSb3RhdGlvbiA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyUm90YXRpb247XHJcbiAgICAgICAgY29uc3QgYnl0ZXNQZXJDb2xvciA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyQ29sb3I7XHJcbiAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c1BlclNwbGF0ID0gZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3NCeXRlc1BlclNwbGF0ID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnQgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzUGVyU3BsYXQ7XHJcbiAgICAgICAgY29uc3QgYnl0ZXNQZXJTcGxhdCA9IGJ5dGVzUGVyQ2VudGVyICsgYnl0ZXNQZXJTY2FsZSArIGJ5dGVzUGVyUm90YXRpb24gK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlc1BlckNvbG9yICsgc3BoZXJpY2FsSGFybW9uaWNzQnl0ZXNQZXJTcGxhdDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBieXRlc1BlckNlbnRlcixcclxuICAgICAgICAgICAgYnl0ZXNQZXJTY2FsZSxcclxuICAgICAgICAgICAgYnl0ZXNQZXJSb3RhdGlvbixcclxuICAgICAgICAgICAgYnl0ZXNQZXJDb2xvcixcclxuICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c1BlclNwbGF0LFxyXG4gICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NCeXRlc1BlclNwbGF0LFxyXG4gICAgICAgICAgICBieXRlc1BlclNwbGF0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBsaW5rQnVmZmVyQXJyYXlzKCkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXhTZWN0aW9uQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgc2VjdGlvbi5idWNrZXRBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmJ1Y2tldHNCYXNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmJ1Y2tldENvdW50ICogU3BsYXRCdWZmZXIuQnVja2V0U3RvcmFnZVNpemVGbG9hdHMpO1xyXG4gICAgICAgICAgICBpZiAoc2VjdGlvbi5wYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb24ucGFydGlhbGx5RmlsbGVkQnVja2V0TGVuZ3RocyA9IG5ldyBVaW50MzJBcnJheSh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uYmFzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBidWlsZE1hcHMoKSB7XHJcbiAgICAgICAgbGV0IGN1bXVsYXRpdmVTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF4U2VjdGlvbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbaV07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2VjdGlvbi5tYXhTcGxhdENvdW50OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbFNwbGF0SW5kZXggPSBjdW11bGF0aXZlU3BsYXRDb3VudCArIGo7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb0xvY2FsU3BsYXRJbmRleE1hcFtnbG9iYWxTcGxhdEluZGV4XSA9IGo7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbZ2xvYmFsU3BsYXRJbmRleF0gPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1bXVsYXRpdmVTcGxhdENvdW50ICs9IHNlY3Rpb24ubWF4U3BsYXRDb3VudDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTG9hZGVkQ291bnRzKG5ld1NlY3Rpb25Db3VudCwgbmV3U3BsYXRDb3VudCkge1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLndyaXRlSGVhZGVyQ291bnRzVG9CdWZmZXIobmV3U2VjdGlvbkNvdW50LCBuZXdTcGxhdENvdW50LCB0aGlzLmJ1ZmZlckRhdGEpO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkNvdW50ID0gbmV3U2VjdGlvbkNvdW50O1xyXG4gICAgICAgIHRoaXMuc3BsYXRDb3VudCA9IG5ld1NwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlU2VjdGlvbkxvYWRlZENvdW50cyhzZWN0aW9uSW5kZXgsIG5ld1NwbGF0Q291bnQpIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyT2Zmc2V0ID0gU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzICsgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAqIHNlY3Rpb25JbmRleDtcclxuICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZVNlY3Rpb25IZWFkZXJTcGxhdENvdW50VG9CdWZmZXIobmV3U3BsYXRDb3VudCwgdGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uSGVhZGVyT2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF0uc3BsYXRDb3VudCA9IG5ld1NwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHdyaXRlU3BsYXREYXRhVG9TZWN0aW9uQnVmZmVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBDZW50ZXJCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTIpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBTY2FsZUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxMik7XHJcbiAgICAgICAgY29uc3QgdGVtcFJvdGF0aW9uQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDE2KTtcclxuICAgICAgICBjb25zdCB0ZW1wQ29sb3JCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFNIQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDI1Nik7XHJcbiAgICAgICAgY29uc3QgdGVtcFJvdCA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFNjYWxlID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCBidWNrZXRDZW50ZXJEZWx0YSA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgWDogT0ZGU0VUX1gsIFk6IE9GRlNFVF9ZLCBaOiBPRkZTRVRfWixcclxuICAgICAgICAgICAgU0NBTEUwOiBPRkZTRVRfU0NBTEUwLCBTQ0FMRTE6IE9GRlNFVF9TQ0FMRTEsIFNDQUxFMjogT0ZGU0VUX1NDQUxFMixcclxuICAgICAgICAgICAgUk9UQVRJT04wOiBPRkZTRVRfUk9UMCwgUk9UQVRJT04xOiBPRkZTRVRfUk9UMSwgUk9UQVRJT04yOiBPRkZTRVRfUk9UMiwgUk9UQVRJT04zOiBPRkZTRVRfUk9UMyxcclxuICAgICAgICAgICAgRkRDMDogT0ZGU0VUX0ZEQzAsIEZEQzE6IE9GRlNFVF9GREMxLCBGREMyOiBPRkZTRVRfRkRDMiwgT1BBQ0lUWTogT0ZGU0VUX09QQUNJVFksXHJcbiAgICAgICAgICAgIEZSQzA6IE9GRlNFVF9GUkMwLCBGUkM5OiBPRkZTRVRfRlJDOSxcclxuICAgICAgICB9ID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbXByZXNzUG9zaXRpb25PZmZzZXQgPSAodiwgY29tcHJlc3Npb25TY2FsZUZhY3RvciwgY29tcHJlc3Npb25TY2FsZVJhbmdlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvdWJsZUNvbXByZXNzaW9uU2NhbGVSYW5nZSA9IGNvbXByZXNzaW9uU2NhbGVSYW5nZSAqIDIgKyAxO1xyXG4gICAgICAgICAgICB2ID0gTWF0aC5yb3VuZCh2ICogY29tcHJlc3Npb25TY2FsZUZhY3RvcikgKyBjb21wcmVzc2lvblNjYWxlUmFuZ2U7XHJcbiAgICAgICAgICAgIHJldHVybiBjbGFtcCh2LCAwLCBkb3VibGVDb21wcmVzc2lvblNjYWxlUmFuZ2UpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0YXJnZXRTcGxhdCwgc2VjdGlvbkJ1ZmZlciwgYnVmZmVyT2Zmc2V0LCBjb21wcmVzc2lvbkxldmVsLCBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlciwgY29tcHJlc3Npb25TY2FsZUZhY3RvciwgY29tcHJlc3Npb25TY2FsZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IC1EZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2UpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNQZXJTcGxhdCA9IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzUGVyQ2VudGVyID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJDZW50ZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzUGVyU2NhbGUgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlclNjYWxlO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlc1BlclJvdGF0aW9uID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJSb3RhdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXNQZXJDb2xvciA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyQ29sb3I7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXJCYXNlID0gYnVmZmVyT2Zmc2V0O1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZUJhc2UgPSBjZW50ZXJCYXNlICsgYnl0ZXNQZXJDZW50ZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uQmFzZSA9IHNjYWxlQmFzZSArIGJ5dGVzUGVyU2NhbGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yQmFzZSA9IHJvdGF0aW9uQmFzZSArIGJ5dGVzUGVyUm90YXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljc0Jhc2UgPSBjb2xvckJhc2UgKyBieXRlc1BlckNvbG9yO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRhcmdldFNwbGF0W09GRlNFVF9ST1QwXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUm90LnNldCh0YXJnZXRTcGxhdFtPRkZTRVRfUk9UMF0sIHRhcmdldFNwbGF0W09GRlNFVF9ST1QxXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1JPVDJdLCB0YXJnZXRTcGxhdFtPRkZTRVRfUk9UM10pO1xyXG4gICAgICAgICAgICAgICAgdGVtcFJvdC5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRlbXBSb3Quc2V0KDEuMCwgMC4wLCAwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRTcGxhdFtPRkZTRVRfU0NBTEUwXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wU2NhbGUuc2V0KHRhcmdldFNwbGF0W09GRlNFVF9TQ0FMRTBdIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNwbGF0W09GRlNFVF9TQ0FMRTFdIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNwbGF0W09GRlNFVF9TQ0FMRTJdIHx8IDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVtcFNjYWxlLnNldCgwLCAwLCAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBGbG9hdDMyQXJyYXkoc2VjdGlvbkJ1ZmZlciwgY2VudGVyQmFzZSwgU3BsYXRCdWZmZXIuQ2VudGVyQ29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm90ID0gbmV3IEZsb2F0MzJBcnJheShzZWN0aW9uQnVmZmVyLCByb3RhdGlvbkJhc2UsIFNwbGF0QnVmZmVyLlJvdGF0aW9uQ29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgRmxvYXQzMkFycmF5KHNlY3Rpb25CdWZmZXIsIHNjYWxlQmFzZSwgU3BsYXRCdWZmZXIuU2NhbGVDb21wb25lbnRDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcm90LnNldChbdGVtcFJvdC54LCB0ZW1wUm90LnksIHRlbXBSb3QueiwgdGVtcFJvdC53XSk7XHJcbiAgICAgICAgICAgICAgICBzY2FsZS5zZXQoW3RlbXBTY2FsZS54LCB0ZW1wU2NhbGUueSwgdGVtcFNjYWxlLnpdKTtcclxuICAgICAgICAgICAgICAgIGNlbnRlci5zZXQoW3RhcmdldFNwbGF0W09GRlNFVF9YXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1ldLCB0YXJnZXRTcGxhdFtPRkZTRVRfWl1dKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoT3V0ID0gbmV3IEZsb2F0MzJBcnJheShzZWN0aW9uQnVmZmVyLCBzcGhlcmljYWxIYXJtb25pY3NCYXNlLCBzcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzUGVyU3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCA5OyBzKyspIHNoT3V0W3NdID0gdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZSQzAgKyBzXSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCAxNTsgcysrKSBzaE91dFtzICsgOV0gPSB0YXJnZXRTcGxhdFtPRkZTRVRfRlJDOSArIHNdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VudGVyID0gbmV3IFVpbnQxNkFycmF5KHRlbXBDZW50ZXJCdWZmZXIsIDAsIFNwbGF0QnVmZmVyLkNlbnRlckNvbXBvbmVudENvdW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdCA9IG5ldyBVaW50MTZBcnJheSh0ZW1wUm90YXRpb25CdWZmZXIsIDAsIFNwbGF0QnVmZmVyLlJvdGF0aW9uQ29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBuZXcgVWludDE2QXJyYXkodGVtcFNjYWxlQnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5TY2FsZUNvbXBvbmVudENvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICByb3Quc2V0KFt0b0hhbGZGbG9hdCh0ZW1wUm90LngpLCB0b0hhbGZGbG9hdCh0ZW1wUm90LnkpLCB0b0hhbGZGbG9hdCh0ZW1wUm90LnopLCB0b0hhbGZGbG9hdCh0ZW1wUm90LncpXSk7XHJcbiAgICAgICAgICAgICAgICBzY2FsZS5zZXQoW3RvSGFsZkZsb2F0KHRlbXBTY2FsZS54KSwgdG9IYWxmRmxvYXQodGVtcFNjYWxlLnkpLCB0b0hhbGZGbG9hdCh0ZW1wU2NhbGUueildKTtcclxuXHJcbiAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXJEZWx0YS5zZXQodGFyZ2V0U3BsYXRbT0ZGU0VUX1hdLCB0YXJnZXRTcGxhdFtPRkZTRVRfWV0sIHRhcmdldFNwbGF0W09GRlNFVF9aXSkuc3ViKGJ1Y2tldENlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXJEZWx0YS54ID0gY29tcHJlc3NQb3NpdGlvbk9mZnNldChidWNrZXRDZW50ZXJEZWx0YS54LCBjb21wcmVzc2lvblNjYWxlRmFjdG9yLCBjb21wcmVzc2lvblNjYWxlUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyRGVsdGEueSA9IGNvbXByZXNzUG9zaXRpb25PZmZzZXQoYnVja2V0Q2VudGVyRGVsdGEueSwgY29tcHJlc3Npb25TY2FsZUZhY3RvciwgY29tcHJlc3Npb25TY2FsZVJhbmdlKTtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlckRlbHRhLnogPSBjb21wcmVzc1Bvc2l0aW9uT2Zmc2V0KGJ1Y2tldENlbnRlckRlbHRhLnosIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IsIGNvbXByZXNzaW9uU2NhbGVSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIuc2V0KFtidWNrZXRDZW50ZXJEZWx0YS54LCBidWNrZXRDZW50ZXJEZWx0YS55LCBidWNrZXRDZW50ZXJEZWx0YS56XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBTSEFycmF5VHlwZSA9IGNvbXByZXNzaW9uTGV2ZWwgPT09IDEgPyBVaW50MTZBcnJheSA6IFVpbnQ4QXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZXNQZXJTSENvbXBvbmVudCA9IGNvbXByZXNzaW9uTGV2ZWwgPT09IDEgPyAyIDogMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaE91dCA9IG5ldyBTSEFycmF5VHlwZSh0ZW1wU0hCdWZmZXIsIDAsIHNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNQZXJTcGxhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgOTsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNWYWwgPSB0YXJnZXRTcGxhdFtPRkZTRVRfRlJDMCArIHNdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaE91dFtzXSA9IGNvbXByZXNzaW9uTGV2ZWwgPT09IDEgPyB0b0hhbGZGbG9hdChzcmNWYWwpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VaW50OChzcmNWYWwsIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLCBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVncmVlMUJ5dGVDb3VudCA9IDkgKiBieXRlc1BlclNIQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5QmV0d2VlbkJ1ZmZlcnMoc2hPdXQuYnVmZmVyLCAwLCBzZWN0aW9uQnVmZmVyLCBzcGhlcmljYWxIYXJtb25pY3NCYXNlLCBkZWdyZWUxQnl0ZUNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IDE1OyBzKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNWYWwgPSB0YXJnZXRTcGxhdFtPRkZTRVRfRlJDOSArIHNdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hPdXRbcyArIDldID0gY29tcHJlc3Npb25MZXZlbCA9PT0gMSA/IHRvSGFsZkZsb2F0KHNyY1ZhbCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVWludDgoc3JjVmFsLCBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiwgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weUJldHdlZW5CdWZmZXJzKHNoT3V0LmJ1ZmZlciwgZGVncmVlMUJ5dGVDb3VudCwgc2VjdGlvbkJ1ZmZlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NCYXNlICsgZGVncmVlMUJ5dGVDb3VudCwgMTUgKiBieXRlc1BlclNIQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb3B5QmV0d2VlbkJ1ZmZlcnMoY2VudGVyLmJ1ZmZlciwgMCwgc2VjdGlvbkJ1ZmZlciwgY2VudGVyQmFzZSwgNik7XHJcbiAgICAgICAgICAgICAgICBjb3B5QmV0d2VlbkJ1ZmZlcnMoc2NhbGUuYnVmZmVyLCAwLCBzZWN0aW9uQnVmZmVyLCBzY2FsZUJhc2UsIDYpO1xyXG4gICAgICAgICAgICAgICAgY29weUJldHdlZW5CdWZmZXJzKHJvdC5idWZmZXIsIDAsIHNlY3Rpb25CdWZmZXIsIHJvdGF0aW9uQmFzZSwgOCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJnYmEgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkodGVtcENvbG9yQnVmZmVyLCAwLCA0KTtcclxuICAgICAgICAgICAgcmdiYS5zZXQoW3RhcmdldFNwbGF0W09GRlNFVF9GREMwXSB8fCAwLCB0YXJnZXRTcGxhdFtPRkZTRVRfRkRDMV0gfHwgMCwgdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZEQzJdIHx8IDBdKTtcclxuICAgICAgICAgICAgcmdiYVszXSA9IHRhcmdldFNwbGF0W09GRlNFVF9PUEFDSVRZXSB8fCAwO1xyXG5cclxuICAgICAgICAgICAgY29weUJldHdlZW5CdWZmZXJzKHJnYmEuYnVmZmVyLCAwLCBzZWN0aW9uQnVmZmVyLCBjb2xvckJhc2UsIDQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIHN0YXRpYyBnZW5lcmF0ZUZyb21VbmNvbXByZXNzZWRTcGxhdEFycmF5cyhzcGxhdEFycmF5cywgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUsIG9wdGlvbnMgPSBbXSkge1xyXG5cclxuICAgICAgICBsZXQgc2hEZWdyZWUgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHNhID0gMDsgc2EgPCBzcGxhdEFycmF5cy5sZW5ndGg7IHNhICsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QXJyYXkgPSBzcGxhdEFycmF5c1tzYV07XHJcbiAgICAgICAgICAgIHNoRGVncmVlID0gTWF0aC5tYXgoc3BsYXRBcnJheS5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNoRGVncmVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuICAgICAgICBsZXQgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHNhID0gMDsgc2EgPCBzcGxhdEFycmF5cy5sZW5ndGg7IHNhICsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QXJyYXkgPSBzcGxhdEFycmF5c1tzYV07XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRBcnJheS5zcGxhdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0ID0gc3BsYXRBcnJheS5zcGxhdHNbaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzYyA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULkZSQzA7IHNjIDwgVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuRlJDMjMgJiYgc2MgPCBzcGxhdC5sZW5ndGg7IHNjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmIHx8IHNwbGF0W3NjXSA8IG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gc3BsYXRbc2NdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmIHx8IHNwbGF0W3NjXSA+IG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gc3BsYXRbc2NdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiB8fCAtRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZTtcclxuICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmIHx8IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgYnl0ZXNQZXJTcGxhdCB9ID0gU3BsYXRCdWZmZXIuY2FsY3VsYXRlQ29tcG9uZW50U3RvcmFnZShjb21wcmVzc2lvbkxldmVsLCBzaERlZ3JlZSk7XHJcbiAgICAgICAgY29uc3QgY29tcHJlc3Npb25TY2FsZVJhbmdlID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uU2NhbGVSYW5nZTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkJ1ZmZlcnMgPSBbXTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyQnVmZmVycyA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbFNwbGF0Q291bnQgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzYSA9IDA7IHNhIDwgc3BsYXRBcnJheXMubGVuZ3RoOyBzYSArKykge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEFycmF5ID0gc3BsYXRBcnJheXNbc2FdO1xyXG4gICAgICAgICAgICBjb25zdCB2YWxpZFNwbGF0cyA9IG5ldyBVbmNvbXByZXNzZWRTcGxhdEFycmF5KHNoRGVncmVlKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdEFycmF5LnNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0U3BsYXQgPSBzcGxhdEFycmF5LnNwbGF0c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICgodGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuT1BBQ0lUWV0gfHwgMCkgPj0gbWluaW11bUFscGhhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRTcGxhdHMuYWRkU3BsYXQodGFyZ2V0U3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uT3B0aW9ucyA9IG9wdGlvbnNbc2FdIHx8IHt9O1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uQmxvY2tTaXplID0gKHNlY3Rpb25PcHRpb25zLmJsb2NrU2l6ZUZhY3RvciB8fCAxKSAqIChibG9ja1NpemUgfHwgU3BsYXRCdWZmZXIuQnVja2V0QmxvY2tTaXplKTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkJ1Y2tldFNpemUgPSBNYXRoLmNlaWwoKHNlY3Rpb25PcHRpb25zLmJ1Y2tldFNpemVGYWN0b3IgfHwgMSkgKiAoYnVja2V0U2l6ZSB8fCBTcGxhdEJ1ZmZlci5CdWNrZXRTaXplKSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRJbmZvID0gU3BsYXRCdWZmZXIuY29tcHV0ZUJ1Y2tldHNGb3JVbmNvbXByZXNzZWRTcGxhdEFycmF5KHZhbGlkU3BsYXRzLCBzZWN0aW9uQmxvY2tTaXplLCBzZWN0aW9uQnVja2V0U2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxCdWNrZXRDb3VudCA9IGJ1Y2tldEluZm8uZnVsbEJ1Y2tldHMubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsbHlGdWxsQnVja2V0TGVuZ3RocyA9IGJ1Y2tldEluZm8ucGFydGlhbGx5RnVsbEJ1Y2tldHMubWFwKChidWNrZXQpID0+IGJ1Y2tldC5zcGxhdHMubGVuZ3RoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQgPSBwYXJ0aWFsbHlGdWxsQnVja2V0TGVuZ3Rocy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldHMgPSBbLi4uYnVja2V0SW5mby5mdWxsQnVja2V0cywgLi4uYnVja2V0SW5mby5wYXJ0aWFsbHlGdWxsQnVja2V0c107XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uRGF0YVNpemVCeXRlcyA9IHZhbGlkU3BsYXRzLnNwbGF0cy5sZW5ndGggKiBieXRlc1BlclNwbGF0O1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRNZXRhRGF0YVNpemVCeXRlcyA9IHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50ICogNDtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0RGF0YUJ5dGVzID0gY29tcHJlc3Npb25MZXZlbCA+PSAxID8gYnVja2V0cy5sZW5ndGggKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5CdWNrZXRTdG9yYWdlU2l6ZUJ5dGVzICsgYnVja2V0TWV0YURhdGFTaXplQnl0ZXMgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uU2l6ZUJ5dGVzID0gc2VjdGlvbkRhdGFTaXplQnl0ZXMgKyBidWNrZXREYXRhQnl0ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25CdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoc2VjdGlvblNpemVCeXRlcyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb21wcmVzc2lvblNjYWxlRmFjdG9yID0gY29tcHJlc3Npb25TY2FsZVJhbmdlIC8gKHNlY3Rpb25CbG9ja1NpemUgKiAwLjUpO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRDZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IG91dFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGJ1Y2tldHMubGVuZ3RoOyBiKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNbYl07XHJcbiAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXIuZnJvbUFycmF5KGJ1Y2tldC5jZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWNrZXQuc3BsYXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJvdyA9IGJ1Y2tldC5zcGxhdHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0U3BsYXQgPSB2YWxpZFNwbGF0cy5zcGxhdHNbcm93XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJPZmZzZXQgPSBidWNrZXREYXRhQnl0ZXMgKyBvdXRTcGxhdENvdW50ICogYnl0ZXNQZXJTcGxhdDtcclxuICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZVNwbGF0RGF0YVRvU2VjdGlvbkJ1ZmZlcih0YXJnZXRTcGxhdCwgc2VjdGlvbkJ1ZmZlciwgYnVmZmVyT2Zmc2V0LCBjb21wcmVzc2lvbkxldmVsLCBzaERlZ3JlZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXIsIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IsIGNvbXByZXNzaW9uU2NhbGVSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiwgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFNwbGF0Q291bnQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0b3RhbFNwbGF0Q291bnQgKz0gb3V0U3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb21wcmVzc2lvbkxldmVsID49IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldE1ldGFEYXRhQXJyYXkgPSBuZXcgVWludDMyQXJyYXkoc2VjdGlvbkJ1ZmZlciwgMCwgcGFydGlhbGx5RnVsbEJ1Y2tldExlbmd0aHMubGVuZ3RoICogNCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBwZmIgPSAwOyBwZmIgPCBwYXJ0aWFsbHlGdWxsQnVja2V0TGVuZ3Rocy5sZW5ndGg7IHBmYiArKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldE1ldGFEYXRhQXJyYXlbcGZiXSA9IHBhcnRpYWxseUZ1bGxCdWNrZXRMZW5ndGhzW3BmYl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXRBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoc2VjdGlvbkJ1ZmZlciwgYnVja2V0TWV0YURhdGFTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0cy5sZW5ndGggKiBTcGxhdEJ1ZmZlci5CdWNrZXRTdG9yYWdlU2l6ZUZsb2F0cyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGJ1Y2tldHMubGVuZ3RoOyBiKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidWNrZXQgPSBidWNrZXRzW2JdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2UgPSBiICogMztcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXRBcnJheVtiYXNlXSA9IGJ1Y2tldC5jZW50ZXJbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0QXJyYXlbYmFzZSArIDFdID0gYnVja2V0LmNlbnRlclsxXTtcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXRBcnJheVtiYXNlICsgMl0gPSBidWNrZXQuY2VudGVyWzJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNlY3Rpb25CdWZmZXJzLnB1c2goc2VjdGlvbkJ1ZmZlcik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMpO1xyXG4gICAgICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZVNlY3Rpb25IZWFkZXJUb0J1ZmZlcih7XHJcbiAgICAgICAgICAgICAgICBtYXhTcGxhdENvdW50OiBvdXRTcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgc3BsYXRDb3VudDogb3V0U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldFNpemU6IHNlY3Rpb25CdWNrZXRTaXplLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0Q291bnQ6IGJ1Y2tldHMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0QmxvY2tTaXplOiBzZWN0aW9uQmxvY2tTaXplLFxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3Npb25TY2FsZVJhbmdlOiBjb21wcmVzc2lvblNjYWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlU2l6ZUJ5dGVzOiBzZWN0aW9uU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgZnVsbEJ1Y2tldENvdW50OiBmdWxsQnVja2V0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudDogcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU6IHNoRGVncmVlXHJcbiAgICAgICAgICAgIH0sIGNvbXByZXNzaW9uTGV2ZWwsIHNlY3Rpb25IZWFkZXJCdWZmZXIsIDApO1xyXG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyQnVmZmVycy5wdXNoKHNlY3Rpb25IZWFkZXJCdWZmZXIpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzZWN0aW9uc0N1bXVsYXRpdmVTaXplQnl0ZXMgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHNlY3Rpb25CdWZmZXIgb2Ygc2VjdGlvbkJ1ZmZlcnMpIHNlY3Rpb25zQ3VtdWxhdGl2ZVNpemVCeXRlcyArPSBzZWN0aW9uQnVmZmVyLmJ5dGVMZW5ndGg7XHJcbiAgICAgICAgY29uc3QgdW5pZmllZEJ1ZmZlclNpemUgPSBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAqIHNlY3Rpb25CdWZmZXJzLmxlbmd0aCArIHNlY3Rpb25zQ3VtdWxhdGl2ZVNpemVCeXRlcztcclxuICAgICAgICBjb25zdCB1bmlmaWVkQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHVuaWZpZWRCdWZmZXJTaXplKTtcclxuXHJcbiAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVIZWFkZXJUb0J1ZmZlcih7XHJcbiAgICAgICAgICAgIHZlcnNpb25NYWpvcjogMCxcclxuICAgICAgICAgICAgdmVyc2lvbk1pbm9yOiAxLFxyXG4gICAgICAgICAgICBtYXhTZWN0aW9uQ291bnQ6IHNlY3Rpb25CdWZmZXJzLmxlbmd0aCxcclxuICAgICAgICAgICAgc2VjdGlvbkNvdW50OiBzZWN0aW9uQnVmZmVycy5sZW5ndGgsXHJcbiAgICAgICAgICAgIG1heFNwbGF0Q291bnQ6IHRvdGFsU3BsYXRDb3VudCxcclxuICAgICAgICAgICAgc3BsYXRDb3VudDogdG90YWxTcGxhdENvdW50LFxyXG4gICAgICAgICAgICBjb21wcmVzc2lvbkxldmVsOiBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICBzY2VuZUNlbnRlcjogc2NlbmVDZW50ZXIsXHJcbiAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmOiBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZixcclxuICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmY6IG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmXHJcbiAgICAgICAgfSwgdW5pZmllZEJ1ZmZlcik7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50VW5pZmllZEJhc2UgPSBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgZm9yIChsZXQgc2VjdGlvbkhlYWRlckJ1ZmZlciBvZiBzZWN0aW9uSGVhZGVyQnVmZmVycykge1xyXG4gICAgICAgICAgICBuZXcgVWludDhBcnJheSh1bmlmaWVkQnVmZmVyLCBjdXJyZW50VW5pZmllZEJhc2UsIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMpLnNldChuZXcgVWludDhBcnJheShzZWN0aW9uSGVhZGVyQnVmZmVyKSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRVbmlmaWVkQmFzZSArPSBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgc2VjdGlvbkJ1ZmZlciBvZiBzZWN0aW9uQnVmZmVycykge1xyXG4gICAgICAgICAgICBuZXcgVWludDhBcnJheSh1bmlmaWVkQnVmZmVyLCBjdXJyZW50VW5pZmllZEJhc2UsIHNlY3Rpb25CdWZmZXIuYnl0ZUxlbmd0aCkuc2V0KG5ldyBVaW50OEFycmF5KHNlY3Rpb25CdWZmZXIpKTtcclxuICAgICAgICAgICAgY3VycmVudFVuaWZpZWRCYXNlICs9IHNlY3Rpb25CdWZmZXIuYnl0ZUxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gbmV3IFNwbGF0QnVmZmVyKHVuaWZpZWRCdWZmZXIpO1xyXG4gICAgICAgIHJldHVybiBzcGxhdEJ1ZmZlcjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29tcHV0ZUJ1Y2tldHNGb3JVbmNvbXByZXNzZWRTcGxhdEFycmF5KHNwbGF0QXJyYXksIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSkge1xyXG4gICAgICAgIGxldCBzcGxhdENvdW50ID0gc3BsYXRBcnJheS5zcGxhdENvdW50O1xyXG4gICAgICAgIGNvbnN0IGhhbGZCbG9ja1NpemUgPSBibG9ja1NpemUgLyAyLjA7XHJcblxyXG4gICAgICAgIGNvbnN0IG1pbiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgbWF4ID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0U3BsYXQgPSBzcGxhdEFycmF5LnNwbGF0c1tpXTtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gW3RhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlhdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5aXV07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGNlbnRlclswXSA8IG1pbi54KSBtaW4ueCA9IGNlbnRlclswXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgY2VudGVyWzBdID4gbWF4LngpIG1heC54ID0gY2VudGVyWzBdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBjZW50ZXJbMV0gPCBtaW4ueSkgbWluLnkgPSBjZW50ZXJbMV07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGNlbnRlclsxXSA+IG1heC55KSBtYXgueSA9IGNlbnRlclsxXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgY2VudGVyWzJdIDwgbWluLnopIG1pbi56ID0gY2VudGVyWzJdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBjZW50ZXJbMl0gPiBtYXgueikgbWF4LnogPSBjZW50ZXJbMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkaW1lbnNpb25zID0gbmV3IFZlY3RvcjMoKS5jb3B5KG1heCkuc3ViKG1pbik7XHJcbiAgICAgICAgY29uc3QgeUJsb2NrcyA9IE1hdGguY2VpbChkaW1lbnNpb25zLnkgLyBibG9ja1NpemUpO1xyXG4gICAgICAgIGNvbnN0IHpCbG9ja3MgPSBNYXRoLmNlaWwoZGltZW5zaW9ucy56IC8gYmxvY2tTaXplKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmxvY2tDZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxCdWNrZXRzID0gW107XHJcbiAgICAgICAgY29uc3QgcGFydGlhbGx5RnVsbEJ1Y2tldHMgPSB7fTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0U3BsYXQgPSBzcGxhdEFycmF5LnNwbGF0c1tpXTtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gW3RhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlhdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5aXV07XHJcbiAgICAgICAgICAgIGNvbnN0IHhCbG9jayA9IE1hdGguZmxvb3IoKGNlbnRlclswXSAtIG1pbi54KSAvIGJsb2NrU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHlCbG9jayA9IE1hdGguZmxvb3IoKGNlbnRlclsxXSAtIG1pbi55KSAvIGJsb2NrU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHpCbG9jayA9IE1hdGguZmxvb3IoKGNlbnRlclsyXSAtIG1pbi56KSAvIGJsb2NrU2l6ZSk7XHJcblxyXG4gICAgICAgICAgICBibG9ja0NlbnRlci54ID0geEJsb2NrICogYmxvY2tTaXplICsgbWluLnggKyBoYWxmQmxvY2tTaXplO1xyXG4gICAgICAgICAgICBibG9ja0NlbnRlci55ID0geUJsb2NrICogYmxvY2tTaXplICsgbWluLnkgKyBoYWxmQmxvY2tTaXplO1xyXG4gICAgICAgICAgICBibG9ja0NlbnRlci56ID0gekJsb2NrICogYmxvY2tTaXplICsgbWluLnogKyBoYWxmQmxvY2tTaXplO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYnVja2V0SWQgPSB4QmxvY2sgKiAoeUJsb2NrcyAqIHpCbG9ja3MpICsgeUJsb2NrICogekJsb2NrcyArIHpCbG9jaztcclxuICAgICAgICAgICAgbGV0IGJ1Y2tldCA9IHBhcnRpYWxseUZ1bGxCdWNrZXRzW2J1Y2tldElkXTtcclxuICAgICAgICAgICAgaWYgKCFidWNrZXQpIHtcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxseUZ1bGxCdWNrZXRzW2J1Y2tldElkXSA9IGJ1Y2tldCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnc3BsYXRzJzogW10sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NlbnRlcic6IGJsb2NrQ2VudGVyLnRvQXJyYXkoKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnVja2V0LnNwbGF0cy5wdXNoKGkpO1xyXG4gICAgICAgICAgICBpZiAoYnVja2V0LnNwbGF0cy5sZW5ndGggPj0gYnVja2V0U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgZnVsbEJ1Y2tldHMucHVzaChidWNrZXQpO1xyXG4gICAgICAgICAgICAgICAgcGFydGlhbGx5RnVsbEJ1Y2tldHNbYnVja2V0SWRdID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcGFydGlhbGx5RnVsbEJ1Y2tldEFycmF5ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgYnVja2V0SWQgaW4gcGFydGlhbGx5RnVsbEJ1Y2tldHMpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd24ocGFydGlhbGx5RnVsbEJ1Y2tldHMsIGJ1Y2tldElkKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0ID0gcGFydGlhbGx5RnVsbEJ1Y2tldHNbYnVja2V0SWRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1Y2tldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxseUZ1bGxCdWNrZXRBcnJheS5wdXNoKGJ1Y2tldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdmdWxsQnVja2V0cyc6IGZ1bGxCdWNrZXRzLFxyXG4gICAgICAgICAgICAncGFydGlhbGx5RnVsbEJ1Y2tldHMnOiBwYXJ0aWFsbHlGdWxsQnVja2V0QXJyYXksXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbn0iLCIvKipcclxuICogU3BsYXRQYXJ0aXRpb25lclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqIEltcG9ydCBwYXRocyBhZGp1c3RlZCBmb3IgZ3NwbGF0LWZsYW1lLWF2YXRhciBwYWNrYWdlIHN0cnVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBTcGxhdEJ1ZmZlciB9IGZyb20gJy4vU3BsYXRCdWZmZXIuanMnO1xyXG5pbXBvcnQgeyBVbmNvbXByZXNzZWRTcGxhdEFycmF5IH0gZnJvbSAnLi9VbmNvbXByZXNzZWRTcGxhdEFycmF5LmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdFBhcnRpdGlvbmVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZWN0aW9uQ291bnQsIHNlY3Rpb25GaWx0ZXJzLCBncm91cGluZ1BhcmFtZXRlcnMsIHBhcnRpdGlvbkdlbmVyYXRvcikge1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkNvdW50ID0gc2VjdGlvbkNvdW50O1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkZpbHRlcnMgPSBzZWN0aW9uRmlsdGVycztcclxuICAgICAgICB0aGlzLmdyb3VwaW5nUGFyYW1ldGVycyA9IGdyb3VwaW5nUGFyYW1ldGVycztcclxuICAgICAgICB0aGlzLnBhcnRpdGlvbkdlbmVyYXRvciA9IHBhcnRpdGlvbkdlbmVyYXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwYXJ0aXRpb25VbmNvbXByZXNzZWRTcGxhdEFycmF5KHNwbGF0QXJyYXkpIHtcclxuICAgICAgICBsZXQgZ3JvdXBpbmdQYXJhbWV0ZXJzO1xyXG4gICAgICAgIGxldCBzZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25GaWx0ZXJzO1xyXG4gICAgICAgIGlmICh0aGlzLnBhcnRpdGlvbkdlbmVyYXRvcikge1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5wYXJ0aXRpb25HZW5lcmF0b3Ioc3BsYXRBcnJheSk7XHJcbiAgICAgICAgICAgIGdyb3VwaW5nUGFyYW1ldGVycyA9IHJlc3VsdHMuZ3JvdXBpbmdQYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICBzZWN0aW9uQ291bnQgPSByZXN1bHRzLnNlY3Rpb25Db3VudDtcclxuICAgICAgICAgICAgc2VjdGlvbkZpbHRlcnMgPSByZXN1bHRzLnNlY3Rpb25GaWx0ZXJzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdyb3VwaW5nUGFyYW1ldGVycyA9IHRoaXMuZ3JvdXBpbmdQYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICBzZWN0aW9uQ291bnQgPSB0aGlzLnNlY3Rpb25Db3VudDtcclxuICAgICAgICAgICAgc2VjdGlvbkZpbHRlcnMgPSB0aGlzLnNlY3Rpb25GaWx0ZXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbmV3QXJyYXlzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzZWN0aW9uQ291bnQ7IHMrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uU3BsYXRzID0gbmV3IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc3BsYXRBcnJheS5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uRmlsdGVyID0gc2VjdGlvbkZpbHRlcnNbc107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRBcnJheS5zcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWN0aW9uRmlsdGVyKGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvblNwbGF0cy5hZGRTcGxhdChzcGxhdEFycmF5LnNwbGF0c1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmV3QXJyYXlzLnB1c2goc2VjdGlvblNwbGF0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNwbGF0QXJyYXlzOiBuZXdBcnJheXMsXHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGdyb3VwaW5nUGFyYW1ldGVyc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFN0YW5kYXJkUGFydGl0aW9uZXIocGFydGl0aW9uU2l6ZSA9IDAsIHNjZW5lQ2VudGVyID0gbmV3IFZlY3RvcjMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrU2l6ZSA9IFNwbGF0QnVmZmVyLkJ1Y2tldEJsb2NrU2l6ZSwgYnVja2V0U2l6ZSA9IFNwbGF0QnVmZmVyLkJ1Y2tldFNpemUpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGFydGl0aW9uR2VuZXJhdG9yID0gKHNwbGF0QXJyYXkpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IE9GRlNFVF9YID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWDtcclxuICAgICAgICAgICAgY29uc3QgT0ZGU0VUX1kgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ZO1xyXG4gICAgICAgICAgICBjb25zdCBPRkZTRVRfWiA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlo7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFydGl0aW9uU2l6ZSA8PSAwKSBwYXJ0aXRpb25TaXplID0gc3BsYXRBcnJheS5zcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICAgICAgY29uc3QgY2xhbXBEaXN0YW5jZSA9IDAuNTtcclxuICAgICAgICAgICAgY29uc3QgY2xhbXBQb2ludCA9IChwb2ludCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9pbnQueCA9IE1hdGguZmxvb3IocG9pbnQueCAvIGNsYW1wRGlzdGFuY2UpICogY2xhbXBEaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHBvaW50LnkgPSBNYXRoLmZsb29yKHBvaW50LnkgLyBjbGFtcERpc3RhbmNlKSAqIGNsYW1wRGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBwb2ludC56ID0gTWF0aC5mbG9vcihwb2ludC56IC8gY2xhbXBEaXN0YW5jZSkgKiBjbGFtcERpc3RhbmNlO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzcGxhdEFycmF5LnNwbGF0cy5mb3JFYWNoKChzcGxhdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnNldChzcGxhdFtPRkZTRVRfWF0sIHNwbGF0W09GRlNFVF9ZXSwgc3BsYXRbT0ZGU0VUX1pdKS5zdWIoc2NlbmVDZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgY2xhbXBQb2ludChjZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgc3BsYXQuY2VudGVyRGlzdCA9IGNlbnRlci5sZW5ndGhTcSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3BsYXRBcnJheS5zcGxhdHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbnRlckFEaXN0ID0gYS5jZW50ZXJEaXN0O1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbnRlckJEaXN0ID0gYi5jZW50ZXJEaXN0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGNlbnRlckFEaXN0ID4gY2VudGVyQkRpc3QpIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkZpbHRlcnMgPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBpbmdQYXJhbWV0ZXJzID0gW107XHJcbiAgICAgICAgICAgIHBhcnRpdGlvblNpemUgPSBNYXRoLm1pbihzcGxhdEFycmF5LnNwbGF0Q291bnQsIHBhcnRpdGlvblNpemUpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXRpdGlvbkNvdW50ID0gTWF0aC5jZWlsKHNwbGF0QXJyYXkuc3BsYXRDb3VudCAvIHBhcnRpdGlvblNpemUpO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFN0YXJ0U3BsYXQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGl0aW9uQ291bnQ7IGkgKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGFydFNwbGF0ID0gY3VycmVudFN0YXJ0U3BsYXQ7XHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uRmlsdGVycy5wdXNoKChzcGxhdEluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNwbGF0SW5kZXggPj0gc3RhcnRTcGxhdCAmJiBzcGxhdEluZGV4IDwgc3RhcnRTcGxhdCArIHBhcnRpdGlvblNpemU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGdyb3VwaW5nUGFyYW1ldGVycy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAnYmxvY2tzU2l6ZSc6IGJsb2NrU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAnYnVja2V0U2l6ZSc6IGJ1Y2tldFNpemUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGFydFNwbGF0ICs9IHBhcnRpdGlvblNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICdzZWN0aW9uQ291bnQnOiBzZWN0aW9uRmlsdGVycy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uRmlsdGVycyxcclxuICAgICAgICAgICAgICAgIGdyb3VwaW5nUGFyYW1ldGVyc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTcGxhdFBhcnRpdGlvbmVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHBhcnRpdGlvbkdlbmVyYXRvcik7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRCdWZmZXJHZW5lcmF0b3JcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gdGhlIG9yaWdpbmFsLlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgU3BsYXRCdWZmZXIgfSBmcm9tICcuL1NwbGF0QnVmZmVyLmpzJztcclxuaW1wb3J0IHsgU3BsYXRQYXJ0aXRpb25lciB9IGZyb20gJy4vU3BsYXRQYXJ0aXRpb25lci5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRCdWZmZXJHZW5lcmF0b3Ige1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNwbGF0UGFydGl0aW9uZXIsIGFscGhhUmVtb3ZhbFRocmVzaG9sZCwgY29tcHJlc3Npb25MZXZlbCwgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUpIHtcclxuICAgICAgICB0aGlzLnNwbGF0UGFydGl0aW9uZXIgPSBzcGxhdFBhcnRpdGlvbmVyO1xyXG4gICAgICAgIHRoaXMuYWxwaGFSZW1vdmFsVGhyZXNob2xkID0gYWxwaGFSZW1vdmFsVGhyZXNob2xkO1xyXG4gICAgICAgIHRoaXMuY29tcHJlc3Npb25MZXZlbCA9IGNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uU2l6ZSA9IHNlY3Rpb25TaXplO1xyXG4gICAgICAgIHRoaXMuc2NlbmVDZW50ZXIgPSBzY2VuZUNlbnRlciA/IG5ldyBWZWN0b3IzKCkuY29weShzY2VuZUNlbnRlcikgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBibG9ja1NpemU7XHJcbiAgICAgICAgdGhpcy5idWNrZXRTaXplID0gYnVja2V0U2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUZyb21VbmNvbXByZXNzZWRTcGxhdEFycmF5KHNwbGF0QXJyYXkpIHtcclxuICAgICAgICBjb25zdCBwYXJ0aXRpb25SZXN1bHRzID0gdGhpcy5zcGxhdFBhcnRpdGlvbmVyLnBhcnRpdGlvblVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc3BsYXRBcnJheSk7XHJcbiAgICAgICAgcmV0dXJuIFNwbGF0QnVmZmVyLmdlbmVyYXRlRnJvbVVuY29tcHJlc3NlZFNwbGF0QXJyYXlzKHBhcnRpdGlvblJlc3VsdHMuc3BsYXRBcnJheXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxwaGFSZW1vdmFsVGhyZXNob2xkLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVDZW50ZXIsIHRoaXMuYmxvY2tTaXplLCB0aGlzLmJ1Y2tldFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpdGlvblJlc3VsdHMucGFyYW1ldGVycyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFN0YW5kYXJkR2VuZXJhdG9yKGFscGhhUmVtb3ZhbFRocmVzaG9sZCA9IDEsIGNvbXByZXNzaW9uTGV2ZWwgPSAxLCBzZWN0aW9uU2l6ZSA9IDAsIHNjZW5lQ2VudGVyID0gbmV3IFZlY3RvcjMoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja1NpemUgPSBTcGxhdEJ1ZmZlci5CdWNrZXRCbG9ja1NpemUsIGJ1Y2tldFNpemUgPSBTcGxhdEJ1ZmZlci5CdWNrZXRTaXplKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRQYXJ0aXRpb25lciA9IFNwbGF0UGFydGl0aW9uZXIuZ2V0U3RhbmRhcmRQYXJ0aXRpb25lcihzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTcGxhdEJ1ZmZlckdlbmVyYXRvcihzcGxhdFBhcnRpdGlvbmVyLCBhbHBoYVJlbW92YWxUaHJlc2hvbGQsIGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogUGx5UGFyc2VyVXRpbHMgYW5kIHJlbGF0ZWQgY29uc3RhbnRzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFNpbXBsaWZpZWQgZm9yIEZMQU1FIGF2YXRhciAtIG9ubHkgc3VwcG9ydHMgSU5SSUFWMSBmb3JtYXQuXHJcbiAqL1xyXG5cclxuLy8gUGx5IGZvcm1hdCB0eXBlcyAoc2ltcGxpZmllZCAtIEZMQU1FIHVzZXMgSU5SSUFWMSlcclxuZXhwb3J0IGNvbnN0IFBseUZvcm1hdCA9IHtcclxuICAgICdJTlJJQVYxJzogMFxyXG59O1xyXG5cclxuLy8gRmllbGQgc2l6ZSBJRHNcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkRG91YmxlID0gMDtcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkSW50ID0gMTtcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkVUludCA9IDI7XHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZEZsb2F0ID0gMztcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkU2hvcnQgPSA0O1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWRVU2hvcnQgPSA1O1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWRVQ2hhciA9IDY7XHJcblxyXG5leHBvcnQgY29uc3QgRmllbGRTaXplU3RyaW5nTWFwID0ge1xyXG4gICAgJ2RvdWJsZSc6IEZpZWxkU2l6ZUlkRG91YmxlLFxyXG4gICAgJ2ludCc6IEZpZWxkU2l6ZUlkSW50LFxyXG4gICAgJ3VpbnQnOiBGaWVsZFNpemVJZFVJbnQsXHJcbiAgICAnZmxvYXQnOiBGaWVsZFNpemVJZEZsb2F0LFxyXG4gICAgJ3Nob3J0JzogRmllbGRTaXplSWRTaG9ydCxcclxuICAgICd1c2hvcnQnOiBGaWVsZFNpemVJZFVTaG9ydCxcclxuICAgICd1Y2hhcic6IEZpZWxkU2l6ZUlkVUNoYXIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgRmllbGRTaXplID0ge1xyXG4gICAgW0ZpZWxkU2l6ZUlkRG91YmxlXTogOCxcclxuICAgIFtGaWVsZFNpemVJZEludF06IDQsXHJcbiAgICBbRmllbGRTaXplSWRVSW50XTogNCxcclxuICAgIFtGaWVsZFNpemVJZEZsb2F0XTogNCxcclxuICAgIFtGaWVsZFNpemVJZFNob3J0XTogMixcclxuICAgIFtGaWVsZFNpemVJZFVTaG9ydF06IDIsXHJcbiAgICBbRmllbGRTaXplSWRVQ2hhcl06IDEsXHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgUGx5UGFyc2VyVXRpbHMge1xyXG5cclxuICAgIHN0YXRpYyBIZWFkZXJFbmRUb2tlbiA9ICdlbmRfaGVhZGVyJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVTZWN0aW9uSGVhZGVyKGhlYWRlckxpbmVzLCBmaWVsZE5hbWVJZE1hcCwgaGVhZGVyU3RhcnRMaW5lID0gMCkge1xyXG5cclxuICAgICAgICBjb25zdCBleHRyYWN0ZWRMaW5lcyA9IFtdO1xyXG5cclxuICAgICAgICBsZXQgcHJvY2Vzc2luZ1NlY3Rpb24gPSBmYWxzZTtcclxuICAgICAgICBsZXQgaGVhZGVyRW5kTGluZSA9IC0xO1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IGVuZE9mSGVhZGVyID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25OYW1lID0gbnVsbDtcclxuXHJcbiAgICAgICAgY29uc3QgZmllbGRJZHMgPSBbXTtcclxuICAgICAgICBjb25zdCBmaWVsZFR5cGVzID0gW107XHJcbiAgICAgICAgY29uc3QgYWxsRmllbGROYW1lcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHVzZWRGaWVsZE5hbWVzID0gW107XHJcbiAgICAgICAgY29uc3QgZmllbGRUeXBlc0J5TmFtZSA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gaGVhZGVyU3RhcnRMaW5lOyBpIDwgaGVhZGVyTGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGhlYWRlckxpbmVzW2ldLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZWxlbWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2luZ1NlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJFbmRMaW5lLS07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdTZWN0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJTdGFydExpbmUgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckVuZExpbmUgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVDb21wb25lbnRzID0gbGluZS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWxpZENvbXBvbmVudHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmVDb21wb25lbnQgb2YgbGluZUNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpbW1lZENvbXBvbmVudCA9IGxpbmVDb21wb25lbnQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJpbW1lZENvbXBvbmVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZENvbXBvbmVudHMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZENvbXBvbmVudHMgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZSA9IHRyaW1tZWRDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbGlkQ29tcG9uZW50cyA9PT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleENvdW50ID0gcGFyc2VJbnQodHJpbW1lZENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCdwcm9wZXJ0eScpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hdGNoID0gbGluZS5tYXRjaCgvKFxcdyspXFxzKyhcXHcrKVxccysoXFx3KykvKTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlU3RyID0gZmllbGRNYXRjaFsyXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE1hdGNoWzNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbEZpZWxkTmFtZXMucHVzaChmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkSWQgPSBmaWVsZE5hbWVJZE1hcFtmaWVsZE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZXNCeU5hbWVbZmllbGROYW1lXSA9IGZpZWxkVHlwZVN0cjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSBGaWVsZFNpemVTdHJpbmdNYXBbZmllbGRUeXBlU3RyXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRGaWVsZE5hbWVzLnB1c2goZmllbGROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRJZHMucHVzaChmaWVsZElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlc1tmaWVsZElkXSA9IGZpZWxkVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGxpbmUgPT09IFBseVBhcnNlclV0aWxzLkhlYWRlckVuZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBlbmRPZkhlYWRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJvY2Vzc2luZ1NlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZExpbmVzLnB1c2gobGluZSk7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJFbmRMaW5lKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkT2Zmc2V0cyA9IFtdO1xyXG4gICAgICAgIGxldCBieXRlc1BlclZlcnRleCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgZmllbGROYW1lIG9mIGFsbEZpZWxkTmFtZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gZmllbGRUeXBlc0J5TmFtZVtmaWVsZE5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093bihmaWVsZFR5cGVzQnlOYW1lLCBmaWVsZE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZElkID0gZmllbGROYW1lSWRNYXBbZmllbGROYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWVsZElkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWVsZE9mZnNldHNbZmllbGRJZF0gPSBieXRlc1BlclZlcnRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBieXRlc1BlclZlcnRleCArPSBGaWVsZFNpemVbRmllbGRTaXplU3RyaW5nTWFwW2ZpZWxkVHlwZV1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNzID0gdGhpcy5kZWNvZGVTcGhlcmljYWxIYXJtb25pY3NGcm9tU2VjdGlvbkhlYWRlcihhbGxGaWVsZE5hbWVzLCBmaWVsZE5hbWVJZE1hcCk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICdoZWFkZXJMaW5lcyc6IGV4dHJhY3RlZExpbmVzLFxyXG4gICAgICAgICAgICAnaGVhZGVyU3RhcnRMaW5lJzogaGVhZGVyU3RhcnRMaW5lLFxyXG4gICAgICAgICAgICAnaGVhZGVyRW5kTGluZSc6IGhlYWRlckVuZExpbmUsXHJcbiAgICAgICAgICAgICdmaWVsZFR5cGVzJzogZmllbGRUeXBlcyxcclxuICAgICAgICAgICAgJ2ZpZWxkSWRzJzogZmllbGRJZHMsXHJcbiAgICAgICAgICAgICdmaWVsZE9mZnNldHMnOiBmaWVsZE9mZnNldHMsXHJcbiAgICAgICAgICAgICdieXRlc1BlclZlcnRleCc6IGJ5dGVzUGVyVmVydGV4LFxyXG4gICAgICAgICAgICAndmVydGV4Q291bnQnOiB2ZXJ0ZXhDb3VudCxcclxuICAgICAgICAgICAgJ2RhdGFTaXplQnl0ZXMnOiBieXRlc1BlclZlcnRleCAqIHZlcnRleENvdW50LFxyXG4gICAgICAgICAgICAnZW5kT2ZIZWFkZXInOiBlbmRPZkhlYWRlcixcclxuICAgICAgICAgICAgJ3NlY3Rpb25OYW1lJzogc2VjdGlvbk5hbWUsXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUnOiBzcGhlcmljYWxIYXJtb25pY3MuZGVncmVlLFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzQ29lZmZpY2llbnRzUGVyQ2hhbm5lbCc6IHNwaGVyaWNhbEhhcm1vbmljcy5jb2VmZmljaWVudHNQZXJDaGFubmVsLFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlMUZpZWxkcyc6IHNwaGVyaWNhbEhhcm1vbmljcy5kZWdyZWUxRmllbGRzLFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlMkZpZWxkcyc6IHNwaGVyaWNhbEhhcm1vbmljcy5kZWdyZWUyRmllbGRzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVTcGhlcmljYWxIYXJtb25pY3NGcm9tU2VjdGlvbkhlYWRlcihmaWVsZE5hbWVzLCBmaWVsZE5hbWVJZE1hcCkge1xyXG4gICAgICAgIGxldCBzcGhlcmljYWxIYXJtb25pY3NGaWVsZENvdW50ID0gMDtcclxuICAgICAgICBsZXQgY29lZmZpY2llbnRzUGVyQ2hhbm5lbCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgZmllbGROYW1lIG9mIGZpZWxkTmFtZXMpIHtcclxuICAgICAgICAgICAgaWYgKGZpZWxkTmFtZS5zdGFydHNXaXRoKCdmX3Jlc3QnKSkgc3BoZXJpY2FsSGFybW9uaWNzRmllbGRDb3VudCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb2VmZmljaWVudHNQZXJDaGFubmVsID0gc3BoZXJpY2FsSGFybW9uaWNzRmllbGRDb3VudCAvIDM7XHJcbiAgICAgICAgbGV0IGRlZ3JlZSA9IDA7XHJcbiAgICAgICAgaWYgKGNvZWZmaWNpZW50c1BlckNoYW5uZWwgPj0gMykgZGVncmVlID0gMTtcclxuICAgICAgICBpZiAoY29lZmZpY2llbnRzUGVyQ2hhbm5lbCA+PSA4KSBkZWdyZWUgPSAyO1xyXG5cclxuICAgICAgICBsZXQgZGVncmVlMUZpZWxkcyA9IFtdO1xyXG4gICAgICAgIGxldCBkZWdyZWUyRmllbGRzID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IHJnYiA9IDA7IHJnYiA8IDM7IHJnYisrKSB7XHJcbiAgICAgICAgICAgIGlmIChkZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWdyZWUxRmllbGRzLnB1c2goZmllbGROYW1lSWRNYXBbJ2ZfcmVzdF8nICsgKGkgKyBjb2VmZmljaWVudHNQZXJDaGFubmVsICogcmdiKV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWdyZWUyRmllbGRzLnB1c2goZmllbGROYW1lSWRNYXBbJ2ZfcmVzdF8nICsgKGkgKyBjb2VmZmljaWVudHNQZXJDaGFubmVsICogcmdiICsgMyldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ2RlZ3JlZSc6IGRlZ3JlZSxcclxuICAgICAgICAgICAgJ2NvZWZmaWNpZW50c1BlckNoYW5uZWwnOiBjb2VmZmljaWVudHNQZXJDaGFubmVsLFxyXG4gICAgICAgICAgICAnZGVncmVlMUZpZWxkcyc6IGRlZ3JlZTFGaWVsZHMsXHJcbiAgICAgICAgICAgICdkZWdyZWUyRmllbGRzJzogZGVncmVlMkZpZWxkc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEhlYWRlclNlY3Rpb25OYW1lcyhoZWFkZXJMaW5lcykge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25OYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGhlYWRlckxpbmUgb2YgaGVhZGVyTGluZXMpIHtcclxuICAgICAgICAgICAgaWYgKGhlYWRlckxpbmUuc3RhcnRzV2l0aCgnZWxlbWVudCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lQ29tcG9uZW50cyA9IGhlYWRlckxpbmUuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWxpZENvbXBvbmVudHMgPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZUNvbXBvbmVudCBvZiBsaW5lQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRDb21wb25lbnQgPSBsaW5lQ29tcG9uZW50LnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJpbW1lZENvbXBvbmVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkQ29tcG9uZW50cysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRDb21wb25lbnRzID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZXMucHVzaCh0cmltbWVkQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VjdGlvbk5hbWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjaGVja1RleHRGb3JFbmRIZWFkZXIoZW5kSGVhZGVyVGVzdFRleHQpIHtcclxuICAgICAgICBpZiAoZW5kSGVhZGVyVGVzdFRleHQuaW5jbHVkZXMoUGx5UGFyc2VyVXRpbHMuSGVhZGVyRW5kVG9rZW4pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNoZWNrQnVmZmVyRm9yRW5kSGVhZGVyKGJ1ZmZlciwgc2VhcmNoT2ZzZXQsIGNodW5rU2l6ZSwgZGVjb2Rlcikge1xyXG4gICAgICAgIGNvbnN0IGVuZEhlYWRlclRlc3RDaHVuayA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgTWF0aC5tYXgoMCwgc2VhcmNoT2ZzZXQgLSBjaHVua1NpemUpLCBjaHVua1NpemUpO1xyXG4gICAgICAgIGNvbnN0IGVuZEhlYWRlclRlc3RUZXh0ID0gZGVjb2Rlci5kZWNvZGUoZW5kSGVhZGVyVGVzdENodW5rKTtcclxuICAgICAgICByZXR1cm4gUGx5UGFyc2VyVXRpbHMuY2hlY2tUZXh0Rm9yRW5kSGVhZGVyKGVuZEhlYWRlclRlc3RUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZXh0cmFjdEhlYWRlckZyb21CdWZmZXJUb1RleHQocGx5QnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG4gICAgICAgIGxldCBoZWFkZXJPZmZzZXQgPSAwO1xyXG4gICAgICAgIGxldCBoZWFkZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgY29uc3QgcmVhZENodW5rU2l6ZSA9IDEwMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKGhlYWRlck9mZnNldCArIHJlYWRDaHVua1NpemUgPj0gcGx5QnVmZmVyLmJ5dGVMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW5kIG9mIGZpbGUgcmVhY2hlZCB3aGlsZSBzZWFyY2hpbmcgZm9yIGVuZCBvZiBoZWFkZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJDaHVuayA9IG5ldyBVaW50OEFycmF5KHBseUJ1ZmZlciwgaGVhZGVyT2Zmc2V0LCByZWFkQ2h1bmtTaXplKTtcclxuICAgICAgICAgICAgaGVhZGVyVGV4dCArPSBkZWNvZGVyLmRlY29kZShoZWFkZXJDaHVuayk7XHJcbiAgICAgICAgICAgIGhlYWRlck9mZnNldCArPSByZWFkQ2h1bmtTaXplO1xyXG5cclxuICAgICAgICAgICAgaWYgKFBseVBhcnNlclV0aWxzLmNoZWNrQnVmZmVyRm9yRW5kSGVhZGVyKHBseUJ1ZmZlciwgaGVhZGVyT2Zmc2V0LCByZWFkQ2h1bmtTaXplICogMiwgZGVjb2RlcikpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGVhZGVyVGV4dDtcclxuICAgIH1cclxuXHJcbiAgICByZWFkSGVhZGVyRnJvbUJ1ZmZlcihwbHlCdWZmZXIpIHtcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcbiAgICAgICAgbGV0IGhlYWRlck9mZnNldCA9IDA7XHJcbiAgICAgICAgbGV0IGhlYWRlclRleHQgPSAnJztcclxuICAgICAgICBjb25zdCByZWFkQ2h1bmtTaXplID0gMTAwO1xyXG5cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoaGVhZGVyT2Zmc2V0ICsgcmVhZENodW5rU2l6ZSA+PSBwbHlCdWZmZXIuYnl0ZUxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmQgb2YgZmlsZSByZWFjaGVkIHdoaWxlIHNlYXJjaGluZyBmb3IgZW5kIG9mIGhlYWRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckNodW5rID0gbmV3IFVpbnQ4QXJyYXkocGx5QnVmZmVyLCBoZWFkZXJPZmZzZXQsIHJlYWRDaHVua1NpemUpO1xyXG4gICAgICAgICAgICBoZWFkZXJUZXh0ICs9IGRlY29kZXIuZGVjb2RlKGhlYWRlckNodW5rKTtcclxuICAgICAgICAgICAgaGVhZGVyT2Zmc2V0ICs9IHJlYWRDaHVua1NpemU7XHJcblxyXG4gICAgICAgICAgICBpZiAoUGx5UGFyc2VyVXRpbHMuY2hlY2tCdWZmZXJGb3JFbmRIZWFkZXIocGx5QnVmZmVyLCBoZWFkZXJPZmZzZXQsIHJlYWRDaHVua1NpemUgKiAyLCBkZWNvZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoZWFkZXJUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjb252ZXJ0SGVhZGVyVGV4dFRvTGluZXMoaGVhZGVyVGV4dCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckxpbmVzID0gaGVhZGVyVGV4dC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgY29uc3QgcHJ1bmVkTGluZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBoZWFkZXJMaW5lc1tpXS50cmltKCk7XHJcbiAgICAgICAgICAgIHBydW5lZExpbmVzLnB1c2gobGluZSk7XHJcbiAgICAgICAgICAgIGlmIChsaW5lID09PSBQbHlQYXJzZXJVdGlscy5IZWFkZXJFbmRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBydW5lZExpbmVzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBkZXRlcm1pbmVIZWFkZXJGb3JtYXRGcm9tSGVhZGVyVGV4dChfaGVhZGVyVGV4dCkge1xyXG4gICAgICAgIC8vIFNpbXBsaWZpZWQgLSBGTEFNRSBhdmF0YXJzIGFsd2F5cyB1c2UgSU5SSUFWMSBmb3JtYXRcclxuICAgICAgICByZXR1cm4gUGx5Rm9ybWF0LklOUklBVjE7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRldGVybWluZUhlYWRlckZvcm1hdEZyb21QbHlCdWZmZXIocGx5QnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVydFRleHQgPSBQbHlQYXJzZXJVdGlscy5leHRyYWN0SGVhZGVyRnJvbUJ1ZmZlclRvVGV4dChwbHlCdWZmZXIpO1xyXG4gICAgICAgIHJldHVybiBQbHlQYXJzZXJVdGlscy5kZXRlcm1pbmVIZWFkZXJGb3JtYXRGcm9tSGVhZGVyVGV4dChoZWFkZXJ0VGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlYWRWZXJ0ZXgodmVydGV4RGF0YSwgaGVhZGVyLCByb3csIGRhdGFPZmZzZXQsIGZpZWxkc1RvUmVhZCwgcmF3VmVydGV4LCBub3JtYWxpemUgPSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gcm93ICogaGVhZGVyLmJ5dGVzUGVyVmVydGV4ICsgZGF0YU9mZnNldDtcclxuICAgICAgICBjb25zdCBmaWVsZE9mZnNldHMgPSBoZWFkZXIuZmllbGRPZmZzZXRzO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZXMgPSBoZWFkZXIuZmllbGRUeXBlcztcclxuICAgICAgICBmb3IgKGxldCBmaWVsZElkIG9mIGZpZWxkc1RvUmVhZCkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSBmaWVsZFR5cGVzW2ZpZWxkSWRdO1xyXG4gICAgICAgICAgICBpZiAoZmllbGRUeXBlID09PSBGaWVsZFNpemVJZEZsb2F0KSB7XHJcbiAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldEZsb2F0MzIob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZFR5cGUgPT09IEZpZWxkU2l6ZUlkU2hvcnQpIHtcclxuICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0SW50MTYob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZFR5cGUgPT09IEZpZWxkU2l6ZUlkVVNob3J0KSB7XHJcbiAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldFVpbnQxNihvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0sIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkVHlwZSA9PT0gRmllbGRTaXplSWRJbnQpIHtcclxuICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0SW50MzIob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZFR5cGUgPT09IEZpZWxkU2l6ZUlkVUludCkge1xyXG4gICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRVaW50MzIob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWVsZFR5cGUgPT09IEZpZWxkU2l6ZUlkVUNoYXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldFVpbnQ4KG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSkgLyAyNTUuMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRVaW50OChvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBJTlJJQVYxUGx5UGFyc2VyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIEltcG9ydCBwYXRocyBhZGp1c3RlZCBmb3IgZ3NwbGF0LWZsYW1lLWF2YXRhciBwYWNrYWdlIHN0cnVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBRdWF0ZXJuaW9uIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBVbmNvbXByZXNzZWRTcGxhdEFycmF5IH0gZnJvbSAnLi4vYnVmZmVycy9VbmNvbXByZXNzZWRTcGxhdEFycmF5LmpzJztcclxuaW1wb3J0IHsgU3BsYXRCdWZmZXIgfSBmcm9tICcuLi9idWZmZXJzL1NwbGF0QnVmZmVyLmpzJztcclxuaW1wb3J0IHsgUGx5UGFyc2VyVXRpbHMgfSBmcm9tICcuL1BseVBhcnNlclV0aWxzLmpzJztcclxuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuXHJcbmNvbnN0IEJhc2VGaWVsZE5hbWVzVG9SZWFkID0gWydzY2FsZV8wJywgJ3NjYWxlXzEnLCAnc2NhbGVfMicsICdyb3RfMCcsICdyb3RfMScsICdyb3RfMicsICdyb3RfMycsICd4JywgJ3knLCAneicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmX2RjXzAnLCAnZl9kY18xJywgJ2ZfZGNfMicsICdvcGFjaXR5JywgJ3JlZCcsICdncmVlbicsICdibHVlJywgJ2ZfcmVzdF8wJ107XHJcblxyXG5jb25zdCBCYXNlRmllbGRzVG9SZWFkSW5kZXhlcyA9IEJhc2VGaWVsZE5hbWVzVG9SZWFkLm1hcCgoZSwgaSkgPT4gaSk7XHJcblxyXG5jb25zdCBbXHJcbiAgICAgICAgU0NBTEVfMCwgU0NBTEVfMSwgU0NBTEVfMiwgUk9UXzAsIFJPVF8xLCBST1RfMiwgUk9UXzMsIFgsIFksIFosIEZfRENfMCwgRl9EQ18xLCBGX0RDXzIsIE9QQUNJVFksIFJFRCwgR1JFRU4sIEJMVUUsIEZfUkVTVF8wXHJcbiAgICAgIF0gPSBCYXNlRmllbGRzVG9SZWFkSW5kZXhlcztcclxuXHJcbmV4cG9ydCBjbGFzcyBJTlJJQVYxUGx5UGFyc2VyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnBseVBhcnNlcnV0aWxzID0gbmV3IFBseVBhcnNlclV0aWxzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlSGVhZGVyTGluZXMoaGVhZGVyTGluZXMpIHtcclxuXHJcbiAgICAgICAgbGV0IHNoTGluZUNvdW50ID0gMDtcclxuICAgICAgICBoZWFkZXJMaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsaW5lLmluY2x1ZGVzKCdmX3Jlc3RfJykpIHNoTGluZUNvdW50Kys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBzaEZpZWxkc1RvUmVhZENvdW50ID0gMDtcclxuICAgICAgICBpZiAoc2hMaW5lQ291bnQgPj0gNDUpIHtcclxuICAgICAgICAgICAgc2hGaWVsZHNUb1JlYWRDb3VudCA9IDQ1O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2hMaW5lQ291bnQgPj0gMjQpIHtcclxuICAgICAgICAgICAgc2hGaWVsZHNUb1JlYWRDb3VudCA9IDI0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2hMaW5lQ291bnQgPj0gOSkge1xyXG4gICAgICAgICAgICBzaEZpZWxkc1RvUmVhZENvdW50ID0gOTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNoRmllbGRJbmRleGVzVG9NYXAgPSBBcnJheS5mcm9tKEFycmF5KE1hdGgubWF4KHNoRmllbGRzVG9SZWFkQ291bnQgLSAxLCAwKSkpO1xyXG4gICAgICAgIGxldCBzaFJlbWFpbmluZ0ZpZWxkTmFtZXNUb1JlYWQgPSBzaEZpZWxkSW5kZXhlc1RvTWFwLm1hcCgoZWxlbWVudCwgaW5kZXgpID0+IGBmX3Jlc3RfJHtpbmRleCArIDF9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZXNUb1JlYWQgPSBbLi4uQmFzZUZpZWxkTmFtZXNUb1JlYWQsIC4uLnNoUmVtYWluaW5nRmllbGROYW1lc1RvUmVhZF07XHJcbiAgICAgICAgY29uc3QgZmllbGRzVG9SZWFkSW5kZXhlcyA9IGZpZWxkTmFtZXNUb1JlYWQubWFwKChlLCBpKSA9PiBpKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmllbGROYW1lSWRNYXAgPSBmaWVsZHNUb1JlYWRJbmRleGVzLnJlZHVjZSgoYWNjLCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1tmaWVsZE5hbWVzVG9SZWFkW2VsZW1lbnRdXSA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgfSwge30pO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMucGx5UGFyc2VydXRpbHMuZGVjb2RlU2VjdGlvbkhlYWRlcihoZWFkZXJMaW5lcywgZmllbGROYW1lSWRNYXAsIDApO1xyXG4gICAgICAgIGhlYWRlci5zcGxhdENvdW50ID0gaGVhZGVyLnZlcnRleENvdW50O1xyXG4gICAgICAgIGhlYWRlci5ieXRlc1BlclNwbGF0ID0gaGVhZGVyLmJ5dGVzUGVyVmVydGV4O1xyXG4gICAgICAgIGhlYWRlci5maWVsZHNUb1JlYWRJbmRleGVzID0gZmllbGRzVG9SZWFkSW5kZXhlcztcclxuICAgICAgICByZXR1cm4gaGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZUhlYWRlclRleHQoaGVhZGVyVGV4dCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckxpbmVzID0gUGx5UGFyc2VyVXRpbHMuY29udmVydEhlYWRlclRleHRUb0xpbmVzKGhlYWRlclRleHQpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuZGVjb2RlSGVhZGVyTGluZXMoaGVhZGVyTGluZXMpO1xyXG4gICAgICAgIGhlYWRlci5oZWFkZXJUZXh0ID0gaGVhZGVyVGV4dDtcclxuICAgICAgICBoZWFkZXIuaGVhZGVyU2l6ZUJ5dGVzID0gaGVhZGVyVGV4dC5pbmRleE9mKFBseVBhcnNlclV0aWxzLkhlYWRlckVuZFRva2VuKSArIFBseVBhcnNlclV0aWxzLkhlYWRlckVuZFRva2VuLmxlbmd0aCArIDE7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVIZWFkZXJGcm9tQnVmZmVyKHBseUJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclRleHQgPSB0aGlzLnBseVBhcnNlcnV0aWxzLnJlYWRIZWFkZXJGcm9tQnVmZmVyKHBseUJ1ZmZlcik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlSGVhZGVyVGV4dChoZWFkZXJUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kU3BsYXREYXRhKHBseUJ1ZmZlciwgaGVhZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhVmlldyhwbHlCdWZmZXIsIGhlYWRlci5oZWFkZXJTaXplQnl0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEJ1ZmZlclNlY3Rpb24oaGVhZGVyLCBmcm9tU3BsYXQsIHRvU3BsYXQsIHNwbGF0RGF0YSwgc3BsYXREYXRhT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b0J1ZmZlciwgdG9PZmZzZXQsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGNvbnN0IG91dEJ5dGVzUGVyU3BsYXQgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1swXS5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzW291dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZV0uQnl0ZXNQZXJTcGxhdDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb21TcGxhdDsgaSA8PSB0b1NwbGF0OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkU3BsYXQgPSBJTlJJQVYxUGx5UGFyc2VyLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdChzcGxhdERhdGEsIGksIGhlYWRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdERhdGFPZmZzZXQsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJhc2UgPSBpICogb3V0Qnl0ZXNQZXJTcGxhdCArIHRvT2Zmc2V0O1xyXG4gICAgICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZVNwbGF0RGF0YVRvU2VjdGlvbkJ1ZmZlcihwYXJzZWRTcGxhdCwgdG9CdWZmZXIsIG91dEJhc2UsIDAsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEFycmF5U2VjdGlvbihoZWFkZXIsIGZyb21TcGxhdCwgdG9TcGxhdCwgc3BsYXREYXRhLCBzcGxhdERhdGFPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRBcnJheSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGZyb21TcGxhdDsgaSA8PSB0b1NwbGF0OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkU3BsYXQgPSBJTlJJQVYxUGx5UGFyc2VyLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdChzcGxhdERhdGEsIGksIGhlYWRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdERhdGFPZmZzZXQsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIHNwbGF0QXJyYXkuYWRkU3BsYXQocGFyc2VkU3BsYXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVTZWN0aW9uU3BsYXREYXRhKHNlY3Rpb25TcGxhdERhdGEsIHNwbGF0Q291bnQsIHNlY3Rpb25IZWFkZXIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgc2VjdGlvbkhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0QXJyYXkgPSBuZXcgVW5jb21wcmVzc2VkU3BsYXRBcnJheShvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHNwbGF0Q291bnQ7IHJvdysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1NwbGF0ID0gSU5SSUFWMVBseVBhcnNlci5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXQoc2VjdGlvblNwbGF0RGF0YSwgcm93LCBzZWN0aW9uSGVhZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIHNwbGF0QXJyYXkuYWRkU3BsYXQobmV3U3BsYXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3BsYXRBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGxldCByYXdTcGxhdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHRlbXBSb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9YID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWDtcclxuICAgICAgICBjb25zdCBPRkZTRVRfWSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlk7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1ogPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5aO1xyXG5cclxuICAgICAgICBjb25zdCBPRkZTRVRfU0NBTEUwID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuU0NBTEUwO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9TQ0FMRTEgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5TQ0FMRTE7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1NDQUxFMiA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlNDQUxFMjtcclxuXHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1JPVEFUSU9OMCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlJPVEFUSU9OMDtcclxuICAgICAgICBjb25zdCBPRkZTRVRfUk9UQVRJT04xID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuUk9UQVRJT04xO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9ST1RBVElPTjIgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ST1RBVElPTjI7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1JPVEFUSU9OMyA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlJPVEFUSU9OMztcclxuXHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX0ZEQzAgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5GREMwO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9GREMxID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuRkRDMTtcclxuICAgICAgICBjb25zdCBPRkZTRVRfRkRDMiA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULkZEQzI7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX09QQUNJVFkgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5PUEFDSVRZO1xyXG5cclxuICAgICAgICBjb25zdCBPRkZTRVRfRlJDID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDU7IGkrKykge1xyXG4gICAgICAgICAgICBPRkZTRVRfRlJDW2ldID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuRlJDMCArIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3BsYXREYXRhLCByb3csIGhlYWRlciwgc3BsYXREYXRhT2Zmc2V0ID0gMCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICBJTlJJQVYxUGx5UGFyc2VyLnJlYWRTcGxhdChzcGxhdERhdGEsIGhlYWRlciwgcm93LCBzcGxhdERhdGFPZmZzZXQsIHJhd1NwbGF0KTtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3BsYXQgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5LmNyZWF0ZVNwbGF0KG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIGlmIChyYXdTcGxhdFtTQ0FMRV8wXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfU0NBTEUwXSA9IE1hdGguZXhwKHJhd1NwbGF0W1NDQUxFXzBdKTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9TQ0FMRTFdID0gTWF0aC5leHAocmF3U3BsYXRbU0NBTEVfMV0pO1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1NDQUxFMl0gPSBNYXRoLmV4cChyYXdTcGxhdFtTQ0FMRV8yXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfU0NBTEUwXSA9IDAuMDE7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfU0NBTEUxXSA9IDAuMDE7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfU0NBTEUyXSA9IDAuMDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyYXdTcGxhdFtGX0RDXzBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IFNIX0MwID0gMC4yODIwOTQ3OTE3NzM4NzgxNDtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMwXSA9IHJhd1NwbGF0W0ZfRENfMF0gKiAyNTU7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMV0gPSByYXdTcGxhdFtGX0RDXzFdICogMjU1O1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzJdID0gcmF3U3BsYXRbRl9EQ18yXSAqIDI1NTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyYXdTcGxhdFtSRURdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMwXSA9IHJhd1NwbGF0W1JFRF0gKiAyNTU7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMV0gPSByYXdTcGxhdFtHUkVFTl0gKiAyNTU7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMl0gPSByYXdTcGxhdFtCTFVFXSAqIDI1NTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMwXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzJdID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJhd1NwbGF0W09QQUNJVFldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9PUEFDSVRZXSA9ICgxIC8gKDEgKyBNYXRoLmV4cCgtcmF3U3BsYXRbT1BBQ0lUWV0pKSkgKiAyNTU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMwXSA9IGNsYW1wKE1hdGguZmxvb3IobmV3U3BsYXRbT0ZGU0VUX0ZEQzBdKSwgMCwgMjU1KTtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzFdID0gY2xhbXAoTWF0aC5mbG9vcihuZXdTcGxhdFtPRkZTRVRfRkRDMV0pLCAwLCAyNTUpO1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMl0gPSBjbGFtcChNYXRoLmZsb29yKG5ld1NwbGF0W09GRlNFVF9GREMyXSksIDAsIDI1NSk7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9PUEFDSVRZXSA9IGNsYW1wKE1hdGguZmxvb3IobmV3U3BsYXRbT0ZGU0VUX09QQUNJVFldKSwgMCwgMjU1KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJhd1NwbGF0W0ZfUkVTVF8wXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZSQ1tpXV0gPSByYXdTcGxhdFtoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlMUZpZWxkc1tpXV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE1OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GUkNbOSArIGldXSA9IHJhd1NwbGF0W2hlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUyRmllbGRzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGVtcFJvdGF0aW9uLnNldChyYXdTcGxhdFtST1RfMF0sIHJhd1NwbGF0W1JPVF8xXSwgcmF3U3BsYXRbUk9UXzJdLCByYXdTcGxhdFtST1RfM10pO1xyXG4gICAgICAgICAgICB0ZW1wUm90YXRpb24ubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfUk9UQVRJT04wXSA9IHRlbXBSb3RhdGlvbi54O1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfUk9UQVRJT04xXSA9IHRlbXBSb3RhdGlvbi55O1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfUk9UQVRJT04yXSA9IHRlbXBSb3RhdGlvbi56O1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfUk9UQVRJT04zXSA9IHRlbXBSb3RhdGlvbi53O1xyXG5cclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1hdID0gcmF3U3BsYXRbWF07XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9ZXSA9IHJhd1NwbGF0W1ldO1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfWl0gPSByYXdTcGxhdFtaXTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXdTcGxhdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBzdGF0aWMgcmVhZFNwbGF0KHNwbGF0RGF0YSwgaGVhZGVyLCByb3csIGRhdGFPZmZzZXQsIHJhd1NwbGF0KSB7XHJcbiAgICAgICAgcmV0dXJuIFBseVBhcnNlclV0aWxzLnJlYWRWZXJ0ZXgoc3BsYXREYXRhLCBoZWFkZXIsIHJvdywgZGF0YU9mZnNldCwgaGVhZGVyLmZpZWxkc1RvUmVhZEluZGV4ZXMsIHJhd1NwbGF0LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRBcnJheShwbHlCdWZmZXIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmRlY29kZUhlYWRlckZyb21CdWZmZXIocGx5QnVmZmVyKTtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gaGVhZGVyLnNwbGF0Q291bnQ7XHJcbiAgICAgICAgY29uc3Qgc3BsYXREYXRhID0gdGhpcy5maW5kU3BsYXREYXRhKHBseUJ1ZmZlciwgaGVhZGVyKTtcclxuICAgICAgICBjb25zdCBzcGxhdEFycmF5ID0gdGhpcy5kZWNvZGVTZWN0aW9uU3BsYXREYXRhKHNwbGF0RGF0YSwgc3BsYXRDb3VudCwgaGVhZGVyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIHJldHVybiBzcGxhdEFycmF5O1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBQbHlQYXJzZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogU2ltcGxpZmllZCBmb3IgRkxBTUUgYXZhdGFyIC0gb25seSBzdXBwb3J0cyBJTlJJQVYxIFBMWSBmb3JtYXQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgSU5SSUFWMVBseVBhcnNlciB9IGZyb20gJy4vSU5SSUFWMVBseVBhcnNlci5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUGx5UGFyc2VyIHtcclxuXHJcbiAgICBzdGF0aWMgcGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QXJyYXkocGx5QnVmZmVyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgLy8gRkxBTUUgYXZhdGFycyB1c2UgSU5SSUFWMSBQTFkgZm9ybWF0XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJTlJJQVYxUGx5UGFyc2VyKCkucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QXJyYXkocGx5QnVmZmVyLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgfVxyXG5cclxufSIsIi8qKlxyXG4gKiBQbHlMb2FkZXIgLSBMb2FkcyBhbmQgcGFyc2VzIFBMWSBmb3JtYXQgR2F1c3NpYW4gU3BsYXQgZmlsZXNcclxuICpcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqXHJcbiAqIFNpbXBsaWZpZWQgZm9yIEZMQU1FIGF2YXRhciAtIG9ubHkgc3VwcG9ydHMgSU5SSUFWMSBQTFkgZm9ybWF0LlxyXG4gKiBQcm92aWRlcyBib3RoIHByb2dyZXNzaXZlIHN0cmVhbWluZyBhbmQgZmlsZS1iYXNlZCBsb2FkaW5nLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0QnVmZmVyIH0gZnJvbSAnLi4vYnVmZmVycy9TcGxhdEJ1ZmZlci5qcyc7XHJcbmltcG9ydCB7IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkgfSBmcm9tICcuLi9idWZmZXJzL1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuanMnO1xyXG5pbXBvcnQgeyBTcGxhdEJ1ZmZlckdlbmVyYXRvciB9IGZyb20gJy4uL2J1ZmZlcnMvU3BsYXRCdWZmZXJHZW5lcmF0b3IuanMnO1xyXG5pbXBvcnQgeyBQbHlQYXJzZXIgfSBmcm9tICcuL1BseVBhcnNlci5qcyc7XHJcbmltcG9ydCB7IFBseVBhcnNlclV0aWxzIH0gZnJvbSAnLi9QbHlQYXJzZXJVdGlscy5qcyc7XHJcbmltcG9ydCB7IElOUklBVjFQbHlQYXJzZXIgfSBmcm9tICcuL0lOUklBVjFQbHlQYXJzZXIuanMnO1xyXG5pbXBvcnQgeyBDb25zdGFudHMsIEludGVybmFsTG9hZFR5cGUsIExvYWRlclN0YXR1cyB9IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IGZldGNoV2l0aFByb2dyZXNzLCBkZWxheWVkRXhlY3V0ZSwgbmF0aXZlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzIH0gZnJvbSAnLi4vdXRpbHMvVXRpbC5qcyc7XHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL0xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgTmV0d29ya0Vycm9yLCBQYXJzZUVycm9yLCBBc3NldExvYWRFcnJvciB9IGZyb20gJy4uL2Vycm9ycy9pbmRleC5qcyc7XHJcbmltcG9ydCB7IHZhbGlkYXRlVXJsLCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUFycmF5QnVmZmVyIH0gZnJvbSAnLi4vdXRpbHMvVmFsaWRhdGlvblV0aWxzLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignUGx5TG9hZGVyJyk7XHJcblxyXG4vKipcclxuICogU3RvcmUgZGF0YSBjaHVua3MgaW50byBhIHNpbmdsZSBBcnJheUJ1ZmZlclxyXG4gKlxyXG4gKiBDb21iaW5lcyBtdWx0aXBsZSBkb3dubG9hZGVkIGNodW5rcyBpbnRvIGEgY29udGlndW91cyBidWZmZXIgZm9yIHBhcnNpbmcuXHJcbiAqIFJlYWxsb2NhdGVzIGJ1ZmZlciBpZiBuZWVkZWQgdG8gZml0IGFsbCBjaHVua3MuXHJcbiAqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7QXJyYXk8e2RhdGE6IFVpbnQ4QXJyYXksIHNpemVCeXRlczogbnVtYmVyfT59IGNodW5rcyAtIEFycmF5IG9mIGRhdGEgY2h1bmtzXHJcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IFtidWZmZXJdIC0gRXhpc3RpbmcgYnVmZmVyIHRvIHJldXNlICh3aWxsIHJlYWxsb2NhdGUgaWYgdG9vIHNtYWxsKVxyXG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IEJ1ZmZlciBjb250YWluaW5nIGFsbCBjaHVuayBkYXRhXHJcbiAqL1xyXG5mdW5jdGlvbiBzdG9yZUNodW5rc0luQnVmZmVyKGNodW5rcywgYnVmZmVyKSB7XHJcbiAgICBsZXQgaW5CeXRlcyA9IDA7XHJcbiAgICBmb3IgKGxldCBjaHVuayBvZiBjaHVua3MpIHtcclxuICAgICAgICBpbkJ5dGVzICs9IGNodW5rLnNpemVCeXRlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZWFsbG9jYXRlIGlmIGJ1ZmZlciBkb2Vzbid0IGV4aXN0IG9yIGlzIHRvbyBzbWFsbFxyXG4gICAgaWYgKCFidWZmZXIgfHwgYnVmZmVyLmJ5dGVMZW5ndGggPCBpbkJ5dGVzKSB7XHJcbiAgICAgICAgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGluQnl0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvcHkgYWxsIGNodW5rcyBpbnRvIGJ1ZmZlciBzZXF1ZW50aWFsbHlcclxuICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgZm9yIChsZXQgY2h1bmsgb2YgY2h1bmtzKSB7XHJcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBvZmZzZXQsIGNodW5rLnNpemVCeXRlcykuc2V0KGNodW5rLmRhdGEpO1xyXG4gICAgICAgIG9mZnNldCArPSBjaHVuay5zaXplQnl0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ1ZmZlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmFsaXplIHNwbGF0IGRhdGEgaW50byBhIFNwbGF0QnVmZmVyXHJcbiAqXHJcbiAqIENvbnZlcnRzIFVuY29tcHJlc3NlZFNwbGF0QXJyYXkgaW50byBmaW5hbCBvcHRpbWl6ZWQgU3BsYXRCdWZmZXIgZm9ybWF0LlxyXG4gKiBBcHBsaWVzIGNvbXByZXNzaW9uIGFuZCBvcHRpbWl6YXRpb24gaWYgcmVxdWVzdGVkLlxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKiBAcGFyYW0ge1VuY29tcHJlc3NlZFNwbGF0QXJyYXl9IHNwbGF0RGF0YSAtIFBhcnNlZCBzcGxhdCBkYXRhXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW1pemVTcGxhdERhdGEgLSBXaGV0aGVyIHRvIG9wdGltaXplL2NvbXByZXNzIHRoZSBkYXRhXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5pbXVtQWxwaGEgLSBNaW5pbXVtIGFscGhhIHRocmVzaG9sZCBmb3Igc3BsYXQgY3VsbGluZ1xyXG4gKiBAcGFyYW0ge251bWJlcn0gY29tcHJlc3Npb25MZXZlbCAtIENvbXByZXNzaW9uIGxldmVsICgwLTIpXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZWN0aW9uU2l6ZSAtIFNlY3Rpb24gc2l6ZSBmb3IgcGFydGl0aW9uaW5nXHJcbiAqIEBwYXJhbSB7VmVjdG9yM30gc2NlbmVDZW50ZXIgLSBDZW50ZXIgcG9pbnQgb2YgdGhlIHNjZW5lXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBibG9ja1NpemUgLSBCbG9jayBzaXplIGZvciBzcGF0aWFsIHBhcnRpdGlvbmluZ1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYnVja2V0U2l6ZSAtIEJ1Y2tldCBzaXplIGZvciBzb3J0aW5nXHJcbiAqIEByZXR1cm5zIHtTcGxhdEJ1ZmZlcn0gRmluYWxpemVkIHNwbGF0IGJ1ZmZlciByZWFkeSBmb3IgcmVuZGVyaW5nXHJcbiAqIEB0aHJvd3Mge1BhcnNlRXJyb3J9IElmIHNwbGF0IGRhdGEgaXMgaW52YWxpZCBvciBmaW5hbGl6YXRpb24gZmFpbHNcclxuICovXHJcbmZ1bmN0aW9uIGZpbmFsaXplU3BsYXREYXRhKHNwbGF0RGF0YSwgb3B0aW1pemVTcGxhdERhdGEsIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCwgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKG9wdGltaXplU3BsYXREYXRhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyR2VuZXJhdG9yID0gU3BsYXRCdWZmZXJHZW5lcmF0b3IuZ2V0U3RhbmRhcmRHZW5lcmF0b3IoXHJcbiAgICAgICAgICAgICAgICBtaW5pbXVtQWxwaGEsXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvblNpemUsXHJcbiAgICAgICAgICAgICAgICBzY2VuZUNlbnRlcixcclxuICAgICAgICAgICAgICAgIGJsb2NrU2l6ZSxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldFNpemVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNwbGF0QnVmZmVyR2VuZXJhdG9yLmdlbmVyYXRlRnJvbVVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc3BsYXREYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gU3BsYXRCdWZmZXIuZ2VuZXJhdGVGcm9tVW5jb21wcmVzc2VkU3BsYXRBcnJheXMoW3NwbGF0RGF0YV0sIG1pbmltdW1BbHBoYSwgMCwgbmV3IFZlY3RvcjMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihcclxuICAgICAgICAgICAgYEZhaWxlZCB0byBmaW5hbGl6ZSBzcGxhdCBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgJ3NwbGF0RGF0YScsXHJcbiAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBseUxvYWRlciAtIExvYWRzIGFuZCBwYXJzZXMgUExZIGZvcm1hdCBHYXVzc2lhbiBTcGxhdCBmaWxlc1xyXG4gKlxyXG4gKiBTdXBwb3J0cyBib3RoIHByb2dyZXNzaXZlIHN0cmVhbWluZyBhbmQgY29tcGxldGUgZmlsZSBsb2FkaW5nLlxyXG4gKiBPcHRpbWl6ZWQgZm9yIElOUklBVjEgUExZIGZvcm1hdCB1c2VkIGluIEZMQU1FIGF2YXRhcnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUGx5TG9hZGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgUExZIGZpbGUgZnJvbSBVUkwgd2l0aCBwcm9ncmVzc2l2ZSBzdHJlYW1pbmcgc3VwcG9ydFxyXG4gICAgICpcclxuICAgICAqIERvd25sb2FkcyBhbmQgcGFyc2VzIFBMWSBkYXRhIHByb2dyZXNzaXZlbHksIGVuYWJsaW5nIHJlbmRlciBkdXJpbmcgbG9hZC5cclxuICAgICAqIFN1cHBvcnRzIGJvdGggZGlyZWN0LXRvLWJ1ZmZlciBhbmQgYXJyYXktYmFzZWQgbG9hZGluZyBtb2Rlcy5cclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZU5hbWUgLSBVUkwgdG8gdGhlIFBMWSBmaWxlXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Qcm9ncmVzc10gLSBQcm9ncmVzcyBjYWxsYmFjayAocGVyY2VudCwgcGVyY2VudExhYmVsLCBzdGF0dXMpXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtsb2FkRGlyZWN0b1RvU3BsYXRCdWZmZXI9ZmFsc2VdIC0gTG9hZCBkaXJlY3RseSB0byBTcGxhdEJ1ZmZlciAoZmFzdGVyIGJ1dCBsZXNzIGZsZXhpYmxlKVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzXSAtIENhbGxiYWNrIGZvciBwcm9ncmVzc2l2ZSBzZWN0aW9uIHVwZGF0ZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbWluaW11bUFscGhhPTFdIC0gTWluaW11bSBhbHBoYSB0aHJlc2hvbGQgZm9yIHNwbGF0IGN1bGxpbmdcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbY29tcHJlc3Npb25MZXZlbD0wXSAtIENvbXByZXNzaW9uIGxldmVsICgwPW5vbmUsIDE9bWVkaXVtLCAyPWhpZ2gpXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpbWl6ZVNwbGF0RGF0YT10cnVlXSAtIFdoZXRoZXIgdG8gb3B0aW1pemUvY29tcHJlc3Mgc3BsYXQgZGF0YVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWU9MF0gLSBTcGhlcmljYWwgaGFybW9uaWNzIGRlZ3JlZSAoMC0zKVxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtoZWFkZXJzXSAtIEhUVFAgaGVhZGVycyBmb3IgZmV0Y2ggcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWN0aW9uU2l6ZV0gLSBTZWN0aW9uIHNpemUgZm9yIHBhcnRpdGlvbmluZ1xyXG4gICAgICogQHBhcmFtIHtWZWN0b3IzfSBbc2NlbmVDZW50ZXJdIC0gQ2VudGVyIHBvaW50IG9mIHRoZSBzY2VuZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtibG9ja1NpemVdIC0gQmxvY2sgc2l6ZSBmb3Igc3BhdGlhbCBwYXJ0aXRpb25pbmdcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYnVja2V0U2l6ZV0gLSBCdWNrZXQgc2l6ZSBmb3Igc29ydGluZ1xyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8U3BsYXRCdWZmZXI+fSBMb2FkZWQgYW5kIHBhcnNlZCBzcGxhdCBidWZmZXJcclxuICAgICAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgcGFyYW1ldGVycyBhcmUgaW52YWxpZFxyXG4gICAgICogQHRocm93cyB7TmV0d29ya0Vycm9yfSBJZiBmaWxlIGRvd25sb2FkIGZhaWxzXHJcbiAgICAgKiBAdGhyb3dzIHtQYXJzZUVycm9yfSBJZiBQTFkgcGFyc2luZyBmYWlsc1xyXG4gICAgICogQHRocm93cyB7QXNzZXRMb2FkRXJyb3J9IElmIGFzc2V0IGxvYWRpbmcgZmFpbHNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGxvYWRGcm9tVVJMKGZpbGVOYW1lLCBvblByb2dyZXNzLCBsb2FkRGlyZWN0b1RvU3BsYXRCdWZmZXIsIG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCwgb3B0aW1pemVTcGxhdERhdGEgPSB0cnVlLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMsIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplKSB7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIHBhcmFtZXRlcnNcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVVybChmaWxlTmFtZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbnZhbGlkIFVSTCBwcm92aWRlZCB0byBsb2FkRnJvbVVSTCcsIHsgZmlsZU5hbWUsIGVycm9yIH0pO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIG9wdGlvbmFsIGNhbGxiYWNrc1xyXG4gICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob25Qcm9ncmVzcywgJ29uUHJvZ3Jlc3MnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUNhbGxiYWNrKG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzLCAnb25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnTG9hZGluZyBQTFkgZnJvbSBVUkwnLCB7IGZpbGVOYW1lLCBvcHRpbWl6ZVNwbGF0RGF0YSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIH0pO1xyXG5cclxuICAgICAgICBsZXQgaW50ZXJuYWxMb2FkVHlwZSA9IGxvYWREaXJlY3RvVG9TcGxhdEJ1ZmZlciA/IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEJ1ZmZlciA6IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEFycmF5O1xyXG4gICAgICAgIGlmIChvcHRpbWl6ZVNwbGF0RGF0YSkgaW50ZXJuYWxMb2FkVHlwZSA9IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEFycmF5O1xyXG5cclxuICAgICAgICBjb25zdCBkaXJlY3RMb2FkU2VjdGlvblNpemVCeXRlcyA9IENvbnN0YW50cy5Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uU2l6ZTtcclxuICAgICAgICBjb25zdCBzcGxhdERhdGFPZmZzZXRCeXRlcyA9IFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyArIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkNvdW50ID0gMTtcclxuXHJcbiAgICAgICAgbGV0IGRpcmVjdExvYWRCdWZmZXJJbjtcclxuICAgICAgICBsZXQgZGlyZWN0TG9hZEJ1ZmZlck91dDtcclxuICAgICAgICBsZXQgZGlyZWN0TG9hZFNwbGF0QnVmZmVyO1xyXG4gICAgICAgIGxldCBtYXhTcGxhdENvdW50ID0gMDtcclxuICAgICAgICBsZXQgc3BsYXRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGxldCBoZWFkZXJMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgcmVhZHlUb0xvYWRTcGxhdERhdGEgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbG9hZFByb21pc2UgPSBuYXRpdmVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMoKTtcclxuXHJcbiAgICAgICAgbGV0IG51bUJ5dGVzU3RyZWFtZWQgPSAwO1xyXG4gICAgICAgIGxldCBudW1CeXRlc1BhcnNlZCA9IDA7XHJcbiAgICAgICAgbGV0IG51bUJ5dGVzRG93bmxvYWRlZCA9IDA7XHJcbiAgICAgICAgbGV0IGhlYWRlclRleHQgPSAnJztcclxuICAgICAgICBsZXQgaGVhZGVyID0gbnVsbDtcclxuICAgICAgICBsZXQgY2h1bmtzID0gW107XHJcblxyXG4gICAgICAgIGxldCBzdGFuZGFyZExvYWRVbmNvbXByZXNzZWRTcGxhdEFycmF5O1xyXG5cclxuICAgICAgICBjb25zdCB0ZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG4gICAgICAgIGNvbnN0IGlucmlhVjFQbHlQYXJzZXIgPSBuZXcgSU5SSUFWMVBseVBhcnNlcigpO1xyXG5cclxuICAgICAgICBjb25zdCBsb2NhbE9uUHJvZ3Jlc3MgPSAocGVyY2VudCwgcGVyY2VudExhYmVsLCBjaHVua0RhdGEpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbG9hZENvbXBsZXRlID0gcGVyY2VudCA+PSAxMDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2h1bmtEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjaHVua3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBjaHVua0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3NpemVCeXRlcyc6IGNodW5rRGF0YS5ieXRlTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICdzdGFydEJ5dGVzJzogbnVtQnl0ZXNEb3dubG9hZGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICdlbmRCeXRlcyc6IG51bUJ5dGVzRG93bmxvYWRlZCArIGNodW5rRGF0YS5ieXRlTGVuZ3RoXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG51bUJ5dGVzRG93bmxvYWRlZCArPSBjaHVua0RhdGEuYnl0ZUxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRG93bmxvYWRCZWZvcmVQcm9jZXNzaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobG9hZENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UucmVzb2x2ZShjaHVua3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJMb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJUZXh0ICs9IHRleHREZWNvZGVyLmRlY29kZShjaHVua0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChQbHlQYXJzZXJVdGlscy5jaGVja1RleHRGb3JFbmRIZWFkZXIoaGVhZGVyVGV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRkxBTUUgYXZhdGFycyB1c2UgSU5SSUFWMSBmb3JtYXQgLSBwYXJzZSBoZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IGlucmlhVjFQbHlQYXJzZXIuZGVjb2RlSGVhZGVyVGV4dChoZWFkZXJUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwbGF0Q291bnQgPSBoZWFkZXIuc3BsYXRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWR5VG9Mb2FkU3BsYXREYXRhID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BMWSBoZWFkZXIgZGVjb2RlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBtYXhTcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTogaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4ob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlRXJyb3IgPSBuZXcgUGFyc2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGRlY29kZSBQTFkgaGVhZGVyOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVhZGVyVGV4dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0hlYWRlciBwYXJzaW5nIGZhaWxlZCcsIHBhcnNlRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UucmVqZWN0KHBhcnNlRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaERlc2NyaXB0b3IgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1swXS5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzW291dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyU2l6ZUJ5dGVzID0gc3BsYXREYXRhT2Zmc2V0Qnl0ZXMgKyBzaERlc2NyaXB0b3IuQnl0ZXNQZXJTcGxhdCAqIG1heFNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RMb2FkQnVmZmVyT3V0ID0gbmV3IEFycmF5QnVmZmVyKHNwbGF0QnVmZmVyU2l6ZUJ5dGVzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLndyaXRlSGVhZGVyVG9CdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25NYWpvcjogU3BsYXRCdWZmZXIuQ3VycmVudE1ham9yVmVyc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uTWlub3I6IFNwbGF0QnVmZmVyLkN1cnJlbnRNaW5vclZlcnNpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2VjdGlvbkNvdW50OiBzZWN0aW9uQ291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkNvdW50OiBzZWN0aW9uQ291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudDogbWF4U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBzcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uTGV2ZWw6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVDZW50ZXI6IG5ldyBWZWN0b3IzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRpcmVjdExvYWRCdWZmZXJPdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRhcmRMb2FkVW5jb21wcmVzc2VkU3BsYXRBcnJheSA9IG5ldyBVbmNvbXByZXNzZWRTcGxhdEFycmF5KG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bUJ5dGVzU3RyZWFtZWQgPSBoZWFkZXIuaGVhZGVyU2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1CeXRlc1BhcnNlZCA9IGhlYWRlci5oZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoZWFkZXJMb2FkZWQgJiYgcmVhZHlUb0xvYWRTcGxhdERhdGEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RMb2FkQnVmZmVySW4gPSBzdG9yZUNodW5rc0luQnVmZmVyKGNodW5rcywgZGlyZWN0TG9hZEJ1ZmZlckluKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGVzTG9hZGVkU2luY2VMYXN0U3RyZWFtZWRTZWN0aW9uID0gbnVtQnl0ZXNEb3dubG9hZGVkIC0gbnVtQnl0ZXNTdHJlYW1lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ5dGVzTG9hZGVkU2luY2VMYXN0U3RyZWFtZWRTZWN0aW9uID4gZGlyZWN0TG9hZFNlY3Rpb25TaXplQnl0ZXMgfHwgbG9hZENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1CeXRlc1RvUHJvY2VzcyA9IG51bUJ5dGVzRG93bmxvYWRlZCAtIG51bUJ5dGVzUGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkZWRTcGxhdENvdW50ID0gTWF0aC5mbG9vcihudW1CeXRlc1RvUHJvY2VzcyAvIGhlYWRlci5ieXRlc1BlclNwbGF0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bUJ5dGVzVG9QYXJzZSA9IGFkZGVkU3BsYXRDb3VudCAqIGhlYWRlci5ieXRlc1BlclNwbGF0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtQnl0ZXNMZWZ0T3ZlciA9IG51bUJ5dGVzVG9Qcm9jZXNzIC0gbnVtQnl0ZXNUb1BhcnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3BsYXRDb3VudCA9IHNwbGF0Q291bnQgKyBhZGRlZFNwbGF0Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhVmlld09mZnNldCA9IG51bUJ5dGVzUGFyc2VkIC0gY2h1bmtzWzBdLnN0YXJ0Qnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhVG9QYXJzZSA9IG5ldyBEYXRhVmlldyhkaXJlY3RMb2FkQnVmZmVySW4sIHBhcnNlZERhdGFWaWV3T2Zmc2V0LCBudW1CeXRlc1RvUGFyc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoRGVzY3JpcHRvciA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzWzBdLlNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXNbb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dE9mZnNldCA9IHNwbGF0Q291bnQgKiBzaERlc2NyaXB0b3IuQnl0ZXNQZXJTcGxhdCArIHNwbGF0RGF0YU9mZnNldEJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIHNwbGF0IGRhdGEgd2l0aCBlcnJvciBoYW5kbGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucmlhVjFQbHlQYXJzZXIucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QnVmZmVyU2VjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciwgMCwgYWRkZWRTcGxhdENvdW50IC0gMSwgZGF0YVRvUGFyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCBkaXJlY3RMb2FkQnVmZmVyT3V0LCBvdXRPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnJpYVYxUGx5UGFyc2VyLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEFycmF5U2VjdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciwgMCwgYWRkZWRTcGxhdENvdW50IC0gMSwgZGF0YVRvUGFyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLCBzdGFuZGFyZExvYWRVbmNvbXByZXNzZWRTcGxhdEFycmF5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZUVycm9yID0gbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcGFyc2Ugc3BsYXQgZGF0YSBzZWN0aW9uOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NwbGF0RGF0YScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1NwbGF0IGRhdGEgcGFyc2luZyBmYWlsZWQnLCB7IHNwbGF0Q291bnQsIGFkZGVkU3BsYXRDb3VudCwgZXJyb3IgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UucmVqZWN0KHBhcnNlRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdENvdW50ID0gbmV3U3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkaXJlY3RMb2FkU3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVTZWN0aW9uSGVhZGVyVG9CdWZmZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudDogbWF4U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IHNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWNrZXRTaXplOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWNrZXRCbG9ja1NpemU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wcmVzc2lvblNjYWxlUmFuZ2U6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlU2l6ZUJ5dGVzOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEJ1Y2tldENvdW50OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU6IG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAwLCBkaXJlY3RMb2FkQnVmZmVyT3V0LCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RMb2FkU3BsYXRCdWZmZXIgPSBuZXcgU3BsYXRCdWZmZXIoZGlyZWN0TG9hZEJ1ZmZlck91dCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RMb2FkU3BsYXRCdWZmZXIudXBkYXRlTG9hZGVkQ291bnRzKDEsIHNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcyhkaXJlY3RMb2FkU3BsYXRCdWZmZXIsIGxvYWRDb21wbGV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUJ5dGVzU3RyZWFtZWQgKz0gZGlyZWN0TG9hZFNlY3Rpb25TaXplQnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1CeXRlc1BhcnNlZCArPSBudW1CeXRlc1RvUGFyc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bUJ5dGVzTGVmdE92ZXIgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtlZXBDaHVua3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2VlcFNpemUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBjaHVua3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBjaHVua3NbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtlZXBTaXplICs9IGNodW5rLnNpemVCeXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2VlcENodW5rcy51bnNoaWZ0KGNodW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtlZXBTaXplID49IG51bUJ5dGVzTGVmdE92ZXIpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MgPSBrZWVwQ2h1bmtzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQcm9taXNlLnJlc29sdmUoZGlyZWN0TG9hZFNwbGF0QnVmZmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQcm9taXNlLnJlc29sdmUoc3RhbmRhcmRMb2FkVW5jb21wcmVzc2VkU3BsYXRBcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFByb2dyZXNzIGNhbGxiYWNrIHdpdGggZXJyb3IgaXNvbGF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MocGVyY2VudCwgcGVyY2VudExhYmVsLCBMb2FkZXJTdGF0dXMuRG93bmxvYWRpbmcpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gb25Qcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWwgcHJvZ3Jlc3MgY2FsbGJhY2tcclxuICAgICAgICBpZiAob25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcygwLCAnMCUnLCBMb2FkZXJTdGF0dXMuRG93bmxvYWRpbmcpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIG9uUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZldGNoIGFuZCBwcm9jZXNzIHRoZSBQTFkgZmlsZVxyXG4gICAgICAgIHJldHVybiBmZXRjaFdpdGhQcm9ncmVzcyhmaWxlTmFtZSwgbG9jYWxPblByb2dyZXNzLCBmYWxzZSwgaGVhZGVycylcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzKDAsICcwJScsIExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gb25Qcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9hZFByb21pc2UucHJvbWlzZTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHNwbGF0RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzKDEwMCwgJzEwMCUnLCBMb2FkZXJTdGF0dXMuRG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIG9uUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUExZIGRhdGEgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbExvYWRUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IHNwbGF0RGF0YT8uc3BsYXRDb3VudCB8fCAndW5rbm93bidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYmFzZWQgb24gbG9hZCB0eXBlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5Eb3dubG9hZEJlZm9yZVByb2Nlc3NpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua0RhdGFzID0gY2h1bmtzLm1hcCgoY2h1bmspID0+IGNodW5rLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmxvYihjaHVua0RhdGFzKS5hcnJheUJ1ZmZlcigpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChwbHlGaWxlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBseUxvYWRlci5sb2FkRnJvbUZpbGVEYXRhKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBseUZpbGVEYXRhLCBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsIG9wdGltaXplU3BsYXREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHByb2Nlc3MgZG93bmxvYWRlZCBQTFkgZGF0YTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3BsYXREYXRhO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsYXllZEV4ZWN1dGUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmluYWxpemVTcGxhdERhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdERhdGEsIG9wdGltaXplU3BsYXREYXRhLCBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZS10aHJvdyBjdXN0b20gZXJyb3JzIGFzLWlzXHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IgfHxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIE5ldHdvcmtFcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgUGFyc2VFcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgQXNzZXRMb2FkRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1BMWSBsb2FkaW5nIGZhaWxlZCcsIHsgZmlsZU5hbWUsIGVycm9yQ29kZTogZXJyb3IuY29kZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHVuZXhwZWN0ZWQgZXJyb3JzXHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3IgbG9hZGluZyBQTFknLCB7IGZpbGVOYW1lLCBlcnJvciB9KTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgVW5leHBlY3RlZCBlcnJvciBsb2FkaW5nIFBMWSBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIFBMWSBmaWxlIGZyb20gcmF3IEFycmF5QnVmZmVyIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBQYXJzZXMgUExZIGRhdGEgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGRvd25sb2FkZWQuIFVzZWZ1bCBmb3IgbG9hZGluZ1xyXG4gICAgICogZnJvbSBsb2NhbCBmaWxlcyBvciB3aGVuIGRhdGEgaXMgcHJvdmlkZWQgZGlyZWN0bHkuXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gcGx5RmlsZURhdGEgLSBSYXcgUExZIGZpbGUgZGF0YSBhcyBBcnJheUJ1ZmZlclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttaW5pbXVtQWxwaGE9MV0gLSBNaW5pbXVtIGFscGhhIHRocmVzaG9sZCBmb3Igc3BsYXQgY3VsbGluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb21wcmVzc2lvbkxldmVsPTBdIC0gQ29tcHJlc3Npb24gbGV2ZWwgKDA9bm9uZSwgMT1tZWRpdW0sIDI9aGlnaClcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGltaXplU3BsYXREYXRhPXRydWVdIC0gV2hldGhlciB0byBvcHRpbWl6ZS9jb21wcmVzcyBzcGxhdCBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW291dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZT0wXSAtIFNwaGVyaWNhbCBoYXJtb25pY3MgZGVncmVlICgwLTMpXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY3Rpb25TaXplXSAtIFNlY3Rpb24gc2l6ZSBmb3IgcGFydGl0aW9uaW5nXHJcbiAgICAgKiBAcGFyYW0ge1ZlY3RvcjN9IFtzY2VuZUNlbnRlcl0gLSBDZW50ZXIgcG9pbnQgb2YgdGhlIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Jsb2NrU2l6ZV0gLSBCbG9jayBzaXplIGZvciBzcGF0aWFsIHBhcnRpdGlvbmluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtidWNrZXRTaXplXSAtIEJ1Y2tldCBzaXplIGZvciBzb3J0aW5nXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxTcGxhdEJ1ZmZlcj59IFBhcnNlZCBhbmQgZmluYWxpemVkIHNwbGF0IGJ1ZmZlclxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwbHlGaWxlRGF0YSBpcyBpbnZhbGlkXHJcbiAgICAgKiBAdGhyb3dzIHtQYXJzZUVycm9yfSBJZiBwYXJzaW5nIGZhaWxzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBsb2FkRnJvbUZpbGVEYXRhKHBseUZpbGVEYXRhLCBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsIG9wdGltaXplU3BsYXREYXRhLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUpIHtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQXJyYXlCdWZmZXIocGx5RmlsZURhdGEsICdwbHlGaWxlRGF0YScpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignSW52YWxpZCBQTFkgZmlsZSBkYXRhJywgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0xvYWRpbmcgUExZIGZyb20gZmlsZSBkYXRhJywge1xyXG4gICAgICAgICAgICBzaXplQnl0ZXM6IHBseUZpbGVEYXRhLmJ5dGVMZW5ndGgsXHJcbiAgICAgICAgICAgIG9wdGltaXplU3BsYXREYXRhLFxyXG4gICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQbHlQYXJzZXIucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QXJyYXkocGx5RmlsZURhdGEsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIFBMWSBmaWxlIGRhdGE6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICdwbHlGaWxlRGF0YScsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChzcGxhdEFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUExZIHBhcnNlZCBzdWNjZXNzZnVsbHknLCB7XHJcbiAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBzcGxhdEFycmF5Py5zcGxhdENvdW50IHx8ICd1bmtub3duJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNwbGF0RGF0YShcclxuICAgICAgICAgICAgICAgIHNwbGF0QXJyYXksIG9wdGltaXplU3BsYXREYXRhLCBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBSZS10aHJvdyBjdXN0b20gZXJyb3JzIGFzLWlzXHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvciB8fCBlcnJvciBpbnN0YW5jZW9mIFBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignUExZIGZpbGUgZGF0YSBsb2FkaW5nIGZhaWxlZCcsIHsgZXJyb3JDb2RlOiBlcnJvci5jb2RlIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFdyYXAgdW5leHBlY3RlZCBlcnJvcnNcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGxvYWRpbmcgUExZIGZyb20gZmlsZSBkYXRhJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihcclxuICAgICAgICAgICAgICAgIGBVbmV4cGVjdGVkIGVycm9yIHBhcnNpbmcgUExZIGRhdGE6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgJ3BseUZpbGVEYXRhJyxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogUmF5XHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICovXHJcblxyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XHJcblxyXG5jb25zdCBWZWN0b3JSaWdodCA9IG5ldyBUSFJFRS5WZWN0b3IzKDEsIDAsIDApO1xyXG5jb25zdCBWZWN0b3JVcCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDEsIDApO1xyXG5jb25zdCBWZWN0b3JCYWNrd2FyZCA9IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDEpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJheSB7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3JpZ2luID0gbmV3IFRIUkVFLlZlY3RvcjMoKSwgZGlyZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKSkge1xyXG4gICAgICAgIHRoaXMub3JpZ2luID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzKG9yaWdpbiwgZGlyZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRQYXJhbWV0ZXJzKG9yaWdpbiwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4uY29weShvcmlnaW4pO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uLmNvcHkoZGlyZWN0aW9uKS5ub3JtYWxpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICBib3hDb250YWluc1BvaW50KGJveCwgcG9pbnQsIGVwc2lsb24pIHtcclxuICAgICAgICByZXR1cm4gcG9pbnQueCA8IGJveC5taW4ueCAtIGVwc2lsb24gfHwgcG9pbnQueCA+IGJveC5tYXgueCArIGVwc2lsb24gfHxcclxuICAgICAgICAgICAgICAgcG9pbnQueSA8IGJveC5taW4ueSAtIGVwc2lsb24gfHwgcG9pbnQueSA+IGJveC5tYXgueSArIGVwc2lsb24gfHxcclxuICAgICAgICAgICAgICAgcG9pbnQueiA8IGJveC5taW4ueiAtIGVwc2lsb24gfHwgcG9pbnQueiA+IGJveC5tYXgueiArIGVwc2lsb24gPyBmYWxzZSA6IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaW50ZXJzZWN0Qm94ID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBsYW5lSW50ZXJzZWN0aW9uUG9pbnQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbkFycmF5ID0gW107XHJcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uQXJyYXkgPSBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGJveCwgb3V0SGl0KSB7XHJcblxyXG4gICAgICAgICAgICBvcmlnaW5BcnJheVswXSA9IHRoaXMub3JpZ2luLng7XHJcbiAgICAgICAgICAgIG9yaWdpbkFycmF5WzFdID0gdGhpcy5vcmlnaW4ueTtcclxuICAgICAgICAgICAgb3JpZ2luQXJyYXlbMl0gPSB0aGlzLm9yaWdpbi56O1xyXG4gICAgICAgICAgICBkaXJlY3Rpb25BcnJheVswXSA9IHRoaXMuZGlyZWN0aW9uLng7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbkFycmF5WzFdID0gdGhpcy5kaXJlY3Rpb24ueTtcclxuICAgICAgICAgICAgZGlyZWN0aW9uQXJyYXlbMl0gPSB0aGlzLmRpcmVjdGlvbi56O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuYm94Q29udGFpbnNQb2ludChib3gsIHRoaXMub3JpZ2luLCAwLjAwMDEpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3V0SGl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0SGl0Lm9yaWdpbi5jb3B5KHRoaXMub3JpZ2luKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRIaXQubm9ybWFsLnNldCgwLCAwLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRIaXQuZGlzdGFuY2UgPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbkFycmF5W2ldID09IDAuMCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGl0Tm9ybWFsID0gaSA9PSAwID8gVmVjdG9yUmlnaHQgOiBpID09IDEgPyBWZWN0b3JVcCA6IFZlY3RvckJhY2t3YXJkO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cmVtZVZlYyA9IGRpcmVjdGlvbkFycmF5W2ldIDwgMCA/IGJveC5tYXggOiBib3gubWluO1xyXG4gICAgICAgICAgICAgICAgbGV0IG11bHRpcGxpZXIgPSAtTWF0aC5zaWduKGRpcmVjdGlvbkFycmF5W2ldKTtcclxuICAgICAgICAgICAgICAgIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVswXSA9IGkgPT0gMCA/IGV4dHJlbWVWZWMueCA6IGkgPT0gMSA/IGV4dHJlbWVWZWMueSA6IGV4dHJlbWVWZWMuejtcclxuICAgICAgICAgICAgICAgIGxldCB0b1NpZGUgPSBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbMF0gLSBvcmlnaW5BcnJheVtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodG9TaWRlICogbXVsdGlwbGllciA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHgxID0gKGkgKyAxKSAlIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4MiA9IChpICsgMikgJSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVsyXSA9IGRpcmVjdGlvbkFycmF5W2lkeDFdIC8gZGlyZWN0aW9uQXJyYXlbaV0gKiB0b1NpZGUgKyBvcmlnaW5BcnJheVtpZHgxXTtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbMV0gPSBkaXJlY3Rpb25BcnJheVtpZHgyXSAvIGRpcmVjdGlvbkFycmF5W2ldICogdG9TaWRlICsgb3JpZ2luQXJyYXlbaWR4Ml07XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludC5zZXQocGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5W2ldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVtpZHgyXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbaWR4MV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJveENvbnRhaW5zUG9pbnQoYm94LCBwbGFuZUludGVyc2VjdGlvblBvaW50LCAwLjAwMDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvdXRIaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEhpdC5vcmlnaW4uY29weShwbGFuZUludGVyc2VjdGlvblBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEhpdC5ub3JtYWwuY29weShoaXROb3JtYWwpLm11bHRpcGx5U2NhbGFyKG11bHRpcGxpZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0SGl0LmRpc3RhbmNlID0gcGxhbmVJbnRlcnNlY3Rpb25Qb2ludC5zdWIodGhpcy5vcmlnaW4pLmxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIGludGVyc2VjdFNwaGVyZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0b1NwaGVyZUNlbnRlclZlYyA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjZW50ZXIsIHJhZGl1cywgb3V0SGl0KSB7XHJcbiAgICAgICAgICAgIHRvU3BoZXJlQ2VudGVyVmVjLmNvcHkoY2VudGVyKS5zdWIodGhpcy5vcmlnaW4pO1xyXG4gICAgICAgICAgICBjb25zdCB0b0Nsb3Nlc3RBcHByb2FjaCA9IHRvU3BoZXJlQ2VudGVyVmVjLmRvdCh0aGlzLmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvQ2xvc2VzdEFwcHJvYWNoU3EgPSB0b0Nsb3Nlc3RBcHByb2FjaCAqIHRvQ2xvc2VzdEFwcHJvYWNoO1xyXG4gICAgICAgICAgICBjb25zdCB0b1NwaGVyZUNlbnRlclNxID0gdG9TcGhlcmVDZW50ZXJWZWMuZG90KHRvU3BoZXJlQ2VudGVyVmVjKTtcclxuICAgICAgICAgICAgY29uc3QgZGlmZlNxID0gdG9TcGhlcmVDZW50ZXJTcSAtIHRvQ2xvc2VzdEFwcHJvYWNoU3E7XHJcbiAgICAgICAgICAgIGNvbnN0IHJhZGl1c1NxID0gcmFkaXVzICogcmFkaXVzO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRpZmZTcSA+IHJhZGl1c1NxKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0aGMgPSBNYXRoLnNxcnQocmFkaXVzU3EgLSBkaWZmU3EpO1xyXG4gICAgICAgICAgICBjb25zdCB0MCA9IHRvQ2xvc2VzdEFwcHJvYWNoIC0gdGhjO1xyXG4gICAgICAgICAgICBjb25zdCB0MSA9IHRvQ2xvc2VzdEFwcHJvYWNoICsgdGhjO1xyXG5cclxuICAgICAgICAgICAgaWYgKHQxIDwgMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgdCA9IHQwIDwgMCA/IHQxIDogdDA7XHJcblxyXG4gICAgICAgICAgICBpZiAob3V0SGl0KSB7XHJcbiAgICAgICAgICAgICAgICBvdXRIaXQub3JpZ2luLmNvcHkodGhpcy5vcmlnaW4pLmFkZFNjYWxlZFZlY3Rvcih0aGlzLmRpcmVjdGlvbiwgdCk7XHJcbiAgICAgICAgICAgICAgICBvdXRIaXQubm9ybWFsLmNvcHkob3V0SGl0Lm9yaWdpbikuc3ViKGNlbnRlcikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICBvdXRIaXQuZGlzdGFuY2UgPSB0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBIaXRcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gdGhlIG9yaWdpbmFsLlxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBIaXQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMub3JpZ2luID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLm5vcm1hbCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zcGxhdEluZGV4ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQob3JpZ2luLCBub3JtYWwsIGRpc3RhbmNlLCBzcGxhdEluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4uY29weShvcmlnaW4pO1xyXG4gICAgICAgIHRoaXMubm9ybWFsLmNvcHkobm9ybWFsKTtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICAgICAgdGhpcy5zcGxhdEluZGV4ID0gc3BsYXRJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBjbG9uZSgpIHtcclxuICAgICAgICBjb25zdCBoaXRDbG9uZSA9IG5ldyBIaXQoKTtcclxuICAgICAgICBoaXRDbG9uZS5vcmlnaW4uY29weSh0aGlzLm9yaWdpbik7XHJcbiAgICAgICAgaGl0Q2xvbmUubm9ybWFsLmNvcHkodGhpcy5ub3JtYWwpO1xyXG4gICAgICAgIGhpdENsb25lLmRpc3RhbmNlID0gdGhpcy5kaXN0YW5jZTtcclxuICAgICAgICBoaXRDbG9uZS5zcGxhdEluZGV4ID0gdGhpcy5zcGxhdEluZGV4O1xyXG4gICAgICAgIHJldHVybiBoaXRDbG9uZTtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiLyoqXHJcbiAqIFJheWNhc3RlclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBSYXkgfSBmcm9tICcuL1JheS5qcyc7XHJcbmltcG9ydCB7IEhpdCB9IGZyb20gJy4vSGl0LmpzJztcclxuaW1wb3J0IHsgU3BsYXRSZW5kZXJNb2RlIH0gZnJvbSAnLi4vZW51bXMvaW5kZXguanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJheWNhc3RlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3Iob3JpZ2luLCBkaXJlY3Rpb24sIHJheWNhc3RBZ2FpbnN0VHJ1ZVNwbGF0RWxsaXBzb2lkID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLnJheSA9IG5ldyBSYXkob3JpZ2luLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgIHRoaXMucmF5Y2FzdEFnYWluc3RUcnVlU3BsYXRFbGxpcHNvaWQgPSByYXljYXN0QWdhaW5zdFRydWVTcGxhdEVsbGlwc29pZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRGcm9tQ2FtZXJhQW5kU2NyZWVuUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgbmRjQ29vcmRzID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbWVyYSwgc2NyZWVuUG9zaXRpb24sIHNjcmVlbkRpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgbmRjQ29vcmRzLnggPSBzY3JlZW5Qb3NpdGlvbi54IC8gc2NyZWVuRGltZW5zaW9ucy54ICogMi4wIC0gMS4wO1xyXG4gICAgICAgICAgICBuZGNDb29yZHMueSA9IChzY3JlZW5EaW1lbnNpb25zLnkgLSBzY3JlZW5Qb3NpdGlvbi55KSAvIHNjcmVlbkRpbWVuc2lvbnMueSAqIDIuMCAtIDEuMDtcclxuICAgICAgICAgICAgaWYgKGNhbWVyYS5pc1BlcnNwZWN0aXZlQ2FtZXJhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJheS5vcmlnaW4uc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGNhbWVyYS5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJheS5kaXJlY3Rpb24uc2V0KG5kY0Nvb3Jkcy54LCBuZGNDb29yZHMueSwgMC41ICkudW5wcm9qZWN0KGNhbWVyYSkuc3ViKHRoaXMucmF5Lm9yaWdpbikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmF5Lm9yaWdpbi5zZXQobmRjQ29vcmRzLngsIG5kY0Nvb3Jkcy55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjYW1lcmEubmVhciArIGNhbWVyYS5mYXIpIC8gKGNhbWVyYS5uZWFyIC0gY2FtZXJhLmZhcikpLnVucHJvamVjdChjYW1lcmEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYXkuZGlyZWN0aW9uLnNldCgwLCAwLCAtMSkudHJhbnNmb3JtRGlyZWN0aW9uKGNhbWVyYS5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYSA9IGNhbWVyYTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmF5Y2FzdGVyOjpzZXRGcm9tQ2FtZXJhQW5kU2NyZWVuUG9zaXRpb24oKSAtPiBVbnN1cHBvcnRlZCBjYW1lcmEgdHlwZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgaW50ZXJzZWN0U3BsYXRNZXNoID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvTG9jYWwgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IGZyb21Mb2NhbCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgc2NlbmVUcmFuc2Zvcm0gPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsUmF5ID0gbmV3IFJheSgpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBQb2ludCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzcGxhdE1lc2gsIG91dEhpdHMgPSBbXSkge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdFRyZWUgPSBzcGxhdE1lc2guZ2V0U3BsYXRUcmVlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNwbGF0VHJlZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzcGxhdFRyZWUuc3ViVHJlZXMubGVuZ3RoOyBzKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YlRyZWUgPSBzcGxhdFRyZWUuc3ViVHJlZXNbc107XHJcblxyXG4gICAgICAgICAgICAgICAgZnJvbUxvY2FsLmNvcHkoc3BsYXRNZXNoLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgICAgIGlmIChzcGxhdE1lc2guZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGxhdE1lc2guZ2V0U2NlbmVUcmFuc2Zvcm0ocywgc2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb21Mb2NhbC5tdWx0aXBseShzY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0b0xvY2FsLmNvcHkoZnJvbUxvY2FsKS5pbnZlcnQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2NhbFJheS5vcmlnaW4uY29weSh0aGlzLnJheS5vcmlnaW4pLmFwcGx5TWF0cml4NCh0b0xvY2FsKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsUmF5LmRpcmVjdGlvbi5jb3B5KHRoaXMucmF5Lm9yaWdpbikuYWRkKHRoaXMucmF5LmRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFJheS5kaXJlY3Rpb24uYXBwbHlNYXRyaXg0KHRvTG9jYWwpLnN1Yihsb2NhbFJheS5vcmlnaW4pLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEhpdHNGb3JTdWJUcmVlID0gW107XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViVHJlZS5yb290Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FzdFJheUF0U3BsYXRUcmVlTm9kZShsb2NhbFJheSwgc3BsYXRUcmVlLCBzdWJUcmVlLnJvb3ROb2RlLCBvdXRIaXRzRm9yU3ViVHJlZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0SGl0c0ZvclN1YlRyZWUuZm9yRWFjaCgoaGl0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGl0Lm9yaWdpbi5hcHBseU1hdHJpeDQoZnJvbUxvY2FsKTtcclxuICAgICAgICAgICAgICAgICAgICBoaXQubm9ybWFsLmFwcGx5TWF0cml4NChmcm9tTG9jYWwpLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpdC5kaXN0YW5jZSA9IHRlbXBQb2ludC5jb3B5KGhpdC5vcmlnaW4pLnN1Yih0aGlzLnJheS5vcmlnaW4pLmxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0SGl0cy5wdXNoKC4uLm91dEhpdHNGb3JTdWJUcmVlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb3V0SGl0cy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5kaXN0YW5jZSA+IGIuZGlzdGFuY2UpIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG91dEhpdHM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgY2FzdFJheUF0U3BsYXRUcmVlTm9kZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wQ29sb3IgPSBuZXcgVEhSRUUuVmVjdG9yNCgpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBDZW50ZXIgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBTY2FsZSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFJvdGF0aW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcclxuICAgICAgICBjb25zdCB0ZW1wSGl0ID0gbmV3IEhpdCgpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlRXBzaWxvbiA9IDAuMDAwMDAwMTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3JpZ2luID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgY29uc3QgdW5pZm9ybVNjYWxlTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBzY2FsZU1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb25NYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHRvU3BoZXJlU3BhY2UgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IGZyb21TcGhlcmVTcGFjZSA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFJheSA9IG5ldyBSYXkoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJheSwgc3BsYXRUcmVlLCBub2RlLCBvdXRIaXRzID0gW10pIHtcclxuICAgICAgICAgICAgaWYgKCFyYXkuaW50ZXJzZWN0Qm94KG5vZGUuYm91bmRpbmdCb3gpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSAmJiBub2RlLmRhdGEuaW5kZXhlcyAmJiBub2RlLmRhdGEuaW5kZXhlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuZGF0YS5pbmRleGVzLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0R2xvYmFsSW5kZXggPSBub2RlLmRhdGEuaW5kZXhlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdFNjZW5lSW5kZXggPSBzcGxhdFRyZWUuc3BsYXRNZXNoLmdldFNjZW5lSW5kZXhGb3JTcGxhdChzcGxhdEdsb2JhbEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdFNjZW5lID0gc3BsYXRUcmVlLnNwbGF0TWVzaC5nZXRTY2VuZShzcGxhdFNjZW5lSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3BsYXRTY2VuZS52aXNpYmxlKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRUcmVlLnNwbGF0TWVzaC5nZXRTcGxhdENvbG9yKHNwbGF0R2xvYmFsSW5kZXgsIHRlbXBDb2xvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRUcmVlLnNwbGF0TWVzaC5nZXRTcGxhdENlbnRlcihzcGxhdEdsb2JhbEluZGV4LCB0ZW1wQ2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBzcGxhdFRyZWUuc3BsYXRNZXNoLmdldFNwbGF0U2NhbGVBbmRSb3RhdGlvbihzcGxhdEdsb2JhbEluZGV4LCB0ZW1wU2NhbGUsIHRlbXBSb3RhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wU2NhbGUueCA8PSBzY2FsZUVwc2lsb24gfHwgdGVtcFNjYWxlLnkgPD0gc2NhbGVFcHNpbG9uIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0VHJlZS5zcGxhdE1lc2guc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEICYmIHRlbXBTY2FsZS56IDw9IHNjYWxlRXBzaWxvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5yYXljYXN0QWdhaW5zdFRydWVTcGxhdEVsbGlwc29pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFkaXVzID0gKHRlbXBTY2FsZS54ICsgdGVtcFNjYWxlLnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29tcG9uZW50Q291bnQgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BsYXRUcmVlLnNwbGF0TWVzaC5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cyArPSB0ZW1wU2NhbGUuejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudENvdW50ID0gMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSByYWRpdXMgLyBjb21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJheS5pbnRlcnNlY3RTcGhlcmUodGVtcENlbnRlciwgcmFkaXVzLCB0ZW1wSGl0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGl0Q2xvbmUgPSB0ZW1wSGl0LmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXRDbG9uZS5zcGxhdEluZGV4ID0gc3BsYXRHbG9iYWxJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dEhpdHMucHVzaChoaXRDbG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZU1hdHJpeC5tYWtlU2NhbGUodGVtcFNjYWxlLngsIHRlbXBTY2FsZS55LCB0ZW1wU2NhbGUueik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uTWF0cml4Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHRlbXBSb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaWZvcm1TY2FsZSA9IE1hdGgubG9nMTAodGVtcENvbG9yLncpICogMi4wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtU2NhbGVNYXRyaXgubWFrZVNjYWxlKHVuaWZvcm1TY2FsZSwgdW5pZm9ybVNjYWxlLCB1bmlmb3JtU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BoZXJlU3BhY2UuY29weSh1bmlmb3JtU2NhbGVNYXRyaXgpLm11bHRpcGx5KHJvdGF0aW9uTWF0cml4KS5tdWx0aXBseShzY2FsZU1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvU3BoZXJlU3BhY2UuY29weShmcm9tU3BoZXJlU3BhY2UpLmludmVydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUmF5Lm9yaWdpbi5jb3B5KHJheS5vcmlnaW4pLnN1Yih0ZW1wQ2VudGVyKS5hcHBseU1hdHJpeDQodG9TcGhlcmVTcGFjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBSYXkuZGlyZWN0aW9uLmNvcHkocmF5Lm9yaWdpbikuYWRkKHJheS5kaXJlY3Rpb24pLnN1Yih0ZW1wQ2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFJheS5kaXJlY3Rpb24uYXBwbHlNYXRyaXg0KHRvU3BoZXJlU3BhY2UpLnN1Yih0ZW1wUmF5Lm9yaWdpbikubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wUmF5LmludGVyc2VjdFNwaGVyZShvcmlnaW4sIDEuMCwgdGVtcEhpdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpdENsb25lID0gdGVtcEhpdC5jbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGl0Q2xvbmUuc3BsYXRJbmRleCA9IHNwbGF0R2xvYmFsSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXRDbG9uZS5vcmlnaW4uYXBwbHlNYXRyaXg0KGZyb21TcGhlcmVTcGFjZSkuYWRkKHRlbXBDZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0SGl0cy5wdXNoKGhpdENsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXN0UmF5QXRTcGxhdFRyZWVOb2RlKHJheSwgc3BsYXRUcmVlLCBjaGlsZCwgb3V0SGl0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG91dEhpdHM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcbn1cclxuIiwiLyoqXHJcbiAqIFNvcnRXb3JrZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogSGFuZGxlcyBHUFUtYmFzZWQgc29ydGluZyB1c2luZyBXZWJBc3NlbWJseVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGlzSU9TLCBnZXRJT1NTZW1ldmVyIH0gZnJvbSAnLi4vdXRpbHMvVXRpbC5qcyc7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcblxyXG4vLyBCYXNlNjQgZW5jb2RlZCBXQVNNIG1vZHVsZXMgZm9yIHNvcnRpbmdcclxuY29uc3QgU29ydGVyV2FzbSA9IFwiQUdGemJRRUFBQUFBRHdoa2VXeHBibXN1TUFFRUFBQUFBQUViQTJBQUFHQVFmMzkvZjM5L2YzOS9mMzkvZjM5L2Z3QmdBQUYvQWhJQkEyVnVkZ1p0WlcxdmNua0NBd0NBZ0FRREJBTUFBUUlIVkFRUlgxOTNZWE50WDJOaGJHeGZZM1J2Y25NQUFCaGZYM2RoYzIxZllYQndiSGxmWkdGMFlWOXlaV3h2WTNNQUFBdHpiM0owU1c1a1pYaGxjd0FCRTJWdGMyTnlhWEIwWlc1ZmRHeHpYMmx1YVhRQUFncVdFQU1EQUFFTGloQUVBWHdEZXdOL0EzMGdDeUFLYXlFTUFrQUNRQ0FPQkVBZ0RRUkFRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFNZ0RDRUJBMEFnQXlBQlFRSjBJZ1ZxSUFJZ0FDQUZhaWdDQUVFQ2RHb29BZ0FpQlRZQ0FDQUZJQW9nQlNBS1NCc2hDaUFGSUEwZ0JTQU5TaHNoRFNBQlFRRnFJZ0VnQzBjTkFBc01Bd3NnRHdSQUlBc2dERTBOQWtGL0lROUIrUC8vL3djaENrR0lnSUNBZUNFTklBd2hBZ05BSUE4Z0J5QUFJQUpCQW5RaUZXb29BZ0FpRmtFQ2RHb29BZ0FpRkVjRVFBSi9JQVg5Q1FJNElBZ2dGRUVHZEdvaUR2MEpBZ3dnRGlvQ0hQMGdBU0FPS2dJcy9TQUNJQTRxQWp6OUlBUDk1Z0VnQmYwSkFpZ2dEdjBKQWdnZ0Rpb0NHUDBnQVNBT0tnSW8vU0FDSUE0cUFqajlJQVA5NWdFZ0JmMEpBZ2dnRHYwSkFnQWdEaW9DRVAwZ0FTQU9LZ0lnL1NBQ0lBNHFBakQ5SUFQOTVnRWdCZjBKQWhnZ0R2MEpBZ1FnRGlvQ0ZQMGdBU0FPS2dJay9TQUNJQTRxQWpUOUlBUDk1Z0g5NUFIOTVBSDk1QUVpRWYxZi9Rd0FBQUFBQUVDUFFBQUFBQUFBUUk5QUloTDk4Z0VpRS8waEFTSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hEZ0ovSUJQOUlRQWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0wvUkVnRHYwY0FRSi9JQkVnRWYwTkNBa0tDd3dORGc4QUFBQUFBQUFBQVAxZklCTDk4Z0VpRWYwaEFDSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBdjlIQUlDZnlBUi9TRUJJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDLzBjQXlFU0lCUWhEd3NnQXlBVmFpQUJJQlpCQkhScS9RQUFBQ0FTL2JVQkloSDlHd0FnRWYwYkFXb2dFZjBiQW1vZ0VmMGJBMm9pRGpZQ0FDQU9JQW9nQ2lBT1Noc2hDaUFPSUEwZ0RTQU9TQnNoRFNBQ1FRRnFJZ0lnQzBjTkFBc01Bd3NDZnlBRktnSUl1LzBVSUFVcUFoaTcvU0lCL1F3QUFBQUFBRUNQUUFBQUFBQUFRSTlBL2ZJQkloSDlJUUVpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVE0Q2Z5QVIvU0VBSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFQ0FuOGdCU29DS0x0RUFBQUFBQUJBajBDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RUZRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFJZ0F2MFJJQTc5SEFFZ0JmMGNBaUVTSUF3aEJRTkFJQU1nQlVFQ2RDSUNhaUFCSUFBZ0Ftb29BZ0JCQkhScS9RQUFBQ0FTL2JVQkloSDlHd0FnRWYwYkFXb2dFZjBiQW1vaUFqWUNBQ0FDSUFvZ0FpQUtTQnNoQ2lBQ0lBMGdBaUFOU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0RRUkFRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFJZ0RDRUJBMEFnQXlBQlFRSjBJZ1ZxQW44Z0FpQUFJQVZxS0FJQVFRSjBhaW9DQUx0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5SU9OZ0lBSUFvZ0RpQUtJQTVJR3lFS0lBMGdEaUFOSUE1S0d5RU5JQUZCQVdvaUFTQUxSdzBBQ3d3Q0N5QVBSUVJBSUFzZ0RFME5BU0FGS2dJb0lSY2dCU29DR0NFWUlBVXFBZ2doR1VINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFRkEwQUNmeUFYSUFFZ0FDQUZRUUowSWdkcUtBSUFRUVIwYWlJQ0tnSUlsQ0FaSUFJcUFnQ1VJQmdnQWlvQ0JKU1NrcnRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFT0lBTWdCMm9nRGpZQ0FDQUtJQTRnQ2lBT1NCc2hDaUFOSUE0Z0RTQU9TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnQ3lBTVRRMEFRWDhoRDBINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFQ0EwQWdEeUFISUFBZ0FrRUNkQ0lVYWlnQ0FFRUNkQ0lWYWlnQ0FDSU9Sd1JBSUFYOUNRSTRJQWdnRGtFR2RHb2lELzBKQWd3Z0R5b0NIUDBnQVNBUEtnSXMvU0FDSUE4cUFqejlJQVA5NWdFZ0JmMEpBaWdnRC8wSkFnZ2dEeW9DR1AwZ0FTQVBLZ0lvL1NBQ0lBOHFBamo5SUFQOTVnRWdCZjBKQWdnZ0QvMEpBZ0FnRHlvQ0VQMGdBU0FQS2dJZy9TQUNJQThxQWpEOUlBUDk1Z0VnQmYwSkFoZ2dELzBKQWdRZ0R5b0NGUDBnQVNBUEtnSWsvU0FDSUE4cUFqVDlJQVA5NWdIOTVBSDk1QUg5NUFFaEVTQU9JUThMSUFNZ0ZHb0NmeUFSL1I4RElBRWdGVUVDZENJT1FReHlhaW9DQUpRZ0VmMGZBaUFCSUE1QkNISnFLZ0lBbENBUi9SOEFJQUVnRG1vcUFnQ1VJQkg5SHdFZ0FTQU9RUVJ5YWlvQ0FKU1NrcEs3UkFBQUFBQUFBTEJBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaURqWUNBQ0FLSUE0Z0NpQU9TQnNoQ2lBTklBNGdEU0FPU2hzaERTQUNRUUZxSWdJZ0MwY05BQXNNQVF0QmlJQ0FnSGdoRFVINC8vLy9CeUVLQ3lBTElBeExCRUFnQ1VFQmE3TWdEYklnQ3JLVGxTRVhJQXdoRFFOQUFuOGdGeUFESUExQkFuUnFJZ0VvQWdBZ0NtdXlsQ0lZaTBNQUFBQlBYUVJBSUJpb0RBRUxRWUNBZ0lCNEN5RU9JQUVnRGpZQ0FDQUVJQTVCQW5ScUlnRWdBU2dDQUVFQmFqWUNBQ0FOUVFGcUlnMGdDMGNOQUFzTElBbEJBazhFUUNBRUtBSUFJUTFCQVNFS0EwQWdCQ0FLUVFKMGFpSUJJQUVvQWdBZ0RXb2lEVFlDQUNBS1FRRnFJZ29nQ1VjTkFBc0xJQXhCQUVvRVFDQU1JUW9EUUNBR0lBcEJBV3NpQVVFQ2RDSUNhaUFBSUFKcUtBSUFOZ0lBSUFwQkFVc2hBaUFCSVFvZ0FnMEFDd3NnQ3lBTVNnUkFJQXNoQ2dOQUlBWWdDeUFFSUFNZ0NrRUJheUlLUVFKMElnRnFLQUlBUVFKMGFpSUNLQUlBSWdWclFRSjBhaUFBSUFGcUtBSUFOZ0lBSUFJZ0JVRUJhellDQUNBS0lBeEtEUUFMQ3dzRUFFRUFDdz09XCI7XHJcblxyXG5jb25zdCBTb3J0ZXJXYXNtTm9TSU1EID0gXCJBR0Z6YlFFQUFBQUFEd2hrZVd4cGJtc3VNQUVFQUFBQUFBRVhBbUFBQUdBUWYzOS9mMzkvZjM5L2YzOS9mMzkvZndBQ0VnRURaVzUyQm0xbGJXOXllUUlEQUlDQUJBTURBZ0FCQno0REVWOWZkMkZ6YlY5allXeHNYMk4wYjNKekFBQVlYMTkzWVhOdFgyRndjR3g1WDJSaGRHRmZjbVZzYjJOekFBQUxjMjl5ZEVsdVpHVjRaWE1BQVFxaUR3SUNBQXVjRHdNQmZBZDlCbjhnQ3lBS2F5RU1Ba0FDUUNBT0JFQWdEUVJBUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRTWdEQ0VGQTBBZ0F5QUZRUUowSWdGcUlBSWdBQ0FCYWlnQ0FFRUNkR29vQWdBaUFUWUNBQ0FCSUFvZ0FTQUtTQnNoQ2lBQklBMGdBU0FOU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQXdzZ0R3UkFJQXNnREUwTkFrRi9JUTlCK1AvLy93Y2hDa0dJZ0lDQWVDRU5JQXdoQWdOQUlBOGdCeUFBSUFKQkFuUWlHbW9vQWdCQkFuUWlHMm9vQWdBaURrY0VRQUovSUFVcUFqZ2lFU0FJSUE1QkJuUnFJZzhxQWp5VUlBVXFBaWdpRWlBUEtnSTRsQ0FGS2dJSUloTWdEeW9DTUpRZ0JTb0NHQ0lVSUE4cUFqU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSZ0NmeUFSSUE4cUFpeVVJQklnRHlvQ0tKUWdFeUFQS2dJZ2xDQVVJQThxQWlTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVJrQ2Z5QVJJQThxQWh5VUlCSWdEeW9DR0pRZ0V5QVBLZ0lRbENBVUlBOHFBaFNVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUndDZnlBUklBOHFBZ3lVSUJJZ0R5b0NDSlFnRXlBUEtnSUFsQ0FVSUE4cUFnU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSMGdEaUVQQ3lBRElCcHFJQUVnRzBFQ2RHb2lEaWdDQkNBY2JDQU9LQUlBSUIxc2FpQU9LQUlJSUJsc2FpQU9LQUlNSUJoc2FpSU9OZ0lBSUE0Z0NpQUtJQTVLR3lFS0lBNGdEU0FOSUE1SUd5RU5JQUpCQVdvaUFpQUxSdzBBQ3d3REN3Si9JQVVxQWlpN1JBQUFBQUFBUUk5QW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hBZ0ovSUFVcUFoaTdSQUFBQUFBQVFJOUFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoQnlBTElBeE5BbjhnQlNvQ0NMdEVBQUFBQUFCQWowQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVQUWZqLy8vOEhJUXBCaUlDQWdIZ2hEUTBDSUF3aEJRTkFJQU1nQlVFQ2RDSUlhaUFCSUFBZ0NHb29BZ0JCQkhScUlnZ29BZ1FnQjJ3Z0NDZ0NBQ0FQYkdvZ0NDZ0NDQ0FDYkdvaUNEWUNBQ0FJSUFvZ0NDQUtTQnNoQ2lBSUlBMGdDQ0FOU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0RRUkFRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFJZ0RDRUZBMEFnQXlBRlFRSjBJZ0ZxQW44Z0FpQUFJQUZxS0FJQVFRSjBhaW9DQUx0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5SU9OZ0lBSUFvZ0RpQUtJQTVJR3lFS0lBMGdEaUFOSUE1S0d5RU5JQVZCQVdvaUJTQUxSdzBBQ3d3Q0N5QVBSUVJBSUFzZ0RFME5BU0FGS2dJb0lSRWdCU29DR0NFU0lBVXFBZ2doRTBINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFRkEwQUNmeUFSSUFFZ0FDQUZRUUowSWdkcUtBSUFRUVIwYWlJQ0tnSUlsQ0FUSUFJcUFnQ1VJQklnQWlvQ0JKU1NrcnRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFT0lBTWdCMm9nRGpZQ0FDQUtJQTRnQ2lBT1NCc2hDaUFOSUE0Z0RTQU9TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnQ3lBTVRRMEFRWDhoRDBINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFQ0EwQWdEeUFISUFBZ0FrRUNkQ0lZYWlnQ0FFRUNkQ0laYWlnQ0FDSU9Sd1JBSUFVcUFqZ2lFU0FJSUE1QkJuUnFJZzhxQWp5VUlBVXFBaWdpRWlBUEtnSTRsQ0FGS2dJSUloTWdEeW9DTUpRZ0JTb0NHQ0lVSUE4cUFqU1VrcEtTSVJVZ0VTQVBLZ0lzbENBU0lBOHFBaWlVSUJNZ0R5b0NJSlFnRkNBUEtnSWtsSktTa2lFV0lCRWdEeW9DSEpRZ0VpQVBLZ0lZbENBVElBOHFBaENVSUJRZ0R5b0NGSlNTa3BJaEZ5QVJJQThxQWd5VUlCSWdEeW9DQ0pRZ0V5QVBLZ0lBbENBVUlBOHFBZ1NVa3BLU0lSRWdEaUVQQ3lBRElCaHFBbjhnRlNBQklCbEJBblJxSWc0cUFneVVJQllnRGlvQ0NKUWdFU0FPS2dJQWxDQVhJQTRxQWdTVWtwS1N1MFFBQUFBQUFBQ3dRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSWc0MkFnQWdDaUFPSUFvZ0RrZ2JJUW9nRFNBT0lBMGdEa29iSVEwZ0FrRUJhaUlDSUF0SERRQUxEQUVMUVlpQWdJQjRJUTFCK1AvLy93Y2hDZ3NnQ3lBTVN3UkFJQWxCQVd1eklBMnlJQXF5azVVaEVTQU1JUTBEUUFKL0lCRWdBeUFOUVFKMGFpSUJLQUlBSUFwcnNwUWlFb3REQUFBQVQxMEVRQ0FTcUF3QkMwR0FnSUNBZUFzaERpQUJJQTQyQWdBZ0JDQU9RUUowYWlJQklBRW9BZ0JCQVdvMkFnQWdEVUVCYWlJTklBdEhEUUFMQ3lBSlFRSlBCRUFnQkNnQ0FDRU5RUUVoQ2dOQUlBUWdDa0VDZEdvaUFTQUJLQUlBSUExcUlnMDJBZ0FnQ2tFQmFpSUtJQWxIRFFBTEN5QU1RUUJLQkVBZ0RDRUtBMEFnQmlBS1FRRnJJZ0ZCQW5RaUFtb2dBQ0FDYWlnQ0FEWUNBQ0FLUVFGTElBRWhDZzBBQ3dzZ0N5QU1TZ1JBSUFzaENnTkFJQVlnQ3lBRUlBTWdDa0VCYXlJS1FRSjBJZ0ZxS0FJQVFRSjBhaUlDS0FJQUlnVnJRUUowYWlBQUlBRnFLQUlBTmdJQUlBSWdCVUVCYXpZQ0FDQUtJQXhLRFFBTEN3cz1cIjtcclxuXHJcbmNvbnN0IFNvcnRlcldhc21Ob25TaGFyZWQgPSBcIkFHRnpiUUVBQUFBQUR3aGtlV3hwYm1zdU1BRUVBQUFBQUFFWEFtQUFBR0FRZjM5L2YzOS9mMzkvZjM5L2YzOS9md0FDRHdFRFpXNTJCbTFsYlc5eWVRSUFBQU1EQWdBQkJ6NERFVjlmZDJGemJWOWpZV3hzWDJOMGIzSnpBQUFZWDE5M1lYTnRYMkZ3Y0d4NVgyUmhkR0ZmY21Wc2IyTnpBQUFMYzI5eWRFbHVaR1Y0WlhNQUFRcnJEd0lDQUF2bER3UUJmQU43QjMwRGZ5QUxJQXBySVF3Q1FBSkFJQTRFUUNBTkJFQkIrUC8vL3djaENrR0lnSUNBZUNFTklBc2dERTBOQXlBTUlRVURRQ0FESUFWQkFuUWlBV29nQWlBQUlBRnFLQUlBUVFKMGFpZ0NBQ0lCTmdJQUlBRWdDaUFCSUFwSUd5RUtJQUVnRFNBQklBMUtHeUVOSUFWQkFXb2lCU0FMUncwQUN3d0RDeUFQQkVBZ0N5QU1UUTBDUVg4aEQwSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUNBMEFnRHlBSElBQWdBa0VDZENJY2FpZ0NBQ0lkUVFKMGFpZ0NBQ0liUndSQUFuOGdCZjBKQWpnZ0NDQWJRUVowYWlJTy9Ra0NEQ0FPS2dJYy9TQUJJQTRxQWl6OUlBSWdEaW9DUFAwZ0EvM21BU0FGL1FrQ0tDQU8vUWtDQ0NBT0tnSVkvU0FCSUE0cUFpajlJQUlnRGlvQ09QMGdBLzNtQVNBRi9Ra0NDQ0FPL1FrQ0FDQU9LZ0lRL1NBQklBNHFBaUQ5SUFJZ0Rpb0NNUDBnQS8zbUFTQUYvUWtDR0NBTy9Ra0NCQ0FPS2dJVS9TQUJJQTRxQWlUOUlBSWdEaW9DTlAwZ0EvM21BZjNrQWYza0FmM2tBU0lSL1YvOURBQUFBQUFBUUk5QUFBQUFBQUJBajBBaUV2M3lBU0lUL1NFQkloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RU9BbjhnRS8waEFDSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBdjlFU0FPL1J3QkFuOGdFU0FSL1EwSUNRb0xEQTBPRHdBQkFnTUFBUUlEL1Y4Z0V2M3lBU0lSL1NFQUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEMvMGNBZ0ovSUJIOUlRRWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0wvUndESVJJZ0d5RVBDeUFESUJ4cUlBRWdIVUVFZEdyOUFBQUFJQkw5dFFFaUVmMGJBQ0FSL1JzQmFpQVIvUnNDYWlBUi9Sc0RhaUlPTmdJQUlBNGdDaUFLSUE1S0d5RUtJQTRnRFNBTklBNUlHeUVOSUFKQkFXb2lBaUFMUncwQUN3d0RDd0ovSUFVcUFnaTcvUlFnQlNvQ0dMdjlJZ0g5REFBQUFBQUFRSTlBQUFBQUFBQkFqMEQ5OGdFaUVmMGhBU0lRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoRGdKL0lCSDlJUUFpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMQW44Z0JTb0NLTHRFQUFBQUFBQkFqMENpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFRlFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUUw5RVNBTy9Sd0JJQVg5SEFJaEVpQU1JUVVEUUNBRElBVkJBblFpQW1vZ0FTQUFJQUpxS0FJQVFRUjBhdjBBQUFBZ0V2MjFBU0lSL1JzQUlCSDlHd0ZxSUJIOUd3SnFJZ0kyQWdBZ0FpQUtJQUlnQ2tnYklRb2dBaUFOSUFJZ0RVb2JJUTBnQlVFQmFpSUZJQXRIRFFBTERBSUxJQTBFUUVINC8vLy9CeUVLUVlpQWdJQjRJUTBnQ3lBTVRRMENJQXdoQlFOQUlBTWdCVUVDZENJQmFnSi9JQUlnQUNBQmFpZ0NBRUVDZEdvcUFnQzdSQUFBQUFBQUFMQkFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNpRGpZQ0FDQUtJQTRnQ2lBT1NCc2hDaUFOSUE0Z0RTQU9TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnRDBVRVFDQUxJQXhORFFFZ0JTb0NLQ0VVSUFVcUFoZ2hGU0FGS2dJSUlSWkIrUC8vL3djaENrR0lnSUNBZUNFTklBd2hCUU5BQW44Z0ZDQUJJQUFnQlVFQ2RDSUhhaWdDQUVFRWRHb2lBaW9DQ0pRZ0ZpQUNLZ0lBbENBVklBSXFBZ1NVa3BLN1JBQUFBQUFBQUxCQW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hEaUFESUFkcUlBNDJBZ0FnQ2lBT0lBb2dEa2diSVFvZ0RTQU9JQTBnRGtvYklRMGdCVUVCYWlJRklBdEhEUUFMREFJTElBc2dERTBOQUVGL0lROUIrUC8vL3djaENrR0lnSUNBZUNFTklBd2hBZ05BSUE4Z0J5QUFJQUpCQW5RaUcyb29BZ0JCQW5RaUhHb29BZ0FpRGtjRVFDQUZLZ0k0SWhRZ0NDQU9RUVowYWlJUEtnSThsQ0FGS2dJb0loVWdEeW9DT0pRZ0JTb0NDQ0lXSUE4cUFqQ1VJQVVxQWhnaUZ5QVBLZ0kwbEpLU2tpRVlJQlFnRHlvQ0xKUWdGU0FQS2dJb2xDQVdJQThxQWlDVUlCY2dEeW9DSkpTU2twSWhHU0FVSUE4cUFoeVVJQlVnRHlvQ0dKUWdGaUFQS2dJUWxDQVhJQThxQWhTVWtwS1NJUm9nRkNBUEtnSU1sQ0FWSUE4cUFnaVVJQllnRHlvQ0FKUWdGeUFQS2dJRWxKS1NraUVVSUE0aER3c2dBeUFiYWdKL0lCZ2dBU0FjUVFKMGFpSU9LZ0lNbENBWklBNHFBZ2lVSUJRZ0Rpb0NBSlFnR2lBT0tnSUVsSktTa3J0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5SU9OZ0lBSUFvZ0RpQUtJQTVJR3lFS0lBMGdEaUFOSUE1S0d5RU5JQUpCQVdvaUFpQUxSdzBBQ3d3QkMwR0lnSUNBZUNFTlFmai8vLzhISVFvTElBc2dERXNFUUNBSlFRRnJzeUFOc2lBS3NwT1ZJUlFnRENFTkEwQUNmeUFVSUFNZ0RVRUNkR29pQVNnQ0FDQUthN0tVSWhXTFF3QUFBRTlkQkVBZ0ZhZ01BUXRCZ0lDQWdIZ0xJUTRnQVNBT05nSUFJQVFnRGtFQ2RHb2lBU0FCS0FJQVFRRnFOZ0lBSUExQkFXb2lEU0FMUncwQUN3c2dDVUVDVHdSQUlBUW9BZ0FoRFVFQklRb0RRQ0FFSUFwQkFuUnFJZ0VnQVNnQ0FDQU5haUlOTmdJQUlBcEJBV29pQ2lBSlJ3MEFDd3NnREVFQVNnUkFJQXdoQ2dOQUlBWWdDa0VCYXlJQlFRSjBJZ0pxSUFBZ0Ftb29BZ0EyQWdBZ0NrRUJTeUFCSVFvTkFBc0xJQXNnREVvRVFDQUxJUW9EUUNBR0lBc2dCQ0FESUFwQkFXc2lDa0VDZENJQmFpZ0NBRUVDZEdvaUFpZ0NBQ0lGYTBFQ2RHb2dBQ0FCYWlnQ0FEWUNBQ0FDSUFWQkFXczJBZ0FnQ2lBTVNnMEFDd3NMXCI7XHJcblxyXG5jb25zdCBTb3J0ZXJXYXNtTm9TSU1ETm9uU2hhcmVkID0gXCJBR0Z6YlFFQUFBQUFEd2hrZVd4cGJtc3VNQUVFQUFBQUFBRVhBbUFBQUdBUWYzOS9mMzkvZjM5L2YzOS9mMzkvZndBQ0R3RURaVzUyQm0xbGJXOXllUUlBQUFNREFnQUJCejRERVY5ZmQyRnpiVjlqWVd4c1gyTjBiM0p6QUFBWVgxOTNZWE50WDJGd2NHeDVYMlJoZEdGZmNtVnNiMk56QUFBTGMyOXlkRWx1WkdWNFpYTUFBUXFpRHdJQ0FBdWNEd01CZkFkOUJuOGdDeUFLYXlFTUFrQUNRQ0FPQkVBZ0RRUkFRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFNZ0RDRUZBMEFnQXlBRlFRSjBJZ0ZxSUFJZ0FDQUJhaWdDQUVFQ2RHb29BZ0FpQVRZQ0FDQUJJQW9nQVNBS1NCc2hDaUFCSUEwZ0FTQU5TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01Bd3NnRHdSQUlBc2dERTBOQWtGL0lROUIrUC8vL3djaENrR0lnSUNBZUNFTklBd2hBZ05BSUE4Z0J5QUFJQUpCQW5RaUdtb29BZ0JCQW5RaUcyb29BZ0FpRGtjRVFBSi9JQVVxQWpnaUVTQUlJQTVCQm5ScUlnOHFBanlVSUFVcUFpZ2lFaUFQS2dJNGxDQUZLZ0lJSWhNZ0R5b0NNSlFnQlNvQ0dDSVVJQThxQWpTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVJnQ2Z5QVJJQThxQWl5VUlCSWdEeW9DS0pRZ0V5QVBLZ0lnbENBVUlBOHFBaVNVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUmtDZnlBUklBOHFBaHlVSUJJZ0R5b0NHSlFnRXlBUEtnSVFsQ0FVSUE4cUFoU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSd0NmeUFSSUE4cUFneVVJQklnRHlvQ0NKUWdFeUFQS2dJQWxDQVVJQThxQWdTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVIwZ0RpRVBDeUFESUJwcUlBRWdHMEVDZEdvaURpZ0NCQ0FjYkNBT0tBSUFJQjFzYWlBT0tBSUlJQmxzYWlBT0tBSU1JQmhzYWlJT05nSUFJQTRnQ2lBS0lBNUtHeUVLSUE0Z0RTQU5JQTVJR3lFTklBSkJBV29pQWlBTFJ3MEFDd3dEQ3dKL0lBVXFBaWk3UkFBQUFBQUFRSTlBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaEFnSi9JQVVxQWhpN1JBQUFBQUFBUUk5QW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hCeUFMSUF4TkFuOGdCU29DQ0x0RUFBQUFBQUJBajBDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RVBRZmovLy84SElRcEJpSUNBZ0hnaERRMENJQXdoQlFOQUlBTWdCVUVDZENJSWFpQUJJQUFnQ0dvb0FnQkJCSFJxSWdnb0FnUWdCMndnQ0NnQ0FDQVBiR29nQ0NnQ0NDQUNiR29pQ0RZQ0FDQUlJQW9nQ0NBS1NCc2hDaUFJSUEwZ0NDQU5TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnRFFSQVFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUUlnRENFRkEwQWdBeUFGUVFKMElnRnFBbjhnQWlBQUlBRnFLQUlBUVFKMGFpb0NBTHRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lJT05nSUFJQW9nRGlBS0lBNUlHeUVLSUEwZ0RpQU5JQTVLR3lFTklBVkJBV29pQlNBTFJ3MEFDd3dDQ3lBUFJRUkFJQXNnREUwTkFTQUZLZ0lvSVJFZ0JTb0NHQ0VTSUFVcUFnZ2hFMEg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VGQTBBQ2Z5QVJJQUVnQUNBRlFRSjBJZ2RxS0FJQVFRUjBhaUlDS2dJSWxDQVRJQUlxQWdDVUlCSWdBaW9DQkpTU2tydEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVPSUFNZ0Iyb2dEallDQUNBS0lBNGdDaUFPU0JzaENpQU5JQTRnRFNBT1Noc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dDeUFNVFEwQVFYOGhEMEg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VDQTBBZ0R5QUhJQUFnQWtFQ2RDSVlhaWdDQUVFQ2RDSVphaWdDQUNJT1J3UkFJQVVxQWpnaUVTQUlJQTVCQm5ScUlnOHFBanlVSUFVcUFpZ2lFaUFQS2dJNGxDQUZLZ0lJSWhNZ0R5b0NNSlFnQlNvQ0dDSVVJQThxQWpTVWtwS1NJUlVnRVNBUEtnSXNsQ0FTSUE4cUFpaVVJQk1nRHlvQ0lKUWdGQ0FQS2dJa2xKS1NraUVXSUJFZ0R5b0NISlFnRWlBUEtnSVlsQ0FUSUE4cUFoQ1VJQlFnRHlvQ0ZKU1NrcEloRnlBUklBOHFBZ3lVSUJJZ0R5b0NDSlFnRXlBUEtnSUFsQ0FVSUE4cUFnU1VrcEtTSVJFZ0RpRVBDeUFESUJocUFuOGdGU0FCSUJsQkFuUnFJZzRxQWd5VUlCWWdEaW9DQ0pRZ0VTQU9LZ0lBbENBWElBNHFBZ1NVa3BLU3UwUUFBQUFBQUFDd1FLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJZzQyQWdBZ0NpQU9JQW9nRGtnYklRb2dEU0FPSUEwZ0Rrb2JJUTBnQWtFQmFpSUNJQXRIRFFBTERBRUxRWWlBZ0lCNElRMUIrUC8vL3djaENnc2dDeUFNU3dSQUlBbEJBV3V6SUEyeUlBcXlrNVVoRVNBTUlRMERRQUovSUJFZ0F5QU5RUUowYWlJQktBSUFJQXByc3BRaUVvdERBQUFBVDEwRVFDQVNxQXdCQzBHQWdJQ0FlQXNoRGlBQklBNDJBZ0FnQkNBT1FRSjBhaUlCSUFFb0FnQkJBV28yQWdBZ0RVRUJhaUlOSUF0SERRQUxDeUFKUVFKUEJFQWdCQ2dDQUNFTlFRRWhDZ05BSUFRZ0NrRUNkR29pQVNBQktBSUFJQTFxSWcwMkFnQWdDa0VCYWlJS0lBbEhEUUFMQ3lBTVFRQktCRUFnRENFS0EwQWdCaUFLUVFGcklnRkJBblFpQW1vZ0FDQUNhaWdDQURZQ0FDQUtRUUZMSUFFaENnMEFDd3NnQ3lBTVNnUkFJQXNoQ2dOQUlBWWdDeUFFSUFNZ0NrRUJheUlLUVFKMElnRnFLQUlBUVFKMGFpSUNLQUlBSWdWclFRSjBhaUFBSUFGcUtBSUFOZ0lBSUFJZ0JVRUJhellDQUNBS0lBeEtEUUFMQ3dzPVwiO1xyXG5cclxuLyoqXHJcbiAqIFNvcnQgd29ya2VyIGZ1bmN0aW9uIHRoYXQgcnVucyBpbiBhIFdlYiBXb3JrZXJcclxuICogSGFuZGxlcyB0aGUgYWN0dWFsIHNvcnRpbmcgbG9naWMgdXNpbmcgV2ViQXNzZW1ibHlcclxuICovXHJcbmZ1bmN0aW9uIHNvcnRXb3JrZXIoc2VsZikge1xyXG5cclxuICAgIGxldCB3YXNtSW5zdGFuY2U7XHJcbiAgICBsZXQgd2FzbU1lbW9yeTtcclxuICAgIGxldCB1c2VTaGFyZWRNZW1vcnk7XHJcbiAgICBsZXQgaW50ZWdlckJhc2VkU29ydDtcclxuICAgIGxldCBkeW5hbWljTW9kZTtcclxuICAgIGxldCBzcGxhdENvdW50O1xyXG4gICAgbGV0IGluZGV4ZXNUb1NvcnRPZmZzZXQ7XHJcbiAgICBsZXQgc29ydGVkSW5kZXhlc09mZnNldDtcclxuICAgIGxldCBzY2VuZUluZGV4ZXNPZmZzZXQ7XHJcbiAgICBsZXQgdHJhbnNmb3Jtc09mZnNldDtcclxuICAgIGxldCBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldDtcclxuICAgIGxldCBtYXBwZWREaXN0YW5jZXNPZmZzZXQ7XHJcbiAgICBsZXQgZnJlcXVlbmNpZXNPZmZzZXQ7XHJcbiAgICBsZXQgY2VudGVyc09mZnNldDtcclxuICAgIGxldCBtb2RlbFZpZXdQcm9qT2Zmc2V0O1xyXG4gICAgbGV0IGNvdW50c1plcm87XHJcbiAgICBsZXQgc29ydGVkSW5kZXhlc091dDtcclxuICAgIGxldCBkaXN0YW5jZU1hcFJhbmdlO1xyXG4gICAgbGV0IHVwbG9hZGVkU3BsYXRDb3VudDtcclxuICAgIGxldCBDb25zdGFudHM7XHJcblxyXG4gICAgZnVuY3Rpb24gc29ydChzcGxhdFNvcnRDb3VudCwgc3BsYXRSZW5kZXJDb3VudCwgbW9kZWxWaWV3UHJvaixcclxuICAgICAgICAgICAgICAgICAgdXNlUHJlY29tcHV0ZWREaXN0YW5jZXMsIGNvcHlJbmRleGVzVG9Tb3J0LCBjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXMsIGNvcHlUcmFuc2Zvcm1zKSB7XHJcbiAgICAgICAgY29uc3Qgc29ydFN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuICAgICAgICBpZiAoIXVzZVNoYXJlZE1lbW9yeSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleGVzVG9Tb3J0ID0gbmV3IFVpbnQzMkFycmF5KHdhc21NZW1vcnksIGluZGV4ZXNUb1NvcnRPZmZzZXQsIGNvcHlJbmRleGVzVG9Tb3J0LmJ5dGVMZW5ndGggLyBDb25zdGFudHMuQnl0ZXNQZXJJbnQpO1xyXG4gICAgICAgICAgICBpbmRleGVzVG9Tb3J0LnNldChjb3B5SW5kZXhlc1RvU29ydCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybXMgPSBuZXcgRmxvYXQzMkFycmF5KHdhc21NZW1vcnksIHRyYW5zZm9ybXNPZmZzZXQsIGNvcHlUcmFuc2Zvcm1zLmJ5dGVMZW5ndGggLyBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCk7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybXMuc2V0KGNvcHlUcmFuc2Zvcm1zKTtcclxuICAgICAgICAgICAgaWYgKHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcHJlY29tcHV0ZWREaXN0YW5jZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZWdlckJhc2VkU29ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWNvbXB1dGVkRGlzdGFuY2VzID0gbmV3IEludDMyQXJyYXkod2FzbU1lbW9yeSwgcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXMuYnl0ZUxlbmd0aCAvIENvbnN0YW50cy5CeXRlc1BlckludCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWNvbXB1dGVkRGlzdGFuY2VzID0gbmV3IEZsb2F0MzJBcnJheSh3YXNtTWVtb3J5LCBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weVByZWNvbXB1dGVkRGlzdGFuY2VzLmJ5dGVMZW5ndGggLyBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwcmVjb21wdXRlZERpc3RhbmNlcy5zZXQoY29weVByZWNvbXB1dGVkRGlzdGFuY2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjb3VudHNaZXJvKSBjb3VudHNaZXJvID0gbmV3IFVpbnQzMkFycmF5KGRpc3RhbmNlTWFwUmFuZ2UpO1xyXG4gICAgICAgIG5ldyBGbG9hdDMyQXJyYXkod2FzbU1lbW9yeSwgbW9kZWxWaWV3UHJvak9mZnNldCwgMTYpLnNldChtb2RlbFZpZXdQcm9qKTtcclxuICAgICAgICBuZXcgVWludDMyQXJyYXkod2FzbU1lbW9yeSwgZnJlcXVlbmNpZXNPZmZzZXQsIGRpc3RhbmNlTWFwUmFuZ2UpLnNldChjb3VudHNaZXJvKTtcclxuICAgICAgICB3YXNtSW5zdGFuY2UuZXhwb3J0cy5zb3J0SW5kZXhlcyhpbmRleGVzVG9Tb3J0T2Zmc2V0LCBjZW50ZXJzT2Zmc2V0LCBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWREaXN0YW5jZXNPZmZzZXQsIGZyZXF1ZW5jaWVzT2Zmc2V0LCBtb2RlbFZpZXdQcm9qT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4ZXNPZmZzZXQsIHNjZW5lSW5kZXhlc09mZnNldCwgdHJhbnNmb3Jtc09mZnNldCwgZGlzdGFuY2VNYXBSYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdFNvcnRDb3VudCwgc3BsYXRSZW5kZXJDb3VudCwgc3BsYXRDb3VudCwgdXNlUHJlY29tcHV0ZWREaXN0YW5jZXMsIGludGVnZXJCYXNlZFNvcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHluYW1pY01vZGUpO1xyXG5cclxuICAgICAgICBjb25zdCBzb3J0TWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgJ3NvcnREb25lJzogdHJ1ZSxcclxuICAgICAgICAgICAgJ3NwbGF0U29ydENvdW50Jzogc3BsYXRTb3J0Q291bnQsXHJcbiAgICAgICAgICAgICdzcGxhdFJlbmRlckNvdW50Jzogc3BsYXRSZW5kZXJDb3VudCxcclxuICAgICAgICAgICAgJ3NvcnRUaW1lJzogMFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCF1c2VTaGFyZWRNZW1vcnkpIHtcclxuICAgICAgICAgICAgY29uc3Qgc29ydGVkSW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheSh3YXNtTWVtb3J5LCBzb3J0ZWRJbmRleGVzT2Zmc2V0LCBzcGxhdFJlbmRlckNvdW50KTtcclxuICAgICAgICAgICAgaWYgKCFzb3J0ZWRJbmRleGVzT3V0IHx8IHNvcnRlZEluZGV4ZXNPdXQubGVuZ3RoIDwgc3BsYXRSZW5kZXJDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgc29ydGVkSW5kZXhlc091dCA9IG5ldyBVaW50MzJBcnJheShzcGxhdFJlbmRlckNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzb3J0ZWRJbmRleGVzT3V0LnNldChzb3J0ZWRJbmRleGVzKTtcclxuICAgICAgICAgICAgc29ydE1lc3NhZ2Uuc29ydGVkSW5kZXhlcyA9IHNvcnRlZEluZGV4ZXNPdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNvcnRFbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIHNvcnRNZXNzYWdlLnNvcnRUaW1lID0gc29ydEVuZFRpbWUgLSBzb3J0U3RhcnRUaW1lO1xyXG5cclxuICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHNvcnRNZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZWxmLm9ubWVzc2FnZSA9IChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUuZGF0YS5jZW50ZXJzKSB7XHJcbiAgICAgICAgICAgIGxldCBjZW50ZXJzID0gZS5kYXRhLmNlbnRlcnM7XHJcbiAgICAgICAgICAgIGxldCBzY2VuZUluZGV4ZXMgPSBlLmRhdGEuc2NlbmVJbmRleGVzO1xyXG4gICAgICAgICAgICBpZiAoaW50ZWdlckJhc2VkU29ydCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IEludDMyQXJyYXkod2FzbU1lbW9yeSwgY2VudGVyc09mZnNldCArIGUuZGF0YS5yYW5nZS5mcm9tICogQ29uc3RhbnRzLkJ5dGVzUGVySW50ICogNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YS5yYW5nZS5jb3VudCAqIDQpLnNldChuZXcgSW50MzJBcnJheShjZW50ZXJzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KHdhc21NZW1vcnksIGNlbnRlcnNPZmZzZXQgKyBlLmRhdGEucmFuZ2UuZnJvbSAqIENvbnN0YW50cy5CeXRlc1BlckZsb2F0ICogNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRhLnJhbmdlLmNvdW50ICogNCkuc2V0KG5ldyBGbG9hdDMyQXJyYXkoY2VudGVycykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkeW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IFVpbnQzMkFycmF5KHdhc21NZW1vcnksIHNjZW5lSW5kZXhlc09mZnNldCArIGUuZGF0YS5yYW5nZS5mcm9tICogNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEucmFuZ2UuY291bnQpLnNldChuZXcgVWludDMyQXJyYXkoc2NlbmVJbmRleGVzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBsb2FkZWRTcGxhdENvdW50ID0gZS5kYXRhLnJhbmdlLmZyb20gKyBlLmRhdGEucmFuZ2UuY291bnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmRhdGEuc29ydCkge1xyXG4gICAgICAgICAgICBjb25zdCByZW5kZXJDb3VudCA9IE1hdGgubWluKGUuZGF0YS5zb3J0LnNwbGF0UmVuZGVyQ291bnQgfHwgMCwgdXBsb2FkZWRTcGxhdENvdW50KTtcclxuICAgICAgICAgICAgY29uc3Qgc29ydENvdW50ID0gTWF0aC5taW4oZS5kYXRhLnNvcnQuc3BsYXRTb3J0Q291bnQgfHwgMCwgdXBsb2FkZWRTcGxhdENvdW50KTtcclxuICAgICAgICAgICAgY29uc3QgdXNlUHJlY29tcHV0ZWREaXN0YW5jZXMgPSBlLmRhdGEuc29ydC51c2VQcmVjb21wdXRlZERpc3RhbmNlcztcclxuXHJcbiAgICAgICAgICAgIGxldCBjb3B5SW5kZXhlc1RvU29ydDtcclxuICAgICAgICAgICAgbGV0IGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcztcclxuICAgICAgICAgICAgbGV0IGNvcHlUcmFuc2Zvcm1zO1xyXG4gICAgICAgICAgICBpZiAoIXVzZVNoYXJlZE1lbW9yeSkge1xyXG4gICAgICAgICAgICAgICAgY29weUluZGV4ZXNUb1NvcnQgPSBlLmRhdGEuc29ydC5pbmRleGVzVG9Tb3J0O1xyXG4gICAgICAgICAgICAgICAgY29weVRyYW5zZm9ybXMgPSBlLmRhdGEuc29ydC50cmFuc2Zvcm1zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzKSBjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXMgPSBlLmRhdGEuc29ydC5wcmVjb21wdXRlZERpc3RhbmNlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzb3J0KHNvcnRDb3VudCwgcmVuZGVyQ291bnQsIGUuZGF0YS5zb3J0Lm1vZGVsVmlld1Byb2osIHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzLFxyXG4gICAgICAgICAgICAgICAgIGNvcHlJbmRleGVzVG9Tb3J0LCBjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXMsIGNvcHlUcmFuc2Zvcm1zKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuZGF0YS5pbml0KSB7XHJcbiAgICAgICAgICAgIC8vIFllcCwgdGhpcyBpcyBzdXBlciBoYWNreSBhbmQgZ3Jvc3MgOihcclxuICAgICAgICAgICAgQ29uc3RhbnRzID0gZS5kYXRhLmluaXQuQ29uc3RhbnRzO1xyXG5cclxuICAgICAgICAgICAgc3BsYXRDb3VudCA9IGUuZGF0YS5pbml0LnNwbGF0Q291bnQ7XHJcbiAgICAgICAgICAgIHVzZVNoYXJlZE1lbW9yeSA9IGUuZGF0YS5pbml0LnVzZVNoYXJlZE1lbW9yeTtcclxuICAgICAgICAgICAgaW50ZWdlckJhc2VkU29ydCA9IGUuZGF0YS5pbml0LmludGVnZXJCYXNlZFNvcnQ7XHJcbiAgICAgICAgICAgIGR5bmFtaWNNb2RlID0gZS5kYXRhLmluaXQuZHluYW1pY01vZGU7XHJcbiAgICAgICAgICAgIGRpc3RhbmNlTWFwUmFuZ2UgPSBlLmRhdGEuaW5pdC5kaXN0YW5jZU1hcFJhbmdlO1xyXG4gICAgICAgICAgICB1cGxvYWRlZFNwbGF0Q291bnQgPSAwO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgQ0VOVEVSU19CWVRFU19QRVJfRU5UUlkgPSBpbnRlZ2VyQmFzZWRTb3J0ID8gKENvbnN0YW50cy5CeXRlc1BlckludCAqIDQpIDogKENvbnN0YW50cy5CeXRlc1BlckZsb2F0ICogNCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzb3J0ZXJXYXNtQnl0ZXMgPSBuZXcgVWludDhBcnJheShlLmRhdGEuaW5pdC5zb3J0ZXJXYXNtQnl0ZXMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbWF0cml4U2l6ZSA9IDE2ICogQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9ySW5kZXhlc1RvU29ydCA9IHNwbGF0Q291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9yQ2VudGVycyA9IHNwbGF0Q291bnQgKiBDRU5URVJTX0JZVEVTX1BFUl9FTlRSWTtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JNb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4ID0gbWF0cml4U2l6ZTtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JQcmVjb21wdXRlZERpc3RhbmNlcyA9IGludGVnZXJCYXNlZFNvcnQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNwbGF0Q291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQpIDogKHNwbGF0Q291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkRm9yTWFwcGVkRGlzdGFuY2VzID0gc3BsYXRDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckludDtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JTb3J0ZWRJbmRleGVzID0gc3BsYXRDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckludDtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JJbnRlcm1lZGlhdGVTb3J0QnVmZmVycyA9IGludGVnZXJCYXNlZFNvcnQgPyAoZGlzdGFuY2VNYXBSYW5nZSAqIENvbnN0YW50cy5CeXRlc1BlckludCAqIDIpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGlzdGFuY2VNYXBSYW5nZSAqIENvbnN0YW50cy5CeXRlc1BlckZsb2F0ICogMik7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbW9yeVJlcXVpcmVkZm9yVHJhbnNmb3JtSW5kZXhlcyA9IGR5bmFtaWNNb2RlID8gKHNwbGF0Q291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQpIDogMDtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRmb3JUcmFuc2Zvcm1zID0gZHluYW1pY01vZGUgPyAoQ29uc3RhbnRzLk1heFNjZW5lcyAqIG1hdHJpeFNpemUpIDogMDtcclxuICAgICAgICAgICAgY29uc3QgZXh0cmFNZW1vcnkgPSBDb25zdGFudHMuTWVtb3J5UGFnZVNpemUgKiAzMjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsUmVxdWlyZWRNZW1vcnkgPSBtZW1vcnlSZXF1aXJlZEZvckluZGV4ZXNUb1NvcnQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRGb3JDZW50ZXJzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkRm9yTW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZEZvclByZWNvbXB1dGVkRGlzdGFuY2VzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkRm9yTWFwcGVkRGlzdGFuY2VzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkRm9ySW50ZXJtZWRpYXRlU29ydEJ1ZmZlcnMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRGb3JTb3J0ZWRJbmRleGVzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkZm9yVHJhbnNmb3JtSW5kZXhlcyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZGZvclRyYW5zZm9ybXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFNZW1vcnk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsUGFnZXNSZXF1aXJlZCA9IE1hdGguZmxvb3IodG90YWxSZXF1aXJlZE1lbW9yeSAvIENvbnN0YW50cy5NZW1vcnlQYWdlU2l6ZSApICsgMTtcclxuICAgICAgICAgICAgY29uc3Qgc29ydGVyV2FzbUltcG9ydCA9IHtcclxuICAgICAgICAgICAgICAgIG1vZHVsZToge30sXHJcbiAgICAgICAgICAgICAgICBlbnY6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZW1vcnk6IG5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsOiB0b3RhbFBhZ2VzUmVxdWlyZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IHRvdGFsUGFnZXNSZXF1aXJlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBXZWJBc3NlbWJseS5jb21waWxlKHNvcnRlcldhc21CeXRlcylcclxuICAgICAgICAgICAgLnRoZW4oKHdhc21Nb2R1bGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZSh3YXNtTW9kdWxlLCBzb3J0ZXJXYXNtSW1wb3J0KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKGluc3RhbmNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3YXNtSW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGluZGV4ZXNUb1NvcnRPZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyc09mZnNldCA9IGluZGV4ZXNUb1NvcnRPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvckluZGV4ZXNUb1NvcnQ7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFZpZXdQcm9qT2Zmc2V0ID0gY2VudGVyc09mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9yQ2VudGVycztcclxuICAgICAgICAgICAgICAgIHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0ID0gbW9kZWxWaWV3UHJvak9mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9yTW9kZWxWaWV3UHJvamVjdGlvbk1hdHJpeDtcclxuICAgICAgICAgICAgICAgIG1hcHBlZERpc3RhbmNlc09mZnNldCA9IHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JQcmVjb21wdXRlZERpc3RhbmNlcztcclxuICAgICAgICAgICAgICAgIGZyZXF1ZW5jaWVzT2Zmc2V0ID0gbWFwcGVkRGlzdGFuY2VzT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JNYXBwZWREaXN0YW5jZXM7XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleGVzT2Zmc2V0ID0gZnJlcXVlbmNpZXNPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvckludGVybWVkaWF0ZVNvcnRCdWZmZXJzO1xyXG4gICAgICAgICAgICAgICAgc2NlbmVJbmRleGVzT2Zmc2V0ID0gc29ydGVkSW5kZXhlc09mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9yU29ydGVkSW5kZXhlcztcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybXNPZmZzZXQgPSBzY2VuZUluZGV4ZXNPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZGZvclRyYW5zZm9ybUluZGV4ZXM7XHJcbiAgICAgICAgICAgICAgICB3YXNtTWVtb3J5ID0gc29ydGVyV2FzbUltcG9ydC5lbnYubWVtb3J5LmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIGlmICh1c2VTaGFyZWRNZW1vcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnRTZXR1cFBoYXNlMUNvbXBsZXRlJzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2luZGV4ZXNUb1NvcnRCdWZmZXInOiB3YXNtTWVtb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnaW5kZXhlc1RvU29ydE9mZnNldCc6IGluZGV4ZXNUb1NvcnRPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzb3J0ZWRJbmRleGVzQnVmZmVyJzogd2FzbU1lbW9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnRlZEluZGV4ZXNPZmZzZXQnOiBzb3J0ZWRJbmRleGVzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncHJlY29tcHV0ZWREaXN0YW5jZXNCdWZmZXInOiB3YXNtTWVtb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQnOiBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybXNCdWZmZXInOiB3YXNtTWVtb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3Jtc09mZnNldCc6IHRyYW5zZm9ybXNPZmZzZXRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzb3J0U2V0dXBQaGFzZTFDb21wbGV0ZSc6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzb3J0IHdvcmtlciBmb3IgR1BVLWJhc2VkIHNvcnRpbmdcclxuICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0Q291bnQgLSBOdW1iZXIgb2Ygc3BsYXRzIHRvIHNvcnRcclxuICogQHBhcmFtIHtib29sZWFufSB1c2VTaGFyZWRNZW1vcnkgLSBXaGV0aGVyIHRvIHVzZSBzaGFyZWQgbWVtb3J5XHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlU0lNREluU29ydCAtIFdoZXRoZXIgdG8gZW5hYmxlIFNJTUQgaW5zdHJ1Y3Rpb25zXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW50ZWdlckJhc2VkU29ydCAtIFdoZXRoZXIgdG8gdXNlIGludGVnZXItYmFzZWQgc29ydGluZ1xyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGR5bmFtaWNNb2RlIC0gV2hldGhlciBkeW5hbWljIG1vZGUgaXMgZW5hYmxlZFxyXG4gKiBAcGFyYW0ge251bWJlcn0gc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24gLSBQcmVjaXNpb24gZm9yIGRpc3RhbmNlIG1hcFxyXG4gKiBAcmV0dXJucyB7V29ya2VyfSBUaGUgY3JlYXRlZCBzb3J0IHdvcmtlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNvcnRXb3JrZXIoc3BsYXRDb3VudCwgdXNlU2hhcmVkTWVtb3J5LCBlbmFibGVTSU1ESW5Tb3J0LCBpbnRlZ2VyQmFzZWRTb3J0LCBkeW5hbWljTW9kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24gPSBDb25zdGFudHMuRGVmYXVsdFNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uKSB7XHJcbiAgICBjb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKFxyXG4gICAgICAgIFVSTC5jcmVhdGVPYmplY3RVUkwoXHJcbiAgICAgICAgICAgIG5ldyBCbG9iKFsnKCcsIHNvcnRXb3JrZXIudG9TdHJpbmcoKSwgJykoc2VsZiknXSwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICApLFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgc291cmNlV2FzbSA9IFNvcnRlcldhc207XHJcblxyXG4gICAgLy8gaU9TIG1ha2VzIGNob29zaW5nIHRoZSByaWdodCBXZWJBc3NlbWJseSBjb25maWd1cmF0aW9uIHRyaWNreSA6KFxyXG4gICAgY29uc3QgaU9TU2VtVmVyID0gaXNJT1MoKSA/IGdldElPU1NlbWV2ZXIoKSA6IG51bGw7XHJcbiAgICBpZiAoIWVuYWJsZVNJTURJblNvcnQgJiYgIXVzZVNoYXJlZE1lbW9yeSkge1xyXG4gICAgICAgIHNvdXJjZVdhc20gPSBTb3J0ZXJXYXNtTm9TSU1EO1xyXG4gICAgICAgIC8vIFRlc3Rpbmcgb24gdmFyaW91cyBkZXZpY2VzIGhhcyBzaG93biB0aGF0IGV2ZW4gd2hlbiBzaGFyZWQgbWVtb3J5IGlzIGRpc2FibGVkLCB0aGUgV0FTTSBtb2R1bGUgd2l0aCBzaGFyZWRcclxuICAgICAgICAvLyBtZW1vcnkgY2FuIHN0aWxsIGJlIHVzZWQgbW9zdCBvZiB0aGUgdGltZSAtLSB0aGUgZXhjZXB0aW9uIHNlZW1zIHRvIGJlIGlPUyBkZXZpY2VzIGJlbG93IDE2LjRcclxuICAgICAgICBpZiAoaU9TU2VtVmVyICYmIGlPU1NlbVZlci5tYWpvciA8PSAxNiAmJiBpT1NTZW1WZXIubWlub3IgPCA0KSB7XHJcbiAgICAgICAgICAgIHNvdXJjZVdhc20gPSBTb3J0ZXJXYXNtTm9TSU1ETm9uU2hhcmVkO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoIWVuYWJsZVNJTURJblNvcnQpIHtcclxuICAgICAgICBzb3VyY2VXYXNtID0gU29ydGVyV2FzbU5vU0lNRDtcclxuICAgIH0gZWxzZSBpZiAoIXVzZVNoYXJlZE1lbW9yeSkge1xyXG4gICAgICAgIC8vIFNhbWUgaXNzdWUgd2l0aCBzaGFyZWQgbWVtb3J5IGFzIGFib3ZlIG9uIGlPUyBkZXZpY2VzXHJcbiAgICAgICAgaWYgKGlPU1NlbVZlciAmJiBpT1NTZW1WZXIubWFqb3IgPD0gMTYgJiYgaU9TU2VtVmVyLm1pbm9yIDwgNCkge1xyXG4gICAgICAgICAgICBzb3VyY2VXYXNtID0gU29ydGVyV2FzbU5vblNoYXJlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc29ydGVyV2FzbUJpbmFyeVN0cmluZyA9IGF0b2Ioc291cmNlV2FzbSk7XHJcbiAgICBjb25zdCBzb3J0ZXJXYXNtQnl0ZXMgPSBuZXcgVWludDhBcnJheShzb3J0ZXJXYXNtQmluYXJ5U3RyaW5nLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlcldhc21CaW5hcnlTdHJpbmcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBzb3J0ZXJXYXNtQnl0ZXNbaV0gPSBzb3J0ZXJXYXNtQmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcblxyXG4gICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAnaW5pdCc6IHtcclxuICAgICAgICAgICAgJ3NvcnRlcldhc21CeXRlcyc6IHNvcnRlcldhc21CeXRlcy5idWZmZXIsXHJcbiAgICAgICAgICAgICdzcGxhdENvdW50Jzogc3BsYXRDb3VudCxcclxuICAgICAgICAgICAgJ3VzZVNoYXJlZE1lbW9yeSc6IHVzZVNoYXJlZE1lbW9yeSxcclxuICAgICAgICAgICAgJ2ludGVnZXJCYXNlZFNvcnQnOiBpbnRlZ2VyQmFzZWRTb3J0LFxyXG4gICAgICAgICAgICAnZHluYW1pY01vZGUnOiBkeW5hbWljTW9kZSxcclxuICAgICAgICAgICAgJ2Rpc3RhbmNlTWFwUmFuZ2UnOiAxIDw8IHNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uLFxyXG4gICAgICAgICAgICAvLyBTdXBlciBoYWNreVxyXG4gICAgICAgICAgICAnQ29uc3RhbnRzJzoge1xyXG4gICAgICAgICAgICAgICAgJ0J5dGVzUGVyRmxvYXQnOiBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdCxcclxuICAgICAgICAgICAgICAgICdCeXRlc1BlckludCc6IENvbnN0YW50cy5CeXRlc1BlckludCxcclxuICAgICAgICAgICAgICAgICdNZW1vcnlQYWdlU2l6ZSc6IENvbnN0YW50cy5NZW1vcnlQYWdlU2l6ZSxcclxuICAgICAgICAgICAgICAgICdNYXhTY2VuZXMnOiBDb25zdGFudHMuTWF4U2NlbmVzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB3b3JrZXI7XHJcbn1cclxuIiwiLyoqXHJcbiAqIFZpZXdlclxyXG4gKiBcclxuICogQmFzZWQgb24gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIEhFQVZJTFkgTU9ESUZJRUQgZm9yIEZMQU1FIGF2YXRhciBzdXBwb3J0OlxyXG4gKiAtIEFkZGVkIEZMQU1FIGhlYWQgbW9kZWwgaW50ZWdyYXRpb25cclxuICogLSBFeHRlbmRlZCB3aXRoIGV4cHJlc3Npb24vcG9zZSBjb250cm9sc1xyXG4gKiAtIEFkZGl0aW9uYWwgcmVuZGVyaW5nIHBpcGVsaW5lIG1vZGlmaWNhdGlvbnNcclxuICogLSBBZGRpdGlvbmFsIH45MDAgbGluZXMgb2YgRkxBTUUtc3BlY2lmaWMgY29kZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEJvbmUsIER5bmFtaWNEcmF3VXNhZ2UsIEluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZSwgTWF0aFV0aWxzLCBNYXRyaXg0LCBPcnRob2dyYXBoaWNDYW1lcmEsIFBlcnNwZWN0aXZlQ2FtZXJhLCBRdWF0ZXJuaW9uLCBTY2VuZSwgU2tlbGV0b24sIFZlY3RvcjIsIFZlY3RvcjMsIFdlYkdMUmVuZGVyZXIgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7XHJcbiAgICBnZXRDdXJyZW50VGltZSxcclxuICAgIGNsYW1wLFxyXG4gICAgZGVsYXllZEV4ZWN1dGUsXHJcbiAgICBpc0lPUyxcclxuICAgIGdldElPU1NlbWV2ZXIsXHJcbiAgICBTZW12ZXIsXHJcbiAgICBmZXRjaFdpdGhQcm9ncmVzcyxcclxuICAgIG5hdGl2ZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cyxcclxuICAgIGFib3J0YWJsZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cyxcclxuICAgIGRpc3Bvc2VBbGxNZXNoZXMsXHJcbiAgICBBYm9ydGVkUHJvbWlzZUVycm9yXHJcbn0gZnJvbSAnLi4vdXRpbHMvVXRpbC5qcyc7XHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL0xvZ2dlci5qcyc7XHJcblxyXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1ZpZXdlcicpO1xyXG5pbXBvcnQgeyBSZW5kZXJNb2RlIH0gZnJvbSAnLi4vZW51bXMvUmVuZGVyTW9kZS5qcyc7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSAnLi4vZW51bXMvTG9nTGV2ZWwuanMnO1xyXG5pbXBvcnQgeyBTcGxhdFJlbmRlck1vZGUgfSBmcm9tICcuLi9lbnVtcy9TcGxhdFJlbmRlck1vZGUuanMnO1xyXG5pbXBvcnQgeyBTY2VuZUZvcm1hdCwgc2NlbmVGb3JtYXRGcm9tUGF0aCB9IGZyb20gJy4uL2VudW1zL1NjZW5lRm9ybWF0LmpzJztcclxuaW1wb3J0IHsgU2NlbmVSZXZlYWxNb2RlIH0gZnJvbSAnLi4vZW51bXMvU2NlbmVSZXZlYWxNb2RlLmpzJztcclxuaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzLmpzJztcclxuaW1wb3J0IHsgU3BsYXRNZXNoIH0gZnJvbSAnLi9TcGxhdE1lc2guanMnO1xyXG5pbXBvcnQgeyBTcGxhdFNjZW5lIH0gZnJvbSAnLi9TcGxhdFNjZW5lLmpzJztcclxuaW1wb3J0IHsgRGlyZWN0TG9hZEVycm9yIH0gZnJvbSAnLi4vbG9hZGVycy9EaXJlY3RMb2FkRXJyb3IuanMnO1xyXG5pbXBvcnQgeyBQbHlMb2FkZXIgfSBmcm9tICcuLi9sb2FkZXJzL1BseUxvYWRlci5qcyc7XHJcbmltcG9ydCB7IFJheWNhc3RlciB9IGZyb20gJy4uL3JheWNhc3Rlci9SYXljYXN0ZXIuanMnO1xyXG5pbXBvcnQgeyBjcmVhdGVTb3J0V29ya2VyIH0gZnJvbSAnLi4vd29ya2VyL1NvcnRXb3JrZXIuanMnO1xyXG5pbXBvcnQgeyBcclxuICAgIFNDRU5FX0ZBREVJTl9SQVRFX0ZBU1QsXHJcbiAgICBTQ0VORV9GQURFSU5fUkFURV9HUkFEVUFMLFxyXG4gICAgVEhSRUVfQ0FNRVJBX0ZPVixcclxuICAgIE1JTklNVU1fRElTVEFOQ0VfVE9fTkVXX0ZPQ0FMX1BPSU5ULFxyXG4gICAgQ09OU0VDVVRJVkVfUkVOREVSRURfRlJBTUVTX0ZPUl9GUFNfQ0FMQ1VMQVRJT04sXHJcbiAgICBNSU5fU1BMQVRfQ09VTlRfVE9fU0hPV19TUExBVF9UUkVFX0xPQURJTkdfU1BJTk5FUixcclxuICAgIEZPQ1VTX01BUktFUl9GQURFX0lOX1NQRUVELFxyXG4gICAgRk9DVVNfTUFSS0VSX0ZBREVfT1VUX1NQRUVELFxyXG4gICAgQ29uc3RhbnRzLFxyXG4gICAgTG9hZGVyU3RhdHVzXHJcbn0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuXHJcbi8vIFVJIGNvbXBvbmVudHMgLSBzdHViIGltcGxlbWVudGF0aW9ucyBmb3Igbm93XHJcbmNsYXNzIExvYWRpbmdTcGlubmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG1zZywgY29udGFpbmVyKSB7IHRoaXMudGFza3MgPSBbXTsgfVxyXG4gICAgc2hvdygpIHt9XHJcbiAgICBoaWRlKCkge31cclxuICAgIHNldENvbnRhaW5lcihjKSB7fVxyXG4gICAgYWRkVGFzayhtc2cpIHsgcmV0dXJuIHRoaXMudGFza3MucHVzaChtc2cpOyB9XHJcbiAgICByZW1vdmVUYXNrKGlkKSB7fVxyXG4gICAgcmVtb3ZlQWxsVGFza3MoKSB7IHRoaXMudGFza3MgPSBbXTsgfVxyXG4gICAgc2V0TWVzc2FnZUZvclRhc2soaWQsIG1zZykge31cclxufVxyXG5cclxuY2xhc3MgTG9hZGluZ1Byb2dyZXNzQmFyIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge31cclxuICAgIHNob3coKSB7fVxyXG4gICAgaGlkZSgpIHt9XHJcbiAgICBzZXRDb250YWluZXIoYykge31cclxuICAgIHNldFByb2dyZXNzKHApIHt9XHJcbn1cclxuXHJcbmNsYXNzIFNjZW5lSGVscGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lKSB7IFxyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTsgXHJcbiAgICAgICAgdGhpcy5tZXNoQ3Vyc29yID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1lc2hDdXJzb3JWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5mb2N1c01hcmtlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mb2N1c01hcmtlck9wYWNpdHkgPSAwO1xyXG4gICAgICAgIHRoaXMuY29udHJvbFBsYW5lID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNvbnRyb2xQbGFuZVZpc2libGUgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHNldHVwTWVzaEN1cnNvcigpIHt9XHJcbiAgICBzZXR1cEZvY3VzTWFya2VyKCkge31cclxuICAgIHNldHVwQ29udHJvbFBsYW5lKCkge31cclxuICAgIHVwZGF0ZU1lc2hDdXJzb3IocG9zLCBhY3RpdmUpIHt9XHJcbiAgICB1cGRhdGVGb2N1c01hcmtlcih0YXJnZXQsIGNhbWVyYSwgcmVuZGVyRGltZW5zaW9ucykge31cclxuICAgIHVwZGF0ZUNvbnRyb2xQbGFuZShjYW0sIGN0cmwpIHt9XHJcbiAgICBzZXRGb2N1c01hcmtlclZpc2liaWxpdHkodikge31cclxuICAgIHNldEZvY3VzTWFya2VyT3BhY2l0eShvKSB7IHRoaXMuZm9jdXNNYXJrZXJPcGFjaXR5ID0gbzsgfVxyXG4gICAgZ2V0Rm9jdXNNYXJrZXJPcGFjaXR5KCkgeyByZXR1cm4gdGhpcy5mb2N1c01hcmtlck9wYWNpdHk7IH1cclxuICAgIHBvc2l0aW9uQW5kT3JpZW50Rm9jdXNNYXJrZXIocG9zLCBjYW0pIHt9XHJcbiAgICBwb3NpdGlvbkFuZE9yaWVudE1lc2hDdXJzb3IocG9zLCBjYW0pIHt9XHJcbiAgICBzZXRNZXNoQ3Vyc29yVmlzaWJpbGl0eSh2aXNpYmxlKSB7IHRoaXMubWVzaEN1cnNvclZpc2libGUgPSB2aXNpYmxlOyB9XHJcbiAgICBnZXRNZXNjaEN1cnNvclZpc2liaWxpdHkoKSB7IHJldHVybiB0aGlzLm1lc2hDdXJzb3JWaXNpYmxlOyB9XHJcbiAgICBzZXRDb250cm9sUGxhbmVWaXNpYmlsaXR5KHZpc2libGUpIHsgdGhpcy5jb250cm9sUGxhbmVWaXNpYmxlID0gdmlzaWJsZTsgfVxyXG4gICAgcG9zaXRpb25BbmRPcmllbnRDb250cm9sUGxhbmUocG9zLCBxdWF0LCBzY2FsZSkge31cclxuICAgIHVwZGF0ZUZvclJlbmRlck1vZGUobW9kZSwgbWVzaCkge31cclxuICAgIGRpc3Bvc2UoKSB7fVxyXG59XHJcblxyXG4vKipcclxuICogVmlld2VyIC0gQ29yZSBHYXVzc2lhbiBTcGxhdHRpbmcgVmlld2VyXHJcbiAqIEhhbmRsZXMgdGhlIFRocmVlLmpzIHNjZW5lLCBjYW1lcmEsIGNvbnRyb2xzLCBhbmQgcmVuZGVyaW5nIGxvb3AuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlld2VyIHtcclxuICAvKipcclxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuY2FtZXJhVXA9WzAsIDEsIDBdXSAtIENhbWVyYSB1cCB2ZWN0b3JcclxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRpb25zLmluaXRpYWxDYW1lcmFQb3NpdGlvbj1bMCwgMTAsIDE1XV0gLSBJbml0aWFsIGNhbWVyYSBwb3NpdGlvblxyXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuaW5pdGlhbENhbWVyYVJvdGF0aW9uPVswLCAwLCAwXV0gLSBJbml0aWFsIGNhbWVyYSByb3RhdGlvblxyXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuaW5pdGlhbENhbWVyYUxvb2tBdD1bMCwgMCwgMF1dIC0gSW5pdGlhbCBjYW1lcmEgbG9vay1hdCBwb2ludFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZHJvcEluTW9kZT1mYWxzZV0gLSBJZiB0cnVlLCB2aWV3ZXIgaXMgdXNlZCBhcyBhIFRocmVlLmpzIHNjZW5lIG9iamVjdFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2VsZkRyaXZlbk1vZGU9dHJ1ZV0gLSBJZiB0cnVlLCB2aWV3ZXIgbWFuYWdlcyBpdHMgb3duIHJlbmRlciBsb29wXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51c2VCdWlsdEluQ29udHJvbHM9dHJ1ZV0gLSBJZiB0cnVlLCB1c2VzIE9yYml0Q29udHJvbHNcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbb3B0aW9ucy5yb290RWxlbWVudF0gLSBQYXJlbnQgZWxlbWVudCBmb3IgdGhlIGNhbnZhc1xyXG4gICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR9IFtvcHRpb25zLnRocmVlanNDYW52YXNdIC0gRXhpc3RpbmcgY2FudmFzIHRvIHVzZVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaWdub3JlRGV2aWNlUGl4ZWxSYXRpbz1mYWxzZV0gLSBJZiB0cnVlLCBmb3JjZXMgRFBSIHRvIDFcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVPWZhbHNlXSAtIFVzZSAxNi1iaXQgZmxvYXQgZm9yIGNvdmFyaWFuY2VzXHJcbiAgICogQHBhcmFtIHtUSFJFRS5TY2VuZX0gW29wdGlvbnMudGhyZWVTY2VuZV0gLSBFeHRlcm5hbCBUaHJlZS5qcyBzY2VuZSB0byByZW5kZXJcclxuICAgKiBAcGFyYW0ge1RIUkVFLldlYkdMUmVuZGVyZXJ9IFtvcHRpb25zLnJlbmRlcmVyXSAtIEV4dGVybmFsIFRocmVlLmpzIHJlbmRlcmVyXHJcbiAgICogQHBhcmFtIHtUSFJFRS5DYW1lcmF9IFtvcHRpb25zLmNhbWVyYV0gLSBFeHRlcm5hbCBUaHJlZS5qcyBjYW1lcmFcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmdwdUFjY2VsZXJhdGVkU29ydD1mYWxzZV0gLSBVc2UgR1BVIGZvciBzb3J0aW5nIGRpc3RhbmNlc1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaW50ZWdlckJhc2VkU29ydD10cnVlXSAtIFVzZSBpbnRlZ2VyIGFyaXRobWV0aWMgZm9yIHNvcnRpbmdcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnNoYXJlZE1lbW9yeUZvcldvcmtlcnM9dHJ1ZV0gLSBVc2UgU2hhcmVkQXJyYXlCdWZmZXIgZm9yIHdvcmtlcnNcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmR5bmFtaWNTY2VuZT1mYWxzZV0gLSBPcHRpbWl6ZSBmb3IgZHluYW1pYyBzY2VuZXNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcclxuICAgIC8vIFRoZSBuYXR1cmFsICd1cCcgdmVjdG9yIGZvciB2aWV3aW5nIHRoZSBzY2VuZSAob25seSBoYXMgYW4gZWZmZWN0IHdoZW4gdXNlZCB3aXRoIG9yYml0IGNvbnRyb2xzIGFuZFxyXG4gICAgLy8gd2hlbiB0aGUgdmlld2VyIHVzZXMgaXRzIG93biBjYW1lcmEpLlxyXG4gICAgaWYgKCFvcHRpb25zLmNhbWVyYVVwKSBvcHRpb25zLmNhbWVyYVVwID0gWzAsIDEsIDBdO1xyXG4gICAgdGhpcy5jYW1lcmFVcCA9IG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KG9wdGlvbnMuY2FtZXJhVXApO1xyXG5cclxuICAgIC8vIFRoZSBjYW1lcmEncyBpbml0aWFsIHBvc2l0aW9uIChvbmx5IHVzZWQgd2hlbiB0aGUgdmlld2VyIHVzZXMgaXRzIG93biBjYW1lcmEpLlxyXG4gICAgaWYgKCFvcHRpb25zLmluaXRpYWxDYW1lcmFQb3NpdGlvbilcclxuICAgICAgb3B0aW9ucy5pbml0aWFsQ2FtZXJhUG9zaXRpb24gPSBbMCwgMTAsIDE1XTtcclxuICAgIHRoaXMuaW5pdGlhbENhbWVyYVBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoXHJcbiAgICAgIG9wdGlvbnMuaW5pdGlhbENhbWVyYVBvc2l0aW9uXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghb3B0aW9ucy5pbml0aWFsQ2FtZXJhUm90YXRpb24pXHJcbiAgICAgICAgb3B0aW9ucy5pbml0aWFsQ2FtZXJhUm90YXRpb24gPSBbMCwgMCwgMF07XHJcbiAgICAgIHRoaXMuaW5pdGlhbENhbWVyYVJvdGF0aW9uID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoXHJcbiAgICAgICAgb3B0aW9ucy5pbml0aWFsQ2FtZXJhUm90YXRpb25cclxuICAgICk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yO1xyXG5cclxuICAgIC8vIElyaXMgb2NjbHVzaW9uIGNvbmZpZ3VyYXRpb24gZm9yIEZMQU1FIGF2YXRhcnNcclxuICAgIHRoaXMuaXJpc09jY2x1c2lvbkNvbmZpZyA9IG9wdGlvbnMuaXJpc09jY2x1c2lvbkNvbmZpZyB8fCBudWxsO1xyXG5cclxuICAgIC8vIFRoZSBpbml0aWFsIGZvY2FsIHBvaW50IG9mIHRoZSBjYW1lcmEgYW5kIGNlbnRlciBvZiB0aGUgY2FtZXJhJ3Mgb3JiaXQgKG9ubHkgdXNlZCB3aGVuIHRoZSB2aWV3ZXIgdXNlcyBpdHMgb3duIGNhbWVyYSkuXHJcbiAgICBpZiAoIW9wdGlvbnMuaW5pdGlhbENhbWVyYUxvb2tBdCkgb3B0aW9ucy5pbml0aWFsQ2FtZXJhTG9va0F0ID0gWzAsIDAsIDBdO1xyXG4gICAgdGhpcy5pbml0aWFsQ2FtZXJhTG9va0F0ID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoXHJcbiAgICAgIG9wdGlvbnMuaW5pdGlhbENhbWVyYUxvb2tBdFxyXG4gICAgKTtcclxuXHJcbiAgICAvLyAnZHJvcEluTW9kZScgaXMgYSBmbGFnIHRoYXQgaXMgdXNlZCBpbnRlcm5hbGx5IHRvIHN1cHBvcnQgdGhlIHVzYWdlIG9mIHRoZSB2aWV3ZXIgYXMgYSBUaHJlZS5qcyBzY2VuZSBvYmplY3RcclxuICAgIHRoaXMuZHJvcEluTW9kZSA9IG9wdGlvbnMuZHJvcEluTW9kZSB8fCBmYWxzZTtcclxuXHJcbiAgICAvLyBJZiAnc2VsZkRyaXZlbk1vZGUnIGlzIHRydWUsIHRoZSB2aWV3ZXIgbWFuYWdlcyBpdHMgb3duIHVwZGF0ZS9hbmltYXRpb24gbG9vcCB2aWEgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKClcclxuICAgIGlmIChvcHRpb25zLnNlbGZEcml2ZW5Nb2RlID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5zZWxmRHJpdmVuTW9kZSA9PT0gbnVsbClcclxuICAgICAgb3B0aW9ucy5zZWxmRHJpdmVuTW9kZSA9IHRydWU7XHJcbiAgICB0aGlzLnNlbGZEcml2ZW5Nb2RlID0gb3B0aW9ucy5zZWxmRHJpdmVuTW9kZSAmJiAhdGhpcy5kcm9wSW5Nb2RlO1xyXG4gICAgdGhpcy5zZWxmRHJpdmVuVXBkYXRlRnVuYyA9IHRoaXMuc2VsZkRyaXZlblVwZGF0ZS5iaW5kKHRoaXMpO1xyXG5cclxuICAgIC8vIElmICd1c2VCdWlsdEluQ29udHJvbHMnIGlzIHRydWUsIHRoZSB2aWV3ZXIgd2lsbCBjcmVhdGUgaXRzIG93biBpbnN0YW5jZSBvZiBPcmJpdENvbnRyb2xzIGFuZCBhdHRhY2ggdG8gdGhlIGNhbWVyYVxyXG4gICAgaWYgKG9wdGlvbnMudXNlQnVpbHRJbkNvbnRyb2xzID09PSB1bmRlZmluZWQpXHJcbiAgICAgIG9wdGlvbnMudXNlQnVpbHRJbkNvbnRyb2xzID0gdHJ1ZTtcclxuICAgIHRoaXMudXNlQnVpbHRJbkNvbnRyb2xzID0gb3B0aW9ucy51c2VCdWlsdEluQ29udHJvbHM7XHJcblxyXG4gICAgLy8gcGFyZW50IGVsZW1lbnQgb2YgdGhlIFRocmVlLmpzIHJlbmRlcmVyIGNhbnZhc1xyXG4gICAgdGhpcy5yb290RWxlbWVudCA9IG9wdGlvbnMucm9vdEVsZW1lbnQ7XHJcbiAgICB0aGlzLmNhbnZhcyA9IG9wdGlvbnMudGhyZWVqc0NhbnZhcztcclxuICAgIC8vIFRlbGxzIHRoZSB2aWV3ZXIgdG8gcHJldGVuZCB0aGUgZGV2aWNlIHBpeGVsIHJhdGlvIGlzIDEsIHdoaWNoIGNhbiBib29zdCBwZXJmb3JtYW5jZSBvbiBkZXZpY2VzIHdoZXJlIGl0IGlzIGxhcmdlcixcclxuICAgIC8vIGF0IGEgc21hbGwgY29zdCB0byB2aXN1YWwgcXVhbGl0eVxyXG4gICAgdGhpcy5pZ25vcmVEZXZpY2VQaXhlbFJhdGlvID0gb3B0aW9ucy5pZ25vcmVEZXZpY2VQaXhlbFJhdGlvIHx8IGZhbHNlO1xyXG4gICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvID0gdGhpcy5pZ25vcmVEZXZpY2VQaXhlbFJhdGlvXHJcbiAgICAgID8gMVxyXG4gICAgICA6IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XHJcblxyXG4gICAgLy8gVGVsbHMgdGhlIHZpZXdlciB0byB1c2UgMTYtYml0IGZsb2F0aW5nIHBvaW50IHZhbHVlcyB3aGVuIHN0b3Jpbmcgc3BsYXQgY292YXJpYW5jZSBkYXRhIGluIHRleHR1cmVzLCBpbnN0ZWFkIG9mIDMyLWJpdFxyXG4gICAgdGhpcy5oYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVSA9XHJcbiAgICAgIG9wdGlvbnMuaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFUgfHwgZmFsc2U7XHJcblxyXG4gICAgLy8gSWYgJ3RocmVlU2NlbmUnIGlzIHZhbGlkLCBpdCB3aWxsIGJlIHJlbmRlcmVkIGJ5IHRoZSB2aWV3ZXIgYWxvbmcgd2l0aCB0aGUgc3BsYXQgbWVzaFxyXG4gICAgdGhpcy50aHJlZVNjZW5lID0gb3B0aW9ucy50aHJlZVNjZW5lO1xyXG4gICAgLy8gQWxsb3dzIGZvciB1c2FnZSBvZiBhbiBleHRlcm5hbCBUaHJlZS5qcyByZW5kZXJlclxyXG4gICAgdGhpcy5yZW5kZXJlciA9IG9wdGlvbnMucmVuZGVyZXI7XHJcbiAgICAvLyBBbGxvd3MgZm9yIHVzYWdlIG9mIGFuIGV4dGVybmFsIFRocmVlLmpzIGNhbWVyYVxyXG4gICAgdGhpcy5jYW1lcmEgPSBvcHRpb25zLmNhbWVyYTtcclxuXHJcbiAgICAvLyBJZiAnZ3B1QWNjZWxlcmF0ZWRTb3J0JyBpcyB0cnVlLCBhIHBhcnRpYWxseSBHUFUtYWNjZWxlcmF0ZWQgYXBwcm9hY2ggdG8gc29ydGluZyBzcGxhdHMgd2lsbCBiZSB1c2VkLlxyXG4gICAgLy8gQ3VycmVudGx5IHRoaXMgbWVhbnMgcHJlLWNvbXB1dGluZyBzcGxhdCBkaXN0YW5jZXMgZnJvbSB0aGUgY2FtZXJhIG9uIHRoZSBHUFVcclxuICAgIHRoaXMuZ3B1QWNjZWxlcmF0ZWRTb3J0ID0gb3B0aW9ucy5ncHVBY2NlbGVyYXRlZFNvcnQgfHwgZmFsc2U7XHJcblxyXG4gICAgLy8gaWYgJ2ludGVnZXJCYXNlZFNvcnQnIGlzIHRydWUsIHRoZSBpbnRlZ2VyIHZlcnNpb24gb2Ygc3BsYXQgY2VudGVycyBhcyB3ZWxsIGFzIG90aGVyIHZhbHVlcyB1c2VkIHRvIGNhbGN1bGF0ZVxyXG4gICAgLy8gc3BsYXQgZGlzdGFuY2VzIGFyZSB1c2VkIGluc3RlYWQgb2YgdGhlIGZsb2F0IHZlcnNpb24uIFRoaXMgc3BlZWRzIHVwIGNvbXB1dGF0aW9uLCBidXQgaW50cm9kdWNlcyB0aGUgcG9zc2liaWxpdHkgb2ZcclxuICAgIC8vIG92ZXJmbG93IGluIGxhcmdlciBzY2VuZXMuXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMuaW50ZWdlckJhc2VkU29ydCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMuaW50ZWdlckJhc2VkU29ydCA9PT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIG9wdGlvbnMuaW50ZWdlckJhc2VkU29ydCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB0aGlzLmludGVnZXJCYXNlZFNvcnQgPSBvcHRpb25zLmludGVnZXJCYXNlZFNvcnQ7XHJcblxyXG4gICAgLy8gSWYgJ3NoYXJlZE1lbW9yeUZvcldvcmtlcnMnIGlzIHRydWUsIGEgU2hhcmVkQXJyYXlCdWZmZXIgd2lsbCBiZSB1c2VkIHRvIGNvbW11bmljYXRlIHdpdGggd2ViIHdvcmtlcnMuIFRoaXMgbWV0aG9kXHJcbiAgICAvLyBpcyBmYXN0ZXIgdGhhbiBjb3B5aW5nIG1lbW9yeSB0byBvciBmcm9tIHdlYiB3b3JrZXJzLCBidXQgY29tZXMgd2l0aCBzZWN1cml0eSBpbXBsaWNhdGlvbnMgYXMgb3V0bGluZWQgaGVyZTpcclxuICAgIC8vIGh0dHBzOi8vd2ViLmRldi9hcnRpY2xlcy9jcm9zcy1vcmlnaW4taXNvbGF0aW9uLWd1aWRlXHJcbiAgICAvLyBJZiBlbmFibGVkLCBpdCByZXF1aXJlcyBzcGVjaWZpYyBDT1JTIGhlYWRlcnMgdG8gYmUgcHJlc2VudCBpbiB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHRoYXQgaXMgc2VudCB3aGVuXHJcbiAgICAvLyBsb2FkaW5nIHRoZSBhcHBsaWNhdGlvbi4gTW9yZSBpbmZvcm1hdGlvbiBpcyBhdmFpbGFibGUgaW4gdGhlIFJFQURNRS5cclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzID09PSBudWxsXHJcbiAgICApXHJcbiAgICAgIG9wdGlvbnMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycyA9IHRydWU7XHJcbiAgICB0aGlzLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMgPSBmYWxzZTsgLy9vcHRpb25zLnNoYXJlZE1lbW9yeUZvcldvcmtlcnM7XHJcblxyXG4gICAgLy8gaWYgJ2R5bmFtaWNTY2VuZScgaXMgdHJ1ZSwgaXQgdGVsbHMgdGhlIHZpZXdlciB0byBhc3N1bWUgc2NlbmUgZWxlbWVudHMgYXJlIG5vdCBzdGF0aW9uYXJ5IG9yIHRoYXQgdGhlIG51bWJlciBvZiBzcGxhdHMgaW4gdGhlXHJcbiAgICAvLyBzY2VuZSBtYXkgY2hhbmdlLiBUaGlzIHByZXZlbnRzIG9wdGltaXphdGlvbnMgdGhhdCBkZXBlbmQgb24gYSBzdGF0aWMgc2NlbmUgZnJvbSBiZWluZyBtYWRlLiBBZGRpdGlvbmFsbHksIGlmICdkeW5hbWljU2NlbmUnIGlzXHJcbiAgICAvLyB0cnVlIGl0IHRlbGxzIHRoZSBzcGxhdCBtZXNoIHRvIG5vdCBhcHBseSBzY2VuZSB0cmFuZm9ybXMgdG8gc3BsYXQgZGF0YSB0aGF0IGlzIHJldHVybmVkIGJ5IGZ1bmN0aW9ucyBsaWtlXHJcbiAgICAvLyBTcGxhdE1lc2guZ2V0U3BsYXRDZW50ZXIoKSBieSBkZWZhdWx0LlxyXG4gICAgdGhpcy5keW5hbWljU2NlbmUgPSAhIW9wdGlvbnMuZHluYW1pY1NjZW5lO1xyXG5cclxuICAgIC8vIFdoZW4gdHJ1ZSwgd2lsbCBwZXJmb3JtIGFkZGl0aW9uYWwgc3RlcHMgZHVyaW5nIHJlbmRlcmluZyB0byBhZGRyZXNzIGFydGlmYWN0cyBjYXVzZWQgYnkgdGhlIHJlbmRlcmluZyBvZiBnYXVzc2lhbnMgYXQgYVxyXG4gICAgLy8gc3Vic3RhbnRpYWxseSBkaWZmZXJlbnQgcmVzb2x1dGlvbiB0aGFuIHRoYXQgYXQgd2hpY2ggdGhleSB3ZXJlIHJlbmRlcmVkIGR1cmluZyB0cmFpbmluZy4gVGhpcyB3aWxsIG9ubHkgd29yayBjb3JyZWN0bHlcclxuICAgIC8vIGZvciBtb2RlbHMgdGhhdCB3ZXJlIHRyYWluZWQgdXNpbmcgYSBwcm9jZXNzIHRoYXQgdXRpbGl6ZXMgdGhpcyBjb21wZW5zYXRpb24gY2FsY3VsYXRpb24uIEZvciBtb3JlIGRldGFpbHM6XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbmVyZnN0dWRpby1wcm9qZWN0L2dzcGxhdC9wdWxsLzExN1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dyYXBoZGVjby1pbnJpYS9nYXVzc2lhbi1zcGxhdHRpbmcvaXNzdWVzLzI5NCNpc3N1ZWNvbW1lbnQtMTc3MjY4ODA5M1xyXG4gICAgdGhpcy5hbnRpYWxpYXNlZCA9IG9wdGlvbnMuYW50aWFsaWFzZWQgfHwgZmFsc2U7XHJcblxyXG4gICAgLy8gVGhpcyBjb25zdGFudCBpcyBhZGRlZCB0byB0aGUgcHJvamVjdGVkIDJEIHNjcmVlbi1zcGFjZSBzcGxhdCBzY2FsZXNcclxuICAgIHRoaXMua2VybmVsMkRTaXplID1cclxuICAgICAgb3B0aW9ucy5rZXJuZWwyRFNpemUgPT09IHVuZGVmaW5lZCA/IDAuMyA6IG9wdGlvbnMua2VybmVsMkRTaXplO1xyXG5cclxuICAgIC8vIGlmICdyZW5kZXJNb2RlJyBpcyBSZW5kZXJNb2RlLkFsd2F5cywgdGhlbiB0aGUgdmlld2VyIHdpbGwgcnJlbmRlciB0aGUgc2NlbmUgb24gZXZlcnkgdXBkYXRlLiBJZiBpdCBpcyBSZW5kZXJNb2RlLk9uQ2hhbmdlLFxyXG4gICAgLy8gaXQgd2lsbCBvbmx5IHJlbmRlciB3aGVuIHNvbWV0aGluZyBpbiB0aGUgc2NlbmUgaGFzIGNoYW5nZWQuXHJcbiAgICB0aGlzLnJlbmRlck1vZGUgPSBvcHRpb25zLnJlbmRlck1vZGUgfHwgUmVuZGVyTW9kZS5BbHdheXM7XHJcblxyXG4gICAgLy8gU2NlbmVSZXZlYWxNb2RlLkRlZmF1bHQgcmVzdWx0cyBpbiBhIG5pY2UsIHNsb3cgZmFkZS1pbiBlZmZlY3QgZm9yIHByb2dyZXNzaXZlbHkgbG9hZGVkIHNjZW5lcyxcclxuICAgIC8vIGFuZCBhIGZhc3QgZmFkZS1pbiBmb3Igbm9uIHByb2dyZXNzaXZlbHkgbG9hZGVkIHNjZW5lcy5cclxuICAgIC8vIFNjZW5lUmV2ZWFsTW9kZS5HcmFkdWFsIHdpbGwgZm9yY2UgYSBzbG93IGZhZGUtaW4gZm9yIGFsbCBzY2VuZXMuXHJcbiAgICAvLyBTY2VuZVJldmVhbE1vZGUuSW5zdGFudCB3aWxsIGZvcmNlIGFsbCBsb2FkZWQgc2NlbmUgZGF0YSB0byBiZSBpbW1lZGlhdGVseSB2aXNpYmxlLlxyXG4gICAgdGhpcy5zY2VuZVJldmVhbE1vZGUgPSBvcHRpb25zLnNjZW5lUmV2ZWFsTW9kZSB8fCBTY2VuZVJldmVhbE1vZGUuRGVmYXVsdDtcclxuXHJcbiAgICAvLyBIYWNreSwgZXhwZXJpbWVudGFsLCBub24tc2NpZW50aWZpYyBwYXJhbWV0ZXIgZm9yIHR3ZWFraW5nIGZvY2FsIGxlbmd0aCByZWxhdGVkIGNhbGN1bGF0aW9ucy4gRm9yIHNjZW5lcyB3aXRoIHZlcnlcclxuICAgIC8vIHNtYWxsIGdhdXNzaWFucywgc21hbGwgZGV0YWlscywgYW5kIHNtYWxsIGRpbWVuc2lvbnMgLS0gaW5jcmVhc2luZyB0aGlzIHZhbHVlIGNhbiBoZWxwIGltcHJvdmUgdmlzdWFsIHF1YWxpdHkuXHJcbiAgICB0aGlzLmZvY2FsQWRqdXN0bWVudCA9IG9wdGlvbnMuZm9jYWxBZGp1c3RtZW50IHx8IDEuMDtcclxuXHJcbiAgICAvLyBTcGVjaWZ5IHRoZSBtYXhpbXVtIHNjcmVlbi1zcGFjZSBzcGxhdCBzaXplLCBjYW4gaGVscCBkZWFsIHdpdGggbGFyZ2Ugc3BsYXRzIHRoYXQgZ2V0IHRvbyB1bndpZWxkeVxyXG4gICAgdGhpcy5tYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSA9IG9wdGlvbnMubWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgfHwgMTAyNDtcclxuXHJcbiAgICAvLyBUaGUgdmVyYm9zaXR5IG9mIGNvbnNvbGUgbG9nZ2luZ1xyXG4gICAgdGhpcy5sb2dMZXZlbCA9IG9wdGlvbnMubG9nTGV2ZWwgfHwgTG9nTGV2ZWwuTm9uZTtcclxuXHJcbiAgICAvLyBEZWdyZWUgb2Ygc3BoZXJpY2FsIGhhcm1vbmljcyB0byB1dGlsaXplIGluIHJlbmRlcmluZyBzcGxhdHMgKGFzc3VtaW5nIHRoZSBkYXRhIGlzIHByZXNlbnQgaW4gdGhlIHNwbGF0IHNjZW5lKS5cclxuICAgIC8vIFZhbGlkIHZhbHVlcyBhcmUgMCAtIDIuIERlZmF1bHQgdmFsdWUgaXMgMC5cclxuICAgIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gb3B0aW9ucy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgfHwgMDtcclxuXHJcbiAgICAvLyBXaGVuIHRydWUsIGFsbG93cyBmb3IgdXNhZ2Ugb2YgZXh0cmEgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBkdXJpbmcgcmVuZGVyaW5nIGZvciBlZmZlY3RzIHN1Y2ggYXMgb3BhY2l0eSBhZGp1c3RtZW50LlxyXG4gICAgLy8gRGVmYXVsdCBpcyBmYWxzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gVGhlc2UgcHJvcGVydGllcyBhcmUgc2VwYXJhdGUgZnJvbSB0cmFuc2Zvcm0gcHJvcGVydGllcyAoc2NhbGUsIHJvdGF0aW9uLCBwb3NpdGlvbilcclxuICAgIC8vIHRoYXQgYXJlIGVuYWJsZWQgYnkgdGhlICdkeW5hbWljU2NlbmUnIHBhcmFtZXRlci5cclxuICAgIHRoaXMuZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gb3B0aW9ucy5lbmFibGVPcHRpb25hbEVmZmVjdHMgfHwgZmFsc2U7XHJcblxyXG4gICAgLy8gRW5hYmxlIHRoZSB1c2FnZSBvZiBTSU1EIFdlYkFzc2VtYmx5IGluc3RydWN0aW9ucyBmb3IgdGhlIHNwbGF0IHNvcnRcclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5lbmFibGVTSU1ESW5Tb3J0ID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5lbmFibGVTSU1ESW5Tb3J0ID09PSBudWxsXHJcbiAgICApXHJcbiAgICAgIG9wdGlvbnMuZW5hYmxlU0lNREluU29ydCA9IHRydWU7XHJcbiAgICB0aGlzLmVuYWJsZVNJTURJblNvcnQgPSBvcHRpb25zLmVuYWJsZVNJTURJblNvcnQ7XHJcblxyXG4gICAgLy8gTGV2ZWwgdG8gY29tcHJlc3Mgbm9uIEtTUExBVCBmaWxlcyB3aGVuIGxvYWRpbmcgdGhlbSBmb3IgZGlyZWN0IHJlbmRlcmluZ1xyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLmluTWVtb3J5Q29tcHJlc3Npb25MZXZlbCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMuaW5NZW1vcnlDb21wcmVzc2lvbkxldmVsID09PSBudWxsXHJcbiAgICApIHtcclxuICAgICAgb3B0aW9ucy5pbk1lbW9yeUNvbXByZXNzaW9uTGV2ZWwgPSAwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbk1lbW9yeUNvbXByZXNzaW9uTGV2ZWwgPSBvcHRpb25zLmluTWVtb3J5Q29tcHJlc3Npb25MZXZlbDtcclxuXHJcbiAgICAvLyBSZW9yZGVyIHNwbGF0IGRhdGEgaW4gbWVtb3J5IGFmdGVyIGxvYWRpbmcgaXMgY29tcGxldGUgdG8gb3B0aW1pemUgY2FjaGUgdXRpbGl6YXRpb24uIERlZmF1bHQgaXMgdHJ1ZS5cclxuICAgIC8vIERvZXMgbm90IGFwcGx5IGlmIHNwbGF0IHNjZW5lIGlzIHByb2dyZXNzaXZlbHkgbG9hZGVkLlxyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLm9wdGltaXplU3BsYXREYXRhID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5vcHRpbWl6ZVNwbGF0RGF0YSA9PT0gbnVsbFxyXG4gICAgKSB7XHJcbiAgICAgIG9wdGlvbnMub3B0aW1pemVTcGxhdERhdGEgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vcHRpbWl6ZVNwbGF0RGF0YSA9IG9wdGlvbnMub3B0aW1pemVTcGxhdERhdGE7XHJcblxyXG4gICAgLy8gV2hlbiB0cnVlLCB0aGUgaW50ZXJtZWRpYXRlIHNwbGF0IGRhdGEgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGRlY29tcHJlc3Npbmcgc3BsYXQgYnVmZmZlcihzKSBhbmQgaXMgdXNlZCB0b1xyXG4gICAgLy8gcG9wdWxhdGUgdGhlIGRhdGEgdGV4dHVyZXMgd2lsbCBiZSBmcmVlZC4gVGhpcyB3aWxsIHJlZHVjZXMgbWVtb3J5IHVzYWdlLCBidXQgaWYgdGhhdCBkYXRhIG5lZWRzIHRvIGJlIG1vZGlmaWVkXHJcbiAgICAvLyBpdCB3aWxsIG5lZWQgdG8gYmUgcmUtcG9wdWxhdGVkIGZyb20gdGhlIHNwbGF0IGJ1ZmZlcihzKS4gRGVmYXVsdCBpcyBmYWxzZS5cclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhID09PSBudWxsXHJcbiAgICApIHtcclxuICAgICAgb3B0aW9ucy5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEgPSBvcHRpb25zLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGE7XHJcblxyXG4gICAgLy8gSXQgYXBwZWFycyB0aGF0IGZvciBjZXJ0YWluIGlPUyB2ZXJzaW9ucywgc3BlY2lhbCBhY3Rpb25zIG5lZWQgdG8gYmUgdGFrZW4gd2l0aCB0aGVcclxuICAgIC8vIHVzYWdlIG9mIFNJTUQgaW5zdHJ1Y3Rpb25zIGFuZCBzaGFyZWQgbWVtb3J5XHJcbiAgICBpZiAoaXNJT1MoKSkge1xyXG4gICAgICBjb25zdCBzZW12ZXIgPSBnZXRJT1NTZW1ldmVyKCk7XHJcbiAgICAgIGlmIChzZW12ZXIubWFqb3IgPCAxNykge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlU0lNREluU29ydCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzZW12ZXIubWFqb3IgPCAxNikge1xyXG4gICAgICAgIHRoaXMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGVsbCB0aGUgdmlld2VyIGhvdyB0byByZW5kZXIgdGhlIHNwbGF0c1xyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLnNwbGF0UmVuZGVyTW9kZSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgIG9wdGlvbnMuc3BsYXRSZW5kZXJNb2RlID09PSBudWxsXHJcbiAgICApIHtcclxuICAgICAgb3B0aW9ucy5zcGxhdFJlbmRlck1vZGUgPSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zcGxhdFJlbmRlck1vZGUgPSBvcHRpb25zLnNwbGF0UmVuZGVyTW9kZTtcclxuXHJcbiAgICAvLyBDdXN0b21pemUgdGhlIHNwZWVkIGF0IHdoaWNoIHRoZSBzY2VuZSBpcyByZXZlYWxlZFxyXG4gICAgdGhpcy5zY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyID0gb3B0aW9ucy5zY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyIHx8IDEuMDtcclxuXHJcbiAgICAvLyBTZXQgdGhlIHJhbmdlIGZvciB0aGUgZGVwdGggbWFwIGZvciB0aGUgY291bnRpbmcgc29ydCB1c2VkIHRvIHNvcnQgdGhlIHNwbGF0c1xyXG4gICAgdGhpcy5zcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiA9XHJcbiAgICAgIG9wdGlvbnMuc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24gfHxcclxuICAgICAgQ29uc3RhbnRzLkRlZmF1bHRTcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbjtcclxuICAgIGNvbnN0IG1heFByZWNpc2lvbiA9IHRoaXMuaW50ZWdlckJhc2VkU29ydCA/IDIwIDogMjQ7XHJcbiAgICB0aGlzLnNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uID0gY2xhbXAoXHJcbiAgICAgIHRoaXMuc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24sXHJcbiAgICAgIDEwLFxyXG4gICAgICBtYXhQcmVjaXNpb25cclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5vblNwbGF0TWVzaENoYW5nZWRDYWxsYmFjayA9IG51bGw7XHJcbiAgICB0aGlzLmNyZWF0ZVNwbGF0TWVzaCgpO1xyXG5cclxuICAgIHRoaXMuY29udHJvbHMgPSBudWxsO1xyXG4gICAgdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzID0gbnVsbDtcclxuICAgIHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMgPSBudWxsO1xyXG5cclxuICAgIHRoaXMub3J0aG9ncmFwaGljQ2FtZXJhID0gbnVsbDtcclxuICAgIHRoaXMucGVyc3BlY3RpdmVDYW1lcmEgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuc2hvd01lc2hDdXJzb3IgPSBmYWxzZTtcclxuICAgIHRoaXMuc2hvd0NvbnRyb2xQbGFuZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93SW5mbyA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuc2NlbmVIZWxwZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuc29ydFdvcmtlciA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLnNwbGF0UmVuZGVyQ291bnQgPSAwO1xyXG4gICAgdGhpcy5zcGxhdFNvcnRDb3VudCA9IDA7XHJcbiAgICB0aGlzLmxhc3RTcGxhdFNvcnRDb3VudCA9IDA7XHJcbiAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0ID0gbnVsbDtcclxuICAgIHRoaXMuc29ydFdvcmtlclNvcnRlZEluZGV4ZXMgPSBudWxsO1xyXG4gICAgdGhpcy5zb3J0V29ya2VyUHJlY29tcHV0ZWREaXN0YW5jZXMgPSBudWxsO1xyXG4gICAgdGhpcy5zb3J0V29ya2VyVHJhbnNmb3JtcyA9IG51bGw7XHJcbiAgICB0aGlzLnByZVNvcnRNZXNzYWdlcyA9IFtdO1xyXG4gICAgdGhpcy5ydW5BZnRlck5leHRTb3J0ID0gW107XHJcblxyXG4gICAgdGhpcy5zZWxmRHJpdmVuTW9kZVJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFJheWNhc3RlcigpO1xyXG5cclxuICAgIHRoaXMuaW5mb1BhbmVsID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnN0YXJ0SW5PcnRob2dyYXBoaWNNb2RlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50RlBTID0gMDtcclxuICAgIHRoaXMubGFzdFNvcnRUaW1lID0gMDtcclxuICAgIHRoaXMuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMgPSAwO1xyXG5cclxuICAgIHRoaXMucHJldmlvdXNDYW1lcmFUYXJnZXQgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgdGhpcy5uZXh0Q2FtZXJhVGFyZ2V0ID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICB0aGlzLm1vdXNlUG9zaXRpb24gPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgdGhpcy5tb3VzZURvd25Qb3NpdGlvbiA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICB0aGlzLm1vdXNlRG93blRpbWUgPSBudWxsO1xyXG5cclxuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZU1vdmVMaXN0ZW5lciA9IG51bGw7XHJcbiAgICB0aGlzLm1vdXNlRG93bkxpc3RlbmVyID0gbnVsbDtcclxuICAgIHRoaXMubW91c2VVcExpc3RlbmVyID0gbnVsbDtcclxuICAgIHRoaXMua2V5RG93bkxpc3RlbmVyID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLnNvcnRQcm9taXNlID0gbnVsbDtcclxuICAgIHRoaXMuc29ydFByb21pc2VSZXNvbHZlciA9IG51bGw7XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXJzID0gW107XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZFByb21pc2VzID0ge307XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVSZW1vdmFsUHJvbWlzZSA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nU3Bpbm5lciA9IG5ldyBMb2FkaW5nU3Bpbm5lcihcclxuICAgICAgbnVsbCxcclxuICAgICAgdGhpcy5yb290RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XHJcbiAgICApO1xyXG4gICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5oaWRlKCk7XHJcbiAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0JhciA9IG5ldyBMb2FkaW5nUHJvZ3Jlc3NCYXIoXHJcbiAgICAgIHRoaXMucm9vdEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keVxyXG4gICAgKTtcclxuICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLmhpZGUoKTtcclxuICAgIC8vIHRoaXMuaW5mb1BhbmVsID0gbmV3IEluZm9QYW5lbCh0aGlzLnJvb3RFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpXHJcbiAgICAvLyB0aGlzLmluZm9QYW5lbC5oaWRlKClcclxuXHJcbiAgICB0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEgPSB0aGlzLmRyb3BJbk1vZGUgfHwgdGhpcy5jYW1lcmEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB0aGlzLnVzaW5nRXh0ZXJuYWxSZW5kZXJlciA9IHRoaXMuZHJvcEluTW9kZSB8fCB0aGlzLnJlbmRlcmVyID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuZGlzcG9zaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmRpc3Bvc2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmRpc3Bvc2VQcm9taXNlID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmxhc3RUaW1lID0gMDtcclxuICAgIHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50ID0gMDtcclxuICAgIHRoaXMudG90YWxGcmFtZXMgPSAwO1xyXG4gICAgdGhpcy5mcmFtZSA9IDA7XHJcbiAgICB0aGlzLiBhdmF0YXJNZXNoID0gbnVsbDtcclxuICAgIHRoaXMuc2tpbk1vZGVsID0gbnVsbDtcclxuICAgIHRoaXMuYm9uZVJvb3QgPSBudWxsO1xyXG4gICAgdGhpcy5iYXNlTWVzaCA9IG51bGw7XHJcbiAgICB0aGlzLnNldFNraW5BdHRpYnV0ZXMgPSBmYWxzZTtcclxuXHJcbiAgICBpZiAoIXRoaXMuZHJvcEluTW9kZSkgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVTcGxhdE1lc2goKSB7XHJcbiAgICB0aGlzLnNwbGF0TWVzaCA9IG5ldyBTcGxhdE1lc2goXHJcbiAgICAgIHRoaXMuc3BsYXRSZW5kZXJNb2RlLFxyXG4gICAgICB0aGlzLmR5bmFtaWNTY2VuZSxcclxuICAgICAgdGhpcy5lbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgIHRoaXMuaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFUsXHJcbiAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyxcclxuICAgICAgdGhpcy5ncHVBY2NlbGVyYXRlZFNvcnQsXHJcbiAgICAgIHRoaXMuaW50ZWdlckJhc2VkU29ydCxcclxuICAgICAgdGhpcy5hbnRpYWxpYXNlZCxcclxuICAgICAgdGhpcy5tYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSxcclxuICAgICAgdGhpcy5sb2dMZXZlbCxcclxuICAgICAgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsXHJcbiAgICAgIHRoaXMuc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllcixcclxuICAgICAgdGhpcy5rZXJuZWwyRFNpemUsXHJcbiAgICAgIHRoaXMuaXJpc09jY2x1c2lvbkNvbmZpZyAgLy8gUGFzcyBpcmlzIGNvbmZpZyB0byBjb25zdHJ1Y3RvclxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDb25maWcgaXMgbm93IHNldCB2aWEgY29uc3RydWN0b3IgcGFyYW1ldGVyXHJcbiAgICAvLyB0aGlzLnNwbGF0TWVzaC5pcmlzT2NjbHVzaW9uQ29uZmlnID0gdGhpcy5pcmlzT2NjbHVzaW9uQ29uZmlnO1xyXG4gICAgdGhpcy5zcGxhdE1lc2guZnJ1c3R1bUN1bGxlZCA9IGZhbHNlO1xyXG4gICAgaWYgKHRoaXMub25TcGxhdE1lc2hDaGFuZ2VkQ2FsbGJhY2spIHRoaXMub25TcGxhdE1lc2hDaGFuZ2VkQ2FsbGJhY2soKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5pbml0aWFsaXplZCkgcmV0dXJuXHJcblxyXG4gICAgaWYgKCF0aGlzLnJvb3RFbGVtZW50KSB7XHJcbiAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsUmVuZGVyZXIpIHtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucm9vdEVsZW1lbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0dXBDYW1lcmEoKTtcclxuICAgIHRoaXMuc2V0dXBSZW5kZXJlcigpO1xyXG4gICAgLy8g5pqC5pe25Y675o6J5o6n5Yi25ZmoXHJcbiAgICAvLyB0aGlzLnNldHVwQ29udHJvbHMoKVxyXG4gICAgdGhpcy5zZXR1cEV2ZW50SGFuZGxlcnMoKTtcclxuXHJcbiAgICB0aGlzLnRocmVlU2NlbmUgPSB0aGlzLnRocmVlU2NlbmUgfHwgbmV3IFNjZW5lKCk7XHJcbiAgICB0aGlzLnNjZW5lSGVscGVyID0gbmV3IFNjZW5lSGVscGVyKHRoaXMudGhyZWVTY2VuZSk7XHJcbiAgICB0aGlzLnNjZW5lSGVscGVyLnNldHVwTWVzaEN1cnNvcigpO1xyXG4gICAgdGhpcy5zY2VuZUhlbHBlci5zZXR1cEZvY3VzTWFya2VyKCk7XHJcbiAgICB0aGlzLnNjZW5lSGVscGVyLnNldHVwQ29udHJvbFBsYW5lKCk7XHJcblxyXG4gICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuc2V0Q29udGFpbmVyKHRoaXMucm9vdEVsZW1lbnQpO1xyXG4gICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRDb250YWluZXIodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICAvLyB0aGlzLmluZm9QYW5lbC5zZXRDb250YWluZXIodGhpcy5yb290RWxlbWVudClcclxuXHJcbiAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHNldHVwQ2FtZXJhKCkge1xyXG4gICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuXHJcbiAgICAgIHRoaXMucGVyc3BlY3RpdmVDYW1lcmEgPSBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoXHJcbiAgICAgICAgVEhSRUVfQ0FNRVJBX0ZPVixcclxuICAgICAgICByZW5kZXJEaW1lbnNpb25zLnggLyByZW5kZXJEaW1lbnNpb25zLnksXHJcbiAgICAgICAgMC4xLFxyXG4gICAgICAgIDEwMDBcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5vcnRob2dyYXBoaWNDYW1lcmEgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKFxyXG4gICAgICAgIHJlbmRlckRpbWVuc2lvbnMueCAvIC0yLFxyXG4gICAgICAgIHJlbmRlckRpbWVuc2lvbnMueCAvIDIsXHJcbiAgICAgICAgcmVuZGVyRGltZW5zaW9ucy55IC8gMixcclxuICAgICAgICByZW5kZXJEaW1lbnNpb25zLnkgLyAtMixcclxuICAgICAgICAwLjEsXHJcbiAgICAgICAgMTAwMFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmNhbWVyYSA9IHRoaXMuc3RhcnRJbk9ydGhvZ3JhcGhpY01vZGVcclxuICAgICAgICA/IHRoaXMub3J0aG9ncmFwaGljQ2FtZXJhXHJcbiAgICAgICAgOiB0aGlzLnBlcnNwZWN0aXZlQ2FtZXJhO1xyXG4gICAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi5jb3B5KHRoaXMuaW5pdGlhbENhbWVyYVBvc2l0aW9uKTtcclxuICAgICAgLy8gdGhpcy5jYW1lcmEudXAuY29weSh0aGlzLmNhbWVyYVVwKS5ub3JtYWxpemUoKVxyXG4gICAgICAvLyB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy5pbml0aWFsQ2FtZXJhTG9va0F0KVxyXG4gICAgICB0aGlzLmNhbWVyYS5yb3RhdGVYKE1hdGhVdGlscy5kZWdUb1JhZCh0aGlzLmluaXRpYWxDYW1lcmFSb3RhdGlvbi54KSk7XHJcbiAgICAgIHRoaXMuY2FtZXJhLnJvdGF0ZVkoTWF0aFV0aWxzLmRlZ1RvUmFkKHRoaXMuaW5pdGlhbENhbWVyYVJvdGF0aW9uLnkpKTtcclxuICAgICAgdGhpcy5jYW1lcmEucm90YXRlWihNYXRoVXRpbHMuZGVnVG9SYWQodGhpcy5pbml0aWFsQ2FtZXJhUm90YXRpb24ueikpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0dXBSZW5kZXJlcigpIHtcclxuICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsUmVuZGVyZXIpIHtcclxuICAgICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuXHJcbiAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcih7XHJcbiAgICAgICAgYW50aWFsaWFzOiBmYWxzZSxcclxuICAgICAgICBwcmVjaXNpb246ICdoaWdocCcsXHJcbiAgICAgICAgY2FudmFzOiB0aGlzLmNhbnZhc1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRQaXhlbFJhdGlvKHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuYXV0b0NsZWFyID0gdHJ1ZTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRDbGVhckNvbG9yKHRoaXMuYmFja2dyb3VuZENvbG9yLCAxLjApOyAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBhY2NvcmRpbmcgdG8gdGhlIGNvbmZpZ1xyXG5cclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHJlbmRlckRpbWVuc2lvbnMueCwgcmVuZGVyRGltZW5zaW9ucy55KTtcclxuXHJcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUocmVuZGVyRGltZW5zaW9ucy54LCByZW5kZXJEaW1lbnNpb25zLnkpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnJvb3RFbGVtZW50KTtcclxuICAgICAgdGhpcy5yb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0dXBDb250cm9scygpIHtcclxuICAgIGlmICh0aGlzLnVzZUJ1aWx0SW5Db250cm9scykge1xyXG4gICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgIHRoaXMucGVyc3BlY3RpdmVDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKFxyXG4gICAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNhbWVyYSxcclxuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5vcnRob2dyYXBoaWNDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKFxyXG4gICAgICAgICAgdGhpcy5vcnRob2dyYXBoaWNDYW1lcmEsXHJcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnRcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSkge1xyXG4gICAgICAgICAgdGhpcy5vcnRob2dyYXBoaWNDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZm9yIChsZXQgY29udHJvbHMgb2YgW1xyXG4gICAgICAgIHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMsXHJcbiAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzXHJcbiAgICAgIF0pIHtcclxuICAgICAgICBpZiAoY29udHJvbHMpIHtcclxuICAgICAgICAgIGNvbnRyb2xzLmxpc3RlblRvS2V5RXZlbnRzKHdpbmRvdyk7XHJcbiAgICAgICAgICBjb250cm9scy5yb3RhdGVTcGVlZCA9IDAuNTtcclxuICAgICAgICAgIGNvbnRyb2xzLm1heFBvbGFyQW5nbGUgPSBNYXRoLlBJICogMC41Oy8vICsgTWF0aC5QSSAvIDI0XHJcbiAgICAgICAgICBjb250cm9scy5taW5Qb2xhckFuZ2xlID0gTWF0aC5QSSAqIDAuNTsvLyAtIE1hdGguUEkgLyAyNFxyXG4gICAgICAgICAgY29udHJvbHMubWluQXppbXV0aEFuZ2xlID0gLU1hdGguUEkgLyA3MjtcclxuICAgICAgICAgIGNvbnRyb2xzLm1heEF6aW11dGhBbmdsZSA9IE1hdGguUEkgLyA3MjtcclxuICAgICAgICAgIGNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgY29udHJvbHMuZGFtcGluZ0ZhY3RvciA9IDAuMDU7XHJcbiAgICAgICAgICBjb250cm9scy50YXJnZXQuY29weSh0aGlzLmluaXRpYWxDYW1lcmFMb29rQXQpO1xyXG4gICAgICAgICAgY29udHJvbHMudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYVxyXG4gICAgICAgID8gdGhpcy5vcnRob2dyYXBoaWNDb250cm9sc1xyXG4gICAgICAgIDogdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzO1xyXG4gICAgICB0aGlzLmNvbnRyb2xzLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0dXBFdmVudEhhbmRsZXJzKCkge1xyXG4gICAgaWYgKHRoaXMudXNlQnVpbHRJbkNvbnRyb2xzKSB7XHJcbiAgICAgIHRoaXMubW91c2VNb3ZlTGlzdGVuZXIgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdwb2ludGVybW92ZScsXHJcbiAgICAgICAgdGhpcy5tb3VzZU1vdmVMaXN0ZW5lcixcclxuICAgICAgICBmYWxzZVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm1vdXNlRG93bkxpc3RlbmVyID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncG9pbnRlcmRvd24nLFxyXG4gICAgICAgIHRoaXMubW91c2VEb3duTGlzdGVuZXIsXHJcbiAgICAgICAgZmFsc2VcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5tb3VzZVVwTGlzdGVuZXIgPSB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncG9pbnRlcnVwJyxcclxuICAgICAgICB0aGlzLm1vdXNlVXBMaXN0ZW5lcixcclxuICAgICAgICBmYWxzZVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmtleURvd25MaXN0ZW5lciA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW1vdmVFdmVudEhhbmRsZXJzKCkge1xyXG4gICAgaWYgKHRoaXMudXNlQnVpbHRJbkNvbnRyb2xzKSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdwb2ludGVybW92ZScsXHJcbiAgICAgICAgdGhpcy5tb3VzZU1vdmVMaXN0ZW5lclxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm1vdXNlTW92ZUxpc3RlbmVyID0gbnVsbDtcclxuICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ3BvaW50ZXJkb3duJyxcclxuICAgICAgICB0aGlzLm1vdXNlRG93bkxpc3RlbmVyXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubW91c2VEb3duTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncG9pbnRlcnVwJyxcclxuICAgICAgICB0aGlzLm1vdXNlVXBMaXN0ZW5lclxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm1vdXNlVXBMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5rZXlEb3duTGlzdGVuZXIpO1xyXG4gICAgICB0aGlzLmtleURvd25MaXN0ZW5lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRSZW5kZXJNb2RlKHJlbmRlck1vZGUpIHtcclxuICAgIHRoaXMucmVuZGVyTW9kZSA9IHJlbmRlck1vZGU7XHJcbiAgfVxyXG5cclxuICBzZXRBY3RpdmVTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzKGFjdGl2ZVNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXMpIHtcclxuICAgIHRoaXMuc3BsYXRNZXNoLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZS52YWx1ZSA9XHJcbiAgICAgIGFjdGl2ZVNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXM7XHJcbiAgICB0aGlzLnNwbGF0TWVzaC5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgb25TcGxhdE1lc2hDaGFuZ2VkKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLm9uU3BsYXRNZXNoQ2hhbmdlZENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICB0ZW1wRm9yd2FyZCA9IG5ldyBWZWN0b3IzKClcclxuICB0ZW1wTWF0cml4TGVmdCA9IG5ldyBNYXRyaXg0KClcclxuICB0ZW1wTWF0cml4UmlnaHQgPSBuZXcgTWF0cml4NCgpXHJcbiAgb25LZXlEb3duID0gKGUpID0+IHtcclxuICAgIHRoaXMudGVtcEZvcndhcmQuc2V0KDAsIDAsIC0xKTtcclxuICAgIHRoaXMudGVtcEZvcndhcmQudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMuY2FtZXJhLm1hdHJpeFdvcmxkKTtcclxuICAgIHRoaXMudGVtcE1hdHJpeExlZnQubWFrZVJvdGF0aW9uQXhpcyh0aGlzLnRlbXBGb3J3YXJkLCBNYXRoLlBJIC8gMTI4KTtcclxuICAgIHRoaXMudGVtcE1hdHJpeFJpZ2h0Lm1ha2VSb3RhdGlvbkF4aXModGhpcy50ZW1wRm9yd2FyZCwgLU1hdGguUEkgLyAxMjgpO1xyXG4gICAgc3dpdGNoIChlLmNvZGUpIHtcclxuICAgICAgY2FzZSAnS2V5Ryc6XHJcbiAgICAgICAgdGhpcy5mb2NhbEFkanVzdG1lbnQgKz0gMC4wMjtcclxuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnS2V5Ric6XHJcbiAgICAgICAgdGhpcy5mb2NhbEFkanVzdG1lbnQgLT0gMC4wMjtcclxuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnQXJyb3dMZWZ0JzpcclxuICAgICAgICB0aGlzLmNhbWVyYS51cC50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcy50ZW1wTWF0cml4TGVmdCk7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXAudHJhbnNmb3JtRGlyZWN0aW9uKHRoaXMudGVtcE1hdHJpeFJpZ2h0KTtcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdLZXlDJzpcclxuICAgICAgICB0aGlzLnNob3dNZXNoQ3Vyc29yID0gIXRoaXMuc2hvd01lc2hDdXJzb3I7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnS2V5VSc6XHJcbiAgICAgICAgdGhpcy5zaG93Q29udHJvbFBsYW5lID0gIXRoaXMuc2hvd0NvbnRyb2xQbGFuZTtcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdLZXlJJzpcclxuICAgICAgICB0aGlzLnNob3dJbmZvID0gIXRoaXMuc2hvd0luZm87XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0luZm8pIHtcclxuICAgICAgICAgIC8vIHRoaXMuaW5mb1BhbmVsLnNob3coKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyB0aGlzLmluZm9QYW5lbC5oaWRlKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnS2V5Tyc6XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICAgIHRoaXMuc2V0T3J0aG9ncmFwaGljTW9kZSghdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdLZXlQJzpcclxuICAgICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgICAgdGhpcy5zcGxhdE1lc2guc2V0UG9pbnRDbG91ZE1vZGVFbmFibGVkKFxyXG4gICAgICAgICAgICAhdGhpcy5zcGxhdE1lc2guZ2V0UG9pbnRDbG91ZE1vZGVFbmFibGVkKClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0VxdWFsJzpcclxuICAgICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgICAgdGhpcy5zcGxhdE1lc2guc2V0U3BsYXRTY2FsZSh0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdFNjYWxlKCkgKyAwLjA1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnTWludXMnOlxyXG4gICAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgICB0aGlzLnNwbGF0TWVzaC5zZXRTcGxhdFNjYWxlKFxyXG4gICAgICAgICAgICBNYXRoLm1heCh0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdFNjYWxlKCkgLSAwLjA1LCAwLjApXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Nb3VzZU1vdmUobW91c2UpIHtcclxuICAgIHRoaXMubW91c2VQb3NpdGlvbi5zZXQobW91c2Uub2Zmc2V0WCwgbW91c2Uub2Zmc2V0WSk7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlRG93bigpIHtcclxuICAgIHRoaXMubW91c2VEb3duUG9zaXRpb24uY29weSh0aGlzLm1vdXNlUG9zaXRpb24pO1xyXG4gICAgdGhpcy5tb3VzZURvd25UaW1lID0gZ2V0Q3VycmVudFRpbWUoKTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VVcCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjbGlja09mZnNldCA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtb3VzZSkge1xyXG4gICAgICBjbGlja09mZnNldC5jb3B5KHRoaXMubW91c2VQb3NpdGlvbikuc3ViKHRoaXMubW91c2VEb3duUG9zaXRpb24pO1xyXG4gICAgICBjb25zdCBtb3VzZVVwVGltZSA9IGdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgIGNvbnN0IHdhc0NsaWNrID1cclxuICAgICAgICBtb3VzZVVwVGltZSAtIHRoaXMubW91c2VEb3duVGltZSA8IDAuNSAmJiBjbGlja09mZnNldC5sZW5ndGgoKSA8IDI7XHJcbiAgICAgIGlmICh3YXNDbGljaykge1xyXG4gICAgICAgIHRoaXMub25Nb3VzZUNsaWNrKG1vdXNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgb25Nb3VzZUNsaWNrKG1vdXNlKSB7XHJcbiAgICB0aGlzLm1vdXNlUG9zaXRpb24uc2V0KG1vdXNlLm9mZnNldFgsIG1vdXNlLm9mZnNldFkpO1xyXG4gICAgdGhpcy5jaGVja0ZvckZvY2FsUG9pbnRDaGFuZ2UoKTtcclxuICB9XHJcblxyXG4gIGNoZWNrUG9pbnRSZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKVxyXG4gIGNoZWNrUG9pbnRUb05ld0ZvY2FsUG9pbnQgPSBuZXcgVmVjdG9yMygpXHJcbiAgY2hlY2tQb2ludE91dEhpdHMgPSBbXVxyXG4gIGNoZWNrRm9yRm9jYWxQb2ludENoYW5nZSA9ICgpID0+IHtcclxuICAgIGlmICghdGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0KSB7XHJcbiAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyh0aGlzLmNoZWNrUG9pbnRSZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgdGhpcy5jaGVja1BvaW50T3V0SGl0cy5sZW5ndGggPSAwO1xyXG4gICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhQW5kU2NyZWVuUG9zaXRpb24oXHJcbiAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgdGhpcy5tb3VzZVBvc2l0aW9uLFxyXG4gICAgICAgIHRoaXMuY2hlY2tQb2ludFJlbmRlckRpbWVuc2lvbnNcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0U3BsYXRNZXNoKHRoaXMuc3BsYXRNZXNoLCB0aGlzLmNoZWNrUG9pbnRPdXRIaXRzKTtcclxuICAgICAgaWYgKHRoaXMuY2hlY2tQb2ludE91dEhpdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuY2hlY2tQb2ludE91dEhpdHNbMF07XHJcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQgPSBoaXQub3JpZ2luO1xyXG4gICAgICAgIHRoaXMuY2hlY2tQb2ludFRvTmV3Rm9jYWxQb2ludFxyXG4gICAgICAgICAgLmNvcHkoaW50ZXJzZWN0aW9uUG9pbnQpXHJcbiAgICAgICAgICAuc3ViKHRoaXMuY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICB0aGlzLmNoZWNrUG9pbnRUb05ld0ZvY2FsUG9pbnQubGVuZ3RoKCkgPlxyXG4gICAgICAgICAgTUlOSU1VTV9ESVNUQU5DRV9UT19ORVdfRk9DQUxfUE9JTlRcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMucHJldmlvdXNDYW1lcmFUYXJnZXQuY29weSh0aGlzLmNvbnRyb2xzLnRhcmdldCk7XHJcbiAgICAgICAgICB0aGlzLm5leHRDYW1lcmFUYXJnZXQuY29weShpbnRlcnNlY3Rpb25Qb2ludCk7XHJcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXQgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0U3RhcnRUaW1lID0gZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFJlbmRlckRpbWVuc2lvbnMob3V0RGltZW5zaW9ucykge1xyXG4gICAgaWYgKHRoaXMucm9vdEVsZW1lbnQpIHtcclxuICAgICAgb3V0RGltZW5zaW9ucy54ID0gdGhpcy5yb290RWxlbWVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgb3V0RGltZW5zaW9ucy55ID0gdGhpcy5yb290RWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmdldFNpemUob3V0RGltZW5zaW9ucyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRPcnRob2dyYXBoaWNNb2RlKG9ydGhvZ3JhcGhpY01vZGUpIHtcclxuICAgIGlmIChvcnRob2dyYXBoaWNNb2RlID09PSB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSkgcmV0dXJuXHJcbiAgICBjb25zdCBmcm9tQ2FtZXJhID0gdGhpcy5jYW1lcmE7XHJcbiAgICBjb25zdCB0b0NhbWVyYSA9IG9ydGhvZ3JhcGhpY01vZGVcclxuICAgICAgPyB0aGlzLm9ydGhvZ3JhcGhpY0NhbWVyYVxyXG4gICAgICA6IHRoaXMucGVyc3BlY3RpdmVDYW1lcmE7XHJcbiAgICB0b0NhbWVyYS5wb3NpdGlvbi5jb3B5KGZyb21DYW1lcmEucG9zaXRpb24pO1xyXG4gICAgdG9DYW1lcmEudXAuY29weShmcm9tQ2FtZXJhLnVwKTtcclxuICAgIHRvQ2FtZXJhLnJvdGF0aW9uLmNvcHkoZnJvbUNhbWVyYS5yb3RhdGlvbik7XHJcbiAgICB0b0NhbWVyYS5xdWF0ZXJuaW9uLmNvcHkoZnJvbUNhbWVyYS5xdWF0ZXJuaW9uKTtcclxuICAgIHRvQ2FtZXJhLm1hdHJpeC5jb3B5KGZyb21DYW1lcmEubWF0cml4KTtcclxuICAgIHRoaXMuY2FtZXJhID0gdG9DYW1lcmE7XHJcblxyXG4gICAgaWYgKHRoaXMuY29udHJvbHMpIHtcclxuICAgICAgY29uc3QgcmVzZXRDb250cm9scyA9IChjb250cm9scykgPT4ge1xyXG4gICAgICAgIGNvbnRyb2xzLnNhdmVTdGF0ZSgpO1xyXG4gICAgICAgIGNvbnRyb2xzLnJlc2V0KCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBmcm9tQ29udHJvbHMgPSB0aGlzLmNvbnRyb2xzO1xyXG4gICAgICBjb25zdCB0b0NvbnRyb2xzID0gb3J0aG9ncmFwaGljTW9kZVxyXG4gICAgICAgID8gdGhpcy5vcnRob2dyYXBoaWNDb250cm9sc1xyXG4gICAgICAgIDogdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzO1xyXG5cclxuICAgICAgcmVzZXRDb250cm9scyh0b0NvbnRyb2xzKTtcclxuICAgICAgcmVzZXRDb250cm9scyhmcm9tQ29udHJvbHMpO1xyXG5cclxuICAgICAgdG9Db250cm9scy50YXJnZXQuY29weShmcm9tQ29udHJvbHMudGFyZ2V0KTtcclxuICAgICAgaWYgKG9ydGhvZ3JhcGhpY01vZGUpIHtcclxuICAgICAgICBWaWV3ZXIuc2V0Q2FtZXJhWm9vbUZyb21Qb3NpdGlvbih0b0NhbWVyYSwgZnJvbUNhbWVyYSwgZnJvbUNvbnRyb2xzKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBWaWV3ZXIuc2V0Q2FtZXJhUG9zaXRpb25Gcm9tWm9vbSh0b0NhbWVyYSwgZnJvbUNhbWVyYSwgdG9Db250cm9scyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jb250cm9scyA9IHRvQ29udHJvbHM7XHJcbiAgICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLmNvbnRyb2xzLnRhcmdldCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2V0Q2FtZXJhUG9zaXRpb25Gcm9tWm9vbSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB0ZW1wVmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHBvc2l0aW9uQ2FtZXJhLCB6b29tZWRDYW1lcmEsIGNvbnRyb2xzKSB7XHJcbiAgICAgIGNvbnN0IHRvTG9va0F0RGlzdGFuY2UgPSAxIC8gKHpvb21lZENhbWVyYS56b29tICogMC4wMDEpO1xyXG4gICAgICB0ZW1wVmVjdG9yXHJcbiAgICAgICAgLmNvcHkoY29udHJvbHMudGFyZ2V0KVxyXG4gICAgICAgIC5zdWIocG9zaXRpb25DYW1lcmEucG9zaXRpb24pXHJcbiAgICAgICAgLm5vcm1hbGl6ZSgpXHJcbiAgICAgICAgLm11bHRpcGx5U2NhbGFyKHRvTG9va0F0RGlzdGFuY2UpXHJcbiAgICAgICAgLm5lZ2F0ZSgpO1xyXG4gICAgICBwb3NpdGlvbkNhbWVyYS5wb3NpdGlvbi5jb3B5KGNvbnRyb2xzLnRhcmdldCkuYWRkKHRlbXBWZWN0b3IpO1xyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgc3RhdGljIHNldENhbWVyYVpvb21Gcm9tUG9zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgdGVtcFZlY3RvciA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh6b29tQ2FtZXJhLCBwb3NpdGlvblphbWVyYSwgY29udHJvbHMpIHtcclxuICAgICAgY29uc3QgdG9Mb29rQXREaXN0YW5jZSA9IHRlbXBWZWN0b3JcclxuICAgICAgICAuY29weShjb250cm9scy50YXJnZXQpXHJcbiAgICAgICAgLnN1Yihwb3NpdGlvblphbWVyYS5wb3NpdGlvbilcclxuICAgICAgICAubGVuZ3RoKCk7XHJcbiAgICAgIHpvb21DYW1lcmEuem9vbSA9IDEgLyAodG9Mb29rQXREaXN0YW5jZSAqIDAuMDAxKTtcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHVwZGF0ZVNwbGF0TWVzaCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoIXRoaXMuc3BsYXRNZXNoKSByZXR1cm5cclxuICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgaWYgKHNwbGF0Q291bnQgPiAwKSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlVmlzaWJsZVJlZ2lvbkZhZGVEaXN0YW5jZSh0aGlzLnNjZW5lUmV2ZWFsTW9kZSk7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlVHJhbnNmb3JtcygpO1xyXG4gICAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgICBjb25zdCBmb2NhbExlbmd0aFggPVxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1swXSAqXHJcbiAgICAgICAgICAwLjUgKlxyXG4gICAgICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvICpcclxuICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnMueDtcclxuICAgICAgICBjb25zdCBmb2NhbExlbmd0aFkgPVxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1s1XSAqXHJcbiAgICAgICAgICAwLjUgKlxyXG4gICAgICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvICpcclxuICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnMueTtcclxuXHJcbiAgICAgICAgY29uc3QgZm9jYWxNdWx0aXBsaWVyID0gdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmFcclxuICAgICAgICAgID8gMS4wIC8gdGhpcy5kZXZpY2VQaXhlbFJhdGlvXHJcbiAgICAgICAgICA6IDEuMDtcclxuICAgICAgICBjb25zdCBmb2NhbEFkanVzdG1lbnQgPSB0aGlzLmZvY2FsQWRqdXN0bWVudCAqIGZvY2FsTXVsdGlwbGllcjtcclxuICAgICAgICBjb25zdCBpbnZlcnNlRm9jYWxBZGp1c3RtZW50ID0gMS4wIC8gZm9jYWxBZGp1c3RtZW50O1xyXG5cclxuICAgICAgICB0aGlzLmFkanVzdEZvcldlYlhSU3RlcmVvKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVVuaWZvcm1zKFxyXG4gICAgICAgICAgcmVuZGVyRGltZW5zaW9ucyxcclxuICAgICAgICAgIGZvY2FsTGVuZ3RoWCAqIGZvY2FsQWRqdXN0bWVudCxcclxuICAgICAgICAgIGZvY2FsTGVuZ3RoWSAqIGZvY2FsQWRqdXN0bWVudCxcclxuICAgICAgICAgIHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhLFxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEuem9vbSB8fCAxLjAsXHJcbiAgICAgICAgICBpbnZlcnNlRm9jYWxBZGp1c3RtZW50XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgYWRqdXN0Rm9yV2ViWFJTdGVyZW8ocmVuZGVyRGltZW5zaW9ucykge1xyXG4gICAgLy8gVE9ETzogRmlndXJlIG91dCBhIGxlc3MgaGFja3kgd2F5IHRvIGRldGVybWluZSBpZiBzdGVyZW8gcmVuZGVyaW5nIGlzIGFjdGl2ZVxyXG4gICAgaWYgKHRoaXMuY2FtZXJhICYmIHRoaXMud2ViWFJBY3RpdmUpIHtcclxuICAgICAgY29uc3QgeHJDYW1lcmEgPSB0aGlzLnJlbmRlcmVyLnhyLmdldENhbWVyYSgpO1xyXG4gICAgICBjb25zdCB4ckNhbWVyYVByb2owMCA9IHhyQ2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMF07XHJcbiAgICAgIGNvbnN0IGNhbWVyYVByb2owMCA9IHRoaXMuY2FtZXJhLnByb2plY3Rpb25NYXRyaXguZWxlbWVudHNbMF07XHJcbiAgICAgIHJlbmRlckRpbWVuc2lvbnMueCAqPSBjYW1lcmFQcm9qMDAgLyB4ckNhbWVyYVByb2owMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzTG9hZGluZ09yVW5sb2FkaW5nKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgT2JqZWN0LmtleXModGhpcy5zcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlcykubGVuZ3RoID4gMCB8fFxyXG4gICAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSAhPT0gbnVsbCB8fFxyXG4gICAgICB0aGlzLnNwbGF0U2NlbmVSZW1vdmFsUHJvbWlzZSAhPT0gbnVsbFxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGlzcG9zaW5nIHx8IHRoaXMuZGlzcG9zZWRcclxuICB9XHJcblxyXG4gIGFkZFNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXIoY29udHJvbGxlcikge1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVycy5wdXNoKGNvbnRyb2xsZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcihjb250cm9sbGVyKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcnMuaW5kZXhPZihjb250cm9sbGVyKTtcclxuICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZFByb21pc2VzW3Byb21pc2UuaWRdID0gcHJvbWlzZTtcclxuICB9XHJcblxyXG4gIHJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UocHJvbWlzZSkge1xyXG4gICAgZGVsZXRlIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZXNbcHJvbWlzZS5pZF07XHJcbiAgfVxyXG5cclxuICBzZXRTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UocHJvbWlzZSkge1xyXG4gICAgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UgPSBwcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKSB7XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgYSBzcGxhdCBzY2VuZSB0byB0aGUgdmlld2VyIGFuZCBkaXNwbGF5IGFueSBsb2FkaW5nIFVJIGlmIGFwcHJvcHJpYXRlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gc3BsYXQgc2NlbmUgdG8gYmUgbG9hZGVkXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMge1xyXG4gICAqXHJcbiAgICogICAgICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZDogSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSksIGRlZmF1bHRzIHRvIDFcclxuICAgKlxyXG4gICAqICAgICAgICAgc2hvd0xvYWRpbmdVSTogICAgICAgICBEaXNwbGF5IGEgbG9hZGluZyBzcGlubmVyIHdoaWxlIHRoZSBzY2VuZSBpcyBsb2FkaW5nLCBkZWZhdWx0cyB0byB0cnVlXHJcbiAgICpcclxuICAgKiAgICAgICAgIHBvc2l0aW9uIChBcnJheTxudW1iZXI+KTogICBQb3NpdGlvbiBvZiB0aGUgc2NlbmUsIGFjdHMgYXMgYW4gb2Zmc2V0IGZyb20gaXRzIGRlZmF1bHQgcG9zaXRpb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwXVxyXG4gICAqXHJcbiAgICogICAgICAgICByb3RhdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUm90YXRpb24gb2YgdGhlIHNjZW5lIHJlcHJlc2VudGVkIGFzIGEgcXVhdGVybmlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDAsIDFdXHJcbiAgICpcclxuICAgKiAgICAgICAgIHNjYWxlIChBcnJheTxudW1iZXI+KTogICAgICBTY2VuZSdzIHNjYWxlLCBkZWZhdWx0cyB0byBbMSwgMSwgMV1cclxuICAgKlxyXG4gICAqICAgICAgICAgb25Qcm9ncmVzczogICAgICAgICAgICAgICAgIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBhcyBmaWxlIGRhdGEgYXJlIHJlY2VpdmVkLCBvciBvdGhlciBwcm9jZXNzaW5nIG9jY3Vyc1xyXG4gICAqXHJcbiAgICogICAgICAgICBoZWFkZXJzOiAgICAgICAgICAgICAgICAgICAgT3B0aW9uYWwgSFRUUCBoZWFkZXJzIHRvIGJlIHNlbnQgYWxvbmcgd2l0aCBzcGxhdCByZXF1ZXN0c1xyXG4gICAqIH1cclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIGFkZFNwbGF0U2NlbmUocGF0aCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICBpZiAodGhpcy5pc0xvYWRpbmdPclVubG9hZGluZygpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnQ2Fubm90IGFkZCBzcGxhdCBzY2VuZSB3aGlsZSBhbm90aGVyIGxvYWQgb3IgdW5sb2FkIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuJ1xyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgYWRkIHNwbGF0IHNjZW5lIGFmdGVyIGRpc3Bvc2UoKSBpcyBjYWxsZWQuJylcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMucHJvZ3Jlc3NpdmVMb2FkICYmXHJcbiAgICAgIHRoaXMuc3BsYXRNZXNoLnNjZW5lcyAmJlxyXG4gICAgICB0aGlzLnNwbGF0TWVzaC5zY2VuZXMubGVuZ3RoID4gMFxyXG4gICAgKSB7XHJcbiAgICAgIGxvZ2dlci53YXJuKFxyXG4gICAgICAgICdhZGRTcGxhdFNjZW5lKCk6IFwicHJvZ3Jlc3NpdmVMb2FkXCIgb3B0aW9uIGlnbm9yZSBiZWNhdXNlIHRoZXJlIGFyZSBtdWx0aXBsZSBzcGxhdCBzY2VuZXMnXHJcbiAgICAgICk7XHJcbiAgICAgIG9wdGlvbnMucHJvZ3Jlc3NpdmVMb2FkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybWF0ID1cclxuICAgICAgb3B0aW9ucy5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmZvcm1hdCAhPT0gbnVsbFxyXG4gICAgICAgID8gb3B0aW9ucy5mb3JtYXRcclxuICAgICAgICA6IHNjZW5lRm9ybWF0RnJvbVBhdGgocGF0aCk7XHJcbiAgICBjb25zdCBwcm9ncmVzc2l2ZUxvYWQgPVxyXG4gICAgICBWaWV3ZXIuaXNQcm9ncmVzc2l2ZWx5TG9hZGFibGUoZm9ybWF0KSAmJiBvcHRpb25zLnByb2dyZXNzaXZlTG9hZDtcclxuICAgIGNvbnN0IHNob3dMb2FkaW5nVUkgPVxyXG4gICAgICBvcHRpb25zLnNob3dMb2FkaW5nVUkgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnNob3dMb2FkaW5nVUkgIT09IG51bGxcclxuICAgICAgICA/IG9wdGlvbnMuc2hvd0xvYWRpbmdVSVxyXG4gICAgICAgIDogdHJ1ZTtcclxuXHJcbiAgICBsZXQgbG9hZGluZ1VJVGFza0lkID0gbnVsbDtcclxuICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlQWxsVGFza3MoKTtcclxuICAgICAgbG9hZGluZ1VJVGFza0lkID0gdGhpcy5sb2FkaW5nU3Bpbm5lci5hZGRUYXNrKCdEb3dubG9hZGluZy4uLicpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGlkZUxvYWRpbmdVSSA9ICgpID0+IHtcclxuICAgICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuaGlkZSgpO1xyXG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZUFsbFRhc2tzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uUHJvZ3Jlc3NVSVVwZGF0ZSA9IChcclxuICAgICAgcGVyY2VudENvbXBsZXRlLFxyXG4gICAgICBwZXJjZW50Q29tcGxldGVMYWJlbCxcclxuICAgICAgbG9hZGVyU3RhdHVzXHJcbiAgICApID0+IHtcclxuICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgICBpZiAobG9hZGVyU3RhdHVzID09PSBMb2FkZXJTdGF0dXMuRG93bmxvYWRpbmcpIHtcclxuICAgICAgICAgIGlmIChwZXJjZW50Q29tcGxldGUgPT0gMTAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0TWVzc2FnZUZvclRhc2soXHJcbiAgICAgICAgICAgICAgbG9hZGluZ1VJVGFza0lkLFxyXG4gICAgICAgICAgICAgICdEb3dubG9hZCBjb21wbGV0ZSEnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3NpdmVMb2FkKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRNZXNzYWdlRm9yVGFzayhcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdVSVRhc2tJZCxcclxuICAgICAgICAgICAgICAgICdEb3dubG9hZGluZyBzcGxhdHMuLi4nXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjb25zdCBzdWZmaXggPSBwZXJjZW50Q29tcGxldGVMYWJlbFxyXG4gICAgICAgICAgICAgICAgPyBgOiAke3BlcmNlbnRDb21wbGV0ZUxhYmVsfWBcclxuICAgICAgICAgICAgICAgIDogYC4uLmA7XHJcbiAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRNZXNzYWdlRm9yVGFzayhcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdVSVRhc2tJZCxcclxuICAgICAgICAgICAgICAgIGBEb3dubG9hZGluZyR7c3VmZml4fWBcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChsb2FkZXJTdGF0dXMgPT09IExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nKSB7XHJcbiAgICAgICAgICBsb2dnZXIuZGVidWcoJ2xvYWRlclN0YXR1cyA9PT0gTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcnKTtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0TWVzc2FnZUZvclRhc2soXHJcbiAgICAgICAgICAgIGxvYWRpbmdVSVRhc2tJZCxcclxuICAgICAgICAgICAgJ1Byb2Nlc3Npbmcgc3BsYXRzLi4uJ1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGV0IGRvd25sb2FkRG9uZSA9IGZhbHNlO1xyXG4gICAgbGV0IGRvd25sb2FkZWRQZXJjZW50YWdlID0gMDtcclxuICAgIGNvbnN0IHNwbGF0QnVmZmVyc0FkZGVkVUlVcGRhdGUgPSAoZmlyc3RCdWlsZCwgZmluYWxCdWlsZCkgPT4ge1xyXG4gICAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIChmaXJzdEJ1aWxkICYmIHByb2dyZXNzaXZlTG9hZCkgfHxcclxuICAgICAgICAgIChmaW5hbEJ1aWxkICYmICFwcm9ncmVzc2l2ZUxvYWQpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZVRhc2sobG9hZGluZ1VJVGFza0lkKTtcclxuICAgICAgICAgIGlmICghZmluYWxCdWlsZCAmJiAhZG93bmxvYWREb25lKSB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwcm9ncmVzc2l2ZUxvYWQpIHtcclxuICAgICAgICAgIGlmIChmaW5hbEJ1aWxkKSB7XHJcbiAgICAgICAgICAgIGRvd25sb2FkRG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLmhpZGUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLnNldFByb2dyZXNzKGRvd25sb2FkZWRQZXJjZW50YWdlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25Qcm9ncmVzcyA9IChcclxuICAgICAgcGVyY2VudENvbXBsZXRlLFxyXG4gICAgICBwZXJjZW50Q29tcGxldGVMYWJlbCxcclxuICAgICAgbG9hZGVyU3RhdHVzXHJcbiAgICApID0+IHtcclxuICAgICAgZG93bmxvYWRlZFBlcmNlbnRhZ2UgPSBwZXJjZW50Q29tcGxldGU7XHJcbiAgICAgIG9uUHJvZ3Jlc3NVSVVwZGF0ZShwZXJjZW50Q29tcGxldGUsIHBlcmNlbnRDb21wbGV0ZUxhYmVsLCBsb2FkZXJTdGF0dXMpO1xyXG4gICAgICBpZiAob3B0aW9ucy5vblByb2dyZXNzKVxyXG4gICAgICAgIG9wdGlvbnMub25Qcm9ncmVzcyhwZXJjZW50Q29tcGxldGUsIHBlcmNlbnRDb21wbGV0ZUxhYmVsLCBsb2FkZXJTdGF0dXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBidWlsZFNlY3Rpb24gPSAoc3BsYXRCdWZmZXIsIGZpcnN0QnVpbGQsIGZpbmFsQnVpbGQpID0+IHtcclxuICAgICAgaWYgKCFwcm9ncmVzc2l2ZUxvYWQgJiYgb3B0aW9ucy5vblByb2dyZXNzKVxyXG4gICAgICAgIG9wdGlvbnMub25Qcm9ncmVzcygwLCAnMCUnLCBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZyk7XHJcbiAgICAgIGNvbnN0IGFkZFNwbGF0QnVmZmVyT3B0aW9ucyA9IHtcclxuICAgICAgICByb3RhdGlvbjogb3B0aW9ucy5yb3RhdGlvbiB8fCBvcHRpb25zLm9yaWVudGF0aW9uLFxyXG4gICAgICAgIHBvc2l0aW9uOiBvcHRpb25zLnBvc2l0aW9uLFxyXG4gICAgICAgIHNjYWxlOiBvcHRpb25zLnNjYWxlLFxyXG4gICAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkOiBvcHRpb25zLnNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLmFkZFNwbGF0QnVmZmVycyhcclxuICAgICAgICBbc3BsYXRCdWZmZXJdLFxyXG4gICAgICAgIFthZGRTcGxhdEJ1ZmZlck9wdGlvbnNdLFxyXG4gICAgICAgIGZpbmFsQnVpbGQsXHJcbiAgICAgICAgZmlyc3RCdWlsZCAmJiBzaG93TG9hZGluZ1VJLFxyXG4gICAgICAgIHNob3dMb2FkaW5nVUksXHJcbiAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkLFxyXG4gICAgICAgIHByb2dyZXNzaXZlTG9hZFxyXG4gICAgICApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGlmICghcHJvZ3Jlc3NpdmVMb2FkICYmIG9wdGlvbnMub25Qcm9ncmVzcylcclxuICAgICAgICAgIG9wdGlvbnMub25Qcm9ncmVzcygxMDAsICcxMDAlJywgTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcpO1xyXG4gICAgICAgIHNwbGF0QnVmZmVyc0FkZGVkVUlVcGRhdGUoZmlyc3RCdWlsZCwgZmluYWxCdWlsZCk7XHJcbiAgICAgIH0pXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGxvYWRGdW5jID0gcHJvZ3Jlc3NpdmVMb2FkXHJcbiAgICAgID8gdGhpcy5kb3dubG9hZEFuZEJ1aWxkU2luZ2xlU3BsYXRTY2VuZVByb2dyZXNzaXZlTG9hZC5iaW5kKHRoaXMpXHJcbiAgICAgIDogdGhpcy5kb3dubG9hZEFuZEJ1aWxkU2luZ2xlU3BsYXRTY2VuZVN0YW5kYXJkTG9hZC5iaW5kKHRoaXMpO1xyXG4gICAgcmV0dXJuIGxvYWRGdW5jKFxyXG4gICAgICBwYXRoLFxyXG4gICAgICBmb3JtYXQsXHJcbiAgICAgIG9wdGlvbnMuc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICAgIGJ1aWxkU2VjdGlvbi5iaW5kKHRoaXMpLFxyXG4gICAgICBvblByb2dyZXNzLFxyXG4gICAgICBoaWRlTG9hZGluZ1VJLmJpbmQodGhpcyksXHJcbiAgICAgIG9wdGlvbnMuaGVhZGVyc1xyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRG93bmxvYWQgYSBzaW5nbGUgc3BsYXQgc2NlbmUsIGNvbnZlcnQgdG8gc3BsYXQgYnVmZmVyIGFuZCB0aGVuIHJlYnVpbGQgdGhlIHZpZXdlcidzIHNwbGF0IG1lc2hcclxuICAgKiBieSBjYWxsaW5nICdidWlsZEZ1bmMnIC0tIGFsbCBiZWZvcmUgZGlzcGxheWluZyB0aGUgc2NlbmUuIEFsc28gc2V0cy9jbGVhcnMgcmVsZXZhbnQgaW5zdGFuY2Ugc3luY2hyb25pemF0aW9uIG9iamVjdHMsXHJcbiAgICogYW5kIGNhbGxzIGFwcHJvcHJpYXRlIGZ1bmN0aW9ucyBvbiBzdWNjZXNzIG9yIGZhaWx1cmUuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBzcGxhdCBzY2VuZSB0byBiZSBsb2FkZWRcclxuICAgKiBAcGFyYW0ge1NjZW5lRm9ybWF0fSBmb3JtYXQgRm9ybWF0IG9mIHRoZSBzcGxhdCBzY2VuZSBmaWxlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkIElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWQgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGJ1aWxkRnVuYyBGdW5jdGlvbiB0byBidWlsZCB0aGUgdmlld2VyJ3Mgc3BsYXQgbWVzaCB3aXRoIHRoZSBkb3dubG9hZGVkIHNwbGF0IGJ1ZmZlclxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uUHJvZ3Jlc3MgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFzIGZpbGUgZGF0YSBhcmUgcmVjZWl2ZWQsIG9yIG90aGVyIHByb2Nlc3Npbmcgb2NjdXJzXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25FeGNlcHRpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gZXhjZXB0aW9uIG9jY3Vyc1xyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoZWFkZXJzIE9wdGlvbmFsIEhUVFAgaGVhZGVycyB0byBwYXNzIHRvIHVzZSBmb3IgZG93bmxvYWRpbmcgc3BsYXQgc2NlbmVcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIGRvd25sb2FkQW5kQnVpbGRTaW5nbGVTcGxhdFNjZW5lU3RhbmRhcmRMb2FkKFxyXG4gICAgcGF0aCxcclxuICAgIGZvcm1hdCxcclxuICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgYnVpbGRGdW5jLFxyXG4gICAgb25Qcm9ncmVzcyxcclxuICAgIG9uRXhjZXB0aW9uLFxyXG4gICAgaGVhZGVyc1xyXG4gICkge1xyXG4gICAgY29uc3QgZG93bmxvYWRQcm9taXNlID0gdGhpcy5kb3dubG9hZFNwbGF0U2NlbmVUb1NwbGF0QnVmZmVyKFxyXG4gICAgICBwYXRoLFxyXG4gICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgICAgb25Qcm9ncmVzcyxcclxuICAgICAgZmFsc2UsXHJcbiAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgZm9ybWF0LFxyXG4gICAgICBoZWFkZXJzXHJcbiAgICApO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIHByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQvcmVqZWN0ZWQgZXh0ZXJuYWxseSwgd2l0aCBhYm9ydCBjYXBhYmlsaXR5XHJcbiAgICBjb25zdCBkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSA9IGFib3J0YWJsZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cyhcclxuICAgICAgZG93bmxvYWRQcm9taXNlLmFib3J0ID8gZG93bmxvYWRQcm9taXNlLmFib3J0LmJpbmQoZG93bmxvYWRQcm9taXNlKSA6IHVuZGVmaW5lZFxyXG4gICAgKTtcclxuXHJcbiAgICBkb3dubG9hZFByb21pc2VcclxuICAgICAgLnRoZW4oKHNwbGF0QnVmZmVyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKGRvd25sb2FkUHJvbWlzZSk7XHJcbiAgICAgICAgcmV0dXJuIGJ1aWxkRnVuYyhzcGxhdEJ1ZmZlciwgdHJ1ZSwgdHJ1ZSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICB0aGlzLmNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgaWYgKG9uRXhjZXB0aW9uKSBvbkV4Y2VwdGlvbigpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UoZG93bmxvYWRQcm9taXNlKTtcclxuICAgICAgICBjb25zdCBlcnJvciA9XHJcbiAgICAgICAgICAoZSBpbnN0YW5jZW9mIEFib3J0ZWRQcm9taXNlRXJyb3IgfHwgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpXHJcbiAgICAgICAgICAgID8gZVxyXG4gICAgICAgICAgICA6IG5ldyBFcnJvcihgVmlld2VyOjphZGRTcGxhdFNjZW5lIC0+IENvdWxkIG5vdCBsb2FkIGZpbGUgJHtwYXRofWApO1xyXG4gICAgICAgIGRvd25sb2FkQW5kQnVpbGRQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuYWRkU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShkb3dubG9hZFByb21pc2UpO1xyXG4gICAgdGhpcy5zZXRTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoZG93bmxvYWRBbmRCdWlsZFByb21pc2UucHJvbWlzZSk7XHJcblxyXG4gICAgcmV0dXJuIGRvd25sb2FkQW5kQnVpbGRQcm9taXNlLnByb21pc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERvd25sb2FkIGEgc2luZ2xlIHNwbGF0IHNjZW5lIGFuZCBjb252ZXJ0IHRvIHNwbGF0IGJ1ZmZlciBpbiBhIHByb2dyZXNzaXZlIG1hbm5lciwgYWxsb3dpbmcgcmVuZGVyaW5nIGFzIHRoZSBmaWxlIGRvd25sb2Fkcy5cclxuICAgKiBBcyBlYWNoIHNlY3Rpb24gaXMgZG93bmxvYWRlZCwgdGhlIHZpZXdlcidzIHNwbGF0IG1lc2ggaXMgcmVidWlsdCBieSBjYWxsaW5nICdidWlsZEZ1bmMnXHJcbiAgICogQWxzbyBzZXRzL2NsZWFycyByZWxldmFudCBpbnN0YW5jZSBzeW5jaHJvbml6YXRpb24gb2JqZWN0cywgYW5kIGNhbGxzIGFwcHJvcHJpYXRlIGZ1bmN0aW9ucyBvbiBzdWNjZXNzIG9yIGZhaWx1cmUuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBzcGxhdCBzY2VuZSB0byBiZSBsb2FkZWRcclxuICAgKiBAcGFyYW0ge1NjZW5lRm9ybWF0fSBmb3JtYXQgRm9ybWF0IG9mIHRoZSBzcGxhdCBzY2VuZSBmaWxlXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkIElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWQgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGJ1aWxkRnVuYyBGdW5jdGlvbiB0byByZWJ1aWxkIHRoZSB2aWV3ZXIncyBzcGxhdCBtZXNoIGFmdGVyIGEgbmV3IHNwbGF0IGJ1ZmZlciBzZWN0aW9uIGlzIGRvd25sb2FkZWRcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkRvd25sb2FkUHJvZ3Jlc3MgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFzIGZpbGUgZGF0YSBhcmUgcmVjZWl2ZWRcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkRvd25sb2FkRXhjZXB0aW9uIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGV4Y2VwdGlvbiBvY2N1cnMgYXQgYW55IHBvaW50IGR1cmluZyB0aGUgZnVsbCBkb3dubG9hZFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoZWFkZXJzIE9wdGlvbmFsIEhUVFAgaGVhZGVycyB0byBwYXNzIHRvIHVzZSBmb3IgZG93bmxvYWRpbmcgc3BsYXQgc2NlbmVcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIGRvd25sb2FkQW5kQnVpbGRTaW5nbGVTcGxhdFNjZW5lUHJvZ3Jlc3NpdmVMb2FkKFxyXG4gICAgcGF0aCxcclxuICAgIGZvcm1hdCxcclxuICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgYnVpbGRGdW5jLFxyXG4gICAgb25Eb3dubG9hZFByb2dyZXNzLFxyXG4gICAgb25Eb3dubG9hZEV4Y2VwdGlvbixcclxuICAgIGhlYWRlcnNcclxuICApIHtcclxuICAgIGxldCBwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZENvdW50ID0gMDtcclxuICAgIGxldCBwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZGluZyA9IGZhbHNlO1xyXG4gICAgY29uc3QgcXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkcyA9IFtdO1xyXG5cclxuICAgIGNvbnN0IGNoZWNrQW5kQnVpbGRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9ucyA9ICgpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICFwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZGluZyAmJlxyXG4gICAgICAgICF0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkaW5nID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBxdWV1ZWRCdWlsZCA9IHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHMuc2hpZnQoKTtcclxuICAgICAgICBidWlsZEZ1bmMoXHJcbiAgICAgICAgICBxdWV1ZWRCdWlsZC5zcGxhdEJ1ZmZlcixcclxuICAgICAgICAgIHF1ZXVlZEJ1aWxkLmZpcnN0QnVpbGQsXHJcbiAgICAgICAgICBxdWV1ZWRCdWlsZC5maW5hbEJ1aWxkXHJcbiAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICBpZiAocXVldWVkQnVpbGQuZmlyc3RCdWlsZCkge1xyXG4gICAgICAgICAgICBwcm9ncmVzc2l2ZUxvYWRGaXJzdFNlY3Rpb25CdWlsZFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChxdWV1ZWRCdWlsZC5maW5hbEJ1aWxkKSB7XHJcbiAgICAgICAgICAgIHNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZGVsYXllZEV4ZWN1dGUoKCkgPT4gY2hlY2tBbmRCdWlsZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25zKCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzID0gKHNwbGF0QnVmZmVyLCBmaW5hbEJ1aWxkKSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIGZpbmFsQnVpbGQgfHxcclxuICAgICAgICAgIHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHMubGVuZ3RoID09PSAwIHx8XHJcbiAgICAgICAgICBzcGxhdEJ1ZmZlci5nZXRTcGxhdENvdW50KCkgPlxyXG4gICAgICAgICAgICBxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzWzBdLnNwbGF0QnVmZmVyLmdldFNwbGF0Q291bnQoKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgcXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkcy5wdXNoKHtcclxuICAgICAgICAgICAgc3BsYXRCdWZmZXIsXHJcbiAgICAgICAgICAgIGZpcnN0QnVpbGQ6IHByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkQ291bnQgPT09IDAsXHJcbiAgICAgICAgICAgIGZpbmFsQnVpbGRcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRDb3VudCsrO1xyXG4gICAgICAgICAgY2hlY2tBbmRCdWlsZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UgPSB0aGlzLmRvd25sb2FkU3BsYXRTY2VuZVRvU3BsYXRCdWZmZXIoXHJcbiAgICAgIHBhdGgsXHJcbiAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgICBvbkRvd25sb2FkUHJvZ3Jlc3MsXHJcbiAgICAgIHRydWUsXHJcbiAgICAgIG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzLFxyXG4gICAgICBmb3JtYXQsXHJcbiAgICAgIGhlYWRlcnNcclxuICAgICk7XHJcblxyXG4gICAgLy8gR2V0IGFib3J0IGhhbmRsZXIgZnJvbSBkb3dubG9hZCBwcm9taXNlXHJcbiAgICBjb25zdCBhYm9ydEhhbmRsZXIgPSBzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlLmFib3J0IFxyXG4gICAgICA/IHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UuYWJvcnQuYmluZChzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKSBcclxuICAgICAgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3QgcHJvZ3Jlc3NpdmVMb2FkRmlyc3RTZWN0aW9uQnVpbGRQcm9taXNlID1cclxuICAgICAgYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzKGFib3J0SGFuZGxlcik7XHJcblxyXG4gICAgY29uc3Qgc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlID1cclxuICAgICAgYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzKGFib3J0SGFuZGxlcik7XHJcblxyXG4gICAgdGhpcy5hZGRTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UpO1xyXG4gICAgdGhpcy5zZXRTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoXHJcbiAgICAgIHNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZS5wcm9taXNlXHJcbiAgICApO1xyXG5cclxuICAgIHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2VcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdWaWV3ZXI6OmFkZFNwbGF0U2NlbmUgYWN0dWFsIGVycm9yOicsIGUpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKTtcclxuICAgICAgICB0aGlzLnJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZFByb21pc2Uoc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZSk7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPVxyXG4gICAgICAgICAgKGUgaW5zdGFuY2VvZiBBYm9ydGVkUHJvbWlzZUVycm9yIHx8IGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InKVxyXG4gICAgICAgICAgICA/IGVcclxuICAgICAgICAgICAgOiBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgVmlld2VyOjphZGRTcGxhdFNjZW5lIC0+IENvdWxkIG5vdCBsb2FkIG9uZSBvciBtb3JlIHNjZW5lczogJHtlLm1lc3NhZ2V9YFxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkRmlyc3RTZWN0aW9uQnVpbGRQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgaWYgKG9uRG93bmxvYWRFeGNlcHRpb24pIG9uRG93bmxvYWRFeGNlcHRpb24oZXJyb3IpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gcHJvZ3Jlc3NpdmVMb2FkRmlyc3RTZWN0aW9uQnVpbGRQcm9taXNlLnByb21pc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBtdWx0aXBsZSBzcGxhdCBzY2VuZXMgdG8gdGhlIHZpZXdlciBhbmQgZGlzcGxheSBhbnkgbG9hZGluZyBVSSBpZiBhcHByb3ByaWF0ZS5cclxuICAgKiBAcGFyYW0ge0FycmF5PG9iamVjdD59IHNjZW5lT3B0aW9ucyBBcnJheSBvZiBwZXItc2NlbmUgb3B0aW9uczoge1xyXG4gICAqXHJcbiAgICogICAgICAgICBwYXRoOiBQYXRoIHRvIHNwbGF0IHNjZW5lIHRvIGJlIGxvYWRlZFxyXG4gICAqXHJcbiAgICogICAgICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZDogSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSksIGRlZmF1bHRzIHRvIDFcclxuICAgKlxyXG4gICAqICAgICAgICAgcG9zaXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFBvc2l0aW9uIG9mIHRoZSBzY2VuZSwgYWN0cyBhcyBhbiBvZmZzZXQgZnJvbSBpdHMgZGVmYXVsdCBwb3NpdGlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDBdXHJcbiAgICpcclxuICAgKiAgICAgICAgIHJvdGF0aW9uIChBcnJheTxudW1iZXI+KTogICBSb3RhdGlvbiBvZiB0aGUgc2NlbmUgcmVwcmVzZW50ZWQgYXMgYSBxdWF0ZXJuaW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMCwgMV1cclxuICAgKlxyXG4gICAqICAgICAgICAgc2NhbGUgKEFycmF5PG51bWJlcj4pOiAgICAgIFNjZW5lJ3Mgc2NhbGUsIGRlZmF1bHRzIHRvIFsxLCAxLCAxXVxyXG4gICAqXHJcbiAgICogICAgICAgICBoZWFkZXJzOiAgICAgICAgICAgICAgICAgICAgT3B0aW9uYWwgSFRUUCBoZWFkZXJzIHRvIGJlIHNlbnQgYWxvbmcgd2l0aCBzcGxhdCByZXF1ZXN0c1xyXG4gICAqXHJcbiAgICogICAgICAgICBmb3JtYXQgKFNjZW5lRm9ybWF0KSAgICAgICAgT3B0aW9uYWwsIHRoZSBmb3JtYXQgb2YgdGhlIHNjZW5lIGRhdGEgKC5wbHksIC5rc3BsYXQsIC5zcGxhdCkuIElmIG5vdCBwcmVzZW50LCB0aGVcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlIGV4dGVuc2lvbiBpbiAncGF0aCcgd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgZm9ybWF0IChpZiBpdCBpcyBwcmVzZW50KVxyXG4gICAqIH1cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dMb2FkaW5nVUkgRGlzcGxheSBhIGxvYWRpbmcgc3Bpbm5lciB3aGlsZSB0aGUgc2NlbmUgaXMgbG9hZGluZywgZGVmYXVsdHMgdG8gdHJ1ZVxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uUHJvZ3Jlc3MgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFzIGZpbGUgZGF0YSBhcmUgcmVjZWl2ZWRcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIGFkZFNwbGF0U2NlbmVzKHNjZW5lT3B0aW9ucywgc2hvd0xvYWRpbmdVSSA9IHRydWUsIG9uUHJvZ3Jlc3MgPSB1bmRlZmluZWQpIHtcclxuICAgIGlmICh0aGlzLmlzTG9hZGluZ09yVW5sb2FkaW5nKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICdDYW5ub3QgYWRkIHNwbGF0IHNjZW5lIHdoaWxlIGFub3RoZXIgbG9hZCBvciB1bmxvYWQgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4nXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBhZGQgc3BsYXQgc2NlbmUgYWZ0ZXIgZGlzcG9zZSgpIGlzIGNhbGxlZC4nKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVDb3VudCA9IHNjZW5lT3B0aW9ucy5sZW5ndGg7XHJcbiAgICBjb25zdCBwZXJjZW50Q29tcGxldGUgPSBbXTtcclxuXHJcbiAgICBsZXQgbG9hZGluZ1VJVGFza0lkO1xyXG4gICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgICBsb2FkaW5nVUlUYXNrSWQgPSB0aGlzLmxvYWRpbmdTcGlubmVyLmFkZFRhc2soJ0Rvd25sb2FkaW5nLi4uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb25Mb2FkUHJvZ3Jlc3MgPSAoZmlsZUluZGV4LCBwZXJjZW50LCBwZXJjZW50TGFiZWwsIGxvYWRlclN0YXR1cykgPT4ge1xyXG4gICAgICBwZXJjZW50Q29tcGxldGVbZmlsZUluZGV4XSA9IHBlcmNlbnQ7XHJcbiAgICAgIGxldCB0b3RhbFBlcmNlbnQgPSAwO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVDb3VudDsgaSsrKVxyXG4gICAgICAgIHRvdGFsUGVyY2VudCArPSBwZXJjZW50Q29tcGxldGVbaV0gfHwgMDtcclxuICAgICAgdG90YWxQZXJjZW50ID0gdG90YWxQZXJjZW50IC8gZmlsZUNvdW50O1xyXG4gICAgICBwZXJjZW50TGFiZWwgPSBgJHt0b3RhbFBlcmNlbnQudG9GaXhlZCgyKX0lYDtcclxuICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgICBpZiAobG9hZGVyU3RhdHVzID09PSBMb2FkZXJTdGF0dXMuRG93bmxvYWRpbmcpIHtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0TWVzc2FnZUZvclRhc2soXHJcbiAgICAgICAgICAgIGxvYWRpbmdVSVRhc2tJZCxcclxuICAgICAgICAgICAgdG90YWxQZXJjZW50ID09IDEwMFxyXG4gICAgICAgICAgICAgID8gYERvd25sb2FkIGNvbXBsZXRlIWBcclxuICAgICAgICAgICAgICA6IGBEb3dubG9hZGluZzogJHtwZXJjZW50TGFiZWx9YFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9uUHJvZ3Jlc3MpIG9uUHJvZ3Jlc3ModG90YWxQZXJjZW50LCBwZXJjZW50TGFiZWwsIGxvYWRlclN0YXR1cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XHJcbiAgICB0aGlzLmFkZFNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXIoYWJvcnRDb250cm9sbGVyKTtcclxuXHJcbiAgICBjb25zdCBkb3dubG9hZFByb21pc2VzID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjZW5lT3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjb25zdCBvcHRpb25zID0gc2NlbmVPcHRpb25zW2ldO1xyXG4gICAgICBjb25zdCBmb3JtYXQgPVxyXG4gICAgICAgIG9wdGlvbnMuZm9ybWF0ICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5mb3JtYXQgIT09IG51bGxcclxuICAgICAgICAgID8gb3B0aW9ucy5mb3JtYXRcclxuICAgICAgICAgIDogc2NlbmVGb3JtYXRGcm9tUGF0aChvcHRpb25zLnBhdGgpO1xyXG4gICAgICBjb25zdCBkb3dubG9hZFByb21pc2UgPSB0aGlzLmRvd25sb2FkU3BsYXRTY2VuZVRvU3BsYXRCdWZmZXIoXHJcbiAgICAgICAgb3B0aW9ucy5wYXRoLFxyXG4gICAgICAgIG9wdGlvbnMuc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICAgICAgb25Mb2FkUHJvZ3Jlc3MuYmluZCh0aGlzLCBpKSxcclxuICAgICAgICBmYWxzZSxcclxuICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgIG9wdGlvbnMuaGVhZGVycyxcclxuICAgICAgICBzaWduYWxcclxuICAgICAgKTtcclxuICAgICAgZG93bmxvYWRQcm9taXNlcy5wdXNoKGRvd25sb2FkUHJvbWlzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZG93bmxvYWRBbmRCdWlsZFByb21pc2UgPSBQcm9taXNlLmFsbChkb3dubG9hZFByb21pc2VzKVxyXG4gICAgICAudGhlbigoc3BsYXRCdWZmZXJzKSA9PiB7XHJcbiAgICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlVGFzayhsb2FkaW5nVUlUYXNrSWQpO1xyXG4gICAgICAgIGlmIChvblByb2dyZXNzKSBvblByb2dyZXNzKDAsICcwJScsIExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRTcGxhdEJ1ZmZlcnMoXHJcbiAgICAgICAgICBzcGxhdEJ1ZmZlcnMsXHJcbiAgICAgICAgICBzY2VuZU9wdGlvbnMsXHJcbiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgc2hvd0xvYWRpbmdVSSxcclxuICAgICAgICAgIHNob3dMb2FkaW5nVUksXHJcbiAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGlmIChvblByb2dyZXNzKSBvblByb2dyZXNzKDEwMCwgJzEwMCUnLCBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgICB0aGlzLmNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZVRhc2sobG9hZGluZ1VJVGFza0lkKTtcclxuICAgICAgICB0aGlzLmNsZWFyU3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPVxyXG4gICAgICAgICAgZS5uYW1lID09PSAnQWJvcnRFcnJvcidcclxuICAgICAgICAgICAgPyBlXHJcbiAgICAgICAgICAgIDogbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYFZpZXdlcjo6YWRkU3BsYXRTY2VuZXMgLT4gQ291bGQgbm90IGxvYWQgb25lIG9yIG1vcmUgc3BsYXQgc2NlbmVzLmBcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVyKGFib3J0Q29udHJvbGxlcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2V0U3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlKGRvd25sb2FkQW5kQnVpbGRQcm9taXNlKTtcclxuICAgIHJldHVybiBkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRG93bmxvYWQgYSBzcGxhdCBzY2VuZSBhbmQgY29udmVydCB0byBTcGxhdEJ1ZmZlciBpbnN0YW5jZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIHNwbGF0IHNjZW5lIHRvIGJlIGxvYWRlZFxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSksIGRlZmF1bHRzIHRvIDFcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uUHJvZ3Jlc3MgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFzIGZpbGUgZGF0YSBhcmUgcmVjZWl2ZWRcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHByb2dyZXNzaXZlQnVpbGQgQ29uc3RydWN0IGZpbGUgc2VjdGlvbnMgaW50byBzcGxhdCBidWZmZXJzIGFzIHRoZXkgYXJlIGRvd25sb2FkZWRcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblNlY3Rpb25CdWlsdCBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBuZXcgc2VjdGlvbiBpcyBhZGRlZCB0byB0aGUgZmlsZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXQgRmlsZSBmb3JtYXQgb2YgdGhlIHNjZW5lXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGhlYWRlcnMgT3B0aW9uYWwgSFRUUCBoZWFkZXJzIHRvIHBhc3MgdG8gdXNlIGZvciBkb3dubG9hZGluZyBzcGxhdCBzY2VuZVxyXG4gICAqIEBwYXJhbSB7QWJvcnRTaWduYWx9IHNpZ25hbCBPcHRpb25hbCBBYm9ydFNpZ25hbCB0byBjYW5jZWwgdGhlIGRvd25sb2FkXHJcbiAgICogQHJldHVybiB7QWJvcnRhYmxlUHJvbWlzZX1cclxuICAgKi9cclxuICBkb3dubG9hZFNwbGF0U2NlbmVUb1NwbGF0QnVmZmVyKFxyXG4gICAgcGF0aCxcclxuICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkID0gMSxcclxuICAgIG9uUHJvZ3Jlc3MgPSB1bmRlZmluZWQsXHJcbiAgICBwcm9ncmVzc2l2ZUJ1aWxkID0gZmFsc2UsXHJcbiAgICBvblNlY3Rpb25CdWlsdCA9IHVuZGVmaW5lZCxcclxuICAgIGZvcm1hdCxcclxuICAgIGhlYWRlcnNcclxuICApIHtcclxuICAgIGNvbnN0IG9wdGltaXplU3BsYXREYXRhID0gcHJvZ3Jlc3NpdmVCdWlsZCA/IGZhbHNlIDogdGhpcy5vcHRpbWl6ZVNwbGF0RGF0YTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChmb3JtYXQgPT09IFNjZW5lRm9ybWF0LlBseSkge1xyXG4gICAgICAgIHJldHVybiBQbHlMb2FkZXIubG9hZEZyb21VUkwoXHJcbiAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgb25Qcm9ncmVzcyxcclxuICAgICAgICAgIHByb2dyZXNzaXZlQnVpbGQsXHJcbiAgICAgICAgICBvblNlY3Rpb25CdWlsdCxcclxuICAgICAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgICAgICAgdGhpcy5pbk1lbW9yeUNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICBvcHRpbWl6ZVNwbGF0RGF0YSxcclxuICAgICAgICAgIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLFxyXG4gICAgICAgICAgaGVhZGVyc1xyXG4gICAgICAgIClcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIERpcmVjdExvYWRFcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICdGaWxlIHR5cGUgb3Igc2VydmVyIGRvZXMgbm90IHN1cHBvcnQgcHJvZ3Jlc3NpdmUgbG9hZGluZy4nXHJcbiAgICAgICAgKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IGVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgYFZpZXdlcjo6ZG93bmxvYWRTcGxhdFNjZW5lVG9TcGxhdEJ1ZmZlciAtPiBGaWxlIGZvcm1hdCBub3Qgc3VwcG9ydGVkOiAke3BhdGh9YFxyXG4gICAgKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGlzUHJvZ3Jlc3NpdmVseUxvYWRhYmxlKGZvcm1hdCkge1xyXG4gICAgcmV0dXJuIGZvcm1hdCA9PT0gU2NlbmVGb3JtYXQuUGx5XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgb25lIG9yIG1vcmUgaW5zdGFuY2VzIG9mIFNwbGF0QnVmZmVyIHRvIHRoZSBTcGxhdE1lc2ggaW5zdGFuY2UgbWFuYWdlZCBieSB0aGUgdmlld2VyIGFuZCBzZXQgdXAgdGhlIHNvcnRpbmcgd2ViIHdvcmtlci5cclxuICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGVybWluYXRlIHRoZSBleGlzdGluZyBzb3J0IHdvcmtlciAoaWYgdGhlcmUgaXMgb25lKS5cclxuICAgKi9cclxuICBhZGRTcGxhdEJ1ZmZlcnMgPSAoXHJcbiAgICBzcGxhdEJ1ZmZlcnMsXHJcbiAgICBzcGxhdEJ1ZmZlck9wdGlvbnMgPSBbXSxcclxuICAgIGZpbmFsQnVpbGQgPSB0cnVlLFxyXG4gICAgc2hvd0xvYWRpbmdVSSA9IHRydWUsXHJcbiAgICBzaG93TG9hZGluZ1VJRm9yU3BsYXRUcmVlQnVpbGQgPSB0cnVlLFxyXG4gICAgcmVwbGFjZUV4aXN0aW5nID0gZmFsc2UsXHJcbiAgICBlbmFibGVSZW5kZXJCZWZvcmVGaXJzdFNvcnQgPSBmYWxzZSxcclxuICAgIHByZXNlcnZlVmlzaWJsZVJlZ2lvbiA9IHRydWVcclxuICApID0+IHtcclxuICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcclxuXHJcbiAgICBsZXQgc3BsYXRQcm9jZXNzaW5nVGFza0lkID0gbnVsbDtcclxuICAgIGNvbnN0IHJlbW92ZVNwbGF0UHJvY2Vzc2luZ1Rhc2sgPSAoKSA9PiB7XHJcbiAgICAgIGlmIChzcGxhdFByb2Nlc3NpbmdUYXNrSWQgIT09IG51bGwpIHtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZVRhc2soc3BsYXRQcm9jZXNzaW5nVGFza0lkKTtcclxuICAgICAgICBzcGxhdFByb2Nlc3NpbmdUYXNrSWQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgICAgc3BsYXRQcm9jZXNzaW5nVGFza0lkID0gdGhpcy5sb2FkaW5nU3Bpbm5lci5hZGRUYXNrKFxyXG4gICAgICAgICAgJ1Byb2Nlc3Npbmcgc3BsYXRzLi4uJ1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgZGVsYXllZEV4ZWN1dGUoKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSB7XHJcbiAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IGJ1aWxkUmVzdWx0cyA9IHRoaXMuYWRkU3BsYXRCdWZmZXJzVG9NZXNoKFxyXG4gICAgICAgICAgICBzcGxhdEJ1ZmZlcnMsXHJcbiAgICAgICAgICAgIHNwbGF0QnVmZmVyT3B0aW9ucyxcclxuICAgICAgICAgICAgZmluYWxCdWlsZCxcclxuICAgICAgICAgICAgc2hvd0xvYWRpbmdVSUZvclNwbGF0VHJlZUJ1aWxkLFxyXG4gICAgICAgICAgICByZXBsYWNlRXhpc3RpbmcsXHJcbiAgICAgICAgICAgIHByZXNlcnZlVmlzaWJsZVJlZ2lvblxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gdGhpcy5zcGxhdE1lc2guZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyLm1heFNwbGF0Q291bnQgIT09IG1heFNwbGF0Q291bnRcclxuICAgICAgICAgIClcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlU29ydFdvcmtlcigpO1xyXG4gICAgICAgICAgLy8gSWYgd2UgYXJlbid0IGNhbGN1bGF0aW5nIHRoZSBzcGxhdCBkaXN0YW5jZXMgZnJvbSB0aGUgY2VudGVyIG9uIHRoZSBHUFUsIHRoZSBzb3J0aW5nIHdvcmtlciBuZWVkc1xyXG4gICAgICAgICAgLy8gc3BsYXQgY2VudGVycyBhbmQgdHJhbnNmb3JtIGluZGV4ZXMgc28gdGhhdCBpdCBjYW4gY2FsY3VsYXRlIHRob3NlIGRpc3RhbmNlIHZhbHVlcy5cclxuICAgICAgICAgIGlmICghdGhpcy5ncHVBY2NlbGVyYXRlZFNvcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVTb3J0TWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgY2VudGVyczogYnVpbGRSZXN1bHRzLmNlbnRlcnMuYnVmZmVyLFxyXG4gICAgICAgICAgICAgIHNjZW5lSW5kZXhlczogYnVpbGRSZXN1bHRzLnNjZW5lSW5kZXhlcy5idWZmZXIsXHJcbiAgICAgICAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgICAgICAgIGZyb206IGJ1aWxkUmVzdWx0cy5mcm9tLFxyXG4gICAgICAgICAgICAgICAgdG86IGJ1aWxkUmVzdWx0cy50byxcclxuICAgICAgICAgICAgICAgIGNvdW50OiBidWlsZFJlc3VsdHMuY291bnRcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3Qgc29ydFdvcmtlclNldHVwUHJvbWlzZSA9XHJcbiAgICAgICAgICAgICF0aGlzLnNvcnRXb3JrZXIgJiYgbWF4U3BsYXRDb3VudCA+IDBcclxuICAgICAgICAgICAgICA/IHRoaXMuc2V0dXBTb3J0V29ya2VyKHRoaXMuc3BsYXRNZXNoKVxyXG4gICAgICAgICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICBzb3J0V29ya2VyU2V0dXBQcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuXHJcbiAgICAgICAgICAgIHRoaXMucnVuU3BsYXRTb3J0KHRydWUsIHRydWUpLnRoZW4oKHNvcnRSdW5uaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKCF0aGlzLnNvcnRXb3JrZXIgfHwgIXNvcnRSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlU3BsYXRQcm9jZXNzaW5nVGFzaygpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlUmVuZGVyQmVmb3JlRmlyc3RTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJ1bkFmdGVyTmV4dFNvcnQucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bkFmdGVyTmV4dFNvcnQucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJlbW92ZVNwbGF0UHJvY2Vzc2luZ1Rhc2soKTtcclxuICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIG9uZSBvciBtb3JlIGluc3RhbmNlcyBvZiBTcGxhdEJ1ZmZlciB0byB0aGUgU3BsYXRNZXNoIGluc3RhbmNlIG1hbmFnZWQgYnkgdGhlIHZpZXdlci4gQnkgZGVmYXVsdCwgdGhpcyBmdW5jdGlvbiBpcyBhZGRpdGl2ZTtcclxuICAgKiBhbGwgc3BsYXQgYnVmZmVycyBjb250YWluZWQgYnkgdGhlIHZpZXdlcidzIHNwbGF0IG1lc2ggYmVmb3JlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIHByZXNlcnZlZC4gVGhpcyBiZWhhdmlvciBjYW4gYmVcclxuICAgKiBjaGFuZ2VkIGJ5IHBhc3NpbmcgJ3RydWUnIGZvciAncmVwbGFjZUV4aXN0aW5nJy5cclxuICAgKiBAcGFyYW0ge0FycmF5PFNwbGF0QnVmZmVyPn0gc3BsYXRCdWZmZXJzIFNwbGF0QnVmZmVyIGluc3RhbmNlc1xyXG4gICAqIEBwYXJhbSB7QXJyYXk8b2JqZWN0Pn0gc3BsYXRCdWZmZXJPcHRpb25zIEFycmF5IG9mIG9wdGlvbnMgb2JqZWN0czoge1xyXG4gICAqXHJcbiAgICogICAgICAgICBzcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZDogSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICh2YWxpZCByYW5nZTogMCAtIDI1NSksIGRlZmF1bHRzIHRvIDFcclxuICAgKlxyXG4gICAqICAgICAgICAgcG9zaXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFBvc2l0aW9uIG9mIHRoZSBzY2VuZSwgYWN0cyBhcyBhbiBvZmZzZXQgZnJvbSBpdHMgZGVmYXVsdCBwb3NpdGlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDBdXHJcbiAgICpcclxuICAgKiAgICAgICAgIHJvdGF0aW9uIChBcnJheTxudW1iZXI+KTogICBSb3RhdGlvbiBvZiB0aGUgc2NlbmUgcmVwcmVzZW50ZWQgYXMgYSBxdWF0ZXJuaW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMCwgMV1cclxuICAgKlxyXG4gICAqICAgICAgICAgc2NhbGUgKEFycmF5PG51bWJlcj4pOiAgICAgIFNjZW5lJ3Mgc2NhbGUsIGRlZmF1bHRzIHRvIFsxLCAxLCAxXVxyXG4gICAqIH1cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpbmFsQnVpbGQgV2lsbCB0aGUgc3BsYXQgbWVzaCBiZSBpbiBpdHMgZmluYWwgc3RhdGUgYWZ0ZXIgdGhpcyBidWlsZD9cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dMb2FkaW5nVUlGb3JTcGxhdFRyZWVCdWlsZCBXaGV0aGVyIG9yIG5vdCB0byBzaG93IHRoZSBsb2FkaW5nIHNwaW5uZXIgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiB0aGUgc3BsYXQgdHJlZS5cclxuICAgKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCBjb250YWluaW5nIGluZm8gYWJvdXQgdGhlIHNwbGF0cyB0aGF0IGFyZSB1cGRhdGVkXHJcbiAgICovXHJcbiAgYWRkU3BsYXRCdWZmZXJzVG9NZXNoID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBzcGxhdE9wdGltaXppbmdUYXNrSWQ7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChcclxuICAgICAgc3BsYXRCdWZmZXJzLFxyXG4gICAgICBzcGxhdEJ1ZmZlck9wdGlvbnMsXHJcbiAgICAgIGZpbmFsQnVpbGQgPSB0cnVlLFxyXG4gICAgICBzaG93TG9hZGluZ1VJRm9yU3BsYXRUcmVlQnVpbGQgPSBmYWxzZSxcclxuICAgICAgcmVwbGFjZUV4aXN0aW5nID0gZmFsc2UsXHJcbiAgICAgIHByZXNlcnZlVmlzaWJsZVJlZ2lvbiA9IHRydWVcclxuICAgICkge1xyXG4gICAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuXHJcbiAgICAgIGxldCBhbGxTcGxhdEJ1ZmZlcnMgPSBbXTtcclxuICAgICAgbGV0IGFsbFNwbGF0QnVmZmVyT3B0aW9ucyA9IFtdO1xyXG4gICAgICBpZiAoIXJlcGxhY2VFeGlzdGluZykge1xyXG4gICAgICAgIGFsbFNwbGF0QnVmZmVycyA9XHJcbiAgICAgICAgICB0aGlzLnNwbGF0TWVzaC5zY2VuZXMubWFwKChzY2VuZSkgPT4gc2NlbmUuc3BsYXRCdWZmZXIpIHx8IFtdO1xyXG4gICAgICAgIGFsbFNwbGF0QnVmZmVyT3B0aW9ucyA9IHRoaXMuc3BsYXRNZXNoLnNjZW5lT3B0aW9uc1xyXG4gICAgICAgICAgPyB0aGlzLnNwbGF0TWVzaC5zY2VuZU9wdGlvbnMubWFwKChzY2VuZU9wdGlvbnMpID0+IHNjZW5lT3B0aW9ucylcclxuICAgICAgICAgIDogW107XHJcbiAgICAgIH1cclxuICAgICAgYWxsU3BsYXRCdWZmZXJzLnB1c2goLi4uc3BsYXRCdWZmZXJzKTtcclxuICAgICAgYWxsU3BsYXRCdWZmZXJPcHRpb25zLnB1c2goLi4uc3BsYXRCdWZmZXJPcHRpb25zKTtcclxuICAgICAgaWYgKHRoaXMucmVuZGVyZXIpIHRoaXMuc3BsYXRNZXNoLnNldFJlbmRlcmVyKHRoaXMucmVuZGVyZXIpO1xyXG4gICAgICBjb25zdCBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQgPSAoZmluaXNoZWQpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuXHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBzaG93TG9hZGluZ1VJRm9yU3BsYXRUcmVlQnVpbGQgJiZcclxuICAgICAgICAgIHNwbGF0Q291bnQgPj0gTUlOX1NQTEFUX0NPVU5UX1RPX1NIT1dfU1BMQVRfVFJFRV9MT0FESU5HX1NQSU5ORVJcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmICghZmluaXNoZWQgJiYgIXNwbGF0T3B0aW1pemluZ1Rhc2tJZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldE1pbmltaXplZCh0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgc3BsYXRPcHRpbWl6aW5nVGFza0lkID0gdGhpcy5sb2FkaW5nU3Bpbm5lci5hZGRUYXNrKFxyXG4gICAgICAgICAgICAgICdPcHRpbWl6aW5nIGRhdGEgc3RydWN0dXJlcy4uLidcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IG9uU3BsYXRUcmVlUmVhZHkgPSAoZmluaXNoZWQpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuXHJcbiAgICAgICAgaWYgKGZpbmlzaGVkICYmIHNwbGF0T3B0aW1pemluZ1Rhc2tJZCkge1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVUYXNrKHNwbGF0T3B0aW1pemluZ1Rhc2tJZCk7XHJcbiAgICAgICAgICBzcGxhdE9wdGltaXppbmdUYXNrSWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgY29uc3QgYnVpbGRSZXN1bHRzID0gdGhpcy5zcGxhdE1lc2guYnVpbGQoXHJcbiAgICAgICAgYWxsU3BsYXRCdWZmZXJzLFxyXG4gICAgICAgIGFsbFNwbGF0QnVmZmVyT3B0aW9ucyxcclxuICAgICAgICB0cnVlLFxyXG4gICAgICAgIGZpbmFsQnVpbGQsXHJcbiAgICAgICAgb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkLFxyXG4gICAgICAgIG9uU3BsYXRUcmVlUmVhZHksXHJcbiAgICAgICAgcHJlc2VydmVWaXNpYmxlUmVnaW9uXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChmaW5hbEJ1aWxkICYmIHRoaXMuZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSlcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhKCk7XHJcbiAgICAgIHJldHVybiBidWlsZFJlc3VsdHNcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldCB1cCB0aGUgc3BsYXQgc29ydGluZyB3ZWIgd29ya2VyLlxyXG4gICAqIEBwYXJhbSB7U3BsYXRNZXNofSBzcGxhdE1lc2ggU3BsYXRNZXNoIGluc3RhbmNlIHRoYXQgY29udGFpbnMgdGhlIHNwbGF0cyB0byBiZSBzb3J0ZWRcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqL1xyXG4gIGFzeW5jIHNldHVwU29ydFdvcmtlcihzcGxhdE1lc2gpIHtcclxuICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm5cclxuICAgIGNvbnN0IERpc3RhbmNlc0FycmF5VHlwZSA9IHRoaXMuaW50ZWdlckJhc2VkU29ydFxyXG4gICAgICA/IEludDMyQXJyYXlcclxuICAgICAgOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBjb25zdCBzcGxhdENvdW50ID0gc3BsYXRNZXNoLmdldFNwbGF0Q291bnQoKTtcclxuICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSBzcGxhdE1lc2guZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgdGhpcy5zb3J0V29ya2VyID0gYXdhaXQgY3JlYXRlU29ydFdvcmtlcihcclxuICAgICAgbWF4U3BsYXRDb3VudCxcclxuICAgICAgdGhpcy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzLFxyXG4gICAgICB0aGlzLmVuYWJsZVNJTURJblNvcnQsXHJcbiAgICAgIHRoaXMuaW50ZWdlckJhc2VkU29ydCxcclxuICAgICAgdGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUsXHJcbiAgICAgIHRoaXMuc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb25cclxuICAgICk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgdGhpcy5zb3J0V29ya2VyLm9ubWVzc2FnZSA9IChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUuZGF0YS5zb3J0RG9uZSkge1xyXG4gICAgICAgICAgdGhpcy5zb3J0UnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgbGV0IG51bWJlcnNBcnJheSA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICAgIHsgbGVuZ3RoOiB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudCB9LFxyXG4gICAgICAgICAgICAoXywgaSkgPT4gaVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGlmICh0aGlzLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlUmVuZGVySW5kZXhlcyhcclxuICAgICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJTb3J0ZWRJbmRleGVzLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5zcGxhdFJlbmRlckNvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRJbmRleGVzID0gbmV3IFVpbnQzMkFycmF5KFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5zb3J0ZWRJbmRleGVzLmJ1ZmZlcixcclxuICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5zcGxhdFJlbmRlckNvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVJlbmRlckluZGV4ZXMoXHJcbiAgICAgICAgICAgICAgc29ydGVkSW5kZXhlcyxcclxuICAgICAgICAgICAgICBlLmRhdGEuc3BsYXRSZW5kZXJDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMubGFzdFNwbGF0U29ydENvdW50ID0gdGhpcy5zcGxhdFNvcnRDb3VudDtcclxuXHJcbiAgICAgICAgICB0aGlzLmxhc3RTb3J0VGltZSA9IGUuZGF0YS5zb3J0VGltZTtcclxuICAgICAgICAgIHRoaXMuc29ydFByb21pc2VSZXNvbHZlcigpO1xyXG4gICAgICAgICAgdGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgICAgIGlmICh0aGlzLnJ1bkFmdGVyTmV4dFNvcnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJ1bkFmdGVyTmV4dFNvcnQuZm9yRWFjaCgoZnVuYykgPT4ge1xyXG4gICAgICAgICAgICAgIGZ1bmMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucnVuQWZ0ZXJOZXh0U29ydC5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhLnNvcnRDYW5jZWxlZCkge1xyXG4gICAgICAgICAgdGhpcy5zb3J0UnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhLnNvcnRTZXR1cFBoYXNlMUNvbXBsZXRlKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA+PSBMb2dMZXZlbC5JbmZvKVxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnU29ydGluZyB3ZWIgd29ya2VyIFdBU00gc2V0dXAgY29tcGxldGUuJyk7XHJcbiAgICAgICAgICBpZiAodGhpcy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlclNvcnRlZEluZGV4ZXMgPSBuZXcgVWludDMyQXJyYXkoXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnNvcnRlZEluZGV4ZXNCdWZmZXIsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnNvcnRlZEluZGV4ZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0ID0gbmV3IFVpbnQzMkFycmF5KFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5pbmRleGVzVG9Tb3J0QnVmZmVyLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5pbmRleGVzVG9Tb3J0T2Zmc2V0LFxyXG4gICAgICAgICAgICAgIG1heFNwbGF0Q291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyUHJlY29tcHV0ZWREaXN0YW5jZXMgPSBuZXcgRGlzdGFuY2VzQXJyYXlUeXBlKFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5wcmVjb21wdXRlZERpc3RhbmNlc0J1ZmZlcixcclxuICAgICAgICAgICAgICBlLmRhdGEucHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJUcmFuc2Zvcm1zID0gbmV3IEZsb2F0MzJBcnJheShcclxuICAgICAgICAgICAgICBlLmRhdGEudHJhbnNmb3Jtc0J1ZmZlcixcclxuICAgICAgICAgICAgICBlLmRhdGEudHJhbnNmb3Jtc09mZnNldCxcclxuICAgICAgICAgICAgICBDb25zdGFudHMuTWF4U2NlbmVzICogMTZcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQgPSBuZXcgVWludDMyQXJyYXkobWF4U3BsYXRDb3VudCk7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlclByZWNvbXB1dGVkRGlzdGFuY2VzID0gbmV3IERpc3RhbmNlc0FycmF5VHlwZShcclxuICAgICAgICAgICAgICBtYXhTcGxhdENvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlclRyYW5zZm9ybXMgPSBuZXcgRmxvYXQzMkFycmF5KFxyXG4gICAgICAgICAgICAgIENvbnN0YW50cy5NYXhTY2VuZXMgKiAxNlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdENvdW50OyBpKyspXHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnRbaV0gPSBpO1xyXG4gICAgICAgICAgdGhpcy5zb3J0V29ya2VyLm1heFNwbGF0Q291bnQgPSBtYXhTcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID49IExvZ0xldmVsLkluZm8pIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1NvcnRpbmcgd2ViIHdvcmtlciByZWFkeS4nKTtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXREYXRhVGV4dHVyZXMgPSB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdERhdGFUZXh0dXJlcygpO1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc1RleHR1cmVTaXplID0gc3BsYXREYXRhVGV4dHVyZXMuY292YXJpYW5jZXMuc2l6ZTtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyc0NvbG9yc1RleHR1cmVTaXplID0gc3BsYXREYXRhVGV4dHVyZXMuY2VudGVyQ29sb3JzLnNpemU7XHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxyXG4gICAgICAgICAgICAgICdDb3ZhcmlhbmNlcyB0ZXh0dXJlIHNpemU6ICcgK1xyXG4gICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZS54ICtcclxuICAgICAgICAgICAgICAgICcgeCAnICtcclxuICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUueVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbyhcclxuICAgICAgICAgICAgICAnQ2VudGVycy9jb2xvcnMgdGV4dHVyZSBzaXplOiAnICtcclxuICAgICAgICAgICAgICAgIGNlbnRlcnNDb2xvcnNUZXh0dXJlU2l6ZS54ICtcclxuICAgICAgICAgICAgICAgICcgeCAnICtcclxuICAgICAgICAgICAgICAgIGNlbnRlcnNDb2xvcnNUZXh0dXJlU2l6ZS55XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBkaXNwb3NlU29ydFdvcmtlcigpIHtcclxuICAgIGlmICh0aGlzLnNvcnRXb3JrZXIpIHRoaXMuc29ydFdvcmtlci50ZXJtaW5hdGUoKTtcclxuICAgIHRoaXMuc29ydFdvcmtlciA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRQcm9taXNlID0gbnVsbDtcclxuICAgIGlmICh0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIpIHtcclxuICAgICAgdGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyKCk7XHJcbiAgICAgIHRoaXMuc29ydFByb21pc2VSZXNvbHZlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICB0aGlzLnByZVNvcnRNZXNzYWdlcyA9IFtdO1xyXG4gICAgdGhpcy5zb3J0UnVubmluZyA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU3BsYXRTY2VuZShpbmRleFRvUmVtb3ZlLCBzaG93TG9hZGluZ1VJID0gdHJ1ZSkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlU3BsYXRTY2VuZXMoW2luZGV4VG9SZW1vdmVdLCBzaG93TG9hZGluZ1VJKVxyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU3BsYXRTY2VuZXMoaW5kZXhlc1RvUmVtb3ZlLCBzaG93TG9hZGluZ1VJID0gdHJ1ZSkge1xyXG4gICAgaWYgKHRoaXMuaXNMb2FkaW5nT3JVbmxvYWRpbmcoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgJ0Nhbm5vdCByZW1vdmUgc3BsYXQgc2NlbmUgd2hpbGUgYW5vdGhlciBsb2FkIG9yIHVubG9hZCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLidcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHJlbW92ZSBzcGxhdCBzY2VuZSBhZnRlciBkaXNwb3NlKCkgaXMgY2FsbGVkLicpXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNvcnRQcm9taXNlO1xyXG5cclxuICAgIHRoaXMuc3BsYXRTY2VuZVJlbW92YWxQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBsZXQgcmV2bW92YWxUYXNrSWQ7XHJcblxyXG4gICAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlQWxsVGFza3MoKTtcclxuICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNob3coKTtcclxuICAgICAgICByZXZtb3ZhbFRhc2tJZCA9IHRoaXMubG9hZGluZ1NwaW5uZXIuYWRkVGFzaygnUmVtb3Zpbmcgc3BsYXQgc2NlbmUuLi4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY2hlY2tBbmRIaWRlTG9hZGluZ1VJID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLmhpZGUoKTtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlVGFzayhyZXZtb3ZhbFRhc2tJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgb25Eb25lID0gKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY2hlY2tBbmRIaWRlTG9hZGluZ1VJKCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdFNjZW5lUmVtb3ZhbFByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIGlmICghZXJyb3IpIHJlc29sdmUoKTtcclxuICAgICAgICBlbHNlIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBjaGVja0ZvckVhcmx5RXhpdCA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkge1xyXG4gICAgICAgICAgb25Eb25lKCk7XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHNvcnRQcm9taXNlID0gdGhpcy5zb3J0UHJvbWlzZSB8fCBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgc29ydFByb21pc2UudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKGNoZWNrRm9yRWFybHlFeGl0KCkpIHJldHVyblxyXG4gICAgICAgIGNvbnN0IHNhdmVkU3BsYXRCdWZmZXJzID0gW107XHJcbiAgICAgICAgY29uc3Qgc2F2ZWRTY2VuZU9wdGlvbnMgPSBbXTtcclxuICAgICAgICBjb25zdCBzYXZlZFNjZW5lVHJhbnNmb3JtQ29tcG9uZW50cyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zcGxhdE1lc2guc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgc2hvdWxkUmVtb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgICBmb3IgKGxldCBpbmRleFRvUmVtb3ZlIG9mIGluZGV4ZXNUb1JlbW92ZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXhUb1JlbW92ZSA9PT0gaSkge1xyXG4gICAgICAgICAgICAgIHNob3VsZFJlbW92ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFzaG91bGRSZW1vdmUpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLnNwbGF0TWVzaC5zY2VuZXNbaV07XHJcbiAgICAgICAgICAgIHNhdmVkU3BsYXRCdWZmZXJzLnB1c2goc2NlbmUuc3BsYXRCdWZmZXIpO1xyXG4gICAgICAgICAgICBzYXZlZFNjZW5lT3B0aW9ucy5wdXNoKHRoaXMuc3BsYXRNZXNoLnNjZW5lT3B0aW9uc1tpXSk7XHJcbiAgICAgICAgICAgIHNhdmVkU2NlbmVUcmFuc2Zvcm1Db21wb25lbnRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBzY2VuZS5wb3NpdGlvbi5jbG9uZSgpLFxyXG4gICAgICAgICAgICAgIHF1YXRlcm5pb246IHNjZW5lLnF1YXRlcm5pb24uY2xvbmUoKSxcclxuICAgICAgICAgICAgICBzY2FsZTogc2NlbmUuc2NhbGUuY2xvbmUoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlU29ydFdvcmtlcigpO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnNjZW5lUmV2ZWFsTW9kZSA9IFNjZW5lUmV2ZWFsTW9kZS5JbnN0YW50O1xyXG4gICAgICAgIHRoaXMuY3JlYXRlU3BsYXRNZXNoKCk7XHJcbiAgICAgICAgdGhpcy5hZGRTcGxhdEJ1ZmZlcnMoXHJcbiAgICAgICAgICBzYXZlZFNwbGF0QnVmZmVycyxcclxuICAgICAgICAgIHNhdmVkU2NlbmVPcHRpb25zLFxyXG4gICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgdHJ1ZVxyXG4gICAgICAgIClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGNoZWNrRm9yRWFybHlFeGl0KCkpIHJldHVyblxyXG4gICAgICAgICAgICBjaGVja0FuZEhpZGVMb2FkaW5nVUkoKTtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdE1lc2guc2NlbmVzLmZvckVhY2goKHNjZW5lLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIHNjZW5lLnBvc2l0aW9uLmNvcHkoc2F2ZWRTY2VuZVRyYW5zZm9ybUNvbXBvbmVudHNbaW5kZXhdLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICBzY2VuZS5xdWF0ZXJuaW9uLmNvcHkoXHJcbiAgICAgICAgICAgICAgICBzYXZlZFNjZW5lVHJhbnNmb3JtQ29tcG9uZW50c1tpbmRleF0ucXVhdGVybmlvblxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgc2NlbmUuc2NhbGUuY29weShzYXZlZFNjZW5lVHJhbnNmb3JtQ29tcG9uZW50c1tpbmRleF0uc2NhbGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlVHJhbnNmb3JtcygpO1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucnVuU3BsYXRTb3J0KHRydWUpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChjaGVja0ZvckVhcmx5RXhpdCgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHNvcnRQcm9taXNlID0gdGhpcy5zb3J0UHJvbWlzZSB8fCBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICBzb3J0UHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBvbkRvbmUoKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICAgIG9uRG9uZShlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzLnNwbGF0U2NlbmVSZW1vdmFsUHJvbWlzZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhcnQgc2VsZi1kcml2ZW4gbW9kZVxyXG4gICAqL1xyXG4gIHN0YXJ0KCkge1xyXG4gICAgaWYgKHRoaXMuc2VsZkRyaXZlbk1vZGUpIHtcclxuICAgICAgdGhpcy5yZXF1ZXN0RnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnNlbGZEcml2ZW5VcGRhdGVGdW5jKTtcclxuICAgICAgdGhpcy5zZWxmRHJpdmVuTW9kZVJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc3RhcnQgdmlld2VyIHVubGVzcyBpdCBpcyBpbiBzZWxmIGRyaXZlbiBtb2RlLicpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdG9wIHNlbGYtZHJpdmVuIG1vZGVcclxuICAgKi9cclxuICBzdG9wKCkge1xyXG4gICAgaWYgKHRoaXMuc2VsZkRyaXZlbk1vZGUgJiYgdGhpcy5zZWxmRHJpdmVuTW9kZVJ1bm5pbmcpIHtcclxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yZXF1ZXN0RnJhbWVJZCk7XHJcbiAgICAgIHRoaXMuc2VsZkRyaXZlbk1vZGVSdW5uaW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaXNwb3NlIG9mIGFsbCByZXNvdXJjZXMgaGVsZCBkaXJlY3RseSBhbmQgaW5kaXJlY3RseSBieSB0aGlzIHZpZXdlci5cclxuICAgKi9cclxuICBhc3luYyBkaXNwb3NlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVybiB0aGlzLmRpc3Bvc2VQcm9taXNlXHJcblxyXG4gICAgZm9yIChsZXQgY29udHJvbGxlciBvZiB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXJzKSB7XHJcbiAgICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB3YWl0UHJvbWlzZXMgPSBbXTtcclxuICAgIGlmICh0aGlzLnNvcnRQcm9taXNlKSB7XHJcbiAgICAgIHdhaXRQcm9taXNlcy5wdXNoKHRoaXMuc29ydFByb21pc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZGlzcG9zaW5nID0gdHJ1ZTtcclxuICAgIHRoaXMuZGlzcG9zZVByb21pc2UgPSBQcm9taXNlLmFsbCh3YWl0UHJvbWlzZXMpLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgaWYgKHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMpIHtcclxuICAgICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHMgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY29udHJvbHMgPSBudWxsO1xyXG4gICAgICBpZiAodGhpcy5zcGxhdE1lc2gpIHtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLmF2YXRhck1lc2gpIHtcclxuICAgICAgICBkaXNwb3NlQWxsTWVzaGVzKHRoaXMuYXZhdGFyTWVzaCk7XHJcbiAgICAgICAgdGhpcy5hdmF0YXJNZXNoID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5zY2VuZUhlbHBlcikge1xyXG4gICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVIZWxwZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci51bm9ic2VydmUodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5kaXNwb3NlU29ydFdvcmtlcigpO1xyXG4gICAgICB0aGlzLnJlbW92ZUV2ZW50SGFuZGxlcnMoKTtcclxuXHJcbiAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlQWxsVGFza3MoKTtcclxuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRDb250YWluZXIobnVsbCk7XHJcbiAgICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLmhpZGUoKTtcclxuICAgICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuc2V0Q29udGFpbmVyKG51bGwpO1xyXG4gICAgICAvLyB0aGlzLmluZm9QYW5lbC5zZXRDb250YWluZXIobnVsbClcclxuXHJcbiAgICAgIHRoaXMuY2FtZXJhID0gbnVsbDtcclxuICAgICAgdGhpcy50aHJlZVNjZW5lID0gbnVsbDtcclxuICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgaWYgKHRoaXMucmVuZGVyZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbFJlbmRlcmVyKSB7XHJcbiAgICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsUmVuZGVyZXIpIHtcclxuICAgICAgICAvLyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMucm9vdEVsZW1lbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnNvcnRXb3JrZXJTb3J0ZWRJbmRleGVzID0gbnVsbDtcclxuICAgICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydCA9IG51bGw7XHJcbiAgICAgIHRoaXMuc29ydFdvcmtlclByZWNvbXB1dGVkRGlzdGFuY2VzID0gbnVsbDtcclxuICAgICAgdGhpcy5zb3J0V29ya2VyVHJhbnNmb3JtcyA9IG51bGw7XHJcbiAgICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLmRpc3Bvc2luZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmRpc3Bvc2VQcm9taXNlID0gbnVsbDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuZGlzcG9zZVByb21pc2VcclxuICB9XHJcbiAgdnN5bmNOdW0gPSA0XHJcbiAgc2VsZkRyaXZlblVwZGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLnNlbGZEcml2ZW5Nb2RlKSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0RnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnNlbGZEcml2ZW5VcGRhdGVGdW5jKTtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgY3VycmVudFRpbWUgPSBnZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICAgIC8vIGNvbnN0IGNhbGNEZWx0YSA9IGN1cnJlbnRUaW1lIC0gdGhpcy5sYXN0VGltZTtcclxuICAgICAgICAvLyBpZiAoY2FsY0RlbHRhID49IDEuMCAvIDMwLjApIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sYXN0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVyblxyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuICAgIHRoaXMudnN5bmNDb3VudCsrO1xyXG5cclxuICAgIGlmICh0aGlzLnZzeW5jQ291bnQgPCB0aGlzLnZzeW5jTnVtKSB7XHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudnN5bmNDb3VudCA9IDA7XHJcblxyXG4gICAgdGhpcy51cGRhdGUoKTtcclxuICAgIGlmICh0aGlzLnNob3VsZFJlbmRlcigpKSB7XHJcbiAgICAgIC8vYWRkIGV4cHJlc3Npb25cclxuXHJcbiAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMrKztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMgPSAwO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZW5kZXJOZXh0RnJhbWUgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZvcmNlUmVuZGVyTmV4dEZyYW1lKCkge1xyXG4gICAgdGhpcy5yZW5kZXJOZXh0RnJhbWUgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkUmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCByZW5kZXJDb3VudCA9IDA7XHJcbiAgICBjb25zdCBsYXN0Q2FtZXJhUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgY29uc3QgbGFzdENhbWVyYU9yaWVudGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgIGNvbnN0IGNoYW5nZUVwc2lsb24gPSAwLjAwMDE7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF0aGlzLmluaXRpYWxpemVkIHx8XHJcbiAgICAgICAgIXRoaXMuc3BsYXRSZW5kZXJSZWFkeSB8fFxyXG4gICAgICAgIHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKClcclxuICAgICAgKVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgbGV0IHNob3VsZFJlbmRlciA9IGZhbHNlO1xyXG4gICAgICBsZXQgY2FtZXJhQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5jYW1lcmEpIHtcclxuICAgICAgICBjb25zdCBjcCA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uO1xyXG4gICAgICAgIGNvbnN0IGNvID0gdGhpcy5jYW1lcmEucXVhdGVybmlvbjtcclxuICAgICAgICBjYW1lcmFDaGFuZ2VkID1cclxuICAgICAgICAgIE1hdGguYWJzKGNwLnggLSBsYXN0Q2FtZXJhUG9zaXRpb24ueCkgPiBjaGFuZ2VFcHNpbG9uIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhjcC55IC0gbGFzdENhbWVyYVBvc2l0aW9uLnkpID4gY2hhbmdlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMoY3AueiAtIGxhc3RDYW1lcmFQb3NpdGlvbi56KSA+IGNoYW5nZUVwc2lsb24gfHxcclxuICAgICAgICAgIE1hdGguYWJzKGNvLnggLSBsYXN0Q2FtZXJhT3JpZW50YXRpb24ueCkgPiBjaGFuZ2VFcHNpbG9uIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhjby55IC0gbGFzdENhbWVyYU9yaWVudGF0aW9uLnkpID4gY2hhbmdlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMoY28ueiAtIGxhc3RDYW1lcmFPcmllbnRhdGlvbi56KSA+IGNoYW5nZUVwc2lsb24gfHxcclxuICAgICAgICAgIE1hdGguYWJzKGNvLncgLSBsYXN0Q2FtZXJhT3JpZW50YXRpb24udykgPiBjaGFuZ2VFcHNpbG9uO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzaG91bGRSZW5kZXIgPVxyXG4gICAgICAgIHRoaXMucmVuZGVyTW9kZSAhPT0gUmVuZGVyTW9kZS5OZXZlciAmJlxyXG4gICAgICAgIChyZW5kZXJDb3VudCA9PT0gMCB8fFxyXG4gICAgICAgICAgdGhpcy5zcGxhdE1lc2gudmlzaWJsZVJlZ2lvbkNoYW5naW5nIHx8XHJcbiAgICAgICAgICBjYW1lcmFDaGFuZ2VkIHx8XHJcbiAgICAgICAgICB0aGlzLnJlbmRlck1vZGUgPT09IFJlbmRlck1vZGUuQWx3YXlzIHx8XHJcbiAgICAgICAgICB0aGlzLmR5bmFtaWNNb2RlID09PSB0cnVlIHx8XHJcbiAgICAgICAgICB0aGlzLnJlbmRlck5leHRGcmFtZSk7XHJcblxyXG4gICAgICBpZiAodGhpcy5jYW1lcmEpIHtcclxuICAgICAgICBsYXN0Q2FtZXJhUG9zaXRpb24uY29weSh0aGlzLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICAgICAgbGFzdENhbWVyYU9yaWVudGF0aW9uLmNvcHkodGhpcy5jYW1lcmEucXVhdGVybmlvbik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlbmRlckNvdW50Kys7XHJcbiAgICAgIHJldHVybiBzaG91bGRSZW5kZXJcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHJlbmRlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXRoaXMuaW5pdGlhbGl6ZWQgfHxcclxuICAgICAgICAhdGhpcy5zcGxhdFJlbmRlclJlYWR5IHx8XHJcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKVxyXG4gICAgICApXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICBjb25zdCBoYXNSZW5kZXJhYmxlcyA9ICh0aHJlZVNjZW5lKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhyZWVTY2VuZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgaWYgKGNoaWxkLnZpc2libGUpIHJldHVybiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgc2F2ZWRBdW9DbGVhciA9IHRoaXMucmVuZGVyZXIuYXV0b0NsZWFyO1xyXG4gICAgICBpZiAoaGFzUmVuZGVyYWJsZXModGhpcy50aHJlZVNjZW5lKSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMudGhyZWVTY2VuZSwgdGhpcy5jYW1lcmEpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zcGxhdE1lc2gsIHRoaXMuY2FtZXJhKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hdXRvQ2xlYXIgPSBmYWxzZTtcclxuICAgICAgaWYgKHRoaXMuc2NlbmVIZWxwZXIuZ2V0Rm9jdXNNYXJrZXJPcGFjaXR5KCkgPiAwLjApXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZUhlbHBlci5mb2N1c01hcmtlciwgdGhpcy5jYW1lcmEpO1xyXG4gICAgICBpZiAodGhpcy5zaG93Q29udHJvbFBsYW5lKVxyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmVIZWxwZXIuY29udHJvbFBsYW5lLCB0aGlzLmNhbWVyYSk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuYXV0b0NsZWFyID0gc2F2ZWRBdW9DbGVhcjtcclxuICAgIH1cclxuICB9KSgpXHJcblxyXG5cclxuICB1cGRhdGUocmVuZGVyZXIsIGNhbWVyYSkge1xyXG4gICAgLy8gdGhpcy5mcmFtZSsrXHJcbiAgICBjb25zdCBmcHNEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnBzJyk7XHJcbiAgICBpZiAoZnBzRGl2KSB7XHJcbiAgICAgIGZwc0Rpdi50ZXh0Q29udGVudCA9IGBGUFM6ICR7dGhpcy5jdXJyZW50RlBTfWA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGhpcy5mcmFtZSA+PSB0aGlzLnRvdGFsRnJhbWVzKSBcclxuICAgICAgICB0aGlzLmZyYW1lID0gMDtcclxuICAgIFxyXG4gICAgaWYgKHRoaXMuZHJvcEluTW9kZSkgdGhpcy51cGRhdGVGb3JEcm9wSW5Nb2RlKHJlbmRlcmVyLCBjYW1lcmEpO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgIXRoaXMuaW5pdGlhbGl6ZWQgfHxcclxuICAgICAgIXRoaXMuc3BsYXRSZW5kZXJSZWFkeSB8fFxyXG4gICAgICB0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpXHJcbiAgICApXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIGlmICh0aGlzLmNvbnRyb2xzKSB7XHJcbiAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKCk7XHJcbiAgICAgIGlmICh0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSAmJiAhdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgVmlld2VyLnNldENhbWVyYVBvc2l0aW9uRnJvbVpvb20oXHJcbiAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgdGhpcy5jb250cm9sc1xyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucnVuTW9ycGhVcGRhdGUoKTtcclxuICAgIHRoaXMucnVuU3BsYXRTb3J0KHRydWUsdHJ1ZSk7XHJcblxyXG4gICAgY29uc3QgcmVwbGFjZUluZGV4ZXMgPSBmYWxzZTtcclxuICAgIGlmIChyZXBsYWNlSW5kZXhlcykge1xyXG4gICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVSZW5kZXJJbmRleGVzKFxyXG4gICAgICAgIHRoaXMuc29ydGVkSW5kZXhlcyxcclxuICAgICAgICB0aGlzLnNvcnRlZEluZGV4ZXMubGVuZ3RoXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVGb3JSZW5kZXJlclNpemVDaGFuZ2VzKCk7XHJcbiAgICB0aGlzLnVwZGF0ZVNwbGF0TWVzaCgpO1xyXG4gICAgdGhpcy51cGRhdGVNZXNoQ3Vyc29yKCk7XHJcbiAgICB0aGlzLnVwZGF0ZUZQUygpO1xyXG4gICAgdGhpcy50aW1pbmdTZW5zaXRpdmVVcGRhdGVzKCk7XHJcbiAgICAvLyB0aGlzLnVwZGF0ZUluZm9QYW5lbCgpXHJcbiAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQbGFuZSgpO1xyXG4gIH1cclxuXHJcbiAgc29ydGVkSW5kZXhlc1xyXG4gIHVwZGF0ZUZvckRyb3BJbk1vZGUocmVuZGVyZXIsIGNhbWVyYSkge1xyXG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgaWYgKHRoaXMuc3BsYXRNZXNoKSB0aGlzLnNwbGF0TWVzaC5zZXRSZW5kZXJlcih0aGlzLnJlbmRlcmVyKTtcclxuICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgaWYgKHRoaXMuY29udHJvbHMpIHRoaXMuY29udHJvbHMub2JqZWN0ID0gY2FtZXJhO1xyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBsYXN0Q2FsY1RpbWUgPSBnZXRDdXJyZW50VGltZSgpXHJcbiAgZnBzRnJhbWVDb3VudCA9IDBcclxuICB1cGRhdGVGUFMgPSAoKSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMgPlxyXG4gICAgICBDT05TRUNVVElWRV9SRU5ERVJFRF9GUkFNRVNfRk9SX0ZQU19DQUxDVUxBVElPTlxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgY29uc3QgY2FsY0RlbHRhID0gY3VycmVudFRpbWUgLSB0aGlzLmxhc3RDYWxjVGltZTtcclxuICAgICAgaWYgKGNhbGNEZWx0YSA+PSAxLjApIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRGUFMgPSB0aGlzLmZwc0ZyYW1lQ291bnQ7XHJcbiAgICAgICAgdGhpcy5mcHNGcmFtZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RDYWxjVGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZnBzRnJhbWVDb3VudCsrO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmN1cnJlbnRGUFMgPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlRm9yUmVuZGVyZXJTaXplQ2hhbmdlcyA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBsYXN0UmVuZGVyZXJTaXplID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIGNvbnN0IGN1cnJlbnRSZW5kZXJlclNpemUgPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgbGV0IGxhc3RDYW1lcmFPcnRob2dyYXBoaWM7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmdldFNpemUoY3VycmVudFJlbmRlcmVyU2l6ZSk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgbGFzdENhbWVyYU9ydGhvZ3JhcGhpYyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICBsYXN0Q2FtZXJhT3J0aG9ncmFwaGljICE9PSB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSB8fFxyXG4gICAgICAgICAgY3VycmVudFJlbmRlcmVyU2l6ZS54ICE9PSBsYXN0UmVuZGVyZXJTaXplLnggfHxcclxuICAgICAgICAgIGN1cnJlbnRSZW5kZXJlclNpemUueSAhPT0gbGFzdFJlbmRlcmVyU2l6ZS55XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEubGVmdCA9IC1jdXJyZW50UmVuZGVyZXJTaXplLnggLyAyLjA7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnJpZ2h0ID0gY3VycmVudFJlbmRlcmVyU2l6ZS54IC8gMi4wO1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50b3AgPSBjdXJyZW50UmVuZGVyZXJTaXplLnkgLyAyLjA7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLmJvdHRvbSA9IC1jdXJyZW50UmVuZGVyZXJTaXplLnkgLyAyLjA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5hc3BlY3QgPSBjdXJyZW50UmVuZGVyZXJTaXplLnggLyBjdXJyZW50UmVuZGVyZXJTaXplLnk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICAgICAgICBsYXN0UmVuZGVyZXJTaXplLmNvcHkoY3VycmVudFJlbmRlcmVyU2l6ZSk7XHJcbiAgICAgICAgICBsYXN0Q2FtZXJhT3J0aG9ncmFwaGljID0gdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICB0aW1pbmdTZW5zaXRpdmVVcGRhdGVzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBsYXN0VXBkYXRlVGltZTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zdCBjdXJyZW50VGltZSA9IGdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgIGlmICghbGFzdFVwZGF0ZVRpbWUpIGxhc3RVcGRhdGVUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICAgIGNvbnN0IHRpbWVEZWx0YSA9IGN1cnJlbnRUaW1lIC0gbGFzdFVwZGF0ZVRpbWU7XHJcblxyXG4gICAgICB0aGlzLnVwZGF0ZUNhbWVyYVRyYW5zaXRpb24oY3VycmVudFRpbWUpO1xyXG4gICAgICB0aGlzLnVwZGF0ZUZvY3VzTWFya2VyKHRpbWVEZWx0YSk7XHJcblxyXG4gICAgICBsYXN0VXBkYXRlVGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgdGVtcENhbWVyYVRhcmdldCA9IG5ldyBWZWN0b3IzKClcclxuICB0b1ByZXZpb3VzVGFyZ2V0ID0gbmV3IFZlY3RvcjMoKVxyXG4gIHRvTmV4dFRhcmdldCA9IG5ldyBWZWN0b3IzKClcclxuICB1cGRhdGVDYW1lcmFUcmFuc2l0aW9uID0gKGN1cnJlbnRUaW1lKSA9PiB7XHJcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0KSB7XHJcbiAgICAgIHRoaXMudG9QcmV2aW91c1RhcmdldFxyXG4gICAgICAgIC5jb3B5KHRoaXMucHJldmlvdXNDYW1lcmFUYXJnZXQpXHJcbiAgICAgICAgLnN1Yih0aGlzLmNhbWVyYS5wb3NpdGlvbilcclxuICAgICAgICAubm9ybWFsaXplKCk7XHJcbiAgICAgIHRoaXMudG9OZXh0VGFyZ2V0XHJcbiAgICAgICAgLmNvcHkodGhpcy5uZXh0Q2FtZXJhVGFyZ2V0KVxyXG4gICAgICAgIC5zdWIodGhpcy5jYW1lcmEucG9zaXRpb24pXHJcbiAgICAgICAgLm5vcm1hbGl6ZSgpO1xyXG4gICAgICBjb25zdCByb3RhdGlvbkFuZ2xlID0gTWF0aC5hY29zKFxyXG4gICAgICAgIHRoaXMudG9QcmV2aW91c1RhcmdldC5kb3QodGhpcy50b05leHRUYXJnZXQpXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHJvdGF0aW9uU3BlZWQgPSAocm90YXRpb25BbmdsZSAvIChNYXRoLlBJIC8gMykpICogMC42NSArIDAuMztcclxuICAgICAgY29uc3QgdCA9XHJcbiAgICAgICAgKHJvdGF0aW9uU3BlZWQgLyByb3RhdGlvbkFuZ2xlKSAqXHJcbiAgICAgICAgKGN1cnJlbnRUaW1lIC0gdGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0U3RhcnRUaW1lKTtcclxuICAgICAgdGhpcy50ZW1wQ2FtZXJhVGFyZ2V0XHJcbiAgICAgICAgLmNvcHkodGhpcy5wcmV2aW91c0NhbWVyYVRhcmdldClcclxuICAgICAgICAubGVycCh0aGlzLm5leHRDYW1lcmFUYXJnZXQsIHQpO1xyXG4gICAgICB0aGlzLmNhbWVyYS5sb29rQXQodGhpcy50ZW1wQ2FtZXJhVGFyZ2V0KTtcclxuICAgICAgdGhpcy5jb250cm9scy50YXJnZXQuY29weSh0aGlzLnRlbXBDYW1lcmFUYXJnZXQpO1xyXG4gICAgICBpZiAodCA+PSAxLjApIHtcclxuICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlRm9jdXNNYXJrZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICBsZXQgd2FzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAodGltZURlbHRhKSB7XHJcbiAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0Rm9jdXNNYXJrZXJWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgPSBNYXRoLm1heChcclxuICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuZ2V0Rm9jdXNNYXJrZXJPcGFjaXR5KCksXHJcbiAgICAgICAgICAwLjBcclxuICAgICAgICApO1xyXG4gICAgICAgIGxldCBuZXdGb2N1c01hcmtlck9wYWNpdHkgPSBNYXRoLm1pbihcclxuICAgICAgICAgIGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgKyBGT0NVU19NQVJLRVJfRkFERV9JTl9TUEVFRCAqIHRpbWVEZWx0YSxcclxuICAgICAgICAgIDEuMFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRGb2N1c01hcmtlck9wYWNpdHkobmV3Rm9jdXNNYXJrZXJPcGFjaXR5KTtcclxuICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnVwZGF0ZUZvY3VzTWFya2VyKFxyXG4gICAgICAgICAgdGhpcy5uZXh0Q2FtZXJhVGFyZ2V0LFxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICByZW5kZXJEaW1lbnNpb25zXHJcbiAgICAgICAgKTtcclxuICAgICAgICB3YXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHk7XHJcbiAgICAgICAgaWYgKHdhc1RyYW5zaXRpb25pbmcpIGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgPSAxLjA7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSA9IE1hdGgubWluKFxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLmdldEZvY3VzTWFya2VyT3BhY2l0eSgpLFxyXG4gICAgICAgICAgICAxLjBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgPiAwKSB7XHJcbiAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnVwZGF0ZUZvY3VzTWFya2VyKFxyXG4gICAgICAgICAgICB0aGlzLm5leHRDYW1lcmFUYXJnZXQsXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgICByZW5kZXJEaW1lbnNpb25zXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgbGV0IG5ld0ZvY3VzTWFya2VyT3BhY2l0eSA9IE1hdGgubWF4KFxyXG4gICAgICAgICAgICBjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5IC0gRk9DVVNfTUFSS0VSX0ZBREVfT1VUX1NQRUVEICogdGltZURlbHRhLFxyXG4gICAgICAgICAgICAwLjBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldEZvY3VzTWFya2VyT3BhY2l0eShuZXdGb2N1c01hcmtlck9wYWNpdHkpO1xyXG4gICAgICAgICAgaWYgKG5ld0ZvY3VzTWFya2VyT3BhY2l0eSA9PT0gMC4wKVxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldEZvY3VzTWFya2VyVmlzaWJpbGl0eShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5ID4gMC4wKSB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgICAgd2FzVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICB1cGRhdGVNZXNoQ3Vyc29yID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IG91dEhpdHMgPSBbXTtcclxuICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICh0aGlzLnNob3dNZXNoQ3Vyc29yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgICBvdXRIaXRzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYUFuZFNjcmVlblBvc2l0aW9uKFxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICB0aGlzLm1vdXNlUG9zaXRpb24sXHJcbiAgICAgICAgICByZW5kZXJEaW1lbnNpb25zXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RTcGxhdE1lc2godGhpcy5zcGxhdE1lc2gsIG91dEhpdHMpO1xyXG4gICAgICAgIGlmIChvdXRIaXRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0TWVzaEN1cnNvclZpc2liaWxpdHkodHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnBvc2l0aW9uQW5kT3JpZW50TWVzaEN1cnNvcihcclxuICAgICAgICAgICAgb3V0SGl0c1swXS5vcmlnaW4sXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldE1lc2hDdXJzb3JWaXNpYmlsaXR5KGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NlbmVIZWxwZXIuZ2V0TWVzY2hDdXJzb3JWaXNpYmlsaXR5KCkpXHJcbiAgICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRNZXNoQ3Vyc29yVmlzaWJpbGl0eShmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHVwZGF0ZUluZm9QYW5lbCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoIXRoaXMuc2hvd0luZm8pIHJldHVyblxyXG4gICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgIGNvbnN0IGNhbWVyYUxvb2tBdFBvc2l0aW9uID0gdGhpcy5jb250cm9scyA/IHRoaXMuY29udHJvbHMudGFyZ2V0IDogbnVsbDtcclxuICAgICAgY29uc3QgbWVzaEN1cnNvclBvc2l0aW9uID0gdGhpcy5zaG93TWVzaEN1cnNvclxyXG4gICAgICAgID8gdGhpcy5zY2VuZUhlbHBlci5tZXNoQ3Vyc29yLnBvc2l0aW9uXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgICBjb25zdCBzcGxhdFJlbmRlckNvdW50UGN0ID1cclxuICAgICAgICBzcGxhdENvdW50ID4gMCA/ICh0aGlzLnNwbGF0UmVuZGVyQ291bnQgLyBzcGxhdENvdW50KSAqIDEwMCA6IDA7XHJcbiAgICAgIC8vIHRoaXMuaW5mb1BhbmVsLnVwZGF0ZShcclxuICAgICAgLy8gICByZW5kZXJEaW1lbnNpb25zLFxyXG4gICAgICAvLyAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLFxyXG4gICAgICAvLyAgIGNhbWVyYUxvb2tBdFBvc2l0aW9uLFxyXG4gICAgICAvLyAgIHRoaXMuY2FtZXJhLnVwLFxyXG4gICAgICAvLyAgIHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhLFxyXG4gICAgICAvLyAgIG1lc2hDdXJzb3JQb3NpdGlvbixcclxuICAgICAgLy8gICB0aGlzLmN1cnJlbnRGUFMgfHwgJ04vQScsXHJcbiAgICAgIC8vICAgc3BsYXRDb3VudCxcclxuICAgICAgLy8gICB0aGlzLnNwbGF0UmVuZGVyQ291bnQsXHJcbiAgICAgIC8vICAgc3BsYXRSZW5kZXJDb3VudFBjdCxcclxuICAgICAgLy8gICB0aGlzLmxhc3RTb3J0VGltZSxcclxuICAgICAgLy8gICB0aGlzLmZvY2FsQWRqdXN0bWVudCxcclxuICAgICAgLy8gICB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdFNjYWxlKCksXHJcbiAgICAgIC8vICAgdGhpcy5zcGxhdE1lc2guZ2V0UG9pbnRDbG91ZE1vZGVFbmFibGVkKClcclxuICAgICAgLy8gKVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgdXBkYXRlQ29udHJvbFBsYW5lKCkge1xyXG4gICAgaWYgKHRoaXMuc2hvd0NvbnRyb2xQbGFuZSkge1xyXG4gICAgICB0aGlzLnNjZW5lSGVscGVyLnNldENvbnRyb2xQbGFuZVZpc2liaWxpdHkodHJ1ZSk7XHJcbiAgICAgIHRoaXMuc2NlbmVIZWxwZXIucG9zaXRpb25BbmRPcmllbnRDb250cm9sUGxhbmUoXHJcbiAgICAgICAgdGhpcy5jb250cm9scy50YXJnZXQsXHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0Q29udHJvbFBsYW5lVmlzaWJpbGl0eShmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtdnBNYXRyaXggPSBuZXcgTWF0cml4NCgpXHJcbiAgY2FtZXJhUG9zaXRpb25BcnJheSA9IFtdXHJcbiAgbGFzdFNvcnRWaWV3RGlyID0gbmV3IFZlY3RvcjMoMCwgMCwgLTEpXHJcbiAgc29ydFZpZXdEaXIgPSBuZXcgVmVjdG9yMygwLCAwLCAtMSlcclxuICBsYXN0U29ydFZpZXdQb3MgPSBuZXcgVmVjdG9yMygpXHJcbiAgc29ydFZpZXdPZmZzZXQgPSBuZXcgVmVjdG9yMygpXHJcbiAgcXVldWVkU29ydHMgPSBbXVxyXG5cclxuICBwYXJ0aWFsU29ydHMgPSBbXHJcbiAgICB7XHJcbiAgICAgIGFuZ2xlVGhyZXNob2xkOiAwLjU1LFxyXG4gICAgICBzb3J0RnJhY3Rpb25zOiBbMC4xMjUsIDAuMzMzMzMsIDAuNzVdXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBhbmdsZVRocmVzaG9sZDogMC42NSxcclxuICAgICAgc29ydEZyYWN0aW9uczogWzAuMzMzMzMsIDAuNjY2NjddXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBhbmdsZVRocmVzaG9sZDogMC44LFxyXG4gICAgICBzb3J0RnJhY3Rpb25zOiBbMC41XVxyXG4gICAgfVxyXG4gIF1cclxuICBydW5TcGxhdFNvcnQgPSAoZm9yY2UgPSBmYWxzZSwgZm9yY2VTb3J0QWxsID0gZmFsc2UpID0+IHtcclxuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcclxuICAgIGlmICh0aGlzLnNvcnRSdW5uaW5nKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICBpZiAodGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpIDw9IDApIHtcclxuICAgICAgdGhpcy5zcGxhdFJlbmRlckNvdW50ID0gMDtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYW5nbGVEaWZmID0gMDtcclxuICAgIGxldCBwb3NpdGlvbkRpZmYgPSAwO1xyXG4gICAgbGV0IG5lZWRzUmVmcmVzaEZvclJvdGF0aW9uID0gZmFsc2U7XHJcbiAgICBsZXQgbmVlZHNSZWZyZXNoRm9yUG9zaXRpb24gPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLnNvcnRWaWV3RGlyLnNldCgwLCAwLCAtMSkuYXBwbHlRdWF0ZXJuaW9uKHRoaXMuY2FtZXJhLnF1YXRlcm5pb24pO1xyXG4gICAgYW5nbGVEaWZmID0gdGhpcy5zb3J0Vmlld0Rpci5kb3QodGhpcy5sYXN0U29ydFZpZXdEaXIpO1xyXG4gICAgcG9zaXRpb25EaWZmID0gdGhpcy5zb3J0Vmlld09mZnNldFxyXG4gICAgICAuY29weSh0aGlzLmNhbWVyYS5wb3NpdGlvbilcclxuICAgICAgLnN1Yih0aGlzLmxhc3RTb3J0Vmlld1BvcylcclxuICAgICAgLmxlbmd0aCgpO1xyXG5cclxuICAgIGlmICghZm9yY2UpIHtcclxuICAgICAgaWYgKCF0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSAmJiB0aGlzLnF1ZXVlZFNvcnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGlmIChhbmdsZURpZmYgPD0gMC45OSkgbmVlZHNSZWZyZXNoRm9yUm90YXRpb24gPSB0cnVlO1xyXG4gICAgICAgIGlmIChwb3NpdGlvbkRpZmYgPj0gMS4wKSBuZWVkc1JlZnJlc2hGb3JQb3NpdGlvbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFuZWVkc1JlZnJlc2hGb3JSb3RhdGlvbiAmJiAhbmVlZHNSZWZyZXNoRm9yUG9zaXRpb24pXHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zb3J0UnVubmluZyA9IHRydWU7XHJcbiAgICBsZXQgeyBzcGxhdFJlbmRlckNvdW50LCBzaG91bGRTb3J0QWxsIH0gPSB0aGlzLmdhdGhlclNjZW5lTm9kZXNGb3JTb3J0KCk7XHJcbiAgICBzaG91bGRTb3J0QWxsID0gc2hvdWxkU29ydEFsbCB8fCBmb3JjZVNvcnRBbGw7XHJcbiAgICB0aGlzLnNwbGF0UmVuZGVyQ291bnQgPSBzcGxhdFJlbmRlckNvdW50O1xyXG5cclxuICAgIHRoaXMubXZwTWF0cml4LmNvcHkodGhpcy5jYW1lcmEubWF0cml4V29ybGQpLmludmVydCgpO1xyXG4gICAgY29uc3QgbXZwQ2FtZXJhID0gdGhpcy5wZXJzcGVjdGl2ZUNhbWVyYSB8fCB0aGlzLmNhbWVyYTtcclxuICAgIHRoaXMubXZwTWF0cml4LnByZW11bHRpcGx5KG12cENhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTtcclxuICAgIGlmICghdGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUpXHJcbiAgICAgIHRoaXMubXZwTWF0cml4Lm11bHRpcGx5KHRoaXMuc3BsYXRNZXNoLm1hdHJpeFdvcmxkKTtcclxuXHJcbiAgICBsZXQgZ3B1QWNjZWxlcmF0ZWRTb3J0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh0cnVlKTtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5ncHVBY2NlbGVyYXRlZFNvcnQgJiZcclxuICAgICAgKHRoaXMucXVldWVkU29ydHMubGVuZ3RoIDw9IDEgfHwgdGhpcy5xdWV1ZWRTb3J0cy5sZW5ndGggJSAyID09PSAwKVxyXG4gICAgKSB7XHJcbiAgICAgIGdwdUFjY2VsZXJhdGVkU29ydFByb21pc2UgPSB0aGlzLnNwbGF0TWVzaC5jb21wdXRlRGlzdGFuY2VzT25HUFUoXHJcbiAgICAgICAgdGhpcy5tdnBNYXRyaXgsXHJcbiAgICAgICAgdGhpcy5zb3J0V29ya2VyUHJlY29tcHV0ZWREaXN0YW5jZXNcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBncHVBY2NlbGVyYXRlZFNvcnRQcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5xdWV1ZWRTb3J0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBpZiAodGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUgfHwgc2hvdWxkU29ydEFsbCkge1xyXG4gICAgICAgICAgdGhpcy5xdWV1ZWRTb3J0cy5wdXNoKHRoaXMuc3BsYXRSZW5kZXJDb3VudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZvciAobGV0IHBhcnRpYWxTb3J0IG9mIHRoaXMucGFydGlhbFNvcnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmdsZURpZmYgPCBwYXJ0aWFsU29ydC5hbmdsZVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICAgIGZvciAobGV0IHNvcnRGcmFjdGlvbiBvZiBwYXJ0aWFsU29ydC5zb3J0RnJhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlZFNvcnRzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgIE1hdGguZmxvb3IodGhpcy5zcGxhdFJlbmRlckNvdW50ICogc29ydEZyYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5xdWV1ZWRTb3J0cy5wdXNoKHRoaXMuc3BsYXRSZW5kZXJDb3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGxldCBzb3J0Q291bnQgPSBNYXRoLm1pbih0aGlzLnF1ZXVlZFNvcnRzLnNoaWZ0KCksIHRoaXMuc3BsYXRSZW5kZXJDb3VudCk7XHJcbiAgICAgIHRoaXMuc3BsYXRTb3J0Q291bnQgPSBzb3J0Q291bnQ7XHJcblxyXG4gICAgICB0aGlzLmNhbWVyYVBvc2l0aW9uQXJyYXlbMF0gPSB0aGlzLmNhbWVyYS5wb3NpdGlvbi54O1xyXG4gICAgICB0aGlzLmNhbWVyYVBvc2l0aW9uQXJyYXlbMV0gPSB0aGlzLmNhbWVyYS5wb3NpdGlvbi55O1xyXG4gICAgICB0aGlzLmNhbWVyYVBvc2l0aW9uQXJyYXlbMl0gPSB0aGlzLmNhbWVyYS5wb3NpdGlvbi56O1xyXG5cclxuICAgICAgY29uc3Qgc29ydE1lc3NhZ2UgPSB7XHJcbiAgICAgICAgbW9kZWxWaWV3UHJvajogdGhpcy5tdnBNYXRyaXguZWxlbWVudHMsXHJcbiAgICAgICAgY2FtZXJhUG9zaXRpb246IHRoaXMuY2FtZXJhUG9zaXRpb25BcnJheSxcclxuICAgICAgICBzcGxhdFJlbmRlckNvdW50OiB0aGlzLnNwbGF0UmVuZGVyQ291bnQsXHJcbiAgICAgICAgc3BsYXRTb3J0Q291bnQ6IHNvcnRDb3VudCxcclxuICAgICAgICB1c2VQcmVjb21wdXRlZERpc3RhbmNlczogdGhpcy5ncHVBY2NlbGVyYXRlZFNvcnRcclxuICAgICAgfTtcclxuICAgICAgaWYgKHRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2guZmlsbFRyYW5zZm9ybXNBcnJheSh0aGlzLnNvcnRXb3JrZXJUcmFuc2Zvcm1zKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMuc2hhcmVkTWVtb3J5Rm9yV29ya2Vycykge1xyXG4gICAgICAgIHNvcnRNZXNzYWdlLmluZGV4ZXNUb1NvcnQgPSB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0O1xyXG4gICAgICAgIHNvcnRNZXNzYWdlLnRyYW5zZm9ybXMgPSB0aGlzLnNvcnRXb3JrZXJUcmFuc2Zvcm1zO1xyXG4gICAgICAgIGlmICh0aGlzLmdwdUFjY2VsZXJhdGVkU29ydCkge1xyXG4gICAgICAgICAgc29ydE1lc3NhZ2UucHJlY29tcHV0ZWREaXN0YW5jZXMgPSB0aGlzLnNvcnRXb3JrZXJQcmVjb21wdXRlZERpc3RhbmNlcztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc29ydFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuc29ydFByb21pc2VSZXNvbHZlciA9IHJlc29sdmU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHRoaXMucHJlU29ydE1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB0aGlzLnByZVNvcnRNZXNzYWdlcy5mb3JFYWNoKChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnNvcnRXb3JrZXIucG9zdE1lc3NhZ2UobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wcmVTb3J0TWVzc2FnZXMgPSBbXTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNvcnRXb3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgIHNvcnQ6IHNvcnRNZXNzYWdlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHRoaXMucXVldWVkU29ydHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5sYXN0U29ydFZpZXdQb3MuY29weSh0aGlzLmNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICAgICAgdGhpcy5sYXN0U29ydFZpZXdEaXIuY29weSh0aGlzLnNvcnRWaWV3RGlyKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBncHVBY2NlbGVyYXRlZFNvcnRQcm9taXNlXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmUgd2hpY2ggc3BsYXRzIHRvIHJlbmRlciBieSBjaGVja2luZyB3aGljaCBhcmUgaW5zaWRlIG9yIGNsb3NlIHRvIHRoZSB2aWV3IGZydXN0dW1cclxuICAgKi9cclxuICBnYXRoZXJTY2VuZU5vZGVzRm9yU29ydCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBub2RlUmVuZGVyTGlzdCA9IFtdO1xyXG4gICAgbGV0IGFsbFNwbGF0c1NvcnRCdWZmZXIgPSBudWxsO1xyXG4gICAgY29uc3QgdGVtcFZlY3RvcllaID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIGNvbnN0IHRlbXBWZWN0b3JYWiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBjb25zdCB0ZW1wVmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIGNvbnN0IG1vZGVsVmlldyA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICBjb25zdCBiYXNlTW9kZWxWaWV3ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgIGNvbnN0IHNjZW5lVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcclxuICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgY29uc3QgZm9yd2FyZCA9IG5ldyBWZWN0b3IzKDAsIDAsIC0xKTtcclxuXHJcbiAgICBjb25zdCB0ZW1wTWF4ID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIGNvbnN0IG5vZGVTaXplID0gKG5vZGUpID0+IHtcclxuICAgICAgcmV0dXJuIHRlbXBNYXguY29weShub2RlLm1heCkuc3ViKG5vZGUubWluKS5sZW5ndGgoKVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGdhdGhlckFsbE5vZGVzID0gZmFsc2UpIHtcclxuICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICBjb25zdCBjYW1lcmFGb2NhbExlbmd0aCA9XHJcbiAgICAgICAgcmVuZGVyRGltZW5zaW9ucy55IC9cclxuICAgICAgICAyLjAgL1xyXG4gICAgICAgIE1hdGgudGFuKCh0aGlzLmNhbWVyYS5mb3YgLyAyLjApICogTWF0aFV0aWxzLkRFRzJSQUQpO1xyXG4gICAgICBjb25zdCBmb3ZYT3ZlcjIgPSBNYXRoLmF0YW4ocmVuZGVyRGltZW5zaW9ucy54IC8gMi4wIC8gY2FtZXJhRm9jYWxMZW5ndGgpO1xyXG4gICAgICBjb25zdCBmb3ZZT3ZlcjIgPSBNYXRoLmF0YW4ocmVuZGVyRGltZW5zaW9ucy55IC8gMi4wIC8gY2FtZXJhRm9jYWxMZW5ndGgpO1xyXG4gICAgICBjb25zdCBjb3NGb3ZYT3ZlcjIgPSBNYXRoLmNvcyhmb3ZYT3ZlcjIpO1xyXG4gICAgICBjb25zdCBjb3NGb3ZZT3ZlcjIgPSBNYXRoLmNvcyhmb3ZZT3ZlcjIpO1xyXG5cclxuICAgICAgY29uc3Qgc3BsYXRUcmVlID0gdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRUcmVlKCk7XHJcblxyXG4gICAgICBpZiAoc3BsYXRUcmVlKSB7XHJcbiAgICAgICAgYmFzZU1vZGVsVmlldy5jb3B5KHRoaXMuY2FtZXJhLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtcclxuICAgICAgICBpZiAoIXRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlKVxyXG4gICAgICAgICAgYmFzZU1vZGVsVmlldy5tdWx0aXBseSh0aGlzLnNwbGF0TWVzaC5tYXRyaXhXb3JsZCk7XHJcblxyXG4gICAgICAgIGxldCBub2RlUmVuZGVyQ291bnQgPSAwO1xyXG4gICAgICAgIGxldCBzcGxhdFJlbmRlckNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzcGxhdFRyZWUuc3ViVHJlZXMubGVuZ3RoOyBzKyspIHtcclxuICAgICAgICAgIGNvbnN0IHN1YlRyZWUgPSBzcGxhdFRyZWUuc3ViVHJlZXNbc107XHJcbiAgICAgICAgICBtb2RlbFZpZXcuY29weShiYXNlTW9kZWxWaWV3KTtcclxuICAgICAgICAgIGlmICh0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0TWVzaC5nZXRTY2VuZVRyYW5zZm9ybShzLCBzY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIG1vZGVsVmlldy5tdWx0aXBseShzY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBub2RlQ291bnQgPSBzdWJUcmVlLm5vZGVzV2l0aEluZGV4ZXMubGVuZ3RoO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gc3ViVHJlZS5ub2Rlc1dpdGhJbmRleGVzW2ldO1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgIW5vZGUuZGF0YSB8fFxyXG4gICAgICAgICAgICAgICFub2RlLmRhdGEuaW5kZXhlcyB8fFxyXG4gICAgICAgICAgICAgIG5vZGUuZGF0YS5pbmRleGVzLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgdGVtcFZlY3Rvci5jb3B5KG5vZGUuY2VudGVyKS5hcHBseU1hdHJpeDQobW9kZWxWaWV3KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlVG9Ob2RlID0gdGVtcFZlY3Rvci5sZW5ndGgoKTtcclxuICAgICAgICAgICAgdGVtcFZlY3Rvci5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRlbXBWZWN0b3JZWi5jb3B5KHRlbXBWZWN0b3IpLnNldFgoMCkubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRlbXBWZWN0b3JYWi5jb3B5KHRlbXBWZWN0b3IpLnNldFkoMCkubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmFBbmdsZVhaRG90ID0gZm9yd2FyZC5kb3QodGVtcFZlY3RvclhaKTtcclxuICAgICAgICAgICAgY29uc3QgY2FtZXJhQW5nbGVZWkRvdCA9IGZvcndhcmQuZG90KHRlbXBWZWN0b3JZWik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBucyA9IG5vZGVTaXplKG5vZGUpO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRPZkZvdlkgPSBjYW1lcmFBbmdsZVlaRG90IDwgY29zRm92WU92ZXIyIC0gMC42O1xyXG4gICAgICAgICAgICBjb25zdCBvdXRPZkZvdlggPSBjYW1lcmFBbmdsZVhaRG90IDwgY29zRm92WE92ZXIyIC0gMC42O1xyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgIWdhdGhlckFsbE5vZGVzICYmXHJcbiAgICAgICAgICAgICAgKG91dE9mRm92WCB8fCBvdXRPZkZvdlkpICYmXHJcbiAgICAgICAgICAgICAgZGlzdGFuY2VUb05vZGUgPiBuc1xyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNwbGF0UmVuZGVyQ291bnQgKz0gbm9kZS5kYXRhLmluZGV4ZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBub2RlUmVuZGVyTGlzdFtub2RlUmVuZGVyQ291bnRdID0gbm9kZTtcclxuICAgICAgICAgICAgbm9kZS5kYXRhLmRpc3RhbmNlVG9Ob2RlID0gZGlzdGFuY2VUb05vZGU7XHJcbiAgICAgICAgICAgIG5vZGVSZW5kZXJDb3VudCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbm9kZVJlbmRlckxpc3QubGVuZ3RoID0gbm9kZVJlbmRlckNvdW50O1xyXG4gICAgICAgIG5vZGVSZW5kZXJMaXN0LnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgIGlmIChhLmRhdGEuZGlzdGFuY2VUb05vZGUgPCBiLmRhdGEuZGlzdGFuY2VUb05vZGUpIHJldHVybiAtMVxyXG4gICAgICAgICAgZWxzZSByZXR1cm4gMVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudEJ5dGVPZmZzZXQgPSBzcGxhdFJlbmRlckNvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVySW50O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZVJlbmRlckNvdW50OyBpKyspIHtcclxuICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2RlUmVuZGVyTGlzdFtpXTtcclxuICAgICAgICAgIGNvbnN0IHdpbmRvd1NpemVJbnRzID0gbm9kZS5kYXRhLmluZGV4ZXMubGVuZ3RoO1xyXG4gICAgICAgICAgY29uc3Qgd2luZG93U2l6ZUJ5dGVzID0gd2luZG93U2l6ZUludHMgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQ7XHJcbiAgICAgICAgICBsZXQgZGVzdFZpZXcgPSBuZXcgVWludDMyQXJyYXkoXHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQuYnVmZmVyLFxyXG4gICAgICAgICAgICBjdXJyZW50Qnl0ZU9mZnNldCAtIHdpbmRvd1NpemVCeXRlcyxcclxuICAgICAgICAgICAgd2luZG93U2l6ZUludHNcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBkZXN0Vmlldy5zZXQobm9kZS5kYXRhLmluZGV4ZXMpO1xyXG4gICAgICAgICAgY3VycmVudEJ5dGVPZmZzZXQgLT0gd2luZG93U2l6ZUJ5dGVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNwbGF0UmVuZGVyQ291bnQ6IHNwbGF0UmVuZGVyQ291bnQsXHJcbiAgICAgICAgICBzaG91bGRTb3J0QWxsOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB0b3RhbFNwbGF0Q291bnQgPSB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgIWFsbFNwbGF0c1NvcnRCdWZmZXIgfHxcclxuICAgICAgICAgIGFsbFNwbGF0c1NvcnRCdWZmZXIubGVuZ3RoICE9PSB0b3RhbFNwbGF0Q291bnRcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGFsbFNwbGF0c1NvcnRCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkodG90YWxTcGxhdENvdW50KTtcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxTcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgYWxsU3BsYXRzU29ydEJ1ZmZlcltpXSA9IGk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQuc2V0KGFsbFNwbGF0c1NvcnRCdWZmZXIpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzcGxhdFJlbmRlckNvdW50OiB0b3RhbFNwbGF0Q291bnQsXHJcbiAgICAgICAgICBzaG91bGRTb3J0QWxsOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICBnZXRTcGxhdE1lc2goKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zcGxhdE1lc2hcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhIHJlZmVyZW5jZSB0byBhIHNwbGF0IHNjZW5lLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzY2VuZUluZGV4IFRoZSBpbmRleCBvZiB0aGUgc2NlbmUgdG8gd2hpY2ggdGhlIHJlZmVyZW5jZSB3aWxsIGJlIHJldHVybmVkXHJcbiAgICogQHJldHVybiB7U3BsYXRTY2VuZX1cclxuICAgKi9cclxuICBnZXRTcGxhdFNjZW5lKHNjZW5lSW5kZXgpIHtcclxuICAgIHJldHVybiB0aGlzLnNwbGF0TWVzaC5nZXRTY2VuZShzY2VuZUluZGV4KVxyXG4gIH1cclxuXHJcbiAgZ2V0U2NlbmVDb3VudCgpIHtcclxuICAgIHJldHVybiB0aGlzLnNwbGF0TWVzaC5nZXRTY2VuZUNvdW50KClcclxuICB9XHJcblxyXG4gIGlzTW9iaWxlKCkge1xyXG4gICAgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ01vYmknKVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlTW9ycGhUYXJnZXQoaW5wdXRNZXNoKSB7XHJcbiAgICB0aGlzLmF2YXRhck1lc2ggPSBpbnB1dE1lc2g7XHJcbiAgICB0aGlzLnNwbGF0TWVzaC5mbGFtZU1vZGVsID0gaW5wdXRNZXNoO1xyXG5cclxuICAgIHRoaXMucnVuTW9ycGhVcGRhdGUoKTtcclxuICAgIHRoaXMuc3BsYXRNZXNoLmdhdXNzaWFuU3BsYXRDb3VudCA9IHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50O1xyXG4gIH1cclxuXHJcbiAgcnVuTW9ycGhVcGRhdGUoKSB7XHJcbiAgICB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudCA9IHRoaXMuYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmNvdW50O1xyXG4gICAgdmFyIG1vcnBoZWRNZXNoID0gbmV3IEZsb2F0MzJBcnJheShcclxuICAgICAgdGhpcy5hdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXlcclxuICAgICk7XHJcbiAgICBjb25zdCBudW1Cb25lcyA9IDU7XHJcbiAgICB0aGlzLnNwbGF0TWVzaC5ib25lc051bSA9IG51bUJvbmVzO1xyXG5cclxuICAgIHRoaXMuc2tpbk1vZGVsLnNrZWxldG9uLnVwZGF0ZSgpO1xyXG4gICAgdGhpcy5ib25lUm9vdC51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtcclxuICAgIGlmICh0aGlzLnNwbGF0TWVzaC5nZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ3NwbGF0SW5kZXgnKSAmJiB0aGlzLnNldFNraW5BdHRpYnV0ZXMgPT09IGZhbHNlKSB7XHJcblxyXG4gICAgICB0aGlzLnNldFNraW5BdHRpYnV0ZXMgPSB0cnVlO1xyXG4gICAgICBjb25zdCBnZW9tZXRyeSA9IHRoaXMuc3BsYXRNZXNoLmdlb21ldHJ5O1xyXG5cclxuICAgICAgY29uc3Qgc2tpbkluZGV4U291cmNlID0gdGhpcy5za2luTW9kZWwuZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luSW5kZXg7XHJcbiAgICAgIGNvbnN0IHNraW5XZWlnaHRTb3VyY2UgPSB0aGlzLnNraW5Nb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5XZWlnaHQ7XHJcblxyXG4gICAgICBjb25zdCBuZXdTa2luSW5kZXggPSBuZXcgSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlKFxyXG4gICAgICAgICAgbmV3IHNraW5JbmRleFNvdXJjZS5hcnJheS5jb25zdHJ1Y3Rvcihza2luSW5kZXhTb3VyY2UuYXJyYXkpLFxyXG4gICAgICAgICAgNCxcclxuICAgICAgICAgIHNraW5JbmRleFNvdXJjZS5ub3JtYWxpemVkLFxyXG4gICAgICAgICAgMVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgbmV3U2tpbldlaWdodCA9IG5ldyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBuZXcgc2tpbldlaWdodFNvdXJjZS5hcnJheS5jb25zdHJ1Y3Rvcihza2luV2VpZ2h0U291cmNlLmFycmF5KSxcclxuICAgICAgICAgIDQsXHJcbiAgICAgICAgICBza2luV2VpZ2h0U291cmNlLm5vcm1hbGl6ZWQsXHJcbiAgICAgICAgICAxXHJcbiAgICAgICk7XHJcbiAgICAgIG5ld1NraW5JbmRleC5zZXRVc2FnZShEeW5hbWljRHJhd1VzYWdlKTtcclxuICAgICAgbmV3U2tpbldlaWdodC5zZXRVc2FnZShEeW5hbWljRHJhd1VzYWdlKTtcclxuICAgICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdza2luSW5kZXgnLCBuZXdTa2luSW5kZXgpO1xyXG4gICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3NraW5XZWlnaHQnLCBuZXdTa2luV2VpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNwbGF0TWVzaC5tb3JwaGVkTWVzaCA9IG1vcnBoZWRNZXNoO1xyXG5cclxuICAgIGxldCBzcGxhdE51bSA9IHRoaXMuc3BsYXRNZXNoLm1vcnBoZWRNZXNoLmxlbmd0aCAvIDM7XHJcbiAgICBpZiAodGhpcy5zcGxhdE1lc2guc3BsYXREYXRhVGV4dHVyZXNbJ2ZsYW1lTW9kZWwnXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlVGV0dXJlQWZ0ZXJCU0FuZFNrZWxldG9uKDAsIHNwbGF0TnVtIC0gMSwgZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8qKlxyXG4gKiBHYXVzc2lhblNwbGF0UmVuZGVyZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBnYXVzc2lhbi1zcGxhdC1yZW5kZXJlci1mb3ItbGFtXHJcbiAqIFxyXG4gKiBIaWdoLWxldmVsIG9yY2hlc3RyYXRpb24gY2xhc3MgdGhhdDpcclxuICogLSBMb2FkcyBaSVAgYXNzZXRzIHZpYSBmZXRjaFxyXG4gKiAtIFVucGFja3Mgd2l0aCBKU1ppcFxyXG4gKiAtIENyZWF0ZXMgVmlld2VyIGluc3RhbmNlXHJcbiAqIC0gTG9hZHMgRkxBTUUvc2tpbiBtb2RlbHNcclxuICogLSBSdW5zIHRoZSByZW5kZXIgbG9vcFxyXG4gKi9cclxuXHJcbi8qIGdsb2JhbCBOUHJvZ3Jlc3MgKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBWZWN0b3IzLFxyXG4gICAgQm9uZSxcclxuICAgIENsb2NrLFxyXG4gICAgQW5pbWF0aW9uTWl4ZXJcclxufSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IEdMVEZMb2FkZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyLmpzJztcclxuaW1wb3J0IEpTWmlwIGZyb20gJ2pzemlwJztcclxuXHJcbi8vIEltcG9ydCBpbnRlcm5hbCBtb2R1bGVzXHJcbmltcG9ydCB7IFRZVm9pY2VDaGF0U3RhdGUgfSBmcm9tICcuL0FwcENvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IEFuaW1hdGlvbk1hbmFnZXIgfSBmcm9tICcuL0FuaW1hdGlvbk1hbmFnZXIuanMnO1xyXG5pbXBvcnQgeyBWaWV3ZXIgfSBmcm9tICcuLi9jb3JlL1ZpZXdlci5qcyc7XHJcbmltcG9ydCB7IFNjZW5lRm9ybWF0IH0gZnJvbSAnLi4vZW51bXMvU2NlbmVGb3JtYXQuanMnO1xyXG5pbXBvcnQgeyBTY2VuZVJldmVhbE1vZGUgfSBmcm9tICcuLi9lbnVtcy9TY2VuZVJldmVhbE1vZGUuanMnO1xyXG5cclxuLy8gSW1wb3J0IG5ldyB1dGlsaXRpZXMgYW5kIGVycm9yIGNsYXNzZXNcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcclxuaW1wb3J0IHtcclxuICAgIFZhbGlkYXRpb25FcnJvcixcclxuICAgIE5ldHdvcmtFcnJvcixcclxuICAgIEFzc2V0TG9hZEVycm9yLFxyXG4gICAgSW5pdGlhbGl6YXRpb25FcnJvcixcclxuICAgIFJlc291cmNlRGlzcG9zZWRFcnJvclxyXG59IGZyb20gJy4uL2Vycm9ycy9pbmRleC5qcyc7XHJcbmltcG9ydCB7XHJcbiAgICB2YWxpZGF0ZVVybCxcclxuICAgIHZhbGlkYXRlRE9NRWxlbWVudCxcclxuICAgIHZhbGlkYXRlSGV4Q29sb3IsXHJcbiAgICB2YWxpZGF0ZUNhbGxiYWNrXHJcbn0gZnJvbSAnLi4vdXRpbHMvVmFsaWRhdGlvblV0aWxzLmpzJztcclxuaW1wb3J0IHsgQmxvYlVybE1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9CbG9iVXJsTWFuYWdlci5qcyc7XHJcbmltcG9ydCB7IHRlbXBWZWN0b3IzQSB9IGZyb20gJy4uL3V0aWxzL09iamVjdFBvb2wuanMnO1xyXG5cclxuLy8gQ3JlYXRlIGxvZ2dlciBmb3IgdGhpcyBtb2R1bGVcclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdHYXVzc2lhblNwbGF0UmVuZGVyZXInKTtcclxuXHJcbi8vIENvbmZpZ3VyYXRpb24gb2JqZWN0cyAtIHRoZXNlIHdvdWxkIG5vcm1hbGx5IGJlIGxvYWRlZCBmcm9tIHRoZSBaSVBcclxuY29uc3QgY2hhcmFjdG9yQ29uZmlnID0ge1xyXG4gICAgY2FtUG9zOiB7IHg6IDAsIHk6IDEuOCwgejogMSB9LFxyXG4gICAgY2FtUm90OiB7IHg6IC0xMCwgeTogMCwgejogMCB9LFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiAnZmZmZmZmJ1xyXG59O1xyXG5cclxuY29uc3QgbW90aW9uQ29uZmlnID0ge1xyXG4gICAgb2Zmc2V0OiB7fSxcclxuICAgIHNjYWxlOiB7fVxyXG59O1xyXG5cclxuLy8gQW5pbWF0aW9uIGNvbmZpZ3VyYXRpb24gLSBkZWZpbmVzIGhvdyBhbmltYXRpb24gY2xpcHMgYXJlIGRpc3RyaWJ1dGVkIHRvIHN0YXRlc1xyXG4vLyBUaGUgYW5pbWF0aW9uLmdsYiBjb250YWlucyBjbGlwcyBpbiBvcmRlcjogaGVsbG8oMiksIGlkbGUoMSksIGxpc3RlbigwKSwgc3BlYWsoNiksIHRoaW5rKDMpXHJcbmNvbnN0IGFuaW1hdGlvbkNvbmZpZyA9IHtcclxuICAgIGhlbGxvOiB7IHNpemU6IDIsIGlzR3JvdXA6IGZhbHNlIH0sXHJcbiAgICBpZGxlOiB7IHNpemU6IDEsIGlzR3JvdXA6IGZhbHNlIH0sXHJcbiAgICBsaXN0ZW46IHsgc2l6ZTogMCwgaXNHcm91cDogZmFsc2UgfSxcclxuICAgIHNwZWFrOiB7IHNpemU6IDYsIGlzR3JvdXA6IGZhbHNlIH0sXHJcbiAgICB0aGluazogeyBzaXplOiAzLCBpc0dyb3VwOiB0cnVlIH0sXHJcbiAgICBvdGhlcjogW11cclxufTtcclxuXHJcbi8qKlxyXG4gKiBHYXVzc2lhblNwbGF0UmVuZGVyZXIgLSBNYWluIHJlbmRlcmluZyBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdhdXNzaWFuU3BsYXRSZW5kZXJlciB7XHJcbiAgICAvKipcclxuICAgICAqIEZhY3RvcnkgbWV0aG9kIHRvIGNyZWF0ZSBhIG5ldyByZW5kZXJlciBpbnN0YW5jZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIERPTSBjb250YWluZXIgZm9yIGNhbnZhc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFzc2V0UGF0aCAtIFVSTCB0byBjaGFyYWN0ZXIgWklQIGZpbGVcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmRvd25sb2FkUHJvZ3Jlc3NdIC0gRG93bmxvYWQgcHJvZ3Jlc3MgY2FsbGJhY2sgKDAtMSlcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmxvYWRQcm9ncmVzc10gLSBMb2FkIHByb2dyZXNzIGNhbGxiYWNrICgwLTEpXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZXRDaGF0U3RhdGVdIC0gQ2hhdCBzdGF0ZSBwcm92aWRlciBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZ2V0RXhwcmVzc2lvbkRhdGFdIC0gRXhwcmVzc2lvbiBkYXRhIHByb3ZpZGVyIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuYmFja2dyb3VuZENvbG9yXSAtIEJhY2tncm91bmQgY29sb3IgKGhleCBzdHJpbmcpXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxHYXVzc2lhblNwbGF0UmVuZGVyZXI+fSBSZW5kZXJlciBpbnN0YW5jZVxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkXHJcbiAgICAgKiBAdGhyb3dzIHtOZXR3b3JrRXJyb3J9IElmIGFzc2V0IGRvd25sb2FkIGZhaWxzXHJcbiAgICAgKiBAdGhyb3dzIHtBc3NldExvYWRFcnJvcn0gSWYgYXNzZXQgbG9hZGluZy9wYXJzaW5nIGZhaWxzXHJcbiAgICAgKiBAdGhyb3dzIHtJbml0aWFsaXphdGlvbkVycm9yfSBJZiByZW5kZXJlciBpbml0aWFsaXphdGlvbiBmYWlsc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlKGNvbnRhaW5lciwgYXNzZXRQYXRoLCBvcHRpb25zID0ge30pIHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICB2YWxpZGF0ZURPTUVsZW1lbnQoY29udGFpbmVyLCAnY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlVXJsKGFzc2V0UGF0aCk7XHJcblxyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSBvcHRpb25hbCBjYWxsYmFja3NcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZG93bmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDYWxsYmFjayhvcHRpb25zLmRvd25sb2FkUHJvZ3Jlc3MsICdvcHRpb25zLmRvd25sb2FkUHJvZ3Jlc3MnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNhbGxiYWNrKG9wdGlvbnMubG9hZFByb2dyZXNzLCAnb3B0aW9ucy5sb2FkUHJvZ3Jlc3MnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2V0Q2hhdFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNhbGxiYWNrKG9wdGlvbnMuZ2V0Q2hhdFN0YXRlLCAnb3B0aW9ucy5nZXRDaGF0U3RhdGUnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2V0RXhwcmVzc2lvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YSwgJ29wdGlvbnMuZ2V0RXhwcmVzc2lvbkRhdGEnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYmFja2dyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUhleENvbG9yKG9wdGlvbnMuYmFja2dyb3VuZENvbG9yLCAnb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3InKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0luaXRpYWxpemluZyBHYXVzc2lhblNwbGF0UmVuZGVyZXInLCB7IGFzc2V0UGF0aCB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlclBhdGggPSBhc3NldFBhdGg7XHJcblxyXG4gICAgICAgICAgICAvLyBQYXJzZSBjaGFyYWN0ZXIgbmFtZSBmcm9tIHBhdGhcclxuICAgICAgICAgICAgbGV0IGNoYXJhY3Rlck5hbWU7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGNoYXJhY3RlclBhdGgsIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLmhyZWYgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aG5hbWUgPSB1cmwucGF0aG5hbWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gcGF0aG5hbWUubWF0Y2goL1xcLyhbXi9dKz8pXFwuemlwLyk7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJOYW1lID0gbWF0Y2hlcz8uWzFdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghY2hhcmFjdGVyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdDaGFyYWN0ZXIgbW9kZWwgbmFtZSBjb3VsZCBub3QgYmUgZXh0cmFjdGVkIGZyb20gcGF0aC4gRXhwZWN0ZWQgZm9ybWF0OiAvcGF0aC9uYW1lLnppcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdhc3NldFBhdGgnXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgSW52YWxpZCBhc3NldCBwYXRoIGZvcm1hdDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Fzc2V0UGF0aCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFNob3cgcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBOUHJvZ3Jlc3MgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBOUHJvZ3Jlc3Muc3RhcnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRG93bmxvYWQgWklQIGZpbGVcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0Rvd25sb2FkaW5nIGFzc2V0IFpJUCcsIHsgcGF0aDogY2hhcmFjdGVyUGF0aCB9KTtcclxuICAgICAgICAgICAgbGV0IGNoYXJhY3RlclppcFJlc3BvbnNlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyWmlwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjaGFyYWN0ZXJQYXRoKTtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhcmFjdGVyWmlwUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGRvd25sb2FkIGFzc2V0OiAke2NoYXJhY3RlclppcFJlc3BvbnNlLnN0YXR1c1RleHR9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyWmlwUmVzcG9uc2Uuc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE5ldHdvcmtFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgTmV0d29yayBlcnJvciBkb3dubG9hZGluZyBhc3NldDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVwb3J0IGRvd25sb2FkIHByb2dyZXNzXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRvd25sb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kb3dubG9hZFByb2dyZXNzKDEuMCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBkb3dubG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5sb2FkUHJvZ3Jlc3MoMC4xKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIGxvYWRQcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBOUHJvZ3Jlc3MgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBOUHJvZ3Jlc3MuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQYXJzZSBhcnJheSBidWZmZXJcclxuICAgICAgICAgICAgbGV0IGFycmF5QnVmZmVyO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlCdWZmZXIgPSBhd2FpdCBjaGFyYWN0ZXJaaXBSZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5ldHdvcmtFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHJlYWQgcmVzcG9uc2UgZGF0YTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBaSVAgd2l0aCBpbXBvcnRlZCBKU1ppcFxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1VucGFja2luZyBaSVAgYXJjaGl2ZScpO1xyXG4gICAgICAgICAgICBsZXQgemlwRGF0YTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHppcERhdGEgPSBhd2FpdCBKU1ppcC5sb2FkQXN5bmMoYXJyYXlCdWZmZXIpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gdW5wYWNrIFpJUCBhcmNoaXZlOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5kIGZvbGRlciBuYW1lIGluIFpJUFxyXG4gICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSAnJztcclxuICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyh6aXBEYXRhLmZpbGVzKS5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUuZGlyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBmaWxlLm5hbWU/LnNsaWNlKDAsIGZpbGUubmFtZT8ubGVuZ3RoIC0gMSk7IC8vIFJlbW92ZSB0cmFpbGluZyAnLydcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpbGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgJ05vIGZvbGRlciBmb3VuZCBpbiBaSVAgYXJjaGl2ZS4gRXhwZWN0ZWQgWklQIHRvIGNvbnRhaW4gYSBmb2xkZXIgd2l0aCBtb2RlbCBmaWxlcy4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlclBhdGhcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnRm91bmQgbW9kZWwgZm9sZGVyIGluIFpJUCcsIHsgZmlsZU5hbWUgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgcmVuZGVyZXIgaW5zdGFuY2VcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyBHYXVzc2lhblNwbGF0UmVuZGVyZXIgaW5zdGFuY2UnKTtcclxuICAgICAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgR2F1c3NpYW5TcGxhdFJlbmRlcmVyKGNvbnRhaW5lciwgemlwRGF0YSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXR1cCBjYW1lcmEgcG9zaXRpb24gKHVzZSBvYmplY3QgcG9vbCBmb3IgdGVtcCB2ZWN0b3JzKVxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmFQb3MgPSB0ZW1wVmVjdG9yM0Euc2V0KFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdG9yQ29uZmlnLmNhbVBvcz8ueCA/PyAwLFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdG9yQ29uZmlnLmNhbVBvcz8ueSA/PyAwLFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdG9yQ29uZmlnLmNhbVBvcz8ueiA/PyAxXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmFSb3RhdGlvbiA9IG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdG9yQ29uZmlnLmNhbVJvdD8ueCA/PyAwLFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdG9yQ29uZmlnLmNhbVJvdD8ueSA/PyAwLFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdG9yQ29uZmlnLmNhbVJvdD8ueiA/PyAwXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NhbWVyYSBzZXR1cCcsIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHg6IGNhbWVyYVBvcy54LCB5OiBjYW1lcmFQb3MueSwgejogY2FtZXJhUG9zLnogfSxcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB7IHg6IGNhbWVyYVJvdGF0aW9uLngsIHk6IGNhbWVyYVJvdGF0aW9uLnksIHo6IGNhbWVyYVJvdGF0aW9uLnogfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJhY2tncm91bmQgY29sb3Igd2l0aCB2YWxpZGF0aW9uXHJcbiAgICAgICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSAweGZmZmZmZjtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyYWN0b3JDb25maWcuYmFja2dyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQoY2hhcmFjdG9yQ29uZmlnLmJhY2tncm91bmRDb2xvciwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBwYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0ludmFsaWQgYmFja2dyb3VuZENvbG9yIGluIGNvbmZpZywgdXNpbmcgZGVmYXVsdCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaGFyYWN0b3JDb25maWcuYmFja2dyb3VuZENvbG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zPy5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVuZGVyZXIuaXNIZXhDb2xvclN0cmljdChvcHRpb25zLmJhY2tncm91bmRDb2xvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gcGFyc2VJbnQob3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IsIDE2KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignSW52YWxpZCBiYWNrZ3JvdW5kQ29sb3Igb3B0aW9uLCB1c2luZyBjb25maWcgdmFsdWUnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIHBhcnNpbmcgYmFja2dyb3VuZENvbG9yLCB1c2luZyBkZWZhdWx0JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0JhY2tncm91bmQgY29sb3Igc2V0JywgeyBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvci50b1N0cmluZygxNikgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTdG9yZSBjYWxsYmFja3NcclxuICAgICAgICAgICAgcmVuZGVyZXIuZ2V0Q2hhdFN0YXRlID0gb3B0aW9ucz8uZ2V0Q2hhdFN0YXRlO1xyXG4gICAgICAgICAgICByZW5kZXJlci5nZXRFeHByZXNzaW9uRGF0YSA9IG9wdGlvbnM/LmdldEV4cHJlc3Npb25EYXRhO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBpcmlzIG9jY2x1c2lvbiBjb25maWd1cmF0aW9uIEJFRk9SRSBjcmVhdGluZyB2aWV3ZXIgKG9wdGlvbmFsKVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NoZWNraW5nIGZvciBpcmlzX29jY2x1c2lvbi5qc29uJyk7XHJcbiAgICAgICAgICAgIGxldCBpcmlzT2NjbHVzaW9uQ29uZmlnID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlyaXNPY2NsdXNpb25Db25maWcgPSBhd2FpdCByZW5kZXJlci5fbG9hZEpzb25Gcm9tWmlwKGZpbGVOYW1lICsgJy9pcmlzX29jY2x1c2lvbi5qc29uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXJpc09jY2x1c2lvbkNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdJcmlzIG9jY2x1c2lvbiBjb25maWd1cmF0aW9uIGxvYWRlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRJcmlzUmFuZ2VzOiBpcmlzT2NjbHVzaW9uQ29uZmlnLnJpZ2h0X2lyaXM/Lmxlbmd0aCA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0SXJpc1JhbmdlczogaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXM/Lmxlbmd0aCA/PyAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuaXJpc09jY2x1c2lvbkNvbmZpZyA9IGlyaXNPY2NsdXNpb25Db25maWc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gaXJpc19vY2NsdXNpb24uanNvbiBmb3VuZCwgaXJpcyBvY2NsdXNpb24gd2lsbCBiZSBkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gTG9nIGJ1dCBkb24ndCBmYWlsIC0gaXJpcyBvY2NsdXNpb24gaXMgb3B0aW9uYWxcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gbG9hZCBpcmlzX29jY2x1c2lvbi5qc29uLCBjb250aW51aW5nIHdpdGhvdXQgaXQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuaXJpc09jY2x1c2lvbkNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBWaWV3ZXIgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyBWaWV3ZXIgaW5zdGFuY2UnKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnZpZXdlciA9IG5ldyBWaWV3ZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RFbGVtZW50OiBjb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVqc0NhbnZhczogcmVuZGVyZXIuX2NhbnZhcyxcclxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFVcDogWzAsIDEsIDBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxDYW1lcmFQb3NpdGlvbjogW2NhbWVyYVBvcy54LCBjYW1lcmFQb3MueSwgY2FtZXJhUG9zLnpdLFxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxDYW1lcmFSb3RhdGlvbjogW2NhbWVyYVJvdGF0aW9uLngsIGNhbWVyYVJvdGF0aW9uLnksIGNhbWVyYVJvdGF0aW9uLnpdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTogMCxcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZVJldmVhbE1vZGU6IFNjZW5lUmV2ZWFsTW9kZS5EZWZhdWx0LCAgLy8gRGVmYXVsdCByZXZlYWwgbW9kZVxyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXI6IDMuMCwgIC8vIDN4IGZhc3RlciBmYWRlLWluXHJcbiAgICAgICAgICAgICAgICAgICAgaXJpc09jY2x1c2lvbkNvbmZpZzogaXJpc09jY2x1c2lvbkNvbmZpZyAgLy8gUGFzcyBpcmlzIGNvbmZpZyB0byB2aWV3ZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBjcmVhdGUgVmlld2VyIGluc3RhbmNlOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBtb2RlbCAobm9uLUZMQU1FIG1vZGUgb25seSlcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0xvYWRpbmcgbW9kZWwnLCB7IGZpbGVOYW1lIH0pO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVuZGVyZXIubG9hZE1vZGVsKGZpbGVOYW1lLCBhbmltYXRpb25Db25maWcsIG1vdGlvbkNvbmZpZyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBsb2FkIG1vZGVsOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgY2FsbGJhY2sgd2l0aCBlcnJvciBpc29sYXRpb25cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubG9hZFByb2dyZXNzKDAuMik7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBsb2FkUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgb2Zmc2V0IFBMWVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0xvYWRpbmcgb2Zmc2V0IFBMWSBmaWxlJyk7XHJcbiAgICAgICAgICAgIGxldCBvZmZzZXRGaWxlVXJsO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0RmlsZVVybCA9IGF3YWl0IHJlbmRlcmVyLnVucGFja0ZpbGVBc0Jsb2IoZmlsZU5hbWUgKyAnL29mZnNldC5wbHknKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGxvYWQgb2Zmc2V0LnBseTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgKyAnL29mZnNldC5wbHknLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9ncmVzcyBjYWxsYmFjayB3aXRoIGVycm9yIGlzb2xhdGlvblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5sb2FkUHJvZ3Jlc3MoMC4zKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIGxvYWRQcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHNwbGF0IHNjZW5lXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQWRkaW5nIHNwbGF0IHNjZW5lJyk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCByZW5kZXJlci52aWV3ZXIuYWRkU3BsYXRTY2VuZShvZmZzZXRGaWxlVXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlZE1lbW9yeUZvcldvcmtlcnM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nVUk6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogU2NlbmVGb3JtYXQuUGx5XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbml0aWFsaXphdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gYWRkIHNwbGF0IHNjZW5lOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSW5pdGlhbCByZW5kZXJcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcigpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBpbml0aWFsIHJlbmRlcicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIERvbid0IHRocm93IC0gcmVuZGVyIGVycm9ycyBhcmUgbm9uLWZhdGFsXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFByb2dyZXNzIGNhbGxiYWNrIHdpdGggZXJyb3IgaXNvbGF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvYWRQcm9ncmVzcygxKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIGxvYWRQcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVyO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBSZS10aHJvdyBjdXN0b20gZXJyb3JzIGFzLWlzXHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBOZXR3b3JrRXJyb3IgfHxcclxuICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgQXNzZXRMb2FkRXJyb3IgfHxcclxuICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgSW5pdGlhbGl6YXRpb25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbml0aWFsaXphdGlvbiBmYWlsZWQnLCB7IGVycm9yQ29kZTogZXJyb3IuY29kZSwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBXcmFwIHVuZXhwZWN0ZWQgZXJyb3JzXHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5leHBlY3RlZCBlcnJvciBkdXJpbmcgaW5pdGlhbGl6YXRpb24nLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBJbml0aWFsaXphdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgYFVuZXhwZWN0ZWQgZXJyb3IgaW5pdGlhbGl6aW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlcjogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBjcmVhdGUoKSBpbnN0ZWFkLiBUaGlzIG1ldGhvZCBpcyBrZXB0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cclxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lciAtIERPTSBjb250YWluZXIgZm9yIGNhbnZhc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFzc2V0UGF0aCAtIFVSTCB0byBjaGFyYWN0ZXIgWklQIGZpbGVcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gLSBDb25maWd1cmF0aW9uIG9wdGlvbnNcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEdhdXNzaWFuU3BsYXRSZW5kZXJlcj59IFJlbmRlcmVyIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBnZXRJbnN0YW5jZShjb250YWluZXIsIGFzc2V0UGF0aCwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oJ2dldEluc3RhbmNlKCkgaXMgZGVwcmVjYXRlZC4gVXNlIGNyZWF0ZSgpIGluc3RlYWQuIEVhY2ggY2FsbCBjcmVhdGVzIGEgbmV3IGluc3RhbmNlLicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZShjb250YWluZXIsIGFzc2V0UGF0aCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciAtIENyZWF0ZXMgYSBuZXcgR2F1c3NpYW5TcGxhdFJlbmRlcmVyIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gX2NvbnRhaW5lciAtIERPTSBjb250YWluZXIgZWxlbWVudCBmb3IgdGhlIHJlbmRlcmVyXHJcbiAgICAgKiBAcGFyYW0ge0pTWmlwfSB6aXBEYXRhIC0gTG9hZGVkIFpJUCBhcmNoaXZlIGNvbnRhaW5pbmcgbW9kZWwgZGF0YVxyXG4gICAgICogQHByaXZhdGUgLSBVc2UgY3JlYXRlKCkgZmFjdG9yeSBtZXRob2QgaW5zdGVhZFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihfY29udGFpbmVyLCB6aXBEYXRhKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdHYXVzc2lhblNwbGF0UmVuZGVyZXIgY29uc3RydWN0b3IgY2FsbGVkJyk7XHJcblxyXG4gICAgICAgIC8vIERpc3Bvc2FsIHRyYWNraW5nXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gQmxvYlVybE1hbmFnZXIgZm9yIHRyYWNraW5nIGJsb2IgVVJMc1xyXG4gICAgICAgIHRoaXMuX2Jsb2JVcmxNYW5hZ2VyID0gbmV3IEJsb2JVcmxNYW5hZ2VyKCk7XHJcblxyXG4gICAgICAgIC8vIFpJUCBmaWxlIGNhY2hlXHJcbiAgICAgICAgdGhpcy56aXBVcmxzID0ge1xyXG4gICAgICAgICAgICB1cmxzOiBuZXcgTWFwKCksXHJcbiAgICAgICAgICAgIHppcDogemlwRGF0YVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFN0YXRlXHJcbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkRhdGEgPSB7fTtcclxuICAgICAgICB0aGlzLmNoYXRTdGF0ZSA9IFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGluc3RhbmNlLXNwZWNpZmljIGNhbnZhc1xyXG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgX2NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBfY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgICAgICAgICAgdGhpcy5fY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIF9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY2FudmFzKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDYW52YXMgc2V0dXAnLCB7IHdpZHRoLCBoZWlnaHQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBbmltYXRpb24gdGltaW5nXHJcbiAgICAgICAgdGhpcy5jbG9jayA9IG5ldyBDbG9jaygpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwLjA7XHJcblxyXG4gICAgICAgIC8vIFRoZXNlIHdpbGwgYmUgc2V0IGR1cmluZyBsb2FkaW5nXHJcbiAgICAgICAgdGhpcy52aWV3ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWl4ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYW5pbU1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXJpc09jY2x1c2lvbkNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb3Rpb25jZmcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hhdFN0YXRlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmdldEV4cHJlc3Npb25EYXRhID0gbnVsbDtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdHYXVzc2lhblNwbGF0UmVuZGVyZXIgaW5zdGFuY2UgY3JlYXRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXNzZXJ0IHJlbmRlcmVyIGlzIG5vdCBkaXNwb3NlZFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0aHJvd3Mge1Jlc291cmNlRGlzcG9zZWRFcnJvcn0gSWYgcmVuZGVyZXIgaGFzIGJlZW4gZGlzcG9zZWRcclxuICAgICAqL1xyXG4gICAgX2Fzc2VydE5vdERpc3Bvc2VkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVzb3VyY2VEaXNwb3NlZEVycm9yKCdHYXVzc2lhblNwbGF0UmVuZGVyZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIHJlbmRlcmVyIGFuZCBmcmVlIGFsbCByZXNvdXJjZXNcclxuICAgICAqXHJcbiAgICAgKiBQcm9wZXJseSBjbGVhbnMgdXA6XHJcbiAgICAgKiAtIE1vZGVsIHJlc291cmNlcyAobWVzaCwgYW5pbWF0aW9ucywgdGV4dHVyZXMpXHJcbiAgICAgKiAtIEJsb2IgVVJMcyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xyXG4gICAgICogLSBWaWV3ZXIgaW5zdGFuY2VcclxuICAgICAqIC0gQ2FudmFzIHZpc2liaWxpdHlcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0dhdXNzaWFuU3BsYXRSZW5kZXJlci5kaXNwb3NlKCkgY2FsbGVkIG9uIGFscmVhZHkgZGlzcG9zZWQgaW5zdGFuY2UnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0Rpc3Bvc2luZyBHYXVzc2lhblNwbGF0UmVuZGVyZXInKTtcclxuXHJcbiAgICAgICAgLy8gSGlkZSBhbmQgcmVtb3ZlIGNhbnZhc1xyXG4gICAgICAgIGlmICh0aGlzLl9jYW52YXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FudmFzLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbnZhcy5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW52YXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9jYW52YXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIG1vZGVsIHJlc291cmNlc1xyXG4gICAgICAgIHRoaXMuZGlzcG9zZU1vZGVsKCk7XHJcblxyXG4gICAgICAgIC8vIFJldm9rZSBhbGwgYmxvYiBVUkxzIHVzaW5nIEJsb2JVcmxNYW5hZ2VyXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5fYmxvYlVybE1hbmFnZXI/LmRpc3Bvc2UoKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGRpc3Bvc2luZyBCbG9iVXJsTWFuYWdlcicsIGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIExlZ2FjeSBibG9iIFVSTCBjbGVhbnVwIChmb3IgVVJMcyBjcmVhdGVkIGJlZm9yZSBCbG9iVXJsTWFuYWdlcilcclxuICAgICAgICBpZiAodGhpcy56aXBVcmxzPy51cmxzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuemlwVXJscy51cmxzLmZvckVhY2goKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgcmV2b2tpbmcgYmxvYiBVUkwnLCB7IHVybDogdmFsdWUsIGVycm9yIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy56aXBVcmxzLnVybHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE51bGxpZnkgcmVmZXJlbmNlcyB0byBhaWQgR0NcclxuICAgICAgICB0aGlzLnZpZXdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5taXhlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb3Rpb25jZmcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hhdFN0YXRlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmdldEV4cHJlc3Npb25EYXRhID0gbnVsbDtcclxuICAgICAgICB0aGlzLnppcFVybHMgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBDbGVhciBzaW5nbGV0b24gaW5zdGFuY2VcclxuICAgICAgICBHYXVzc2lhblNwbGF0UmVuZGVyZXIuaW5zdGFuY2UgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnR2F1c3NpYW5TcGxhdFJlbmRlcmVyIGRpc3Bvc2VkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcG9zZSBtb2RlbC1zcGVjaWZpYyByZXNvdXJjZXNcclxuICAgICAqXHJcbiAgICAgKiBDbGVhbnMgdXA6XHJcbiAgICAgKiAtIEFuaW1hdGlvbiBtaXhlciBhbmQgY2FjaGVkIGFjdGlvbnNcclxuICAgICAqIC0gQW5pbWF0aW9uIG1hbmFnZXJcclxuICAgICAqIC0gVmlld2VyIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2VNb2RlbCgpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc3Bvc2luZyBtb2RlbCByZXNvdXJjZXMnKTtcclxuXHJcbiAgICAgICAgLy8gRGlzcG9zZSBhbmltYXRpb24gbWl4ZXJcclxuICAgICAgICBpZiAodGhpcy5taXhlcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5taXhlci5zdG9wQWxsQWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3ZXI/LmF2YXRhck1lc2gpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1peGVyLnVuY2FjaGVSb290KHRoaXMudmlld2VyLmF2YXRhck1lc2gpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkaXNwb3NpbmcgYW5pbWF0aW9uIG1peGVyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWl4ZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGlzcG9zZSBhbmltYXRpb24gbWFuYWdlclxyXG4gICAgICAgIGlmICh0aGlzLmFuaW1NYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1NYW5hZ2VyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZGlzcG9zaW5nIGFuaW1hdGlvbiBtYW5hZ2VyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbU1hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGlzcG9zZSB2aWV3ZXJcclxuICAgICAgICBpZiAodGhpcy52aWV3ZXIpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZGlzcG9zaW5nIHZpZXdlcicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnZpZXdlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ01vZGVsIHJlc291cmNlcyBkaXNwb3NlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBUaHJlZS5qcyBjYW1lcmFcclxuICAgICAqIEByZXR1cm5zIHtUSFJFRS5DYW1lcmF9XHJcbiAgICAgKi9cclxuICAgIGdldENhbWVyYSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aWV3ZXI/LmNhbWVyYTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBibGVuZHNoYXBlIHdlaWdodHMgZnJvbSBhY3Rpb24gZGF0YVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFjdGlvbkRhdGEgLSBCbGVuZHNoYXBlIHdlaWdodHNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFByb2Nlc3NlZCBpbmZsdWVuY2UgdmFsdWVzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUJTKGFjdGlvbkRhdGEpIHtcclxuICAgICAgICAvLyBEZWZhdWx0IGluZmx1ZW5jZSB2YWx1ZXMgLSBhbGwgNTIgQVJLaXQgYmxlbmRzaGFwZXNcclxuICAgICAgICBsZXQgaW5mbHVlbmNlID0ge1xyXG4gICAgICAgICAgICBicm93RG93bkxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgYnJvd0Rvd25SaWdodDogMC4wLFxyXG4gICAgICAgICAgICBicm93SW5uZXJVcDogMC4wLFxyXG4gICAgICAgICAgICBicm93T3V0ZXJVcExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgYnJvd091dGVyVXBSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aENoZWVrUHVmZjogMC4wLFxyXG4gICAgICAgICAgICBjaGVla1NxdWludExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgY2hlZWtTcXVpbnRSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBleWVCbGlua0xlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllQmxpbmtSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBleWVMb29rRG93bkxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va0Rvd25SaWdodDogMC4wLFxyXG4gICAgICAgICAgICBleWVMb29rSW5MZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tJblJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tPdXRMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tPdXRSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBleWVMb29rVXBMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tVcFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZVNxdWludExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllU3F1aW50UmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgZXllV2lkZUxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllV2lkZVJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGphd0ZvcndhcmQ6IDAuMCxcclxuICAgICAgICAgICAgamF3TGVmdDogMC4wLFxyXG4gICAgICAgICAgICBqYXdPcGVuOiAwLjAsXHJcbiAgICAgICAgICAgIGphd1JpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoQ2xvc2U6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhEaW1wbGVMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoRGltcGxlUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhGcm93bkxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhGcm93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoRnVubmVsOiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aExvd2VyRG93bkxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhMb3dlckRvd25SaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFByZXNzTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFByZXNzUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhQdWNrZXI6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFJvbGxMb3dlcjogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFJvbGxVcHBlcjogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFNocnVnTG93ZXI6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTaHJ1Z1VwcGVyOiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU21pbGVMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU21pbGVSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFN0cmV0Y2hMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU3RyZXRjaFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoVXBwZXJVcExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhVcHBlclVwUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbm9zZVNuZWVyTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBub3NlU25lZXJSaWdodDogMC4wLFxyXG4gICAgICAgICAgICB0b25ndWVPdXQ6IDAuMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChhY3Rpb25EYXRhICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaW5mbHVlbmNlID0gYWN0aW9uRGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpbmZsdWVuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWluIHJlbmRlciBsb29wXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBpZiAodGhpcy52aWV3ZXIgJiYgdGhpcy52aWV3ZXIuc2VsZkRyaXZlbk1vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIucmVxdWVzdEZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5yZW5kZXIoKSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBmcmFtZUluZm9JbnRlcm5hbCA9IDEuMCAvIDMwLjA7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUHJldmVudCBkaXZpc2lvbiBieSB6ZXJvIGlmIHRvdGFsRnJhbWVzIGlzIDAgb3Igbm90IHNldFxyXG4gICAgICAgICAgICBjb25zdCB0b3RhbEZyYW1lcyA9IHRoaXMudmlld2VyLnRvdGFsRnJhbWVzIHx8IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbGNEZWx0YSA9IChjdXJyZW50VGltZSAtIHRoaXMuc3RhcnRUaW1lKSAlICh0b3RhbEZyYW1lcyAqIGZyYW1lSW5mb0ludGVybmFsKTtcclxuICAgICAgICAgICAgY29uc3QgZnJhbWVJbmRleCA9IE1hdGguZmxvb3IoY2FsY0RlbHRhIC8gZnJhbWVJbmZvSW50ZXJuYWwpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5mcmFtZSA9IGZyYW1lSW5kZXg7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2hhdCBzdGF0ZVxyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRDaGF0U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhdFN0YXRlID0gdGhpcy5nZXRDaGF0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIC8vIERFQlVHOiBMb2cgc3RhdGUgdHJhbnNpdGlvbnNcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fbGFzdExvZ2dlZFN0YXRlIHx8IHRoaXMuX2xhc3RMb2dnZWRTdGF0ZSAhPT0gdGhpcy5jaGF0U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NoYXQgc3RhdGUgY2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGU6IHRoaXMuY2hhdFN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNBbmltTWFuYWdlcjogISF0aGlzLmFuaW1NYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGFzdExvZ2dlZFN0YXRlID0gdGhpcy5jaGF0U3RhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1NYW5hZ2VyPy51cGRhdGUodGhpcy5jaGF0U3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXhwcmVzc2lvbiBkYXRhXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEV4cHJlc3Npb25EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25EYXRhID0gdGhpcy51cGRhdGVCUyh0aGlzLmdldEV4cHJlc3Npb25EYXRhKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBbmltYXRpb24gbWl4ZXIgdXBkYXRlXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5taXhlciB8fCAhdGhpcy5hbmltTWFuYWdlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl93YXJuZWRPbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01peGVyIG9yIGFuaW1NYW5hZ2VyIG5vdCBpbml0aWFsaXplZCwgc2tpcHBpbmcgYW5pbWF0aW9uIHVwZGF0ZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWl4ZXI6ICEhdGhpcy5taXhlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQW5pbU1hbmFnZXI6ICEhdGhpcy5hbmltTWFuYWdlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3dhcm5lZE9uY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gU3RpbGwgdXBkYXRlIGV4cHJlc3Npb25zIGV2ZW4gd2l0aG91dCBtaXhlci9hbmltTWFuYWdlclxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFeHByZXNzaW9uKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaXhlclVwZGF0ZURlbHRhID0gdGhpcy5jbG9jay5nZXREZWx0YSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5taXhlci51cGRhdGUobWl4ZXJVcGRhdGVEZWx0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgbW90aW9uIGNvbmZpZyBvZmZzZXRzL3NjYWxlc1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubW90aW9uY2ZnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb3JwaFRhcmdldCBpbiB0aGlzLmV4cHJlc3Npb25EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMubW90aW9uY2ZnLm9mZnNldD8uW21vcnBoVGFyZ2V0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLm1vdGlvbmNmZy5zY2FsZT8uW21vcnBoVGFyZ2V0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldCAhPT0gdW5kZWZpbmVkICYmIHNjYWxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkRhdGFbbW9ycGhUYXJnZXRdID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25EYXRhW21vcnBoVGFyZ2V0XSAqIHNjYWxlICsgb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RXhwcmVzc2lvbigpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgdmlld2VyXHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyLnVwZGF0ZSh0aGlzLnZpZXdlci5yZW5kZXJlciwgdGhpcy52aWV3ZXIuY2FtZXJhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbmRlciBpZiBuZWVkZWRcclxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gdGhpcy52aWV3ZXIuc2hvdWxkUmVuZGVyKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW5kZXJMb2dDb3VudCA8PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ3Nob3VsZFJlbmRlciBjaGVjaycsIHsgc2hvdWxkUmVuZGVyIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRSZW5kZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMrKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmNvbnNlY3V0aXZlUmVuZGVyRnJhbWVzID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIucmVuZGVyTmV4dEZyYW1lID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyLnNlbGZEcml2ZW5Nb2RlUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc3RhcnQgdmlld2VyIHVubGVzcyBpdCBpcyBpbiBzZWxmIGRyaXZlbiBtb2RlLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFZhbGlkYXRlIGhleCBjb2xvciBzdHJpbmdcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIENvbG9yIHN0cmluZyB0byB2YWxpZGF0ZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGlzSGV4Q29sb3JTdHJpY3QodmFsdWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGhleENvbG9yUmVnZXggPSAvXigjfDB4KVswLTlBLUZhLWZdezZ9JC9pO1xyXG4gICAgICAgIHJldHVybiBoZXhDb2xvclJlZ2V4LnRlc3QodmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbHkgZXhwcmVzc2lvbiBkYXRhIHRvIG1lc2hcclxuICAgICAqL1xyXG4gICAgc2V0RXhwcmVzc2lvbigpIHtcclxuICAgICAgICAvLyBVcGRhdGUgc3BsYXQgbWVzaCBibGVuZHNoYXBlc1xyXG4gICAgICAgIGlmICh0aGlzLnZpZXdlcj8uc3BsYXRNZXNoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyLnNwbGF0TWVzaC5ic1dlaWdodCA9IHRoaXMuZXhwcmVzc2lvbkRhdGE7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgZXllIGJsaW5rIHVuaWZvcm1zIGZvciBzbW9vdGggaXJpcyBmYWRlXHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsID0gdGhpcy52aWV3ZXIuc3BsYXRNZXNoLm1hdGVyaWFsO1xyXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWw/LnVuaWZvcm1zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleWVCbGlua0xlZnQgPSB0aGlzLmV4cHJlc3Npb25EYXRhLmV5ZUJsaW5rTGVmdCB8fCAwLjA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleWVCbGlua1JpZ2h0ID0gdGhpcy5leHByZXNzaW9uRGF0YS5leWVCbGlua1JpZ2h0IHx8IDAuMDtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC51bmlmb3Jtcy5leWVCbGlua0xlZnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC51bmlmb3Jtcy5leWVCbGlua0xlZnQudmFsdWUgPSBleWVCbGlua0xlZnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwudW5pZm9ybXMuZXllQmxpbmtSaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmV5ZUJsaW5rUmlnaHQudmFsdWUgPSBleWVCbGlua1JpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgbW9ycGggdGFyZ2V0cyBvbiBhdmF0YXIgbW9kZWxcclxuICAgICAgICBpZiAodGhpcy5tb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnRyYXZlcnNlKChvYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChvYmplY3QuaXNNZXNoIHx8IG9iamVjdC5pc1NraW5uZWRNZXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9ycGhBdHRyaWJ1dGVzID0gb2JqZWN0Lmdlb21ldHJ5Py5tb3JwaEF0dHJpYnV0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzTW9ycGhUYXJnZXRzID0gbW9ycGhBdHRyaWJ1dGVzICYmIE9iamVjdC5rZXlzKG1vcnBoQXR0cmlidXRlcykubGVuZ3RoID4gMDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzTW9ycGhUYXJnZXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vcnBoVGFyZ2V0RGljdGlvbmFyeSA9IG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9ycGhUYXJnZXQgaW4gbW9ycGhUYXJnZXREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBtb3JwaFRhcmdldERpY3Rpb25hcnlbbW9ycGhUYXJnZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZXhwcmVzc2lvbkRhdGFbbW9ycGhUYXJnZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdGFyZ2V0XSA9IE1hdGgubWF4KDAuMCwgTWF0aC5taW4oMS4wLCBkYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgbW9kZWwgd2l0aCBhbmltYXRpb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoTmFtZSAtIFBhdGggd2l0aGluIFpJUFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFuaW1hdGlvbkNvbmZpZyAtIEFuaW1hdGlvbiBjb25maWd1cmF0aW9uXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gbW90aW9uQ29uZmlnIC0gTW90aW9uIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbG9hZE1vZGVsKHBhdGhOYW1lLCBhbmltYXRpb25Db25maWcsIG1vdGlvbkNvbmZpZykge1xyXG4gICAgICAgIGNvbnN0IFtza2luTW9kZWwsIGFuaWNsaXAsIGluZGV4ZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICB0aGlzLnVucGFja0FuZExvYWRHbGIocGF0aE5hbWUgKyAnL3NraW4uZ2xiJyksXHJcbiAgICAgICAgICAgIHRoaXMudW5wYWNrQW5kTG9hZEdsYihwYXRoTmFtZSArICcvYW5pbWF0aW9uLmdsYicpLFxyXG4gICAgICAgICAgICB0aGlzLnVucGFja0FuZExvYWRKc29uKHBhdGhOYW1lICsgJy92ZXJ0ZXhfb3JkZXIuanNvbicpXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy52aWV3ZXIpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZW5kZXIgdmlld2VyIGlzIG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNraW5Nb2RlbFNraW5uZWRNZXNoO1xyXG4gICAgICAgIGxldCBib25lUm9vdDtcclxuXHJcbiAgICAgICAgc2tpbk1vZGVsLnRyYXZlcnNlKChvYmplY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9iamVjdC5pc1NraW5uZWRNZXNoKSB7XHJcbiAgICAgICAgICAgICAgICBza2luTW9kZWxTa2lubmVkTWVzaCA9IG9iamVjdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQm9uZSAmJiBvYmplY3QubmFtZSA9PT0gJ2hpcCcpIHtcclxuICAgICAgICAgICAgICAgIGJvbmVSb290ID0gb2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMudmlld2VyLnNvcnRlZEluZGV4ZXMgPSBpbmRleGVzO1xyXG5cclxuICAgICAgICBpZiAoc2tpbk1vZGVsU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIuZ2F1c3NpYW5TcGxhdENvdW50ID0gc2tpbk1vZGVsU2tpbm5lZE1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmlld2VyLmF2YXRhck1lc2ggPSBza2luTW9kZWw7XHJcbiAgICAgICAgdGhpcy52aWV3ZXIuc2tpbk1vZGVsID0gc2tpbk1vZGVsU2tpbm5lZE1lc2g7XHJcbiAgICAgICAgdGhpcy52aWV3ZXIuYm9uZVJvb3QgPSBib25lUm9vdDtcclxuXHJcbiAgICAgICAgLy8gU2V0dXAgYW5pbWF0aW9uXHJcbiAgICAgICAgdGhpcy5taXhlciA9IG5ldyBBbmltYXRpb25NaXhlcihza2luTW9kZWwpO1xyXG4gICAgICAgIHRoaXMuYW5pbU1hbmFnZXIgPSBuZXcgQW5pbWF0aW9uTWFuYWdlcih0aGlzLm1peGVyLCBhbmljbGlwLCBhbmltYXRpb25Db25maWcpO1xyXG4gICAgICAgIHRoaXMubW90aW9uY2ZnID0gbW90aW9uQ29uZmlnO1xyXG5cclxuICAgICAgICAvLyBTZXQgdG90YWxGcmFtZXMgZnJvbSBhbmltYXRpb24gY2xpcHMgb3IgZGVmYXVsdCB0byAxXHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYW5pY2xpcCkgJiYgYW5pY2xpcC5sZW5ndGggPiAwICYmIGFuaWNsaXBbMF0uZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgPSBNYXRoLmZsb29yKGFuaWNsaXBbMF0uZHVyYXRpb24gKiAzMCk7IC8vIDMwIGZwc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyLnRvdGFsRnJhbWVzID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdUb3RhbCBmcmFtZXMgY2FsY3VsYXRlZCcsIHsgdG90YWxGcmFtZXM6IHRoaXMudmlld2VyLnRvdGFsRnJhbWVzIH0pO1xyXG5cclxuICAgICAgICBpZiAoc2tpbk1vZGVsU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIudXBkYXRlTW9ycGhUYXJnZXQoc2tpbk1vZGVsU2tpbm5lZE1lc2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52aWV3ZXIudGhyZWVTY2VuZS5hZGQoc2tpbk1vZGVsKTtcclxuICAgICAgICBza2luTW9kZWwudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoc2tpbk1vZGVsU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgc2tpbk1vZGVsU2tpbm5lZE1lc2guc2tlbGV0b24uY29tcHV0ZUJvbmVUZXh0dXJlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5wYWNrIGZpbGUgZnJvbSBaSVAgYW5kIGNyZWF0ZSBhIGJsb2IgVVJMXHJcbiAgICAgKlxyXG4gICAgICogVXNlcyBCbG9iVXJsTWFuYWdlciB0byB0cmFjayBibG9iIFVSTHMgZm9yIGF1dG9tYXRpYyBjbGVhbnVwLlxyXG4gICAgICogQ2FjaGVzIFVSTHMgZm9yIHJlcGVhdGVkIGFjY2VzcyB0byB0aGUgc2FtZSBmaWxlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gUGF0aCB0byBmaWxlIHdpdGhpbiBaSVAgYXJjaGl2ZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQmxvYiBVUkwgdG8gdGhlIGZpbGVcclxuICAgICAqIEB0aHJvd3Mge0Fzc2V0TG9hZEVycm9yfSBJZiBmaWxlIGNhbm5vdCBiZSB1bnBhY2tlZFxyXG4gICAgICovXHJcbiAgICBhc3luYyB1bnBhY2tGaWxlQXNCbG9iKHBhdGgpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gY2FjaGVkIFVSTCBpZiBhdmFpbGFibGVcclxuICAgICAgICBpZiAodGhpcy56aXBVcmxzLnVybHMuaGFzKHBhdGgpKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUmV0dXJuaW5nIGNhY2hlZCBibG9iIFVSTCcsIHsgcGF0aCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuemlwVXJscy51cmxzLmdldChwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnVW5wYWNraW5nIGZpbGUgZnJvbSBaSVAnLCB7IHBhdGggfSk7XHJcblxyXG4gICAgICAgIC8vIEV4dHJhY3QgZmlsZSBmcm9tIFpJUFxyXG4gICAgICAgIGNvbnN0IGZpbGVFbnRyeSA9IHRoaXMuemlwVXJscy56aXA/LmZpbGUocGF0aCk7XHJcbiAgICAgICAgaWYgKCFmaWxlRW50cnkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZpbGUgbm90IGZvdW5kIGluIFpJUCBhcmNoaXZlOiAke3BhdGh9YCxcclxuICAgICAgICAgICAgICAgIHBhdGhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtb2RlbEZpbGU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbW9kZWxGaWxlID0gYXdhaXQgZmlsZUVudHJ5LmFzeW5jKCdibG9iJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBleHRyYWN0IGZpbGUgZnJvbSBaSVA6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIW1vZGVsRmlsZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmlsZSBleHRyYWN0ZWQgYnV0IGJsb2IgaXMgZW1wdHk6ICR7cGF0aH1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGJsb2IgVVJMIHVzaW5nIEJsb2JVcmxNYW5hZ2VyIGZvciB0cmFja2luZ1xyXG4gICAgICAgIGNvbnN0IG1pbWVUeXBlID0gdGhpcy5fZ2V0TWltZVR5cGUocGF0aCk7XHJcbiAgICAgICAgY29uc3QgbW9kZWxVcmwgPSB0aGlzLl9ibG9iVXJsTWFuYWdlci5jcmVhdGVCbG9iVXJsKFxyXG4gICAgICAgICAgICBtb2RlbEZpbGUsXHJcbiAgICAgICAgICAgIG1pbWVUeXBlLFxyXG4gICAgICAgICAgICBgemlwOiR7cGF0aH1gXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQ2FjaGUgZm9yIGZ1dHVyZSBhY2Nlc3NcclxuICAgICAgICB0aGlzLnppcFVybHMudXJscy5zZXQocGF0aCwgbW9kZWxVcmwpO1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQmxvYiBVUkwgY3JlYXRlZCBhbmQgY2FjaGVkJywgeyBwYXRoLCB1cmw6IG1vZGVsVXJsLnN1YnN0cmluZygwLCA1MCkgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBtb2RlbFVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgSlNPTiBmaWxlIGZyb20gWklQIGFyY2hpdmVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFBhdGggdG8gSlNPTiBmaWxlIHdpdGhpbiBaSVAgYXJjaGl2ZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0fG51bGw+fSBQYXJzZWQgSlNPTiBvYmplY3QsIG9yIG51bGwgaWYgZmlsZSBkb2Vzbid0IGV4aXN0XHJcbiAgICAgKiBAdGhyb3dzIHtQYXJzZUVycm9yfSBJZiBKU09OIHBhcnNpbmcgZmFpbHNcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9sb2FkSnNvbkZyb21aaXAocGF0aCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQXR0ZW1wdGluZyB0byBsb2FkIEpTT04gZnJvbSBaSVAnLCB7IHBhdGggfSk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIGZpbGUgZXhpc3RzIGluIFpJUFxyXG4gICAgICAgIGNvbnN0IGZpbGVFbnRyeSA9IHRoaXMuemlwVXJscy56aXA/LmZpbGUocGF0aCk7XHJcbiAgICAgICAgaWYgKCFmaWxlRW50cnkpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdKU09OIGZpbGUgbm90IGZvdW5kIGluIFpJUCwgcmV0dXJuaW5nIG51bGwnLCB7IHBhdGggfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCBmaWxlIGFzIHRleHRcclxuICAgICAgICBsZXQganNvblRleHQ7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAganNvblRleHQgPSBhd2FpdCBmaWxlRW50cnkuYXN5bmMoJ3RleHQnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUGFyc2VFcnJvcihcclxuICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gZXh0cmFjdCBKU09OIGZpbGUgZnJvbSBaSVA6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQYXJzZSBKU09OXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdKU09OIGZpbGUgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHsgcGF0aCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb25EYXRhO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwYXJzZSBKU09OIGZpbGU6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aCxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5wYWNrIEdMQiBmaWxlIGZyb20gWklQIGFuZCBsb2FkIGl0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHRvIEdMQiBmaWxlIHdpdGhpbiBaSVAgYXJjaGl2ZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VEhSRUUuR3JvdXB8VEhSRUUuQW5pbWF0aW9uQ2xpcFtdPn0gTG9hZGVkIEdMVEYgbW9kZWxcclxuICAgICAqIEB0aHJvd3Mge0Fzc2V0TG9hZEVycm9yfSBJZiBmaWxlIGNhbm5vdCBiZSB1bnBhY2tlZCBvciBsb2FkZWRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdW5wYWNrQW5kTG9hZEdsYihwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIGNhY2hlZCBVUkwgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKHRoaXMuemlwVXJscy51cmxzLmhhcyhwYXRoKSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1VzaW5nIGNhY2hlZCBHTEIgVVJMJywgeyBwYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Mb2FkR0xURih0aGlzLnppcFVybHMudXJscy5nZXQocGF0aCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdVbnBhY2tpbmcgR0xCIGZyb20gWklQJywgeyBwYXRoIH0pO1xyXG5cclxuICAgICAgICAvLyBFeHRyYWN0IGZpbGUgZnJvbSBaSVAgYXMgQXJyYXlCdWZmZXJcclxuICAgICAgICBjb25zdCBmaWxlRW50cnkgPSB0aGlzLnppcFVybHMuemlwPy5maWxlKHBhdGgpO1xyXG4gICAgICAgIGlmICghZmlsZUVudHJ5KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgIGBHTEIgZmlsZSBub3QgZm91bmQgaW4gWklQIGFyY2hpdmU6ICR7cGF0aH1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1vZGVsRmlsZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtb2RlbEZpbGUgPSBhd2FpdCBmaWxlRW50cnkuYXN5bmMoJ2FycmF5YnVmZmVyJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBleHRyYWN0IEdMQiBmcm9tIFpJUDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbW9kZWxGaWxlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgIGBHTEIgZXh0cmFjdGVkIGJ1dCBBcnJheUJ1ZmZlciBpcyBlbXB0eTogJHtwYXRofWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYmxvYiBVUkwgdXNpbmcgQmxvYlVybE1hbmFnZXJcclxuICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW21vZGVsRmlsZV0sIHsgdHlwZTogJ21vZGVsL2dsdGYtYmluYXJ5JyB9KTtcclxuICAgICAgICBjb25zdCBtb2RlbFVybCA9IHRoaXMuX2Jsb2JVcmxNYW5hZ2VyLmNyZWF0ZUJsb2JVcmwoXHJcbiAgICAgICAgICAgIGJsb2IsXHJcbiAgICAgICAgICAgICdtb2RlbC9nbHRmLWJpbmFyeScsXHJcbiAgICAgICAgICAgIGB6aXA6JHtwYXRofWBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSBmb3IgZnV0dXJlIGFjY2Vzc1xyXG4gICAgICAgIHRoaXMuemlwVXJscy51cmxzLnNldChwYXRoLCBtb2RlbFVybCk7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdHTEIgYmxvYiBVUkwgY3JlYXRlZCBhbmQgY2FjaGVkJywgeyBwYXRoIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5Mb2FkR0xURihtb2RlbFVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgTUlNRSB0eXBlIGZyb20gZmlsZSBleHRlbnNpb25cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIEZpbGUgcGF0aFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gTUlNRSB0eXBlXHJcbiAgICAgKi9cclxuICAgIF9nZXRNaW1lVHlwZShwYXRoKSB7XHJcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gcGF0aC5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGNvbnN0IG1pbWVUeXBlcyA9IHtcclxuICAgICAgICAgICAgJ3BseSc6ICdtb2RlbC9wbHknLFxyXG4gICAgICAgICAgICAnZ2xiJzogJ21vZGVsL2dsdGYtYmluYXJ5JyxcclxuICAgICAgICAgICAgJ2dsdGYnOiAnbW9kZWwvZ2x0Zitqc29uJyxcclxuICAgICAgICAgICAgJ2pzb24nOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICdiaW4nOiAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyxcclxuICAgICAgICAgICAgJ3BuZyc6ICdpbWFnZS9wbmcnLFxyXG4gICAgICAgICAgICAnanBnJzogJ2ltYWdlL2pwZWcnLFxyXG4gICAgICAgICAgICAnanBlZyc6ICdpbWFnZS9qcGVnJ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG1pbWVUeXBlc1tleHRlbnNpb25dIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5wYWNrIGFuZCBwYXJzZSBKU09OIGZpbGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gUGF0aCB3aXRoaW4gWklQXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxvYmplY3Q+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyB1bnBhY2tBbmRMb2FkSnNvbihwYXRoKSB7XHJcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuemlwVXJscy56aXA/LmZpbGUocGF0aCk7XHJcbiAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZSBub3QgZm91bmQgaW4gWklQOiAke3BhdGh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGpzb25GaWxlID0gYXdhaXQgZmlsZS5hc3luYygnc3RyaW5nJyk7XHJcbiAgICAgICAgaWYgKCFqc29uRmlsZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZWFkIGZpbGUgZnJvbSBaSVA6ICR7cGF0aH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbkZpbGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBHTFRGIGZpbGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gR0xURi9HTEIgZmlsZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8VEhSRUUuR3JvdXB8VEhSRUUuQW5pbWF0aW9uQ2xpcFtdPn1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgTG9hZEdMVEYodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbG9hZGVyID0gbmV3IEdMVEZMb2FkZXIoKTtcclxuICAgICAgICAgICAgbG9hZGVyLmxvYWQoXHJcbiAgICAgICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgICAgICAoZ2x0ZikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnbHRmLmFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdsdGYuYW5pbWF0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShnbHRmLnNjZW5lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR2F1c3NpYW5TcGxhdFJlbmRlcmVyO1xyXG4iLCIvKipcclxuICogRmxhbWVDb25zdGFudHNcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBnYXVzc2lhbi1zcGxhdC1yZW5kZXJlci1mb3ItbGFtXHJcbiAqIEZMQU1FLXNwZWNpZmljIGNvbnN0YW50cyBmb3IgcGFyYW1ldHJpYyBoZWFkIG1vZGVsLlxyXG4gKiBcclxuICogTm90ZTogR2VuZXJhbCBlbmdpbmUgY29uc3RhbnRzIChNYXhTY2VuZXMsIGV0Yy4pIGFyZSBpbiBlbnVtcy9FbmdpbmVDb25zdGFudHMuanNcclxuICovXHJcblxyXG5leHBvcnQgY29uc3QgQ29uc3RhbnRzID0ge1xyXG4gICAgLy8gRkxBTUUgbW9kZWwgY29uc3RhbnRzXHJcbiAgICBGbGFtZUJvbmVzQ291bnQ6IDUsICAvLyByb290LCBuZWNrLCBqYXcsIGxlZnRFeWUsIHJpZ2h0RXllXHJcbiAgICBEZWZhdWx0QmxlbmRzaGFwZUNvdW50OiA1MiwgIC8vIEFSS2l0IGJsZW5kc2hhcGVzXHJcbiAgICBcclxuICAgIC8vIFRleHR1cmUgc2l6ZXMgZm9yIEZMQU1FIGRhdGFcclxuICAgIEZsYW1lTW9kZWxUZXh0dXJlU2l6ZTogeyB3aWR0aDogNDA5NiwgaGVpZ2h0OiAyMDQ4IH0sXHJcbiAgICBCb25lVGV4dHVyZVNpemU6IHsgd2lkdGg6IDQsIGhlaWdodDogMzIgfSxcclxuICAgIEJvbmVXZWlnaHRUZXh0dXJlU2l6ZTogeyB3aWR0aDogNTEyLCBoZWlnaHQ6IDUxMiB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb25zdGFudHM7XHJcbiIsIi8qKlxyXG4gKiBGTEFNRSBVdGlsaXR5IEZ1bmN0aW9uc1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogQ29udGFpbnMgZW5jb2RpbmcgZnVuY3Rpb25zIGFuZCBoZWxwZXJzIGZvciBHUFUgdGV4dHVyZSBkYXRhLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBFbmNvZGUgZmxvYXQgYXMgdWludDMyIGZvciBHUFUgdGV4dHVyZSBzdG9yYWdlXHJcbiAqIFVzZXMgRmxvYXQzMkFycmF5L0ludDMyQXJyYXkgdmlldyB0cmljayB0byByZWludGVycHJldCBmbG9hdCBiaXRzIGFzIGludGVnZXJcclxuICovXHJcbmV4cG9ydCBjb25zdCB1aW50RW5jb2RlZEZsb2F0ID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgZmxvYXRWaWV3ID0gbmV3IEZsb2F0MzJBcnJheSgxKTtcclxuICAgIGNvbnN0IGludDMyVmlldyA9IG5ldyBJbnQzMkFycmF5KGZsb2F0Vmlldy5idWZmZXIpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgZmxvYXRWaWV3WzBdID0gZjtcclxuICAgICAgICByZXR1cm4gaW50MzJWaWV3WzBdO1xyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0IFJHQkEgdmFsdWVzIHRvIGEgc2luZ2xlIGludGVnZXJcclxuICovXHJcbmV4cG9ydCBjb25zdCByZ2JhVG9JbnRlZ2VyID0gZnVuY3Rpb24ociwgZywgYiwgYSkge1xyXG4gICAgcmV0dXJuIHIgKyAoZyA8PCA4KSArIChiIDw8IDE2KSArIChhIDw8IDI0KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0IFJHQkEgYXJyYXkgYXQgb2Zmc2V0IHRvIGEgc2luZ2xlIGludGVnZXJcclxuICovXHJcbmV4cG9ydCBjb25zdCByZ2JhQXJyYXlUb0ludGVnZXIgPSBmdW5jdGlvbihhcnIsIG9mZnNldCkge1xyXG4gICAgcmV0dXJuIGFycltvZmZzZXRdICsgKGFycltvZmZzZXQgKyAxXSA8PCA4KSArIChhcnJbb2Zmc2V0ICsgMl0gPDwgMTYpICsgKGFycltvZmZzZXQgKyAzXSA8PCAyNCk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ29uc3RhbnRzIGZvciB0ZXh0dXJlIGRhdGEgbGF5b3V0XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVGV4dHVyZUNvbnN0YW50cyA9IHtcclxuICAgIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMOiA0LFxyXG4gICAgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfU1BMQVQ6IDQsXHJcbiAgICBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEOiAyLFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0FMTE9DQVRFRDogNCxcclxuICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX1NUT1JFRDogMixcclxuICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRDogNCxcclxuICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVDogNixcclxuICAgIFNDQUxFU19ST1RBVElPTlNfRUxFTUVOVFNfUEVSX1RFWEVMOiA0LFxyXG4gICAgU0NFTkVfSU5ERVhFU19FTEVNRU5UU19QRVJfVEVYRUw6IDEsXHJcbiAgICBNQVhfVEVYVFVSRV9URVhFTFM6IDQwOTYgKiA0MDk2XHJcbn07XHJcbiIsIi8qKlxyXG4gKiBGbGFtZVRleHR1cmVNYW5hZ2VyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBcclxuICogTWFuYWdlcyBHUFUgdGV4dHVyZXMgZm9yIEZMQU1FIHBhcmFtZXRyaWMgaGVhZCBtb2RlbDpcclxuICogLSBCbGVuZHNoYXBlIG1vcnBoIHRhcmdldCBkYXRhIHRleHR1cmVzXHJcbiAqIC0gQm9uZSBtYXRyaXggdGV4dHVyZXMgZm9yIHNrZWxldG9uIGFuaW1hdGlvblxyXG4gKiAtIExCUyB3ZWlnaHQgdGV4dHVyZXMgZm9yIHNraW5uaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIFZlY3RvcjIsXHJcbiAgICBEYXRhVGV4dHVyZSxcclxuICAgIFJHQkFJbnRlZ2VyRm9ybWF0LFxyXG4gICAgVW5zaWduZWRJbnRUeXBlXHJcbn0gZnJvbSAndGhyZWUnO1xyXG5cclxuaW1wb3J0IHsgdWludEVuY29kZWRGbG9hdCB9IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIHRoZSBGTEFNRSBtb2RlbCB0ZXh0dXJlIGNvbnRhaW5pbmcgYmxlbmRzaGFwZSBwb3NpdGlvbnNcclxuICogQHBhcmFtIHtUSFJFRS5Ta2lubmVkTWVzaH0gZmxhbWVNb2RlbCAtIFRoZSBGTEFNRSBtZXNoIHdpdGggbW9ycGggdGFyZ2V0c1xyXG4gKiBAcGFyYW0ge1RIUkVFLlNoYWRlck1hdGVyaWFsfSBtYXRlcmlhbCAtIFRoZSBzcGxhdCBtYXRlcmlhbCB0byB1cGRhdGUgdW5pZm9ybXNcclxuICogQHBhcmFtIHtudW1iZXJ9IGdhdXNzaWFuU3BsYXRDb3VudCAtIE51bWJlciBvZiBnYXVzc2lhbiBzcGxhdHNcclxuICogQHJldHVybnMge29iamVjdH0gVGV4dHVyZSBkYXRhIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkTW9kZWxUZXh0dXJlKGZsYW1lTW9kZWwsIG1hdGVyaWFsLCBnYXVzc2lhblNwbGF0Q291bnQpIHtcclxuICAgIGNvbnN0IGZsYW1lTW9kZWxUZXhTaXplID0gbmV3IFZlY3RvcjIoNDA5NiwgMjA0OCk7XHJcblxyXG4gICAgY29uc3Qgc2hhcGVkTWVzaCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTtcclxuICAgIGxldCBzaGFwZWRNZXNoQXJyYXkgPSBbXTtcclxuICAgIGNvbnN0IHBvaW50TnVtID0gc2hhcGVkTWVzaC5sZW5ndGggLyAzO1xyXG4gICAgY29uc3QgYnNMZW5ndGggPSBmbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGg7XHJcblxyXG4gICAgLy8gU29ydCBtb3JwaCB0YXJnZXRzIGJ5IGRpY3Rpb25hcnkgb3JkZXJcclxuICAgIGNvbnN0IG1vcnBoVGFyZ2V0TmFtZXMgPSBPYmplY3Qua2V5cyhmbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSk7XHJcbiAgICBtb3JwaFRhcmdldE5hbWVzLmZvckVhY2goKG5hbWUpID0+IHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbEluZGV4ID0gZmxhbWVNb2RlbC5tb3JwaFRhcmdldERpY3Rpb25hcnlbbmFtZV07XHJcbiAgICAgICAgY29uc3QgYnNNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb25bb3JpZ2luYWxJbmRleF07XHJcbiAgICAgICAgc2hhcGVkTWVzaEFycmF5ID0gc2hhcGVkTWVzaEFycmF5LmNvbmNhdChBcnJheS5mcm9tKGJzTWVzaC5hcnJheSkpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIEFkZCBiYXNlIG1lc2ggcG9zaXRpb25zXHJcbiAgICBzaGFwZWRNZXNoQXJyYXkgPSBzaGFwZWRNZXNoQXJyYXkuY29uY2F0KEFycmF5LmZyb20oc2hhcGVkTWVzaCkpO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0ZXh0dXJlIGRhdGFcclxuICAgIGNvbnN0IGZsYW1lTW9kZWxEYXRhID0gbmV3IEZsb2F0MzJBcnJheShmbGFtZU1vZGVsVGV4U2l6ZS54ICogZmxhbWVNb2RlbFRleFNpemUueSAqIDQpO1xyXG4gICAgY29uc3QgZmxhbWVNb2RlbERhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoZmxhbWVNb2RlbFRleFNpemUueCAqIGZsYW1lTW9kZWxUZXhTaXplLnkgKiA0KTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgYyA9IDA7IGMgPCBwb2ludE51bSAqIChic0xlbmd0aCArIDEpOyBjKyspIHtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YVtjICogNCArIDBdID0gc2hhcGVkTWVzaEFycmF5W2MgKiAzICsgMF07XHJcbiAgICAgICAgZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAxXSA9IHNoYXBlZE1lc2hBcnJheVtjICogMyArIDFdO1xyXG4gICAgICAgIGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMl0gPSBzaGFwZWRNZXNoQXJyYXlbYyAqIDMgKyAyXTtcclxuXHJcbiAgICAgICAgZmxhbWVNb2RlbERhdGFJbnRbYyAqIDQgKyAwXSA9IHVpbnRFbmNvZGVkRmxvYXQoZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAwXSk7XHJcbiAgICAgICAgZmxhbWVNb2RlbERhdGFJbnRbYyAqIDQgKyAxXSA9IHVpbnRFbmNvZGVkRmxvYXQoZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAxXSk7XHJcbiAgICAgICAgZmxhbWVNb2RlbERhdGFJbnRbYyAqIDQgKyAyXSA9IHVpbnRFbmNvZGVkRmxvYXQoZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAyXSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmxhbWVNb2RlbFRleCA9IG5ldyBEYXRhVGV4dHVyZShcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludCxcclxuICAgICAgICBmbGFtZU1vZGVsVGV4U2l6ZS54LFxyXG4gICAgICAgIGZsYW1lTW9kZWxUZXhTaXplLnksXHJcbiAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsXHJcbiAgICAgICAgVW5zaWduZWRJbnRUeXBlXHJcbiAgICApO1xyXG4gICAgZmxhbWVNb2RlbFRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICBmbGFtZU1vZGVsVGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAvLyBVcGRhdGUgbWF0ZXJpYWwgdW5pZm9ybXNcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmZsYW1lTW9kZWxUZXh0dXJlLnZhbHVlID0gZmxhbWVNb2RlbFRleDtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmZsYW1lTW9kZWxUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGZsYW1lTW9kZWxUZXhTaXplKTtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmdhdXNzaWFuU3BsYXRDb3VudC52YWx1ZSA9IGdhdXNzaWFuU3BsYXRDb3VudDtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiBmbGFtZU1vZGVsRGF0YUludCxcclxuICAgICAgICB0ZXh0dXJlOiBmbGFtZU1vZGVsVGV4LFxyXG4gICAgICAgIHNpemU6IGZsYW1lTW9kZWxUZXhTaXplLFxyXG4gICAgICAgIGJhc2VEYXRhOiB7IGZsYW1lTW9kZWxQb3M6IGZsYW1lTW9kZWxEYXRhIH1cclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCdWlsZCBib25lIG1hdHJpeCB0ZXh0dXJlIGZvciBza2VsZXRvbiBhbmltYXRpb25cclxuICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGJvbmVzTWF0cml4IC0gRmxhdHRlbmVkIGJvbmUgbWF0cmljZXNcclxuICogQHBhcmFtIHtudW1iZXJ9IGJvbmVzTnVtIC0gTnVtYmVyIG9mIGJvbmVzXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBic1dlaWdodCAtIEJsZW5kc2hhcGUgd2VpZ2h0cyBvYmplY3RcclxuICogQHBhcmFtIHtvYmplY3R9IG1vcnBoVGFyZ2V0RGljdGlvbmFyeSAtIE1hcHMgYmxlbmRzaGFwZSBuYW1lcyB0byBpbmRpY2VzXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2tpbm5lZE1lc2h9IGZsYW1lTW9kZWwgLSBUaGUgRkxBTUUgbWVzaFxyXG4gKiBAcGFyYW0ge1RIUkVFLlNoYWRlck1hdGVyaWFsfSBtYXRlcmlhbCAtIFRoZSBzcGxhdCBtYXRlcmlhbFxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUZsYW1lTW9kZWwgLSBVc2UgRkxBTUUgbW9kZVxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUZXh0dXJlIGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRCb25lTWF0cml4VGV4dHVyZShcclxuICAgIGJvbmVzTWF0cml4LFxyXG4gICAgYm9uZXNOdW0sXHJcbiAgICBic1dlaWdodCxcclxuICAgIG1vcnBoVGFyZ2V0RGljdGlvbmFyeSxcclxuICAgIGZsYW1lTW9kZWwsXHJcbiAgICBtYXRlcmlhbCxcclxuICAgIHVzZUZsYW1lTW9kZWxcclxuKSB7XHJcbiAgICBpZiAoIWJzV2VpZ2h0KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAvLyBib25lc051bSArIGV4cHJlc3Npb25CU051bSAvIDQgPSAzMCwgc28gdGV4dHVyZSBoZWlnaHQgaXMgMzJcclxuICAgIGNvbnN0IGJvbmVUZXh0dXJlU2l6ZSA9IG5ldyBWZWN0b3IyKDQsIDMyKTtcclxuICAgIGNvbnN0IGJvbmVNYXRyaXhUZXh0dXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYm9uZXNNYXRyaXgpO1xyXG4gICAgY29uc3QgYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50ID0gbmV3IFVpbnQzMkFycmF5KGJvbmVUZXh0dXJlU2l6ZS54ICogYm9uZVRleHR1cmVTaXplLnkgKiA0KTtcclxuXHJcbiAgICBpZiAodXNlRmxhbWVNb2RlbCkge1xyXG4gICAgICAgIC8vIEVuY29kZSBib25lIG1hdHJpY2VzXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBib25lc051bSAqIDE2OyBjKyspIHtcclxuICAgICAgICAgICAgYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50W2NdID0gdWludEVuY29kZWRGbG9hdChib25lTWF0cml4VGV4dHVyZURhdGFbY10pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXQgc2tlbGV0b24gdW5pZm9ybXNcclxuICAgICAgICBpZiAoZmxhbWVNb2RlbCAmJiBmbGFtZU1vZGVsLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlMC52YWx1ZSA9IGZsYW1lTW9kZWwuc2tlbGV0b24uYm9uZVRleHR1cmU7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXgudmFsdWUgPSBmbGFtZU1vZGVsLmJpbmRNYXRyaXg7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXhJbnZlcnNlLnZhbHVlID0gZmxhbWVNb2RlbC5iaW5kTWF0cml4SW52ZXJzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW5jb2RlIGJsZW5kc2hhcGUgd2VpZ2h0c1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gYnNXZWlnaHQpIHtcclxuICAgICAgICBpZiAoT2JqZWN0Lmhhc093bihic1dlaWdodCwga2V5KSkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGJzV2VpZ2h0W2tleV07XHJcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9IG1vcnBoVGFyZ2V0RGljdGlvbmFyeVtrZXldO1xyXG4gICAgICAgICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnRbaWR4ICsgYm9uZXNOdW0gKiAxNl0gPSB1aW50RW5jb2RlZEZsb2F0KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9uZU1hdHJpeFRleCA9IG5ldyBEYXRhVGV4dHVyZShcclxuICAgICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnQsXHJcbiAgICAgICAgYm9uZVRleHR1cmVTaXplLngsXHJcbiAgICAgICAgYm9uZVRleHR1cmVTaXplLnksXHJcbiAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsXHJcbiAgICAgICAgVW5zaWduZWRJbnRUeXBlXHJcbiAgICApO1xyXG4gICAgYm9uZU1hdHJpeFRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICBib25lTWF0cml4VGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICBtYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZS52YWx1ZSA9IGJvbmVNYXRyaXhUZXg7XHJcbiAgICBtYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZVNpemUudmFsdWUuY29weShib25lVGV4dHVyZVNpemUpO1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCxcclxuICAgICAgICB0ZXh0dXJlOiBib25lTWF0cml4VGV4LFxyXG4gICAgICAgIHNpemU6IGJvbmVUZXh0dXJlU2l6ZSxcclxuICAgICAgICBiYXNlRGF0YTogeyBib25lTWF0cml4OiBib25lTWF0cml4VGV4dHVyZURhdGFJbnQgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBib25lIG1hdHJpeCB0ZXh0dXJlIHdpdGggbmV3IGFuaW1hdGlvbiBkYXRhXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBzcGxhdERhdGFUZXh0dXJlcyAtIFRleHR1cmUgZGF0YSBzdG9yYWdlXHJcbiAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSBib25lc01hdHJpeCAtIFVwZGF0ZWQgYm9uZSBtYXRyaWNlc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYm9uZXNOdW0gLSBOdW1iZXIgb2YgYm9uZXNcclxuICogQHBhcmFtIHtvYmplY3R9IGJzV2VpZ2h0IC0gVXBkYXRlZCBibGVuZHNoYXBlIHdlaWdodHNcclxuICogQHBhcmFtIHtvYmplY3R9IG1vcnBoVGFyZ2V0RGljdGlvbmFyeSAtIEJsZW5kc2hhcGUgbmFtZSB0byBpbmRleCBtYXBcclxuICogQHBhcmFtIHtUSFJFRS5Ta2lubmVkTWVzaH0gZmxhbWVNb2RlbCAtIFRoZSBGTEFNRSBtZXNoXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9IG1hdGVyaWFsIC0gVGhlIHNwbGF0IG1hdGVyaWFsXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXBkYXRlRmxhbWVCb25lTWF0cml4IC0gV2hldGhlciB0byB1cGRhdGUgYm9uZSBtYXRyaWNlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJvbmVNYXRyaXhUZXh0dXJlKFxyXG4gICAgc3BsYXREYXRhVGV4dHVyZXMsXHJcbiAgICBib25lc01hdHJpeCxcclxuICAgIGJvbmVzTnVtLFxyXG4gICAgYnNXZWlnaHQsXHJcbiAgICBtb3JwaFRhcmdldERpY3Rpb25hcnksXHJcbiAgICBmbGFtZU1vZGVsLFxyXG4gICAgbWF0ZXJpYWwsXHJcbiAgICB1cGRhdGVGbGFtZUJvbmVNYXRyaXggPSBmYWxzZVxyXG4pIHtcclxuICAgIGlmICghYnNXZWlnaHQgfHwgIW1vcnBoVGFyZ2V0RGljdGlvbmFyeSkgcmV0dXJuO1xyXG5cclxuICAgIGlmICh1cGRhdGVGbGFtZUJvbmVNYXRyaXgpIHtcclxuICAgICAgICBjb25zdCBib25lTWF0cml4VGV4dHVyZURhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGJvbmVzTWF0cml4KTtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGJvbmVzTnVtICogMTY7IGMrKykge1xyXG4gICAgICAgICAgICBzcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZU1hdHJpeCddW2NdID0gdWludEVuY29kZWRGbG9hdChib25lTWF0cml4VGV4dHVyZURhdGFbY10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgYmxlbmRzaGFwZSB3ZWlnaHRzXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBic1dlaWdodCkge1xyXG4gICAgICAgIGlmIChPYmplY3QuaGFzT3duKGJzV2VpZ2h0LCBrZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYnNXZWlnaHRba2V5XTtcclxuICAgICAgICAgICAgY29uc3QgaWR4ID0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5W2tleV07XHJcbiAgICAgICAgICAgIHNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J11baWR4ICsgYm9uZXNOdW0gKiAxNl0gPSB1aW50RW5jb2RlZEZsb2F0KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIHRleHR1cmUgZGF0YVxyXG4gICAgc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXVsndGV4dHVyZSddLmRhdGEgPSBzcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZU1hdHJpeCddO1xyXG4gICAgc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXVsndGV4dHVyZSddLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlLnZhbHVlID0gc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXVsndGV4dHVyZSddO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBza2VsZXRvbiB1bmlmb3Jtc1xyXG4gICAgaWYgKGZsYW1lTW9kZWwuc2tlbGV0b24pIHtcclxuICAgICAgICBtYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZTAudmFsdWUgPSBmbGFtZU1vZGVsLnNrZWxldG9uLmJvbmVUZXh0dXJlO1xyXG4gICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXgudmFsdWUgPSBmbGFtZU1vZGVsLmJpbmRNYXRyaXg7XHJcbiAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeEludmVyc2UudmFsdWUgPSBmbGFtZU1vZGVsLmJpbmRNYXRyaXhJbnZlcnNlO1xyXG4gICAgfVxyXG5cclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCdWlsZCBMQlMgd2VpZ2h0IHRleHR1cmUgZm9yIHNraW4gZGVmb3JtYXRpb25cclxuICogQHBhcmFtIHtUSFJFRS5Ta2lubmVkTWVzaH0gZmxhbWVNb2RlbCAtIFRoZSBGTEFNRSBtZXNoXHJcbiAqIEBwYXJhbSB7QXJyYXl9IGJvbmVzV2VpZ2h0IC0gUGVyLXZlcnRleCBib25lIHdlaWdodHMgYXJyYXlcclxuICogQHBhcmFtIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH0gbWF0ZXJpYWwgLSBUaGUgc3BsYXQgbWF0ZXJpYWxcclxuICogQHJldHVybnMge29iamVjdH0gVGV4dHVyZSBkYXRhIG9iamVjdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQm9uZVdlaWdodFRleHR1cmUoZmxhbWVNb2RlbCwgYm9uZXNXZWlnaHQsIG1hdGVyaWFsKSB7XHJcbiAgICBjb25zdCBzaGFwZWRNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgY29uc3QgcG9pbnROdW0gPSBzaGFwZWRNZXNoLmxlbmd0aCAvIDM7XHJcbiAgICBcclxuICAgIGNvbnN0IGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSA9IG5ldyBWZWN0b3IyKDUxMiwgNTEyKTtcclxuICAgIGNvbnN0IGJvbmVXZWlnaHRUZXh0dXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYm9uZVdlaWdodFRleHR1cmVTaXplLnggKiBib25lV2VpZ2h0VGV4dHVyZVNpemUueSAqIDQpO1xyXG4gICAgY29uc3QgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50ID0gbmV3IFVpbnQzMkFycmF5KGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS54ICogYm9uZVdlaWdodFRleHR1cmVTaXplLnkgKiA0KTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50TnVtOyBpKyspIHtcclxuICAgICAgICAvLyBTdG9yZSA1IGJvbmUgd2VpZ2h0cyBwZXIgdmVydGV4ICgyIHRleGVscylcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAwXSA9IGJvbmVzV2VpZ2h0W2ldWzBdO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDFdID0gYm9uZXNXZWlnaHRbaV1bMV07XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgMl0gPSBib25lc1dlaWdodFtpXVsyXTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAzXSA9IGJvbmVzV2VpZ2h0W2ldWzNdO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDRdID0gYm9uZXNXZWlnaHRbaV1bNF07XHJcblxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDBdID0gdWludEVuY29kZWRGbG9hdChib25lc1dlaWdodFtpXVswXSk7XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgMV0gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVzV2VpZ2h0W2ldWzFdKTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAyXSA9IHVpbnRFbmNvZGVkRmxvYXQoYm9uZXNXZWlnaHRbaV1bMl0pO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDNdID0gdWludEVuY29kZWRGbG9hdChib25lc1dlaWdodFtpXVszXSk7XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgNF0gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVzV2VpZ2h0W2ldWzRdKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib25lV2VpZ2h0VGV4ID0gbmV3IERhdGFUZXh0dXJlKFxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludCxcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZVNpemUueCxcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZVNpemUueSxcclxuICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCxcclxuICAgICAgICBVbnNpZ25lZEludFR5cGVcclxuICAgICk7XHJcbiAgICBib25lV2VpZ2h0VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgIGJvbmVXZWlnaHRUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVXZWlnaHRUZXh0dXJlLnZhbHVlID0gYm9uZVdlaWdodFRleDtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVXZWlnaHRUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSk7XHJcbiAgICBtYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YTogYm9uZVdlaWdodFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgIHRleHR1cmU6IGJvbmVXZWlnaHRUZXgsXHJcbiAgICAgICAgc2l6ZTogYm9uZVdlaWdodFRleHR1cmVTaXplLFxyXG4gICAgICAgIGJhc2VEYXRhOiB7IGJvbmVXZWlnaHQ6IGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludCB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVwZGF0ZWQgYm9uZSBtYXRyaWNlcyBmcm9tIHNrZWxldG9uXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2tlbGV0b259IHNrZWxldG9uIC0gVGhlIHNrZWxldG9uIHRvIHJlYWQgbWF0cmljZXMgZnJvbVxyXG4gKiBAcGFyYW0ge251bWJlcn0gYm9uZU51bSAtIE51bWJlciBvZiBib25lc1xyXG4gKiBAcmV0dXJucyB7RmxvYXQzMkFycmF5fSBGbGF0dGVuZWQgYm9uZSBtYXRyaWNlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVwZGF0ZWRCb25lTWF0cmljZXMoc2tlbGV0b24sIGJvbmVOdW0pIHtcclxuICAgIGNvbnN0IHVwZGF0ZWRCb25lTWF0cmljZXMgPSBbXTtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBib25lTnVtOyBqKyspIHtcclxuICAgICAgICBjb25zdCBib25lTWF0cml4ID0gc2tlbGV0b24uYm9uZXNbal0ubWF0cml4V29ybGQuY2xvbmUoKVxyXG4gICAgICAgICAgICAubXVsdGlwbHkoc2tlbGV0b24uYm9uZUludmVyc2VzW2pdLmNsb25lKCkpO1xyXG5cclxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IGJvbmVNYXRyaXguZWxlbWVudHM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB1cGRhdGVkQm9uZU1hdHJpY2VzLnB1c2goZWxlbWVudHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodXBkYXRlZEJvbmVNYXRyaWNlcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBGbGFtZVRleHR1cmVNYW5hZ2VyID0ge1xyXG4gICAgYnVpbGRNb2RlbFRleHR1cmUsXHJcbiAgICBidWlsZEJvbmVNYXRyaXhUZXh0dXJlLFxyXG4gICAgdXBkYXRlQm9uZU1hdHJpeFRleHR1cmUsXHJcbiAgICBidWlsZEJvbmVXZWlnaHRUZXh0dXJlLFxyXG4gICAgZ2V0VXBkYXRlZEJvbmVNYXRyaWNlc1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmxhbWVUZXh0dXJlTWFuYWdlcjtcclxuIiwiLyoqXHJcbiAqIEZsYW1lQW5pbWF0b3IgLSBGTEFNRSBQYXJhbWV0cmljIEhlYWQgTW9kZWwgQW5pbWF0aW9uIENvbnRyb2xsZXJcclxuICpcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICpcclxuICogTWFuYWdlcyBGTEFNRSAoRmFjZXMgTGVhcm5lZCB3aXRoIGFuIEFydGljdWxhdGVkIE1vZGVsIGFuZCBFeHByZXNzaW9ucykgbW9kZWwgYW5pbWF0aW9uOlxyXG4gKiAtIFNrZWxldGFsIGJvbmUgcm90YXRpb24gZnJvbSBGTEFNRSBwYXJhbWV0ZXJzXHJcbiAqIC0gQmxlbmRzaGFwZSB3ZWlnaHQgdXBkYXRlcyBmb3IgZmFjaWFsIGV4cHJlc3Npb25zXHJcbiAqIC0gU2tlbGV0b24tbWVzaCBzeW5jaHJvbml6YXRpb24gZm9yIGdhdXNzaWFuIHNwbGF0IHJlbmRlcmluZ1xyXG4gKiAtIExpbmVhciBibGVuZCBza2lubmluZyAoTEJTKSB3aXRoIGJvbmUgd2VpZ2h0c1xyXG4gKlxyXG4gKiBGTEFNRSB1c2VzIDUgYm9uZXM6IHJvb3QsIG5lY2ssIGphdywgbGVmdCBleWUsIHJpZ2h0IGV5ZVxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBNYXRyaXg0LFxyXG4gICAgQm9uZSxcclxuICAgIFNrZWxldG9uXHJcbn0gZnJvbSAndGhyZWUnO1xyXG5cclxuaW1wb3J0IHsgRmxhbWVUZXh0dXJlTWFuYWdlciB9IGZyb20gJy4vRmxhbWVUZXh0dXJlTWFuYWdlci5qcyc7XHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4uL3V0aWxzL0xvZ2dlci5qcyc7XHJcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciwgUmVzb3VyY2VEaXNwb3NlZEVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuaW1wb3J0IHsgdmFsaWRhdGVSZXF1aXJlZFByb3BlcnRpZXMgfSBmcm9tICcuLi91dGlscy9WYWxpZGF0aW9uVXRpbHMuanMnO1xyXG5pbXBvcnQgeyB2ZWN0b3IzUG9vbCwgcXVhdGVybmlvblBvb2wgfSBmcm9tICcuLi91dGlscy9PYmplY3RQb29sLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignRmxhbWVBbmltYXRvcicpO1xyXG5cclxuLyoqXHJcbiAqIEZsYW1lQW5pbWF0b3IgLSBNYW5hZ2VzIEZMQU1FIHBhcmFtZXRyaWMgaGVhZCBtb2RlbCBhbmltYXRpb25cclxuICpcclxuICogUHJvdmlkZXMgc2tlbGV0YWwgYW5pbWF0aW9uLCBibGVuZHNoYXBlIG1vcnBoaW5nLCBhbmQgbWVzaCBkZWZvcm1hdGlvblxyXG4gKiBmb3IgRkxBTUUtYmFzZWQgYXZhdGFyIGhlYWRzIHdpdGggZ2F1c3NpYW4gc3BsYXR0aW5nIHJlbmRlcmluZy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBGbGFtZUFuaW1hdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgRmxhbWVBbmltYXRvciBpbnN0YW5jZVxyXG4gICAgICpcclxuICAgICAqIEBjb25zdHJ1Y3RvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKiogQHR5cGUge1RIUkVFLlNrZWxldG9ufG51bGx9IEZMQU1FIHNrZWxldG9uIHdpdGggNSBib25lcyAqL1xyXG4gICAgICAgIHRoaXMuc2tlbGV0b24gPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1RIUkVFLkJvbmVbXXxudWxsfSBBcnJheSBvZiBza2VsZXRvbiBib25lcyAqL1xyXG4gICAgICAgIHRoaXMuYm9uZXMgPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge09iamVjdHxudWxsfSBGTEFNRSBhbmltYXRpb24gcGFyYW1ldGVycyAocm90YXRpb24sIGV4cHIsIG5lY2tfcG9zZSwgamF3X3Bvc2UsIGV5ZXNfcG9zZSkgKi9cclxuICAgICAgICB0aGlzLmZsYW1lUGFyYW1zID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheXxudWxsfSBMaW5lYXIgYmxlbmQgc2tpbm5pbmcgd2VpZ2h0cyAqL1xyXG4gICAgICAgIHRoaXMubGJzV2VpZ2h0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9IEN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lICovXHJcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSBUb3RhbCBmcmFtZXMgaW4gYW5pbWF0aW9uIHNlcXVlbmNlICovXHJcbiAgICAgICAgdGhpcy50b3RhbEZyYW1lcyA9IDA7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gV2hldGhlciBGTEFNRSBtb2RlIGlzIGVuYWJsZWQgKi9cclxuICAgICAgICB0aGlzLnVzZUZsYW1lID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtUSFJFRS5Ta2lubmVkTWVzaHxudWxsfSBUaGUgRkxBTUUgYXZhdGFyIG1lc2ggKi9cclxuICAgICAgICB0aGlzLmF2YXRhck1lc2ggPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gTnVtYmVyIG9mIGdhdXNzaWFuIHNwbGF0cyBpbiB0aGUgbWVzaCAqL1xyXG4gICAgICAgIHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50ID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSBXaGV0aGVyIGFuaW1hdG9yIGhhcyBiZWVuIGRpc3Bvc2VkICovXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdGbGFtZUFuaW1hdG9yIGluc3RhbmNlIGNyZWF0ZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzc2VydCBhbmltYXRvciBpcyBub3QgZGlzcG9zZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAdGhyb3dzIHtSZXNvdXJjZURpc3Bvc2VkRXJyb3J9IElmIGFuaW1hdG9yIGhhcyBiZWVuIGRpc3Bvc2VkXHJcbiAgICAgKi9cclxuICAgIF9hc3NlcnROb3REaXNwb3NlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJlc291cmNlRGlzcG9zZWRFcnJvcignRmxhbWVBbmltYXRvciBoYXMgYmVlbiBkaXNwb3NlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW5pbWF0b3Igd2l0aCBGTEFNRSBwYXJhbWV0ZXJzIGFuZCBza2VsZXRvbiBkYXRhXHJcbiAgICAgKlxyXG4gICAgICogU2V0cyB1cCB0aGUgRkxBTUUgYW5pbWF0aW9uIHN5c3RlbSB3aXRoIHBhcmFtZXRlcnMgZm9yIGJvbmUgcm90YXRpb25zLFxyXG4gICAgICogZXhwcmVzc2lvbnMsIGFuZCBsaW5lYXIgYmxlbmQgc2tpbm5pbmcgd2VpZ2h0cy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmxhbWVQYXJhbXMgLSBGTEFNRSBhbmltYXRpb24gcGFyYW1ldGVyc1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMucm90YXRpb24gLSBSb290IGJvbmUgcm90YXRpb25zIHBlciBmcmFtZSAoYXhpcy1hbmdsZSlcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZsYW1lUGFyYW1zLmV4cHIgLSBFeHByZXNzaW9uIGJsZW5kc2hhcGUgd2VpZ2h0cyBwZXIgZnJhbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZsYW1lUGFyYW1zLm5lY2tfcG9zZSAtIE5lY2sgYm9uZSByb3RhdGlvbnMgcGVyIGZyYW1lXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmbGFtZVBhcmFtcy5qYXdfcG9zZSAtIEphdyBib25lIHJvdGF0aW9ucyBwZXIgZnJhbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZsYW1lUGFyYW1zLmV5ZXNfcG9zZSAtIEV5ZSBib25lIHJvdGF0aW9ucyBwZXIgZnJhbWUgKDYgdmFsdWVzOiBsZWZ0IDMsIHJpZ2h0IDMpXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYm9uZVRyZWUgLSBTa2VsZXRvbiBoaWVyYXJjaHkgZGVmaW5pdGlvblxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGJzV2VpZ2h0IC0gTGluZWFyIGJsZW5kIHNraW5uaW5nIHdlaWdodHMgZm9yIGVhY2ggdmVydGV4XHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBhdmF0YXJNZXNoIC0gVGhlIEZMQU1FIGF2YXRhciBtZXNoXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHJlcXVpcmVkIHBhcmFtZXRlcnMgYXJlIG1pc3Npbmcgb3IgaW52YWxpZFxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIGluaXRpYWxpemUoZmxhbWVQYXJhbXMsIGJvbmVUcmVlLCBsYnNXZWlnaHQsIGF2YXRhck1lc2gpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFsaWRhdGVSZXF1aXJlZFByb3BlcnRpZXMoZmxhbWVQYXJhbXMsIFsncm90YXRpb24nLCAnZXhwcicsICduZWNrX3Bvc2UnLCAnamF3X3Bvc2UnLCAnZXllc19wb3NlJ10sICdmbGFtZVBhcmFtcycpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignSW52YWxpZCBmbGFtZVBhcmFtcycsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWF2YXRhck1lc2ggfHwgIWF2YXRhck1lc2guZ2VvbWV0cnkgfHwgIWF2YXRhck1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcyB8fCAhYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICdhdmF0YXJNZXNoIG11c3QgaGF2ZSBnZW9tZXRyeSB3aXRoIHBvc2l0aW9uIGF0dHJpYnV0ZScsXHJcbiAgICAgICAgICAgICAgICAnYXZhdGFyTWVzaCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbnZhbGlkIGF2YXRhck1lc2gnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0luaXRpYWxpemluZyBGbGFtZUFuaW1hdG9yJywge1xyXG4gICAgICAgICAgICBmcmFtZUNvdW50OiBmbGFtZVBhcmFtcy5yb3RhdGlvbj8ubGVuZ3RoLFxyXG4gICAgICAgICAgICBzcGxhdENvdW50OiBhdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnRcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5mbGFtZVBhcmFtcyA9IGZsYW1lUGFyYW1zO1xyXG4gICAgICAgIHRoaXMubGJzV2VpZ2h0ID0gbGJzV2VpZ2h0O1xyXG4gICAgICAgIHRoaXMuYXZhdGFyTWVzaCA9IGF2YXRhck1lc2g7XHJcblxyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBmcmFtZXMgZnJvbSByb3RhdGlvbiBkYXRhXHJcbiAgICAgICAgaWYgKGZsYW1lUGFyYW1zLnJvdGF0aW9uICYmIEFycmF5LmlzQXJyYXkoZmxhbWVQYXJhbXMucm90YXRpb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxGcmFtZXMgPSBmbGFtZVBhcmFtcy5yb3RhdGlvbi5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQW5pbWF0aW9uIGhhcyBmcmFtZXMnLCB7IHRvdGFsRnJhbWVzOiB0aGlzLnRvdGFsRnJhbWVzIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdObyByb3RhdGlvbiBkYXRhIGZvdW5kLCB0b3RhbEZyYW1lcyBzZXQgdG8gMCcpO1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50ID0gYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmNvdW50O1xyXG5cclxuICAgICAgICAvLyBCdWlsZCBza2VsZXRvbiBmcm9tIGJvbmUgdHJlZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRTa2VsZXRvbihib25lVHJlZSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU2tlbGV0b24gYnVpbHQgc3VjY2Vzc2Z1bGx5JywgeyBib25lQ291bnQ6IHRoaXMuYm9uZXM/Lmxlbmd0aCB9KTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBidWlsZCBza2VsZXRvbicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gYnVpbGQgc2tlbGV0b246ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgJ2JvbmVUcmVlJyxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgc2tlbGV0b24gZnJvbSBib25lIHRyZWUgZGF0YVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGJvbmVUcmVlIC0gU2tlbGV0b24gaGllcmFyY2h5IGRlZmluaXRpb25cclxuICAgICAqL1xyXG4gICAgYnVpbGRTa2VsZXRvbihib25lVHJlZSkge1xyXG4gICAgICAgIGlmICghYm9uZVRyZWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5ib25lcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGJvbmVJbnZlcnNlcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYm9uZXMgZnJvbSB0cmVlIHN0cnVjdHVyZVxyXG4gICAgICAgIGNvbnN0IGNyZWF0ZUJvbmUgPSAoYm9uZURhdGEsIHBhcmVudEJvbmUgPSBudWxsKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvbmUgPSBuZXcgQm9uZSgpO1xyXG4gICAgICAgICAgICBib25lLm5hbWUgPSBib25lRGF0YS5uYW1lIHx8IGBib25lXyR7dGhpcy5ib25lcy5sZW5ndGh9YDtcclxuXHJcbiAgICAgICAgICAgIGlmIChib25lRGF0YS5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgYm9uZS5wb3NpdGlvbi5mcm9tQXJyYXkoYm9uZURhdGEucG9zaXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChib25lRGF0YS5yb3RhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgYm9uZS5yb3RhdGlvbi5mcm9tQXJyYXkoYm9uZURhdGEucm90YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChib25lRGF0YS5zY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgYm9uZS5zY2FsZS5mcm9tQXJyYXkoYm9uZURhdGEuc2NhbGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFyZW50Qm9uZSkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50Qm9uZS5hZGQoYm9uZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYm9uZXMucHVzaChib25lKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBpbnZlcnNlIGJpbmQgbWF0cml4XHJcbiAgICAgICAgICAgIGNvbnN0IGludmVyc2VNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgICAgICBpZiAoYm9uZURhdGEuaW52ZXJzZUJpbmRNYXRyaXgpIHtcclxuICAgICAgICAgICAgICAgIGludmVyc2VNYXRyaXguZnJvbUFycmF5KGJvbmVEYXRhLmludmVyc2VCaW5kTWF0cml4KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvbmUudXBkYXRlTWF0cml4V29ybGQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpbnZlcnNlTWF0cml4LmNvcHkoYm9uZS5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYm9uZUludmVyc2VzLnB1c2goaW52ZXJzZU1hdHJpeCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIGlmIChib25lRGF0YS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgYm9uZURhdGEuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBjcmVhdGVCb25lKGNoaWxkLCBib25lKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBJZiBib25lVHJlZSBpcyBhcnJheSwgY3JlYXRlIGJvbmVzIGRpcmVjdGx5XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYm9uZVRyZWUpKSB7XHJcbiAgICAgICAgICAgIGJvbmVUcmVlLmZvckVhY2goKGJvbmVEYXRhLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYm9uZSA9IG5ldyBCb25lKCk7XHJcbiAgICAgICAgICAgICAgICBib25lLm5hbWUgPSBib25lRGF0YS5uYW1lIHx8IGBib25lXyR7aW5kZXh9YDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9uZS5wb3NpdGlvbi5mcm9tQXJyYXkoYm9uZURhdGEucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvbmVzLnB1c2goYm9uZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludmVyc2VNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvbmVEYXRhLmludmVyc2VCaW5kTWF0cml4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52ZXJzZU1hdHJpeC5mcm9tQXJyYXkoYm9uZURhdGEuaW52ZXJzZUJpbmRNYXRyaXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYm9uZUludmVyc2VzLnB1c2goaW52ZXJzZU1hdHJpeCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHVwIGhpZXJhcmNoeSAoRkxBTUU6IHJvb3QgLT4gbmVjayAtPiBqYXcsIGV5ZXMpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJvbmVzLmxlbmd0aCA+PSA1KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvbmVzWzBdLmFkZCh0aGlzLmJvbmVzWzFdKTsgLy8gcm9vdCAtPiBuZWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvbmVzWzFdLmFkZCh0aGlzLmJvbmVzWzJdKTsgLy8gbmVjayAtPiBqYXdcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXNbMV0uYWRkKHRoaXMuYm9uZXNbM10pOyAvLyBuZWNrIC0+IGxlZnRFeWVcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXNbMV0uYWRkKHRoaXMuYm9uZXNbNF0pOyAvLyBuZWNrIC0+IHJpZ2h0RXllXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGJvbmVUcmVlLnJvb3QpIHtcclxuICAgICAgICAgICAgY3JlYXRlQm9uZShib25lVHJlZS5yb290KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBza2VsZXRvblxyXG4gICAgICAgIHRoaXMuc2tlbGV0b24gPSBuZXcgU2tlbGV0b24odGhpcy5ib25lcywgYm9uZUludmVyc2VzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBib25lIHJvdGF0aW9uIGZyb20gYXhpcy1hbmdsZSBvciBxdWF0ZXJuaW9uIHJlcHJlc2VudGF0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQ29udmVydHMgcm90YXRpb24gZGF0YSB0byBxdWF0ZXJuaW9uIGFuZCBhcHBsaWVzIGl0IHRvIHRoZSBib25lLlxyXG4gICAgICogVXNlcyBvYmplY3QgcG9vbGluZyB0byBhdm9pZCBhbGxvY2F0aW9ucyBpbiBhbmltYXRpb24gbG9vcC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLkJvbmV9IGJvbmUgLSBUYXJnZXQgYm9uZSB0byByb3RhdGVcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5nbGVzIC0gUm90YXRpb24gdmFsdWVzICgzIGZvciBheGlzLWFuZ2xlLCA0IGZvciBxdWF0ZXJuaW9uKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbaXNRdWF0PWZhbHNlXSAtIFdoZXRoZXIgYW5nbGVzIGFyZSBxdWF0ZXJuaW9uIFt4LCB5LCB6LCB3XVxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBib25lIG9yIGFuZ2xlcyBhcmUgaW52YWxpZFxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIHNldEJvbmVSb3RhdGlvbihib25lLCBhbmdsZXMsIGlzUXVhdCA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKCFib25lIHx8ICFhbmdsZXMgfHwgIUFycmF5LmlzQXJyYXkoYW5nbGVzKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ2JvbmUgYW5kIGFuZ2xlcyBhcnJheSBhcmUgcmVxdWlyZWQnLFxyXG4gICAgICAgICAgICAgICAgJ2JvbmUvYW5nbGVzJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXNlIG9iamVjdCBwb29saW5nIGZvciB0ZW1wIG9iamVjdHNcclxuICAgICAgICBjb25zdCBxdWF0ZXJuaW9uID0gcXVhdGVybmlvblBvb2wuYWNxdWlyZSgpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoaXNRdWF0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEaXJlY3QgcXVhdGVybmlvbiAoWFlaVyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICBpZiAoYW5nbGVzLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdRdWF0ZXJuaW9uIHJlcXVpcmVzIDQgdmFsdWVzJywgJ2FuZ2xlcycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcXVhdGVybmlvbi5zZXQoYW5nbGVzWzBdLCBhbmdsZXNbMV0sIGFuZ2xlc1syXSwgYW5nbGVzWzNdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEF4aXMtYW5nbGUgcmVwcmVzZW50YXRpb246IFt4LCB5LCB6XSB3aGVyZSBtYWduaXR1ZGUgaXMgYW5nbGVcclxuICAgICAgICAgICAgICAgIGlmIChhbmdsZXMubGVuZ3RoIDwgMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ0F4aXMtYW5nbGUgcmVxdWlyZXMgMyB2YWx1ZXMnLCAnYW5nbGVzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXhpcyA9IHZlY3RvcjNQb29sLmFjcXVpcmUoKTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5zZXQoYW5nbGVzWzBdLCBhbmdsZXNbMV0sIGFuZ2xlc1syXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGVJblJhZGlhbnMgPSBheGlzLmxlbmd0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF4aXMubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVhdGVybmlvbi5zZXRGcm9tQXhpc0FuZ2xlKGF4aXMsIGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjdG9yM1Bvb2wucmVsZWFzZShheGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQXBwbHkgcm90YXRpb24gdG8gYm9uZVxyXG4gICAgICAgICAgICBib25lLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgYm9uZS51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBxdWF0ZXJuaW9uUG9vbC5yZWxlYXNlKHF1YXRlcm5pb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBGTEFNRSBib25lcyBmcm9tIGN1cnJlbnQgZnJhbWUgcGFyYW1ldGVyc1xyXG4gICAgICpcclxuICAgICAqIEFwcGxpZXMgYm9uZSByb3RhdGlvbnMgZm9yIGFsbCA1IEZMQU1FIGJvbmVzIChyb290LCBuZWNrLCBqYXcsIGxlZnQgZXllLCByaWdodCBleWUpXHJcbiAgICAgKiBmcm9tIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBmcmFtZS4gVXBkYXRlcyBza2VsZXRvbiBtYXRyaWNlcyBhbmQgcmV0dXJucyBkYXRhXHJcbiAgICAgKiBuZWVkZWQgZm9yIG1lc2ggZGVmb3JtYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQm9uZSBhbmQgYmxlbmRzaGFwZSBkYXRhIGZvciByZW5kZXJpbmdcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gcmV0dXJuLmJzV2VpZ2h0IC0gRXhwcmVzc2lvbiBibGVuZHNoYXBlIHdlaWdodHMgZm9yIGN1cnJlbnQgZnJhbWVcclxuICAgICAqIEByZXR1cm5zIHtGbG9hdDMyQXJyYXl9IHJldHVybi5ib25lc01hdHJpeCAtIFVwZGF0ZWQgYm9uZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaWNlc1xyXG4gICAgICogQHJldHVybnMge251bWJlcn0gcmV0dXJuLmJvbmVzTnVtIC0gTnVtYmVyIG9mIGJvbmVzIChhbHdheXMgNSBmb3IgRkxBTUUpXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IHJldHVybi5ib25lc1dlaWdodCAtIExCUyB3ZWlnaHRzIGZvciB2ZXJ0aWNlc1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVGbGFtZUJvbmVzKCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5mbGFtZVBhcmFtcyB8fCAhdGhpcy5za2VsZXRvbikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybignQ2Fubm90IHVwZGF0ZSBib25lczogZmxhbWVQYXJhbXMgb3Igc2tlbGV0b24gbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5mcmFtZTtcclxuXHJcbiAgICAgICAgLy8gR2V0IGJsZW5kc2hhcGUgd2VpZ2h0cyBmb3IgdGhpcyBmcmFtZVxyXG4gICAgICAgIGNvbnN0IGJzV2VpZ2h0ID0gdGhpcy5mbGFtZVBhcmFtc1snZXhwciddW2ZyYW1lXTtcclxuXHJcbiAgICAgICAgLy8gQXBwbHkgYm9uZSByb3RhdGlvbnMgZm9yIGN1cnJlbnQgZnJhbWVcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBSb290IGJvbmUgcm90YXRpb24gKGdsb2JhbCBoZWFkIG9yaWVudGF0aW9uKVxyXG4gICAgICAgICAgICBjb25zdCByb290QW5nbGUgPSB0aGlzLmZsYW1lUGFyYW1zWydyb3RhdGlvbiddW2ZyYW1lXTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCb25lUm90YXRpb24odGhpcy5za2VsZXRvbi5ib25lc1swXSwgcm9vdEFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE5lY2sgcm90YXRpb25cclxuICAgICAgICAgICAgY29uc3QgbmVja0FuZ2xlID0gdGhpcy5mbGFtZVBhcmFtc1snbmVja19wb3NlJ11bZnJhbWVdO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzFdLCBuZWNrQW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gSmF3IHJvdGF0aW9uXHJcbiAgICAgICAgICAgIGNvbnN0IGphd0FuZ2xlID0gdGhpcy5mbGFtZVBhcmFtc1snamF3X3Bvc2UnXVtmcmFtZV07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Qm9uZVJvdGF0aW9uKHRoaXMuc2tlbGV0b24uYm9uZXNbMl0sIGphd0FuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEV5ZXMgcm90YXRpb24gKDYgdmFsdWVzOiBsZWZ0IGV5ZSB4eXosIHJpZ2h0IGV5ZSB4eXopXHJcbiAgICAgICAgICAgIGNvbnN0IGV5ZXNBbmdsZSA9IHRoaXMuZmxhbWVQYXJhbXNbJ2V5ZXNfcG9zZSddW2ZyYW1lXTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCb25lUm90YXRpb24odGhpcy5za2VsZXRvbi5ib25lc1szXSwgZXllc0FuZ2xlLnNsaWNlKDAsIDMpKTsgICAgICAgICAgLy8gTGVmdCBleWVcclxuICAgICAgICAgICAgdGhpcy5zZXRCb25lUm90YXRpb24odGhpcy5za2VsZXRvbi5ib25lc1s0XSwgZXllc0FuZ2xlLnNsaWNlKDMsIDYpKTsgICAgICAgICAgLy8gUmlnaHQgZXllXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzZXR0aW5nIGJvbmUgcm90YXRpb25zJywgeyBmcmFtZSwgZXJyb3IgfSk7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHNrZWxldG9uIG1hdHJpY2VzIGFmdGVyIGFsbCByb3RhdGlvbnMgYXJlIHNldFxyXG4gICAgICAgIHRoaXMuc2tlbGV0b24udXBkYXRlKCk7XHJcblxyXG4gICAgICAgIC8vIEdldCB1cGRhdGVkIGJvbmUgbWF0cmljZXMgZm9yIHNoYWRlclxyXG4gICAgICAgIGNvbnN0IG51bUJvbmVzID0gNTtcclxuICAgICAgICBjb25zdCBib25lc01hdHJpeCA9IEZsYW1lVGV4dHVyZU1hbmFnZXIuZ2V0VXBkYXRlZEJvbmVNYXRyaWNlcyh0aGlzLnNrZWxldG9uLCBudW1Cb25lcyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJzV2VpZ2h0LFxyXG4gICAgICAgICAgICBib25lc01hdHJpeCxcclxuICAgICAgICAgICAgYm9uZXNOdW06IG51bUJvbmVzLFxyXG4gICAgICAgICAgICBib25lc1dlaWdodDogdGhpcy5sYnNXZWlnaHRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUnVuIG1vcnBoIHVwZGF0ZSAtIG1haW4gYW5pbWF0aW9uIGxvb3AgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7U3BsYXRNZXNofSBzcGxhdE1lc2ggLSBUaGUgZ2F1c3NpYW4gc3BsYXQgbWVzaCB0byB1cGRhdGVcclxuICAgICAqL1xyXG4gICAgcnVuTW9ycGhVcGRhdGUoc3BsYXRNZXNoKSB7XHJcbiAgICAgICAgY29uc3QgbW9ycGhlZE1lc2ggPSBuZXcgRmxvYXQzMkFycmF5KFxyXG4gICAgICAgICAgICB0aGlzLmF2YXRhck1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNwbGF0TWVzaC5nYXVzc2lhblNwbGF0Q291bnQgPSB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudDtcclxuICAgICAgICBzcGxhdE1lc2guYm9uZXNOdW0gPSA1O1xyXG5cclxuICAgICAgICBpZiAodGhpcy51c2VGbGFtZSkge1xyXG4gICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gdGhpcy51cGRhdGVGbGFtZUJvbmVzKCk7XHJcbiAgICAgICAgICAgIHNwbGF0TWVzaC5ic1dlaWdodCA9IHVwZGF0ZURhdGEuYnNXZWlnaHQ7XHJcbiAgICAgICAgICAgIHNwbGF0TWVzaC5ib25lc01hdHJpeCA9IHVwZGF0ZURhdGEuYm9uZXNNYXRyaXg7XHJcbiAgICAgICAgICAgIHNwbGF0TWVzaC5ib25lc051bSA9IHVwZGF0ZURhdGEuYm9uZXNOdW07XHJcbiAgICAgICAgICAgIHNwbGF0TWVzaC5ib25lc1dlaWdodCA9IHVwZGF0ZURhdGEuYm9uZXNXZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzcGxhdE1lc2gubW9ycGhlZE1lc2ggPSBtb3JwaGVkTWVzaDtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRleHR1cmVzXHJcbiAgICAgICAgY29uc3Qgc3BsYXROdW0gPSBzcGxhdE1lc2gubW9ycGhlZE1lc2gubGVuZ3RoIC8gMztcclxuICAgICAgICBpZiAoc3BsYXRNZXNoLnNwbGF0RGF0YVRleHR1cmVzICYmIHNwbGF0TWVzaC5zcGxhdERhdGFUZXh0dXJlc1snZmxhbWVNb2RlbCddKSB7XHJcbiAgICAgICAgICAgIHNwbGF0TWVzaC51cGRhdGVUZXh0dXJlQWZ0ZXJCU0FuZFNrZWxldG9uKDAsIHNwbGF0TnVtIC0gMSwgdGhpcy51c2VGbGFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lIC0gRnJhbWUgbnVtYmVyIHRvIHNldCAod2lsbCB3cmFwIGlmIGV4Y2VlZHMgdG90YWxGcmFtZXMpXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIGZyYW1lIGlzIG5vdCBhIHZhbGlkIG51bWJlclxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIHNldEZyYW1lKGZyYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBmcmFtZSAhPT0gJ251bWJlcicgfHwgaXNOYU4oZnJhbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ2ZyYW1lIG11c3QgYmUgYSB2YWxpZCBudW1iZXInLCAnZnJhbWUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRvdGFsRnJhbWVzID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gKChmcmFtZSAlIHRoaXMudG90YWxGcmFtZXMpICsgdGhpcy50b3RhbEZyYW1lcykgJSB0aGlzLnRvdGFsRnJhbWVzOyAvLyBIYW5kbGUgbmVnYXRpdmVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZHZhbmNlIHRvIG5leHQgZnJhbWUgaW4gYW5pbWF0aW9uIHNlcXVlbmNlXHJcbiAgICAgKlxyXG4gICAgICogQXV0b21hdGljYWxseSB3cmFwcyB0byBmcmFtZSAwIGFmdGVyIHJlYWNoaW5nIHRvdGFsRnJhbWVzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBuZXh0RnJhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudG90YWxGcmFtZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAodGhpcy5mcmFtZSArIDEpICUgdGhpcy50b3RhbEZyYW1lcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc2tlbGV0b24gZm9yIGV4dGVybmFsIHVzZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtUSFJFRS5Ta2VsZXRvbnxudWxsfSBUaGUgRkxBTUUgc2tlbGV0b24gb3IgbnVsbCBpZiBub3QgaW5pdGlhbGl6ZWRcclxuICAgICAqL1xyXG4gICAgZ2V0U2tlbGV0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5za2VsZXRvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50IGZyYW1lIG51bWJlclxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lIGluZGV4XHJcbiAgICAgKi9cclxuICAgIGdldEZyYW1lKCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdG90YWwgZnJhbWUgY291bnRcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCBudW1iZXIgb2YgYW5pbWF0aW9uIGZyYW1lc1xyXG4gICAgICovXHJcbiAgICBnZXRUb3RhbEZyYW1lcygpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvdGFsRnJhbWVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcG9zZSBhbmltYXRvciBhbmQgZnJlZSByZXNvdXJjZXNcclxuICAgICAqXHJcbiAgICAgKiBQcm9wZXJseSBjbGVhbnMgdXA6XHJcbiAgICAgKiAtIFNrZWxldG9uIGFuZCBib25lc1xyXG4gICAgICogLSBSZWZlcmVuY2VzIHRvIG1lc2hlcyBhbmQgcGFyYW1ldGVyc1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybignRmxhbWVBbmltYXRvci5kaXNwb3NlKCkgY2FsbGVkIG9uIGFscmVhZHkgZGlzcG9zZWQgaW5zdGFuY2UnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0Rpc3Bvc2luZyBGbGFtZUFuaW1hdG9yJyk7XHJcblxyXG4gICAgICAgIC8vIERpc3Bvc2Ugc2tlbGV0b24gKGJvbmVzIGFyZSBwYXJ0IG9mIHNrZWxldG9uKVxyXG4gICAgICAgIGlmICh0aGlzLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tlbGV0b24uZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNrZWxldG9uID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE51bGxpZnkgYWxsIHJlZmVyZW5jZXMgdG8gYWlkIEdDXHJcbiAgICAgICAgdGhpcy5ib25lcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mbGFtZVBhcmFtcyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYnNXZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXZhdGFyTWVzaCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IHN0YXRlXHJcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbEZyYW1lcyA9IDA7XHJcbiAgICAgICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSAwO1xyXG5cclxuICAgICAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0ZsYW1lQW5pbWF0b3IgZGlzcG9zZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZsYW1lQW5pbWF0b3I7XHJcbiJdLCJuYW1lcyI6WyJDb25zdGFudHMiLCJDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQiLCJDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVCIsIkNPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9TVE9SRUQiLCJDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQUxMT0NBVEVEIiwiQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEIiwiQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfQUxMT0NBVEVEIiwiU0NBTEVTX1JPVEFUSU9OU19FTEVNRU5UU19QRVJfVEVYRUwiLCJDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCIsIlNDRU5FX0lOREVYRVNfRUxFTUVOVFNfUEVSX1RFWEVMIiwiU0NFTkVfRkFERUlOX1JBVEVfRkFTVCIsIlNDRU5FX0ZBREVJTl9SQVRFX0dSQURVQUwiLCJsb2dnZXIiLCJ0b0hhbGZGbG9hdCIsIkRhdGFVdGlscyIsImZyb21IYWxmRmxvYXQiLCJ0b1VuY29tcHJlc3NlZEZsb2F0IiwiZnJvbVVpbnQ4IiwidG9VaW50OCIsImZyb21IYWxmRmxvYXRUb1VpbnQ4IiwiZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwiLCJjb3B5QmV0d2VlbkJ1ZmZlcnMiLCJ1aW50RW5jb2RlZEZsb2F0IiwiQkFTRV9DT01QT05FTlRfQ09VTlQiLCJWZWN0b3IzIiwiTWF0cml4NCIsIlF1YXRlcm5pb24iLCJFdWxlciIsIkxvb3BSZXBlYXQiLCJMb29wT25jZSIsIk9iamVjdDNEIiwiQnVmZmVyR2VvbWV0cnkiLCJCdWZmZXJBdHRyaWJ1dGUiLCJJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSIsIkluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZSIsIkR5bmFtaWNEcmF3VXNhZ2UiLCJWZWN0b3IyIiwiQ29sb3IiLCJTaGFkZXJNYXRlcmlhbCIsIk5vcm1hbEJsZW5kaW5nIiwiRG91YmxlU2lkZSIsIk1lc2hCYXNpY01hdGVyaWFsIiwiVW5zaWduZWRCeXRlVHlwZSIsIkZsb2F0VHlwZSIsIkhhbGZGbG9hdFR5cGUiLCJSR0JBRm9ybWF0IiwiUmVkRm9ybWF0IiwiUmVkSW50ZWdlckZvcm1hdCIsIlJHRm9ybWF0IiwiUkdJbnRlZ2VyRm9ybWF0IiwiUkdCSW50ZWdlckZvcm1hdCIsIlJHQkFJbnRlZ2VyRm9ybWF0IiwiTWVzaCIsIkJveDMiLCJWZWN0b3I0IiwiRGF0YVRleHR1cmUiLCJVbnNpZ25lZEludFR5cGUiLCJNYXRyaXgzIiwiUGFyc2VFcnJvciIsIlRIUkVFIiwiU2NlbmUiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsIk9ydGhvZ3JhcGhpY0NhbWVyYSIsIk1hdGhVdGlscyIsIldlYkdMUmVuZGVyZXIiLCJPcmJpdENvbnRyb2xzIiwiQ2xvY2siLCJCb25lIiwiQW5pbWF0aW9uTWl4ZXIiLCJHTFRGTG9hZGVyIiwiU2tlbGV0b24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RTtBQUNBLFlBQVksd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR2Qsa0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNGLFlBQVksd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0Esa0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNGLFlBQVksd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0Esa0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNGLFlBQVksd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0Esa0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNGLFlBQVksd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0Esa0JBQWdC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QUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM3QyxZQUFZLE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDakMsWUFBWSxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0MsWUFBWSxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQy9DLFlBQVksTUFBTSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMvQyxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRCxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRCxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRCxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRCxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRCxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRCxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsT0FBTyxJQUFJNkIsVUFB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LEdBQUcsQ0FBQyxDQUFDO0FBQzVCLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxPQUFPLFdBQVcsQ0FBQyx3QkFBd0IsR0FBRyxDQUFDLEVBQUU7QUFDckQsUUFBUSxNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNyRSxRQUFRLElBQUksU0FBUyxHQUFHLDRDQUE0QyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDL0YsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUQsUUFBUSxPQUFPLFNBQVMsQ0FBQztBQUN6QixJQUFJLENBQUM7QUFDTDtBQUNBLElBQUksUUFBUSxDQUFDLEtBQUssRUFBRTtBQUNwQixRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hDLFFBQVEsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQzFCLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFO0FBQ3BCLFFBQVEsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xDLElBQUksQ0FBQztBQUNMO0FBQ0EsSUFBSSxlQUFlLEdBQUc7QUFDdEIsUUFBUSxNQUFNLFFBQVEsR0FBRyxzQkFBc0IsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDM0YsUUFBUSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2hDLFFBQVEsT0FBTyxRQUFRLENBQUM7QUFDeEIsSUFBSSxDQUFD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LENBQUMsR0FBRyxDQUFDLENBQUM7QUFDcEQsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDM0UsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksT0FBTyxRQUFRLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLEtBQUs7QUFDdkQsUUFBUSxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUMzQyxRQUFRLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzNDLFFBQVEsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0MsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksT0FBTyxJQUFJLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLFlBQVksRUFBRSxRQUFRLEtBQUs7QUFDbEUsUUFBUSxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDcEQsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxNQUFNLEVBQUUsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDM0UsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxPQUFPLHlCQUF5QixHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEtBQUs7QUFDakcsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNyRCxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3JELFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDckQsSUFBSSxDQUFDLENBQUM7QUFDTjtBQUNBLElBQUksT0FBTyx5QkFBeUIsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLO0FBQ3BGLHdDQUF3QyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEtBQUs7QUFDNUc7QUFDQSxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQy9DLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDL0MsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMvQyxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQy9DLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDaEQ7QUFDQSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0UsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQy9EO0FBQ0EsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQy9EO0FBQ0EsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUztBQUN2RixvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5RyxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xHLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlHLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVM7QUFDdkYsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0csUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQy9EO0FBQ0EsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQy9EO0FBQ0EsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0gsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMvRCxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxPQUFPLFdBQVcsQ0FB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QUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxRSxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxRQUFRLENBQUM7QUFDVDtBQUNBLFFBQVEsTUFBTSxVQUFVLEdBQUcsSUFBSUEsYUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBUyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRTtBQUMxRSxJQUFJLE1BQU0sVUFBVSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7QUFDckUsSUFBSSxNQUFNLFFBQVEsR0FBRyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUMzQztBQUNBLElBQUksTUFBTSxxQkFBcUIsR0FBRyxJQUFJcEIsYUFBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN4RCxJQUFJLE1BQU0scUJBQXFCLEdBQUcsSUFBSSxZQUFZLENBQUMscUJBQXFCLENBQUMsQ0FBQyxHQUFHLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMxRyxJQUFJLE1BQU0sd0JBQXdCLEdBQUcsSUFBSSxXQUFXLENBQUMscUJBQXFCLENBQUMsQ0FBQyxHQUFHLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM1RztBQUNBLElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUN2QztBQUNBLFFBQVEscUJBQXFCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdELFFBQVEscUJBQXFCLENBQUMsQ0FBQyxH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QSxRQUFRLElBQUk7QUFDWjtBQUNBLFlBQVksTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsRSxZQUFZLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDcEU7QUFDQTtBQUNBLFlBQVksTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuRSxZQUFZLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7QUFDcEU7QUFDQTtBQUNBLFlBQVksTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNqRSxZQUFZLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDbkU7QUFDQTtBQUNBLFlBQVksTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNuRSxZQUFZLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRixZQUFZLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRixRQUFRLENBQUMsQ0FBQyxPQUFP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
