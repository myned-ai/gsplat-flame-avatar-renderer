import * as THREE from 'three';
import { DataUtils, Vector3, Matrix4, Quaternion, Euler, LoopOnce, LoopRepeat, Object3D, BufferGeometry, BufferAttribute, InstancedBufferGeometry, InstancedBufferAttribute, DynamicDrawUsage, Vector2, Color, ShaderMaterial, DoubleSide, NormalBlending, MeshBasicMaterial, Mesh, Box3, Vector4, DataTexture, RGBAIntegerFormat, UnsignedIntType, RGBAFormat, FloatType, RGFormat, UnsignedByteType, HalfFloatType, RedIntegerFormat, RedFormat, RGIntegerFormat, RGBIntegerFormat, Matrix3, Scene, PerspectiveCamera, OrthographicCamera, MathUtils, WebGLRenderer, Clock, Bone, AnimationMixer, Skeleton } from 'three';
import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';
import JSZip from 'jszip';
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';

/**
 * Log level enumeration for controlling verbosity
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const LogLevel = {
    None: 0,
    Error: 1,
    Warning: 2,
    Info: 3,
    Debug: 4
};

/**
 * Render mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const RenderMode = {
    Always: 0,
    OnChange: 1,
    Never: 2
};

/**
 * Scene format enumeration for supported file types
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar usage - only PLY format is supported.
 */
const SceneFormat = {
    'Ply': 0
};

/**
 * Determine scene format from file path
 * @param {string} path - File path
 * @returns {number|null} Scene format or null if unknown
 */
const sceneFormatFromPath = (path) => {
    if (path.endsWith('.ply')) return SceneFormat.Ply;
    return null;
};

/**
 * Scene reveal mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const SceneRevealMode = {
    Default: 0,
    Gradual: 1,
    Instant: 2
};

/**
 * Splat render mode enumeration
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 */
const SplatRenderMode = {
    ThreeD: 0,
    TwoD: 1
};

/**
 * EngineConstants
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Core constants for Gaussian Splat rendering.
 */

let Constants$1 = class Constants {
    static DefaultSplatSortDistanceMapPrecision = 16;
    static MemoryPageSize = 65536;
    static BytesPerFloat = 4;
    static BytesPerInt = 4;
    static MaxScenes = 32;
    static ProgressiveLoadSectionSize = 262144;
    static ProgressiveLoadSectionDelayDuration = 15;
    static SphericalHarmonics8BitCompressionRange = 3;
};

const DefaultSphericalHarmonics8BitCompressionRange = Constants$1.SphericalHarmonics8BitCompressionRange;

// SplatMesh constants
const COVARIANCES_ELEMENTS_PER_SPLAT$1 = 6;
const CENTER_COLORS_ELEMENTS_PER_SPLAT$1 = 4;

const COVARIANCES_ELEMENTS_PER_TEXEL_STORED$1 = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED$1 = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED$1 = 6;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED$1 = 8;
const SCALES_ROTATIONS_ELEMENTS_PER_TEXEL$1 = 4;
const CENTER_COLORS_ELEMENTS_PER_TEXEL$1 = 4;
const SCENE_INDEXES_ELEMENTS_PER_TEXEL$1 = 1;

const SCENE_FADEIN_RATE_FAST$1 = 0.012;
const SCENE_FADEIN_RATE_GRADUAL$1 = 0.003;

// Viewer constants
const THREE_CAMERA_FOV = 50;
const MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT = 0.5;
const CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION = 60;
const MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER = 1500000;
const FOCUS_MARKER_FADE_IN_SPEED = 0.4;
const FOCUS_MARKER_FADE_OUT_SPEED = 0.12;

// Internal load types for loaders
const InternalLoadType = {
    DirectToSplatBuffer: 0,
    DirectToSplatArray: 1,
    DownloadBeforeProcessing: 2
};

// Loader status
const LoaderStatus = {
    'Downloading': 0,
    'Processing': 1,
    'Done': 2
};

/**
 * LoaderUtils
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Loader utilities for decoding text and resolving URLs.
 */

class LoaderUtils {

    /**
     * @deprecated Use TextDecoder instead
     */
    static decodeText(array) {
        if (typeof TextDecoder !== 'undefined') {
            return new TextDecoder().decode(array);
        }

        // Fallback for environments without TextDecoder
        let s = '';

        for (let i = 0, il = array.length; i < il; i++) {
            // Implicitly assumes little-endian.
            s += String.fromCharCode(array[i]);
        }

        try {
            // merges multi-byte utf-8 characters.
            return decodeURIComponent(escape(s));
        } catch {
            // see #16358 - ignore decoding errors
            return s;
        }
    }

    static extractUrlBase(url) {
        const index = url.lastIndexOf('/');

        if (index === -1) return './';

        return url.slice(0, index + 1);
    }

    static resolveURL(url, path) {
        // Invalid URL
        if (typeof url !== 'string' || url === '') return '';

        // Host Relative URL
        if (/^https?:\/\//i.test(path) && /^\//.test(url)) {
            path = path.replace(/(^https?:\/\/[^/]+).*/i, '$1');
        }

        // Absolute URL http://,https://,//
        if (/^(https?:)?\/\//i.test(url)) return url;

        // Data URI
        if (/^data:.*,.*$/i.test(url)) return url;

        // Blob URL
        if (/^blob:.*$/i.test(url)) return url;

        // Relative URL
        return path + url;
    }
}

/**
 * ApplicationError - Base error class for all application errors
 *
 * Provides structured error handling with error codes and cause tracking.
 * All domain-specific errors should extend this class.
 *
 * @extends Error
 */
class ApplicationError extends Error {
    /**
     * Create an ApplicationError
     * @param {string} message - Human-readable error message
     * @param {string} code - Machine-readable error code for programmatic handling
     * @param {Error} [cause=null] - Original error that caused this error (for error chaining)
     */
    constructor(message, code, cause = null) {
        super(message);
        this.name = this.constructor.name;
        this.code = code;
        this.cause = cause;

        // Capture stack trace, excluding constructor call from it
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, this.constructor);
        }
    }

    /**
     * Convert error to JSON for logging/transmission
     * @returns {object} JSON representation of error
     */
    toJSON() {
        return {
            name: this.name,
            message: this.message,
            code: this.code,
            stack: this.stack,
            cause: this.cause ? {
                name: this.cause.name,
                message: this.cause.message
            } : null
        };
    }
}

/**
 * ValidationError - Thrown when input validation fails
 *
 * Used for invalid parameters, out-of-range values, or malformed data.
 *
 * @extends ApplicationError
 */
class ValidationError extends ApplicationError {
    /**
     * Create a ValidationError
     * @param {string} message - Validation failure description
     * @param {string} field - Name of the field that failed validation
     * @param {Error} [cause=null] - Original error that caused this validation failure
     */
    constructor(message, field, cause = null) {
        super(message, 'VALIDATION_ERROR', cause);
        this.field = field;
    }
}

/**
 * NetworkError - Thrown when network operations fail
 *
 * Used for fetch failures, timeouts, or HTTP error responses.
 *
 * @extends ApplicationError
 */
class NetworkError extends ApplicationError {
    /**
     * Create a NetworkError
     * @param {string} message - Network error description
     * @param {number} [statusCode=0] - HTTP status code (if applicable)
     * @param {Error} [cause=null] - Original error that caused this network failure
     */
    constructor(message, statusCode = 0, cause = null) {
        super(message, 'NETWORK_ERROR', cause);
        this.statusCode = statusCode;
    }
}

/**
 * AssetLoadError - Thrown when asset loading fails
 *
 * Used for failures loading models, textures, or other asset files.
 *
 * @extends ApplicationError
 */
class AssetLoadError extends ApplicationError {
    /**
     * Create an AssetLoadError
     * @param {string} message - Asset load failure description
     * @param {string} assetPath - Path to the asset that failed to load
     * @param {Error} [cause=null] - Original error that caused this load failure
     */
    constructor(message, assetPath, cause = null) {
        super(message, 'ASSET_LOAD_ERROR', cause);
        this.assetPath = assetPath;
    }
}

/**
 * ResourceDisposedError - Thrown when attempting to use a disposed resource
 *
 * Used to prevent use-after-dispose bugs.
 *
 * @extends ApplicationError
 */
class ResourceDisposedError extends ApplicationError {
    /**
     * Create a ResourceDisposedError
     * @param {string} resourceName - Name of the disposed resource
     */
    constructor(resourceName) {
        super(
            `Cannot use ${resourceName}: resource has been disposed`,
            'RESOURCE_DISPOSED_ERROR'
        );
        this.resourceName = resourceName;
    }
}

/**
 * InitializationError - Thrown when initialization fails
 *
 * Used when required setup steps fail or prerequisites are not met.
 *
 * @extends ApplicationError
 */
class InitializationError extends ApplicationError {
    /**
     * Create an InitializationError
     * @param {string} message - Initialization failure description
     * @param {string} component - Name of component that failed to initialize
     * @param {Error} [cause=null] - Original error that caused this initialization failure
     */
    constructor(message, component, cause = null) {
        super(message, 'INITIALIZATION_ERROR', cause);
        this.component = component;
    }
}

/**
 * ParseError - Thrown when parsing data fails
 *
 * Used for malformed file formats, invalid JSON, or corrupt data.
 *
 * @extends ApplicationError
 */
let ParseError$1 = class ParseError extends ApplicationError {
    /**
     * Create a ParseError
     * @param {string} message - Parse failure description
     * @param {string} dataType - Type of data being parsed (e.g., 'JSON', 'PLY', 'GLB')
     * @param {Error} [cause=null] - Original error that caused this parse failure
     */
    constructor(message, dataType, cause = null) {
        super(message, 'PARSE_ERROR', cause);
        this.dataType = dataType;
    }
};

/**
 * Logger - Structured logging system
 *
 * Provides leveled logging with optional output suppression for production.
 * Replaces direct console.log calls for better control and debugging.
 */

/**
 * Logger levels in order of severity
 * Note: Named LoggerLevel to avoid conflict with existing LogLevel enum
 */
const LoggerLevel = Object.freeze({
    DEBUG: 0,
    INFO: 1,
    WARN: 2,
    ERROR: 3,
    NONE: 4
});

/**
 * Logger class for structured application logging
 */
class Logger {
    /**
     * Create a Logger instance
     * @param {string} namespace - Logger namespace (e.g., 'Renderer', 'Loader')
     * @param {number} [minLevel=LoggerLevel.INFO] - Minimum log level to output
     */
    constructor(namespace, minLevel = LoggerLevel.INFO) {
        this.namespace = namespace;
        this.minLevel = minLevel;
    }

    /**
     * Set minimum log level
     * @param {number} level - Minimum level from LoggerLevel enum
     */
    setLevel(level) {
        this.minLevel = level;
    }

    /**
     * Format log message with namespace and timestamp
     * @private
     * @param {string} level - Log level name
     * @param {Array} args - Log arguments
     * @returns {Array} Formatted arguments
     */
    _format(level, args) {
        const timestamp = new Date().toISOString();
        const prefix = `[${timestamp}] [${level}] [${this.namespace}]`;
        return [prefix, ...args];
    }

    /**
     * Log debug message (most verbose)
     * @param {...*} args - Arguments to log
     */
    debug(...args) {
        if (this.minLevel <= LoggerLevel.DEBUG) {
            console.debug(...this._format('DEBUG', args));
        }
    }

    /**
     * Log info message
     * @param {...*} args - Arguments to log
     */
    info(...args) {
        if (this.minLevel <= LoggerLevel.INFO) {
            console.info(...this._format('INFO', args));
        }
    }

    /**
     * Log warning message
     * @param {...*} args - Arguments to log
     */
    warn(...args) {
        if (this.minLevel <= LoggerLevel.WARN) {
            console.warn(...this._format('WARN', args));
        }
    }

    /**
     * Log error message
     * @param {...*} args - Arguments to log
     */
    error(...args) {
        if (this.minLevel <= LoggerLevel.ERROR) {
            console.error(...this._format('ERROR', args));
        }
    }

    /**
     * Log error with stack trace
     * @param {Error} error - Error object
     * @param {string} [context] - Additional context
     */
    errorWithTrace(error, context = '') {
        if (this.minLevel <= LoggerLevel.ERROR) {
            const contextStr = context ? ` Context: ${context}` : '';
            console.error(...this._format('ERROR', [
                `${error.message}${contextStr}`,
                '\nStack:', error.stack
            ]));
        }
    }

    /**
     * Create a child logger with extended namespace
     * @param {string} childNamespace - Child namespace to append
     * @returns {Logger} New logger with combined namespace
     */
    child(childNamespace) {
        return new Logger(`${this.namespace}:${childNamespace}`, this.minLevel);
    }
}

/**
 * Global logger registry
 * @private
 */
const loggers = new Map();

/**
 * Global log level (affects all new loggers)
 * @private
 */
let globalLogLevel = LoggerLevel.INFO;

/**
 * Set global log level for all loggers
 * @param {number} level - Log level from LoggerLevel enum
 */
function setGlobalLogLevel(level) {
    globalLogLevel = level;
    // Update existing loggers
    for (const logger of loggers.values()) {
        logger.setLevel(level);
    }
}

/**
 * Get or create a logger for a namespace
 * @param {string} namespace - Logger namespace
 * @returns {Logger} Logger instance
 */
function getLogger(namespace) {
    if (!loggers.has(namespace)) {
        loggers.set(namespace, new Logger(namespace, globalLogLevel));
    }
    return loggers.get(namespace);
}

/**
 * Configure logging for production (suppress all logs)
 */
function configureForProduction() {
    setGlobalLogLevel(LoggerLevel.NONE);
}

/**
 * Configure logging for development (show all logs)
 */
function configureForDevelopment() {
    setGlobalLogLevel(LoggerLevel.DEBUG);
}

// Export default logger for convenience
getLogger('App');

/**
 * Core utility functions for Gaussian Splat rendering
 *
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 *
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const logger$9 = getLogger('Util');

/**
 * Custom error for aborted operations
 * @deprecated Use NetworkError instead for consistency
 */
class AbortedPromiseError extends Error {
    constructor(msg) {
        super(msg);
        this.name = 'AbortedPromiseError';
        this.code = 'ABORTED';
    }
}

/**
 * Fetch with progress tracking using standard AbortController
 *
 * @param {string} path - URL to fetch
 * @param {Function} [onProgress] - Progress callback (percent, percentLabel, chunk, fileSize)
 * @param {boolean} [saveChunks=true] - Whether to save and return downloaded chunks
 * @param {object} [headers] - Optional HTTP headers
 * @returns {Promise<ArrayBuffer>} Promise that resolves with downloaded data
 * @throws {NetworkError} If fetch fails or is aborted
 */
const fetchWithProgress = function(path, onProgress, saveChunks = true, headers) {

    const abortController = new AbortController();
    const signal = abortController.signal;
    let aborted = false;

    let onProgressCalledAtComplete = false;
    const localOnProgress = (percent, percentLabel, chunk, fileSize) => {
        if (onProgress && !onProgressCalledAtComplete) {
            try {
                onProgress(percent, percentLabel, chunk, fileSize);
                if (percent === 100) {
                    onProgressCalledAtComplete = true;
                }
            } catch (error) {
                // Don't let progress callback errors break the download
                logger$9.error('Error in progress callback:', error);
            }
        }
    };

    const promise = new Promise((resolve, reject) => {
        const fetchOptions = { signal };
        if (headers) fetchOptions.headers = headers;

        fetch(path, fetchOptions)
        .then(async (data) => {
            // Handle HTTP error responses
            if (!data.ok) {
                let errorText = '';
                try {
                    errorText = await data.text();
                } catch {
                    // Ignore if we can't read error text
                }
                reject(new NetworkError(
                    `Fetch failed: ${data.statusText}${errorText ? ' - ' + errorText : ''}`,
                    data.status
                ));
                return;
            }

            const reader = data.body?.getReader();
            if (!reader) {
                reject(new NetworkError('Response body is not readable', 0));
                return;
            }

            let bytesDownloaded = 0;
            const _fileSize = data.headers.get('Content-Length');
            const fileSize = _fileSize ? parseInt(_fileSize, 10) : undefined;

            const chunks = [];

            while (!aborted) {
                try {
                    const { value: chunk, done } = await reader.read();
                    if (done) {
                        localOnProgress(100, '100%', chunk, fileSize);
                        if (saveChunks) {
                            const buffer = new Blob(chunks).arrayBuffer();
                            resolve(buffer);
                        } else {
                            resolve();
                        }
                        break;
                    }
                    bytesDownloaded += chunk.length;
                    let percent;
                    let percentLabel;
                    if (fileSize !== undefined) {
                        percent = (bytesDownloaded / fileSize) * 100;
                        percentLabel = `${percent.toFixed(2)}%`;
                    }
                    if (saveChunks) {
                        chunks.push(chunk);
                    }
                    localOnProgress(percent, percentLabel, chunk, fileSize);
                } catch (error) {
                    reject(new NetworkError(
                        `Error reading response stream: ${error.message}`,
                        0,
                        error
                    ));
                    return;
                }
            }
        })
        .catch((error) => {
            // Don't wrap if already a NetworkError
            if (error instanceof NetworkError) {
                reject(error);
            } else if (error.name === 'AbortError') {
                reject(new NetworkError('Fetch aborted by user', 0, error));
            } else {
                reject(new NetworkError(
                    `Fetch failed: ${error.message || 'Unknown error'}`,
                    0,
                    error
                ));
            }
        });
    });

    // Attach abort functionality to the promise
    promise.abort = (reason) => {
        aborted = true;
        abortController.abort(reason);
    };
    promise.abortController = abortController;

    return promise;
};

// Clamp value between min and max
const clamp = function(val, min, max) {
    return Math.max(Math.min(val, max), min);
};

// Get current time in seconds
const getCurrentTime = function() {
    return performance.now() / 1000;
};

// Dispose all meshes in a scene graph
const disposeAllMeshes = (object3D) => {
    if (object3D.geometry) {
        object3D.geometry.dispose();
        object3D.geometry = null;
    }
    if (object3D.material) {
        object3D.material.dispose();
        object3D.material = null;
    }
    if (object3D.children) {
        for (let child of object3D.children) {
            disposeAllMeshes(child);
        }
    }
};

// Delayed execution helper
const delayedExecute = (func, fast) => {
    return new Promise((resolve) => {
        window.setTimeout(() => {
            resolve(func());
        }, fast ? 1 : 50);
    });
};

// Get spherical harmonics component count for degree
const getSphericalHarmonicsComponentCountForDegree = (sphericalHarmonicsDegree = 0) => {
    switch (sphericalHarmonicsDegree) {
        case 1:
            return 9;
        case 2:
            return 24;
    }
    return 0;
};

// Create native promise with extracted components
const nativePromiseWithExtractedComponents = () => {
    let resolver;
    let rejecter;
    const promise = new Promise((resolve, reject) => {
        resolver = resolve;
        rejecter = reject;
    });
    return {
        'promise': promise,
        'resolve': resolver,
        'reject': rejecter
    };
};

/**
 * Create a promise with extracted resolve/reject functions and optional abort capability
 * Uses standard Promise with attached abort method
 */
const abortablePromiseWithExtractedComponents = (abortHandler) => {
    let resolver;
    let rejecter;
    const promise = new Promise((resolve, reject) => {
        resolver = resolve;
        rejecter = reject;
    });
    
    // Attach abort method to promise
    promise.abort = abortHandler || (() => {});
    
    return {
        'promise': promise,
        'resolve': resolver,
        'reject': rejecter
    };
};

// Semver class for version handling
class Semver {
    constructor(major, minor, patch) {
        this.major = major;
        this.minor = minor;
        this.patch = patch;
    }

    toString() {
        return `${this.major}_${this.minor}_${this.patch}`;
    }
}

// iOS detection
function isIOS() {
    const ua = navigator.userAgent;
    return ua.indexOf('iPhone') > 0 || ua.indexOf('iPad') > 0;
}

function getIOSSemever() {
    if (isIOS()) {
        const extract = navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);
        return new Semver(
            parseInt(extract[1] || 0, 10),
            parseInt(extract[2] || 0, 10),
            parseInt(extract[3] || 0, 10)
        );
    }
    return null;
}

// Half float conversion utilities
const toHalfFloat$1 = DataUtils.toHalfFloat.bind(DataUtils);
const fromHalfFloat$1 = DataUtils.fromHalfFloat.bind(DataUtils);
const DefaultSphericalHarmonics8BitCompressionHalfRange = DefaultSphericalHarmonics8BitCompressionRange / 2.0;

// Uncompress float based on compression level
const toUncompressedFloat$1 = (f, compressionLevel, isSH = false, range8BitMin, range8BitMax) => {
    if (compressionLevel === 0) {
        return f;
    } else if (compressionLevel === 1 || (compressionLevel === 2 && !isSH)) {
        return DataUtils.fromHalfFloat(f);
    } else if (compressionLevel === 2) {
        return fromUint8$1(f, range8BitMin, range8BitMax);
    }
};

// Convert to uint8
const toUint8$1 = (v, rangeMin, rangeMax) => {
    v = clamp(v, rangeMin, rangeMax);
    const range = (rangeMax - rangeMin);
    return clamp(Math.floor((v - rangeMin) / range * 255), 0, 255);
};

// Convert from uint8
const fromUint8$1 = (v, rangeMin, rangeMax) => {
    const range = (rangeMax - rangeMin);
    return (v / 255 * range + rangeMin);
};

// Half float to uint8
const fromHalfFloatToUint8$1 = (v, rangeMin, rangeMax) => {
    return toUint8$1(fromHalfFloat$1(v), rangeMin, rangeMax);
};

// Uint8 to half float
const fromUint8ToHalfFloat = (v, rangeMin, rangeMax) => {
    return toHalfFloat$1(fromUint8$1(v, rangeMin, rangeMax));
};

// Read float from DataView based on compression level
const dataViewFloatForCompressionLevel$1 = (dataView, floatIndex, compressionLevel, isSH = false) => {
    if (compressionLevel === 0) {
        return dataView.getFloat32(floatIndex * 4, true);
    } else if (compressionLevel === 1 || (compressionLevel === 2 && !isSH)) {
        return dataView.getUint16(floatIndex * 2, true);
    } else {
        return dataView.getUint8(floatIndex, true);
    }
};

// Convert between compression levels
const convertBetweenCompressionLevels = function() {
    const noop = (v) => v;

    return function(val, fromLevel, toLevel, isSH = false) {
        if (fromLevel === toLevel) return val;
        let outputConversionFunc = noop;

        if (fromLevel === 2 && isSH) {
            if (toLevel === 1) outputConversionFunc = fromUint8ToHalfFloat;
            else if (toLevel === 0) {
                outputConversionFunc = fromUint8$1;
            }
        } else if (fromLevel === 2 || fromLevel === 1) {
            if (toLevel === 0) outputConversionFunc = fromHalfFloat$1;
            else if (toLevel === 2) {
                if (!isSH) outputConversionFunc = noop;
                else outputConversionFunc = fromHalfFloatToUint8$1;
            }
        } else if (fromLevel === 0) {
            if (toLevel === 1) outputConversionFunc = toHalfFloat$1;
            else if (toLevel === 2) {
                if (!isSH) outputConversionFunc = toHalfFloat$1;
                else outputConversionFunc = toUint8$1;
            }
        }

        return outputConversionFunc(val);
    };
}();

// Copy between buffers
const copyBetweenBuffers$1 = (srcBuffer, srcOffset, destBuffer, destOffset, byteCount = 0) => {
    const src = new Uint8Array(srcBuffer, srcOffset);
    const dest = new Uint8Array(destBuffer, destOffset);
    for (let i = 0; i < byteCount; i++) {
        dest[i] = src[i];
    }
};

// Float to half float conversion
const floatToHalf = function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(val) {
        floatView[0] = val;
        const x = int32View[0];

        let bits = (x >> 16) & 0x8000;
        let m = (x >> 12) & 0x07ff;
        const e = (x >> 23) & 0xff;

        if (e < 103) return bits;

        if (e > 142) {
            bits |= 0x7c00;
            bits |= ((e == 255) ? 0 : 1) && (x & 0x007fffff);
            return bits;
        }

        if (e < 113) {
            m |= 0x0800;
            bits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);
            return bits;
        }

        bits |= ((e - 112) << 10) | (m >> 1);
        bits += m & 1;
        return bits;
    };
}();

// Encode float as uint
const uintEncodedFloat$1 = function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(f) {
        floatView[0] = f;
        return int32View[0];
    };
}();

// RGBA to integer
const rgbaToInteger = function(r, g, b, a) {
    return r + (g << 8) + (b << 16) + (a << 24);
};

// RGBA array to integer
const rgbaArrayToInteger = function(arr, offset) {
    return arr[offset] + (arr[offset + 1] << 8) + (arr[offset + 2] << 16) + (arr[offset + 3] << 24);
};

// BASE_COMPONENT_COUNT for UncompressedSplatArray
const BASE_COMPONENT_COUNT$1 = 14;

/**
 * ValidationUtils - Security-focused validation utilities
 *
 * CRITICAL: All external inputs MUST be validated before use.
 * This module provides allowlist-based validation following security best practices.
 */


/**
 * Allowed URL protocols (allowlist approach)
 */
const ALLOWED_PROTOCOLS = Object.freeze(['https:', 'http:', 'blob:', 'data:']);

/**
 * Validate and sanitize a URL
 *
 * @param {string} url - URL to validate
 * @param {string} [baseURL] - Base URL for relative URLs (defaults to window.location.href)
 * @returns {string} Sanitized absolute URL
 * @throws {ValidationError} If URL is invalid or uses disallowed protocol
 */
function validateUrl(url, baseURL) {
    if (typeof url !== 'string' || url.length === 0) {
        throw new ValidationError('URL must be a non-empty string', 'url');
    }

    let parsed;
    try {
        // Use base URL if provided, otherwise use window location (browser only)
        const base = baseURL || (typeof window !== 'undefined' ? window.location.href : undefined);
        parsed = new URL(url, base);
    } catch (error) {
        throw new ValidationError(
            `Invalid URL format: ${url}`,
            'url',
            error
        );
    }

    // Validate protocol against allowlist
    if (!ALLOWED_PROTOCOLS.includes(parsed.protocol)) {
        throw new ValidationError(
            `Disallowed protocol: ${parsed.protocol}. Allowed protocols: ${ALLOWED_PROTOCOLS.join(', ')}`,
            'url.protocol'
        );
    }

    return parsed.href;
}

/**
 * Validate asset path to prevent path traversal attacks
 *
 * @param {string} path - File path to validate
 * @returns {string} Validated path
 * @throws {ValidationError} If path contains traversal sequences
 */
function validateAssetPath(path) {
    if (typeof path !== 'string' || path.length === 0) {
        throw new ValidationError('Asset path must be a non-empty string', 'path');
    }

    // Check for path traversal sequences
    const dangerousPatterns = ['../', '..\\', '%2e%2e/', '%2e%2e\\'];
    const normalizedPath = path.toLowerCase();

    for (const pattern of dangerousPatterns) {
        if (normalizedPath.includes(pattern)) {
            throw new ValidationError(
                `Path traversal detected in asset path: ${path}`,
                'path'
            );
        }
    }

    return path;
}

/**
 * Validate file extension against allowlist
 *
 * @param {string} filename - Filename to validate
 * @param {string[]} allowedExtensions - Array of allowed extensions (e.g., ['.ply', '.glb'])
 * @returns {string} Validated filename
 * @throws {ValidationError} If extension is not allowed
 */
function validateFileExtension(filename, allowedExtensions) {
    if (typeof filename !== 'string' || filename.length === 0) {
        throw new ValidationError('Filename must be a non-empty string', 'filename');
    }

    if (!Array.isArray(allowedExtensions) || allowedExtensions.length === 0) {
        throw new ValidationError(
            'allowedExtensions must be a non-empty array',
            'allowedExtensions'
        );
    }

    const extension = filename.slice(filename.lastIndexOf('.')).toLowerCase();
    const normalizedAllowed = allowedExtensions.map(ext => ext.toLowerCase());

    if (!normalizedAllowed.includes(extension)) {
        throw new ValidationError(
            `File extension ${extension} not allowed. Allowed: ${allowedExtensions.join(', ')}`,
            'filename'
        );
    }

    return filename;
}

/**
 * Validate numeric value is within range
 *
 * @param {number} value - Value to validate
 * @param {number} min - Minimum allowed value (inclusive)
 * @param {number} max - Maximum allowed value (inclusive)
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated value
 * @throws {ValidationError} If value is not a number or out of range
 */
function validateNumberInRange(value, min, max, fieldName) {
    if (typeof value !== 'number' || isNaN(value)) {
        throw new ValidationError(
            `${fieldName} must be a valid number`,
            fieldName
        );
    }

    if (value < min || value > max) {
        throw new ValidationError(
            `${fieldName} must be between ${min} and ${max}, got ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate integer value
 *
 * @param {number} value - Value to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated integer
 * @throws {ValidationError} If value is not an integer
 */
function validateInteger(value, fieldName) {
    if (typeof value !== 'number' || !Number.isInteger(value)) {
        throw new ValidationError(
            `${fieldName} must be an integer`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate positive integer
 *
 * @param {number} value - Value to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {number} Validated positive integer
 * @throws {ValidationError} If value is not a positive integer
 */
function validatePositiveInteger(value, fieldName) {
    validateInteger(value, fieldName);

    if (value <= 0) {
        throw new ValidationError(
            `${fieldName} must be positive, got ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate object has required properties
 *
 * @param {object} obj - Object to validate
 * @param {string[]} requiredProps - Array of required property names
 * @param {string} objectName - Name of object for error messages
 * @returns {object} Validated object
 * @throws {ValidationError} If object is invalid or missing required properties
 */
function validateRequiredProperties(obj, requiredProps, objectName) {
    if (obj === null || typeof obj !== 'object') {
        throw new ValidationError(
            `${objectName} must be an object`,
            objectName
        );
    }

    for (const prop of requiredProps) {
        if (!(prop in obj) || obj[prop] === undefined) {
            throw new ValidationError(
                `${objectName} missing required property: ${prop}`,
                `${objectName}.${prop}`
            );
        }
    }

    return obj;
}

/**
 * Validate array buffer
 *
 * @param {ArrayBuffer} buffer - Buffer to validate
 * @param {string} fieldName - Name of field for error messages
 * @param {number} [minSize=0] - Minimum size in bytes
 * @returns {ArrayBuffer} Validated buffer
 * @throws {ValidationError} If buffer is invalid or too small
 */
function validateArrayBuffer(buffer, fieldName, minSize = 0) {
    if (!(buffer instanceof ArrayBuffer)) {
        throw new ValidationError(
            `${fieldName} must be an ArrayBuffer`,
            fieldName
        );
    }

    if (buffer.byteLength < minSize) {
        throw new ValidationError(
            `${fieldName} must be at least ${minSize} bytes, got ${buffer.byteLength}`,
            fieldName
        );
    }

    return buffer;
}

/**
 * Validate enum value against allowed values
 *
 * @param {*} value - Value to validate
 * @param {Array} allowedValues - Array of allowed values
 * @param {string} fieldName - Name of field for error messages
 * @returns {*} Validated value
 * @throws {ValidationError} If value is not in allowed values
 */
function validateEnum(value, allowedValues, fieldName) {
    if (!allowedValues.includes(value)) {
        throw new ValidationError(
            `${fieldName} must be one of: ${allowedValues.join(', ')}. Got: ${value}`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate callback function
 *
 * @param {Function} callback - Callback to validate
 * @param {string} fieldName - Name of field for error messages
 * @param {boolean} [required=true] - Whether callback is required
 * @returns {Function|null} Validated callback or null if not required and not provided
 * @throws {ValidationError} If callback is required but not a function
 */
function validateCallback(callback, fieldName, required = true) {
    if (callback === null || callback === undefined) {
        if (required) {
            throw new ValidationError(
                `${fieldName} is required`,
                fieldName
            );
        }
        return null;
    }

    if (typeof callback !== 'function') {
        throw new ValidationError(
            `${fieldName} must be a function`,
            fieldName
        );
    }

    return callback;
}

/**
 * Validate hex color string
 *
 * @param {string} value - Color string to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {string} Validated color string
 * @throws {ValidationError} If color format is invalid
 */
function validateHexColor(value, fieldName) {
    if (typeof value !== 'string') {
        throw new ValidationError(
            `${fieldName} must be a string`,
            fieldName
        );
    }

    const hexColorRegex = /^(#|0x)[0-9A-Fa-f]{6}$/i;
    if (!hexColorRegex.test(value)) {
        throw new ValidationError(
            `${fieldName} must be a valid hex color (e.g., #FFFFFF or 0xFFFFFF)`,
            fieldName
        );
    }

    return value;
}

/**
 * Validate DOM element
 *
 * @param {HTMLElement} element - Element to validate
 * @param {string} fieldName - Name of field for error messages
 * @returns {HTMLElement} Validated element
 * @throws {ValidationError} If element is not a valid DOM element
 */
function validateDOMElement(element, fieldName) {
    if (typeof HTMLElement !== 'undefined' && !(element instanceof HTMLElement)) {
        throw new ValidationError(
            `${fieldName} must be a valid HTML element`,
            fieldName
        );
    }

    return element;
}

/**
 * ObjectPool - Memory-efficient object pooling
 *
 * Reduces garbage collection pressure by reusing objects instead of
 * repeatedly allocating and deallocating them. Critical for real-time rendering.
 */


/**
 * Generic object pool
 */
class ObjectPool {
    /**
     * Create an ObjectPool
     * @param {Function} factory - Function that creates new objects
     * @param {Function} reset - Function that resets an object to initial state
     * @param {number} [initialSize=10] - Number of objects to pre-allocate
     */
    constructor(factory, reset, initialSize = 10) {
        this._factory = factory;
        this._reset = reset;
        this._pool = [];
        this._allocated = 0;
        this._maxSize = initialSize * 10; // Prevent unbounded growth

        // Pre-allocate initial objects
        for (let i = 0; i < initialSize; i++) {
            this._pool.push(factory());
        }
    }

    /**
     * Acquire an object from the pool
     * @returns {*} Pooled object
     */
    acquire() {
        this._allocated++;
        if (this._pool.length > 0) {
            return this._pool.pop();
        }
        // Pool exhausted, create new object
        return this._factory();
    }

    /**
     * Release an object back to the pool
     * @param {*} obj - Object to return to pool
     */
    release(obj) {
        this._allocated--;
        if (this._pool.length < this._maxSize) {
            this._reset(obj);
            this._pool.push(obj);
        }
        // If pool is at max size, let object be garbage collected
    }

    /**
     * Release multiple objects
     * @param {Array} objects - Objects to return to pool
     */
    releaseAll(objects) {
        for (const obj of objects) {
            this.release(obj);
        }
    }

    /**
     * Get pool statistics
     * @returns {object} Pool stats
     */
    getStats() {
        return {
            available: this._pool.length,
            allocated: this._allocated,
            maxSize: this._maxSize
        };
    }

    /**
     * Clear the pool and release all objects
     */
    dispose() {
        this._pool.length = 0;
        this._allocated = 0;
    }
}

/**
 * Pre-configured pools for common Three.js objects
 */

/**
 * Vector3 pool
 * @type {ObjectPool}
 */
const vector3Pool = new ObjectPool(
    () => new Vector3(),
    (v) => v.set(0, 0, 0),
    50 // Pre-allocate 50 vectors
);

/**
 * Matrix4 pool
 * @type {ObjectPool}
 */
const matrix4Pool = new ObjectPool(
    () => new Matrix4(),
    (m) => m.identity(),
    20 // Pre-allocate 20 matrices
);

/**
 * Quaternion pool
 * @type {ObjectPool}
 */
const quaternionPool = new ObjectPool(
    () => new Quaternion(),
    (q) => q.set(0, 0, 0, 1),
    30 // Pre-allocate 30 quaternions
);

/**
 * Euler pool
 * @type {ObjectPool}
 */
const eulerPool = new ObjectPool(
    () => new Euler(),
    (e) => e.set(0, 0, 0),
    30 // Pre-allocate 30 eulers
);

/**
 * Scoped pool allocation helper
 *
 * Automatically releases pooled objects when scope exits.
 * Use with try/finally to ensure cleanup.
 *
 * @example
 * const scope = new PoolScope();
 * try {
 *   const v1 = scope.vector3();
 *   const v2 = scope.vector3();
 *   // Use vectors...
 * } finally {
 *   scope.releaseAll();
 * }
 */
class PoolScope {
    constructor() {
        this._allocated = [];
    }

    /**
     * Acquire a Vector3 from pool
     * @returns {Vector3} Pooled vector
     */
    vector3() {
        const obj = vector3Pool.acquire();
        this._allocated.push({ pool: vector3Pool, obj });
        return obj;
    }

    /**
     * Acquire a Matrix4 from pool
     * @returns {Matrix4} Pooled matrix
     */
    matrix4() {
        const obj = matrix4Pool.acquire();
        this._allocated.push({ pool: matrix4Pool, obj });
        return obj;
    }

    /**
     * Acquire a Quaternion from pool
     * @returns {Quaternion} Pooled quaternion
     */
    quaternion() {
        const obj = quaternionPool.acquire();
        this._allocated.push({ pool: quaternionPool, obj });
        return obj;
    }

    /**
     * Acquire an Euler from pool
     * @returns {Euler} Pooled euler
     */
    euler() {
        const obj = eulerPool.acquire();
        this._allocated.push({ pool: eulerPool, obj });
        return obj;
    }

    /**
     * Release all objects allocated in this scope
     */
    releaseAll() {
        for (const { pool, obj } of this._allocated) {
            pool.release(obj);
        }
        this._allocated.length = 0;
    }

    /**
     * Get count of allocated objects in this scope
     * @returns {number} Number of allocated objects
     */
    getAllocatedCount() {
        return this._allocated.length;
    }
}

/**
 * Module-level temporary objects for hot-path reuse
 * IMPORTANT: These are NOT thread-safe. Only use in single-threaded contexts.
 * Reset these before use to avoid stale data.
 */
const tempVector3A = new Vector3();
const tempVector3B = new Vector3();
const tempVector3C = new Vector3();
const tempMatrix4A = new Matrix4();
const tempMatrix4B = new Matrix4();
const tempQuaternionA = new Quaternion();
const tempQuaternionB = new Quaternion();

/**
 * Get pool statistics for all pre-configured pools
 * @returns {object} Statistics for all pools
 */
function getPoolStats() {
    return {
        vector3: vector3Pool.getStats(),
        matrix4: matrix4Pool.getStats(),
        quaternion: quaternionPool.getStats(),
        euler: eulerPool.getStats()
    };
}

/**
 * Dispose all pre-configured pools
 */
function disposeAllPools() {
    vector3Pool.dispose();
    matrix4Pool.dispose();
    quaternionPool.dispose();
    eulerPool.dispose();
}

/**
 * BlobUrlManager - Secure blob URL lifecycle management
 *
 * Tracks blob URLs and ensures they are revoked to prevent memory leaks
 * and unauthorized access. Critical for security and resource management.
 */


const logger$8 = getLogger('BlobUrlManager');

/**
 * BlobUrlManager - Manages blob URL lifecycle
 */
class BlobUrlManager {
    constructor() {
        /**
         * Map of blob URL to metadata
         * @private
         */
        this._urls = new Map();

        /**
         * Whether manager has been disposed
         * @private
         */
        this._disposed = false;
    }

    /**
     * Assert manager is not disposed
     * @private
     * @throws {Error} If manager is disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new Error('BlobUrlManager has been disposed');
        }
    }

    /**
     * Create a blob URL from data
     *
     * @param {Blob|ArrayBuffer|Uint8Array} data - Data to create blob from
     * @param {string} mimeType - MIME type (e.g., 'model/gltf-binary')
     * @param {string} [label] - Optional label for debugging
     * @returns {string} Blob URL
     * @throws {ValidationError} If data or mimeType is invalid
     */
    createBlobUrl(data, mimeType, label = '') {
        this._assertNotDisposed();

        // Validate mimeType
        if (typeof mimeType !== 'string' || mimeType.length === 0) {
            throw new ValidationError(
                'mimeType must be a non-empty string',
                'mimeType'
            );
        }

        // Convert data to Blob if needed
        let blob;
        if (data instanceof Blob) {
            blob = data;
        } else if (data instanceof ArrayBuffer || data instanceof Uint8Array) {
            blob = new Blob([data], { type: mimeType });
        } else {
            throw new ValidationError(
                'data must be Blob, ArrayBuffer, or Uint8Array',
                'data'
            );
        }

        // Create blob URL
        const url = URL.createObjectURL(blob);

        // Track metadata
        this._urls.set(url, {
            createdAt: Date.now(),
            mimeType,
            label: label || 'unlabeled',
            size: blob.size
        });

        logger$8.debug(`Created blob URL: ${label || url.substring(0, 50)}, size: ${blob.size} bytes`);

        return url;
    }

    /**
     * Register an externally created blob URL for tracking
     *
     * @param {string} url - Blob URL to track
     * @param {string} [label] - Optional label for debugging
     * @throws {ValidationError} If URL is not a blob URL
     */
    registerBlobUrl(url, label = '') {
        this._assertNotDisposed();

        if (typeof url !== 'string' || !url.startsWith('blob:')) {
            throw new ValidationError(
                'url must be a valid blob URL',
                'url'
            );
        }

        if (!this._urls.has(url)) {
            this._urls.set(url, {
                createdAt: Date.now(),
                mimeType: 'unknown',
                label: label || 'registered-external',
                size: 0
            });

            logger$8.debug(`Registered external blob URL: ${label || url.substring(0, 50)}`);
        }
    }

    /**
     * Revoke a blob URL and remove from tracking
     *
     * @param {string} url - Blob URL to revoke
     * @returns {boolean} True if URL was tracked and revoked
     */
    revokeBlobUrl(url) {
        this._assertNotDisposed();

        if (this._urls.has(url)) {
            const metadata = this._urls.get(url);
            URL.revokeObjectURL(url);
            this._urls.delete(url);

            logger$8.debug(`Revoked blob URL: ${metadata.label}, age: ${Date.now() - metadata.createdAt}ms`);
            return true;
        }

        return false;
    }

    /**
     * Revoke all blob URLs and clear tracking
     */
    revokeAll() {
        this._assertNotDisposed();

        logger$8.debug(`Revoking ${this._urls.size} blob URLs`);

        for (const url of this._urls.keys()) {
            URL.revokeObjectURL(url);
        }

        this._urls.clear();
    }

    /**
     * Get tracked blob URL metadata
     *
     * @param {string} url - Blob URL
     * @returns {object|null} Metadata or null if not tracked
     */
    getMetadata(url) {
        return this._urls.get(url) || null;
    }

    /**
     * Get all tracked blob URLs
     *
     * @returns {Array<{url: string, metadata: object}>} Array of URL info
     */
    getAllTrackedUrls() {
        const urls = [];
        for (const [url, metadata] of this._urls.entries()) {
            urls.push({ url, metadata });
        }
        return urls;
    }

    /**
     * Get statistics about tracked URLs
     *
     * @returns {object} Statistics
     */
    getStats() {
        let totalSize = 0;
        let oldestAge = 0;
        const now = Date.now();

        for (const metadata of this._urls.values()) {
            totalSize += metadata.size;
            const age = now - metadata.createdAt;
            if (age > oldestAge) {
                oldestAge = age;
            }
        }

        return {
            count: this._urls.size,
            totalSize,
            oldestAge
        };
    }

    /**
     * Revoke blob URLs older than specified age
     *
     * @param {number} maxAgeMs - Maximum age in milliseconds
     * @returns {number} Number of URLs revoked
     */
    revokeOlderThan(maxAgeMs) {
        this._assertNotDisposed();

        const now = Date.now();
        const toRevoke = [];

        for (const [url, metadata] of this._urls.entries()) {
            const age = now - metadata.createdAt;
            if (age > maxAgeMs) {
                toRevoke.push(url);
            }
        }

        for (const url of toRevoke) {
            this.revokeBlobUrl(url);
        }

        if (toRevoke.length > 0) {
            logger$8.info(`Revoked ${toRevoke.length} blob URLs older than ${maxAgeMs}ms`);
        }

        return toRevoke.length;
    }

    /**
     * Check if a URL is being tracked
     *
     * @param {string} url - URL to check
     * @returns {boolean} True if URL is tracked
     */
    isTracked(url) {
        return this._urls.has(url);
    }

    /**
     * Dispose manager and revoke all URLs
     */
    dispose() {
        if (this._disposed) {
            return;
        }

        logger$8.debug('Disposing BlobUrlManager');
        this.revokeAll();
        this._disposed = true;
    }
}

/**
 * Global blob URL manager instance
 * @type {BlobUrlManager}
 */
const globalBlobUrlManager = new BlobUrlManager();

/**
 * Get the global blob URL manager
 * @returns {BlobUrlManager} Global manager instance
 */
function getGlobalBlobUrlManager() {
    return globalBlobUrlManager;
}

/**
 * Helper function to create a blob URL with automatic tracking
 *
 * @param {Blob|ArrayBuffer|Uint8Array} data - Data to create blob from
 * @param {string} mimeType - MIME type
 * @param {string} [label] - Optional label for debugging
 * @returns {string} Blob URL
 */
function createTrackedBlobUrl(data, mimeType, label) {
    return globalBlobUrlManager.createBlobUrl(data, mimeType, label);
}

/**
 * Helper function to revoke a blob URL
 *
 * @param {string} url - Blob URL to revoke
 * @returns {boolean} True if URL was tracked and revoked
 */
function revokeTrackedBlobUrl(url) {
    return globalBlobUrlManager.revokeBlobUrl(url);
}

/**
 * RenderLoop - Frame-independent animation loop with budget management
 *
 * Provides a robust requestAnimationFrame loop with:
 * - Delta time calculation for frame-independent updates
 * - Frame budget management to prevent frame drops
 * - Deferred task execution
 * - Performance monitoring
 */


const logger$7 = getLogger('RenderLoop');

/**
 * RenderLoop - Manages animation frame loop
 */
class RenderLoop {
    /**
     * Create a RenderLoop
     * @param {Function} updateFn - Update function called each frame with deltaTime
     * @param {Function} renderFn - Render function called each frame
     * @param {object} [options] - Configuration options
     * @param {number} [options.targetFps=60] - Target frames per second
     * @param {number} [options.maxDeltaTime=0.1] - Maximum delta time in seconds (prevents spiral of death)
     */
    constructor(updateFn, renderFn, options = {}) {
        this._update = updateFn;
        this._render = renderFn;

        this._targetFps = options.targetFps || 60;
        this._maxDeltaTime = options.maxDeltaTime || 0.1; // 100ms max
        this._frameBudget = 1000 / this._targetFps; // ms per frame

        this._running = false;
        this._rafId = null;
        this._lastTime = 0;
        this._frameCount = 0;
        this._deferredTasks = [];

        // Performance tracking
        this._fpsHistory = [];
        this._fpsHistorySize = 60; // Track last 60 frames
        this._lastFpsUpdate = 0;
        this._currentFps = 0;
    }

    /**
     * Start the render loop
     */
    start() {
        if (this._running) {
            logger$7.warn('RenderLoop already running');
            return;
        }

        this._running = true;
        this._lastTime = performance.now();
        this._frameCount = 0;
        logger$7.info('RenderLoop started');

        this._tick();
    }

    /**
     * Stop the render loop
     */
    stop() {
        if (!this._running) {
            return;
        }

        this._running = false;

        if (this._rafId !== null) {
            cancelAnimationFrame(this._rafId);
            this._rafId = null;
        }

        logger$7.info(`RenderLoop stopped after ${this._frameCount} frames`);
    }

    /**
     * Main loop tick
     * @private
     */
    _tick = () => {
        if (!this._running) {
            return;
        }

        const frameStart = performance.now();
        const rawDeltaTime = (frameStart - this._lastTime) / 1000; // Convert to seconds

        // Clamp delta time to prevent spiral of death
        const deltaTime = Math.min(rawDeltaTime, this._maxDeltaTime);

        this._lastTime = frameStart;
        this._frameCount++;

        try {
            // Update logic
            this._update(deltaTime);

            // Render
            this._render();

            // Process deferred tasks if time permits
            const frameElapsed = performance.now() - frameStart;
            const remainingTime = this._frameBudget - frameElapsed;

            if (remainingTime > 1 && this._deferredTasks.length > 0) {
                this._processDeferredTasks(remainingTime - 1); // Leave 1ms margin
            }

            // Update FPS tracking
            this._updateFpsTracking(performance.now() - frameStart);

        } catch (error) {
            logger$7.error('Error in render loop:', error);
            // Continue loop despite error
        }

        // Schedule next frame
        this._rafId = requestAnimationFrame(this._tick);
    };

    /**
     * Update FPS tracking
     * @private
     * @param {number} frameTime - Time taken for this frame in ms
     */
    _updateFpsTracking(frameTime) {
        this._fpsHistory.push(1000 / frameTime);

        if (this._fpsHistory.length > this._fpsHistorySize) {
            this._fpsHistory.shift();
        }

        // Update FPS every second
        const now = performance.now();
        if (now - this._lastFpsUpdate > 1000) {
            this._currentFps = this._fpsHistory.reduce((a, b) => a + b, 0) / this._fpsHistory.length;
            this._lastFpsUpdate = now;
        }
    }

    /**
     * Process deferred tasks within time budget
     * @private
     * @param {number} maxTime - Maximum time in ms to spend on tasks
     */
    _processDeferredTasks(maxTime) {
        const startTime = performance.now();

        while (this._deferredTasks.length > 0) {
            if (performance.now() - startTime >= maxTime) {
                break;
            }

            const task = this._deferredTasks.shift();

            try {
                task.fn();
            } catch (error) {
                logger$7.error(`Error in deferred task: ${task.label}`, error);
            }
        }
    }

    /**
     * Execute task if within frame budget, otherwise defer
     *
     * @param {Function} task - Task function to execute
     * @param {number} [priority=0] - Task priority (higher = more important)
     * @param {string} [label=''] - Task label for debugging
     */
    executeOrDefer(task, priority = 0, label = '') {
        const frameElapsed = performance.now() - this._lastTime;

        if (frameElapsed < this._frameBudget * 0.8) {
            // Within budget, execute now
            task();
        } else {
            // Over budget, defer
            this._deferredTasks.push({ fn: task, priority, label });

            // Sort by priority (higher first)
            this._deferredTasks.sort((a, b) => b.priority - a.priority);
        }
    }

    /**
     * Get current FPS
     * @returns {number} Average FPS over recent frames
     */
    getFps() {
        return Math.round(this._currentFps);
    }

    /**
     * Get performance stats
     * @returns {object} Performance statistics
     */
    getStats() {
        return {
            fps: this.getFps(),
            frameCount: this._frameCount,
            deferredTaskCount: this._deferredTasks.length,
            running: this._running
        };
    }

    /**
     * Check if loop is running
     * @returns {boolean} True if running
     */
    isRunning() {
        return this._running;
    }

    /**
     * Get frame count
     * @returns {number} Total frames rendered
     */
    getFrameCount() {
        return this._frameCount;
    }

    /**
     * Clear all deferred tasks
     */
    clearDeferredTasks() {
        this._deferredTasks.length = 0;
        logger$7.debug('Cleared all deferred tasks');
    }
}

/**
 * FrameBudgetMonitor - Monitors and alerts on frame budget violations
 */
class FrameBudgetMonitor {
    /**
     * Create a FrameBudgetMonitor
     * @param {number} [targetFps=60] - Target FPS
     * @param {Function} [onViolation] - Callback when budget is violated
     */
    constructor(targetFps = 60, onViolation = null) {
        this._targetFps = targetFps;
        this._frameBudget = 1000 / targetFps;
        this._onViolation = onViolation;
        this._violations = 0;
        this._frameStart = 0;
    }

    /**
     * Mark start of frame
     */
    startFrame() {
        this._frameStart = performance.now();
    }

    /**
     * Check if frame is within budget
     * @param {string} [location] - Location identifier for debugging
     * @returns {boolean} True if within budget
     */
    checkBudget(location = '') {
        const elapsed = performance.now() - this._frameStart;
        const withinBudget = elapsed < this._frameBudget;

        if (!withinBudget) {
            this._violations++;

            if (this._onViolation) {
                this._onViolation({
                    location,
                    elapsed,
                    budget: this._frameBudget,
                    overrun: elapsed - this._frameBudget
                });
            }

            logger$7.warn(`Frame budget violation at ${location}: ${elapsed.toFixed(2)}ms / ${this._frameBudget.toFixed(2)}ms`);
        }

        return withinBudget;
    }

    /**
     * Get violation count
     * @returns {number} Total violations
     */
    getViolationCount() {
        return this._violations;
    }

    /**
     * Reset violation count
     */
    resetViolations() {
        this._violations = 0;
    }
}

/**
 * EventEmitter - Observer pattern implementation for event-driven communication
 *
 * Provides decoupled event handling with automatic cleanup to prevent memory leaks.
 * Critical for managing state changes and component communication.
 */


const logger$6 = getLogger('EventEmitter');

/**
 * EventEmitter - Pub/sub event system
 */
class EventEmitter {
    constructor() {
        /**
         * Map of event name to Set of listeners
         * @private
         */
        this._listeners = new Map();

        /**
         * Whether emitter has been disposed
         * @private
         */
        this._disposed = false;

        /**
         * Event emission history for debugging (last N events)
         * @private
         */
        this._eventHistory = [];
        this._maxHistorySize = 50;
    }

    /**
     * Assert emitter is not disposed
     * @private
     * @throws {Error} If emitter is disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new Error('EventEmitter has been disposed');
        }
    }

    /**
     * Subscribe to an event
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler
     * @param {object} [options] - Subscription options
     * @param {boolean} [options.once=false] - Auto-unsubscribe after first call
     * @returns {Function} Unsubscribe function
     * @throws {ValidationError} If parameters are invalid
     */
    on(event, callback, options = {}) {
        this._assertNotDisposed();

        if (typeof event !== 'string' || event.length === 0) {
            throw new ValidationError(
                'event must be a non-empty string',
                'event'
            );
        }

        if (typeof callback !== 'function') {
            throw new ValidationError(
                'callback must be a function',
                'callback'
            );
        }

        // Wrap callback if once option is set
        const wrappedCallback = options.once
            ? (...args) => {
                this.off(event, wrappedCallback);
                callback(...args);
            }
            : callback;

        // Store original callback reference for removal
        if (options.once) {
            wrappedCallback._originalCallback = callback;
        }

        // Add listener
        if (!this._listeners.has(event)) {
            this._listeners.set(event, new Set());
        }
        this._listeners.get(event).add(wrappedCallback);

        logger$6.debug(`Subscribed to event: ${event}`);

        // Return unsubscribe function
        return () => this.off(event, wrappedCallback);
    }

    /**
     * Subscribe to an event (fires once then auto-unsubscribes)
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler
     * @returns {Function} Unsubscribe function
     */
    once(event, callback) {
        return this.on(event, callback, { once: true });
    }

    /**
     * Unsubscribe from an event
     *
     * @param {string} event - Event name
     * @param {Function} callback - Event handler to remove
     * @returns {boolean} True if callback was found and removed
     */
    off(event, callback) {
        this._assertNotDisposed();

        const listeners = this._listeners.get(event);
        if (!listeners) {
            return false;
        }

        // Try to remove directly
        if (listeners.delete(callback)) {
            logger$6.debug(`Unsubscribed from event: ${event}`);
            return true;
        }

        // Try to find by original callback (for once listeners)
        for (const listener of listeners) {
            if (listener._originalCallback === callback) {
                listeners.delete(listener);
                logger$6.debug(`Unsubscribed from event: ${event} (once listener)`);
                return true;
            }
        }

        return false;
    }

    /**
     * Remove all listeners for an event (or all events if no event specified)
     *
     * @param {string} [event] - Event name (optional)
     */
    removeAllListeners(event = null) {
        this._assertNotDisposed();

        if (event) {
            const count = this._listeners.get(event)?.size || 0;
            this._listeners.delete(event);
            logger$6.debug(`Removed ${count} listeners for event: ${event}`);
        } else {
            const totalCount = Array.from(this._listeners.values())
                .reduce((sum, set) => sum + set.size, 0);
            this._listeners.clear();
            logger$6.debug(`Removed all ${totalCount} listeners`);
        }
    }

    /**
     * Emit an event to all subscribers
     *
     * @param {string} event - Event name
     * @param {...*} args - Arguments to pass to listeners
     * @returns {boolean} True if event had listeners
     */
    emit(event, ...args) {
        this._assertNotDisposed();

        const listeners = this._listeners.get(event);
        if (!listeners || listeners.size === 0) {
            return false;
        }

        // Record in history for debugging
        this._recordEvent(event, args);

        // Call all listeners
        let callCount = 0;
        for (const callback of listeners) {
            try {
                callback(...args);
                callCount++;
            } catch (error) {
                logger$6.error(`Error in event listener for '${event}':`, error);
                // Continue calling other listeners
            }
        }

        logger$6.debug(`Emitted event: ${event} to ${callCount} listeners`);

        return true;
    }

    /**
     * Record event in history for debugging
     * @private
     * @param {string} event - Event name
     * @param {Array} args - Event arguments
     */
    _recordEvent(event, args) {
        this._eventHistory.push({
            event,
            timestamp: Date.now(),
            argCount: args.length
        });

        // Keep history bounded
        if (this._eventHistory.length > this._maxHistorySize) {
            this._eventHistory.shift();
        }
    }

    /**
     * Get event emission history
     * @returns {Array} Array of event records
     */
    getEventHistory() {
        return [...this._eventHistory];
    }

    /**
     * Check if event has listeners
     *
     * @param {string} event - Event name
     * @returns {boolean} True if event has listeners
     */
    hasListeners(event) {
        const listeners = this._listeners.get(event);
        return listeners ? listeners.size > 0 : false;
    }

    /**
     * Get listener count for an event
     *
     * @param {string} event - Event name
     * @returns {number} Number of listeners
     */
    listenerCount(event) {
        const listeners = this._listeners.get(event);
        return listeners ? listeners.size : 0;
    }

    /**
     * Get all event names with listeners
     *
     * @returns {string[]} Array of event names
     */
    eventNames() {
        return Array.from(this._listeners.keys());
    }

    /**
     * Get statistics about listeners
     *
     * @returns {object} Statistics
     */
    getStats() {
        const stats = {
            totalEvents: this._listeners.size,
            totalListeners: 0,
            eventBreakdown: {}
        };

        for (const [event, listeners] of this._listeners.entries()) {
            const count = listeners.size;
            stats.totalListeners += count;
            stats.eventBreakdown[event] = count;
        }

        return stats;
    }

    /**
     * Dispose emitter and remove all listeners
     */
    dispose() {
        if (this._disposed) {
            return;
        }

        logger$6.debug('Disposing EventEmitter');
        this.removeAllListeners();
        this._eventHistory.length = 0;
        this._disposed = true;
    }
}

/**
 * TypedEventEmitter - Type-safe event emitter with event registry
 *
 * Ensures events are pre-registered, preventing typos and providing
 * better developer experience.
 */
class TypedEventEmitter extends EventEmitter {
    /**
     * Create a TypedEventEmitter
     * @param {string[]} allowedEvents - Array of allowed event names
     */
    constructor(allowedEvents) {
        super();

        /**
         * Set of allowed event names
         * @private
         */
        this._allowedEvents = new Set(allowedEvents);
    }

    /**
     * Validate event name is allowed
     * @private
     * @param {string} event - Event name
     * @throws {ValidationError} If event is not allowed
     */
    _validateEvent(event) {
        if (!this._allowedEvents.has(event)) {
            throw new ValidationError(
                `Event '${event}' is not registered. Allowed events: ${Array.from(this._allowedEvents).join(', ')}`,
                'event'
            );
        }
    }

    /**
     * Subscribe to an event (override to add validation)
     * @override
     */
    on(event, callback, options) {
        this._validateEvent(event);
        return super.on(event, callback, options);
    }

    /**
     * Emit an event (override to add validation)
     * @override
     */
    emit(event, ...args) {
        this._validateEvent(event);
        return super.emit(event, ...args);
    }
}

/**
 * AppConstants
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * Animation state constants and ARKit blendshape mappings.
 */

/**
 * Voice chat state enumeration
 * Controls the rendering and behavior modes of the avatar
 */
const TYVoiceChatState = {
    Idle: 'Idle',           // Idle/waiting state
    Listening: 'Listening', // Listening to user input
    Responding: 'Responding', // Speaking/responding animation
    Thinking: 'Thinking'    // Processing/thinking animation
};

/**
 * ARKit blendshape names (52 expressions)
 * Used for facial expression mapping from ARKit face tracking
 */
const ARKitBlendshapes = [
    'browDownLeft',
    'browDownRight',
    'browInnerUp',
    'browOuterUpLeft',
    'browOuterUpRight',
    'cheekPuff',
    'cheekSquintLeft',
    'cheekSquintRight',
    'eyeBlinkLeft',
    'eyeBlinkRight',
    'eyeLookDownLeft',
    'eyeLookDownRight',
    'eyeLookInLeft',
    'eyeLookInRight',
    'eyeLookOutLeft',
    'eyeLookOutRight',
    'eyeLookUpLeft',
    'eyeLookUpRight',
    'eyeSquintLeft',
    'eyeSquintRight',
    'eyeWideLeft',
    'eyeWideRight',
    'jawForward',
    'jawLeft',
    'jawOpen',
    'jawRight',
    'mouthClose',
    'mouthDimpleLeft',
    'mouthDimpleRight',
    'mouthFrownLeft',
    'mouthFrownRight',
    'mouthFunnel',
    'mouthLeft',
    'mouthLowerDownLeft',
    'mouthLowerDownRight',
    'mouthPressLeft',
    'mouthPressRight',
    'mouthPucker',
    'mouthRight',
    'mouthRollLower',
    'mouthRollUpper',
    'mouthShrugLower',
    'mouthShrugUpper',
    'mouthSmileLeft',
    'mouthSmileRight',
    'mouthStretchLeft',
    'mouthStretchRight',
    'mouthUpperUpLeft',
    'mouthUpperUpRight',
    'noseSneerLeft',
    'noseSneerRight',
    'tongueOut'
];

/**
 * FLAME model bone names
 */
const FlameBoneNames = [
    'root',
    'neck',
    'jaw',
    'leftEye',
    'rightEye'
];

/**
 * Constants derived from the arrays
 */
const ARKIT_BLENDSHAPES_COUNT = ARKitBlendshapes.length;
const FLAME_BONES_COUNT = FlameBoneNames.length;

/**
 * AnimationManager
 *
 * Derived from gaussian-splat-renderer-for-lam
 * Manages animation state machine with Three.js AnimationMixer.
 */


const logger$5 = getLogger('AnimationManager');

/**
 * Base State class for animation states
 */
class State {
    constructor(actions, isGroup) {
        this.isPlaying = false;
        this.stage = 0;
        this.actions = actions || [];
        this.blendingTime = 0.5;
        this.isGroup = isGroup || false;
    }

    dispose() {
        this.actions = [];
    }

    update(state) {
        // Override in subclasses
    }
}

/**
 * Hello state - initial greeting animation
 */
class Hello extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = LoopRepeat;
            this.actions[this.stage].clampWhenFinished = false;
            this.actions[this.stage].paused = false;
            this.actions[this.stage].play();
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Idle &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === true) {
            if (this.actions[this.stage].time >
                this.actions[this.stage].getClip().duration - this.blendingTime) {
                let nextStage = this.stage + 1;
                if (nextStage >= this.actions.length) nextStage = 0;
                this.actions[nextStage].time = 0;
                AnimationManager.SetWeight(this.actions[nextStage], 1.0);
                this.actions[nextStage].loop = LoopRepeat;
                this.actions[nextStage].play();
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[nextStage], this.blendingTime);
                this.stage = nextStage;
            }
        }
    }
}

/**
 * Idle state - resting animation
 */
class Idle extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Idle &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = LoopRepeat;
            this.actions[this.stage].clampWhenFinished = false;
            this.actions[this.stage].paused = false;
            this.actions[this.stage].play();
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Idle &&
            state !== TYVoiceChatState.Idle &&
            this.isPlaying === true &&
            this.stage === 0) {
            this.actions[this.stage].loop = LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Listen state - listening animation
 */
class Listen extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Listening &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = this.isGroup ? LoopOnce : LoopRepeat;
            this.actions[this.stage].clampWhenFinished = this.isGroup ? true : false;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (this.isGroup) {
            if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
                state === TYVoiceChatState.Listening &&
                this.isPlaying === true &&
                this.stage === 0) {
                if (this.actions[this.stage].time >
                    this.actions[this.stage].getClip().duration - this.blendingTime) {
                    this.actions[this.stage + 1].time = 0;
                    AnimationManager.SetWeight(this.actions[this.stage + 1], 1.0);
                    this.actions[this.stage + 1].loop = LoopRepeat;
                    this.actions[this.stage + 1].play();
                    AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[this.stage + 1], this.blendingTime);
                    this.stage = 1;
                }
            }

            if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
                state !== TYVoiceChatState.Listening &&
                this.isPlaying === true &&
                (this.stage === 0 || this.stage === 1)) {
                this.actions[2].time = 0;
                this.actions[2].play();
                AnimationManager.SetWeight(this.actions[2], 1.0);
                this.actions[2].loop = LoopOnce;
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[2], this.blendingTime);
                this.stage = 2;
            }
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Listening &&
            state !== TYVoiceChatState.Listening &&
            this.isPlaying === true &&
            this.stage === (this.isGroup ? this.actions.length - 1 : 0)) {
            this.actions[this.stage].loop = LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Think state - thinking animation
 */
class Think extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) return;
        
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Thinking &&
            this.isPlaying === false) {
            this.stage = 0;
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = LoopOnce;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        if (this.isGroup) {
            if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
                state === TYVoiceChatState.Thinking &&
                this.isPlaying === true &&
                this.stage === 0) {
                if (this.actions[this.stage].time >
                    this.actions[this.stage].getClip().duration - this.blendingTime) {
                    this.actions[this.stage + 1].time = 0;
                    AnimationManager.SetWeight(this.actions[this.stage + 1], 1.0);
                    this.actions[this.stage + 1].loop = LoopRepeat;
                    this.actions[this.stage + 1].play();
                    AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[this.stage + 1], this.blendingTime);
                    this.stage = 1;
                }
            }

            if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
                state !== TYVoiceChatState.Thinking &&
                this.isPlaying === true &&
                (this.stage === 0 || this.stage === 1)) {
                this.actions[2].time = 0;
                this.actions[2].play();
                AnimationManager.SetWeight(this.actions[2], 1.0);
                this.actions[2].loop = LoopOnce;
                AnimationManager.PrepareCrossFade(this.actions[this.stage], this.actions[2], this.blendingTime);
                this.stage = 2;
            }
        }

        if (AnimationManager.CurPlaying === TYVoiceChatState.Thinking &&
            state !== TYVoiceChatState.Thinking &&
            this.isPlaying === true &&
            this.stage === (this.isGroup ? this.actions.length - 1 : 0)) {
            this.actions[this.stage].loop = LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * Speak state - speaking animation with random movement selection
 */
class Speak extends State {
    constructor(actions, isGroup) {
        super(actions, isGroup);
        logger$5.debug('[SPEAK] Initialized with', actions?.length || 0, 'actions, isGroup:', isGroup);
    }

    /**
     * Get a random number in range [min, max]
     */
    getRandomNumber(max, min) {
        const range = max - min;
        return min + Math.round(Math.random() * range);
    }

    update(state) {
        // Safety check: return early if no actions available
        if (!this.actions || this.actions.length === 0) {
            if (!this._warnedNoActions) {
                logger$5.warn('[SPEAK] No actions available!');
                this._warnedNoActions = true;
            }
            return;
        }
        
        // Start speaking - pick a random animation
        if (AnimationManager.CurPlaying === undefined &&
            state === TYVoiceChatState.Responding &&
            this.isPlaying === false) {
            // Randomly select initial animation
            this.stage = Math.ceil(this.getRandomNumber(0, this.actions.length - 1));
            logger$5.debug('[SPEAK] Starting animation, stage:', this.stage, 'of', this.actions.length);
            this.actions[this.stage].time = 0;
            this.actions[this.stage].play();
            AnimationManager.SetWeight(this.actions[this.stage], 1.0);
            this.actions[this.stage].loop = LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            if (AnimationManager.LastAction !== undefined) {
                AnimationManager.PrepareCrossFade(AnimationManager.LastAction, this.actions[this.stage], this.blendingTime);
            }
            this.isPlaying = true;
        }

        // Continue speaking - cycle through random animations
        if (AnimationManager.CurPlaying === TYVoiceChatState.Responding &&
            state === TYVoiceChatState.Responding &&
            this.isPlaying === true) {
            if (this.actions[this.stage].time >=
                this.actions[this.stage].getClip().duration - this.blendingTime) {
                const lastAction = this.actions[this.stage];
                // Pick a different random animation
                this.stage = (this.stage + Math.ceil(this.getRandomNumber(1, this.actions.length - 1))) % this.actions.length;
                logger$5.debug('[SPEAK] Cycling to next animation, stage:', this.stage);
                this.actions[this.stage].time = 0;
                this.actions[this.stage].play();
                AnimationManager.SetWeight(this.actions[this.stage], 1.0);
                this.actions[this.stage].loop = LoopOnce;
                this.actions[this.stage].clampWhenFinished = true;
                AnimationManager.PrepareCrossFade(lastAction, this.actions[this.stage], this.blendingTime);
            }
        }

        // Stop speaking - finish current animation
        if (AnimationManager.CurPlaying === TYVoiceChatState.Responding &&
            state !== TYVoiceChatState.Responding &&
            this.isPlaying === true) {
            this.actions[this.stage].loop = LoopOnce;
            this.actions[this.stage].clampWhenFinished = true;
            this.isPlaying = false;
            AnimationManager.LastAction = this.actions[this.stage];
        }
    }
}

/**
 * AnimationManager - Main animation controller
 * Manages state machine with crossfade transitions between animation states
 */
class AnimationManager {
    // Static properties
    static IsBlending = false;
    static actions = [];
    static NeedReset = false;
    static NeedFullReset = false;
    static LastAction = undefined;
    static CurPlaying = undefined;

    /**
     * Set animation action weight
     */
    static SetWeight(action, weight) {
        action.enabled = true;
        action.setEffectiveTimeScale(1);
        action.setEffectiveWeight(weight);
    }

    /**
     * Prepare crossfade between two actions
     */
    static PrepareCrossFade(startAction, endAction, defaultDuration) {
        const duration = defaultDuration;
        AnimationManager.UnPauseAllActions();
        AnimationManager.ExecuteCrossFade(startAction, endAction, duration);
        AnimationManager.IsBlending = true;
        setTimeout(() => {
            AnimationManager.IsBlending = false;
        }, defaultDuration + 0.1);
    }

    /**
     * Pause all animation actions
     */
    static PauseAllActions() {
        AnimationManager.actions.forEach(function(action) {
            action.paused = true;
        });
    }

    /**
     * Unpause all animation actions
     */
    static UnPauseAllActions() {
        AnimationManager.actions.forEach(function(action) {
            action.paused = false;
        });
    }

    /**
     * Execute crossfade between two actions
     */
    static ExecuteCrossFade(startAction, endAction, duration) {
        AnimationManager.SetWeight(endAction, 1);
        endAction.time = 0;
        startAction.crossFadeTo(endAction, duration, true);
    }

    /**
     * Constructor
     * @param {THREE.AnimationMixer} mixer - Three.js animation mixer
     * @param {THREE.AnimationClip[]} animations - Animation clips
     * @param {object} animationcfg - Animation configuration
     */
    constructor(mixer, animations, animationcfg) {
        const helloActions = [];
        const idleActions = [];
        const listenActions = [];
        const speakActions = [];
        const thinkActions = [];

        this.mixer = mixer;

        // Calculate action indices based on config
        const helloIdx = animationcfg?.hello?.size || 0;
        const idleIdx = (animationcfg?.idle?.size || 0) + helloIdx;
        const listenIdx = (animationcfg?.listen?.size || 0) + idleIdx;
        const speakIdx = (animationcfg?.speak?.size || 0) + listenIdx;
        const thinkIdx = (animationcfg?.think?.size || 0) + speakIdx;

        // Distribute animation clips to state action arrays
        if (animations && animations.length > 0) {
            for (let i = 0; i < animations.length; i++) {
                const clip = animations[i];
                const action = mixer.clipAction(clip);

                if (i < helloIdx) {
                    helloActions.push(action);
                } else if (i < idleIdx) {
                    idleActions.push(action);
                    // Duplicate for states that share idle
                    if (listenIdx === idleIdx) {
                        listenActions.push(mixer.clipAction(clip.clone()));
                    }
                    if (speakIdx === listenIdx) {
                        speakActions.push(mixer.clipAction(clip.clone()));
                    }
                    if (thinkIdx === speakIdx) {
                        thinkActions.push(mixer.clipAction(clip.clone()));
                    }
                } else if (i < listenIdx) {
                    listenActions.push(action);
                } else if (i < speakIdx) {
                    speakActions.push(action);
                } else if (i < thinkIdx) {
                    thinkActions.push(action);
                }

                AnimationManager.actions.push(action);
                AnimationManager.SetWeight(action, 0);
            }
        }

        // Create state instances
        this.hello = new Hello(helloActions, animationcfg?.hello?.isGroup || false);
        this.idle = new Idle(idleActions, animationcfg?.idle?.isGroup || false);
        this.listen = new Listen(listenActions, animationcfg?.listen?.isGroup || false);
        this.think = new Think(thinkActions, animationcfg?.think?.isGroup || false);
        this.speak = new Speak(speakActions, animationcfg?.speak?.isGroup || false);
    }

    /**
     * Get currently playing state
     */
    curPlaying() {
        if (this.hello.isPlaying) return TYVoiceChatState.Idle;
        if (this.idle.isPlaying) return TYVoiceChatState.Idle;
        if (this.listen.isPlaying) return TYVoiceChatState.Listening;
        if (this.think.isPlaying) return TYVoiceChatState.Thinking;
        if (this.speak.isPlaying) return TYVoiceChatState.Responding;
        return undefined;
    }

    /**
     * Dispose animation manager
     */
    dispose() {
        this.hello.dispose();
        this.idle.dispose();
        this.listen.dispose();
        this.think.dispose();
        this.speak.dispose();
        AnimationManager.actions = [];
    }

    /**
     * Reset all animation actions
     */
    resetAllActions(ignoreBlending = false) {
        const curPlaying = this.curPlaying();
        
        switch (curPlaying) {
            case TYVoiceChatState.Idle:
                AnimationManager.LastAction = this.hello.actions[this.hello.stage];
                break;
            case TYVoiceChatState.Listening:
                AnimationManager.LastAction = this.listen.actions[this.listen.stage];
                break;
            case TYVoiceChatState.Thinking:
                AnimationManager.LastAction = this.think.actions[this.think.stage];
                break;
            case TYVoiceChatState.Responding:
                AnimationManager.LastAction = this.speak.actions[this.speak.stage];
                break;
            default:
                AnimationManager.LastAction = undefined;
                break;
        }

        if (AnimationManager.LastAction) {
            AnimationManager.LastAction.loop = LoopOnce;
            AnimationManager.LastAction.clampWhenFinished = true;
            AnimationManager.SetWeight(AnimationManager.LastAction, 1.0);
        }

        if (ignoreBlending) {
            AnimationManager.PauseAllActions();
            AnimationManager.actions.forEach(function(action) {
                action.time = 0;
                AnimationManager.SetWeight(action, 0.0);
            });
            AnimationManager.LastAction = undefined;
        }

        this.hello.isPlaying = false;
        this.idle.isPlaying = false;
        this.listen.isPlaying = false;
        this.think.isPlaying = false;
        this.speak.isPlaying = false;
    }

    /**
     * Update animation state
     * @param {string} state - Target state (TYVoiceChatState)
     */
    update(state) {
        if (AnimationManager.IsBlending) return;

        AnimationManager.CurPlaying = this.curPlaying();

        if (AnimationManager.CurPlaying === undefined) {
            switch (state) {
                case TYVoiceChatState.Idle:
                    this.idle.update(state);
                    break;
                case TYVoiceChatState.Listening:
                    this.listen.update(state);
                    break;
                case TYVoiceChatState.Thinking:
                    this.think.update(state);
                    break;
                case TYVoiceChatState.Responding:
                    this.speak.update(state);
                    break;
                default:
                    this.idle.update(state);
                    break;
            }
        } else {
            switch (AnimationManager.CurPlaying) {
                case TYVoiceChatState.Idle:
                    this.idle.update(state);
                    break;
                case TYVoiceChatState.Listening:
                    this.listen.update(state);
                    break;
                case TYVoiceChatState.Thinking:
                    this.think.update(state);
                    break;
                case TYVoiceChatState.Responding:
                    this.speak.update(state);
                    break;
                default:
                    this.idle.update(state);
                    break;
            }
        }
    }
}

/**
 * SplatScene
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class SplatScene extends Object3D {

    constructor(splatBuffer, position = new Vector3(), quaternion = new Quaternion(),
                scale = new Vector3(1, 1, 1), minimumAlpha = 1, opacity = 1.0, visible = true) {
        super();
        this.splatBuffer = splatBuffer;
        this.position.copy(position);
        this.quaternion.copy(quaternion);
        this.scale.copy(scale);
        this.transform = new Matrix4();
        this.minimumAlpha = minimumAlpha;
        this.opacity = opacity;
        this.visible = visible;
    }

    copyTransformData(otherScene) {
        this.position.copy(otherScene.position);
        this.quaternion.copy(otherScene.quaternion);
        this.scale.copy(otherScene.scale);
        this.transform.copy(otherScene.transform);
    }

    updateTransform(dynamicMode) {
        if (dynamicMode) {
            if (this.matrixWorldAutoUpdate) this.updateWorldMatrix(true, false);
            this.transform.copy(this.matrixWorld);
        } else {
            if (this.matrixAutoUpdate) this.updateMatrix();
            this.transform.copy(this.matrix);
        }
    }
}

/**
 * SplatGeometry
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class SplatGeometry {

    /**
     * Build the Three.js geometry that will be used to render the splats. The geometry is instanced and is made up of
     * vertices for a single quad as well as an attribute buffer for the splat indexes.
     * @param {number} maxSplatCount The maximum number of splats that the geometry will need to accomodate
     * @return {THREE.InstancedBufferGeometry}
     */
    static build(maxSplatCount) {

        const baseGeometry = new BufferGeometry();
        baseGeometry.setIndex([0, 1, 2, 0, 2, 3]);

        // Vertices for the instanced quad
        const positionsArray = new Float32Array(4 * 3);
        const positions = new BufferAttribute(positionsArray, 3);
        baseGeometry.setAttribute('position', positions);
        positions.setXYZ(0, -1, -1, 0.0);
        positions.setXYZ(1, -1, 1.0, 0.0);
        positions.setXYZ(2, 1.0, 1.0, 0.0);
        positions.setXYZ(3, 1.0, -1, 0.0);
        positions.needsUpdate = true;

        const geometry = new InstancedBufferGeometry().copy(baseGeometry);

        // Splat index buffer
        const splatIndexArray = new Uint32Array(maxSplatCount);

        const splatIndexes = new InstancedBufferAttribute(splatIndexArray, 1, false);
        splatIndexes.setUsage(DynamicDrawUsage);
        geometry.setAttribute('splatIndex', splatIndexes);

        geometry.instanceCount = 0;

        return geometry;
    }
}

/**
 * SplatTree
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


// Worker-related functions (simplified stubs - the actual worker is handled differently)
const checkAndCreateWorker = () => {
    // Worker creation is handled by the build system
    return null;
};

const workerProcessCenters = (worker, centers, buffers, maxDepth, maxCentersPerNode) => {
    // Worker message passing
    if (worker) {
        worker.postMessage({
            'process': {
                'centers': centers,
                'maxDepth': maxDepth,
                'maxCentersPerNode': maxCentersPerNode
            }
        }, buffers);
    }
};

// SplatSubTree helper class
class SplatSubTree {
    constructor() {
        this.rootNode = null;
        this.splatMesh = null;
    }

    static convertWorkerSubTree(workerSubTree, splatMesh) {
        const subTree = new SplatSubTree();
        subTree.rootNode = workerSubTree.rootNode;
        subTree.splatMesh = splatMesh;
        return subTree;
    }
}

class SplatTree {

    constructor(maxDepth, maxCentersPerNode) {
        this.maxDepth = maxDepth;
        this.maxCentersPerNode = maxCentersPerNode;
        this.subTrees = [];
        this.splatMesh = null;
    }


    dispose() {
        this.diposeSplatTreeWorker();
        this.disposed = true;
    }

    diposeSplatTreeWorker() {
        if (this.splatTreeWorker) this.splatTreeWorker.terminate();
        this.splatTreeWorker = null;
    };

    /**
     * Construct this instance of SplatTree from an instance of SplatMesh.
     *
     * @param {SplatMesh} splatMesh The instance of SplatMesh from which to construct this splat tree.
     * @param {function} filterFunc Optional function to filter out unwanted splats.
     * @param {function} onIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                   builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {undefined}
     */
    processSplatMesh = (splatMesh, filterFunc = () => true, onIndexesUpload, onSplatTreeConstruction) => {
        if (!this.splatTreeWorker) this.splatTreeWorker = checkAndCreateWorker();

        this.splatMesh = splatMesh;
        this.subTrees = [];
        const center = new Vector3();

        const addCentersForScene = (splatOffset, splatCount) => {
            const sceneCenters = new Float32Array(splatCount * 4);
            let addedCount = 0;
            for (let i = 0; i < splatCount; i++) {
                const globalSplatIndex = i + splatOffset;
                if (filterFunc(globalSplatIndex)) {
                    splatMesh.getSplatCenter(globalSplatIndex, center);
                    const addBase = addedCount * 4;
                    sceneCenters[addBase] = center.x;
                    sceneCenters[addBase + 1] = center.y;
                    sceneCenters[addBase + 2] = center.z;
                    sceneCenters[addBase + 3] = globalSplatIndex;
                    addedCount++;
                }
            }
            return sceneCenters;
        };

        return new Promise((resolve) => {

            const checkForEarlyExit = () => {
                if (this.disposed) {
                    this.diposeSplatTreeWorker();
                    resolve();
                    return true;
                }
                return false;
            };

            if (onIndexesUpload) onIndexesUpload(false);

            delayedExecute(() => {

                if (checkForEarlyExit()) return;

                const allCenters = [];
                if (splatMesh.dynamicMode) {
                    let splatOffset = 0;
                    for (let s = 0; s < splatMesh.scenes.length; s++) {
                        const scene = splatMesh.getScene(s);
                        const splatCount = scene.splatBuffer.getSplatCount();
                        const sceneCenters = addCentersForScene(splatOffset, splatCount);
                        allCenters.push(sceneCenters);
                        splatOffset += splatCount;
                    }
                } else {
                    const sceneCenters = addCentersForScene(0, splatMesh.getSplatCount());
                    allCenters.push(sceneCenters);
                }

                this.splatTreeWorker.onmessage = (e) => {

                    if (checkForEarlyExit()) return;

                    if (e.data.subTrees) {

                        if (onSplatTreeConstruction) onSplatTreeConstruction(false);

                        delayedExecute(() => {

                            if (checkForEarlyExit()) return;

                            for (let workerSubTree of e.data.subTrees) {
                                const convertedSubTree = SplatSubTree.convertWorkerSubTree(workerSubTree, splatMesh);
                                this.subTrees.push(convertedSubTree);
                            }
                            this.diposeSplatTreeWorker();

                            if (onSplatTreeConstruction) onSplatTreeConstruction(true);

                            delayedExecute(() => {
                                resolve();
                            });

                        });
                    }
                };

                delayedExecute(() => {
                    if (checkForEarlyExit()) return;
                    if (onIndexesUpload) onIndexesUpload(true);
                    const transferBuffers = allCenters.map((array) => array.buffer);
                    workerProcessCenters(this.splatTreeWorker, allCenters, transferBuffers, this.maxDepth, this.maxCentersPerNode);
                });

            });

        });

    };

    countLeaves() {

        let leafCount = 0;
        this.visitLeaves(() => {
            leafCount++;
        });

        return leafCount;
    }

    visitLeaves(visitFunc) {

        const visitLeavesFromNode = (node, visitFunc) => {
            if (node.children.length === 0) visitFunc(node);
            for (let child of node.children) {
                visitLeavesFromNode(child, visitFunc);
            }
        };

        for (let subTree of this.subTrees) {
            visitLeavesFromNode(subTree.rootNode, visitFunc);
        }
    }

}

/**
 * SplatMaterial
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME bone/pose uniforms and textures
 * - Added expression blendshape support
 * - Extended vertex shader with GPU skinning
 * - Additional ~500 lines of FLAME-specific shader code
 */


class SplatMaterial {

    static buildVertexShaderBase(dynamicMode = false, enableOptionalEffects = false, maxSphericalHarmonicsDegree = 0, customVars = '') {
        let vertexShaderSource = `#define USE_SKINNING

        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D flameModelTexture;
        uniform highp usampler2D boneTexture;
        uniform highp usampler2D boneWeightTexture;


        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
        uniform int gaussianSplatCount;
        uniform int bsCount;
        uniform float headBoneIndex;
        #ifdef USE_SKINNING
            attribute vec4 skinIndex;
            attribute vec4 skinWeight;
        #endif
    `;

    if (enableOptionalEffects) {
        vertexShaderSource += `
            uniform float sceneOpacity[${Constants$1.MaxScenes}];
            uniform int sceneVisibility[${Constants$1.MaxScenes}];
        `;
    }

    if (dynamicMode) {
        vertexShaderSource += `
            uniform highp mat4 transforms[${Constants$1.MaxScenes}];
        `;
    }

    vertexShaderSource += `
        ${customVars}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform vec2 flameModelTextureSize;
        uniform vec2 boneWeightTextureSize;
        uniform vec2 boneTextureSize;

        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${Constants$1.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${Constants$1.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;
        varying vec2 vSplatIndex;
        #ifdef USE_SKINNING
            uniform mat4 bindMatrix;
            uniform mat4 bindMatrixInverse;
            uniform highp sampler2D boneTexture0;
            mat4 getBoneMatrix0( const in float i ) {
                int size = textureSize( boneTexture0, 0 ).x;
                int j = int( i ) * 4;
                int x = j % size;
                int y = j / size;
                vec4 v1 = texelFetch( boneTexture0, ivec2( x, y ), 0 );
                vec4 v2 = texelFetch( boneTexture0, ivec2( x + 1, y ), 0 );
                vec4 v3 = texelFetch( boneTexture0, ivec2( x + 2, y ), 0 );
                vec4 v4 = texelFetch( boneTexture0, ivec2( x + 3, y ), 0 );
                return mat4( v1, v2, v3, v4 );
            }
        #endif

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        int internal = 1;//show a gaussian splatting point every internal points.
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }
        float getRealIndex(int sIndex, int reducedFactor) {
            int remainder = sIndex % reducedFactor;

            if(remainder == int(0)) {
                return float(sIndex);
            }
            else
            {
                return float(sIndex - remainder);
            }
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(getRealIndex(int(splatIndex), internal)) * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getFlameDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset) + uint(gaussianSplatCount * bsCount)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getBoneWeightUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getBSFlameDataUV(in int bsInedex, in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(int(splatIndex) / internal) * uint(stride) + uint(offset) + uint(gaussianSplatCount * bsInedex)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(getRealIndex(int(sIndex), internal)) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        mat4 getBoneMatrix( float i ) {
            float y = i;
            float x = 0.0;

            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(i * 4.0) / boneTextureSize.x;//4
            samplerUV.y = float(floor(d)) / boneTextureSize.y;//5
            samplerUV.x = fract(d);

            vec4 v1 = uintBitsToFloat(texture( boneTexture, samplerUV ));
            vec4 v2 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 1.0 / boneTextureSize.x, samplerUV.y)));
            vec4 v3 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 2.0 / boneTextureSize.x, samplerUV.y) ));
            vec4 v4 = uintBitsToFloat(texture( boneTexture, vec2(samplerUV.x + 3.0 / boneTextureSize.x, samplerUV.y)));

            return mat4( v1, v2, v3, v4 );
        }

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            // vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uvec3 sampledCenter = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize)).gba;
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenter));

            vec2 flameTextureUV = getBSFlameDataUV(bsCount, 1, 0, flameModelTextureSize);
            uvec3 sampledflamePos = texture(flameModelTexture, flameTextureUV).rgb;
            // splatCenter += uintBitsToFloat(uvec3(sampledflamePos.rgb));

            for(int i = 0; i < bsCount; ++i) {
                vec2 flameBSTextureUV = getBSFlameDataUV(i, 1, 0, flameModelTextureSize);
                uvec3 sampledBSPos = texture(flameModelTexture, flameBSTextureUV).rgb;

                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(i / 4 + 5 * 4) / boneTextureSize.x;//4
                samplerUV.y = float(floor(d)) / boneTextureSize.y;//32
                samplerUV.x = fract(d);

                vec4 bsWeight = uintBitsToFloat(texture(boneTexture, samplerUV));
                float weight = bsWeight.r;
                if(i % 4 == 1) {
                    weight = bsWeight.g;
                }
                if(i % 4 == 2) {
                    weight = bsWeight.b;
                }
                if(i % 4 == 3) {
                    weight = bsWeight.a;
                }

                splatCenter = splatCenter + weight * uintBitsToFloat(sampledBSPos);
            }


            #ifdef USE_SKINNING
                mat4 boneMatX = getBoneMatrix0( skinIndex.x );
                mat4 boneMatY = getBoneMatrix0( skinIndex.y );
                mat4 boneMatZ = getBoneMatrix0( skinIndex.z );
                mat4 boneMatW = getBoneMatrix0( skinIndex.w );
            #endif
            #ifdef USE_SKINNING
                mat4 skinMatrix = mat4( 0.0 );
                skinMatrix += skinWeight.x * boneMatX;
                skinMatrix += skinWeight.y * boneMatY;
                skinMatrix += skinWeight.z * boneMatZ;
                skinMatrix += skinWeight.w * boneMatW;
                // skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
            #endif
            vec3 transformed = vec3(splatCenter.xyz);
            #ifdef USE_SKINNING
                // vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
                vec4 skinVertex = vec4( transformed, 1.0 );

                vec4 skinned = vec4( 0.0 );
                // There is an offset between the Gaussian point and the mesh vertex,
                // which will cause defects in the skeletal animation driving the Gaussian point. 
                //In order to circumvent this problem, only the head bone(index is 110 currently) is used to drive

                if (headBoneIndex >= 0.0)
                {
                    mat4 boneMat = getBoneMatrix0( headBoneIndex );
                    skinned += boneMat * skinVertex * 1.0;
                }

                // skinned += boneMatX * skinVertex * skinWeight.x;
                // skinned += boneMatY * skinVertex * skinWeight.y;
                // skinned += boneMatZ * skinVertex * skinWeight.z;
                // skinned += boneMatW * skinVertex * skinWeight.w;

                // transformed = ( bindMatrixInverse * skinned ).xyz;
                transformed = skinned.xyz;

            #endif
            splatCenter = transformed.xyz;

            #ifdef USE_FLAME
                mat4 boneMatX = getBoneMatrix( 0.0 );
                mat4 boneMatY = getBoneMatrix( 1.0 );
                mat4 boneMatZ = getBoneMatrix( 2.0 );
                mat4 boneMatW = getBoneMatrix( 3.0 );   
                mat4 boneMat0 = getBoneMatrix( 4.0 );   
                
                vec2 boneWeightUV0 = getBoneWeightUV(2, 0, boneWeightTextureSize);
                vec2 boneWeightUV1 = getBoneWeightUV(2, 1, boneWeightTextureSize);

                uvec4 sampledBoneMatrixValue = texture(boneWeightTexture, boneWeightUV0);
                uvec4 sampledBoneMatrixValue0 = texture(boneWeightTexture, boneWeightUV1);

                vec4 boneMatrixValue = uintBitsToFloat(sampledBoneMatrixValue);
                vec4 boneMatrixValue0 = uintBitsToFloat(sampledBoneMatrixValue0);

                vec4 skinVertex = vec4( splatCenter, 1.0 );
                vec4 skinned = vec4( 0.0 );
                float minWeight = min(boneMatrixValue.x,min(boneMatrixValue.y, min(boneMatrixValue.z, min(boneMatrixValue.w, boneMatrixValue0.x))));
                
                if(boneMatrixValue.x > 0.0 && boneMatrixValue.x > minWeight)
                    skinned += boneMatX * skinVertex * boneMatrixValue.x;
                
                if(boneMatrixValue.y > 0.0 && boneMatrixValue.y > minWeight)
                    skinned += boneMatY * skinVertex * boneMatrixValue.y;
                
                if(boneMatrixValue.z > 0.0 && boneMatrixValue.z > minWeight)
                    skinned += boneMatZ * skinVertex * boneMatrixValue.z;
                
                if(boneMatrixValue.w > 0.0 && boneMatrixValue.w > minWeight)
                    skinned += boneMatW * skinVertex * boneMatrixValue.w;
                
                if(boneMatrixValue0.x > 0.0 && boneMatrixValue0.x > minWeight)
                    skinned += boneMat0 * skinVertex * boneMatrixValue0.x;
                
                splatCenter = skinned.xyz;
            #endif

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `;

        if (enableOptionalEffects) {
            vertexShaderSource += `
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `;
        }

        if (dynamicMode) {
            vertexShaderSource += `
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
                #ifdef USE_SKINNING
                    transformModelViewMatrix = transformModelViewMatrix * skinMatrix;
                #endif
            `;
        } else {
            vertexShaderSource += `mat4 transformModelViewMatrix = modelViewMatrix;`;
        }

        vertexShaderSource += `
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vSplatIndex = vec2(splatIndex, splatIndex);

            vColor = uintToRGBAVec(sampledCenterColor.r);
        `;

        // Proceed to sampling and rendering 1st degree spherical harmonics
        if (maxSphericalHarmonicsDegree >= 1) {

            vertexShaderSource += `   
            if (sphericalHarmonicsDegree >= 1) {
            `;

            if (dynamicMode) {
                vertexShaderSource += `
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `;
            } else {
                vertexShaderSource += `
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `;
            }

            vertexShaderSource += `
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `;

            if (maxSphericalHarmonicsDegree >= 2) {
                vertexShaderSource += `
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `;
            }

            // Determining how to sample spherical harmonics textures to get the coefficients for calculations for a given degree
            // depends on how many total degrees (maxSphericalHarmonicsDegree) are present in the textures. This is because that
            // number affects how they are packed in the textures, and therefore the offset & stride required to access them.

            // Sample spherical harmonics textures with 1 degree worth of data for 1st degree calculations, and store in sh1, sh2, and sh3
            if (maxSphericalHarmonicsDegree === 1) {
                vertexShaderSource += `
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `;
            // Sample spherical harmonics textures with 2 degrees worth of data for 1st degree calculations, and store in sh1, sh2, and sh3
            } else if (maxSphericalHarmonicsDegree === 2) {
                vertexShaderSource += `
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `;
            }

            // Perform 1st degree spherical harmonics calculations
            vertexShaderSource += `
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `;

            // Proceed to sampling and rendering 2nd degree spherical harmonics
            if (maxSphericalHarmonicsDegree >= 2) {

                vertexShaderSource += `
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `;

                // Sample spherical harmonics textures with 2 degrees worth of data for 2nd degree calculations,
                // and store in sh4, sh5, sh6, sh7, and sh8
                if (maxSphericalHarmonicsDegree === 2) {
                    vertexShaderSource += `
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `;
                }

                // Perform 2nd degree spherical harmonics calculations
                vertexShaderSource += `
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `;
            }

            vertexShaderSource += `

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `;
        }

        return vertexShaderSource;
    }

    static getVertexShaderFadeIn() {
        return `
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `;
    }

    static getUniforms(dynamicMode = false, enableOptionalEffects = false, maxSphericalHarmonicsDegree = 0,
                       splatScale = 1.0, pointCloudModeEnabled = false) {

        const uniforms = {
            'sceneCenter': {
                'type': 'v3',
                'value': new Vector3()
            },
            'fadeInComplete': {
                'type': 'i',
                'value': 0
            },
            'orthographicMode': {
                'type': 'i',
                'value': 0
            },
            'visibleRegionFadeStartRadius': {
                'type': 'f',
                'value': 0.0
            },
            'visibleRegionRadius': {
                'type': 'f',
                'value': 0.0
            },
            'bindMatrix': {
                'type': 'm4',
                'value': new Matrix4()
            },
            'bindMatrixInverse': {
                'type': 'm4',
                'value': new Matrix4()
            },
            'currentTime': {
                'type': 'f',
                'value': 0.0
            },
            'firstRenderTime': {
                'type': 'f',
                'value': 0.0
            },
            'centersColorsTexture': {
                'type': 't',
                'value': null
            },
            'flameModelTexture': {
                'type': 't',
                'value': null
            },
            'boneTexture': {
                'type': 't',
                'value': null
            },
            'boneTexture0': {
                'type': 't',
                'value': null
            },
            'boneWeightTexture': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTexture': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureR': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureG': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonicsTextureB': {
                'type': 't',
                'value': null
            },
            'sphericalHarmonics8BitCompressionRangeMin': {
                'type': 'f',
                'value': []
            },
            'sphericalHarmonics8BitCompressionRangeMax': {
                'type': 'f',
                'value': []
            },
            'focal': {
                'type': 'v2',
                'value': new Vector2()
            },
            'orthoZoom': {
                'type': 'f',
                'value': 1.0
            },
            'inverseFocalAdjustment': {
                'type': 'f',
                'value': 1.0
            },
            'viewport': {
                'type': 'v2',
                'value': new Vector2()
            },
            'basisViewport': {
                'type': 'v2',
                'value': new Vector2()
            },
            'debugColor': {
                'type': 'v3',
                'value': new Color()
            },
            'centersColorsTextureSize': {
                'type': 'v2',
                'value': new Vector2(1024, 1024)
            },
            'flameModelTextureSize': {
                'type': 'v2',
                'value': new Vector2(4096, 2048)
            },
            'boneTextureSize': {
                'type': 'v2',
                'value': new Vector2(4, 32)
            },
            'boneWeightTextureSize': {
                'type': 'v2',
                'value': new Vector2(512, 512)
            },
            
            'sphericalHarmonicsDegree': {
                'type': 'i',
                'value': maxSphericalHarmonicsDegree
            },
            'sphericalHarmonicsTextureSize': {
                'type': 'v2',
                'value': new Vector2(1024, 1024)
            },
            'sphericalHarmonics8BitMode': {
                'type': 'i',
                'value': 0
            },
            'sphericalHarmonicsMultiTextureMode': {
                'type': 'i',
                'value': 0
            },
            'splatScale': {
                'type': 'f',
                'value': splatScale
            },
            'pointCloudModeEnabled': {
                'type': 'i',
                'value': pointCloudModeEnabled ? 1 : 0
            },
            'sceneIndexesTexture': {
                'type': 't',
                'value': null
            },
            'sceneIndexesTextureSize': {
                'type': 'v2',
                'value': new Vector2(1024, 1024)
            },
            'sceneCount': {
                'type': 'i',
                'value': 1
            },
            'gaussianSplatCount': {
                'type': 'i',
                'value': 1
            },
            'bsCount': {
                'type': 'i',
                'value': 1
            },
            'headBoneIndex': {
                'type': 'f',
                'value': -1
            },
            'eyeBlinkLeft': {
                'type': 'f',
                'value': 0.0
            },
            'eyeBlinkRight': {
                'type': 'f',
                'value': 0.0
            }
        };
        for (let i = 0; i < Constants$1.MaxScenes; i++) {
            uniforms.sphericalHarmonics8BitCompressionRangeMin.value.push(-Constants$1.SphericalHarmonics8BitCompressionRange / 2.0);
            uniforms.sphericalHarmonics8BitCompressionRangeMax.value.push(Constants$1.SphericalHarmonics8BitCompressionRange / 2.0);
        }

        if (enableOptionalEffects) {
            const sceneOpacity = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                sceneOpacity.push(1.0);
            }
            uniforms['sceneOpacity'] ={
                'type': 'f',
                'value': sceneOpacity
            };

            const sceneVisibility = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                sceneVisibility.push(1);
            }
            uniforms['sceneVisibility'] ={
                'type': 'i',
                'value': sceneVisibility
            };
        }

        if (dynamicMode) {
            const transformMatrices = [];
            for (let i = 0; i < Constants$1.MaxScenes; i++) {
                transformMatrices.push(new Matrix4());
            }
            uniforms['transforms'] = {
                'type': 'mat4',
                'value': transformMatrices
            };
        }

        return uniforms;
    }

}

/**
 * SplatMaterial3D
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Modified for FLAME avatar support:
 * - Extended vertex shader for FLAME integration
 */


class SplatMaterial3D {

    /**
     * Build the Three.js material that is used to render the splats.
     * @param {number} dynamicMode If true, it means the scene geometry represented by this splat mesh is not stationary or
     *                             that the splat count might change
     * @param {boolean} enableOptionalEffects When true, allows for usage of extra properties and attributes in the shader for effects
     *                                        such as opacity adjustment. Default is false for performance reasons.
     * @param {boolean} antialiased If true, calculate compensation factor to deal with gaussians being rendered at a significantly
     *                              different resolution than that of their training
     * @param {number} maxScreenSpaceSplatSize The maximum clip space splat size
     * @param {number} splatScale Value by which all splats are scaled in screen-space (default is 1.0)
     * @param {number} pointCloudModeEnabled Render all splats as screen-space circles
     * @param {number} maxSphericalHarmonicsDegree Degree of spherical harmonics to utilize in rendering splats
     * @return {THREE.ShaderMaterial}
     */
    static build(dynamicMode = false, enableOptionalEffects = false, antialiased = false, maxScreenSpaceSplatSize = 2048,
                 splatScale = 1.0, pointCloudModeEnabled = false, maxSphericalHarmonicsDegree = 0, kernel2DSize = 0.3, irisOcclusionConfig = null) {

        const customVertexVars = `
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;

        // Add a varying for iris splats
        let vertexShaderSource = SplatMaterial.buildVertexShaderBase(dynamicMode, enableOptionalEffects,
                                         maxSphericalHarmonicsDegree, customVertexVars);
        vertexShaderSource += SplatMaterial3D.buildVertexShaderProjection(antialiased, enableOptionalEffects,
                                          maxScreenSpaceSplatSize, kernel2DSize);
        const fragmentShaderSource = SplatMaterial3D.buildFragmentShader(irisOcclusionConfig);

        const uniforms = SplatMaterial.getUniforms(dynamicMode, enableOptionalEffects,
                                                   maxSphericalHarmonicsDegree, splatScale, pointCloudModeEnabled);

        uniforms['covariancesTextureSize'] = {
            'type': 'v2',
            'value': new Vector2(1024, 1024)
        };
        uniforms['covariancesTexture'] = {
            'type': 't',
            'value': null
        };
        uniforms['covariancesTextureHalfFloat'] = {
            'type': 't',
            'value': null
        };
        uniforms['covariancesAreHalfFloat'] = {
            'type': 'i',
            'value': 0
        };

        const material = new ShaderMaterial({
            uniforms: uniforms,
            vertexShader: vertexShaderSource,
            fragmentShader: fragmentShaderSource,
            transparent: true,
            alphaTest: 1.0,
            blending: NormalBlending,
            depthTest: true,
            depthWrite: false,
            side: DoubleSide
        });

        return material;
    }

    static buildVertexShaderProjection(antialiased, enableOptionalEffects, maxScreenSpaceSplatSize, kernel2DSize) {
        let vertexShaderSource = `

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;

        if (antialiased) {
            vertexShaderSource += `
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${kernel2DSize};
                cov2Dm[1][1] += ${kernel2DSize};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `;
        } else {
            vertexShaderSource += `
                cov2Dm[0][0] += ${kernel2DSize};
                cov2Dm[1][1] += ${kernel2DSize};
            `;
        }

        vertexShaderSource += `

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(maxScreenSpaceSplatSize)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(maxScreenSpaceSplatSize)}.0);
            `;

        if (enableOptionalEffects) {
            vertexShaderSource += `
                vColor.a *= splatOpacityFromScene;
            `;
        }

        vertexShaderSource += `
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `;

        vertexShaderSource += SplatMaterial.getVertexShaderFadeIn();
        vertexShaderSource += `}`;

        return vertexShaderSource;
    }

    static buildFragmentShader(irisOcclusionConfig = null) {
        let fragmentShaderSource = `
            precision highp float;
            #include <common>

            uniform float eyeBlinkLeft;
            uniform float eyeBlinkRight;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying vec2 vSplatIndex;
        `;

        fragmentShaderSource += `
            void main () {
                float A = dot(vPosition, vPosition);
                float opacity = exp(-0.5 * A) * vColor.a;
                if (opacity < 1.0 / 255.0)
                    discard;
                `;

        // Generate iris occlusion code only if config exists
        if (irisOcclusionConfig && (irisOcclusionConfig.right_iris || irisOcclusionConfig.left_iris)) {
            fragmentShaderSource += `
                float idx = vSplatIndex.x;
                `;

            // Generate right iris checks
            if (irisOcclusionConfig.right_iris && irisOcclusionConfig.right_iris.length > 0) {
                const rightConditions = irisOcclusionConfig.right_iris
                    .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                    .join(' ||\n                                   ');

                fragmentShaderSource += `
                // Check if this splat is part of right iris
                bool isRightIris = ${rightConditions};
                `;
            } else {
                fragmentShaderSource += `
                bool isRightIris = false;
                `;
            }

            // Generate left iris checks
            if (irisOcclusionConfig.left_iris && irisOcclusionConfig.left_iris.length > 0) {
                const leftConditions = irisOcclusionConfig.left_iris
                    .map(([start, end]) => `(idx >= ${start}.0 && idx <= ${end}.0)`)
                    .join(' ||\n                                  ');

                fragmentShaderSource += `
                // Check if this splat is part of left iris
                bool isLeftIris = ${leftConditions};
                `;
            } else {
                fragmentShaderSource += `
                bool isLeftIris = false;
                `;
            }

            fragmentShaderSource += `
                float finalOpacity = opacity;

                // Smooth fade: iris fades out as eye closes (blink increases)
                // smoothstep(0.1, 0.5, blink) = 0 when blink<0.1, 1 when blink>0.5
                if (isRightIris) {
                    float fadeFactor = 1.0 - smoothstep(0.1, 0.5, eyeBlinkRight);
                    finalOpacity = opacity * fadeFactor;
                } else if (isLeftIris) {
                    float fadeFactor = 1.0 - smoothstep(0.1, 0.5, eyeBlinkLeft);
                    finalOpacity = opacity * fadeFactor;
                }

                if (finalOpacity < 1.0 / 255.0)
                    discard;

                gl_FragColor = vec4(vColor.rgb, finalOpacity);
            }
        `;
        } else {
            // No iris occlusion - simple rendering
            fragmentShaderSource += `
                gl_FragColor = vec4(vColor.rgb, opacity);
            }
        `;
        }

        return fragmentShaderSource;
    }

}

/**
 * SplatMaterial2D
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Modified for FLAME avatar support:
 * - Extended vertex shader for FLAME integration
 */


class SplatMaterial2D {

    /**
     * Build the Three.js material that is used to render the splats.
     * @param {number} dynamicMode If true, it means the scene geometry represented by this splat mesh is not stationary or
     *                             that the splat count might change
     * @param {boolean} enableOptionalEffects When true, allows for usage of extra properties and attributes in the shader for effects
     *                                        such as opacity adjustment. Default is false for performance reasons.
     * @param {number} splatScale Value by which all splats are scaled in screen-space (default is 1.0)
     * @param {number} pointCloudModeEnabled Render all splats as screen-space circles
     * @param {number} maxSphericalHarmonicsDegree Degree of spherical harmonics to utilize in rendering splats
     * @return {THREE.ShaderMaterial}
     */
    static build(dynamicMode = false, enableOptionalEffects = false, splatScale = 1.0,
                 pointCloudModeEnabled = false, maxSphericalHarmonicsDegree = 0) {

        const customVertexVars = `
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;

        let vertexShaderSource = SplatMaterial.buildVertexShaderBase(dynamicMode, enableOptionalEffects,
                                                                     maxSphericalHarmonicsDegree, customVertexVars);
        vertexShaderSource += SplatMaterial2D.buildVertexShaderProjection();
        const fragmentShaderSource = SplatMaterial2D.buildFragmentShader();

        const uniforms = SplatMaterial.getUniforms(dynamicMode, enableOptionalEffects,
                                                   maxSphericalHarmonicsDegree, splatScale, pointCloudModeEnabled);

        uniforms['scaleRotationsTexture'] = {
            'type': 't',
            'value': null
        };
        uniforms['scaleRotationsTextureSize'] = {
            'type': 'v2',
            'value': new Vector2(1024, 1024)
        };

        const material = new ShaderMaterial({
            uniforms: uniforms,
            vertexShader: vertexShaderSource,
            fragmentShader: fragmentShaderSource,
            transparent: true,
            alphaTest: 1.0,
            blending: NormalBlending,
            depthTest: true,
            depthWrite: false,
            side: DoubleSide
        });

        return material;
    }

    static buildVertexShaderProjection() {

        // Original CUDA code for calculating splat-to-screen transformation, for reference
        /*
            glm::mat3 R = quat_to_rotmat(rot);
            glm::mat3 S = scale_to_mat(scale, mod);
            glm::mat3 L = R * S;

            // center of Gaussians in the camera coordinate
            glm::mat3x4 splat2world = glm::mat3x4(
                glm::vec4(L[0], 0.0),
                glm::vec4(L[1], 0.0),
                glm::vec4(p_orig.x, p_orig.y, p_orig.z, 1)
            );

            glm::mat4 world2ndc = glm::mat4(
                projmatrix[0], projmatrix[4], projmatrix[8], projmatrix[12],
                projmatrix[1], projmatrix[5], projmatrix[9], projmatrix[13],
                projmatrix[2], projmatrix[6], projmatrix[10], projmatrix[14],
                projmatrix[3], projmatrix[7], projmatrix[11], projmatrix[15]
            );

            glm::mat3x4 ndc2pix = glm::mat3x4(
                glm::vec4(float(W) / 2.0, 0.0, 0.0, float(W-1) / 2.0),
                glm::vec4(0.0, float(H) / 2.0, 0.0, float(H-1) / 2.0),
                glm::vec4(0.0, 0.0, 0.0, 1.0)
            );

            T = glm::transpose(splat2world) * world2ndc * ndc2pix;
            normal = transformVec4x3({L[2].x, L[2].y, L[2].z}, viewmatrix);
        */

        // Compute a 2D-to-2D mapping matrix from a tangent plane into a image plane
        // given a 2D gaussian parameters. T = WH (from the paper: https://arxiv.org/pdf/2403.17888)
        let vertexShaderSource = `

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;

        // Original CUDA code for projection to 2D, for reference
        /*
            float3 T0 = {T[0][0], T[0][1], T[0][2]};
            float3 T1 = {T[1][0], T[1][1], T[1][2]};
            float3 T3 = {T[2][0], T[2][1], T[2][2]};

            // Compute AABB
            float3 temp_point = {1.0f, 1.0f, -1.0f};
            float distance = sumf3(T3 * T3 * temp_point);
            float3 f = (1 / distance) * temp_point;
            if (distance == 0.0) return false;

            point_image = {
                sumf3(f * T0 * T3),
                sumf3(f * T1 * T3)
            };

            float2 temp = {
                sumf3(f * T0 * T0),
                sumf3(f * T1 * T1)
            };
            float2 half_extend = point_image * point_image - temp;
            extent = sqrtf2(maxf2(1e-4, half_extend));
            return true;
        */

        // Computing the bounding box of the 2D Gaussian and its center
        // The center of the bounding box is used to create a low pass filter.
        // This code is based off the reference implementation and creates an AABB aligned
        // with the screen for the quad to be rendered.
        const referenceQuadGeneration = `
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        `;
        {
            // Create a quad that is aligned with the eigen vectors of the projected gaussian for rendering.
            // This is a different approach than the reference implementation, similar to how the rendering of
            // 3D gaussians in this viewer differs from the reference implementation. If the quad is too small
            // (smaller than a pixel), then revert to the reference implementation.
            vertexShaderSource += `

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    ${referenceQuadGeneration}
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `;
        }

        vertexShaderSource += SplatMaterial.getVertexShaderFadeIn();
        vertexShaderSource += `}`;

        return vertexShaderSource;
    }

    static buildFragmentShader() {

        // Original CUDA code for splat intersection, for reference
        /*
            const float2 xy = collected_xy[j];
            const float3 Tu = collected_Tu[j];
            const float3 Tv = collected_Tv[j];
            const float3 Tw = collected_Tw[j];
            float3 k = pix.x * Tw - Tu;
            float3 l = pix.y * Tw - Tv;
            float3 p = cross(k, l);
            if (p.z == 0.0) continue;
            float2 s = {p.x / p.z, p.y / p.z};
            float rho3d = (s.x * s.x + s.y * s.y);
            float2 d = {xy.x - pixf.x, xy.y - pixf.y};
            float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y);

            // compute intersection and depth
            float rho = min(rho3d, rho2d);
            float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z;
            if (depth < near_n) continue;
            float4 nor_o = collected_normal_opacity[j];
            float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
            float opa = nor_o.w;

            float power = -0.5f * rho;
            if (power > 0.0f)
                continue;

            // Eq. (2) from 3D Gaussian splatting paper.
            // Obtain alpha by multiplying with Gaussian opacity
            // and its exponential falloff from mean.
            // Avoid numerical instabilities (see paper appendix).
            float alpha = min(0.99f, opa * exp(power));
            if (alpha < 1.0f / 255.0f)
                continue;
            float test_T = T * (1 - alpha);
            if (test_T < 0.0001f)
            {
                done = true;
                continue;
            }

            float w = alpha * T;
        */
        let fragmentShaderSource = `
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `;

        return fragmentShaderSource;
    }
}

/**
 * SplatMesh
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME bone texture handling
 * - Added expression blendshape support
 * - Extended with skinning data management
 * - Additional ~800 lines of FLAME-specific code
 */


const logger$4 = getLogger('SplatMesh');

// Dummy geometry and material for initial Mesh construction
const dummyGeometry = new BufferGeometry();
const dummyMaterial = new MeshBasicMaterial();

/**
 * WebGL Extensions helper (from Three.js internals)
 */
function WebGLExtensions$1(gl) {
    const extensions = {};

    function getExtension(name) {
        if (extensions[name] !== undefined) {
            return extensions[name];
        }

        let extension;
        switch (name) {
            case 'WEBGL_depth_texture':
                extension = gl.getExtension('WEBGL_depth_texture') || gl.getExtension('MOZ_WEBGL_depth_texture') ||
                            gl.getExtension('WEBKIT_WEBGL_depth_texture');
                break;
            case 'EXT_texture_filter_anisotropic':
                extension = gl.getExtension('EXT_texture_filter_anisotropic') ||
                            gl.getExtension('MOZ_EXT_texture_filter_anisotropic') ||
                            gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');
                break;
            case 'WEBGL_compressed_texture_s3tc':
                extension = gl.getExtension('WEBGL_compressed_texture_s3tc') ||
                            gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') ||
                            gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');
                break;
            case 'WEBGL_compressed_texture_pvrtc':
                extension = gl.getExtension('WEBGL_compressed_texture_pvrtc') ||
                            gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');
                break;
            default:
                extension = gl.getExtension(name);
        }

        extensions[name] = extension;
        return extension;
    }

    return {
        has: function(name) {
            return getExtension(name) !== null;
        },
        init: function(capabilities) {
            if (capabilities.isWebGL2) {
                getExtension('EXT_color_buffer_float');
                getExtension('WEBGL_clip_cull_distance');
            } else {
                getExtension('WEBGL_depth_texture');
                getExtension('OES_texture_float');
                getExtension('OES_texture_half_float');
                getExtension('OES_texture_half_float_linear');
                getExtension('OES_standard_derivatives');
                getExtension('OES_element_index_uint');
                getExtension('OES_vertex_array_object');
                getExtension('ANGLE_instanced_arrays');
            }
            getExtension('OES_texture_float_linear');
            getExtension('EXT_color_buffer_half_float');
            getExtension('WEBGL_multisampled_render_to_texture');
        },
        get: function(name) {
            const extension = getExtension(name);
            if (extension === null) {
                logger$4.warn('THREE.WebGLRenderer: ' + name + ' extension not supported.');
            }
            return extension;
        }
    };
}

/**
 * WebGL Capabilities helper (from Three.js internals)
 */
function WebGLCapabilities$1(gl, extensions, parameters) {
    let maxAnisotropy;

    function getMaxAnisotropy() {
        if (maxAnisotropy !== undefined) return maxAnisotropy;
        if (extensions.has('EXT_texture_filter_anisotropic') === true) {
            const extension = extensions.get('EXT_texture_filter_anisotropic');
            maxAnisotropy = gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
        } else {
            maxAnisotropy = 0;
        }
        return maxAnisotropy;
    }

    function getMaxPrecision(precision) {
        if (precision === 'highp') {
            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision > 0 &&
                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision > 0) {
                return 'highp';
            }
            precision = 'mediump';
        }
        if (precision === 'mediump') {
            if (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision > 0 &&
                gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision > 0) {
                return 'mediump';
            }
        }
        return 'lowp';
    }

    const isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl.constructor.name === 'WebGL2RenderingContext';

    let precision = parameters.precision !== undefined ? parameters.precision : 'highp';
    const maxPrecision = getMaxPrecision(precision);

    if (maxPrecision !== precision) {
        logger$4.warn('THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.');
        precision = maxPrecision;
    }

    const drawBuffers = isWebGL2 || extensions.has('WEBGL_draw_buffers');
    const logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;

    const maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);
    const maxVertexTextures = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
    const maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);
    const maxCubemapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);

    const maxAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);
    const maxVertexUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);
    const maxVaryings = gl.getParameter(gl.MAX_VARYING_VECTORS);
    const maxFragmentUniforms = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);

    const vertexTextures = maxVertexTextures > 0;
    const floatFragmentTextures = isWebGL2 || extensions.has('OES_texture_float');
    const floatVertexTextures = vertexTextures && floatFragmentTextures;

    const maxSamples = isWebGL2 ? gl.getParameter(gl.MAX_SAMPLES) : 0;

    return {
        isWebGL2: isWebGL2,
        drawBuffers: drawBuffers,
        getMaxAnisotropy: getMaxAnisotropy,
        getMaxPrecision: getMaxPrecision,
        precision: precision,
        logarithmicDepthBuffer: logarithmicDepthBuffer,
        maxTextures: maxTextures,
        maxVertexTextures: maxVertexTextures,
        maxTextureSize: maxTextureSize,
        maxCubemapSize: maxCubemapSize,
        maxAttributes: maxAttributes,
        maxVertexUniforms: maxVertexUniforms,
        maxVaryings: maxVaryings,
        maxFragmentUniforms: maxFragmentUniforms,
        vertexTextures: vertexTextures,
        floatFragmentTextures: floatFragmentTextures,
        floatVertexTextures: floatVertexTextures,
        maxSamples: maxSamples
    };
}

/**
 * WebGL Utils helper (from Three.js internals)
 */
function WebGLUtils$1(gl, extensions, capabilities) {
    const isWebGL2 = capabilities.isWebGL2;

    function convert(p, colorSpace) {
        let extension;

        if (p === UnsignedByteType) return gl.UNSIGNED_BYTE;
        if (p === 1017) return gl.UNSIGNED_SHORT_4_4_4_4;
        if (p === 1018) return gl.UNSIGNED_SHORT_5_5_5_1;
        if (p === 1010) return gl.BYTE;
        if (p === 1011) return gl.SHORT;
        if (p === 1012) return gl.UNSIGNED_SHORT;
        if (p === 1013) return gl.INT;
        if (p === 1014) return gl.UNSIGNED_INT;
        if (p === FloatType) return gl.FLOAT;

        if (p === HalfFloatType) {
            if (isWebGL2) return gl.HALF_FLOAT;
            extension = extensions.get('OES_texture_half_float');
            if (extension !== null) {
                return extension.HALF_FLOAT_OES;
            } else {
                return null;
            }
        }

        if (p === 1021) return gl.ALPHA;
        if (p === 1022) return gl.RGB;
        if (p === RGBAFormat) return gl.RGBA;
        if (p === 1024) return gl.LUMINANCE;
        if (p === 1025) return gl.LUMINANCE_ALPHA;
        if (p === 1026) return gl.DEPTH_COMPONENT;
        if (p === 1027) return gl.DEPTH_STENCIL;

        // WebGL2 formats
        if (p === RedFormat) return gl.RED;
        if (p === RedIntegerFormat) return gl.RED_INTEGER;
        if (p === RGFormat) return gl.RG;
        if (p === RGIntegerFormat) return gl.RG_INTEGER;
        if (p === RGBIntegerFormat) return gl.RGB_INTEGER;
        if (p === RGBAIntegerFormat) return gl.RGBA_INTEGER;

        // S3TC
        if (p === 33776 || p === 33777 || p === 33778 || p === 33779) {
            extension = extensions.get('WEBGL_compressed_texture_s3tc');
            if (extension !== null) {
                if (p === 33776) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (p === 33777) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (p === 33778) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (p === 33779) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            } else {
                return null;
            }
        }

        // PVRTC
        if (p === 35840 || p === 35841 || p === 35842 || p === 35843) {
            extension = extensions.get('WEBGL_compressed_texture_pvrtc');
            if (extension !== null) {
                if (p === 35840) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (p === 35841) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (p === 35842) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (p === 35843) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            } else {
                return null;
            }
        }

        // ETC
        if (p === 36196) {
            extension = extensions.get('WEBGL_compressed_texture_etc1');
            if (extension !== null) {
                return extension.COMPRESSED_RGB_ETC1_WEBGL;
            } else {
                return null;
            }
        }

        // ASTC
        if (p >= 37808 && p <= 37814 || p >= 37840 && p <= 37846) {
            extension = extensions.get('WEBGL_compressed_texture_astc');
            if (extension !== null) {
                return p;
            } else {
                return null;
            }
        }

        // BPTC
        if (p === 36492 || p === 36494 || p === 36495) {
            extension = extensions.get('EXT_texture_compression_bptc');
            if (extension !== null) {
                return p;
            } else {
                return null;
            }
        }

        if (p === 34042) return gl.UNSIGNED_INT_24_8;

        // Internal formats for float/half-float textures
        if (isWebGL2) {
            if (p === 6407) return gl.RGB;
            if (p === 6408) return gl.RGBA;
        }

        return (gl[p] !== undefined) ? gl[p] : null;
    }

    return {
        convert: convert
    };
}

// Constants for texture element counts
const COVARIANCES_ELEMENTS_PER_SPLAT = 6;
const CENTER_COLORS_ELEMENTS_PER_SPLAT = 4;

const COVARIANCES_ELEMENTS_PER_TEXEL_STORED = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED = 4;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED = 6;
const COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED = 8;
const SCALES_ROTATIONS_ELEMENTS_PER_TEXEL = 4;
const CENTER_COLORS_ELEMENTS_PER_TEXEL = 4;
const SCENE_INDEXES_ELEMENTS_PER_TEXEL = 1;

const SCENE_FADEIN_RATE_FAST = 0.012;
const SCENE_FADEIN_RATE_GRADUAL = 0.003;

const VISIBLE_REGION_EXPANSION_DELTA = 1;

const MAX_TEXTURE_TEXELS = 16777216;

class SplatMesh extends Mesh {

    constructor(splatRenderMode = SplatRenderMode.ThreeD, dynamicMode = false, enableOptionalEffects = false,
                halfPrecisionCovariancesOnGPU = false, devicePixelRatio = 1, enableDistancesComputationOnGPU = true,
                integerBasedDistancesComputation = false, antialiased = false, maxScreenSpaceSplatSize = 1024, logLevel = LogLevel.None,
                sphericalHarmonicsDegree = 0, sceneFadeInRateMultiplier = 1.0, kernel2DSize = 0.3) {
        super(dummyGeometry, dummyMaterial);

        // Reference to a Three.js renderer
        this.renderer = undefined;

        // Determine how the splats are rendered
        this.splatRenderMode = splatRenderMode;

        // When 'dynamicMode' is true, scenes are assumed to be non-static. Dynamic scenes are handled differently
        // and certain optimizations cannot be made for them. Additionally, by default, all splat data retrieved from
        // this splat mesh will not have their scene transform applied to them if the splat mesh is dynamic. That
        // can be overriden via parameters to the individual functions that are used to retrieve splat data.
        this.dynamicMode = dynamicMode;

        // When true, allows for usage of extra properties and attributes during rendering for effects such as opacity adjustment.
        // Default is false for performance reasons. These properties are separate from transform properties (scale, rotation, position)
        // that are enabled by the 'dynamicScene' parameter.
        this.enableOptionalEffects = enableOptionalEffects;

        // Use 16-bit floating point values when storing splat covariance data in textures, instead of 32-bit
        this.halfPrecisionCovariancesOnGPU = halfPrecisionCovariancesOnGPU;

        // Ratio of the resolution in physical pixels to the resolution in CSS pixels for the current display device
        this.devicePixelRatio = devicePixelRatio;

        // Use a transform feedback to calculate splat distances from the camera
        this.enableDistancesComputationOnGPU = enableDistancesComputationOnGPU;

        // Use a faster integer-based approach for calculating splat distances from the camera
        this.integerBasedDistancesComputation = integerBasedDistancesComputation;

        // When true, will perform additional steps during rendering to address artifacts caused by the rendering of gaussians at a
        // substantially different resolution than that at which they were rendered during training. This will only work correctly
        // for models that were trained using a process that utilizes this compensation calculation. For more details:
        // https://github.com/nerfstudio-project/gsplat/pull/117
        // https://github.com/graphdeco-inria/gaussian-splatting/issues/294#issuecomment-1772688093
        this.antialiased = antialiased;

        // The size of the 2D kernel used for splat rendering
        // This will adjust the 2D kernel size after the projection
        this.kernel2DSize = kernel2DSize;

        // Specify the maximum clip space splat size, can help deal with large splats that get too unwieldy
        this.maxScreenSpaceSplatSize = maxScreenSpaceSplatSize;

        // The verbosity of console logging
        this.logLevel = logLevel;

        // Degree 0 means no spherical harmonics
        this.sphericalHarmonicsDegree = sphericalHarmonicsDegree;
        this.minSphericalHarmonicsDegree = 0;

        this.sceneFadeInRateMultiplier = sceneFadeInRateMultiplier;

        // The individual splat scenes stored in this splat mesh, each containing their own transform
        this.scenes = [];

        // Special octree tailored to SplatMesh instances
        this.splatTree = null;
        this.baseSplatTree = null;

        // Cache textures and the intermediate data used to populate them
        this.splatDataTextures = {};
        this.flameModel = null;
        this.expressionBSNum = 0;
        this.bsWeight = [];

        this.bonesMatrix = null;
        this.bonesNum = null;
        this.bonesWeight = null;
        this.gaussianSplatCount = null;

        this.morphTargetDictionary = null;
        this.distancesTransformFeedback = {
            'id': null,
            'vertexShader': null,
            'fragmentShader': null,
            'program': null,
            'centersBuffer': null,
            'sceneIndexesBuffer': null,
            'outDistancesBuffer': null,
            'centersLoc': -1,
            'modelViewProjLoc': -1,
            'sceneIndexesLoc': -1,
            'transformsLocs': []
        };

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSceneIndexMap = [];

        // Optional iris occlusion configuration from avatar ZIP
        this.irisOcclusionConfig = null;

        this.lastBuildSplatCount = 0;
        this.lastBuildScenes = [];
        this.lastBuildMaxSplatCount = 0;
        this.lastBuildSceneCount = 0;
        this.firstRenderTime = -1;
        this.finalBuild = false;

        this.webGLUtils = null;

        this.boundingBox = new Box3();
        this.calculatedSceneCenter = new Vector3();
        this.maxSplatDistanceFromSceneCenter = 0;
        this.visibleRegionBufferRadius = 0;
        this.visibleRegionRadius = 0;
        this.visibleRegionFadeStartRadius = 0;
        this.visibleRegionChanging = false;

        this.splatScale = 1.0;
        this.pointCloudModeEnabled = false;

        this.disposed = false;
        this.lastRenderer = null;
        this.visible = false;
    }

    /**
     * Build a container for each scene managed by this splat mesh based on an instance of SplatBuffer, along with optional
     * transform data (position, scale, rotation) passed to the splat mesh during the build process.
     * @param {Array<THREE.Matrix4>} splatBuffers SplatBuffer instances containing splats for each scene
     * @param {Array<object>} sceneOptions Array of options objects: {
     *
     *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
     *
     *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
     *
     *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
     * }
     * @return {Array<THREE.Matrix4>}
     */
    static buildScenes(parentObject, splatBuffers, sceneOptions) {
        const scenes = [];
        scenes.length = splatBuffers.length;
        for (let i = 0; i < splatBuffers.length; i++) {
            const splatBuffer = splatBuffers[i];
            const options = sceneOptions[i] || {};
            let positionArray = options['position'] || [0, 0, 0];
            let rotationArray = options['rotation'] || [0, 0, 0, 1];
            let scaleArray = options['scale'] || [1, 1, 1];
            const position = new Vector3().fromArray(positionArray);
            const rotation = new Quaternion().fromArray(rotationArray);
            const scale = new Vector3().fromArray(scaleArray);
            const scene = SplatMesh.createScene(splatBuffer, position, rotation, scale,
                                                options.splatAlphaRemovalThreshold || 1, options.opacity, options.visible);
            parentObject.add(scene);
            scenes[i] = scene;
        }
        return scenes;
    }



    static createScene(splatBuffer, position, rotation, scale, minimumAlpha, opacity = 1.0, visible = true) {
        return new SplatScene(splatBuffer, position, rotation, scale, minimumAlpha, opacity, visible);
    }

    /**
     * Build data structures that map global splat indexes (based on a unified index across all splat buffers) to
     * local data within a single scene.
     * @param {Array<SplatBuffer>} splatBuffers Instances of SplatBuffer off which to build the maps
     * @return {object}
     */
    static buildSplatIndexMaps(splatBuffers) {
        const localSplatIndexMap = [];
        const sceneIndexMap = [];
        let totalSplatCount = 0;
        for (let s = 0; s < splatBuffers.length; s++) {
            const splatBuffer = splatBuffers[s];
            const maxSplatCount = splatBuffer.getMaxSplatCount();
            for (let i = 0; i < maxSplatCount; i++) {
                localSplatIndexMap[totalSplatCount] = i;
                sceneIndexMap[totalSplatCount] = s;
                totalSplatCount++;
            }
        }
        return {
            localSplatIndexMap,
            sceneIndexMap
        };
    }

    /**
     * Build an instance of SplatTree (a specialized octree) for the given splat mesh.
     * @param {Array<number>} minAlphas Array of minimum splat slphas for each scene
     * @param {function} onSplatTreeIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                            builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {SplatTree}
     */
     buildSplatTree = (minAlphas = [], onSplatTreeIndexesUpload, onSplatTreeConstruction) => {
        return new Promise((resolve) => {
            this.disposeSplatTree();
            // TODO: expose SplatTree constructor parameters (maximumDepth and maxCentersPerNode) so that they can
            // be configured on a per-scene basis
            this.baseSplatTree = new SplatTree(8, 1000);
            const buildStartTime = performance.now();
            const splatColor = new Vector4();
            this.baseSplatTree.processSplatMesh(this, (splatIndex) => {
                this.getSplatColor(splatIndex, splatColor);
                const sceneIndex = this.getSceneIndexForSplat(splatIndex);
                const minAlpha = minAlphas[sceneIndex] || 1;
                return splatColor.w >= minAlpha;
            }, onSplatTreeIndexesUpload, onSplatTreeConstruction)
            .then(() => {
                const buildTime = performance.now() - buildStartTime;
                if (this.logLevel >= LogLevel.Info) logger$4.info('SplatTree build: ' + buildTime + ' ms');
                if (this.disposed) {
                    resolve();
                } else {

                    this.splatTree = this.baseSplatTree;
                    this.baseSplatTree = null;

                    let leavesWithVertices = 0;
                    let avgSplatCount = 0;
                    let nodeCount = 0;

                    this.splatTree.visitLeaves((node) => {
                        const nodeSplatCount = node.data.indexes.length;
                        if (nodeSplatCount > 0) {
                            avgSplatCount += nodeSplatCount;
                            nodeCount++;
                            leavesWithVertices++;
                        }
                    });
                    if (this.logLevel >= LogLevel.Info) {
                        logger$4.info(`SplatTree leaves: ${this.splatTree.countLeaves()}`);
                        logger$4.info(`SplatTree leaves with splats:${leavesWithVertices}`);
                        avgSplatCount = avgSplatCount / nodeCount;
                        logger$4.info(`Avg splat count per node: ${avgSplatCount}`);
                        logger$4.info(`Total splat count: ${this.getSplatCount()}`);
                    }
                    resolve();
                }
            });
        });
    };

    /**
     * Construct this instance of SplatMesh.
     * @param {Array<SplatBuffer>} splatBuffers The base splat data, instances of SplatBuffer
     * @param {Array<object>} sceneOptions Dynamic options for each scene {
     *
     *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
     *                                     value (valid range: 0 - 255), defaults to 1
     *
     *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
     *
     *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
     *
     *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
     *
     * }
     * @param {boolean} keepSceneTransforms For a scene that already exists and is being overwritten, this flag
     *                                      says to keep the transform from the existing scene.
     * @param {boolean} finalBuild Will the splat mesh be in its final state after this build?
     * @param {function} onSplatTreeIndexesUpload Function to be called when the upload of splat centers to the splat tree
     *                                            builder worker starts and finishes.
     * @param {function} onSplatTreeConstruction Function to be called when the conversion of the local splat tree from
     *                                           the format produced by the splat tree builder worker starts and ends.
     * @return {object} Object containing info about the splats that are updated
     */
    build(splatBuffers, sceneOptions, keepSceneTransforms = true, finalBuild = false,
          onSplatTreeIndexesUpload, onSplatTreeConstruction, preserveVisibleRegion = true) {

        this.sceneOptions = sceneOptions;
        this.finalBuild = finalBuild;

        const maxSplatCount = SplatMesh.getTotalMaxSplatCountForSplatBuffers(splatBuffers);

        const newScenes = SplatMesh.buildScenes(this, splatBuffers, sceneOptions);
        if (keepSceneTransforms) {
            for (let i = 0; i < this.scenes.length && i < newScenes.length; i++) {
                const newScene = newScenes[i];
                const existingScene = this.getScene(i);
                newScene.copyTransformData(existingScene);
            }
        }
        this.scenes = newScenes;

        let minSphericalHarmonicsDegree = 3;
        for (let splatBuffer of splatBuffers) {
            const splatBufferSphericalHarmonicsDegree = splatBuffer.getMinSphericalHarmonicsDegree();
            if (splatBufferSphericalHarmonicsDegree < minSphericalHarmonicsDegree) {
                minSphericalHarmonicsDegree = splatBufferSphericalHarmonicsDegree;
            }
        }
        this.minSphericalHarmonicsDegree = Math.min(minSphericalHarmonicsDegree, this.sphericalHarmonicsDegree);

        let splatBuffersChanged = false;
        if (splatBuffers.length !== this.lastBuildScenes.length) {
            splatBuffersChanged = true;
        } else {
            for (let i = 0; i < splatBuffers.length; i++) {
                const splatBuffer = splatBuffers[i];
                if (splatBuffer !== this.lastBuildScenes[i].splatBuffer) {
                    splatBuffersChanged = true;
                    break;
                }
            }
        }

        let isUpdateBuild = true;
        if (this.scenes.length !== 1 ||
            this.lastBuildSceneCount !== this.scenes.length ||
            this.lastBuildMaxSplatCount !== maxSplatCount ||
            splatBuffersChanged) {
                isUpdateBuild = false;
       }

       if (!isUpdateBuild) {
            this.boundingBox = new Box3();
            if (!preserveVisibleRegion) {
                this.maxSplatDistanceFromSceneCenter = 0;
                this.visibleRegionBufferRadius = 0;
                this.visibleRegionRadius = 0;
                this.visibleRegionFadeStartRadius = 0;
                this.firstRenderTime = -1;
            }
            this.lastBuildScenes = [];
            this.lastBuildSplatCount = 0;
            this.lastBuildMaxSplatCount = 0;
            this.disposeMeshData();
            this.geometry = SplatGeometry.build(maxSplatCount);
            if (this.splatRenderMode === SplatRenderMode.ThreeD) {
                this.material = SplatMaterial3D.build(this.dynamicMode, this.enableOptionalEffects, this.antialiased,
                                                      this.maxScreenSpaceSplatSize, this.splatScale, this.pointCloudModeEnabled,
                                                      this.minSphericalHarmonicsDegree, this.kernel2DSize, this.irisOcclusionConfig);
            } else {
                this.material = SplatMaterial2D.build(this.dynamicMode, this.enableOptionalEffects,
                                                      this.splatScale, this.pointCloudModeEnabled, this.minSphericalHarmonicsDegree);
            }

            const indexMaps = SplatMesh.buildSplatIndexMaps(splatBuffers);
            this.globalSplatIndexToLocalSplatIndexMap = indexMaps.localSplatIndexMap;
            this.globalSplatIndexToSceneIndexMap = indexMaps.sceneIndexMap;
        }

        const splatBufferSplatCount = this.getSplatCount(true);
        if (this.enableDistancesComputationOnGPU) this.setupDistancesComputationTransformFeedback();
        const dataUpdateResults = this.refreshGPUDataFromSplatBuffers(isUpdateBuild);

        for (let i = 0; i < this.scenes.length; i++) {
            this.lastBuildScenes[i] = this.scenes[i];
        }
        this.lastBuildSplatCount = splatBufferSplatCount;
        this.lastBuildMaxSplatCount = this.getMaxSplatCount();
        this.lastBuildSceneCount = this.scenes.length;

        // if (finalBuild && this.scenes.length > 0) {
        //     this.buildSplatTree(sceneOptions.map(options => options.splatAlphaRemovalThreshold || 1),
        //                         onSplatTreeIndexesUpload, onSplatTreeConstruction)
        //     .then(() => {
        //         if (this.onSplatTreeReadyCallback) this.onSplatTreeReadyCallback(this.splatTree);
        //         this.onSplatTreeReadyCallback = null;
        //     });
        // }

        this.visible = (this.scenes.length > 0);

        return dataUpdateResults;
    }

    freeIntermediateSplatData() {

        const deleteTextureData = (texture) => {
            delete texture.source.data;
            delete texture.image;
            texture.onUpdate = null;
        };

        delete this.splatDataTextures.baseData.covariances;
        delete this.splatDataTextures.baseData.centers;
        delete this.splatDataTextures.baseData.colors;
        delete this.splatDataTextures.baseData.sphericalHarmonics;

        delete this.splatDataTextures.centerColors.data;
        delete this.splatDataTextures.covariances.data;
        if (this.splatDataTextures.sphericalHarmonics) {
            delete this.splatDataTextures.sphericalHarmonics.data;
        }
        if (this.splatDataTextures.sceneIndexes) {
            delete this.splatDataTextures.sceneIndexes.data;
        }

        this.splatDataTextures.centerColors.texture.needsUpdate = true;
        this.splatDataTextures.centerColors.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.centerColors.texture);
        };

        this.splatDataTextures.flameModelPosTexture.texture.needsUpdate = true;
        this.splatDataTextures.flameModelPosTexture.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.flameModelPosTexture.texture);
        };

        this.splatDataTextures.covariances.texture.needsUpdate = true;
        this.splatDataTextures.covariances.texture.onUpdate = () => {
            deleteTextureData(this.splatDataTextures.covariances.texture);
        };

        if (this.splatDataTextures.sphericalHarmonics) {
            if (this.splatDataTextures.sphericalHarmonics.texture) {
                this.splatDataTextures.sphericalHarmonics.texture.needsUpdate = true;
                this.splatDataTextures.sphericalHarmonics.texture.onUpdate = () => {
                    deleteTextureData(this.splatDataTextures.sphericalHarmonics.texture);
                };
            } else {
                this.splatDataTextures.sphericalHarmonics.textures.forEach((texture) => {
                    texture.needsUpdate = true;
                    texture.onUpdate = () => {
                        deleteTextureData(texture);
                    };
                });
            }
        }
        if (this.splatDataTextures.sceneIndexes) {
            this.splatDataTextures.sceneIndexes.texture.needsUpdate = true;
            this.splatDataTextures.sceneIndexes.texture.onUpdate = () => {
                deleteTextureData(this.splatDataTextures.sceneIndexes.texture);
            };
        }
    }
    /**
     * Dispose all resources held by the splat mesh
     */
    dispose() {
        this.disposeMeshData();
        this.disposeTextures();
        this.disposeSplatTree();
        if (this.enableDistancesComputationOnGPU) {
            if (this.computeDistancesOnGPUSyncTimeout) {
                clearTimeout(this.computeDistancesOnGPUSyncTimeout);
                this.computeDistancesOnGPUSyncTimeout = null;
            }
            this.disposeDistancesComputationGPUResources();
        }
        this.scenes = [];
        this.distancesTransformFeedback = {
            'id': null,
            'vertexShader': null,
            'fragmentShader': null,
            'program': null,
            'centersBuffer': null,
            'sceneIndexesBuffer': null,
            'outDistancesBuffer': null,
            'centersLoc': -1,
            'modelViewProjLoc': -1,
            'sceneIndexesLoc': -1,
            'transformsLocs': []
        };
        this.renderer = null;

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSceneIndexMap = [];

        this.lastBuildSplatCount = 0;
        this.lastBuildScenes = [];
        this.lastBuildMaxSplatCount = 0;
        this.lastBuildSceneCount = 0;
        this.firstRenderTime = -1;
        this.finalBuild = false;

        this.webGLUtils = null;

        this.boundingBox = new Box3();
        this.calculatedSceneCenter = new Vector3();
        this.maxSplatDistanceFromSceneCenter = 0;
        this.visibleRegionBufferRadius = 0;
        this.visibleRegionRadius = 0;
        this.visibleRegionFadeStartRadius = 0;
        this.visibleRegionChanging = false;

        this.splatScale = 1.0;
        this.pointCloudModeEnabled = false;

        this.disposed = true;
        this.lastRenderer = null;
        this.visible = false;
    }

    /**
     * Dispose of only the Three.js mesh resources (geometry, material, and texture)
     */
    disposeMeshData() {
        if (this.geometry && this.geometry !== dummyGeometry) {
            this.geometry.dispose();
            this.geometry = null;
        }
        if (this.material) {
            this.material.dispose();
            this.material = null;
        }
    }

    disposeTextures() {
        for (let textureKey in this.splatDataTextures) {
            if (Object.hasOwn(this.splatDataTextures, textureKey)) {
                const textureContainer = this.splatDataTextures[textureKey];
                if (textureContainer.texture) {
                    textureContainer.texture.dispose();
                    textureContainer.texture = null;
                }
            }
        }
        this.splatDataTextures = null;
    }

    disposeSplatTree() {
        if (this.splatTree) {
            this.splatTree.dispose();
            this.splatTree = null;
        }
        if (this.baseSplatTree) {
            this.baseSplatTree.dispose();
            this.baseSplatTree = null;
        }
    }

    getSplatTree() {
        return this.splatTree;
    }

    onSplatTreeReady(callback) {
        this.onSplatTreeReadyCallback = callback;
    }

    /**
     * Get copies of data that are necessary for splat distance computation: splat center positions and splat
     * scene indexes (necessary for applying dynamic scene transformations during distance computation)
     * @param {*} start The index at which to start copying data
     * @param {*} end  The index at which to stop copying data
     * @return {object}
     */
    getDataForDistancesComputation(start, end) {
        const centers = this.integerBasedDistancesComputation ?
                        this.getIntegerCenters(start, end, true) :
                        this.getFloatCenters(start, end, true);
        const sceneIndexes = this.getSceneIndexes(start, end);
        return {
            centers,
            sceneIndexes
        };
    }

    /**
     * Refresh data textures and GPU buffers with splat data from the splat buffers belonging to this mesh.
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     * @return {object}
     */
    refreshGPUDataFromSplatBuffers(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        this.refreshDataTexturesFromSplatBuffers(sinceLastBuildOnly);
        const updateStart = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        const { centers, sceneIndexes } = this.getDataForDistancesComputation(updateStart, splatCount - 1);
        if (this.enableDistancesComputationOnGPU) {
            this.refreshGPUBuffersForDistancesComputation(centers, sceneIndexes, sinceLastBuildOnly);
        }
        return {
            'from': updateStart,
            'to': splatCount - 1,
            'count': splatCount - updateStart,
            'centers': centers,
            'sceneIndexes': sceneIndexes
        };
    }

    /**
     * Update the GPU buffers that are used for computing splat distances on the GPU.
     * @param {Array<number>} centers Splat center positions
     * @param {Array<number>} sceneIndexes Indexes of the scene to which each splat belongs
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     */
    refreshGPUBuffersForDistancesComputation(centers, sceneIndexes, sinceLastBuildOnly = false) {
        const offset = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        this.updateGPUCentersBufferForDistancesComputation(sinceLastBuildOnly, centers, offset);
        this.updateGPUTransformIndexesBufferForDistancesComputation(sinceLastBuildOnly, sceneIndexes, offset);
    }

    /**
     * Refresh data textures with data from the splat buffers for this mesh.
     * @param {boolean} sinceLastBuildOnly Specify whether or not to only update for splats that have been added since the last build.
     */
    refreshDataTexturesFromSplatBuffers(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        const fromSplat = this.lastBuildSplatCount;
        const toSplat = splatCount - 1;

        if (!sinceLastBuildOnly) {
            this.setupDataTextures();
            this.updateBaseDataFromSplatBuffers();
        } else {
            this.updateBaseDataFromSplatBuffers(fromSplat, toSplat);
        }

        this.updateDataTexturesFromBaseData(fromSplat, toSplat);
        this.updateVisibleRegion(sinceLastBuildOnly);
    }

    setupDataTextures() {
        const maxSplatCount = this.getMaxSplatCount();
        const splatCount = this.getSplatCount(true);

        this.disposeTextures();

        const computeDataTextureSize = (elementsPerTexel, elementsPerSplat) => {
            const texSize = new Vector2(4096, 1024);
            while (texSize.x * texSize.y * elementsPerTexel < maxSplatCount * elementsPerSplat) texSize.y *= 2;
            return texSize;
        };

        const getCovariancesElementsPertexelStored = (compressionLevel) => {
            return compressionLevel >= 1 ? COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED : COVARIANCES_ELEMENTS_PER_TEXEL_STORED;
        };

        const getCovariancesInitialTextureSpecs = (compressionLevel) => {
            const elementsPerTexelStored = getCovariancesElementsPertexelStored(compressionLevel);
            const texSize = computeDataTextureSize(elementsPerTexelStored, 6);
            return {elementsPerTexelStored, texSize};
        };

        let covarianceCompressionLevel = this.getTargetCovarianceCompressionLevel();
        const scaleRotationCompressionLevel = 0;
        const shCompressionLevel = this.getTargetSphericalHarmonicsCompressionLevel();

        let covariances;
        let scales;
        let rotations;
        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            const initialCovTexSpecs = getCovariancesInitialTextureSpecs(covarianceCompressionLevel);
            if (initialCovTexSpecs.texSize.x * initialCovTexSpecs.texSize.y > MAX_TEXTURE_TEXELS && covarianceCompressionLevel === 0) {
                covarianceCompressionLevel = 1;
            }
            covariances = new Float32Array(maxSplatCount * COVARIANCES_ELEMENTS_PER_SPLAT);
        } else {
            scales = new Float32Array(maxSplatCount * 3);
            rotations = new Float32Array(maxSplatCount * 4);
        }

        const centers = new Float32Array(maxSplatCount * 3);
        const colors = new Uint8Array(maxSplatCount * 4);

        let SphericalHarmonicsArrayType = Float32Array;
        if (shCompressionLevel === 1) SphericalHarmonicsArrayType = Uint16Array;
        else if (shCompressionLevel === 2) SphericalHarmonicsArrayType = Uint8Array;
        const shComponentCount = getSphericalHarmonicsComponentCountForDegree(this.minSphericalHarmonicsDegree);
        const shData = this.minSphericalHarmonicsDegree ? new SphericalHarmonicsArrayType(maxSplatCount * shComponentCount) : undefined;

        // set up centers/colors data texture
        const centersColsTexSize = computeDataTextureSize(CENTER_COLORS_ELEMENTS_PER_TEXEL, 4);
        const paddedCentersCols = new Uint32Array(centersColsTexSize.x * centersColsTexSize.y * CENTER_COLORS_ELEMENTS_PER_TEXEL);
        SplatMesh.updateCenterColorsPaddedData(0, splatCount - 1, centers, colors, paddedCentersCols);

        const centersColsTex = new DataTexture(paddedCentersCols, centersColsTexSize.x, centersColsTexSize.y,
                                                     RGBAIntegerFormat, UnsignedIntType);
        centersColsTex.internalFormat = 'RGBA32UI';
        centersColsTex.needsUpdate = true;
        this.material.uniforms.centersColorsTexture.value = centersColsTex;
        this.material.uniforms.centersColorsTextureSize.value.copy(centersColsTexSize);
        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures = {
            'baseData': {
                'covariances': covariances,
                'scales': scales,
                'rotations': rotations,
                'centers': centers,
                'colors': colors,
                'sphericalHarmonics': shData
            },
            'centerColors': {
                'data': paddedCentersCols,
                'texture': centersColsTex,
                'size': centersColsTexSize
            }
        };

        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            // set up covariances data texture

            const covTexSpecs = getCovariancesInitialTextureSpecs(covarianceCompressionLevel);
            const covariancesElementsPerTexelStored = covTexSpecs.elementsPerTexelStored;
            const covTexSize = covTexSpecs.texSize;

            let CovariancesDataType = covarianceCompressionLevel >= 1 ? Uint32Array : Float32Array;
            const covariancesElementsPerTexelAllocated = covarianceCompressionLevel >= 1 ?
                                                         COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED :
                                                         COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED;
            const covariancesTextureData = new CovariancesDataType(covTexSize.x * covTexSize.y * covariancesElementsPerTexelAllocated);

            if (covarianceCompressionLevel === 0) {
                covariancesTextureData.set(covariances);
            } else {
                SplatMesh.updatePaddedCompressedCovariancesTextureData(covariances, covariancesTextureData, 0, 0, covariances.length);
            }

            let covTex;
            if (covarianceCompressionLevel >= 1) {
                covTex = new DataTexture(covariancesTextureData, covTexSize.x, covTexSize.y,
                                               RGBAIntegerFormat, UnsignedIntType);
                covTex.internalFormat = 'RGBA32UI';
                this.material.uniforms.covariancesTextureHalfFloat.value = covTex;
            } else {
                covTex = new DataTexture(covariancesTextureData, covTexSize.x, covTexSize.y, RGBAFormat, FloatType);
                this.material.uniforms.covariancesTexture.value = covTex;

                // For some reason a usampler2D needs to have a valid texture attached or WebGL complains
                const dummyTex = new DataTexture(new Uint32Array(32), 2, 2, RGBAIntegerFormat, UnsignedIntType);
                dummyTex.internalFormat = 'RGBA32UI';
                this.material.uniforms.covariancesTextureHalfFloat.value = dummyTex;
                dummyTex.needsUpdate = true;
            }
            covTex.needsUpdate = true;

            this.material.uniforms.covariancesAreHalfFloat.value = (covarianceCompressionLevel >= 1) ? 1 : 0;
            this.material.uniforms.covariancesTextureSize.value.copy(covTexSize);

            this.splatDataTextures['covariances'] = {
                'data': covariancesTextureData,
                'texture': covTex,
                'size': covTexSize,
                'compressionLevel': covarianceCompressionLevel,
                'elementsPerTexelStored': covariancesElementsPerTexelStored,
                'elementsPerTexelAllocated': covariancesElementsPerTexelAllocated
            };
        } else {
            // set up scale & rotations data texture
            const elementsPerSplat = 6;
            const scaleRotationsTexSize = computeDataTextureSize(SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, elementsPerSplat);
            let ScaleRotationsDataType = Float32Array;
            let scaleRotationsTextureType = FloatType;
            const paddedScaleRotations = new ScaleRotationsDataType(scaleRotationsTexSize.x * scaleRotationsTexSize.y *
                                                                    SCALES_ROTATIONS_ELEMENTS_PER_TEXEL);

            SplatMesh.updateScaleRotationsPaddedData(0, splatCount - 1, scales, rotations, paddedScaleRotations);

            const scaleRotationsTex = new DataTexture(paddedScaleRotations, scaleRotationsTexSize.x, scaleRotationsTexSize.y,
                                                            RGBAFormat, scaleRotationsTextureType);
            scaleRotationsTex.needsUpdate = true;
            this.material.uniforms.scaleRotationsTexture.value = scaleRotationsTex;
            this.material.uniforms.scaleRotationsTextureSize.value.copy(scaleRotationsTexSize);

            this.splatDataTextures['scaleRotations'] = {
                'data': paddedScaleRotations,
                'texture': scaleRotationsTex,
                'size': scaleRotationsTexSize,
                'compressionLevel': scaleRotationCompressionLevel
            };
        }

        if (shData) {
            const shTextureType = shCompressionLevel === 2 ? UnsignedByteType : HalfFloatType;

            let paddedSHComponentCount = shComponentCount;
            if (paddedSHComponentCount % 2 !== 0) paddedSHComponentCount++;
            const shElementsPerTexel = this.minSphericalHarmonicsDegree === 2 ? 4 : 2;
            const texelFormat = shElementsPerTexel === 4 ? RGBAFormat : RGFormat;
            let shTexSize = computeDataTextureSize(shElementsPerTexel, paddedSHComponentCount);

            // Use one texture for all spherical harmonics data
            if (shTexSize.x * shTexSize.y <= MAX_TEXTURE_TEXELS) {
                const paddedSHArraySize = shTexSize.x * shTexSize.y * shElementsPerTexel;
                const paddedSHArray = new SphericalHarmonicsArrayType(paddedSHArraySize);
                for (let c = 0; c < splatCount; c++) {
                    const srcBase = shComponentCount * c;
                    const destBase = paddedSHComponentCount * c;
                    for (let i = 0; i < shComponentCount; i++) {
                        paddedSHArray[destBase + i] = shData[srcBase + i];
                    }
                }

                const shTexture = new DataTexture(paddedSHArray, shTexSize.x, shTexSize.y, texelFormat, shTextureType);
                shTexture.needsUpdate = true;
                this.material.uniforms.sphericalHarmonicsTexture.value = shTexture;
                this.splatDataTextures['sphericalHarmonics'] = {
                    'componentCount': shComponentCount,
                    'paddedComponentCount': paddedSHComponentCount,
                    'data': paddedSHArray,
                    'textureCount': 1,
                    'texture': shTexture,
                    'size': shTexSize,
                    'compressionLevel': shCompressionLevel,
                    'elementsPerTexel': shElementsPerTexel
                };
            // Use three textures for spherical harmonics data, one per color channel
            } else {
                const shComponentCountPerChannel = shComponentCount / 3;
                paddedSHComponentCount = shComponentCountPerChannel;
                if (paddedSHComponentCount % 2 !== 0) paddedSHComponentCount++;
                shTexSize = computeDataTextureSize(shElementsPerTexel, paddedSHComponentCount);

                const paddedSHArraySize = shTexSize.x * shTexSize.y * shElementsPerTexel;
                const textureUniforms = [this.material.uniforms.sphericalHarmonicsTextureR,
                                         this.material.uniforms.sphericalHarmonicsTextureG,
                                         this.material.uniforms.sphericalHarmonicsTextureB];
                const paddedSHArrays = [];
                const shTextures = [];
                for (let t = 0; t < 3; t++) {
                    const paddedSHArray = new SphericalHarmonicsArrayType(paddedSHArraySize);
                    paddedSHArrays.push(paddedSHArray);
                    for (let c = 0; c < splatCount; c++) {
                        const srcBase = shComponentCount * c;
                        const destBase = paddedSHComponentCount * c;
                        if (shComponentCountPerChannel >= 3) {
                            for (let i = 0; i < 3; i++) paddedSHArray[destBase + i] = shData[srcBase + t * 3 + i];
                            if (shComponentCountPerChannel >= 8) {
                                for (let i = 0; i < 5; i++) paddedSHArray[destBase + 3 + i] = shData[srcBase + 9 + t * 5 + i];
                            }
                        }
                    }

                    const shTexture = new DataTexture(paddedSHArray, shTexSize.x, shTexSize.y, texelFormat, shTextureType);
                    shTextures.push(shTexture);
                    shTexture.needsUpdate = true;
                    textureUniforms[t].value = shTexture;
                }

                this.material.uniforms.sphericalHarmonicsMultiTextureMode.value = 1;
                this.splatDataTextures['sphericalHarmonics'] = {
                    'componentCount': shComponentCount,
                    'componentCountPerChannel': shComponentCountPerChannel,
                    'paddedComponentCount': paddedSHComponentCount,
                    'data': paddedSHArrays,
                    'textureCount': 3,
                    'textures': shTextures,
                    'size': shTexSize,
                    'compressionLevel': shCompressionLevel,
                    'elementsPerTexel': shElementsPerTexel
                };
            }

            this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(shTexSize);
            this.material.uniforms.sphericalHarmonics8BitMode.value = shCompressionLevel === 2 ? 1 : 0;
            for (let s = 0; s < this.scenes.length; s++) {
                const splatBuffer = this.scenes[s].splatBuffer;
                this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[s] =
                    splatBuffer.minSphericalHarmonicsCoeff;
                this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[s] =
                    splatBuffer.maxSphericalHarmonicsCoeff;
            }
            this.material.uniformsNeedUpdate = true;
        }

        const sceneIndexesTexSize = computeDataTextureSize(SCENE_INDEXES_ELEMENTS_PER_TEXEL, 4);
        const paddedTransformIndexes = new Uint32Array(sceneIndexesTexSize.x *
                                                       sceneIndexesTexSize.y * SCENE_INDEXES_ELEMENTS_PER_TEXEL);
        for (let c = 0; c < splatCount; c++) paddedTransformIndexes[c] = this.globalSplatIndexToSceneIndexMap[c];
        const sceneIndexesTexture = new DataTexture(paddedTransformIndexes, sceneIndexesTexSize.x, sceneIndexesTexSize.y,
                                                          RedIntegerFormat, UnsignedIntType);
        sceneIndexesTexture.internalFormat = 'R32UI';
        sceneIndexesTexture.needsUpdate = true;
        this.material.uniforms.sceneIndexesTexture.value = sceneIndexesTexture;
        this.material.uniforms.sceneIndexesTextureSize.value.copy(sceneIndexesTexSize);
        this.material.uniformsNeedUpdate = true;
        this.splatDataTextures['sceneIndexes'] = {
            'data': paddedTransformIndexes,
            'texture': sceneIndexesTexture,
            'size': sceneIndexesTexSize
        };
        this.material.uniforms.sceneCount.value = this.scenes.length;

        // FLAME-specific setup (only if flameModel has required data)
        if (this.flameModel && this.flameModel.geometry && this.flameModel.geometry.morphAttributes && this.flameModel.skeleton) {
            this.expressionBSNum = this.flameModel.geometry.morphAttributes.position.length;
            this.material.uniforms.bsCount.value = this.expressionBSNum;

            this.flameModel.skeleton.bones.forEach((bone, index) => {
                if (bone.name == 'head')
                    this.material.uniforms.headBoneIndex.value = index;
            });

            this.buildModelTexture(this.flameModel);
            this.buildBoneMatrixTexture();
            this.buildBoneWeightTexture(this.flameModel);
        }
    }

    buildBoneMatrixTexture() {
        if (!this.bsWeight)
            return

        // Guard: Requires FLAME model with morphTargetDictionary
        if (!this.flameModel || !this.flameModel.morphTargetDictionary) {
            return;
        }

        //this.bonesNum + this.expressionBSNum / 4 = 30, so 32
        const boneTextureSize = new Vector2(4, 32);
        let boneMatrixTextureData = new Float32Array(this.bonesMatrix);
        let boneMatrixTextureDataInt = new Uint32Array(boneTextureSize.x * boneTextureSize.y * 4);
        this.morphTargetDictionary = this.flameModel.morphTargetDictionary;

        for (let c = 0; c < this.bonesNum * 16; c++) {
            boneMatrixTextureDataInt[c] = uintEncodedFloat$1(boneMatrixTextureData[c]);
        }
        if (this.flameModel && this.flameModel.skeleton) {
            this.material.uniforms.boneTexture0.value = this.flameModel.skeleton.boneTexture;
            this.material.uniforms.bindMatrix.value = this.flameModel.bindMatrix;
            this.material.uniforms.bindMatrixInverse.value = this.flameModel.bindMatrixInverse;
        }
        for (const key in this.bsWeight) {
            if (Object.hasOwn(this.bsWeight, key)) {
                const value = this.bsWeight[key];
                const idx = this.morphTargetDictionary[key];
                boneMatrixTextureDataInt[idx + this.bonesNum * 16] = uintEncodedFloat$1(value);
            }
        }

        // for (let c = 0; c < this.bsWeight.length; c++) {
        //     this.morphTargetDictionary
        //     boneMatrixTextureDataInt[c + this.bonesNum * 16] = uintEncodedFloat(this.bsWeight[c]);
        // }

        const boneMatrixTex = new DataTexture(boneMatrixTextureDataInt, boneTextureSize.x, boneTextureSize.y,
                                                     RGBAIntegerFormat, UnsignedIntType);
        boneMatrixTex.internalFormat = 'RGBA32UI';
        boneMatrixTex.needsUpdate = true;
        this.material.uniforms.boneTexture.value = boneMatrixTex;
        this.material.uniforms.boneTextureSize.value.copy(boneTextureSize);

        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures['boneMatrix'] = {
            'data': boneMatrixTextureDataInt,
            'texture': boneMatrixTex,
            'size': boneTextureSize,
        };
        this.splatDataTextures.baseData['boneMatrix'] = boneMatrixTextureDataInt;
    }

    updateBoneMatrixTexture() {
        if (!this.bsWeight || !this.morphTargetDictionary)
            return

        for (const key in this.bsWeight) {
            if (Object.hasOwn(this.bsWeight, key)) {
                const value = this.bsWeight[key];
                const idx = this.morphTargetDictionary[key];
                this.splatDataTextures.baseData['boneMatrix'][idx + this.bonesNum * 16] = uintEncodedFloat$1(value);
            }
        }

        // for (let c = 0; c < this.bsWeight.length; c++) {
        //     this.splatDataTextures.baseData['boneMatrix'][c + this.bonesNum * 16] = uintEncodedFloat(this.bsWeight[c]);
        // }
        this.splatDataTextures['boneMatrix']['texture'].data = this.splatDataTextures.baseData['boneMatrix'];
        
        this.splatDataTextures['boneMatrix']['texture'].needsUpdate = true;
        this.material.uniforms.boneTexture.value = this.splatDataTextures['boneMatrix']['texture'];

        if (this.flameModel.skeleton) {
            this.material.uniforms.boneTexture0.value = this.flameModel.skeleton.boneTexture;
            this.material.uniforms.bindMatrix.value = this.flameModel.bindMatrix;
            this.material.uniforms.bindMatrixInverse.value = this.flameModel.bindMatrixInverse;
        }
        
        this.material.uniformsNeedUpdate = true;
    }

    buildBoneWeightTexture(flameModel) {
        // Guard: bonesWeight is required for FLAME bone weight texture building
        if (!this.bonesWeight) {
            return;
        }

        let shapedMesh = flameModel.geometry.attributes.position.array;

        let pointNum = shapedMesh.length / 3;
        const boneWeightTextureSize = new Vector2(512, 512);
        let boneWeightTextureData = new Float32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
        let boneWeightTextureDataInt = new Uint32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
        for (let i = 0; i < pointNum; i++) {
            boneWeightTextureData[i * 8 + 0] = this.bonesWeight[i][0];
            boneWeightTextureData[i * 8 + 1] = this.bonesWeight[i][1];
            boneWeightTextureData[i * 8 + 2] = this.bonesWeight[i][2];
            boneWeightTextureData[i * 8 + 3] = this.bonesWeight[i][3];
            boneWeightTextureData[i * 8 + 4] = this.bonesWeight[i][4];

            boneWeightTextureDataInt[i * 8 + 0] = uintEncodedFloat$1(this.bonesWeight[i][0]);
            boneWeightTextureDataInt[i * 8 + 1] = uintEncodedFloat$1(this.bonesWeight[i][1]);
            boneWeightTextureDataInt[i * 8 + 2] = uintEncodedFloat$1(this.bonesWeight[i][2]);
            boneWeightTextureDataInt[i * 8 + 3] = uintEncodedFloat$1(this.bonesWeight[i][3]);
            boneWeightTextureDataInt[i * 8 + 4] = uintEncodedFloat$1(this.bonesWeight[i][4]);

        }
        const boneWeightTex = new DataTexture(boneWeightTextureDataInt, boneWeightTextureSize.x, boneWeightTextureSize.y,
                                                     RGBAIntegerFormat, UnsignedIntType);
        
        boneWeightTex.internalFormat = 'RGBA32UI';
        boneWeightTex.needsUpdate = true;
        this.material.uniforms.boneWeightTexture.value = boneWeightTex;
        this.material.uniforms.boneWeightTextureSize.value.copy(boneWeightTextureSize);
        this.material.uniformsNeedUpdate = true;

        this.splatDataTextures['boneWeight'] = {
            'data': boneWeightTextureDataInt,
            'texture': boneWeightTex,
            'size': boneWeightTextureSize,
        };
        this.splatDataTextures.baseData['boneWeight'] = boneWeightTextureDataInt;
    }


    buildModelTexture(flameModel) {
        // Guard: Requires FLAME model with morph attributes
        if (!flameModel || !flameModel.geometry || !flameModel.geometry.morphAttributes || !flameModel.morphTargetDictionary) {
            return;
        }

        const flameModelTexSize = new Vector2(4096, 2048);

        var shapedMesh = flameModel.geometry.attributes.position.array;
        var shapedMeshArray = [];//Array.from(shapedMesh);
        let pointNum = shapedMesh.length / 3;

        let bsLength = flameModel.geometry.morphAttributes.position.length;

        const morphTargetNames = Object.keys(flameModel.morphTargetDictionary);
        morphTargetNames.forEach((name, newIndex) => {
            const originalIndex = flameModel.morphTargetDictionary[name];
            var bsMesh = flameModel.geometry.morphAttributes.position[originalIndex];
            shapedMeshArray = shapedMeshArray.concat(Array.from(bsMesh.array));
            
          });
        shapedMeshArray = shapedMeshArray.concat(Array.from(shapedMesh));

        let flameModelData = new Float32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
        let flameModelDataInt = new Uint32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
        for (let c = 0; c < pointNum * (bsLength + 1); c++) {
            flameModelData[c * 4 + 0] = shapedMeshArray[c * 3 + 0];
            flameModelData[c * 4 + 1] = shapedMeshArray[c * 3 + 1];
            flameModelData[c * 4 + 2] = shapedMeshArray[c * 3 + 2];

            flameModelDataInt[c * 4 + 0] = uintEncodedFloat$1(flameModelData[c * 4 + 0]);
            flameModelDataInt[c * 4 + 1] = uintEncodedFloat$1(flameModelData[c * 4 + 1]);
            flameModelDataInt[c * 4 + 2] = uintEncodedFloat$1(flameModelData[c * 4 + 2]);
        }

        const flameModelTex = new DataTexture(flameModelDataInt, flameModelTexSize.x, flameModelTexSize.y,
                                                     RGBAIntegerFormat, UnsignedIntType);
        flameModelTex.internalFormat = 'RGBA32UI';
        flameModelTex.needsUpdate = true;
        this.material.uniforms.flameModelTexture.value = flameModelTex;
        this.material.uniforms.flameModelTextureSize.value.copy(flameModelTexSize);
        this.material.uniformsNeedUpdate = true;
        this.material.uniforms.gaussianSplatCount.value = this.gaussianSplatCount;

        this.splatDataTextures['flameModel'] = {
            'data': flameModelDataInt,
            'texture': flameModelTex,
            'size': flameModelTexSize,
        };
        this.splatDataTextures.baseData['flameModelPos'] = flameModelData;
    }

    updateTetureAfterBSAndSkeleton(fromSplat, toSplat) {
        const sceneTransform = new Matrix4();

        this.getSceneTransform(0, sceneTransform);
        this.getScene(0).splatBuffer.fillSplatCenterArray(this.morphedMesh, this.splatDataTextures.baseData.centers, sceneTransform, fromSplat, toSplat, 0);

        // Update center & color data texture
        const centerColorsTextureDescriptor = this.splatDataTextures['centerColors'];
        const paddedCenterColors = centerColorsTextureDescriptor.data;
        const centerColorsTexture = centerColorsTextureDescriptor.texture;
        SplatMesh.updateCenterColorsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.centers,
                                                this.splatDataTextures.baseData.colors, paddedCenterColors);
        const centerColorsTextureProps = this.renderer ? this.renderer.properties.get(centerColorsTexture) : null;
        if (!centerColorsTextureProps || !centerColorsTextureProps.__webglTexture) {
            centerColorsTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedCenterColors, centerColorsTextureDescriptor.texture, centerColorsTextureDescriptor.size,
                                    centerColorsTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 4,
                                    fromSplat, toSplat);
        }

        this.updateBoneMatrixTexture();
    }

    updateBaseDataFromSplatBuffers(fromSplat, toSplat) {
        const covarancesTextureDesc = this.splatDataTextures['covariances'];
        const covarianceCompressionLevel = covarancesTextureDesc ? covarancesTextureDesc.compressionLevel : undefined;
        const scaleRotationsTextureDesc = this.splatDataTextures['scaleRotations'];
        const scaleRotationCompressionLevel = scaleRotationsTextureDesc ? scaleRotationsTextureDesc.compressionLevel : undefined;
        const shITextureDesc = this.splatDataTextures['sphericalHarmonics'];
        const shCompressionLevel = shITextureDesc ? shITextureDesc.compressionLevel : 0;

        this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances, this.splatDataTextures.baseData.scales,
                                 this.splatDataTextures.baseData.rotations, this.splatDataTextures.baseData.centers,
                                 this.splatDataTextures.baseData.colors, this.splatDataTextures.baseData.sphericalHarmonics, 
                                 this.splatDataTextures.baseData.flameModelPos,
                                 undefined,
                                 covarianceCompressionLevel, scaleRotationCompressionLevel, shCompressionLevel,
                                 fromSplat, toSplat, fromSplat);
    }

    updateDataTexturesFromBaseData(fromSplat, toSplat) {
        const covarancesTextureDesc = this.splatDataTextures['covariances'];
        const covarianceCompressionLevel = covarancesTextureDesc ? covarancesTextureDesc.compressionLevel : undefined;
        const scaleRotationsTextureDesc = this.splatDataTextures['scaleRotations'];
        const scaleRotationCompressionLevel = scaleRotationsTextureDesc ? scaleRotationsTextureDesc.compressionLevel : undefined;
        const shTextureDesc = this.splatDataTextures['sphericalHarmonics'];
        const shCompressionLevel = shTextureDesc ? shTextureDesc.compressionLevel : 0;

        // Update flame data texture
        const flameModelTextureDescriptor = this.splatDataTextures['flameModel'];
        const flameModelPos = flameModelTextureDescriptor.data;
        const flameModelPosTexture = flameModelTextureDescriptor.texture;

        const flameModelPosTextureProps = this.renderer ? this.renderer.properties.get(flameModelPosTexture) : null;
        if (!flameModelPosTextureProps || !flameModelPosTextureProps.__webglTexture) {
            flameModelPosTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(flameModelPos, flameModelTextureDescriptor.texture, flameModelTextureDescriptor.size,
                flameModelPosTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 3,
                                   fromSplat, toSplat);
        }

        // Update center & color data texture
        const centerColorsTextureDescriptor = this.splatDataTextures['centerColors'];
        const paddedCenterColors = centerColorsTextureDescriptor.data;
        const centerColorsTexture = centerColorsTextureDescriptor.texture;
        SplatMesh.updateCenterColorsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.centers,
                                               this.splatDataTextures.baseData.colors, paddedCenterColors);
        const centerColorsTextureProps = this.renderer ? this.renderer.properties.get(centerColorsTexture) : null;
        if (!centerColorsTextureProps || !centerColorsTextureProps.__webglTexture) {
            centerColorsTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedCenterColors, centerColorsTextureDescriptor.texture, centerColorsTextureDescriptor.size,
                                   centerColorsTextureProps, CENTER_COLORS_ELEMENTS_PER_TEXEL, CENTER_COLORS_ELEMENTS_PER_SPLAT, 4,
                                   fromSplat, toSplat);
        }

        // update covariance data texture
        if (covarancesTextureDesc) {
            const covariancesTexture = covarancesTextureDesc.texture;
            const covarancesStartElement = fromSplat * COVARIANCES_ELEMENTS_PER_SPLAT;
            const covariancesEndElement = toSplat * COVARIANCES_ELEMENTS_PER_SPLAT;

            if (covarianceCompressionLevel === 0) {
                for (let i = covarancesStartElement; i <= covariancesEndElement; i++) {
                    const covariance = this.splatDataTextures.baseData.covariances[i];
                    covarancesTextureDesc.data[i] = covariance;
                }
            } else {
                SplatMesh.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,
                                                                       covarancesTextureDesc.data,
                                                                       fromSplat * covarancesTextureDesc.elementsPerTexelAllocated,
                                                                       covarancesStartElement, covariancesEndElement);
            }

            const covariancesTextureProps = this.renderer ? this.renderer.properties.get(covariancesTexture) : null;
            if (!covariancesTextureProps || !covariancesTextureProps.__webglTexture) {
                covariancesTexture.needsUpdate = true;
            } else {
                if (covarianceCompressionLevel === 0) {
                    this.updateDataTexture(covarancesTextureDesc.data, covarancesTextureDesc.texture, covarancesTextureDesc.size,
                                           covariancesTextureProps, covarancesTextureDesc.elementsPerTexelStored,
                                           COVARIANCES_ELEMENTS_PER_SPLAT, 4, fromSplat, toSplat);
                } else {
                    this.updateDataTexture(covarancesTextureDesc.data, covarancesTextureDesc.texture, covarancesTextureDesc.size,
                                           covariancesTextureProps, covarancesTextureDesc.elementsPerTexelAllocated,
                                           covarancesTextureDesc.elementsPerTexelAllocated, 2, fromSplat, toSplat);
                }
            }
        }

        // update scale and rotation data texture
        if (scaleRotationsTextureDesc) {
            const paddedScaleRotations = scaleRotationsTextureDesc.data;
            const scaleRotationsTexture = scaleRotationsTextureDesc.texture;
            const elementsPerSplat = 6;
            const bytesPerElement = scaleRotationCompressionLevel === 0 ? 4 : 2;

            SplatMesh.updateScaleRotationsPaddedData(fromSplat, toSplat, this.splatDataTextures.baseData.scales,
                                                     this.splatDataTextures.baseData.rotations, paddedScaleRotations);
            const scaleRotationsTextureProps = this.renderer ? this.renderer.properties.get(scaleRotationsTexture) : null;
            if (!scaleRotationsTextureProps || !scaleRotationsTextureProps.__webglTexture) {
                scaleRotationsTexture.needsUpdate = true;
            } else {
                this.updateDataTexture(paddedScaleRotations, scaleRotationsTextureDesc.texture, scaleRotationsTextureDesc.size,
                                       scaleRotationsTextureProps, SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, elementsPerSplat, bytesPerElement,
                                       fromSplat, toSplat);
            }
        }

        // update spherical harmonics data texture
        const shData = this.splatDataTextures.baseData.sphericalHarmonics;
        if (shData) {
            let shBytesPerElement = 4;
            if (shCompressionLevel === 1) shBytesPerElement = 2;
            else if (shCompressionLevel === 2) shBytesPerElement = 1;

            const updateTexture = (shTexture, shTextureSize, elementsPerTexel, paddedSHArray, paddedSHComponentCount) => {
                const shTextureProps = this.renderer ? this.renderer.properties.get(shTexture) : null;
                if (!shTextureProps || !shTextureProps.__webglTexture) {
                    shTexture.needsUpdate = true;
                } else {
                    this.updateDataTexture(paddedSHArray, shTexture, shTextureSize, shTextureProps, elementsPerTexel,
                                           paddedSHComponentCount, shBytesPerElement, fromSplat, toSplat);
                }
            };

            const shComponentCount = shTextureDesc.componentCount;
            const paddedSHComponentCount = shTextureDesc.paddedComponentCount;

            // Update for the case of a single texture for all spherical harmonics data
            if (shTextureDesc.textureCount === 1) {
                const paddedSHArray = shTextureDesc.data;
                for (let c = fromSplat; c <= toSplat; c++) {
                    const srcBase = shComponentCount * c;
                    const destBase = paddedSHComponentCount * c;
                    for (let i = 0; i < shComponentCount; i++) {
                        paddedSHArray[destBase + i] = shData[srcBase + i];
                    }
                }
                updateTexture(shTextureDesc.texture, shTextureDesc.size,
                              shTextureDesc.elementsPerTexel, paddedSHArray, paddedSHComponentCount);
            // Update for the case of spherical harmonics data split among three textures, one for each color channel
            } else {
                const shComponentCountPerChannel = shTextureDesc.componentCountPerChannel;
                for (let t = 0; t < 3; t++) {
                    const paddedSHArray = shTextureDesc.data[t];
                    for (let c = fromSplat; c <= toSplat; c++) {
                        const srcBase = shComponentCount * c;
                        const destBase = paddedSHComponentCount * c;
                        if (shComponentCountPerChannel >= 3) {
                            for (let i = 0; i < 3; i++) paddedSHArray[destBase + i] = shData[srcBase + t * 3 + i];
                            if (shComponentCountPerChannel >= 8) {
                                for (let i = 0; i < 5; i++) paddedSHArray[destBase + 3 + i] = shData[srcBase + 9 + t * 5 + i];
                            }
                        }
                    }
                    updateTexture(shTextureDesc.textures[t], shTextureDesc.size,
                                  shTextureDesc.elementsPerTexel, paddedSHArray, paddedSHComponentCount);
                }
            }
        }

        // update scene index & transform data
        const sceneIndexesTexDesc = this.splatDataTextures['sceneIndexes'];
        const paddedSceneIndexes = sceneIndexesTexDesc.data;
        for (let c = this.lastBuildSplatCount; c <= toSplat; c++) {
            paddedSceneIndexes[c] = this.globalSplatIndexToSceneIndexMap[c];
        }
        const sceneIndexesTexture = sceneIndexesTexDesc.texture;
        const sceneIndexesTextureProps = this.renderer ? this.renderer.properties.get(sceneIndexesTexture) : null;
        if (!sceneIndexesTextureProps || !sceneIndexesTextureProps.__webglTexture) {
            sceneIndexesTexture.needsUpdate = true;
        } else {
            this.updateDataTexture(paddedSceneIndexes, sceneIndexesTexDesc.texture, sceneIndexesTexDesc.size,
                                   sceneIndexesTextureProps, 1, 1, 1, this.lastBuildSplatCount, toSplat);
        }
    }

    getTargetCovarianceCompressionLevel() {
        return this.halfPrecisionCovariancesOnGPU ? 1 : 0;
    }

    getTargetSphericalHarmonicsCompressionLevel() {
        return Math.max(1, this.getMaximumSplatBufferCompressionLevel());
    }

    getMaximumSplatBufferCompressionLevel() {
        let maxCompressionLevel;
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            if (i === 0 || splatBuffer.compressionLevel > maxCompressionLevel) {
                maxCompressionLevel = splatBuffer.compressionLevel;
            }
        }
        return maxCompressionLevel;
    }

    getMinimumSplatBufferCompressionLevel() {
        let minCompressionLevel;
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            if (i === 0 || splatBuffer.compressionLevel < minCompressionLevel) {
                minCompressionLevel = splatBuffer.compressionLevel;
            }
        }
        return minCompressionLevel;
    }

    static computeTextureUpdateRegion(startSplat, endSplat, textureWidth, elementsPerTexel, elementsPerSplat) {
        const texelsPerSplat = elementsPerSplat / elementsPerTexel;

        const startSplatTexels = startSplat * texelsPerSplat;
        const startRow = Math.floor(startSplatTexels / textureWidth);
        const startRowElement = startRow * textureWidth * elementsPerTexel;

        const endSplatTexels = endSplat * texelsPerSplat;
        const endRow = Math.floor(endSplatTexels / textureWidth);
        const endRowEndElement = endRow * textureWidth * elementsPerTexel + (textureWidth * elementsPerTexel);

        return {
            'dataStart': startRowElement,
            'dataEnd': endRowEndElement,
            'startRow': startRow,
            'endRow': endRow
        };
    }

    updateDataTexture(paddedData, texture, textureSize, textureProps, elementsPerTexel, elementsPerSplat, bytesPerElement, from, to) {
        const gl = this.renderer.getContext();
        const updateRegion = SplatMesh.computeTextureUpdateRegion(from, to, textureSize.x, elementsPerTexel, elementsPerSplat);
        const updateElementCount = updateRegion.dataEnd - updateRegion.dataStart;
        const updateDataView = new paddedData.constructor(paddedData.buffer,
                                                          updateRegion.dataStart * bytesPerElement, updateElementCount);
        const updateHeight = updateRegion.endRow - updateRegion.startRow + 1;
        const glType = this.webGLUtils.convert(texture.type);
        const glFormat = this.webGLUtils.convert(texture.format, texture.colorSpace);
        const currentTexture = gl.getParameter(gl.TEXTURE_BINDING_2D);
        gl.bindTexture(gl.TEXTURE_2D, textureProps.__webglTexture);
        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, updateRegion.startRow,
                         textureSize.x, updateHeight, glFormat, glType, updateDataView);
        gl.bindTexture(gl.TEXTURE_2D, currentTexture);
    }

    static updatePaddedCompressedCovariancesTextureData(sourceData, textureData, textureDataStartIndex, fromElement, toElement) {
        let textureDataView = new DataView(textureData.buffer);
        let textureDataIndex = textureDataStartIndex;
        let sequentialCount = 0;
        for (let i = fromElement; i <= toElement; i+=2) {
            textureDataView.setUint16(textureDataIndex * 2, sourceData[i], true);
            textureDataView.setUint16(textureDataIndex * 2 + 2, sourceData[i + 1], true);
            textureDataIndex += 2;
            sequentialCount++;
            if (sequentialCount >= 3) {
                textureDataIndex += 2;
                sequentialCount = 0;
            }
        }
    }

    static updateCenterColorsPaddedData(from, to, centers, colors, paddedCenterColors) {
        for (let c = from; c <= to; c++) {
            const colorsBase = c * 4;
            const centersBase = c * 3;
            const centerColorsBase = c * 4;
            paddedCenterColors[centerColorsBase] = rgbaArrayToInteger(colors, colorsBase);
            paddedCenterColors[centerColorsBase + 1] = uintEncodedFloat$1(centers[centersBase]);
            paddedCenterColors[centerColorsBase + 2] = uintEncodedFloat$1(centers[centersBase + 1]);
            paddedCenterColors[centerColorsBase + 3] = uintEncodedFloat$1(centers[centersBase + 2]);
        }
    }

    static updateScaleRotationsPaddedData(from, to, scales, rotations, paddedScaleRotations) {
        const combinedSize = 6;
        for (let c = from; c <= to; c++) {
            const scaleBase = c * 3;
            const rotationBase = c * 4;
            const scaleRotationsBase = c * combinedSize;

            paddedScaleRotations[scaleRotationsBase] = scales[scaleBase];
            paddedScaleRotations[scaleRotationsBase + 1] = scales[scaleBase + 1];
            paddedScaleRotations[scaleRotationsBase + 2] = scales[scaleBase + 2];

            paddedScaleRotations[scaleRotationsBase + 3] = rotations[rotationBase];
            paddedScaleRotations[scaleRotationsBase + 4] = rotations[rotationBase + 1];
            paddedScaleRotations[scaleRotationsBase + 5] = rotations[rotationBase + 2];
        }
    }

    updateVisibleRegion(sinceLastBuildOnly) {
        const splatCount = this.getSplatCount(true);
        const tempCenter = new Vector3();
        if (!sinceLastBuildOnly) {
            const avgCenter = new Vector3();
            this.scenes.forEach((scene) => {
                avgCenter.add(scene.splatBuffer.sceneCenter);
            });
            avgCenter.multiplyScalar(1.0 / this.scenes.length);
            this.calculatedSceneCenter.copy(avgCenter);
            this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter);
            this.material.uniformsNeedUpdate = true;
        }

        const startSplatFormMaxDistanceCalc = sinceLastBuildOnly ? this.lastBuildSplatCount : 0;
        for (let i = startSplatFormMaxDistanceCalc; i < splatCount; i++) {
            this.getSplatCenter(this.morphedMesh, i, tempCenter, true);
            const distFromCSceneCenter = tempCenter.sub(this.calculatedSceneCenter).length();
            if (distFromCSceneCenter > this.maxSplatDistanceFromSceneCenter) this.maxSplatDistanceFromSceneCenter = distFromCSceneCenter;
        }

        if (this.maxSplatDistanceFromSceneCenter - this.visibleRegionBufferRadius > VISIBLE_REGION_EXPANSION_DELTA) {
            this.visibleRegionBufferRadius = this.maxSplatDistanceFromSceneCenter;
            this.visibleRegionRadius = Math.max(this.visibleRegionBufferRadius - VISIBLE_REGION_EXPANSION_DELTA, 0.0);
        }
        if (this.finalBuild) this.visibleRegionRadius = this.visibleRegionBufferRadius = this.maxSplatDistanceFromSceneCenter;
        this.updateVisibleRegionFadeDistance();
    }

    updateVisibleRegionFadeDistance(sceneRevealMode = SceneRevealMode.Default) {
        const fastFadeRate = SCENE_FADEIN_RATE_FAST * this.sceneFadeInRateMultiplier;
        const gradualFadeRate = SCENE_FADEIN_RATE_GRADUAL * this.sceneFadeInRateMultiplier;
        const defaultFadeInRate = this.finalBuild ? fastFadeRate : gradualFadeRate;
        const fadeInRate = sceneRevealMode === SceneRevealMode.Default ? defaultFadeInRate : gradualFadeRate;
        this.visibleRegionFadeStartRadius = (this.visibleRegionRadius - this.visibleRegionFadeStartRadius) *
                                             fadeInRate + this.visibleRegionFadeStartRadius;
        const fadeInPercentage = (this.visibleRegionBufferRadius > 0) ?
                                 (this.visibleRegionFadeStartRadius / this.visibleRegionBufferRadius) : 0;
        const fadeInComplete = fadeInPercentage > 0.99;
        const shaderFadeInComplete = (fadeInComplete || sceneRevealMode === SceneRevealMode.Instant) ? 1 : 0;

        this.material.uniforms.visibleRegionFadeStartRadius.value = this.visibleRegionFadeStartRadius;
        this.material.uniforms.visibleRegionRadius.value = this.visibleRegionRadius;
        this.material.uniforms.firstRenderTime.value = this.firstRenderTime;
        this.material.uniforms.currentTime.value = performance.now();
        this.material.uniforms.fadeInComplete.value = shaderFadeInComplete;
        this.material.uniformsNeedUpdate = true;
        this.visibleRegionChanging = !fadeInComplete;
    }

    /**
     * Set the indexes of splats that should be rendered; should be sorted in desired render order.
     * @param {Uint32Array} globalIndexes Sorted index list of splats to be rendered
     * @param {number} renderSplatCount Total number of splats to be rendered. Necessary because we may not want to render
     *                                  every splat.
     */
    updateRenderIndexes(globalIndexes, renderSplatCount) {
        const geometry = this.geometry;
        geometry.attributes.splatIndex.set(globalIndexes);
        geometry.attributes.splatIndex.needsUpdate = true;
        if (renderSplatCount > 0 && this.firstRenderTime === -1) this.firstRenderTime = performance.now();
        geometry.instanceCount = renderSplatCount;
        geometry.setDrawRange(0, renderSplatCount);
    }

    /**
     * Update the transforms for each scene in this splat mesh from their individual components (position,
     * quaternion, and scale)
     */
    updateTransforms() {
        for (let i = 0; i < this.scenes.length; i++) {
            const scene = this.getScene(i);
            scene.updateTransform(this.dynamicMode);
        }
    }

    updateUniforms = function() {

        const viewport = new Vector2();

        return function(renderDimensions, cameraFocalLengthX, cameraFocalLengthY,
                        orthographicMode, orthographicZoom, inverseFocalAdjustment) {
            const splatCount = this.getSplatCount();
            if (splatCount > 0) {
                viewport.set(renderDimensions.x * this.devicePixelRatio,
                             renderDimensions.y * this.devicePixelRatio);
                this.material.uniforms.viewport.value.copy(viewport);
                this.material.uniforms.basisViewport.value.set(1.0 / viewport.x, 1.0 / viewport.y);
                this.material.uniforms.focal.value.set(cameraFocalLengthX, cameraFocalLengthY);
                this.material.uniforms.orthographicMode.value = orthographicMode ? 1 : 0;
                this.material.uniforms.orthoZoom.value = orthographicZoom;
                this.material.uniforms.inverseFocalAdjustment.value = inverseFocalAdjustment;
                if (this.dynamicMode) {
                    for (let i = 0; i < this.scenes.length; i++) {
                        this.material.uniforms.transforms.value[i].copy(this.getScene(i).transform);
                    }
                }
                if (this.enableOptionalEffects) {
                    for (let i = 0; i < this.scenes.length; i++) {
                        this.material.uniforms.sceneOpacity.value[i] = clamp(this.getScene(i).opacity, 0.0, 1.0);
                        this.material.uniforms.sceneVisibility.value[i] = this.getScene(i).visible ? 1 : 0;
                        this.material.uniformsNeedUpdate = true;
                    }
                }
                this.material.uniformsNeedUpdate = true;
            }
        };

    }();

    setSplatScale(splatScale = 1) {
        this.splatScale = splatScale;
        this.material.uniforms.splatScale.value = splatScale;
        this.material.uniformsNeedUpdate = true;
    }

    getSplatScale() {
        return this.splatScale;
    }

    setPointCloudModeEnabled(enabled) {
        this.pointCloudModeEnabled = enabled;
        this.material.uniforms.pointCloudModeEnabled.value = enabled ? 1 : 0;
        this.material.uniformsNeedUpdate = true;
    }

    getPointCloudModeEnabled() {
        return this.pointCloudModeEnabled;
    }

    getSplatDataTextures() {
        return this.splatDataTextures;
    }

    getSplatCount(includeSinceLastBuild = false) {
        if (!includeSinceLastBuild) return this.lastBuildSplatCount;
        else return SplatMesh.getTotalSplatCountForScenes(this.scenes);
    }

    static getTotalSplatCountForScenes(scenes) {
        let totalSplatCount = 0;
        for (let scene of scenes) {
            if (scene && scene.splatBuffer) totalSplatCount += scene.splatBuffer.getSplatCount();
        }
        return totalSplatCount;
    }

    static getTotalSplatCountForSplatBuffers(splatBuffers) {
        let totalSplatCount = 0;
        for (let splatBuffer of splatBuffers) totalSplatCount += splatBuffer.getSplatCount();
        return totalSplatCount;
    }

    getMaxSplatCount() {
        return SplatMesh.getTotalMaxSplatCountForScenes(this.scenes);
    }

    static getTotalMaxSplatCountForScenes(scenes) {
        let totalSplatCount = 0;
        for (let scene of scenes) {
            if (scene && scene.splatBuffer) totalSplatCount += scene.splatBuffer.getMaxSplatCount();
        }
        return totalSplatCount;
    }

    static getTotalMaxSplatCountForSplatBuffers(splatBuffers) {
        let totalSplatCount = 0;
        for (let splatBuffer of splatBuffers) totalSplatCount += splatBuffer.getMaxSplatCount();
        return totalSplatCount;
    }

    disposeDistancesComputationGPUResources() {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        if (this.distancesTransformFeedback.vao) {
            gl.deleteVertexArray(this.distancesTransformFeedback.vao);
            this.distancesTransformFeedback.vao = null;
        }
        if (this.distancesTransformFeedback.program) {
            gl.deleteProgram(this.distancesTransformFeedback.program);
            gl.deleteShader(this.distancesTransformFeedback.vertexShader);
            gl.deleteShader(this.distancesTransformFeedback.fragmentShader);
            this.distancesTransformFeedback.program = null;
            this.distancesTransformFeedback.vertexShader = null;
            this.distancesTransformFeedback.fragmentShader = null;
        }
        this.disposeDistancesComputationGPUBufferResources();
        if (this.distancesTransformFeedback.id) {
            gl.deleteTransformFeedback(this.distancesTransformFeedback.id);
            this.distancesTransformFeedback.id = null;
        }
    }

    disposeDistancesComputationGPUBufferResources() {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        if (this.distancesTransformFeedback.centersBuffer) {
            this.distancesTransformFeedback.centersBuffer = null;
            gl.deleteBuffer(this.distancesTransformFeedback.centersBuffer);
        }
        if (this.distancesTransformFeedback.outDistancesBuffer) {
            gl.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer);
            this.distancesTransformFeedback.outDistancesBuffer = null;
        }
    }

    /**
     * Set the Three.js renderer used by this splat mesh
     * @param {THREE.WebGLRenderer} renderer Instance of THREE.WebGLRenderer
     */
    setRenderer(renderer) {
        if (renderer !== this.renderer) {
            this.renderer = renderer;
            const gl = this.renderer.getContext();
            const extensions = new WebGLExtensions$1(gl);
            const capabilities = new WebGLCapabilities$1(gl, extensions, {});
            extensions.init(capabilities);
            this.webGLUtils = new WebGLUtils$1(gl, extensions, capabilities);
            if (this.enableDistancesComputationOnGPU && this.getSplatCount() > 0) {
                this.setupDistancesComputationTransformFeedback();
                const { centers, sceneIndexes } = this.getDataForDistancesComputation(0, this.getSplatCount() - 1);
                this.refreshGPUBuffersForDistancesComputation(centers, sceneIndexes);
            }
        }
    }

    setupDistancesComputationTransformFeedback = function() {

        let currentMaxSplatCount;

        return () => {
            const maxSplatCount = this.getMaxSplatCount();

            if (!this.renderer) return;

            const rebuildGPUObjects = (this.lastRenderer !== this.renderer);
            const rebuildBuffers = currentMaxSplatCount !== maxSplatCount;

            if (!rebuildGPUObjects && !rebuildBuffers) return;

            if (rebuildGPUObjects) {
                this.disposeDistancesComputationGPUResources();
            } else if (rebuildBuffers) {
                this.disposeDistancesComputationGPUBufferResources();
            }

            const gl = this.renderer.getContext();

            const createShader = (gl, type, source) => {
                const shader = gl.createShader(type);
                if (!shader) {
                    logger$4.error('Fatal error: gl could not create a shader object.');
                    return null;
                }

                gl.shaderSource(shader, source);
                gl.compileShader(shader);

                const compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
                if (!compiled) {
                    let typeName = 'unknown';
                    if (type === gl.VERTEX_SHADER) typeName = 'vertex shader';
                    else if (type === gl.FRAGMENT_SHADER) typeName = 'fragement shader';
                    const errors = gl.getShaderInfoLog(shader);
                    logger$4.error('Failed to compile ' + typeName + ' with these errors:' + errors);
                    gl.deleteShader(shader);
                    return null;
                }

                return shader;
            };

            let vsSource;
            if (this.integerBasedDistancesComputation) {
                vsSource =
                `#version 300 es
                in ivec4 center;
                flat out int distance;`;
                if (this.dynamicMode) {
                    vsSource += `
                        in uint sceneIndex;
                        uniform ivec4 transforms[${Constants$1.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `;
                } else {
                    vsSource += `
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `;
                }
            } else {
                vsSource =
                `#version 300 es
                in vec4 center;
                flat out float distance;`;
                if (this.dynamicMode) {
                    vsSource += `
                        in uint sceneIndex;
                        uniform mat4 transforms[${Constants$1.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `;
                } else {
                    vsSource += `
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `;
                }
            }

            const fsSource =
            `#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `;

            const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
            const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
            const currentProgramDeleted = currentProgram ? gl.getProgramParameter(currentProgram, gl.DELETE_STATUS) : false;

            if (rebuildGPUObjects) {
                this.distancesTransformFeedback.vao = gl.createVertexArray();
            }

            gl.bindVertexArray(this.distancesTransformFeedback.vao);

            if (rebuildGPUObjects) {
                const program = gl.createProgram();
                const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
                const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
                if (!vertexShader || !fragmentShader) {
                    throw new Error('Could not compile shaders for distances computation on GPU.');
                }
                gl.attachShader(program, vertexShader);
                gl.attachShader(program, fragmentShader);
                gl.transformFeedbackVaryings(program, ['distance'], gl.SEPARATE_ATTRIBS);
                gl.linkProgram(program);

                const linked = gl.getProgramParameter(program, gl.LINK_STATUS);
                if (!linked) {
                    const error = gl.getProgramInfoLog(program);
                    logger$4.error('Fatal error: Failed to link program: ' + error);
                    gl.deleteProgram(program);
                    gl.deleteShader(fragmentShader);
                    gl.deleteShader(vertexShader);
                    throw new Error('Could not link shaders for distances computation on GPU.');
                }

                this.distancesTransformFeedback.program = program;
                this.distancesTransformFeedback.vertexShader = vertexShader;
                this.distancesTransformFeedback.vertexShader = fragmentShader;
            }

            gl.useProgram(this.distancesTransformFeedback.program);

            this.distancesTransformFeedback.centersLoc =
                gl.getAttribLocation(this.distancesTransformFeedback.program, 'center');
            if (this.dynamicMode) {
                this.distancesTransformFeedback.sceneIndexesLoc =
                    gl.getAttribLocation(this.distancesTransformFeedback.program, 'sceneIndex');
                for (let i = 0; i < this.scenes.length; i++) {
                    this.distancesTransformFeedback.transformsLocs[i] =
                        gl.getUniformLocation(this.distancesTransformFeedback.program, `transforms[${i}]`);
                }
            } else {
                this.distancesTransformFeedback.modelViewProjLoc =
                    gl.getUniformLocation(this.distancesTransformFeedback.program, 'modelViewProj');
            }

            if (rebuildGPUObjects || rebuildBuffers) {
                this.distancesTransformFeedback.centersBuffer = gl.createBuffer();
                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);
                gl.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc);
                if (this.integerBasedDistancesComputation) {
                    gl.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc, 4, gl.INT, 0, 0);
                } else {
                    gl.vertexAttribPointer(this.distancesTransformFeedback.centersLoc, 4, gl.FLOAT, false, 0, 0);
                }

                if (this.dynamicMode) {
                    this.distancesTransformFeedback.sceneIndexesBuffer = gl.createBuffer();
                    gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);
                    gl.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc);
                    gl.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc, 1, gl.UNSIGNED_INT, 0, 0);
                }
            }

            if (rebuildGPUObjects || rebuildBuffers) {
                this.distancesTransformFeedback.outDistancesBuffer = gl.createBuffer();
            }
            gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.outDistancesBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, maxSplatCount * 4, gl.STATIC_READ);

            if (rebuildGPUObjects) {
                this.distancesTransformFeedback.id = gl.createTransformFeedback();
            }
            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.distancesTransformFeedback.id);
            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.distancesTransformFeedback.outDistancesBuffer);

            if (currentProgram && currentProgramDeleted !== true) gl.useProgram(currentProgram);
            if (currentVao) gl.bindVertexArray(currentVao);

            this.lastRenderer = this.renderer;
            currentMaxSplatCount = maxSplatCount;
        };

    }();

    /**
     * Refresh GPU buffers used for computing splat distances with centers data from the scenes for this mesh.
     * @param {boolean} isUpdate Specify whether or not to update the GPU buffer or to initialize & fill
     * @param {Array<number>} centers The splat centers data
     * @param {number} offsetSplats Offset in the GPU buffer at which to start updating data, specified in splats
     */
    updateGPUCentersBufferForDistancesComputation(isUpdate, centers, offsetSplats) {

        if (!this.renderer) return;

        const gl = this.renderer.getContext();

        const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
        gl.bindVertexArray(this.distancesTransformFeedback.vao);

        const ArrayType = this.integerBasedDistancesComputation ? Uint32Array : Float32Array;
        const attributeBytesPerCenter = 16;
        const subBufferOffset = offsetSplats * attributeBytesPerCenter;

        gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);

        if (isUpdate) {
            gl.bufferSubData(gl.ARRAY_BUFFER, subBufferOffset, centers);
        } else {
            const maxArray = new ArrayType(this.getMaxSplatCount() * attributeBytesPerCenter);
            maxArray.set(centers);
            gl.bufferData(gl.ARRAY_BUFFER, maxArray, gl.STATIC_DRAW);
        }

        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        if (currentVao) gl.bindVertexArray(currentVao);
    }

    /**
     * Refresh GPU buffers used for pre-computing splat distances with centers data from the scenes for this mesh.
     * @param {boolean} isUpdate Specify whether or not to update the GPU buffer or to initialize & fill
     * @param {Array<number>} sceneIndexes The splat scene indexes
     * @param {number} offsetSplats Offset in the GPU buffer at which to start updating data, specified in splats
     */
    updateGPUTransformIndexesBufferForDistancesComputation(isUpdate, sceneIndexes, offsetSplats) {

        if (!this.renderer || !this.dynamicMode) return;

        const gl = this.renderer.getContext();

        const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
        gl.bindVertexArray(this.distancesTransformFeedback.vao);

        const subBufferOffset = offsetSplats * 4;

        gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);

        if (isUpdate) {
            gl.bufferSubData(gl.ARRAY_BUFFER, subBufferOffset, sceneIndexes);
        } else {
            const maxArray = new Uint32Array(this.getMaxSplatCount() * 4);
            maxArray.set(sceneIndexes);
            gl.bufferData(gl.ARRAY_BUFFER, maxArray, gl.STATIC_DRAW);
        }
        gl.bindBuffer(gl.ARRAY_BUFFER, null);

        if (currentVao) gl.bindVertexArray(currentVao);
    }

    /**
     * Get a typed array containing a mapping from global splat indexes to their scene index.
     * @param {number} start Starting splat index to store
     * @param {number} end Ending splat index to store
     * @return {Uint32Array}
     */
    getSceneIndexes(start, end) {

        let sceneIndexes;
        const fillCount = end - start + 1;
        sceneIndexes = new Uint32Array(fillCount);
        for (let i = start; i <= end; i++) {
            sceneIndexes[i] = this.globalSplatIndexToSceneIndexMap[i];
        }

        return sceneIndexes;
    }

    /**
     * Fill 'array' with the transforms for each scene in this splat mesh.
     * @param {Array} array Empty array to be filled with scene transforms. If not empty, contents will be overwritten.
     */
    fillTransformsArray = function() {

        const tempArray = [];

        return function(array) {
            if (tempArray.length !== array.length) tempArray.length = array.length;
            for (let i = 0; i < this.scenes.length; i++) {
                const sceneTransform = this.getScene(i).transform;
                const sceneTransformElements = sceneTransform.elements;
                for (let j = 0; j < 16; j++) {
                    tempArray[i * 16 + j] = sceneTransformElements[j];
                }
            }
            array.set(tempArray);
        };

    }();

    computeDistancesOnGPU = function() {

        const tempMatrix = new Matrix4();

        return (modelViewProjMatrix, outComputedDistances) => {
            if (!this.renderer) return;

            const gl = this.renderer.getContext();

            const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
            const currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);
            const currentProgramDeleted = currentProgram ? gl.getProgramParameter(currentProgram, gl.DELETE_STATUS) : false;

            gl.bindVertexArray(this.distancesTransformFeedback.vao);
            gl.useProgram(this.distancesTransformFeedback.program);

            gl.enable(gl.RASTERIZER_DISCARD);

            if (this.dynamicMode) {
                for (let i = 0; i < this.scenes.length; i++) {
                    tempMatrix.copy(this.getScene(i).transform);
                    tempMatrix.premultiply(modelViewProjMatrix);

                    if (this.integerBasedDistancesComputation) {
                        const iTempMatrix = SplatMesh.getIntegerMatrixArray(tempMatrix);
                        const iTransform = [iTempMatrix[2], iTempMatrix[6], iTempMatrix[10], iTempMatrix[14]];
                        gl.uniform4i(this.distancesTransformFeedback.transformsLocs[i], iTransform[0], iTransform[1],
                                                                                        iTransform[2], iTransform[3]);
                    } else {
                        gl.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[i], false, tempMatrix.elements);
                    }
                }
            } else {
                if (this.integerBasedDistancesComputation) {
                    const iViewProjMatrix = SplatMesh.getIntegerMatrixArray(modelViewProjMatrix);
                    const iViewProj = [iViewProjMatrix[2], iViewProjMatrix[6], iViewProjMatrix[10]];
                    gl.uniform3i(this.distancesTransformFeedback.modelViewProjLoc, iViewProj[0], iViewProj[1], iViewProj[2]);
                } else {
                    const viewProj = [modelViewProjMatrix.elements[2], modelViewProjMatrix.elements[6], modelViewProjMatrix.elements[10]];
                    gl.uniform3f(this.distancesTransformFeedback.modelViewProjLoc, viewProj[0], viewProj[1], viewProj[2]);
                }
            }

            gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.centersBuffer);
            gl.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc);
            if (this.integerBasedDistancesComputation) {
                gl.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc, 4, gl.INT, 0, 0);
            } else {
                gl.vertexAttribPointer(this.distancesTransformFeedback.centersLoc, 4, gl.FLOAT, false, 0, 0);
            }

            if (this.dynamicMode) {
                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.sceneIndexesBuffer);
                gl.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc);
                gl.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc, 1, gl.UNSIGNED_INT, 0, 0);
            }

            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, this.distancesTransformFeedback.id);
            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.distancesTransformFeedback.outDistancesBuffer);

            gl.beginTransformFeedback(gl.POINTS);
            gl.drawArrays(gl.POINTS, 0, this.getSplatCount());
            gl.endTransformFeedback();

            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);
            gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);

            gl.disable(gl.RASTERIZER_DISCARD);

            const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0);
            gl.flush();

            const promise = new Promise((resolve) => {
                const checkSync = () => {
                    if (this.disposed) {
                        resolve();
                    } else {
                        const timeout = 0;
                        const bitflags = 0;
                        const status = gl.clientWaitSync(sync, bitflags, timeout);
                        switch (status) {
                            case gl.TIMEOUT_EXPIRED:
                                this.computeDistancesOnGPUSyncTimeout = setTimeout(checkSync);
                                return this.computeDistancesOnGPUSyncTimeout;
                            case gl.WAIT_FAILED:
                                throw new Error('should never get here');
                            default: {
                                this.computeDistancesOnGPUSyncTimeout = null;
                                gl.deleteSync(sync);
                                const currentVao = gl.getParameter(gl.VERTEX_ARRAY_BINDING);
                                gl.bindVertexArray(this.distancesTransformFeedback.vao);
                                gl.bindBuffer(gl.ARRAY_BUFFER, this.distancesTransformFeedback.outDistancesBuffer);
                                gl.getBufferSubData(gl.ARRAY_BUFFER, 0, outComputedDistances);
                                gl.bindBuffer(gl.ARRAY_BUFFER, null);

                                if (currentVao) gl.bindVertexArray(currentVao);

                                resolve();
                            }
                        }
                    }
                };
                this.computeDistancesOnGPUSyncTimeout = setTimeout(checkSync);
            });

            if (currentProgram && currentProgramDeleted !== true) gl.useProgram(currentProgram);
            if (currentVao) gl.bindVertexArray(currentVao);

            return promise;
        };

    }();

    /**
     * Given a global splat index, return corresponding local data (splat buffer, index of splat in that splat
     * buffer, and the corresponding transform)
     * @param {number} globalIndex Global splat index
     * @param {object} paramsObj Object in which to store local data
     * @param {boolean} returnSceneTransform By default, the transform of the scene to which the splat at 'globalIndex' belongs will be
     *                                       returned via the 'sceneTransform' property of 'paramsObj' only if the splat mesh is static.
     *                                       If 'returnSceneTransform' is true, the 'sceneTransform' property will always contain the scene
     *                                       transform, and if 'returnSceneTransform' is false, the 'sceneTransform' property will always
     *                                       be null.
     */
    getLocalSplatParameters(globalIndex, paramsObj, returnSceneTransform) {
        if (returnSceneTransform === undefined || returnSceneTransform === null) {
            returnSceneTransform = this.dynamicMode ? false : true;
        }
        paramsObj.splatBuffer = this.getSplatBufferForSplat(globalIndex);
        paramsObj.localIndex = this.getSplatLocalIndex(globalIndex);
        paramsObj.sceneTransform = returnSceneTransform ? this.getSceneTransformForSplat(globalIndex) : null;
    }

    /**
     * Fill arrays with splat data and apply transforms if appropriate. Each array is optional.
     * @param {Float32Array} covariances Target storage for splat covariances
     * @param {Float32Array} scales Target storage for splat scales
     * @param {Float32Array} rotations Target storage for splat rotations
     * @param {Float32Array} centers Target storage for splat centers
     * @param {Uint8Array} colors Target storage for splat colors
     * @param {Float32Array} sphericalHarmonics Target storage for spherical harmonics
     * @param {boolean} applySceneTransform By default, scene transforms are applied to relevant splat data only if the splat mesh is
     *                                      static. If 'applySceneTransform' is true, scene transforms will always be applied and if
     *                                      it is false, they will never be applied. If undefined, the default behavior will apply.
     * @param {number} covarianceCompressionLevel The compression level for covariances in the destination array
     * @param {number} sphericalHarmonicsCompressionLevel The compression level for spherical harmonics in the destination array
     * @param {number} srcStart The start location from which to pull source data
     * @param {number} srcEnd The end location from which to pull source data
     * @param {number} destStart The start location from which to write data
     */
    fillSplatDataArrays(covariances, scales, rotations, centers, colors, sphericalHarmonics, flameModelPos,
                         applySceneTransform,
                        covarianceCompressionLevel = 0, scaleRotationCompressionLevel = 0, sphericalHarmonicsCompressionLevel = 1,
                        srcStart, srcEnd, destStart = 0, sceneIndex) {
        const scaleOverride = new Vector3();
        scaleOverride.x = undefined;
        scaleOverride.y = undefined;
        if (this.splatRenderMode === SplatRenderMode.ThreeD) {
            scaleOverride.z = undefined;
        } else {
            scaleOverride.z = 1;
        }
        const tempTransform = new Matrix4();

        let startSceneIndex = 0;
        let endSceneIndex = this.scenes.length - 1;
        if (sceneIndex !== undefined && sceneIndex !== null && sceneIndex >= 0 && sceneIndex <= this.scenes.length) {
            startSceneIndex = sceneIndex;
            endSceneIndex = sceneIndex;
        }
        for (let i = startSceneIndex; i <= endSceneIndex; i++) {
            if (applySceneTransform === undefined || applySceneTransform === null) {
                applySceneTransform = this.dynamicMode ? false : true;
            }

            const scene = this.getScene(i);
            const splatBuffer = scene.splatBuffer;
            let sceneTransform;
            if (applySceneTransform) {
                this.getSceneTransform(i, tempTransform);
                sceneTransform = tempTransform;
            }
            if (covariances) {
                splatBuffer.fillSplatCovarianceArray(covariances, sceneTransform, srcStart, srcEnd, destStart, covarianceCompressionLevel);
            }
            if (scales || rotations) {
                if (!scales || !rotations) {
                    throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');
                }
                splatBuffer.fillSplatScaleRotationArray(scales, rotations, sceneTransform,
                                                        srcStart, srcEnd, destStart, scaleRotationCompressionLevel, scaleOverride);
            }
            if (centers) splatBuffer.fillSplatCenterArray(this.morphedMesh, centers, sceneTransform, srcStart, srcEnd, destStart);
            if (colors) splatBuffer.fillSplatColorArray(colors, scene.minimumAlpha, srcStart, srcEnd, destStart);
            if (sphericalHarmonics) {
                splatBuffer.fillSphericalHarmonicsArray(sphericalHarmonics, this.minSphericalHarmonicsDegree,
                                                        sceneTransform, srcStart, srcEnd, destStart, sphericalHarmonicsCompressionLevel);
            }

            destStart += splatBuffer.getSplatCount();
        }
    }

    morphedMesh;
    /**
     * Convert splat centers, which are floating point values, to an array of integers and multiply
     * each by 1000. Centers will get transformed as appropriate before conversion to integer.
     * @param {number} start The index at which to start retrieving data
     * @param {number} end The index at which to stop retrieving data
     * @param {boolean} padFour Enforce alignment of 4 by inserting a 1 after every 3 values
     * @return {Int32Array}
     */
    getIntegerCenters(start, end, padFour = false) {
        const splatCount = end - start + 1;
        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, undefined, undefined, undefined, undefined, start);
        let intCenters;
        let componentCount = padFour ? 4 : 3;
        intCenters = new Int32Array(splatCount * componentCount);
        for (let i = 0; i < splatCount; i++) {
            for (let t = 0; t < 3; t++) {
                intCenters[i * componentCount + t] = Math.round(floatCenters[i * 3 + t] * 1000.0);
            }
            if (padFour) intCenters[i * componentCount + 3] = 1000;
        }
        return intCenters;
    }

    /**
     * Returns an array of splat centers, transformed as appropriate, optionally padded.
     * @param {number} start The index at which to start retrieving data
     * @param {number} end The index at which to stop retrieving data
     * @param {boolean} padFour Enforce alignment of 4 by inserting a 1 after every 3 values
     * @return {Float32Array}
     */
    getFloatCenters(start, end, padFour = false) {
        const splatCount = end - start + 1;
        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, undefined, undefined, undefined, undefined, start);
        if (!padFour) return floatCenters;
        let paddedFloatCenters = new Float32Array(splatCount * 4);
        for (let i = 0; i < splatCount; i++) {
            for (let t = 0; t < 3; t++) {
                paddedFloatCenters[i * 4 + t] = floatCenters[i * 3 + t];
            }
            paddedFloatCenters[i * 4 + 3] = 1.0;
        }
        return paddedFloatCenters;
    }

    /**
     * Get the center for a splat, transformed as appropriate.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector3} outCenter THREE.Vector3 instance in which to store splat center
     * @param {boolean} applySceneTransform By default, if the splat mesh is static, the transform of the scene to which the splat at
     *                                      'globalIndex' belongs will be applied to the splat center. If 'applySceneTransform' is true,
     *                                      the scene transform will always be applied and if 'applySceneTransform' is false, the
     *                                      scene transform will never be applied. If undefined, the default behavior will apply.
     */
    getSplatCenter = function() {

        const paramsObj = {};

        return function(morphedMesh, globalIndex, outCenter, applySceneTransform) {
            this.getLocalSplatParameters(globalIndex, paramsObj, applySceneTransform);
            paramsObj.splatBuffer.getSplatCenter(morphedMesh, paramsObj.localIndex, outCenter, paramsObj.sceneTransform);
        };

    }();

    /**
     * Get the scale and rotation for a splat, transformed as appropriate.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector3} outScale THREE.Vector3 instance in which to store splat scale
     * @param {THREE.Quaternion} outRotation THREE.Quaternion instance in which to store splat rotation
     * @param {boolean} applySceneTransform By default, if the splat mesh is static, the transform of the scene to which the splat at
     *                                      'globalIndex' belongs will be applied to the splat scale and rotation. If
     *                                      'applySceneTransform' is true, the scene transform will always be applied and if
     *                                      'applySceneTransform' is false, the scene transform will never be applied. If undefined,
     *                                      the default behavior will apply.
     */
    getSplatScaleAndRotation = function() {

        const paramsObj = {};
        const scaleOverride = new Vector3();

        return function(globalIndex, outScale, outRotation, applySceneTransform) {
            this.getLocalSplatParameters(globalIndex, paramsObj, applySceneTransform);
            scaleOverride.x = undefined;
            scaleOverride.y = undefined;
            scaleOverride.z = undefined;
            if (this.splatRenderMode === SplatRenderMode.TwoD) scaleOverride.z = 0;
            paramsObj.splatBuffer.getSplatScaleAndRotation(paramsObj.localIndex, outScale, outRotation,
                                                           paramsObj.sceneTransform, scaleOverride);
        };

    }();

    /**
     * Get the color for a splat.
     * @param {number} globalIndex Global index of splat
     * @param {THREE.Vector4} outColor THREE.Vector4 instance in which to store splat color
     */
    getSplatColor = function() {

        const paramsObj = {};

        return function(globalIndex, outColor) {
            this.getLocalSplatParameters(globalIndex, paramsObj);
            paramsObj.splatBuffer.getSplatColor(paramsObj.localIndex, outColor);
        };

    }();

    /**
     * Store the transform of the scene at 'sceneIndex' in 'outTransform'.
     * @param {number} sceneIndex Index of the desired scene
     * @param {THREE.Matrix4} outTransform Instance of THREE.Matrix4 in which to store the scene's transform
     */
    getSceneTransform(sceneIndex, outTransform) {
        const scene = this.getScene(sceneIndex);
        scene.updateTransform(this.dynamicMode);
        outTransform.copy(scene.transform);
    }

    /**
     * Get the scene at 'sceneIndex'.
     * @param {number} sceneIndex Index of the desired scene
     * @return {SplatScene}
     */
    getScene(sceneIndex) {
        if (sceneIndex < 0 || sceneIndex >= this.scenes.length) {
            throw new Error('SplatMesh::getScene() -> Invalid scene index.');
        }
        return this.scenes[sceneIndex];
    }

    getSceneCount() {
        return this.scenes.length;
    }

    getSplatBufferForSplat(globalIndex) {
        return this.getScene(this.globalSplatIndexToSceneIndexMap[globalIndex]).splatBuffer;
    }

    getSceneIndexForSplat(globalIndex) {
        return this.globalSplatIndexToSceneIndexMap[globalIndex];
    }

    getSceneTransformForSplat(globalIndex) {
        return this.getScene(this.globalSplatIndexToSceneIndexMap[globalIndex]).transform;
    }

    getSplatLocalIndex(globalIndex) {
        return this.globalSplatIndexToLocalSplatIndexMap[globalIndex];
    }

    static getIntegerMatrixArray(matrix) {
        const matrixElements = matrix.elements;
        const intMatrixArray = [];
        for (let i = 0; i < 16; i++) {
            intMatrixArray[i] = Math.round(matrixElements[i] * 1000.0);
        }
        return intMatrixArray;
    }

    computeBoundingBox(applySceneTransforms = false, sceneIndex) {
        let splatCount = this.getSplatCount();
        if (sceneIndex !== undefined && sceneIndex !== null) {
            if (sceneIndex < 0 || sceneIndex >= this.scenes.length) {
                throw new Error('SplatMesh::computeBoundingBox() -> Invalid scene index.');
            }
            splatCount = this.scenes[sceneIndex].splatBuffer.getSplatCount();
        }

        const floatCenters = new Float32Array(splatCount * 3);
        this.fillSplatDataArrays(null, null, null, floatCenters, null, null, applySceneTransforms,
                                 undefined, undefined, undefined, undefined, sceneIndex);

        const min = new Vector3();
        const max = new Vector3();
        for (let i = 0; i < splatCount; i++) {
            const offset = i * 3;
            const x = floatCenters[offset];
            const y = floatCenters[offset + 1];
            const z = floatCenters[offset + 2];
            if (i === 0 || x < min.x) min.x = x;
            if (i === 0 || y < min.y) min.y = y;
            if (i === 0 || z < min.z) min.z = z;
            if (i === 0 || x > max.x) max.x = x;
            if (i === 0 || y > max.y) max.y = y;
            if (i === 0 || z > max.z) max.z = z;
        }

        return new Box3(min, max);
    }
}

/**
 * DirectLoadError
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Minor enhancement: Added this.name property for better error identification.
 */
class DirectLoadError extends Error {
    constructor(msg) {
        super(msg);
        this.name = 'DirectLoadError';
    }
}

/**
 * UncompressedSplatArray
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const BASE_COMPONENT_COUNT = 14;

class UncompressedSplatArray {

    static OFFSET = {
        X: 0,
        Y: 1,
        Z: 2,
        SCALE0: 3,
        SCALE1: 4,
        SCALE2: 5,
        ROTATION0: 6,
        ROTATION1: 7,
        ROTATION2: 8,
        ROTATION3: 9,
        FDC0: 10,
        FDC1: 11,
        FDC2: 12,
        OPACITY: 13,
        FRC0: 14,
        FRC1: 15,
        FRC2: 16,
        FRC3: 17,
        FRC4: 18,
        FRC5: 19,
        FRC6: 20,
        FRC7: 21,
        FRC8: 22,
        FRC9: 23,
        FRC10: 24,
        FRC11: 25,
        FRC12: 26,
        FRC13: 27,
        FRC14: 28,
        FRC15: 29,
        FRC16: 30,
        FRC17: 31,
        FRC18: 32,
        FRC19: 33,
        FRC20: 34,
        FRC21: 35,
        FRC22: 36,
        FRC23: 37
    };

    constructor(sphericalHarmonicsDegree = 0) {
        this.sphericalHarmonicsDegree = sphericalHarmonicsDegree;
        this.sphericalHarmonicsCount = getSphericalHarmonicsComponentCountForDegree(this.sphericalHarmonicsDegree);
        this.componentCount = this.sphericalHarmonicsCount + BASE_COMPONENT_COUNT;
        this.defaultSphericalHarmonics = new Array(this.sphericalHarmonicsCount).fill(0);
        this.splats = [];
        this.splatCount = 0;
    }

    static createSplat(sphericalHarmonicsDegree = 0) {
        const baseSplat = [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0];
        let shEntries = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
        for (let i = 0; i < shEntries; i++) baseSplat.push(0);
        return baseSplat;
    }

    addSplat(splat) {
        this.splats.push(splat);
        this.splatCount++;
    }

    getSplat(index) {
        return this.splats[index];
    }

    addDefaultSplat() {
        const newSplat = UncompressedSplatArray.createSplat(this.sphericalHarmonicsDegree);
        this.addSplat(newSplat);
        return newSplat;
    }

    addSplatFromComonents(x, y, z, scale0, scale1, scale2, rot0, rot1, rot2, rot3, r, g, b, opacity, ...rest) {
        const newSplat = [x, y, z, scale0, scale1, scale2, rot0, rot1, rot2, rot3, r, g, b, opacity, ...this.defaultSphericalHarmonics];
        for (let i = 0; i < rest.length && i < this.sphericalHarmonicsCount; i++) {
            newSplat[i] = rest[i];
        }
        this.addSplat(newSplat);
        return newSplat;
    }

    addSplatFromArray(src, srcIndex) {
        const srcSplat = src.splats[srcIndex];
        const newSplat = UncompressedSplatArray.createSplat(this.sphericalHarmonicsDegree);
        for (let i = 0; i < this.componentCount && i < srcSplat.length; i++) {
            newSplat[i] = srcSplat[i];
        }
        this.addSplat(newSplat);
    }
}

/**
 * SplatBuffer
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


/**
 * Helper function to copy bytes between buffers
 */
const copyBetweenBuffers = (srcBuffer, srcOffset, destBuffer, destOffset, byteCount = 0) => {
    const src = new Uint8Array(srcBuffer, srcOffset);
    const dest = new Uint8Array(destBuffer, destOffset);
    for (let i = 0; i < byteCount; i++) {
        dest[i] = src[i];
    }
};

// Compression/decompression helper functions
Constants$1.SphericalHarmonics8BitCompressionRange;

const toHalfFloat = DataUtils.toHalfFloat.bind(DataUtils);
const fromHalfFloat = DataUtils.fromHalfFloat.bind(DataUtils);

const toUncompressedFloat = (f, compressionLevel, isSH = false, range8BitMin, range8BitMax) => {
    if (compressionLevel === 0) {
        return f;
    } else if (compressionLevel === 1 || compressionLevel === 2 && !isSH) {
        return DataUtils.fromHalfFloat(f);
    } else if (compressionLevel === 2) {
        return fromUint8(f, range8BitMin, range8BitMax);
    }
};

const toUint8 = (v, rangeMin, rangeMax) => {
    v = clamp(v, rangeMin, rangeMax);
    const range = (rangeMax - rangeMin);
    return clamp(Math.floor((v - rangeMin) / range * 255), 0, 255);
};

const fromUint8 = (v, rangeMin, rangeMax) => {
    const range = (rangeMax - rangeMin);
    return (v / 255 * range + rangeMin);
};

const fromHalfFloatToUint8 = (v, rangeMin, rangeMax) => {
    return toUint8(fromHalfFloat(v), rangeMin, rangeMax);
};

const dataViewFloatForCompressionLevel = (dataView, floatIndex, compressionLevel, isSH = false) => {
    if (compressionLevel === 0) {
        return dataView.getFloat32(floatIndex * 4, true);
    } else if (compressionLevel === 1 || compressionLevel === 2 && !isSH) {
        return dataView.getUint16(floatIndex * 2, true);
    } else {
        return dataView.getUint8(floatIndex, true);
    }
};

class SplatBuffer {

    static CurrentMajorVersion = 0;
    static CurrentMinorVersion = 1;

    static CenterComponentCount = 3;
    static ScaleComponentCount = 3;
    static RotationComponentCount = 4;
    static ColorComponentCount = 4;
    static CovarianceComponentCount = 6;

    static SplatScaleOffsetFloat = 3;
    static SplatRotationOffsetFloat = 6;

    static CompressionLevels = {
        0: {
            BytesPerCenter: 12,
            BytesPerScale: 12,
            BytesPerRotation: 16,
            BytesPerColor: 4,
            ScaleOffsetBytes: 12,
            RotationffsetBytes: 24,
            ColorOffsetBytes: 40,
            SphericalHarmonicsOffsetBytes: 44,
            ScaleRange: 1,
            BytesPerSphericalHarmonicsComponent: 4,
            SphericalHarmonicsOffsetFloat: 11,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 44 },
                1: { BytesPerSplat: 80 },
                2: { BytesPerSplat: 140 }
            },
        },
        1: {
            BytesPerCenter: 6,
            BytesPerScale: 6,
            BytesPerRotation: 8,
            BytesPerColor: 4,
            ScaleOffsetBytes: 6,
            RotationffsetBytes: 12,
            ColorOffsetBytes: 20,
            SphericalHarmonicsOffsetBytes: 24,
            ScaleRange: 32767,
            BytesPerSphericalHarmonicsComponent: 2,
            SphericalHarmonicsOffsetFloat: 12,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 24 },
                1: { BytesPerSplat: 42 },
                2: { BytesPerSplat: 72 }
            },
        },
        2: {
            BytesPerCenter: 6,
            BytesPerScale: 6,
            BytesPerRotation: 8,
            BytesPerColor: 4,
            ScaleOffsetBytes: 6,
            RotationffsetBytes: 12,
            ColorOffsetBytes: 20,
            SphericalHarmonicsOffsetBytes: 24,
            ScaleRange: 32767,
            BytesPerSphericalHarmonicsComponent: 1,
            SphericalHarmonicsOffsetFloat: 12,
            SphericalHarmonicsDegrees: {
                0: { BytesPerSplat: 24 },
                1: { BytesPerSplat: 33 },
                2: { BytesPerSplat: 48 }
            },
        }
    };

    static CovarianceSizeFloats = 6;

    static HeaderSizeBytes = 4096;
    static SectionHeaderSizeBytes = 1024;

    static BucketStorageSizeBytes = 12;
    static BucketStorageSizeFloats = 3;

    static BucketBlockSize = 5.0;
    static BucketSize = 256;

    constructor(bufferData, secLoadedCountsToMax = true) {
        this.constructFromBuffer(bufferData, secLoadedCountsToMax);
    }

    getSplatCount() {
        return this.splatCount;
    }

    getMaxSplatCount() {
        return this.maxSplatCount;
    }

    getMinSphericalHarmonicsDegree() {
        let minSphericalHarmonicsDegree = 0;
        for (let i = 0; i < this.sections.length; i++) {
            const section = this.sections[i];
            if (i === 0 || section.sphericalHarmonicsDegree < minSphericalHarmonicsDegree) {
                minSphericalHarmonicsDegree = section.sphericalHarmonicsDegree;
            }
        }
        return minSphericalHarmonicsDegree;
    }

    getBucketIndex(section, localSplatIndex) {
        let bucketIndex;
        const maxSplatIndexInFullBuckets = section.fullBucketCount * section.bucketSize;
        if (localSplatIndex < maxSplatIndexInFullBuckets) {
            bucketIndex = Math.floor(localSplatIndex / section.bucketSize);
        } else {
            let bucketSplatIndex = maxSplatIndexInFullBuckets;
            bucketIndex = section.fullBucketCount;
            let partiallyFullBucketIndex = 0;
            while (bucketSplatIndex < section.splatCount) {
                let currentPartiallyFilledBucketSize = section.partiallyFilledBucketLengths[partiallyFullBucketIndex];
                if (localSplatIndex >= bucketSplatIndex && localSplatIndex < bucketSplatIndex + currentPartiallyFilledBucketSize) {
                    break;
                }
                bucketSplatIndex += currentPartiallyFilledBucketSize;
                bucketIndex++;
                partiallyFullBucketIndex++;
            }
        }
        return bucketIndex;
    }

    getSplatCenter(morphedMesh, globalSplatIndex, outCenter, transform) {
        const sectionIndex = this.globalSplatIndexToSectionMap[globalSplatIndex];
        const section = this.sections[sectionIndex];
        const localSplatIndex = globalSplatIndex - section.splatCountOffset;

        const srcSplatCentersBase = section.bytesPerSplat * localSplatIndex;
        const dataView = new DataView(this.bufferData, section.dataBase + srcSplatCentersBase);

        const x = dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
        const y = dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
        const z = dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);
        if (this.compressionLevel >= 1) {
            const bucketIndex = this.getBucketIndex(section, localSplatIndex);
            const bucketBase = bucketIndex * SplatBuffer.BucketStorageSizeFloats;
            const sf = section.compressionScaleFactor;
            const sr = section.compressionScaleRange;
            outCenter.x = (x - sr) * sf + section.bucketArray[bucketBase];
            outCenter.y = (y - sr) * sf + section.bucketArray[bucketBase + 1];
            outCenter.z = (z - sr) * sf + section.bucketArray[bucketBase + 2];
        } else {
            outCenter.x = x;
            outCenter.y = y;
            outCenter.z = z;
        }

        outCenter.x += morphedMesh[globalSplatIndex * 3 + 0];
        outCenter.y += morphedMesh[globalSplatIndex * 3 + 1];
        outCenter.z += morphedMesh[globalSplatIndex * 3 + 2];


        if (transform) outCenter.applyMatrix4(transform);
    }

    getSplatScaleAndRotation = function() {

        const scaleMatrix = new Matrix4();
        const rotationMatrix = new Matrix4();
        const tempMatrix = new Matrix4();
        const tempPosition = new Vector3();
        const scale = new Vector3();
        const rotation = new Quaternion();

        return function(index, outScale, outRotation, transform, scaleOverride) {
            const sectionIndex = this.globalSplatIndexToSectionMap[index];
            const section = this.sections[sectionIndex];
            const localSplatIndex = index - section.splatCountOffset;

            const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

            scale.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel), this.compressionLevel));
            if (scaleOverride) {
                if (scaleOverride.x !== undefined) scale.x = scaleOverride.x;
                if (scaleOverride.y !== undefined) scale.y = scaleOverride.y;
                if (scaleOverride.z !== undefined) scale.z = scaleOverride.z;
            }

            rotation.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel), this.compressionLevel));

            if (transform) {
                scaleMatrix.makeScale(scale.x, scale.y, scale.z);
                rotationMatrix.makeRotationFromQuaternion(rotation);
                tempMatrix.copy(scaleMatrix).multiply(rotationMatrix).multiply(transform);
                tempMatrix.decompose(tempPosition, outRotation, outScale);
            } else {
                outScale.copy(scale);
                outRotation.copy(rotation);
            }
        };

    }();

    getSplatColor(globalSplatIndex, outColor) {
        const sectionIndex = this.globalSplatIndexToSectionMap[globalSplatIndex];
        const section = this.sections[sectionIndex];
        const localSplatIndex = globalSplatIndex - section.splatCountOffset;

        const srcSplatColorsBase = section.bytesPerSplat * localSplatIndex +
                                   SplatBuffer.CompressionLevels[this.compressionLevel].ColorOffsetBytes;
        const splatColorsArray = new Uint8Array(this.bufferData, section.dataBase + srcSplatColorsBase, 4);

        outColor.set(splatColorsArray[0], splatColorsArray[1],
                     splatColorsArray[2], splatColorsArray[3]);
    }

    fillSplatCenterArray(morphedMesh, outCenterArray, transform, srcFrom, srcTo, destFrom) {
        const splatCount = this.splatCount;

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        const center = new Vector3();
        for (let i = srcFrom; i <= srcTo; i++) {
            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;
            const centerDestBase = (i - srcFrom + destFrom) * SplatBuffer.CenterComponentCount;

            const srcSplatCentersBase = section.bytesPerSplat * localSplatIndex;
            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatCentersBase);

            const x = dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
            const y = dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
            const z = dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);
            if (this.compressionLevel >= 1) {
                const bucketIndex = this.getBucketIndex(section, localSplatIndex);
                const bucketBase = bucketIndex * SplatBuffer.BucketStorageSizeFloats;
                const sf = section.compressionScaleFactor;
                const sr = section.compressionScaleRange;
                center.x = (x - sr) * sf + section.bucketArray[bucketBase];
                center.y = (y - sr) * sf + section.bucketArray[bucketBase + 1];
                center.z = (z - sr) * sf + section.bucketArray[bucketBase + 2];
            } else {
                center.x = x;
                center.y = y;
                center.z = z;
            }
            if (transform) {
                center.applyMatrix4(transform);
            }

            outCenterArray[centerDestBase] = center.x + morphedMesh[i * 3 + 0];
            outCenterArray[centerDestBase + 1] = center.y + morphedMesh[i * 3 + 1];
            outCenterArray[centerDestBase + 2] = center.z + morphedMesh[i * 3 + 2];

            // outCenterArray[centerDestBase] = morphedMesh[centerDestBase];
            // outCenterArray[centerDestBase + 1] = morphedMesh[centerDestBase + 1];
            // outCenterArray[centerDestBase + 2] = morphedMesh[centerDestBase + 2];

            // outCenterArray[centerDestBase] = center.x;
            // outCenterArray[centerDestBase + 1] = center.y;
            // outCenterArray[centerDestBase + 2] = center.z;
        }
    }

    fillSplatScaleRotationArray = function() {

        const scaleMatrix = new Matrix4();
        const rotationMatrix = new Matrix4();
        const tempMatrix = new Matrix4();
        const scale = new Vector3();
        const rotation = new Quaternion();
        const tempPosition = new Vector3();

        const ensurePositiveW = (quaternion) => {
            const flip = quaternion.w < 0 ? -1 : 1;
            quaternion.x *= flip;
            quaternion.y *= flip;
            quaternion.z *= flip;
            quaternion.w *= flip;
        };

        return function(outScaleArray, outRotationArray, transform, srcFrom, srcTo, destFrom,
                        desiredOutputCompressionLevel, scaleOverride) {
            const splatCount = this.splatCount;

            srcFrom = srcFrom || 0;
            srcTo = srcTo || splatCount - 1;
            if (destFrom === undefined) destFrom = srcFrom;

            const outputConversion = (value, srcCompressionLevel) => {
                return convertBetweenCompressionLevels(value, srcCompressionLevel, desiredOutputCompressionLevel);
            };

            for (let i = srcFrom; i <= srcTo; i++) {
                const sectionIndex = this.globalSplatIndexToSectionMap[i];
                const section = this.sections[sectionIndex];
                const localSplatIndex = i - section.splatCountOffset;

                const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                        SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

                const scaleDestBase = (i - srcFrom + destFrom) * SplatBuffer.ScaleComponentCount;
                const rotationDestBase = (i - srcFrom + destFrom) * SplatBuffer.RotationComponentCount;
                const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

                const srcScaleX = (scaleOverride && scaleOverride.x !== undefined) ? scaleOverride.x :
                                   dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel);
                const srcScaleY = (scaleOverride && scaleOverride.y !== undefined) ? scaleOverride.y :
                                   dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel);
                const srcScaleZ = (scaleOverride && scaleOverride.z !== undefined) ? scaleOverride.z :
                                   dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel);

                const srcRotationW = dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel);
                const srcRotationX = dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel);
                const srcRotationY = dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel);
                const srcRotationZ = dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel);

                scale.set(toUncompressedFloat(srcScaleX, this.compressionLevel),
                          toUncompressedFloat(srcScaleY, this.compressionLevel),
                          toUncompressedFloat(srcScaleZ, this.compressionLevel));

                rotation.set(toUncompressedFloat(srcRotationX, this.compressionLevel),
                             toUncompressedFloat(srcRotationY, this.compressionLevel),
                             toUncompressedFloat(srcRotationZ, this.compressionLevel),
                             toUncompressedFloat(srcRotationW, this.compressionLevel)).normalize();

                if (transform) {
                    tempPosition.set(0, 0, 0);
                    scaleMatrix.makeScale(scale.x, scale.y, scale.z);
                    rotationMatrix.makeRotationFromQuaternion(rotation);
                    tempMatrix.identity().premultiply(scaleMatrix).premultiply(rotationMatrix);
                    tempMatrix.premultiply(transform);
                    tempMatrix.decompose(tempPosition, rotation, scale);
                    rotation.normalize();
                }

                ensurePositiveW(rotation);

                if (outScaleArray) {
                    outScaleArray[scaleDestBase] = outputConversion(scale.x, 0);
                    outScaleArray[scaleDestBase + 1] = outputConversion(scale.y, 0);
                    outScaleArray[scaleDestBase + 2] = outputConversion(scale.z, 0);
                }

                if (outRotationArray) {
                    outRotationArray[rotationDestBase] = outputConversion(rotation.x, 0);
                    outRotationArray[rotationDestBase + 1] = outputConversion(rotation.y, 0);
                    outRotationArray[rotationDestBase + 2] = outputConversion(rotation.z, 0);
                    outRotationArray[rotationDestBase + 3] = outputConversion(rotation.w, 0);
                }
            }
        };
    }();

    static computeCovariance = function() {

        const tempMatrix4 = new Matrix4();
        const scaleMatrix = new Matrix3();
        const rotationMatrix = new Matrix3();
        const covarianceMatrix = new Matrix3();
        const transformedCovariance = new Matrix3();
        const transform3x3 = new Matrix3();
        const transform3x3Transpose = new Matrix3();

        return function(scale, rotation, transform, outCovariance, outOffset = 0, desiredOutputCompressionLevel) {

            tempMatrix4.makeScale(scale.x, scale.y, scale.z);
            scaleMatrix.setFromMatrix4(tempMatrix4);

            tempMatrix4.makeRotationFromQuaternion(rotation);
            rotationMatrix.setFromMatrix4(tempMatrix4);

            covarianceMatrix.copy(rotationMatrix).multiply(scaleMatrix);
            transformedCovariance.copy(covarianceMatrix).transpose().premultiply(covarianceMatrix);

            if (transform) {
                transform3x3.setFromMatrix4(transform);
                transform3x3Transpose.copy(transform3x3).transpose();
                transformedCovariance.multiply(transform3x3Transpose);
                transformedCovariance.premultiply(transform3x3);
            }

            if (desiredOutputCompressionLevel >= 1) {
                outCovariance[outOffset] = toHalfFloat(transformedCovariance.elements[0]);
                outCovariance[outOffset + 1] = toHalfFloat(transformedCovariance.elements[3]);
                outCovariance[outOffset + 2] = toHalfFloat(transformedCovariance.elements[6]);
                outCovariance[outOffset + 3] = toHalfFloat(transformedCovariance.elements[4]);
                outCovariance[outOffset + 4] = toHalfFloat(transformedCovariance.elements[7]);
                outCovariance[outOffset + 5] = toHalfFloat(transformedCovariance.elements[8]);
            } else {
                outCovariance[outOffset] = transformedCovariance.elements[0];
                outCovariance[outOffset + 1] = transformedCovariance.elements[3];
                outCovariance[outOffset + 2] = transformedCovariance.elements[6];
                outCovariance[outOffset + 3] = transformedCovariance.elements[4];
                outCovariance[outOffset + 4] = transformedCovariance.elements[7];
                outCovariance[outOffset + 5] = transformedCovariance.elements[8];
            }

        };

    }();

    fillSplatCovarianceArray(covarianceArray, transform, srcFrom, srcTo, destFrom, desiredOutputCompressionLevel) {
        const splatCount = this.splatCount;

        const scale = new Vector3();
        const rotation = new Quaternion();

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        for (let i = srcFrom; i <= srcTo; i++) {
            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;

            const covarianceDestBase = (i - srcFrom + destFrom) * SplatBuffer.CovarianceComponentCount;
            const srcSplatScalesBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ScaleOffsetBytes;

            const dataView = new DataView(this.bufferData, section.dataBase + srcSplatScalesBase);

            scale.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 0, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 1, this.compressionLevel), this.compressionLevel),
                      toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 2, this.compressionLevel), this.compressionLevel));

            rotation.set(toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 4, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 5, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 6, this.compressionLevel), this.compressionLevel),
                         toUncompressedFloat(dataViewFloatForCompressionLevel(dataView, 3, this.compressionLevel), this.compressionLevel));

            SplatBuffer.computeCovariance(scale, rotation, transform, covarianceArray, covarianceDestBase, desiredOutputCompressionLevel);
        }
    }

    fillSplatColorArray(outColorArray, minimumAlpha, srcFrom, srcTo, destFrom) {
        const splatCount = this.splatCount;

        srcFrom = srcFrom || 0;
        srcTo = srcTo || splatCount - 1;
        if (destFrom === undefined) destFrom = srcFrom;

        for (let i = srcFrom; i <= srcTo; i++) {

            const sectionIndex = this.globalSplatIndexToSectionMap[i];
            const section = this.sections[sectionIndex];
            const localSplatIndex = i - section.splatCountOffset;

            const colorDestBase = (i - srcFrom + destFrom) * SplatBuffer.ColorComponentCount;
            const srcSplatColorsBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].ColorOffsetBytes;

            const dataView = new Uint8Array(this.bufferData, section.dataBase + srcSplatColorsBase);

            let alpha = dataView[3];
            alpha = (alpha >= minimumAlpha) ? alpha : 0;

            outColorArray[colorDestBase] = dataView[0];
            outColorArray[colorDestBase + 1] = dataView[1];
            outColorArray[colorDestBase + 2] = dataView[2];
            outColorArray[colorDestBase + 3] = alpha;
        }
    }

    fillSphericalHarmonicsArray = function() {
        for (let i = 0; i < 15; i++) {
            new Vector3();
        }

        const tempMatrix3 = new Matrix3();
        const tempMatrix4 = new Matrix4();

        const tempTranslation = new Vector3();
        const tempScale = new Vector3();
        const tempRotation = new Quaternion();

        const sh11 = [];
        const sh12 = [];
        const sh13 = [];

        const sh21 = [];
        const sh22 = [];
        const sh23 = [];
        const sh24 = [];
        const sh25 = [];

        const shIn1 = [];
        const shIn2 = [];
        const shIn3 = [];
        const shIn4 = [];
        const shIn5 = [];

        const shOut1 = [];
        const shOut2 = [];
        const shOut3 = [];
        const shOut4 = [];
        const shOut5 = [];

        const noop = (v) => v;

        const set3 = (array, val1, val2, val3) => {
            array[0] = val1;
            array[1] = val2;
            array[2] = val3;
        };

        const set3FromArray = (array, srcDestView, stride, srcBase, compressionLevel) => {
            array[0] = dataViewFloatForCompressionLevel(srcDestView, srcBase, compressionLevel, true);
            array[1] = dataViewFloatForCompressionLevel(srcDestView, srcBase + stride, compressionLevel, true);
            array[2] = dataViewFloatForCompressionLevel(srcDestView, srcBase + stride + stride, compressionLevel, true);
        };

        const copy3 = (srcArray, destArray) => {
            destArray[0] = srcArray[0];
            destArray[1] = srcArray[1];
            destArray[2] = srcArray[2];
        };

        const setOutput3 = (srcArray, destArray, destBase, conversionFunc) => {
            destArray[destBase] = conversionFunc(srcArray[0]);
            destArray[destBase + 1] = conversionFunc(srcArray[1]);
            destArray[destBase + 2] = conversionFunc(srcArray[2]);
        };

        const toUncompressedFloatArray3 = (src, dest, compressionLevel, range8BitMin, range8BitMax) => {
            dest[0] = toUncompressedFloat(src[0], compressionLevel, true, range8BitMin, range8BitMax);
            dest[1] = toUncompressedFloat(src[1], compressionLevel, true, range8BitMin, range8BitMax);
            dest[2] = toUncompressedFloat(src[2], compressionLevel, true, range8BitMin, range8BitMax);
            return dest;
        };

        return function(outSphericalHarmonicsArray, outSphericalHarmonicsDegree, transform,
                        srcFrom, srcTo, destFrom, desiredOutputCompressionLevel) {
            const splatCount = this.splatCount;

            srcFrom = srcFrom || 0;
            srcTo = srcTo || splatCount - 1;
            if (destFrom === undefined) destFrom = srcFrom;

            if (transform && outSphericalHarmonicsDegree >= 1) {
                tempMatrix4.copy(transform);
                tempMatrix4.decompose(tempTranslation, tempRotation, tempScale);
                tempRotation.normalize();
                tempMatrix4.makeRotationFromQuaternion(tempRotation);
                tempMatrix3.setFromMatrix4(tempMatrix4);
                set3(sh11, tempMatrix3.elements[4], -tempMatrix3.elements[7], tempMatrix3.elements[1]);
                set3(sh12, -tempMatrix3.elements[5], tempMatrix3.elements[8], -tempMatrix3.elements[2]);
                set3(sh13, tempMatrix3.elements[3], -tempMatrix3.elements[6], tempMatrix3.elements[0]);
            }

            const localFromHalfFloatToUint8 = (v) => {
                return fromHalfFloatToUint8(v, this.minSphericalHarmonicsCoeff, this.maxSphericalHarmonicsCoeff);
            };

            const localToUint8 = (v) => {
                return toUint8(v, this.minSphericalHarmonicsCoeff, this.maxSphericalHarmonicsCoeff);
            };

            for (let i = srcFrom; i <= srcTo; i++) {

                const sectionIndex = this.globalSplatIndexToSectionMap[i];
                const section = this.sections[sectionIndex];
                outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, section.sphericalHarmonicsDegree);
                const outSphericalHarmonicsComponentsCount = getSphericalHarmonicsComponentCountForDegree(outSphericalHarmonicsDegree);

                const localSplatIndex = i - section.splatCountOffset;

                const srcSplatSHBase = section.bytesPerSplat * localSplatIndex +
                                       SplatBuffer.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes;

                const dataView = new DataView(this.bufferData, section.dataBase + srcSplatSHBase);

                const shDestBase = (i - srcFrom + destFrom) * outSphericalHarmonicsComponentsCount;

                let compressionLevelForOutputConversion = transform ? 0 : this.compressionLevel;
                let outputConversionFunc = noop;
                if (compressionLevelForOutputConversion !== desiredOutputCompressionLevel) {
                    if (compressionLevelForOutputConversion === 1) {
                        if (desiredOutputCompressionLevel === 0) outputConversionFunc = fromHalfFloat;
                        else if (desiredOutputCompressionLevel == 2) outputConversionFunc = localFromHalfFloatToUint8;
                    } else if (compressionLevelForOutputConversion === 0) {
                        if (desiredOutputCompressionLevel === 1) outputConversionFunc = toHalfFloat;
                        else if (desiredOutputCompressionLevel == 2) outputConversionFunc = localToUint8;
                    }
                }

                const minShCoeff = this.minSphericalHarmonicsCoeff;
                const maxShCoeff = this.maxSphericalHarmonicsCoeff;

                if (outSphericalHarmonicsDegree >= 1) {

                    set3FromArray(shIn1, dataView, 3, 0, this.compressionLevel);
                    set3FromArray(shIn2, dataView, 3, 1, this.compressionLevel);
                    set3FromArray(shIn3, dataView, 3, 2, this.compressionLevel);

                    if (transform) {
                        toUncompressedFloatArray3(shIn1, shIn1, this.compressionLevel, minShCoeff, maxShCoeff);
                        toUncompressedFloatArray3(shIn2, shIn2, this.compressionLevel, minShCoeff, maxShCoeff);
                        toUncompressedFloatArray3(shIn3, shIn3, this.compressionLevel, minShCoeff, maxShCoeff);
                        SplatBuffer.rotateSphericalHarmonics3(shIn1, shIn2, shIn3, sh11, sh12, sh13, shOut1, shOut2, shOut3);
                    } else {
                        copy3(shIn1, shOut1);
                        copy3(shIn2, shOut2);
                        copy3(shIn3, shOut3);
                    }

                    setOutput3(shOut1, outSphericalHarmonicsArray, shDestBase, outputConversionFunc);
                    setOutput3(shOut2, outSphericalHarmonicsArray, shDestBase + 3, outputConversionFunc);
                    setOutput3(shOut3, outSphericalHarmonicsArray, shDestBase + 6, outputConversionFunc);

                    if (outSphericalHarmonicsDegree >= 2) {

                        set3FromArray(shIn1, dataView, 5, 9, this.compressionLevel);
                        set3FromArray(shIn2, dataView, 5, 10, this.compressionLevel);
                        set3FromArray(shIn3, dataView, 5, 11, this.compressionLevel);
                        set3FromArray(shIn4, dataView, 5, 12, this.compressionLevel);
                        set3FromArray(shIn5, dataView, 5, 13, this.compressionLevel);

                        if (transform) {
                            toUncompressedFloatArray3(shIn1, shIn1, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn2, shIn2, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn3, shIn3, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn4, shIn4, this.compressionLevel, minShCoeff, maxShCoeff);
                            toUncompressedFloatArray3(shIn5, shIn5, this.compressionLevel, minShCoeff, maxShCoeff);
                            SplatBuffer.rotateSphericalHarmonics5(shIn1, shIn2, shIn3, shIn4, shIn5,
                                                                  sh11, sh12, sh13, sh21, sh22, sh23, sh24, sh25,
                                                                  shOut1, shOut2, shOut3, shOut4, shOut5);
                        } else {
                            copy3(shIn1, shOut1);
                            copy3(shIn2, shOut2);
                            copy3(shIn3, shOut3);
                            copy3(shIn4, shOut4);
                            copy3(shIn5, shOut5);
                        }

                        setOutput3(shOut1, outSphericalHarmonicsArray, shDestBase + 9, outputConversionFunc);
                        setOutput3(shOut2, outSphericalHarmonicsArray, shDestBase + 12, outputConversionFunc);
                        setOutput3(shOut3, outSphericalHarmonicsArray, shDestBase + 15, outputConversionFunc);
                        setOutput3(shOut4, outSphericalHarmonicsArray, shDestBase + 18, outputConversionFunc);
                        setOutput3(shOut5, outSphericalHarmonicsArray, shDestBase + 21, outputConversionFunc);
                    }
                }
            }
        };

    }();

    static dot3 = (v1, v2, v3, transformRow, outArray) => {
        outArray[0] = outArray[1] = outArray[2] = 0;
        const t0 = transformRow[0];
        const t1 = transformRow[1];
        const t2 = transformRow[2];
        SplatBuffer.addInto3(v1[0] * t0, v1[1] * t0, v1[2] * t0, outArray);
        SplatBuffer.addInto3(v2[0] * t1, v2[1] * t1, v2[2] * t1, outArray);
        SplatBuffer.addInto3(v3[0] * t2, v3[1] * t2, v3[2] * t2, outArray);
    };

    static addInto3 = (val1, val2, val3, destArray) => {
        destArray[0] = destArray[0] + val1;
        destArray[1] = destArray[1] + val2;
        destArray[2] = destArray[2] + val3;
    };

    static dot5 = (v1, v2, v3, v4, v5, transformRow, outArray) => {
        outArray[0] = outArray[1] = outArray[2] = 0;
        const t0 = transformRow[0];
        const t1 = transformRow[1];
        const t2 = transformRow[2];
        const t3 = transformRow[3];
        const t4 = transformRow[4];
        SplatBuffer.addInto3(v1[0] * t0, v1[1] * t0, v1[2] * t0, outArray);
        SplatBuffer.addInto3(v2[0] * t1, v2[1] * t1, v2[2] * t1, outArray);
        SplatBuffer.addInto3(v3[0] * t2, v3[1] * t2, v3[2] * t2, outArray);
        SplatBuffer.addInto3(v4[0] * t3, v4[1] * t3, v4[2] * t3, outArray);
        SplatBuffer.addInto3(v5[0] * t4, v5[1] * t4, v5[2] * t4, outArray);
    };

    static rotateSphericalHarmonics3 = (in1, in2, in3, tsh11, tsh12, tsh13, out1, out2, out3) => {
        SplatBuffer.dot3(in1, in2, in3, tsh11, out1);
        SplatBuffer.dot3(in1, in2, in3, tsh12, out2);
        SplatBuffer.dot3(in1, in2, in3, tsh13, out3);
    };

    static rotateSphericalHarmonics5 = (in1, in2, in3, in4, in5, tsh11, tsh12, tsh13,
                                        tsh21, tsh22, tsh23, tsh24, tsh25, out1, out2, out3, out4, out5) => {

        const kSqrt0104 = Math.sqrt(1.0 / 4.0);
        const kSqrt0304 = Math.sqrt(3.0 / 4.0);
        const kSqrt0103 = Math.sqrt(1.0 / 3.0);
        const kSqrt0403 = Math.sqrt(4.0 / 3.0);
        const kSqrt0112 = Math.sqrt(1.0 / 12.0);

        tsh21[0] = kSqrt0104 * ((tsh13[2] * tsh11[0] + tsh13[0] * tsh11[2]) + (tsh11[2] * tsh13[0] + tsh11[0] * tsh13[2]));
        tsh21[1] = (tsh13[1] * tsh11[0] + tsh11[1] * tsh13[0]);
        tsh21[2] = kSqrt0304 * (tsh13[1] * tsh11[1] + tsh11[1] * tsh13[1]);
        tsh21[3] = (tsh13[1] * tsh11[2] + tsh11[1] * tsh13[2]);
        tsh21[4] = kSqrt0104 * ((tsh13[2] * tsh11[2] - tsh13[0] * tsh11[0]) + (tsh11[2] * tsh13[2] - tsh11[0] * tsh13[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh21, out1);

        tsh22[0] = kSqrt0104 * ((tsh12[2] * tsh11[0] + tsh12[0] * tsh11[2]) + (tsh11[2] * tsh12[0] + tsh11[0] * tsh12[2]));
        tsh22[1] = tsh12[1] * tsh11[0] + tsh11[1] * tsh12[0];
        tsh22[2] = kSqrt0304 * (tsh12[1] * tsh11[1] + tsh11[1] * tsh12[1]);
        tsh22[3] = tsh12[1] * tsh11[2] + tsh11[1] * tsh12[2];
        tsh22[4] = kSqrt0104 * ((tsh12[2] * tsh11[2] - tsh12[0] * tsh11[0]) + (tsh11[2] * tsh12[2] - tsh11[0] * tsh12[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh22, out2);

        tsh23[0] = kSqrt0103 * (tsh12[2] * tsh12[0] + tsh12[0] * tsh12[2]) + -kSqrt0112 *
                   ((tsh13[2] * tsh13[0] + tsh13[0] * tsh13[2]) + (tsh11[2] * tsh11[0] + tsh11[0] * tsh11[2]));
        tsh23[1] = kSqrt0403 * tsh12[1] * tsh12[0] + -kSqrt0103 * (tsh13[1] * tsh13[0] + tsh11[1] * tsh11[0]);
        tsh23[2] = tsh12[1] * tsh12[1] + -kSqrt0104 * (tsh13[1] * tsh13[1] + tsh11[1] * tsh11[1]);
        tsh23[3] = kSqrt0403 * tsh12[1] * tsh12[2] + -kSqrt0103 * (tsh13[1] * tsh13[2] + tsh11[1] * tsh11[2]);
        tsh23[4] = kSqrt0103 * (tsh12[2] * tsh12[2] - tsh12[0] * tsh12[0]) + -kSqrt0112 *
                   ((tsh13[2] * tsh13[2] - tsh13[0] * tsh13[0]) + (tsh11[2] * tsh11[2] - tsh11[0] * tsh11[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh23, out3);

        tsh24[0] = kSqrt0104 * ((tsh12[2] * tsh13[0] + tsh12[0] * tsh13[2]) + (tsh13[2] * tsh12[0] + tsh13[0] * tsh12[2]));
        tsh24[1] = tsh12[1] * tsh13[0] + tsh13[1] * tsh12[0];
        tsh24[2] = kSqrt0304 * (tsh12[1] * tsh13[1] + tsh13[1] * tsh12[1]);
        tsh24[3] = tsh12[1] * tsh13[2] + tsh13[1] * tsh12[2];
        tsh24[4] = kSqrt0104 * ((tsh12[2] * tsh13[2] - tsh12[0] * tsh13[0]) + (tsh13[2] * tsh12[2] - tsh13[0] * tsh12[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh24, out4);

        tsh25[0] = kSqrt0104 * ((tsh13[2] * tsh13[0] + tsh13[0] * tsh13[2]) - (tsh11[2] * tsh11[0] + tsh11[0] * tsh11[2]));
        tsh25[1] = (tsh13[1] * tsh13[0] - tsh11[1] * tsh11[0]);
        tsh25[2] = kSqrt0304 * (tsh13[1] * tsh13[1] - tsh11[1] * tsh11[1]);
        tsh25[3] = (tsh13[1] * tsh13[2] - tsh11[1] * tsh11[2]);
        tsh25[4] = kSqrt0104 * ((tsh13[2] * tsh13[2] - tsh13[0] * tsh13[0]) - (tsh11[2] * tsh11[2] - tsh11[0] * tsh11[0]));
        SplatBuffer.dot5(in1, in2, in3, in4, in5, tsh25, out5);
    };

    static parseHeader(buffer) {
        const headerArrayUint8 = new Uint8Array(buffer, 0, SplatBuffer.HeaderSizeBytes);
        const headerArrayUint16 = new Uint16Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 2);
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const headerArrayFloat32 = new Float32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const versionMajor = headerArrayUint8[0];
        const versionMinor = headerArrayUint8[1];
        const maxSectionCount = headerArrayUint32[1];
        const sectionCount = headerArrayUint32[2];
        const maxSplatCount = headerArrayUint32[3];
        const splatCount = headerArrayUint32[4];
        const compressionLevel = headerArrayUint16[10];
        const sceneCenter = new Vector3(headerArrayFloat32[6], headerArrayFloat32[7], headerArrayFloat32[8]);

        const minSphericalHarmonicsCoeff = headerArrayFloat32[9] || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        const maxSphericalHarmonicsCoeff = headerArrayFloat32[10] || DefaultSphericalHarmonics8BitCompressionHalfRange;

        return {
            versionMajor,
            versionMinor,
            maxSectionCount,
            sectionCount,
            maxSplatCount,
            splatCount,
            compressionLevel,
            sceneCenter,
            minSphericalHarmonicsCoeff,
            maxSphericalHarmonicsCoeff
        };
    }

    static writeHeaderCountsToBuffer(sectionCount, splatCount, buffer) {
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        headerArrayUint32[2] = sectionCount;
        headerArrayUint32[4] = splatCount;
    }

    static writeHeaderToBuffer(header, buffer) {
        const headerArrayUint8 = new Uint8Array(buffer, 0, SplatBuffer.HeaderSizeBytes);
        const headerArrayUint16 = new Uint16Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 2);
        const headerArrayUint32 = new Uint32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        const headerArrayFloat32 = new Float32Array(buffer, 0, SplatBuffer.HeaderSizeBytes / 4);
        headerArrayUint8[0] = header.versionMajor;
        headerArrayUint8[1] = header.versionMinor;
        headerArrayUint8[2] = 0; // unused for now
        headerArrayUint8[3] = 0; // unused for now
        headerArrayUint32[1] = header.maxSectionCount;
        headerArrayUint32[2] = header.sectionCount;
        headerArrayUint32[3] = header.maxSplatCount;
        headerArrayUint32[4] = header.splatCount;
        headerArrayUint16[10] = header.compressionLevel;
        headerArrayFloat32[6] = header.sceneCenter.x;
        headerArrayFloat32[7] = header.sceneCenter.y;
        headerArrayFloat32[8] = header.sceneCenter.z;
        headerArrayFloat32[9] = header.minSphericalHarmonicsCoeff || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        headerArrayFloat32[10] = header.maxSphericalHarmonicsCoeff || DefaultSphericalHarmonics8BitCompressionHalfRange;
    }

    static parseSectionHeaders(header, buffer, offset = 0, secLoadedCountsToMax) {
        const compressionLevel = header.compressionLevel;

        const maxSectionCount = header.maxSectionCount;
        const sectionHeaderArrayUint16 = new Uint16Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 2);
        const sectionHeaderArrayUint32 = new Uint32Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 4);
        const sectionHeaderArrayFloat32 = new Float32Array(buffer, offset, maxSectionCount * SplatBuffer.SectionHeaderSizeBytes / 4);

        const sectionHeaders = [];
        let sectionHeaderBase = 0;
        let sectionHeaderBaseUint16 = sectionHeaderBase / 2;
        let sectionHeaderBaseUint32 = sectionHeaderBase / 4;
        let sectionBase = SplatBuffer.HeaderSizeBytes + header.maxSectionCount * SplatBuffer.SectionHeaderSizeBytes;
        let splatCountOffset = 0;
        for (let i = 0; i < maxSectionCount; i++) {
            const maxSplatCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 1];
            const bucketSize = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 2];
            const bucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 3];
            const bucketBlockSize = sectionHeaderArrayFloat32[sectionHeaderBaseUint32 + 4];
            const halfBucketBlockSize = bucketBlockSize / 2.0;
            const bucketStorageSizeBytes = sectionHeaderArrayUint16[sectionHeaderBaseUint16 + 10];
            const compressionScaleRange = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 6] ||
                                          SplatBuffer.CompressionLevels[compressionLevel].ScaleRange;
            const fullBucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 8];
            const partiallyFilledBucketCount = sectionHeaderArrayUint32[sectionHeaderBaseUint32 + 9];
            const bucketsMetaDataSizeBytes = partiallyFilledBucketCount * 4;
            const bucketsStorageSizeBytes = bucketStorageSizeBytes * bucketCount + bucketsMetaDataSizeBytes;

            const sphericalHarmonicsDegree = sectionHeaderArrayUint16[sectionHeaderBaseUint16 + 20];
            const { bytesPerSplat } = SplatBuffer.calculateComponentStorage(compressionLevel, sphericalHarmonicsDegree);

            const splatDataStorageSizeBytes = bytesPerSplat * maxSplatCount;
            const storageSizeBytes = splatDataStorageSizeBytes + bucketsStorageSizeBytes;
            const sectionHeader = {
                bytesPerSplat: bytesPerSplat,
                splatCountOffset: splatCountOffset,
                splatCount: secLoadedCountsToMax ? maxSplatCount : 0,
                maxSplatCount: maxSplatCount,
                bucketSize: bucketSize,
                bucketCount: bucketCount,
                bucketBlockSize: bucketBlockSize,
                halfBucketBlockSize: halfBucketBlockSize,
                bucketStorageSizeBytes: bucketStorageSizeBytes,
                bucketsStorageSizeBytes: bucketsStorageSizeBytes,
                splatDataStorageSizeBytes: splatDataStorageSizeBytes,
                storageSizeBytes: storageSizeBytes,
                compressionScaleRange: compressionScaleRange,
                compressionScaleFactor: halfBucketBlockSize / compressionScaleRange,
                base: sectionBase,
                bucketsBase: sectionBase + bucketsMetaDataSizeBytes,
                dataBase: sectionBase + bucketsStorageSizeBytes,
                fullBucketCount: fullBucketCount,
                partiallyFilledBucketCount: partiallyFilledBucketCount,
                sphericalHarmonicsDegree: sphericalHarmonicsDegree
            };
            sectionHeaders[i] = sectionHeader;
            sectionBase += storageSizeBytes;
            sectionHeaderBase += SplatBuffer.SectionHeaderSizeBytes;
            sectionHeaderBaseUint16 = sectionHeaderBase / 2;
            sectionHeaderBaseUint32 = sectionHeaderBase / 4;
            splatCountOffset += maxSplatCount;
        }

        return sectionHeaders;
    }


    static writeSectionHeaderToBuffer(sectionHeader, compressionLevel, buffer, offset = 0) {
        const sectionHeadeArrayUint16 = new Uint16Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 2);
        const sectionHeadeArrayUint32 = new Uint32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);
        const sectionHeadeArrayFloat32 = new Float32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);

        sectionHeadeArrayUint32[0] = sectionHeader.splatCount;
        sectionHeadeArrayUint32[1] = sectionHeader.maxSplatCount;
        sectionHeadeArrayUint32[2] = compressionLevel >= 1 ? sectionHeader.bucketSize : 0;
        sectionHeadeArrayUint32[3] = compressionLevel >= 1 ? sectionHeader.bucketCount : 0;
        sectionHeadeArrayFloat32[4] = compressionLevel >= 1 ? sectionHeader.bucketBlockSize : 0.0;
        sectionHeadeArrayUint16[10] = compressionLevel >= 1 ? SplatBuffer.BucketStorageSizeBytes : 0;
        sectionHeadeArrayUint32[6] = compressionLevel >= 1 ? sectionHeader.compressionScaleRange : 0;
        sectionHeadeArrayUint32[7] = sectionHeader.storageSizeBytes;
        sectionHeadeArrayUint32[8] = compressionLevel >= 1 ? sectionHeader.fullBucketCount : 0;
        sectionHeadeArrayUint32[9] = compressionLevel >= 1 ? sectionHeader.partiallyFilledBucketCount : 0;
        sectionHeadeArrayUint16[20] = sectionHeader.sphericalHarmonicsDegree;

    }

    static writeSectionHeaderSplatCountToBuffer(splatCount, buffer, offset = 0) {
        const sectionHeadeArrayUint32 = new Uint32Array(buffer, offset, SplatBuffer.SectionHeaderSizeBytes / 4);
        sectionHeadeArrayUint32[0] = splatCount;
    }

    constructFromBuffer(bufferData, secLoadedCountsToMax) {
        this.bufferData = bufferData;

        this.globalSplatIndexToLocalSplatIndexMap = [];
        this.globalSplatIndexToSectionMap = [];

        const header = SplatBuffer.parseHeader(this.bufferData);
        this.versionMajor = header.versionMajor;
        this.versionMinor = header.versionMinor;
        this.maxSectionCount = header.maxSectionCount;
        this.sectionCount = secLoadedCountsToMax ? header.maxSectionCount : 0;
        this.maxSplatCount = header.maxSplatCount;
        this.splatCount = secLoadedCountsToMax ? header.maxSplatCount : 0;
        this.compressionLevel = header.compressionLevel;
        this.sceneCenter = new Vector3().copy(header.sceneCenter);
        this.minSphericalHarmonicsCoeff = header.minSphericalHarmonicsCoeff;
        this.maxSphericalHarmonicsCoeff = header.maxSphericalHarmonicsCoeff;

        this.sections = SplatBuffer.parseSectionHeaders(header, this.bufferData, SplatBuffer.HeaderSizeBytes, secLoadedCountsToMax);

        this.linkBufferArrays();
        this.buildMaps();
    }

    static calculateComponentStorage(compressionLevel, sphericalHarmonicsDegree) {
        const bytesPerCenter = SplatBuffer.CompressionLevels[compressionLevel].BytesPerCenter;
        const bytesPerScale = SplatBuffer.CompressionLevels[compressionLevel].BytesPerScale;
        const bytesPerRotation = SplatBuffer.CompressionLevels[compressionLevel].BytesPerRotation;
        const bytesPerColor = SplatBuffer.CompressionLevels[compressionLevel].BytesPerColor;
        const sphericalHarmonicsComponentsPerSplat = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
        const sphericalHarmonicsBytesPerSplat = SplatBuffer.CompressionLevels[compressionLevel].BytesPerSphericalHarmonicsComponent *
                                                sphericalHarmonicsComponentsPerSplat;
        const bytesPerSplat = bytesPerCenter + bytesPerScale + bytesPerRotation +
                              bytesPerColor + sphericalHarmonicsBytesPerSplat;
        return {
            bytesPerCenter,
            bytesPerScale,
            bytesPerRotation,
            bytesPerColor,
            sphericalHarmonicsComponentsPerSplat,
            sphericalHarmonicsBytesPerSplat,
            bytesPerSplat
        };
    }

    linkBufferArrays() {
        for (let i = 0; i < this.maxSectionCount; i++) {
            const section = this.sections[i];
            section.bucketArray = new Float32Array(this.bufferData, section.bucketsBase,
                                                   section.bucketCount * SplatBuffer.BucketStorageSizeFloats);
            if (section.partiallyFilledBucketCount > 0) {
                section.partiallyFilledBucketLengths = new Uint32Array(this.bufferData, section.base,
                                                                       section.partiallyFilledBucketCount);
            }
        }
    }

    buildMaps() {
        let cumulativeSplatCount = 0;
        for (let i = 0; i < this.maxSectionCount; i++) {
            const section = this.sections[i];
            for (let j = 0; j < section.maxSplatCount; j++) {
                const globalSplatIndex = cumulativeSplatCount + j;
                this.globalSplatIndexToLocalSplatIndexMap[globalSplatIndex] = j;
                this.globalSplatIndexToSectionMap[globalSplatIndex] = i;
            }
            cumulativeSplatCount += section.maxSplatCount;
        }
    }

    updateLoadedCounts(newSectionCount, newSplatCount) {
        SplatBuffer.writeHeaderCountsToBuffer(newSectionCount, newSplatCount, this.bufferData);
        this.sectionCount = newSectionCount;
        this.splatCount = newSplatCount;
    }

    updateSectionLoadedCounts(sectionIndex, newSplatCount) {
        const sectionHeaderOffset = SplatBuffer.HeaderSizeBytes + SplatBuffer.SectionHeaderSizeBytes * sectionIndex;
        SplatBuffer.writeSectionHeaderSplatCountToBuffer(newSplatCount, this.bufferData, sectionHeaderOffset);
        this.sections[sectionIndex].splatCount = newSplatCount;
    }

    static writeSplatDataToSectionBuffer = function() {

        const tempCenterBuffer = new ArrayBuffer(12);
        const tempScaleBuffer = new ArrayBuffer(12);
        const tempRotationBuffer = new ArrayBuffer(16);
        const tempColorBuffer = new ArrayBuffer(4);
        const tempSHBuffer = new ArrayBuffer(256);
        const tempRot = new Quaternion();
        const tempScale = new Vector3();
        const bucketCenterDelta = new Vector3();

        const {
            X: OFFSET_X, Y: OFFSET_Y, Z: OFFSET_Z,
            SCALE0: OFFSET_SCALE0, SCALE1: OFFSET_SCALE1, SCALE2: OFFSET_SCALE2,
            ROTATION0: OFFSET_ROT0, ROTATION1: OFFSET_ROT1, ROTATION2: OFFSET_ROT2, ROTATION3: OFFSET_ROT3,
            FDC0: OFFSET_FDC0, FDC1: OFFSET_FDC1, FDC2: OFFSET_FDC2, OPACITY: OFFSET_OPACITY,
            FRC0: OFFSET_FRC0, FRC9: OFFSET_FRC9,
        } = UncompressedSplatArray.OFFSET;

        const compressPositionOffset = (v, compressionScaleFactor, compressionScaleRange) => {
            const doubleCompressionScaleRange = compressionScaleRange * 2 + 1;
            v = Math.round(v * compressionScaleFactor) + compressionScaleRange;
            return clamp(v, 0, doubleCompressionScaleRange);
        };

        return function(targetSplat, sectionBuffer, bufferOffset, compressionLevel, sphericalHarmonicsDegree,
                        bucketCenter, compressionScaleFactor, compressionScaleRange,
                        minSphericalHarmonicsCoeff = -DefaultSphericalHarmonics8BitCompressionHalfRange,
                        maxSphericalHarmonicsCoeff = DefaultSphericalHarmonics8BitCompressionHalfRange) {

            const sphericalHarmonicsComponentsPerSplat = getSphericalHarmonicsComponentCountForDegree(sphericalHarmonicsDegree);
            const bytesPerCenter = SplatBuffer.CompressionLevels[compressionLevel].BytesPerCenter;
            const bytesPerScale = SplatBuffer.CompressionLevels[compressionLevel].BytesPerScale;
            const bytesPerRotation = SplatBuffer.CompressionLevels[compressionLevel].BytesPerRotation;
            const bytesPerColor = SplatBuffer.CompressionLevels[compressionLevel].BytesPerColor;

            const centerBase = bufferOffset;
            const scaleBase = centerBase + bytesPerCenter;
            const rotationBase = scaleBase + bytesPerScale;
            const colorBase = rotationBase + bytesPerRotation;
            const sphericalHarmonicsBase = colorBase + bytesPerColor;

            if (targetSplat[OFFSET_ROT0] !== undefined) {
                tempRot.set(targetSplat[OFFSET_ROT0], targetSplat[OFFSET_ROT1], targetSplat[OFFSET_ROT2], targetSplat[OFFSET_ROT3]);
                tempRot.normalize();
            } else {
                tempRot.set(1.0, 0.0, 0.0, 0.0);
            }

            if (targetSplat[OFFSET_SCALE0] !== undefined) {
                tempScale.set(targetSplat[OFFSET_SCALE0] || 0,
                              targetSplat[OFFSET_SCALE1] || 0,
                              targetSplat[OFFSET_SCALE2] || 0);
            } else {
                tempScale.set(0, 0, 0);
            }

            if (compressionLevel === 0) {
                const center = new Float32Array(sectionBuffer, centerBase, SplatBuffer.CenterComponentCount);
                const rot = new Float32Array(sectionBuffer, rotationBase, SplatBuffer.RotationComponentCount);
                const scale = new Float32Array(sectionBuffer, scaleBase, SplatBuffer.ScaleComponentCount);

                rot.set([tempRot.x, tempRot.y, tempRot.z, tempRot.w]);
                scale.set([tempScale.x, tempScale.y, tempScale.z]);
                center.set([targetSplat[OFFSET_X], targetSplat[OFFSET_Y], targetSplat[OFFSET_Z]]);

                if (sphericalHarmonicsDegree > 0) {
                    const shOut = new Float32Array(sectionBuffer, sphericalHarmonicsBase, sphericalHarmonicsComponentsPerSplat);
                    if (sphericalHarmonicsDegree >= 1) {
                            for (let s = 0; s < 9; s++) shOut[s] = targetSplat[OFFSET_FRC0 + s] || 0;
                            if (sphericalHarmonicsDegree >= 2) {
                                for (let s = 0; s < 15; s++) shOut[s + 9] = targetSplat[OFFSET_FRC9 + s] || 0;
                            }
                    }
                }
            } else {
                const center = new Uint16Array(tempCenterBuffer, 0, SplatBuffer.CenterComponentCount);
                const rot = new Uint16Array(tempRotationBuffer, 0, SplatBuffer.RotationComponentCount);
                const scale = new Uint16Array(tempScaleBuffer, 0, SplatBuffer.ScaleComponentCount);

                rot.set([toHalfFloat(tempRot.x), toHalfFloat(tempRot.y), toHalfFloat(tempRot.z), toHalfFloat(tempRot.w)]);
                scale.set([toHalfFloat(tempScale.x), toHalfFloat(tempScale.y), toHalfFloat(tempScale.z)]);

                bucketCenterDelta.set(targetSplat[OFFSET_X], targetSplat[OFFSET_Y], targetSplat[OFFSET_Z]).sub(bucketCenter);
                bucketCenterDelta.x = compressPositionOffset(bucketCenterDelta.x, compressionScaleFactor, compressionScaleRange);
                bucketCenterDelta.y = compressPositionOffset(bucketCenterDelta.y, compressionScaleFactor, compressionScaleRange);
                bucketCenterDelta.z = compressPositionOffset(bucketCenterDelta.z, compressionScaleFactor, compressionScaleRange);
                center.set([bucketCenterDelta.x, bucketCenterDelta.y, bucketCenterDelta.z]);

                if (sphericalHarmonicsDegree > 0) {
                    const SHArrayType = compressionLevel === 1 ? Uint16Array : Uint8Array;
                    const bytesPerSHComponent = compressionLevel === 1 ? 2 : 1;
                    const shOut = new SHArrayType(tempSHBuffer, 0, sphericalHarmonicsComponentsPerSplat);
                    if (sphericalHarmonicsDegree >= 1) {
                        for (let s = 0; s < 9; s++) {
                            const srcVal = targetSplat[OFFSET_FRC0 + s] || 0;
                            shOut[s] = compressionLevel === 1 ? toHalfFloat(srcVal) :
                                       toUint8(srcVal, minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                        }
                        const degree1ByteCount = 9 * bytesPerSHComponent;
                        copyBetweenBuffers(shOut.buffer, 0, sectionBuffer, sphericalHarmonicsBase, degree1ByteCount);
                        if (sphericalHarmonicsDegree >= 2) {
                            for (let s = 0; s < 15; s++) {
                                const srcVal = targetSplat[OFFSET_FRC9 + s] || 0;
                                shOut[s + 9] = compressionLevel === 1 ? toHalfFloat(srcVal) :
                                               toUint8(srcVal, minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                            }
                            copyBetweenBuffers(shOut.buffer, degree1ByteCount, sectionBuffer,
                                               sphericalHarmonicsBase + degree1ByteCount, 15 * bytesPerSHComponent);
                        }
                    }
                }

                copyBetweenBuffers(center.buffer, 0, sectionBuffer, centerBase, 6);
                copyBetweenBuffers(scale.buffer, 0, sectionBuffer, scaleBase, 6);
                copyBetweenBuffers(rot.buffer, 0, sectionBuffer, rotationBase, 8);
            }

            const rgba = new Uint8ClampedArray(tempColorBuffer, 0, 4);
            rgba.set([targetSplat[OFFSET_FDC0] || 0, targetSplat[OFFSET_FDC1] || 0, targetSplat[OFFSET_FDC2] || 0]);
            rgba[3] = targetSplat[OFFSET_OPACITY] || 0;

            copyBetweenBuffers(rgba.buffer, 0, sectionBuffer, colorBase, 4);
        };

    }();

    static generateFromUncompressedSplatArrays(splatArrays, minimumAlpha, compressionLevel,
                                               sceneCenter, blockSize, bucketSize, options = []) {

        let shDegree = 0;
        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            shDegree = Math.max(splatArray.sphericalHarmonicsDegree, shDegree);
        }

        let minSphericalHarmonicsCoeff;
        let maxSphericalHarmonicsCoeff;

        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            for (let i = 0; i < splatArray.splats.length; i++) {
                const splat = splatArray.splats[i];
                for (let sc = UncompressedSplatArray.OFFSET.FRC0; sc < UncompressedSplatArray.OFFSET.FRC23 && sc < splat.length; sc++) {
                    if (!minSphericalHarmonicsCoeff || splat[sc] < minSphericalHarmonicsCoeff) {
                        minSphericalHarmonicsCoeff = splat[sc];
                    }
                    if (!maxSphericalHarmonicsCoeff || splat[sc] > maxSphericalHarmonicsCoeff) {
                        maxSphericalHarmonicsCoeff = splat[sc];
                    }
                }
            }
        }

        minSphericalHarmonicsCoeff = minSphericalHarmonicsCoeff || -DefaultSphericalHarmonics8BitCompressionHalfRange;
        maxSphericalHarmonicsCoeff = maxSphericalHarmonicsCoeff || DefaultSphericalHarmonics8BitCompressionHalfRange;

        const { bytesPerSplat } = SplatBuffer.calculateComponentStorage(compressionLevel, shDegree);
        const compressionScaleRange = SplatBuffer.CompressionLevels[compressionLevel].ScaleRange;

        const sectionBuffers = [];
        const sectionHeaderBuffers = [];
        let totalSplatCount = 0;

        for (let sa = 0; sa < splatArrays.length; sa ++) {
            const splatArray = splatArrays[sa];
            const validSplats = new UncompressedSplatArray(shDegree);
            for (let i = 0; i < splatArray.splatCount; i++) {
                const targetSplat = splatArray.splats[i];
                if ((targetSplat[UncompressedSplatArray.OFFSET.OPACITY] || 0) >= minimumAlpha) {
                    validSplats.addSplat(targetSplat);
                }
            }

            const sectionOptions = options[sa] || {};
            const sectionBlockSize = (sectionOptions.blockSizeFactor || 1) * (blockSize || SplatBuffer.BucketBlockSize);
            const sectionBucketSize = Math.ceil((sectionOptions.bucketSizeFactor || 1) * (bucketSize || SplatBuffer.BucketSize));

            const bucketInfo = SplatBuffer.computeBucketsForUncompressedSplatArray(validSplats, sectionBlockSize, sectionBucketSize);
            const fullBucketCount = bucketInfo.fullBuckets.length;
            const partiallyFullBucketLengths = bucketInfo.partiallyFullBuckets.map((bucket) => bucket.splats.length);
            const partiallyFilledBucketCount = partiallyFullBucketLengths.length;
            const buckets = [...bucketInfo.fullBuckets, ...bucketInfo.partiallyFullBuckets];

            const sectionDataSizeBytes = validSplats.splats.length * bytesPerSplat;
            const bucketMetaDataSizeBytes = partiallyFilledBucketCount * 4;
            const bucketDataBytes = compressionLevel >= 1 ? buckets.length *
                                                            SplatBuffer.BucketStorageSizeBytes + bucketMetaDataSizeBytes : 0;
            const sectionSizeBytes = sectionDataSizeBytes + bucketDataBytes;
            const sectionBuffer = new ArrayBuffer(sectionSizeBytes);

            const compressionScaleFactor = compressionScaleRange / (sectionBlockSize * 0.5);
            const bucketCenter = new Vector3();

            let outSplatCount = 0;
            for (let b = 0; b < buckets.length; b++) {
                const bucket = buckets[b];
                bucketCenter.fromArray(bucket.center);
                for (let i = 0; i < bucket.splats.length; i++) {
                    let row = bucket.splats[i];
                    const targetSplat = validSplats.splats[row];
                    const bufferOffset = bucketDataBytes + outSplatCount * bytesPerSplat;
                    SplatBuffer.writeSplatDataToSectionBuffer(targetSplat, sectionBuffer, bufferOffset, compressionLevel, shDegree,
                                                              bucketCenter, compressionScaleFactor, compressionScaleRange,
                                                              minSphericalHarmonicsCoeff, maxSphericalHarmonicsCoeff);
                    outSplatCount++;
                }
            }
            totalSplatCount += outSplatCount;

            if (compressionLevel >= 1) {
                const bucketMetaDataArray = new Uint32Array(sectionBuffer, 0, partiallyFullBucketLengths.length * 4);
                for (let pfb = 0; pfb < partiallyFullBucketLengths.length; pfb ++) {
                    bucketMetaDataArray[pfb] = partiallyFullBucketLengths[pfb];
                }
                const bucketArray = new Float32Array(sectionBuffer, bucketMetaDataSizeBytes,
                                                     buckets.length * SplatBuffer.BucketStorageSizeFloats);
                for (let b = 0; b < buckets.length; b++) {
                    const bucket = buckets[b];
                    const base = b * 3;
                    bucketArray[base] = bucket.center[0];
                    bucketArray[base + 1] = bucket.center[1];
                    bucketArray[base + 2] = bucket.center[2];
                }
            }
            sectionBuffers.push(sectionBuffer);

            const sectionHeaderBuffer = new ArrayBuffer(SplatBuffer.SectionHeaderSizeBytes);
            SplatBuffer.writeSectionHeaderToBuffer({
                maxSplatCount: outSplatCount,
                splatCount: outSplatCount,
                bucketSize: sectionBucketSize,
                bucketCount: buckets.length,
                bucketBlockSize: sectionBlockSize,
                compressionScaleRange: compressionScaleRange,
                storageSizeBytes: sectionSizeBytes,
                fullBucketCount: fullBucketCount,
                partiallyFilledBucketCount: partiallyFilledBucketCount,
                sphericalHarmonicsDegree: shDegree
            }, compressionLevel, sectionHeaderBuffer, 0);
            sectionHeaderBuffers.push(sectionHeaderBuffer);

        }

        let sectionsCumulativeSizeBytes = 0;
        for (let sectionBuffer of sectionBuffers) sectionsCumulativeSizeBytes += sectionBuffer.byteLength;
        const unifiedBufferSize = SplatBuffer.HeaderSizeBytes +
                                  SplatBuffer.SectionHeaderSizeBytes * sectionBuffers.length + sectionsCumulativeSizeBytes;
        const unifiedBuffer = new ArrayBuffer(unifiedBufferSize);

        SplatBuffer.writeHeaderToBuffer({
            versionMajor: 0,
            versionMinor: 1,
            maxSectionCount: sectionBuffers.length,
            sectionCount: sectionBuffers.length,
            maxSplatCount: totalSplatCount,
            splatCount: totalSplatCount,
            compressionLevel: compressionLevel,
            sceneCenter: sceneCenter,
            minSphericalHarmonicsCoeff: minSphericalHarmonicsCoeff,
            maxSphericalHarmonicsCoeff: maxSphericalHarmonicsCoeff
        }, unifiedBuffer);

        let currentUnifiedBase = SplatBuffer.HeaderSizeBytes;
        for (let sectionHeaderBuffer of sectionHeaderBuffers) {
            new Uint8Array(unifiedBuffer, currentUnifiedBase, SplatBuffer.SectionHeaderSizeBytes).set(new Uint8Array(sectionHeaderBuffer));
            currentUnifiedBase += SplatBuffer.SectionHeaderSizeBytes;
        }

        for (let sectionBuffer of sectionBuffers) {
            new Uint8Array(unifiedBuffer, currentUnifiedBase, sectionBuffer.byteLength).set(new Uint8Array(sectionBuffer));
            currentUnifiedBase += sectionBuffer.byteLength;
        }

        const splatBuffer = new SplatBuffer(unifiedBuffer);
        return splatBuffer;
    }

    static computeBucketsForUncompressedSplatArray(splatArray, blockSize, bucketSize) {
        let splatCount = splatArray.splatCount;
        const halfBlockSize = blockSize / 2.0;

        const min = new Vector3();
        const max = new Vector3();

        for (let i = 0; i < splatCount; i++) {
            const targetSplat = splatArray.splats[i];
            const center = [targetSplat[UncompressedSplatArray.OFFSET.X],
                            targetSplat[UncompressedSplatArray.OFFSET.Y],
                            targetSplat[UncompressedSplatArray.OFFSET.Z]];
            if (i === 0 || center[0] < min.x) min.x = center[0];
            if (i === 0 || center[0] > max.x) max.x = center[0];
            if (i === 0 || center[1] < min.y) min.y = center[1];
            if (i === 0 || center[1] > max.y) max.y = center[1];
            if (i === 0 || center[2] < min.z) min.z = center[2];
            if (i === 0 || center[2] > max.z) max.z = center[2];
        }

        const dimensions = new Vector3().copy(max).sub(min);
        const yBlocks = Math.ceil(dimensions.y / blockSize);
        const zBlocks = Math.ceil(dimensions.z / blockSize);

        const blockCenter = new Vector3();
        const fullBuckets = [];
        const partiallyFullBuckets = {};

        for (let i = 0; i < splatCount; i++) {
            const targetSplat = splatArray.splats[i];
            const center = [targetSplat[UncompressedSplatArray.OFFSET.X],
                            targetSplat[UncompressedSplatArray.OFFSET.Y],
                            targetSplat[UncompressedSplatArray.OFFSET.Z]];
            const xBlock = Math.floor((center[0] - min.x) / blockSize);
            const yBlock = Math.floor((center[1] - min.y) / blockSize);
            const zBlock = Math.floor((center[2] - min.z) / blockSize);

            blockCenter.x = xBlock * blockSize + min.x + halfBlockSize;
            blockCenter.y = yBlock * blockSize + min.y + halfBlockSize;
            blockCenter.z = zBlock * blockSize + min.z + halfBlockSize;

            const bucketId = xBlock * (yBlocks * zBlocks) + yBlock * zBlocks + zBlock;
            let bucket = partiallyFullBuckets[bucketId];
            if (!bucket) {
                partiallyFullBuckets[bucketId] = bucket = {
                    'splats': [],
                    'center': blockCenter.toArray()
                };
            }

            bucket.splats.push(i);
            if (bucket.splats.length >= bucketSize) {
                fullBuckets.push(bucket);
                partiallyFullBuckets[bucketId] = null;
            }
        }

        const partiallyFullBucketArray = [];
        for (let bucketId in partiallyFullBuckets) {
            if (Object.hasOwn(partiallyFullBuckets, bucketId)) {
                const bucket = partiallyFullBuckets[bucketId];
                if (bucket) {
                    partiallyFullBucketArray.push(bucket);
                }
            }
        }

        return {
            'fullBuckets': fullBuckets,
            'partiallyFullBuckets': partiallyFullBucketArray,
        };
    }

}

/**
 * SplatPartitioner
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class SplatPartitioner {

    constructor(sectionCount, sectionFilters, groupingParameters, partitionGenerator) {
        this.sectionCount = sectionCount;
        this.sectionFilters = sectionFilters;
        this.groupingParameters = groupingParameters;
        this.partitionGenerator = partitionGenerator;
    }

    partitionUncompressedSplatArray(splatArray) {
        let groupingParameters;
        let sectionCount;
        let sectionFilters;
        if (this.partitionGenerator) {
            const results = this.partitionGenerator(splatArray);
            groupingParameters = results.groupingParameters;
            sectionCount = results.sectionCount;
            sectionFilters = results.sectionFilters;
        } else {
            groupingParameters = this.groupingParameters;
            sectionCount = this.sectionCount;
            sectionFilters = this.sectionFilters;
        }

        const newArrays = [];
        for (let s = 0; s < sectionCount; s++) {
            const sectionSplats = new UncompressedSplatArray(splatArray.sphericalHarmonicsDegree);
            const sectionFilter = sectionFilters[s];
            for (let i = 0; i < splatArray.splatCount; i++) {
                if (sectionFilter(i)) {
                    sectionSplats.addSplat(splatArray.splats[i]);
                }
            }
            newArrays.push(sectionSplats);
        }
        return {
            splatArrays: newArrays,
            parameters: groupingParameters
        };
    }

    static getStandardPartitioner(partitionSize = 0, sceneCenter = new Vector3(),
                                  blockSize = SplatBuffer.BucketBlockSize, bucketSize = SplatBuffer.BucketSize) {

        const partitionGenerator = (splatArray) => {

            const OFFSET_X = UncompressedSplatArray.OFFSET.X;
            const OFFSET_Y = UncompressedSplatArray.OFFSET.Y;
            const OFFSET_Z = UncompressedSplatArray.OFFSET.Z;

            if (partitionSize <= 0) partitionSize = splatArray.splatCount;

            const center = new Vector3();
            const clampDistance = 0.5;
            const clampPoint = (point) => {
                point.x = Math.floor(point.x / clampDistance) * clampDistance;
                point.y = Math.floor(point.y / clampDistance) * clampDistance;
                point.z = Math.floor(point.z / clampDistance) * clampDistance;
            };
            splatArray.splats.forEach((splat) => {
                center.set(splat[OFFSET_X], splat[OFFSET_Y], splat[OFFSET_Z]).sub(sceneCenter);
                clampPoint(center);
                splat.centerDist = center.lengthSq();
            });
            splatArray.splats.sort((a, b) => {
                let centerADist = a.centerDist;
                let centerBDist = b.centerDist;
                if (centerADist > centerBDist) return 1;
                else return -1;
            });

            const sectionFilters = [];
            const groupingParameters = [];
            partitionSize = Math.min(splatArray.splatCount, partitionSize);
            const patitionCount = Math.ceil(splatArray.splatCount / partitionSize);
            let currentStartSplat = 0;
            for (let i = 0; i < patitionCount; i ++) {
                let startSplat = currentStartSplat;
                sectionFilters.push((splatIndex) => {
                    return splatIndex >= startSplat && splatIndex < startSplat + partitionSize;
                });
                groupingParameters.push({
                    'blocksSize': blockSize,
                    'bucketSize': bucketSize,
                });
                currentStartSplat += partitionSize;
            }
            return {
                'sectionCount': sectionFilters.length,
                sectionFilters,
                groupingParameters
            };
        };
        return new SplatPartitioner(undefined, undefined, undefined, partitionGenerator);
    }
}

/**
 * SplatBufferGenerator
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class SplatBufferGenerator {

    constructor(splatPartitioner, alphaRemovalThreshold, compressionLevel, sectionSize, sceneCenter, blockSize, bucketSize) {
        this.splatPartitioner = splatPartitioner;
        this.alphaRemovalThreshold = alphaRemovalThreshold;
        this.compressionLevel = compressionLevel;
        this.sectionSize = sectionSize;
        this.sceneCenter = sceneCenter ? new Vector3().copy(sceneCenter) : undefined;
        this.blockSize = blockSize;
        this.bucketSize = bucketSize;
    }

    generateFromUncompressedSplatArray(splatArray) {
        const partitionResults = this.splatPartitioner.partitionUncompressedSplatArray(splatArray);
        return SplatBuffer.generateFromUncompressedSplatArrays(partitionResults.splatArrays,
                                                               this.alphaRemovalThreshold, this.compressionLevel,
                                                               this.sceneCenter, this.blockSize, this.bucketSize,
                                                               partitionResults.parameters);
    }

    static getStandardGenerator(alphaRemovalThreshold = 1, compressionLevel = 1, sectionSize = 0, sceneCenter = new Vector3(),
                                blockSize = SplatBuffer.BucketBlockSize, bucketSize = SplatBuffer.BucketSize) {
        const splatPartitioner = SplatPartitioner.getStandardPartitioner(sectionSize, sceneCenter, blockSize, bucketSize);
        return new SplatBufferGenerator(splatPartitioner, alphaRemovalThreshold, compressionLevel,
                                        sectionSize, sceneCenter, blockSize, bucketSize);
    }
}

/**
 * PlyParserUtils and related constants
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar - only supports INRIAV1 format.
 */

// Ply format types (simplified - FLAME uses INRIAV1)
const PlyFormat = {
    'INRIAV1': 0
};

// Field size IDs
const FieldSizeIdDouble = 0;
const FieldSizeIdInt = 1;
const FieldSizeIdUInt = 2;
const FieldSizeIdFloat = 3;
const FieldSizeIdShort = 4;
const FieldSizeIdUShort = 5;
const FieldSizeIdUChar = 6;

const FieldSizeStringMap = {
    'double': FieldSizeIdDouble,
    'int': FieldSizeIdInt,
    'uint': FieldSizeIdUInt,
    'float': FieldSizeIdFloat,
    'short': FieldSizeIdShort,
    'ushort': FieldSizeIdUShort,
    'uchar': FieldSizeIdUChar,
};

const FieldSize = {
    [FieldSizeIdDouble]: 8,
    [FieldSizeIdInt]: 4,
    [FieldSizeIdUInt]: 4,
    [FieldSizeIdFloat]: 4,
    [FieldSizeIdShort]: 2,
    [FieldSizeIdUShort]: 2,
    [FieldSizeIdUChar]: 1,
};

class PlyParserUtils {

    static HeaderEndToken = 'end_header';

    constructor() {
    }

    decodeSectionHeader(headerLines, fieldNameIdMap, headerStartLine = 0) {

        const extractedLines = [];

        let processingSection = false;
        let headerEndLine = -1;
        let vertexCount = 0;
        let endOfHeader = false;
        let sectionName = null;

        const fieldIds = [];
        const fieldTypes = [];
        const allFieldNames = [];
        const fieldTypesByName = {};

        for (let i = headerStartLine; i < headerLines.length; i++) {
            const line = headerLines[i].trim();
            if (line.startsWith('element')) {
                if (processingSection) {
                    headerEndLine--;
                    break;
                } else {
                    processingSection = true;
                    headerStartLine = i;
                    headerEndLine = i;
                    const lineComponents = line.split(' ');
                    let validComponents = 0;
                    for (let lineComponent of lineComponents) {
                        const trimmedComponent = lineComponent.trim();
                        if (trimmedComponent.length > 0) {
                            validComponents++;
                            if (validComponents === 2) {
                                sectionName = trimmedComponent;
                            } else if (validComponents === 3) {
                                vertexCount = parseInt(trimmedComponent);
                            }
                        }
                    }
                }
            } else if (line.startsWith('property')) {
                const fieldMatch = line.match(/(\w+)\s+(\w+)\s+(\w+)/);
                if (fieldMatch) {
                    const fieldTypeStr = fieldMatch[2];
                    const fieldName = fieldMatch[3];
                    allFieldNames.push(fieldName);
                    const fieldId = fieldNameIdMap[fieldName];
                    fieldTypesByName[fieldName] = fieldTypeStr;
                    const fieldType = FieldSizeStringMap[fieldTypeStr];
                    if (fieldId !== undefined) {
                        fieldIds.push(fieldId);
                        fieldTypes[fieldId] = fieldType;
                    }
                }
            }
            if (line === PlyParserUtils.HeaderEndToken) {
                endOfHeader = true;
                break;
            }
            if (processingSection) {
                extractedLines.push(line);
                headerEndLine++;
            }
        }

        const fieldOffsets = [];
        let bytesPerVertex = 0;
        for (let fieldName of allFieldNames) {
            const fieldType = fieldTypesByName[fieldName];
            if (Object.hasOwn(fieldTypesByName, fieldName)) {
                const fieldId = fieldNameIdMap[fieldName];
                if (fieldId !== undefined) {
                    fieldOffsets[fieldId] = bytesPerVertex;
                }
            }
            bytesPerVertex += FieldSize[FieldSizeStringMap[fieldType]];
        }

        const sphericalHarmonics = this.decodeSphericalHarmonicsFromSectionHeader(allFieldNames, fieldNameIdMap);

        return {
            'headerLines': extractedLines,
            'headerStartLine': headerStartLine,
            'headerEndLine': headerEndLine,
            'fieldTypes': fieldTypes,
            'fieldIds': fieldIds,
            'fieldOffsets': fieldOffsets,
            'bytesPerVertex': bytesPerVertex,
            'vertexCount': vertexCount,
            'dataSizeBytes': bytesPerVertex * vertexCount,
            'endOfHeader': endOfHeader,
            'sectionName': sectionName,
            'sphericalHarmonicsDegree': sphericalHarmonics.degree,
            'sphericalHarmonicsCoefficientsPerChannel': sphericalHarmonics.coefficientsPerChannel,
            'sphericalHarmonicsDegree1Fields': sphericalHarmonics.degree1Fields,
            'sphericalHarmonicsDegree2Fields': sphericalHarmonics.degree2Fields
        };
    }

    decodeSphericalHarmonicsFromSectionHeader(fieldNames, fieldNameIdMap) {
        let sphericalHarmonicsFieldCount = 0;
        let coefficientsPerChannel = 0;
        for (let fieldName of fieldNames) {
            if (fieldName.startsWith('f_rest')) sphericalHarmonicsFieldCount++;
        }
        coefficientsPerChannel = sphericalHarmonicsFieldCount / 3;
        let degree = 0;
        if (coefficientsPerChannel >= 3) degree = 1;
        if (coefficientsPerChannel >= 8) degree = 2;

        let degree1Fields = [];
        let degree2Fields = [];

        for (let rgb = 0; rgb < 3; rgb++) {
            if (degree >= 1) {
                for (let i = 0; i < 3; i++) {
                    degree1Fields.push(fieldNameIdMap['f_rest_' + (i + coefficientsPerChannel * rgb)]);
                }
            }
            if (degree >= 2) {
                for (let i = 0; i < 5; i++) {
                    degree2Fields.push(fieldNameIdMap['f_rest_' + (i + coefficientsPerChannel * rgb + 3)]);
                }
            }
        }

        return {
            'degree': degree,
            'coefficientsPerChannel': coefficientsPerChannel,
            'degree1Fields': degree1Fields,
            'degree2Fields': degree2Fields
        };
    }

    static getHeaderSectionNames(headerLines) {
        const sectionNames = [];
        for (let headerLine of headerLines) {
            if (headerLine.startsWith('element')) {
                const lineComponents = headerLine.split(' ');
                let validComponents = 0;
                for (let lineComponent of lineComponents) {
                    const trimmedComponent = lineComponent.trim();
                    if (trimmedComponent.length > 0) {
                        validComponents++;
                        if (validComponents === 2) {
                            sectionNames.push(trimmedComponent);
                        }
                    }
                }
            }
        }
        return sectionNames;
    }

    static checkTextForEndHeader(endHeaderTestText) {
        if (endHeaderTestText.includes(PlyParserUtils.HeaderEndToken)) {
            return true;
        }
        return false;
    }

    static checkBufferForEndHeader(buffer, searchOfset, chunkSize, decoder) {
        const endHeaderTestChunk = new Uint8Array(buffer, Math.max(0, searchOfset - chunkSize), chunkSize);
        const endHeaderTestText = decoder.decode(endHeaderTestChunk);
        return PlyParserUtils.checkTextForEndHeader(endHeaderTestText);
    }

    static extractHeaderFromBufferToText(plyBuffer) {
        const decoder = new TextDecoder();
        let headerOffset = 0;
        let headerText = '';
        const readChunkSize = 100;

        while (true) {
            if (headerOffset + readChunkSize >= plyBuffer.byteLength) {
                throw new Error('End of file reached while searching for end of header');
            }
            const headerChunk = new Uint8Array(plyBuffer, headerOffset, readChunkSize);
            headerText += decoder.decode(headerChunk);
            headerOffset += readChunkSize;

            if (PlyParserUtils.checkBufferForEndHeader(plyBuffer, headerOffset, readChunkSize * 2, decoder)) {
                break;
            }
        }

        return headerText;
    }

    readHeaderFromBuffer(plyBuffer) {
        const decoder = new TextDecoder();
        let headerOffset = 0;
        let headerText = '';
        const readChunkSize = 100;

        while (true) {
            if (headerOffset + readChunkSize >= plyBuffer.byteLength) {
                throw new Error('End of file reached while searching for end of header');
            }
            const headerChunk = new Uint8Array(plyBuffer, headerOffset, readChunkSize);
            headerText += decoder.decode(headerChunk);
            headerOffset += readChunkSize;

            if (PlyParserUtils.checkBufferForEndHeader(plyBuffer, headerOffset, readChunkSize * 2, decoder)) {
                break;
            }
        }

        return headerText;
    }

    static convertHeaderTextToLines(headerText) {
        const headerLines = headerText.split('\n');
        const prunedLines = [];
        for (let i = 0; i < headerLines.length; i++) {
            const line = headerLines[i].trim();
            prunedLines.push(line);
            if (line === PlyParserUtils.HeaderEndToken) {
                break;
            }
        }
        return prunedLines;
    }

    static determineHeaderFormatFromHeaderText(_headerText) {
        // Simplified - FLAME avatars always use INRIAV1 format
        return PlyFormat.INRIAV1;
    }

    static determineHeaderFormatFromPlyBuffer(plyBuffer) {
        const headertText = PlyParserUtils.extractHeaderFromBufferToText(plyBuffer);
        return PlyParserUtils.determineHeaderFormatFromHeaderText(headertText);
    }

    static readVertex(vertexData, header, row, dataOffset, fieldsToRead, rawVertex, normalize = true) {
        const offset = row * header.bytesPerVertex + dataOffset;
        const fieldOffsets = header.fieldOffsets;
        const fieldTypes = header.fieldTypes;
        for (let fieldId of fieldsToRead) {
            const fieldType = fieldTypes[fieldId];
            if (fieldType === FieldSizeIdFloat) {
                rawVertex[fieldId] = vertexData.getFloat32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdShort) {
                rawVertex[fieldId] = vertexData.getInt16(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUShort) {
                rawVertex[fieldId] = vertexData.getUint16(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdInt) {
                rawVertex[fieldId] = vertexData.getInt32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUInt) {
                rawVertex[fieldId] = vertexData.getUint32(offset + fieldOffsets[fieldId], true);
            } else if (fieldType === FieldSizeIdUChar) {
                if (normalize) {
                    rawVertex[fieldId] = vertexData.getUint8(offset + fieldOffsets[fieldId]) / 255.0;
                } else {
                    rawVertex[fieldId] = vertexData.getUint8(offset + fieldOffsets[fieldId]);
                }
            }
        }
    }
}

/**
 * INRIAV1PlyParser
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


const BaseFieldNamesToRead = ['scale_0', 'scale_1', 'scale_2', 'rot_0', 'rot_1', 'rot_2', 'rot_3', 'x', 'y', 'z',
                              'f_dc_0', 'f_dc_1', 'f_dc_2', 'opacity', 'red', 'green', 'blue', 'f_rest_0'];

const BaseFieldsToReadIndexes = BaseFieldNamesToRead.map((e, i) => i);

const [
        SCALE_0, SCALE_1, SCALE_2, ROT_0, ROT_1, ROT_2, ROT_3, X, Y, Z, F_DC_0, F_DC_1, F_DC_2, OPACITY, RED, GREEN, BLUE, F_REST_0
      ] = BaseFieldsToReadIndexes;

class INRIAV1PlyParser {

    constructor() {
        this.plyParserutils = new PlyParserUtils();
    }

    decodeHeaderLines(headerLines) {

        let shLineCount = 0;
        headerLines.forEach((line) => {
            if (line.includes('f_rest_')) shLineCount++;
        });

        let shFieldsToReadCount = 0;
        if (shLineCount >= 45) {
            shFieldsToReadCount = 45;
        } else if (shLineCount >= 24) {
            shFieldsToReadCount = 24;
        } else if (shLineCount >= 9) {
            shFieldsToReadCount = 9;
        }

        const shFieldIndexesToMap = Array.from(Array(Math.max(shFieldsToReadCount - 1, 0)));
        let shRemainingFieldNamesToRead = shFieldIndexesToMap.map((element, index) => `f_rest_${index + 1}`);

        const fieldNamesToRead = [...BaseFieldNamesToRead, ...shRemainingFieldNamesToRead];
        const fieldsToReadIndexes = fieldNamesToRead.map((e, i) => i);

        const fieldNameIdMap = fieldsToReadIndexes.reduce((acc, element) => {
            acc[fieldNamesToRead[element]] = element;
            return acc;
        }, {});
        const header = this.plyParserutils.decodeSectionHeader(headerLines, fieldNameIdMap, 0);
        header.splatCount = header.vertexCount;
        header.bytesPerSplat = header.bytesPerVertex;
        header.fieldsToReadIndexes = fieldsToReadIndexes;
        return header;
    }

    decodeHeaderText(headerText) {
        const headerLines = PlyParserUtils.convertHeaderTextToLines(headerText);
        const header = this.decodeHeaderLines(headerLines);
        header.headerText = headerText;
        header.headerSizeBytes = headerText.indexOf(PlyParserUtils.HeaderEndToken) + PlyParserUtils.HeaderEndToken.length + 1;
        return header;
    }

    decodeHeaderFromBuffer(plyBuffer) {
        const headerText = this.plyParserutils.readHeaderFromBuffer(plyBuffer);
        return this.decodeHeaderText(headerText);
    }

    findSplatData(plyBuffer, header) {
        return new DataView(plyBuffer, header.headerSizeBytes);
    }

    parseToUncompressedSplatBufferSection(header, fromSplat, toSplat, splatData, splatDataOffset,
                                          toBuffer, toOffset, outSphericalHarmonicsDegree = 0) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
        const outBytesPerSplat = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree].BytesPerSplat;

        for (let i = fromSplat; i <= toSplat; i++) {
            const parsedSplat = INRIAV1PlyParser.parseToUncompressedSplat(splatData, i, header,
                                                                          splatDataOffset, outSphericalHarmonicsDegree);
            const outBase = i * outBytesPerSplat + toOffset;
            SplatBuffer.writeSplatDataToSectionBuffer(parsedSplat, toBuffer, outBase, 0, outSphericalHarmonicsDegree);
        }
    }

    parseToUncompressedSplatArraySection(header, fromSplat, toSplat, splatData, splatDataOffset,
                                         splatArray, outSphericalHarmonicsDegree = 0) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
        for (let i = fromSplat; i <= toSplat; i++) {
            const parsedSplat = INRIAV1PlyParser.parseToUncompressedSplat(splatData, i, header,
                                                                          splatDataOffset, outSphericalHarmonicsDegree);
            splatArray.addSplat(parsedSplat);
        }
    }

    decodeSectionSplatData(sectionSplatData, splatCount, sectionHeader, outSphericalHarmonicsDegree) {
        outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, sectionHeader.sphericalHarmonicsDegree);
        const splatArray = new UncompressedSplatArray(outSphericalHarmonicsDegree);
        for (let row = 0; row < splatCount; row++) {
            const newSplat = INRIAV1PlyParser.parseToUncompressedSplat(sectionSplatData, row, sectionHeader,
                                                                       0, outSphericalHarmonicsDegree);
            splatArray.addSplat(newSplat);
        }
        return splatArray;
    }

    static parseToUncompressedSplat = function() {

        let rawSplat = [];
        const tempRotation = new Quaternion();

        const OFFSET_X = UncompressedSplatArray.OFFSET.X;
        const OFFSET_Y = UncompressedSplatArray.OFFSET.Y;
        const OFFSET_Z = UncompressedSplatArray.OFFSET.Z;

        const OFFSET_SCALE0 = UncompressedSplatArray.OFFSET.SCALE0;
        const OFFSET_SCALE1 = UncompressedSplatArray.OFFSET.SCALE1;
        const OFFSET_SCALE2 = UncompressedSplatArray.OFFSET.SCALE2;

        const OFFSET_ROTATION0 = UncompressedSplatArray.OFFSET.ROTATION0;
        const OFFSET_ROTATION1 = UncompressedSplatArray.OFFSET.ROTATION1;
        const OFFSET_ROTATION2 = UncompressedSplatArray.OFFSET.ROTATION2;
        const OFFSET_ROTATION3 = UncompressedSplatArray.OFFSET.ROTATION3;

        const OFFSET_FDC0 = UncompressedSplatArray.OFFSET.FDC0;
        const OFFSET_FDC1 = UncompressedSplatArray.OFFSET.FDC1;
        const OFFSET_FDC2 = UncompressedSplatArray.OFFSET.FDC2;
        const OFFSET_OPACITY = UncompressedSplatArray.OFFSET.OPACITY;

        const OFFSET_FRC = [];

        for (let i = 0; i < 45; i++) {
            OFFSET_FRC[i] = UncompressedSplatArray.OFFSET.FRC0 + i;
        }

        return function(splatData, row, header, splatDataOffset = 0, outSphericalHarmonicsDegree = 0) {
            outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
            INRIAV1PlyParser.readSplat(splatData, header, row, splatDataOffset, rawSplat);
            const newSplat = UncompressedSplatArray.createSplat(outSphericalHarmonicsDegree);
            if (rawSplat[SCALE_0] !== undefined) {
                newSplat[OFFSET_SCALE0] = Math.exp(rawSplat[SCALE_0]);
                newSplat[OFFSET_SCALE1] = Math.exp(rawSplat[SCALE_1]);
                newSplat[OFFSET_SCALE2] = Math.exp(rawSplat[SCALE_2]);
            } else {
                newSplat[OFFSET_SCALE0] = 0.01;
                newSplat[OFFSET_SCALE1] = 0.01;
                newSplat[OFFSET_SCALE2] = 0.01;
            }

            if (rawSplat[F_DC_0] !== undefined) {
                newSplat[OFFSET_FDC0] = rawSplat[F_DC_0] * 255;
                newSplat[OFFSET_FDC1] = rawSplat[F_DC_1] * 255;
                newSplat[OFFSET_FDC2] = rawSplat[F_DC_2] * 255;
            } else if (rawSplat[RED] !== undefined) {
                newSplat[OFFSET_FDC0] = rawSplat[RED] * 255;
                newSplat[OFFSET_FDC1] = rawSplat[GREEN] * 255;
                newSplat[OFFSET_FDC2] = rawSplat[BLUE] * 255;
            } else {
                newSplat[OFFSET_FDC0] = 0;
                newSplat[OFFSET_FDC1] = 0;
                newSplat[OFFSET_FDC2] = 0;
            }

            if (rawSplat[OPACITY] !== undefined) {
                newSplat[OFFSET_OPACITY] = (1 / (1 + Math.exp(-rawSplat[OPACITY]))) * 255;
            }

            newSplat[OFFSET_FDC0] = clamp(Math.floor(newSplat[OFFSET_FDC0]), 0, 255);
            newSplat[OFFSET_FDC1] = clamp(Math.floor(newSplat[OFFSET_FDC1]), 0, 255);
            newSplat[OFFSET_FDC2] = clamp(Math.floor(newSplat[OFFSET_FDC2]), 0, 255);
            newSplat[OFFSET_OPACITY] = clamp(Math.floor(newSplat[OFFSET_OPACITY]), 0, 255);

            if (outSphericalHarmonicsDegree >= 1) {
                if (rawSplat[F_REST_0] !== undefined) {
                    for (let i = 0; i < 9; i++) {
                        newSplat[OFFSET_FRC[i]] = rawSplat[header.sphericalHarmonicsDegree1Fields[i]];
                    }
                    if (outSphericalHarmonicsDegree >= 2) {
                        for (let i = 0; i < 15; i++) {
                            newSplat[OFFSET_FRC[9 + i]] = rawSplat[header.sphericalHarmonicsDegree2Fields[i]];
                        }
                    }
                }
            }

            tempRotation.set(rawSplat[ROT_0], rawSplat[ROT_1], rawSplat[ROT_2], rawSplat[ROT_3]);
            tempRotation.normalize();

            newSplat[OFFSET_ROTATION0] = tempRotation.x;
            newSplat[OFFSET_ROTATION1] = tempRotation.y;
            newSplat[OFFSET_ROTATION2] = tempRotation.z;
            newSplat[OFFSET_ROTATION3] = tempRotation.w;

            newSplat[OFFSET_X] = rawSplat[X];
            newSplat[OFFSET_Y] = rawSplat[Y];
            newSplat[OFFSET_Z] = rawSplat[Z];

            return newSplat;
        };

    }();

    static readSplat(splatData, header, row, dataOffset, rawSplat) {
        return PlyParserUtils.readVertex(splatData, header, row, dataOffset, header.fieldsToReadIndexes, rawSplat, true);
    }

    parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree = 0) {
        const header = this.decodeHeaderFromBuffer(plyBuffer);
        const splatCount = header.splatCount;
        const splatData = this.findSplatData(plyBuffer, header);
        const splatArray = this.decodeSectionSplatData(splatData, splatCount, header, outSphericalHarmonicsDegree);
        return splatArray;
    }
}

/**
 * PlyParser
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Simplified for FLAME avatar - only supports INRIAV1 PLY format.
 */


class PlyParser {

    static parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree = 0) {
        // FLAME avatars use INRIAV1 PLY format
        return new INRIAV1PlyParser().parseToUncompressedSplatArray(plyBuffer, outSphericalHarmonicsDegree);
    }

}

/**
 * PlyLoader - Loads and parses PLY format Gaussian Splat files
 *
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 *
 * Simplified for FLAME avatar - only supports INRIAV1 PLY format.
 * Provides both progressive streaming and file-based loading.
 */


const logger$3 = getLogger('PlyLoader');

/**
 * Store data chunks into a single ArrayBuffer
 *
 * Combines multiple downloaded chunks into a contiguous buffer for parsing.
 * Reallocates buffer if needed to fit all chunks.
 *
 * @private
 * @param {Array<{data: Uint8Array, sizeBytes: number}>} chunks - Array of data chunks
 * @param {ArrayBuffer} [buffer] - Existing buffer to reuse (will reallocate if too small)
 * @returns {ArrayBuffer} Buffer containing all chunk data
 */
function storeChunksInBuffer(chunks, buffer) {
    let inBytes = 0;
    for (let chunk of chunks) {
        inBytes += chunk.sizeBytes;
    }

    // Reallocate if buffer doesn't exist or is too small
    if (!buffer || buffer.byteLength < inBytes) {
        buffer = new ArrayBuffer(inBytes);
    }

    // Copy all chunks into buffer sequentially
    let offset = 0;
    for (let chunk of chunks) {
        new Uint8Array(buffer, offset, chunk.sizeBytes).set(chunk.data);
        offset += chunk.sizeBytes;
    }

    return buffer;
}

/**
 * Finalize splat data into a SplatBuffer
 *
 * Converts UncompressedSplatArray into final optimized SplatBuffer format.
 * Applies compression and optimization if requested.
 *
 * @private
 * @param {UncompressedSplatArray} splatData - Parsed splat data
 * @param {boolean} optimizeSplatData - Whether to optimize/compress the data
 * @param {number} minimumAlpha - Minimum alpha threshold for splat culling
 * @param {number} compressionLevel - Compression level (0-2)
 * @param {number} sectionSize - Section size for partitioning
 * @param {Vector3} sceneCenter - Center point of the scene
 * @param {number} blockSize - Block size for spatial partitioning
 * @param {number} bucketSize - Bucket size for sorting
 * @returns {SplatBuffer} Finalized splat buffer ready for rendering
 * @throws {ParseError} If splat data is invalid or finalization fails
 */
function finalizeSplatData(splatData, optimizeSplatData, minimumAlpha, compressionLevel, sectionSize, sceneCenter, blockSize, bucketSize) {
    try {
        if (optimizeSplatData) {
            const splatBufferGenerator = SplatBufferGenerator.getStandardGenerator(
                minimumAlpha,
                compressionLevel,
                sectionSize,
                sceneCenter,
                blockSize,
                bucketSize
            );
            return splatBufferGenerator.generateFromUncompressedSplatArray(splatData);
        } else {
            return SplatBuffer.generateFromUncompressedSplatArrays([splatData], minimumAlpha, 0, new Vector3());
        }
    } catch (error) {
        throw new ParseError$1(
            `Failed to finalize splat data: ${error.message}`,
            'splatData',
            error
        );
    }
}

/**
 * PlyLoader - Loads and parses PLY format Gaussian Splat files
 *
 * Supports both progressive streaming and complete file loading.
 * Optimized for INRIAV1 PLY format used in FLAME avatars.
 */
class PlyLoader {

    /**
     * Load PLY file from URL with progressive streaming support
     *
     * Downloads and parses PLY data progressively, enabling render during load.
     * Supports both direct-to-buffer and array-based loading modes.
     *
     * @static
     * @param {string} fileName - URL to the PLY file
     * @param {Function} [onProgress] - Progress callback (percent, percentLabel, status)
     * @param {boolean} [loadDirectoToSplatBuffer=false] - Load directly to SplatBuffer (faster but less flexible)
     * @param {Function} [onProgressiveLoadSectionProgress] - Callback for progressive section updates
     * @param {number} [minimumAlpha=1] - Minimum alpha threshold for splat culling
     * @param {number} [compressionLevel=0] - Compression level (0=none, 1=medium, 2=high)
     * @param {boolean} [optimizeSplatData=true] - Whether to optimize/compress splat data
     * @param {number} [outSphericalHarmonicsDegree=0] - Spherical harmonics degree (0-3)
     * @param {Object} [headers] - HTTP headers for fetch request
     * @param {number} [sectionSize] - Section size for partitioning
     * @param {Vector3} [sceneCenter] - Center point of the scene
     * @param {number} [blockSize] - Block size for spatial partitioning
     * @param {number} [bucketSize] - Bucket size for sorting
     * @returns {Promise<SplatBuffer>} Loaded and parsed splat buffer
     * @throws {ValidationError} If parameters are invalid
     * @throws {NetworkError} If file download fails
     * @throws {ParseError} If PLY parsing fails
     * @throws {AssetLoadError} If asset loading fails
     */
    static loadFromURL(fileName, onProgress, loadDirectoToSplatBuffer, onProgressiveLoadSectionProgress,
                       minimumAlpha, compressionLevel, optimizeSplatData = true, outSphericalHarmonicsDegree = 0,
                       headers, sectionSize, sceneCenter, blockSize, bucketSize) {

        // Validate required parameters
        try {
            validateUrl(fileName);
        } catch (error) {
            logger$3.error('Invalid URL provided to loadFromURL', { fileName, error });
            throw error;
        }

        // Validate optional callbacks
        if (onProgress) {
            validateCallback(onProgress, 'onProgress', false);
        }
        if (onProgressiveLoadSectionProgress) {
            validateCallback(onProgressiveLoadSectionProgress, 'onProgressiveLoadSectionProgress', false);
        }

        logger$3.info('Loading PLY from URL', { fileName, optimizeSplatData, outSphericalHarmonicsDegree });

        let internalLoadType = loadDirectoToSplatBuffer ? InternalLoadType.DirectToSplatBuffer : InternalLoadType.DirectToSplatArray;
        if (optimizeSplatData) internalLoadType = InternalLoadType.DirectToSplatArray;

        const directLoadSectionSizeBytes = Constants$1.ProgressiveLoadSectionSize;
        const splatDataOffsetBytes = SplatBuffer.HeaderSizeBytes + SplatBuffer.SectionHeaderSizeBytes;
        const sectionCount = 1;

        let directLoadBufferIn;
        let directLoadBufferOut;
        let directLoadSplatBuffer;
        let maxSplatCount = 0;
        let splatCount = 0;

        let headerLoaded = false;
        let readyToLoadSplatData = false;

        const loadPromise = nativePromiseWithExtractedComponents();

        let numBytesStreamed = 0;
        let numBytesParsed = 0;
        let numBytesDownloaded = 0;
        let headerText = '';
        let header = null;
        let chunks = [];

        let standardLoadUncompressedSplatArray;

        const textDecoder = new TextDecoder();
        const inriaV1PlyParser = new INRIAV1PlyParser();

        const localOnProgress = (percent, percentLabel, chunkData) => {
            const loadComplete = percent >= 100;

            if (chunkData) {
                chunks.push({
                    'data': chunkData,
                    'sizeBytes': chunkData.byteLength,
                    'startBytes': numBytesDownloaded,
                    'endBytes': numBytesDownloaded + chunkData.byteLength
                });
                numBytesDownloaded += chunkData.byteLength;
            }

            if (internalLoadType === InternalLoadType.DownloadBeforeProcessing) {
                if (loadComplete) {
                    loadPromise.resolve(chunks);
                }
            } else {
                if (!headerLoaded) {
                    headerText += textDecoder.decode(chunkData);
                    if (PlyParserUtils.checkTextForEndHeader(headerText)) {
                        // FLAME avatars use INRIAV1 format - parse header
                        try {
                            header = inriaV1PlyParser.decodeHeaderText(headerText);
                            maxSplatCount = header.splatCount;
                            readyToLoadSplatData = true;

                            logger$3.debug('PLY header decoded', {
                                splatCount: maxSplatCount,
                                sphericalHarmonicsDegree: header.sphericalHarmonicsDegree
                            });

                            outSphericalHarmonicsDegree = Math.min(outSphericalHarmonicsDegree, header.sphericalHarmonicsDegree);
                        } catch (error) {
                            const parseError = new ParseError$1(
                                `Failed to decode PLY header: ${error.message}`,
                                'headerText',
                                error
                            );
                            logger$3.error('Header parsing failed', parseError);
                            loadPromise.reject(parseError);
                            return;
                        }

                        const shDescriptor = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree];
                        const splatBufferSizeBytes = splatDataOffsetBytes + shDescriptor.BytesPerSplat * maxSplatCount;

                        if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                            directLoadBufferOut = new ArrayBuffer(splatBufferSizeBytes);
                            SplatBuffer.writeHeaderToBuffer({
                                versionMajor: SplatBuffer.CurrentMajorVersion,
                                versionMinor: SplatBuffer.CurrentMinorVersion,
                                maxSectionCount: sectionCount,
                                sectionCount: sectionCount,
                                maxSplatCount: maxSplatCount,
                                splatCount: splatCount,
                                compressionLevel: 0,
                                sceneCenter: new Vector3()
                            }, directLoadBufferOut);
                        } else {
                            standardLoadUncompressedSplatArray = new UncompressedSplatArray(outSphericalHarmonicsDegree);
                        }

                        numBytesStreamed = header.headerSizeBytes;
                        numBytesParsed = header.headerSizeBytes;
                        headerLoaded = true;
                    }
                }

                if (headerLoaded && readyToLoadSplatData) {

                    if (chunks.length > 0) {

                        directLoadBufferIn = storeChunksInBuffer(chunks, directLoadBufferIn);

                        const bytesLoadedSinceLastStreamedSection = numBytesDownloaded - numBytesStreamed;
                        if (bytesLoadedSinceLastStreamedSection > directLoadSectionSizeBytes || loadComplete) {
                            const numBytesToProcess = numBytesDownloaded - numBytesParsed;
                            const addedSplatCount = Math.floor(numBytesToProcess / header.bytesPerSplat);
                            const numBytesToParse = addedSplatCount * header.bytesPerSplat;
                            const numBytesLeftOver = numBytesToProcess - numBytesToParse;
                            const newSplatCount = splatCount + addedSplatCount;
                            const parsedDataViewOffset = numBytesParsed - chunks[0].startBytes;
                            const dataToParse = new DataView(directLoadBufferIn, parsedDataViewOffset, numBytesToParse);

                            const shDescriptor = SplatBuffer.CompressionLevels[0].SphericalHarmonicsDegrees[outSphericalHarmonicsDegree];
                            const outOffset = splatCount * shDescriptor.BytesPerSplat + splatDataOffsetBytes;

                            // Parse splat data with error handling
                            try {
                                if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                                    inriaV1PlyParser.parseToUncompressedSplatBufferSection(
                                        header, 0, addedSplatCount - 1, dataToParse,
                                        0, directLoadBufferOut, outOffset,
                                        outSphericalHarmonicsDegree
                                    );
                                } else {
                                    inriaV1PlyParser.parseToUncompressedSplatArraySection(
                                        header, 0, addedSplatCount - 1, dataToParse,
                                        0, standardLoadUncompressedSplatArray,
                                        outSphericalHarmonicsDegree
                                    );
                                }
                            } catch (error) {
                                const parseError = new ParseError$1(
                                    `Failed to parse splat data section: ${error.message}`,
                                    'splatData',
                                    error
                                );
                                logger$3.error('Splat data parsing failed', { splatCount, addedSplatCount, error });
                                loadPromise.reject(parseError);
                                return;
                            }

                            splatCount = newSplatCount;

                            if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                                if (!directLoadSplatBuffer) {
                                    SplatBuffer.writeSectionHeaderToBuffer({
                                        maxSplatCount: maxSplatCount,
                                        splatCount: splatCount,
                                        bucketSize: 0,
                                        bucketCount: 0,
                                        bucketBlockSize: 0,
                                        compressionScaleRange: 0,
                                        storageSizeBytes: 0,
                                        fullBucketCount: 0,
                                        partiallyFilledBucketCount: 0,
                                        sphericalHarmonicsDegree: outSphericalHarmonicsDegree
                                    }, 0, directLoadBufferOut, SplatBuffer.HeaderSizeBytes);
                                    directLoadSplatBuffer = new SplatBuffer(directLoadBufferOut, false);
                                }
                                directLoadSplatBuffer.updateLoadedCounts(1, splatCount);
                                if (onProgressiveLoadSectionProgress) {
                                    onProgressiveLoadSectionProgress(directLoadSplatBuffer, loadComplete);
                                }
                            }

                            numBytesStreamed += directLoadSectionSizeBytes;
                            numBytesParsed += numBytesToParse;

                            if (numBytesLeftOver === 0) {
                                chunks = [];
                            } else {
                                let keepChunks = [];
                                let keepSize = 0;
                                for (let i = chunks.length - 1; i >= 0; i--) {
                                    const chunk = chunks[i];
                                    keepSize += chunk.sizeBytes;
                                    keepChunks.unshift(chunk);
                                    if (keepSize >= numBytesLeftOver) break;
                                }
                                chunks = keepChunks;
                            }
                        }
                    }

                    if (loadComplete) {
                        if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                            loadPromise.resolve(directLoadSplatBuffer);
                        } else {
                            loadPromise.resolve(standardLoadUncompressedSplatArray);
                        }
                    }
                }
            }

            // Progress callback with error isolation
            if (onProgress) {
                try {
                    onProgress(percent, percentLabel, LoaderStatus.Downloading);
                } catch (error) {
                    logger$3.warn('Error in onProgress callback', error);
                }
            }
        };

        // Initial progress callback
        if (onProgress) {
            try {
                onProgress(0, '0%', LoaderStatus.Downloading);
            } catch (error) {
                logger$3.warn('Error in onProgress callback', error);
            }
        }

        // Fetch and process the PLY file
        return fetchWithProgress(fileName, localOnProgress, false, headers)
            .then(() => {
                if (onProgress) {
                    try {
                        onProgress(0, '0%', LoaderStatus.Processing);
                    } catch (error) {
                        logger$3.warn('Error in onProgress callback', error);
                    }
                }
                return loadPromise.promise;
            })
            .then((splatData) => {
                if (onProgress) {
                    try {
                        onProgress(100, '100%', LoaderStatus.Done);
                    } catch (error) {
                        logger$3.warn('Error in onProgress callback', error);
                    }
                }

                logger$3.debug('PLY data loaded successfully', {
                    internalLoadType,
                    splatCount: splatData?.splatCount || 'unknown'
                });

                // Process based on load type
                if (internalLoadType === InternalLoadType.DownloadBeforeProcessing) {
                    const chunkDatas = chunks.map((chunk) => chunk.data);
                    return new Blob(chunkDatas).arrayBuffer()
                        .then((plyFileData) => {
                            return PlyLoader.loadFromFileData(
                                plyFileData, minimumAlpha, compressionLevel, optimizeSplatData,
                                outSphericalHarmonicsDegree, sectionSize, sceneCenter, blockSize, bucketSize
                            );
                        })
                        .catch((error) => {
                            throw new AssetLoadError(
                                `Failed to process downloaded PLY data: ${error.message}`,
                                fileName,
                                error
                            );
                        });
                } else if (internalLoadType === InternalLoadType.DirectToSplatBuffer) {
                    return splatData;
                } else {
                    return delayedExecute(() => {
                        return finalizeSplatData(
                            splatData, optimizeSplatData, minimumAlpha, compressionLevel,
                            sectionSize, sceneCenter, blockSize, bucketSize
                        );
                    });
                }
            })
            .catch((error) => {
                // Re-throw custom errors as-is
                if (error instanceof ValidationError ||
                    error instanceof NetworkError ||
                    error instanceof ParseError$1 ||
                    error instanceof AssetLoadError) {
                    logger$3.error('PLY loading failed', { fileName, errorCode: error.code });
                    throw error;
                }

                // Wrap unexpected errors
                logger$3.error('Unexpected error loading PLY', { fileName, error });
                throw new AssetLoadError(
                    `Unexpected error loading PLY file: ${error.message}`,
                    fileName,
                    error
                );
            });
    }

    /**
     * Load PLY file from raw ArrayBuffer data
     *
     * Parses PLY data that has already been downloaded. Useful for loading
     * from local files or when data is provided directly.
     *
     * @static
     * @param {ArrayBuffer} plyFileData - Raw PLY file data as ArrayBuffer
     * @param {number} [minimumAlpha=1] - Minimum alpha threshold for splat culling
     * @param {number} [compressionLevel=0] - Compression level (0=none, 1=medium, 2=high)
     * @param {boolean} [optimizeSplatData=true] - Whether to optimize/compress splat data
     * @param {number} [outSphericalHarmonicsDegree=0] - Spherical harmonics degree (0-3)
     * @param {number} [sectionSize] - Section size for partitioning
     * @param {Vector3} [sceneCenter] - Center point of the scene
     * @param {number} [blockSize] - Block size for spatial partitioning
     * @param {number} [bucketSize] - Bucket size for sorting
     * @returns {Promise<SplatBuffer>} Parsed and finalized splat buffer
     * @throws {ValidationError} If plyFileData is invalid
     * @throws {ParseError} If parsing fails
     */
    static loadFromFileData(plyFileData, minimumAlpha, compressionLevel, optimizeSplatData, outSphericalHarmonicsDegree = 0,
                            sectionSize, sceneCenter, blockSize, bucketSize) {
        // Validate input
        try {
            validateArrayBuffer(plyFileData, 'plyFileData');
        } catch (error) {
            logger$3.error('Invalid PLY file data', error);
            return Promise.reject(error);
        }

        logger$3.info('Loading PLY from file data', {
            sizeBytes: plyFileData.byteLength,
            optimizeSplatData,
            outSphericalHarmonicsDegree
        });

        return delayedExecute(() => {
            try {
                return PlyParser.parseToUncompressedSplatArray(plyFileData, outSphericalHarmonicsDegree);
            } catch (error) {
                throw new ParseError$1(
                    `Failed to parse PLY file data: ${error.message}`,
                    'plyFileData',
                    error
                );
            }
        })
        .then((splatArray) => {
            logger$3.debug('PLY parsed successfully', {
                splatCount: splatArray?.splatCount || 'unknown'
            });

            return finalizeSplatData(
                splatArray, optimizeSplatData, minimumAlpha, compressionLevel,
                sectionSize, sceneCenter, blockSize, bucketSize
            );
        })
        .catch((error) => {
            // Re-throw custom errors as-is
            if (error instanceof ValidationError || error instanceof ParseError$1) {
                logger$3.error('PLY file data loading failed', { errorCode: error.code });
                throw error;
            }

            // Wrap unexpected errors
            logger$3.error('Unexpected error loading PLY from file data', error);
            throw new ParseError$1(
                `Unexpected error parsing PLY data: ${error.message}`,
                'plyFileData',
                error
            );
        });
    }
}

/**
 * Ray
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


const VectorRight = new THREE.Vector3(1, 0, 0);
const VectorUp = new THREE.Vector3(0, 1, 0);
const VectorBackward = new THREE.Vector3(0, 0, 1);

class Ray {

    constructor(origin = new THREE.Vector3(), direction = new THREE.Vector3()) {
        this.origin = new THREE.Vector3();
        this.direction = new THREE.Vector3();
        this.setParameters(origin, direction);
    }

    setParameters(origin, direction) {
        this.origin.copy(origin);
        this.direction.copy(direction).normalize();
    }

    boxContainsPoint(box, point, epsilon) {
        return point.x < box.min.x - epsilon || point.x > box.max.x + epsilon ||
               point.y < box.min.y - epsilon || point.y > box.max.y + epsilon ||
               point.z < box.min.z - epsilon || point.z > box.max.z + epsilon ? false : true;
    }

    intersectBox = function() {

        const planeIntersectionPoint = new THREE.Vector3();
        const planeIntersectionPointArray = [];
        const originArray = [];
        const directionArray = [];

        return function(box, outHit) {

            originArray[0] = this.origin.x;
            originArray[1] = this.origin.y;
            originArray[2] = this.origin.z;
            directionArray[0] = this.direction.x;
            directionArray[1] = this.direction.y;
            directionArray[2] = this.direction.z;

            if (this.boxContainsPoint(box, this.origin, 0.0001)) {
                if (outHit) {
                    outHit.origin.copy(this.origin);
                    outHit.normal.set(0, 0, 0);
                    outHit.distance = -1;
                }
                return true;
            }

            for (let i = 0; i < 3; i++) {
                if (directionArray[i] == 0.0) continue;

                const hitNormal = i == 0 ? VectorRight : i == 1 ? VectorUp : VectorBackward;
                const extremeVec = directionArray[i] < 0 ? box.max : box.min;
                let multiplier = -Math.sign(directionArray[i]);
                planeIntersectionPointArray[0] = i == 0 ? extremeVec.x : i == 1 ? extremeVec.y : extremeVec.z;
                let toSide = planeIntersectionPointArray[0] - originArray[i];

                if (toSide * multiplier < 0) {
                    const idx1 = (i + 1) % 3;
                    const idx2 = (i + 2) % 3;
                    planeIntersectionPointArray[2] = directionArray[idx1] / directionArray[i] * toSide + originArray[idx1];
                    planeIntersectionPointArray[1] = directionArray[idx2] / directionArray[i] * toSide + originArray[idx2];
                    planeIntersectionPoint.set(planeIntersectionPointArray[i],
                                               planeIntersectionPointArray[idx2],
                                               planeIntersectionPointArray[idx1]);
                    if (this.boxContainsPoint(box, planeIntersectionPoint, 0.0001)) {
                        if (outHit) {
                            outHit.origin.copy(planeIntersectionPoint);
                            outHit.normal.copy(hitNormal).multiplyScalar(multiplier);
                            outHit.distance = planeIntersectionPoint.sub(this.origin).length();
                        }
                        return true;
                    }
                }
            }

            return false;
        };

    }();

    intersectSphere = function() {

        const toSphereCenterVec = new THREE.Vector3();

        return function(center, radius, outHit) {
            toSphereCenterVec.copy(center).sub(this.origin);
            const toClosestApproach = toSphereCenterVec.dot(this.direction);
            const toClosestApproachSq = toClosestApproach * toClosestApproach;
            const toSphereCenterSq = toSphereCenterVec.dot(toSphereCenterVec);
            const diffSq = toSphereCenterSq - toClosestApproachSq;
            const radiusSq = radius * radius;

            if (diffSq > radiusSq) return false;

            const thc = Math.sqrt(radiusSq - diffSq);
            const t0 = toClosestApproach - thc;
            const t1 = toClosestApproach + thc;

            if (t1 < 0) return false;
            let t = t0 < 0 ? t1 : t0;

            if (outHit) {
                outHit.origin.copy(this.origin).addScaledVector(this.direction, t);
                outHit.normal.copy(outHit.origin).sub(center).normalize();
                outHit.distance = t;
            }
            return true;
        };

    }();
}

/**
 * Hit
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * This file is functionally identical to the original.
 */


class Hit {

    constructor() {
        this.origin = new THREE.Vector3();
        this.normal = new THREE.Vector3();
        this.distance = 0;
        this.splatIndex = 0;
    }

    set(origin, normal, distance, splatIndex) {
        this.origin.copy(origin);
        this.normal.copy(normal);
        this.distance = distance;
        this.splatIndex = splatIndex;
    }

    clone() {
        const hitClone = new Hit();
        hitClone.origin.copy(this.origin);
        hitClone.normal.copy(this.normal);
        hitClone.distance = this.distance;
        hitClone.splatIndex = this.splatIndex;
        return hitClone;
    }

}

/**
 * Raycaster
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Import paths adjusted for gsplat-flame-avatar package structure.
 */


class Raycaster {

    constructor(origin, direction, raycastAgainstTrueSplatEllipsoid = false) {
        this.ray = new Ray(origin, direction);
        this.raycastAgainstTrueSplatEllipsoid = raycastAgainstTrueSplatEllipsoid;
    }

    setFromCameraAndScreenPosition = function() {

        const ndcCoords = new THREE.Vector2();

        return function(camera, screenPosition, screenDimensions) {
            ndcCoords.x = screenPosition.x / screenDimensions.x * 2.0 - 1.0;
            ndcCoords.y = (screenDimensions.y - screenPosition.y) / screenDimensions.y * 2.0 - 1.0;
            if (camera.isPerspectiveCamera) {
                this.ray.origin.setFromMatrixPosition(camera.matrixWorld);
                this.ray.direction.set(ndcCoords.x, ndcCoords.y, 0.5 ).unproject(camera).sub(this.ray.origin).normalize();
                this.camera = camera;
            } else if (camera.isOrthographicCamera) {
                this.ray.origin.set(ndcCoords.x, ndcCoords.y,
                                   (camera.near + camera.far) / (camera.near - camera.far)).unproject(camera);
                this.ray.direction.set(0, 0, -1).transformDirection(camera.matrixWorld);
                this.camera = camera;
            } else {
                throw new Error('Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type');
            }
        };

    }();

    intersectSplatMesh = function() {

        const toLocal = new THREE.Matrix4();
        const fromLocal = new THREE.Matrix4();
        const sceneTransform = new THREE.Matrix4();
        const localRay = new Ray();
        const tempPoint = new THREE.Vector3();

        return function(splatMesh, outHits = []) {
            const splatTree = splatMesh.getSplatTree();

            if (!splatTree) return;

            for (let s = 0; s < splatTree.subTrees.length; s++) {
                const subTree = splatTree.subTrees[s];

                fromLocal.copy(splatMesh.matrixWorld);
                if (splatMesh.dynamicMode) {
                    splatMesh.getSceneTransform(s, sceneTransform);
                    fromLocal.multiply(sceneTransform);
                }
                toLocal.copy(fromLocal).invert();

                localRay.origin.copy(this.ray.origin).applyMatrix4(toLocal);
                localRay.direction.copy(this.ray.origin).add(this.ray.direction);
                localRay.direction.applyMatrix4(toLocal).sub(localRay.origin).normalize();

                const outHitsForSubTree = [];
                if (subTree.rootNode) {
                    this.castRayAtSplatTreeNode(localRay, splatTree, subTree.rootNode, outHitsForSubTree);
                }

                outHitsForSubTree.forEach((hit) => {
                    hit.origin.applyMatrix4(fromLocal);
                    hit.normal.applyMatrix4(fromLocal).normalize();
                    hit.distance = tempPoint.copy(hit.origin).sub(this.ray.origin).length();
                });

                outHits.push(...outHitsForSubTree);
            }

            outHits.sort((a, b) => {
                if (a.distance > b.distance) return 1;
                else return -1;
            });

            return outHits;
        };

    }();

    castRayAtSplatTreeNode = function() {

        const tempColor = new THREE.Vector4();
        const tempCenter = new THREE.Vector3();
        const tempScale = new THREE.Vector3();
        const tempRotation = new THREE.Quaternion();
        const tempHit = new Hit();
        const scaleEpsilon = 0.0000001;

        const origin = new THREE.Vector3(0, 0, 0);
        const uniformScaleMatrix = new THREE.Matrix4();
        const scaleMatrix = new THREE.Matrix4();
        const rotationMatrix = new THREE.Matrix4();
        const toSphereSpace = new THREE.Matrix4();
        const fromSphereSpace = new THREE.Matrix4();
        const tempRay = new Ray();

        return function(ray, splatTree, node, outHits = []) {
            if (!ray.intersectBox(node.boundingBox)) {
                return;
            }
            if (node.data && node.data.indexes && node.data.indexes.length > 0) {
                for (let i = 0; i < node.data.indexes.length; i++) {

                    const splatGlobalIndex = node.data.indexes[i];
                    const splatSceneIndex = splatTree.splatMesh.getSceneIndexForSplat(splatGlobalIndex);
                    const splatScene = splatTree.splatMesh.getScene(splatSceneIndex);
                    if (!splatScene.visible) continue;

                    splatTree.splatMesh.getSplatColor(splatGlobalIndex, tempColor);
                    splatTree.splatMesh.getSplatCenter(splatGlobalIndex, tempCenter);
                    splatTree.splatMesh.getSplatScaleAndRotation(splatGlobalIndex, tempScale, tempRotation);

                    if (tempScale.x <= scaleEpsilon || tempScale.y <= scaleEpsilon ||
                        splatTree.splatMesh.splatRenderMode === SplatRenderMode.ThreeD && tempScale.z <= scaleEpsilon) {
                        continue;
                    }

                    if (!this.raycastAgainstTrueSplatEllipsoid) {
                        let radius = (tempScale.x + tempScale.y);
                        let componentCount = 2;
                        if (splatTree.splatMesh.splatRenderMode === SplatRenderMode.ThreeD) {
                            radius += tempScale.z;
                            componentCount = 3;
                        }
                        radius = radius / componentCount;
                        if (ray.intersectSphere(tempCenter, radius, tempHit)) {
                            const hitClone = tempHit.clone();
                            hitClone.splatIndex = splatGlobalIndex;
                            outHits.push(hitClone);
                        }
                    } else {
                        scaleMatrix.makeScale(tempScale.x, tempScale.y, tempScale.z);
                        rotationMatrix.makeRotationFromQuaternion(tempRotation);
                        const uniformScale = Math.log10(tempColor.w) * 2.0;
                        uniformScaleMatrix.makeScale(uniformScale, uniformScale, uniformScale);
                        fromSphereSpace.copy(uniformScaleMatrix).multiply(rotationMatrix).multiply(scaleMatrix);
                        toSphereSpace.copy(fromSphereSpace).invert();
                        tempRay.origin.copy(ray.origin).sub(tempCenter).applyMatrix4(toSphereSpace);
                        tempRay.direction.copy(ray.origin).add(ray.direction).sub(tempCenter);
                        tempRay.direction.applyMatrix4(toSphereSpace).sub(tempRay.origin).normalize();
                        if (tempRay.intersectSphere(origin, 1.0, tempHit)) {
                            const hitClone = tempHit.clone();
                            hitClone.splatIndex = splatGlobalIndex;
                            hitClone.origin.applyMatrix4(fromSphereSpace).add(tempCenter);
                            outHits.push(hitClone);
                        }
                    }
                }
             }
            if (node.children && node.children.length > 0) {
                for (let child of node.children) {
                    this.castRayAtSplatTreeNode(ray, splatTree, child, outHits);
                }
            }
            return outHits;
        };

    }();
}

/**
 * SortWorker
 * 
 * Derived from @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * Handles GPU-based sorting using WebAssembly
 */


// Base64 encoded WASM modules for sorting
const SorterWasm = "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";

const SorterWasmNoSIMD = "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";

const SorterWasmNonShared = "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";

const SorterWasmNoSIMDNonShared = "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";

/**
 * Sort worker function that runs in a Web Worker
 * Handles the actual sorting logic using WebAssembly
 */
function sortWorker(self) {

    let wasmInstance;
    let wasmMemory;
    let useSharedMemory;
    let integerBasedSort;
    let dynamicMode;
    let splatCount;
    let indexesToSortOffset;
    let sortedIndexesOffset;
    let sceneIndexesOffset;
    let transformsOffset;
    let precomputedDistancesOffset;
    let mappedDistancesOffset;
    let frequenciesOffset;
    let centersOffset;
    let modelViewProjOffset;
    let countsZero;
    let sortedIndexesOut;
    let distanceMapRange;
    let uploadedSplatCount;
    let Constants;

    function sort(splatSortCount, splatRenderCount, modelViewProj,
                  usePrecomputedDistances, copyIndexesToSort, copyPrecomputedDistances, copyTransforms) {
        const sortStartTime = performance.now();

        if (!useSharedMemory) {
            const indexesToSort = new Uint32Array(wasmMemory, indexesToSortOffset, copyIndexesToSort.byteLength / Constants.BytesPerInt);
            indexesToSort.set(copyIndexesToSort);
            const transforms = new Float32Array(wasmMemory, transformsOffset, copyTransforms.byteLength / Constants.BytesPerFloat);
            transforms.set(copyTransforms);
            if (usePrecomputedDistances) {
                let precomputedDistances;
                if (integerBasedSort) {
                    precomputedDistances = new Int32Array(wasmMemory, precomputedDistancesOffset,
                                                          copyPrecomputedDistances.byteLength / Constants.BytesPerInt);
                } else {
                    precomputedDistances = new Float32Array(wasmMemory, precomputedDistancesOffset,
                                                            copyPrecomputedDistances.byteLength / Constants.BytesPerFloat);
                }
                precomputedDistances.set(copyPrecomputedDistances);
            }
        }

        if (!countsZero) countsZero = new Uint32Array(distanceMapRange);
        new Float32Array(wasmMemory, modelViewProjOffset, 16).set(modelViewProj);
        new Uint32Array(wasmMemory, frequenciesOffset, distanceMapRange).set(countsZero);
        wasmInstance.exports.sortIndexes(indexesToSortOffset, centersOffset, precomputedDistancesOffset,
                                         mappedDistancesOffset, frequenciesOffset, modelViewProjOffset,
                                         sortedIndexesOffset, sceneIndexesOffset, transformsOffset, distanceMapRange,
                                         splatSortCount, splatRenderCount, splatCount, usePrecomputedDistances, integerBasedSort,
                                         dynamicMode);

        const sortMessage = {
            'sortDone': true,
            'splatSortCount': splatSortCount,
            'splatRenderCount': splatRenderCount,
            'sortTime': 0
        };
        if (!useSharedMemory) {
            const sortedIndexes = new Uint32Array(wasmMemory, sortedIndexesOffset, splatRenderCount);
            if (!sortedIndexesOut || sortedIndexesOut.length < splatRenderCount) {
                sortedIndexesOut = new Uint32Array(splatRenderCount);
            }
            sortedIndexesOut.set(sortedIndexes);
            sortMessage.sortedIndexes = sortedIndexesOut;
        }
        const sortEndTime = performance.now();

        sortMessage.sortTime = sortEndTime - sortStartTime;

        self.postMessage(sortMessage);
    }

    self.onmessage = (e) => {
        if (e.data.centers) {
            let centers = e.data.centers;
            let sceneIndexes = e.data.sceneIndexes;
            if (integerBasedSort) {
                new Int32Array(wasmMemory, centersOffset + e.data.range.from * Constants.BytesPerInt * 4,
                               e.data.range.count * 4).set(new Int32Array(centers));
            } else {
                new Float32Array(wasmMemory, centersOffset + e.data.range.from * Constants.BytesPerFloat * 4,
                                 e.data.range.count * 4).set(new Float32Array(centers));
            }
            if (dynamicMode) {
                new Uint32Array(wasmMemory, sceneIndexesOffset + e.data.range.from * 4,
                                e.data.range.count).set(new Uint32Array(sceneIndexes));
            }
            uploadedSplatCount = e.data.range.from + e.data.range.count;
        } else if (e.data.sort) {
            const renderCount = Math.min(e.data.sort.splatRenderCount || 0, uploadedSplatCount);
            const sortCount = Math.min(e.data.sort.splatSortCount || 0, uploadedSplatCount);
            const usePrecomputedDistances = e.data.sort.usePrecomputedDistances;

            let copyIndexesToSort;
            let copyPrecomputedDistances;
            let copyTransforms;
            if (!useSharedMemory) {
                copyIndexesToSort = e.data.sort.indexesToSort;
                copyTransforms = e.data.sort.transforms;
                if (usePrecomputedDistances) copyPrecomputedDistances = e.data.sort.precomputedDistances;
            }
            sort(sortCount, renderCount, e.data.sort.modelViewProj, usePrecomputedDistances,
                 copyIndexesToSort, copyPrecomputedDistances, copyTransforms);
        } else if (e.data.init) {
            // Yep, this is super hacky and gross :(
            Constants = e.data.init.Constants;

            splatCount = e.data.init.splatCount;
            useSharedMemory = e.data.init.useSharedMemory;
            integerBasedSort = e.data.init.integerBasedSort;
            dynamicMode = e.data.init.dynamicMode;
            distanceMapRange = e.data.init.distanceMapRange;
            uploadedSplatCount = 0;

            const CENTERS_BYTES_PER_ENTRY = integerBasedSort ? (Constants.BytesPerInt * 4) : (Constants.BytesPerFloat * 4);

            const sorterWasmBytes = new Uint8Array(e.data.init.sorterWasmBytes);

            const matrixSize = 16 * Constants.BytesPerFloat;
            const memoryRequiredForIndexesToSort = splatCount * Constants.BytesPerInt;
            const memoryRequiredForCenters = splatCount * CENTERS_BYTES_PER_ENTRY;
            const memoryRequiredForModelViewProjectionMatrix = matrixSize;
            const memoryRequiredForPrecomputedDistances = integerBasedSort ?
                                                          (splatCount * Constants.BytesPerInt) : (splatCount * Constants.BytesPerFloat);
            const memoryRequiredForMappedDistances = splatCount * Constants.BytesPerInt;
            const memoryRequiredForSortedIndexes = splatCount * Constants.BytesPerInt;
            const memoryRequiredForIntermediateSortBuffers = integerBasedSort ? (distanceMapRange * Constants.BytesPerInt * 2) :
                                                                                (distanceMapRange * Constants.BytesPerFloat * 2);
            const memoryRequiredforTransformIndexes = dynamicMode ? (splatCount * Constants.BytesPerInt) : 0;
            const memoryRequiredforTransforms = dynamicMode ? (Constants.MaxScenes * matrixSize) : 0;
            const extraMemory = Constants.MemoryPageSize * 32;

            const totalRequiredMemory = memoryRequiredForIndexesToSort +
                                        memoryRequiredForCenters +
                                        memoryRequiredForModelViewProjectionMatrix +
                                        memoryRequiredForPrecomputedDistances +
                                        memoryRequiredForMappedDistances +
                                        memoryRequiredForIntermediateSortBuffers +
                                        memoryRequiredForSortedIndexes +
                                        memoryRequiredforTransformIndexes +
                                        memoryRequiredforTransforms +
                                        extraMemory;
            const totalPagesRequired = Math.floor(totalRequiredMemory / Constants.MemoryPageSize ) + 1;
            const sorterWasmImport = {
                module: {},
                env: {
                    memory: new WebAssembly.Memory({
                        initial: totalPagesRequired,
                        maximum: totalPagesRequired,
                        shared: true,
                    }),
                }
            };
            WebAssembly.compile(sorterWasmBytes)
            .then((wasmModule) => {
                return WebAssembly.instantiate(wasmModule, sorterWasmImport);
            })
            .then((instance) => {
                wasmInstance = instance;
                indexesToSortOffset = 0;
                centersOffset = indexesToSortOffset + memoryRequiredForIndexesToSort;
                modelViewProjOffset = centersOffset + memoryRequiredForCenters;
                precomputedDistancesOffset = modelViewProjOffset + memoryRequiredForModelViewProjectionMatrix;
                mappedDistancesOffset = precomputedDistancesOffset + memoryRequiredForPrecomputedDistances;
                frequenciesOffset = mappedDistancesOffset + memoryRequiredForMappedDistances;
                sortedIndexesOffset = frequenciesOffset + memoryRequiredForIntermediateSortBuffers;
                sceneIndexesOffset = sortedIndexesOffset + memoryRequiredForSortedIndexes;
                transformsOffset = sceneIndexesOffset + memoryRequiredforTransformIndexes;
                wasmMemory = sorterWasmImport.env.memory.buffer;
                if (useSharedMemory) {
                    self.postMessage({
                        'sortSetupPhase1Complete': true,
                        'indexesToSortBuffer': wasmMemory,
                        'indexesToSortOffset': indexesToSortOffset,
                        'sortedIndexesBuffer': wasmMemory,
                        'sortedIndexesOffset': sortedIndexesOffset,
                        'precomputedDistancesBuffer': wasmMemory,
                        'precomputedDistancesOffset': precomputedDistancesOffset,
                        'transformsBuffer': wasmMemory,
                        'transformsOffset': transformsOffset
                    });
                } else {
                    self.postMessage({
                        'sortSetupPhase1Complete': true
                    });
                }
            });
        }
    };
}

/**
 * Creates a sort worker for GPU-based sorting
 * @param {number} splatCount - Number of splats to sort
 * @param {boolean} useSharedMemory - Whether to use shared memory
 * @param {boolean} enableSIMDInSort - Whether to enable SIMD instructions
 * @param {boolean} integerBasedSort - Whether to use integer-based sorting
 * @param {boolean} dynamicMode - Whether dynamic mode is enabled
 * @param {number} splatSortDistanceMapPrecision - Precision for distance map
 * @returns {Worker} The created sort worker
 */
function createSortWorker(splatCount, useSharedMemory, enableSIMDInSort, integerBasedSort, dynamicMode,
                                 splatSortDistanceMapPrecision = Constants$1.DefaultSplatSortDistanceMapPrecision) {
    const worker = new Worker(
        URL.createObjectURL(
            new Blob(['(', sortWorker.toString(), ')(self)'], {
                type: 'application/javascript',
            }),
        ),
    );

    let sourceWasm = SorterWasm;

    // iOS makes choosing the right WebAssembly configuration tricky :(
    const iOSSemVer = isIOS() ? getIOSSemever() : null;
    if (!enableSIMDInSort && !useSharedMemory) {
        sourceWasm = SorterWasmNoSIMD;
        // Testing on various devices has shown that even when shared memory is disabled, the WASM module with shared
        // memory can still be used most of the time -- the exception seems to be iOS devices below 16.4
        if (iOSSemVer && iOSSemVer.major <= 16 && iOSSemVer.minor < 4) {
            sourceWasm = SorterWasmNoSIMDNonShared;
        }
    } else if (!enableSIMDInSort) {
        sourceWasm = SorterWasmNoSIMD;
    } else if (!useSharedMemory) {
        // Same issue with shared memory as above on iOS devices
        if (iOSSemVer && iOSSemVer.major <= 16 && iOSSemVer.minor < 4) {
            sourceWasm = SorterWasmNonShared;
        }
    }

    const sorterWasmBinaryString = atob(sourceWasm);
    const sorterWasmBytes = new Uint8Array(sorterWasmBinaryString.length);
    for (let i = 0; i < sorterWasmBinaryString.length; i++) {
        sorterWasmBytes[i] = sorterWasmBinaryString.charCodeAt(i);
    }

    worker.postMessage({
        'init': {
            'sorterWasmBytes': sorterWasmBytes.buffer,
            'splatCount': splatCount,
            'useSharedMemory': useSharedMemory,
            'integerBasedSort': integerBasedSort,
            'dynamicMode': dynamicMode,
            'distanceMapRange': 1 << splatSortDistanceMapPrecision,
            // Super hacky
            'Constants': {
                'BytesPerFloat': Constants$1.BytesPerFloat,
                'BytesPerInt': Constants$1.BytesPerInt,
                'MemoryPageSize': Constants$1.MemoryPageSize,
                'MaxScenes': Constants$1.MaxScenes
            }
        }
    });
    return worker;
}

/**
 * Viewer
 * 
 * Based on @mkkellogg/gaussian-splats-3d (MIT License)
 * https://github.com/mkkellogg/GaussianSplats3D
 * 
 * HEAVILY MODIFIED for FLAME avatar support:
 * - Added FLAME head model integration
 * - Extended with expression/pose controls
 * - Additional rendering pipeline modifications
 * - Additional ~900 lines of FLAME-specific code
 */


const logger$2 = getLogger('Viewer');

// UI components - stub implementations for now
class LoadingSpinner {
    constructor(msg, container) { this.tasks = []; }
    show() {}
    hide() {}
    setContainer(c) {}
    addTask(msg) { return this.tasks.push(msg); }
    removeTask(id) {}
    removeAllTasks() { this.tasks = []; }
    setMessageForTask(id, msg) {}
}

class LoadingProgressBar {
    constructor(container) {}
    show() {}
    hide() {}
    setContainer(c) {}
    setProgress(p) {}
}

class SceneHelper {
    constructor(scene) { 
        this.scene = scene; 
        this.meshCursor = null;
        this.meshCursorVisible = false;
        this.focusMarker = null;
        this.focusMarkerOpacity = 0;
        this.controlPlane = null;
        this.controlPlaneVisible = false;
    }
    setupMeshCursor() {}
    setupFocusMarker() {}
    setupControlPlane() {}
    updateMeshCursor(pos, active) {}
    updateFocusMarker(target, camera, renderDimensions) {}
    updateControlPlane(cam, ctrl) {}
    setFocusMarkerVisibility(v) {}
    setFocusMarkerOpacity(o) { this.focusMarkerOpacity = o; }
    getFocusMarkerOpacity() { return this.focusMarkerOpacity; }
    positionAndOrientFocusMarker(pos, cam) {}
    positionAndOrientMeshCursor(pos, cam) {}
    setMeshCursorVisibility(visible) { this.meshCursorVisible = visible; }
    getMeschCursorVisibility() { return this.meshCursorVisible; }
    setControlPlaneVisibility(visible) { this.controlPlaneVisible = visible; }
    positionAndOrientControlPlane(pos, quat, scale) {}
    updateForRenderMode(mode, mesh) {}
    dispose() {}
}

/**
 * Viewer - Core Gaussian Splatting Viewer
 * Handles the Three.js scene, camera, controls, and rendering loop.
 */
class Viewer {
  /**
   * @param {object} options - Configuration options
   * @param {Array<number>} [options.cameraUp=[0, 1, 0]] - Camera up vector
   * @param {Array<number>} [options.initialCameraPosition=[0, 10, 15]] - Initial camera position
   * @param {Array<number>} [options.initialCameraRotation=[0, 0, 0]] - Initial camera rotation
   * @param {Array<number>} [options.initialCameraLookAt=[0, 0, 0]] - Initial camera look-at point
   * @param {boolean} [options.dropInMode=false] - If true, viewer is used as a Three.js scene object
   * @param {boolean} [options.selfDrivenMode=true] - If true, viewer manages its own render loop
   * @param {boolean} [options.useBuiltInControls=true] - If true, uses OrbitControls
   * @param {HTMLElement} [options.rootElement] - Parent element for the canvas
   * @param {HTMLCanvasElement} [options.threejsCanvas] - Existing canvas to use
   * @param {boolean} [options.ignoreDevicePixelRatio=false] - If true, forces DPR to 1
   * @param {boolean} [options.halfPrecisionCovariancesOnGPU=false] - Use 16-bit float for covariances
   * @param {THREE.Scene} [options.threeScene] - External Three.js scene to render
   * @param {THREE.WebGLRenderer} [options.renderer] - External Three.js renderer
   * @param {THREE.Camera} [options.camera] - External Three.js camera
   * @param {boolean} [options.gpuAcceleratedSort=false] - Use GPU for sorting distances
   * @param {boolean} [options.integerBasedSort=true] - Use integer arithmetic for sorting
   * @param {boolean} [options.sharedMemoryForWorkers=true] - Use SharedArrayBuffer for workers
   * @param {boolean} [options.dynamicScene=false] - Optimize for dynamic scenes
   */
  constructor(options = {}) {
    // The natural 'up' vector for viewing the scene (only has an effect when used with orbit controls and
    // when the viewer uses its own camera).
    if (!options.cameraUp) options.cameraUp = [0, 1, 0];
    this.cameraUp = new Vector3().fromArray(options.cameraUp);

    // The camera's initial position (only used when the viewer uses its own camera).
    if (!options.initialCameraPosition)
      options.initialCameraPosition = [0, 10, 15];
    this.initialCameraPosition = new Vector3().fromArray(
      options.initialCameraPosition
    );

    if (!options.initialCameraRotation)
        options.initialCameraRotation = [0, 0, 0];
      this.initialCameraRotation = new Vector3().fromArray(
        options.initialCameraRotation
    );
    this.backgroundColor = options.backgroundColor;

    // The initial focal point of the camera and center of the camera's orbit (only used when the viewer uses its own camera).
    if (!options.initialCameraLookAt) options.initialCameraLookAt = [0, 0, 0];
    this.initialCameraLookAt = new Vector3().fromArray(
      options.initialCameraLookAt
    );

    // 'dropInMode' is a flag that is used internally to support the usage of the viewer as a Three.js scene object
    this.dropInMode = options.dropInMode || false;

    // If 'selfDrivenMode' is true, the viewer manages its own update/animation loop via requestAnimationFrame()
    if (options.selfDrivenMode === undefined || options.selfDrivenMode === null)
      options.selfDrivenMode = true;
    this.selfDrivenMode = options.selfDrivenMode && !this.dropInMode;
    this.selfDrivenUpdateFunc = this.selfDrivenUpdate.bind(this);

    // If 'useBuiltInControls' is true, the viewer will create its own instance of OrbitControls and attach to the camera
    if (options.useBuiltInControls === undefined)
      options.useBuiltInControls = true;
    this.useBuiltInControls = options.useBuiltInControls;

    // parent element of the Three.js renderer canvas
    this.rootElement = options.rootElement;
    this.canvas = options.threejsCanvas;
    // Tells the viewer to pretend the device pixel ratio is 1, which can boost performance on devices where it is larger,
    // at a small cost to visual quality
    this.ignoreDevicePixelRatio = options.ignoreDevicePixelRatio || false;
    this.devicePixelRatio = this.ignoreDevicePixelRatio
      ? 1
      : window.devicePixelRatio || 1;

    // Tells the viewer to use 16-bit floating point values when storing splat covariance data in textures, instead of 32-bit
    this.halfPrecisionCovariancesOnGPU =
      options.halfPrecisionCovariancesOnGPU || false;

    // If 'threeScene' is valid, it will be rendered by the viewer along with the splat mesh
    this.threeScene = options.threeScene;
    // Allows for usage of an external Three.js renderer
    this.renderer = options.renderer;
    // Allows for usage of an external Three.js camera
    this.camera = options.camera;

    // If 'gpuAcceleratedSort' is true, a partially GPU-accelerated approach to sorting splats will be used.
    // Currently this means pre-computing splat distances from the camera on the GPU
    this.gpuAcceleratedSort = options.gpuAcceleratedSort || false;

    // if 'integerBasedSort' is true, the integer version of splat centers as well as other values used to calculate
    // splat distances are used instead of the float version. This speeds up computation, but introduces the possibility of
    // overflow in larger scenes.
    if (
      options.integerBasedSort === undefined ||
      options.integerBasedSort === null
    ) {
      options.integerBasedSort = true;
    }
    this.integerBasedSort = options.integerBasedSort;

    // If 'sharedMemoryForWorkers' is true, a SharedArrayBuffer will be used to communicate with web workers. This method
    // is faster than copying memory to or from web workers, but comes with security implications as outlined here:
    // https://web.dev/articles/cross-origin-isolation-guide
    // If enabled, it requires specific CORS headers to be present in the response from the server that is sent when
    // loading the application. More information is available in the README.
    if (
      options.sharedMemoryForWorkers === undefined ||
      options.sharedMemoryForWorkers === null
    )
      options.sharedMemoryForWorkers = true;
    this.sharedMemoryForWorkers = false; //options.sharedMemoryForWorkers;

    // if 'dynamicScene' is true, it tells the viewer to assume scene elements are not stationary or that the number of splats in the
    // scene may change. This prevents optimizations that depend on a static scene from being made. Additionally, if 'dynamicScene' is
    // true it tells the splat mesh to not apply scene tranforms to splat data that is returned by functions like
    // SplatMesh.getSplatCenter() by default.
    this.dynamicScene = !!options.dynamicScene;

    // When true, will perform additional steps during rendering to address artifacts caused by the rendering of gaussians at a
    // substantially different resolution than that at which they were rendered during training. This will only work correctly
    // for models that were trained using a process that utilizes this compensation calculation. For more details:
    // https://github.com/nerfstudio-project/gsplat/pull/117
    // https://github.com/graphdeco-inria/gaussian-splatting/issues/294#issuecomment-1772688093
    this.antialiased = options.antialiased || false;

    // This constant is added to the projected 2D screen-space splat scales
    this.kernel2DSize =
      options.kernel2DSize === undefined ? 0.3 : options.kernel2DSize;

    // if 'renderMode' is RenderMode.Always, then the viewer will rrender the scene on every update. If it is RenderMode.OnChange,
    // it will only render when something in the scene has changed.
    this.renderMode = options.renderMode || RenderMode.Always;

    // SceneRevealMode.Default results in a nice, slow fade-in effect for progressively loaded scenes,
    // and a fast fade-in for non progressively loaded scenes.
    // SceneRevealMode.Gradual will force a slow fade-in for all scenes.
    // SceneRevealMode.Instant will force all loaded scene data to be immediately visible.
    this.sceneRevealMode = options.sceneRevealMode || SceneRevealMode.Default;

    // Hacky, experimental, non-scientific parameter for tweaking focal length related calculations. For scenes with very
    // small gaussians, small details, and small dimensions -- increasing this value can help improve visual quality.
    this.focalAdjustment = options.focalAdjustment || 1.0;

    // Specify the maximum screen-space splat size, can help deal with large splats that get too unwieldy
    this.maxScreenSpaceSplatSize = options.maxScreenSpaceSplatSize || 1024;

    // The verbosity of console logging
    this.logLevel = options.logLevel || LogLevel.None;

    // Degree of spherical harmonics to utilize in rendering splats (assuming the data is present in the splat scene).
    // Valid values are 0 - 2. Default value is 0.
    this.sphericalHarmonicsDegree = options.sphericalHarmonicsDegree || 0;

    // When true, allows for usage of extra properties and attributes during rendering for effects such as opacity adjustment.
    // Default is false for performance reasons. These properties are separate from transform properties (scale, rotation, position)
    // that are enabled by the 'dynamicScene' parameter.
    this.enableOptionalEffects = options.enableOptionalEffects || false;

    // Enable the usage of SIMD WebAssembly instructions for the splat sort
    if (
      options.enableSIMDInSort === undefined ||
      options.enableSIMDInSort === null
    )
      options.enableSIMDInSort = true;
    this.enableSIMDInSort = options.enableSIMDInSort;

    // Level to compress non KSPLAT files when loading them for direct rendering
    if (
      options.inMemoryCompressionLevel === undefined ||
      options.inMemoryCompressionLevel === null
    ) {
      options.inMemoryCompressionLevel = 0;
    }
    this.inMemoryCompressionLevel = options.inMemoryCompressionLevel;

    // Reorder splat data in memory after loading is complete to optimize cache utilization. Default is true.
    // Does not apply if splat scene is progressively loaded.
    if (
      options.optimizeSplatData === undefined ||
      options.optimizeSplatData === null
    ) {
      options.optimizeSplatData = true;
    }
    this.optimizeSplatData = options.optimizeSplatData;

    // When true, the intermediate splat data that is the result of decompressing splat bufffer(s) and is used to
    // populate the data textures will be freed. This will reduces memory usage, but if that data needs to be modified
    // it will need to be re-populated from the splat buffer(s). Default is false.
    if (
      options.freeIntermediateSplatData === undefined ||
      options.freeIntermediateSplatData === null
    ) {
      options.freeIntermediateSplatData = false;
    }
    this.freeIntermediateSplatData = options.freeIntermediateSplatData;

    // It appears that for certain iOS versions, special actions need to be taken with the
    // usage of SIMD instructions and shared memory
    if (isIOS()) {
      const semver = getIOSSemever();
      if (semver.major < 17) {
        this.enableSIMDInSort = false;
      }
      if (semver.major < 16) {
        this.sharedMemoryForWorkers = false;
      }
    }

    // Tell the viewer how to render the splats
    if (
      options.splatRenderMode === undefined ||
      options.splatRenderMode === null
    ) {
      options.splatRenderMode = SplatRenderMode.ThreeD;
    }
    this.splatRenderMode = options.splatRenderMode;

    // Customize the speed at which the scene is revealed
    this.sceneFadeInRateMultiplier = options.sceneFadeInRateMultiplier || 1.0;

    // Set the range for the depth map for the counting sort used to sort the splats
    this.splatSortDistanceMapPrecision =
      options.splatSortDistanceMapPrecision ||
      Constants$1.DefaultSplatSortDistanceMapPrecision;
    const maxPrecision = this.integerBasedSort ? 20 : 24;
    this.splatSortDistanceMapPrecision = clamp(
      this.splatSortDistanceMapPrecision,
      10,
      maxPrecision
    );

    this.onSplatMeshChangedCallback = null;
    this.createSplatMesh();

    this.controls = null;
    this.perspectiveControls = null;
    this.orthographicControls = null;

    this.orthographicCamera = null;
    this.perspectiveCamera = null;

    this.showMeshCursor = false;
    this.showControlPlane = false;
    this.showInfo = false;

    this.sceneHelper = null;

    this.sortWorker = null;
    this.sortRunning = false;
    this.splatRenderCount = 0;
    this.splatSortCount = 0;
    this.lastSplatSortCount = 0;
    this.sortWorkerIndexesToSort = null;
    this.sortWorkerSortedIndexes = null;
    this.sortWorkerPrecomputedDistances = null;
    this.sortWorkerTransforms = null;
    this.preSortMessages = [];
    this.runAfterNextSort = [];

    this.selfDrivenModeRunning = false;
    this.splatRenderReady = false;

    this.raycaster = new Raycaster();

    this.infoPanel = null;

    this.startInOrthographicMode = false;

    this.currentFPS = 0;
    this.lastSortTime = 0;
    this.consecutiveRenderFrames = 0;

    this.previousCameraTarget = new Vector3();
    this.nextCameraTarget = new Vector3();

    this.mousePosition = new Vector2();
    this.mouseDownPosition = new Vector2();
    this.mouseDownTime = null;

    this.resizeObserver = null;
    this.mouseMoveListener = null;
    this.mouseDownListener = null;
    this.mouseUpListener = null;
    this.keyDownListener = null;

    this.sortPromise = null;
    this.sortPromiseResolver = null;
    this.splatSceneDownloadControllers = [];
    this.splatSceneDownloadPromises = {};
    this.splatSceneDownloadAndBuildPromise = null;
    this.splatSceneRemovalPromise = null;

    this.loadingSpinner = new LoadingSpinner(
      null,
      this.rootElement || document.body
    );
    this.loadingSpinner.hide();
    this.loadingProgressBar = new LoadingProgressBar(
      this.rootElement || document.body
    );
    this.loadingProgressBar.hide();
    // this.infoPanel = new InfoPanel(this.rootElement || document.body)
    // this.infoPanel.hide()

    this.usingExternalCamera = this.dropInMode || this.camera ? true : false;
    this.usingExternalRenderer = this.dropInMode || this.renderer ? true : false;

    this.initialized = false;
    this.disposing = false;
    this.disposed = false;
    this.disposePromise = null;

    this.lastTime = 0;
    this.gaussianSplatCount = 0;
    this.totalFrames = 0;
    this.frame = 0;
    this. avatarMesh = null;
    this.skinModel = null;
    this.boneRoot = null;
    this.baseMesh = null;
    this.setSkinAttibutes = false;

    if (!this.dropInMode) this.init();
  }

  createSplatMesh() {
    this.splatMesh = new SplatMesh(
      this.splatRenderMode,
      this.dynamicScene,
      this.enableOptionalEffects,
      this.halfPrecisionCovariancesOnGPU,
      this.devicePixelRatio,
      this.gpuAcceleratedSort,
      this.integerBasedSort,
      this.antialiased,
      this.maxScreenSpaceSplatSize,
      this.logLevel,
      this.sphericalHarmonicsDegree,
      this.sceneFadeInRateMultiplier,
      this.kernel2DSize
    );

    // Pass iris occlusion config if loaded
    this.splatMesh.irisOcclusionConfig = this.irisOcclusionConfig;
    this.splatMesh.frustumCulled = false;
    if (this.onSplatMeshChangedCallback) this.onSplatMeshChangedCallback();
  }

  init() {
    if (this.initialized) return

    if (!this.rootElement) {
      if (!this.usingExternalRenderer) {
        this.rootElement = document.createElement('div');
        this.rootElement.style.width = '100%';
        this.rootElement.style.height = '100%';
        this.rootElement.style.position = 'absolute';
        document.body.appendChild(this.rootElement);
      } else {
        this.rootElement = this.renderer.domElement || document.body;
      }
    }

    this.setupCamera();
    this.setupRenderer();
    // 
    // this.setupControls()
    this.setupEventHandlers();

    this.threeScene = this.threeScene || new Scene();
    this.sceneHelper = new SceneHelper(this.threeScene);
    this.sceneHelper.setupMeshCursor();
    this.sceneHelper.setupFocusMarker();
    this.sceneHelper.setupControlPlane();

    this.loadingProgressBar.setContainer(this.rootElement);
    this.loadingSpinner.setContainer(this.rootElement);
    // this.infoPanel.setContainer(this.rootElement)

    this.initialized = true;
  }

  setupCamera() {
    if (!this.usingExternalCamera) {
      const renderDimensions = new Vector2();
      this.getRenderDimensions(renderDimensions);

      this.perspectiveCamera = new PerspectiveCamera(
        THREE_CAMERA_FOV,
        renderDimensions.x / renderDimensions.y,
        0.1,
        1000
      );
      this.orthographicCamera = new OrthographicCamera(
        renderDimensions.x / -2,
        renderDimensions.x / 2,
        renderDimensions.y / 2,
        renderDimensions.y / -2,
        0.1,
        1000
      );
      this.camera = this.startInOrthographicMode
        ? this.orthographicCamera
        : this.perspectiveCamera;
      this.camera.position.copy(this.initialCameraPosition);
      // this.camera.up.copy(this.cameraUp).normalize()
      // this.camera.lookAt(this.initialCameraLookAt)
      this.camera.rotateX(MathUtils.degToRad(this.initialCameraRotation.x));
      this.camera.rotateY(MathUtils.degToRad(this.initialCameraRotation.y));
      this.camera.rotateZ(MathUtils.degToRad(this.initialCameraRotation.z));
    }
  }

  setupRenderer() {
    if (!this.usingExternalRenderer) {
      const renderDimensions = new Vector2();
      this.getRenderDimensions(renderDimensions);

      this.renderer = new WebGLRenderer({
        antialias: false,
        precision: 'highp',
        canvas: this.canvas
      });
      this.renderer.setPixelRatio(this.devicePixelRatio);
      this.renderer.autoClear = true;
      this.renderer.setClearColor(this.backgroundColor, 1.0); // set background color according to the config

      this.renderer.setSize(renderDimensions.x, renderDimensions.y);

      this.resizeObserver = new ResizeObserver(() => {
        this.getRenderDimensions(renderDimensions);
        this.renderer.setSize(renderDimensions.x, renderDimensions.y);
        this.forceRenderNextFrame();
      });
      this.resizeObserver.observe(this.rootElement);
      this.rootElement.appendChild(this.renderer.domElement);
    }
  }

  setupControls() {
    if (this.useBuiltInControls) {
      if (!this.usingExternalCamera) {
        this.perspectiveControls = new OrbitControls(
          this.perspectiveCamera,
          this.renderer.domElement
        );
        this.orthographicControls = new OrbitControls(
          this.orthographicCamera,
          this.renderer.domElement
        );
      } else {
        if (this.camera.isOrthographicCamera) {
          this.orthographicControls = new OrbitControls(
            this.camera,
            this.renderer.domElement
          );
        } else {
          this.perspectiveControls = new OrbitControls(
            this.camera,
            this.renderer.domElement
          );
        }
      }
      for (let controls of [
        this.orthographicControls,
        this.perspectiveControls
      ]) {
        if (controls) {
          controls.listenToKeyEvents(window);
          controls.rotateSpeed = 0.5;
          controls.maxPolarAngle = Math.PI * 0.5;// + Math.PI / 24
          controls.minPolarAngle = Math.PI * 0.5;// - Math.PI / 24
          controls.minAzimuthAngle = -Math.PI / 72;
          controls.maxAzimuthAngle = Math.PI / 72;
          controls.enableDamping = true;
          controls.dampingFactor = 0.05;
          controls.target.copy(this.initialCameraLookAt);
          controls.update();
        }
      }
      this.controls = this.camera.isOrthographicCamera
        ? this.orthographicControls
        : this.perspectiveControls;
      this.controls.update();
    }
  }

  setupEventHandlers() {
    if (this.useBuiltInControls) {
      this.mouseMoveListener = this.onMouseMove.bind(this);
      this.renderer.domElement.addEventListener(
        'pointermove',
        this.mouseMoveListener,
        false
      );
      this.mouseDownListener = this.onMouseDown.bind(this);
      this.renderer.domElement.addEventListener(
        'pointerdown',
        this.mouseDownListener,
        false
      );
      this.mouseUpListener = this.onMouseUp.bind(this);
      this.renderer.domElement.addEventListener(
        'pointerup',
        this.mouseUpListener,
        false
      );
      this.keyDownListener = this.onKeyDown.bind(this);
    }
  }

  removeEventHandlers() {
    if (this.useBuiltInControls) {
      this.renderer.domElement.removeEventListener(
        'pointermove',
        this.mouseMoveListener
      );
      this.mouseMoveListener = null;
      this.renderer.domElement.removeEventListener(
        'pointerdown',
        this.mouseDownListener
      );
      this.mouseDownListener = null;
      this.renderer.domElement.removeEventListener(
        'pointerup',
        this.mouseUpListener
      );
      this.mouseUpListener = null;
      window.removeEventListener('keydown', this.keyDownListener);
      this.keyDownListener = null;
    }
  }

  setRenderMode(renderMode) {
    this.renderMode = renderMode;
  }

  setActiveSphericalHarmonicsDegrees(activeSphericalHarmonicsDegrees) {
    this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value =
      activeSphericalHarmonicsDegrees;
    this.splatMesh.material.uniformsNeedUpdate = true;
  }

  onSplatMeshChanged(callback) {
    this.onSplatMeshChangedCallback = callback;
  }

  tempForward = new Vector3()
  tempMatrixLeft = new Matrix4()
  tempMatrixRight = new Matrix4()
  onKeyDown = (e) => {
    this.tempForward.set(0, 0, -1);
    this.tempForward.transformDirection(this.camera.matrixWorld);
    this.tempMatrixLeft.makeRotationAxis(this.tempForward, Math.PI / 128);
    this.tempMatrixRight.makeRotationAxis(this.tempForward, -Math.PI / 128);
    switch (e.code) {
      case 'KeyG':
        this.focalAdjustment += 0.02;
        this.forceRenderNextFrame();
        break
      case 'KeyF':
        this.focalAdjustment -= 0.02;
        this.forceRenderNextFrame();
        break
      case 'ArrowLeft':
        this.camera.up.transformDirection(this.tempMatrixLeft);
        break
      case 'ArrowRight':
        this.camera.up.transformDirection(this.tempMatrixRight);
        break
      case 'KeyC':
        this.showMeshCursor = !this.showMeshCursor;
        break
      case 'KeyU':
        this.showControlPlane = !this.showControlPlane;
        break
      case 'KeyI':
        this.showInfo = !this.showInfo;
        if (this.showInfo) ;
        break
      case 'KeyO':
        if (!this.usingExternalCamera) {
          this.setOrthographicMode(!this.camera.isOrthographicCamera);
        }
        break
      case 'KeyP':
        if (!this.usingExternalCamera) {
          this.splatMesh.setPointCloudModeEnabled(
            !this.splatMesh.getPointCloudModeEnabled()
          );
        }
        break
      case 'Equal':
        if (!this.usingExternalCamera) {
          this.splatMesh.setSplatScale(this.splatMesh.getSplatScale() + 0.05);
        }
        break
      case 'Minus':
        if (!this.usingExternalCamera) {
          this.splatMesh.setSplatScale(
            Math.max(this.splatMesh.getSplatScale() - 0.05, 0.0)
          );
        }
        break
    }
  }

  onMouseMove(mouse) {
    this.mousePosition.set(mouse.offsetX, mouse.offsetY);
  }

  onMouseDown() {
    this.mouseDownPosition.copy(this.mousePosition);
    this.mouseDownTime = getCurrentTime();
  }

  onMouseUp = (function () {
    const clickOffset = new Vector2();

    return function (mouse) {
      clickOffset.copy(this.mousePosition).sub(this.mouseDownPosition);
      const mouseUpTime = getCurrentTime();
      const wasClick =
        mouseUpTime - this.mouseDownTime < 0.5 && clickOffset.length() < 2;
      if (wasClick) {
        this.onMouseClick(mouse);
      }
    }
  })()

  onMouseClick(mouse) {
    this.mousePosition.set(mouse.offsetX, mouse.offsetY);
    this.checkForFocalPointChange();
  }

  checkPointRenderDimensions = new Vector2()
  checkPointToNewFocalPoint = new Vector3()
  checkPointOutHits = []
  checkForFocalPointChange = () => {
    if (!this.transitioningCameraTarget) {
      this.getRenderDimensions(this.checkPointRenderDimensions);
      this.checkPointOutHits.length = 0;
      this.raycaster.setFromCameraAndScreenPosition(
        this.camera,
        this.mousePosition,
        this.checkPointRenderDimensions
      );
      this.raycaster.intersectSplatMesh(this.splatMesh, this.checkPointOutHits);
      if (this.checkPointOutHits.length > 0) {
        const hit = this.checkPointOutHits[0];
        const intersectionPoint = hit.origin;
        this.checkPointToNewFocalPoint
          .copy(intersectionPoint)
          .sub(this.camera.position);
        if (
          this.checkPointToNewFocalPoint.length() >
          MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT
        ) {
          this.previousCameraTarget.copy(this.controls.target);
          this.nextCameraTarget.copy(intersectionPoint);
          this.transitioningCameraTarget = true;
          this.transitioningCameraTargetStartTime = getCurrentTime();
        }
      }
    }
  }

  getRenderDimensions(outDimensions) {
    if (this.rootElement) {
      outDimensions.x = this.rootElement.offsetWidth;
      outDimensions.y = this.rootElement.offsetHeight;
    } else {
      this.renderer.getSize(outDimensions);
    }
  }

  setOrthographicMode(orthographicMode) {
    if (orthographicMode === this.camera.isOrthographicCamera) return
    const fromCamera = this.camera;
    const toCamera = orthographicMode
      ? this.orthographicCamera
      : this.perspectiveCamera;
    toCamera.position.copy(fromCamera.position);
    toCamera.up.copy(fromCamera.up);
    toCamera.rotation.copy(fromCamera.rotation);
    toCamera.quaternion.copy(fromCamera.quaternion);
    toCamera.matrix.copy(fromCamera.matrix);
    this.camera = toCamera;

    if (this.controls) {
      const resetControls = (controls) => {
        controls.saveState();
        controls.reset();
      };

      const fromControls = this.controls;
      const toControls = orthographicMode
        ? this.orthographicControls
        : this.perspectiveControls;

      resetControls(toControls);
      resetControls(fromControls);

      toControls.target.copy(fromControls.target);
      if (orthographicMode) {
        Viewer.setCameraZoomFromPosition(toCamera, fromCamera, fromControls);
      } else {
        Viewer.setCameraPositionFromZoom(toCamera, fromCamera, toControls);
      }
      this.controls = toControls;
      this.camera.lookAt(this.controls.target);
    }
  }

  static setCameraPositionFromZoom = (function () {
    const tempVector = new Vector3();

    return function (positionCamera, zoomedCamera, controls) {
      const toLookAtDistance = 1 / (zoomedCamera.zoom * 0.001);
      tempVector
        .copy(controls.target)
        .sub(positionCamera.position)
        .normalize()
        .multiplyScalar(toLookAtDistance)
        .negate();
      positionCamera.position.copy(controls.target).add(tempVector);
    }
  })()

  static setCameraZoomFromPosition = (function () {
    const tempVector = new Vector3();

    return function (zoomCamera, positionZamera, controls) {
      const toLookAtDistance = tempVector
        .copy(controls.target)
        .sub(positionZamera.position)
        .length();
      zoomCamera.zoom = 1 / (toLookAtDistance * 0.001);
    }
  })()

  updateSplatMesh = (function () {
    const renderDimensions = new Vector2();

    return function () {
      if (!this.splatMesh) return
      const splatCount = this.splatMesh.getSplatCount();
      if (splatCount > 0) {
        this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode);
        this.splatMesh.updateTransforms();
        this.getRenderDimensions(renderDimensions);
        const focalLengthX =
          this.camera.projectionMatrix.elements[0] *
          0.5 *
          this.devicePixelRatio *
          renderDimensions.x;
        const focalLengthY =
          this.camera.projectionMatrix.elements[5] *
          0.5 *
          this.devicePixelRatio *
          renderDimensions.y;

        const focalMultiplier = this.camera.isOrthographicCamera
          ? 1.0 / this.devicePixelRatio
          : 1.0;
        const focalAdjustment = this.focalAdjustment * focalMultiplier;
        const inverseFocalAdjustment = 1.0 / focalAdjustment;

        this.adjustForWebXRStereo(renderDimensions);
        this.splatMesh.updateUniforms(
          renderDimensions,
          focalLengthX * focalAdjustment,
          focalLengthY * focalAdjustment,
          this.camera.isOrthographicCamera,
          this.camera.zoom || 1.0,
          inverseFocalAdjustment
        );
      }
    }
  })()

  adjustForWebXRStereo(renderDimensions) {
    // TODO: Figure out a less hacky way to determine if stereo rendering is active
    if (this.camera && this.webXRActive) {
      const xrCamera = this.renderer.xr.getCamera();
      const xrCameraProj00 = xrCamera.projectionMatrix.elements[0];
      const cameraProj00 = this.camera.projectionMatrix.elements[0];
      renderDimensions.x *= cameraProj00 / xrCameraProj00;
    }
  }

  isLoadingOrUnloading() {
    return (
      Object.keys(this.splatSceneDownloadPromises).length > 0 ||
      this.splatSceneDownloadAndBuildPromise !== null ||
      this.splatSceneRemovalPromise !== null
    )
  }

  isDisposingOrDisposed() {
    return this.disposing || this.disposed
  }

  addSplatSceneDownloadController(controller) {
    this.splatSceneDownloadControllers.push(controller);
  }

  removeSplatSceneDownloadController(controller) {
    const index = this.splatSceneDownloadControllers.indexOf(controller);
    if (index > -1) {
        this.splatSceneDownloadControllers.splice(index, 1);
    }
  }

  addSplatSceneDownloadPromise(promise) {
    this.splatSceneDownloadPromises[promise.id] = promise;
  }

  removeSplatSceneDownloadPromise(promise) {
    delete this.splatSceneDownloadPromises[promise.id];
  }

  setSplatSceneDownloadAndBuildPromise(promise) {
    this.splatSceneDownloadAndBuildPromise = promise;
  }

  clearSplatSceneDownloadAndBuildPromise() {
    this.splatSceneDownloadAndBuildPromise = null;
  }

  /**
   * Add a splat scene to the viewer and display any loading UI if appropriate.
   * @param {string} path Path to splat scene to be loaded
   * @param {object} options {
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         showLoadingUI:         Display a loading spinner while the scene is loading, defaults to true
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   *
   *         onProgress:                 Function to be called as file data are received, or other processing occurs
   *
   *         headers:                    Optional HTTP headers to be sent along with splat requests
   * }
   * @return {Promise}
   */
  addSplatScene(path, options = {}) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot add splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot add splat scene after dispose() is called.')
    }

    if (
      options.progressiveLoad &&
      this.splatMesh.scenes &&
      this.splatMesh.scenes.length > 0
    ) {
      logger$2.warn(
        'addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'
      );
      options.progressiveLoad = false;
    }

    const format =
      options.format !== undefined && options.format !== null
        ? options.format
        : sceneFormatFromPath(path);
    const progressiveLoad =
      Viewer.isProgressivelyLoadable(format) && options.progressiveLoad;
    const showLoadingUI =
      options.showLoadingUI !== undefined && options.showLoadingUI !== null
        ? options.showLoadingUI
        : true;

    let loadingUITaskId = null;
    if (showLoadingUI) {
      this.loadingSpinner.removeAllTasks();
      loadingUITaskId = this.loadingSpinner.addTask('Downloading...');
    }
    const hideLoadingUI = () => {
      this.loadingProgressBar.hide();
      this.loadingSpinner.removeAllTasks();
    };

    const onProgressUIUpdate = (
      percentComplete,
      percentCompleteLabel,
      loaderStatus
    ) => {
      if (showLoadingUI) {
        if (loaderStatus === LoaderStatus.Downloading) {
          if (percentComplete == 100) {
            this.loadingSpinner.setMessageForTask(
              loadingUITaskId,
              'Download complete!'
            );
          } else {
            if (progressiveLoad) {
              this.loadingSpinner.setMessageForTask(
                loadingUITaskId,
                'Downloading splats...'
              );
            } else {
              const suffix = percentCompleteLabel
                ? `: ${percentCompleteLabel}`
                : `...`;
              this.loadingSpinner.setMessageForTask(
                loadingUITaskId,
                `Downloading${suffix}`
              );
            }
          }
        } else if (loaderStatus === LoaderStatus.Processing) {
          logger$2.debug('loaderStatus === LoaderStatus.Processing');
          this.loadingSpinner.setMessageForTask(
            loadingUITaskId,
            'Processing splats...'
          );
        }
      }
    };

    let downloadDone = false;
    let downloadedPercentage = 0;
    const splatBuffersAddedUIUpdate = (firstBuild, finalBuild) => {
      if (showLoadingUI) {
        if (
          (firstBuild && progressiveLoad) ||
          (finalBuild && !progressiveLoad)
        ) {
          this.loadingSpinner.removeTask(loadingUITaskId);
          if (!finalBuild && !downloadDone) this.loadingProgressBar.show();
        }
        if (progressiveLoad) {
          if (finalBuild) {
            downloadDone = true;
            this.loadingProgressBar.hide();
          } else {
            this.loadingProgressBar.setProgress(downloadedPercentage);
          }
        }
      }
    };

    const onProgress = (
      percentComplete,
      percentCompleteLabel,
      loaderStatus
    ) => {
      downloadedPercentage = percentComplete;
      onProgressUIUpdate(percentComplete, percentCompleteLabel, loaderStatus);
      if (options.onProgress)
        options.onProgress(percentComplete, percentCompleteLabel, loaderStatus);
    };

    const buildSection = (splatBuffer, firstBuild, finalBuild) => {
      if (!progressiveLoad && options.onProgress)
        options.onProgress(0, '0%', LoaderStatus.Processing);
      const addSplatBufferOptions = {
        rotation: options.rotation || options.orientation,
        position: options.position,
        scale: options.scale,
        splatAlphaRemovalThreshold: options.splatAlphaRemovalThreshold
      };
      return this.addSplatBuffers(
        [splatBuffer],
        [addSplatBufferOptions],
        finalBuild,
        firstBuild && showLoadingUI,
        showLoadingUI,
        progressiveLoad,
        progressiveLoad
      ).then(() => {
        if (!progressiveLoad && options.onProgress)
          options.onProgress(100, '100%', LoaderStatus.Processing);
        splatBuffersAddedUIUpdate(firstBuild, finalBuild);
      })
    };

    const loadFunc = progressiveLoad
      ? this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this)
      : this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this);
    return loadFunc(
      path,
      format,
      options.splatAlphaRemovalThreshold,
      buildSection.bind(this),
      onProgress,
      hideLoadingUI.bind(this),
      options.headers
    )
  }

  /**
   * Download a single splat scene, convert to splat buffer and then rebuild the viewer's splat mesh
   * by calling 'buildFunc' -- all before displaying the scene. Also sets/clears relevant instance synchronization objects,
   * and calls appropriate functions on success or failure.
   * @param {string} path Path to splat scene to be loaded
   * @param {SceneFormat} format Format of the splat scene file
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified value (valid range: 0 - 255)
   * @param {function} buildFunc Function to build the viewer's splat mesh with the downloaded splat buffer
   * @param {function} onProgress Function to be called as file data are received, or other processing occurs
   * @param {function} onException Function to be called when exception occurs
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @return {Promise}
   */
  downloadAndBuildSingleSplatSceneStandardLoad(
    path,
    format,
    splatAlphaRemovalThreshold,
    buildFunc,
    onProgress,
    onException,
    headers
  ) {
    const downloadPromise = this.downloadSplatSceneToSplatBuffer(
      path,
      splatAlphaRemovalThreshold,
      onProgress,
      false,
      undefined,
      format,
      headers
    );

    // Create a promise that can be resolved/rejected externally, with abort capability
    const downloadAndBuildPromise = abortablePromiseWithExtractedComponents(
      downloadPromise.abort ? downloadPromise.abort.bind(downloadPromise) : undefined
    );

    downloadPromise
      .then((splatBuffer) => {
        this.removeSplatSceneDownloadPromise(downloadPromise);
        return buildFunc(splatBuffer, true, true).then(() => {
          downloadAndBuildPromise.resolve();
          this.clearSplatSceneDownloadAndBuildPromise();
        })
      })
      .catch((e) => {
        if (onException) onException();
        this.clearSplatSceneDownloadAndBuildPromise();
        this.removeSplatSceneDownloadPromise(downloadPromise);
        const error =
          (e instanceof AbortedPromiseError || e.name === 'AbortError')
            ? e
            : new Error(`Viewer::addSplatScene -> Could not load file ${path}`);
        downloadAndBuildPromise.reject(error);
      });

    this.addSplatSceneDownloadPromise(downloadPromise);
    this.setSplatSceneDownloadAndBuildPromise(downloadAndBuildPromise.promise);

    return downloadAndBuildPromise.promise
  }

  /**
   * Download a single splat scene and convert to splat buffer in a progressive manner, allowing rendering as the file downloads.
   * As each section is downloaded, the viewer's splat mesh is rebuilt by calling 'buildFunc'
   * Also sets/clears relevant instance synchronization objects, and calls appropriate functions on success or failure.
   * @param {string} path Path to splat scene to be loaded
   * @param {SceneFormat} format Format of the splat scene file
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified value (valid range: 0 - 255)
   * @param {function} buildFunc Function to rebuild the viewer's splat mesh after a new splat buffer section is downloaded
   * @param {function} onDownloadProgress Function to be called as file data are received
   * @param {function} onDownloadException Function to be called when exception occurs at any point during the full download
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @return {Promise}
   */
  downloadAndBuildSingleSplatSceneProgressiveLoad(
    path,
    format,
    splatAlphaRemovalThreshold,
    buildFunc,
    onDownloadProgress,
    onDownloadException,
    headers
  ) {
    let progressiveLoadedSectionBuildCount = 0;
    let progressiveLoadedSectionBuilding = false;
    const queuedProgressiveLoadSectionBuilds = [];

    const checkAndBuildProgressiveLoadSections = () => {
      if (
        queuedProgressiveLoadSectionBuilds.length > 0 &&
        !progressiveLoadedSectionBuilding &&
        !this.isDisposingOrDisposed()
      ) {
        progressiveLoadedSectionBuilding = true;
        const queuedBuild = queuedProgressiveLoadSectionBuilds.shift();
        buildFunc(
          queuedBuild.splatBuffer,
          queuedBuild.firstBuild,
          queuedBuild.finalBuild
        ).then(() => {
          progressiveLoadedSectionBuilding = false;
          if (queuedBuild.firstBuild) {
            progressiveLoadFirstSectionBuildPromise.resolve();
          } else if (queuedBuild.finalBuild) {
            splatSceneDownloadAndBuildPromise.resolve();
            this.clearSplatSceneDownloadAndBuildPromise();
          }
          if (queuedProgressiveLoadSectionBuilds.length > 0) {
            delayedExecute(() => checkAndBuildProgressiveLoadSections());
          }
        });
      }
    };

    const onProgressiveLoadSectionProgress = (splatBuffer, finalBuild) => {
      if (!this.isDisposingOrDisposed()) {
        if (
          finalBuild ||
          queuedProgressiveLoadSectionBuilds.length === 0 ||
          splatBuffer.getSplatCount() >
            queuedProgressiveLoadSectionBuilds[0].splatBuffer.getSplatCount()
        ) {
          queuedProgressiveLoadSectionBuilds.push({
            splatBuffer,
            firstBuild: progressiveLoadedSectionBuildCount === 0,
            finalBuild
          });
          progressiveLoadedSectionBuildCount++;
          checkAndBuildProgressiveLoadSections();
        }
      }
    };

    const splatSceneDownloadPromise = this.downloadSplatSceneToSplatBuffer(
      path,
      splatAlphaRemovalThreshold,
      onDownloadProgress,
      true,
      onProgressiveLoadSectionProgress,
      format,
      headers
    );

    // Get abort handler from download promise
    const abortHandler = splatSceneDownloadPromise.abort 
      ? splatSceneDownloadPromise.abort.bind(splatSceneDownloadPromise) 
      : undefined;

    const progressiveLoadFirstSectionBuildPromise =
      abortablePromiseWithExtractedComponents(abortHandler);

    const splatSceneDownloadAndBuildPromise =
      abortablePromiseWithExtractedComponents(abortHandler);

    this.addSplatSceneDownloadPromise(splatSceneDownloadPromise);
    this.setSplatSceneDownloadAndBuildPromise(
      splatSceneDownloadAndBuildPromise.promise
    );

    splatSceneDownloadPromise
      .then(() => {
        this.removeSplatSceneDownloadPromise(splatSceneDownloadPromise);
      })
      .catch((e) => {
        logger$2.error('Viewer::addSplatScene actual error:', e);
        this.clearSplatSceneDownloadAndBuildPromise();
        this.removeSplatSceneDownloadPromise(splatSceneDownloadPromise);
        const error =
          (e instanceof AbortedPromiseError || e.name === 'AbortError')
            ? e
            : new Error(
                `Viewer::addSplatScene -> Could not load one or more scenes: ${e.message}`
              );
        progressiveLoadFirstSectionBuildPromise.reject(error);
        if (onDownloadException) onDownloadException(error);
      });

    return progressiveLoadFirstSectionBuildPromise.promise
  }

  /**
   * Add multiple splat scenes to the viewer and display any loading UI if appropriate.
   * @param {Array<object>} sceneOptions Array of per-scene options: {
   *
   *         path: Path to splat scene to be loaded
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   *
   *         headers:                    Optional HTTP headers to be sent along with splat requests
   *
   *         format (SceneFormat)        Optional, the format of the scene data (.ply, .ksplat, .splat). If not present, the
   *                                     file extension in 'path' will be used to determine the format (if it is present)
   * }
   * @param {boolean} showLoadingUI Display a loading spinner while the scene is loading, defaults to true
   * @param {function} onProgress Function to be called as file data are received
   * @return {Promise}
   */
  addSplatScenes(sceneOptions, showLoadingUI = true, onProgress = undefined) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot add splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot add splat scene after dispose() is called.')
    }

    const fileCount = sceneOptions.length;
    const percentComplete = [];

    let loadingUITaskId;
    if (showLoadingUI) {
      this.loadingSpinner.removeAllTasks();
      loadingUITaskId = this.loadingSpinner.addTask('Downloading...');
    }

    const onLoadProgress = (fileIndex, percent, percentLabel, loaderStatus) => {
      percentComplete[fileIndex] = percent;
      let totalPercent = 0;
      for (let i = 0; i < fileCount; i++)
        totalPercent += percentComplete[i] || 0;
      totalPercent = totalPercent / fileCount;
      percentLabel = `${totalPercent.toFixed(2)}%`;
      if (showLoadingUI) {
        if (loaderStatus === LoaderStatus.Downloading) {
          this.loadingSpinner.setMessageForTask(
            loadingUITaskId,
            totalPercent == 100
              ? `Download complete!`
              : `Downloading: ${percentLabel}`
          );
        }
      }
      if (onProgress) onProgress(totalPercent, percentLabel, loaderStatus);
    };

    const abortController = new AbortController();
    const signal = abortController.signal;
    this.addSplatSceneDownloadController(abortController);

    const downloadPromises = [];
    for (let i = 0; i < sceneOptions.length; i++) {
      const options = sceneOptions[i];
      const format =
        options.format !== undefined && options.format !== null
          ? options.format
          : sceneFormatFromPath(options.path);
      const downloadPromise = this.downloadSplatSceneToSplatBuffer(
        options.path,
        options.splatAlphaRemovalThreshold,
        onLoadProgress.bind(this, i),
        false,
        undefined,
        format,
        options.headers,
        signal
      );
      downloadPromises.push(downloadPromise);
    }

    const downloadAndBuildPromise = Promise.all(downloadPromises)
      .then((splatBuffers) => {
        if (showLoadingUI) this.loadingSpinner.removeTask(loadingUITaskId);
        if (onProgress) onProgress(0, '0%', LoaderStatus.Processing);
        return this.addSplatBuffers(
          splatBuffers,
          sceneOptions,
          true,
          showLoadingUI,
          showLoadingUI,
          false,
          false
        ).then(() => {
          if (onProgress) onProgress(100, '100%', LoaderStatus.Processing);
          this.clearSplatSceneDownloadAndBuildPromise();
        });
      })
      .catch((e) => {
        if (showLoadingUI) this.loadingSpinner.removeTask(loadingUITaskId);
        this.clearSplatSceneDownloadAndBuildPromise();
        const error =
          e.name === 'AbortError'
            ? e
            : new Error(
                `Viewer::addSplatScenes -> Could not load one or more splat scenes.`
              );
        throw error;
      })
      .finally(() => {
        this.removeSplatSceneDownloadController(abortController);
      });

    this.setSplatSceneDownloadAndBuildPromise(downloadAndBuildPromise);
    return downloadAndBuildPromise
  }

  /**
   * Download a splat scene and convert to SplatBuffer instance.
   * @param {string} path Path to splat scene to be loaded
   * @param {number} splatAlphaRemovalThreshold Ignore any splats with an alpha less than the specified
   *                                            value (valid range: 0 - 255), defaults to 1
   *
   * @param {function} onProgress Function to be called as file data are received
   * @param {boolean} progressiveBuild Construct file sections into splat buffers as they are downloaded
   * @param {function} onSectionBuilt Function to be called when new section is added to the file
   * @param {string} format File format of the scene
   * @param {object} headers Optional HTTP headers to pass to use for downloading splat scene
   * @param {AbortSignal} signal Optional AbortSignal to cancel the download
   * @return {AbortablePromise}
   */
  downloadSplatSceneToSplatBuffer(
    path,
    splatAlphaRemovalThreshold = 1,
    onProgress = undefined,
    progressiveBuild = false,
    onSectionBuilt = undefined,
    format,
    headers
  ) {
    const optimizeSplatData = progressiveBuild ? false : this.optimizeSplatData;
    try {
      if (format === SceneFormat.Ply) {
        return PlyLoader.loadFromURL(
          path,
          onProgress,
          progressiveBuild,
          onSectionBuilt,
          splatAlphaRemovalThreshold,
          this.inMemoryCompressionLevel,
          optimizeSplatData,
          this.sphericalHarmonicsDegree,
          headers
        )
      }
    } catch (e) {
      if (e instanceof DirectLoadError) {
        throw new Error(
          'File type or server does not support progressive loading.'
        )
      } else {
        throw e
      }
    }

    throw new Error(
      `Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${path}`
    )
  }

  static isProgressivelyLoadable(format) {
    return format === SceneFormat.Ply
  }

  /**
   * Add one or more instances of SplatBuffer to the SplatMesh instance managed by the viewer and set up the sorting web worker.
   * This function will terminate the existing sort worker (if there is one).
   */
  addSplatBuffers = (
    splatBuffers,
    splatBufferOptions = [],
    finalBuild = true,
    showLoadingUI = true,
    showLoadingUIForSplatTreeBuild = true,
    replaceExisting = false,
    enableRenderBeforeFirstSort = false,
    preserveVisibleRegion = true
  ) => {
    if (this.isDisposingOrDisposed()) return Promise.resolve()

    let splatProcessingTaskId = null;
    const removeSplatProcessingTask = () => {
      if (splatProcessingTaskId !== null) {
        this.loadingSpinner.removeTask(splatProcessingTaskId);
        splatProcessingTaskId = null;
      }
    };

    this.splatRenderReady = false;
    return new Promise((resolve) => {
      if (showLoadingUI) {
        splatProcessingTaskId = this.loadingSpinner.addTask(
          'Processing splats...'
        );
      }
      delayedExecute(() => {
        if (this.isDisposingOrDisposed()) {
          resolve();
        } else {
          const buildResults = this.addSplatBuffersToMesh(
            splatBuffers,
            splatBufferOptions,
            finalBuild,
            showLoadingUIForSplatTreeBuild,
            replaceExisting,
            preserveVisibleRegion
          );

          const maxSplatCount = this.splatMesh.getMaxSplatCount();
          if (
            this.sortWorker &&
            this.sortWorker.maxSplatCount !== maxSplatCount
          )
            this.disposeSortWorker();
          // If we aren't calculating the splat distances from the center on the GPU, the sorting worker needs
          // splat centers and transform indexes so that it can calculate those distance values.
          if (!this.gpuAcceleratedSort) {
            this.preSortMessages.push({
              centers: buildResults.centers.buffer,
              sceneIndexes: buildResults.sceneIndexes.buffer,
              range: {
                from: buildResults.from,
                to: buildResults.to,
                count: buildResults.count
              }
            });
          }
          const sortWorkerSetupPromise =
            !this.sortWorker && maxSplatCount > 0
              ? this.setupSortWorker(this.splatMesh)
              : Promise.resolve();
          sortWorkerSetupPromise.then(() => {
            if (this.isDisposingOrDisposed()) return
            this.runSplatSort(true, true).then((sortRunning) => {
              if (!this.sortWorker || !sortRunning) {
                this.splatRenderReady = true;
                removeSplatProcessingTask();
                resolve();
              } else {
                if (enableRenderBeforeFirstSort) {
                  this.splatRenderReady = true;
                } else {
                  this.runAfterNextSort.push(() => {
                    this.splatRenderReady = true;
                  });
                }
                this.runAfterNextSort.push(() => {
                  removeSplatProcessingTask();
                  resolve();
                });
              }
            });
          });
        }
      }, true);
    })
  }

  /**
   * Add one or more instances of SplatBuffer to the SplatMesh instance managed by the viewer. By default, this function is additive;
   * all splat buffers contained by the viewer's splat mesh before calling this function will be preserved. This behavior can be
   * changed by passing 'true' for 'replaceExisting'.
   * @param {Array<SplatBuffer>} splatBuffers SplatBuffer instances
   * @param {Array<object>} splatBufferOptions Array of options objects: {
   *
   *         splatAlphaRemovalThreshold: Ignore any splats with an alpha less than the specified
   *                                     value (valid range: 0 - 255), defaults to 1
   *
   *         position (Array<number>):   Position of the scene, acts as an offset from its default position, defaults to [0, 0, 0]
   *
   *         rotation (Array<number>):   Rotation of the scene represented as a quaternion, defaults to [0, 0, 0, 1]
   *
   *         scale (Array<number>):      Scene's scale, defaults to [1, 1, 1]
   * }
   * @param {boolean} finalBuild Will the splat mesh be in its final state after this build?
   * @param {boolean} showLoadingUIForSplatTreeBuild Whether or not to show the loading spinner during construction of the splat tree.
   * @return {object} Object containing info about the splats that are updated
   */
  addSplatBuffersToMesh = (function () {
    let splatOptimizingTaskId;

    return function (
      splatBuffers,
      splatBufferOptions,
      finalBuild = true,
      showLoadingUIForSplatTreeBuild = false,
      replaceExisting = false,
      preserveVisibleRegion = true
    ) {
      if (this.isDisposingOrDisposed()) return
      let allSplatBuffers = [];
      let allSplatBufferOptions = [];
      if (!replaceExisting) {
        allSplatBuffers =
          this.splatMesh.scenes.map((scene) => scene.splatBuffer) || [];
        allSplatBufferOptions = this.splatMesh.sceneOptions
          ? this.splatMesh.sceneOptions.map((sceneOptions) => sceneOptions)
          : [];
      }
      allSplatBuffers.push(...splatBuffers);
      allSplatBufferOptions.push(...splatBufferOptions);
      if (this.renderer) this.splatMesh.setRenderer(this.renderer);
      const onSplatTreeIndexesUpload = (finished) => {
        if (this.isDisposingOrDisposed()) return
        const splatCount = this.splatMesh.getSplatCount();
        if (
          showLoadingUIForSplatTreeBuild &&
          splatCount >= MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER
        ) {
          if (!finished && !splatOptimizingTaskId) {
            this.loadingSpinner.setMinimized(true, true);
            splatOptimizingTaskId = this.loadingSpinner.addTask(
              'Optimizing data structures...'
            );
          }
        }
      };
      const onSplatTreeReady = (finished) => {
        if (this.isDisposingOrDisposed()) return
        if (finished && splatOptimizingTaskId) {
          this.loadingSpinner.removeTask(splatOptimizingTaskId);
          splatOptimizingTaskId = null;
        }
      };
      const buildResults = this.splatMesh.build(
        allSplatBuffers,
        allSplatBufferOptions,
        true,
        finalBuild,
        onSplatTreeIndexesUpload,
        onSplatTreeReady,
        preserveVisibleRegion
      );
      if (finalBuild && this.freeIntermediateSplatData)
        this.splatMesh.freeIntermediateSplatData();
      return buildResults
    }
  })()

  /**
   * Set up the splat sorting web worker.
   * @param {SplatMesh} splatMesh SplatMesh instance that contains the splats to be sorted
   * @return {Promise}
   */
  async setupSortWorker(splatMesh) {
    if (this.isDisposingOrDisposed()) return
    const DistancesArrayType = this.integerBasedSort
      ? Int32Array
      : Float32Array;
    const splatCount = splatMesh.getSplatCount();
    const maxSplatCount = splatMesh.getMaxSplatCount();
    this.sortWorker = await createSortWorker(
      maxSplatCount,
      this.sharedMemoryForWorkers,
      this.enableSIMDInSort,
      this.integerBasedSort,
      this.splatMesh.dynamicMode,
      this.splatSortDistanceMapPrecision
    );
    return new Promise((resolve) => {
      this.sortWorker.onmessage = (e) => {
        if (e.data.sortDone) {
          this.sortRunning = false;
          Array.from(
            { length: this.gaussianSplatCount },
            (_, i) => i
          );
          if (this.sharedMemoryForWorkers) {
            this.splatMesh.updateRenderIndexes(
              this.sortWorkerSortedIndexes,
              e.data.splatRenderCount
            );
          } else {
            const sortedIndexes = new Uint32Array(
              e.data.sortedIndexes.buffer,
              0,
              e.data.splatRenderCount
            );
            this.splatMesh.updateRenderIndexes(
              sortedIndexes,
              e.data.splatRenderCount
            );
          }

          this.lastSplatSortCount = this.splatSortCount;

          this.lastSortTime = e.data.sortTime;
          this.sortPromiseResolver();
          this.sortPromiseResolver = null;
          this.forceRenderNextFrame();
          if (this.runAfterNextSort.length > 0) {
            this.runAfterNextSort.forEach((func) => {
              func();
            });
            this.runAfterNextSort.length = 0;
          }
        } else if (e.data.sortCanceled) {
          this.sortRunning = false;
        } else if (e.data.sortSetupPhase1Complete) {
          if (this.logLevel >= LogLevel.Info)
            logger$2.info('Sorting web worker WASM setup complete.');
          if (this.sharedMemoryForWorkers) {
            this.sortWorkerSortedIndexes = new Uint32Array(
              e.data.sortedIndexesBuffer,
              e.data.sortedIndexesOffset,
              maxSplatCount
            );
            this.sortWorkerIndexesToSort = new Uint32Array(
              e.data.indexesToSortBuffer,
              e.data.indexesToSortOffset,
              maxSplatCount
            );
            this.sortWorkerPrecomputedDistances = new DistancesArrayType(
              e.data.precomputedDistancesBuffer,
              e.data.precomputedDistancesOffset,
              maxSplatCount
            );
            this.sortWorkerTransforms = new Float32Array(
              e.data.transformsBuffer,
              e.data.transformsOffset,
              Constants$1.MaxScenes * 16
            );
          } else {
            this.sortWorkerIndexesToSort = new Uint32Array(maxSplatCount);
            this.sortWorkerPrecomputedDistances = new DistancesArrayType(
              maxSplatCount
            );
            this.sortWorkerTransforms = new Float32Array(
              Constants$1.MaxScenes * 16
            );
          }
          for (let i = 0; i < splatCount; i++)
            this.sortWorkerIndexesToSort[i] = i;
          this.sortWorker.maxSplatCount = maxSplatCount;

          if (this.logLevel >= LogLevel.Info) {
            logger$2.info('Sorting web worker ready.');
            const splatDataTextures = this.splatMesh.getSplatDataTextures();
            const covariancesTextureSize = splatDataTextures.covariances.size;
            const centersColorsTextureSize = splatDataTextures.centerColors.size;
            logger$2.info(
              'Covariances texture size: ' +
                covariancesTextureSize.x +
                ' x ' +
                covariancesTextureSize.y
            );
            logger$2.info(
              'Centers/colors texture size: ' +
                centersColorsTextureSize.x +
                ' x ' +
                centersColorsTextureSize.y
            );
          }

          resolve();
        }
      };
    })
  }

  disposeSortWorker() {
    if (this.sortWorker) this.sortWorker.terminate();
    this.sortWorker = null;
    this.sortPromise = null;
    if (this.sortPromiseResolver) {
      this.sortPromiseResolver();
      this.sortPromiseResolver = null;
    }
    this.preSortMessages = [];
    this.sortRunning = false;
  }

  removeSplatScene(indexToRemove, showLoadingUI = true) {
    return this.removeSplatScenes([indexToRemove], showLoadingUI)
  }

  removeSplatScenes(indexesToRemove, showLoadingUI = true) {
    if (this.isLoadingOrUnloading()) {
      throw new Error(
        'Cannot remove splat scene while another load or unload is already in progress.'
      )
    }

    if (this.isDisposingOrDisposed()) {
      throw new Error('Cannot remove splat scene after dispose() is called.')
    }

    let sortPromise;

    this.splatSceneRemovalPromise = new Promise((resolve, reject) => {
      let revmovalTaskId;

      if (showLoadingUI) {
        this.loadingSpinner.removeAllTasks();
        this.loadingSpinner.show();
        revmovalTaskId = this.loadingSpinner.addTask('Removing splat scene...');
      }

      const checkAndHideLoadingUI = () => {
        if (showLoadingUI) {
          this.loadingSpinner.hide();
          this.loadingSpinner.removeTask(revmovalTaskId);
        }
      };

      const onDone = (error) => {
        checkAndHideLoadingUI();
        this.splatSceneRemovalPromise = null;
        if (!error) resolve();
        else reject(error);
      };

      const checkForEarlyExit = () => {
        if (this.isDisposingOrDisposed()) {
          onDone();
          return true
        }
        return false
      };

      sortPromise = this.sortPromise || Promise.resolve();
      sortPromise.then(() => {
        if (checkForEarlyExit()) return
        const savedSplatBuffers = [];
        const savedSceneOptions = [];
        const savedSceneTransformComponents = [];
        for (let i = 0; i < this.splatMesh.scenes.length; i++) {
          let shouldRemove = false;
          for (let indexToRemove of indexesToRemove) {
            if (indexToRemove === i) {
              shouldRemove = true;
              break
            }
          }
          if (!shouldRemove) {
            const scene = this.splatMesh.scenes[i];
            savedSplatBuffers.push(scene.splatBuffer);
            savedSceneOptions.push(this.splatMesh.sceneOptions[i]);
            savedSceneTransformComponents.push({
              position: scene.position.clone(),
              quaternion: scene.quaternion.clone(),
              scale: scene.scale.clone()
            });
          }
        }
        this.disposeSortWorker();
        this.splatMesh.dispose();
        this.sceneRevealMode = SceneRevealMode.Instant;
        this.createSplatMesh();
        this.addSplatBuffers(
          savedSplatBuffers,
          savedSceneOptions,
          true,
          false,
          true
        )
          .then(() => {
            if (checkForEarlyExit()) return
            checkAndHideLoadingUI();
            this.splatMesh.scenes.forEach((scene, index) => {
              scene.position.copy(savedSceneTransformComponents[index].position);
              scene.quaternion.copy(
                savedSceneTransformComponents[index].quaternion
              );
              scene.scale.copy(savedSceneTransformComponents[index].scale);
            });
            this.splatMesh.updateTransforms();
            this.splatRenderReady = false;

            this.runSplatSort(true).then(() => {
              if (checkForEarlyExit()) {
                this.splatRenderReady = true;
                return
              }
              sortPromise = this.sortPromise || Promise.resolve();
              sortPromise.then(() => {
                this.splatRenderReady = true;
                onDone();
              });
            });
          })
          .catch((e) => {
            onDone(e);
          });
      });
    });

    return this.splatSceneRemovalPromise
  }

  /**
   * Start self-driven mode
   */
  start() {
    if (this.selfDrivenMode) {
      this.requestFrameId = requestAnimationFrame(this.selfDrivenUpdateFunc);
      this.selfDrivenModeRunning = true;
    } else {
      throw new Error('Cannot start viewer unless it is in self driven mode.')
    }
  }

  /**
   * Stop self-driven mode
   */
  stop() {
    if (this.selfDrivenMode && this.selfDrivenModeRunning) {
      cancelAnimationFrame(this.requestFrameId);
      this.selfDrivenModeRunning = false;
    }
  }

  /**
   * Dispose of all resources held directly and indirectly by this viewer.
   */
  async dispose() {
    if (this.isDisposingOrDisposed()) return this.disposePromise

    for (let controller of this.splatSceneDownloadControllers) {
        controller.abort();
    }

    let waitPromises = [];
    if (this.sortPromise) {
      waitPromises.push(this.sortPromise);
    }

    this.disposing = true;
    this.disposePromise = Promise.all(waitPromises).finally(() => {
      this.stop();
      if (this.orthographicControls) {
        this.orthographicControls.dispose();
        this.orthographicControls = null;
      }
      if (this.perspectiveControls) {
        this.perspectiveControls.dispose();
        this.perspectiveControls = null;
      }
      this.controls = null;
      if (this.splatMesh) {
        this.splatMesh.dispose();
        this.splatMesh = null;
      }
      if (this.avatarMesh) {
        disposeAllMeshes(this.avatarMesh);
        this.avatarMesh = null;
      }
      if (this.sceneHelper) {
        this.sceneHelper.dispose();
        this.sceneHelper = null;
      }
      if (this.resizeObserver) {
        this.resizeObserver.unobserve(this.rootElement);
        this.resizeObserver = null;
      }
      this.disposeSortWorker();
      this.removeEventHandlers();

      this.loadingSpinner.removeAllTasks();
      this.loadingSpinner.setContainer(null);
      this.loadingProgressBar.hide();
      this.loadingProgressBar.setContainer(null);
      // this.infoPanel.setContainer(null)

      this.camera = null;
      this.threeScene = null;
      this.splatRenderReady = false;
      this.initialized = false;
      if (this.renderer) {
        if (!this.usingExternalRenderer) {
          this.rootElement.removeChild(this.renderer.domElement);
          this.renderer.dispose();
        }
        this.renderer = null;
      }

      if (!this.usingExternalRenderer) ;

      this.sortWorkerSortedIndexes = null;
      this.sortWorkerIndexesToSort = null;
      this.sortWorkerPrecomputedDistances = null;
      this.sortWorkerTransforms = null;
      this.disposed = true;
      this.disposing = false;
      this.disposePromise = null;
    });
    return this.disposePromise
  }
  vsyncNum = 4
  selfDrivenUpdate() {
    if (this.selfDrivenMode) {
        this.requestFrameId = requestAnimationFrame(this.selfDrivenUpdateFunc);

        // const currentTime = getCurrentTime();
        // const calcDelta = currentTime - this.lastTime;
        // if (calcDelta >= 1.0 / 30.0) {
        //     this.lastTime = currentTime;
        // } else {
        //     return
        // }
    }
    this.vsyncCount++;

    if (this.vsyncCount < this.vsyncNum) {
      return
    }

    this.vsyncCount = 0;

    this.update();
    if (this.shouldRender()) {
      //add expression

      this.render();
      this.consecutiveRenderFrames++;
    } else {
      this.consecutiveRenderFrames = 0;
    }
    this.renderNextFrame = false;
  }

  forceRenderNextFrame() {
    this.renderNextFrame = true;
  }

  shouldRender = (function () {
    let renderCount = 0;
    const lastCameraPosition = new Vector3();
    const lastCameraOrientation = new Quaternion();
    const changeEpsilon = 0.0001;

    return function () {
      if (
        !this.initialized ||
        !this.splatRenderReady ||
        this.isDisposingOrDisposed()
      )
        return false

      let shouldRender = false;
      let cameraChanged = false;
      if (this.camera) {
        const cp = this.camera.position;
        const co = this.camera.quaternion;
        cameraChanged =
          Math.abs(cp.x - lastCameraPosition.x) > changeEpsilon ||
          Math.abs(cp.y - lastCameraPosition.y) > changeEpsilon ||
          Math.abs(cp.z - lastCameraPosition.z) > changeEpsilon ||
          Math.abs(co.x - lastCameraOrientation.x) > changeEpsilon ||
          Math.abs(co.y - lastCameraOrientation.y) > changeEpsilon ||
          Math.abs(co.z - lastCameraOrientation.z) > changeEpsilon ||
          Math.abs(co.w - lastCameraOrientation.w) > changeEpsilon;
      }

      shouldRender =
        this.renderMode !== RenderMode.Never &&
        (renderCount === 0 ||
          this.splatMesh.visibleRegionChanging ||
          cameraChanged ||
          this.renderMode === RenderMode.Always ||
          this.dynamicMode === true ||
          this.renderNextFrame);

      if (this.camera) {
        lastCameraPosition.copy(this.camera.position);
        lastCameraOrientation.copy(this.camera.quaternion);
      }

      renderCount++;
      return shouldRender
    }
  })()

  render = (function () {
    return function () {
      if (
        !this.initialized ||
        !this.splatRenderReady ||
        this.isDisposingOrDisposed()
      )
        return

      const hasRenderables = (threeScene) => {
        for (let child of threeScene.children) {
          if (child.visible) return true
        }
        return false
      };

      const savedAuoClear = this.renderer.autoClear;
      if (hasRenderables(this.threeScene)) {
        this.renderer.render(this.threeScene, this.camera);
        this.renderer.autoClear = false;
      }
      this.renderer.render(this.splatMesh, this.camera);
      this.renderer.autoClear = false;
      if (this.sceneHelper.getFocusMarkerOpacity() > 0.0)
        this.renderer.render(this.sceneHelper.focusMarker, this.camera);
      if (this.showControlPlane)
        this.renderer.render(this.sceneHelper.controlPlane, this.camera);
      this.renderer.autoClear = savedAuoClear;
    }
  })()


  update(renderer, camera) {
    // this.frame++
    const fpsDiv = document.getElementById('fps');
    if (fpsDiv) {
      fpsDiv.textContent = `FPS: ${this.currentFPS}`;
    }

    if(this.frame >= this.totalFrames) 
        this.frame = 0;
    
    if (this.dropInMode) this.updateForDropInMode(renderer, camera);

    if (
      !this.initialized ||
      !this.splatRenderReady ||
      this.isDisposingOrDisposed()
    )
      return

    if (this.controls) {
      this.controls.update();
      if (this.camera.isOrthographicCamera && !this.usingExternalCamera) {
        Viewer.setCameraPositionFromZoom(
          this.camera,
          this.camera,
          this.controls
        );
      }
    }
    this.runMorphUpdate();
    this.runSplatSort(true,true);

    this.updateForRendererSizeChanges();
    this.updateSplatMesh();
    this.updateMeshCursor();
    this.updateFPS();
    this.timingSensitiveUpdates();
    // this.updateInfoPanel()
    this.updateControlPlane();
  }

  sortedIndexes
  updateForDropInMode(renderer, camera) {
    this.renderer = renderer;
    if (this.splatMesh) this.splatMesh.setRenderer(this.renderer);
    this.camera = camera;
    if (this.controls) this.controls.object = camera;
    this.init();
  }

  lastCalcTime = getCurrentTime()
  fpsFrameCount = 0
  updateFPS = () => {
    if (
      this.consecutiveRenderFrames >
      CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION
    ) {
      const currentTime = getCurrentTime();
      const calcDelta = currentTime - this.lastCalcTime;
      if (calcDelta >= 1.0) {
        this.currentFPS = this.fpsFrameCount;
        this.fpsFrameCount = 0;
        this.lastCalcTime = currentTime;
      } else {
        this.fpsFrameCount++;
      }
    } else {
      this.currentFPS = null;
    }
  }

  updateForRendererSizeChanges = (function () {
    const lastRendererSize = new Vector2();
    const currentRendererSize = new Vector2();
    let lastCameraOrthographic;

    return function () {
      if (!this.usingExternalCamera) {
        this.renderer.getSize(currentRendererSize);
        if (
          lastCameraOrthographic === undefined ||
          lastCameraOrthographic !== this.camera.isOrthographicCamera ||
          currentRendererSize.x !== lastRendererSize.x ||
          currentRendererSize.y !== lastRendererSize.y
        ) {
          if (this.camera.isOrthographicCamera) {
            this.camera.left = -currentRendererSize.x / 2.0;
            this.camera.right = currentRendererSize.x / 2.0;
            this.camera.top = currentRendererSize.y / 2.0;
            this.camera.bottom = -currentRendererSize.y / 2.0;
          } else {
            this.camera.aspect = currentRendererSize.x / currentRendererSize.y;
          }
          this.camera.updateProjectionMatrix();
          lastRendererSize.copy(currentRendererSize);
          lastCameraOrthographic = this.camera.isOrthographicCamera;
        }
      }
    }
  })()

  timingSensitiveUpdates = (function () {
    let lastUpdateTime;

    return function () {
      const currentTime = getCurrentTime();
      if (!lastUpdateTime) lastUpdateTime = currentTime;
      const timeDelta = currentTime - lastUpdateTime;

      this.updateCameraTransition(currentTime);
      this.updateFocusMarker(timeDelta);

      lastUpdateTime = currentTime;
    }
  })()

  tempCameraTarget = new Vector3()
  toPreviousTarget = new Vector3()
  toNextTarget = new Vector3()
  updateCameraTransition = (currentTime) => {
    if (this.transitioningCameraTarget) {
      this.toPreviousTarget
        .copy(this.previousCameraTarget)
        .sub(this.camera.position)
        .normalize();
      this.toNextTarget
        .copy(this.nextCameraTarget)
        .sub(this.camera.position)
        .normalize();
      const rotationAngle = Math.acos(
        this.toPreviousTarget.dot(this.toNextTarget)
      );
      const rotationSpeed = (rotationAngle / (Math.PI / 3)) * 0.65 + 0.3;
      const t =
        (rotationSpeed / rotationAngle) *
        (currentTime - this.transitioningCameraTargetStartTime);
      this.tempCameraTarget
        .copy(this.previousCameraTarget)
        .lerp(this.nextCameraTarget, t);
      this.camera.lookAt(this.tempCameraTarget);
      this.controls.target.copy(this.tempCameraTarget);
      if (t >= 1.0) {
        this.transitioningCameraTarget = false;
      }
    }
  }

  updateFocusMarker = (function () {
    const renderDimensions = new Vector2();
    let wasTransitioning = false;

    return function (timeDelta) {
      this.getRenderDimensions(renderDimensions);
      if (this.transitioningCameraTarget) {
        this.sceneHelper.setFocusMarkerVisibility(true);
        const currentFocusMarkerOpacity = Math.max(
          this.sceneHelper.getFocusMarkerOpacity(),
          0.0
        );
        let newFocusMarkerOpacity = Math.min(
          currentFocusMarkerOpacity + FOCUS_MARKER_FADE_IN_SPEED * timeDelta,
          1.0
        );
        this.sceneHelper.setFocusMarkerOpacity(newFocusMarkerOpacity);
        this.sceneHelper.updateFocusMarker(
          this.nextCameraTarget,
          this.camera,
          renderDimensions
        );
        wasTransitioning = true;
        this.forceRenderNextFrame();
      } else {
        let currentFocusMarkerOpacity;
        if (wasTransitioning) currentFocusMarkerOpacity = 1.0;
        else
          currentFocusMarkerOpacity = Math.min(
            this.sceneHelper.getFocusMarkerOpacity(),
            1.0
          );
        if (currentFocusMarkerOpacity > 0) {
          this.sceneHelper.updateFocusMarker(
            this.nextCameraTarget,
            this.camera,
            renderDimensions
          );
          let newFocusMarkerOpacity = Math.max(
            currentFocusMarkerOpacity - FOCUS_MARKER_FADE_OUT_SPEED * timeDelta,
            0.0
          );
          this.sceneHelper.setFocusMarkerOpacity(newFocusMarkerOpacity);
          if (newFocusMarkerOpacity === 0.0)
            this.sceneHelper.setFocusMarkerVisibility(false);
        }
        if (currentFocusMarkerOpacity > 0.0) this.forceRenderNextFrame();
        wasTransitioning = false;
      }
    }
  })()

  updateMeshCursor = (function () {
    const outHits = [];
    const renderDimensions = new Vector2();

    return function () {
      if (this.showMeshCursor) {
        this.forceRenderNextFrame();
        this.getRenderDimensions(renderDimensions);
        outHits.length = 0;
        this.raycaster.setFromCameraAndScreenPosition(
          this.camera,
          this.mousePosition,
          renderDimensions
        );
        this.raycaster.intersectSplatMesh(this.splatMesh, outHits);
        if (outHits.length > 0) {
          this.sceneHelper.setMeshCursorVisibility(true);
          this.sceneHelper.positionAndOrientMeshCursor(
            outHits[0].origin,
            this.camera
          );
        } else {
          this.sceneHelper.setMeshCursorVisibility(false);
        }
      } else {
        if (this.sceneHelper.getMeschCursorVisibility())
          this.forceRenderNextFrame();
        this.sceneHelper.setMeshCursorVisibility(false);
      }
    }
  })()

  updateInfoPanel = (function () {
    const renderDimensions = new Vector2();

    return function () {
      if (!this.showInfo) return
      const splatCount = this.splatMesh.getSplatCount();
      this.getRenderDimensions(renderDimensions);
      this.controls ? this.controls.target : null;
      this.showMeshCursor
        ? this.sceneHelper.meshCursor.position
        : null;
      splatCount > 0 ? (this.splatRenderCount / splatCount) * 100 : 0;
      // this.infoPanel.update(
      //   renderDimensions,
      //   this.camera.position,
      //   cameraLookAtPosition,
      //   this.camera.up,
      //   this.camera.isOrthographicCamera,
      //   meshCursorPosition,
      //   this.currentFPS || 'N/A',
      //   splatCount,
      //   this.splatRenderCount,
      //   splatRenderCountPct,
      //   this.lastSortTime,
      //   this.focalAdjustment,
      //   this.splatMesh.getSplatScale(),
      //   this.splatMesh.getPointCloudModeEnabled()
      // )
    }
  })()

  updateControlPlane() {
    if (this.showControlPlane) {
      this.sceneHelper.setControlPlaneVisibility(true);
      this.sceneHelper.positionAndOrientControlPlane(
        this.controls.target,
        this.camera.up
      );
    } else {
      this.sceneHelper.setControlPlaneVisibility(false);
    }
  }

  mvpMatrix = new Matrix4()
  cameraPositionArray = []
  lastSortViewDir = new Vector3(0, 0, -1)
  sortViewDir = new Vector3(0, 0, -1)
  lastSortViewPos = new Vector3()
  sortViewOffset = new Vector3()
  queuedSorts = []

  partialSorts = [
    {
      angleThreshold: 0.55,
      sortFractions: [0.125, 0.33333, 0.75]
    },
    {
      angleThreshold: 0.65,
      sortFractions: [0.33333, 0.66667]
    },
    {
      angleThreshold: 0.8,
      sortFractions: [0.5]
    }
  ]
  runSplatSort = (force = false, forceSortAll = false) => {
    if (!this.initialized) return Promise.resolve(false)
    if (this.sortRunning) return Promise.resolve(true)
    if (this.splatMesh.getSplatCount() <= 0) {
      this.splatRenderCount = 0;
      return Promise.resolve(false)
    }

    let angleDiff = 0;
    let positionDiff = 0;
    let needsRefreshForRotation = false;
    let needsRefreshForPosition = false;

    this.sortViewDir.set(0, 0, -1).applyQuaternion(this.camera.quaternion);
    angleDiff = this.sortViewDir.dot(this.lastSortViewDir);
    positionDiff = this.sortViewOffset
      .copy(this.camera.position)
      .sub(this.lastSortViewPos)
      .length();

    if (!force) {
      if (!this.splatMesh.dynamicMode && this.queuedSorts.length === 0) {
        if (angleDiff <= 0.99) needsRefreshForRotation = true;
        if (positionDiff >= 1.0) needsRefreshForPosition = true;
        if (!needsRefreshForRotation && !needsRefreshForPosition)
          return Promise.resolve(false)
      }
    }

    this.sortRunning = true;
    let { splatRenderCount, shouldSortAll } = this.gatherSceneNodesForSort();
    shouldSortAll = shouldSortAll || forceSortAll;
    this.splatRenderCount = splatRenderCount;

    this.mvpMatrix.copy(this.camera.matrixWorld).invert();
    const mvpCamera = this.perspectiveCamera || this.camera;
    this.mvpMatrix.premultiply(mvpCamera.projectionMatrix);
    if (!this.splatMesh.dynamicMode)
      this.mvpMatrix.multiply(this.splatMesh.matrixWorld);

    let gpuAcceleratedSortPromise = Promise.resolve(true);
    if (
      this.gpuAcceleratedSort &&
      (this.queuedSorts.length <= 1 || this.queuedSorts.length % 2 === 0)
    ) {
      gpuAcceleratedSortPromise = this.splatMesh.computeDistancesOnGPU(
        this.mvpMatrix,
        this.sortWorkerPrecomputedDistances
      );
    }

    gpuAcceleratedSortPromise.then(() => {
      if (this.queuedSorts.length === 0) {
        if (this.splatMesh.dynamicMode || shouldSortAll) {
          this.queuedSorts.push(this.splatRenderCount);
        } else {
          for (let partialSort of this.partialSorts) {
            if (angleDiff < partialSort.angleThreshold) {
              for (let sortFraction of partialSort.sortFractions) {
                this.queuedSorts.push(
                  Math.floor(this.splatRenderCount * sortFraction)
                );
              }
              break
            }
          }
          this.queuedSorts.push(this.splatRenderCount);
        }
      }
      let sortCount = Math.min(this.queuedSorts.shift(), this.splatRenderCount);
      this.splatSortCount = sortCount;

      this.cameraPositionArray[0] = this.camera.position.x;
      this.cameraPositionArray[1] = this.camera.position.y;
      this.cameraPositionArray[2] = this.camera.position.z;

      const sortMessage = {
        modelViewProj: this.mvpMatrix.elements,
        cameraPosition: this.cameraPositionArray,
        splatRenderCount: this.splatRenderCount,
        splatSortCount: sortCount,
        usePrecomputedDistances: this.gpuAcceleratedSort
      };
      if (this.splatMesh.dynamicMode) {
        this.splatMesh.fillTransformsArray(this.sortWorkerTransforms);
      }
      if (!this.sharedMemoryForWorkers) {
        sortMessage.indexesToSort = this.sortWorkerIndexesToSort;
        sortMessage.transforms = this.sortWorkerTransforms;
        if (this.gpuAcceleratedSort) {
          sortMessage.precomputedDistances = this.sortWorkerPrecomputedDistances;
        }
      }

      this.sortPromise = new Promise((resolve) => {
        this.sortPromiseResolver = resolve;
      });

      if (this.preSortMessages.length > 0) {
        this.preSortMessages.forEach((message) => {
          this.sortWorker.postMessage(message);
        });
        this.preSortMessages = [];
      }
      this.sortWorker.postMessage({
        sort: sortMessage
      });

      if (this.queuedSorts.length === 0) {
        this.lastSortViewPos.copy(this.camera.position);
        this.lastSortViewDir.copy(this.sortViewDir);
      }

      return true
    });

    return gpuAcceleratedSortPromise
  }

  /**
   * Determine which splats to render by checking which are inside or close to the view frustum
   */
  gatherSceneNodesForSort = (function () {
    const nodeRenderList = [];
    let allSplatsSortBuffer = null;
    const tempVectorYZ = new Vector3();
    const tempVectorXZ = new Vector3();
    const tempVector = new Vector3();
    const modelView = new Matrix4();
    const baseModelView = new Matrix4();
    const sceneTransform = new Matrix4();
    const renderDimensions = new Vector3();
    const forward = new Vector3(0, 0, -1);

    const tempMax = new Vector3();
    const nodeSize = (node) => {
      return tempMax.copy(node.max).sub(node.min).length()
    };

    return function (gatherAllNodes = false) {
      this.getRenderDimensions(renderDimensions);
      const cameraFocalLength =
        renderDimensions.y /
        2.0 /
        Math.tan((this.camera.fov / 2.0) * MathUtils.DEG2RAD);
      const fovXOver2 = Math.atan(renderDimensions.x / 2.0 / cameraFocalLength);
      const fovYOver2 = Math.atan(renderDimensions.y / 2.0 / cameraFocalLength);
      const cosFovXOver2 = Math.cos(fovXOver2);
      const cosFovYOver2 = Math.cos(fovYOver2);

      const splatTree = this.splatMesh.getSplatTree();

      if (splatTree) {
        baseModelView.copy(this.camera.matrixWorld).invert();
        if (!this.splatMesh.dynamicMode)
          baseModelView.multiply(this.splatMesh.matrixWorld);

        let nodeRenderCount = 0;
        let splatRenderCount = 0;

        for (let s = 0; s < splatTree.subTrees.length; s++) {
          const subTree = splatTree.subTrees[s];
          modelView.copy(baseModelView);
          if (this.splatMesh.dynamicMode) {
            this.splatMesh.getSceneTransform(s, sceneTransform);
            modelView.multiply(sceneTransform);
          }
          const nodeCount = subTree.nodesWithIndexes.length;
          for (let i = 0; i < nodeCount; i++) {
            const node = subTree.nodesWithIndexes[i];
            if (
              !node.data ||
              !node.data.indexes ||
              node.data.indexes.length === 0
            )
              continue
            tempVector.copy(node.center).applyMatrix4(modelView);

            const distanceToNode = tempVector.length();
            tempVector.normalize();

            tempVectorYZ.copy(tempVector).setX(0).normalize();
            tempVectorXZ.copy(tempVector).setY(0).normalize();

            const cameraAngleXZDot = forward.dot(tempVectorXZ);
            const cameraAngleYZDot = forward.dot(tempVectorYZ);

            const ns = nodeSize(node);
            const outOfFovY = cameraAngleYZDot < cosFovYOver2 - 0.6;
            const outOfFovX = cameraAngleXZDot < cosFovXOver2 - 0.6;
            if (
              !gatherAllNodes &&
              (outOfFovX || outOfFovY) &&
              distanceToNode > ns
            ) {
              continue
            }
            splatRenderCount += node.data.indexes.length;
            nodeRenderList[nodeRenderCount] = node;
            node.data.distanceToNode = distanceToNode;
            nodeRenderCount++;
          }
        }

        nodeRenderList.length = nodeRenderCount;
        nodeRenderList.sort((a, b) => {
          if (a.data.distanceToNode < b.data.distanceToNode) return -1
          else return 1
        });

        let currentByteOffset = splatRenderCount * Constants$1.BytesPerInt;
        for (let i = 0; i < nodeRenderCount; i++) {
          const node = nodeRenderList[i];
          const windowSizeInts = node.data.indexes.length;
          const windowSizeBytes = windowSizeInts * Constants$1.BytesPerInt;
          let destView = new Uint32Array(
            this.sortWorkerIndexesToSort.buffer,
            currentByteOffset - windowSizeBytes,
            windowSizeInts
          );
          destView.set(node.data.indexes);
          currentByteOffset -= windowSizeBytes;
        }

        return {
          splatRenderCount: splatRenderCount,
          shouldSortAll: false
        }
      } else {
        const totalSplatCount = this.splatMesh.getSplatCount();
        if (
          !allSplatsSortBuffer ||
          allSplatsSortBuffer.length !== totalSplatCount
        ) {
          allSplatsSortBuffer = new Uint32Array(totalSplatCount);
          for (let i = 0; i < totalSplatCount; i++) {
            allSplatsSortBuffer[i] = i;
          }
        }
        this.sortWorkerIndexesToSort.set(allSplatsSortBuffer);
        return {
          splatRenderCount: totalSplatCount,
          shouldSortAll: true
        }
      }
    }
  })()

  getSplatMesh() {
    return this.splatMesh
  }

  /**
   * Get a reference to a splat scene.
   * @param {number} sceneIndex The index of the scene to which the reference will be returned
   * @return {SplatScene}
   */
  getSplatScene(sceneIndex) {
    return this.splatMesh.getScene(sceneIndex)
  }

  getSceneCount() {
    return this.splatMesh.getSceneCount()
  }

  isMobile() {
    return navigator.userAgent.includes('Mobi')
  }

  updateMorphTarget(inputMesh) {
    this.avatarMesh = inputMesh;
    this.splatMesh.flameModel = inputMesh;

    this.runMorphUpdate();
    this.splatMesh.gaussianSplatCount = this.gaussianSplatCount;
  }

  runMorphUpdate() {
    this.gaussianSplatCount = this.avatarMesh.geometry.attributes.position.count;
    var morphedMesh = new Float32Array(
      this.avatarMesh.geometry.attributes.position.array
    );
    const numBones = 5;
    this.splatMesh.bonesNum = numBones;

    this.skinModel.skeleton.update();
    this.boneRoot.updateMatrixWorld(true);
    if (this.splatMesh.geometry.getAttribute('splatIndex') && this.setSkinAttibutes === false) {

      this.setSkinAttibutes = true;
      const geometry = this.splatMesh.geometry;

      const skinIndexSource = this.skinModel.geometry.attributes.skinIndex;
      const skinWeightSource = this.skinModel.geometry.attributes.skinWeight;

      const newSkinIndex = new InstancedBufferAttribute(
          new skinIndexSource.array.constructor(skinIndexSource.array),
          4,
          skinIndexSource.normalized,
          1
      );

      const newSkinWeight = new InstancedBufferAttribute(
          new skinWeightSource.array.constructor(skinWeightSource.array),
          4,
          skinWeightSource.normalized,
          1
      );
      newSkinIndex.setUsage(DynamicDrawUsage);
      newSkinWeight.setUsage(DynamicDrawUsage);
      geometry.setAttribute('skinIndex', newSkinIndex);
      geometry.setAttribute('skinWeight', newSkinWeight);
    }

    this.splatMesh.morphedMesh = morphedMesh;

    let splatNum = this.splatMesh.morphedMesh.length / 3;
    if (this.splatMesh.splatDataTextures['flameModel'] != undefined) {
      this.splatMesh.updateTetureAfterBSAndSkeleton(0, splatNum - 1, false);
    }
  }
}

/**
 * GaussianSplatRenderer
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * 
 * High-level orchestration class that:
 * - Loads ZIP assets via fetch
 * - Unpacks with JSZip
 * - Creates Viewer instance
 * - Loads FLAME/skin models
 * - Runs the render loop
 */


// Create logger for this module
const logger$1 = getLogger('GaussianSplatRenderer');

// Configuration objects - these would normally be loaded from the ZIP
const charactorConfig = {
    camPos: { x: 0, y: 1.8, z: 1 },
    camRot: { x: -10, y: 0, z: 0 },
    backgroundColor: 'ffffff'
};

const motionConfig = {
    offset: {},
    scale: {}
};

// Animation configuration - defines how animation clips are distributed to states
// The animation.glb contains clips in order: hello(2), idle(1), listen(0), speak(6), think(3)
const animationConfig = {
    hello: { size: 2, isGroup: false },
    idle: { size: 1, isGroup: false },
    listen: { size: 0, isGroup: false },
    speak: { size: 6, isGroup: false },
    think: { size: 3, isGroup: true },
    other: []
};

/**
 * GaussianSplatRenderer - Main rendering class
 */
class GaussianSplatRenderer {
    /**
     * Factory method to create a new renderer instance
     *
     * @param {HTMLElement} container - DOM container for canvas
     * @param {string} assetPath - URL to character ZIP file
     * @param {object} [options={}] - Configuration options
     * @param {Function} [options.downloadProgress] - Download progress callback (0-1)
     * @param {Function} [options.loadProgress] - Load progress callback (0-1)
     * @param {Function} [options.getChatState] - Chat state provider function
     * @param {Function} [options.getExpressionData] - Expression data provider function
     * @param {string} [options.backgroundColor] - Background color (hex string)
     * @returns {Promise<GaussianSplatRenderer>} Renderer instance
     * @throws {ValidationError} If parameters are invalid
     * @throws {NetworkError} If asset download fails
     * @throws {AssetLoadError} If asset loading/parsing fails
     * @throws {InitializationError} If renderer initialization fails
     */
    static async create(container, assetPath, options = {}) {

        try {
            // Validate required parameters
            validateDOMElement(container, 'container');
            validateUrl(assetPath);

            // Validate optional callbacks
            if (options.downloadProgress) {
                validateCallback(options.downloadProgress, 'options.downloadProgress', false);
            }
            if (options.loadProgress) {
                validateCallback(options.loadProgress, 'options.loadProgress', false);
            }
            if (options.getChatState) {
                validateCallback(options.getChatState, 'options.getChatState', false);
            }
            if (options.getExpressionData) {
                validateCallback(options.getExpressionData, 'options.getExpressionData', false);
            }
            if (options.backgroundColor) {
                validateHexColor(options.backgroundColor, 'options.backgroundColor');
            }

            logger$1.info('Initializing GaussianSplatRenderer', { assetPath });

            const characterPath = assetPath;

            // Parse character name from path
            let characterName;
            try {
                const url = new URL(characterPath, typeof window !== 'undefined' ? window.location.href : undefined);
                const pathname = url.pathname;
                const matches = pathname.match(/\/([^/]+?)\.zip/);
                characterName = matches?.[1];

                if (!characterName) {
                    throw new ValidationError(
                        'Character model name could not be extracted from path. Expected format: /path/name.zip',
                        'assetPath'
                    );
                }
            } catch (error) {
                if (error instanceof ValidationError) {
                    throw error;
                }
                throw new ValidationError(
                    `Invalid asset path format: ${error.message}`,
                    'assetPath',
                    error
                );
            }

            // Show progress
            if (typeof NProgress !== 'undefined') {
                NProgress.start();
            }

            // Download ZIP file
            logger$1.info('Downloading asset ZIP', { path: characterPath });
            let characterZipResponse;
            try {
                characterZipResponse = await fetch(characterPath);
                if (!characterZipResponse.ok) {
                    throw new NetworkError(
                        `Failed to download asset: ${characterZipResponse.statusText}`,
                        characterZipResponse.status
                    );
                }
            } catch (error) {
                if (error instanceof NetworkError) {
                    throw error;
                }
                throw new NetworkError(
                    `Network error downloading asset: ${error.message}`,
                    0,
                    error
                );
            }

            // Report download progress
            if (options.downloadProgress) {
                try {
                    options.downloadProgress(1.0);
                } catch (error) {
                    logger$1.warn('Error in downloadProgress callback', error);
                }
            }

            if (options.loadProgress) {
                try {
                    options.loadProgress(0.1);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            if (typeof NProgress !== 'undefined') {
                NProgress.done();
            }

            // Parse array buffer
            let arrayBuffer;
            try {
                arrayBuffer = await characterZipResponse.arrayBuffer();
            } catch (error) {
                throw new NetworkError(
                    `Failed to read response data: ${error.message}`,
                    0,
                    error
                );
            }

            // Load ZIP with imported JSZip
            logger$1.debug('Unpacking ZIP archive');
            let zipData;
            try {
                zipData = await JSZip.loadAsync(arrayBuffer);
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to unpack ZIP archive: ${error.message}`,
                    characterPath,
                    error
                );
            }

            // Find folder name in ZIP
            let fileName = '';
            Object.values(zipData.files).forEach(file => {
                if (file.dir) {
                    fileName = file.name?.slice(0, file.name?.length - 1); // Remove trailing '/'
                }
            });

            if (!fileName) {
                throw new AssetLoadError(
                    'No folder found in ZIP archive. Expected ZIP to contain a folder with model files.',
                    characterPath
                );
            }

            logger$1.debug('Found model folder in ZIP', { fileName });

            // Create renderer instance
            logger$1.debug('Creating GaussianSplatRenderer instance');
            const renderer = new GaussianSplatRenderer(container, zipData);

            // Setup camera position (use object pool for temp vectors)
            const cameraPos = tempVector3A.set(
                charactorConfig.camPos?.x ?? 0,
                charactorConfig.camPos?.y ?? 0,
                charactorConfig.camPos?.z ?? 1
            );

            const cameraRotation = new Vector3(
                charactorConfig.camRot?.x ?? 0,
                charactorConfig.camRot?.y ?? 0,
                charactorConfig.camRot?.z ?? 0
            );

            logger$1.debug('Camera setup', {
                position: { x: cameraPos.x, y: cameraPos.y, z: cameraPos.z },
                rotation: { x: cameraRotation.x, y: cameraRotation.y, z: cameraRotation.z }
            });

            // Background color with validation
            let backgroundColor = 0xffffff;
            try {
                if (charactorConfig.backgroundColor) {
                    const parsed = parseInt(charactorConfig.backgroundColor, 16);
                    if (!isNaN(parsed)) {
                        backgroundColor = parsed;
                    } else {
                        logger$1.warn('Invalid backgroundColor in config, using default', {
                            value: charactorConfig.backgroundColor
                        });
                    }
                }
                if (options?.backgroundColor) {
                    if (renderer.isHexColorStrict(options.backgroundColor)) {
                        backgroundColor = parseInt(options.backgroundColor, 16);
                    } else {
                        logger$1.warn('Invalid backgroundColor option, using config value', {
                            value: options.backgroundColor
                        });
                    }
                }
            } catch (error) {
                logger$1.warn('Error parsing backgroundColor, using default', error);
            }

            logger$1.debug('Background color set', { backgroundColor: backgroundColor.toString(16) });

            // Store callbacks
            renderer.getChatState = options?.getChatState;
            renderer.getExpressionData = options?.getExpressionData;

            // Create Viewer with proper error handling
            logger$1.debug('Creating Viewer instance');
            try {
                renderer.viewer = new Viewer({
                    rootElement: container,
                    threejsCanvas: renderer._canvas,
                    cameraUp: [0, 1, 0],
                    initialCameraPosition: [cameraPos.x, cameraPos.y, cameraPos.z],
                    initialCameraRotation: [cameraRotation.x, cameraRotation.y, cameraRotation.z],
                    sphericalHarmonicsDegree: 0,
                    backgroundColor: backgroundColor
                });
            } catch (error) {
                throw new InitializationError(
                    `Failed to create Viewer instance: ${error.message}`,
                    error
                );
            }

            // Load model (non-FLAME mode only)
            logger$1.info('Loading model', { fileName });
            try {
                await renderer.loadModel(fileName, animationConfig, motionConfig);
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to load model: ${error.message}`,
                    fileName,
                    error
                );
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(0.2);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            // Load offset PLY
            logger$1.debug('Loading offset PLY file');
            let offsetFileUrl;
            try {
                offsetFileUrl = await renderer.unpackFileAsBlob(fileName + '/offset.ply');
            } catch (error) {
                throw new AssetLoadError(
                    `Failed to load offset.ply: ${error.message}`,
                    fileName + '/offset.ply',
                    error
                );
            }

            // Load iris occlusion configuration (optional)
            logger$1.debug('Checking for iris_occlusion.json');
            let irisOcclusionConfig = null;
            try {
                irisOcclusionConfig = await renderer._loadJsonFromZip(fileName + '/iris_occlusion.json');
                if (irisOcclusionConfig) {
                    logger$1.info('Iris occlusion configuration loaded', {
                        rightIrisRanges: irisOcclusionConfig.right_iris?.length ?? 0,
                        leftIrisRanges: irisOcclusionConfig.left_iris?.length ?? 0
                    });
                    renderer.irisOcclusionConfig = irisOcclusionConfig;
                    // Pass to viewer for material generation
                    renderer.viewer.irisOcclusionConfig = irisOcclusionConfig;
                } else {
                    logger$1.debug('No iris_occlusion.json found, iris occlusion will be disabled');
                }
            } catch (error) {
                // Log but don't fail - iris occlusion is optional
                logger$1.warn('Failed to load iris_occlusion.json, continuing without it', { error: error.message });
                renderer.irisOcclusionConfig = null;
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(0.3);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            // Add splat scene
            logger$1.debug('Adding splat scene');
            try {
                await renderer.viewer.addSplatScene(offsetFileUrl, {
                    progressiveLoad: true,
                    sharedMemoryForWorkers: false,
                    showLoadingUI: false,
                    format: SceneFormat.Ply
                });
            } catch (error) {
                throw new InitializationError(
                    `Failed to add splat scene: ${error.message}`,
                    error
                );
            }

            // Initial render
            try {
                renderer.render();
            } catch (error) {
                logger$1.error('Error in initial render', error);
                // Don't throw - render errors are non-fatal
            }

            // Progress callback with error isolation
            if (options.loadProgress) {
                try {
                    options.loadProgress(1);
                } catch (error) {
                    logger$1.warn('Error in loadProgress callback', error);
                }
            }

            logger$1.info('GaussianSplatRenderer initialized successfully');
            return renderer;

        } catch (error) {
            // Re-throw custom errors as-is
            if (error instanceof ValidationError ||
                error instanceof NetworkError ||
                error instanceof AssetLoadError ||
                error instanceof InitializationError) {
                logger$1.error('Initialization failed', { errorCode: error.code, message: error.message });
                throw error;
            }

            // Wrap unexpected errors
            logger$1.error('Unexpected error during initialization', error);
            throw new InitializationError(
                `Unexpected error initializing GaussianSplatRenderer: ${error.message}`,
                error
            );
        }
    }

    /**
     * @deprecated Use create() instead. This method is kept for backwards compatibility.
     * @param {HTMLElement} container - DOM container for canvas
     * @param {string} assetPath - URL to character ZIP file
     * @param {object} [options={}] - Configuration options
     * @returns {Promise<GaussianSplatRenderer>} Renderer instance
     */
    static async getInstance(container, assetPath, options = {}) {
        logger$1.warn('getInstance() is deprecated. Use create() instead. Each call creates a new instance.');
        return this.create(container, assetPath, options);
    }

    /**
     * Constructor - Creates a new GaussianSplatRenderer instance
     *
     * @param {HTMLElement} _container - DOM container element for the renderer
     * @param {JSZip} zipData - Loaded ZIP archive containing model data
     * @private - Use create() factory method instead
     */
    constructor(_container, zipData) {
        logger$1.debug('GaussianSplatRenderer constructor called');

        // Disposal tracking
        this._disposed = false;

        // BlobUrlManager for tracking blob URLs
        this._blobUrlManager = new BlobUrlManager();

        // ZIP file cache
        this.zipUrls = {
            urls: new Map(),
            zip: zipData
        };

        // State
        this.lastTime = 0;
        this.startTime = 0;
        this.expressionData = {};
        this.chatState = TYVoiceChatState.Idle;

        // Create instance-specific canvas
        this._canvas = null;
        if (typeof document !== 'undefined' && _container) {
            this._canvas = document.createElement('canvas');
            const { width, height } = _container.getBoundingClientRect();
            this._canvas.style.visibility = 'visible';
            this._canvas.width = width;
            this._canvas.height = height;
            _container.appendChild(this._canvas);
            logger$1.debug('Canvas setup', { width, height });
        }

        // Animation timing
        this.clock = new Clock();
        this.startTime = performance.now() / 1000.0;

        // These will be set during loading
        this.viewer = null;
        this.mixer = null;
        this.animManager = null;
        this.model = null;
        this.irisOcclusionConfig = null;
        this.motioncfg = null;
        this.getChatState = null;
        this.getExpressionData = null;

        logger$1.debug('GaussianSplatRenderer instance created');
    }

    /**
     * Assert renderer is not disposed
     * @private
     * @throws {ResourceDisposedError} If renderer has been disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new ResourceDisposedError('GaussianSplatRenderer has been disposed');
        }
    }

    /**
     * Dispose renderer and free all resources
     *
     * Properly cleans up:
     * - Model resources (mesh, animations, textures)
     * - Blob URLs to prevent memory leaks
     * - Viewer instance
     * - Canvas visibility
     *
     * @returns {void}
     */
    dispose() {
        if (this._disposed) {
            logger$1.warn('GaussianSplatRenderer.dispose() called on already disposed instance');
            return;
        }

        logger$1.info('Disposing GaussianSplatRenderer');

        // Hide and remove canvas
        if (this._canvas) {
            this._canvas.style.visibility = 'hidden';
            if (this._canvas.parentNode) {
                this._canvas.parentNode.removeChild(this._canvas);
            }
            this._canvas = null;
        }

        // Dispose model resources
        this.disposeModel();

        // Revoke all blob URLs using BlobUrlManager
        try {
            this._blobUrlManager?.dispose();
        } catch (error) {
            logger$1.error('Error disposing BlobUrlManager', error);
        }

        // Legacy blob URL cleanup (for URLs created before BlobUrlManager)
        if (this.zipUrls?.urls) {
            this.zipUrls.urls.forEach((value) => {
                try {
                    URL.revokeObjectURL(value);
                } catch (error) {
                    logger$1.warn('Error revoking blob URL', { url: value, error });
                }
            });
            this.zipUrls.urls.clear();
        }

        // Nullify references to aid GC
        this.viewer = null;
        this.mixer = null;
        this.animManager = null;
        this.model = null;
        this.motioncfg = null;
        this.getChatState = null;
        this.getExpressionData = null;
        this.zipUrls = null;

        // Mark as disposed
        this._disposed = true;

        // Clear singleton instance
        GaussianSplatRenderer.instance = undefined;

        logger$1.debug('GaussianSplatRenderer disposed successfully');
    }

    /**
     * Dispose model-specific resources
     *
     * Cleans up:
     * - Animation mixer and cached actions
     * - Animation manager
     * - Viewer instance
     *
     * @returns {void}
     */
    disposeModel() {
        logger$1.debug('Disposing model resources');

        // Dispose animation mixer
        if (this.mixer) {
            try {
                this.mixer.stopAllAction();
                if (this.viewer?.avatarMesh) {
                    this.mixer.uncacheRoot(this.viewer.avatarMesh);
                }
            } catch (error) {
                logger$1.error('Error disposing animation mixer', error);
            }
            this.mixer = null;
        }

        // Dispose animation manager
        if (this.animManager) {
            try {
                this.animManager.dispose();
            } catch (error) {
                logger$1.error('Error disposing animation manager', error);
            }
            this.animManager = null;
        }

        // Dispose viewer
        if (this.viewer) {
            try {
                this.viewer.dispose();
            } catch (error) {
                logger$1.error('Error disposing viewer', error);
            }
            this.viewer = null;
        }

        logger$1.debug('Model resources disposed');
    }

    /**
     * Get the Three.js camera
     * @returns {THREE.Camera}
     */
    getCamera() {
        return this.viewer?.camera;
    }

    /**
     * Update blendshape weights from action data
     * @param {object} actionData - Blendshape weights
     * @returns {object} Processed influence values
     */
    updateBS(actionData) {
        // Default influence values - all 52 ARKit blendshapes
        let influence = {
            browDownLeft: 0.0,
            browDownRight: 0.0,
            browInnerUp: 0.0,
            browOuterUpLeft: 0.0,
            browOuterUpRight: 0.0,
            mouthCheekPuff: 0.0,
            cheekSquintLeft: 0.0,
            cheekSquintRight: 0.0,
            eyeBlinkLeft: 0.0,
            eyeBlinkRight: 0.0,
            eyeLookDownLeft: 0.0,
            eyeLookDownRight: 0.0,
            eyeLookInLeft: 0.0,
            eyeLookInRight: 0.0,
            eyeLookOutLeft: 0.0,
            eyeLookOutRight: 0.0,
            eyeLookUpLeft: 0.0,
            eyeLookUpRight: 0.0,
            eyeSquintLeft: 0.0,
            eyeSquintRight: 0.0,
            eyeWideLeft: 0.0,
            eyeWideRight: 0.0,
            jawForward: 0.0,
            jawLeft: 0.0,
            jawOpen: 0.0,
            jawRight: 0.0,
            mouthClose: 0.0,
            mouthDimpleLeft: 0.0,
            mouthDimpleRight: 0.0,
            mouthFrownLeft: 0.0,
            mouthFrownRight: 0.0,
            mouthFunnel: 0.0,
            mouthLeft: 0.0,
            mouthLowerDownLeft: 0.0,
            mouthLowerDownRight: 0.0,
            mouthPressLeft: 0.0,
            mouthPressRight: 0.0,
            mouthPucker: 0.0,
            mouthRight: 0.0,
            mouthRollLower: 0.0,
            mouthRollUpper: 0.0,
            mouthShrugLower: 0.0,
            mouthShrugUpper: 0.0,
            mouthSmileLeft: 0.0,
            mouthSmileRight: 0.0,
            mouthStretchLeft: 0.0,
            mouthStretchRight: 0.0,
            mouthUpperUpLeft: 0.0,
            mouthUpperUpRight: 0.0,
            noseSneerLeft: 0.0,
            noseSneerRight: 0.0,
            tongueOut: 0.0
        };

        if (actionData != null) {
            influence = actionData;
        }

        return influence;
    }

    /**
     * Main render loop
     */
    render() {
        if (this.viewer && this.viewer.selfDrivenMode) {
            this.viewer.requestFrameId = requestAnimationFrame(() => this.render());

            const frameInfoInternal = 1.0 / 30.0;
            const currentTime = performance.now() / 1000;
            
            // Prevent division by zero if totalFrames is 0 or not set
            const totalFrames = this.viewer.totalFrames || 1;
            const calcDelta = (currentTime - this.startTime) % (totalFrames * frameInfoInternal);
            const frameIndex = Math.floor(calcDelta / frameInfoInternal);
            this.viewer.frame = frameIndex;

            // Update chat state
            if (this.getChatState) {
                this.chatState = this.getChatState();
                // DEBUG: Log state transitions
                if (!this._lastLoggedState || this._lastLoggedState !== this.chatState) {
                    logger$1.debug('Chat state changed', {
                        newState: this.chatState,
                        hasAnimManager: !!this.animManager
                    });
                    this._lastLoggedState = this.chatState;
                }
                this.animManager?.update(this.chatState);
            }

            // Update expression data
            if (this.getExpressionData) {
                this.expressionData = this.updateBS(this.getExpressionData());
            }

            // Animation mixer update
            if (!this.mixer || !this.animManager) {
                if (!this._warnedOnce) {
                    logger$1.warn('Mixer or animManager not initialized, skipping animation update', {
                        hasMixer: !!this.mixer,
                        hasAnimManager: !!this.animManager
                    });
                    this._warnedOnce = true;
                }
                // Still update expressions even without mixer/animManager
                this.setExpression();
            } else {
                const mixerUpdateDelta = this.clock.getDelta();
                this.mixer.update(mixerUpdateDelta);

                // Apply motion config offsets/scales
                if (this.motioncfg) {
                    for (const morphTarget in this.expressionData) {
                        const offset = this.motioncfg.offset?.[morphTarget];
                        const scale = this.motioncfg.scale?.[morphTarget];
                        if (offset !== undefined && scale !== undefined) {
                            this.expressionData[morphTarget] =
                                this.expressionData[morphTarget] * scale + offset;
                        }
                    }
                }

                this.setExpression();
            }

            // Update viewer
            this.viewer.update(this.viewer.renderer, this.viewer.camera);

            // Render if needed
            const shouldRender = this.viewer.shouldRender();
            if (this._renderLogCount <= 3) {
                logger$1.debug('shouldRender check', { shouldRender });
            }
            if (shouldRender) {
                this.viewer.render();
                this.viewer.consecutiveRenderFrames++;
            } else {
                this.viewer.consecutiveRenderFrames = 0;
            }

            this.viewer.renderNextFrame = false;
            this.viewer.selfDrivenModeRunning = true;
        } else {
            throw new Error('Cannot start viewer unless it is in self driven mode.');
        }
    }

    /**
     * Validate hex color string
     * @param {string} value - Color string to validate
     * @returns {boolean}
     */
    isHexColorStrict(value) {
        if (typeof value !== 'string') return false;
        const hexColorRegex = /^(#|0x)[0-9A-Fa-f]{6}$/i;
        return hexColorRegex.test(value);
    }

    /**
     * Apply expression data to mesh
     */
    setExpression() {
        // Update splat mesh blendshapes
        if (this.viewer?.splatMesh) {
            this.viewer.splatMesh.bsWeight = this.expressionData;
            
            // Update eye blink uniforms for smooth iris fade
            const material = this.viewer.splatMesh.material;
            if (material?.uniforms) {
                const eyeBlinkLeft = this.expressionData.eyeBlinkLeft || 0.0;
                const eyeBlinkRight = this.expressionData.eyeBlinkRight || 0.0;
                if (material.uniforms.eyeBlinkLeft) {
                    material.uniforms.eyeBlinkLeft.value = eyeBlinkLeft;
                }
                if (material.uniforms.eyeBlinkRight) {
                    material.uniforms.eyeBlinkRight.value = eyeBlinkRight;
                }
            }
        }

        // Update morph targets on avatar model
        if (this.model) {
            this.model.traverse((object) => {
                if (object.isMesh || object.isSkinnedMesh) {
                    const morphAttributes = object.geometry?.morphAttributes;
                    const hasMorphTargets = morphAttributes && Object.keys(morphAttributes).length > 0;
                    
                    if (hasMorphTargets) {
                        const morphTargetDictionary = object.morphTargetDictionary;
                        for (const morphTarget in morphTargetDictionary) {
                            const target = morphTargetDictionary[morphTarget];
                            const data = this.expressionData[morphTarget];
                            if (data !== undefined) {
                                object.morphTargetInfluences[target] = Math.max(0.0, Math.min(1.0, data));
                            }
                        }
                    }
                }
            });
        }
    }

    /**
     * Load model with animation
     * @param {string} pathName - Path within ZIP
     * @param {object} animationConfig - Animation configuration
     * @param {object} motionConfig - Motion configuration
     */
    async loadModel(pathName, animationConfig, motionConfig) {
        const [skinModel, aniclip, indexes] = await Promise.all([
            this.unpackAndLoadGlb(pathName + '/skin.glb'),
            this.unpackAndLoadGlb(pathName + '/animation.glb'),
            this.unpackAndLoadJson(pathName + '/vertex_order.json')
        ]);

        if (!this.viewer) {
            throw new Error('render viewer is not initialized');
        }

        let skinModelSkinnedMesh;
        let boneRoot;

        skinModel.traverse((object) => {
            if (object.isSkinnedMesh) {
                skinModelSkinnedMesh = object;
            }
            if (object instanceof Bone && object.name === 'hip') {
                boneRoot = object;
            }
        });

        this.viewer.sortedIndexes = indexes;

        if (skinModelSkinnedMesh) {
            this.viewer.gaussianSplatCount = skinModelSkinnedMesh.geometry.attributes.position.count;
        }

        this.viewer.avatarMesh = skinModel;
        this.viewer.skinModel = skinModelSkinnedMesh;
        this.viewer.boneRoot = boneRoot;

        // Setup animation
        this.mixer = new AnimationMixer(skinModel);
        this.animManager = new AnimationManager(this.mixer, aniclip, animationConfig);
        this.motioncfg = motionConfig;

        // Set totalFrames from animation clips or default to 1
        if (Array.isArray(aniclip) && aniclip.length > 0 && aniclip[0].duration) {
            this.viewer.totalFrames = Math.floor(aniclip[0].duration * 30); // 30 fps
        } else {
            this.viewer.totalFrames = 1;
        }
        logger$1.debug('Total frames calculated', { totalFrames: this.viewer.totalFrames });

        if (skinModelSkinnedMesh) {
            this.viewer.updateMorphTarget(skinModelSkinnedMesh);
        }

        this.viewer.threeScene.add(skinModel);
        skinModel.visible = false;

        if (skinModelSkinnedMesh) {
            skinModelSkinnedMesh.skeleton.computeBoneTexture();
        }
    }

    /**
     * Unpack file from ZIP and create a blob URL
     *
     * Uses BlobUrlManager to track blob URLs for automatic cleanup.
     * Caches URLs for repeated access to the same file.
     *
     * @param {string} path - Path to file within ZIP archive
     * @returns {Promise<string>} Blob URL to the file
     * @throws {AssetLoadError} If file cannot be unpacked
     */
    async unpackFileAsBlob(path) {
        this._assertNotDisposed();

        // Return cached URL if available
        if (this.zipUrls.urls.has(path)) {
            logger$1.debug('Returning cached blob URL', { path });
            return this.zipUrls.urls.get(path);
        }

        logger$1.debug('Unpacking file from ZIP', { path });

        // Extract file from ZIP
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            throw new AssetLoadError(
                `File not found in ZIP archive: ${path}`,
                path
            );
        }

        let modelFile;
        try {
            modelFile = await fileEntry.async('blob');
        } catch (error) {
            throw new AssetLoadError(
                `Failed to extract file from ZIP: ${error.message}`,
                path,
                error
            );
        }

        if (!modelFile) {
            throw new AssetLoadError(
                `File extracted but blob is empty: ${path}`,
                path
            );
        }

        // Create blob URL using BlobUrlManager for tracking
        const mimeType = this._getMimeType(path);
        const modelUrl = this._blobUrlManager.createBlobUrl(
            modelFile,
            mimeType,
            `zip:${path}`
        );

        // Cache for future access
        this.zipUrls.urls.set(path, modelUrl);
        logger$1.debug('Blob URL created and cached', { path, url: modelUrl.substring(0, 50) });

        return modelUrl;
    }

    /**
     * Load JSON file from ZIP archive
     *
     * @param {string} path - Path to JSON file within ZIP archive
     * @returns {Promise<Object|null>} Parsed JSON object, or null if file doesn't exist
     * @throws {ParseError} If JSON parsing fails
     * @private
     */
    async _loadJsonFromZip(path) {
        this._assertNotDisposed();

        logger$1.debug('Attempting to load JSON from ZIP', { path });

        // Check if file exists in ZIP
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            logger$1.debug('JSON file not found in ZIP, returning null', { path });
            return null;
        }

        // Extract file as text
        let jsonText;
        try {
            jsonText = await fileEntry.async('text');
        } catch (error) {
            throw new ParseError(
                `Failed to extract JSON file from ZIP: ${error.message}`,
                path,
                error
            );
        }

        // Parse JSON
        try {
            const jsonData = JSON.parse(jsonText);
            logger$1.debug('JSON file loaded successfully', { path });
            return jsonData;
        } catch (error) {
            throw new ParseError(
                `Failed to parse JSON file: ${error.message}`,
                path,
                error
            );
        }
    }

    /**
     * Unpack GLB file from ZIP and load it
     *
     * @param {string} path - Path to GLB file within ZIP archive
     * @returns {Promise<THREE.Group|THREE.AnimationClip[]>} Loaded GLTF model
     * @throws {AssetLoadError} If file cannot be unpacked or loaded
     */
    async unpackAndLoadGlb(path) {
        this._assertNotDisposed();

        // Return cached URL if available
        if (this.zipUrls.urls.has(path)) {
            logger$1.debug('Using cached GLB URL', { path });
            return this.LoadGLTF(this.zipUrls.urls.get(path));
        }

        logger$1.debug('Unpacking GLB from ZIP', { path });

        // Extract file from ZIP as ArrayBuffer
        const fileEntry = this.zipUrls.zip?.file(path);
        if (!fileEntry) {
            throw new AssetLoadError(
                `GLB file not found in ZIP archive: ${path}`,
                path
            );
        }

        let modelFile;
        try {
            modelFile = await fileEntry.async('arraybuffer');
        } catch (error) {
            throw new AssetLoadError(
                `Failed to extract GLB from ZIP: ${error.message}`,
                path,
                error
            );
        }

        if (!modelFile) {
            throw new AssetLoadError(
                `GLB extracted but ArrayBuffer is empty: ${path}`,
                path
            );
        }

        // Create blob URL using BlobUrlManager
        const blob = new Blob([modelFile], { type: 'model/gltf-binary' });
        const modelUrl = this._blobUrlManager.createBlobUrl(
            blob,
            'model/gltf-binary',
            `zip:${path}`
        );

        // Cache for future access
        this.zipUrls.urls.set(path, modelUrl);
        logger$1.debug('GLB blob URL created and cached', { path });

        return this.LoadGLTF(modelUrl);
    }

    /**
     * Get MIME type from file extension
     * @private
     * @param {string} path - File path
     * @returns {string} MIME type
     */
    _getMimeType(path) {
        const extension = path.split('.').pop()?.toLowerCase();
        const mimeTypes = {
            'ply': 'model/ply',
            'glb': 'model/gltf-binary',
            'gltf': 'model/gltf+json',
            'json': 'application/json',
            'bin': 'application/octet-stream',
            'png': 'image/png',
            'jpg': 'image/jpeg',
            'jpeg': 'image/jpeg'
        };
        return mimeTypes[extension] || 'application/octet-stream';
    }

    /**
     * Unpack and parse JSON file
     * @param {string} path - Path within ZIP
     * @returns {Promise<object>}
     */
    async unpackAndLoadJson(path) {
        const file = this.zipUrls.zip?.file(path);
        if (!file) {
            throw new Error(`File not found in ZIP: ${path}`);
        }
        const jsonFile = await file.async('string');
        if (!jsonFile) {
            throw new Error(`Failed to read file from ZIP: ${path}`);
        }
        return JSON.parse(jsonFile);
    }

    /**
     * Load GLTF file
     * @param {string} url - URL to GLTF/GLB file
     * @returns {Promise<THREE.Group|THREE.AnimationClip[]>}
     */
    async LoadGLTF(url) {
        return new Promise((resolve, reject) => {
            const loader = new GLTFLoader();
            loader.load(
                url,
                (gltf) => {
                    if (gltf.animations.length > 0) {
                        resolve(gltf.animations);
                    } else {
                        resolve(gltf.scene);
                    }
                },
                undefined,
                (error) => {
                    reject(error);
                }
            );
        });
    }
}

/**
 * FlameConstants
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * FLAME-specific constants for parametric head model.
 * 
 * Note: General engine constants (MaxScenes, etc.) are in enums/EngineConstants.js
 */

const Constants = {
    // FLAME model constants
    FlameBonesCount: 5,  // root, neck, jaw, leftEye, rightEye
    DefaultBlendshapeCount: 52,  // ARKit blendshapes
    
    // Texture sizes for FLAME data
    FlameModelTextureSize: { width: 4096, height: 2048 },
    BoneTextureSize: { width: 4, height: 32 },
    BoneWeightTextureSize: { width: 512, height: 512 }
};

/**
 * FLAME Utility Functions
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * Contains encoding functions and helpers for GPU texture data.
 */

/**
 * Encode float as uint32 for GPU texture storage
 * Uses Float32Array/Int32Array view trick to reinterpret float bits as integer
 */
const uintEncodedFloat = (function() {
    const floatView = new Float32Array(1);
    const int32View = new Int32Array(floatView.buffer);

    return function(f) {
        floatView[0] = f;
        return int32View[0];
    };
})();

/**
 * Constants for texture data layout
 */
const TextureConstants = {
    CENTER_COLORS_ELEMENTS_PER_TEXEL: 4,
    CENTER_COLORS_ELEMENTS_PER_SPLAT: 4,
    COVARIANCES_ELEMENTS_PER_TEXEL_STORED: 2,
    COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED: 4,
    COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED: 2,
    COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED: 4,
    COVARIANCES_ELEMENTS_PER_SPLAT: 6,
    SCALES_ROTATIONS_ELEMENTS_PER_TEXEL: 4,
    SCENE_INDEXES_ELEMENTS_PER_TEXEL: 1,
    MAX_TEXTURE_TEXELS: 4096 * 4096
};

/**
 * FlameTextureManager
 * 
 * Derived from gaussian-splat-renderer-for-lam
 * 
 * Manages GPU textures for FLAME parametric head model:
 * - Blendshape morph target data textures
 * - Bone matrix textures for skeleton animation
 * - LBS weight textures for skinning
 */


/**
 * Build the FLAME model texture containing blendshape positions
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh with morph targets
 * @param {THREE.ShaderMaterial} material - The splat material to update uniforms
 * @param {number} gaussianSplatCount - Number of gaussian splats
 * @returns {object} Texture data object
 */
function buildModelTexture(flameModel, material, gaussianSplatCount) {
    const flameModelTexSize = new Vector2(4096, 2048);

    const shapedMesh = flameModel.geometry.attributes.position.array;
    let shapedMeshArray = [];
    const pointNum = shapedMesh.length / 3;
    const bsLength = flameModel.geometry.morphAttributes.position.length;

    // Sort morph targets by dictionary order
    const morphTargetNames = Object.keys(flameModel.morphTargetDictionary);
    morphTargetNames.forEach((name) => {
        const originalIndex = flameModel.morphTargetDictionary[name];
        const bsMesh = flameModel.geometry.morphAttributes.position[originalIndex];
        shapedMeshArray = shapedMeshArray.concat(Array.from(bsMesh.array));
    });
    
    // Add base mesh positions
    shapedMeshArray = shapedMeshArray.concat(Array.from(shapedMesh));

    // Create texture data
    const flameModelData = new Float32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
    const flameModelDataInt = new Uint32Array(flameModelTexSize.x * flameModelTexSize.y * 4);
    
    for (let c = 0; c < pointNum * (bsLength + 1); c++) {
        flameModelData[c * 4 + 0] = shapedMeshArray[c * 3 + 0];
        flameModelData[c * 4 + 1] = shapedMeshArray[c * 3 + 1];
        flameModelData[c * 4 + 2] = shapedMeshArray[c * 3 + 2];

        flameModelDataInt[c * 4 + 0] = uintEncodedFloat(flameModelData[c * 4 + 0]);
        flameModelDataInt[c * 4 + 1] = uintEncodedFloat(flameModelData[c * 4 + 1]);
        flameModelDataInt[c * 4 + 2] = uintEncodedFloat(flameModelData[c * 4 + 2]);
    }

    const flameModelTex = new DataTexture(
        flameModelDataInt,
        flameModelTexSize.x,
        flameModelTexSize.y,
        RGBAIntegerFormat,
        UnsignedIntType
    );
    flameModelTex.internalFormat = 'RGBA32UI';
    flameModelTex.needsUpdate = true;

    // Update material uniforms
    material.uniforms.flameModelTexture.value = flameModelTex;
    material.uniforms.flameModelTextureSize.value.copy(flameModelTexSize);
    material.uniforms.gaussianSplatCount.value = gaussianSplatCount;
    material.uniformsNeedUpdate = true;

    return {
        data: flameModelDataInt,
        texture: flameModelTex,
        size: flameModelTexSize,
        baseData: { flameModelPos: flameModelData }
    };
}

/**
 * Build bone matrix texture for skeleton animation
 * @param {Float32Array} bonesMatrix - Flattened bone matrices
 * @param {number} bonesNum - Number of bones
 * @param {object} bsWeight - Blendshape weights object
 * @param {object} morphTargetDictionary - Maps blendshape names to indices
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {THREE.ShaderMaterial} material - The splat material
 * @param {boolean} useFlameModel - Use FLAME mode
 * @returns {object} Texture data object
 */
function buildBoneMatrixTexture(
    bonesMatrix,
    bonesNum,
    bsWeight,
    morphTargetDictionary,
    flameModel,
    material,
    useFlameModel
) {
    if (!bsWeight) return null;

    // bonesNum + expressionBSNum / 4 = 30, so texture height is 32
    const boneTextureSize = new Vector2(4, 32);
    const boneMatrixTextureData = new Float32Array(bonesMatrix);
    const boneMatrixTextureDataInt = new Uint32Array(boneTextureSize.x * boneTextureSize.y * 4);

    if (useFlameModel) {
        // Encode bone matrices
        for (let c = 0; c < bonesNum * 16; c++) {
            boneMatrixTextureDataInt[c] = uintEncodedFloat(boneMatrixTextureData[c]);
        }
        
        // Set skeleton uniforms
        if (flameModel && flameModel.skeleton) {
            material.uniforms.boneTexture0.value = flameModel.skeleton.boneTexture;
            material.uniforms.bindMatrix.value = flameModel.bindMatrix;
            material.uniforms.bindMatrixInverse.value = flameModel.bindMatrixInverse;
        }
    }

    // Encode blendshape weights
    for (const key in bsWeight) {
        if (Object.hasOwn(bsWeight, key)) {
            const value = bsWeight[key];
            const idx = morphTargetDictionary[key];
            boneMatrixTextureDataInt[idx + bonesNum * 16] = uintEncodedFloat(value);
        }
    }

    const boneMatrixTex = new DataTexture(
        boneMatrixTextureDataInt,
        boneTextureSize.x,
        boneTextureSize.y,
        RGBAIntegerFormat,
        UnsignedIntType
    );
    boneMatrixTex.internalFormat = 'RGBA32UI';
    boneMatrixTex.needsUpdate = true;

    material.uniforms.boneTexture.value = boneMatrixTex;
    material.uniforms.boneTextureSize.value.copy(boneTextureSize);
    material.uniformsNeedUpdate = true;

    return {
        data: boneMatrixTextureDataInt,
        texture: boneMatrixTex,
        size: boneTextureSize,
        baseData: { boneMatrix: boneMatrixTextureDataInt }
    };
}

/**
 * Update bone matrix texture with new animation data
 * @param {object} splatDataTextures - Texture data storage
 * @param {Float32Array} bonesMatrix - Updated bone matrices
 * @param {number} bonesNum - Number of bones
 * @param {object} bsWeight - Updated blendshape weights
 * @param {object} morphTargetDictionary - Blendshape name to index map
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {THREE.ShaderMaterial} material - The splat material
 * @param {boolean} updateFlameBoneMatrix - Whether to update bone matrices
 */
function updateBoneMatrixTexture(
    splatDataTextures,
    bonesMatrix,
    bonesNum,
    bsWeight,
    morphTargetDictionary,
    flameModel,
    material,
    updateFlameBoneMatrix = false
) {
    if (!bsWeight || !morphTargetDictionary) return;

    if (updateFlameBoneMatrix) {
        const boneMatrixTextureData = new Float32Array(bonesMatrix);
        for (let c = 0; c < bonesNum * 16; c++) {
            splatDataTextures.baseData['boneMatrix'][c] = uintEncodedFloat(boneMatrixTextureData[c]);
        }
    }

    // Update blendshape weights
    for (const key in bsWeight) {
        if (Object.hasOwn(bsWeight, key)) {
            const value = bsWeight[key];
            const idx = morphTargetDictionary[key];
            splatDataTextures.baseData['boneMatrix'][idx + bonesNum * 16] = uintEncodedFloat(value);
        }
    }

    // Update texture data
    splatDataTextures['boneMatrix']['texture'].data = splatDataTextures.baseData['boneMatrix'];
    splatDataTextures['boneMatrix']['texture'].needsUpdate = true;
    material.uniforms.boneTexture.value = splatDataTextures['boneMatrix']['texture'];

    // Update skeleton uniforms
    if (flameModel.skeleton) {
        material.uniforms.boneTexture0.value = flameModel.skeleton.boneTexture;
        material.uniforms.bindMatrix.value = flameModel.bindMatrix;
        material.uniforms.bindMatrixInverse.value = flameModel.bindMatrixInverse;
    }

    material.uniformsNeedUpdate = true;
}

/**
 * Build LBS weight texture for skin deformation
 * @param {THREE.SkinnedMesh} flameModel - The FLAME mesh
 * @param {Array} bonesWeight - Per-vertex bone weights array
 * @param {THREE.ShaderMaterial} material - The splat material
 * @returns {object} Texture data object
 */
function buildBoneWeightTexture(flameModel, bonesWeight, material) {
    const shapedMesh = flameModel.geometry.attributes.position.array;
    const pointNum = shapedMesh.length / 3;
    
    const boneWeightTextureSize = new Vector2(512, 512);
    const boneWeightTextureData = new Float32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);
    const boneWeightTextureDataInt = new Uint32Array(boneWeightTextureSize.x * boneWeightTextureSize.y * 4);

    for (let i = 0; i < pointNum; i++) {
        // Store 5 bone weights per vertex (2 texels)
        boneWeightTextureData[i * 8 + 0] = bonesWeight[i][0];
        boneWeightTextureData[i * 8 + 1] = bonesWeight[i][1];
        boneWeightTextureData[i * 8 + 2] = bonesWeight[i][2];
        boneWeightTextureData[i * 8 + 3] = bonesWeight[i][3];
        boneWeightTextureData[i * 8 + 4] = bonesWeight[i][4];

        boneWeightTextureDataInt[i * 8 + 0] = uintEncodedFloat(bonesWeight[i][0]);
        boneWeightTextureDataInt[i * 8 + 1] = uintEncodedFloat(bonesWeight[i][1]);
        boneWeightTextureDataInt[i * 8 + 2] = uintEncodedFloat(bonesWeight[i][2]);
        boneWeightTextureDataInt[i * 8 + 3] = uintEncodedFloat(bonesWeight[i][3]);
        boneWeightTextureDataInt[i * 8 + 4] = uintEncodedFloat(bonesWeight[i][4]);
    }

    const boneWeightTex = new DataTexture(
        boneWeightTextureDataInt,
        boneWeightTextureSize.x,
        boneWeightTextureSize.y,
        RGBAIntegerFormat,
        UnsignedIntType
    );
    boneWeightTex.internalFormat = 'RGBA32UI';
    boneWeightTex.needsUpdate = true;

    material.uniforms.boneWeightTexture.value = boneWeightTex;
    material.uniforms.boneWeightTextureSize.value.copy(boneWeightTextureSize);
    material.uniformsNeedUpdate = true;

    return {
        data: boneWeightTextureDataInt,
        texture: boneWeightTex,
        size: boneWeightTextureSize,
        baseData: { boneWeight: boneWeightTextureDataInt }
    };
}

/**
 * Get updated bone matrices from skeleton
 * @param {THREE.Skeleton} skeleton - The skeleton to read matrices from
 * @param {number} boneNum - Number of bones
 * @returns {Float32Array} Flattened bone matrices
 */
function getUpdatedBoneMatrices(skeleton, boneNum) {
    const updatedBoneMatrices = [];
    
    for (let j = 0; j < boneNum; j++) {
        const boneMatrix = skeleton.bones[j].matrixWorld.clone()
            .multiply(skeleton.boneInverses[j].clone());

        const elements = boneMatrix.elements;
        for (let i = 0; i < elements.length; i++) {
            updatedBoneMatrices.push(elements[i]);
        }
    }
    
    return new Float32Array(updatedBoneMatrices);
}

const FlameTextureManager = {
    buildModelTexture,
    buildBoneMatrixTexture,
    updateBoneMatrixTexture,
    buildBoneWeightTexture,
    getUpdatedBoneMatrices
};

/**
 * FlameAnimator - FLAME Parametric Head Model Animation Controller
 *
 * Derived from gaussian-splat-renderer-for-lam
 *
 * Manages FLAME (Faces Learned with an Articulated Model and Expressions) model animation:
 * - Skeletal bone rotation from FLAME parameters
 * - Blendshape weight updates for facial expressions
 * - Skeleton-mesh synchronization for gaussian splat rendering
 * - Linear blend skinning (LBS) with bone weights
 *
 * FLAME uses 5 bones: root, neck, jaw, left eye, right eye
 */


const logger = getLogger('FlameAnimator');

/**
 * FlameAnimator - Manages FLAME parametric head model animation
 *
 * Provides skeletal animation, blendshape morphing, and mesh deformation
 * for FLAME-based avatar heads with gaussian splatting rendering.
 */
class FlameAnimator {
    /**
     * Create a FlameAnimator instance
     *
     * @constructor
     */
    constructor() {
        /** @type {THREE.Skeleton|null} FLAME skeleton with 5 bones */
        this.skeleton = null;

        /** @type {THREE.Bone[]|null} Array of skeleton bones */
        this.bones = null;

        /** @type {Object|null} FLAME animation parameters (rotation, expr, neck_pose, jaw_pose, eyes_pose) */
        this.flameParams = null;

        /** @type {Array|null} Linear blend skinning weights */
        this.lbsWeight = null;

        /** @type {number} Current animation frame */
        this.frame = 0;

        /** @type {number} Total frames in animation sequence */
        this.totalFrames = 0;

        /** @type {boolean} Whether FLAME mode is enabled */
        this.useFlame = true;

        /** @type {THREE.SkinnedMesh|null} The FLAME avatar mesh */
        this.avatarMesh = null;

        /** @type {number} Number of gaussian splats in the mesh */
        this.gaussianSplatCount = 0;

        /** @type {boolean} Whether animator has been disposed */
        this._disposed = false;

        logger.debug('FlameAnimator instance created');
    }

    /**
     * Assert animator is not disposed
     * @private
     * @throws {ResourceDisposedError} If animator has been disposed
     */
    _assertNotDisposed() {
        if (this._disposed) {
            throw new ResourceDisposedError('FlameAnimator has been disposed');
        }
    }

    /**
     * Initialize animator with FLAME parameters and skeleton data
     *
     * Sets up the FLAME animation system with parameters for bone rotations,
     * expressions, and linear blend skinning weights.
     *
     * @param {Object} flameParams - FLAME animation parameters
     * @param {Array} flameParams.rotation - Root bone rotations per frame (axis-angle)
     * @param {Array} flameParams.expr - Expression blendshape weights per frame
     * @param {Array} flameParams.neck_pose - Neck bone rotations per frame
     * @param {Array} flameParams.jaw_pose - Jaw bone rotations per frame
     * @param {Array} flameParams.eyes_pose - Eye bone rotations per frame (6 values: left 3, right 3)
     * @param {Object|Array} boneTree - Skeleton hierarchy definition
     * @param {Array} lbsWeight - Linear blend skinning weights for each vertex
     * @param {THREE.SkinnedMesh} avatarMesh - The FLAME avatar mesh
     * @throws {ValidationError} If required parameters are missing or invalid
     * @returns {void}
     */
    initialize(flameParams, boneTree, lbsWeight, avatarMesh) {
        this._assertNotDisposed();

        // Validate required parameters
        try {
            validateRequiredProperties(flameParams, ['rotation', 'expr', 'neck_pose', 'jaw_pose', 'eyes_pose'], 'flameParams');
        } catch (error) {
            logger.error('Invalid flameParams', error);
            throw error;
        }

        if (!avatarMesh || !avatarMesh.geometry || !avatarMesh.geometry.attributes || !avatarMesh.geometry.attributes.position) {
            const error = new ValidationError(
                'avatarMesh must have geometry with position attribute',
                'avatarMesh'
            );
            logger.error('Invalid avatarMesh', error);
            throw error;
        }

        logger.info('Initializing FlameAnimator', {
            frameCount: flameParams.rotation?.length,
            splatCount: avatarMesh.geometry.attributes.position.count
        });

        this.flameParams = flameParams;
        this.lbsWeight = lbsWeight;
        this.avatarMesh = avatarMesh;

        // Calculate total frames from rotation data
        if (flameParams.rotation && Array.isArray(flameParams.rotation)) {
            this.totalFrames = flameParams.rotation.length;
            logger.debug('Animation has frames', { totalFrames: this.totalFrames });
        } else {
            logger.warn('No rotation data found, totalFrames set to 0');
            this.totalFrames = 0;
        }

        this.gaussianSplatCount = avatarMesh.geometry.attributes.position.count;

        // Build skeleton from bone tree
        try {
            this.buildSkeleton(boneTree);
            logger.debug('Skeleton built successfully', { boneCount: this.bones?.length });
        } catch (error) {
            logger.error('Failed to build skeleton', error);
            throw new ValidationError(
                `Failed to build skeleton: ${error.message}`,
                'boneTree',
                error
            );
        }
    }

    /**
     * Build skeleton from bone tree data
     * @param {object} boneTree - Skeleton hierarchy definition
     */
    buildSkeleton(boneTree) {
        if (!boneTree) return;

        this.bones = [];
        const boneInverses = [];

        // Create bones from tree structure
        const createBone = (boneData, parentBone = null) => {
            const bone = new Bone();
            bone.name = boneData.name || `bone_${this.bones.length}`;

            if (boneData.position) {
                bone.position.fromArray(boneData.position);
            }
            if (boneData.rotation) {
                bone.rotation.fromArray(boneData.rotation);
            }
            if (boneData.scale) {
                bone.scale.fromArray(boneData.scale);
            }

            if (parentBone) {
                parentBone.add(bone);
            }

            this.bones.push(bone);

            // Create inverse bind matrix
            const inverseMatrix = new Matrix4();
            if (boneData.inverseBindMatrix) {
                inverseMatrix.fromArray(boneData.inverseBindMatrix);
            } else {
                bone.updateMatrixWorld(true);
                inverseMatrix.copy(bone.matrixWorld).invert();
            }
            boneInverses.push(inverseMatrix);

            // Process children
            if (boneData.children) {
                boneData.children.forEach(child => createBone(child, bone));
            }
        };

        // If boneTree is array, create bones directly
        if (Array.isArray(boneTree)) {
            boneTree.forEach((boneData, index) => {
                const bone = new Bone();
                bone.name = boneData.name || `bone_${index}`;
                
                if (boneData.position) {
                    bone.position.fromArray(boneData.position);
                }
                
                this.bones.push(bone);
                
                const inverseMatrix = new Matrix4();
                if (boneData.inverseBindMatrix) {
                    inverseMatrix.fromArray(boneData.inverseBindMatrix);
                }
                boneInverses.push(inverseMatrix);
            });

            // Set up hierarchy (FLAME: root -> neck -> jaw, eyes)
            if (this.bones.length >= 5) {
                this.bones[0].add(this.bones[1]); // root -> neck
                this.bones[1].add(this.bones[2]); // neck -> jaw
                this.bones[1].add(this.bones[3]); // neck -> leftEye
                this.bones[1].add(this.bones[4]); // neck -> rightEye
            }
        } else if (boneTree.root) {
            createBone(boneTree.root);
        }

        // Create skeleton
        this.skeleton = new Skeleton(this.bones, boneInverses);
    }

    /**
     * Set bone rotation from axis-angle or quaternion representation
     *
     * Converts rotation data to quaternion and applies it to the bone.
     * Uses object pooling to avoid allocations in animation loop.
     *
     * @param {THREE.Bone} bone - Target bone to rotate
     * @param {Array<number>} angles - Rotation values (3 for axis-angle, 4 for quaternion)
     * @param {boolean} [isQuat=false] - Whether angles are quaternion [x, y, z, w]
     * @throws {ValidationError} If bone or angles are invalid
     * @returns {void}
     */
    setBoneRotation(bone, angles, isQuat = false) {
        this._assertNotDisposed();

        if (!bone || !angles || !Array.isArray(angles)) {
            throw new ValidationError(
                'bone and angles array are required',
                'bone/angles'
            );
        }

        // Use object pooling for temp objects
        const quaternion = quaternionPool.acquire();

        try {
            if (isQuat) {
                // Direct quaternion (XYZW format)
                if (angles.length < 4) {
                    throw new ValidationError('Quaternion requires 4 values', 'angles');
                }
                quaternion.set(angles[0], angles[1], angles[2], angles[3]);
            } else {
                // Axis-angle representation: [x, y, z] where magnitude is angle
                if (angles.length < 3) {
                    throw new ValidationError('Axis-angle requires 3 values', 'angles');
                }

                const axis = vector3Pool.acquire();
                try {
                    axis.set(angles[0], angles[1], angles[2]);
                    const angleInRadians = axis.length();
                    axis.normalize();
                    quaternion.setFromAxisAngle(axis, angleInRadians);
                } finally {
                    vector3Pool.release(axis);
                }
            }

            // Apply rotation to bone
            bone.quaternion.copy(quaternion);
            bone.updateMatrixWorld(true);
        } finally {
            quaternionPool.release(quaternion);
        }
    }

    /**
     * Update FLAME bones from current frame parameters
     *
     * Applies bone rotations for all 5 FLAME bones (root, neck, jaw, left eye, right eye)
     * from the current animation frame. Updates skeleton matrices and returns data
     * needed for mesh deformation.
     *
     * @returns {Object} Bone and blendshape data for rendering
     * @returns {Array} return.bsWeight - Expression blendshape weights for current frame
     * @returns {Float32Array} return.bonesMatrix - Updated bone transformation matrices
     * @returns {number} return.bonesNum - Number of bones (always 5 for FLAME)
     * @returns {Array} return.bonesWeight - LBS weights for vertices
     */
    updateFlameBones() {
        this._assertNotDisposed();

        if (!this.flameParams || !this.skeleton) {
            logger.warn('Cannot update bones: flameParams or skeleton not initialized');
            return {};
        }

        const frame = this.frame;

        // Get blendshape weights for this frame
        const bsWeight = this.flameParams['expr'][frame];

        // Apply bone rotations for current frame
        try {
            // Root bone rotation (global head orientation)
            const rootAngle = this.flameParams['rotation'][frame];
            this.setBoneRotation(this.skeleton.bones[0], rootAngle);

            // Neck rotation
            const neckAngle = this.flameParams['neck_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[1], neckAngle);

            // Jaw rotation
            const jawAngle = this.flameParams['jaw_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[2], jawAngle);

            // Eyes rotation (6 values: left eye xyz, right eye xyz)
            const eyesAngle = this.flameParams['eyes_pose'][frame];
            this.setBoneRotation(this.skeleton.bones[3], eyesAngle.slice(0, 3));          // Left eye
            this.setBoneRotation(this.skeleton.bones[4], eyesAngle.slice(3, 6));          // Right eye
        } catch (error) {
            logger.error('Error setting bone rotations', { frame, error });
            throw error;
        }

        // Update skeleton matrices after all rotations are set
        this.skeleton.update();

        // Get updated bone matrices for shader
        const numBones = 5;
        const bonesMatrix = FlameTextureManager.getUpdatedBoneMatrices(this.skeleton, numBones);

        return {
            bsWeight,
            bonesMatrix,
            bonesNum: numBones,
            bonesWeight: this.lbsWeight
        };
    }

    /**
     * Run morph update - main animation loop function
     * @param {SplatMesh} splatMesh - The gaussian splat mesh to update
     */
    runMorphUpdate(splatMesh) {
        const morphedMesh = new Float32Array(
            this.avatarMesh.geometry.attributes.position.array
        );

        splatMesh.gaussianSplatCount = this.gaussianSplatCount;
        splatMesh.bonesNum = 5;

        if (this.useFlame) {
            const updateData = this.updateFlameBones();
            splatMesh.bsWeight = updateData.bsWeight;
            splatMesh.bonesMatrix = updateData.bonesMatrix;
            splatMesh.bonesNum = updateData.bonesNum;
            splatMesh.bonesWeight = updateData.bonesWeight;
        }

        splatMesh.morphedMesh = morphedMesh;

        // Update textures
        const splatNum = splatMesh.morphedMesh.length / 3;
        if (splatMesh.splatDataTextures && splatMesh.splatDataTextures['flameModel']) {
            splatMesh.updateTextureAfterBSAndSkeleton(0, splatNum - 1, this.useFlame);
        }
    }

    /**
     * Set current animation frame
     *
     * @param {number} frame - Frame number to set (will wrap if exceeds totalFrames)
     * @throws {ValidationError} If frame is not a valid number
     * @returns {void}
     */
    setFrame(frame) {
        this._assertNotDisposed();

        if (typeof frame !== 'number' || isNaN(frame)) {
            throw new ValidationError('frame must be a valid number', 'frame');
        }

        if (this.totalFrames > 0) {
            this.frame = ((frame % this.totalFrames) + this.totalFrames) % this.totalFrames; // Handle negative
        } else {
            this.frame = 0;
        }
    }

    /**
     * Advance to next frame in animation sequence
     *
     * Automatically wraps to frame 0 after reaching totalFrames.
     *
     * @returns {void}
     */
    nextFrame() {
        this._assertNotDisposed();

        if (this.totalFrames > 0) {
            this.frame = (this.frame + 1) % this.totalFrames;
        }
    }

    /**
     * Get skeleton for external use
     *
     * @returns {THREE.Skeleton|null} The FLAME skeleton or null if not initialized
     */
    getSkeleton() {
        this._assertNotDisposed();
        return this.skeleton;
    }

    /**
     * Get current frame number
     *
     * @returns {number} Current animation frame index
     */
    getFrame() {
        this._assertNotDisposed();
        return this.frame;
    }

    /**
     * Get total frame count
     *
     * @returns {number} Total number of animation frames
     */
    getTotalFrames() {
        this._assertNotDisposed();
        return this.totalFrames;
    }

    /**
     * Dispose animator and free resources
     *
     * Properly cleans up:
     * - Skeleton and bones
     * - References to meshes and parameters
     *
     * @returns {void}
     */
    dispose() {
        if (this._disposed) {
            logger.warn('FlameAnimator.dispose() called on already disposed instance');
            return;
        }

        logger.info('Disposing FlameAnimator');

        // Dispose skeleton (bones are part of skeleton)
        if (this.skeleton) {
            this.skeleton.dispose();
            this.skeleton = null;
        }

        // Nullify all references to aid GC
        this.bones = null;
        this.flameParams = null;
        this.lbsWeight = null;
        this.avatarMesh = null;

        // Reset state
        this.frame = 0;
        this.totalFrames = 0;
        this.gaussianSplatCount = 0;

        // Mark as disposed
        this._disposed = true;

        logger.debug('FlameAnimator disposed successfully');
    }
}

export { ARKIT_BLENDSHAPES_COUNT, ARKitBlendshapes, AbortedPromiseError, AnimationManager, BASE_COMPONENT_COUNT$1 as BASE_COMPONENT_COUNT, BlobUrlManager, CENTER_COLORS_ELEMENTS_PER_SPLAT$1 as CENTER_COLORS_ELEMENTS_PER_SPLAT, CENTER_COLORS_ELEMENTS_PER_TEXEL$1 as CENTER_COLORS_ELEMENTS_PER_TEXEL, CONSECUTIVE_RENDERED_FRAMES_FOR_FPS_CALCULATION, COVARIANCES_ELEMENTS_PER_SPLAT$1 as COVARIANCES_ELEMENTS_PER_SPLAT, COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED$1 as COVARIANCES_ELEMENTS_PER_TEXEL_ALLOCATED, COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED$1 as COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_ALLOCATED, COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED$1 as COVARIANCES_ELEMENTS_PER_TEXEL_COMPRESSED_STORED, COVARIANCES_ELEMENTS_PER_TEXEL_STORED$1 as COVARIANCES_ELEMENTS_PER_TEXEL_STORED, Constants$1 as Constants, DefaultSphericalHarmonics8BitCompressionHalfRange, DefaultSphericalHarmonics8BitCompressionRange, DirectLoadError, EventEmitter, FLAME_BONES_COUNT, FOCUS_MARKER_FADE_IN_SPEED, FOCUS_MARKER_FADE_OUT_SPEED, FieldSize, FieldSizeStringMap, FlameAnimator, FlameBoneNames, Constants as FlameConstants, FlameTextureManager, FrameBudgetMonitor, GaussianSplatRenderer, Hello, Hit, INRIAV1PlyParser, Idle, InternalLoadType, Listen, LoaderStatus, LoaderUtils, LogLevel, Logger, LoggerLevel, MINIMUM_DISTANCE_TO_NEW_FOCAL_POINT, MIN_SPLAT_COUNT_TO_SHOW_SPLAT_TREE_LOADING_SPINNER, ObjectPool, PlyFormat, PlyLoader, PlyParser, PlyParserUtils, PoolScope, Ray, Raycaster, RenderLoop, RenderMode, SCALES_ROTATIONS_ELEMENTS_PER_TEXEL$1 as SCALES_ROTATIONS_ELEMENTS_PER_TEXEL, SCENE_FADEIN_RATE_FAST$1 as SCENE_FADEIN_RATE_FAST, SCENE_FADEIN_RATE_GRADUAL$1 as SCENE_FADEIN_RATE_GRADUAL, SCENE_INDEXES_ELEMENTS_PER_TEXEL$1 as SCENE_INDEXES_ELEMENTS_PER_TEXEL, SceneFormat, SceneRevealMode, Semver, Speak, SplatBuffer, SplatBufferGenerator, SplatGeometry, SplatMaterial, SplatMaterial2D, SplatMaterial3D, SplatMesh, SplatPartitioner, SplatRenderMode, SplatScene, SplatTree, State, THREE_CAMERA_FOV, TYVoiceChatState, TextureConstants, Think, TypedEventEmitter, UncompressedSplatArray, Viewer, abortablePromiseWithExtractedComponents, buildBoneMatrixTexture, buildBoneWeightTexture, buildModelTexture, clamp, configureForDevelopment, configureForProduction, convertBetweenCompressionLevels, copyBetweenBuffers$1 as copyBetweenBuffers, createTrackedBlobUrl, dataViewFloatForCompressionLevel$1 as dataViewFloatForCompressionLevel, delayedExecute, disposeAllMeshes, disposeAllPools, eulerPool, fetchWithProgress, floatToHalf, fromHalfFloat$1 as fromHalfFloat, fromHalfFloatToUint8$1 as fromHalfFloatToUint8, fromUint8$1 as fromUint8, fromUint8ToHalfFloat, getCurrentTime, getGlobalBlobUrlManager, getIOSSemever, getLogger, getPoolStats, getSphericalHarmonicsComponentCountForDegree, getUpdatedBoneMatrices, isIOS, matrix4Pool, nativePromiseWithExtractedComponents, quaternionPool, revokeTrackedBlobUrl, rgbaArrayToInteger, rgbaToInteger, sceneFormatFromPath, setGlobalLogLevel, tempMatrix4A, tempMatrix4B, tempQuaternionA, tempQuaternionB, tempVector3A, tempVector3B, tempVector3C, toHalfFloat$1 as toHalfFloat, toUint8$1 as toUint8, toUncompressedFloat$1 as toUncompressedFloat, uintEncodedFloat$1 as uintEncodedFloat, updateBoneMatrixTexture, validateArrayBuffer, validateAssetPath, validateCallback, validateDOMElement, validateEnum, validateFileExtension, validateHexColor, validateInteger, validateNumberInRange, validatePositiveInteger, validateRequiredProperties, validateUrl, vector3Pool };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3NwbGF0LWZsYW1lLWF2YXRhci1yZW5kZXJlci5lc20uanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9lbnVtcy9Mb2dMZXZlbC5qcyIsIi4uL3NyYy9lbnVtcy9SZW5kZXJNb2RlLmpzIiwiLi4vc3JjL2VudW1zL1NjZW5lRm9ybWF0LmpzIiwiLi4vc3JjL2VudW1zL1NjZW5lUmV2ZWFsTW9kZS5qcyIsIi4uL3NyYy9lbnVtcy9TcGxhdFJlbmRlck1vZGUuanMiLCIuLi9zcmMvZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzIiwiLi4vc3JjL3V0aWxzL0xvYWRlclV0aWxzLmpzIiwiLi4vc3JjL2Vycm9ycy9BcHBsaWNhdGlvbkVycm9yLmpzIiwiLi4vc3JjL3V0aWxzL0xvZ2dlci5qcyIsIi4uL3NyYy91dGlscy9VdGlsLmpzIiwiLi4vc3JjL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyIsIi4uL3NyYy91dGlscy9PYmplY3RQb29sLmpzIiwiLi4vc3JjL3V0aWxzL0Jsb2JVcmxNYW5hZ2VyLmpzIiwiLi4vc3JjL3V0aWxzL1JlbmRlckxvb3AuanMiLCIuLi9zcmMvdXRpbHMvRXZlbnRFbWl0dGVyLmpzIiwiLi4vc3JjL3JlbmRlcmVyL0FwcENvbnN0YW50cy5qcyIsIi4uL3NyYy9yZW5kZXJlci9BbmltYXRpb25NYW5hZ2VyLmpzIiwiLi4vc3JjL2NvcmUvU3BsYXRTY2VuZS5qcyIsIi4uL3NyYy9jb3JlL1NwbGF0R2VvbWV0cnkuanMiLCIuLi9zcmMvY29yZS9TcGxhdFRyZWUuanMiLCIuLi9zcmMvbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwuanMiLCIuLi9zcmMvbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwzRC5qcyIsIi4uL3NyYy9tYXRlcmlhbHMvU3BsYXRNYXRlcmlhbDJELmpzIiwiLi4vc3JjL2NvcmUvU3BsYXRNZXNoLmpzIiwiLi4vc3JjL2xvYWRlcnMvRGlyZWN0TG9hZEVycm9yLmpzIiwiLi4vc3JjL2J1ZmZlcnMvVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyIsIi4uL3NyYy9idWZmZXJzL1NwbGF0QnVmZmVyLmpzIiwiLi4vc3JjL2J1ZmZlcnMvU3BsYXRQYXJ0aXRpb25lci5qcyIsIi4uL3NyYy9idWZmZXJzL1NwbGF0QnVmZmVyR2VuZXJhdG9yLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5UGFyc2VyVXRpbHMuanMiLCIuLi9zcmMvbG9hZGVycy9JTlJJQVYxUGx5UGFyc2VyLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5UGFyc2VyLmpzIiwiLi4vc3JjL2xvYWRlcnMvUGx5TG9hZGVyLmpzIiwiLi4vc3JjL3JheWNhc3Rlci9SYXkuanMiLCIuLi9zcmMvcmF5Y2FzdGVyL0hpdC5qcyIsIi4uL3NyYy9yYXljYXN0ZXIvUmF5Y2FzdGVyLmpzIiwiLi4vc3JjL3dvcmtlci9Tb3J0V29ya2VyLmpzIiwiLi4vc3JjL2NvcmUvVmlld2VyLmpzIiwiLi4vc3JjL3JlbmRlcmVyL0dhdXNzaWFuU3BsYXRSZW5kZXJlci5qcyIsIi4uL3NyYy9mbGFtZS9GbGFtZUNvbnN0YW50cy5qcyIsIi4uL3NyYy9mbGFtZS91dGlscy5qcyIsIi4uL3NyYy9mbGFtZS9GbGFtZVRleHR1cmVNYW5hZ2VyLmpzIiwiLi4vc3JjL2ZsYW1lL0ZsYW1lQW5pbWF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExvZyBsZXZlbCBlbnVtZXJhdGlvbiBmb3IgY29udHJvbGxpbmcgdmVyYm9zaXR5XHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICovXHJcbmV4cG9ydCBjb25zdCBMb2dMZXZlbCA9IHtcclxuICAgIE5vbmU6IDAsXHJcbiAgICBFcnJvcjogMSxcclxuICAgIFdhcm5pbmc6IDIsXHJcbiAgICBJbmZvOiAzLFxyXG4gICAgRGVidWc6IDRcclxufTtcclxuIiwiLyoqXHJcbiAqIFJlbmRlciBtb2RlIGVudW1lcmF0aW9uXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICovXHJcbmV4cG9ydCBjb25zdCBSZW5kZXJNb2RlID0ge1xyXG4gICAgQWx3YXlzOiAwLFxyXG4gICAgT25DaGFuZ2U6IDEsXHJcbiAgICBOZXZlcjogMlxyXG59O1xyXG4iLCIvKipcclxuICogU2NlbmUgZm9ybWF0IGVudW1lcmF0aW9uIGZvciBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBTaW1wbGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgdXNhZ2UgLSBvbmx5IFBMWSBmb3JtYXQgaXMgc3VwcG9ydGVkLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNjZW5lRm9ybWF0ID0ge1xyXG4gICAgJ1BseSc6IDBcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgc2NlbmUgZm9ybWF0IGZyb20gZmlsZSBwYXRoXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gRmlsZSBwYXRoXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ8bnVsbH0gU2NlbmUgZm9ybWF0IG9yIG51bGwgaWYgdW5rbm93blxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHNjZW5lRm9ybWF0RnJvbVBhdGggPSAocGF0aCkgPT4ge1xyXG4gICAgaWYgKHBhdGguZW5kc1dpdGgoJy5wbHknKSkgcmV0dXJuIFNjZW5lRm9ybWF0LlBseTtcclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4iLCIvKipcclxuICogU2NlbmUgcmV2ZWFsIG1vZGUgZW51bWVyYXRpb25cclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNjZW5lUmV2ZWFsTW9kZSA9IHtcclxuICAgIERlZmF1bHQ6IDAsXHJcbiAgICBHcmFkdWFsOiAxLFxyXG4gICAgSW5zdGFudDogMlxyXG59O1xyXG4iLCIvKipcclxuICogU3BsYXQgcmVuZGVyIG1vZGUgZW51bWVyYXRpb25cclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFNwbGF0UmVuZGVyTW9kZSA9IHtcclxuICAgIFRocmVlRDogMCxcclxuICAgIFR3b0Q6IDFcclxufTtcclxuIiwiLyoqXHJcbiAqIEVuZ2luZUNvbnN0YW50c1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBDb3JlIGNvbnN0YW50cyBmb3IgR2F1c3NpYW4gU3BsYXQgcmVuZGVyaW5nLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBDb25zdGFudHMge1xyXG4gICAgc3RhdGljIERlZmF1bHRTcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiA9IDE2O1xyXG4gICAgc3RhdGljIE1lbW9yeVBhZ2VTaXplID0gNjU1MzY7XHJcbiAgICBzdGF0aWMgQnl0ZXNQZXJGbG9hdCA9IDQ7XHJcbiAgICBzdGF0aWMgQnl0ZXNQZXJJbnQgPSA0O1xyXG4gICAgc3RhdGljIE1heFNjZW5lcyA9IDMyO1xyXG4gICAgc3RhdGljIFByb2dyZXNzaXZlTG9hZFNlY3Rpb25TaXplID0gMjYyMTQ0O1xyXG4gICAgc3RhdGljIFByb2dyZXNzaXZlTG9hZFNlY3Rpb25EZWxheUR1cmF0aW9uID0gMTU7XHJcbiAgICBzdGF0aWMgU3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2UgPSAzO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlID0gQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlO1xyXG5cclxuLy8gU3BsYXRNZXNoIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNjtcclxuZXhwb3J0IGNvbnN0IENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFUID0gNDtcclxuXHJcbmV4cG9ydCBjb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEID0gNDtcclxuZXhwb3J0IGNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQgPSA0O1xyXG5leHBvcnQgY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEID0gNjtcclxuZXhwb3J0IGNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRCA9IDg7XHJcbmV4cG9ydCBjb25zdCBTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDE7XHJcblxyXG5leHBvcnQgY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfRkFTVCA9IDAuMDEyO1xyXG5leHBvcnQgY29uc3QgU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCA9IDAuMDAzO1xyXG5cclxuLy8gVmlld2VyIGNvbnN0YW50c1xyXG5leHBvcnQgY29uc3QgVEhSRUVfQ0FNRVJBX0ZPViA9IDUwO1xyXG5leHBvcnQgY29uc3QgTUlOSU1VTV9ESVNUQU5DRV9UT19ORVdfRk9DQUxfUE9JTlQgPSAwLjU7XHJcbmV4cG9ydCBjb25zdCBDT05TRUNVVElWRV9SRU5ERVJFRF9GUkFNRVNfRk9SX0ZQU19DQUxDVUxBVElPTiA9IDYwO1xyXG5leHBvcnQgY29uc3QgTUlOX1NQTEFUX0NPVU5UX1RPX1NIT1dfU1BMQVRfVFJFRV9MT0FESU5HX1NQSU5ORVIgPSAxNTAwMDAwO1xyXG5leHBvcnQgY29uc3QgRk9DVVNfTUFSS0VSX0ZBREVfSU5fU1BFRUQgPSAwLjQ7XHJcbmV4cG9ydCBjb25zdCBGT0NVU19NQVJLRVJfRkFERV9PVVRfU1BFRUQgPSAwLjEyO1xyXG5cclxuLy8gSW50ZXJuYWwgbG9hZCB0eXBlcyBmb3IgbG9hZGVyc1xyXG5leHBvcnQgY29uc3QgSW50ZXJuYWxMb2FkVHlwZSA9IHtcclxuICAgIERpcmVjdFRvU3BsYXRCdWZmZXI6IDAsXHJcbiAgICBEaXJlY3RUb1NwbGF0QXJyYXk6IDEsXHJcbiAgICBEb3dubG9hZEJlZm9yZVByb2Nlc3Npbmc6IDJcclxufTtcclxuXHJcbi8vIExvYWRlciBzdGF0dXNcclxuZXhwb3J0IGNvbnN0IExvYWRlclN0YXR1cyA9IHtcclxuICAgICdEb3dubG9hZGluZyc6IDAsXHJcbiAgICAnUHJvY2Vzc2luZyc6IDEsXHJcbiAgICAnRG9uZSc6IDJcclxufTtcclxuIiwiLyoqXHJcbiAqIExvYWRlclV0aWxzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIExvYWRlciB1dGlsaXRpZXMgZm9yIGRlY29kaW5nIHRleHQgYW5kIHJlc29sdmluZyBVUkxzLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBMb2FkZXJVdGlscyB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgVGV4dERlY29kZXIgaW5zdGVhZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZGVjb2RlVGV4dChhcnJheSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXJyYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmFsbGJhY2sgZm9yIGVudmlyb25tZW50cyB3aXRob3V0IFRleHREZWNvZGVyXHJcbiAgICAgICAgbGV0IHMgPSAnJztcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlsID0gYXJyYXkubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBJbXBsaWNpdGx5IGFzc3VtZXMgbGl0dGxlLWVuZGlhbi5cclxuICAgICAgICAgICAgcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFycmF5W2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIG1lcmdlcyBtdWx0aS1ieXRlIHV0Zi04IGNoYXJhY3RlcnMuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHMpKTtcclxuICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgLy8gc2VlICMxNjM1OCAtIGlnbm9yZSBkZWNvZGluZyBlcnJvcnNcclxuICAgICAgICAgICAgcmV0dXJuIHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBleHRyYWN0VXJsQmFzZSh1cmwpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHVybC5sYXN0SW5kZXhPZignLycpO1xyXG5cclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gJy4vJztcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybC5zbGljZSgwLCBpbmRleCArIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZXNvbHZlVVJMKHVybCwgcGF0aCkge1xyXG4gICAgICAgIC8vIEludmFsaWQgVVJMXHJcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnIHx8IHVybCA9PT0gJycpIHJldHVybiAnJztcclxuXHJcbiAgICAgICAgLy8gSG9zdCBSZWxhdGl2ZSBVUkxcclxuICAgICAgICBpZiAoL15odHRwcz86XFwvXFwvL2kudGVzdChwYXRoKSAmJiAvXlxcLy8udGVzdCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLyheaHR0cHM/OlxcL1xcL1teL10rKS4qL2ksICckMScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWJzb2x1dGUgVVJMIGh0dHA6Ly8saHR0cHM6Ly8sLy9cclxuICAgICAgICBpZiAoL14oaHR0cHM/Oik/XFwvXFwvL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBEYXRhIFVSSVxyXG4gICAgICAgIGlmICgvXmRhdGE6LiosLiokL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBCbG9iIFVSTFxyXG4gICAgICAgIGlmICgvXmJsb2I6LiokL2kudGVzdCh1cmwpKSByZXR1cm4gdXJsO1xyXG5cclxuICAgICAgICAvLyBSZWxhdGl2ZSBVUkxcclxuICAgICAgICByZXR1cm4gcGF0aCArIHVybDtcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogQXBwbGljYXRpb25FcnJvciAtIEJhc2UgZXJyb3IgY2xhc3MgZm9yIGFsbCBhcHBsaWNhdGlvbiBlcnJvcnNcclxuICpcclxuICogUHJvdmlkZXMgc3RydWN0dXJlZCBlcnJvciBoYW5kbGluZyB3aXRoIGVycm9yIGNvZGVzIGFuZCBjYXVzZSB0cmFja2luZy5cclxuICogQWxsIGRvbWFpbi1zcGVjaWZpYyBlcnJvcnMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBFcnJvclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFwcGxpY2F0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBBcHBsaWNhdGlvbkVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEh1bWFuLXJlYWRhYmxlIGVycm9yIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIC0gTWFjaGluZS1yZWFkYWJsZSBlcnJvciBjb2RlIGZvciBwcm9ncmFtbWF0aWMgaGFuZGxpbmdcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgZXJyb3IgKGZvciBlcnJvciBjaGFpbmluZylcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xyXG5cclxuICAgICAgICAvLyBDYXB0dXJlIHN0YWNrIHRyYWNlLCBleGNsdWRpbmcgY29uc3RydWN0b3IgY2FsbCBmcm9tIGl0XHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgZXJyb3IgdG8gSlNPTiBmb3IgbG9nZ2luZy90cmFuc21pc3Npb25cclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IEpTT04gcmVwcmVzZW50YXRpb24gb2YgZXJyb3JcclxuICAgICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxyXG4gICAgICAgICAgICBjb2RlOiB0aGlzLmNvZGUsXHJcbiAgICAgICAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxyXG4gICAgICAgICAgICBjYXVzZTogdGhpcy5jYXVzZSA/IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY2F1c2UubmFtZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuY2F1c2UubWVzc2FnZVxyXG4gICAgICAgICAgICB9IDogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0aW9uRXJyb3IgLSBUaHJvd24gd2hlbiBpbnB1dCB2YWxpZGF0aW9uIGZhaWxzXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGludmFsaWQgcGFyYW1ldGVycywgb3V0LW9mLXJhbmdlIHZhbHVlcywgb3IgbWFsZm9ybWVkIGRhdGEuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgVmFsaWRhdGlvbkVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIFZhbGlkYXRpb24gZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gTmFtZSBvZiB0aGUgZmllbGQgdGhhdCBmYWlsZWQgdmFsaWRhdGlvblxyXG4gICAgICogQHBhcmFtIHtFcnJvcn0gW2NhdXNlPW51bGxdIC0gT3JpZ2luYWwgZXJyb3IgdGhhdCBjYXVzZWQgdGhpcyB2YWxpZGF0aW9uIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGQsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdWQUxJREFUSU9OX0VSUk9SJywgY2F1c2UpO1xyXG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE5ldHdvcmtFcnJvciAtIFRocm93biB3aGVuIG5ldHdvcmsgb3BlcmF0aW9ucyBmYWlsXHJcbiAqXHJcbiAqIFVzZWQgZm9yIGZldGNoIGZhaWx1cmVzLCB0aW1lb3V0cywgb3IgSFRUUCBlcnJvciByZXNwb25zZXMuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBOZXR3b3JrRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgTmV0d29ya0Vycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIE5ldHdvcmsgZXJyb3IgZGVzY3JpcHRpb25cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhdHVzQ29kZT0wXSAtIEhUVFAgc3RhdHVzIGNvZGUgKGlmIGFwcGxpY2FibGUpXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIG5ldHdvcmsgZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlID0gMCwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ05FVFdPUktfRVJST1InLCBjYXVzZSk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFzc2V0TG9hZEVycm9yIC0gVGhyb3duIHdoZW4gYXNzZXQgbG9hZGluZyBmYWlsc1xyXG4gKlxyXG4gKiBVc2VkIGZvciBmYWlsdXJlcyBsb2FkaW5nIG1vZGVscywgdGV4dHVyZXMsIG9yIG90aGVyIGFzc2V0IGZpbGVzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXNzZXRMb2FkRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIEFzc2V0TG9hZEVycm9yXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEFzc2V0IGxvYWQgZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFzc2V0UGF0aCAtIFBhdGggdG8gdGhlIGFzc2V0IHRoYXQgZmFpbGVkIHRvIGxvYWRcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgbG9hZCBmYWlsdXJlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGFzc2V0UGF0aCwgY2F1c2UgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgJ0FTU0VUX0xPQURfRVJST1InLCBjYXVzZSk7XHJcbiAgICAgICAgdGhpcy5hc3NldFBhdGggPSBhc3NldFBhdGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNvdXJjZURpc3Bvc2VkRXJyb3IgLSBUaHJvd24gd2hlbiBhdHRlbXB0aW5nIHRvIHVzZSBhIGRpc3Bvc2VkIHJlc291cmNlXHJcbiAqXHJcbiAqIFVzZWQgdG8gcHJldmVudCB1c2UtYWZ0ZXItZGlzcG9zZSBidWdzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VEaXNwb3NlZEVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJlc291cmNlRGlzcG9zZWRFcnJvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc291cmNlTmFtZSAtIE5hbWUgb2YgdGhlIGRpc3Bvc2VkIHJlc291cmNlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHJlc291cmNlTmFtZSkge1xyXG4gICAgICAgIHN1cGVyKFxyXG4gICAgICAgICAgICBgQ2Fubm90IHVzZSAke3Jlc291cmNlTmFtZX06IHJlc291cmNlIGhhcyBiZWVuIGRpc3Bvc2VkYCxcclxuICAgICAgICAgICAgJ1JFU09VUkNFX0RJU1BPU0VEX0VSUk9SJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZU5hbWUgPSByZXNvdXJjZU5hbWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXphdGlvbkVycm9yIC0gVGhyb3duIHdoZW4gaW5pdGlhbGl6YXRpb24gZmFpbHNcclxuICpcclxuICogVXNlZCB3aGVuIHJlcXVpcmVkIHNldHVwIHN0ZXBzIGZhaWwgb3IgcHJlcmVxdWlzaXRlcyBhcmUgbm90IG1ldC5cclxuICpcclxuICogQGV4dGVuZHMgQXBwbGljYXRpb25FcnJvclxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluaXRpYWxpemF0aW9uRXJyb3IgZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFuIEluaXRpYWxpemF0aW9uRXJyb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gSW5pdGlhbGl6YXRpb24gZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudCAtIE5hbWUgb2YgY29tcG9uZW50IHRoYXQgZmFpbGVkIHRvIGluaXRpYWxpemVcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtjYXVzZT1udWxsXSAtIE9yaWdpbmFsIGVycm9yIHRoYXQgY2F1c2VkIHRoaXMgaW5pdGlhbGl6YXRpb24gZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb21wb25lbnQsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdJTklUSUFMSVpBVElPTl9FUlJPUicsIGNhdXNlKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlRXJyb3IgLSBUaHJvd24gd2hlbiBwYXJzaW5nIGRhdGEgZmFpbHNcclxuICpcclxuICogVXNlZCBmb3IgbWFsZm9ybWVkIGZpbGUgZm9ybWF0cywgaW52YWxpZCBKU09OLCBvciBjb3JydXB0IGRhdGEuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFwcGxpY2F0aW9uRXJyb3JcclxuICovXHJcbmV4cG9ydCBjbGFzcyBQYXJzZUVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFBhcnNlRXJyb3JcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gUGFyc2UgZmFpbHVyZSBkZXNjcmlwdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGFUeXBlIC0gVHlwZSBvZiBkYXRhIGJlaW5nIHBhcnNlZCAoZS5nLiwgJ0pTT04nLCAnUExZJywgJ0dMQicpXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIHBhcnNlIGZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZGF0YVR5cGUsIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdQQVJTRV9FUlJPUicsIGNhdXNlKTtcclxuICAgICAgICB0aGlzLmRhdGFUeXBlID0gZGF0YVR5cGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb25maWd1cmF0aW9uRXJyb3IgLSBUaHJvd24gd2hlbiBjb25maWd1cmF0aW9uIGlzIGludmFsaWRcclxuICpcclxuICogVXNlZCBmb3IgaW52YWxpZCBzZXR0aW5ncywgbWlzc2luZyByZXF1aXJlZCBjb25maWd1cmF0aW9uLCBvciBjb25mbGljdGluZyBvcHRpb25zLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBcHBsaWNhdGlvbkVycm9yXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhdGlvbkVycm9yIGV4dGVuZHMgQXBwbGljYXRpb25FcnJvciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIENvbmZpZ3VyYXRpb25FcnJvclxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBDb25maWd1cmF0aW9uIGVycm9yIGRlc2NyaXB0aW9uXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlnS2V5IC0gQ29uZmlndXJhdGlvbiBrZXkgdGhhdCBpcyBpbnZhbGlkXHJcbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbY2F1c2U9bnVsbF0gLSBPcmlnaW5hbCBlcnJvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBjb25maWdLZXksIGNhdXNlID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdDT05GSUdVUkFUSU9OX0VSUk9SJywgY2F1c2UpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnS2V5ID0gY29uZmlnS2V5O1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBMb2dnZXIgLSBTdHJ1Y3R1cmVkIGxvZ2dpbmcgc3lzdGVtXHJcbiAqXHJcbiAqIFByb3ZpZGVzIGxldmVsZWQgbG9nZ2luZyB3aXRoIG9wdGlvbmFsIG91dHB1dCBzdXBwcmVzc2lvbiBmb3IgcHJvZHVjdGlvbi5cclxuICogUmVwbGFjZXMgZGlyZWN0IGNvbnNvbGUubG9nIGNhbGxzIGZvciBiZXR0ZXIgY29udHJvbCBhbmQgZGVidWdnaW5nLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBMb2dnZXIgbGV2ZWxzIGluIG9yZGVyIG9mIHNldmVyaXR5XHJcbiAqIE5vdGU6IE5hbWVkIExvZ2dlckxldmVsIHRvIGF2b2lkIGNvbmZsaWN0IHdpdGggZXhpc3RpbmcgTG9nTGV2ZWwgZW51bVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IExvZ2dlckxldmVsID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBERUJVRzogMCxcclxuICAgIElORk86IDEsXHJcbiAgICBXQVJOOiAyLFxyXG4gICAgRVJST1I6IDMsXHJcbiAgICBOT05FOiA0XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIExvZ2dlciBjbGFzcyBmb3Igc3RydWN0dXJlZCBhcHBsaWNhdGlvbiBsb2dnaW5nXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgTG9nZ2VyIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZXNwYWNlIC0gTG9nZ2VyIG5hbWVzcGFjZSAoZS5nLiwgJ1JlbmRlcmVyJywgJ0xvYWRlcicpXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbkxldmVsPUxvZ2dlckxldmVsLklORk9dIC0gTWluaW11bSBsb2cgbGV2ZWwgdG8gb3V0cHV0XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWVzcGFjZSwgbWluTGV2ZWwgPSBMb2dnZXJMZXZlbC5JTkZPKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XHJcbiAgICAgICAgdGhpcy5taW5MZXZlbCA9IG1pbkxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IG1pbmltdW0gbG9nIGxldmVsXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGV2ZWwgLSBNaW5pbXVtIGxldmVsIGZyb20gTG9nZ2VyTGV2ZWwgZW51bVxyXG4gICAgICovXHJcbiAgICBzZXRMZXZlbChsZXZlbCkge1xyXG4gICAgICAgIHRoaXMubWluTGV2ZWwgPSBsZXZlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBsb2cgbWVzc2FnZSB3aXRoIG5hbWVzcGFjZSBhbmQgdGltZXN0YW1wXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxldmVsIC0gTG9nIGxldmVsIG5hbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgLSBMb2cgYXJndW1lbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9IEZvcm1hdHRlZCBhcmd1bWVudHNcclxuICAgICAqL1xyXG4gICAgX2Zvcm1hdChsZXZlbCwgYXJncykge1xyXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBwcmVmaXggPSBgWyR7dGltZXN0YW1wfV0gWyR7bGV2ZWx9XSBbJHt0aGlzLm5hbWVzcGFjZX1dYDtcclxuICAgICAgICByZXR1cm4gW3ByZWZpeCwgLi4uYXJnc107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2cgZGVidWcgbWVzc2FnZSAobW9zdCB2ZXJib3NlKVxyXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIC0gQXJndW1lbnRzIHRvIGxvZ1xyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuREVCVUcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyguLi50aGlzLl9mb3JtYXQoJ0RFQlVHJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBpbmZvIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBsb2dcclxuICAgICAqL1xyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuSU5GTykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oLi4udGhpcy5fZm9ybWF0KCdJTkZPJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyB3YXJuaW5nIG1lc3NhZ2VcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBsb2dcclxuICAgICAqL1xyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWluTGV2ZWwgPD0gTG9nZ2VyTGV2ZWwuV0FSTikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oLi4udGhpcy5fZm9ybWF0KCdXQVJOJywgYXJncykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZyBlcnJvciBtZXNzYWdlXHJcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3MgLSBBcmd1bWVudHMgdG8gbG9nXHJcbiAgICAgKi9cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICBpZiAodGhpcy5taW5MZXZlbCA8PSBMb2dnZXJMZXZlbC5FUlJPUikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKC4uLnRoaXMuX2Zvcm1hdCgnRVJST1InLCBhcmdzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9nIGVycm9yIHdpdGggc3RhY2sgdHJhY2VcclxuICAgICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIC0gRXJyb3Igb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbnRleHRdIC0gQWRkaXRpb25hbCBjb250ZXh0XHJcbiAgICAgKi9cclxuICAgIGVycm9yV2l0aFRyYWNlKGVycm9yLCBjb250ZXh0ID0gJycpIHtcclxuICAgICAgICBpZiAodGhpcy5taW5MZXZlbCA8PSBMb2dnZXJMZXZlbC5FUlJPUikge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0U3RyID0gY29udGV4dCA/IGAgQ29udGV4dDogJHtjb250ZXh0fWAgOiAnJztcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvciguLi50aGlzLl9mb3JtYXQoJ0VSUk9SJywgW1xyXG4gICAgICAgICAgICAgICAgYCR7ZXJyb3IubWVzc2FnZX0ke2NvbnRleHRTdHJ9YCxcclxuICAgICAgICAgICAgICAgICdcXG5TdGFjazonLCBlcnJvci5zdGFja1xyXG4gICAgICAgICAgICBdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgY2hpbGQgbG9nZ2VyIHdpdGggZXh0ZW5kZWQgbmFtZXNwYWNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2hpbGROYW1lc3BhY2UgLSBDaGlsZCBuYW1lc3BhY2UgdG8gYXBwZW5kXHJcbiAgICAgKiBAcmV0dXJucyB7TG9nZ2VyfSBOZXcgbG9nZ2VyIHdpdGggY29tYmluZWQgbmFtZXNwYWNlXHJcbiAgICAgKi9cclxuICAgIGNoaWxkKGNoaWxkTmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMb2dnZXIoYCR7dGhpcy5uYW1lc3BhY2V9OiR7Y2hpbGROYW1lc3BhY2V9YCwgdGhpcy5taW5MZXZlbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgbG9nZ2VyIHJlZ2lzdHJ5XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBsb2dnZXJzID0gbmV3IE1hcCgpO1xyXG5cclxuLyoqXHJcbiAqIEdsb2JhbCBsb2cgbGV2ZWwgKGFmZmVjdHMgYWxsIG5ldyBsb2dnZXJzKVxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxubGV0IGdsb2JhbExvZ0xldmVsID0gTG9nZ2VyTGV2ZWwuSU5GTztcclxuXHJcbi8qKlxyXG4gKiBTZXQgZ2xvYmFsIGxvZyBsZXZlbCBmb3IgYWxsIGxvZ2dlcnNcclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsIC0gTG9nIGxldmVsIGZyb20gTG9nZ2VyTGV2ZWwgZW51bVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEdsb2JhbExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBnbG9iYWxMb2dMZXZlbCA9IGxldmVsO1xyXG4gICAgLy8gVXBkYXRlIGV4aXN0aW5nIGxvZ2dlcnNcclxuICAgIGZvciAoY29uc3QgbG9nZ2VyIG9mIGxvZ2dlcnMudmFsdWVzKCkpIHtcclxuICAgICAgICBsb2dnZXIuc2V0TGV2ZWwobGV2ZWwpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IG9yIGNyZWF0ZSBhIGxvZ2dlciBmb3IgYSBuYW1lc3BhY2VcclxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIExvZ2dlciBuYW1lc3BhY2VcclxuICogQHJldHVybnMge0xvZ2dlcn0gTG9nZ2VyIGluc3RhbmNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2VyKG5hbWVzcGFjZSkge1xyXG4gICAgaWYgKCFsb2dnZXJzLmhhcyhuYW1lc3BhY2UpKSB7XHJcbiAgICAgICAgbG9nZ2Vycy5zZXQobmFtZXNwYWNlLCBuZXcgTG9nZ2VyKG5hbWVzcGFjZSwgZ2xvYmFsTG9nTGV2ZWwpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsb2dnZXJzLmdldChuYW1lc3BhY2UpO1xyXG59XHJcblxyXG4vKipcclxuICogQ29uZmlndXJlIGxvZ2dpbmcgZm9yIHByb2R1Y3Rpb24gKHN1cHByZXNzIGFsbCBsb2dzKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZUZvclByb2R1Y3Rpb24oKSB7XHJcbiAgICBzZXRHbG9iYWxMb2dMZXZlbChMb2dnZXJMZXZlbC5OT05FKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbmZpZ3VyZSBsb2dnaW5nIGZvciBkZXZlbG9wbWVudCAoc2hvdyBhbGwgbG9ncylcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVGb3JEZXZlbG9wbWVudCgpIHtcclxuICAgIHNldEdsb2JhbExvZ0xldmVsKExvZ2dlckxldmVsLkRFQlVHKTtcclxufVxyXG5cclxuLy8gRXhwb3J0IGRlZmF1bHQgbG9nZ2VyIGZvciBjb252ZW5pZW5jZVxyXG5leHBvcnQgZGVmYXVsdCBnZXRMb2dnZXIoJ0FwcCcpO1xyXG4iLCIvKipcclxuICogQ29yZSB1dGlsaXR5IGZ1bmN0aW9ucyBmb3IgR2F1c3NpYW4gU3BsYXQgcmVuZGVyaW5nXHJcbiAqXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0YVV0aWxzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBOZXR3b3JrRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuL0xvZ2dlci5qcyc7XHJcblxyXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ1V0aWwnKTtcclxuXHJcbi8qKlxyXG4gKiBDdXN0b20gZXJyb3IgZm9yIGFib3J0ZWQgb3BlcmF0aW9uc1xyXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmV0d29ya0Vycm9yIGluc3RlYWQgZm9yIGNvbnNpc3RlbmN5XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWJvcnRlZFByb21pc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKG1zZykge1xyXG4gICAgICAgIHN1cGVyKG1zZyk7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ0Fib3J0ZWRQcm9taXNlRXJyb3InO1xyXG4gICAgICAgIHRoaXMuY29kZSA9ICdBQk9SVEVEJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIHdpdGggcHJvZ3Jlc3MgdHJhY2tpbmcgdXNpbmcgc3RhbmRhcmQgQWJvcnRDb250cm9sbGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVVJMIHRvIGZldGNoXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzXSAtIFByb2dyZXNzIGNhbGxiYWNrIChwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rLCBmaWxlU2l6ZSlcclxuICogQHBhcmFtIHtib29sZWFufSBbc2F2ZUNodW5rcz10cnVlXSAtIFdoZXRoZXIgdG8gc2F2ZSBhbmQgcmV0dXJuIGRvd25sb2FkZWQgY2h1bmtzXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBbaGVhZGVyc10gLSBPcHRpb25hbCBIVFRQIGhlYWRlcnNcclxuICogQHJldHVybnMge1Byb21pc2U8QXJyYXlCdWZmZXI+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBkb3dubG9hZGVkIGRhdGFcclxuICogQHRocm93cyB7TmV0d29ya0Vycm9yfSBJZiBmZXRjaCBmYWlscyBvciBpcyBhYm9ydGVkXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgZmV0Y2hXaXRoUHJvZ3Jlc3MgPSBmdW5jdGlvbihwYXRoLCBvblByb2dyZXNzLCBzYXZlQ2h1bmtzID0gdHJ1ZSwgaGVhZGVycykge1xyXG5cclxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWw7XHJcbiAgICBsZXQgYWJvcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIGxldCBvblByb2dyZXNzQ2FsbGVkQXRDb21wbGV0ZSA9IGZhbHNlO1xyXG4gICAgY29uc3QgbG9jYWxPblByb2dyZXNzID0gKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmssIGZpbGVTaXplKSA9PiB7XHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MgJiYgIW9uUHJvZ3Jlc3NDYWxsZWRBdENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzKHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgY2h1bmssIGZpbGVTaXplKTtcclxuICAgICAgICAgICAgICAgIGlmIChwZXJjZW50ID09PSAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2FsbGVkQXRDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBsZXQgcHJvZ3Jlc3MgY2FsbGJhY2sgZXJyb3JzIGJyZWFrIHRoZSBkb3dubG9hZFxyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBpbiBwcm9ncmVzcyBjYWxsYmFjazonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZmV0Y2hPcHRpb25zID0geyBzaWduYWwgfTtcclxuICAgICAgICBpZiAoaGVhZGVycykgZmV0Y2hPcHRpb25zLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG5cclxuICAgICAgICBmZXRjaChwYXRoLCBmZXRjaE9wdGlvbnMpXHJcbiAgICAgICAgLnRoZW4oYXN5bmMgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIEhUVFAgZXJyb3IgcmVzcG9uc2VzXHJcbiAgICAgICAgICAgIGlmICghZGF0YS5vaykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yVGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclRleHQgPSBhd2FpdCBkYXRhLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBpZiB3ZSBjYW4ndCByZWFkIGVycm9yIHRleHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGZXRjaCBmYWlsZWQ6ICR7ZGF0YS5zdGF0dXNUZXh0fSR7ZXJyb3JUZXh0ID8gJyAtICcgKyBlcnJvclRleHQgOiAnJ31gLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gZGF0YS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgaWYgKCFyZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKCdSZXNwb25zZSBib2R5IGlzIG5vdCByZWFkYWJsZScsIDApKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGJ5dGVzRG93bmxvYWRlZCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IF9maWxlU2l6ZSA9IGRhdGEuaGVhZGVycy5nZXQoJ0NvbnRlbnQtTGVuZ3RoJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVTaXplID0gX2ZpbGVTaXplID8gcGFyc2VJbnQoX2ZpbGVTaXplLCAxMCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICghYWJvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlOiBjaHVuaywgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbE9uUHJvZ3Jlc3MoMTAwLCAnMTAwJScsIGNodW5rLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYXZlQ2h1bmtzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgQmxvYihjaHVua3MpLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzRG93bmxvYWRlZCArPSBjaHVuay5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlcmNlbnRMYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZVNpemUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50ID0gKGJ5dGVzRG93bmxvYWRlZCAvIGZpbGVTaXplKSAqIDEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudExhYmVsID0gYCR7cGVyY2VudC50b0ZpeGVkKDIpfSVgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZUNodW5rcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MucHVzaChjaHVuayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsT25Qcm9ncmVzcyhwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgcmVhZGluZyByZXNwb25zZSBzdHJlYW06ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBEb24ndCB3cmFwIGlmIGFscmVhZHkgYSBOZXR3b3JrRXJyb3JcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTmV0d29ya0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOZXR3b3JrRXJyb3IoJ0ZldGNoIGFib3J0ZWQgYnkgdXNlcicsIDAsIGVycm9yKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IE5ldHdvcmtFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmV0Y2ggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEF0dGFjaCBhYm9ydCBmdW5jdGlvbmFsaXR5IHRvIHRoZSBwcm9taXNlXHJcbiAgICBwcm9taXNlLmFib3J0ID0gKHJlYXNvbikgPT4ge1xyXG4gICAgICAgIGFib3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydChyZWFzb24pO1xyXG4gICAgfTtcclxuICAgIHByb21pc2UuYWJvcnRDb250cm9sbGVyID0gYWJvcnRDb250cm9sbGVyO1xyXG5cclxuICAgIHJldHVybiBwcm9taXNlO1xyXG59O1xyXG5cclxuLy8gQ2xhbXAgdmFsdWUgYmV0d2VlbiBtaW4gYW5kIG1heFxyXG5leHBvcnQgY29uc3QgY2xhbXAgPSBmdW5jdGlvbih2YWwsIG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odmFsLCBtYXgpLCBtaW4pO1xyXG59O1xyXG5cclxuLy8gR2V0IGN1cnJlbnQgdGltZSBpbiBzZWNvbmRzXHJcbmV4cG9ydCBjb25zdCBnZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDtcclxufTtcclxuXHJcbi8vIERpc3Bvc2UgYWxsIG1lc2hlcyBpbiBhIHNjZW5lIGdyYXBoXHJcbmV4cG9ydCBjb25zdCBkaXNwb3NlQWxsTWVzaGVzID0gKG9iamVjdDNEKSA9PiB7XHJcbiAgICBpZiAob2JqZWN0M0QuZ2VvbWV0cnkpIHtcclxuICAgICAgICBvYmplY3QzRC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgb2JqZWN0M0QuZ2VvbWV0cnkgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKG9iamVjdDNELm1hdGVyaWFsKSB7XHJcbiAgICAgICAgb2JqZWN0M0QubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgIG9iamVjdDNELm1hdGVyaWFsID0gbnVsbDtcclxuICAgIH1cclxuICAgIGlmIChvYmplY3QzRC5jaGlsZHJlbikge1xyXG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG9iamVjdDNELmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGRpc3Bvc2VBbGxNZXNoZXMoY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8vIERlbGF5ZWQgZXhlY3V0aW9uIGhlbHBlclxyXG5leHBvcnQgY29uc3QgZGVsYXllZEV4ZWN1dGUgPSAoZnVuYywgZmFzdCkgPT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKGZ1bmMoKSk7XHJcbiAgICAgICAgfSwgZmFzdCA/IDEgOiA1MCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIEdldCBzcGhlcmljYWwgaGFybW9uaWNzIGNvbXBvbmVudCBjb3VudCBmb3IgZGVncmVlXHJcbmV4cG9ydCBjb25zdCBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSA9IChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSA9PiB7XHJcbiAgICBzd2l0Y2ggKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSkge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuIDk7XHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICByZXR1cm4gMjQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMDtcclxufTtcclxuXHJcbi8vIENyZWF0ZSBuYXRpdmUgcHJvbWlzZSB3aXRoIGV4dHJhY3RlZCBjb21wb25lbnRzXHJcbmV4cG9ydCBjb25zdCBuYXRpdmVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMgPSAoKSA9PiB7XHJcbiAgICBsZXQgcmVzb2x2ZXI7XHJcbiAgICBsZXQgcmVqZWN0ZXI7XHJcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlc29sdmVyID0gcmVzb2x2ZTtcclxuICAgICAgICByZWplY3RlciA9IHJlamVjdDtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAncHJvbWlzZSc6IHByb21pc2UsXHJcbiAgICAgICAgJ3Jlc29sdmUnOiByZXNvbHZlcixcclxuICAgICAgICAncmVqZWN0JzogcmVqZWN0ZXJcclxuICAgIH07XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgcHJvbWlzZSB3aXRoIGV4dHJhY3RlZCByZXNvbHZlL3JlamVjdCBmdW5jdGlvbnMgYW5kIG9wdGlvbmFsIGFib3J0IGNhcGFiaWxpdHlcclxuICogVXNlcyBzdGFuZGFyZCBQcm9taXNlIHdpdGggYXR0YWNoZWQgYWJvcnQgbWV0aG9kXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzID0gKGFib3J0SGFuZGxlcikgPT4ge1xyXG4gICAgbGV0IHJlc29sdmVyO1xyXG4gICAgbGV0IHJlamVjdGVyO1xyXG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXNvbHZlciA9IHJlc29sdmU7XHJcbiAgICAgICAgcmVqZWN0ZXIgPSByZWplY3Q7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQXR0YWNoIGFib3J0IG1ldGhvZCB0byBwcm9taXNlXHJcbiAgICBwcm9taXNlLmFib3J0ID0gYWJvcnRIYW5kbGVyIHx8ICgoKSA9PiB7fSk7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgJ3Byb21pc2UnOiBwcm9taXNlLFxyXG4gICAgICAgICdyZXNvbHZlJzogcmVzb2x2ZXIsXHJcbiAgICAgICAgJ3JlamVjdCc6IHJlamVjdGVyXHJcbiAgICB9O1xyXG59O1xyXG5cclxuLy8gU2VtdmVyIGNsYXNzIGZvciB2ZXJzaW9uIGhhbmRsaW5nXHJcbmV4cG9ydCBjbGFzcyBTZW12ZXIge1xyXG4gICAgY29uc3RydWN0b3IobWFqb3IsIG1pbm9yLCBwYXRjaCkge1xyXG4gICAgICAgIHRoaXMubWFqb3IgPSBtYWpvcjtcclxuICAgICAgICB0aGlzLm1pbm9yID0gbWlub3I7XHJcbiAgICAgICAgdGhpcy5wYXRjaCA9IHBhdGNoO1xyXG4gICAgfVxyXG5cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1ham9yfV8ke3RoaXMubWlub3J9XyR7dGhpcy5wYXRjaH1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBpT1MgZGV0ZWN0aW9uXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0lPUygpIHtcclxuICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdpUGhvbmUnKSA+IDAgfHwgdWEuaW5kZXhPZignaVBhZCcpID4gMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElPU1NlbWV2ZXIoKSB7XHJcbiAgICBpZiAoaXNJT1MoKSkge1xyXG4gICAgICAgIGNvbnN0IGV4dHJhY3QgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTZW12ZXIoXHJcbiAgICAgICAgICAgIHBhcnNlSW50KGV4dHJhY3RbMV0gfHwgMCwgMTApLFxyXG4gICAgICAgICAgICBwYXJzZUludChleHRyYWN0WzJdIHx8IDAsIDEwKSxcclxuICAgICAgICAgICAgcGFyc2VJbnQoZXh0cmFjdFszXSB8fCAwLCAxMClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vIEhhbGYgZmxvYXQgY29udmVyc2lvbiB1dGlsaXRpZXNcclxuZXhwb3J0IGNvbnN0IHRvSGFsZkZsb2F0ID0gRGF0YVV0aWxzLnRvSGFsZkZsb2F0LmJpbmQoRGF0YVV0aWxzKTtcclxuZXhwb3J0IGNvbnN0IGZyb21IYWxmRmxvYXQgPSBEYXRhVXRpbHMuZnJvbUhhbGZGbG9hdC5iaW5kKERhdGFVdGlscyk7XHJcblxyXG4vLyBEZWZhdWx0IHNwaGVyaWNhbCBoYXJtb25pY3MgY29tcHJlc3Npb24gcmFuZ2UgKGltcG9ydGVkIGZyb20gZW51bXMpXHJcbmltcG9ydCB7IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSB9IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcbmV4cG9ydCB7IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSB9O1xyXG5leHBvcnQgY29uc3QgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZSA9IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSAvIDIuMDtcclxuXHJcbi8vIFVuY29tcHJlc3MgZmxvYXQgYmFzZWQgb24gY29tcHJlc3Npb24gbGV2ZWxcclxuZXhwb3J0IGNvbnN0IHRvVW5jb21wcmVzc2VkRmxvYXQgPSAoZiwgY29tcHJlc3Npb25MZXZlbCwgaXNTSCA9IGZhbHNlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCkgPT4ge1xyXG4gICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gZjtcclxuICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMSB8fCAoY29tcHJlc3Npb25MZXZlbCA9PT0gMiAmJiAhaXNTSCkpIHtcclxuICAgICAgICByZXR1cm4gRGF0YVV0aWxzLmZyb21IYWxmRmxvYXQoZik7XHJcbiAgICB9IGVsc2UgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gZnJvbVVpbnQ4KGYsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIENvbnZlcnQgdG8gdWludDhcclxuZXhwb3J0IGNvbnN0IHRvVWludDggPSAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSA9PiB7XHJcbiAgICB2ID0gY2xhbXAodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KTtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuIGNsYW1wKE1hdGguZmxvb3IoKHYgLSByYW5nZU1pbikgLyByYW5nZSAqIDI1NSksIDAsIDI1NSk7XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGZyb20gdWludDhcclxuZXhwb3J0IGNvbnN0IGZyb21VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIGNvbnN0IHJhbmdlID0gKHJhbmdlTWF4IC0gcmFuZ2VNaW4pO1xyXG4gICAgcmV0dXJuICh2IC8gMjU1ICogcmFuZ2UgKyByYW5nZU1pbik7XHJcbn07XHJcblxyXG4vLyBIYWxmIGZsb2F0IHRvIHVpbnQ4XHJcbmV4cG9ydCBjb25zdCBmcm9tSGFsZkZsb2F0VG9VaW50OCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b1VpbnQ4KGZyb21IYWxmRmxvYXQodiksIHJhbmdlTWluLCByYW5nZU1heCk7XHJcbn07XHJcblxyXG4vLyBVaW50OCB0byBoYWxmIGZsb2F0XHJcbmV4cG9ydCBjb25zdCBmcm9tVWludDhUb0hhbGZGbG9hdCA9ICh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpID0+IHtcclxuICAgIHJldHVybiB0b0hhbGZGbG9hdChmcm9tVWludDgodiwgcmFuZ2VNaW4sIHJhbmdlTWF4KSk7XHJcbn07XHJcblxyXG4vLyBSZWFkIGZsb2F0IGZyb20gRGF0YVZpZXcgYmFzZWQgb24gY29tcHJlc3Npb24gbGV2ZWxcclxuZXhwb3J0IGNvbnN0IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsID0gKGRhdGFWaWV3LCBmbG9hdEluZGV4LCBjb21wcmVzc2lvbkxldmVsLCBpc1NIID0gZmFsc2UpID0+IHtcclxuICAgIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldEZsb2F0MzIoZmxvYXRJbmRleCAqIDQsIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAxIHx8IChjb21wcmVzc2lvbkxldmVsID09PSAyICYmICFpc1NIKSkge1xyXG4gICAgICAgIHJldHVybiBkYXRhVmlldy5nZXRVaW50MTYoZmxvYXRJbmRleCAqIDIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDgoZmxvYXRJbmRleCwgdHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGJldHdlZW4gY29tcHJlc3Npb24gbGV2ZWxzXHJcbmV4cG9ydCBjb25zdCBjb252ZXJ0QmV0d2VlbkNvbXByZXNzaW9uTGV2ZWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBub29wID0gKHYpID0+IHY7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCwgZnJvbUxldmVsLCB0b0xldmVsLCBpc1NIID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoZnJvbUxldmVsID09PSB0b0xldmVsKSByZXR1cm4gdmFsO1xyXG4gICAgICAgIGxldCBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcblxyXG4gICAgICAgIGlmIChmcm9tTGV2ZWwgPT09IDIgJiYgaXNTSCkge1xyXG4gICAgICAgICAgICBpZiAodG9MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tVWludDhUb0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGZyb21MZXZlbCA9PT0gMiB8fCBmcm9tTGV2ZWwgPT09IDEpIHtcclxuICAgICAgICAgICAgaWYgKHRvTGV2ZWwgPT09IDApIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NIKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICBlbHNlIG91dHB1dENvbnZlcnNpb25GdW5jID0gZnJvbUhhbGZGbG9hdFRvVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGZyb21MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICBpZiAodG9MZXZlbCA9PT0gMSkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSB0b0hhbGZGbG9hdDtcclxuICAgICAgICAgICAgZWxzZSBpZiAodG9MZXZlbCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1NIKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICAgICAgZWxzZSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IHRvVWludDg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvdXRwdXRDb252ZXJzaW9uRnVuYyh2YWwpO1xyXG4gICAgfTtcclxufSgpO1xyXG5cclxuLy8gQ29weSBiZXR3ZWVuIGJ1ZmZlcnNcclxuZXhwb3J0IGNvbnN0IGNvcHlCZXR3ZWVuQnVmZmVycyA9IChzcmNCdWZmZXIsIHNyY09mZnNldCwgZGVzdEJ1ZmZlciwgZGVzdE9mZnNldCwgYnl0ZUNvdW50ID0gMCkgPT4ge1xyXG4gICAgY29uc3Qgc3JjID0gbmV3IFVpbnQ4QXJyYXkoc3JjQnVmZmVyLCBzcmNPZmZzZXQpO1xyXG4gICAgY29uc3QgZGVzdCA9IG5ldyBVaW50OEFycmF5KGRlc3RCdWZmZXIsIGRlc3RPZmZzZXQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ291bnQ7IGkrKykge1xyXG4gICAgICAgIGRlc3RbaV0gPSBzcmNbaV07XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBGbG9hdCB0byBoYWxmIGZsb2F0IGNvbnZlcnNpb25cclxuZXhwb3J0IGNvbnN0IGZsb2F0VG9IYWxmID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBmbG9hdFZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KDEpO1xyXG4gICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZmxvYXRWaWV3LmJ1ZmZlcik7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIGZsb2F0Vmlld1swXSA9IHZhbDtcclxuICAgICAgICBjb25zdCB4ID0gaW50MzJWaWV3WzBdO1xyXG5cclxuICAgICAgICBsZXQgYml0cyA9ICh4ID4+IDE2KSAmIDB4ODAwMDtcclxuICAgICAgICBsZXQgbSA9ICh4ID4+IDEyKSAmIDB4MDdmZjtcclxuICAgICAgICBjb25zdCBlID0gKHggPj4gMjMpICYgMHhmZjtcclxuXHJcbiAgICAgICAgaWYgKGUgPCAxMDMpIHJldHVybiBiaXRzO1xyXG5cclxuICAgICAgICBpZiAoZSA+IDE0Mikge1xyXG4gICAgICAgICAgICBiaXRzIHw9IDB4N2MwMDtcclxuICAgICAgICAgICAgYml0cyB8PSAoKGUgPT0gMjU1KSA/IDAgOiAxKSAmJiAoeCAmIDB4MDA3ZmZmZmYpO1xyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlIDwgMTEzKSB7XHJcbiAgICAgICAgICAgIG0gfD0gMHgwODAwO1xyXG4gICAgICAgICAgICBiaXRzIHw9IChtID4+ICgxMTQgLSBlKSkgKyAoKG0gPj4gKDExMyAtIGUpKSAmIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gYml0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJpdHMgfD0gKChlIC0gMTEyKSA8PCAxMCkgfCAobSA+PiAxKTtcclxuICAgICAgICBiaXRzICs9IG0gJiAxO1xyXG4gICAgICAgIHJldHVybiBiaXRzO1xyXG4gICAgfTtcclxufSgpO1xyXG5cclxuLy8gRW5jb2RlIGZsb2F0IGFzIHVpbnRcclxuZXhwb3J0IGNvbnN0IHVpbnRFbmNvZGVkRmxvYXQgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGZsb2F0VmlldyA9IG5ldyBGbG9hdDMyQXJyYXkoMSk7XHJcbiAgICBjb25zdCBpbnQzMlZpZXcgPSBuZXcgSW50MzJBcnJheShmbG9hdFZpZXcuYnVmZmVyKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24oZikge1xyXG4gICAgICAgIGZsb2F0Vmlld1swXSA9IGY7XHJcbiAgICAgICAgcmV0dXJuIGludDMyVmlld1swXTtcclxuICAgIH07XHJcbn0oKTtcclxuXHJcbi8vIFJHQkEgdG8gaW50ZWdlclxyXG5leHBvcnQgY29uc3QgcmdiYVRvSW50ZWdlciA9IGZ1bmN0aW9uKHIsIGcsIGIsIGEpIHtcclxuICAgIHJldHVybiByICsgKGcgPDwgOCkgKyAoYiA8PCAxNikgKyAoYSA8PCAyNCk7XHJcbn07XHJcblxyXG4vLyBSR0JBIGFycmF5IHRvIGludGVnZXJcclxuZXhwb3J0IGNvbnN0IHJnYmFBcnJheVRvSW50ZWdlciA9IGZ1bmN0aW9uKGFyciwgb2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gYXJyW29mZnNldF0gKyAoYXJyW29mZnNldCArIDFdIDw8IDgpICsgKGFycltvZmZzZXQgKyAyXSA8PCAxNikgKyAoYXJyW29mZnNldCArIDNdIDw8IDI0KTtcclxufTtcclxuXHJcbi8vIEJBU0VfQ09NUE9ORU5UX0NPVU5UIGZvciBVbmNvbXByZXNzZWRTcGxhdEFycmF5XHJcbmV4cG9ydCBjb25zdCBCQVNFX0NPTVBPTkVOVF9DT1VOVCA9IDE0O1xyXG4iLCIvKipcclxuICogVmFsaWRhdGlvblV0aWxzIC0gU2VjdXJpdHktZm9jdXNlZCB2YWxpZGF0aW9uIHV0aWxpdGllc1xyXG4gKlxyXG4gKiBDUklUSUNBTDogQWxsIGV4dGVybmFsIGlucHV0cyBNVVNUIGJlIHZhbGlkYXRlZCBiZWZvcmUgdXNlLlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBhbGxvd2xpc3QtYmFzZWQgdmFsaWRhdGlvbiBmb2xsb3dpbmcgc2VjdXJpdHkgYmVzdCBwcmFjdGljZXMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuXHJcbi8qKlxyXG4gKiBBbGxvd2VkIFVSTCBwcm90b2NvbHMgKGFsbG93bGlzdCBhcHByb2FjaClcclxuICovXHJcbmNvbnN0IEFMTE9XRURfUFJPVE9DT0xTID0gT2JqZWN0LmZyZWV6ZShbJ2h0dHBzOicsICdodHRwOicsICdibG9iOicsICdkYXRhOiddKTtcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBhbmQgc2FuaXRpemUgYSBVUkxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byB2YWxpZGF0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2Jhc2VVUkxdIC0gQmFzZSBVUkwgZm9yIHJlbGF0aXZlIFVSTHMgKGRlZmF1bHRzIHRvIHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBTYW5pdGl6ZWQgYWJzb2x1dGUgVVJMXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgVVJMIGlzIGludmFsaWQgb3IgdXNlcyBkaXNhbGxvd2VkIHByb3RvY29sXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVcmwodXJsLCBiYXNlVVJMKSB7XHJcbiAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycgfHwgdXJsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1VSTCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICd1cmwnKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcGFyc2VkO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBVc2UgYmFzZSBVUkwgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2Ugd2luZG93IGxvY2F0aW9uIChicm93c2VyIG9ubHkpXHJcbiAgICAgICAgY29uc3QgYmFzZSA9IGJhc2VVUkwgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmxvY2F0aW9uLmhyZWYgOiB1bmRlZmluZWQpO1xyXG4gICAgICAgIHBhcnNlZCA9IG5ldyBVUkwodXJsLCBiYXNlKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYEludmFsaWQgVVJMIGZvcm1hdDogJHt1cmx9YCxcclxuICAgICAgICAgICAgJ3VybCcsXHJcbiAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWYWxpZGF0ZSBwcm90b2NvbCBhZ2FpbnN0IGFsbG93bGlzdFxyXG4gICAgaWYgKCFBTExPV0VEX1BST1RPQ09MUy5pbmNsdWRlcyhwYXJzZWQucHJvdG9jb2wpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYERpc2FsbG93ZWQgcHJvdG9jb2w6ICR7cGFyc2VkLnByb3RvY29sfS4gQWxsb3dlZCBwcm90b2NvbHM6ICR7QUxMT1dFRF9QUk9UT0NPTFMuam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICAndXJsLnByb3RvY29sJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZC5ocmVmO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgYXNzZXQgcGF0aCB0byBwcmV2ZW50IHBhdGggdHJhdmVyc2FsIGF0dGFja3NcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBGaWxlIHBhdGggdG8gdmFsaWRhdGVcclxuICogQHJldHVybnMge3N0cmluZ30gVmFsaWRhdGVkIHBhdGhcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXRoIGNvbnRhaW5zIHRyYXZlcnNhbCBzZXF1ZW5jZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFzc2V0UGF0aChwYXRoKSB7XHJcbiAgICBpZiAodHlwZW9mIHBhdGggIT09ICdzdHJpbmcnIHx8IHBhdGgubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignQXNzZXQgcGF0aCBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICdwYXRoJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHBhdGggdHJhdmVyc2FsIHNlcXVlbmNlc1xyXG4gICAgY29uc3QgZGFuZ2Vyb3VzUGF0dGVybnMgPSBbJy4uLycsICcuLlxcXFwnLCAnJTJlJTJlLycsICclMmUlMmVcXFxcJ107XHJcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IHBhdGgudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgZGFuZ2Vyb3VzUGF0dGVybnMpIHtcclxuICAgICAgICBpZiAobm9ybWFsaXplZFBhdGguaW5jbHVkZXMocGF0dGVybikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBQYXRoIHRyYXZlcnNhbCBkZXRlY3RlZCBpbiBhc3NldCBwYXRoOiAke3BhdGh9YCxcclxuICAgICAgICAgICAgICAgICdwYXRoJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGZpbGUgZXh0ZW5zaW9uIGFnYWluc3QgYWxsb3dsaXN0XHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlbmFtZSAtIEZpbGVuYW1lIHRvIHZhbGlkYXRlXHJcbiAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFeHRlbnNpb25zIC0gQXJyYXkgb2YgYWxsb3dlZCBleHRlbnNpb25zIChlLmcuLCBbJy5wbHknLCAnLmdsYiddKVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBWYWxpZGF0ZWQgZmlsZW5hbWVcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBleHRlbnNpb24gaXMgbm90IGFsbG93ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpbGVFeHRlbnNpb24oZmlsZW5hbWUsIGFsbG93ZWRFeHRlbnNpb25zKSB7XHJcbiAgICBpZiAodHlwZW9mIGZpbGVuYW1lICE9PSAnc3RyaW5nJyB8fCBmaWxlbmFtZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdGaWxlbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZycsICdmaWxlbmFtZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghQXJyYXkuaXNBcnJheShhbGxvd2VkRXh0ZW5zaW9ucykgfHwgYWxsb3dlZEV4dGVuc2lvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgJ2FsbG93ZWRFeHRlbnNpb25zIG11c3QgYmUgYSBub24tZW1wdHkgYXJyYXknLFxyXG4gICAgICAgICAgICAnYWxsb3dlZEV4dGVuc2lvbnMnXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlbmFtZS5zbGljZShmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZEFsbG93ZWQgPSBhbGxvd2VkRXh0ZW5zaW9ucy5tYXAoZXh0ID0+IGV4dC50b0xvd2VyQ2FzZSgpKTtcclxuXHJcbiAgICBpZiAoIW5vcm1hbGl6ZWRBbGxvd2VkLmluY2x1ZGVzKGV4dGVuc2lvbikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgRmlsZSBleHRlbnNpb24gJHtleHRlbnNpb259IG5vdCBhbGxvd2VkLiBBbGxvd2VkOiAke2FsbG93ZWRFeHRlbnNpb25zLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgJ2ZpbGVuYW1lJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZpbGVuYW1lO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgbnVtZXJpYyB2YWx1ZSBpcyB3aXRoaW4gcmFuZ2VcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiAtIE1pbmltdW0gYWxsb3dlZCB2YWx1ZSAoaW5jbHVzaXZlKVxyXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IC0gTWF4aW11bSBhbGxvd2VkIHZhbHVlIChpbmNsdXNpdmUpXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBOYW1lIG9mIGZpZWxkIGZvciBlcnJvciBtZXNzYWdlc1xyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBWYWxpZGF0ZWQgdmFsdWVcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiB2YWx1ZSBpcyBub3QgYSBudW1iZXIgb3Igb3V0IG9mIHJhbmdlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXJJblJhbmdlKHZhbHVlLCBtaW4sIG1heCwgZmllbGROYW1lKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCBpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSB2YWxpZCBudW1iZXJgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh2YWx1ZSA8IG1pbiB8fCB2YWx1ZSA+IG1heCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBiZXR3ZWVuICR7bWlufSBhbmQgJHttYXh9LCBnb3QgJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGludGVnZXIgdmFsdWVcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbGlkYXRlZCBpbnRlZ2VyXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGFuIGludGVnZXJcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUludGVnZXIodmFsdWUsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIHBvc2l0aXZlIGludGVnZXJcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFZhbGlkYXRlZCBwb3NpdGl2ZSBpbnRlZ2VyXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGEgcG9zaXRpdmUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKHZhbHVlLCBmaWVsZE5hbWUpIHtcclxuICAgIHZhbGlkYXRlSW50ZWdlcih2YWx1ZSwgZmllbGROYW1lKTtcclxuXHJcbiAgICBpZiAodmFsdWUgPD0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gbXVzdCBiZSBwb3NpdGl2ZSwgZ290ICR7dmFsdWV9YCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBvYmplY3QgaGFzIHJlcXVpcmVkIHByb3BlcnRpZXNcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IG9iaiAtIE9iamVjdCB0byB2YWxpZGF0ZVxyXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSByZXF1aXJlZFByb3BzIC0gQXJyYXkgb2YgcmVxdWlyZWQgcHJvcGVydHkgbmFtZXNcclxuICogQHBhcmFtIHtzdHJpbmd9IG9iamVjdE5hbWUgLSBOYW1lIG9mIG9iamVjdCBmb3IgZXJyb3IgbWVzc2FnZXNcclxuICogQHJldHVybnMge29iamVjdH0gVmFsaWRhdGVkIG9iamVjdFxyXG4gKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIG9iamVjdCBpcyBpbnZhbGlkIG9yIG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydGllc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUmVxdWlyZWRQcm9wZXJ0aWVzKG9iaiwgcmVxdWlyZWRQcm9wcywgb2JqZWN0TmFtZSkge1xyXG4gICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9IG11c3QgYmUgYW4gb2JqZWN0YCxcclxuICAgICAgICAgICAgb2JqZWN0TmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBwcm9wIG9mIHJlcXVpcmVkUHJvcHMpIHtcclxuICAgICAgICBpZiAoIShwcm9wIGluIG9iaikgfHwgb2JqW3Byb3BdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGAke29iamVjdE5hbWV9IG1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6ICR7cHJvcH1gLFxyXG4gICAgICAgICAgICAgICAgYCR7b2JqZWN0TmFtZX0uJHtwcm9wfWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGFycmF5IGJ1ZmZlclxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXIgLSBCdWZmZXIgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWluU2l6ZT0wXSAtIE1pbmltdW0gc2l6ZSBpbiBieXRlc1xyXG4gKiBAcmV0dXJucyB7QXJyYXlCdWZmZXJ9IFZhbGlkYXRlZCBidWZmZXJcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBidWZmZXIgaXMgaW52YWxpZCBvciB0b28gc21hbGxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFycmF5QnVmZmVyKGJ1ZmZlciwgZmllbGROYW1lLCBtaW5TaXplID0gMCkge1xyXG4gICAgaWYgKCEoYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGFuIEFycmF5QnVmZmVyYCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYnVmZmVyLmJ5dGVMZW5ndGggPCBtaW5TaXplKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGF0IGxlYXN0ICR7bWluU2l6ZX0gYnl0ZXMsIGdvdCAke2J1ZmZlci5ieXRlTGVuZ3RofWAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ1ZmZlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGVudW0gdmFsdWUgYWdhaW5zdCBhbGxvd2VkIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gVmFsdWUgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtBcnJheX0gYWxsb3dlZFZhbHVlcyAtIEFycmF5IG9mIGFsbG93ZWQgdmFsdWVzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZE5hbWUgLSBOYW1lIG9mIGZpZWxkIGZvciBlcnJvciBtZXNzYWdlc1xyXG4gKiBAcmV0dXJucyB7Kn0gVmFsaWRhdGVkIHZhbHVlXHJcbiAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgdmFsdWUgaXMgbm90IGluIGFsbG93ZWQgdmFsdWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbnVtKHZhbHVlLCBhbGxvd2VkVmFsdWVzLCBmaWVsZE5hbWUpIHtcclxuICAgIGlmICghYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyh2YWx1ZSkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgb25lIG9mOiAke2FsbG93ZWRWYWx1ZXMuam9pbignLCAnKX0uIEdvdDogJHt2YWx1ZX1gLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gQ2FsbGJhY2sgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlcXVpcmVkPXRydWVdIC0gV2hldGhlciBjYWxsYmFjayBpcyByZXF1aXJlZFxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258bnVsbH0gVmFsaWRhdGVkIGNhbGxiYWNrIG9yIG51bGwgaWYgbm90IHJlcXVpcmVkIGFuZCBub3QgcHJvdmlkZWRcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBjYWxsYmFjayBpcyByZXF1aXJlZCBidXQgbm90IGEgZnVuY3Rpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGNhbGxiYWNrLCBmaWVsZE5hbWUsIHJlcXVpcmVkID0gdHJ1ZSkge1xyXG4gICAgaWYgKGNhbGxiYWNrID09PSBudWxsIHx8IGNhbGxiYWNrID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocmVxdWlyZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGAke2ZpZWxkTmFtZX0gaXMgcmVxdWlyZWRgLFxyXG4gICAgICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSBmdW5jdGlvbmAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhbGxiYWNrO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgaGV4IGNvbG9yIHN0cmluZ1xyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBDb2xvciBzdHJpbmcgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFZhbGlkYXRlZCBjb2xvciBzdHJpbmdcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBjb2xvciBmb3JtYXQgaXMgaW52YWxpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSGV4Q29sb3IodmFsdWUsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICBgJHtmaWVsZE5hbWV9IG11c3QgYmUgYSBzdHJpbmdgLFxyXG4gICAgICAgICAgICBmaWVsZE5hbWVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGhleENvbG9yUmVnZXggPSAvXigjfDB4KVswLTlBLUZhLWZdezZ9JC9pO1xyXG4gICAgaWYgKCFoZXhDb2xvclJlZ2V4LnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgaGV4IGNvbG9yIChlLmcuLCAjRkZGRkZGIG9yIDB4RkZGRkZGKWAsXHJcbiAgICAgICAgICAgIGZpZWxkTmFtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgRE9NIGVsZW1lbnRcclxuICpcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIEVsZW1lbnQgdG8gdmFsaWRhdGVcclxuICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkTmFtZSAtIE5hbWUgb2YgZmllbGQgZm9yIGVycm9yIG1lc3NhZ2VzXHJcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gVmFsaWRhdGVkIGVsZW1lbnRcclxuICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBlbGVtZW50IGlzIG5vdCBhIHZhbGlkIERPTSBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVET01FbGVtZW50KGVsZW1lbnQsIGZpZWxkTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgIShlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgYCR7ZmllbGROYW1lfSBtdXN0IGJlIGEgdmFsaWQgSFRNTCBlbGVtZW50YCxcclxuICAgICAgICAgICAgZmllbGROYW1lXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxufVxyXG4iLCIvKipcclxuICogT2JqZWN0UG9vbCAtIE1lbW9yeS1lZmZpY2llbnQgb2JqZWN0IHBvb2xpbmdcclxuICpcclxuICogUmVkdWNlcyBnYXJiYWdlIGNvbGxlY3Rpb24gcHJlc3N1cmUgYnkgcmV1c2luZyBvYmplY3RzIGluc3RlYWQgb2ZcclxuICogcmVwZWF0ZWRseSBhbGxvY2F0aW5nIGFuZCBkZWFsbG9jYXRpbmcgdGhlbS4gQ3JpdGljYWwgZm9yIHJlYWwtdGltZSByZW5kZXJpbmcuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yMywgTWF0cml4NCwgUXVhdGVybmlvbiwgRXVsZXIgfSBmcm9tICd0aHJlZSc7XHJcblxyXG4vKipcclxuICogR2VuZXJpYyBvYmplY3QgcG9vbFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9iamVjdFBvb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYW4gT2JqZWN0UG9vbFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmFjdG9yeSAtIEZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBuZXcgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzZXQgLSBGdW5jdGlvbiB0aGF0IHJlc2V0cyBhbiBvYmplY3QgdG8gaW5pdGlhbCBzdGF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtpbml0aWFsU2l6ZT0xMF0gLSBOdW1iZXIgb2Ygb2JqZWN0cyB0byBwcmUtYWxsb2NhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSwgcmVzZXQsIGluaXRpYWxTaXplID0gMTApIHtcclxuICAgICAgICB0aGlzLl9mYWN0b3J5ID0gZmFjdG9yeTtcclxuICAgICAgICB0aGlzLl9yZXNldCA9IHJlc2V0O1xyXG4gICAgICAgIHRoaXMuX3Bvb2wgPSBbXTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuX21heFNpemUgPSBpbml0aWFsU2l6ZSAqIDEwOyAvLyBQcmV2ZW50IHVuYm91bmRlZCBncm93dGhcclxuXHJcbiAgICAgICAgLy8gUHJlLWFsbG9jYXRlIGluaXRpYWwgb2JqZWN0c1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9wb29sLnB1c2goZmFjdG9yeSgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3F1aXJlIGFuIG9iamVjdCBmcm9tIHRoZSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7Kn0gUG9vbGVkIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBhY3F1aXJlKCkge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCsrO1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvb2wucG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvb2wgZXhoYXVzdGVkLCBjcmVhdGUgbmV3IG9iamVjdFxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mYWN0b3J5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWxlYXNlIGFuIG9iamVjdCBiYWNrIHRvIHRoZSBwb29sXHJcbiAgICAgKiBAcGFyYW0geyp9IG9iaiAtIE9iamVjdCB0byByZXR1cm4gdG8gcG9vbFxyXG4gICAgICovXHJcbiAgICByZWxlYXNlKG9iaikge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZC0tO1xyXG4gICAgICAgIGlmICh0aGlzLl9wb29sLmxlbmd0aCA8IHRoaXMuX21heFNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVzZXQob2JqKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9vbC5wdXNoKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHBvb2wgaXMgYXQgbWF4IHNpemUsIGxldCBvYmplY3QgYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgbXVsdGlwbGUgb2JqZWN0c1xyXG4gICAgICogQHBhcmFtIHtBcnJheX0gb2JqZWN0cyAtIE9iamVjdHMgdG8gcmV0dXJuIHRvIHBvb2xcclxuICAgICAqL1xyXG4gICAgcmVsZWFzZUFsbChvYmplY3RzKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygb2JqZWN0cykge1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2Uob2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcG9vbCBzdGF0aXN0aWNzXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBQb29sIHN0YXRzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGF2YWlsYWJsZTogdGhpcy5fcG9vbC5sZW5ndGgsXHJcbiAgICAgICAgICAgIGFsbG9jYXRlZDogdGhpcy5fYWxsb2NhdGVkLFxyXG4gICAgICAgICAgICBtYXhTaXplOiB0aGlzLl9tYXhTaXplXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoZSBwb29sIGFuZCByZWxlYXNlIGFsbCBvYmplY3RzXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9vbC5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcmUtY29uZmlndXJlZCBwb29scyBmb3IgY29tbW9uIFRocmVlLmpzIG9iamVjdHNcclxuICovXHJcblxyXG4vKipcclxuICogVmVjdG9yMyBwb29sXHJcbiAqIEB0eXBlIHtPYmplY3RQb29sfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHZlY3RvcjNQb29sID0gbmV3IE9iamVjdFBvb2woXHJcbiAgICAoKSA9PiBuZXcgVmVjdG9yMygpLFxyXG4gICAgKHYpID0+IHYuc2V0KDAsIDAsIDApLFxyXG4gICAgNTAgLy8gUHJlLWFsbG9jYXRlIDUwIHZlY3RvcnNcclxuKTtcclxuXHJcbi8qKlxyXG4gKiBNYXRyaXg0IHBvb2xcclxuICogQHR5cGUge09iamVjdFBvb2x9XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWF0cml4NFBvb2wgPSBuZXcgT2JqZWN0UG9vbChcclxuICAgICgpID0+IG5ldyBNYXRyaXg0KCksXHJcbiAgICAobSkgPT4gbS5pZGVudGl0eSgpLFxyXG4gICAgMjAgLy8gUHJlLWFsbG9jYXRlIDIwIG1hdHJpY2VzXHJcbik7XHJcblxyXG4vKipcclxuICogUXVhdGVybmlvbiBwb29sXHJcbiAqIEB0eXBlIHtPYmplY3RQb29sfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHF1YXRlcm5pb25Qb29sID0gbmV3IE9iamVjdFBvb2woXHJcbiAgICAoKSA9PiBuZXcgUXVhdGVybmlvbigpLFxyXG4gICAgKHEpID0+IHEuc2V0KDAsIDAsIDAsIDEpLFxyXG4gICAgMzAgLy8gUHJlLWFsbG9jYXRlIDMwIHF1YXRlcm5pb25zXHJcbik7XHJcblxyXG4vKipcclxuICogRXVsZXIgcG9vbFxyXG4gKiBAdHlwZSB7T2JqZWN0UG9vbH1cclxuICovXHJcbmV4cG9ydCBjb25zdCBldWxlclBvb2wgPSBuZXcgT2JqZWN0UG9vbChcclxuICAgICgpID0+IG5ldyBFdWxlcigpLFxyXG4gICAgKGUpID0+IGUuc2V0KDAsIDAsIDApLFxyXG4gICAgMzAgLy8gUHJlLWFsbG9jYXRlIDMwIGV1bGVyc1xyXG4pO1xyXG5cclxuLyoqXHJcbiAqIFNjb3BlZCBwb29sIGFsbG9jYXRpb24gaGVscGVyXHJcbiAqXHJcbiAqIEF1dG9tYXRpY2FsbHkgcmVsZWFzZXMgcG9vbGVkIG9iamVjdHMgd2hlbiBzY29wZSBleGl0cy5cclxuICogVXNlIHdpdGggdHJ5L2ZpbmFsbHkgdG8gZW5zdXJlIGNsZWFudXAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGNvbnN0IHNjb3BlID0gbmV3IFBvb2xTY29wZSgpO1xyXG4gKiB0cnkge1xyXG4gKiAgIGNvbnN0IHYxID0gc2NvcGUudmVjdG9yMygpO1xyXG4gKiAgIGNvbnN0IHYyID0gc2NvcGUudmVjdG9yMygpO1xyXG4gKiAgIC8vIFVzZSB2ZWN0b3JzLi4uXHJcbiAqIH0gZmluYWxseSB7XHJcbiAqICAgc2NvcGUucmVsZWFzZUFsbCgpO1xyXG4gKiB9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUG9vbFNjb3BlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNxdWlyZSBhIFZlY3RvcjMgZnJvbSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7VmVjdG9yM30gUG9vbGVkIHZlY3RvclxyXG4gICAgICovXHJcbiAgICB2ZWN0b3IzKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHZlY3RvcjNQb29sLmFjcXVpcmUoKTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQucHVzaCh7IHBvb2w6IHZlY3RvcjNQb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjcXVpcmUgYSBNYXRyaXg0IGZyb20gcG9vbFxyXG4gICAgICogQHJldHVybnMge01hdHJpeDR9IFBvb2xlZCBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgbWF0cml4NCgpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBtYXRyaXg0UG9vbC5hY3F1aXJlKCk7XHJcbiAgICAgICAgdGhpcy5fYWxsb2NhdGVkLnB1c2goeyBwb29sOiBtYXRyaXg0UG9vbCwgb2JqIH0pO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3F1aXJlIGEgUXVhdGVybmlvbiBmcm9tIHBvb2xcclxuICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBQb29sZWQgcXVhdGVybmlvblxyXG4gICAgICovXHJcbiAgICBxdWF0ZXJuaW9uKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHF1YXRlcm5pb25Qb29sLmFjcXVpcmUoKTtcclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQucHVzaCh7IHBvb2w6IHF1YXRlcm5pb25Qb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjcXVpcmUgYW4gRXVsZXIgZnJvbSBwb29sXHJcbiAgICAgKiBAcmV0dXJucyB7RXVsZXJ9IFBvb2xlZCBldWxlclxyXG4gICAgICovXHJcbiAgICBldWxlcigpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBldWxlclBvb2wuYWNxdWlyZSgpO1xyXG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZC5wdXNoKHsgcG9vbDogZXVsZXJQb29sLCBvYmogfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2UgYWxsIG9iamVjdHMgYWxsb2NhdGVkIGluIHRoaXMgc2NvcGVcclxuICAgICAqL1xyXG4gICAgcmVsZWFzZUFsbCgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgcG9vbCwgb2JqIH0gb2YgdGhpcy5fYWxsb2NhdGVkKSB7XHJcbiAgICAgICAgICAgIHBvb2wucmVsZWFzZShvYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9hbGxvY2F0ZWQubGVuZ3RoID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjb3VudCBvZiBhbGxvY2F0ZWQgb2JqZWN0cyBpbiB0aGlzIHNjb3BlXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBOdW1iZXIgb2YgYWxsb2NhdGVkIG9iamVjdHNcclxuICAgICAqL1xyXG4gICAgZ2V0QWxsb2NhdGVkQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FsbG9jYXRlZC5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2R1bGUtbGV2ZWwgdGVtcG9yYXJ5IG9iamVjdHMgZm9yIGhvdC1wYXRoIHJldXNlXHJcbiAqIElNUE9SVEFOVDogVGhlc2UgYXJlIE5PVCB0aHJlYWQtc2FmZS4gT25seSB1c2UgaW4gc2luZ2xlLXRocmVhZGVkIGNvbnRleHRzLlxyXG4gKiBSZXNldCB0aGVzZSBiZWZvcmUgdXNlIHRvIGF2b2lkIHN0YWxlIGRhdGEuXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdGVtcFZlY3RvcjNBID0gbmV3IFZlY3RvcjMoKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBWZWN0b3IzQiA9IG5ldyBWZWN0b3IzKCk7XHJcbmV4cG9ydCBjb25zdCB0ZW1wVmVjdG9yM0MgPSBuZXcgVmVjdG9yMygpO1xyXG5leHBvcnQgY29uc3QgdGVtcE1hdHJpeDRBID0gbmV3IE1hdHJpeDQoKTtcclxuZXhwb3J0IGNvbnN0IHRlbXBNYXRyaXg0QiA9IG5ldyBNYXRyaXg0KCk7XHJcbmV4cG9ydCBjb25zdCB0ZW1wUXVhdGVybmlvbkEgPSBuZXcgUXVhdGVybmlvbigpO1xyXG5leHBvcnQgY29uc3QgdGVtcFF1YXRlcm5pb25CID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgcG9vbCBzdGF0aXN0aWNzIGZvciBhbGwgcHJlLWNvbmZpZ3VyZWQgcG9vbHNcclxuICogQHJldHVybnMge29iamVjdH0gU3RhdGlzdGljcyBmb3IgYWxsIHBvb2xzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9vbFN0YXRzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2ZWN0b3IzOiB2ZWN0b3IzUG9vbC5nZXRTdGF0cygpLFxyXG4gICAgICAgIG1hdHJpeDQ6IG1hdHJpeDRQb29sLmdldFN0YXRzKCksXHJcbiAgICAgICAgcXVhdGVybmlvbjogcXVhdGVybmlvblBvb2wuZ2V0U3RhdHMoKSxcclxuICAgICAgICBldWxlcjogZXVsZXJQb29sLmdldFN0YXRzKClcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEaXNwb3NlIGFsbCBwcmUtY29uZmlndXJlZCBwb29sc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VBbGxQb29scygpIHtcclxuICAgIHZlY3RvcjNQb29sLmRpc3Bvc2UoKTtcclxuICAgIG1hdHJpeDRQb29sLmRpc3Bvc2UoKTtcclxuICAgIHF1YXRlcm5pb25Qb29sLmRpc3Bvc2UoKTtcclxuICAgIGV1bGVyUG9vbC5kaXNwb3NlKCk7XHJcbn1cclxuIiwiLyoqXHJcbiAqIEJsb2JVcmxNYW5hZ2VyIC0gU2VjdXJlIGJsb2IgVVJMIGxpZmVjeWNsZSBtYW5hZ2VtZW50XHJcbiAqXHJcbiAqIFRyYWNrcyBibG9iIFVSTHMgYW5kIGVuc3VyZXMgdGhleSBhcmUgcmV2b2tlZCB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xyXG4gKiBhbmQgdW5hdXRob3JpemVkIGFjY2Vzcy4gQ3JpdGljYWwgZm9yIHNlY3VyaXR5IGFuZCByZXNvdXJjZSBtYW5hZ2VtZW50LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignQmxvYlVybE1hbmFnZXInKTtcclxuXHJcbi8qKlxyXG4gKiBCbG9iVXJsTWFuYWdlciAtIE1hbmFnZXMgYmxvYiBVUkwgbGlmZWN5Y2xlXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmxvYlVybE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwIG9mIGJsb2IgVVJMIHRvIG1ldGFkYXRhXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91cmxzID0gbmV3IE1hcCgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIG1hbmFnZXIgaGFzIGJlZW4gZGlzcG9zZWRcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnQgbWFuYWdlciBpcyBub3QgZGlzcG9zZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgbWFuYWdlciBpcyBkaXNwb3NlZFxyXG4gICAgICovXHJcbiAgICBfYXNzZXJ0Tm90RGlzcG9zZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmxvYlVybE1hbmFnZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBibG9iIFVSTCBmcm9tIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Jsb2J8QXJyYXlCdWZmZXJ8VWludDhBcnJheX0gZGF0YSAtIERhdGEgdG8gY3JlYXRlIGJsb2IgZnJvbVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1pbWVUeXBlIC0gTUlNRSB0eXBlIChlLmcuLCAnbW9kZWwvZ2x0Zi1iaW5hcnknKVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtsYWJlbF0gLSBPcHRpb25hbCBsYWJlbCBmb3IgZGVidWdnaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBCbG9iIFVSTFxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBkYXRhIG9yIG1pbWVUeXBlIGlzIGludmFsaWRcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQmxvYlVybChkYXRhLCBtaW1lVHlwZSwgbGFiZWwgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIG1pbWVUeXBlXHJcbiAgICAgICAgaWYgKHR5cGVvZiBtaW1lVHlwZSAhPT0gJ3N0cmluZycgfHwgbWltZVR5cGUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnbWltZVR5cGUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ21pbWVUeXBlJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ29udmVydCBkYXRhIHRvIEJsb2IgaWYgbmVlZGVkXHJcbiAgICAgICAgbGV0IGJsb2I7XHJcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIGJsb2IgPSBkYXRhO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHsgdHlwZTogbWltZVR5cGUgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICdkYXRhIG11c3QgYmUgQmxvYiwgQXJyYXlCdWZmZXIsIG9yIFVpbnQ4QXJyYXknLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYmxvYiBVUkxcclxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG5cclxuICAgICAgICAvLyBUcmFjayBtZXRhZGF0YVxyXG4gICAgICAgIHRoaXMuX3VybHMuc2V0KHVybCwge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgIG1pbWVUeXBlLFxyXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgfHwgJ3VubGFiZWxlZCcsXHJcbiAgICAgICAgICAgIHNpemU6IGJsb2Iuc2l6ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0ZWQgYmxvYiBVUkw6ICR7bGFiZWwgfHwgdXJsLnN1YnN0cmluZygwLCA1MCl9LCBzaXplOiAke2Jsb2Iuc2l6ZX0gYnl0ZXNgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVyIGFuIGV4dGVybmFsbHkgY3JlYXRlZCBibG9iIFVSTCBmb3IgdHJhY2tpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gQmxvYiBVUkwgdG8gdHJhY2tcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGFiZWxdIC0gT3B0aW9uYWwgbGFiZWwgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBVUkwgaXMgbm90IGEgYmxvYiBVUkxcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJCbG9iVXJsKHVybCwgbGFiZWwgPSAnJykge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJyB8fCAhdXJsLnN0YXJ0c1dpdGgoJ2Jsb2I6JykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICd1cmwgbXVzdCBiZSBhIHZhbGlkIGJsb2IgVVJMJyxcclxuICAgICAgICAgICAgICAgICd1cmwnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuX3VybHMuaGFzKHVybCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXJscy5zZXQodXJsLCB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogJ3Vua25vd24nLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsIHx8ICdyZWdpc3RlcmVkLWV4dGVybmFsJyxcclxuICAgICAgICAgICAgICAgIHNpemU6IDBcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJlZ2lzdGVyZWQgZXh0ZXJuYWwgYmxvYiBVUkw6ICR7bGFiZWwgfHwgdXJsLnN1YnN0cmluZygwLCA1MCl9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV2b2tlIGEgYmxvYiBVUkwgYW5kIHJlbW92ZSBmcm9tIHRyYWNraW5nXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMIHRvIHJldm9rZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHdhcyB0cmFja2VkIGFuZCByZXZva2VkXHJcbiAgICAgKi9cclxuICAgIHJldm9rZUJsb2JVcmwodXJsKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX3VybHMuaGFzKHVybCkpIHtcclxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLl91cmxzLmdldCh1cmwpO1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VybHMuZGVsZXRlKHVybCk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFJldm9rZWQgYmxvYiBVUkw6ICR7bWV0YWRhdGEubGFiZWx9LCBhZ2U6ICR7RGF0ZS5ub3coKSAtIG1ldGFkYXRhLmNyZWF0ZWRBdH1tc2ApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldm9rZSBhbGwgYmxvYiBVUkxzIGFuZCBjbGVhciB0cmFja2luZ1xyXG4gICAgICovXHJcbiAgICByZXZva2VBbGwoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXZva2luZyAke3RoaXMuX3VybHMuc2l6ZX0gYmxvYiBVUkxzYCk7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgdXJsIG9mIHRoaXMuX3VybHMua2V5cygpKSB7XHJcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3VybHMuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0cmFja2VkIGJsb2IgVVJMIG1ldGFkYXRhXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fG51bGx9IE1ldGFkYXRhIG9yIG51bGwgaWYgbm90IHRyYWNrZWRcclxuICAgICAqL1xyXG4gICAgZ2V0TWV0YWRhdGEodXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VybHMuZ2V0KHVybCkgfHwgbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgdHJhY2tlZCBibG9iIFVSTHNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8e3VybDogc3RyaW5nLCBtZXRhZGF0YTogb2JqZWN0fT59IEFycmF5IG9mIFVSTCBpbmZvXHJcbiAgICAgKi9cclxuICAgIGdldEFsbFRyYWNrZWRVcmxzKCkge1xyXG4gICAgICAgIGNvbnN0IHVybHMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IFt1cmwsIG1ldGFkYXRhXSBvZiB0aGlzLl91cmxzLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICB1cmxzLnB1c2goeyB1cmwsIG1ldGFkYXRhIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJscztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBzdGF0aXN0aWNzIGFib3V0IHRyYWNrZWQgVVJMc1xyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU2l6ZSA9IDA7XHJcbiAgICAgICAgbGV0IG9sZGVzdEFnZSA9IDA7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXRhZGF0YSBvZiB0aGlzLl91cmxzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICAgIHRvdGFsU2l6ZSArPSBtZXRhZGF0YS5zaXplO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgICAgIGlmIChhZ2UgPiBvbGRlc3RBZ2UpIHtcclxuICAgICAgICAgICAgICAgIG9sZGVzdEFnZSA9IGFnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY291bnQ6IHRoaXMuX3VybHMuc2l6ZSxcclxuICAgICAgICAgICAgdG90YWxTaXplLFxyXG4gICAgICAgICAgICBvbGRlc3RBZ2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV2b2tlIGJsb2IgVVJMcyBvbGRlciB0aGFuIHNwZWNpZmllZCBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4QWdlTXMgLSBNYXhpbXVtIGFnZSBpbiBtaWxsaXNlY29uZHNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IE51bWJlciBvZiBVUkxzIHJldm9rZWRcclxuICAgICAqL1xyXG4gICAgcmV2b2tlT2xkZXJUaGFuKG1heEFnZU1zKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCB0b1Jldm9rZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFt1cmwsIG1ldGFkYXRhXSBvZiB0aGlzLl91cmxzLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBhZ2UgPSBub3cgLSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgICAgIGlmIChhZ2UgPiBtYXhBZ2VNcykge1xyXG4gICAgICAgICAgICAgICAgdG9SZXZva2UucHVzaCh1cmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHVybCBvZiB0b1Jldm9rZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJldm9rZUJsb2JVcmwodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0b1Jldm9rZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBSZXZva2VkICR7dG9SZXZva2UubGVuZ3RofSBibG9iIFVSTHMgb2xkZXIgdGhhbiAke21heEFnZU1zfW1zYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdG9SZXZva2UubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYSBVUkwgaXMgYmVpbmcgdHJhY2tlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgdG8gY2hlY2tcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBpcyB0cmFja2VkXHJcbiAgICAgKi9cclxuICAgIGlzVHJhY2tlZCh1cmwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXJscy5oYXModXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgbWFuYWdlciBhbmQgcmV2b2tlIGFsbCBVUkxzXHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzcG9zaW5nIEJsb2JVcmxNYW5hZ2VyJyk7XHJcbiAgICAgICAgdGhpcy5yZXZva2VBbGwoKTtcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHbG9iYWwgYmxvYiBVUkwgbWFuYWdlciBpbnN0YW5jZVxyXG4gKiBAdHlwZSB7QmxvYlVybE1hbmFnZXJ9XHJcbiAqL1xyXG5jb25zdCBnbG9iYWxCbG9iVXJsTWFuYWdlciA9IG5ldyBCbG9iVXJsTWFuYWdlcigpO1xyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZ2xvYmFsIGJsb2IgVVJMIG1hbmFnZXJcclxuICogQHJldHVybnMge0Jsb2JVcmxNYW5hZ2VyfSBHbG9iYWwgbWFuYWdlciBpbnN0YW5jZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbEJsb2JVcmxNYW5hZ2VyKCkge1xyXG4gICAgcmV0dXJuIGdsb2JhbEJsb2JVcmxNYW5hZ2VyO1xyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJsb2IgVVJMIHdpdGggYXV0b21hdGljIHRyYWNraW5nXHJcbiAqXHJcbiAqIEBwYXJhbSB7QmxvYnxBcnJheUJ1ZmZlcnxVaW50OEFycmF5fSBkYXRhIC0gRGF0YSB0byBjcmVhdGUgYmxvYiBmcm9tXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBtaW1lVHlwZSAtIE1JTUUgdHlwZVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsXSAtIE9wdGlvbmFsIGxhYmVsIGZvciBkZWJ1Z2dpbmdcclxuICogQHJldHVybnMge3N0cmluZ30gQmxvYiBVUkxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFja2VkQmxvYlVybChkYXRhLCBtaW1lVHlwZSwgbGFiZWwpIHtcclxuICAgIHJldHVybiBnbG9iYWxCbG9iVXJsTWFuYWdlci5jcmVhdGVCbG9iVXJsKGRhdGEsIG1pbWVUeXBlLCBsYWJlbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gcmV2b2tlIGEgYmxvYiBVUkxcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIEJsb2IgVVJMIHRvIHJldm9rZVxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgd2FzIHRyYWNrZWQgYW5kIHJldm9rZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXZva2VUcmFja2VkQmxvYlVybCh1cmwpIHtcclxuICAgIHJldHVybiBnbG9iYWxCbG9iVXJsTWFuYWdlci5yZXZva2VCbG9iVXJsKHVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJsb2JVcmxNYW5hZ2VyO1xyXG4iLCIvKipcclxuICogUmVuZGVyTG9vcCAtIEZyYW1lLWluZGVwZW5kZW50IGFuaW1hdGlvbiBsb29wIHdpdGggYnVkZ2V0IG1hbmFnZW1lbnRcclxuICpcclxuICogUHJvdmlkZXMgYSByb2J1c3QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGxvb3Agd2l0aDpcclxuICogLSBEZWx0YSB0aW1lIGNhbGN1bGF0aW9uIGZvciBmcmFtZS1pbmRlcGVuZGVudCB1cGRhdGVzXHJcbiAqIC0gRnJhbWUgYnVkZ2V0IG1hbmFnZW1lbnQgdG8gcHJldmVudCBmcmFtZSBkcm9wc1xyXG4gKiAtIERlZmVycmVkIHRhc2sgZXhlY3V0aW9uXHJcbiAqIC0gUGVyZm9ybWFuY2UgbW9uaXRvcmluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJy4vTG9nZ2VyLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignUmVuZGVyTG9vcCcpO1xyXG5cclxuLyoqXHJcbiAqIFJlbmRlckxvb3AgLSBNYW5hZ2VzIGFuaW1hdGlvbiBmcmFtZSBsb29wXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUmVuZGVyTG9vcCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJlbmRlckxvb3BcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZUZuIC0gVXBkYXRlIGZ1bmN0aW9uIGNhbGxlZCBlYWNoIGZyYW1lIHdpdGggZGVsdGFUaW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJGbiAtIFJlbmRlciBmdW5jdGlvbiBjYWxsZWQgZWFjaCBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnRhcmdldEZwcz02MF0gLSBUYXJnZXQgZnJhbWVzIHBlciBzZWNvbmRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhEZWx0YVRpbWU9MC4xXSAtIE1heGltdW0gZGVsdGEgdGltZSBpbiBzZWNvbmRzIChwcmV2ZW50cyBzcGlyYWwgb2YgZGVhdGgpXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZUZuLCByZW5kZXJGbiwgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlID0gdXBkYXRlRm47XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyID0gcmVuZGVyRm47XHJcblxyXG4gICAgICAgIHRoaXMuX3RhcmdldEZwcyA9IG9wdGlvbnMudGFyZ2V0RnBzIHx8IDYwO1xyXG4gICAgICAgIHRoaXMuX21heERlbHRhVGltZSA9IG9wdGlvbnMubWF4RGVsdGFUaW1lIHx8IDAuMTsgLy8gMTAwbXMgbWF4XHJcbiAgICAgICAgdGhpcy5fZnJhbWVCdWRnZXQgPSAxMDAwIC8gdGhpcy5fdGFyZ2V0RnBzOyAvLyBtcyBwZXIgZnJhbWVcclxuXHJcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JhZklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZGVmZXJyZWRUYXNrcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBQZXJmb3JtYW5jZSB0cmFja2luZ1xyXG4gICAgICAgIHRoaXMuX2Zwc0hpc3RvcnkgPSBbXTtcclxuICAgICAgICB0aGlzLl9mcHNIaXN0b3J5U2l6ZSA9IDYwOyAvLyBUcmFjayBsYXN0IDYwIGZyYW1lc1xyXG4gICAgICAgIHRoaXMuX2xhc3RGcHNVcGRhdGUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRGcHMgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgdGhlIHJlbmRlciBsb29wXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZW5kZXJMb29wIGFscmVhZHkgcnVubmluZycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ291bnQgPSAwO1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdSZW5kZXJMb29wIHN0YXJ0ZWQnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fdGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcCB0aGUgcmVuZGVyIGxvb3BcclxuICAgICAqL1xyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fcnVubmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fcmFmSWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmFmSWQpO1xyXG4gICAgICAgICAgICB0aGlzLl9yYWZJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbyhgUmVuZGVyTG9vcCBzdG9wcGVkIGFmdGVyICR7dGhpcy5fZnJhbWVDb3VudH0gZnJhbWVzYCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWluIGxvb3AgdGlja1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3RpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9ydW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZyYW1lU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBjb25zdCByYXdEZWx0YVRpbWUgPSAoZnJhbWVTdGFydCAtIHRoaXMuX2xhc3RUaW1lKSAvIDEwMDA7IC8vIENvbnZlcnQgdG8gc2Vjb25kc1xyXG5cclxuICAgICAgICAvLyBDbGFtcCBkZWx0YSB0aW1lIHRvIHByZXZlbnQgc3BpcmFsIG9mIGRlYXRoXHJcbiAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gTWF0aC5taW4ocmF3RGVsdGFUaW1lLCB0aGlzLl9tYXhEZWx0YVRpbWUpO1xyXG5cclxuICAgICAgICB0aGlzLl9sYXN0VGltZSA9IGZyYW1lU3RhcnQ7XHJcbiAgICAgICAgdGhpcy5fZnJhbWVDb3VudCsrO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgbG9naWNcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlKGRlbHRhVGltZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW5kZXJcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGRlZmVycmVkIHRhc2tzIGlmIHRpbWUgcGVybWl0c1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZUVsYXBzZWQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGZyYW1lU3RhcnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSB0aGlzLl9mcmFtZUJ1ZGdldCAtIGZyYW1lRWxhcHNlZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZW1haW5pbmdUaW1lID4gMSAmJiB0aGlzLl9kZWZlcnJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NEZWZlcnJlZFRhc2tzKHJlbWFpbmluZ1RpbWUgLSAxKTsgLy8gTGVhdmUgMW1zIG1hcmdpblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgRlBTIHRyYWNraW5nXHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUZwc1RyYWNraW5nKHBlcmZvcm1hbmNlLm5vdygpIC0gZnJhbWVTdGFydCk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW4gcmVuZGVyIGxvb3A6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAvLyBDb250aW51ZSBsb29wIGRlc3BpdGUgZXJyb3JcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNjaGVkdWxlIG5leHQgZnJhbWVcclxuICAgICAgICB0aGlzLl9yYWZJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl90aWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgRlBTIHRyYWNraW5nXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lVGltZSAtIFRpbWUgdGFrZW4gZm9yIHRoaXMgZnJhbWUgaW4gbXNcclxuICAgICAqL1xyXG4gICAgX3VwZGF0ZUZwc1RyYWNraW5nKGZyYW1lVGltZSkge1xyXG4gICAgICAgIHRoaXMuX2Zwc0hpc3RvcnkucHVzaCgxMDAwIC8gZnJhbWVUaW1lKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2Zwc0hpc3RvcnkubGVuZ3RoID4gdGhpcy5fZnBzSGlzdG9yeVNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5fZnBzSGlzdG9yeS5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIEZQUyBldmVyeSBzZWNvbmRcclxuICAgICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBpZiAobm93IC0gdGhpcy5fbGFzdEZwc1VwZGF0ZSA+IDEwMDApIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudEZwcyA9IHRoaXMuX2Zwc0hpc3RvcnkucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyB0aGlzLl9mcHNIaXN0b3J5Lmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEZwc1VwZGF0ZSA9IG5vdztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9jZXNzIGRlZmVycmVkIHRhc2tzIHdpdGhpbiB0aW1lIGJ1ZGdldFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUaW1lIC0gTWF4aW11bSB0aW1lIGluIG1zIHRvIHNwZW5kIG9uIHRhc2tzXHJcbiAgICAgKi9cclxuICAgIF9wcm9jZXNzRGVmZXJyZWRUYXNrcyhtYXhUaW1lKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIHdoaWxlICh0aGlzLl9kZWZlcnJlZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lID49IG1heFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXNrID0gdGhpcy5fZGVmZXJyZWRUYXNrcy5zaGlmdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRhc2suZm4oKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRXJyb3IgaW4gZGVmZXJyZWQgdGFzazogJHt0YXNrLmxhYmVsfWAsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGUgdGFzayBpZiB3aXRoaW4gZnJhbWUgYnVkZ2V0LCBvdGhlcndpc2UgZGVmZXJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXNrIC0gVGFzayBmdW5jdGlvbiB0byBleGVjdXRlXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ByaW9yaXR5PTBdIC0gVGFzayBwcmlvcml0eSAoaGlnaGVyID0gbW9yZSBpbXBvcnRhbnQpXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xhYmVsPScnXSAtIFRhc2sgbGFiZWwgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICovXHJcbiAgICBleGVjdXRlT3JEZWZlcih0YXNrLCBwcmlvcml0eSA9IDAsIGxhYmVsID0gJycpIHtcclxuICAgICAgICBjb25zdCBmcmFtZUVsYXBzZWQgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuX2xhc3RUaW1lO1xyXG5cclxuICAgICAgICBpZiAoZnJhbWVFbGFwc2VkIDwgdGhpcy5fZnJhbWVCdWRnZXQgKiAwLjgpIHtcclxuICAgICAgICAgICAgLy8gV2l0aGluIGJ1ZGdldCwgZXhlY3V0ZSBub3dcclxuICAgICAgICAgICAgdGFzaygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE92ZXIgYnVkZ2V0LCBkZWZlclxyXG4gICAgICAgICAgICB0aGlzLl9kZWZlcnJlZFRhc2tzLnB1c2goeyBmbjogdGFzaywgcHJpb3JpdHksIGxhYmVsIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU29ydCBieSBwcmlvcml0eSAoaGlnaGVyIGZpcnN0KVxyXG4gICAgICAgICAgICB0aGlzLl9kZWZlcnJlZFRhc2tzLnNvcnQoKGEsIGIpID0+IGIucHJpb3JpdHkgLSBhLnByaW9yaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBGUFNcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IEF2ZXJhZ2UgRlBTIG92ZXIgcmVjZW50IGZyYW1lc1xyXG4gICAgICovXHJcbiAgICBnZXRGcHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodGhpcy5fY3VycmVudEZwcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcGVyZm9ybWFuY2Ugc3RhdHNcclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9IFBlcmZvcm1hbmNlIHN0YXRpc3RpY3NcclxuICAgICAqL1xyXG4gICAgZ2V0U3RhdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZnBzOiB0aGlzLmdldEZwcygpLFxyXG4gICAgICAgICAgICBmcmFtZUNvdW50OiB0aGlzLl9mcmFtZUNvdW50LFxyXG4gICAgICAgICAgICBkZWZlcnJlZFRhc2tDb3VudDogdGhpcy5fZGVmZXJyZWRUYXNrcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHJ1bm5pbmc6IHRoaXMuX3J1bm5pbmdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgbG9vcCBpcyBydW5uaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBydW5uaW5nXHJcbiAgICAgKi9cclxuICAgIGlzUnVubmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcnVubmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBmcmFtZSBjb3VudFxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gVG90YWwgZnJhbWVzIHJlbmRlcmVkXHJcbiAgICAgKi9cclxuICAgIGdldEZyYW1lQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciBhbGwgZGVmZXJyZWQgdGFza3NcclxuICAgICAqL1xyXG4gICAgY2xlYXJEZWZlcnJlZFRhc2tzKCkge1xyXG4gICAgICAgIHRoaXMuX2RlZmVycmVkVGFza3MubGVuZ3RoID0gMDtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0NsZWFyZWQgYWxsIGRlZmVycmVkIHRhc2tzJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGcmFtZUJ1ZGdldE1vbml0b3IgLSBNb25pdG9ycyBhbmQgYWxlcnRzIG9uIGZyYW1lIGJ1ZGdldCB2aW9sYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRnJhbWVCdWRnZXRNb25pdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgRnJhbWVCdWRnZXRNb25pdG9yXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RhcmdldEZwcz02MF0gLSBUYXJnZXQgRlBTXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25WaW9sYXRpb25dIC0gQ2FsbGJhY2sgd2hlbiBidWRnZXQgaXMgdmlvbGF0ZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0RnBzID0gNjAsIG9uVmlvbGF0aW9uID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuX3RhcmdldEZwcyA9IHRhcmdldEZwcztcclxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZGdldCA9IDEwMDAgLyB0YXJnZXRGcHM7XHJcbiAgICAgICAgdGhpcy5fb25WaW9sYXRpb24gPSBvblZpb2xhdGlvbjtcclxuICAgICAgICB0aGlzLl92aW9sYXRpb25zID0gMDtcclxuICAgICAgICB0aGlzLl9mcmFtZVN0YXJ0ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hcmsgc3RhcnQgb2YgZnJhbWVcclxuICAgICAqL1xyXG4gICAgc3RhcnRGcmFtZSgpIHtcclxuICAgICAgICB0aGlzLl9mcmFtZVN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBmcmFtZSBpcyB3aXRoaW4gYnVkZ2V0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xvY2F0aW9uXSAtIExvY2F0aW9uIGlkZW50aWZpZXIgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgd2l0aGluIGJ1ZGdldFxyXG4gICAgICovXHJcbiAgICBjaGVja0J1ZGdldChsb2NhdGlvbiA9ICcnKSB7XHJcbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdGhpcy5fZnJhbWVTdGFydDtcclxuICAgICAgICBjb25zdCB3aXRoaW5CdWRnZXQgPSBlbGFwc2VkIDwgdGhpcy5fZnJhbWVCdWRnZXQ7XHJcblxyXG4gICAgICAgIGlmICghd2l0aGluQnVkZ2V0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Zpb2xhdGlvbnMrKztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vblZpb2xhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb25WaW9sYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGVsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnVkZ2V0OiB0aGlzLl9mcmFtZUJ1ZGdldCxcclxuICAgICAgICAgICAgICAgICAgICBvdmVycnVuOiBlbGFwc2VkIC0gdGhpcy5fZnJhbWVCdWRnZXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIud2FybihgRnJhbWUgYnVkZ2V0IHZpb2xhdGlvbiBhdCAke2xvY2F0aW9ufTogJHtlbGFwc2VkLnRvRml4ZWQoMil9bXMgLyAke3RoaXMuX2ZyYW1lQnVkZ2V0LnRvRml4ZWQoMil9bXNgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB3aXRoaW5CdWRnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdmlvbGF0aW9uIGNvdW50XHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUb3RhbCB2aW9sYXRpb25zXHJcbiAgICAgKi9cclxuICAgIGdldFZpb2xhdGlvbkNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92aW9sYXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdmlvbGF0aW9uIGNvdW50XHJcbiAgICAgKi9cclxuICAgIHJlc2V0VmlvbGF0aW9ucygpIHtcclxuICAgICAgICB0aGlzLl92aW9sYXRpb25zID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyTG9vcDtcclxuIiwiLyoqXHJcbiAqIEV2ZW50RW1pdHRlciAtIE9ic2VydmVyIHBhdHRlcm4gaW1wbGVtZW50YXRpb24gZm9yIGV2ZW50LWRyaXZlbiBjb21tdW5pY2F0aW9uXHJcbiAqXHJcbiAqIFByb3ZpZGVzIGRlY291cGxlZCBldmVudCBoYW5kbGluZyB3aXRoIGF1dG9tYXRpYyBjbGVhbnVwIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLlxyXG4gKiBDcml0aWNhbCBmb3IgbWFuYWdpbmcgc3RhdGUgY2hhbmdlcyBhbmQgY29tcG9uZW50IGNvbW11bmljYXRpb24uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi9Mb2dnZXIuanMnO1xyXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdFdmVudEVtaXR0ZXInKTtcclxuXHJcbi8qKlxyXG4gKiBFdmVudEVtaXR0ZXIgLSBQdWIvc3ViIGV2ZW50IHN5c3RlbVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXAgb2YgZXZlbnQgbmFtZSB0byBTZXQgb2YgbGlzdGVuZXJzXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBuZXcgTWFwKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdoZXRoZXIgZW1pdHRlciBoYXMgYmVlbiBkaXNwb3NlZFxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgZW1pc3Npb24gaGlzdG9yeSBmb3IgZGVidWdnaW5nIChsYXN0IE4gZXZlbnRzKVxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZXZlbnRIaXN0b3J5ID0gW107XHJcbiAgICAgICAgdGhpcy5fbWF4SGlzdG9yeVNpemUgPSA1MDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzc2VydCBlbWl0dGVyIGlzIG5vdCBkaXNwb3NlZFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiBlbWl0dGVyIGlzIGRpc3Bvc2VkXHJcbiAgICAgKi9cclxuICAgIF9hc3NlcnROb3REaXNwb3NlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFdmVudEVtaXR0ZXIgaGFzIGJlZW4gZGlzcG9zZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEV2ZW50IGhhbmRsZXJcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gLSBTdWJzY3JpcHRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vbmNlPWZhbHNlXSAtIEF1dG8tdW5zdWJzY3JpYmUgYWZ0ZXIgZmlyc3QgY2FsbFxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ3N0cmluZycgfHwgZXZlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnZXZlbnQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ2V2ZW50J1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ2NhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbicsXHJcbiAgICAgICAgICAgICAgICAnY2FsbGJhY2snXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXcmFwIGNhbGxiYWNrIGlmIG9uY2Ugb3B0aW9uIGlzIHNldFxyXG4gICAgICAgIGNvbnN0IHdyYXBwZWRDYWxsYmFjayA9IG9wdGlvbnMub25jZVxyXG4gICAgICAgICAgICA/ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDogY2FsbGJhY2s7XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIGNhbGxiYWNrIHJlZmVyZW5jZSBmb3IgcmVtb3ZhbFxyXG4gICAgICAgIGlmIChvcHRpb25zLm9uY2UpIHtcclxuICAgICAgICAgICAgd3JhcHBlZENhbGxiYWNrLl9vcmlnaW5hbENhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgbGlzdGVuZXJcclxuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycy5oYXMoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zZXQoZXZlbnQsIG5ldyBTZXQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5nZXQoZXZlbnQpLmFkZCh3cmFwcGVkQ2FsbGJhY2spO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoYFN1YnNjcmliZWQgdG8gZXZlbnQ6ICR7ZXZlbnR9YCk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB1bnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIHJldHVybiAoKSA9PiB0aGlzLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSB0byBhbiBldmVudCAoZmlyZXMgb25jZSB0aGVuIGF1dG8tdW5zdWJzY3JpYmVzKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRXZlbnQgaGFuZGxlclxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufSBVbnN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICovXHJcbiAgICBvbmNlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50LCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgZnJvbSBhbiBldmVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gRXZlbnQgaGFuZGxlciB0byByZW1vdmVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGNhbGxiYWNrIHdhcyBmb3VuZCBhbmQgcmVtb3ZlZFxyXG4gICAgICovXHJcbiAgICBvZmYoZXZlbnQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVHJ5IHRvIHJlbW92ZSBkaXJlY3RseVxyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVuc3Vic2NyaWJlZCBmcm9tIGV2ZW50OiAke2V2ZW50fWApO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRyeSB0byBmaW5kIGJ5IG9yaWdpbmFsIGNhbGxiYWNrIChmb3Igb25jZSBsaXN0ZW5lcnMpXHJcbiAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RlbmVyLl9vcmlnaW5hbENhbGxiYWNrID09PSBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYFVuc3Vic2NyaWJlZCBmcm9tIGV2ZW50OiAke2V2ZW50fSAob25jZSBsaXN0ZW5lcilgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgYW4gZXZlbnQgKG9yIGFsbCBldmVudHMgaWYgbm8gZXZlbnQgc3BlY2lmaWVkKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXZlbnRdIC0gRXZlbnQgbmFtZSAob3B0aW9uYWwpXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUFsbExpc3RlbmVycyhldmVudCA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KGV2ZW50KT8uc2l6ZSB8fCAwO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMuZGVsZXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZW1vdmVkICR7Y291bnR9IGxpc3RlbmVycyBmb3IgZXZlbnQ6ICR7ZXZlbnR9YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IEFycmF5LmZyb20odGhpcy5fbGlzdGVuZXJzLnZhbHVlcygpKVxyXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCBzZXQpID0+IHN1bSArIHNldC5zaXplLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUmVtb3ZlZCBhbGwgJHt0b3RhbENvdW50fSBsaXN0ZW5lcnNgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbWl0IGFuIGV2ZW50IHRvIGFsbCBzdWJzY3JpYmVyc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIEV2ZW50IG5hbWVcclxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFyZ3VtZW50cyB0byBwYXNzIHRvIGxpc3RlbmVyc1xyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgZXZlbnQgaGFkIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBlbWl0KGV2ZW50LCAuLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lcnMgfHwgbGlzdGVuZXJzLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVjb3JkIGluIGhpc3RvcnkgZm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgIHRoaXMuX3JlY29yZEV2ZW50KGV2ZW50LCBhcmdzKTtcclxuXHJcbiAgICAgICAgLy8gQ2FsbCBhbGwgbGlzdGVuZXJzXHJcbiAgICAgICAgbGV0IGNhbGxDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbENvdW50Kys7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEVycm9yIGluIGV2ZW50IGxpc3RlbmVyIGZvciAnJHtldmVudH0nOmAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIGNhbGxpbmcgb3RoZXIgbGlzdGVuZXJzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRW1pdHRlZCBldmVudDogJHtldmVudH0gdG8gJHtjYWxsQ291bnR9IGxpc3RlbmVyc2ApO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY29yZCBldmVudCBpbiBoaXN0b3J5IGZvciBkZWJ1Z2dpbmdcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzIC0gRXZlbnQgYXJndW1lbnRzXHJcbiAgICAgKi9cclxuICAgIF9yZWNvcmRFdmVudChldmVudCwgYXJncykge1xyXG4gICAgICAgIHRoaXMuX2V2ZW50SGlzdG9yeS5wdXNoKHtcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgYXJnQ291bnQ6IGFyZ3MubGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEtlZXAgaGlzdG9yeSBib3VuZGVkXHJcbiAgICAgICAgaWYgKHRoaXMuX2V2ZW50SGlzdG9yeS5sZW5ndGggPiB0aGlzLl9tYXhIaXN0b3J5U2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEhpc3Rvcnkuc2hpZnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZXZlbnQgZW1pc3Npb24gaGlzdG9yeVxyXG4gICAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBldmVudCByZWNvcmRzXHJcbiAgICAgKi9cclxuICAgIGdldEV2ZW50SGlzdG9yeSgpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuX2V2ZW50SGlzdG9yeV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBldmVudCBoYXMgbGlzdGVuZXJzXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgZXZlbnQgaGFzIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBoYXNMaXN0ZW5lcnMoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMuZ2V0KGV2ZW50KTtcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJzID8gbGlzdGVuZXJzLnNpemUgPiAwIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgbGlzdGVuZXIgY291bnQgZm9yIGFuIGV2ZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gRXZlbnQgbmFtZVxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gTnVtYmVyIG9mIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBsaXN0ZW5lckNvdW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldChldmVudCk7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVycyA/IGxpc3RlbmVycy5zaXplIDogMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhbGwgZXZlbnQgbmFtZXMgd2l0aCBsaXN0ZW5lcnNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nW119IEFycmF5IG9mIGV2ZW50IG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGV2ZW50TmFtZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5fbGlzdGVuZXJzLmtleXMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgc3RhdGlzdGljcyBhYm91dCBsaXN0ZW5lcnNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fSBTdGF0aXN0aWNzXHJcbiAgICAgKi9cclxuICAgIGdldFN0YXRzKCkge1xyXG4gICAgICAgIGNvbnN0IHN0YXRzID0ge1xyXG4gICAgICAgICAgICB0b3RhbEV2ZW50czogdGhpcy5fbGlzdGVuZXJzLnNpemUsXHJcbiAgICAgICAgICAgIHRvdGFsTGlzdGVuZXJzOiAwLFxyXG4gICAgICAgICAgICBldmVudEJyZWFrZG93bjoge31cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IFtldmVudCwgbGlzdGVuZXJzXSBvZiB0aGlzLl9saXN0ZW5lcnMuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbGlzdGVuZXJzLnNpemU7XHJcbiAgICAgICAgICAgIHN0YXRzLnRvdGFsTGlzdGVuZXJzICs9IGNvdW50O1xyXG4gICAgICAgICAgICBzdGF0cy5ldmVudEJyZWFrZG93bltldmVudF0gPSBjb3VudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdGF0cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgZW1pdHRlciBhbmQgcmVtb3ZlIGFsbCBsaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGlzcG9zZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNwb3NpbmcgRXZlbnRFbWl0dGVyJyk7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9ldmVudEhpc3RvcnkubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUeXBlZEV2ZW50RW1pdHRlciAtIFR5cGUtc2FmZSBldmVudCBlbWl0dGVyIHdpdGggZXZlbnQgcmVnaXN0cnlcclxuICpcclxuICogRW5zdXJlcyBldmVudHMgYXJlIHByZS1yZWdpc3RlcmVkLCBwcmV2ZW50aW5nIHR5cG9zIGFuZCBwcm92aWRpbmdcclxuICogYmV0dGVyIGRldmVsb3BlciBleHBlcmllbmNlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFR5cGVkRXZlbnRFbWl0dGVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgVHlwZWRFdmVudEVtaXR0ZXJcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nW119IGFsbG93ZWRFdmVudHMgLSBBcnJheSBvZiBhbGxvd2VkIGV2ZW50IG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFsbG93ZWRFdmVudHMpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgb2YgYWxsb3dlZCBldmVudCBuYW1lc1xyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fYWxsb3dlZEV2ZW50cyA9IG5ldyBTZXQoYWxsb3dlZEV2ZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBWYWxpZGF0ZSBldmVudCBuYW1lIGlzIGFsbG93ZWRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCBuYW1lXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIGV2ZW50IGlzIG5vdCBhbGxvd2VkXHJcbiAgICAgKi9cclxuICAgIF92YWxpZGF0ZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9hbGxvd2VkRXZlbnRzLmhhcyhldmVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgIGBFdmVudCAnJHtldmVudH0nIGlzIG5vdCByZWdpc3RlcmVkLiBBbGxvd2VkIGV2ZW50czogJHtBcnJheS5mcm9tKHRoaXMuX2FsbG93ZWRFdmVudHMpLmpvaW4oJywgJyl9YCxcclxuICAgICAgICAgICAgICAgICdldmVudCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnQgKG92ZXJyaWRlIHRvIGFkZCB2YWxpZGF0aW9uKVxyXG4gICAgICogQG92ZXJyaWRlXHJcbiAgICAgKi9cclxuICAgIG9uKGV2ZW50LCBjYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5vbihldmVudCwgY2FsbGJhY2ssIG9wdGlvbnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW1pdCBhbiBldmVudCAob3ZlcnJpZGUgdG8gYWRkIHZhbGlkYXRpb24pXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqL1xyXG4gICAgZW1pdChldmVudCwgLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRXZlbnRFbWl0dGVyO1xyXG4iLCIvKipcclxuICogQXBwQ29uc3RhbnRzXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBBbmltYXRpb24gc3RhdGUgY29uc3RhbnRzIGFuZCBBUktpdCBibGVuZHNoYXBlIG1hcHBpbmdzLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBWb2ljZSBjaGF0IHN0YXRlIGVudW1lcmF0aW9uXHJcbiAqIENvbnRyb2xzIHRoZSByZW5kZXJpbmcgYW5kIGJlaGF2aW9yIG1vZGVzIG9mIHRoZSBhdmF0YXJcclxuICovXHJcbmV4cG9ydCBjb25zdCBUWVZvaWNlQ2hhdFN0YXRlID0ge1xyXG4gICAgSWRsZTogJ0lkbGUnLCAgICAgICAgICAgLy8gSWRsZS93YWl0aW5nIHN0YXRlXHJcbiAgICBMaXN0ZW5pbmc6ICdMaXN0ZW5pbmcnLCAvLyBMaXN0ZW5pbmcgdG8gdXNlciBpbnB1dFxyXG4gICAgUmVzcG9uZGluZzogJ1Jlc3BvbmRpbmcnLCAvLyBTcGVha2luZy9yZXNwb25kaW5nIGFuaW1hdGlvblxyXG4gICAgVGhpbmtpbmc6ICdUaGlua2luZycgICAgLy8gUHJvY2Vzc2luZy90aGlua2luZyBhbmltYXRpb25cclxufTtcclxuXHJcbi8qKlxyXG4gKiBBUktpdCBibGVuZHNoYXBlIG5hbWVzICg1MiBleHByZXNzaW9ucylcclxuICogVXNlZCBmb3IgZmFjaWFsIGV4cHJlc3Npb24gbWFwcGluZyBmcm9tIEFSS2l0IGZhY2UgdHJhY2tpbmdcclxuICovXHJcbmV4cG9ydCBjb25zdCBBUktpdEJsZW5kc2hhcGVzID0gW1xyXG4gICAgJ2Jyb3dEb3duTGVmdCcsXHJcbiAgICAnYnJvd0Rvd25SaWdodCcsXHJcbiAgICAnYnJvd0lubmVyVXAnLFxyXG4gICAgJ2Jyb3dPdXRlclVwTGVmdCcsXHJcbiAgICAnYnJvd091dGVyVXBSaWdodCcsXHJcbiAgICAnY2hlZWtQdWZmJyxcclxuICAgICdjaGVla1NxdWludExlZnQnLFxyXG4gICAgJ2NoZWVrU3F1aW50UmlnaHQnLFxyXG4gICAgJ2V5ZUJsaW5rTGVmdCcsXHJcbiAgICAnZXllQmxpbmtSaWdodCcsXHJcbiAgICAnZXllTG9va0Rvd25MZWZ0JyxcclxuICAgICdleWVMb29rRG93blJpZ2h0JyxcclxuICAgICdleWVMb29rSW5MZWZ0JyxcclxuICAgICdleWVMb29rSW5SaWdodCcsXHJcbiAgICAnZXllTG9va091dExlZnQnLFxyXG4gICAgJ2V5ZUxvb2tPdXRSaWdodCcsXHJcbiAgICAnZXllTG9va1VwTGVmdCcsXHJcbiAgICAnZXllTG9va1VwUmlnaHQnLFxyXG4gICAgJ2V5ZVNxdWludExlZnQnLFxyXG4gICAgJ2V5ZVNxdWludFJpZ2h0JyxcclxuICAgICdleWVXaWRlTGVmdCcsXHJcbiAgICAnZXllV2lkZVJpZ2h0JyxcclxuICAgICdqYXdGb3J3YXJkJyxcclxuICAgICdqYXdMZWZ0JyxcclxuICAgICdqYXdPcGVuJyxcclxuICAgICdqYXdSaWdodCcsXHJcbiAgICAnbW91dGhDbG9zZScsXHJcbiAgICAnbW91dGhEaW1wbGVMZWZ0JyxcclxuICAgICdtb3V0aERpbXBsZVJpZ2h0JyxcclxuICAgICdtb3V0aEZyb3duTGVmdCcsXHJcbiAgICAnbW91dGhGcm93blJpZ2h0JyxcclxuICAgICdtb3V0aEZ1bm5lbCcsXHJcbiAgICAnbW91dGhMZWZ0JyxcclxuICAgICdtb3V0aExvd2VyRG93bkxlZnQnLFxyXG4gICAgJ21vdXRoTG93ZXJEb3duUmlnaHQnLFxyXG4gICAgJ21vdXRoUHJlc3NMZWZ0JyxcclxuICAgICdtb3V0aFByZXNzUmlnaHQnLFxyXG4gICAgJ21vdXRoUHVja2VyJyxcclxuICAgICdtb3V0aFJpZ2h0JyxcclxuICAgICdtb3V0aFJvbGxMb3dlcicsXHJcbiAgICAnbW91dGhSb2xsVXBwZXInLFxyXG4gICAgJ21vdXRoU2hydWdMb3dlcicsXHJcbiAgICAnbW91dGhTaHJ1Z1VwcGVyJyxcclxuICAgICdtb3V0aFNtaWxlTGVmdCcsXHJcbiAgICAnbW91dGhTbWlsZVJpZ2h0JyxcclxuICAgICdtb3V0aFN0cmV0Y2hMZWZ0JyxcclxuICAgICdtb3V0aFN0cmV0Y2hSaWdodCcsXHJcbiAgICAnbW91dGhVcHBlclVwTGVmdCcsXHJcbiAgICAnbW91dGhVcHBlclVwUmlnaHQnLFxyXG4gICAgJ25vc2VTbmVlckxlZnQnLFxyXG4gICAgJ25vc2VTbmVlclJpZ2h0JyxcclxuICAgICd0b25ndWVPdXQnXHJcbl07XHJcblxyXG4vKipcclxuICogRkxBTUUgbW9kZWwgYm9uZSBuYW1lc1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEZsYW1lQm9uZU5hbWVzID0gW1xyXG4gICAgJ3Jvb3QnLFxyXG4gICAgJ25lY2snLFxyXG4gICAgJ2phdycsXHJcbiAgICAnbGVmdEV5ZScsXHJcbiAgICAncmlnaHRFeWUnXHJcbl07XHJcblxyXG4vKipcclxuICogQ29uc3RhbnRzIGRlcml2ZWQgZnJvbSB0aGUgYXJyYXlzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQVJLSVRfQkxFTkRTSEFQRVNfQ09VTlQgPSBBUktpdEJsZW5kc2hhcGVzLmxlbmd0aDtcclxuZXhwb3J0IGNvbnN0IEZMQU1FX0JPTkVTX0NPVU5UID0gRmxhbWVCb25lTmFtZXMubGVuZ3RoO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgVFlWb2ljZUNoYXRTdGF0ZSxcclxuICAgIEFSS2l0QmxlbmRzaGFwZXMsXHJcbiAgICBGbGFtZUJvbmVOYW1lcyxcclxuICAgIEFSS0lUX0JMRU5EU0hBUEVTX0NPVU5ULFxyXG4gICAgRkxBTUVfQk9ORVNfQ09VTlRcclxufTtcclxuIiwiLyoqXHJcbiAqIEFuaW1hdGlvbk1hbmFnZXJcclxuICpcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogTWFuYWdlcyBhbmltYXRpb24gc3RhdGUgbWFjaGluZSB3aXRoIFRocmVlLmpzIEFuaW1hdGlvbk1peGVyLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IExvb3BPbmNlLCBMb29wUmVwZWF0IH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBUWVZvaWNlQ2hhdFN0YXRlIH0gZnJvbSAnLi9BcHBDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdBbmltYXRpb25NYW5hZ2VyJyk7XHJcblxyXG4vKipcclxuICogQmFzZSBTdGF0ZSBjbGFzcyBmb3IgYW5pbWF0aW9uIHN0YXRlc1xyXG4gKi9cclxuY2xhc3MgU3RhdGUge1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9ucywgaXNHcm91cCkge1xyXG4gICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gYWN0aW9ucyB8fCBbXTtcclxuICAgICAgICB0aGlzLmJsZW5kaW5nVGltZSA9IDAuNTtcclxuICAgICAgICB0aGlzLmlzR3JvdXAgPSBpc0dyb3VwIHx8IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gT3ZlcnJpZGUgaW4gc3ViY2xhc3Nlc1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGVsbG8gc3RhdGUgLSBpbml0aWFsIGdyZWV0aW5nIGFuaW1hdGlvblxyXG4gKi9cclxuY2xhc3MgSGVsbG8gZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLklkbGUgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA9IDA7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgMS4wKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wUmVwZWF0O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBhdXNlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ucGxheSgpO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuSWRsZSAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uZ2V0Q2xpcCgpLmR1cmF0aW9uIC0gdGhpcy5ibGVuZGluZ1RpbWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXh0U3RhZ2UgPSB0aGlzLnN0YWdlICsgMTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhZ2UgPj0gdGhpcy5hY3Rpb25zLmxlbmd0aCkgbmV4dFN0YWdlID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW25leHRTdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbbmV4dFN0YWdlXS5sb29wID0gTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZSh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYWN0aW9uc1tuZXh0U3RhZ2VdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gbmV4dFN0YWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSWRsZSBzdGF0ZSAtIHJlc3RpbmcgYW5pbWF0aW9uXHJcbiAqL1xyXG5jbGFzcyBJZGxlIGV4dGVuZHMgU3RhdGUge1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9ucywgaXNHcm91cCkge1xyXG4gICAgICAgIHN1cGVyKGFjdGlvbnMsIGlzR3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShzdGF0ZSkge1xyXG4gICAgICAgIC8vIFNhZmV0eSBjaGVjazogcmV0dXJuIGVhcmx5IGlmIG5vIGFjdGlvbnMgYXZhaWxhYmxlXHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGlvbnMgfHwgdGhpcy5hY3Rpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlByZXBhcmVDcm9zc0ZhZGUoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uLCB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYmxlbmRpbmdUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLklkbGUgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuSWRsZSAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaXN0ZW4gc3RhdGUgLSBsaXN0ZW5pbmcgYW5pbWF0aW9uXHJcbiAqL1xyXG5jbGFzcyBMaXN0ZW4gZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ubG9vcCA9IHRoaXMuaXNHcm91cCA/IExvb3BPbmNlIDogTG9vcFJlcGVhdDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdGhpcy5pc0dyb3VwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzR3JvdXApIHtcclxuICAgICAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmcgJiZcclxuICAgICAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZSArIDFdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlICsgMV0ubG9vcCA9IExvb3BSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZyAmJlxyXG4gICAgICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gdHJ1ZSAmJlxyXG4gICAgICAgICAgICAgICAgKHRoaXMuc3RhZ2UgPT09IDAgfHwgdGhpcy5zdGFnZSA9PT0gMSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1syXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1syXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbMl0sIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0ubG9vcCA9IExvb3BPbmNlO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zWzJdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmcgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlICYmXHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09ICh0aGlzLmlzR3JvdXAgPyB0aGlzLmFjdGlvbnMubGVuZ3RoIC0gMSA6IDApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUaGluayBzdGF0ZSAtIHRoaW5raW5nIGFuaW1hdGlvblxyXG4gKi9cclxuY2xhc3MgVGhpbmsgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiByZXR1cm4gZWFybHkgaWYgbm8gYWN0aW9ucyBhdmFpbGFibGVcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aW9ucyB8fCB0aGlzLmFjdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIHN0YXRlID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ucGxheSgpO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIDEuMCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCB0aGlzLmJsZW5kaW5nVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNHcm91cCkge1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodCh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZSArIDFdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlICsgMV0ubG9vcCA9IExvb3BSZXBlYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2UgKyAxXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nICYmXHJcbiAgICAgICAgICAgICAgICBzdGF0ZSAhPT0gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgICAgICh0aGlzLnN0YWdlID09PSAwIHx8IHRoaXMuc3RhZ2UgPT09IDEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0udGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbMl0ucGxheSgpO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zWzJdLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zWzJdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZSh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0sIHRoaXMuYWN0aW9uc1syXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZSA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmcgJiZcclxuICAgICAgICAgICAgc3RhdGUgIT09IFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmcgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUgJiZcclxuICAgICAgICAgICAgdGhpcy5zdGFnZSA9PT0gKHRoaXMuaXNHcm91cCA/IHRoaXMuYWN0aW9ucy5sZW5ndGggLSAxIDogMCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNwZWFrIHN0YXRlIC0gc3BlYWtpbmcgYW5pbWF0aW9uIHdpdGggcmFuZG9tIG1vdmVtZW50IHNlbGVjdGlvblxyXG4gKi9cclxuY2xhc3MgU3BlYWsgZXh0ZW5kcyBTdGF0ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25zLCBpc0dyb3VwKSB7XHJcbiAgICAgICAgc3VwZXIoYWN0aW9ucywgaXNHcm91cCk7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIEluaXRpYWxpemVkIHdpdGgnLCBhY3Rpb25zPy5sZW5ndGggfHwgMCwgJ2FjdGlvbnMsIGlzR3JvdXA6JywgaXNHcm91cCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSByYW5kb20gbnVtYmVyIGluIHJhbmdlIFttaW4sIG1heF1cclxuICAgICAqL1xyXG4gICAgZ2V0UmFuZG9tTnVtYmVyKG1heCwgbWluKSB7XHJcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtYXggLSBtaW47XHJcbiAgICAgICAgcmV0dXJuIG1pbiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIHJhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoc3RhdGUpIHtcclxuICAgICAgICAvLyBTYWZldHkgY2hlY2s6IHJldHVybiBlYXJseSBpZiBubyBhY3Rpb25zIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICghdGhpcy5hY3Rpb25zIHx8IHRoaXMuYWN0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl93YXJuZWROb0FjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdbU1BFQUtdIE5vIGFjdGlvbnMgYXZhaWxhYmxlIScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2FybmVkTm9BY3Rpb25zID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFN0YXJ0IHNwZWFraW5nIC0gcGljayBhIHJhbmRvbSBhbmltYXRpb25cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5DdXJQbGF5aW5nID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc3RhdGUgPT09IFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZyAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzUGxheWluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgLy8gUmFuZG9tbHkgc2VsZWN0IGluaXRpYWwgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIHRoaXMuc3RhZ2UgPSBNYXRoLmNlaWwodGhpcy5nZXRSYW5kb21OdW1iZXIoMCwgdGhpcy5hY3Rpb25zLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIFN0YXJ0aW5nIGFuaW1hdGlvbiwgc3RhZ2U6JywgdGhpcy5zdGFnZSwgJ29mJywgdGhpcy5hY3Rpb25zLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS50aW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5TZXRXZWlnaHQodGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLCAxLjApO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0ubG9vcCA9IExvb3BPbmNlO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuUHJlcGFyZUNyb3NzRmFkZShBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENvbnRpbnVlIHNwZWFraW5nIC0gY3ljbGUgdGhyb3VnaCByYW5kb20gYW5pbWF0aW9uc1xyXG4gICAgICAgIGlmIChBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPT09IFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZyAmJlxyXG4gICAgICAgICAgICBzdGF0ZSA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQbGF5aW5nID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0udGltZSA+PVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmdldENsaXAoKS5kdXJhdGlvbiAtIHRoaXMuYmxlbmRpbmdUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgICAgICAgICAgLy8gUGljayBhIGRpZmZlcmVudCByYW5kb20gYW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWdlID0gKHRoaXMuc3RhZ2UgKyBNYXRoLmNlaWwodGhpcy5nZXRSYW5kb21OdW1iZXIoMSwgdGhpcy5hY3Rpb25zLmxlbmd0aCAtIDEpKSkgJSB0aGlzLmFjdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdbU1BFQUtdIEN5Y2xpbmcgdG8gbmV4dCBhbmltYXRpb24sIHN0YWdlOicsIHRoaXMuc3RhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLnBsYXkoKTtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgMS4wKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXS5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNbdGhpcy5zdGFnZV0uY2xhbXBXaGVuRmluaXNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5QcmVwYXJlQ3Jvc3NGYWRlKGxhc3RBY3Rpb24sIHRoaXMuYWN0aW9uc1t0aGlzLnN0YWdlXSwgdGhpcy5ibGVuZGluZ1RpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdG9wIHNwZWFraW5nIC0gZmluaXNoIGN1cnJlbnQgYW5pbWF0aW9uXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nICYmXHJcbiAgICAgICAgICAgIHN0YXRlICE9PSBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmcgJiZcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmxvb3AgPSBMb29wT25jZTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdLmNsYW1wV2hlbkZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdGhpcy5hY3Rpb25zW3RoaXMuc3RhZ2VdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuaW1hdGlvbk1hbmFnZXIgLSBNYWluIGFuaW1hdGlvbiBjb250cm9sbGVyXHJcbiAqIE1hbmFnZXMgc3RhdGUgbWFjaGluZSB3aXRoIGNyb3NzZmFkZSB0cmFuc2l0aW9ucyBiZXR3ZWVuIGFuaW1hdGlvbiBzdGF0ZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb25NYW5hZ2VyIHtcclxuICAgIC8vIFN0YXRpYyBwcm9wZXJ0aWVzXHJcbiAgICBzdGF0aWMgSXNCbGVuZGluZyA9IGZhbHNlO1xyXG4gICAgc3RhdGljIGFjdGlvbnMgPSBbXTtcclxuICAgIHN0YXRpYyBOZWVkUmVzZXQgPSBmYWxzZTtcclxuICAgIHN0YXRpYyBOZWVkRnVsbFJlc2V0ID0gZmFsc2U7XHJcbiAgICBzdGF0aWMgTGFzdEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgIHN0YXRpYyBDdXJQbGF5aW5nID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGFuaW1hdGlvbiBhY3Rpb24gd2VpZ2h0XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBTZXRXZWlnaHQoYWN0aW9uLCB3ZWlnaHQpIHtcclxuICAgICAgICBhY3Rpb24uZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgYWN0aW9uLnNldEVmZmVjdGl2ZVRpbWVTY2FsZSgxKTtcclxuICAgICAgICBhY3Rpb24uc2V0RWZmZWN0aXZlV2VpZ2h0KHdlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIGNyb3NzZmFkZSBiZXR3ZWVuIHR3byBhY3Rpb25zXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBQcmVwYXJlQ3Jvc3NGYWRlKHN0YXJ0QWN0aW9uLCBlbmRBY3Rpb24sIGRlZmF1bHREdXJhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZGVmYXVsdER1cmF0aW9uO1xyXG4gICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuVW5QYXVzZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkV4ZWN1dGVDcm9zc0ZhZGUoc3RhcnRBY3Rpb24sIGVuZEFjdGlvbiwgZHVyYXRpb24pO1xyXG4gICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZyA9IHRydWU7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0sIGRlZmF1bHREdXJhdGlvbiArIDAuMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXVzZSBhbGwgYW5pbWF0aW9uIGFjdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIFBhdXNlQWxsQWN0aW9ucygpIHtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgYWN0aW9uLnBhdXNlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhdXNlIGFsbCBhbmltYXRpb24gYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgVW5QYXVzZUFsbEFjdGlvbnMoKSB7XHJcbiAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5hY3Rpb25zLmZvckVhY2goZnVuY3Rpb24oYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbi5wYXVzZWQgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGUgY3Jvc3NmYWRlIGJldHdlZW4gdHdvIGFjdGlvbnNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIEV4ZWN1dGVDcm9zc0ZhZGUoc3RhcnRBY3Rpb24sIGVuZEFjdGlvbiwgZHVyYXRpb24pIHtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodChlbmRBY3Rpb24sIDEpO1xyXG4gICAgICAgIGVuZEFjdGlvbi50aW1lID0gMDtcclxuICAgICAgICBzdGFydEFjdGlvbi5jcm9zc0ZhZGVUbyhlbmRBY3Rpb24sIGR1cmF0aW9uLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLkFuaW1hdGlvbk1peGVyfSBtaXhlciAtIFRocmVlLmpzIGFuaW1hdGlvbiBtaXhlclxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5BbmltYXRpb25DbGlwW119IGFuaW1hdGlvbnMgLSBBbmltYXRpb24gY2xpcHNcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbmltYXRpb25jZmcgLSBBbmltYXRpb24gY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtaXhlciwgYW5pbWF0aW9ucywgYW5pbWF0aW9uY2ZnKSB7XHJcbiAgICAgICAgY29uc3QgaGVsbG9BY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgaWRsZUFjdGlvbnMgPSBbXTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5BY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3Qgc3BlYWtBY3Rpb25zID0gW107XHJcbiAgICAgICAgY29uc3QgdGhpbmtBY3Rpb25zID0gW107XHJcblxyXG4gICAgICAgIHRoaXMubWl4ZXIgPSBtaXhlcjtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGFjdGlvbiBpbmRpY2VzIGJhc2VkIG9uIGNvbmZpZ1xyXG4gICAgICAgIGNvbnN0IGhlbGxvSWR4ID0gYW5pbWF0aW9uY2ZnPy5oZWxsbz8uc2l6ZSB8fCAwO1xyXG4gICAgICAgIGNvbnN0IGlkbGVJZHggPSAoYW5pbWF0aW9uY2ZnPy5pZGxlPy5zaXplIHx8IDApICsgaGVsbG9JZHg7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuSWR4ID0gKGFuaW1hdGlvbmNmZz8ubGlzdGVuPy5zaXplIHx8IDApICsgaWRsZUlkeDtcclxuICAgICAgICBjb25zdCBzcGVha0lkeCA9IChhbmltYXRpb25jZmc/LnNwZWFrPy5zaXplIHx8IDApICsgbGlzdGVuSWR4O1xyXG4gICAgICAgIGNvbnN0IHRoaW5rSWR4ID0gKGFuaW1hdGlvbmNmZz8udGhpbms/LnNpemUgfHwgMCkgKyBzcGVha0lkeDtcclxuXHJcbiAgICAgICAgLy8gRGlzdHJpYnV0ZSBhbmltYXRpb24gY2xpcHMgdG8gc3RhdGUgYWN0aW9uIGFycmF5c1xyXG4gICAgICAgIGlmIChhbmltYXRpb25zICYmIGFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsaXAgPSBhbmltYXRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gbWl4ZXIuY2xpcEFjdGlvbihjbGlwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IGhlbGxvSWR4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVsbG9BY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IGlkbGVJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZGxlQWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRHVwbGljYXRlIGZvciBzdGF0ZXMgdGhhdCBzaGFyZSBpZGxlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbklkeCA9PT0gaWRsZUlkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5BY3Rpb25zLnB1c2gobWl4ZXIuY2xpcEFjdGlvbihjbGlwLmNsb25lKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwZWFrSWR4ID09PSBsaXN0ZW5JZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlYWtBY3Rpb25zLnB1c2gobWl4ZXIuY2xpcEFjdGlvbihjbGlwLmNsb25lKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaW5rSWR4ID09PSBzcGVha0lkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlua0FjdGlvbnMucHVzaChtaXhlci5jbGlwQWN0aW9uKGNsaXAuY2xvbmUoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA8IGxpc3RlbklkeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbkFjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgc3BlYWtJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGVha0FjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgdGhpbmtJZHgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlua0FjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuYWN0aW9ucy5wdXNoKGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlNldFdlaWdodChhY3Rpb24sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgc3RhdGUgaW5zdGFuY2VzXHJcbiAgICAgICAgdGhpcy5oZWxsbyA9IG5ldyBIZWxsbyhoZWxsb0FjdGlvbnMsIGFuaW1hdGlvbmNmZz8uaGVsbG8/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuaWRsZSA9IG5ldyBJZGxlKGlkbGVBY3Rpb25zLCBhbmltYXRpb25jZmc/LmlkbGU/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuID0gbmV3IExpc3RlbihsaXN0ZW5BY3Rpb25zLCBhbmltYXRpb25jZmc/Lmxpc3Rlbj8uaXNHcm91cCB8fCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy50aGluayA9IG5ldyBUaGluayh0aGlua0FjdGlvbnMsIGFuaW1hdGlvbmNmZz8udGhpbms/LmlzR3JvdXAgfHwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc3BlYWsgPSBuZXcgU3BlYWsoc3BlYWtBY3Rpb25zLCBhbmltYXRpb25jZmc/LnNwZWFrPy5pc0dyb3VwIHx8IGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50bHkgcGxheWluZyBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBjdXJQbGF5aW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlbGxvLmlzUGxheWluZykgcmV0dXJuIFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuICAgICAgICBpZiAodGhpcy5pZGxlLmlzUGxheWluZykgcmV0dXJuIFRZVm9pY2VDaGF0U3RhdGUuSWRsZTtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW4uaXNQbGF5aW5nKSByZXR1cm4gVFlWb2ljZUNoYXRTdGF0ZS5MaXN0ZW5pbmc7XHJcbiAgICAgICAgaWYgKHRoaXMudGhpbmsuaXNQbGF5aW5nKSByZXR1cm4gVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZztcclxuICAgICAgICBpZiAodGhpcy5zcGVhay5pc1BsYXlpbmcpIHJldHVybiBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmc7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgYW5pbWF0aW9uIG1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICB0aGlzLmhlbGxvLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLmlkbGUuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnRoaW5rLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnNwZWFrLmRpc3Bvc2UoKTtcclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0IGFsbCBhbmltYXRpb24gYWN0aW9uc1xyXG4gICAgICovXHJcbiAgICByZXNldEFsbEFjdGlvbnMoaWdub3JlQmxlbmRpbmcgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGN1clBsYXlpbmcgPSB0aGlzLmN1clBsYXlpbmcoKTtcclxuICAgICAgICBcclxuICAgICAgICBzd2l0Y2ggKGN1clBsYXlpbmcpIHtcclxuICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkxhc3RBY3Rpb24gPSB0aGlzLmhlbGxvLmFjdGlvbnNbdGhpcy5oZWxsby5zdGFnZV07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMubGlzdGVuLmFjdGlvbnNbdGhpcy5saXN0ZW4uc3RhZ2VdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5UaGlua2luZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMudGhpbmsuYWN0aW9uc1t0aGlzLnRoaW5rLnN0YWdlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuUmVzcG9uZGluZzpcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHRoaXMuc3BlYWsuYWN0aW9uc1t0aGlzLnNwZWFrLnN0YWdlXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoQW5pbWF0aW9uTWFuYWdlci5MYXN0QWN0aW9uKSB7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbi5sb29wID0gTG9vcE9uY2U7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbi5jbGFtcFdoZW5GaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiwgMS4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpZ25vcmVCbGVuZGluZykge1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLlBhdXNlQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICBBbmltYXRpb25NYW5hZ2VyLmFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGFjdGlvbi50aW1lID0gMDtcclxuICAgICAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuU2V0V2VpZ2h0KGFjdGlvbiwgMC4wKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIEFuaW1hdGlvbk1hbmFnZXIuTGFzdEFjdGlvbiA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGVsbG8uaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pZGxlLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuLmlzUGxheWluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGhpbmsuaXNQbGF5aW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zcGVhay5pc1BsYXlpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBhbmltYXRpb24gc3RhdGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZSAtIFRhcmdldCBzdGF0ZSAoVFlWb2ljZUNoYXRTdGF0ZSlcclxuICAgICAqL1xyXG4gICAgdXBkYXRlKHN0YXRlKSB7XHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuSXNCbGVuZGluZykgcmV0dXJuO1xyXG5cclxuICAgICAgICBBbmltYXRpb25NYW5hZ2VyLkN1clBsYXlpbmcgPSB0aGlzLmN1clBsYXlpbmcoKTtcclxuXHJcbiAgICAgICAgaWYgKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5JZGxlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaWRsZS51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLkxpc3RlbmluZzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Rlbi51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLlRoaW5raW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGhpbmsudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgVFlWb2ljZUNoYXRTdGF0ZS5SZXNwb25kaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BlYWsudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGxlLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKEFuaW1hdGlvbk1hbmFnZXIuQ3VyUGxheWluZykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLklkbGU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pZGxlLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuTGlzdGVuaW5nOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuLnVwZGF0ZShzdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFRZVm9pY2VDaGF0U3RhdGUuVGhpbmtpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aGluay51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVZvaWNlQ2hhdFN0YXRlLlJlc3BvbmRpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVhay51cGRhdGUoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlkbGUudXBkYXRlKHN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgU3RhdGUsIEhlbGxvLCBJZGxlLCBMaXN0ZW4sIFRoaW5rLCBTcGVhayB9O1xyXG5leHBvcnQgZGVmYXVsdCBBbmltYXRpb25NYW5hZ2VyO1xyXG4iLCIvKipcclxuICogU3BsYXRTY2VuZVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWF0cml4NCwgT2JqZWN0M0QsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRTY2VuZSBleHRlbmRzIE9iamVjdDNEIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGxhdEJ1ZmZlciwgcG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLCBxdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKSxcclxuICAgICAgICAgICAgICAgIHNjYWxlID0gbmV3IFZlY3RvcjMoMSwgMSwgMSksIG1pbmltdW1BbHBoYSA9IDEsIG9wYWNpdHkgPSAxLjAsIHZpc2libGUgPSB0cnVlKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnNwbGF0QnVmZmVyID0gc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKTtcclxuICAgICAgICB0aGlzLnNjYWxlLmNvcHkoc2NhbGUpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICB0aGlzLm1pbmltdW1BbHBoYSA9IG1pbmltdW1BbHBoYTtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICB9XHJcblxyXG4gICAgY29weVRyYW5zZm9ybURhdGEob3RoZXJTY2VuZSkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uY29weShvdGhlclNjZW5lLnBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvdGhlclNjZW5lLnF1YXRlcm5pb24pO1xyXG4gICAgICAgIHRoaXMuc2NhbGUuY29weShvdGhlclNjZW5lLnNjYWxlKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb3B5KG90aGVyU2NlbmUudHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVUcmFuc2Zvcm0oZHluYW1pY01vZGUpIHtcclxuICAgICAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF0cml4V29ybGRBdXRvVXBkYXRlKSB0aGlzLnVwZGF0ZVdvcmxkTWF0cml4KHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uY29weSh0aGlzLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXhBdXRvVXBkYXRlKSB0aGlzLnVwZGF0ZU1hdHJpeCgpO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybS5jb3B5KHRoaXMubWF0cml4KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRHZW9tZXRyeVxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQnVmZmVyQXR0cmlidXRlLCBCdWZmZXJHZW9tZXRyeSwgRHluYW1pY0RyYXdVc2FnZSwgSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLCBJbnN0YW5jZWRCdWZmZXJHZW9tZXRyeSB9IGZyb20gJ3RocmVlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdEdlb21ldHJ5IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBUaHJlZS5qcyBnZW9tZXRyeSB0aGF0IHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy4gVGhlIGdlb21ldHJ5IGlzIGluc3RhbmNlZCBhbmQgaXMgbWFkZSB1cCBvZlxyXG4gICAgICogdmVydGljZXMgZm9yIGEgc2luZ2xlIHF1YWQgYXMgd2VsbCBhcyBhbiBhdHRyaWJ1dGUgYnVmZmVyIGZvciB0aGUgc3BsYXQgaW5kZXhlcy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTcGxhdENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBzcGxhdHMgdGhhdCB0aGUgZ2VvbWV0cnkgd2lsbCBuZWVkIHRvIGFjY29tb2RhdGVcclxuICAgICAqIEByZXR1cm4ge1RIUkVFLkluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnVpbGQobWF4U3BsYXRDb3VudCkge1xyXG5cclxuICAgICAgICBjb25zdCBiYXNlR2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTtcclxuICAgICAgICBiYXNlR2VvbWV0cnkuc2V0SW5kZXgoWzAsIDEsIDIsIDAsIDIsIDNdKTtcclxuXHJcbiAgICAgICAgLy8gVmVydGljZXMgZm9yIHRoZSBpbnN0YW5jZWQgcXVhZFxyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg0ICogMyk7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnNBcnJheSwgMyk7XHJcbiAgICAgICAgYmFzZUdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBwb3NpdGlvbnMpO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zZXRYWVooMCwgLTEuMCwgLTEuMCwgMC4wKTtcclxuICAgICAgICBwb3NpdGlvbnMuc2V0WFlaKDEsIC0xLjAsIDEuMCwgMC4wKTtcclxuICAgICAgICBwb3NpdGlvbnMuc2V0WFlaKDIsIDEuMCwgMS4wLCAwLjApO1xyXG4gICAgICAgIHBvc2l0aW9ucy5zZXRYWVooMywgMS4wLCAtMS4wLCAwLjApO1xyXG4gICAgICAgIHBvc2l0aW9ucy5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEluc3RhbmNlZEJ1ZmZlckdlb21ldHJ5KCkuY29weShiYXNlR2VvbWV0cnkpO1xyXG5cclxuICAgICAgICAvLyBTcGxhdCBpbmRleCBidWZmZXJcclxuICAgICAgICBjb25zdCBzcGxhdEluZGV4QXJyYXkgPSBuZXcgVWludDMyQXJyYXkobWF4U3BsYXRDb3VudCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNwbGF0SW5kZXhlcyA9IG5ldyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUoc3BsYXRJbmRleEFycmF5LCAxLCBmYWxzZSk7XHJcbiAgICAgICAgc3BsYXRJbmRleGVzLnNldFVzYWdlKER5bmFtaWNEcmF3VXNhZ2UpO1xyXG4gICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc3BsYXRJbmRleCcsIHNwbGF0SW5kZXhlcyk7XHJcblxyXG4gICAgICAgIGdlb21ldHJ5Lmluc3RhbmNlQ291bnQgPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRUcmVlXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICovXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBkZWxheWVkRXhlY3V0ZSB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5cclxuLy8gV29ya2VyLXJlbGF0ZWQgZnVuY3Rpb25zIChzaW1wbGlmaWVkIHN0dWJzIC0gdGhlIGFjdHVhbCB3b3JrZXIgaXMgaGFuZGxlZCBkaWZmZXJlbnRseSlcclxuY29uc3QgY2hlY2tBbmRDcmVhdGVXb3JrZXIgPSAoKSA9PiB7XHJcbiAgICAvLyBXb3JrZXIgY3JlYXRpb24gaXMgaGFuZGxlZCBieSB0aGUgYnVpbGQgc3lzdGVtXHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmNvbnN0IHdvcmtlclByb2Nlc3NDZW50ZXJzID0gKHdvcmtlciwgY2VudGVycywgYnVmZmVycywgbWF4RGVwdGgsIG1heENlbnRlcnNQZXJOb2RlKSA9PiB7XHJcbiAgICAvLyBXb3JrZXIgbWVzc2FnZSBwYXNzaW5nXHJcbiAgICBpZiAod29ya2VyKSB7XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgJ3Byb2Nlc3MnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2VudGVycyc6IGNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAnbWF4RGVwdGgnOiBtYXhEZXB0aCxcclxuICAgICAgICAgICAgICAgICdtYXhDZW50ZXJzUGVyTm9kZSc6IG1heENlbnRlcnNQZXJOb2RlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBidWZmZXJzKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFNwbGF0U3ViVHJlZSBoZWxwZXIgY2xhc3NcclxuY2xhc3MgU3BsYXRTdWJUcmVlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucm9vdE5vZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29udmVydFdvcmtlclN1YlRyZWUod29ya2VyU3ViVHJlZSwgc3BsYXRNZXNoKSB7XHJcbiAgICAgICAgY29uc3Qgc3ViVHJlZSA9IG5ldyBTcGxhdFN1YlRyZWUoKTtcclxuICAgICAgICBzdWJUcmVlLnJvb3ROb2RlID0gd29ya2VyU3ViVHJlZS5yb290Tm9kZTtcclxuICAgICAgICBzdWJUcmVlLnNwbGF0TWVzaCA9IHNwbGF0TWVzaDtcclxuICAgICAgICByZXR1cm4gc3ViVHJlZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0VHJlZSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IobWF4RGVwdGgsIG1heENlbnRlcnNQZXJOb2RlKSB7XHJcbiAgICAgICAgdGhpcy5tYXhEZXB0aCA9IG1heERlcHRoO1xyXG4gICAgICAgIHRoaXMubWF4Q2VudGVyc1Blck5vZGUgPSBtYXhDZW50ZXJzUGVyTm9kZTtcclxuICAgICAgICB0aGlzLnN1YlRyZWVzID0gW107XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBudWxsO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuZGlwb3NlU3BsYXRUcmVlV29ya2VyKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZGlwb3NlU3BsYXRUcmVlV29ya2VyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0VHJlZVdvcmtlcikgdGhpcy5zcGxhdFRyZWVXb3JrZXIudGVybWluYXRlKCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdFRyZWVXb3JrZXIgPSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCB0aGlzIGluc3RhbmNlIG9mIFNwbGF0VHJlZSBmcm9tIGFuIGluc3RhbmNlIG9mIFNwbGF0TWVzaC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1NwbGF0TWVzaH0gc3BsYXRNZXNoIFRoZSBpbnN0YW5jZSBvZiBTcGxhdE1lc2ggZnJvbSB3aGljaCB0byBjb25zdHJ1Y3QgdGhpcyBzcGxhdCB0cmVlLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZmlsdGVyRnVuYyBPcHRpb25hbCBmdW5jdGlvbiB0byBmaWx0ZXIgb3V0IHVud2FudGVkIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uSW5kZXhlc1VwbG9hZCBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgdXBsb2FkIG9mIHNwbGF0IGNlbnRlcnMgdG8gdGhlIHNwbGF0IHRyZWVcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGZpbmlzaGVzLlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIGNvbnZlcnNpb24gb2YgdGhlIGxvY2FsIHNwbGF0IHRyZWUgZnJvbVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGZvcm1hdCBwcm9kdWNlZCBieSB0aGUgc3BsYXQgdHJlZSBidWlsZGVyIHdvcmtlciBzdGFydHMgYW5kIGVuZHMuXHJcbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgKi9cclxuICAgIHByb2Nlc3NTcGxhdE1lc2ggPSAoc3BsYXRNZXNoLCBmaWx0ZXJGdW5jID0gKCkgPT4gdHJ1ZSwgb25JbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbikgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zcGxhdFRyZWVXb3JrZXIpIHRoaXMuc3BsYXRUcmVlV29ya2VyID0gY2hlY2tBbmRDcmVhdGVXb3JrZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2ggPSBzcGxhdE1lc2g7XHJcbiAgICAgICAgdGhpcy5zdWJUcmVlcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENlbnRlcnNGb3JTY2VuZSA9IChzcGxhdE9mZnNldCwgc3BsYXRDb3VudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZUNlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiA0KTtcclxuICAgICAgICAgICAgbGV0IGFkZGVkQ291bnQgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsU3BsYXRJbmRleCA9IGkgKyBzcGxhdE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGdW5jKGdsb2JhbFNwbGF0SW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRNZXNoLmdldFNwbGF0Q2VudGVyKGdsb2JhbFNwbGF0SW5kZXgsIGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkQmFzZSA9IGFkZGVkQ291bnQgKiA0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyc1thZGRCYXNlXSA9IGNlbnRlci54O1xyXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyc1thZGRCYXNlICsgMV0gPSBjZW50ZXIueTtcclxuICAgICAgICAgICAgICAgICAgICBzY2VuZUNlbnRlcnNbYWRkQmFzZSArIDJdID0gY2VudGVyLno7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVDZW50ZXJzW2FkZEJhc2UgKyAzXSA9IGdsb2JhbFNwbGF0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkZWRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzY2VuZUNlbnRlcnM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja0ZvckVhcmx5RXhpdCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXBvc2VTcGxhdFRyZWVXb3JrZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAob25JbmRleGVzVXBsb2FkKSBvbkluZGV4ZXNVcGxvYWQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgZGVsYXllZEV4ZWN1dGUoKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGVja0ZvckVhcmx5RXhpdCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQ2VudGVycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwbGF0TWVzaC5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGxhdE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzcGxhdE1lc2guc2NlbmVzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gc3BsYXRNZXNoLmdldFNjZW5lKHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gc2NlbmUuc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2VuZUNlbnRlcnMgPSBhZGRDZW50ZXJzRm9yU2NlbmUoc3BsYXRPZmZzZXQsIHNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxDZW50ZXJzLnB1c2goc2NlbmVDZW50ZXJzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRPZmZzZXQgKz0gc3BsYXRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lQ2VudGVycyA9IGFkZENlbnRlcnNGb3JTY2VuZSgwLCBzcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGxDZW50ZXJzLnB1c2goc2NlbmVDZW50ZXJzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0VHJlZVdvcmtlci5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnN1YlRyZWVzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24pIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHdvcmtlclN1YlRyZWUgb2YgZS5kYXRhLnN1YlRyZWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkU3ViVHJlZSA9IFNwbGF0U3ViVHJlZS5jb252ZXJ0V29ya2VyU3ViVHJlZSh3b3JrZXJTdWJUcmVlLCBzcGxhdE1lc2gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3ViVHJlZXMucHVzaChjb252ZXJ0ZWRTdWJUcmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlwb3NlU3BsYXRUcmVlV29ya2VyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKSBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbih0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheWVkRXhlY3V0ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGRlbGF5ZWRFeGVjdXRlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkluZGV4ZXNVcGxvYWQpIG9uSW5kZXhlc1VwbG9hZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2ZlckJ1ZmZlcnMgPSBhbGxDZW50ZXJzLm1hcCgoYXJyYXkpID0+IGFycmF5LmJ1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyUHJvY2Vzc0NlbnRlcnModGhpcy5zcGxhdFRyZWVXb3JrZXIsIGFsbENlbnRlcnMsIHRyYW5zZmVyQnVmZmVycywgdGhpcy5tYXhEZXB0aCwgdGhpcy5tYXhDZW50ZXJzUGVyTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGNvdW50TGVhdmVzKCkge1xyXG5cclxuICAgICAgICBsZXQgbGVhZkNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnZpc2l0TGVhdmVzKCgpID0+IHtcclxuICAgICAgICAgICAgbGVhZkNvdW50Kys7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBsZWFmQ291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmlzaXRMZWF2ZXModmlzaXRGdW5jKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZpc2l0TGVhdmVzRnJvbU5vZGUgPSAobm9kZSwgdmlzaXRGdW5jKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgdmlzaXRGdW5jKG5vZGUpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICB2aXNpdExlYXZlc0Zyb21Ob2RlKGNoaWxkLCB2aXNpdEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgc3ViVHJlZSBvZiB0aGlzLnN1YlRyZWVzKSB7XHJcbiAgICAgICAgICAgIHZpc2l0TGVhdmVzRnJvbU5vZGUoc3ViVHJlZS5yb290Tm9kZSwgdmlzaXRGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0TWF0ZXJpYWxcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIRUFWSUxZIE1PRElGSUVEIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBBZGRlZCBGTEFNRSBib25lL3Bvc2UgdW5pZm9ybXMgYW5kIHRleHR1cmVzXHJcbiAqIC0gQWRkZWQgZXhwcmVzc2lvbiBibGVuZHNoYXBlIHN1cHBvcnRcclxuICogLSBFeHRlbmRlZCB2ZXJ0ZXggc2hhZGVyIHdpdGggR1BVIHNraW5uaW5nXHJcbiAqIC0gQWRkaXRpb25hbCB+NTAwIGxpbmVzIG9mIEZMQU1FLXNwZWNpZmljIHNoYWRlciBjb2RlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQ29sb3IsIERvdWJsZVNpZGUsIE1hdHJpeDQsIE5vcm1hbEJsZW5kaW5nLCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMiwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdE1hdGVyaWFsIHtcclxuXHJcbiAgICBzdGF0aWMgYnVpbGRWZXJ0ZXhTaGFkZXJCYXNlKGR5bmFtaWNNb2RlID0gZmFsc2UsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGZhbHNlLCBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLCBjdXN0b21WYXJzID0gJycpIHtcclxuICAgICAgICBsZXQgdmVydGV4U2hhZGVyU291cmNlID0gYCNkZWZpbmUgVVNFX1NLSU5OSU5HXHJcblxyXG4gICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAjaW5jbHVkZSA8Y29tbW9uPlxyXG5cclxuICAgICAgICBhdHRyaWJ1dGUgdWludCBzcGxhdEluZGV4O1xyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBmbGFtZU1vZGVsVGV4dHVyZTtcclxuICAgICAgICB1bmlmb3JtIGhpZ2hwIHVzYW1wbGVyMkQgYm9uZVRleHR1cmU7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB1c2FtcGxlcjJEIGJvbmVXZWlnaHRUZXh0dXJlO1xyXG5cclxuXHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCB1c2FtcGxlcjJEIGNlbnRlcnNDb2xvcnNUZXh0dXJlO1xyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmU7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVI7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUc7XHJcbiAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUI7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBzY2VuZUluZGV4ZXNUZXh0dXJlO1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBzY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZTtcclxuICAgICAgICB1bmlmb3JtIGludCBzY2VuZUNvdW50O1xyXG4gICAgICAgIHVuaWZvcm0gaW50IGdhdXNzaWFuU3BsYXRDb3VudDtcclxuICAgICAgICB1bmlmb3JtIGludCBic0NvdW50O1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgaGVhZEJvbmVJbmRleDtcclxuICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWM0IHNraW5JbmRleDtcclxuICAgICAgICAgICAgYXR0cmlidXRlIHZlYzQgc2tpbldlaWdodDtcclxuICAgICAgICAjZW5kaWZcclxuICAgIGA7XHJcblxyXG4gICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgIHVuaWZvcm0gZmxvYXQgc2NlbmVPcGFjaXR5WyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGludCBzY2VuZVZpc2liaWxpdHlbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZHluYW1pY01vZGUpIHtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIG1hdDQgdHJhbnNmb3Jtc1ske0NvbnN0YW50cy5NYXhTY2VuZXN9XTtcclxuICAgICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgJHtjdXN0b21WYXJzfVxyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBmb2NhbDtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IG9ydGhvWm9vbTtcclxuICAgICAgICB1bmlmb3JtIGludCBvcnRob2dyYXBoaWNNb2RlO1xyXG4gICAgICAgIHVuaWZvcm0gaW50IHBvaW50Q2xvdWRNb2RlRW5hYmxlZDtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIHZpZXdwb3J0O1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBiYXNpc1ZpZXdwb3J0O1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemU7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMyIGZsYW1lTW9kZWxUZXh0dXJlU2l6ZTtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgYm9uZVdlaWdodFRleHR1cmVTaXplO1xyXG4gICAgICAgIHVuaWZvcm0gdmVjMiBib25lVGV4dHVyZVNpemU7XHJcblxyXG4gICAgICAgIHVuaWZvcm0gaW50IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTtcclxuICAgICAgICB1bmlmb3JtIHZlYzIgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZTtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHZpc2libGVSZWdpb25SYWRpdXM7XHJcbiAgICAgICAgdW5pZm9ybSBmbG9hdCB2aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgZmlyc3RSZW5kZXJUaW1lO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgY3VycmVudFRpbWU7XHJcbiAgICAgICAgdW5pZm9ybSBpbnQgZmFkZUluQ29tcGxldGU7XHJcbiAgICAgICAgdW5pZm9ybSB2ZWMzIHNjZW5lQ2VudGVyO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BsYXRTY2FsZTtcclxuICAgICAgICB1bmlmb3JtIGZsb2F0IHNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluWyR7Q29uc3RhbnRzLk1heFNjZW5lc31dO1xyXG4gICAgICAgIHVuaWZvcm0gZmxvYXQgc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcblxyXG4gICAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XHJcbiAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICB2YXJ5aW5nIHZlYzIgdlBvc2l0aW9uO1xyXG4gICAgICAgIHZhcnlpbmcgdmVjMiB2U3BsYXRJbmRleDtcclxuICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgIHVuaWZvcm0gbWF0NCBiaW5kTWF0cml4O1xyXG4gICAgICAgICAgICB1bmlmb3JtIG1hdDQgYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgc2FtcGxlcjJEIGJvbmVUZXh0dXJlMDtcclxuICAgICAgICAgICAgbWF0NCBnZXRCb25lTWF0cml4MCggY29uc3QgaW4gZmxvYXQgaSApIHtcclxuICAgICAgICAgICAgICAgIGludCBzaXplID0gdGV4dHVyZVNpemUoIGJvbmVUZXh0dXJlMCwgMCApLng7XHJcbiAgICAgICAgICAgICAgICBpbnQgaiA9IGludCggaSApICogNDtcclxuICAgICAgICAgICAgICAgIGludCB4ID0gaiAlIHNpemU7XHJcbiAgICAgICAgICAgICAgICBpbnQgeSA9IGogLyBzaXplO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB2MSA9IHRleGVsRmV0Y2goIGJvbmVUZXh0dXJlMCwgaXZlYzIoIHgsIHkgKSwgMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCB2MiA9IHRleGVsRmV0Y2goIGJvbmVUZXh0dXJlMCwgaXZlYzIoIHggKyAxLCB5ICksIDAgKTtcclxuICAgICAgICAgICAgICAgIHZlYzQgdjMgPSB0ZXhlbEZldGNoKCBib25lVGV4dHVyZTAsIGl2ZWMyKCB4ICsgMiwgeSApLCAwICk7XHJcbiAgICAgICAgICAgICAgICB2ZWM0IHY0ID0gdGV4ZWxGZXRjaCggYm9uZVRleHR1cmUwLCBpdmVjMiggeCArIDMsIHkgKSwgMCApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdDQoIHYxLCB2MiwgdjMsIHY0ICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAjZW5kaWZcclxuXHJcbiAgICAgICAgbWF0MyBxdWF0ZXJuaW9uVG9Sb3RhdGlvbk1hdHJpeChmbG9hdCB4LCBmbG9hdCB5LCBmbG9hdCB6LCBmbG9hdCB3KSB7XHJcbiAgICAgICAgICAgIGZsb2F0IHMgPSAxLjAgLyBzcXJ0KHcgKiB3ICsgeCAqIHggKyB5ICogeSArIHogKiB6KTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG1hdDMoXHJcbiAgICAgICAgICAgICAgICAxLiAtIDIuICogKHkgKiB5ICsgeiAqIHopLFxyXG4gICAgICAgICAgICAgICAgMi4gKiAoeCAqIHkgKyB3ICogeiksXHJcbiAgICAgICAgICAgICAgICAyLiAqICh4ICogeiAtIHcgKiB5KSxcclxuICAgICAgICAgICAgICAgIDIuICogKHggKiB5IC0gdyAqIHopLFxyXG4gICAgICAgICAgICAgICAgMS4gLSAyLiAqICh4ICogeCArIHogKiB6KSxcclxuICAgICAgICAgICAgICAgIDIuICogKHkgKiB6ICsgdyAqIHgpLFxyXG4gICAgICAgICAgICAgICAgMi4gKiAoeCAqIHogKyB3ICogeSksXHJcbiAgICAgICAgICAgICAgICAyLiAqICh5ICogeiAtIHcgKiB4KSxcclxuICAgICAgICAgICAgICAgIDEuIC0gMi4gKiAoeCAqIHggKyB5ICogeSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZsb2F0IHNxcnQ4ID0gc3FydCg4LjApO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0IG1pbkFscGhhID0gMS4wIC8gMjU1LjA7XHJcblxyXG4gICAgICAgIGNvbnN0IHZlYzQgZW5jb2RlTm9ybTQgPSB2ZWM0KDEuMCAvIDI1NS4wLCAxLjAgLyAyNTUuMCwgMS4wIC8gMjU1LjAsIDEuMCAvIDI1NS4wKTtcclxuICAgICAgICBjb25zdCB1dmVjNCBtYXNrNCA9IHV2ZWM0KHVpbnQoMHgwMDAwMDBGRiksIHVpbnQoMHgwMDAwRkYwMCksIHVpbnQoMHgwMEZGMDAwMCksIHVpbnQoMHhGRjAwMDAwMCkpO1xyXG4gICAgICAgIGNvbnN0IHV2ZWM0IHNoaWZ0NCA9IHV2ZWM0KDAsIDgsIDE2LCAyNCk7XHJcbiAgICAgICAgaW50IGludGVybmFsID0gMTsvL3Nob3cgYSBnYXVzc2lhbiBzcGxhdHRpbmcgcG9pbnQgZXZlcnkgaW50ZXJuYWwgcG9pbnRzLlxyXG4gICAgICAgIHZlYzQgdWludFRvUkdCQVZlYyAodWludCB1KSB7XHJcbiAgICAgICAgICAgdXZlYzQgdXJnYmEgPSBtYXNrNCAmIHU7XHJcbiAgICAgICAgICAgdXJnYmEgPSB1cmdiYSA+PiBzaGlmdDQ7XHJcbiAgICAgICAgICAgdmVjNCByZ2JhID0gdmVjNCh1cmdiYSkgKiBlbmNvZGVOb3JtNDtcclxuICAgICAgICAgICByZXR1cm4gcmdiYTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmxvYXQgZ2V0UmVhbEluZGV4KGludCBzSW5kZXgsIGludCByZWR1Y2VkRmFjdG9yKSB7XHJcbiAgICAgICAgICAgIGludCByZW1haW5kZXIgPSBzSW5kZXggJSByZWR1Y2VkRmFjdG9yO1xyXG5cclxuICAgICAgICAgICAgaWYocmVtYWluZGVyID09IGludCgwKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZsb2F0KHNJbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmxvYXQoc0luZGV4IC0gcmVtYWluZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVjMiBnZXREYXRhVVYoaW4gaW50IHN0cmlkZSwgaW4gaW50IG9mZnNldCwgaW4gdmVjMiBkaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdCh1aW50KGdldFJlYWxJbmRleChpbnQoc3BsYXRJbmRleCksIGludGVybmFsKSkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0RmxhbWVEYXRhVVYoaW4gaW50IHN0cmlkZSwgaW4gaW50IG9mZnNldCwgaW4gdmVjMiBkaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdCh1aW50KGludChzcGxhdEluZGV4KSAvIGludGVybmFsKSAqIHVpbnQoc3RyaWRlKSArIHVpbnQob2Zmc2V0KSArIHVpbnQoZ2F1c3NpYW5TcGxhdENvdW50ICogYnNDb3VudCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0Qm9uZVdlaWdodFVWKGluIGludCBzdHJpZGUsIGluIGludCBvZmZzZXQsIGluIHZlYzIgZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gZmxvYXQodWludChpbnQoc3BsYXRJbmRleCkgLyBpbnRlcm5hbCkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkpIC8gZGltZW5zaW9ucy54O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGRpbWVuc2lvbnMueTtcclxuICAgICAgICAgICAgc2FtcGxlclVWLnggPSBmcmFjdChkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZXJVVjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlYzIgZ2V0QlNGbGFtZURhdGFVVihpbiBpbnQgYnNJbmVkZXgsIGluIGludCBzdHJpZGUsIGluIGludCBvZmZzZXQsIGluIHZlYzIgZGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gZmxvYXQodWludChpbnQoc3BsYXRJbmRleCkgLyBpbnRlcm5hbCkgKiB1aW50KHN0cmlkZSkgKyB1aW50KG9mZnNldCkgKyB1aW50KGdhdXNzaWFuU3BsYXRDb3VudCAqIGJzSW5lZGV4KSkgLyBkaW1lbnNpb25zLng7XHJcbiAgICAgICAgICAgIHNhbXBsZXJVVi55ID0gZmxvYXQoZmxvb3IoZCkpIC8gZGltZW5zaW9ucy55O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlclVWO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVjMiBnZXREYXRhVVZGKGluIHVpbnQgc0luZGV4LCBpbiBmbG9hdCBzdHJpZGUsIGluIHVpbnQgb2Zmc2V0LCBpbiB2ZWMyIGRpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgdmVjMiBzYW1wbGVyVVYgPSB2ZWMyKDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IGZsb2F0KHVpbnQoZmxvYXQoZ2V0UmVhbEluZGV4KGludChzSW5kZXgpLCBpbnRlcm5hbCkpICogc3RyaWRlKSArIG9mZnNldCkgLyBkaW1lbnNpb25zLng7XHJcbiAgICAgICAgICAgIHNhbXBsZXJVVi55ID0gZmxvYXQoZmxvb3IoZCkpIC8gZGltZW5zaW9ucy55O1xyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlclVWO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmxvYXQgU0hfQzEgPSAwLjQ4ODYwMjUxMTkwMjkxOTlmO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0WzVdIFNIX0MyID0gZmxvYXRbXSgxLjA5MjU0ODQsIC0xLjA5MjU0ODQsIDAuMzE1MzkxNiwgLTEuMDkyNTQ4NCwgMC41NDYyNzQyKTtcclxuXHJcbiAgICAgICAgbWF0NCBnZXRCb25lTWF0cml4KCBmbG9hdCBpICkge1xyXG4gICAgICAgICAgICBmbG9hdCB5ID0gaTtcclxuICAgICAgICAgICAgZmxvYXQgeCA9IDAuMDtcclxuXHJcbiAgICAgICAgICAgIHZlYzIgc2FtcGxlclVWID0gdmVjMigwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGQgPSBmbG9hdChpICogNC4wKSAvIGJvbmVUZXh0dXJlU2l6ZS54Oy8vNFxyXG4gICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGJvbmVUZXh0dXJlU2l6ZS55Oy8vNVxyXG4gICAgICAgICAgICBzYW1wbGVyVVYueCA9IGZyYWN0KGQpO1xyXG5cclxuICAgICAgICAgICAgdmVjNCB2MSA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKCBib25lVGV4dHVyZSwgc2FtcGxlclVWICkpO1xyXG4gICAgICAgICAgICB2ZWM0IHYyID0gdWludEJpdHNUb0Zsb2F0KHRleHR1cmUoIGJvbmVUZXh0dXJlLCB2ZWMyKHNhbXBsZXJVVi54ICsgMS4wIC8gYm9uZVRleHR1cmVTaXplLngsIHNhbXBsZXJVVi55KSkpO1xyXG4gICAgICAgICAgICB2ZWM0IHYzID0gdWludEJpdHNUb0Zsb2F0KHRleHR1cmUoIGJvbmVUZXh0dXJlLCB2ZWMyKHNhbXBsZXJVVi54ICsgMi4wIC8gYm9uZVRleHR1cmVTaXplLngsIHNhbXBsZXJVVi55KSApKTtcclxuICAgICAgICAgICAgdmVjNCB2NCA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKCBib25lVGV4dHVyZSwgdmVjMihzYW1wbGVyVVYueCArIDMuMCAvIGJvbmVUZXh0dXJlU2l6ZS54LCBzYW1wbGVyVVYueSkpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXQ0KCB2MSwgdjIsIHYzLCB2NCApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdm9pZCBtYWluICgpIHtcclxuXHJcbiAgICAgICAgICAgIHVpbnQgb2RkT2Zmc2V0ID0gc3BsYXRJbmRleCAmIHVpbnQoMHgwMDAwMDAwMSk7XHJcbiAgICAgICAgICAgIHVpbnQgZG91YmxlT2RkT2Zmc2V0ID0gb2RkT2Zmc2V0ICogdWludCgyKTtcclxuICAgICAgICAgICAgYm9vbCBpc0V2ZW4gPSBvZGRPZmZzZXQgPT0gdWludCgwKTtcclxuICAgICAgICAgICAgdWludCBuZWFyZXN0RXZlbkluZGV4ID0gc3BsYXRJbmRleCAtIG9kZE9mZnNldDtcclxuICAgICAgICAgICAgZmxvYXQgZk9kZE9mZnNldCA9IGZsb2F0KG9kZE9mZnNldCk7XHJcblxyXG4gICAgICAgICAgICB1dmVjNCBzYW1wbGVkQ2VudGVyQ29sb3IgPSB0ZXh0dXJlKGNlbnRlcnNDb2xvcnNUZXh0dXJlLCBnZXREYXRhVVYoMSwgMCwgY2VudGVyc0NvbG9yc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgIC8vIHZlYzMgc3BsYXRDZW50ZXIgPSB1aW50Qml0c1RvRmxvYXQodXZlYzMoc2FtcGxlZENlbnRlckNvbG9yLmdiYSkpO1xyXG5cclxuICAgICAgICAgICAgdXZlYzMgc2FtcGxlZENlbnRlciA9IHRleHR1cmUoY2VudGVyc0NvbG9yc1RleHR1cmUsIGdldERhdGFVVigxLCAwLCBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUpKS5nYmE7XHJcbiAgICAgICAgICAgIHZlYzMgc3BsYXRDZW50ZXIgPSB1aW50Qml0c1RvRmxvYXQodXZlYzMoc2FtcGxlZENlbnRlcikpO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBmbGFtZVRleHR1cmVVViA9IGdldEJTRmxhbWVEYXRhVVYoYnNDb3VudCwgMSwgMCwgZmxhbWVNb2RlbFRleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgdXZlYzMgc2FtcGxlZGZsYW1lUG9zID0gdGV4dHVyZShmbGFtZU1vZGVsVGV4dHVyZSwgZmxhbWVUZXh0dXJlVVYpLnJnYjtcclxuICAgICAgICAgICAgLy8gc3BsYXRDZW50ZXIgKz0gdWludEJpdHNUb0Zsb2F0KHV2ZWMzKHNhbXBsZWRmbGFtZVBvcy5yZ2IpKTtcclxuXHJcbiAgICAgICAgICAgIGZvcihpbnQgaSA9IDA7IGkgPCBic0NvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHZlYzIgZmxhbWVCU1RleHR1cmVVViA9IGdldEJTRmxhbWVEYXRhVVYoaSwgMSwgMCwgZmxhbWVNb2RlbFRleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgICAgIHV2ZWMzIHNhbXBsZWRCU1BvcyA9IHRleHR1cmUoZmxhbWVNb2RlbFRleHR1cmUsIGZsYW1lQlNUZXh0dXJlVVYpLnJnYjtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIHNhbXBsZXJVViA9IHZlYzIoMC4wLCAwLjApO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZCA9IGZsb2F0KGkgLyA0ICsgNSAqIDQpIC8gYm9uZVRleHR1cmVTaXplLng7Ly80XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVyVVYueSA9IGZsb2F0KGZsb29yKGQpKSAvIGJvbmVUZXh0dXJlU2l6ZS55Oy8vMzJcclxuICAgICAgICAgICAgICAgIHNhbXBsZXJVVi54ID0gZnJhY3QoZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBic1dlaWdodCA9IHVpbnRCaXRzVG9GbG9hdCh0ZXh0dXJlKGJvbmVUZXh0dXJlLCBzYW1wbGVyVVYpKTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHdlaWdodCA9IGJzV2VpZ2h0LnI7XHJcbiAgICAgICAgICAgICAgICBpZihpICUgNCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ID0gYnNXZWlnaHQuZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGkgJSA0ID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQgPSBic1dlaWdodC5iO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoaSAlIDQgPT0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IGJzV2VpZ2h0LmE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSBzcGxhdENlbnRlciArIHdlaWdodCAqIHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQlNQb3MpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WCA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueCApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WSA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueSApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0WiA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgueiApO1xyXG4gICAgICAgICAgICAgICAgbWF0NCBib25lTWF0VyA9IGdldEJvbmVNYXRyaXgwKCBza2luSW5kZXgudyApO1xyXG4gICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgbWF0NCBza2luTWF0cml4ID0gbWF0NCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBza2luTWF0cml4ICs9IHNraW5XZWlnaHQueCAqIGJvbmVNYXRYO1xyXG4gICAgICAgICAgICAgICAgc2tpbk1hdHJpeCArPSBza2luV2VpZ2h0LnkgKiBib25lTWF0WTtcclxuICAgICAgICAgICAgICAgIHNraW5NYXRyaXggKz0gc2tpbldlaWdodC56ICogYm9uZU1hdFo7XHJcbiAgICAgICAgICAgICAgICBza2luTWF0cml4ICs9IHNraW5XZWlnaHQudyAqIGJvbmVNYXRXO1xyXG4gICAgICAgICAgICAgICAgLy8gc2tpbk1hdHJpeCA9IGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbk1hdHJpeCAqIGJpbmRNYXRyaXg7XHJcbiAgICAgICAgICAgICNlbmRpZlxyXG4gICAgICAgICAgICB2ZWMzIHRyYW5zZm9ybWVkID0gdmVjMyhzcGxhdENlbnRlci54eXopO1xyXG4gICAgICAgICAgICAjaWZkZWYgVVNFX1NLSU5OSU5HXHJcbiAgICAgICAgICAgICAgICAvLyB2ZWM0IHNraW5WZXJ0ZXggPSBiaW5kTWF0cml4ICogdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCBza2luVmVydGV4ID0gdmVjNCggdHJhbnNmb3JtZWQsIDEuMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzQgc2tpbm5lZCA9IHZlYzQoIDAuMCApO1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgYW4gb2Zmc2V0IGJldHdlZW4gdGhlIEdhdXNzaWFuIHBvaW50IGFuZCB0aGUgbWVzaCB2ZXJ0ZXgsXHJcbiAgICAgICAgICAgICAgICAvLyB3aGljaCB3aWxsIGNhdXNlIGRlZmVjdHMgaW4gdGhlIHNrZWxldGFsIGFuaW1hdGlvbiBkcml2aW5nIHRoZSBHYXVzc2lhbiBwb2ludC4gXHJcbiAgICAgICAgICAgICAgICAvL0luIG9yZGVyIHRvIGNpcmN1bXZlbnQgdGhpcyBwcm9ibGVtLCBvbmx5IHRoZSBoZWFkIGJvbmUoaW5kZXggaXMgMTEwIGN1cnJlbnRseSkgaXMgdXNlZCB0byBkcml2ZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoZWFkQm9uZUluZGV4ID49IDAuMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXQgPSBnZXRCb25lTWF0cml4MCggaGVhZEJvbmVJbmRleCApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWQgKz0gYm9uZU1hdCAqIHNraW5WZXJ0ZXggKiAxLjA7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lng7XHJcbiAgICAgICAgICAgICAgICAvLyBza2lubmVkICs9IGJvbmVNYXRZICogc2tpblZlcnRleCAqIHNraW5XZWlnaHQueTtcclxuICAgICAgICAgICAgICAgIC8vIHNraW5uZWQgKz0gYm9uZU1hdFogKiBza2luVmVydGV4ICogc2tpbldlaWdodC56O1xyXG4gICAgICAgICAgICAgICAgLy8gc2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBza2luV2VpZ2h0Lnc7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtZWQgPSAoIGJpbmRNYXRyaXhJbnZlcnNlICogc2tpbm5lZCApLnh5ejtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gc2tpbm5lZC54eXo7XHJcblxyXG4gICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSB0cmFuc2Zvcm1lZC54eXo7XHJcblxyXG4gICAgICAgICAgICAjaWZkZWYgVVNFX0ZMQU1FXHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRYID0gZ2V0Qm9uZU1hdHJpeCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRZID0gZ2V0Qm9uZU1hdHJpeCggMS4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRaID0gZ2V0Qm9uZU1hdHJpeCggMi4wICk7XHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXRXID0gZ2V0Qm9uZU1hdHJpeCggMy4wICk7ICAgXHJcbiAgICAgICAgICAgICAgICBtYXQ0IGJvbmVNYXQwID0gZ2V0Qm9uZU1hdHJpeCggNC4wICk7ICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZlYzIgYm9uZVdlaWdodFVWMCA9IGdldEJvbmVXZWlnaHRVVigyLCAwLCBib25lV2VpZ2h0VGV4dHVyZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBib25lV2VpZ2h0VVYxID0gZ2V0Qm9uZVdlaWdodFVWKDIsIDEsIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZEJvbmVNYXRyaXhWYWx1ZSA9IHRleHR1cmUoYm9uZVdlaWdodFRleHR1cmUsIGJvbmVXZWlnaHRVVjApO1xyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZEJvbmVNYXRyaXhWYWx1ZTAgPSB0ZXh0dXJlKGJvbmVXZWlnaHRUZXh0dXJlLCBib25lV2VpZ2h0VVYxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWM0IGJvbmVNYXRyaXhWYWx1ZSA9IHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQm9uZU1hdHJpeFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHZlYzQgYm9uZU1hdHJpeFZhbHVlMCA9IHVpbnRCaXRzVG9GbG9hdChzYW1wbGVkQm9uZU1hdHJpeFZhbHVlMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCBza2luVmVydGV4ID0gdmVjNCggc3BsYXRDZW50ZXIsIDEuMCApO1xyXG4gICAgICAgICAgICAgICAgdmVjNCBza2lubmVkID0gdmVjNCggMC4wICk7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBtaW5XZWlnaHQgPSBtaW4oYm9uZU1hdHJpeFZhbHVlLngsbWluKGJvbmVNYXRyaXhWYWx1ZS55LCBtaW4oYm9uZU1hdHJpeFZhbHVlLnosIG1pbihib25lTWF0cml4VmFsdWUudywgYm9uZU1hdHJpeFZhbHVlMC54KSkpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnggPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnggPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WCAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUueDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnkgPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnkgPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WSAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUueTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLnogPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLnogPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0WiAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUuejtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlLncgPiAwLjAgJiYgYm9uZU1hdHJpeFZhbHVlLncgPiBtaW5XZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZCArPSBib25lTWF0VyAqIHNraW5WZXJ0ZXggKiBib25lTWF0cml4VmFsdWUudztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoYm9uZU1hdHJpeFZhbHVlMC54ID4gMC4wICYmIGJvbmVNYXRyaXhWYWx1ZTAueCA+IG1pbldlaWdodClcclxuICAgICAgICAgICAgICAgICAgICBza2lubmVkICs9IGJvbmVNYXQwICogc2tpblZlcnRleCAqIGJvbmVNYXRyaXhWYWx1ZTAueDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc3BsYXRDZW50ZXIgPSBza2lubmVkLnh5ejtcclxuICAgICAgICAgICAgI2VuZGlmXHJcblxyXG4gICAgICAgICAgICB1aW50IHNjZW5lSW5kZXggPSB1aW50KDApO1xyXG4gICAgICAgICAgICBpZiAoc2NlbmVDb3VudCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHNjZW5lSW5kZXggPSB0ZXh0dXJlKHNjZW5lSW5kZXhlc1RleHR1cmUsIGdldERhdGFVVigxLCAwLCBzY2VuZUluZGV4ZXNUZXh0dXJlU2l6ZSkpLnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgc3BsYXRPcGFjaXR5RnJvbVNjZW5lID0gc2NlbmVPcGFjaXR5W3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgaW50IHNjZW5lVmlzaWJsZSA9IHNjZW5lVmlzaWJpbGl0eVtzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgICAgIGlmIChzcGxhdE9wYWNpdHlGcm9tU2NlbmUgPD0gMC4wMSB8fCBzY2VuZVZpc2libGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMi4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkeW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgbWF0NCB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgbWF0NCB0cmFuc2Zvcm1Nb2RlbFZpZXdNYXRyaXggPSB2aWV3TWF0cml4ICogdHJhbnNmb3JtO1xyXG4gICAgICAgICAgICAgICAgI2lmZGVmIFVTRV9TS0lOTklOR1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCA9IHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCAqIHNraW5NYXRyaXg7XHJcbiAgICAgICAgICAgICAgICAjZW5kaWZcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYG1hdDQgdHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4ID0gbW9kZWxWaWV3TWF0cml4O2A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICBmbG9hdCBzaDhCaXRDb21wcmVzc2lvblJhbmdlTWluRm9yU2NlbmUgPSBzcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZU1pbltzY2VuZUluZGV4XTtcclxuICAgICAgICAgICAgZmxvYXQgc2g4Qml0Q29tcHJlc3Npb25SYW5nZU1heEZvclNjZW5lID0gc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhbc2NlbmVJbmRleF07XHJcbiAgICAgICAgICAgIGZsb2F0IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSA9IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VNYXhGb3JTY2VuZSAtIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VNaW5Gb3JTY2VuZTtcclxuICAgICAgICAgICAgZmxvYXQgc2g4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2VGb3JTY2VuZSA9IHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSAvIDIuMDtcclxuICAgICAgICAgICAgdmVjMyB2ZWM4Qml0U0hTaGlmdCA9IHZlYzMoc2g4Qml0Q29tcHJlc3Npb25SYW5nZU1pbkZvclNjZW5lKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzQgdmlld0NlbnRlciA9IHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCAqIHZlYzQoc3BsYXRDZW50ZXIsIDEuMCk7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IGNsaXBDZW50ZXIgPSBwcm9qZWN0aW9uTWF0cml4ICogdmlld0NlbnRlcjtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0IGNsaXAgPSAxLjIgKiBjbGlwQ2VudGVyLnc7XHJcbiAgICAgICAgICAgIGlmIChjbGlwQ2VudGVyLnogPCAtY2xpcCB8fCBjbGlwQ2VudGVyLnggPCAtY2xpcCB8fCBjbGlwQ2VudGVyLnggPiBjbGlwIHx8IGNsaXBDZW50ZXIueSA8IC1jbGlwIHx8IGNsaXBDZW50ZXIueSA+IGNsaXApIHtcclxuICAgICAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMi4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2ZWMzIG5kY0NlbnRlciA9IGNsaXBDZW50ZXIueHl6IC8gY2xpcENlbnRlci53O1xyXG5cclxuICAgICAgICAgICAgdlBvc2l0aW9uID0gcG9zaXRpb24ueHk7XHJcbiAgICAgICAgICAgIHZTcGxhdEluZGV4ID0gdmVjMihzcGxhdEluZGV4LCBzcGxhdEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHZDb2xvciA9IHVpbnRUb1JHQkFWZWMoc2FtcGxlZENlbnRlckNvbG9yLnIpO1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIFByb2NlZWQgdG8gc2FtcGxpbmcgYW5kIHJlbmRlcmluZyAxc3QgZGVncmVlIHNwaGVyaWNhbCBoYXJtb25pY3NcclxuICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgICAgXHJcbiAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzMgd29ybGRWaWV3RGlyID0gbm9ybWFsaXplKHNwbGF0Q2VudGVyIC0gdmVjMyhpbnZlcnNlKHRyYW5zZm9ybSkgKiB2ZWM0KGNhbWVyYVBvc2l0aW9uLCAxLjApKSk7XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICB2ZWMzIHdvcmxkVmlld0RpciA9IG5vcm1hbGl6ZShzcGxhdENlbnRlciAtIGNhbWVyYVBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICB2ZWMzIHNoMTtcclxuICAgICAgICAgICAgICAgIHZlYzMgc2gyO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBzaDM7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDY7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjMyBzaDg7XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmluZyBob3cgdG8gc2FtcGxlIHNwaGVyaWNhbCBoYXJtb25pY3MgdGV4dHVyZXMgdG8gZ2V0IHRoZSBjb2VmZmljaWVudHMgZm9yIGNhbGN1bGF0aW9ucyBmb3IgYSBnaXZlbiBkZWdyZWVcclxuICAgICAgICAgICAgLy8gZGVwZW5kcyBvbiBob3cgbWFueSB0b3RhbCBkZWdyZWVzIChtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIGFyZSBwcmVzZW50IGluIHRoZSB0ZXh0dXJlcy4gVGhpcyBpcyBiZWNhdXNlIHRoYXRcclxuICAgICAgICAgICAgLy8gbnVtYmVyIGFmZmVjdHMgaG93IHRoZXkgYXJlIHBhY2tlZCBpbiB0aGUgdGV4dHVyZXMsIGFuZCB0aGVyZWZvcmUgdGhlIG9mZnNldCAmIHN0cmlkZSByZXF1aXJlZCB0byBhY2Nlc3MgdGhlbS5cclxuXHJcbiAgICAgICAgICAgIC8vIFNhbXBsZSBzcGhlcmljYWwgaGFybW9uaWNzIHRleHR1cmVzIHdpdGggMSBkZWdyZWUgd29ydGggb2YgZGF0YSBmb3IgMXN0IGRlZ3JlZSBjYWxjdWxhdGlvbnMsIGFuZCBzdG9yZSBpbiBzaDEsIHNoMiwgYW5kIHNoM1xyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NNdWx0aVRleHR1cmVNb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzaFVWID0gZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAyLjUsIGRvdWJsZU9kZE9mZnNldCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDAxMjMgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIHNoVVYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaFVWID0gZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAyLjUsIGRvdWJsZU9kZE9mZnNldCArIHVpbnQoMSksIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0g0NTY3ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBzaFVWKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hVViA9IGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMi41LCBkb3VibGVPZGRPZmZzZXQgKyB1aW50KDIpLCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIODkxMDExID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBzaFVWKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMTIzLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgKyB2ZWMzKHNhbXBsZWRTSDAxMjMuYmEsIHNhbXBsZWRTSDQ1NjcucikgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDIgPSB2ZWMzKHNhbXBsZWRTSDAxMjMuYSwgc2FtcGxlZFNINDU2Ny5yZykgKiAoMS4wIC0gZk9kZE9mZnNldCkgKyB2ZWMzKHNhbXBsZWRTSDQ1NjcuZ2JhKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHZlYzMoc2FtcGxlZFNINDU2Ny5iYSwgc2FtcGxlZFNIODkxMDExLnIpICogKDEuMCAtIGZPZGRPZmZzZXQpICsgdmVjMyhzYW1wbGVkU0g4OTEwMTEucmdiKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMVIgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMUcgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gwMUIgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVjMiBzYW1wbGVkU0gyM0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKS5yZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMVIucmcsIHNhbXBsZWRTSDIzUi5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gyID0gdmVjMyhzYW1wbGVkU0gwMUcucmcsIHNhbXBsZWRTSDIzRy5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gzID0gdmVjMyhzYW1wbGVkU0gwMUIucmcsIHNhbXBsZWRTSDIzQi5yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAvLyBTYW1wbGUgc3BoZXJpY2FsIGhhcm1vbmljcyB0ZXh0dXJlcyB3aXRoIDIgZGVncmVlcyB3b3J0aCBvZiBkYXRhIGZvciAxc3QgZGVncmVlIGNhbGN1bGF0aW9ucywgYW5kIHN0b3JlIGluIHNoMSwgc2gyLCBhbmQgc2gzXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMDEyMztcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDQ1Njc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0g4OTEwMTE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMDEyM1I7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0gwMTIzRztcclxuICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDAxMjNCO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZWRTSDAxMjMgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIGdldERhdGFVVig2LCAwLCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVkU0g0NTY3ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIODkxMDExID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMiwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gc2FtcGxlZFNIMDEyMy5yZ2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMiA9IHZlYzMoc2FtcGxlZFNIMDEyMy5hLCBzYW1wbGVkU0g0NTY3LnJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gzID0gdmVjMyhzYW1wbGVkU0g0NTY3LmJhLCBzYW1wbGVkU0g4OTEwMTEucik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlZFNIMDEyM0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMCwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gxID0gdmVjMyhzYW1wbGVkU0gwMTIzUi5yZ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDIgPSB2ZWMzKHNhbXBsZWRTSDAxMjNHLnJnYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHZlYzMoc2FtcGxlZFNIMDEyM0IucmdiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQZXJmb3JtIDFzdCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljcyBjYWxjdWxhdGlvbnNcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaDEgPSBzaDEgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2gyID0gc2gyICogc2g4Qml0Q29tcHJlc3Npb25SYW5nZUZvclNjZW5lICsgdmVjOEJpdFNIU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoMyA9IHNoMyAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmbG9hdCB4ID0gd29ybGRWaWV3RGlyLng7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgeSA9IHdvcmxkVmlld0Rpci55O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb2F0IHogPSB3b3JsZFZpZXdEaXIuejtcclxuICAgICAgICAgICAgICAgICAgICB2Q29sb3IucmdiICs9IFNIX0MxICogKC1zaDEgKiB5ICsgc2gyICogeiAtIHNoMyAqIHgpO1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJvY2VlZCB0byBzYW1wbGluZyBhbmQgcmVuZGVyaW5nIDJuZCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljc1xyXG4gICAgICAgICAgICBpZiAobWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eCA9IHggKiB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB5eSA9IHkgKiB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB6eiA9IHogKiB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eSA9IHggKiB5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB5eiA9IHkgKiB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbG9hdCB4eiA9IHggKiB6O1xyXG4gICAgICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTYW1wbGUgc3BoZXJpY2FsIGhhcm1vbmljcyB0ZXh0dXJlcyB3aXRoIDIgZGVncmVlcyB3b3J0aCBvZiBkYXRhIGZvciAybmQgZGVncmVlIGNhbGN1bGF0aW9ucyxcclxuICAgICAgICAgICAgICAgIC8vIGFuZCBzdG9yZSBpbiBzaDQsIHNoNSwgc2g2LCBzaDcsIGFuZCBzaDhcclxuICAgICAgICAgICAgICAgIGlmIChtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0IHNhbXBsZWRTSDEyMTMxNDE1ID0gdGV4dHVyZShzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlLCBnZXREYXRhVVYoNiwgMywgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNIMTYxNzE4MTkgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUsIGdldERhdGFVVig2LCA0LCBzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGVkU0gyMDIxMjIyMyA9IHRleHR1cmUoc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZSwgZ2V0RGF0YVVWKDYsIDUsIHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDQgPSBzYW1wbGVkU0g4OTEwMTEuZ2JhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g1ID0gc2FtcGxlZFNIMTIxMzE0MTUucmdiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2ID0gdmVjMyhzYW1wbGVkU0gxMjEzMTQxNS5hLCBzYW1wbGVkU0gxNjE3MTgxOS5yZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSB2ZWMzKHNhbXBsZWRTSDE2MTcxODE5LmJhLCBzYW1wbGVkU0gyMDIxMjIyMy5yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoOCA9IHNhbXBsZWRTSDIwMjEyMjIzLmdiYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N1IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N0cgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVHLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgc2FtcGxlZFNINDU2N0IgPSB0ZXh0dXJlKHNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCLCBnZXREYXRhVVYoMiwgMSwgc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNCA9IHZlYzMoc2FtcGxlZFNIMDEyM1IuYSwgc2FtcGxlZFNINDU2N1IucmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g1ID0gdmVjMyhzYW1wbGVkU0g0NTY3Ui5iYSwgc2FtcGxlZFNIMDEyM0cuYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDYgPSB2ZWMzKHNhbXBsZWRTSDQ1NjdHLnJnYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSB2ZWMzKHNhbXBsZWRTSDQ1NjdHLmEsIHNhbXBsZWRTSDAxMjNCLmEsIHNhbXBsZWRTSDQ1NjdCLnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g4ID0gdmVjMyhzYW1wbGVkU0g0NTY3Qi5nYmEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIDJuZCBkZWdyZWUgc3BoZXJpY2FsIGhhcm1vbmljcyBjYWxjdWxhdGlvbnNcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDQgPSBzaDQgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoNSA9IHNoNSAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2g2ID0gc2g2ICogc2g4Qml0Q29tcHJlc3Npb25SYW5nZUZvclNjZW5lICsgdmVjOEJpdFNIU2hpZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaDcgPSBzaDcgKiBzaDhCaXRDb21wcmVzc2lvblJhbmdlRm9yU2NlbmUgKyB2ZWM4Qml0U0hTaGlmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoOCA9IHNoOCAqIHNoOEJpdENvbXByZXNzaW9uUmFuZ2VGb3JTY2VuZSArIHZlYzhCaXRTSFNoaWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2Q29sb3IucmdiICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU0hfQzJbMF0gKiB4eSkgKiBzaDQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNIX0MyWzFdICogeXopICogc2g1ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTSF9DMlsyXSAqICgyLjAgKiB6eiAtIHh4IC0geXkpKSAqIHNoNiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoU0hfQzJbM10gKiB4eikgKiBzaDcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFNIX0MyWzRdICogKHh4IC0geXkpKSAqIHNoODtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG5cclxuICAgICAgICAgICAgICAgIHZDb2xvci5yZ2IgPSBjbGFtcCh2Q29sb3IucmdiLCB2ZWMzKDAuKSwgdmVjMygxLikpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFZlcnRleFNoYWRlckZhZGVJbigpIHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICBpZiAoZmFkZUluQ29tcGxldGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgb3BhY2l0eUFkanVzdCA9IDEuMDtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGNlbnRlckRpc3QgPSBsZW5ndGgoc3BsYXRDZW50ZXIgLSBzY2VuZUNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByZW5kZXJUaW1lID0gbWF4KGN1cnJlbnRUaW1lIC0gZmlyc3RSZW5kZXJUaW1lLCAwLjApO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IGZhZGVEaXN0YW5jZSA9IDAuNzU7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBkaXN0YW5jZUxvYWRGYWRlSW5GYWN0b3IgPSBzdGVwKHZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMsIGNlbnRlckRpc3QpO1xyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VMb2FkRmFkZUluRmFjdG9yID0gKDEuMCAtIGRpc3RhbmNlTG9hZEZhZGVJbkZhY3RvcikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDEuMCAtIGNsYW1wKChjZW50ZXJEaXN0IC0gdmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cykgLyBmYWRlRGlzdGFuY2UsIDAuMCwgMS4wKSkgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2VMb2FkRmFkZUluRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eUFkanVzdCAqPSBkaXN0YW5jZUxvYWRGYWRlSW5GYWN0b3I7XHJcbiAgICAgICAgICAgICAgICB2Q29sb3IuYSAqPSBvcGFjaXR5QWRqdXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUgPSBmYWxzZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRTY2FsZSA9IDEuMCwgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdW5pZm9ybXMgPSB7XHJcbiAgICAgICAgICAgICdzY2VuZUNlbnRlcic6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YzJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IzKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhZGVJbkNvbXBsZXRlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdvcnRob2dyYXBoaWNNb2RlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICd2aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3Zpc2libGVSZWdpb25SYWRpdXMnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYmluZE1hdHJpeCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ200JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBNYXRyaXg0KClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JpbmRNYXRyaXhJbnZlcnNlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnbTQnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IE1hdHJpeDQoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY3VycmVudFRpbWUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmlyc3RSZW5kZXJUaW1lJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAwLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2NlbnRlcnNDb2xvcnNUZXh0dXJlJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmbGFtZU1vZGVsVGV4dHVyZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYm9uZVRleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JvbmVUZXh0dXJlMCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYm9uZVdlaWdodFRleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVSJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlRyc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZUInOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBbXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNYXgnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IFtdXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmb2NhbCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ29ydGhvWm9vbSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMS4wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdpbnZlcnNlRm9jYWxBZGp1c3RtZW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxLjBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3ZpZXdwb3J0Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndjInLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnYmFzaXNWaWV3cG9ydCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2RlYnVnQ29sb3InOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MycsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgQ29sb3IoKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY2VudGVyc0NvbG9yc1RleHR1cmVTaXplJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAndjInLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZsYW1lTW9kZWxUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDQwOTYsIDIwNDgpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdib25lVGV4dHVyZVNpemUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgVmVjdG9yMig0LCAzMilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2JvbmVXZWlnaHRUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDUxMiwgNTEyKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3M4Qml0TW9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3BsYXRTY2FsZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogc3BsYXRTY2FsZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncG9pbnRDbG91ZE1vZGVFbmFibGVkJzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBwb2ludENsb3VkTW9kZUVuYWJsZWQgPyAxIDogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzVGV4dHVyZSc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogbnVsbFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzVGV4dHVyZVNpemUnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBuZXcgVmVjdG9yMigxMDI0LCAxMDI0KVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc2NlbmVDb3VudCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2knLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZ2F1c3NpYW5TcGxhdENvdW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdic0NvdW50Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdoZWFkQm9uZUluZGV4Jzoge1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiAtMS4wXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdleWVCbGlua0xlZnQnOiB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdmJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IDAuMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZXllQmxpbmtSaWdodCc6IHtcclxuICAgICAgICAgICAgICAgICd0eXBlJzogJ2YnLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogMC4wXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWluLnZhbHVlLnB1c2goLUNvbnN0YW50cy5TcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSAvIDIuMCk7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlTWF4LnZhbHVlLnB1c2goQ29uc3RhbnRzLlNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvblJhbmdlIC8gMi4wKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NlbmVPcGFjaXR5ID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBzY2VuZU9wYWNpdHkucHVzaCgxLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaWZvcm1zWydzY2VuZU9wYWNpdHknXSA9e1xyXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiAnZicsXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBzY2VuZU9wYWNpdHlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lVmlzaWJpbGl0eSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENvbnN0YW50cy5NYXhTY2VuZXM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgc2NlbmVWaXNpYmlsaXR5LnB1c2goMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdW5pZm9ybXNbJ3NjZW5lVmlzaWJpbGl0eSddID17XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdpJyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNjZW5lVmlzaWJpbGl0eVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybU1hdHJpY2VzID0gW107XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29uc3RhbnRzLk1heFNjZW5lczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1NYXRyaWNlcy5wdXNoKG5ldyBNYXRyaXg0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVuaWZvcm1zWyd0cmFuc2Zvcm1zJ10gPSB7XHJcbiAgICAgICAgICAgICAgICAndHlwZSc6ICdtYXQ0JyxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHRyYW5zZm9ybU1hdHJpY2VzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5pZm9ybXM7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBTcGxhdE1hdGVyaWFsM0Qge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgdGhlIFRocmVlLmpzIG1hdGVyaWFsIHRoYXQgaXMgdXNlZCB0byByZW5kZXIgdGhlIHNwbGF0cy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkeW5hbWljTW9kZSBJZiB0cnVlLCBpdCBtZWFucyB0aGUgc2NlbmUgZ2VvbWV0cnkgcmVwcmVzZW50ZWQgYnkgdGhpcyBzcGxhdCBtZXNoIGlzIG5vdCBzdGF0aW9uYXJ5IG9yXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCB0aGUgc3BsYXQgY291bnQgbWlnaHQgY2hhbmdlXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZU9wdGlvbmFsRWZmZWN0cyBXaGVuIHRydWUsIGFsbG93cyBmb3IgdXNhZ2Ugb2YgZXh0cmEgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcyBpbiB0aGUgc2hhZGVyIGZvciBlZmZlY3RzXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNoIGFzIG9wYWNpdHkgYWRqdXN0bWVudC4gRGVmYXVsdCBpcyBmYWxzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYW50aWFsaWFzZWQgSWYgdHJ1ZSwgY2FsY3VsYXRlIGNvbXBlbnNhdGlvbiBmYWN0b3IgdG8gZGVhbCB3aXRoIGdhdXNzaWFucyBiZWluZyByZW5kZXJlZCBhdCBhIHNpZ25pZmljYW50bHlcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZmVyZW50IHJlc29sdXRpb24gdGhhbiB0aGF0IG9mIHRoZWlyIHRyYWluaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgVGhlIG1heGltdW0gY2xpcCBzcGFjZSBzcGxhdCBzaXplXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3BsYXRTY2FsZSBWYWx1ZSBieSB3aGljaCBhbGwgc3BsYXRzIGFyZSBzY2FsZWQgaW4gc2NyZWVuLXNwYWNlIChkZWZhdWx0IGlzIDEuMClcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb2ludENsb3VkTW9kZUVuYWJsZWQgUmVuZGVyIGFsbCBzcGxhdHMgYXMgc2NyZWVuLXNwYWNlIGNpcmNsZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgRGVncmVlIG9mIHNwaGVyaWNhbCBoYXJtb25pY3MgdG8gdXRpbGl6ZSBpbiByZW5kZXJpbmcgc3BsYXRzXHJcbiAgICAgKiBAcmV0dXJuIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ1aWxkKGR5bmFtaWNNb2RlID0gZmFsc2UsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyA9IGZhbHNlLCBhbnRpYWxpYXNlZCA9IGZhbHNlLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSA9IDIwNDgsXHJcbiAgICAgICAgICAgICAgICAgc3BsYXRTY2FsZSA9IDEuMCwgcG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2UsIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsIGtlcm5lbDJEU2l6ZSA9IDAuMykge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21WZXJ0ZXhWYXJzID0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzIgY292YXJpYW5jZXNUZXh0dXJlU2l6ZTtcclxuICAgICAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgY292YXJpYW5jZXNUZXh0dXJlO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIHVzYW1wbGVyMkQgY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICB1bmlmb3JtIGludCBjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdDtcclxuXHJcbiAgICAgICAgICAgIHZvaWQgZnJvbUNvdmFyaWFuY2VIYWxmRmxvYXRWNCh1dmVjNCB2YWwsIG91dCB2ZWM0IGZpcnN0LCBvdXQgdmVjNCBzZWNvbmQpIHtcclxuICAgICAgICAgICAgICAgIHZlYzIgciA9IHVucGFja0hhbGYyeDE2KHZhbC5yKTtcclxuICAgICAgICAgICAgICAgIHZlYzIgZyA9IHVucGFja0hhbGYyeDE2KHZhbC5nKTtcclxuICAgICAgICAgICAgICAgIHZlYzIgYiA9IHVucGFja0hhbGYyeDE2KHZhbC5iKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaXJzdCA9IHZlYzQoci54LCByLnksIGcueCwgZy55KTtcclxuICAgICAgICAgICAgICAgIHNlY29uZCA9IHZlYzQoYi54LCBiLnksIDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsLmJ1aWxkVmVydGV4U2hhZGVyQmFzZShkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKGFudGlhbGlhc2VkLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIGtlcm5lbDJEU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRGcmFnbWVudFNoYWRlcigpO1xyXG5cclxuICAgICAgICBjb25zdCB1bmlmb3JtcyA9IFNwbGF0TWF0ZXJpYWwuZ2V0VW5pZm9ybXMoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzcGxhdFNjYWxlLCBwb2ludENsb3VkTW9kZUVuYWJsZWQpO1xyXG5cclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlU2l6ZSddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICd2MicsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG5ldyBWZWN0b3IyKDEwMjQsIDEwMjQpXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNUZXh0dXJlSGFsZkZsb2F0J10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3QnLFxyXG4gICAgICAgICAgICAndmFsdWUnOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB1bmlmb3Jtc1snY292YXJpYW5jZXNBcmVIYWxmRmxvYXQnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAnaScsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB1bmlmb3JtcyxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJTb3VyY2UsXHJcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFscGhhVGVzdDogMS4wLFxyXG4gICAgICAgICAgICBibGVuZGluZzogTm9ybWFsQmxlbmRpbmcsXHJcbiAgICAgICAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oYW50aWFsaWFzZWQsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cywgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUsIGtlcm5lbDJEU2l6ZSkge1xyXG4gICAgICAgIGxldCB2ZXJ0ZXhTaGFkZXJTb3VyY2UgPSBgXHJcblxyXG4gICAgICAgICAgICB2ZWM0IHNhbXBsZWRDb3ZhcmlhbmNlQTtcclxuICAgICAgICAgICAgdmVjNCBzYW1wbGVkQ292YXJpYW5jZUI7XHJcbiAgICAgICAgICAgIHZlYzMgY292M0RfTTExX00xMl9NMTM7XHJcbiAgICAgICAgICAgIHZlYzMgY292M0RfTTIyX00yM19NMzM7XHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVkQ292YXJpYW5jZUEgPSB0ZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZSwgZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAxLjUsIG9kZE9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgIHNhbXBsZWRDb3ZhcmlhbmNlQiA9IHRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSwgb2RkT2Zmc2V0ICsgdWludCgxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMyA9IHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLnJnYikgKiAoMS4wIC0gZk9kZE9mZnNldCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5iYSwgc2FtcGxlZENvdmFyaWFuY2VCLnIpICogZk9kZE9mZnNldDtcclxuICAgICAgICAgICAgICAgIGNvdjNEX00yMl9NMjNfTTMzID0gdmVjMyhzYW1wbGVkQ292YXJpYW5jZUEuYSwgc2FtcGxlZENvdmFyaWFuY2VCLnJnKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2FtcGxlZENvdmFyaWFuY2VCLmdiYSkgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdXZlYzQgc2FtcGxlZENvdmFyaWFuY2VVID0gdGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQsIGdldERhdGFVVigxLCAwLCBjb3ZhcmlhbmNlc1RleHR1cmVTaXplKSk7XHJcbiAgICAgICAgICAgICAgICBmcm9tQ292YXJpYW5jZUhhbGZGbG9hdFY0KHNhbXBsZWRDb3ZhcmlhbmNlVSwgc2FtcGxlZENvdmFyaWFuY2VBLCBzYW1wbGVkQ292YXJpYW5jZUIpO1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMgPSBzYW1wbGVkQ292YXJpYW5jZUEucmdiO1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTIyX00yM19NMzMgPSB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5hLCBzYW1wbGVkQ292YXJpYW5jZUIucmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgM0QgY292YXJpYW5jZSBtYXRyaXhcclxuICAgICAgICAgICAgbWF0MyBWcmsgPSBtYXQzKFxyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMueCwgY292M0RfTTExX00xMl9NMTMueSwgY292M0RfTTExX00xMl9NMTMueixcclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzLnksIGNvdjNEX00yMl9NMjNfTTMzLngsIGNvdjNEX00yMl9NMjNfTTMzLnksXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMy56LCBjb3YzRF9NMjJfTTIzX00zMy55LCBjb3YzRF9NMjJfTTIzX00zMy56XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBtYXQzIEo7XHJcbiAgICAgICAgICAgIGlmIChvcnRob2dyYXBoaWNNb2RlID09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBwcm9qZWN0aW9uIGlzIGxpbmVhciwgd2UgZG9uJ3QgbmVlZCBhbiBhcHByb3hpbWF0aW9uXHJcbiAgICAgICAgICAgICAgICBKID0gdHJhbnNwb3NlKG1hdDMob3J0aG9ab29tLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLjAsIG9ydGhvWm9vbSwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgMC4wLCAwLjApKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgSmFjb2JpYW4gb2YgdGhlIGFmZmluZSBhcHByb3hpbWF0aW9uIG9mIHRoZSBwcm9qZWN0aW9uIG1hdHJpeC4gSXQgd2lsbCBiZSB1c2VkIHRvIHRyYW5zZm9ybSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIDNEIGNvdmFyaWFuY2UgbWF0cml4IGluc3RlYWQgb2YgdXNpbmcgdGhlIGFjdHVhbCBwcm9qZWN0aW9uIG1hdHJpeCBiZWNhdXNlIHRoYXQgdHJhbnNmb3JtYXRpb24gd291bGRcclxuICAgICAgICAgICAgICAgIC8vIHJlcXVpcmUgYSBub24tbGluZWFyIGNvbXBvbmVudCAocGVyc3BlY3RpdmUgZGl2aXNpb24pIHdoaWNoIHdvdWxkIHlpZWxkIGEgbm9uLWdhdXNzaWFuIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHMgPSAxLjAgLyAodmlld0NlbnRlci56ICogdmlld0NlbnRlci56KTtcclxuICAgICAgICAgICAgICAgIEogPSBtYXQzKFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY2FsLnggLyB2aWV3Q2VudGVyLnosIDAuLCAtKGZvY2FsLnggKiB2aWV3Q2VudGVyLngpICogcyxcclxuICAgICAgICAgICAgICAgICAgICAwLiwgZm9jYWwueSAvIHZpZXdDZW50ZXIueiwgLShmb2NhbC55ICogdmlld0NlbnRlci55KSAqIHMsXHJcbiAgICAgICAgICAgICAgICAgICAgMC4sIDAuLCAwLlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ29uY2F0ZW5hdGUgdGhlIHByb2plY3Rpb24gYXBwcm94aW1hdGlvbiB3aXRoIHRoZSBtb2RlbC12aWV3IHRyYW5zZm9ybWF0aW9uXHJcbiAgICAgICAgICAgIG1hdDMgVyA9IHRyYW5zcG9zZShtYXQzKHRyYW5zZm9ybU1vZGVsVmlld01hdHJpeCkpO1xyXG4gICAgICAgICAgICBtYXQzIFQgPSBXICogSjtcclxuXHJcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgM0QgY292YXJpYW5jZSBtYXRyaXggKFZyaykgdG8gY29tcHV0ZSB0aGUgMkQgY292YXJpYW5jZSBtYXRyaXhcclxuICAgICAgICAgICAgbWF0MyBjb3YyRG0gPSB0cmFuc3Bvc2UoVCkgKiBWcmsgKiBUO1xyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICBpZiAoYW50aWFsaWFzZWQpIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRldE9yaWcgPSBjb3YyRG1bMF1bMF0gKiBjb3YyRG1bMV1bMV0gLSBjb3YyRG1bMF1bMV0gKiBjb3YyRG1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMF1bMF0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgY292MkRtWzFdWzFdICs9ICR7a2VybmVsMkRTaXplfTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IGRldEJsdXIgPSBjb3YyRG1bMF1bMF0gKiBjb3YyRG1bMV1bMV0gLSBjb3YyRG1bMF1bMV0gKiBjb3YyRG1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICB2Q29sb3IuYSAqPSBzcXJ0KG1heChkZXRPcmlnIC8gZGV0Qmx1ciwgMC4wKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodkNvbG9yLmEgPCBtaW5BbHBoYSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMF1bMF0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgY292MkRtWzFdWzFdICs9ICR7a2VybmVsMkRTaXplfTtcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcblxyXG4gICAgICAgICAgICAvLyBXZSBhcmUgaW50ZXJlc3RlZCBpbiB0aGUgdXBwZXItbGVmdCAyeDIgcG9ydGlvbiBvZiB0aGUgcHJvamVjdGVkIDNEIGNvdmFyaWFuY2UgbWF0cml4IGJlY2F1c2VcclxuICAgICAgICAgICAgLy8gd2Ugb25seSBjYXJlIGFib3V0IHRoZSBYIGFuZCBZIHZhbHVlcy4gV2Ugd2FudCB0aGUgWC1kaWFnb25hbCwgY292MkRtWzBdWzBdLFxyXG4gICAgICAgICAgICAvLyB0aGUgWS1kaWFnb25hbCwgY292MkRtWzFdWzFdLCBhbmQgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHR3byBjb3YyRG1bMF1bMV0uIFdlIGRvbid0XHJcbiAgICAgICAgICAgIC8vIG5lZWQgY292MkRtWzFdWzBdIGJlY2F1c2UgaXQgaXMgYSBzeW1ldHJpYyBtYXRyaXguXHJcbiAgICAgICAgICAgIHZlYzMgY292MkR2ID0gdmVjMyhjb3YyRG1bMF1bMF0sIGNvdjJEbVswXVsxXSwgY292MkRtWzFdWzFdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIG5vdyBuZWVkIHRvIHNvbHZlIGZvciB0aGUgZWlnZW4tdmFsdWVzIGFuZCBlaWdlbiB2ZWN0b3JzIG9mIHRoZSAyRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICAvLyBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgdGhlIDJEIGJhc2lzIGZvciB0aGUgc3BsYXQuIFRoaXMgaXMgZG9uZSB1c2luZyB0aGUgbWV0aG9kIGRlc2NyaWJlZFxyXG4gICAgICAgICAgICAvLyBoZXJlOiBodHRwczovL3Blb3BsZS5tYXRoLmhhcnZhcmQuZWR1L35rbmlsbC90ZWFjaGluZy9tYXRoMjFiMjAwNC9leGhpYml0cy8yZG1hdHJpY2VzL2luZGV4Lmh0bWxcclxuICAgICAgICAgICAgLy8gQWZ0ZXIgY2FsY3VsYXRpbmcgdGhlIGVpZ2VuLXZhbHVlcyBhbmQgZWlnZW4tdmVjdG9ycywgd2UgY2FsY3VsYXRlIHRoZSBiYXNpcyBmb3IgcmVuZGVyaW5nIHRoZSBzcGxhdFxyXG4gICAgICAgICAgICAvLyBieSBub3JtYWxpemluZyB0aGUgZWlnZW4tdmVjdG9ycyBhbmQgdGhlbiBtdWx0aXBseWluZyB0aGVtIGJ5IChzcXJ0KDgpICogc3FydChlaWdlbi12YWx1ZSkpLCB3aGljaCBpc1xyXG4gICAgICAgICAgICAvLyBlcXVhbCB0byBzY2FsaW5nIHRoZW0gYnkgc3FydCg4KSBzdGFuZGFyZCBkZXZpYXRpb25zLlxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGlmZmVyZW50IGFwcHJvYWNoIHRoYW4gaW4gdGhlIG9yaWdpbmFsIHdvcmsgYXQgSU5SSUEuIEluIHRoYXQgd29yayB0aGV5IGNvbXB1dGUgdGhlXHJcbiAgICAgICAgICAgIC8vIG1heCBleHRlbnRzIG9mIHRoZSBwcm9qZWN0ZWQgc3BsYXQgaW4gc2NyZWVuIHNwYWNlIHRvIGZvcm0gYSBzY3JlZW4tc3BhY2UgYWxpZ25lZCBib3VuZGluZyByZWN0YW5nbGVcclxuICAgICAgICAgICAgLy8gd2hpY2ggZm9ybXMgdGhlIGdlb21ldHJ5IHRoYXQgaXMgYWN0dWFsbHkgcmFzdGVyaXplZC4gVGhlIGRpbWVuc2lvbnMgb2YgdGhhdCBib3VuZGluZyBib3ggYXJlIDMuMFxyXG4gICAgICAgICAgICAvLyB0aW1lcyB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIG1heGltdW0gZWlnZW4tdmFsdWUsIG9yIDMgc3RhbmRhcmQgZGV2aWF0aW9ucy4gVGhleSB0aGVuIHVzZSB0aGUgaW52ZXJzZVxyXG4gICAgICAgICAgICAvLyAyRCBjb3ZhcmlhbmNlIG1hdHJpeCAoY2FsbGVkICdjb25pYycpIGluIHRoZSBDVURBIHJlbmRlcmluZyB0aHJlYWQgdG8gZGV0ZXJtaW5lIGZyYWdtZW50IG9wYWNpdHkgYnlcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRpbmcgdGhlIGZ1bGwgZ2F1c3NpYW46IGV4cCgtMC41ICogKFggLSBtZWFuKSAqIGNvbmljICogKFggLSBtZWFuKSkgKiBzcGxhdCBvcGFjaXR5XHJcbiAgICAgICAgICAgIGZsb2F0IGEgPSBjb3YyRHYueDtcclxuICAgICAgICAgICAgZmxvYXQgZCA9IGNvdjJEdi56O1xyXG4gICAgICAgICAgICBmbG9hdCBiID0gY292MkR2Lnk7XHJcbiAgICAgICAgICAgIGZsb2F0IEQgPSBhICogZCAtIGIgKiBiO1xyXG4gICAgICAgICAgICBmbG9hdCB0cmFjZSA9IGEgKyBkO1xyXG4gICAgICAgICAgICBmbG9hdCB0cmFjZU92ZXIyID0gMC41ICogdHJhY2U7XHJcbiAgICAgICAgICAgIGZsb2F0IHRlcm0yID0gc3FydChtYXgoMC4xZiwgdHJhY2VPdmVyMiAqIHRyYWNlT3ZlcjIgLSBEKSk7XHJcbiAgICAgICAgICAgIGZsb2F0IGVpZ2VuVmFsdWUxID0gdHJhY2VPdmVyMiArIHRlcm0yO1xyXG4gICAgICAgICAgICBmbG9hdCBlaWdlblZhbHVlMiA9IHRyYWNlT3ZlcjIgLSB0ZXJtMjtcclxuXHJcbiAgICAgICAgICAgIGlmIChwb2ludENsb3VkTW9kZUVuYWJsZWQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgZWlnZW5WYWx1ZTEgPSBlaWdlblZhbHVlMiA9IDAuMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGVpZ2VuVmFsdWUyIDw9IDAuMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmVjMiBlaWdlblZlY3RvcjEgPSBub3JtYWxpemUodmVjMihiLCBlaWdlblZhbHVlMSAtIGEpKTtcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGVpZ2VuIHZlY3RvcnMgYXJlIG9ydGhvZ29uYWwsIHdlIGRlcml2ZSB0aGUgc2Vjb25kIG9uZSBmcm9tIHRoZSBmaXJzdFxyXG4gICAgICAgICAgICB2ZWMyIGVpZ2VuVmVjdG9yMiA9IHZlYzIoZWlnZW5WZWN0b3IxLnksIC1laWdlblZlY3RvcjEueCk7XHJcblxyXG4gICAgICAgICAgICAvLyBXZSB1c2Ugc3FydCg4KSBzdGFuZGFyZCBkZXZpYXRpb25zIGluc3RlYWQgb2YgMyB0byBlbGltaW5hdGUgbW9yZSBvZiB0aGUgc3BsYXQgd2l0aCBhIHZlcnkgbG93IG9wYWNpdHkuXHJcbiAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IxID0gZWlnZW5WZWN0b3IxICogc3BsYXRTY2FsZSAqIG1pbihzcXJ0OCAqIHNxcnQoZWlnZW5WYWx1ZTEpLCAke3BhcnNlSW50KG1heFNjcmVlblNwYWNlU3BsYXRTaXplKX0uMCk7XHJcbiAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IyID0gZWlnZW5WZWN0b3IyICogc3BsYXRTY2FsZSAqIG1pbihzcXJ0OCAqIHNxcnQoZWlnZW5WYWx1ZTIpLCAke3BhcnNlSW50KG1heFNjcmVlblNwYWNlU3BsYXRTaXplKX0uMCk7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIGlmIChlbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIHZDb2xvci5hICo9IHNwbGF0T3BhY2l0eUZyb21TY2VuZTtcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBgXHJcbiAgICAgICAgICAgIHZlYzIgbmRjT2Zmc2V0ID0gdmVjMih2UG9zaXRpb24ueCAqIGJhc2lzVmVjdG9yMSArIHZQb3NpdGlvbi55ICogYmFzaXNWZWN0b3IyKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzaXNWaWV3cG9ydCAqIDIuMCAqIGludmVyc2VGb2NhbEFkanVzdG1lbnQ7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IHF1YWRQb3MgPSB2ZWM0KG5kY0NlbnRlci54eSArIG5kY09mZnNldCwgbmRjQ2VudGVyLnosIDEuMCk7XHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcXVhZFBvcztcclxuXHJcbiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSBwb3NpdGlvbiBkYXRhIHdlIHNlbmQgdG8gdGhlIGZyYWdtZW50IHNoYWRlclxyXG4gICAgICAgICAgICB2UG9zaXRpb24gKj0gc3FydDg7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IFNwbGF0TWF0ZXJpYWwuZ2V0VmVydGV4U2hhZGVyRmFkZUluKCk7XHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGB9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRleFNoYWRlclNvdXJjZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYnVpbGRGcmFnbWVudFNoYWRlcigpIHtcclxuICAgICAgICBsZXQgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBgXHJcbiAgICAgICAgICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcclxuICAgICAgICAgICAgI2luY2x1ZGUgPGNvbW1vbj5cclxuIFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzMgZGVidWdDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjNCB2Q29sb3I7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2VXY7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2U3BsYXRJbmRleDtcclxuXHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICB2b2lkIG1haW4gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb25hbCBzcXVhcmVkIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciBvZiB0aGUgc3BsYXQgdG8gdGhlIGN1cnJlbnQgZnJhZ21lbnQuXHJcbiAgICAgICAgICAgICAgICBmbG9hdCBBID0gZG90KHZQb3NpdGlvbiwgdlBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBwb3NpdGlvbmFsIGRhdGEgaW4gdlBvc2l0aW9uIGhhcyBiZWVuIHNjYWxlZCBieSBzcXJ0KDgpLCB0aGUgc3F1YXJlZCByZXN1bHQgd2lsbCBiZVxyXG4gICAgICAgICAgICAgICAgLy8gc2NhbGVkIGJ5IGEgZmFjdG9yIG9mIDguIElmIHRoZSBzcXVhcmVkIHJlc3VsdCBpcyBsYXJnZXIgdGhhbiA4LCBpdCBtZWFucyBpdCBpcyBvdXRzaWRlIHRoZSBlbGxpcHNlXHJcbiAgICAgICAgICAgICAgICAvLyBkZWZpbmVkIGJ5IHRoZSByZWN0YW5nbGUgZm9ybWVkIGJ5IHZQb3NpdGlvbi4gSXQgYWxzbyBtZWFucyBpdCdzIGZhcnRoZXJcclxuICAgICAgICAgICAgICAgIC8vIGF3YXkgdGhhbiBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVhbi5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZih2U3BsYXRJbmRleC54ID4gMjAwMDAuMCkgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIC8vIGlmIChBID4gOC4wKSBkaXNjYXJkO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBjb2xvciA9IHZDb2xvci5yZ2I7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhlIHJlbmRlcmVkIHNwbGF0IGlzIHNjYWxlZCBieSBzcXJ0KDgpLCB0aGUgaW52ZXJzZSBjb3ZhcmlhbmNlIG1hdHJpeCB0aGF0IGlzIHBhcnQgb2ZcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBnYXVzc2lhbiBmb3JtdWxhIGJlY29tZXMgdGhlIGlkZW50aXR5IG1hdHJpeC4gV2UncmUgdGhlbiBsZWZ0IHdpdGggKFggLSBtZWFuKSAqIChYIC0gbWVhbiksXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2luY2UgJ21lYW4nIGlzIHplcm8sIHdlIGhhdmUgWCAqIFgsIHdoaWNoIGlzIHRoZSBzYW1lIGFzIEE6XHJcbiAgICAgICAgICAgICAgICBmbG9hdCBvcGFjaXR5ID0gZXhwKCAtMC41KkEpICogdkNvbG9yLmE7XHJcbiAgICAgICAgICAgICAgICBpZihvcGFjaXR5IDwgMS4wIC8gMjU1LjApXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1aW50IGEgPSB1aW50KDI1NSk7XHJcbiAgICAgICAgICAgICAgICAvLyB2ZWMzIGMgPSB2ZWMzKHZTcGxhdEluZGV4LnggLyAyNTYuMCAvIDI1Ni4wLCBmbG9hdCh1aW50KHZTcGxhdEluZGV4LnggLyAyNTYuMCApJSBhKSAvIDI1Ni4wLCBmbG9hdCh1aW50KHZTcGxhdEluZGV4LngpJSBhKSAvIDI1Ni4wKTtcclxuICAgICAgICAgICAgICAgIC8vIGdsX0ZyYWdDb2xvciA9IHZlYzQoYywgMS4wKTtcclxuICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIG9wYWNpdHkpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFNwbGF0TWF0ZXJpYWwzRFxyXG4gKiBcclxuICogQmFzZWQgb24gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIE1vZGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBFeHRlbmRlZCB2ZXJ0ZXggc2hhZGVyIGZvciBGTEFNRSBpbnRlZ3JhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IERvdWJsZVNpZGUsIE5vcm1hbEJsZW5kaW5nLCBTaGFkZXJNYXRlcmlhbCwgVmVjdG9yMiB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgU3BsYXRNYXRlcmlhbCB9IGZyb20gJy4vU3BsYXRNYXRlcmlhbC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3BsYXRNYXRlcmlhbDNEIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkIHRoZSBUaHJlZS5qcyBtYXRlcmlhbCB0aGF0IGlzIHVzZWQgdG8gcmVuZGVyIHRoZSBzcGxhdHMuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZHluYW1pY01vZGUgSWYgdHJ1ZSwgaXQgbWVhbnMgdGhlIHNjZW5lIGdlb21ldHJ5IHJlcHJlc2VudGVkIGJ5IHRoaXMgc3BsYXQgbWVzaCBpcyBub3Qgc3RhdGlvbmFyeSBvclxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgdGhlIHNwbGF0IGNvdW50IG1pZ2h0IGNoYW5nZVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVPcHRpb25hbEVmZmVjdHMgV2hlbiB0cnVlLCBhbGxvd3MgZm9yIHVzYWdlIG9mIGV4dHJhIHByb3BlcnRpZXMgYW5kIGF0dHJpYnV0ZXMgaW4gdGhlIHNoYWRlciBmb3IgZWZmZWN0c1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjaCBhcyBvcGFjaXR5IGFkanVzdG1lbnQuIERlZmF1bHQgaXMgZmFsc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFudGlhbGlhc2VkIElmIHRydWUsIGNhbGN1bGF0ZSBjb21wZW5zYXRpb24gZmFjdG9yIHRvIGRlYWwgd2l0aCBnYXVzc2lhbnMgYmVpbmcgcmVuZGVyZWQgYXQgYSBzaWduaWZpY2FudGx5XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmZlcmVudCByZXNvbHV0aW9uIHRoYW4gdGhhdCBvZiB0aGVpciB0cmFpbmluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFNjcmVlblNwYWNlU3BsYXRTaXplIFRoZSBtYXhpbXVtIGNsaXAgc3BhY2Ugc3BsYXQgc2l6ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0U2NhbGUgVmFsdWUgYnkgd2hpY2ggYWxsIHNwbGF0cyBhcmUgc2NhbGVkIGluIHNjcmVlbi1zcGFjZSAoZGVmYXVsdCBpcyAxLjApXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRDbG91ZE1vZGVFbmFibGVkIFJlbmRlciBhbGwgc3BsYXRzIGFzIHNjcmVlbi1zcGFjZSBjaXJjbGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIERlZ3JlZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIHRvIHV0aWxpemUgaW4gcmVuZGVyaW5nIHNwbGF0c1xyXG4gICAgICogQHJldHVybiB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZChkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSwgYW50aWFsaWFzZWQgPSBmYWxzZSwgbWF4U2NyZWVuU3BhY2VTcGxhdFNpemUgPSAyMDQ4LFxyXG4gICAgICAgICAgICAgICAgIHNwbGF0U2NhbGUgPSAxLjAsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9IGZhbHNlLCBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwLCBrZXJuZWwyRFNpemUgPSAwLjMsIGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbVZlcnRleFZhcnMgPSBgXHJcbiAgICAgICAgICAgIHVuaWZvcm0gdmVjMiBjb3ZhcmlhbmNlc1RleHR1cmVTaXplO1xyXG4gICAgICAgICAgICB1bmlmb3JtIGhpZ2hwIHNhbXBsZXIyRCBjb3ZhcmlhbmNlc1RleHR1cmU7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaGlnaHAgdXNhbXBsZXIyRCBjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQ7XHJcbiAgICAgICAgICAgIHVuaWZvcm0gaW50IGNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0O1xyXG5cclxuICAgICAgICAgICAgdm9pZCBmcm9tQ292YXJpYW5jZUhhbGZGbG9hdFY0KHV2ZWM0IHZhbCwgb3V0IHZlYzQgZmlyc3QsIG91dCB2ZWM0IHNlY29uZCkge1xyXG4gICAgICAgICAgICAgICAgdmVjMiByID0gdW5wYWNrSGFsZjJ4MTYodmFsLnIpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBnID0gdW5wYWNrSGFsZjJ4MTYodmFsLmcpO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBiID0gdW5wYWNrSGFsZjJ4MTYodmFsLmIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZpcnN0ID0gdmVjNChyLngsIHIueSwgZy54LCBnLnkpO1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kID0gdmVjNChiLngsIGIueSwgMC4wLCAwLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gQWRkIGEgdmFyeWluZyBmb3IgaXJpcyBzcGxhdHNcclxuICAgICAgICBsZXQgdmVydGV4U2hhZGVyU291cmNlID0gU3BsYXRNYXRlcmlhbC5idWlsZFZlcnRleFNoYWRlckJhc2UoZHluYW1pY01vZGUsIGVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGN1c3RvbVZlcnRleFZhcnMpO1xyXG4gICAgICAgIHZlcnRleFNoYWRlclNvdXJjZSArPSBTcGxhdE1hdGVyaWFsM0QuYnVpbGRWZXJ0ZXhTaGFkZXJQcm9qZWN0aW9uKGFudGlhbGlhc2VkLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNjcmVlblNwYWNlU3BsYXRTaXplLCBrZXJuZWwyRFNpemUpO1xyXG4gICAgICAgIGNvbnN0IGZyYWdtZW50U2hhZGVyU291cmNlID0gU3BsYXRNYXRlcmlhbDNELmJ1aWxkRnJhZ21lbnRTaGFkZXIoaXJpc09jY2x1c2lvbkNvbmZpZyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gU3BsYXRNYXRlcmlhbC5nZXRVbmlmb3JtcyhkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNwbGF0U2NhbGUsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCk7XHJcblxyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmVTaXplJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmUnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydjb3ZhcmlhbmNlc0FyZUhhbGZGbG9hdCddID0ge1xyXG4gICAgICAgICAgICAndHlwZSc6ICdpJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogMFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IFNoYWRlck1hdGVyaWFsKHtcclxuICAgICAgICAgICAgdW5pZm9ybXM6IHVuaWZvcm1zLFxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXI6IHZlcnRleFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXI6IGZyYWdtZW50U2hhZGVyU291cmNlLFxyXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgICAgICAgICAgYWxwaGFUZXN0OiAxLjAsXHJcbiAgICAgICAgICAgIGJsZW5kaW5nOiBOb3JtYWxCbGVuZGluZyxcclxuICAgICAgICAgICAgZGVwdGhUZXN0OiB0cnVlLFxyXG4gICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgc2lkZTogRG91YmxlU2lkZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGJ1aWxkVmVydGV4U2hhZGVyUHJvamVjdGlvbihhbnRpYWxpYXNlZCwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLCBtYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSwga2VybmVsMkRTaXplKSB7XHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IGBcclxuXHJcbiAgICAgICAgICAgIHZlYzQgc2FtcGxlZENvdmFyaWFuY2VBO1xyXG4gICAgICAgICAgICB2ZWM0IHNhbXBsZWRDb3ZhcmlhbmNlQjtcclxuICAgICAgICAgICAgdmVjMyBjb3YzRF9NMTFfTTEyX00xMztcclxuICAgICAgICAgICAgdmVjMyBjb3YzRF9NMjJfTTIzX00zMztcclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0ID09IDApIHtcclxuICAgICAgICAgICAgICAgIHNhbXBsZWRDb3ZhcmlhbmNlQSA9IHRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSwgb2RkT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSkpO1xyXG4gICAgICAgICAgICAgICAgc2FtcGxlZENvdmFyaWFuY2VCID0gdGV4dHVyZShjb3ZhcmlhbmNlc1RleHR1cmUsIGdldERhdGFVVkYobmVhcmVzdEV2ZW5JbmRleCwgMS41LCBvZGRPZmZzZXQgKyB1aW50KDEpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzID0gdmVjMyhzYW1wbGVkQ292YXJpYW5jZUEucmdiKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLmJhLCBzYW1wbGVkQ292YXJpYW5jZUIucikgKiBmT2RkT2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgY292M0RfTTIyX00yM19NMzMgPSB2ZWMzKHNhbXBsZWRDb3ZhcmlhbmNlQS5hLCBzYW1wbGVkQ292YXJpYW5jZUIucmcpICogKDEuMCAtIGZPZGRPZmZzZXQpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMyhzYW1wbGVkQ292YXJpYW5jZUIuZ2JhKSAqIGZPZGRPZmZzZXQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1dmVjNCBzYW1wbGVkQ292YXJpYW5jZVUgPSB0ZXh0dXJlKGNvdmFyaWFuY2VzVGV4dHVyZUhhbGZGbG9hdCwgZ2V0RGF0YVVWKDEsIDAsIGNvdmFyaWFuY2VzVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgICAgIGZyb21Db3ZhcmlhbmNlSGFsZkZsb2F0VjQoc2FtcGxlZENvdmFyaWFuY2VVLCBzYW1wbGVkQ292YXJpYW5jZUEsIHNhbXBsZWRDb3ZhcmlhbmNlQik7XHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMyA9IHNhbXBsZWRDb3ZhcmlhbmNlQS5yZ2I7XHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMjJfTTIzX00zMyA9IHZlYzMoc2FtcGxlZENvdmFyaWFuY2VBLmEsIHNhbXBsZWRDb3ZhcmlhbmNlQi5yZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSAzRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICBtYXQzIFZyayA9IG1hdDMoXHJcbiAgICAgICAgICAgICAgICBjb3YzRF9NMTFfTTEyX00xMy54LCBjb3YzRF9NMTFfTTEyX00xMy55LCBjb3YzRF9NMTFfTTEyX00xMy56LFxyXG4gICAgICAgICAgICAgICAgY292M0RfTTExX00xMl9NMTMueSwgY292M0RfTTIyX00yM19NMzMueCwgY292M0RfTTIyX00yM19NMzMueSxcclxuICAgICAgICAgICAgICAgIGNvdjNEX00xMV9NMTJfTTEzLnosIGNvdjNEX00yMl9NMjNfTTMzLnksIGNvdjNEX00yMl9NMjNfTTMzLnpcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDMgSjtcclxuICAgICAgICAgICAgaWYgKG9ydGhvZ3JhcGhpY01vZGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgdGhlIHByb2plY3Rpb24gaXMgbGluZWFyLCB3ZSBkb24ndCBuZWVkIGFuIGFwcHJveGltYXRpb25cclxuICAgICAgICAgICAgICAgIEogPSB0cmFuc3Bvc2UobWF0MyhvcnRob1pvb20sIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgb3J0aG9ab29tLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCAwLjAsIDAuMCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBKYWNvYmlhbiBvZiB0aGUgYWZmaW5lIGFwcHJveGltYXRpb24gb2YgdGhlIHByb2plY3Rpb24gbWF0cml4LiBJdCB3aWxsIGJlIHVzZWQgdG8gdHJhbnNmb3JtIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gM0QgY292YXJpYW5jZSBtYXRyaXggaW5zdGVhZCBvZiB1c2luZyB0aGUgYWN0dWFsIHByb2plY3Rpb24gbWF0cml4IGJlY2F1c2UgdGhhdCB0cmFuc2Zvcm1hdGlvbiB3b3VsZFxyXG4gICAgICAgICAgICAgICAgLy8gcmVxdWlyZSBhIG5vbi1saW5lYXIgY29tcG9uZW50IChwZXJzcGVjdGl2ZSBkaXZpc2lvbikgd2hpY2ggd291bGQgeWllbGQgYSBub24tZ2F1c3NpYW4gcmVzdWx0LlxyXG4gICAgICAgICAgICAgICAgZmxvYXQgcyA9IDEuMCAvICh2aWV3Q2VudGVyLnogKiB2aWV3Q2VudGVyLnopO1xyXG4gICAgICAgICAgICAgICAgSiA9IG1hdDMoXHJcbiAgICAgICAgICAgICAgICAgICAgZm9jYWwueCAvIHZpZXdDZW50ZXIueiwgMC4sIC0oZm9jYWwueCAqIHZpZXdDZW50ZXIueCkgKiBzLFxyXG4gICAgICAgICAgICAgICAgICAgIDAuLCBmb2NhbC55IC8gdmlld0NlbnRlci56LCAtKGZvY2FsLnkgKiB2aWV3Q2VudGVyLnkpICogcyxcclxuICAgICAgICAgICAgICAgICAgICAwLiwgMC4sIDAuXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDb25jYXRlbmF0ZSB0aGUgcHJvamVjdGlvbiBhcHByb3hpbWF0aW9uIHdpdGggdGhlIG1vZGVsLXZpZXcgdHJhbnNmb3JtYXRpb25cclxuICAgICAgICAgICAgbWF0MyBXID0gdHJhbnNwb3NlKG1hdDModHJhbnNmb3JtTW9kZWxWaWV3TWF0cml4KSk7XHJcbiAgICAgICAgICAgIG1hdDMgVCA9IFcgKiBKO1xyXG5cclxuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIHRoZSAzRCBjb3ZhcmlhbmNlIG1hdHJpeCAoVnJrKSB0byBjb21wdXRlIHRoZSAyRCBjb3ZhcmlhbmNlIG1hdHJpeFxyXG4gICAgICAgICAgICBtYXQzIGNvdjJEbSA9IHRyYW5zcG9zZShUKSAqIFZyayAqIFQ7XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIGlmIChhbnRpYWxpYXNlZCkge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGV0T3JpZyA9IGNvdjJEbVswXVswXSAqIGNvdjJEbVsxXVsxXSAtIGNvdjJEbVswXVsxXSAqIGNvdjJEbVswXVsxXTtcclxuICAgICAgICAgICAgICAgIGNvdjJEbVswXVswXSArPSAke2tlcm5lbDJEU2l6ZX07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMV1bMV0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGV0Qmx1ciA9IGNvdjJEbVswXVswXSAqIGNvdjJEbVsxXVsxXSAtIGNvdjJEbVswXVsxXSAqIGNvdjJEbVswXVsxXTtcclxuICAgICAgICAgICAgICAgIHZDb2xvci5hICo9IHNxcnQobWF4KGRldE9yaWcgLyBkZXRCbHVyLCAwLjApKTtcclxuICAgICAgICAgICAgICAgIGlmICh2Q29sb3IuYSA8IG1pbkFscGhhKSByZXR1cm47XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGNvdjJEbVswXVswXSArPSAke2tlcm5lbDJEU2l6ZX07XHJcbiAgICAgICAgICAgICAgICBjb3YyRG1bMV1bMV0gKz0gJHtrZXJuZWwyRFNpemV9O1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIGFyZSBpbnRlcmVzdGVkIGluIHRoZSB1cHBlci1sZWZ0IDJ4MiBwb3J0aW9uIG9mIHRoZSBwcm9qZWN0ZWQgM0QgY292YXJpYW5jZSBtYXRyaXggYmVjYXVzZVxyXG4gICAgICAgICAgICAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgdGhlIFggYW5kIFkgdmFsdWVzLiBXZSB3YW50IHRoZSBYLWRpYWdvbmFsLCBjb3YyRG1bMF1bMF0sXHJcbiAgICAgICAgICAgIC8vIHRoZSBZLWRpYWdvbmFsLCBjb3YyRG1bMV1bMV0sIGFuZCB0aGUgY29ycmVsYXRpb24gYmV0d2VlbiB0aGUgdHdvIGNvdjJEbVswXVsxXS4gV2UgZG9uJ3RcclxuICAgICAgICAgICAgLy8gbmVlZCBjb3YyRG1bMV1bMF0gYmVjYXVzZSBpdCBpcyBhIHN5bWV0cmljIG1hdHJpeC5cclxuICAgICAgICAgICAgdmVjMyBjb3YyRHYgPSB2ZWMzKGNvdjJEbVswXVswXSwgY292MkRtWzBdWzFdLCBjb3YyRG1bMV1bMV0pO1xyXG5cclxuICAgICAgICAgICAgLy8gV2Ugbm93IG5lZWQgdG8gc29sdmUgZm9yIHRoZSBlaWdlbi12YWx1ZXMgYW5kIGVpZ2VuIHZlY3RvcnMgb2YgdGhlIDJEIGNvdmFyaWFuY2UgbWF0cml4XHJcbiAgICAgICAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSB0aGUgMkQgYmFzaXMgZm9yIHRoZSBzcGxhdC4gVGhpcyBpcyBkb25lIHVzaW5nIHRoZSBtZXRob2QgZGVzY3JpYmVkXHJcbiAgICAgICAgICAgIC8vIGhlcmU6IGh0dHBzOi8vcGVvcGxlLm1hdGguaGFydmFyZC5lZHUvfmtuaWxsL3RlYWNoaW5nL21hdGgyMWIyMDA0L2V4aGliaXRzLzJkbWF0cmljZXMvaW5kZXguaHRtbFxyXG4gICAgICAgICAgICAvLyBBZnRlciBjYWxjdWxhdGluZyB0aGUgZWlnZW4tdmFsdWVzIGFuZCBlaWdlbi12ZWN0b3JzLCB3ZSBjYWxjdWxhdGUgdGhlIGJhc2lzIGZvciByZW5kZXJpbmcgdGhlIHNwbGF0XHJcbiAgICAgICAgICAgIC8vIGJ5IG5vcm1hbGl6aW5nIHRoZSBlaWdlbi12ZWN0b3JzIGFuZCB0aGVuIG11bHRpcGx5aW5nIHRoZW0gYnkgKHNxcnQoOCkgKiBzcXJ0KGVpZ2VuLXZhbHVlKSksIHdoaWNoIGlzXHJcbiAgICAgICAgICAgIC8vIGVxdWFsIHRvIHNjYWxpbmcgdGhlbSBieSBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBkaWZmZXJlbnQgYXBwcm9hY2ggdGhhbiBpbiB0aGUgb3JpZ2luYWwgd29yayBhdCBJTlJJQS4gSW4gdGhhdCB3b3JrIHRoZXkgY29tcHV0ZSB0aGVcclxuICAgICAgICAgICAgLy8gbWF4IGV4dGVudHMgb2YgdGhlIHByb2plY3RlZCBzcGxhdCBpbiBzY3JlZW4gc3BhY2UgdG8gZm9ybSBhIHNjcmVlbi1zcGFjZSBhbGlnbmVkIGJvdW5kaW5nIHJlY3RhbmdsZVxyXG4gICAgICAgICAgICAvLyB3aGljaCBmb3JtcyB0aGUgZ2VvbWV0cnkgdGhhdCBpcyBhY3R1YWxseSByYXN0ZXJpemVkLiBUaGUgZGltZW5zaW9ucyBvZiB0aGF0IGJvdW5kaW5nIGJveCBhcmUgMy4wXHJcbiAgICAgICAgICAgIC8vIHRpbWVzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgbWF4aW11bSBlaWdlbi12YWx1ZSwgb3IgMyBzdGFuZGFyZCBkZXZpYXRpb25zLiBUaGV5IHRoZW4gdXNlIHRoZSBpbnZlcnNlXHJcbiAgICAgICAgICAgIC8vIDJEIGNvdmFyaWFuY2UgbWF0cml4IChjYWxsZWQgJ2NvbmljJykgaW4gdGhlIENVREEgcmVuZGVyaW5nIHRocmVhZCB0byBkZXRlcm1pbmUgZnJhZ21lbnQgb3BhY2l0eSBieVxyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGluZyB0aGUgZnVsbCBnYXVzc2lhbjogZXhwKC0wLjUgKiAoWCAtIG1lYW4pICogY29uaWMgKiAoWCAtIG1lYW4pKSAqIHNwbGF0IG9wYWNpdHlcclxuICAgICAgICAgICAgZmxvYXQgYSA9IGNvdjJEdi54O1xyXG4gICAgICAgICAgICBmbG9hdCBkID0gY292MkR2Lno7XHJcbiAgICAgICAgICAgIGZsb2F0IGIgPSBjb3YyRHYueTtcclxuICAgICAgICAgICAgZmxvYXQgRCA9IGEgKiBkIC0gYiAqIGI7XHJcbiAgICAgICAgICAgIGZsb2F0IHRyYWNlID0gYSArIGQ7XHJcbiAgICAgICAgICAgIGZsb2F0IHRyYWNlT3ZlcjIgPSAwLjUgKiB0cmFjZTtcclxuICAgICAgICAgICAgZmxvYXQgdGVybTIgPSBzcXJ0KG1heCgwLjFmLCB0cmFjZU92ZXIyICogdHJhY2VPdmVyMiAtIEQpKTtcclxuICAgICAgICAgICAgZmxvYXQgZWlnZW5WYWx1ZTEgPSB0cmFjZU92ZXIyICsgdGVybTI7XHJcbiAgICAgICAgICAgIGZsb2F0IGVpZ2VuVmFsdWUyID0gdHJhY2VPdmVyMiAtIHRlcm0yO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBlaWdlblZhbHVlMSA9IGVpZ2VuVmFsdWUyID0gMC4yO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWlnZW5WYWx1ZTIgPD0gMC4wKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2ZWMyIGVpZ2VuVmVjdG9yMSA9IG5vcm1hbGl6ZSh2ZWMyKGIsIGVpZ2VuVmFsdWUxIC0gYSkpO1xyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgZWlnZW4gdmVjdG9ycyBhcmUgb3J0aG9nb25hbCwgd2UgZGVyaXZlIHRoZSBzZWNvbmQgb25lIGZyb20gdGhlIGZpcnN0XHJcbiAgICAgICAgICAgIHZlYzIgZWlnZW5WZWN0b3IyID0gdmVjMihlaWdlblZlY3RvcjEueSwgLWVpZ2VuVmVjdG9yMS54KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFdlIHVzZSBzcXJ0KDgpIHN0YW5kYXJkIGRldmlhdGlvbnMgaW5zdGVhZCBvZiAzIHRvIGVsaW1pbmF0ZSBtb3JlIG9mIHRoZSBzcGxhdCB3aXRoIGEgdmVyeSBsb3cgb3BhY2l0eS5cclxuICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjEgPSBlaWdlblZlY3RvcjEgKiBzcGxhdFNjYWxlICogbWluKHNxcnQ4ICogc3FydChlaWdlblZhbHVlMSksICR7cGFyc2VJbnQobWF4U2NyZWVuU3BhY2VTcGxhdFNpemUpfS4wKTtcclxuICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjIgPSBlaWdlblZlY3RvcjIgKiBzcGxhdFNjYWxlICogbWluKHNxcnQ4ICogc3FydChlaWdlblZhbHVlMiksICR7cGFyc2VJbnQobWF4U2NyZWVuU3BhY2VTcGxhdFNpemUpfS4wKTtcclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgaWYgKGVuYWJsZU9wdGlvbmFsRWZmZWN0cykge1xyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgdkNvbG9yLmEgKj0gc3BsYXRPcGFjaXR5RnJvbVNjZW5lO1xyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgdmVjMiBuZGNPZmZzZXQgPSB2ZWMyKHZQb3NpdGlvbi54ICogYmFzaXNWZWN0b3IxICsgdlBvc2l0aW9uLnkgKiBiYXNpc1ZlY3RvcjIpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNpc1ZpZXdwb3J0ICogMi4wICogaW52ZXJzZUZvY2FsQWRqdXN0bWVudDtcclxuXHJcbiAgICAgICAgICAgIHZlYzQgcXVhZFBvcyA9IHZlYzQobmRjQ2VudGVyLnh5ICsgbmRjT2Zmc2V0LCBuZGNDZW50ZXIueiwgMS4wKTtcclxuICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBxdWFkUG9zO1xyXG5cclxuICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHBvc2l0aW9uIGRhdGEgd2Ugc2VuZCB0byB0aGUgZnJhZ21lbnQgc2hhZGVyXHJcbiAgICAgICAgICAgIHZQb3NpdGlvbiAqPSBzcXJ0ODtcclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gU3BsYXRNYXRlcmlhbC5nZXRWZXJ0ZXhTaGFkZXJGYWRlSW4oKTtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZEZyYWdtZW50U2hhZGVyKGlyaXNPY2NsdXNpb25Db25maWcgPSBudWxsKSB7XHJcbiAgICAgICAgbGV0IGZyYWdtZW50U2hhZGVyU291cmNlID0gYFxyXG4gICAgICAgICAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XHJcbiAgICAgICAgICAgICNpbmNsdWRlIDxjb21tb24+XHJcblxyXG4gICAgICAgICAgICB1bmlmb3JtIGZsb2F0IGV5ZUJsaW5rTGVmdDtcclxuICAgICAgICAgICAgdW5pZm9ybSBmbG9hdCBleWVCbGlua1JpZ2h0O1xyXG5cclxuICAgICAgICAgICAgdmFyeWluZyB2ZWM0IHZDb2xvcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZVdjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZQb3NpdGlvbjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZTcGxhdEluZGV4O1xyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgdm9pZCBtYWluICgpIHtcclxuICAgICAgICAgICAgICAgIGZsb2F0IEEgPSBkb3QodlBvc2l0aW9uLCB2UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgb3BhY2l0eSA9IGV4cCgtMC41ICogQSkgKiB2Q29sb3IuYTtcclxuICAgICAgICAgICAgICAgIGlmIChvcGFjaXR5IDwgMS4wIC8gMjU1LjApXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGlyaXMgb2NjbHVzaW9uIGNvZGUgb25seSBpZiBjb25maWcgZXhpc3RzXHJcbiAgICAgICAgaWYgKGlyaXNPY2NsdXNpb25Db25maWcgJiYgKGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpcyB8fCBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpcykpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgaWR4ID0gdlNwbGF0SW5kZXgueDtcclxuICAgICAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSByaWdodCBpcmlzIGNoZWNrc1xyXG4gICAgICAgICAgICBpZiAoaXJpc09jY2x1c2lvbkNvbmZpZy5yaWdodF9pcmlzICYmIGlyaXNPY2NsdXNpb25Db25maWcucmlnaHRfaXJpcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByaWdodENvbmRpdGlvbnMgPSBpcmlzT2NjbHVzaW9uQ29uZmlnLnJpZ2h0X2lyaXNcclxuICAgICAgICAgICAgICAgICAgICAubWFwKChbc3RhcnQsIGVuZF0pID0+IGAoaWR4ID49ICR7c3RhcnR9LjAgJiYgaWR4IDw9ICR7ZW5kfS4wKWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyB8fFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBzcGxhdCBpcyBwYXJ0IG9mIHJpZ2h0IGlyaXNcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNSaWdodElyaXMgPSAke3JpZ2h0Q29uZGl0aW9uc307XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgYm9vbCBpc1JpZ2h0SXJpcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbGVmdCBpcmlzIGNoZWNrc1xyXG4gICAgICAgICAgICBpZiAoaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXMgJiYgaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdENvbmRpdGlvbnMgPSBpcmlzT2NjbHVzaW9uQ29uZmlnLmxlZnRfaXJpc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKFtzdGFydCwgZW5kXSkgPT4gYChpZHggPj0gJHtzdGFydH0uMCAmJiBpZHggPD0gJHtlbmR9LjApYClcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignIHx8XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgc3BsYXQgaXMgcGFydCBvZiBsZWZ0IGlyaXNcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpcyA9ICR7bGVmdENvbmRpdGlvbnN9O1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgIGJvb2wgaXNMZWZ0SXJpcyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgZmluYWxPcGFjaXR5ID0gb3BhY2l0eTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTbW9vdGggZmFkZTogaXJpcyBmYWRlcyBvdXQgYXMgZXllIGNsb3NlcyAoYmxpbmsgaW5jcmVhc2VzKVxyXG4gICAgICAgICAgICAgICAgLy8gc21vb3Roc3RlcCgwLjEsIDAuNSwgYmxpbmspID0gMCB3aGVuIGJsaW5rPDAuMSwgMSB3aGVuIGJsaW5rPjAuNVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmlnaHRJcmlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC4xLCAwLjUsIGV5ZUJsaW5rUmlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsT3BhY2l0eSA9IG9wYWNpdHkgKiBmYWRlRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0xlZnRJcmlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXQgZmFkZUZhY3RvciA9IDEuMCAtIHNtb290aHN0ZXAoMC4xLCAwLjUsIGV5ZUJsaW5rTGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxPcGFjaXR5ID0gb3BhY2l0eSAqIGZhZGVGYWN0b3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsT3BhY2l0eSA8IDEuMCAvIDI1NS4wKVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2NhcmQ7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2Q29sb3IucmdiLCBmaW5hbE9wYWNpdHkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyBpcmlzIG9jY2x1c2lvbiAtIHNpbXBsZSByZW5kZXJpbmdcclxuICAgICAgICAgICAgZnJhZ21lbnRTaGFkZXJTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2Q29sb3IucmdiLCBvcGFjaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnJhZ21lbnRTaGFkZXJTb3VyY2U7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsIi8qKlxyXG4gKiBTcGxhdE1hdGVyaWFsMkRcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBNb2RpZmllZCBmb3IgRkxBTUUgYXZhdGFyIHN1cHBvcnQ6XHJcbiAqIC0gRXh0ZW5kZWQgdmVydGV4IHNoYWRlciBmb3IgRkxBTUUgaW50ZWdyYXRpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBEb3VibGVTaWRlLCBOb3JtYWxCbGVuZGluZywgU2hhZGVyTWF0ZXJpYWwsIFZlY3RvcjIgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0TWF0ZXJpYWwgfSBmcm9tICcuL1NwbGF0TWF0ZXJpYWwuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0TWF0ZXJpYWwyRCB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCB0aGUgVGhyZWUuanMgbWF0ZXJpYWwgdGhhdCBpcyB1c2VkIHRvIHJlbmRlciB0aGUgc3BsYXRzLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGR5bmFtaWNNb2RlIElmIHRydWUsIGl0IG1lYW5zIHRoZSBzY2VuZSBnZW9tZXRyeSByZXByZXNlbnRlZCBieSB0aGlzIHNwbGF0IG1lc2ggaXMgbm90IHN0YXRpb25hcnkgb3JcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0IHRoZSBzcGxhdCBjb3VudCBtaWdodCBjaGFuZ2VcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlT3B0aW9uYWxFZmZlY3RzIFdoZW4gdHJ1ZSwgYWxsb3dzIGZvciB1c2FnZSBvZiBleHRyYSBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzIGluIHRoZSBzaGFkZXIgZm9yIGVmZmVjdHNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2ggYXMgb3BhY2l0eSBhZGp1c3RtZW50LiBEZWZhdWx0IGlzIGZhbHNlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0U2NhbGUgVmFsdWUgYnkgd2hpY2ggYWxsIHNwbGF0cyBhcmUgc2NhbGVkIGluIHNjcmVlbi1zcGFjZSAoZGVmYXVsdCBpcyAxLjApXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9pbnRDbG91ZE1vZGVFbmFibGVkIFJlbmRlciBhbGwgc3BsYXRzIGFzIHNjcmVlbi1zcGFjZSBjaXJjbGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlIERlZ3JlZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIHRvIHV0aWxpemUgaW4gcmVuZGVyaW5nIHNwbGF0c1xyXG4gICAgICogQHJldHVybiB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZChkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSwgc3BsYXRTY2FsZSA9IDEuMCxcclxuICAgICAgICAgICAgICAgICBwb2ludENsb3VkTW9kZUVuYWJsZWQgPSBmYWxzZSwgbWF4U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21WZXJ0ZXhWYXJzID0gYFxyXG4gICAgICAgICAgICB1bmlmb3JtIHZlYzIgc2NhbGVSb3RhdGlvbnNUZXh0dXJlU2l6ZTtcclxuICAgICAgICAgICAgdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgc2NhbGVSb3RhdGlvbnNUZXh0dXJlO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIG1hdDMgdlQ7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UXVhZENlbnRlcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZGcmFnQ29vcmQ7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IFNwbGF0TWF0ZXJpYWwuYnVpbGRWZXJ0ZXhTaGFkZXJCYXNlKGR5bmFtaWNNb2RlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgY3VzdG9tVmVydGV4VmFycyk7XHJcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IFNwbGF0TWF0ZXJpYWwyRC5idWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oKTtcclxuICAgICAgICBjb25zdCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IFNwbGF0TWF0ZXJpYWwyRC5idWlsZEZyYWdtZW50U2hhZGVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVuaWZvcm1zID0gU3BsYXRNYXRlcmlhbC5nZXRVbmlmb3JtcyhkeW5hbWljTW9kZSwgZW5hYmxlT3B0aW9uYWxFZmZlY3RzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNwbGF0U2NhbGUsIHBvaW50Q2xvdWRNb2RlRW5hYmxlZCk7XHJcblxyXG4gICAgICAgIHVuaWZvcm1zWydzY2FsZVJvdGF0aW9uc1RleHR1cmUnXSA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAndCcsXHJcbiAgICAgICAgICAgICd2YWx1ZSc6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHVuaWZvcm1zWydzY2FsZVJvdGF0aW9uc1RleHR1cmVTaXplJ10gPSB7XHJcbiAgICAgICAgICAgICd0eXBlJzogJ3YyJyxcclxuICAgICAgICAgICAgJ3ZhbHVlJzogbmV3IFZlY3RvcjIoMTAyNCwgMTAyNClcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBTaGFkZXJNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIHVuaWZvcm1zOiB1bmlmb3JtcyxcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyOiB2ZXJ0ZXhTaGFkZXJTb3VyY2UsXHJcbiAgICAgICAgICAgIGZyYWdtZW50U2hhZGVyOiBmcmFnbWVudFNoYWRlclNvdXJjZSxcclxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgICAgIGFscGhhVGVzdDogMS4wLFxyXG4gICAgICAgICAgICBibGVuZGluZzogTm9ybWFsQmxlbmRpbmcsXHJcbiAgICAgICAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcclxuICAgICAgICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNpZGU6IERvdWJsZVNpZGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZFZlcnRleFNoYWRlclByb2plY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8vIE9yaWdpbmFsIENVREEgY29kZSBmb3IgY2FsY3VsYXRpbmcgc3BsYXQtdG8tc2NyZWVuIHRyYW5zZm9ybWF0aW9uLCBmb3IgcmVmZXJlbmNlXHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgZ2xtOjptYXQzIFIgPSBxdWF0X3RvX3JvdG1hdChyb3QpO1xyXG4gICAgICAgICAgICBnbG06Om1hdDMgUyA9IHNjYWxlX3RvX21hdChzY2FsZSwgbW9kKTtcclxuICAgICAgICAgICAgZ2xtOjptYXQzIEwgPSBSICogUztcclxuXHJcbiAgICAgICAgICAgIC8vIGNlbnRlciBvZiBHYXVzc2lhbnMgaW4gdGhlIGNhbWVyYSBjb29yZGluYXRlXHJcbiAgICAgICAgICAgIGdsbTo6bWF0M3g0IHNwbGF0MndvcmxkID0gZ2xtOjptYXQzeDQoXHJcbiAgICAgICAgICAgICAgICBnbG06OnZlYzQoTFswXSwgMC4wKSxcclxuICAgICAgICAgICAgICAgIGdsbTo6dmVjNChMWzFdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgZ2xtOjp2ZWM0KHBfb3JpZy54LCBwX29yaWcueSwgcF9vcmlnLnosIDEpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBnbG06Om1hdDQgd29ybGQybmRjID0gZ2xtOjptYXQ0KFxyXG4gICAgICAgICAgICAgICAgcHJvam1hdHJpeFswXSwgcHJvam1hdHJpeFs0XSwgcHJvam1hdHJpeFs4XSwgcHJvam1hdHJpeFsxMl0sXHJcbiAgICAgICAgICAgICAgICBwcm9qbWF0cml4WzFdLCBwcm9qbWF0cml4WzVdLCBwcm9qbWF0cml4WzldLCBwcm9qbWF0cml4WzEzXSxcclxuICAgICAgICAgICAgICAgIHByb2ptYXRyaXhbMl0sIHByb2ptYXRyaXhbNl0sIHByb2ptYXRyaXhbMTBdLCBwcm9qbWF0cml4WzE0XSxcclxuICAgICAgICAgICAgICAgIHByb2ptYXRyaXhbM10sIHByb2ptYXRyaXhbN10sIHByb2ptYXRyaXhbMTFdLCBwcm9qbWF0cml4WzE1XVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgZ2xtOjptYXQzeDQgbmRjMnBpeCA9IGdsbTo6bWF0M3g0KFxyXG4gICAgICAgICAgICAgICAgZ2xtOjp2ZWM0KGZsb2F0KFcpIC8gMi4wLCAwLjAsIDAuMCwgZmxvYXQoVy0xKSAvIDIuMCksXHJcbiAgICAgICAgICAgICAgICBnbG06OnZlYzQoMC4wLCBmbG9hdChIKSAvIDIuMCwgMC4wLCBmbG9hdChILTEpIC8gMi4wKSxcclxuICAgICAgICAgICAgICAgIGdsbTo6dmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBUID0gZ2xtOjp0cmFuc3Bvc2Uoc3BsYXQyd29ybGQpICogd29ybGQybmRjICogbmRjMnBpeDtcclxuICAgICAgICAgICAgbm9ybWFsID0gdHJhbnNmb3JtVmVjNHgzKHtMWzJdLngsIExbMl0ueSwgTFsyXS56fSwgdmlld21hdHJpeCk7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgLy8gQ29tcHV0ZSBhIDJELXRvLTJEIG1hcHBpbmcgbWF0cml4IGZyb20gYSB0YW5nZW50IHBsYW5lIGludG8gYSBpbWFnZSBwbGFuZVxyXG4gICAgICAgIC8vIGdpdmVuIGEgMkQgZ2F1c3NpYW4gcGFyYW1ldGVycy4gVCA9IFdIIChmcm9tIHRoZSBwYXBlcjogaHR0cHM6Ly9hcnhpdi5vcmcvcGRmLzI0MDMuMTc4ODgpXHJcbiAgICAgICAgbGV0IHZlcnRleFNoYWRlclNvdXJjZSA9IGBcclxuXHJcbiAgICAgICAgICAgIHZlYzQgc2NhbGVSb3RhdGlvbkEgPSB0ZXh0dXJlKHNjYWxlUm90YXRpb25zVGV4dHVyZSwgZ2V0RGF0YVVWRihuZWFyZXN0RXZlbkluZGV4LCAxLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZGRPZmZzZXQsIHNjYWxlUm90YXRpb25zVGV4dHVyZVNpemUpKTtcclxuICAgICAgICAgICAgdmVjNCBzY2FsZVJvdGF0aW9uQiA9IHRleHR1cmUoc2NhbGVSb3RhdGlvbnNUZXh0dXJlLCBnZXREYXRhVVZGKG5lYXJlc3RFdmVuSW5kZXgsIDEuNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9kZE9mZnNldCArIHVpbnQoMSksIHNjYWxlUm90YXRpb25zVGV4dHVyZVNpemUpKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzMgc2NhbGVSb3RhdGlvbjEyMyA9IHZlYzMoc2NhbGVSb3RhdGlvbkEucmdiKSAqICgxLjAgLSBmT2RkT2Zmc2V0KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMoc2NhbGVSb3RhdGlvbkEuYmEsIHNjYWxlUm90YXRpb25CLnIpICogZk9kZE9mZnNldDtcclxuICAgICAgICAgICAgdmVjMyBzY2FsZVJvdGF0aW9uNDU2ID0gdmVjMyhzY2FsZVJvdGF0aW9uQS5hLCBzY2FsZVJvdGF0aW9uQi5yZykgKiAoMS4wIC0gZk9kZE9mZnNldCkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzKHNjYWxlUm90YXRpb25CLmdiYSkgKiBmT2RkT2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgbWlzc2luZ1cgPSBzcXJ0KDEuMCAtIHNjYWxlUm90YXRpb240NTYueCAqIHNjYWxlUm90YXRpb240NTYueCAtIHNjYWxlUm90YXRpb240NTYueSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlUm90YXRpb240NTYueSAtIHNjYWxlUm90YXRpb240NTYueiAqIHNjYWxlUm90YXRpb240NTYueik7XHJcbiAgICAgICAgICAgIG1hdDMgUiA9IHF1YXRlcm5pb25Ub1JvdGF0aW9uTWF0cml4KHNjYWxlUm90YXRpb240NTYuciwgc2NhbGVSb3RhdGlvbjQ1Ni5nLCBzY2FsZVJvdGF0aW9uNDU2LmIsIG1pc3NpbmdXKTtcclxuICAgICAgICAgICAgbWF0MyBTID0gbWF0MyhzY2FsZVJvdGF0aW9uMTIzLnIsIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMC4wLCBzY2FsZVJvdGF0aW9uMTIzLmcsIDAuMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAuMCwgMC4wLCBzY2FsZVJvdGF0aW9uMTIzLmIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbWF0MyBMID0gUiAqIFM7XHJcblxyXG4gICAgICAgICAgICBtYXQzeDQgc3BsYXQyV29ybGQgPSBtYXQzeDQodmVjNChMWzBdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChMWzFdLCAwLjApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNChzcGxhdENlbnRlci54LCBzcGxhdENlbnRlci55LCBzcGxhdENlbnRlci56LCAxLjApKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDQgd29ybGQybmRjID0gdHJhbnNwb3NlKHByb2plY3Rpb25NYXRyaXggKiB0cmFuc2Zvcm1Nb2RlbFZpZXdNYXRyaXgpO1xyXG5cclxuICAgICAgICAgICAgbWF0M3g0IG5kYzJwaXggPSBtYXQzeDQodmVjNCh2aWV3cG9ydC54IC8gMi4wLCAwLjAsIDAuMCwgKHZpZXdwb3J0LnggLSAxLjApIC8gMi4wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCgwLjAsIHZpZXdwb3J0LnkgLyAyLjAsIDAuMCwgKHZpZXdwb3J0LnkgLSAxLjApIC8gMi4wKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApKTtcclxuXHJcbiAgICAgICAgICAgIG1hdDMgVCA9IHRyYW5zcG9zZShzcGxhdDJXb3JsZCkgKiB3b3JsZDJuZGMgKiBuZGMycGl4O1xyXG4gICAgICAgICAgICB2ZWMzIG5vcm1hbCA9IHZlYzModmlld01hdHJpeCAqIHZlYzQoTFswXVsyXSwgTFsxXVsyXSwgTFsyXVsyXSwgMC4wKSk7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gT3JpZ2luYWwgQ1VEQSBjb2RlIGZvciBwcm9qZWN0aW9uIHRvIDJELCBmb3IgcmVmZXJlbmNlXHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgZmxvYXQzIFQwID0ge1RbMF1bMF0sIFRbMF1bMV0sIFRbMF1bMl19O1xyXG4gICAgICAgICAgICBmbG9hdDMgVDEgPSB7VFsxXVswXSwgVFsxXVsxXSwgVFsxXVsyXX07XHJcbiAgICAgICAgICAgIGZsb2F0MyBUMyA9IHtUWzJdWzBdLCBUWzJdWzFdLCBUWzJdWzJdfTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgQUFCQlxyXG4gICAgICAgICAgICBmbG9hdDMgdGVtcF9wb2ludCA9IHsxLjBmLCAxLjBmLCAtMS4wZn07XHJcbiAgICAgICAgICAgIGZsb2F0IGRpc3RhbmNlID0gc3VtZjMoVDMgKiBUMyAqIHRlbXBfcG9pbnQpO1xyXG4gICAgICAgICAgICBmbG9hdDMgZiA9ICgxIC8gZGlzdGFuY2UpICogdGVtcF9wb2ludDtcclxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlID09IDAuMCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgcG9pbnRfaW1hZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBzdW1mMyhmICogVDAgKiBUMyksXHJcbiAgICAgICAgICAgICAgICBzdW1mMyhmICogVDEgKiBUMylcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZsb2F0MiB0ZW1wID0ge1xyXG4gICAgICAgICAgICAgICAgc3VtZjMoZiAqIFQwICogVDApLFxyXG4gICAgICAgICAgICAgICAgc3VtZjMoZiAqIFQxICogVDEpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZsb2F0MiBoYWxmX2V4dGVuZCA9IHBvaW50X2ltYWdlICogcG9pbnRfaW1hZ2UgLSB0ZW1wO1xyXG4gICAgICAgICAgICBleHRlbnQgPSBzcXJ0ZjIobWF4ZjIoMWUtNCwgaGFsZl9leHRlbmQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgKi9cclxuXHJcbiAgICAgICAgLy8gQ29tcHV0aW5nIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIDJEIEdhdXNzaWFuIGFuZCBpdHMgY2VudGVyXHJcbiAgICAgICAgLy8gVGhlIGNlbnRlciBvZiB0aGUgYm91bmRpbmcgYm94IGlzIHVzZWQgdG8gY3JlYXRlIGEgbG93IHBhc3MgZmlsdGVyLlxyXG4gICAgICAgIC8vIFRoaXMgY29kZSBpcyBiYXNlZCBvZmYgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBhbmQgY3JlYXRlcyBhbiBBQUJCIGFsaWduZWRcclxuICAgICAgICAvLyB3aXRoIHRoZSBzY3JlZW4gZm9yIHRoZSBxdWFkIHRvIGJlIHJlbmRlcmVkLlxyXG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZVF1YWRHZW5lcmF0aW9uID0gYFxyXG4gICAgICAgICAgICB2ZWMzIFQwID0gdmVjMyhUWzBdWzBdLCBUWzBdWzFdLCBUWzBdWzJdKTtcclxuICAgICAgICAgICAgdmVjMyBUMSA9IHZlYzMoVFsxXVswXSwgVFsxXVsxXSwgVFsxXVsyXSk7XHJcbiAgICAgICAgICAgIHZlYzMgVDMgPSB2ZWMzKFRbMl1bMF0sIFRbMl1bMV0sIFRbMl1bMl0pO1xyXG5cclxuICAgICAgICAgICAgdmVjMyB0ZW1wUG9pbnQgPSB2ZWMzKDEuMCwgMS4wLCAtMS4wKTtcclxuICAgICAgICAgICAgZmxvYXQgZGlzdGFuY2UgPSAoVDMueCAqIFQzLnggKiB0ZW1wUG9pbnQueCkgKyAoVDMueSAqIFQzLnkgKiB0ZW1wUG9pbnQueSkgKyAoVDMueiAqIFQzLnogKiB0ZW1wUG9pbnQueik7XHJcbiAgICAgICAgICAgIHZlYzMgZiA9ICgxLjAgLyBkaXN0YW5jZSkgKiB0ZW1wUG9pbnQ7XHJcbiAgICAgICAgICAgIGlmIChhYnMoZGlzdGFuY2UpIDwgMC4wMDAwMSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZmxvYXQgcG9pbnRJbWFnZVggPSAoVDAueCAqIFQzLnggKiBmLngpICsgKFQwLnkgKiBUMy55ICogZi55KSArIChUMC56ICogVDMueiAqIGYueik7XHJcbiAgICAgICAgICAgIGZsb2F0IHBvaW50SW1hZ2VZID0gKFQxLnggKiBUMy54ICogZi54KSArIChUMS55ICogVDMueSAqIGYueSkgKyAoVDEueiAqIFQzLnogKiBmLnopO1xyXG4gICAgICAgICAgICB2ZWMyIHBvaW50SW1hZ2UgPSB2ZWMyKHBvaW50SW1hZ2VYLCBwb2ludEltYWdlWSk7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCB0ZW1wWCA9IChUMC54ICogVDAueCAqIGYueCkgKyAoVDAueSAqIFQwLnkgKiBmLnkpICsgKFQwLnogKiBUMC56ICogZi56KTtcclxuICAgICAgICAgICAgZmxvYXQgdGVtcFkgPSAoVDEueCAqIFQxLnggKiBmLngpICsgKFQxLnkgKiBUMS55ICogZi55KSArIChUMS56ICogVDEueiAqIGYueik7XHJcbiAgICAgICAgICAgIHZlYzIgdGVtcCA9IHZlYzIodGVtcFgsIHRlbXBZKTtcclxuXHJcbiAgICAgICAgICAgIHZlYzIgaGFsZkV4dGVuZCA9IHBvaW50SW1hZ2UgKiBwb2ludEltYWdlIC0gdGVtcDtcclxuICAgICAgICAgICAgdmVjMiBleHRlbnQgPSBzcXJ0KG1heCh2ZWMyKDAuMDAwMSksIGhhbGZFeHRlbmQpKTtcclxuICAgICAgICAgICAgZmxvYXQgcmFkaXVzID0gbWF4KGV4dGVudC54LCBleHRlbnQueSk7XHJcblxyXG4gICAgICAgICAgICB2ZWMyIG5kY09mZnNldCA9ICgocG9zaXRpb24ueHkgKiByYWRpdXMgKiAzLjApICogYmFzaXNWaWV3cG9ydCAqIDIuMCk7XHJcblxyXG4gICAgICAgICAgICB2ZWM0IHF1YWRQb3MgPSB2ZWM0KG5kY0NlbnRlci54eSArIG5kY09mZnNldCwgbmRjQ2VudGVyLnosIDEuMCk7XHJcbiAgICAgICAgICAgIGdsX1Bvc2l0aW9uID0gcXVhZFBvcztcclxuXHJcbiAgICAgICAgICAgIHZUID0gVDtcclxuICAgICAgICAgICAgdlF1YWRDZW50ZXIgPSBwb2ludEltYWdlO1xyXG4gICAgICAgICAgICB2RnJhZ0Nvb3JkID0gKHF1YWRQb3MueHkgKiAwLjUgKyAwLjUpICogdmlld3BvcnQ7XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgY29uc3QgdXNlUmVmSW1wbGVtZW50YXRpb24gPSBmYWxzZTtcclxuICAgICAgICBpZiAodXNlUmVmSW1wbGVtZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdmVydGV4U2hhZGVyU291cmNlICs9IHJlZmVyZW5jZVF1YWRHZW5lcmF0aW9uO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHF1YWQgdGhhdCBpcyBhbGlnbmVkIHdpdGggdGhlIGVpZ2VuIHZlY3RvcnMgb2YgdGhlIHByb2plY3RlZCBnYXVzc2lhbiBmb3IgcmVuZGVyaW5nLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgZGlmZmVyZW50IGFwcHJvYWNoIHRoYW4gdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiwgc2ltaWxhciB0byBob3cgdGhlIHJlbmRlcmluZyBvZlxyXG4gICAgICAgICAgICAvLyAzRCBnYXVzc2lhbnMgaW4gdGhpcyB2aWV3ZXIgZGlmZmVycyBmcm9tIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24uIElmIHRoZSBxdWFkIGlzIHRvbyBzbWFsbFxyXG4gICAgICAgICAgICAvLyAoc21hbGxlciB0aGFuIGEgcGl4ZWwpLCB0aGVuIHJldmVydCB0byB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uLlxyXG4gICAgICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYFxyXG5cclxuICAgICAgICAgICAgICAgIG1hdDQgc3BsYXQyV29ybGQ0ID0gbWF0NCh2ZWM0KExbMF0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0KExbMV0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0KExbMl0sIDAuMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWM0KHNwbGF0Q2VudGVyLngsIHNwbGF0Q2VudGVyLnksIHNwbGF0Q2VudGVyLnosIDEuMCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hdDQgVHQgPSB0cmFuc3Bvc2UodHJhbnNwb3NlKHNwbGF0MldvcmxkNCkgKiB3b3JsZDJuZGMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzQgdGVtcFBvaW50MSA9IFR0ICogdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgdGVtcFBvaW50MSAvPSB0ZW1wUG9pbnQxLnc7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjNCB0ZW1wUG9pbnQyID0gVHQgKiB2ZWM0KDAuMCwgMS4wLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUG9pbnQyIC89IHRlbXBQb2ludDIudztcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWM0IGNlbnRlciA9IFR0ICogdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyIC89IGNlbnRlci53O1xyXG5cclxuICAgICAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IxID0gdGVtcFBvaW50MS54eSAtIGNlbnRlci54eTtcclxuICAgICAgICAgICAgICAgIHZlYzIgYmFzaXNWZWN0b3IyID0gdGVtcFBvaW50Mi54eSAtIGNlbnRlci54eTtcclxuXHJcbiAgICAgICAgICAgICAgICB2ZWMyIGJhc2lzVmVjdG9yMVNjcmVlbiA9IGJhc2lzVmVjdG9yMSAqIDAuNSAqIHZpZXdwb3J0O1xyXG4gICAgICAgICAgICAgICAgdmVjMiBiYXNpc1ZlY3RvcjJTY3JlZW4gPSBiYXNpc1ZlY3RvcjIgKiAwLjUgKiB2aWV3cG9ydDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmbG9hdCBtaW5QaXggPSAxLjtcclxuICAgICAgICAgICAgICAgIGlmIChsZW5ndGgoYmFzaXNWZWN0b3IxU2NyZWVuKSA8IG1pblBpeCB8fCBsZW5ndGgoYmFzaXNWZWN0b3IyU2NyZWVuKSA8IG1pblBpeCkge1xyXG4gICAgICAgICAgICAgICAgICAgICR7cmVmZXJlbmNlUXVhZEdlbmVyYXRpb259XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZlYzIgbmRjT2Zmc2V0ID0gdmVjMihwb3NpdGlvbi54ICogYmFzaXNWZWN0b3IxICsgcG9zaXRpb24ueSAqIGJhc2lzVmVjdG9yMikgKiAzLjAgKiBpbnZlcnNlRm9jYWxBZGp1c3RtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHZlYzQgcXVhZFBvcyA9IHZlYzQobmRjQ2VudGVyLnh5ICsgbmRjT2Zmc2V0LCBuZGNDZW50ZXIueiwgMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICBnbF9Qb3NpdGlvbiA9IHF1YWRQb3M7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZUID0gVDtcclxuICAgICAgICAgICAgICAgICAgICB2UXVhZENlbnRlciA9IGNlbnRlci54eTtcclxuICAgICAgICAgICAgICAgICAgICB2RnJhZ0Nvb3JkID0gKHF1YWRQb3MueHkgKiAwLjUgKyAwLjUpICogdmlld3BvcnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gU3BsYXRNYXRlcmlhbC5nZXRWZXJ0ZXhTaGFkZXJGYWRlSW4oKTtcclxuICAgICAgICB2ZXJ0ZXhTaGFkZXJTb3VyY2UgKz0gYH1gO1xyXG5cclxuICAgICAgICByZXR1cm4gdmVydGV4U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBidWlsZEZyYWdtZW50U2hhZGVyKCkge1xyXG5cclxuICAgICAgICAvLyBPcmlnaW5hbCBDVURBIGNvZGUgZm9yIHNwbGF0IGludGVyc2VjdGlvbiwgZm9yIHJlZmVyZW5jZVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0MiB4eSA9IGNvbGxlY3RlZF94eVtqXTtcclxuICAgICAgICAgICAgY29uc3QgZmxvYXQzIFR1ID0gY29sbGVjdGVkX1R1W2pdO1xyXG4gICAgICAgICAgICBjb25zdCBmbG9hdDMgVHYgPSBjb2xsZWN0ZWRfVHZbal07XHJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0MyBUdyA9IGNvbGxlY3RlZF9Ud1tqXTtcclxuICAgICAgICAgICAgZmxvYXQzIGsgPSBwaXgueCAqIFR3IC0gVHU7XHJcbiAgICAgICAgICAgIGZsb2F0MyBsID0gcGl4LnkgKiBUdyAtIFR2O1xyXG4gICAgICAgICAgICBmbG9hdDMgcCA9IGNyb3NzKGssIGwpO1xyXG4gICAgICAgICAgICBpZiAocC56ID09IDAuMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGZsb2F0MiBzID0ge3AueCAvIHAueiwgcC55IC8gcC56fTtcclxuICAgICAgICAgICAgZmxvYXQgcmhvM2QgPSAocy54ICogcy54ICsgcy55ICogcy55KTtcclxuICAgICAgICAgICAgZmxvYXQyIGQgPSB7eHkueCAtIHBpeGYueCwgeHkueSAtIHBpeGYueX07XHJcbiAgICAgICAgICAgIGZsb2F0IHJobzJkID0gRmlsdGVySW52U3F1YXJlICogKGQueCAqIGQueCArIGQueSAqIGQueSk7XHJcblxyXG4gICAgICAgICAgICAvLyBjb21wdXRlIGludGVyc2VjdGlvbiBhbmQgZGVwdGhcclxuICAgICAgICAgICAgZmxvYXQgcmhvID0gbWluKHJobzNkLCByaG8yZCk7XHJcbiAgICAgICAgICAgIGZsb2F0IGRlcHRoID0gKHJobzNkIDw9IHJobzJkKSA/IChzLnggKiBUdy54ICsgcy55ICogVHcueSkgKyBUdy56IDogVHcuejtcclxuICAgICAgICAgICAgaWYgKGRlcHRoIDwgbmVhcl9uKSBjb250aW51ZTtcclxuICAgICAgICAgICAgZmxvYXQ0IG5vcl9vID0gY29sbGVjdGVkX25vcm1hbF9vcGFjaXR5W2pdO1xyXG4gICAgICAgICAgICBmbG9hdCBub3JtYWxbM10gPSB7bm9yX28ueCwgbm9yX28ueSwgbm9yX28uen07XHJcbiAgICAgICAgICAgIGZsb2F0IG9wYSA9IG5vcl9vLnc7XHJcblxyXG4gICAgICAgICAgICBmbG9hdCBwb3dlciA9IC0wLjVmICogcmhvO1xyXG4gICAgICAgICAgICBpZiAocG93ZXIgPiAwLjBmKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAvLyBFcS4gKDIpIGZyb20gM0QgR2F1c3NpYW4gc3BsYXR0aW5nIHBhcGVyLlxyXG4gICAgICAgICAgICAvLyBPYnRhaW4gYWxwaGEgYnkgbXVsdGlwbHlpbmcgd2l0aCBHYXVzc2lhbiBvcGFjaXR5XHJcbiAgICAgICAgICAgIC8vIGFuZCBpdHMgZXhwb25lbnRpYWwgZmFsbG9mZiBmcm9tIG1lYW4uXHJcbiAgICAgICAgICAgIC8vIEF2b2lkIG51bWVyaWNhbCBpbnN0YWJpbGl0aWVzIChzZWUgcGFwZXIgYXBwZW5kaXgpLlxyXG4gICAgICAgICAgICBmbG9hdCBhbHBoYSA9IG1pbigwLjk5Ziwgb3BhICogZXhwKHBvd2VyKSk7XHJcbiAgICAgICAgICAgIGlmIChhbHBoYSA8IDEuMGYgLyAyNTUuMGYpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgZmxvYXQgdGVzdF9UID0gVCAqICgxIC0gYWxwaGEpO1xyXG4gICAgICAgICAgICBpZiAodGVzdF9UIDwgMC4wMDAxZilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmxvYXQgdyA9IGFscGhhICogVDtcclxuICAgICAgICAqL1xyXG4gICAgICAgIGxldCBmcmFnbWVudFNoYWRlclNvdXJjZSA9IGBcclxuICAgICAgICAgICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xyXG4gICAgICAgICAgICAjaW5jbHVkZSA8Y29tbW9uPlxyXG5cclxuICAgICAgICAgICAgdW5pZm9ybSB2ZWMzIGRlYnVnQ29sb3I7XHJcblxyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzQgdkNvbG9yO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdlV2O1xyXG4gICAgICAgICAgICB2YXJ5aW5nIHZlYzIgdlBvc2l0aW9uO1xyXG4gICAgICAgICAgICB2YXJ5aW5nIG1hdDMgdlQ7XHJcbiAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2UXVhZENlbnRlcjtcclxuICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZGcmFnQ29vcmQ7XHJcblxyXG4gICAgICAgICAgICB2b2lkIG1haW4gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0IEZpbHRlckludlNxdWFyZSA9IDIuMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0IG5lYXJfbiA9IDAuMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0IFQgPSAxLjA7XHJcblxyXG4gICAgICAgICAgICAgICAgdmVjMiB4eSA9IHZRdWFkQ2VudGVyO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBUdSA9IHZUWzBdO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBUdiA9IHZUWzFdO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBUdyA9IHZUWzJdO1xyXG4gICAgICAgICAgICAgICAgdmVjMyBrID0gdkZyYWdDb29yZC54ICogVHcgLSBUdTtcclxuICAgICAgICAgICAgICAgIHZlYzMgbCA9IHZGcmFnQ29vcmQueSAqIFR3IC0gVHY7XHJcbiAgICAgICAgICAgICAgICB2ZWMzIHAgPSBjcm9zcyhrLCBsKTtcclxuICAgICAgICAgICAgICAgIGlmIChwLnogPT0gMC4wKSBkaXNjYXJkO1xyXG4gICAgICAgICAgICAgICAgdmVjMiBzID0gdmVjMihwLnggLyBwLnosIHAueSAvIHAueik7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByaG8zZCA9IChzLnggKiBzLnggKyBzLnkgKiBzLnkpOyBcclxuICAgICAgICAgICAgICAgIHZlYzIgZCA9IHZlYzIoeHkueCAtIHZGcmFnQ29vcmQueCwgeHkueSAtIHZGcmFnQ29vcmQueSk7XHJcbiAgICAgICAgICAgICAgICBmbG9hdCByaG8yZCA9IEZpbHRlckludlNxdWFyZSAqIChkLnggKiBkLnggKyBkLnkgKiBkLnkpOyBcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb21wdXRlIGludGVyc2VjdGlvbiBhbmQgZGVwdGhcclxuICAgICAgICAgICAgICAgIGZsb2F0IHJobyA9IG1pbihyaG8zZCwgcmhvMmQpO1xyXG4gICAgICAgICAgICAgICAgZmxvYXQgZGVwdGggPSAocmhvM2QgPD0gcmhvMmQpID8gKHMueCAqIFR3LnggKyBzLnkgKiBUdy55KSArIFR3LnogOiBUdy56OyBcclxuICAgICAgICAgICAgICAgIGlmIChkZXB0aCA8IG5lYXJfbikgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIC8vICB2ZWM0IG5vcl9vID0gY29sbGVjdGVkX25vcm1hbF9vcGFjaXR5W2pdO1xyXG4gICAgICAgICAgICAgICAgLy8gIGZsb2F0IG5vcm1hbFszXSA9IHtub3Jfby54LCBub3Jfby55LCBub3Jfby56fTtcclxuICAgICAgICAgICAgICAgIGZsb2F0IG9wYSA9IHZDb2xvci5hO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHBvd2VyID0gLTAuNWYgKiByaG87XHJcbiAgICAgICAgICAgICAgICBpZiAocG93ZXIgPiAwLjBmKSBkaXNjYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEVxLiAoMikgZnJvbSAzRCBHYXVzc2lhbiBzcGxhdHRpbmcgcGFwZXIuXHJcbiAgICAgICAgICAgICAgICAvLyBPYnRhaW4gYWxwaGEgYnkgbXVsdGlwbHlpbmcgd2l0aCBHYXVzc2lhbiBvcGFjaXR5XHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgaXRzIGV4cG9uZW50aWFsIGZhbGxvZmYgZnJvbSBtZWFuLlxyXG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgbnVtZXJpY2FsIGluc3RhYmlsaXRpZXMgKHNlZSBwYXBlciBhcHBlbmRpeCkuIFxyXG4gICAgICAgICAgICAgICAgZmxvYXQgYWxwaGEgPSBtaW4oMC45OWYsIG9wYSAqIGV4cChwb3dlcikpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFscGhhIDwgMS4wZiAvIDI1NS4wZikgZGlzY2FyZDtcclxuICAgICAgICAgICAgICAgIGZsb2F0IHRlc3RfVCA9IFQgKiAoMS4wIC0gYWxwaGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlc3RfVCA8IDAuMDAwMSlkaXNjYXJkO1xyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0IHcgPSBhbHBoYSAqIFQ7XHJcbiAgICAgICAgICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZDb2xvci5yZ2IsIHcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50U2hhZGVyU291cmNlO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBTcGxhdE1lc2hcclxuICogXHJcbiAqIEJhc2VkIG9uIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIRUFWSUxZIE1PRElGSUVEIGZvciBGTEFNRSBhdmF0YXIgc3VwcG9ydDpcclxuICogLSBBZGRlZCBGTEFNRSBib25lIHRleHR1cmUgaGFuZGxpbmdcclxuICogLSBBZGRlZCBleHByZXNzaW9uIGJsZW5kc2hhcGUgc3VwcG9ydFxyXG4gKiAtIEV4dGVuZGVkIHdpdGggc2tpbm5pbmcgZGF0YSBtYW5hZ2VtZW50XHJcbiAqIC0gQWRkaXRpb25hbCB+ODAwIGxpbmVzIG9mIEZMQU1FLXNwZWNpZmljIGNvZGVcclxuICovXHJcblxyXG5pbXBvcnQgeyBCb3gzLCBCdWZmZXJHZW9tZXRyeSwgRGF0YVRleHR1cmUsIEZsb2F0VHlwZSwgSGFsZkZsb2F0VHlwZSwgTWF0cml4NCwgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIFF1YXRlcm5pb24sIFJHQkFGb3JtYXQsIFJHQkFJbnRlZ2VyRm9ybWF0LCBSR0Zvcm1hdCwgUkdJbnRlZ2VyRm9ybWF0LCBSZWRGb3JtYXQsIFJlZEludGVnZXJGb3JtYXQsIFJHQkludGVnZXJGb3JtYXQsIFNjZW5lLCBVbnNpZ25lZEJ5dGVUeXBlLCBVbnNpZ25lZEludFR5cGUsIFZlY3RvcjIsIFZlY3RvcjMsIFZlY3RvcjQsIFdlYkdMUmVuZGVyZXIgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0UmVuZGVyTW9kZSB9IGZyb20gJy4uL2VudW1zL1NwbGF0UmVuZGVyTW9kZS5qcyc7XHJcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSAnLi4vZW51bXMvTG9nTGV2ZWwuanMnO1xyXG5pbXBvcnQgeyBTY2VuZVJldmVhbE1vZGUgfSBmcm9tICcuLi9lbnVtcy9TY2VuZVJldmVhbE1vZGUuanMnO1xyXG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi9lbnVtcy9FbmdpbmVDb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBTcGxhdFNjZW5lIH0gZnJvbSAnLi9TcGxhdFNjZW5lLmpzJztcclxuaW1wb3J0IHsgU3BsYXRHZW9tZXRyeSB9IGZyb20gJy4vU3BsYXRHZW9tZXRyeS5qcyc7XHJcbmltcG9ydCB7IFNwbGF0VHJlZSB9IGZyb20gJy4vU3BsYXRUcmVlLmpzJztcclxuaW1wb3J0IHsgU3BsYXRNYXRlcmlhbDNEIH0gZnJvbSAnLi4vbWF0ZXJpYWxzL1NwbGF0TWF0ZXJpYWwzRC5qcyc7XHJcbmltcG9ydCB7IFNwbGF0TWF0ZXJpYWwyRCB9IGZyb20gJy4uL21hdGVyaWFscy9TcGxhdE1hdGVyaWFsMkQuanMnO1xyXG5pbXBvcnQgeyBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSwgdWludEVuY29kZWRGbG9hdCwgcmdiYUFycmF5VG9JbnRlZ2VyLCBjbGFtcCB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdTcGxhdE1lc2gnKTtcclxuXHJcbi8vIER1bW15IGdlb21ldHJ5IGFuZCBtYXRlcmlhbCBmb3IgaW5pdGlhbCBNZXNoIGNvbnN0cnVjdGlvblxyXG5jb25zdCBkdW1teUdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XHJcbmNvbnN0IGR1bW15TWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoKTtcclxuXHJcbi8qKlxyXG4gKiBXZWJHTCBFeHRlbnNpb25zIGhlbHBlciAoZnJvbSBUaHJlZS5qcyBpbnRlcm5hbHMpXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJHTEV4dGVuc2lvbnMkMShnbCkge1xyXG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IHt9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldEV4dGVuc2lvbihuYW1lKSB7XHJcbiAgICAgICAgaWYgKGV4dGVuc2lvbnNbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZW5zaW9uc1tuYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBleHRlbnNpb247XHJcbiAgICAgICAgc3dpdGNoIChuYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1dFQkdMX2RlcHRoX3RleHR1cmUnOlxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJHTF9kZXB0aF90ZXh0dXJlJykgfHwgZ2wuZ2V0RXh0ZW5zaW9uKCdNT1pfV0VCR0xfZGVwdGhfdGV4dHVyZScpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9XRUJHTF9kZXB0aF90ZXh0dXJlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJzpcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGdsLmdldEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignTU9aX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRFeHRlbnNpb24oJ1dFQktJVF9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0Yyc6XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb24gPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignTU9aX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJzpcclxuICAgICAgICAgICAgICAgIGV4dGVuc2lvbiA9IGdsLmdldEV4dGVuc2lvbignV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldEV4dGVuc2lvbignV0VCS0lUX1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBleHRlbnNpb24gPSBnbC5nZXRFeHRlbnNpb24obmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHRlbnNpb25zW25hbWVdID0gZXh0ZW5zaW9uO1xyXG4gICAgICAgIHJldHVybiBleHRlbnNpb247XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoYXM6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEV4dGVuc2lvbihuYW1lKSAhPT0gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKGNhcGFiaWxpdGllcykge1xyXG4gICAgICAgICAgICBpZiAoY2FwYWJpbGl0aWVzLmlzV2ViR0wyKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ0VYVF9jb2xvcl9idWZmZXJfZmxvYXQnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignV0VCR0xfY2xpcF9jdWxsX2Rpc3RhbmNlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnZXRFeHRlbnNpb24oJ1dFQkdMX2RlcHRoX3RleHR1cmUnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfZmxvYXQnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnKTtcclxuICAgICAgICAgICAgICAgIGdldEV4dGVuc2lvbignT0VTX2VsZW1lbnRfaW5kZXhfdWludCcpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO1xyXG4gICAgICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdBTkdMRV9pbnN0YW5jZWRfYXJyYXlzJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKTtcclxuICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXQnKTtcclxuICAgICAgICAgICAgZ2V0RXh0ZW5zaW9uKCdXRUJHTF9tdWx0aXNhbXBsZWRfcmVuZGVyX3RvX3RleHR1cmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldDogZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb24gPSBnZXRFeHRlbnNpb24obmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUSFJFRS5XZWJHTFJlbmRlcmVyOiAnICsgbmFtZSArICcgZXh0ZW5zaW9uIG5vdCBzdXBwb3J0ZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogV2ViR0wgQ2FwYWJpbGl0aWVzIGhlbHBlciAoZnJvbSBUaHJlZS5qcyBpbnRlcm5hbHMpXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJHTENhcGFiaWxpdGllcyQxKGdsLCBleHRlbnNpb25zLCBwYXJhbWV0ZXJzKSB7XHJcbiAgICBsZXQgbWF4QW5pc290cm9weTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXhBbmlzb3Ryb3B5KCkge1xyXG4gICAgICAgIGlmIChtYXhBbmlzb3Ryb3B5ICE9PSB1bmRlZmluZWQpIHJldHVybiBtYXhBbmlzb3Ryb3B5O1xyXG4gICAgICAgIGlmIChleHRlbnNpb25zLmhhcygnRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJykgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycpO1xyXG4gICAgICAgICAgICBtYXhBbmlzb3Ryb3B5ID0gZ2wuZ2V0UGFyYW1ldGVyKGV4dGVuc2lvbi5NQVhfVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG1heEFuaXNvdHJvcHkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWF4QW5pc290cm9weTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKSB7XHJcbiAgICAgICAgaWYgKHByZWNpc2lvbiA9PT0gJ2hpZ2hwJykge1xyXG4gICAgICAgICAgICBpZiAoZ2wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KGdsLlZFUlRFWF9TSEFERVIsIGdsLkhJR0hfRkxPQVQpLnByZWNpc2lvbiA+IDAgJiZcclxuICAgICAgICAgICAgICAgIGdsLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChnbC5GUkFHTUVOVF9TSEFERVIsIGdsLkhJR0hfRkxPQVQpLnByZWNpc2lvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaGlnaHAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZWNpc2lvbiA9ICdtZWRpdW1wJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByZWNpc2lvbiA9PT0gJ21lZGl1bXAnKSB7XHJcbiAgICAgICAgICAgIGlmIChnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuVkVSVEVYX1NIQURFUiwgZ2wuTUVESVVNX0ZMT0FUKS5wcmVjaXNpb24gPiAwICYmXHJcbiAgICAgICAgICAgICAgICBnbC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoZ2wuRlJBR01FTlRfU0hBREVSLCBnbC5NRURJVU1fRkxPQVQpLnByZWNpc2lvbiA+IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnbWVkaXVtcCc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdsb3dwJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpc1dlYkdMMiA9IHR5cGVvZiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ICE9PSAndW5kZWZpbmVkJyAmJiBnbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnV2ViR0wyUmVuZGVyaW5nQ29udGV4dCc7XHJcblxyXG4gICAgbGV0IHByZWNpc2lvbiA9IHBhcmFtZXRlcnMucHJlY2lzaW9uICE9PSB1bmRlZmluZWQgPyBwYXJhbWV0ZXJzLnByZWNpc2lvbiA6ICdoaWdocCc7XHJcbiAgICBjb25zdCBtYXhQcmVjaXNpb24gPSBnZXRNYXhQcmVjaXNpb24ocHJlY2lzaW9uKTtcclxuXHJcbiAgICBpZiAobWF4UHJlY2lzaW9uICE9PSBwcmVjaXNpb24pIHtcclxuICAgICAgICBsb2dnZXIud2FybignVEhSRUUuV2ViR0xSZW5kZXJlcjonLCBwcmVjaXNpb24sICdub3Qgc3VwcG9ydGVkLCB1c2luZycsIG1heFByZWNpc2lvbiwgJ2luc3RlYWQuJyk7XHJcbiAgICAgICAgcHJlY2lzaW9uID0gbWF4UHJlY2lzaW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRyYXdCdWZmZXJzID0gaXNXZWJHTDIgfHwgZXh0ZW5zaW9ucy5oYXMoJ1dFQkdMX2RyYXdfYnVmZmVycycpO1xyXG4gICAgY29uc3QgbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciA9IHBhcmFtZXRlcnMubG9nYXJpdGhtaWNEZXB0aEJ1ZmZlciA9PT0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBtYXhUZXh0dXJlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUyk7XHJcbiAgICBjb25zdCBtYXhWZXJ0ZXhUZXh0dXJlcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX1RFWFRVUkVfSU1BR0VfVU5JVFMpO1xyXG4gICAgY29uc3QgbWF4VGV4dHVyZVNpemUgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX1RFWFRVUkVfU0laRSk7XHJcbiAgICBjb25zdCBtYXhDdWJlbWFwU2l6ZSA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFKTtcclxuXHJcbiAgICBjb25zdCBtYXhBdHRyaWJ1dGVzID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9WRVJURVhfQVRUUklCUyk7XHJcbiAgICBjb25zdCBtYXhWZXJ0ZXhVbmlmb3JtcyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUyk7XHJcbiAgICBjb25zdCBtYXhWYXJ5aW5ncyA9IGdsLmdldFBhcmFtZXRlcihnbC5NQVhfVkFSWUlOR19WRUNUT1JTKTtcclxuICAgIGNvbnN0IG1heEZyYWdtZW50VW5pZm9ybXMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuTUFYX0ZSQUdNRU5UX1VOSUZPUk1fVkVDVE9SUyk7XHJcblxyXG4gICAgY29uc3QgdmVydGV4VGV4dHVyZXMgPSBtYXhWZXJ0ZXhUZXh0dXJlcyA+IDA7XHJcbiAgICBjb25zdCBmbG9hdEZyYWdtZW50VGV4dHVyZXMgPSBpc1dlYkdMMiB8fCBleHRlbnNpb25zLmhhcygnT0VTX3RleHR1cmVfZmxvYXQnKTtcclxuICAgIGNvbnN0IGZsb2F0VmVydGV4VGV4dHVyZXMgPSB2ZXJ0ZXhUZXh0dXJlcyAmJiBmbG9hdEZyYWdtZW50VGV4dHVyZXM7XHJcblxyXG4gICAgY29uc3QgbWF4U2FtcGxlcyA9IGlzV2ViR0wyID8gZ2wuZ2V0UGFyYW1ldGVyKGdsLk1BWF9TQU1QTEVTKSA6IDA7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpc1dlYkdMMjogaXNXZWJHTDIsXHJcbiAgICAgICAgZHJhd0J1ZmZlcnM6IGRyYXdCdWZmZXJzLFxyXG4gICAgICAgIGdldE1heEFuaXNvdHJvcHk6IGdldE1heEFuaXNvdHJvcHksXHJcbiAgICAgICAgZ2V0TWF4UHJlY2lzaW9uOiBnZXRNYXhQcmVjaXNpb24sXHJcbiAgICAgICAgcHJlY2lzaW9uOiBwcmVjaXNpb24sXHJcbiAgICAgICAgbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcjogbG9nYXJpdGhtaWNEZXB0aEJ1ZmZlcixcclxuICAgICAgICBtYXhUZXh0dXJlczogbWF4VGV4dHVyZXMsXHJcbiAgICAgICAgbWF4VmVydGV4VGV4dHVyZXM6IG1heFZlcnRleFRleHR1cmVzLFxyXG4gICAgICAgIG1heFRleHR1cmVTaXplOiBtYXhUZXh0dXJlU2l6ZSxcclxuICAgICAgICBtYXhDdWJlbWFwU2l6ZTogbWF4Q3ViZW1hcFNpemUsXHJcbiAgICAgICAgbWF4QXR0cmlidXRlczogbWF4QXR0cmlidXRlcyxcclxuICAgICAgICBtYXhWZXJ0ZXhVbmlmb3JtczogbWF4VmVydGV4VW5pZm9ybXMsXHJcbiAgICAgICAgbWF4VmFyeWluZ3M6IG1heFZhcnlpbmdzLFxyXG4gICAgICAgIG1heEZyYWdtZW50VW5pZm9ybXM6IG1heEZyYWdtZW50VW5pZm9ybXMsXHJcbiAgICAgICAgdmVydGV4VGV4dHVyZXM6IHZlcnRleFRleHR1cmVzLFxyXG4gICAgICAgIGZsb2F0RnJhZ21lbnRUZXh0dXJlczogZmxvYXRGcmFnbWVudFRleHR1cmVzLFxyXG4gICAgICAgIGZsb2F0VmVydGV4VGV4dHVyZXM6IGZsb2F0VmVydGV4VGV4dHVyZXMsXHJcbiAgICAgICAgbWF4U2FtcGxlczogbWF4U2FtcGxlc1xyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFdlYkdMIFV0aWxzIGhlbHBlciAoZnJvbSBUaHJlZS5qcyBpbnRlcm5hbHMpXHJcbiAqL1xyXG5mdW5jdGlvbiBXZWJHTFV0aWxzJDEoZ2wsIGV4dGVuc2lvbnMsIGNhcGFiaWxpdGllcykge1xyXG4gICAgY29uc3QgaXNXZWJHTDIgPSBjYXBhYmlsaXRpZXMuaXNXZWJHTDI7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udmVydChwLCBjb2xvclNwYWNlKSB7XHJcbiAgICAgICAgbGV0IGV4dGVuc2lvbjtcclxuXHJcbiAgICAgICAgaWYgKHAgPT09IFVuc2lnbmVkQnl0ZVR5cGUpIHJldHVybiBnbC5VTlNJR05FRF9CWVRFO1xyXG4gICAgICAgIGlmIChwID09PSAxMDE3KSByZXR1cm4gZ2wuVU5TSUdORURfU0hPUlRfNF80XzRfNDtcclxuICAgICAgICBpZiAocCA9PT0gMTAxOCkgcmV0dXJuIGdsLlVOU0lHTkVEX1NIT1JUXzVfNV81XzE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTApIHJldHVybiBnbC5CWVRFO1xyXG4gICAgICAgIGlmIChwID09PSAxMDExKSByZXR1cm4gZ2wuU0hPUlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMTIpIHJldHVybiBnbC5VTlNJR05FRF9TSE9SVDtcclxuICAgICAgICBpZiAocCA9PT0gMTAxMykgcmV0dXJuIGdsLklOVDtcclxuICAgICAgICBpZiAocCA9PT0gMTAxNCkgcmV0dXJuIGdsLlVOU0lHTkVEX0lOVDtcclxuICAgICAgICBpZiAocCA9PT0gRmxvYXRUeXBlKSByZXR1cm4gZ2wuRkxPQVQ7XHJcblxyXG4gICAgICAgIGlmIChwID09PSBIYWxmRmxvYXRUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChpc1dlYkdMMikgcmV0dXJuIGdsLkhBTEZfRkxPQVQ7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbiA9IGV4dGVuc2lvbnMuZ2V0KCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0Jyk7XHJcbiAgICAgICAgICAgIGlmIChleHRlbnNpb24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBleHRlbnNpb24uSEFMRl9GTE9BVF9PRVM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjEpIHJldHVybiBnbC5BTFBIQTtcclxuICAgICAgICBpZiAocCA9PT0gMTAyMikgcmV0dXJuIGdsLlJHQjtcclxuICAgICAgICBpZiAocCA9PT0gUkdCQUZvcm1hdCkgcmV0dXJuIGdsLlJHQkE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjQpIHJldHVybiBnbC5MVU1JTkFOQ0U7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjUpIHJldHVybiBnbC5MVU1JTkFOQ0VfQUxQSEE7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjYpIHJldHVybiBnbC5ERVBUSF9DT01QT05FTlQ7XHJcbiAgICAgICAgaWYgKHAgPT09IDEwMjcpIHJldHVybiBnbC5ERVBUSF9TVEVOQ0lMO1xyXG5cclxuICAgICAgICAvLyBXZWJHTDIgZm9ybWF0c1xyXG4gICAgICAgIGlmIChwID09PSBSZWRGb3JtYXQpIHJldHVybiBnbC5SRUQ7XHJcbiAgICAgICAgaWYgKHAgPT09IFJlZEludGVnZXJGb3JtYXQpIHJldHVybiBnbC5SRURfSU5URUdFUjtcclxuICAgICAgICBpZiAocCA9PT0gUkdGb3JtYXQpIHJldHVybiBnbC5SRztcclxuICAgICAgICBpZiAocCA9PT0gUkdJbnRlZ2VyRm9ybWF0KSByZXR1cm4gZ2wuUkdfSU5URUdFUjtcclxuICAgICAgICBpZiAocCA9PT0gUkdCSW50ZWdlckZvcm1hdCkgcmV0dXJuIGdsLlJHQl9JTlRFR0VSO1xyXG4gICAgICAgIGlmIChwID09PSBSR0JBSW50ZWdlckZvcm1hdCkgcmV0dXJuIGdsLlJHQkFfSU5URUdFUjtcclxuXHJcbiAgICAgICAgLy8gUzNUQ1xyXG4gICAgICAgIGlmIChwID09PSAzMzc3NiB8fCBwID09PSAzMzc3NyB8fCBwID09PSAzMzc3OCB8fCBwID09PSAzMzc3OSkge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3MzdGMnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDMzNzc2KSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzM3NzcpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUMV9FWFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzM3NzgpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUM19FWFQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzM3NzkpIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUFZSVENcclxuICAgICAgICBpZiAocCA9PT0gMzU4NDAgfHwgcCA9PT0gMzU4NDEgfHwgcCA9PT0gMzU4NDIgfHwgcCA9PT0gMzU4NDMpIHtcclxuICAgICAgICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9ucy5nZXQoJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocCA9PT0gMzU4NDApIHJldHVybiBleHRlbnNpb24uQ09NUFJFU1NFRF9SR0JfUFZSVENfNEJQUFYxX0lNRztcclxuICAgICAgICAgICAgICAgIGlmIChwID09PSAzNTg0MSkgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9QVlJUQ18yQlBQVjFfSU1HO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDM1ODQyKSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HO1xyXG4gICAgICAgICAgICAgICAgaWYgKHAgPT09IDM1ODQzKSByZXR1cm4gZXh0ZW5zaW9uLkNPTVBSRVNTRURfUkdCQV9QVlJUQ18yQlBQVjFfSU1HO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVUQ1xyXG4gICAgICAgIGlmIChwID09PSAzNjE5Nikge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YzEnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbi5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFTVENcclxuICAgICAgICBpZiAocCA+PSAzNzgwOCAmJiBwIDw9IDM3ODE0IHx8IHAgPj0gMzc4NDAgJiYgcCA8PSAzNzg0Nikge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2FzdGMnKTtcclxuICAgICAgICAgICAgaWYgKGV4dGVuc2lvbiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQlBUQ1xyXG4gICAgICAgIGlmIChwID09PSAzNjQ5MiB8fCBwID09PSAzNjQ5NCB8fCBwID09PSAzNjQ5NSkge1xyXG4gICAgICAgICAgICBleHRlbnNpb24gPSBleHRlbnNpb25zLmdldCgnRVhUX3RleHR1cmVfY29tcHJlc3Npb25fYnB0YycpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5zaW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocCA9PT0gMzQwNDIpIHJldHVybiBnbC5VTlNJR05FRF9JTlRfMjRfODtcclxuXHJcbiAgICAgICAgLy8gSW50ZXJuYWwgZm9ybWF0cyBmb3IgZmxvYXQvaGFsZi1mbG9hdCB0ZXh0dXJlc1xyXG4gICAgICAgIGlmIChpc1dlYkdMMikge1xyXG4gICAgICAgICAgICBpZiAocCA9PT0gNjQwNykgcmV0dXJuIGdsLlJHQjtcclxuICAgICAgICAgICAgaWYgKHAgPT09IDY0MDgpIHJldHVybiBnbC5SR0JBO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChnbFtwXSAhPT0gdW5kZWZpbmVkKSA/IGdsW3BdIDogbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvbnZlcnQ6IGNvbnZlcnRcclxuICAgIH07XHJcbn1cclxuXHJcbi8vIENvbnN0YW50cyBmb3IgdGV4dHVyZSBlbGVtZW50IGNvdW50c1xyXG5jb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQgPSA2O1xyXG5jb25zdCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVCA9IDQ7XHJcblxyXG5jb25zdCBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfU1RPUkVEID0gNDtcclxuY29uc3QgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0FMTE9DQVRFRCA9IDQ7XHJcbmNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX1NUT1JFRCA9IDY7XHJcbmNvbnN0IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRCA9IDg7XHJcbmNvbnN0IFNDQUxFU19ST1RBVElPTlNfRUxFTUVOVFNfUEVSX1RFWEVMID0gNDtcclxuY29uc3QgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwgPSA0O1xyXG5jb25zdCBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTCA9IDE7XHJcblxyXG5jb25zdCBTQ0VORV9GQURFSU5fUkFURV9GQVNUID0gMC4wMTI7XHJcbmNvbnN0IFNDRU5FX0ZBREVJTl9SQVRFX0dSQURVQUwgPSAwLjAwMztcclxuXHJcbmNvbnN0IFZJU0lCTEVfUkVHSU9OX0VYUEFOU0lPTl9ERUxUQSA9IDE7XHJcblxyXG5jb25zdCBNQVhfVEVYVFVSRV9URVhFTFMgPSAxNjc3NzIxNjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdE1lc2ggZXh0ZW5kcyBNZXNoIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGxhdFJlbmRlck1vZGUgPSBTcGxhdFJlbmRlck1vZGUuVGhyZWVELCBkeW5hbWljTW9kZSA9IGZhbHNlLCBlbmFibGVPcHRpb25hbEVmZmVjdHMgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVID0gZmFsc2UsIGRldmljZVBpeGVsUmF0aW8gPSAxLCBlbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVID0gdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uID0gZmFsc2UsIGFudGlhbGlhc2VkID0gZmFsc2UsIG1heFNjcmVlblNwYWNlU3BsYXRTaXplID0gMTAyNCwgbG9nTGV2ZWwgPSBMb2dMZXZlbC5Ob25lLFxyXG4gICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCwgc2NlbmVGYWRlSW5SYXRlTXVsdGlwbGllciA9IDEuMCwga2VybmVsMkRTaXplID0gMC4zKSB7XHJcbiAgICAgICAgc3VwZXIoZHVtbXlHZW9tZXRyeSwgZHVtbXlNYXRlcmlhbCk7XHJcblxyXG4gICAgICAgIC8vIFJlZmVyZW5jZSB0byBhIFRocmVlLmpzIHJlbmRlcmVyXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIGhvdyB0aGUgc3BsYXRzIGFyZSByZW5kZXJlZFxyXG4gICAgICAgIHRoaXMuc3BsYXRSZW5kZXJNb2RlID0gc3BsYXRSZW5kZXJNb2RlO1xyXG5cclxuICAgICAgICAvLyBXaGVuICdkeW5hbWljTW9kZScgaXMgdHJ1ZSwgc2NlbmVzIGFyZSBhc3N1bWVkIHRvIGJlIG5vbi1zdGF0aWMuIER5bmFtaWMgc2NlbmVzIGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5XHJcbiAgICAgICAgLy8gYW5kIGNlcnRhaW4gb3B0aW1pemF0aW9ucyBjYW5ub3QgYmUgbWFkZSBmb3IgdGhlbS4gQWRkaXRpb25hbGx5LCBieSBkZWZhdWx0LCBhbGwgc3BsYXQgZGF0YSByZXRyaWV2ZWQgZnJvbVxyXG4gICAgICAgIC8vIHRoaXMgc3BsYXQgbWVzaCB3aWxsIG5vdCBoYXZlIHRoZWlyIHNjZW5lIHRyYW5zZm9ybSBhcHBsaWVkIHRvIHRoZW0gaWYgdGhlIHNwbGF0IG1lc2ggaXMgZHluYW1pYy4gVGhhdFxyXG4gICAgICAgIC8vIGNhbiBiZSBvdmVycmlkZW4gdmlhIHBhcmFtZXRlcnMgdG8gdGhlIGluZGl2aWR1YWwgZnVuY3Rpb25zIHRoYXQgYXJlIHVzZWQgdG8gcmV0cmlldmUgc3BsYXQgZGF0YS5cclxuICAgICAgICB0aGlzLmR5bmFtaWNNb2RlID0gZHluYW1pY01vZGU7XHJcblxyXG4gICAgICAgIC8vIFdoZW4gdHJ1ZSwgYWxsb3dzIGZvciB1c2FnZSBvZiBleHRyYSBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzIGR1cmluZyByZW5kZXJpbmcgZm9yIGVmZmVjdHMgc3VjaCBhcyBvcGFjaXR5IGFkanVzdG1lbnQuXHJcbiAgICAgICAgLy8gRGVmYXVsdCBpcyBmYWxzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gVGhlc2UgcHJvcGVydGllcyBhcmUgc2VwYXJhdGUgZnJvbSB0cmFuc2Zvcm0gcHJvcGVydGllcyAoc2NhbGUsIHJvdGF0aW9uLCBwb3NpdGlvbilcclxuICAgICAgICAvLyB0aGF0IGFyZSBlbmFibGVkIGJ5IHRoZSAnZHluYW1pY1NjZW5lJyBwYXJhbWV0ZXIuXHJcbiAgICAgICAgdGhpcy5lbmFibGVPcHRpb25hbEVmZmVjdHMgPSBlbmFibGVPcHRpb25hbEVmZmVjdHM7XHJcblxyXG4gICAgICAgIC8vIFVzZSAxNi1iaXQgZmxvYXRpbmcgcG9pbnQgdmFsdWVzIHdoZW4gc3RvcmluZyBzcGxhdCBjb3ZhcmlhbmNlIGRhdGEgaW4gdGV4dHVyZXMsIGluc3RlYWQgb2YgMzItYml0XHJcbiAgICAgICAgdGhpcy5oYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVSA9IGhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVO1xyXG5cclxuICAgICAgICAvLyBSYXRpbyBvZiB0aGUgcmVzb2x1dGlvbiBpbiBwaHlzaWNhbCBwaXhlbHMgdG8gdGhlIHJlc29sdXRpb24gaW4gQ1NTIHBpeGVscyBmb3IgdGhlIGN1cnJlbnQgZGlzcGxheSBkZXZpY2VcclxuICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8gPSBkZXZpY2VQaXhlbFJhdGlvO1xyXG5cclxuICAgICAgICAvLyBVc2UgYSB0cmFuc2Zvcm0gZmVlZGJhY2sgdG8gY2FsY3VsYXRlIHNwbGF0IGRpc3RhbmNlcyBmcm9tIHRoZSBjYW1lcmFcclxuICAgICAgICB0aGlzLmVuYWJsZURpc3RhbmNlc0NvbXB1dGF0aW9uT25HUFUgPSBlbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVO1xyXG5cclxuICAgICAgICAvLyBVc2UgYSBmYXN0ZXIgaW50ZWdlci1iYXNlZCBhcHByb2FjaCBmb3IgY2FsY3VsYXRpbmcgc3BsYXQgZGlzdGFuY2VzIGZyb20gdGhlIGNhbWVyYVxyXG4gICAgICAgIHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24gPSBpbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbjtcclxuXHJcbiAgICAgICAgLy8gV2hlbiB0cnVlLCB3aWxsIHBlcmZvcm0gYWRkaXRpb25hbCBzdGVwcyBkdXJpbmcgcmVuZGVyaW5nIHRvIGFkZHJlc3MgYXJ0aWZhY3RzIGNhdXNlZCBieSB0aGUgcmVuZGVyaW5nIG9mIGdhdXNzaWFucyBhdCBhXHJcbiAgICAgICAgLy8gc3Vic3RhbnRpYWxseSBkaWZmZXJlbnQgcmVzb2x1dGlvbiB0aGFuIHRoYXQgYXQgd2hpY2ggdGhleSB3ZXJlIHJlbmRlcmVkIGR1cmluZyB0cmFpbmluZy4gVGhpcyB3aWxsIG9ubHkgd29yayBjb3JyZWN0bHlcclxuICAgICAgICAvLyBmb3IgbW9kZWxzIHRoYXQgd2VyZSB0cmFpbmVkIHVzaW5nIGEgcHJvY2VzcyB0aGF0IHV0aWxpemVzIHRoaXMgY29tcGVuc2F0aW9uIGNhbGN1bGF0aW9uLiBGb3IgbW9yZSBkZXRhaWxzOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXJmc3R1ZGlvLXByb2plY3QvZ3NwbGF0L3B1bGwvMTE3XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dyYXBoZGVjby1pbnJpYS9nYXVzc2lhbi1zcGxhdHRpbmcvaXNzdWVzLzI5NCNpc3N1ZWNvbW1lbnQtMTc3MjY4ODA5M1xyXG4gICAgICAgIHRoaXMuYW50aWFsaWFzZWQgPSBhbnRpYWxpYXNlZDtcclxuXHJcbiAgICAgICAgLy8gVGhlIHNpemUgb2YgdGhlIDJEIGtlcm5lbCB1c2VkIGZvciBzcGxhdCByZW5kZXJpbmdcclxuICAgICAgICAvLyBUaGlzIHdpbGwgYWRqdXN0IHRoZSAyRCBrZXJuZWwgc2l6ZSBhZnRlciB0aGUgcHJvamVjdGlvblxyXG4gICAgICAgIHRoaXMua2VybmVsMkRTaXplID0ga2VybmVsMkRTaXplO1xyXG5cclxuICAgICAgICAvLyBTcGVjaWZ5IHRoZSBtYXhpbXVtIGNsaXAgc3BhY2Ugc3BsYXQgc2l6ZSwgY2FuIGhlbHAgZGVhbCB3aXRoIGxhcmdlIHNwbGF0cyB0aGF0IGdldCB0b28gdW53aWVsZHlcclxuICAgICAgICB0aGlzLm1heFNjcmVlblNwYWNlU3BsYXRTaXplID0gbWF4U2NyZWVuU3BhY2VTcGxhdFNpemU7XHJcblxyXG4gICAgICAgIC8vIFRoZSB2ZXJib3NpdHkgb2YgY29uc29sZSBsb2dnaW5nXHJcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xyXG5cclxuICAgICAgICAvLyBEZWdyZWUgMCBtZWFucyBubyBzcGhlcmljYWwgaGFybW9uaWNzXHJcbiAgICAgICAgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU7XHJcbiAgICAgICAgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwO1xyXG5cclxuICAgICAgICB0aGlzLnNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXIgPSBzY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyO1xyXG5cclxuICAgICAgICAvLyBUaGUgaW5kaXZpZHVhbCBzcGxhdCBzY2VuZXMgc3RvcmVkIGluIHRoaXMgc3BsYXQgbWVzaCwgZWFjaCBjb250YWluaW5nIHRoZWlyIG93biB0cmFuc2Zvcm1cclxuICAgICAgICB0aGlzLnNjZW5lcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyBTcGVjaWFsIG9jdHJlZSB0YWlsb3JlZCB0byBTcGxhdE1lc2ggaW5zdGFuY2VzXHJcbiAgICAgICAgdGhpcy5zcGxhdFRyZWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYmFzZVNwbGF0VHJlZSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIENhY2hlIHRleHR1cmVzIGFuZCB0aGUgaW50ZXJtZWRpYXRlIGRhdGEgdXNlZCB0byBwb3B1bGF0ZSB0aGVtXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuZmxhbWVNb2RlbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHByZXNzaW9uQlNOdW0gPSAwO1xyXG4gICAgICAgIHRoaXMuYnNXZWlnaHQgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5ib25lc01hdHJpeCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ib25lc051bSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ib25lc1dlaWdodCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjayA9IHtcclxuICAgICAgICAgICAgJ2lkJzogbnVsbCxcclxuICAgICAgICAgICAgJ3ZlcnRleFNoYWRlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdmcmFnbWVudFNoYWRlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdwcm9ncmFtJzogbnVsbCxcclxuICAgICAgICAgICAgJ2NlbnRlcnNCdWZmZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzQnVmZmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ291dERpc3RhbmNlc0J1ZmZlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdjZW50ZXJzTG9jJzogLTEsXHJcbiAgICAgICAgICAgICdtb2RlbFZpZXdQcm9qTG9jJzogLTEsXHJcbiAgICAgICAgICAgICdzY2VuZUluZGV4ZXNMb2MnOiAtMSxcclxuICAgICAgICAgICAgJ3RyYW5zZm9ybXNMb2NzJzogW11cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb0xvY2FsU3BsYXRJbmRleE1hcCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcCA9IFtdO1xyXG5cclxuICAgICAgICAvLyBPcHRpb25hbCBpcmlzIG9jY2x1c2lvbiBjb25maWd1cmF0aW9uIGZyb20gYXZhdGFyIFpJUFxyXG4gICAgICAgIHRoaXMuaXJpc09jY2x1c2lvbkNvbmZpZyA9IG51bGw7XHJcblxyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZE1heFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5maXJzdFJlbmRlclRpbWUgPSAtMTtcclxuICAgICAgICB0aGlzLmZpbmFsQnVpbGQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy53ZWJHTFV0aWxzID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3gzKCk7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVkU2NlbmVDZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlciA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25SYWRpdXMgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cyA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uQ2hhbmdpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGxhdFNjYWxlID0gMS4wO1xyXG4gICAgICAgIHRoaXMucG9pbnRDbG91ZE1vZGVFbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RSZW5kZXJlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCBhIGNvbnRhaW5lciBmb3IgZWFjaCBzY2VuZSBtYW5hZ2VkIGJ5IHRoaXMgc3BsYXQgbWVzaCBiYXNlZCBvbiBhbiBpbnN0YW5jZSBvZiBTcGxhdEJ1ZmZlciwgYWxvbmcgd2l0aCBvcHRpb25hbFxyXG4gICAgICogdHJhbnNmb3JtIGRhdGEgKHBvc2l0aW9uLCBzY2FsZSwgcm90YXRpb24pIHBhc3NlZCB0byB0aGUgc3BsYXQgbWVzaCBkdXJpbmcgdGhlIGJ1aWxkIHByb2Nlc3MuXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PFRIUkVFLk1hdHJpeDQ+fSBzcGxhdEJ1ZmZlcnMgU3BsYXRCdWZmZXIgaW5zdGFuY2VzIGNvbnRhaW5pbmcgc3BsYXRzIGZvciBlYWNoIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG9iamVjdD59IHNjZW5lT3B0aW9ucyBBcnJheSBvZiBvcHRpb25zIG9iamVjdHM6IHtcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHBvc2l0aW9uIChBcnJheTxudW1iZXI+KTogICBQb3NpdGlvbiBvZiB0aGUgc2NlbmUsIGFjdHMgYXMgYW4gb2Zmc2V0IGZyb20gaXRzIGRlZmF1bHQgcG9zaXRpb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwXVxyXG4gICAgICpcclxuICAgICAqICAgICAgICAgcm90YXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFJvdGF0aW9uIG9mIHRoZSBzY2VuZSByZXByZXNlbnRlZCBhcyBhIHF1YXRlcm5pb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwLCAxXVxyXG4gICAgICpcclxuICAgICAqICAgICAgICAgc2NhbGUgKEFycmF5PG51bWJlcj4pOiAgICAgIFNjZW5lJ3Mgc2NhbGUsIGRlZmF1bHRzIHRvIFsxLCAxLCAxXVxyXG4gICAgICogfVxyXG4gICAgICogQHJldHVybiB7QXJyYXk8VEhSRUUuTWF0cml4ND59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZFNjZW5lcyhwYXJlbnRPYmplY3QsIHNwbGF0QnVmZmVycywgc2NlbmVPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmVzID0gW107XHJcbiAgICAgICAgc2NlbmVzLmxlbmd0aCA9IHNwbGF0QnVmZmVycy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdEJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBzcGxhdEJ1ZmZlcnNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBzY2VuZU9wdGlvbnNbaV0gfHwge307XHJcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbkFycmF5ID0gb3B0aW9uc1sncG9zaXRpb24nXSB8fCBbMCwgMCwgMF07XHJcbiAgICAgICAgICAgIGxldCByb3RhdGlvbkFycmF5ID0gb3B0aW9uc1sncm90YXRpb24nXSB8fCBbMCwgMCwgMCwgMV07XHJcbiAgICAgICAgICAgIGxldCBzY2FsZUFycmF5ID0gb3B0aW9uc1snc2NhbGUnXSB8fCBbMSwgMSwgMV07XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkocG9zaXRpb25BcnJheSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKS5mcm9tQXJyYXkocm90YXRpb25BcnJheSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkoc2NhbGVBcnJheSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gU3BsYXRNZXNoLmNyZWF0ZVNjZW5lKHNwbGF0QnVmZmVyLCBwb3NpdGlvbiwgcm90YXRpb24sIHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkIHx8IDEsIG9wdGlvbnMub3BhY2l0eSwgb3B0aW9ucy52aXNpYmxlKTtcclxuICAgICAgICAgICAgcGFyZW50T2JqZWN0LmFkZChzY2VuZSk7XHJcbiAgICAgICAgICAgIHNjZW5lc1tpXSA9IHNjZW5lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2NlbmVzO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZVNjZW5lKHNwbGF0QnVmZmVyLCBwb3NpdGlvbiwgcm90YXRpb24sIHNjYWxlLCBtaW5pbXVtQWxwaGEsIG9wYWNpdHkgPSAxLjAsIHZpc2libGUgPSB0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTcGxhdFNjZW5lKHNwbGF0QnVmZmVyLCBwb3NpdGlvbiwgcm90YXRpb24sIHNjYWxlLCBtaW5pbXVtQWxwaGEsIG9wYWNpdHksIHZpc2libGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGQgZGF0YSBzdHJ1Y3R1cmVzIHRoYXQgbWFwIGdsb2JhbCBzcGxhdCBpbmRleGVzIChiYXNlZCBvbiBhIHVuaWZpZWQgaW5kZXggYWNyb3NzIGFsbCBzcGxhdCBidWZmZXJzKSB0b1xyXG4gICAgICogbG9jYWwgZGF0YSB3aXRoaW4gYSBzaW5nbGUgc2NlbmUuXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNwbGF0QnVmZmVyPn0gc3BsYXRCdWZmZXJzIEluc3RhbmNlcyBvZiBTcGxhdEJ1ZmZlciBvZmYgd2hpY2ggdG8gYnVpbGQgdGhlIG1hcHNcclxuICAgICAqIEByZXR1cm4ge29iamVjdH1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ1aWxkU3BsYXRJbmRleE1hcHMoc3BsYXRCdWZmZXJzKSB7XHJcbiAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4TWFwID0gW107XHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleE1hcCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgc3BsYXRCdWZmZXJzLmxlbmd0aDsgcysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gc3BsYXRCdWZmZXJzW3NdO1xyXG4gICAgICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gc3BsYXRCdWZmZXIuZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTcGxhdEluZGV4TWFwW3RvdGFsU3BsYXRDb3VudF0gPSBpO1xyXG4gICAgICAgICAgICAgICAgc2NlbmVJbmRleE1hcFt0b3RhbFNwbGF0Q291bnRdID0gcztcclxuICAgICAgICAgICAgICAgIHRvdGFsU3BsYXRDb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxvY2FsU3BsYXRJbmRleE1hcCxcclxuICAgICAgICAgICAgc2NlbmVJbmRleE1hcFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCBhbiBpbnN0YW5jZSBvZiBTcGxhdFRyZWUgKGEgc3BlY2lhbGl6ZWQgb2N0cmVlKSBmb3IgdGhlIGdpdmVuIHNwbGF0IG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IG1pbkFscGhhcyBBcnJheSBvZiBtaW5pbXVtIHNwbGF0IHNscGhhcyBmb3IgZWFjaCBzY2VuZVxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSB1cGxvYWQgb2Ygc3BsYXQgY2VudGVycyB0byB0aGUgc3BsYXQgdHJlZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIgd29ya2VyIHN0YXJ0cyBhbmQgZmluaXNoZXMuXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgY29udmVyc2lvbiBvZiB0aGUgbG9jYWwgc3BsYXQgdHJlZSBmcm9tXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgZm9ybWF0IHByb2R1Y2VkIGJ5IHRoZSBzcGxhdCB0cmVlIGJ1aWxkZXIgd29ya2VyIHN0YXJ0cyBhbmQgZW5kcy5cclxuICAgICAqIEByZXR1cm4ge1NwbGF0VHJlZX1cclxuICAgICAqL1xyXG4gICAgIGJ1aWxkU3BsYXRUcmVlID0gKG1pbkFscGhhcyA9IFtdLCBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQsIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZVNwbGF0VHJlZSgpO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBleHBvc2UgU3BsYXRUcmVlIGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMgKG1heGltdW1EZXB0aCBhbmQgbWF4Q2VudGVyc1Blck5vZGUpIHNvIHRoYXQgdGhleSBjYW5cclxuICAgICAgICAgICAgLy8gYmUgY29uZmlndXJlZCBvbiBhIHBlci1zY2VuZSBiYXNpc1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VTcGxhdFRyZWUgPSBuZXcgU3BsYXRUcmVlKDgsIDEwMDApO1xyXG4gICAgICAgICAgICBjb25zdCBidWlsZFN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdENvbG9yID0gbmV3IFZlY3RvcjQoKTtcclxuICAgICAgICAgICAgdGhpcy5iYXNlU3BsYXRUcmVlLnByb2Nlc3NTcGxhdE1lc2godGhpcywgKHNwbGF0SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3BsYXRDb2xvcihzcGxhdEluZGV4LCBzcGxhdENvbG9yKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lSW5kZXggPSB0aGlzLmdldFNjZW5lSW5kZXhGb3JTcGxhdChzcGxhdEluZGV4KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbkFscGhhID0gbWluQWxwaGFzW3NjZW5lSW5kZXhdIHx8IDE7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3BsYXRDb2xvci53ID49IG1pbkFscGhhO1xyXG4gICAgICAgICAgICB9LCBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQsIG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWlsZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGJ1aWxkU3RhcnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPj0gTG9nTGV2ZWwuSW5mbykgbG9nZ2VyLmluZm8oJ1NwbGF0VHJlZSBidWlsZDogJyArIGJ1aWxkVGltZSArICcgbXMnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdFRyZWUgPSB0aGlzLmJhc2VTcGxhdFRyZWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXNlU3BsYXRUcmVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlYXZlc1dpdGhWZXJ0aWNlcyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF2Z1NwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXhTcGxhdENvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdFRyZWUudmlzaXRMZWF2ZXMoKG5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZVNwbGF0Q291bnQgPSBub2RlLmRhdGEuaW5kZXhlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlU3BsYXRDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF2Z1NwbGF0Q291bnQgKz0gbm9kZVNwbGF0Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGxhdENvdW50ID0gTWF0aC5tYXgobWF4U3BsYXRDb3VudCwgbm9kZVNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWF2ZXNXaXRoVmVydGljZXMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID49IExvZ0xldmVsLkluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFNwbGF0VHJlZSBsZWF2ZXM6ICR7dGhpcy5zcGxhdFRyZWUuY291bnRMZWF2ZXMoKX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFNwbGF0VHJlZSBsZWF2ZXMgd2l0aCBzcGxhdHM6JHtsZWF2ZXNXaXRoVmVydGljZXN9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF2Z1NwbGF0Q291bnQgPSBhdmdTcGxhdENvdW50IC8gbm9kZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhgQXZnIHNwbGF0IGNvdW50IHBlciBub2RlOiAke2F2Z1NwbGF0Q291bnR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKGBUb3RhbCBzcGxhdCBjb3VudDogJHt0aGlzLmdldFNwbGF0Q291bnQoKX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3QgdGhpcyBpbnN0YW5jZSBvZiBTcGxhdE1lc2guXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PFNwbGF0QnVmZmVyPn0gc3BsYXRCdWZmZXJzIFRoZSBiYXNlIHNwbGF0IGRhdGEsIGluc3RhbmNlcyBvZiBTcGxhdEJ1ZmZlclxyXG4gICAgICogQHBhcmFtIHtBcnJheTxvYmplY3Q+fSBzY2VuZU9wdGlvbnMgRHluYW1pYyBvcHRpb25zIGZvciBlYWNoIHNjZW5lIHtcclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkOiBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpLCBkZWZhdWx0cyB0byAxXHJcbiAgICAgKlxyXG4gICAgICogICAgICAgICBwb3NpdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUG9zaXRpb24gb2YgdGhlIHNjZW5lLCBhY3RzIGFzIGFuIG9mZnNldCBmcm9tIGl0cyBkZWZhdWx0IHBvc2l0aW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMF1cclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHJvdGF0aW9uIChBcnJheTxudW1iZXI+KTogICBSb3RhdGlvbiBvZiB0aGUgc2NlbmUgcmVwcmVzZW50ZWQgYXMgYSBxdWF0ZXJuaW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMCwgMV1cclxuICAgICAqXHJcbiAgICAgKiAgICAgICAgIHNjYWxlIChBcnJheTxudW1iZXI+KTogICAgICBTY2VuZSdzIHNjYWxlLCBkZWZhdWx0cyB0byBbMSwgMSwgMV1cclxuICAgICAqXHJcbiAgICAgKiB9XHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGtlZXBTY2VuZVRyYW5zZm9ybXMgRm9yIGEgc2NlbmUgdGhhdCBhbHJlYWR5IGV4aXN0cyBhbmQgaXMgYmVpbmcgb3ZlcndyaXR0ZW4sIHRoaXMgZmxhZ1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNheXMgdG8ga2VlcCB0aGUgdHJhbnNmb3JtIGZyb20gdGhlIGV4aXN0aW5nIHNjZW5lLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBmaW5hbEJ1aWxkIFdpbGwgdGhlIHNwbGF0IG1lc2ggYmUgaW4gaXRzIGZpbmFsIHN0YXRlIGFmdGVyIHRoaXMgYnVpbGQ/XHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIHVwbG9hZCBvZiBzcGxhdCBjZW50ZXJzIHRvIHRoZSBzcGxhdCB0cmVlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlciB3b3JrZXIgc3RhcnRzIGFuZCBmaW5pc2hlcy5cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU3BsYXRUcmVlQ29uc3RydWN0aW9uIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBjb252ZXJzaW9uIG9mIHRoZSBsb2NhbCBzcGxhdCB0cmVlIGZyb21cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBmb3JtYXQgcHJvZHVjZWQgYnkgdGhlIHNwbGF0IHRyZWUgYnVpbGRlciB3b3JrZXIgc3RhcnRzIGFuZCBlbmRzLlxyXG4gICAgICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBpbmZvIGFib3V0IHRoZSBzcGxhdHMgdGhhdCBhcmUgdXBkYXRlZFxyXG4gICAgICovXHJcbiAgICBidWlsZChzcGxhdEJ1ZmZlcnMsIHNjZW5lT3B0aW9ucywga2VlcFNjZW5lVHJhbnNmb3JtcyA9IHRydWUsIGZpbmFsQnVpbGQgPSBmYWxzZSxcclxuICAgICAgICAgIG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCwgb25TcGxhdFRyZWVDb25zdHJ1Y3Rpb24sIHByZXNlcnZlVmlzaWJsZVJlZ2lvbiA9IHRydWUpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zY2VuZU9wdGlvbnMgPSBzY2VuZU9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5maW5hbEJ1aWxkID0gZmluYWxCdWlsZDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IFNwbGF0TWVzaC5nZXRUb3RhbE1heFNwbGF0Q291bnRGb3JTcGxhdEJ1ZmZlcnMoc3BsYXRCdWZmZXJzKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3U2NlbmVzID0gU3BsYXRNZXNoLmJ1aWxkU2NlbmVzKHRoaXMsIHNwbGF0QnVmZmVycywgc2NlbmVPcHRpb25zKTtcclxuICAgICAgICBpZiAoa2VlcFNjZW5lVHJhbnNmb3Jtcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aCAmJiBpIDwgbmV3U2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdTY2VuZSA9IG5ld1NjZW5lc1tpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2NlbmUgPSB0aGlzLmdldFNjZW5lKGkpO1xyXG4gICAgICAgICAgICAgICAgbmV3U2NlbmUuY29weVRyYW5zZm9ybURhdGEoZXhpc3RpbmdTY2VuZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2VuZXMgPSBuZXdTY2VuZXM7XHJcblxyXG4gICAgICAgIGxldCBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAzO1xyXG4gICAgICAgIGZvciAobGV0IHNwbGF0QnVmZmVyIG9mIHNwbGF0QnVmZmVycykge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlclNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IHNwbGF0QnVmZmVyLmdldE1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSgpO1xyXG4gICAgICAgICAgICBpZiAoc3BsYXRCdWZmZXJTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPCBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIHtcclxuICAgICAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IHNwbGF0QnVmZmVyU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4obWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcblxyXG4gICAgICAgIGxldCBzcGxhdEJ1ZmZlcnNDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHNwbGF0QnVmZmVycy5sZW5ndGggIT09IHRoaXMubGFzdEJ1aWxkU2NlbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzcGxhdEJ1ZmZlcnNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0QnVmZmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBzcGxhdEJ1ZmZlcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoc3BsYXRCdWZmZXIgIT09IHRoaXMubGFzdEJ1aWxkU2NlbmVzW2ldLnNwbGF0QnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRCdWZmZXJzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpc1VwZGF0ZUJ1aWxkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZXMubGVuZ3RoICE9PSAxIHx8XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEJ1aWxkU2NlbmVDb3VudCAhPT0gdGhpcy5zY2VuZXMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHRoaXMubGFzdEJ1aWxkTWF4U3BsYXRDb3VudCAhPT0gbWF4U3BsYXRDb3VudCB8fFxyXG4gICAgICAgICAgICBzcGxhdEJ1ZmZlcnNDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICBpc1VwZGF0ZUJ1aWxkID0gZmFsc2U7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgaWYgKCFpc1VwZGF0ZUJ1aWxkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm94MygpO1xyXG4gICAgICAgICAgICBpZiAoIXByZXNlcnZlVmlzaWJsZVJlZ2lvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpc2libGVSZWdpb25SYWRpdXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlyc3RSZW5kZXJUaW1lID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5sYXN0QnVpbGRNYXhTcGxhdENvdW50ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlTWVzaERhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeSA9IFNwbGF0R2VvbWV0cnkuYnVpbGQobWF4U3BsYXRDb3VudCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbCA9IFNwbGF0TWF0ZXJpYWwzRC5idWlsZCh0aGlzLmR5bmFtaWNNb2RlLCB0aGlzLmVuYWJsZU9wdGlvbmFsRWZmZWN0cywgdGhpcy5hbnRpYWxpYXNlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSwgdGhpcy5zcGxhdFNjYWxlLCB0aGlzLnBvaW50Q2xvdWRNb2RlRW5hYmxlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHRoaXMua2VybmVsMkRTaXplLCB0aGlzLmlyaXNPY2NsdXNpb25Db25maWcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbCA9IFNwbGF0TWF0ZXJpYWwyRC5idWlsZCh0aGlzLmR5bmFtaWNNb2RlLCB0aGlzLmVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdFNjYWxlLCB0aGlzLnBvaW50Q2xvdWRNb2RlRW5hYmxlZCwgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbmRleE1hcHMgPSBTcGxhdE1lc2guYnVpbGRTcGxhdEluZGV4TWFwcyhzcGxhdEJ1ZmZlcnMpO1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb0xvY2FsU3BsYXRJbmRleE1hcCA9IGluZGV4TWFwcy5sb2NhbFNwbGF0SW5kZXhNYXA7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcCA9IGluZGV4TWFwcy5zY2VuZUluZGV4TWFwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXJTcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KHRydWUpO1xyXG4gICAgICAgIGlmICh0aGlzLmVuYWJsZURpc3RhbmNlc0NvbXB1dGF0aW9uT25HUFUpIHRoaXMuc2V0dXBEaXN0YW5jZXNDb21wdXRhdGlvblRyYW5zZm9ybUZlZWRiYWNrKCk7XHJcbiAgICAgICAgY29uc3QgZGF0YVVwZGF0ZVJlc3VsdHMgPSB0aGlzLnJlZnJlc2hHUFVEYXRhRnJvbVNwbGF0QnVmZmVycyhpc1VwZGF0ZUJ1aWxkKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lc1tpXSA9IHRoaXMuc2NlbmVzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNwbGF0Q291bnQgPSBzcGxhdEJ1ZmZlclNwbGF0Q291bnQ7XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRNYXhTcGxhdENvdW50ID0gdGhpcy5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZUNvdW50ID0gdGhpcy5zY2VuZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBpZiAoZmluYWxCdWlsZCAmJiB0aGlzLnNjZW5lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuYnVpbGRTcGxhdFRyZWUoc2NlbmVPcHRpb25zLm1hcChvcHRpb25zID0+IG9wdGlvbnMuc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQgfHwgMSksXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgb25TcGxhdFRyZWVJbmRleGVzVXBsb2FkLCBvblNwbGF0VHJlZUNvbnN0cnVjdGlvbilcclxuICAgICAgICAvLyAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRoaXMub25TcGxhdFRyZWVSZWFkeUNhbGxiYWNrKSB0aGlzLm9uU3BsYXRUcmVlUmVhZHlDYWxsYmFjayh0aGlzLnNwbGF0VHJlZSk7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLm9uU3BsYXRUcmVlUmVhZHlDYWxsYmFjayA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgdGhpcy52aXNpYmxlID0gKHRoaXMuc2NlbmVzLmxlbmd0aCA+IDApO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF0YVVwZGF0ZVJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSgpIHtcclxuXHJcbiAgICAgICAgY29uc3QgZGVsZXRlVGV4dHVyZURhdGEgPSAodGV4dHVyZSkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGUgdGV4dHVyZS5zb3VyY2UuZGF0YTtcclxuICAgICAgICAgICAgZGVsZXRlIHRleHR1cmUuaW1hZ2U7XHJcbiAgICAgICAgICAgIHRleHR1cmUub25VcGRhdGUgPSBudWxsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvdmFyaWFuY2VzO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNlbnRlcnM7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY29sb3JzO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnNwaGVyaWNhbEhhcm1vbmljcztcclxuXHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY2VudGVyQ29sb3JzLmRhdGE7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY292YXJpYW5jZXMuZGF0YTtcclxuICAgICAgICBpZiAodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzLmRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNjZW5lSW5kZXhlcykge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zY2VuZUluZGV4ZXMuZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY2VudGVyQ29sb3JzLnRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY2VudGVyQ29sb3JzLnRleHR1cmUub25VcGRhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZVRleHR1cmVEYXRhKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY2VudGVyQ29sb3JzLnRleHR1cmUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuZmxhbWVNb2RlbFBvc1RleHR1cmUudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5mbGFtZU1vZGVsUG9zVGV4dHVyZS50ZXh0dXJlLm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVUZXh0dXJlRGF0YSh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmZsYW1lTW9kZWxQb3NUZXh0dXJlLnRleHR1cmUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuY292YXJpYW5jZXMudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5jb3ZhcmlhbmNlcy50ZXh0dXJlLm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVUZXh0dXJlRGF0YSh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmNvdmFyaWFuY2VzLnRleHR1cmUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MudGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zcGhlcmljYWxIYXJtb25pY3MudGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNwaGVyaWNhbEhhcm1vbmljcy50ZXh0dXJlLm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRleHR1cmVEYXRhKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzLnRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc3BoZXJpY2FsSGFybW9uaWNzLnRleHR1cmVzLmZvckVhY2goKHRleHR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVUZXh0dXJlRGF0YSh0ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc2NlbmVJbmRleGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuc2NlbmVJbmRleGVzLnRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLnNjZW5lSW5kZXhlcy50ZXh0dXJlLm9uVXBkYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlVGV4dHVyZURhdGEodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5zY2VuZUluZGV4ZXMudGV4dHVyZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIGFsbCByZXNvdXJjZXMgaGVsZCBieSB0aGUgc3BsYXQgbWVzaFxyXG4gICAgICovXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIHRoaXMuZGlzcG9zZU1lc2hEYXRhKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlVGV4dHVyZXMoKTtcclxuICAgICAgICB0aGlzLmRpc3Bvc2VTcGxhdFRyZWUoKTtcclxuICAgICAgICBpZiAodGhpcy5lbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VEaXN0YW5jZXNDb21wdXRhdGlvbkdQVVJlc291cmNlcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjZW5lcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sgPSB7XHJcbiAgICAgICAgICAgICdpZCc6IG51bGwsXHJcbiAgICAgICAgICAgICd2ZXJ0ZXhTaGFkZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnZnJhZ21lbnRTaGFkZXInOiBudWxsLFxyXG4gICAgICAgICAgICAncHJvZ3JhbSc6IG51bGwsXHJcbiAgICAgICAgICAgICdjZW50ZXJzQnVmZmVyJzogbnVsbCxcclxuICAgICAgICAgICAgJ3NjZW5lSW5kZXhlc0J1ZmZlcic6IG51bGwsXHJcbiAgICAgICAgICAgICdvdXREaXN0YW5jZXNCdWZmZXInOiBudWxsLFxyXG4gICAgICAgICAgICAnY2VudGVyc0xvYyc6IC0xLFxyXG4gICAgICAgICAgICAnbW9kZWxWaWV3UHJvakxvYyc6IC0xLFxyXG4gICAgICAgICAgICAnc2NlbmVJbmRleGVzTG9jJzogLTEsXHJcbiAgICAgICAgICAgICd0cmFuc2Zvcm1zTG9jcyc6IFtdXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9Mb2NhbFNwbGF0SW5kZXhNYXAgPSBbXTtcclxuICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXAgPSBbXTtcclxuXHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmxhc3RCdWlsZFNjZW5lcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubGFzdEJ1aWxkTWF4U3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5sYXN0QnVpbGRTY2VuZUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmZpcnN0UmVuZGVyVGltZSA9IC0xO1xyXG4gICAgICAgIHRoaXMuZmluYWxCdWlsZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLndlYkdMVXRpbHMgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJveDMoKTtcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZWRTY2VuZUNlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPSAwO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cyA9IDA7XHJcbiAgICAgICAgdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzID0gMDtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25DaGFuZ2luZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0U2NhbGUgPSAxLjA7XHJcbiAgICAgICAgdGhpcy5wb2ludENsb3VkTW9kZUVuYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5sYXN0UmVuZGVyZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcG9zZSBvZiBvbmx5IHRoZSBUaHJlZS5qcyBtZXNoIHJlc291cmNlcyAoZ2VvbWV0cnksIG1hdGVyaWFsLCBhbmQgdGV4dHVyZSlcclxuICAgICAqL1xyXG4gICAgZGlzcG9zZU1lc2hEYXRhKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdlb21ldHJ5ICYmIHRoaXMuZ2VvbWV0cnkgIT09IGR1bW15R2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5tYXRlcmlhbCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2VUZXh0dXJlcygpIHtcclxuICAgICAgICBmb3IgKGxldCB0ZXh0dXJlS2V5IGluIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd24odGhpcy5zcGxhdERhdGFUZXh0dXJlcywgdGV4dHVyZUtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHR1cmVDb250YWluZXIgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzW3RleHR1cmVLZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHR1cmVDb250YWluZXIudGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVDb250YWluZXIudGV4dHVyZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZUNvbnRhaW5lci50ZXh0dXJlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlU3BsYXRUcmVlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0VHJlZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0VHJlZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRUcmVlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYmFzZVNwbGF0VHJlZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VTcGxhdFRyZWUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmJhc2VTcGxhdFRyZWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdFRyZWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsYXRUcmVlO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3BsYXRUcmVlUmVhZHkoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uU3BsYXRUcmVlUmVhZHlDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGNvcGllcyBvZiBkYXRhIHRoYXQgYXJlIG5lY2Vzc2FyeSBmb3Igc3BsYXQgZGlzdGFuY2UgY29tcHV0YXRpb246IHNwbGF0IGNlbnRlciBwb3NpdGlvbnMgYW5kIHNwbGF0XHJcbiAgICAgKiBzY2VuZSBpbmRleGVzIChuZWNlc3NhcnkgZm9yIGFwcGx5aW5nIGR5bmFtaWMgc2NlbmUgdHJhbnNmb3JtYXRpb25zIGR1cmluZyBkaXN0YW5jZSBjb21wdXRhdGlvbilcclxuICAgICAqIEBwYXJhbSB7Kn0gc3RhcnQgVGhlIGluZGV4IGF0IHdoaWNoIHRvIHN0YXJ0IGNvcHlpbmcgZGF0YVxyXG4gICAgICogQHBhcmFtIHsqfSBlbmQgIFRoZSBpbmRleCBhdCB3aGljaCB0byBzdG9wIGNvcHlpbmcgZGF0YVxyXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxyXG4gICAgICovXHJcbiAgICBnZXREYXRhRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oc3RhcnQsIGVuZCkge1xyXG4gICAgICAgIGNvbnN0IGNlbnRlcnMgPSB0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlZ2VyQ2VudGVycyhzdGFydCwgZW5kLCB0cnVlKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmxvYXRDZW50ZXJzKHN0YXJ0LCBlbmQsIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhlcyA9IHRoaXMuZ2V0U2NlbmVJbmRleGVzKHN0YXJ0LCBlbmQpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNlbnRlcnMsXHJcbiAgICAgICAgICAgIHNjZW5lSW5kZXhlc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZyZXNoIGRhdGEgdGV4dHVyZXMgYW5kIEdQVSBidWZmZXJzIHdpdGggc3BsYXQgZGF0YSBmcm9tIHRoZSBzcGxhdCBidWZmZXJzIGJlbG9uZ2luZyB0byB0aGlzIG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNpbmNlTGFzdEJ1aWxkT25seSBTcGVjaWZ5IHdoZXRoZXIgb3Igbm90IHRvIG9ubHkgdXBkYXRlIGZvciBzcGxhdHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgc2luY2UgdGhlIGxhc3QgYnVpbGQuXHJcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHJlZnJlc2hHUFVEYXRhRnJvbVNwbGF0QnVmZmVycyhzaW5jZUxhc3RCdWlsZE9ubHkpIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KHRydWUpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaERhdGFUZXh0dXJlc0Zyb21TcGxhdEJ1ZmZlcnMoc2luY2VMYXN0QnVpbGRPbmx5KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVTdGFydCA9IHNpbmNlTGFzdEJ1aWxkT25seSA/IHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA6IDA7XHJcbiAgICAgICAgY29uc3QgeyBjZW50ZXJzLCBzY2VuZUluZGV4ZXMgfSA9IHRoaXMuZ2V0RGF0YUZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKHVwZGF0ZVN0YXJ0LCBzcGxhdENvdW50IC0gMSk7XHJcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRGlzdGFuY2VzQ29tcHV0YXRpb25PbkdQVSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hHUFVCdWZmZXJzRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oY2VudGVycywgc2NlbmVJbmRleGVzLCBzaW5jZUxhc3RCdWlsZE9ubHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnZnJvbSc6IHVwZGF0ZVN0YXJ0LFxyXG4gICAgICAgICAgICAndG8nOiBzcGxhdENvdW50IC0gMSxcclxuICAgICAgICAgICAgJ2NvdW50Jzogc3BsYXRDb3VudCAtIHVwZGF0ZVN0YXJ0LFxyXG4gICAgICAgICAgICAnY2VudGVycyc6IGNlbnRlcnMsXHJcbiAgICAgICAgICAgICdzY2VuZUluZGV4ZXMnOiBzY2VuZUluZGV4ZXNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBHUFUgYnVmZmVycyB0aGF0IGFyZSB1c2VkIGZvciBjb21wdXRpbmcgc3BsYXQgZGlzdGFuY2VzIG9uIHRoZSBHUFUuXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNlbnRlcnMgU3BsYXQgY2VudGVyIHBvc2l0aW9uc1xyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzY2VuZUluZGV4ZXMgSW5kZXhlcyBvZiB0aGUgc2NlbmUgdG8gd2hpY2ggZWFjaCBzcGxhdCBiZWxvbmdzXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNpbmNlTGFzdEJ1aWxkT25seSBTcGVjaWZ5IHdoZXRoZXIgb3Igbm90IHRvIG9ubHkgdXBkYXRlIGZvciBzcGxhdHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgc2luY2UgdGhlIGxhc3QgYnVpbGQuXHJcbiAgICAgKi9cclxuICAgIHJlZnJlc2hHUFVCdWZmZXJzRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oY2VudGVycywgc2NlbmVJbmRleGVzLCBzaW5jZUxhc3RCdWlsZE9ubHkgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IHNpbmNlTGFzdEJ1aWxkT25seSA/IHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA6IDA7XHJcbiAgICAgICAgdGhpcy51cGRhdGVHUFVDZW50ZXJzQnVmZmVyRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oc2luY2VMYXN0QnVpbGRPbmx5LCBjZW50ZXJzLCBvZmZzZXQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlR1BVVHJhbnNmb3JtSW5kZXhlc0J1ZmZlckZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKHNpbmNlTGFzdEJ1aWxkT25seSwgc2NlbmVJbmRleGVzLCBvZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaCBkYXRhIHRleHR1cmVzIHdpdGggZGF0YSBmcm9tIHRoZSBzcGxhdCBidWZmZXJzIGZvciB0aGlzIG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNpbmNlTGFzdEJ1aWxkT25seSBTcGVjaWZ5IHdoZXRoZXIgb3Igbm90IHRvIG9ubHkgdXBkYXRlIGZvciBzcGxhdHMgdGhhdCBoYXZlIGJlZW4gYWRkZWQgc2luY2UgdGhlIGxhc3QgYnVpbGQuXHJcbiAgICAgKi9cclxuICAgIHJlZnJlc2hEYXRhVGV4dHVyZXNGcm9tU3BsYXRCdWZmZXJzKHNpbmNlTGFzdEJ1aWxkT25seSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLmdldFNwbGF0Q291bnQodHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgZnJvbVNwbGF0ID0gdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50O1xyXG4gICAgICAgIGNvbnN0IHRvU3BsYXQgPSBzcGxhdENvdW50IC0gMTtcclxuXHJcbiAgICAgICAgaWYgKCFzaW5jZUxhc3RCdWlsZE9ubHkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cERhdGFUZXh0dXJlcygpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJhc2VEYXRhRnJvbVNwbGF0QnVmZmVycygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmFzZURhdGFGcm9tU3BsYXRCdWZmZXJzKGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlc0Zyb21CYXNlRGF0YShmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVJlZ2lvbihzaW5jZUxhc3RCdWlsZE9ubHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldHVwRGF0YVRleHR1cmVzKCkge1xyXG4gICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSB0aGlzLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3Bvc2VUZXh0dXJlcygpO1xyXG5cclxuICAgICAgICBjb25zdCBjb21wdXRlRGF0YVRleHR1cmVTaXplID0gKGVsZW1lbnRzUGVyVGV4ZWwsIGVsZW1lbnRzUGVyU3BsYXQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGV4U2l6ZSA9IG5ldyBWZWN0b3IyKDQwOTYsIDEwMjQpO1xyXG4gICAgICAgICAgICB3aGlsZSAodGV4U2l6ZS54ICogdGV4U2l6ZS55ICogZWxlbWVudHNQZXJUZXhlbCA8IG1heFNwbGF0Q291bnQgKiBlbGVtZW50c1BlclNwbGF0KSB0ZXhTaXplLnkgKj0gMjtcclxuICAgICAgICAgICAgcmV0dXJuIHRleFNpemU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZ2V0Q292YXJpYW5jZXNFbGVtZW50c1BlcnRleGVsU3RvcmVkID0gKGNvbXByZXNzaW9uTGV2ZWwpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX1NUT1JFRCA6IENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9TVE9SRUQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZ2V0Q292YXJpYW5jZXNJbml0aWFsVGV4dHVyZVNwZWNzID0gKGNvbXByZXNzaW9uTGV2ZWwpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHNQZXJUZXhlbFN0b3JlZCA9IGdldENvdmFyaWFuY2VzRWxlbWVudHNQZXJ0ZXhlbFN0b3JlZChjb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgY29uc3QgdGV4U2l6ZSA9IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUoZWxlbWVudHNQZXJUZXhlbFN0b3JlZCwgNik7XHJcbiAgICAgICAgICAgIHJldHVybiB7ZWxlbWVudHNQZXJUZXhlbFN0b3JlZCwgdGV4U2l6ZX07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID0gdGhpcy5nZXRUYXJnZXRDb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCgpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID0gMDtcclxuICAgICAgICBjb25zdCBzaENvbXByZXNzaW9uTGV2ZWwgPSB0aGlzLmdldFRhcmdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXByZXNzaW9uTGV2ZWwoKTtcclxuXHJcbiAgICAgICAgbGV0IGNvdmFyaWFuY2VzO1xyXG4gICAgICAgIGxldCBzY2FsZXM7XHJcbiAgICAgICAgbGV0IHJvdGF0aW9ucztcclxuICAgICAgICBpZiAodGhpcy5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQpIHtcclxuICAgICAgICAgICAgY29uc3QgaW5pdGlhbENvdlRleFNwZWNzID0gZ2V0Q292YXJpYW5jZXNJbml0aWFsVGV4dHVyZVNwZWNzKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgaWYgKGluaXRpYWxDb3ZUZXhTcGVjcy50ZXhTaXplLnggKiBpbml0aWFsQ292VGV4U3BlY3MudGV4U2l6ZS55ID4gTUFYX1RFWFRVUkVfVEVYRUxTICYmIGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY292YXJpYW5jZXMgPSBuZXcgRmxvYXQzMkFycmF5KG1heFNwbGF0Q291bnQgKiBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfU1BMQVQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjYWxlcyA9IG5ldyBGbG9hdDMyQXJyYXkobWF4U3BsYXRDb3VudCAqIDMpO1xyXG4gICAgICAgICAgICByb3RhdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KG1heFNwbGF0Q291bnQgKiA0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGNlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KG1heFNwbGF0Q291bnQgKiAzKTtcclxuICAgICAgICBjb25zdCBjb2xvcnMgPSBuZXcgVWludDhBcnJheShtYXhTcGxhdENvdW50ICogNCk7XHJcblxyXG4gICAgICAgIGxldCBTcGhlcmljYWxIYXJtb25pY3NBcnJheVR5cGUgPSBGbG9hdDMyQXJyYXk7XHJcbiAgICAgICAgaWYgKHNoQ29tcHJlc3Npb25MZXZlbCA9PT0gMSkgU3BoZXJpY2FsSGFybW9uaWNzQXJyYXlUeXBlID0gVWludDE2QXJyYXk7XHJcbiAgICAgICAgZWxzZSBpZiAoc2hDb21wcmVzc2lvbkxldmVsID09PSAyKSBTcGhlcmljYWxIYXJtb25pY3NBcnJheVR5cGUgPSBVaW50OEFycmF5O1xyXG4gICAgICAgIGNvbnN0IHNoQ29tcG9uZW50Q291bnQgPSBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSh0aGlzLm1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgY29uc3Qgc2hEYXRhID0gdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPyBuZXcgU3BoZXJpY2FsSGFybW9uaWNzQXJyYXlUeXBlKG1heFNwbGF0Q291bnQgKiBzaENvbXBvbmVudENvdW50KSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgLy8gc2V0IHVwIGNlbnRlcnMvY29sb3JzIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGNvbnN0IGNlbnRlcnNDb2xzVGV4U2l6ZSA9IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUoQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUwsIDQpO1xyXG4gICAgICAgIGNvbnN0IHBhZGRlZENlbnRlcnNDb2xzID0gbmV3IFVpbnQzMkFycmF5KGNlbnRlcnNDb2xzVGV4U2l6ZS54ICogY2VudGVyc0NvbHNUZXhTaXplLnkgKiBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCk7XHJcbiAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZUNlbnRlckNvbG9yc1BhZGRlZERhdGEoMCwgc3BsYXRDb3VudCAtIDEsIGNlbnRlcnMsIGNvbG9ycywgcGFkZGVkQ2VudGVyc0NvbHMpO1xyXG5cclxuICAgICAgICBjb25zdCBjZW50ZXJzQ29sc1RleCA9IG5ldyBEYXRhVGV4dHVyZShwYWRkZWRDZW50ZXJzQ29scywgY2VudGVyc0NvbHNUZXhTaXplLngsIGNlbnRlcnNDb2xzVGV4U2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LCBVbnNpZ25lZEludFR5cGUpO1xyXG4gICAgICAgIGNlbnRlcnNDb2xzVGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgICAgICBjZW50ZXJzQ29sc1RleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jZW50ZXJzQ29sb3JzVGV4dHVyZS52YWx1ZSA9IGNlbnRlcnNDb2xzVGV4O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY2VudGVyc0NvbG9yc1RleHR1cmVTaXplLnZhbHVlLmNvcHkoY2VudGVyc0NvbHNUZXhTaXplKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMgPSB7XHJcbiAgICAgICAgICAgICdiYXNlRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdjb3ZhcmlhbmNlcyc6IGNvdmFyaWFuY2VzLFxyXG4gICAgICAgICAgICAgICAgJ3NjYWxlcyc6IHNjYWxlcyxcclxuICAgICAgICAgICAgICAgICdyb3RhdGlvbnMnOiByb3RhdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAnY2VudGVycyc6IGNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAnY29sb3JzJzogY29sb3JzLFxyXG4gICAgICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljcyc6IHNoRGF0YVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY2VudGVyQ29sb3JzJzoge1xyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiBwYWRkZWRDZW50ZXJzQ29scyxcclxuICAgICAgICAgICAgICAgICd0ZXh0dXJlJzogY2VudGVyc0NvbHNUZXgsXHJcbiAgICAgICAgICAgICAgICAnc2l6ZSc6IGNlbnRlcnNDb2xzVGV4U2l6ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVGhyZWVEKSB7XHJcbiAgICAgICAgICAgIC8vIHNldCB1cCBjb3ZhcmlhbmNlcyBkYXRhIHRleHR1cmVcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvdlRleFNwZWNzID0gZ2V0Q292YXJpYW5jZXNJbml0aWFsVGV4dHVyZVNwZWNzKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNFbGVtZW50c1BlclRleGVsU3RvcmVkID0gY292VGV4U3BlY3MuZWxlbWVudHNQZXJUZXhlbFN0b3JlZDtcclxuICAgICAgICAgICAgY29uc3QgY292VGV4U2l6ZSA9IGNvdlRleFNwZWNzLnRleFNpemU7XHJcblxyXG4gICAgICAgICAgICBsZXQgQ292YXJpYW5jZXNEYXRhVHlwZSA9IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID49IDEgPyBVaW50MzJBcnJheSA6IEZsb2F0MzJBcnJheTtcclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNFbGVtZW50c1BlclRleGVsQWxsb2NhdGVkID0gY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9DT01QUkVTU0VEX0FMTE9DQVRFRCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzVGV4dHVyZURhdGEgPSBuZXcgQ292YXJpYW5jZXNEYXRhVHlwZShjb3ZUZXhTaXplLnggKiBjb3ZUZXhTaXplLnkgKiBjb3ZhcmlhbmNlc0VsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlc1RleHR1cmVEYXRhLnNldChjb3ZhcmlhbmNlcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBTcGxhdE1lc2gudXBkYXRlUGFkZGVkQ29tcHJlc3NlZENvdmFyaWFuY2VzVGV4dHVyZURhdGEoY292YXJpYW5jZXMsIGNvdmFyaWFuY2VzVGV4dHVyZURhdGEsIDAsIDAsIGNvdmFyaWFuY2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBjb3ZUZXg7XHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb3ZUZXggPSBuZXcgRGF0YVRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlRGF0YSwgY292VGV4U2l6ZS54LCBjb3ZUZXhTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgICAgICAgICBjb3ZUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5jb3ZhcmlhbmNlc1RleHR1cmVIYWxmRmxvYXQudmFsdWUgPSBjb3ZUZXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb3ZUZXggPSBuZXcgRGF0YVRleHR1cmUoY292YXJpYW5jZXNUZXh0dXJlRGF0YSwgY292VGV4U2l6ZS54LCBjb3ZUZXhTaXplLnksIFJHQkFGb3JtYXQsIEZsb2F0VHlwZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvdmFyaWFuY2VzVGV4dHVyZS52YWx1ZSA9IGNvdlRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gYSB1c2FtcGxlcjJEIG5lZWRzIHRvIGhhdmUgYSB2YWxpZCB0ZXh0dXJlIGF0dGFjaGVkIG9yIFdlYkdMIGNvbXBsYWluc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZHVtbXlUZXggPSBuZXcgRGF0YVRleHR1cmUobmV3IFVpbnQzMkFycmF5KDMyKSwgMiwgMiwgUkdCQUludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgICAgICAgICBkdW1teVRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvdmFyaWFuY2VzVGV4dHVyZUhhbGZGbG9hdC52YWx1ZSA9IGR1bW15VGV4O1xyXG4gICAgICAgICAgICAgICAgZHVtbXlUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvdlRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmNvdmFyaWFuY2VzQXJlSGFsZkZsb2F0LnZhbHVlID0gKGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID49IDEpID8gMSA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuY292YXJpYW5jZXNUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGNvdlRleFNpemUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snY292YXJpYW5jZXMnXSA9IHtcclxuICAgICAgICAgICAgICAgICdkYXRhJzogY292YXJpYW5jZXNUZXh0dXJlRGF0YSxcclxuICAgICAgICAgICAgICAgICd0ZXh0dXJlJzogY292VGV4LFxyXG4gICAgICAgICAgICAgICAgJ3NpemUnOiBjb3ZUZXhTaXplLFxyXG4gICAgICAgICAgICAgICAgJ2NvbXByZXNzaW9uTGV2ZWwnOiBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICdlbGVtZW50c1BlclRleGVsU3RvcmVkJzogY292YXJpYW5jZXNFbGVtZW50c1BlclRleGVsU3RvcmVkLFxyXG4gICAgICAgICAgICAgICAgJ2VsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWQnOiBjb3ZhcmlhbmNlc0VsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzZXQgdXAgc2NhbGUgJiByb3RhdGlvbnMgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzUGVyU3BsYXQgPSA2O1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc1RleFNpemUgPSBjb21wdXRlRGF0YVRleHR1cmVTaXplKFNDQUxFU19ST1RBVElPTlNfRUxFTUVOVFNfUEVSX1RFWEVMLCBlbGVtZW50c1BlclNwbGF0KTtcclxuICAgICAgICAgICAgbGV0IFNjYWxlUm90YXRpb25zRGF0YVR5cGUgPSBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA+PSAxID8gVWludDE2QXJyYXkgOiBGbG9hdDMyQXJyYXk7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZVJvdGF0aW9uc1RleHR1cmVUeXBlID0gc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IEhhbGZGbG9hdFR5cGUgOiBGbG9hdFR5cGU7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNjYWxlUm90YXRpb25zID0gbmV3IFNjYWxlUm90YXRpb25zRGF0YVR5cGUoc2NhbGVSb3RhdGlvbnNUZXhTaXplLnggKiBzY2FsZVJvdGF0aW9uc1RleFNpemUueSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0NBTEVTX1JPVEFUSU9OU19FTEVNRU5UU19QRVJfVEVYRUwpO1xyXG5cclxuICAgICAgICAgICAgU3BsYXRNZXNoLnVwZGF0ZVNjYWxlUm90YXRpb25zUGFkZGVkRGF0YSgwLCBzcGxhdENvdW50IC0gMSwgc2NhbGVzLCByb3RhdGlvbnMsIHBhZGRlZFNjYWxlUm90YXRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zVGV4ID0gbmV3IERhdGFUZXh0dXJlKHBhZGRlZFNjYWxlUm90YXRpb25zLCBzY2FsZVJvdGF0aW9uc1RleFNpemUueCwgc2NhbGVSb3RhdGlvbnNUZXhTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJHQkFGb3JtYXQsIHNjYWxlUm90YXRpb25zVGV4dHVyZVR5cGUpO1xyXG4gICAgICAgICAgICBzY2FsZVJvdGF0aW9uc1RleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NhbGVSb3RhdGlvbnNUZXh0dXJlLnZhbHVlID0gc2NhbGVSb3RhdGlvbnNUZXg7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NhbGVSb3RhdGlvbnNUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KHNjYWxlUm90YXRpb25zVGV4U2l6ZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzY2FsZVJvdGF0aW9ucyddID0ge1xyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiBwYWRkZWRTY2FsZVJvdGF0aW9ucyxcclxuICAgICAgICAgICAgICAgICd0ZXh0dXJlJzogc2NhbGVSb3RhdGlvbnNUZXgsXHJcbiAgICAgICAgICAgICAgICAnc2l6ZSc6IHNjYWxlUm90YXRpb25zVGV4U2l6ZSxcclxuICAgICAgICAgICAgICAgICdjb21wcmVzc2lvbkxldmVsJzogc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzaERhdGEpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hUZXh0dXJlVHlwZSA9IHNoQ29tcHJlc3Npb25MZXZlbCA9PT0gMiA/IFVuc2lnbmVkQnl0ZVR5cGUgOiBIYWxmRmxvYXRUeXBlO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBhZGRlZFNIQ29tcG9uZW50Q291bnQgPSBzaENvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICBpZiAocGFkZGVkU0hDb21wb25lbnRDb3VudCAlIDIgIT09IDApIHBhZGRlZFNIQ29tcG9uZW50Q291bnQrKztcclxuICAgICAgICAgICAgY29uc3Qgc2hFbGVtZW50c1BlclRleGVsID0gdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPT09IDIgPyA0IDogMjtcclxuICAgICAgICAgICAgY29uc3QgdGV4ZWxGb3JtYXQgPSBzaEVsZW1lbnRzUGVyVGV4ZWwgPT09IDQgPyBSR0JBRm9ybWF0IDogUkdGb3JtYXQ7XHJcbiAgICAgICAgICAgIGxldCBzaFRleFNpemUgPSBjb21wdXRlRGF0YVRleHR1cmVTaXplKHNoRWxlbWVudHNQZXJUZXhlbCwgcGFkZGVkU0hDb21wb25lbnRDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAvLyBVc2Ugb25lIHRleHR1cmUgZm9yIGFsbCBzcGhlcmljYWwgaGFybW9uaWNzIGRhdGFcclxuICAgICAgICAgICAgaWYgKHNoVGV4U2l6ZS54ICogc2hUZXhTaXplLnkgPD0gTUFYX1RFWFRVUkVfVEVYRUxTKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5U2l6ZSA9IHNoVGV4U2l6ZS54ICogc2hUZXhTaXplLnkgKiBzaEVsZW1lbnRzUGVyVGV4ZWw7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5ID0gbmV3IFNwaGVyaWNhbEhhcm1vbmljc0FycmF5VHlwZShwYWRkZWRTSEFycmF5U2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHNwbGF0Q291bnQ7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY0Jhc2UgPSBzaENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0QmFzZSA9IHBhZGRlZFNIQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hDb21wb25lbnRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRlZFNIQXJyYXlbZGVzdEJhc2UgKyBpXSA9IHNoRGF0YVtzcmNCYXNlICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoVGV4dHVyZSA9IG5ldyBEYXRhVGV4dHVyZShwYWRkZWRTSEFycmF5LCBzaFRleFNpemUueCwgc2hUZXhTaXplLnksIHRleGVsRm9ybWF0LCBzaFRleHR1cmVUeXBlKTtcclxuICAgICAgICAgICAgICAgIHNoVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmUudmFsdWUgPSBzaFRleHR1cmU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzcGhlcmljYWxIYXJtb25pY3MnXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnY29tcG9uZW50Q291bnQnOiBzaENvbXBvbmVudENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICdwYWRkZWRDb21wb25lbnRDb3VudCc6IHBhZGRlZFNIQ29tcG9uZW50Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEnOiBwYWRkZWRTSEFycmF5LFxyXG4gICAgICAgICAgICAgICAgICAgICd0ZXh0dXJlQ291bnQnOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICd0ZXh0dXJlJzogc2hUZXh0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICdzaXplJzogc2hUZXhTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICdjb21wcmVzc2lvbkxldmVsJzogc2hDb21wcmVzc2lvbkxldmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICdlbGVtZW50c1BlclRleGVsJzogc2hFbGVtZW50c1BlclRleGVsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBVc2UgdGhyZWUgdGV4dHVyZXMgZm9yIHNwaGVyaWNhbCBoYXJtb25pY3MgZGF0YSwgb25lIHBlciBjb2xvciBjaGFubmVsXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCA9IHNoQ29tcG9uZW50Q291bnQgLyAzO1xyXG4gICAgICAgICAgICAgICAgcGFkZGVkU0hDb21wb25lbnRDb3VudCA9IHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhZGRlZFNIQ29tcG9uZW50Q291bnQgJSAyICE9PSAwKSBwYWRkZWRTSENvbXBvbmVudENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBzaFRleFNpemUgPSBjb21wdXRlRGF0YVRleHR1cmVTaXplKHNoRWxlbWVudHNQZXJUZXhlbCwgcGFkZGVkU0hDb21wb25lbnRDb3VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFkZGVkU0hBcnJheVNpemUgPSBzaFRleFNpemUueCAqIHNoVGV4U2l6ZS55ICogc2hFbGVtZW50c1BlclRleGVsO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dHVyZVVuaWZvcm1zID0gW3RoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzVGV4dHVyZVIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlRyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwaGVyaWNhbEhhcm1vbmljc1RleHR1cmVCXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXlzID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaFRleHR1cmVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDM7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXkgPSBuZXcgU3BoZXJpY2FsSGFybW9uaWNzQXJyYXlUeXBlKHBhZGRlZFNIQXJyYXlTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkZWRTSEFycmF5cy5wdXNoKHBhZGRlZFNIQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgc3BsYXRDb3VudDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY0Jhc2UgPSBzaENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdEJhc2UgPSBwYWRkZWRTSENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsID49IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSBwYWRkZWRTSEFycmF5W2Rlc3RCYXNlICsgaV0gPSBzaERhdGFbc3JjQmFzZSArIHQgKiAzICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwgPj0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSBwYWRkZWRTSEFycmF5W2Rlc3RCYXNlICsgMyArIGldID0gc2hEYXRhW3NyY0Jhc2UgKyA5ICsgdCAqIDUgKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hUZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlKHBhZGRlZFNIQXJyYXksIHNoVGV4U2l6ZS54LCBzaFRleFNpemUueSwgdGV4ZWxGb3JtYXQsIHNoVGV4dHVyZVR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNoVGV4dHVyZXMucHVzaChzaFRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNoVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVVuaWZvcm1zW3RdLnZhbHVlID0gc2hUZXh0dXJlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzTXVsdGlUZXh0dXJlTW9kZS52YWx1ZSA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzcGhlcmljYWxIYXJtb25pY3MnXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnY29tcG9uZW50Q291bnQnOiBzaENvbXBvbmVudENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICdjb21wb25lbnRDb3VudFBlckNoYW5uZWwnOiBzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCxcclxuICAgICAgICAgICAgICAgICAgICAncGFkZGVkQ29tcG9uZW50Q291bnQnOiBwYWRkZWRTSENvbXBvbmVudENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhJzogcGFkZGVkU0hBcnJheXMsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RleHR1cmVDb3VudCc6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RleHR1cmVzJzogc2hUZXh0dXJlcyxcclxuICAgICAgICAgICAgICAgICAgICAnc2l6ZSc6IHNoVGV4U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAnY29tcHJlc3Npb25MZXZlbCc6IHNoQ29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAnZWxlbWVudHNQZXJUZXhlbCc6IHNoRWxlbWVudHNQZXJUZXhlbFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3NUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KHNoVGV4U2l6ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzOEJpdE1vZGUudmFsdWUgPSBzaENvbXByZXNzaW9uTGV2ZWwgPT09IDIgPyAxIDogMDtcclxuICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IHMrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSB0aGlzLnNjZW5lc1tzXS5zcGxhdEJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uUmFuZ2VNaW4udmFsdWVbc10gPVxyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0QnVmZmVyLm1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5zcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZU1heC52YWx1ZVtzXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRCdWZmZXIubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleGVzVGV4U2l6ZSA9IGNvbXB1dGVEYXRhVGV4dHVyZVNpemUoU0NFTkVfSU5ERVhFU19FTEVNRU5UU19QRVJfVEVYRUwsIDQpO1xyXG4gICAgICAgIGNvbnN0IHBhZGRlZFRyYW5zZm9ybUluZGV4ZXMgPSBuZXcgVWludDMyQXJyYXkoc2NlbmVJbmRleGVzVGV4U2l6ZS54ICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lSW5kZXhlc1RleFNpemUueSAqIFNDRU5FX0lOREVYRVNfRUxFTUVOVFNfUEVSX1RFWEVMKTtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHNwbGF0Q291bnQ7IGMrKykgcGFkZGVkVHJhbnNmb3JtSW5kZXhlc1tjXSA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcFtjXTtcclxuICAgICAgICBjb25zdCBzY2VuZUluZGV4ZXNUZXh0dXJlID0gbmV3IERhdGFUZXh0dXJlKHBhZGRlZFRyYW5zZm9ybUluZGV4ZXMsIHNjZW5lSW5kZXhlc1RleFNpemUueCwgc2NlbmVJbmRleGVzVGV4U2l6ZS55LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICBzY2VuZUluZGV4ZXNUZXh0dXJlLmludGVybmFsRm9ybWF0ID0gJ1IzMlVJJztcclxuICAgICAgICBzY2VuZUluZGV4ZXNUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjZW5lSW5kZXhlc1RleHR1cmUudmFsdWUgPSBzY2VuZUluZGV4ZXNUZXh0dXJlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NlbmVJbmRleGVzVGV4dHVyZVNpemUudmFsdWUuY29weShzY2VuZUluZGV4ZXNUZXhTaXplKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc2NlbmVJbmRleGVzJ10gPSB7XHJcbiAgICAgICAgICAgICdkYXRhJzogcGFkZGVkVHJhbnNmb3JtSW5kZXhlcyxcclxuICAgICAgICAgICAgJ3RleHR1cmUnOiBzY2VuZUluZGV4ZXNUZXh0dXJlLFxyXG4gICAgICAgICAgICAnc2l6ZSc6IHNjZW5lSW5kZXhlc1RleFNpemVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NlbmVDb3VudC52YWx1ZSA9IHRoaXMuc2NlbmVzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy8gRkxBTUUtc3BlY2lmaWMgc2V0dXAgKG9ubHkgaWYgZmxhbWVNb2RlbCBoYXMgcmVxdWlyZWQgZGF0YSlcclxuICAgICAgICBpZiAodGhpcy5mbGFtZU1vZGVsICYmIHRoaXMuZmxhbWVNb2RlbC5nZW9tZXRyeSAmJiB0aGlzLmZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzICYmIHRoaXMuZmxhbWVNb2RlbC5za2VsZXRvbikge1xyXG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25CU051bSA9IHRoaXMuZmxhbWVNb2RlbC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJzQ291bnQudmFsdWUgPSB0aGlzLmV4cHJlc3Npb25CU051bTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmxhbWVNb2RlbC5za2VsZXRvbi5ib25lcy5mb3JFYWNoKChib25lLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvbmUubmFtZSA9PSAnaGVhZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5oZWFkQm9uZUluZGV4LnZhbHVlID0gaW5kZXg7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5idWlsZE1vZGVsVGV4dHVyZSh0aGlzLmZsYW1lTW9kZWwpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQm9uZU1hdHJpeFRleHR1cmUoKTtcclxuICAgICAgICAgICAgdGhpcy5idWlsZEJvbmVXZWlnaHRUZXh0dXJlKHRoaXMuZmxhbWVNb2RlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkQm9uZU1hdHJpeFRleHR1cmUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJzV2VpZ2h0KVxyXG4gICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgLy8gR3VhcmQ6IFJlcXVpcmVzIEZMQU1FIG1vZGVsIHdpdGggbW9ycGhUYXJnZXREaWN0aW9uYXJ5XHJcbiAgICAgICAgaWYgKCF0aGlzLmZsYW1lTW9kZWwgfHwgIXRoaXMuZmxhbWVNb2RlbC5tb3JwaFRhcmdldERpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90aGlzLmJvbmVzTnVtICsgdGhpcy5leHByZXNzaW9uQlNOdW0gLyA0ID0gMzAsIHNvIDMyXHJcbiAgICAgICAgY29uc3QgYm9uZVRleHR1cmVTaXplID0gbmV3IFZlY3RvcjIoNCwgMzIpO1xyXG4gICAgICAgIGxldCBib25lTWF0cml4VGV4dHVyZURhdGEgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYm9uZXNNYXRyaXgpO1xyXG4gICAgICAgIGxldCBib25lTWF0cml4VGV4dHVyZURhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoYm9uZVRleHR1cmVTaXplLnggKiBib25lVGV4dHVyZVNpemUueSAqIDQpO1xyXG4gICAgICAgIHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5ID0gdGhpcy5mbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmJvbmVzTnVtICogMTY7IGMrKykge1xyXG4gICAgICAgICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnRbY10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVNYXRyaXhUZXh0dXJlRGF0YVtjXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZsYW1lTW9kZWwgJiYgdGhpcy5mbGFtZU1vZGVsLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUwLnZhbHVlID0gdGhpcy5mbGFtZU1vZGVsLnNrZWxldG9uLmJvbmVUZXh0dXJlO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJpbmRNYXRyaXgudmFsdWUgPSB0aGlzLmZsYW1lTW9kZWwuYmluZE1hdHJpeDtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5iaW5kTWF0cml4SW52ZXJzZS52YWx1ZSA9IHRoaXMuZmxhbWVNb2RlbC5iaW5kTWF0cml4SW52ZXJzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5ic1dlaWdodCkge1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093bih0aGlzLmJzV2VpZ2h0LCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuYnNXZWlnaHRba2V5XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5W2tleV07XHJcbiAgICAgICAgICAgICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnRbaWR4ICsgdGhpcy5ib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuYnNXZWlnaHQubGVuZ3RoOyBjKyspIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5tb3JwaFRhcmdldERpY3Rpb25hcnlcclxuICAgICAgICAvLyAgICAgYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50W2MgKyB0aGlzLmJvbmVzTnVtICogMTZdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJzV2VpZ2h0W2NdKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGNvbnN0IGJvbmVNYXRyaXhUZXggPSBuZXcgRGF0YVRleHR1cmUoYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50LCBib25lVGV4dHVyZVNpemUueCwgYm9uZVRleHR1cmVTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgYm9uZU1hdHJpeFRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICAgICAgYm9uZU1hdHJpeFRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZS52YWx1ZSA9IGJvbmVNYXRyaXhUZXg7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5ib25lVGV4dHVyZVNpemUudmFsdWUuY29weShib25lVGV4dHVyZVNpemUpO1xyXG5cclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXSA9IHtcclxuICAgICAgICAgICAgJ2RhdGEnOiBib25lTWF0cml4VGV4dHVyZURhdGFJbnQsXHJcbiAgICAgICAgICAgICd0ZXh0dXJlJzogYm9uZU1hdHJpeFRleCxcclxuICAgICAgICAgICAgJ3NpemUnOiBib25lVGV4dHVyZVNpemUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J10gPSBib25lTWF0cml4VGV4dHVyZURhdGFJbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQm9uZU1hdHJpeFRleHR1cmUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJzV2VpZ2h0IHx8ICF0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSlcclxuICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuYnNXZWlnaHQpIHtcclxuICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd24odGhpcy5ic1dlaWdodCwga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmJzV2VpZ2h0W2tleV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZU1hdHJpeCddW2lkeCArIHRoaXMuYm9uZXNOdW0gKiAxNl0gPSB1aW50RW5jb2RlZEZsb2F0KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZm9yIChsZXQgYyA9IDA7IGMgPCB0aGlzLmJzV2VpZ2h0Lmxlbmd0aDsgYysrKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVNYXRyaXgnXVtjICsgdGhpcy5ib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ic1dlaWdodFtjXSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2JvbmVNYXRyaXgnXVsndGV4dHVyZSddLmRhdGEgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J107XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ10ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUudmFsdWUgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydib25lTWF0cml4J11bJ3RleHR1cmUnXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmxhbWVNb2RlbC5za2VsZXRvbikge1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlMC52YWx1ZSA9IHRoaXMuZmxhbWVNb2RlbC5za2VsZXRvbi5ib25lVGV4dHVyZTtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5iaW5kTWF0cml4LnZhbHVlID0gdGhpcy5mbGFtZU1vZGVsLmJpbmRNYXRyaXg7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeEludmVyc2UudmFsdWUgPSB0aGlzLmZsYW1lTW9kZWwuYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBidWlsZEJvbmVXZWlnaHRUZXh0dXJlKGZsYW1lTW9kZWwpIHtcclxuICAgICAgICAvLyBHdWFyZDogYm9uZXNXZWlnaHQgaXMgcmVxdWlyZWQgZm9yIEZMQU1FIGJvbmUgd2VpZ2h0IHRleHR1cmUgYnVpbGRpbmdcclxuICAgICAgICBpZiAoIXRoaXMuYm9uZXNXZWlnaHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNoYXBlZE1lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcblxyXG4gICAgICAgIGxldCBwb2ludE51bSA9IHNoYXBlZE1lc2gubGVuZ3RoIC8gMztcclxuICAgICAgICBjb25zdCBib25lV2VpZ2h0VGV4dHVyZVNpemUgPSBuZXcgVmVjdG9yMig1MTIsIDUxMik7XHJcbiAgICAgICAgbGV0IGJvbmVXZWlnaHRUZXh0dXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYm9uZVdlaWdodFRleHR1cmVTaXplLnggKiBib25lV2VpZ2h0VGV4dHVyZVNpemUueSAqIDQpO1xyXG4gICAgICAgIGxldCBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoYm9uZVdlaWdodFRleHR1cmVTaXplLnggKiBib25lV2VpZ2h0VGV4dHVyZVNpemUueSAqIDQpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnROdW07IGkrKykge1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAwXSA9IHRoaXMuYm9uZXNXZWlnaHRbaV1bMF07XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDFdID0gdGhpcy5ib25lc1dlaWdodFtpXVsxXTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgMl0gPSB0aGlzLmJvbmVzV2VpZ2h0W2ldWzJdO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAzXSA9IHRoaXMuYm9uZXNXZWlnaHRbaV1bM107XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDRdID0gdGhpcy5ib25lc1dlaWdodFtpXVs0XTtcclxuXHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDBdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJvbmVzV2VpZ2h0W2ldWzBdKTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgMV0gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYm9uZXNXZWlnaHRbaV1bMV0pO1xyXG4gICAgICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAyXSA9IHVpbnRFbmNvZGVkRmxvYXQodGhpcy5ib25lc1dlaWdodFtpXVsyXSk7XHJcbiAgICAgICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDNdID0gdWludEVuY29kZWRGbG9hdCh0aGlzLmJvbmVzV2VpZ2h0W2ldWzNdKTtcclxuICAgICAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgNF0gPSB1aW50RW5jb2RlZEZsb2F0KHRoaXMuYm9uZXNXZWlnaHRbaV1bNF0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYm9uZVdlaWdodFRleCA9IG5ldyBEYXRhVGV4dHVyZShib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQsIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS54LCBib25lV2VpZ2h0VGV4dHVyZVNpemUueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCwgVW5zaWduZWRJbnRUeXBlKTtcclxuICAgICAgICBcclxuICAgICAgICBib25lV2VpZ2h0VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgICAgICBib25lV2VpZ2h0VGV4Lm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVXZWlnaHRUZXh0dXJlLnZhbHVlID0gYm9uZVdlaWdodFRleDtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmJvbmVXZWlnaHRUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGJvbmVXZWlnaHRUZXh0dXJlU2l6ZSk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydib25lV2VpZ2h0J10gPSB7XHJcbiAgICAgICAgICAgICdkYXRhJzogYm9uZVdlaWdodFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgICAgICAndGV4dHVyZSc6IGJvbmVXZWlnaHRUZXgsXHJcbiAgICAgICAgICAgICdzaXplJzogYm9uZVdlaWdodFRleHR1cmVTaXplLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnYm9uZVdlaWdodCddID0gYm9uZVdlaWdodFRleHR1cmVEYXRhSW50O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBidWlsZE1vZGVsVGV4dHVyZShmbGFtZU1vZGVsKSB7XHJcbiAgICAgICAgLy8gR3VhcmQ6IFJlcXVpcmVzIEZMQU1FIG1vZGVsIHdpdGggbW9ycGggYXR0cmlidXRlc1xyXG4gICAgICAgIGlmICghZmxhbWVNb2RlbCB8fCAhZmxhbWVNb2RlbC5nZW9tZXRyeSB8fCAhZmxhbWVNb2RlbC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMgfHwgIWZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZsYW1lTW9kZWxUZXhTaXplID0gbmV3IFZlY3RvcjIoNDA5NiwgMjA0OCk7XHJcblxyXG4gICAgICAgIHZhciBzaGFwZWRNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgICAgIHZhciBzaGFwZWRNZXNoQXJyYXkgPSBbXTsvL0FycmF5LmZyb20oc2hhcGVkTWVzaCk7XHJcbiAgICAgICAgbGV0IHBvaW50TnVtID0gc2hhcGVkTWVzaC5sZW5ndGggLyAzO1xyXG5cclxuICAgICAgICBsZXQgYnNMZW5ndGggPSBmbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGg7XHJcblxyXG4gICAgICAgIGNvbnN0IG1vcnBoVGFyZ2V0TmFtZXMgPSBPYmplY3Qua2V5cyhmbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeSk7XHJcbiAgICAgICAgbW9ycGhUYXJnZXROYW1lcy5mb3JFYWNoKChuYW1lLCBuZXdJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbEluZGV4ID0gZmxhbWVNb2RlbC5tb3JwaFRhcmdldERpY3Rpb25hcnlbbmFtZV07XHJcbiAgICAgICAgICAgIHZhciBic01lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbltvcmlnaW5hbEluZGV4XTtcclxuICAgICAgICAgICAgc2hhcGVkTWVzaEFycmF5ID0gc2hhcGVkTWVzaEFycmF5LmNvbmNhdChBcnJheS5mcm9tKGJzTWVzaC5hcnJheSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIHNoYXBlZE1lc2hBcnJheSA9IHNoYXBlZE1lc2hBcnJheS5jb25jYXQoQXJyYXkuZnJvbShzaGFwZWRNZXNoKSk7XHJcblxyXG4gICAgICAgIGxldCBmbGFtZU1vZGVsRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZmxhbWVNb2RlbFRleFNpemUueCAqIGZsYW1lTW9kZWxUZXhTaXplLnkgKiA0KTtcclxuICAgICAgICBsZXQgZmxhbWVNb2RlbERhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoZmxhbWVNb2RlbFRleFNpemUueCAqIGZsYW1lTW9kZWxUZXhTaXplLnkgKiA0KTtcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHBvaW50TnVtICogKGJzTGVuZ3RoICsgMSk7IGMrKykge1xyXG4gICAgICAgICAgICBmbGFtZU1vZGVsRGF0YVtjICogNCArIDBdID0gc2hhcGVkTWVzaEFycmF5W2MgKiAzICsgMF07XHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMV0gPSBzaGFwZWRNZXNoQXJyYXlbYyAqIDMgKyAxXTtcclxuICAgICAgICAgICAgZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAyXSA9IHNoYXBlZE1lc2hBcnJheVtjICogMyArIDJdO1xyXG5cclxuICAgICAgICAgICAgZmxhbWVNb2RlbERhdGFJbnRbYyAqIDQgKyAwXSA9IHVpbnRFbmNvZGVkRmxvYXQoZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAwXSk7XHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxEYXRhSW50W2MgKiA0ICsgMV0gPSB1aW50RW5jb2RlZEZsb2F0KGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMV0pO1xyXG4gICAgICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDJdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDJdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZsYW1lTW9kZWxUZXggPSBuZXcgRGF0YVRleHR1cmUoZmxhbWVNb2RlbERhdGFJbnQsIGZsYW1lTW9kZWxUZXhTaXplLngsIGZsYW1lTW9kZWxUZXhTaXplLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUkdCQUludGVnZXJGb3JtYXQsIFVuc2lnbmVkSW50VHlwZSk7XHJcbiAgICAgICAgZmxhbWVNb2RlbFRleC5pbnRlcm5hbEZvcm1hdCA9ICdSR0JBMzJVSSc7XHJcbiAgICAgICAgZmxhbWVNb2RlbFRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5mbGFtZU1vZGVsVGV4dHVyZS52YWx1ZSA9IGZsYW1lTW9kZWxUZXg7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5mbGFtZU1vZGVsVGV4dHVyZVNpemUudmFsdWUuY29weShmbGFtZU1vZGVsVGV4U2l6ZSk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuZ2F1c3NpYW5TcGxhdENvdW50LnZhbHVlID0gdGhpcy5nYXVzc2lhblNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2ZsYW1lTW9kZWwnXSA9IHtcclxuICAgICAgICAgICAgJ2RhdGEnOiBmbGFtZU1vZGVsRGF0YUludCxcclxuICAgICAgICAgICAgJ3RleHR1cmUnOiBmbGFtZU1vZGVsVGV4LFxyXG4gICAgICAgICAgICAnc2l6ZSc6IGZsYW1lTW9kZWxUZXhTaXplLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YVsnZmxhbWVNb2RlbFBvcyddID0gZmxhbWVNb2RlbERhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVGV0dXJlQWZ0ZXJCU0FuZFNrZWxldG9uKGZyb21TcGxhdCwgdG9TcGxhdCkge1xyXG4gICAgICAgIGNvbnN0IHNjZW5lVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRTY2VuZVRyYW5zZm9ybSgwLCBzY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgdGhpcy5nZXRTY2VuZSgwKS5zcGxhdEJ1ZmZlci5maWxsU3BsYXRDZW50ZXJBcnJheSh0aGlzLm1vcnBoZWRNZXNoLCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNlbnRlcnMsIHNjZW5lVHJhbnNmb3JtLCBmcm9tU3BsYXQsIHRvU3BsYXQsIDApO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgY2VudGVyICYgY29sb3IgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydjZW50ZXJDb2xvcnMnXTtcclxuICAgICAgICBjb25zdCBwYWRkZWRDZW50ZXJDb2xvcnMgPSBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc1RleHR1cmUgPSBjZW50ZXJDb2xvcnNUZXh0dXJlRGVzY3JpcHRvci50ZXh0dXJlO1xyXG4gICAgICAgIFNwbGF0TWVzaC51cGRhdGVDZW50ZXJDb2xvcnNQYWRkZWREYXRhKGZyb21TcGxhdCwgdG9TcGxhdCwgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jZW50ZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvbG9ycywgcGFkZGVkQ2VudGVyQ29sb3JzKTtcclxuICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChjZW50ZXJDb2xvcnNUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMgfHwgIWNlbnRlckNvbG9yc1RleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICBjZW50ZXJDb2xvcnNUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKHBhZGRlZENlbnRlckNvbG9ycywgY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IudGV4dHVyZSwgY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3Iuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyQ29sb3JzVGV4dHVyZVByb3BzLCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9URVhFTCwgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfU1BMQVQsIDQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZUJvbmVNYXRyaXhUZXh0dXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQmFzZURhdGFGcm9tU3BsYXRCdWZmZXJzKGZyb21TcGxhdCwgdG9TcGxhdCkge1xyXG4gICAgICAgIGNvbnN0IGNvdmFyYW5jZXNUZXh0dXJlRGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2NvdmFyaWFuY2VzJ107XHJcbiAgICAgICAgY29uc3QgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPSBjb3ZhcmFuY2VzVGV4dHVyZURlc2MgPyBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuY29tcHJlc3Npb25MZXZlbCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snc2NhbGVSb3RhdGlvbnMnXTtcclxuICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA9IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MgPyBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjLmNvbXByZXNzaW9uTGV2ZWwgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3Qgc2hJVGV4dHVyZURlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzcGhlcmljYWxIYXJtb25pY3MnXTtcclxuICAgICAgICBjb25zdCBzaENvbXByZXNzaW9uTGV2ZWwgPSBzaElUZXh0dXJlRGVzYyA/IHNoSVRleHR1cmVEZXNjLmNvbXByZXNzaW9uTGV2ZWwgOiAwO1xyXG5cclxuICAgICAgICB0aGlzLmZpbGxTcGxhdERhdGFBcnJheXModGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb3ZhcmlhbmNlcywgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5zY2FsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEucm90YXRpb25zLCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNlbnRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY29sb3JzLCB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLnNwaGVyaWNhbEhhcm1vbmljcywgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuZmxhbWVNb2RlbFBvcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCwgc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwsIHNoQ29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbVNwbGF0LCB0b1NwbGF0LCBmcm9tU3BsYXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZURhdGFUZXh0dXJlc0Zyb21CYXNlRGF0YShmcm9tU3BsYXQsIHRvU3BsYXQpIHtcclxuICAgICAgICBjb25zdCBjb3ZhcmFuY2VzVGV4dHVyZURlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydjb3ZhcmlhbmNlcyddO1xyXG4gICAgICAgIGNvbnN0IGNvdmFyaWFuY2VDb21wcmVzc2lvbkxldmVsID0gY292YXJhbmNlc1RleHR1cmVEZXNjID8gY292YXJhbmNlc1RleHR1cmVEZXNjLmNvbXByZXNzaW9uTGV2ZWwgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NjYWxlUm90YXRpb25zJ107XHJcbiAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbkNvbXByZXNzaW9uTGV2ZWwgPSBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjID8gc2NhbGVSb3RhdGlvbnNUZXh0dXJlRGVzYy5jb21wcmVzc2lvbkxldmVsIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHNoVGV4dHVyZURlc2MgPSB0aGlzLnNwbGF0RGF0YVRleHR1cmVzWydzcGhlcmljYWxIYXJtb25pY3MnXTtcclxuICAgICAgICBjb25zdCBzaENvbXByZXNzaW9uTGV2ZWwgPSBzaFRleHR1cmVEZXNjID8gc2hUZXh0dXJlRGVzYy5jb21wcmVzc2lvbkxldmVsIDogMDtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGZsYW1lIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGNvbnN0IGZsYW1lTW9kZWxUZXh0dXJlRGVzY3JpcHRvciA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ2ZsYW1lTW9kZWwnXTtcclxuICAgICAgICBjb25zdCBmbGFtZU1vZGVsUG9zID0gZmxhbWVNb2RlbFRleHR1cmVEZXNjcmlwdG9yLmRhdGE7XHJcbiAgICAgICAgY29uc3QgZmxhbWVNb2RlbFBvc1RleHR1cmUgPSBmbGFtZU1vZGVsVGV4dHVyZURlc2NyaXB0b3IudGV4dHVyZTtcclxuXHJcbiAgICAgICAgY29uc3QgZmxhbWVNb2RlbFBvc1RleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KGZsYW1lTW9kZWxQb3NUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFmbGFtZU1vZGVsUG9zVGV4dHVyZVByb3BzIHx8ICFmbGFtZU1vZGVsUG9zVGV4dHVyZVByb3BzLl9fd2ViZ2xUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIGZsYW1lTW9kZWxQb3NUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKGZsYW1lTW9kZWxQb3MsIGZsYW1lTW9kZWxUZXh0dXJlRGVzY3JpcHRvci50ZXh0dXJlLCBmbGFtZU1vZGVsVGV4dHVyZURlc2NyaXB0b3Iuc2l6ZSxcclxuICAgICAgICAgICAgICAgIGZsYW1lTW9kZWxQb3NUZXh0dXJlUHJvcHMsIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMLCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVCwgMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGNlbnRlciAmIGNvbG9yIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGNvbnN0IGNlbnRlckNvbG9yc1RleHR1cmVEZXNjcmlwdG9yID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlc1snY2VudGVyQ29sb3JzJ107XHJcbiAgICAgICAgY29uc3QgcGFkZGVkQ2VudGVyQ29sb3JzID0gY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IuZGF0YTtcclxuICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNUZXh0dXJlID0gY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IudGV4dHVyZTtcclxuICAgICAgICBTcGxhdE1lc2gudXBkYXRlQ2VudGVyQ29sb3JzUGFkZGVkRGF0YShmcm9tU3BsYXQsIHRvU3BsYXQsIHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuY2VudGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhLmNvbG9ycywgcGFkZGVkQ2VudGVyQ29sb3JzKTtcclxuICAgICAgICBjb25zdCBjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChjZW50ZXJDb2xvcnNUZXh0dXJlKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMgfHwgIWNlbnRlckNvbG9yc1RleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICBjZW50ZXJDb2xvcnNUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKHBhZGRlZENlbnRlckNvbG9ycywgY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3IudGV4dHVyZSwgY2VudGVyQ29sb3JzVGV4dHVyZURlc2NyaXB0b3Iuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJDb2xvcnNUZXh0dXJlUHJvcHMsIENFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMLCBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVCwgNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BsYXQsIHRvU3BsYXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdXBkYXRlIGNvdmFyaWFuY2UgZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgaWYgKGNvdmFyYW5jZXNUZXh0dXJlRGVzYykge1xyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc1RleHR1cmUgPSBjb3ZhcmFuY2VzVGV4dHVyZURlc2MudGV4dHVyZTtcclxuICAgICAgICAgICAgY29uc3QgY292YXJhbmNlc1N0YXJ0RWxlbWVudCA9IGZyb21TcGxhdCAqIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVDtcclxuICAgICAgICAgICAgY29uc3QgY292YXJpYW5jZXNFbmRFbGVtZW50ID0gdG9TcGxhdCAqIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNvdmFyYW5jZXNTdGFydEVsZW1lbnQ7IGkgPD0gY292YXJpYW5jZXNFbmRFbGVtZW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlID0gdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb3ZhcmlhbmNlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZGF0YVtpXSA9IGNvdmFyaWFuY2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBTcGxhdE1lc2gudXBkYXRlUGFkZGVkQ29tcHJlc3NlZENvdmFyaWFuY2VzVGV4dHVyZURhdGEodGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5jb3ZhcmlhbmNlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tU3BsYXQgKiBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZWxlbWVudHNQZXJUZXhlbEFsbG9jYXRlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3ZhcmFuY2VzU3RhcnRFbGVtZW50LCBjb3ZhcmlhbmNlc0VuZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb3ZhcmlhbmNlc1RleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KGNvdmFyaWFuY2VzVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIWNvdmFyaWFuY2VzVGV4dHVyZVByb3BzIHx8ICFjb3ZhcmlhbmNlc1RleHR1cmVQcm9wcy5fX3dlYmdsVGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YVRleHR1cmUoY292YXJhbmNlc1RleHR1cmVEZXNjLmRhdGEsIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy50ZXh0dXJlLCBjb3ZhcmFuY2VzVGV4dHVyZURlc2Muc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdmFyaWFuY2VzVGV4dHVyZVByb3BzLCBjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZWxlbWVudHNQZXJUZXhlbFN0b3JlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVCwgNCwgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShjb3ZhcmFuY2VzVGV4dHVyZURlc2MuZGF0YSwgY292YXJhbmNlc1RleHR1cmVEZXNjLnRleHR1cmUsIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlUHJvcHMsIGNvdmFyYW5jZXNUZXh0dXJlRGVzYy5lbGVtZW50c1BlclRleGVsQWxsb2NhdGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY292YXJhbmNlc1RleHR1cmVEZXNjLmVsZW1lbnRzUGVyVGV4ZWxBbGxvY2F0ZWQsIDIsIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBzY2FsZSBhbmQgcm90YXRpb24gZGF0YSB0ZXh0dXJlXHJcbiAgICAgICAgaWYgKHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFkZGVkU2NhbGVSb3RhdGlvbnMgPSBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlUm90YXRpb25zVGV4dHVyZSA9IHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2MudGV4dHVyZTtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHNQZXJTcGxhdCA9IDY7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzUGVyRWxlbWVudCA9IHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsID09PSAwID8gNCA6IDI7XHJcblxyXG4gICAgICAgICAgICBTcGxhdE1lc2gudXBkYXRlU2NhbGVSb3RhdGlvbnNQYWRkZWREYXRhKGZyb21TcGxhdCwgdG9TcGxhdCwgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5zY2FsZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdERhdGFUZXh0dXJlcy5iYXNlRGF0YS5yb3RhdGlvbnMsIHBhZGRlZFNjYWxlUm90YXRpb25zKTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVSb3RhdGlvbnNUZXh0dXJlUHJvcHMgPSB0aGlzLnJlbmRlcmVyID8gdGhpcy5yZW5kZXJlci5wcm9wZXJ0aWVzLmdldChzY2FsZVJvdGF0aW9uc1RleHR1cmUpIDogbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFzY2FsZVJvdGF0aW9uc1RleHR1cmVQcm9wcyB8fCAhc2NhbGVSb3RhdGlvbnNUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIHNjYWxlUm90YXRpb25zVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKHBhZGRlZFNjYWxlUm90YXRpb25zLCBzY2FsZVJvdGF0aW9uc1RleHR1cmVEZXNjLnRleHR1cmUsIHNjYWxlUm90YXRpb25zVGV4dHVyZURlc2Muc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVSb3RhdGlvbnNUZXh0dXJlUHJvcHMsIFNDQUxFU19ST1RBVElPTlNfRUxFTUVOVFNfUEVSX1RFWEVMLCBlbGVtZW50c1BlclNwbGF0LCBieXRlc1BlckVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGxhdCwgdG9TcGxhdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBzcGhlcmljYWwgaGFybW9uaWNzIGRhdGEgdGV4dHVyZVxyXG4gICAgICAgIGNvbnN0IHNoRGF0YSA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGEuc3BoZXJpY2FsSGFybW9uaWNzO1xyXG4gICAgICAgIGlmIChzaERhdGEpIHtcclxuICAgICAgICAgICAgbGV0IHNoQnl0ZXNQZXJFbGVtZW50ID0gNDtcclxuICAgICAgICAgICAgaWYgKHNoQ29tcHJlc3Npb25MZXZlbCA9PT0gMSkgc2hCeXRlc1BlckVsZW1lbnQgPSAyO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChzaENvbXByZXNzaW9uTGV2ZWwgPT09IDIpIHNoQnl0ZXNQZXJFbGVtZW50ID0gMTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRleHR1cmUgPSAoc2hUZXh0dXJlLCBzaFRleHR1cmVTaXplLCBlbGVtZW50c1BlclRleGVsLCBwYWRkZWRTSEFycmF5LCBwYWRkZWRTSENvbXBvbmVudENvdW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaFRleHR1cmVQcm9wcyA9IHRoaXMucmVuZGVyZXIgPyB0aGlzLnJlbmRlcmVyLnByb3BlcnRpZXMuZ2V0KHNoVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzaFRleHR1cmVQcm9wcyB8fCAhc2hUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaFRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFUZXh0dXJlKHBhZGRlZFNIQXJyYXksIHNoVGV4dHVyZSwgc2hUZXh0dXJlU2l6ZSwgc2hUZXh0dXJlUHJvcHMsIGVsZW1lbnRzUGVyVGV4ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkZWRTSENvbXBvbmVudENvdW50LCBzaEJ5dGVzUGVyRWxlbWVudCwgZnJvbVNwbGF0LCB0b1NwbGF0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoQ29tcG9uZW50Q291bnQgPSBzaFRleHR1cmVEZXNjLmNvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBwYWRkZWRTSENvbXBvbmVudENvdW50ID0gc2hUZXh0dXJlRGVzYy5wYWRkZWRDb21wb25lbnRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBmb3IgdGhlIGNhc2Ugb2YgYSBzaW5nbGUgdGV4dHVyZSBmb3IgYWxsIHNwaGVyaWNhbCBoYXJtb25pY3MgZGF0YVxyXG4gICAgICAgICAgICBpZiAoc2hUZXh0dXJlRGVzYy50ZXh0dXJlQ291bnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZGRlZFNIQXJyYXkgPSBzaFRleHR1cmVEZXNjLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjID0gZnJvbVNwbGF0OyBjIDw9IHRvU3BsYXQ7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY0Jhc2UgPSBzaENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0QmFzZSA9IHBhZGRlZFNIQ29tcG9uZW50Q291bnQgKiBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hDb21wb25lbnRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRlZFNIQXJyYXlbZGVzdEJhc2UgKyBpXSA9IHNoRGF0YVtzcmNCYXNlICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlVGV4dHVyZShzaFRleHR1cmVEZXNjLnRleHR1cmUsIHNoVGV4dHVyZURlc2Muc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hUZXh0dXJlRGVzYy5lbGVtZW50c1BlclRleGVsLCBwYWRkZWRTSEFycmF5LCBwYWRkZWRTSENvbXBvbmVudENvdW50KTtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIGZvciB0aGUgY2FzZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIGRhdGEgc3BsaXQgYW1vbmcgdGhyZWUgdGV4dHVyZXMsIG9uZSBmb3IgZWFjaCBjb2xvciBjaGFubmVsXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaENvbXBvbmVudENvdW50UGVyQ2hhbm5lbCA9IHNoVGV4dHVyZURlc2MuY29tcG9uZW50Q291bnRQZXJDaGFubmVsO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCAzOyB0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWRkZWRTSEFycmF5ID0gc2hUZXh0dXJlRGVzYy5kYXRhW3RdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGMgPSBmcm9tU3BsYXQ7IGMgPD0gdG9TcGxhdDsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY0Jhc2UgPSBzaENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdEJhc2UgPSBwYWRkZWRTSENvbXBvbmVudENvdW50ICogYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoQ29tcG9uZW50Q291bnRQZXJDaGFubmVsID49IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSBwYWRkZWRTSEFycmF5W2Rlc3RCYXNlICsgaV0gPSBzaERhdGFbc3JjQmFzZSArIHQgKiAzICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hDb21wb25lbnRDb3VudFBlckNoYW5uZWwgPj0gOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSBwYWRkZWRTSEFycmF5W2Rlc3RCYXNlICsgMyArIGldID0gc2hEYXRhW3NyY0Jhc2UgKyA5ICsgdCAqIDUgKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUZXh0dXJlKHNoVGV4dHVyZURlc2MudGV4dHVyZXNbdF0sIHNoVGV4dHVyZURlc2Muc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoVGV4dHVyZURlc2MuZWxlbWVudHNQZXJUZXhlbCwgcGFkZGVkU0hBcnJheSwgcGFkZGVkU0hDb21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHVwZGF0ZSBzY2VuZSBpbmRleCAmIHRyYW5zZm9ybSBkYXRhXHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleGVzVGV4RGVzYyA9IHRoaXMuc3BsYXREYXRhVGV4dHVyZXNbJ3NjZW5lSW5kZXhlcyddO1xyXG4gICAgICAgIGNvbnN0IHBhZGRlZFNjZW5lSW5kZXhlcyA9IHNjZW5lSW5kZXhlc1RleERlc2MuZGF0YTtcclxuICAgICAgICBmb3IgKGxldCBjID0gdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50OyBjIDw9IHRvU3BsYXQ7IGMrKykge1xyXG4gICAgICAgICAgICBwYWRkZWRTY2VuZUluZGV4ZXNbY10gPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXBbY107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNjZW5lSW5kZXhlc1RleHR1cmUgPSBzY2VuZUluZGV4ZXNUZXhEZXNjLnRleHR1cmU7XHJcbiAgICAgICAgY29uc3Qgc2NlbmVJbmRleGVzVGV4dHVyZVByb3BzID0gdGhpcy5yZW5kZXJlciA/IHRoaXMucmVuZGVyZXIucHJvcGVydGllcy5nZXQoc2NlbmVJbmRleGVzVGV4dHVyZSkgOiBudWxsO1xyXG4gICAgICAgIGlmICghc2NlbmVJbmRleGVzVGV4dHVyZVByb3BzIHx8ICFzY2VuZUluZGV4ZXNUZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpIHtcclxuICAgICAgICAgICAgc2NlbmVJbmRleGVzVGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhVGV4dHVyZShwYWRkZWRTY2VuZUluZGV4ZXMsIHNjZW5lSW5kZXhlc1RleERlc2MudGV4dHVyZSwgc2NlbmVJbmRleGVzVGV4RGVzYy5zaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lSW5kZXhlc1RleHR1cmVQcm9wcywgMSwgMSwgMSwgdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50LCB0b1NwbGF0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGFyZ2V0Q292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFUgPyAxIDogMDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXJnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wcmVzc2lvbkxldmVsKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heCgxLCB0aGlzLmdldE1heGltdW1TcGxhdEJ1ZmZlckNvbXByZXNzaW9uTGV2ZWwoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWF4aW11bVNwbGF0QnVmZmVyQ29tcHJlc3Npb25MZXZlbCgpIHtcclxuICAgICAgICBsZXQgbWF4Q29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5nZXRTY2VuZShpKTtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBzY2VuZS5zcGxhdEJ1ZmZlcjtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgc3BsYXRCdWZmZXIuY29tcHJlc3Npb25MZXZlbCA+IG1heENvbXByZXNzaW9uTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIG1heENvbXByZXNzaW9uTGV2ZWwgPSBzcGxhdEJ1ZmZlci5jb21wcmVzc2lvbkxldmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXhDb21wcmVzc2lvbkxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1pbmltdW1TcGxhdEJ1ZmZlckNvbXByZXNzaW9uTGV2ZWwoKSB7XHJcbiAgICAgICAgbGV0IG1pbkNvbXByZXNzaW9uTGV2ZWw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjZW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QnVmZmVyID0gc2NlbmUuc3BsYXRCdWZmZXI7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHNwbGF0QnVmZmVyLmNvbXByZXNzaW9uTGV2ZWwgPCBtaW5Db21wcmVzc2lvbkxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBtaW5Db21wcmVzc2lvbkxldmVsID0gc3BsYXRCdWZmZXIuY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWluQ29tcHJlc3Npb25MZXZlbDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY29tcHV0ZVRleHR1cmVVcGRhdGVSZWdpb24oc3RhcnRTcGxhdCwgZW5kU3BsYXQsIHRleHR1cmVXaWR0aCwgZWxlbWVudHNQZXJUZXhlbCwgZWxlbWVudHNQZXJTcGxhdCkge1xyXG4gICAgICAgIGNvbnN0IHRleGVsc1BlclNwbGF0ID0gZWxlbWVudHNQZXJTcGxhdCAvIGVsZW1lbnRzUGVyVGV4ZWw7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXJ0U3BsYXRUZXhlbHMgPSBzdGFydFNwbGF0ICogdGV4ZWxzUGVyU3BsYXQ7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRSb3cgPSBNYXRoLmZsb29yKHN0YXJ0U3BsYXRUZXhlbHMgLyB0ZXh0dXJlV2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0Um93RWxlbWVudCA9IHN0YXJ0Um93ICogdGV4dHVyZVdpZHRoICogZWxlbWVudHNQZXJUZXhlbDtcclxuXHJcbiAgICAgICAgY29uc3QgZW5kU3BsYXRUZXhlbHMgPSBlbmRTcGxhdCAqIHRleGVsc1BlclNwbGF0O1xyXG4gICAgICAgIGNvbnN0IGVuZFJvdyA9IE1hdGguZmxvb3IoZW5kU3BsYXRUZXhlbHMgLyB0ZXh0dXJlV2lkdGgpO1xyXG4gICAgICAgIGNvbnN0IGVuZFJvd0VuZEVsZW1lbnQgPSBlbmRSb3cgKiB0ZXh0dXJlV2lkdGggKiBlbGVtZW50c1BlclRleGVsICsgKHRleHR1cmVXaWR0aCAqIGVsZW1lbnRzUGVyVGV4ZWwpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnZGF0YVN0YXJ0Jzogc3RhcnRSb3dFbGVtZW50LFxyXG4gICAgICAgICAgICAnZGF0YUVuZCc6IGVuZFJvd0VuZEVsZW1lbnQsXHJcbiAgICAgICAgICAgICdzdGFydFJvdyc6IHN0YXJ0Um93LFxyXG4gICAgICAgICAgICAnZW5kUm93JzogZW5kUm93XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVEYXRhVGV4dHVyZShwYWRkZWREYXRhLCB0ZXh0dXJlLCB0ZXh0dXJlU2l6ZSwgdGV4dHVyZVByb3BzLCBlbGVtZW50c1BlclRleGVsLCBlbGVtZW50c1BlclNwbGF0LCBieXRlc1BlckVsZW1lbnQsIGZyb20sIHRvKSB7XHJcbiAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuICAgICAgICBjb25zdCB1cGRhdGVSZWdpb24gPSBTcGxhdE1lc2guY29tcHV0ZVRleHR1cmVVcGRhdGVSZWdpb24oZnJvbSwgdG8sIHRleHR1cmVTaXplLngsIGVsZW1lbnRzUGVyVGV4ZWwsIGVsZW1lbnRzUGVyU3BsYXQpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZUVsZW1lbnRDb3VudCA9IHVwZGF0ZVJlZ2lvbi5kYXRhRW5kIC0gdXBkYXRlUmVnaW9uLmRhdGFTdGFydDtcclxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhVmlldyA9IG5ldyBwYWRkZWREYXRhLmNvbnN0cnVjdG9yKHBhZGRlZERhdGEuYnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUmVnaW9uLmRhdGFTdGFydCAqIGJ5dGVzUGVyRWxlbWVudCwgdXBkYXRlRWxlbWVudENvdW50KTtcclxuICAgICAgICBjb25zdCB1cGRhdGVIZWlnaHQgPSB1cGRhdGVSZWdpb24uZW5kUm93IC0gdXBkYXRlUmVnaW9uLnN0YXJ0Um93ICsgMTtcclxuICAgICAgICBjb25zdCBnbFR5cGUgPSB0aGlzLndlYkdMVXRpbHMuY29udmVydCh0ZXh0dXJlLnR5cGUpO1xyXG4gICAgICAgIGNvbnN0IGdsRm9ybWF0ID0gdGhpcy53ZWJHTFV0aWxzLmNvbnZlcnQodGV4dHVyZS5mb3JtYXQsIHRleHR1cmUuY29sb3JTcGFjZSk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFRleHR1cmUgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVEVYVFVSRV9CSU5ESU5HXzJEKTtcclxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlUHJvcHMuX193ZWJnbFRleHR1cmUpO1xyXG4gICAgICAgIGdsLnRleFN1YkltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgMCwgdXBkYXRlUmVnaW9uLnN0YXJ0Um93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVNpemUueCwgdXBkYXRlSGVpZ2h0LCBnbEZvcm1hdCwgZ2xUeXBlLCB1cGRhdGVEYXRhVmlldyk7XHJcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgY3VycmVudFRleHR1cmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1cGRhdGVQYWRkZWRDb21wcmVzc2VkQ292YXJpYW5jZXNUZXh0dXJlRGF0YShzb3VyY2VEYXRhLCB0ZXh0dXJlRGF0YSwgdGV4dHVyZURhdGFTdGFydEluZGV4LCBmcm9tRWxlbWVudCwgdG9FbGVtZW50KSB7XHJcbiAgICAgICAgbGV0IHRleHR1cmVEYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0ZXh0dXJlRGF0YS5idWZmZXIpO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlRGF0YUluZGV4ID0gdGV4dHVyZURhdGFTdGFydEluZGV4O1xyXG4gICAgICAgIGxldCBzZXF1ZW50aWFsQ291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBmcm9tRWxlbWVudDsgaSA8PSB0b0VsZW1lbnQ7IGkrPTIpIHtcclxuICAgICAgICAgICAgdGV4dHVyZURhdGFWaWV3LnNldFVpbnQxNih0ZXh0dXJlRGF0YUluZGV4ICogMiwgc291cmNlRGF0YVtpXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRleHR1cmVEYXRhVmlldy5zZXRVaW50MTYodGV4dHVyZURhdGFJbmRleCAqIDIgKyAyLCBzb3VyY2VEYXRhW2kgKyAxXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRleHR1cmVEYXRhSW5kZXggKz0gMjtcclxuICAgICAgICAgICAgc2VxdWVudGlhbENvdW50Kys7XHJcbiAgICAgICAgICAgIGlmIChzZXF1ZW50aWFsQ291bnQgPj0gMykge1xyXG4gICAgICAgICAgICAgICAgdGV4dHVyZURhdGFJbmRleCArPSAyO1xyXG4gICAgICAgICAgICAgICAgc2VxdWVudGlhbENvdW50ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXBkYXRlQ2VudGVyQ29sb3JzUGFkZGVkRGF0YShmcm9tLCB0bywgY2VudGVycywgY29sb3JzLCBwYWRkZWRDZW50ZXJDb2xvcnMpIHtcclxuICAgICAgICBmb3IgKGxldCBjID0gZnJvbTsgYyA8PSB0bzsgYysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yc0Jhc2UgPSBjICogNDtcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyc0Jhc2UgPSBjICogMztcclxuICAgICAgICAgICAgY29uc3QgY2VudGVyQ29sb3JzQmFzZSA9IGMgKiA0O1xyXG4gICAgICAgICAgICBwYWRkZWRDZW50ZXJDb2xvcnNbY2VudGVyQ29sb3JzQmFzZV0gPSByZ2JhQXJyYXlUb0ludGVnZXIoY29sb3JzLCBjb2xvcnNCYXNlKTtcclxuICAgICAgICAgICAgcGFkZGVkQ2VudGVyQ29sb3JzW2NlbnRlckNvbG9yc0Jhc2UgKyAxXSA9IHVpbnRFbmNvZGVkRmxvYXQoY2VudGVyc1tjZW50ZXJzQmFzZV0pO1xyXG4gICAgICAgICAgICBwYWRkZWRDZW50ZXJDb2xvcnNbY2VudGVyQ29sb3JzQmFzZSArIDJdID0gdWludEVuY29kZWRGbG9hdChjZW50ZXJzW2NlbnRlcnNCYXNlICsgMV0pO1xyXG4gICAgICAgICAgICBwYWRkZWRDZW50ZXJDb2xvcnNbY2VudGVyQ29sb3JzQmFzZSArIDNdID0gdWludEVuY29kZWRGbG9hdChjZW50ZXJzW2NlbnRlcnNCYXNlICsgMl0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXBkYXRlU2NhbGVSb3RhdGlvbnNQYWRkZWREYXRhKGZyb20sIHRvLCBzY2FsZXMsIHJvdGF0aW9ucywgcGFkZGVkU2NhbGVSb3RhdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBjb21iaW5lZFNpemUgPSA2O1xyXG4gICAgICAgIGZvciAobGV0IGMgPSBmcm9tOyBjIDw9IHRvOyBjKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVCYXNlID0gYyAqIDM7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uQmFzZSA9IGMgKiA0O1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZVJvdGF0aW9uc0Jhc2UgPSBjICogY29tYmluZWRTaXplO1xyXG5cclxuICAgICAgICAgICAgcGFkZGVkU2NhbGVSb3RhdGlvbnNbc2NhbGVSb3RhdGlvbnNCYXNlXSA9IHNjYWxlc1tzY2FsZUJhc2VdO1xyXG4gICAgICAgICAgICBwYWRkZWRTY2FsZVJvdGF0aW9uc1tzY2FsZVJvdGF0aW9uc0Jhc2UgKyAxXSA9IHNjYWxlc1tzY2FsZUJhc2UgKyAxXTtcclxuICAgICAgICAgICAgcGFkZGVkU2NhbGVSb3RhdGlvbnNbc2NhbGVSb3RhdGlvbnNCYXNlICsgMl0gPSBzY2FsZXNbc2NhbGVCYXNlICsgMl07XHJcblxyXG4gICAgICAgICAgICBwYWRkZWRTY2FsZVJvdGF0aW9uc1tzY2FsZVJvdGF0aW9uc0Jhc2UgKyAzXSA9IHJvdGF0aW9uc1tyb3RhdGlvbkJhc2VdO1xyXG4gICAgICAgICAgICBwYWRkZWRTY2FsZVJvdGF0aW9uc1tzY2FsZVJvdGF0aW9uc0Jhc2UgKyA0XSA9IHJvdGF0aW9uc1tyb3RhdGlvbkJhc2UgKyAxXTtcclxuICAgICAgICAgICAgcGFkZGVkU2NhbGVSb3RhdGlvbnNbc2NhbGVSb3RhdGlvbnNCYXNlICsgNV0gPSByb3RhdGlvbnNbcm90YXRpb25CYXNlICsgMl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZpc2libGVSZWdpb24oc2luY2VMYXN0QnVpbGRPbmx5KSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IHRoaXMuZ2V0U3BsYXRDb3VudCh0cnVlKTtcclxuICAgICAgICBjb25zdCB0ZW1wQ2VudGVyID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBpZiAoIXNpbmNlTGFzdEJ1aWxkT25seSkge1xyXG4gICAgICAgICAgICBjb25zdCBhdmdDZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lcy5mb3JFYWNoKChzY2VuZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXZnQ2VudGVyLmFkZChzY2VuZS5zcGxhdEJ1ZmZlci5zY2VuZUNlbnRlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhdmdDZW50ZXIubXVsdGlwbHlTY2FsYXIoMS4wIC8gdGhpcy5zY2VuZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkU2NlbmVDZW50ZXIuY29weShhdmdDZW50ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNjZW5lQ2VudGVyLnZhbHVlLmNvcHkodGhpcy5jYWxjdWxhdGVkU2NlbmVDZW50ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdGFydFNwbGF0Rm9ybU1heERpc3RhbmNlQ2FsYyA9IHNpbmNlTGFzdEJ1aWxkT25seSA/IHRoaXMubGFzdEJ1aWxkU3BsYXRDb3VudCA6IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0U3BsYXRGb3JtTWF4RGlzdGFuY2VDYWxjOyBpIDwgc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U3BsYXRDZW50ZXIodGhpcy5tb3JwaGVkTWVzaCwgaSwgdGVtcENlbnRlciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RGcm9tQ1NjZW5lQ2VudGVyID0gdGVtcENlbnRlci5zdWIodGhpcy5jYWxjdWxhdGVkU2NlbmVDZW50ZXIpLmxlbmd0aCgpO1xyXG4gICAgICAgICAgICBpZiAoZGlzdEZyb21DU2NlbmVDZW50ZXIgPiB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXIpIHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlciA9IGRpc3RGcm9tQ1NjZW5lQ2VudGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWF4U3BsYXREaXN0YW5jZUZyb21TY2VuZUNlbnRlciAtIHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyA+IFZJU0lCTEVfUkVHSU9OX0VYUEFOU0lPTl9ERUxUQSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPSB0aGlzLm1heFNwbGF0RGlzdGFuY2VGcm9tU2NlbmVDZW50ZXI7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZVJlZ2lvblJhZGl1cyA9IE1hdGgubWF4KHRoaXMudmlzaWJsZVJlZ2lvbkJ1ZmZlclJhZGl1cyAtIFZJU0lCTEVfUkVHSU9OX0VYUEFOU0lPTl9ERUxUQSwgMC4wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxCdWlsZCkgdGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzID0gdGhpcy52aXNpYmxlUmVnaW9uQnVmZmVyUmFkaXVzID0gdGhpcy5tYXhTcGxhdERpc3RhbmNlRnJvbVNjZW5lQ2VudGVyO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVJlZ2lvbkZhZGVEaXN0YW5jZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZpc2libGVSZWdpb25GYWRlRGlzdGFuY2Uoc2NlbmVSZXZlYWxNb2RlID0gU2NlbmVSZXZlYWxNb2RlLkRlZmF1bHQpIHtcclxuICAgICAgICBjb25zdCBmYXN0RmFkZVJhdGUgPSBTQ0VORV9GQURFSU5fUkFURV9GQVNUICogdGhpcy5zY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyO1xyXG4gICAgICAgIGNvbnN0IGdyYWR1YWxGYWRlUmF0ZSA9IFNDRU5FX0ZBREVJTl9SQVRFX0dSQURVQUwgKiB0aGlzLnNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXI7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdEZhZGVJblJhdGUgPSB0aGlzLmZpbmFsQnVpbGQgPyBmYXN0RmFkZVJhdGUgOiBncmFkdWFsRmFkZVJhdGU7XHJcbiAgICAgICAgY29uc3QgZmFkZUluUmF0ZSA9IHNjZW5lUmV2ZWFsTW9kZSA9PT0gU2NlbmVSZXZlYWxNb2RlLkRlZmF1bHQgPyBkZWZhdWx0RmFkZUluUmF0ZSA6IGdyYWR1YWxGYWRlUmF0ZTtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMgPSAodGhpcy52aXNpYmxlUmVnaW9uUmFkaXVzIC0gdGhpcy52aXNpYmxlUmVnaW9uRmFkZVN0YXJ0UmFkaXVzKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhZGVJblJhdGUgKyB0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXM7XHJcbiAgICAgICAgY29uc3QgZmFkZUluUGVyY2VudGFnZSA9ICh0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMgPiAwKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnZpc2libGVSZWdpb25GYWRlU3RhcnRSYWRpdXMgLyB0aGlzLnZpc2libGVSZWdpb25CdWZmZXJSYWRpdXMpIDogMDtcclxuICAgICAgICBjb25zdCBmYWRlSW5Db21wbGV0ZSA9IGZhZGVJblBlcmNlbnRhZ2UgPiAwLjk5O1xyXG4gICAgICAgIGNvbnN0IHNoYWRlckZhZGVJbkNvbXBsZXRlID0gKGZhZGVJbkNvbXBsZXRlIHx8IHNjZW5lUmV2ZWFsTW9kZSA9PT0gU2NlbmVSZXZlYWxNb2RlLkluc3RhbnQpID8gMSA6IDA7XHJcblxyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cy52YWx1ZSA9IHRoaXMudmlzaWJsZVJlZ2lvbkZhZGVTdGFydFJhZGl1cztcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnZpc2libGVSZWdpb25SYWRpdXMudmFsdWUgPSB0aGlzLnZpc2libGVSZWdpb25SYWRpdXM7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5maXJzdFJlbmRlclRpbWUudmFsdWUgPSB0aGlzLmZpcnN0UmVuZGVyVGltZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmN1cnJlbnRUaW1lLnZhbHVlID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5mYWRlSW5Db21wbGV0ZS52YWx1ZSA9IHNoYWRlckZhZGVJbkNvbXBsZXRlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZpc2libGVSZWdpb25DaGFuZ2luZyA9ICFmYWRlSW5Db21wbGV0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgaW5kZXhlcyBvZiBzcGxhdHMgdGhhdCBzaG91bGQgYmUgcmVuZGVyZWQ7IHNob3VsZCBiZSBzb3J0ZWQgaW4gZGVzaXJlZCByZW5kZXIgb3JkZXIuXHJcbiAgICAgKiBAcGFyYW0ge1VpbnQzMkFycmF5fSBnbG9iYWxJbmRleGVzIFNvcnRlZCBpbmRleCBsaXN0IG9mIHNwbGF0cyB0byBiZSByZW5kZXJlZFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlbmRlclNwbGF0Q291bnQgVG90YWwgbnVtYmVyIG9mIHNwbGF0cyB0byBiZSByZW5kZXJlZC4gTmVjZXNzYXJ5IGJlY2F1c2Ugd2UgbWF5IG5vdCB3YW50IHRvIHJlbmRlclxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlcnkgc3BsYXQuXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVJlbmRlckluZGV4ZXMoZ2xvYmFsSW5kZXhlcywgcmVuZGVyU3BsYXRDb3VudCkge1xyXG4gICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTtcclxuICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnNwbGF0SW5kZXguc2V0KGdsb2JhbEluZGV4ZXMpO1xyXG4gICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMuc3BsYXRJbmRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHJlbmRlclNwbGF0Q291bnQgPiAwICYmIHRoaXMuZmlyc3RSZW5kZXJUaW1lID09PSAtMSkgdGhpcy5maXJzdFJlbmRlclRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgICBnZW9tZXRyeS5pbnN0YW5jZUNvdW50ID0gcmVuZGVyU3BsYXRDb3VudDtcclxuICAgICAgICBnZW9tZXRyeS5zZXREcmF3UmFuZ2UoMCwgcmVuZGVyU3BsYXRDb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIHRyYW5zZm9ybXMgZm9yIGVhY2ggc2NlbmUgaW4gdGhpcyBzcGxhdCBtZXNoIGZyb20gdGhlaXIgaW5kaXZpZHVhbCBjb21wb25lbnRzIChwb3NpdGlvbixcclxuICAgICAqIHF1YXRlcm5pb24sIGFuZCBzY2FsZSlcclxuICAgICAqL1xyXG4gICAgdXBkYXRlVHJhbnNmb3JtcygpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjZW5lID0gdGhpcy5nZXRTY2VuZShpKTtcclxuICAgICAgICAgICAgc2NlbmUudXBkYXRlVHJhbnNmb3JtKHRoaXMuZHluYW1pY01vZGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVbmlmb3JtcyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB2aWV3cG9ydCA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihyZW5kZXJEaW1lbnNpb25zLCBjYW1lcmFGb2NhbExlbmd0aFgsIGNhbWVyYUZvY2FsTGVuZ3RoWSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3J0aG9ncmFwaGljTW9kZSwgb3J0aG9ncmFwaGljWm9vbSwgaW52ZXJzZUZvY2FsQWRqdXN0bWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgICAgIGlmIChzcGxhdENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmlld3BvcnQuc2V0KHJlbmRlckRpbWVuc2lvbnMueCAqIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJEaW1lbnNpb25zLnkgKiB0aGlzLmRldmljZVBpeGVsUmF0aW8pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy52aWV3cG9ydC52YWx1ZS5jb3B5KHZpZXdwb3J0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYmFzaXNWaWV3cG9ydC52YWx1ZS5zZXQoMS4wIC8gdmlld3BvcnQueCwgMS4wIC8gdmlld3BvcnQueSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmZvY2FsLnZhbHVlLnNldChjYW1lcmFGb2NhbExlbmd0aFgsIGNhbWVyYUZvY2FsTGVuZ3RoWSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLm9ydGhvZ3JhcGhpY01vZGUudmFsdWUgPSBvcnRob2dyYXBoaWNNb2RlID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLm9ydGhvWm9vbS52YWx1ZSA9IG9ydGhvZ3JhcGhpY1pvb207XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLmludmVyc2VGb2NhbEFkanVzdG1lbnQudmFsdWUgPSBpbnZlcnNlRm9jYWxBZGp1c3RtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudHJhbnNmb3Jtcy52YWx1ZVtpXS5jb3B5KHRoaXMuZ2V0U2NlbmUoaSkudHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmFibGVPcHRpb25hbEVmZmVjdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NlbmVPcGFjaXR5LnZhbHVlW2ldID0gY2xhbXAodGhpcy5nZXRTY2VuZShpKS5vcGFjaXR5LCAwLjAsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuc2NlbmVWaXNpYmlsaXR5LnZhbHVlW2ldID0gdGhpcy5nZXRTY2VuZShpKS52aXNpYmxlID8gMSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBzZXRTcGxhdFNjYWxlKHNwbGF0U2NhbGUgPSAxKSB7XHJcbiAgICAgICAgdGhpcy5zcGxhdFNjYWxlID0gc3BsYXRTY2FsZTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnNwbGF0U2NhbGUudmFsdWUgPSBzcGxhdFNjYWxlO1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdFNjYWxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwbGF0U2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UG9pbnRDbG91ZE1vZGVFbmFibGVkKGVuYWJsZWQpIHtcclxuICAgICAgICB0aGlzLnBvaW50Q2xvdWRNb2RlRW5hYmxlZCA9IGVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy5wb2ludENsb3VkTW9kZUVuYWJsZWQudmFsdWUgPSBlbmFibGVkID8gMSA6IDA7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBvaW50Q2xvdWRNb2RlRW5hYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb2ludENsb3VkTW9kZUVuYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXREYXRhVGV4dHVyZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsYXREYXRhVGV4dHVyZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRDb3VudChpbmNsdWRlU2luY2VMYXN0QnVpbGQgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghaW5jbHVkZVNpbmNlTGFzdEJ1aWxkKSByZXR1cm4gdGhpcy5sYXN0QnVpbGRTcGxhdENvdW50O1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIFNwbGF0TWVzaC5nZXRUb3RhbFNwbGF0Q291bnRGb3JTY2VuZXModGhpcy5zY2VuZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRUb3RhbFNwbGF0Q291bnRGb3JTY2VuZXMoc2NlbmVzKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgc2NlbmUgb2Ygc2NlbmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChzY2VuZSAmJiBzY2VuZS5zcGxhdEJ1ZmZlcikgdG90YWxTcGxhdENvdW50ICs9IHNjZW5lLnNwbGF0QnVmZmVyLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsU3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VG90YWxTcGxhdENvdW50Rm9yU3BsYXRCdWZmZXJzKHNwbGF0QnVmZmVycykge1xyXG4gICAgICAgIGxldCB0b3RhbFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHNwbGF0QnVmZmVyIG9mIHNwbGF0QnVmZmVycykgdG90YWxTcGxhdENvdW50ICs9IHNwbGF0QnVmZmVyLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICByZXR1cm4gdG90YWxTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1heFNwbGF0Q291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIFNwbGF0TWVzaC5nZXRUb3RhbE1heFNwbGF0Q291bnRGb3JTY2VuZXModGhpcy5zY2VuZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRUb3RhbE1heFNwbGF0Q291bnRGb3JTY2VuZXMoc2NlbmVzKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsU3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgc2NlbmUgb2Ygc2NlbmVzKSB7XHJcbiAgICAgICAgICAgIGlmIChzY2VuZSAmJiBzY2VuZS5zcGxhdEJ1ZmZlcikgdG90YWxTcGxhdENvdW50ICs9IHNjZW5lLnNwbGF0QnVmZmVyLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsU3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VG90YWxNYXhTcGxhdENvdW50Rm9yU3BsYXRCdWZmZXJzKHNwbGF0QnVmZmVycykge1xyXG4gICAgICAgIGxldCB0b3RhbFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IHNwbGF0QnVmZmVyIG9mIHNwbGF0QnVmZmVycykgdG90YWxTcGxhdENvdW50ICs9IHNwbGF0QnVmZmVyLmdldE1heFNwbGF0Q291bnQoKTtcclxuICAgICAgICByZXR1cm4gdG90YWxTcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2VEaXN0YW5jZXNDb21wdXRhdGlvbkdQVVJlc291cmNlcygpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbykge1xyXG4gICAgICAgICAgICBnbC5kZWxldGVWZXJ0ZXhBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSkge1xyXG4gICAgICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZlcnRleFNoYWRlcik7XHJcbiAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmZyYWdtZW50U2hhZGVyKTtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52ZXJ0ZXhTaGFkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmZyYWdtZW50U2hhZGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlRGlzdGFuY2VzQ29tcHV0YXRpb25HUFVCdWZmZXJSZXNvdXJjZXMoKTtcclxuICAgICAgICBpZiAodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5pZCkge1xyXG4gICAgICAgICAgICBnbC5kZWxldGVUcmFuc2Zvcm1GZWVkYmFjayh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmlkKTtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5pZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2VEaXN0YW5jZXNDb21wdXRhdGlvbkdQVUJ1ZmZlclJlc291cmNlcygpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNCdWZmZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyID0gbnVsbDtcclxuICAgICAgICAgICAgZ2wuZGVsZXRlQnVmZmVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0J1ZmZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlcikge1xyXG4gICAgICAgICAgICBnbC5kZWxldGVCdWZmZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBUaHJlZS5qcyByZW5kZXJlciB1c2VkIGJ5IHRoaXMgc3BsYXQgbWVzaFxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5XZWJHTFJlbmRlcmVyfSByZW5kZXJlciBJbnN0YW5jZSBvZiBUSFJFRS5XZWJHTFJlbmRlcmVyXHJcbiAgICAgKi9cclxuICAgIHNldFJlbmRlcmVyKHJlbmRlcmVyKSB7XHJcbiAgICAgICAgaWYgKHJlbmRlcmVyICE9PSB0aGlzLnJlbmRlcmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICAgICAgY29uc3QgZ2wgPSB0aGlzLnJlbmRlcmVyLmdldENvbnRleHQoKTtcclxuICAgICAgICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IG5ldyBXZWJHTEV4dGVuc2lvbnMkMShnbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IG5ldyBXZWJHTENhcGFiaWxpdGllcyQxKGdsLCBleHRlbnNpb25zLCB7fSk7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbnMuaW5pdChjYXBhYmlsaXRpZXMpO1xyXG4gICAgICAgICAgICB0aGlzLndlYkdMVXRpbHMgPSBuZXcgV2ViR0xVdGlscyQxKGdsLCBleHRlbnNpb25zLCBjYXBhYmlsaXRpZXMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVEaXN0YW5jZXNDb21wdXRhdGlvbk9uR1BVICYmIHRoaXMuZ2V0U3BsYXRDb3VudCgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cERpc3RhbmNlc0NvbXB1dGF0aW9uVHJhbnNmb3JtRmVlZGJhY2soKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgY2VudGVycywgc2NlbmVJbmRleGVzIH0gPSB0aGlzLmdldERhdGFGb3JEaXN0YW5jZXNDb21wdXRhdGlvbigwLCB0aGlzLmdldFNwbGF0Q291bnQoKSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoR1BVQnVmZmVyc0ZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKGNlbnRlcnMsIHNjZW5lSW5kZXhlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dXBEaXN0YW5jZXNDb21wdXRhdGlvblRyYW5zZm9ybUZlZWRiYWNrID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50TWF4U3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IHRoaXMuZ2V0TWF4U3BsYXRDb3VudCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZWJ1aWxkR1BVT2JqZWN0cyA9ICh0aGlzLmxhc3RSZW5kZXJlciAhPT0gdGhpcy5yZW5kZXJlcik7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYnVpbGRCdWZmZXJzID0gY3VycmVudE1heFNwbGF0Q291bnQgIT09IG1heFNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlYnVpbGRHUFVPYmplY3RzICYmICFyZWJ1aWxkQnVmZmVycykgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGRHUFVPYmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2VEaXN0YW5jZXNDb21wdXRhdGlvbkdQVVJlc291cmNlcygpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlYnVpbGRCdWZmZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2VEaXN0YW5jZXNDb21wdXRhdGlvbkdQVUJ1ZmZlclJlc291cmNlcygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3JlYXRlU2hhZGVyID0gKGdsLCB0eXBlLCBzb3VyY2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmICghc2hhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYXRhbCBlcnJvcjogZ2wgY291bGQgbm90IGNyZWF0ZSBhIHNoYWRlciBvYmplY3QuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICAgICAgICAgICAgICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21waWxlZCA9IGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKTtcclxuICAgICAgICAgICAgICAgIGlmICghY29tcGlsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHlwZU5hbWUgPSAndW5rbm93bic7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IGdsLlZFUlRFWF9TSEFERVIpIHR5cGVOYW1lID0gJ3ZlcnRleCBzaGFkZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IGdsLkZSQUdNRU5UX1NIQURFUikgdHlwZU5hbWUgPSAnZnJhZ2VtZW50IHNoYWRlcic7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JzID0gZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNvbXBpbGUgJyArIHR5cGVOYW1lICsgJyB3aXRoIHRoZXNlIGVycm9yczonICsgZXJyb3JzKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC5kZWxldGVTaGFkZXIoc2hhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IHZzU291cmNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdnNTb3VyY2UgPVxyXG4gICAgICAgICAgICAgICAgYCN2ZXJzaW9uIDMwMCBlc1xyXG4gICAgICAgICAgICAgICAgaW4gaXZlYzQgY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgZmxhdCBvdXQgaW50IGRpc3RhbmNlO2A7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZzU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW4gdWludCBzY2VuZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtIGl2ZWM0IHRyYW5zZm9ybXNbJHtDb25zdGFudHMuTWF4U2NlbmVzfV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdmVjNCB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NjZW5lSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBjZW50ZXIueCAqIHRyYW5zZm9ybS54ICsgY2VudGVyLnkgKiB0cmFuc2Zvcm0ueSArIGNlbnRlci56ICogdHJhbnNmb3JtLnogKyB0cmFuc2Zvcm0udyAqIGNlbnRlci53O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdnNTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtIGl2ZWMzIG1vZGVsVmlld1Byb2o7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGNlbnRlci54ICogbW9kZWxWaWV3UHJvai54ICsgY2VudGVyLnkgKiBtb2RlbFZpZXdQcm9qLnkgKyBjZW50ZXIueiAqIG1vZGVsVmlld1Byb2ouejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2c1NvdXJjZSA9XHJcbiAgICAgICAgICAgICAgICBgI3ZlcnNpb24gMzAwIGVzXHJcbiAgICAgICAgICAgICAgICBpbiB2ZWM0IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIGZsYXQgb3V0IGZsb2F0IGRpc3RhbmNlO2A7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZzU291cmNlICs9IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW4gdWludCBzY2VuZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtIG1hdDQgdHJhbnNmb3Jtc1ske0NvbnN0YW50cy5NYXhTY2VuZXN9XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzQgdHJhbnNmb3JtZWRDZW50ZXIgPSB0cmFuc2Zvcm1zW3NjZW5lSW5kZXhdICogdmVjNChjZW50ZXIueHl6LCAxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSB0cmFuc2Zvcm1lZENlbnRlci56O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdnNTb3VyY2UgKz0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtIHZlYzMgbW9kZWxWaWV3UHJvajtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBtYWluKHZvaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gY2VudGVyLnggKiBtb2RlbFZpZXdQcm9qLnggKyBjZW50ZXIueSAqIG1vZGVsVmlld1Byb2oueSArIGNlbnRlci56ICogbW9kZWxWaWV3UHJvai56O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZnNTb3VyY2UgPVxyXG4gICAgICAgICAgICBgI3ZlcnNpb24gMzAwIGVzXHJcbiAgICAgICAgICAgICAgICBwcmVjaXNpb24gbG93cCBmbG9hdDtcclxuICAgICAgICAgICAgICAgIG91dCB2ZWM0IGZyYWdDb2xvcjtcclxuICAgICAgICAgICAgICAgIHZvaWQgbWFpbigpe31cclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYW8gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSVEVYX0FSUkFZX0JJTkRJTkcpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UHJvZ3JhbSA9IGdsLmdldFBhcmFtZXRlcihnbC5DVVJSRU5UX1BST0dSQU0pO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UHJvZ3JhbURlbGV0ZWQgPSBjdXJyZW50UHJvZ3JhbSA/IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIoY3VycmVudFByb2dyYW0sIGdsLkRFTEVURV9TVEFUVVMpIDogZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZEdQVU9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvID0gZ2wuY3JlYXRlVmVydGV4QXJyYXkoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2wuYmluZFZlcnRleEFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmFvKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkR1BVT2JqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleFNoYWRlciA9IGNyZWF0ZVNoYWRlcihnbCwgZ2wuVkVSVEVYX1NIQURFUiwgdnNTb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnRTaGFkZXIgPSBjcmVhdGVTaGFkZXIoZ2wsIGdsLkZSQUdNRU5UX1NIQURFUiwgZnNTb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZXJ0ZXhTaGFkZXIgfHwgIWZyYWdtZW50U2hhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgY29tcGlsZSBzaGFkZXJzIGZvciBkaXN0YW5jZXMgY29tcHV0YXRpb24gb24gR1BVLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZlcnRleFNoYWRlcik7XHJcbiAgICAgICAgICAgICAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgICAgICAgICAgICAgZ2wudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncyhwcm9ncmFtLCBbJ2Rpc3RhbmNlJ10sIGdsLlNFUEFSQVRFX0FUVFJJQlMpO1xyXG4gICAgICAgICAgICAgICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua2VkID0gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmtlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYXRhbCBlcnJvcjogRmFpbGVkIHRvIGxpbmsgcHJvZ3JhbTogJyArIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBnbC5kZWxldGVQcm9ncmFtKHByb2dyYW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmRlbGV0ZVNoYWRlcihmcmFnbWVudFNoYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgbGluayBzaGFkZXJzIGZvciBkaXN0YW5jZXMgY29tcHV0YXRpb24gb24gR1BVLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sucHJvZ3JhbSA9IHByb2dyYW07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZlcnRleFNoYWRlciA9IHZlcnRleFNoYWRlcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudmVydGV4U2hhZGVyID0gZnJhZ21lbnRTaGFkZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYyA9XHJcbiAgICAgICAgICAgICAgICBnbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0sICdjZW50ZXInKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzTG9jID1cclxuICAgICAgICAgICAgICAgICAgICBnbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0sICdzY2VuZUluZGV4Jyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay50cmFuc2Zvcm1zTG9jc1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0sIGB0cmFuc2Zvcm1zWyR7aX1dYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm1vZGVsVmlld1Byb2pMb2MgPVxyXG4gICAgICAgICAgICAgICAgICAgIGdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnByb2dyYW0sICdtb2RlbFZpZXdQcm9qJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkR1BVT2JqZWN0cyB8fCByZWJ1aWxkQnVmZmVycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYklQb2ludGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYywgNCwgZ2wuSU5ULCAwLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmNlbnRlcnNMb2MsIDQsIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0J1ZmZlciA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnNjZW5lSW5kZXhlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNMb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYklQb2ludGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzTG9jLCAxLCBnbC5VTlNJR05FRF9JTlQsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZEdQVU9iamVjdHMgfHwgcmVidWlsZEJ1ZmZlcnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyKTtcclxuICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG1heFNwbGF0Q291bnQgKiA0LCBnbC5TVEFUSUNfUkVBRCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZEdQVU9iamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suaWQgPSBnbC5jcmVhdGVUcmFuc2Zvcm1GZWVkYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdsLmJpbmRUcmFuc2Zvcm1GZWVkYmFjayhnbC5UUkFOU0ZPUk1fRkVFREJBQ0ssIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suaWQpO1xyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyQmFzZShnbC5UUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSLCAwLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm91dERpc3RhbmNlc0J1ZmZlcik7XHJcblxyXG4gICAgICAgICAgICBpZiAoY3VycmVudFByb2dyYW0gJiYgY3VycmVudFByb2dyYW1EZWxldGVkICE9PSB0cnVlKSBnbC51c2VQcm9ncmFtKGN1cnJlbnRQcm9ncmFtKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRWYW8pIGdsLmJpbmRWZXJ0ZXhBcnJheShjdXJyZW50VmFvKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcclxuICAgICAgICAgICAgY3VycmVudE1heFNwbGF0Q291bnQgPSBtYXhTcGxhdENvdW50O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaCBHUFUgYnVmZmVycyB1c2VkIGZvciBjb21wdXRpbmcgc3BsYXQgZGlzdGFuY2VzIHdpdGggY2VudGVycyBkYXRhIGZyb20gdGhlIHNjZW5lcyBmb3IgdGhpcyBtZXNoLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc1VwZGF0ZSBTcGVjaWZ5IHdoZXRoZXIgb3Igbm90IHRvIHVwZGF0ZSB0aGUgR1BVIGJ1ZmZlciBvciB0byBpbml0aWFsaXplICYgZmlsbFxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjZW50ZXJzIFRoZSBzcGxhdCBjZW50ZXJzIGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRTcGxhdHMgT2Zmc2V0IGluIHRoZSBHUFUgYnVmZmVyIGF0IHdoaWNoIHRvIHN0YXJ0IHVwZGF0aW5nIGRhdGEsIHNwZWNpZmllZCBpbiBzcGxhdHNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlR1BVQ2VudGVyc0J1ZmZlckZvckRpc3RhbmNlc0NvbXB1dGF0aW9uKGlzVXBkYXRlLCBjZW50ZXJzLCBvZmZzZXRTcGxhdHMpIHtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGdsID0gdGhpcy5yZW5kZXJlci5nZXRDb250ZXh0KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYW8gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSVEVYX0FSUkFZX0JJTkRJTkcpO1xyXG4gICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyk7XHJcblxyXG4gICAgICAgIGNvbnN0IEFycmF5VHlwZSA9IHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24gPyBVaW50MzJBcnJheSA6IEZsb2F0MzJBcnJheTtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVCeXRlc1BlckNlbnRlciA9IDE2O1xyXG4gICAgICAgIGNvbnN0IHN1YkJ1ZmZlck9mZnNldCA9IG9mZnNldFNwbGF0cyAqIGF0dHJpYnV0ZUJ5dGVzUGVyQ2VudGVyO1xyXG5cclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyKTtcclxuXHJcbiAgICAgICAgaWYgKGlzVXBkYXRlKSB7XHJcbiAgICAgICAgICAgIGdsLmJ1ZmZlclN1YkRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBzdWJCdWZmZXJPZmZzZXQsIGNlbnRlcnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1heEFycmF5ID0gbmV3IEFycmF5VHlwZSh0aGlzLmdldE1heFNwbGF0Q291bnQoKSAqIGF0dHJpYnV0ZUJ5dGVzUGVyQ2VudGVyKTtcclxuICAgICAgICAgICAgbWF4QXJyYXkuc2V0KGNlbnRlcnMpO1xyXG4gICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbWF4QXJyYXksIGdsLlNUQVRJQ19EUkFXKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRWYW8pIGdsLmJpbmRWZXJ0ZXhBcnJheShjdXJyZW50VmFvKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlZnJlc2ggR1BVIGJ1ZmZlcnMgdXNlZCBmb3IgcHJlLWNvbXB1dGluZyBzcGxhdCBkaXN0YW5jZXMgd2l0aCBjZW50ZXJzIGRhdGEgZnJvbSB0aGUgc2NlbmVzIGZvciB0aGlzIG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVXBkYXRlIFNwZWNpZnkgd2hldGhlciBvciBub3QgdG8gdXBkYXRlIHRoZSBHUFUgYnVmZmVyIG9yIHRvIGluaXRpYWxpemUgJiBmaWxsXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNjZW5lSW5kZXhlcyBUaGUgc3BsYXQgc2NlbmUgaW5kZXhlc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFNwbGF0cyBPZmZzZXQgaW4gdGhlIEdQVSBidWZmZXIgYXQgd2hpY2ggdG8gc3RhcnQgdXBkYXRpbmcgZGF0YSwgc3BlY2lmaWVkIGluIHNwbGF0c1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVHUFVUcmFuc2Zvcm1JbmRleGVzQnVmZmVyRm9yRGlzdGFuY2VzQ29tcHV0YXRpb24oaXNVcGRhdGUsIHNjZW5lSW5kZXhlcywgb2Zmc2V0U3BsYXRzKSB7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlciB8fCAhdGhpcy5keW5hbWljTW9kZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG5cclxuICAgICAgICBjb25zdCBjdXJyZW50VmFvID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlZFUlRFWF9BUlJBWV9CSU5ESU5HKTtcclxuICAgICAgICBnbC5iaW5kVmVydGV4QXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay52YW8pO1xyXG5cclxuICAgICAgICBjb25zdCBzdWJCdWZmZXJPZmZzZXQgPSBvZmZzZXRTcGxhdHMgKiA0O1xyXG5cclxuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5zY2VuZUluZGV4ZXNCdWZmZXIpO1xyXG5cclxuICAgICAgICBpZiAoaXNVcGRhdGUpIHtcclxuICAgICAgICAgICAgZ2wuYnVmZmVyU3ViRGF0YShnbC5BUlJBWV9CVUZGRVIsIHN1YkJ1ZmZlck9mZnNldCwgc2NlbmVJbmRleGVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBtYXhBcnJheSA9IG5ldyBVaW50MzJBcnJheSh0aGlzLmdldE1heFNwbGF0Q291bnQoKSAqIDQpO1xyXG4gICAgICAgICAgICBtYXhBcnJheS5zZXQoc2NlbmVJbmRleGVzKTtcclxuICAgICAgICAgICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG1heEFycmF5LCBnbC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYgKGN1cnJlbnRWYW8pIGdsLmJpbmRWZXJ0ZXhBcnJheShjdXJyZW50VmFvKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIHR5cGVkIGFycmF5IGNvbnRhaW5pbmcgYSBtYXBwaW5nIGZyb20gZ2xvYmFsIHNwbGF0IGluZGV4ZXMgdG8gdGhlaXIgc2NlbmUgaW5kZXguXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgU3RhcnRpbmcgc3BsYXQgaW5kZXggdG8gc3RvcmVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kaW5nIHNwbGF0IGluZGV4IHRvIHN0b3JlXHJcbiAgICAgKiBAcmV0dXJuIHtVaW50MzJBcnJheX1cclxuICAgICAqL1xyXG4gICAgZ2V0U2NlbmVJbmRleGVzKHN0YXJ0LCBlbmQpIHtcclxuXHJcbiAgICAgICAgbGV0IHNjZW5lSW5kZXhlcztcclxuICAgICAgICBjb25zdCBmaWxsQ291bnQgPSBlbmQgLSBzdGFydCArIDE7XHJcbiAgICAgICAgc2NlbmVJbmRleGVzID0gbmV3IFVpbnQzMkFycmF5KGZpbGxDb3VudCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNjZW5lSW5kZXhlc1tpXSA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcFtpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzY2VuZUluZGV4ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaWxsICdhcnJheScgd2l0aCB0aGUgdHJhbnNmb3JtcyBmb3IgZWFjaCBzY2VuZSBpbiB0aGlzIHNwbGF0IG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBzY2VuZSB0cmFuc2Zvcm1zLiBJZiBub3QgZW1wdHksIGNvbnRlbnRzIHdpbGwgYmUgb3ZlcndyaXR0ZW4uXHJcbiAgICAgKi9cclxuICAgIGZpbGxUcmFuc2Zvcm1zQXJyYXkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcEFycmF5ID0gW107XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcnJheSkge1xyXG4gICAgICAgICAgICBpZiAodGVtcEFycmF5Lmxlbmd0aCAhPT0gYXJyYXkubGVuZ3RoKSB0ZW1wQXJyYXkubGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2NlbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2VuZVRyYW5zZm9ybSA9IHRoaXMuZ2V0U2NlbmUoaSkudHJhbnNmb3JtO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2NlbmVUcmFuc2Zvcm1FbGVtZW50cyA9IHNjZW5lVHJhbnNmb3JtLmVsZW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxNjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcEFycmF5W2kgKiAxNiArIGpdID0gc2NlbmVUcmFuc2Zvcm1FbGVtZW50c1tqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcnJheS5zZXQodGVtcEFycmF5KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBjb21wdXRlRGlzdGFuY2VzT25HUFUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcE1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiAobW9kZWxWaWV3UHJvak1hdHJpeCwgb3V0Q29tcHV0ZWREaXN0YW5jZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnbCA9IHRoaXMucmVuZGVyZXIuZ2V0Q29udGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbyA9IGdsLmdldFBhcmFtZXRlcihnbC5WRVJURVhfQVJSQVlfQklORElORyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9ncmFtID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLkNVUlJFTlRfUFJPR1JBTSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9ncmFtRGVsZXRlZCA9IGN1cnJlbnRQcm9ncmFtID8gZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihjdXJyZW50UHJvZ3JhbSwgZ2wuREVMRVRFX1NUQVRVUykgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyk7XHJcbiAgICAgICAgICAgIGdsLnVzZVByb2dyYW0odGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5wcm9ncmFtKTtcclxuXHJcbiAgICAgICAgICAgIGdsLmVuYWJsZShnbC5SQVNURVJJWkVSX0RJU0NBUkQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHluYW1pY01vZGUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LmNvcHkodGhpcy5nZXRTY2VuZShpKS50cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBNYXRyaXgucHJlbXVsdGlwbHkobW9kZWxWaWV3UHJvak1hdHJpeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmludGVnZXJCYXNlZERpc3RhbmNlc0NvbXB1dGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlUZW1wTWF0cml4ID0gU3BsYXRNZXNoLmdldEludGVnZXJNYXRyaXhBcnJheSh0ZW1wTWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaVRyYW5zZm9ybSA9IFtpVGVtcE1hdHJpeFsyXSwgaVRlbXBNYXRyaXhbNl0sIGlUZW1wTWF0cml4WzEwXSwgaVRlbXBNYXRyaXhbMTRdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2wudW5pZm9ybTRpKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudHJhbnNmb3Jtc0xvY3NbaV0sIGlUcmFuc2Zvcm1bMF0sIGlUcmFuc2Zvcm1bMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpVHJhbnNmb3JtWzJdLCBpVHJhbnNmb3JtWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sudHJhbnNmb3Jtc0xvY3NbaV0sIGZhbHNlLCB0ZW1wTWF0cml4LmVsZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnRlZ2VyQmFzZWREaXN0YW5jZXNDb21wdXRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlWaWV3UHJvak1hdHJpeCA9IFNwbGF0TWVzaC5nZXRJbnRlZ2VyTWF0cml4QXJyYXkobW9kZWxWaWV3UHJvak1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaVZpZXdQcm9qID0gW2lWaWV3UHJvak1hdHJpeFsyXSwgaVZpZXdQcm9qTWF0cml4WzZdLCBpVmlld1Byb2pNYXRyaXhbMTBdXTtcclxuICAgICAgICAgICAgICAgICAgICBnbC51bmlmb3JtM2kodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5tb2RlbFZpZXdQcm9qTG9jLCBpVmlld1Byb2pbMF0sIGlWaWV3UHJvalsxXSwgaVZpZXdQcm9qWzJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgdmlld1Byb2ogPSBbbW9kZWxWaWV3UHJvak1hdHJpeC5lbGVtZW50c1syXSwgbW9kZWxWaWV3UHJvak1hdHJpeC5lbGVtZW50c1s2XSwgbW9kZWxWaWV3UHJvak1hdHJpeC5lbGVtZW50c1sxMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0zZih0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLm1vZGVsVmlld1Byb2pMb2MsIHZpZXdQcm9qWzBdLCB2aWV3UHJvalsxXSwgdmlld1Byb2pbMl0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzQnVmZmVyKTtcclxuICAgICAgICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZWdlckJhc2VkRGlzdGFuY2VzQ29tcHV0YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYklQb2ludGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suY2VudGVyc0xvYywgNCwgZ2wuSU5ULCAwLCAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5jZW50ZXJzTG9jLCA0LCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzQnVmZmVyKTtcclxuICAgICAgICAgICAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzTG9jKTtcclxuICAgICAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYklQb2ludGVyKHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2suc2NlbmVJbmRleGVzTG9jLCAxLCBnbC5VTlNJR05FRF9JTlQsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBnbC5iaW5kVHJhbnNmb3JtRmVlZGJhY2soZ2wuVFJBTlNGT1JNX0ZFRURCQUNLLCB0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLmlkKTtcclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMCwgdGhpcy5kaXN0YW5jZXNUcmFuc2Zvcm1GZWVkYmFjay5vdXREaXN0YW5jZXNCdWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgZ2wuYmVnaW5UcmFuc2Zvcm1GZWVkYmFjayhnbC5QT0lOVFMpO1xyXG4gICAgICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlBPSU5UUywgMCwgdGhpcy5nZXRTcGxhdENvdW50KCkpO1xyXG4gICAgICAgICAgICBnbC5lbmRUcmFuc2Zvcm1GZWVkYmFjaygpO1xyXG5cclxuICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMCwgbnVsbCk7XHJcbiAgICAgICAgICAgIGdsLmJpbmRUcmFuc2Zvcm1GZWVkYmFjayhnbC5UUkFOU0ZPUk1fRkVFREJBQ0ssIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgZ2wuZGlzYWJsZShnbC5SQVNURVJJWkVSX0RJU0NBUkQpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3luYyA9IGdsLmZlbmNlU3luYyhnbC5TWU5DX0dQVV9DT01NQU5EU19DT01QTEVURSwgMCk7XHJcbiAgICAgICAgICAgIGdsLmZsdXNoKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrU3luYyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpdGZsYWdzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZ2wuY2xpZW50V2FpdFN5bmMoc3luYywgYml0ZmxhZ3MsIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBnbC5USU1FT1VUX0VYUElSRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dCA9IHNldFRpbWVvdXQoY2hlY2tTeW5jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wdXRlRGlzdGFuY2VzT25HUFVTeW5jVGltZW91dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgZ2wuV0FJVF9GQUlMRUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaG91bGQgbmV2ZXIgZ2V0IGhlcmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXB1dGVEaXN0YW5jZXNPbkdQVVN5bmNUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5kZWxldGVTeW5jKHN5bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYW8gPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuVkVSVEVYX0FSUkFZX0JJTkRJTkcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmRpc3RhbmNlc1RyYW5zZm9ybUZlZWRiYWNrLnZhbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHRoaXMuZGlzdGFuY2VzVHJhbnNmb3JtRmVlZGJhY2sub3V0RGlzdGFuY2VzQnVmZmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbC5nZXRCdWZmZXJTdWJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgMCwgb3V0Q29tcHV0ZWREaXN0YW5jZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYW8pIGdsLmJpbmRWZXJ0ZXhBcnJheShjdXJyZW50VmFvKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZURpc3RhbmNlc09uR1BVU3luY1RpbWVvdXQgPSBzZXRUaW1lb3V0KGNoZWNrU3luYyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRQcm9ncmFtICYmIGN1cnJlbnRQcm9ncmFtRGVsZXRlZCAhPT0gdHJ1ZSkgZ2wudXNlUHJvZ3JhbShjdXJyZW50UHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50VmFvKSBnbC5iaW5kVmVydGV4QXJyYXkoY3VycmVudFZhbyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdpdmVuIGEgZ2xvYmFsIHNwbGF0IGluZGV4LCByZXR1cm4gY29ycmVzcG9uZGluZyBsb2NhbCBkYXRhIChzcGxhdCBidWZmZXIsIGluZGV4IG9mIHNwbGF0IGluIHRoYXQgc3BsYXRcclxuICAgICAqIGJ1ZmZlciwgYW5kIHRoZSBjb3JyZXNwb25kaW5nIHRyYW5zZm9ybSlcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBnbG9iYWxJbmRleCBHbG9iYWwgc3BsYXQgaW5kZXhcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXNPYmogT2JqZWN0IGluIHdoaWNoIHRvIHN0b3JlIGxvY2FsIGRhdGFcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV0dXJuU2NlbmVUcmFuc2Zvcm0gQnkgZGVmYXVsdCwgdGhlIHRyYW5zZm9ybSBvZiB0aGUgc2NlbmUgdG8gd2hpY2ggdGhlIHNwbGF0IGF0ICdnbG9iYWxJbmRleCcgYmVsb25ncyB3aWxsIGJlXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkIHZpYSB0aGUgJ3NjZW5lVHJhbnNmb3JtJyBwcm9wZXJ0eSBvZiAncGFyYW1zT2JqJyBvbmx5IGlmIHRoZSBzcGxhdCBtZXNoIGlzIHN0YXRpYy5cclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgJ3JldHVyblNjZW5lVHJhbnNmb3JtJyBpcyB0cnVlLCB0aGUgJ3NjZW5lVHJhbnNmb3JtJyBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBjb250YWluIHRoZSBzY2VuZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0sIGFuZCBpZiAncmV0dXJuU2NlbmVUcmFuc2Zvcm0nIGlzIGZhbHNlLCB0aGUgJ3NjZW5lVHJhbnNmb3JtJyBwcm9wZXJ0eSB3aWxsIGFsd2F5c1xyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBudWxsLlxyXG4gICAgICovXHJcbiAgICBnZXRMb2NhbFNwbGF0UGFyYW1ldGVycyhnbG9iYWxJbmRleCwgcGFyYW1zT2JqLCByZXR1cm5TY2VuZVRyYW5zZm9ybSkge1xyXG4gICAgICAgIGlmIChyZXR1cm5TY2VuZVRyYW5zZm9ybSA9PT0gdW5kZWZpbmVkIHx8IHJldHVyblNjZW5lVHJhbnNmb3JtID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVyblNjZW5lVHJhbnNmb3JtID0gdGhpcy5keW5hbWljTW9kZSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyYW1zT2JqLnNwbGF0QnVmZmVyID0gdGhpcy5nZXRTcGxhdEJ1ZmZlckZvclNwbGF0KGdsb2JhbEluZGV4KTtcclxuICAgICAgICBwYXJhbXNPYmoubG9jYWxJbmRleCA9IHRoaXMuZ2V0U3BsYXRMb2NhbEluZGV4KGdsb2JhbEluZGV4KTtcclxuICAgICAgICBwYXJhbXNPYmouc2NlbmVUcmFuc2Zvcm0gPSByZXR1cm5TY2VuZVRyYW5zZm9ybSA/IHRoaXMuZ2V0U2NlbmVUcmFuc2Zvcm1Gb3JTcGxhdChnbG9iYWxJbmRleCkgOiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmlsbCBhcnJheXMgd2l0aCBzcGxhdCBkYXRhIGFuZCBhcHBseSB0cmFuc2Zvcm1zIGlmIGFwcHJvcHJpYXRlLiBFYWNoIGFycmF5IGlzIG9wdGlvbmFsLlxyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGNvdmFyaWFuY2VzIFRhcmdldCBzdG9yYWdlIGZvciBzcGxhdCBjb3ZhcmlhbmNlc1xyXG4gICAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IHNjYWxlcyBUYXJnZXQgc3RvcmFnZSBmb3Igc3BsYXQgc2NhbGVzXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gcm90YXRpb25zIFRhcmdldCBzdG9yYWdlIGZvciBzcGxhdCByb3RhdGlvbnNcclxuICAgICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5fSBjZW50ZXJzIFRhcmdldCBzdG9yYWdlIGZvciBzcGxhdCBjZW50ZXJzXHJcbiAgICAgKiBAcGFyYW0ge1VpbnQ4QXJyYXl9IGNvbG9ycyBUYXJnZXQgc3RvcmFnZSBmb3Igc3BsYXQgY29sb3JzXHJcbiAgICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gc3BoZXJpY2FsSGFybW9uaWNzIFRhcmdldCBzdG9yYWdlIGZvciBzcGhlcmljYWwgaGFybW9uaWNzXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFwcGx5U2NlbmVUcmFuc2Zvcm0gQnkgZGVmYXVsdCwgc2NlbmUgdHJhbnNmb3JtcyBhcmUgYXBwbGllZCB0byByZWxldmFudCBzcGxhdCBkYXRhIG9ubHkgaWYgdGhlIHNwbGF0IG1lc2ggaXNcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0aWMuIElmICdhcHBseVNjZW5lVHJhbnNmb3JtJyBpcyB0cnVlLCBzY2VuZSB0cmFuc2Zvcm1zIHdpbGwgYWx3YXlzIGJlIGFwcGxpZWQgYW5kIGlmXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXQgaXMgZmFsc2UsIHRoZXkgd2lsbCBuZXZlciBiZSBhcHBsaWVkLiBJZiB1bmRlZmluZWQsIHRoZSBkZWZhdWx0IGJlaGF2aW9yIHdpbGwgYXBwbHkuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgVGhlIGNvbXByZXNzaW9uIGxldmVsIGZvciBjb3ZhcmlhbmNlcyBpbiB0aGUgZGVzdGluYXRpb24gYXJyYXlcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcGhlcmljYWxIYXJtb25pY3NDb21wcmVzc2lvbkxldmVsIFRoZSBjb21wcmVzc2lvbiBsZXZlbCBmb3Igc3BoZXJpY2FsIGhhcm1vbmljcyBpbiB0aGUgZGVzdGluYXRpb24gYXJyYXlcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcmNTdGFydCBUaGUgc3RhcnQgbG9jYXRpb24gZnJvbSB3aGljaCB0byBwdWxsIHNvdXJjZSBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3JjRW5kIFRoZSBlbmQgbG9jYXRpb24gZnJvbSB3aGljaCB0byBwdWxsIHNvdXJjZSBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVzdFN0YXJ0IFRoZSBzdGFydCBsb2NhdGlvbiBmcm9tIHdoaWNoIHRvIHdyaXRlIGRhdGFcclxuICAgICAqL1xyXG4gICAgZmlsbFNwbGF0RGF0YUFycmF5cyhjb3ZhcmlhbmNlcywgc2NhbGVzLCByb3RhdGlvbnMsIGNlbnRlcnMsIGNvbG9ycywgc3BoZXJpY2FsSGFybW9uaWNzLCBmbGFtZU1vZGVsUG9zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlTY2VuZVRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY292YXJpYW5jZUNvbXByZXNzaW9uTGV2ZWwgPSAwLCBzY2FsZVJvdGF0aW9uQ29tcHJlc3Npb25MZXZlbCA9IDAsIHNwaGVyaWNhbEhhcm1vbmljc0NvbXByZXNzaW9uTGV2ZWwgPSAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNTdGFydCwgc3JjRW5kLCBkZXN0U3RhcnQgPSAwLCBzY2VuZUluZGV4KSB7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVPdmVycmlkZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgc2NhbGVPdmVycmlkZS54ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNjYWxlT3ZlcnJpZGUueSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAodGhpcy5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQpIHtcclxuICAgICAgICAgICAgc2NhbGVPdmVycmlkZS56ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNjYWxlT3ZlcnJpZGUueiA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRlbXBUcmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuICAgICAgICBsZXQgc3RhcnRTY2VuZUluZGV4ID0gMDtcclxuICAgICAgICBsZXQgZW5kU2NlbmVJbmRleCA9IHRoaXMuc2NlbmVzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgaWYgKHNjZW5lSW5kZXggIT09IHVuZGVmaW5lZCAmJiBzY2VuZUluZGV4ICE9PSBudWxsICYmIHNjZW5lSW5kZXggPj0gMCAmJiBzY2VuZUluZGV4IDw9IHRoaXMuc2NlbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzdGFydFNjZW5lSW5kZXggPSBzY2VuZUluZGV4O1xyXG4gICAgICAgICAgICBlbmRTY2VuZUluZGV4ID0gc2NlbmVJbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0U2NlbmVJbmRleDsgaSA8PSBlbmRTY2VuZUluZGV4OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGFwcGx5U2NlbmVUcmFuc2Zvcm0gPT09IHVuZGVmaW5lZCB8fCBhcHBseVNjZW5lVHJhbnNmb3JtID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBhcHBseVNjZW5lVHJhbnNmb3JtID0gdGhpcy5keW5hbWljTW9kZSA/IGZhbHNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2NlbmUgPSB0aGlzLmdldFNjZW5lKGkpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdEJ1ZmZlciA9IHNjZW5lLnNwbGF0QnVmZmVyO1xyXG4gICAgICAgICAgICBsZXQgc2NlbmVUcmFuc2Zvcm07XHJcbiAgICAgICAgICAgIGlmIChhcHBseVNjZW5lVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFNjZW5lVHJhbnNmb3JtKGksIHRlbXBUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgc2NlbmVUcmFuc2Zvcm0gPSB0ZW1wVHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb3ZhcmlhbmNlcykge1xyXG4gICAgICAgICAgICAgICAgc3BsYXRCdWZmZXIuZmlsbFNwbGF0Q292YXJpYW5jZUFycmF5KGNvdmFyaWFuY2VzLCBzY2VuZVRyYW5zZm9ybSwgc3JjU3RhcnQsIHNyY0VuZCwgZGVzdFN0YXJ0LCBjb3ZhcmlhbmNlQ29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNjYWxlcyB8fCByb3RhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghc2NhbGVzIHx8ICFyb3RhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NwbGF0TWVzaDo6ZmlsbFNwbGF0RGF0YUFycmF5cygpIC0+IFwic2NhbGVzXCIgYW5kIFwicm90YXRpb25zXCIgbXVzdCBib3RoIGJlIHZhbGlkLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3BsYXRCdWZmZXIuZmlsbFNwbGF0U2NhbGVSb3RhdGlvbkFycmF5KHNjYWxlcywgcm90YXRpb25zLCBzY2VuZVRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNTdGFydCwgc3JjRW5kLCBkZXN0U3RhcnQsIHNjYWxlUm90YXRpb25Db21wcmVzc2lvbkxldmVsLCBzY2FsZU92ZXJyaWRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2VudGVycykgc3BsYXRCdWZmZXIuZmlsbFNwbGF0Q2VudGVyQXJyYXkodGhpcy5tb3JwaGVkTWVzaCwgY2VudGVycywgc2NlbmVUcmFuc2Zvcm0sIHNyY1N0YXJ0LCBzcmNFbmQsIGRlc3RTdGFydCk7XHJcbiAgICAgICAgICAgIGlmIChjb2xvcnMpIHNwbGF0QnVmZmVyLmZpbGxTcGxhdENvbG9yQXJyYXkoY29sb3JzLCBzY2VuZS5taW5pbXVtQWxwaGEsIHNyY1N0YXJ0LCBzcmNFbmQsIGRlc3RTdGFydCk7XHJcbiAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3MpIHtcclxuICAgICAgICAgICAgICAgIHNwbGF0QnVmZmVyLmZpbGxTcGhlcmljYWxIYXJtb25pY3NBcnJheShzcGhlcmljYWxIYXJtb25pY3MsIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lVHJhbnNmb3JtLCBzcmNTdGFydCwgc3JjRW5kLCBkZXN0U3RhcnQsIHNwaGVyaWNhbEhhcm1vbmljc0NvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZXN0U3RhcnQgKz0gc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3JwaGVkTWVzaDtcclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydCBzcGxhdCBjZW50ZXJzLCB3aGljaCBhcmUgZmxvYXRpbmcgcG9pbnQgdmFsdWVzLCB0byBhbiBhcnJheSBvZiBpbnRlZ2VycyBhbmQgbXVsdGlwbHlcclxuICAgICAqIGVhY2ggYnkgMTAwMC4gQ2VudGVycyB3aWxsIGdldCB0cmFuc2Zvcm1lZCBhcyBhcHByb3ByaWF0ZSBiZWZvcmUgY29udmVyc2lvbiB0byBpbnRlZ2VyLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IFRoZSBpbmRleCBhdCB3aGljaCB0byBzdGFydCByZXRyaWV2aW5nIGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgVGhlIGluZGV4IGF0IHdoaWNoIHRvIHN0b3AgcmV0cmlldmluZyBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHBhZEZvdXIgRW5mb3JjZSBhbGlnbm1lbnQgb2YgNCBieSBpbnNlcnRpbmcgYSAxIGFmdGVyIGV2ZXJ5IDMgdmFsdWVzXHJcbiAgICAgKiBAcmV0dXJuIHtJbnQzMkFycmF5fVxyXG4gICAgICovXHJcbiAgICBnZXRJbnRlZ2VyQ2VudGVycyhzdGFydCwgZW5kLCBwYWRGb3VyID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gZW5kIC0gc3RhcnQgKyAxO1xyXG4gICAgICAgIGNvbnN0IGZsb2F0Q2VudGVycyA9IG5ldyBGbG9hdDMyQXJyYXkoc3BsYXRDb3VudCAqIDMpO1xyXG4gICAgICAgIHRoaXMuZmlsbFNwbGF0RGF0YUFycmF5cyhudWxsLCBudWxsLCBudWxsLCBmbG9hdENlbnRlcnMsIG51bGwsIG51bGwsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgc3RhcnQpO1xyXG4gICAgICAgIGxldCBpbnRDZW50ZXJzO1xyXG4gICAgICAgIGxldCBjb21wb25lbnRDb3VudCA9IHBhZEZvdXIgPyA0IDogMztcclxuICAgICAgICBpbnRDZW50ZXJzID0gbmV3IEludDMyQXJyYXkoc3BsYXRDb3VudCAqIGNvbXBvbmVudENvdW50KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDM7IHQrKykge1xyXG4gICAgICAgICAgICAgICAgaW50Q2VudGVyc1tpICogY29tcG9uZW50Q291bnQgKyB0XSA9IE1hdGgucm91bmQoZmxvYXRDZW50ZXJzW2kgKiAzICsgdF0gKiAxMDAwLjApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYWRGb3VyKSBpbnRDZW50ZXJzW2kgKiBjb21wb25lbnRDb3VudCArIDNdID0gMTAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGludENlbnRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwbGF0IGNlbnRlcnMsIHRyYW5zZm9ybWVkIGFzIGFwcHJvcHJpYXRlLCBvcHRpb25hbGx5IHBhZGRlZC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydCBUaGUgaW5kZXggYXQgd2hpY2ggdG8gc3RhcnQgcmV0cmlldmluZyBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBpbmRleCBhdCB3aGljaCB0byBzdG9wIHJldHJpZXZpbmcgZGF0YVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBwYWRGb3VyIEVuZm9yY2UgYWxpZ25tZW50IG9mIDQgYnkgaW5zZXJ0aW5nIGEgMSBhZnRlciBldmVyeSAzIHZhbHVlc1xyXG4gICAgICogQHJldHVybiB7RmxvYXQzMkFycmF5fVxyXG4gICAgICovXHJcbiAgICBnZXRGbG9hdENlbnRlcnMoc3RhcnQsIGVuZCwgcGFkRm91ciA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IGVuZCAtIHN0YXJ0ICsgMTtcclxuICAgICAgICBjb25zdCBmbG9hdENlbnRlcnMgPSBuZXcgRmxvYXQzMkFycmF5KHNwbGF0Q291bnQgKiAzKTtcclxuICAgICAgICB0aGlzLmZpbGxTcGxhdERhdGFBcnJheXMobnVsbCwgbnVsbCwgbnVsbCwgZmxvYXRDZW50ZXJzLCBudWxsLCBudWxsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHN0YXJ0KTtcclxuICAgICAgICBpZiAoIXBhZEZvdXIpIHJldHVybiBmbG9hdENlbnRlcnM7XHJcbiAgICAgICAgbGV0IHBhZGRlZEZsb2F0Q2VudGVycyA9IG5ldyBGbG9hdDMyQXJyYXkoc3BsYXRDb3VudCAqIDQpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMzsgdCsrKSB7XHJcbiAgICAgICAgICAgICAgICBwYWRkZWRGbG9hdENlbnRlcnNbaSAqIDQgKyB0XSA9IGZsb2F0Q2VudGVyc1tpICogMyArIHRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhZGRlZEZsb2F0Q2VudGVyc1tpICogNCArIDNdID0gMS4wO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFkZGVkRmxvYXRDZW50ZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBjZW50ZXIgZm9yIGEgc3BsYXQsIHRyYW5zZm9ybWVkIGFzIGFwcHJvcHJpYXRlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGdsb2JhbEluZGV4IEdsb2JhbCBpbmRleCBvZiBzcGxhdFxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5WZWN0b3IzfSBvdXRDZW50ZXIgVEhSRUUuVmVjdG9yMyBpbnN0YW5jZSBpbiB3aGljaCB0byBzdG9yZSBzcGxhdCBjZW50ZXJcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXBwbHlTY2VuZVRyYW5zZm9ybSBCeSBkZWZhdWx0LCBpZiB0aGUgc3BsYXQgbWVzaCBpcyBzdGF0aWMsIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIHNjZW5lIHRvIHdoaWNoIHRoZSBzcGxhdCBhdFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdnbG9iYWxJbmRleCcgYmVsb25ncyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIHNwbGF0IGNlbnRlci4gSWYgJ2FwcGx5U2NlbmVUcmFuc2Zvcm0nIGlzIHRydWUsXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHNjZW5lIHRyYW5zZm9ybSB3aWxsIGFsd2F5cyBiZSBhcHBsaWVkIGFuZCBpZiAnYXBwbHlTY2VuZVRyYW5zZm9ybScgaXMgZmFsc2UsIHRoZVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lIHRyYW5zZm9ybSB3aWxsIG5ldmVyIGJlIGFwcGxpZWQuIElmIHVuZGVmaW5lZCwgdGhlIGRlZmF1bHQgYmVoYXZpb3Igd2lsbCBhcHBseS5cclxuICAgICAqL1xyXG4gICAgZ2V0U3BsYXRDZW50ZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGFyYW1zT2JqID0ge307XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihtb3JwaGVkTWVzaCwgZ2xvYmFsSW5kZXgsIG91dENlbnRlciwgYXBwbHlTY2VuZVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB0aGlzLmdldExvY2FsU3BsYXRQYXJhbWV0ZXJzKGdsb2JhbEluZGV4LCBwYXJhbXNPYmosIGFwcGx5U2NlbmVUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICBwYXJhbXNPYmouc3BsYXRCdWZmZXIuZ2V0U3BsYXRDZW50ZXIobW9ycGhlZE1lc2gsIHBhcmFtc09iai5sb2NhbEluZGV4LCBvdXRDZW50ZXIsIHBhcmFtc09iai5zY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHNjYWxlIGFuZCByb3RhdGlvbiBmb3IgYSBzcGxhdCwgdHJhbnNmb3JtZWQgYXMgYXBwcm9wcmlhdGUuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ2xvYmFsSW5kZXggR2xvYmFsIGluZGV4IG9mIHNwbGF0XHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLlZlY3RvcjN9IG91dFNjYWxlIFRIUkVFLlZlY3RvcjMgaW5zdGFuY2UgaW4gd2hpY2ggdG8gc3RvcmUgc3BsYXQgc2NhbGVcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuUXVhdGVybmlvbn0gb3V0Um90YXRpb24gVEhSRUUuUXVhdGVybmlvbiBpbnN0YW5jZSBpbiB3aGljaCB0byBzdG9yZSBzcGxhdCByb3RhdGlvblxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhcHBseVNjZW5lVHJhbnNmb3JtIEJ5IGRlZmF1bHQsIGlmIHRoZSBzcGxhdCBtZXNoIGlzIHN0YXRpYywgdGhlIHRyYW5zZm9ybSBvZiB0aGUgc2NlbmUgdG8gd2hpY2ggdGhlIHNwbGF0IGF0XHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dsb2JhbEluZGV4JyBiZWxvbmdzIHdpbGwgYmUgYXBwbGllZCB0byB0aGUgc3BsYXQgc2NhbGUgYW5kIHJvdGF0aW9uLiBJZlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhcHBseVNjZW5lVHJhbnNmb3JtJyBpcyB0cnVlLCB0aGUgc2NlbmUgdHJhbnNmb3JtIHdpbGwgYWx3YXlzIGJlIGFwcGxpZWQgYW5kIGlmXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FwcGx5U2NlbmVUcmFuc2Zvcm0nIGlzIGZhbHNlLCB0aGUgc2NlbmUgdHJhbnNmb3JtIHdpbGwgbmV2ZXIgYmUgYXBwbGllZC4gSWYgdW5kZWZpbmVkLFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBkZWZhdWx0IGJlaGF2aW9yIHdpbGwgYXBwbHkuXHJcbiAgICAgKi9cclxuICAgIGdldFNwbGF0U2NhbGVBbmRSb3RhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBwYXJhbXNPYmogPSB7fTtcclxuICAgICAgICBjb25zdCBzY2FsZU92ZXJyaWRlID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGdsb2JhbEluZGV4LCBvdXRTY2FsZSwgb3V0Um90YXRpb24sIGFwcGx5U2NlbmVUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRMb2NhbFNwbGF0UGFyYW1ldGVycyhnbG9iYWxJbmRleCwgcGFyYW1zT2JqLCBhcHBseVNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgc2NhbGVPdmVycmlkZS54ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBzY2FsZU92ZXJyaWRlLnkgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHNjYWxlT3ZlcnJpZGUueiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3BsYXRSZW5kZXJNb2RlID09PSBTcGxhdFJlbmRlck1vZGUuVHdvRCkgc2NhbGVPdmVycmlkZS56ID0gMDtcclxuICAgICAgICAgICAgcGFyYW1zT2JqLnNwbGF0QnVmZmVyLmdldFNwbGF0U2NhbGVBbmRSb3RhdGlvbihwYXJhbXNPYmoubG9jYWxJbmRleCwgb3V0U2NhbGUsIG91dFJvdGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc09iai5zY2VuZVRyYW5zZm9ybSwgc2NhbGVPdmVycmlkZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGNvbG9yIGZvciBhIHNwbGF0LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGdsb2JhbEluZGV4IEdsb2JhbCBpbmRleCBvZiBzcGxhdFxyXG4gICAgICogQHBhcmFtIHtUSFJFRS5WZWN0b3I0fSBvdXRDb2xvciBUSFJFRS5WZWN0b3I0IGluc3RhbmNlIGluIHdoaWNoIHRvIHN0b3JlIHNwbGF0IGNvbG9yXHJcbiAgICAgKi9cclxuICAgIGdldFNwbGF0Q29sb3IgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGFyYW1zT2JqID0ge307XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihnbG9iYWxJbmRleCwgb3V0Q29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRMb2NhbFNwbGF0UGFyYW1ldGVycyhnbG9iYWxJbmRleCwgcGFyYW1zT2JqKTtcclxuICAgICAgICAgICAgcGFyYW1zT2JqLnNwbGF0QnVmZmVyLmdldFNwbGF0Q29sb3IocGFyYW1zT2JqLmxvY2FsSW5kZXgsIG91dENvbG9yKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIHNjZW5lIGF0ICdzY2VuZUluZGV4JyBpbiAnb3V0VHJhbnNmb3JtJy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY2VuZUluZGV4IEluZGV4IG9mIHRoZSBkZXNpcmVkIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge1RIUkVFLk1hdHJpeDR9IG91dFRyYW5zZm9ybSBJbnN0YW5jZSBvZiBUSFJFRS5NYXRyaXg0IGluIHdoaWNoIHRvIHN0b3JlIHRoZSBzY2VuZSdzIHRyYW5zZm9ybVxyXG4gICAgICovXHJcbiAgICBnZXRTY2VuZVRyYW5zZm9ybShzY2VuZUluZGV4LCBvdXRUcmFuc2Zvcm0pIHtcclxuICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoc2NlbmVJbmRleCk7XHJcbiAgICAgICAgc2NlbmUudXBkYXRlVHJhbnNmb3JtKHRoaXMuZHluYW1pY01vZGUpO1xyXG4gICAgICAgIG91dFRyYW5zZm9ybS5jb3B5KHNjZW5lLnRyYW5zZm9ybSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHNjZW5lIGF0ICdzY2VuZUluZGV4Jy5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzY2VuZUluZGV4IEluZGV4IG9mIHRoZSBkZXNpcmVkIHNjZW5lXHJcbiAgICAgKiBAcmV0dXJuIHtTcGxhdFNjZW5lfVxyXG4gICAgICovXHJcbiAgICBnZXRTY2VuZShzY2VuZUluZGV4KSB7XHJcbiAgICAgICAgaWYgKHNjZW5lSW5kZXggPCAwIHx8IHNjZW5lSW5kZXggPj0gdGhpcy5zY2VuZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3BsYXRNZXNoOjpnZXRTY2VuZSgpIC0+IEludmFsaWQgc2NlbmUgaW5kZXguJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lc1tzY2VuZUluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTY2VuZUNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRCdWZmZXJGb3JTcGxhdChnbG9iYWxJbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFNjZW5lKHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2NlbmVJbmRleE1hcFtnbG9iYWxJbmRleF0pLnNwbGF0QnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNjZW5lSW5kZXhGb3JTcGxhdChnbG9iYWxJbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXBbZ2xvYmFsSW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNjZW5lVHJhbnNmb3JtRm9yU3BsYXQoZ2xvYmFsSW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTY2VuZSh0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NjZW5lSW5kZXhNYXBbZ2xvYmFsSW5kZXhdKS50cmFuc2Zvcm07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3BsYXRMb2NhbEluZGV4KGdsb2JhbEluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvTG9jYWxTcGxhdEluZGV4TWFwW2dsb2JhbEluZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0SW50ZWdlck1hdHJpeEFycmF5KG1hdHJpeCkge1xyXG4gICAgICAgIGNvbnN0IG1hdHJpeEVsZW1lbnRzID0gbWF0cml4LmVsZW1lbnRzO1xyXG4gICAgICAgIGNvbnN0IGludE1hdHJpeEFycmF5ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGludE1hdHJpeEFycmF5W2ldID0gTWF0aC5yb3VuZChtYXRyaXhFbGVtZW50c1tpXSAqIDEwMDAuMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnRNYXRyaXhBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlQm91bmRpbmdCb3goYXBwbHlTY2VuZVRyYW5zZm9ybXMgPSBmYWxzZSwgc2NlbmVJbmRleCkge1xyXG4gICAgICAgIGxldCBzcGxhdENvdW50ID0gdGhpcy5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgICAgaWYgKHNjZW5lSW5kZXggIT09IHVuZGVmaW5lZCAmJiBzY2VuZUluZGV4ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChzY2VuZUluZGV4IDwgMCB8fCBzY2VuZUluZGV4ID49IHRoaXMuc2NlbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTcGxhdE1lc2g6OmNvbXB1dGVCb3VuZGluZ0JveCgpIC0+IEludmFsaWQgc2NlbmUgaW5kZXguJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3BsYXRDb3VudCA9IHRoaXMuc2NlbmVzW3NjZW5lSW5kZXhdLnNwbGF0QnVmZmVyLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGZsb2F0Q2VudGVycyA9IG5ldyBGbG9hdDMyQXJyYXkoc3BsYXRDb3VudCAqIDMpO1xyXG4gICAgICAgIHRoaXMuZmlsbFNwbGF0RGF0YUFycmF5cyhudWxsLCBudWxsLCBudWxsLCBmbG9hdENlbnRlcnMsIG51bGwsIG51bGwsIGFwcGx5U2NlbmVUcmFuc2Zvcm1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHNjZW5lSW5kZXgpO1xyXG5cclxuICAgICAgICBjb25zdCBtaW4gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IG1heCA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaSAqIDM7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBmbG9hdENlbnRlcnNbb2Zmc2V0XTtcclxuICAgICAgICAgICAgY29uc3QgeSA9IGZsb2F0Q2VudGVyc1tvZmZzZXQgKyAxXTtcclxuICAgICAgICAgICAgY29uc3QgeiA9IGZsb2F0Q2VudGVyc1tvZmZzZXQgKyAyXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgeCA8IG1pbi54KSBtaW4ueCA9IHg7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHkgPCBtaW4ueSkgbWluLnkgPSB5O1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB6IDwgbWluLnopIG1pbi56ID0gejtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgeCA+IG1heC54KSBtYXgueCA9IHg7XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IHkgPiBtYXgueSkgbWF4LnkgPSB5O1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCB6ID4gbWF4LnopIG1heC56ID0gejtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQm94MyhtaW4sIG1heCk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogRGlyZWN0TG9hZEVycm9yXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIE1pbm9yIGVuaGFuY2VtZW50OiBBZGRlZCB0aGlzLm5hbWUgcHJvcGVydHkgZm9yIGJldHRlciBlcnJvciBpZGVudGlmaWNhdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBEaXJlY3RMb2FkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihtc2cpIHtcclxuICAgICAgICBzdXBlcihtc2cpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEaXJlY3RMb2FkRXJyb3InO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBVbmNvbXByZXNzZWRTcGxhdEFycmF5XHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICogSW1wb3J0IHBhdGhzIGFkanVzdGVkIGZvciBnc3BsYXQtZmxhbWUtYXZhdGFyIHBhY2thZ2Ugc3RydWN0dXJlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlIH0gZnJvbSAnLi4vdXRpbHMvVXRpbC5qcyc7XHJcblxyXG5jb25zdCBCQVNFX0NPTVBPTkVOVF9DT1VOVCA9IDE0O1xyXG5cclxuZXhwb3J0IGNsYXNzIFVuY29tcHJlc3NlZFNwbGF0QXJyYXkge1xyXG5cclxuICAgIHN0YXRpYyBPRkZTRVQgPSB7XHJcbiAgICAgICAgWDogMCxcclxuICAgICAgICBZOiAxLFxyXG4gICAgICAgIFo6IDIsXHJcbiAgICAgICAgU0NBTEUwOiAzLFxyXG4gICAgICAgIFNDQUxFMTogNCxcclxuICAgICAgICBTQ0FMRTI6IDUsXHJcbiAgICAgICAgUk9UQVRJT04wOiA2LFxyXG4gICAgICAgIFJPVEFUSU9OMTogNyxcclxuICAgICAgICBST1RBVElPTjI6IDgsXHJcbiAgICAgICAgUk9UQVRJT04zOiA5LFxyXG4gICAgICAgIEZEQzA6IDEwLFxyXG4gICAgICAgIEZEQzE6IDExLFxyXG4gICAgICAgIEZEQzI6IDEyLFxyXG4gICAgICAgIE9QQUNJVFk6IDEzLFxyXG4gICAgICAgIEZSQzA6IDE0LFxyXG4gICAgICAgIEZSQzE6IDE1LFxyXG4gICAgICAgIEZSQzI6IDE2LFxyXG4gICAgICAgIEZSQzM6IDE3LFxyXG4gICAgICAgIEZSQzQ6IDE4LFxyXG4gICAgICAgIEZSQzU6IDE5LFxyXG4gICAgICAgIEZSQzY6IDIwLFxyXG4gICAgICAgIEZSQzc6IDIxLFxyXG4gICAgICAgIEZSQzg6IDIyLFxyXG4gICAgICAgIEZSQzk6IDIzLFxyXG4gICAgICAgIEZSQzEwOiAyNCxcclxuICAgICAgICBGUkMxMTogMjUsXHJcbiAgICAgICAgRlJDMTI6IDI2LFxyXG4gICAgICAgIEZSQzEzOiAyNyxcclxuICAgICAgICBGUkMxNDogMjgsXHJcbiAgICAgICAgRlJDMTU6IDI5LFxyXG4gICAgICAgIEZSQzE2OiAzMCxcclxuICAgICAgICBGUkMxNzogMzEsXHJcbiAgICAgICAgRlJDMTg6IDMyLFxyXG4gICAgICAgIEZSQzE5OiAzMyxcclxuICAgICAgICBGUkMyMDogMzQsXHJcbiAgICAgICAgRlJDMjE6IDM1LFxyXG4gICAgICAgIEZSQzIyOiAzNixcclxuICAgICAgICBGUkMyMzogMzdcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlO1xyXG4gICAgICAgIHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzQ291bnQgPSBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZSh0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRDb3VudCA9IHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzQ291bnQgKyBCQVNFX0NPTVBPTkVOVF9DT1VOVDtcclxuICAgICAgICB0aGlzLmRlZmF1bHRTcGhlcmljYWxIYXJtb25pY3MgPSBuZXcgQXJyYXkodGhpcy5zcGhlcmljYWxIYXJtb25pY3NDb3VudCkuZmlsbCgwKTtcclxuICAgICAgICB0aGlzLnNwbGF0cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc3BsYXRDb3VudCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZVNwbGF0KHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICBjb25zdCBiYXNlU3BsYXQgPSBbMCwgMCwgMCwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XHJcbiAgICAgICAgbGV0IHNoRW50cmllcyA9IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaEVudHJpZXM7IGkrKykgYmFzZVNwbGF0LnB1c2goMCk7XHJcbiAgICAgICAgcmV0dXJuIGJhc2VTcGxhdDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTcGxhdChzcGxhdCkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRzLnB1c2goc3BsYXQpO1xyXG4gICAgICAgIHRoaXMuc3BsYXRDb3VudCsrO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0KGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsYXRzW2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBhZGREZWZhdWx0U3BsYXQoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3U3BsYXQgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5LmNyZWF0ZVNwbGF0KHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICB0aGlzLmFkZFNwbGF0KG5ld1NwbGF0KTtcclxuICAgICAgICByZXR1cm4gbmV3U3BsYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU3BsYXRGcm9tQ29tb25lbnRzKHgsIHksIHosIHNjYWxlMCwgc2NhbGUxLCBzY2FsZTIsIHJvdDAsIHJvdDEsIHJvdDIsIHJvdDMsIHIsIGcsIGIsIG9wYWNpdHksIC4uLnJlc3QpIHtcclxuICAgICAgICBjb25zdCBuZXdTcGxhdCA9IFt4LCB5LCB6LCBzY2FsZTAsIHNjYWxlMSwgc2NhbGUyLCByb3QwLCByb3QxLCByb3QyLCByb3QzLCByLCBnLCBiLCBvcGFjaXR5LCAuLi50aGlzLmRlZmF1bHRTcGhlcmljYWxIYXJtb25pY3NdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdC5sZW5ndGggJiYgaSA8IHRoaXMuc3BoZXJpY2FsSGFybW9uaWNzQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtpXSA9IHJlc3RbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkU3BsYXQobmV3U3BsYXQpO1xyXG4gICAgICAgIHJldHVybiBuZXdTcGxhdDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRTcGxhdEZyb21BcnJheShzcmMsIHNyY0luZGV4KSB7XHJcbiAgICAgICAgY29uc3Qgc3JjU3BsYXQgPSBzcmMuc3BsYXRzW3NyY0luZGV4XTtcclxuICAgICAgICBjb25zdCBuZXdTcGxhdCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuY3JlYXRlU3BsYXQodGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb21wb25lbnRDb3VudCAmJiBpIDwgc3JjU3BsYXQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbmV3U3BsYXRbaV0gPSBzcmNTcGxhdFtpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRTcGxhdChuZXdTcGxhdCk7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogU3BsYXRCdWZmZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gdGhlIG9yaWdpbmFsLlxyXG4gKiBJbXBvcnQgcGF0aHMgYWRqdXN0ZWQgZm9yIGdzcGxhdC1mbGFtZS1hdmF0YXIgcGFja2FnZSBzdHJ1Y3R1cmUuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgRGF0YVV0aWxzLCBNYXRyaXgzLCBNYXRyaXg0LCBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBVbmNvbXByZXNzZWRTcGxhdEFycmF5IH0gZnJvbSAnLi9VbmNvbXByZXNzZWRTcGxhdEFycmF5LmpzJztcclxuaW1wb3J0IHsgY2xhbXAsIGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlLCBEZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlLCBjb252ZXJ0QmV0d2VlbkNvbXByZXNzaW9uTGV2ZWxzIH0gZnJvbSAnLi4vdXRpbHMvVXRpbC5qcyc7XHJcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJy4uL2VudW1zL0VuZ2luZUNvbnN0YW50cy5qcyc7XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvcHkgYnl0ZXMgYmV0d2VlbiBidWZmZXJzXHJcbiAqL1xyXG5jb25zdCBjb3B5QmV0d2VlbkJ1ZmZlcnMgPSAoc3JjQnVmZmVyLCBzcmNPZmZzZXQsIGRlc3RCdWZmZXIsIGRlc3RPZmZzZXQsIGJ5dGVDb3VudCA9IDApID0+IHtcclxuICAgIGNvbnN0IHNyYyA9IG5ldyBVaW50OEFycmF5KHNyY0J1ZmZlciwgc3JjT2Zmc2V0KTtcclxuICAgIGNvbnN0IGRlc3QgPSBuZXcgVWludDhBcnJheShkZXN0QnVmZmVyLCBkZXN0T2Zmc2V0KTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZUNvdW50OyBpKyspIHtcclxuICAgICAgICBkZXN0W2ldID0gc3JjW2ldO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gQ29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBoZWxwZXIgZnVuY3Rpb25zXHJcbmNvbnN0IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZSA9IENvbnN0YW50cy5TcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25SYW5nZTtcclxuXHJcbmNvbnN0IHRvSGFsZkZsb2F0ID0gRGF0YVV0aWxzLnRvSGFsZkZsb2F0LmJpbmQoRGF0YVV0aWxzKTtcclxuY29uc3QgZnJvbUhhbGZGbG9hdCA9IERhdGFVdGlscy5mcm9tSGFsZkZsb2F0LmJpbmQoRGF0YVV0aWxzKTtcclxuXHJcbmNvbnN0IHRvVW5jb21wcmVzc2VkRmxvYXQgPSAoZiwgY29tcHJlc3Npb25MZXZlbCwgaXNTSCA9IGZhbHNlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCkgPT4ge1xyXG4gICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gZjtcclxuICAgIH0gZWxzZSBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMSB8fCBjb21wcmVzc2lvbkxldmVsID09PSAyICYmICFpc1NIKSB7XHJcbiAgICAgICAgcmV0dXJuIERhdGFVdGlscy5mcm9tSGFsZkZsb2F0KGYpO1xyXG4gICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZyb21VaW50OChmLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCB0b1VpbnQ4ID0gKHYsIHJhbmdlTWluLCByYW5nZU1heCkgPT4ge1xyXG4gICAgdiA9IGNsYW1wKHYsIHJhbmdlTWluLCByYW5nZU1heCk7XHJcbiAgICBjb25zdCByYW5nZSA9IChyYW5nZU1heCAtIHJhbmdlTWluKTtcclxuICAgIHJldHVybiBjbGFtcChNYXRoLmZsb29yKCh2IC0gcmFuZ2VNaW4pIC8gcmFuZ2UgKiAyNTUpLCAwLCAyNTUpO1xyXG59O1xyXG5cclxuY29uc3QgZnJvbVVpbnQ4ID0gKHYsIHJhbmdlTWluLCByYW5nZU1heCkgPT4ge1xyXG4gICAgY29uc3QgcmFuZ2UgPSAocmFuZ2VNYXggLSByYW5nZU1pbik7XHJcbiAgICByZXR1cm4gKHYgLyAyNTUgKiByYW5nZSArIHJhbmdlTWluKTtcclxufTtcclxuXHJcbmNvbnN0IGZyb21IYWxmRmxvYXRUb1VpbnQ4ID0gKHYsIHJhbmdlTWluLCByYW5nZU1heCkgPT4ge1xyXG4gICAgcmV0dXJuIHRvVWludDgoZnJvbUhhbGZGbG9hdCh2KSwgcmFuZ2VNaW4sIHJhbmdlTWF4KTtcclxufTtcclxuXHJcbmNvbnN0IGZyb21VaW50OFRvSGFsZkZsb2F0ID0gKHYsIHJhbmdlTWluLCByYW5nZU1heCkgPT4ge1xyXG4gICAgcmV0dXJuIHRvSGFsZkZsb2F0KGZyb21VaW50OCh2LCByYW5nZU1pbiwgcmFuZ2VNYXgpKTtcclxufTtcclxuXHJcbmNvbnN0IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsID0gKGRhdGFWaWV3LCBmbG9hdEluZGV4LCBjb21wcmVzc2lvbkxldmVsLCBpc1NIID0gZmFsc2UpID0+IHtcclxuICAgIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldEZsb2F0MzIoZmxvYXRJbmRleCAqIDQsIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsID09PSAxIHx8IGNvbXByZXNzaW9uTGV2ZWwgPT09IDIgJiYgIWlzU0gpIHtcclxuICAgICAgICByZXR1cm4gZGF0YVZpZXcuZ2V0VWludDE2KGZsb2F0SW5kZXggKiAyLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFWaWV3LmdldFVpbnQ4KGZsb2F0SW5kZXgsIHRydWUpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0QnVmZmVyIHtcclxuXHJcbiAgICBzdGF0aWMgQ3VycmVudE1ham9yVmVyc2lvbiA9IDA7XHJcbiAgICBzdGF0aWMgQ3VycmVudE1pbm9yVmVyc2lvbiA9IDE7XHJcblxyXG4gICAgc3RhdGljIENlbnRlckNvbXBvbmVudENvdW50ID0gMztcclxuICAgIHN0YXRpYyBTY2FsZUNvbXBvbmVudENvdW50ID0gMztcclxuICAgIHN0YXRpYyBSb3RhdGlvbkNvbXBvbmVudENvdW50ID0gNDtcclxuICAgIHN0YXRpYyBDb2xvckNvbXBvbmVudENvdW50ID0gNDtcclxuICAgIHN0YXRpYyBDb3ZhcmlhbmNlQ29tcG9uZW50Q291bnQgPSA2O1xyXG5cclxuICAgIHN0YXRpYyBTcGxhdFNjYWxlT2Zmc2V0RmxvYXQgPSAzO1xyXG4gICAgc3RhdGljIFNwbGF0Um90YXRpb25PZmZzZXRGbG9hdCA9IDY7XHJcblxyXG4gICAgc3RhdGljIENvbXByZXNzaW9uTGV2ZWxzID0ge1xyXG4gICAgICAgIDA6IHtcclxuICAgICAgICAgICAgQnl0ZXNQZXJDZW50ZXI6IDEyLFxyXG4gICAgICAgICAgICBCeXRlc1BlclNjYWxlOiAxMixcclxuICAgICAgICAgICAgQnl0ZXNQZXJSb3RhdGlvbjogMTYsXHJcbiAgICAgICAgICAgIEJ5dGVzUGVyQ29sb3I6IDQsXHJcbiAgICAgICAgICAgIFNjYWxlT2Zmc2V0Qnl0ZXM6IDEyLFxyXG4gICAgICAgICAgICBSb3RhdGlvbmZmc2V0Qnl0ZXM6IDI0LFxyXG4gICAgICAgICAgICBDb2xvck9mZnNldEJ5dGVzOiA0MCxcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0Qnl0ZXM6IDQ0LFxyXG4gICAgICAgICAgICBTY2FsZVJhbmdlOiAxLFxyXG4gICAgICAgICAgICBCeXRlc1BlclNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudDogNCxcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0RmxvYXQ6IDExLFxyXG4gICAgICAgICAgICBTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVzOiB7XHJcbiAgICAgICAgICAgICAgICAwOiB7IEJ5dGVzUGVyU3BsYXQ6IDQ0IH0sXHJcbiAgICAgICAgICAgICAgICAxOiB7IEJ5dGVzUGVyU3BsYXQ6IDgwIH0sXHJcbiAgICAgICAgICAgICAgICAyOiB7IEJ5dGVzUGVyU3BsYXQ6IDE0MCB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAxOiB7XHJcbiAgICAgICAgICAgIEJ5dGVzUGVyQ2VudGVyOiA2LFxyXG4gICAgICAgICAgICBCeXRlc1BlclNjYWxlOiA2LFxyXG4gICAgICAgICAgICBCeXRlc1BlclJvdGF0aW9uOiA4LFxyXG4gICAgICAgICAgICBCeXRlc1BlckNvbG9yOiA0LFxyXG4gICAgICAgICAgICBTY2FsZU9mZnNldEJ5dGVzOiA2LFxyXG4gICAgICAgICAgICBSb3RhdGlvbmZmc2V0Qnl0ZXM6IDEyLFxyXG4gICAgICAgICAgICBDb2xvck9mZnNldEJ5dGVzOiAyMCxcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0Qnl0ZXM6IDI0LFxyXG4gICAgICAgICAgICBTY2FsZVJhbmdlOiAzMjc2NyxcclxuICAgICAgICAgICAgQnl0ZXNQZXJTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnQ6IDIsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc09mZnNldEZsb2F0OiAxMixcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlczoge1xyXG4gICAgICAgICAgICAgICAgMDogeyBCeXRlc1BlclNwbGF0OiAyNCB9LFxyXG4gICAgICAgICAgICAgICAgMTogeyBCeXRlc1BlclNwbGF0OiA0MiB9LFxyXG4gICAgICAgICAgICAgICAgMjogeyBCeXRlc1BlclNwbGF0OiA3MiB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICAyOiB7XHJcbiAgICAgICAgICAgIEJ5dGVzUGVyQ2VudGVyOiA2LFxyXG4gICAgICAgICAgICBCeXRlc1BlclNjYWxlOiA2LFxyXG4gICAgICAgICAgICBCeXRlc1BlclJvdGF0aW9uOiA4LFxyXG4gICAgICAgICAgICBCeXRlc1BlckNvbG9yOiA0LFxyXG4gICAgICAgICAgICBTY2FsZU9mZnNldEJ5dGVzOiA2LFxyXG4gICAgICAgICAgICBSb3RhdGlvbmZmc2V0Qnl0ZXM6IDEyLFxyXG4gICAgICAgICAgICBDb2xvck9mZnNldEJ5dGVzOiAyMCxcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0Qnl0ZXM6IDI0LFxyXG4gICAgICAgICAgICBTY2FsZVJhbmdlOiAzMjc2NyxcclxuICAgICAgICAgICAgQnl0ZXNQZXJTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnQ6IDEsXHJcbiAgICAgICAgICAgIFNwaGVyaWNhbEhhcm1vbmljc09mZnNldEZsb2F0OiAxMixcclxuICAgICAgICAgICAgU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlczoge1xyXG4gICAgICAgICAgICAgICAgMDogeyBCeXRlc1BlclNwbGF0OiAyNCB9LFxyXG4gICAgICAgICAgICAgICAgMTogeyBCeXRlc1BlclNwbGF0OiAzMyB9LFxyXG4gICAgICAgICAgICAgICAgMjogeyBCeXRlc1BlclNwbGF0OiA0OCB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgQ292YXJpYW5jZVNpemVGbG9hdHMgPSA2O1xyXG5cclxuICAgIHN0YXRpYyBIZWFkZXJTaXplQnl0ZXMgPSA0MDk2O1xyXG4gICAgc3RhdGljIFNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgPSAxMDI0O1xyXG5cclxuICAgIHN0YXRpYyBCdWNrZXRTdG9yYWdlU2l6ZUJ5dGVzID0gMTI7XHJcbiAgICBzdGF0aWMgQnVja2V0U3RvcmFnZVNpemVGbG9hdHMgPSAzO1xyXG5cclxuICAgIHN0YXRpYyBCdWNrZXRCbG9ja1NpemUgPSA1LjA7XHJcbiAgICBzdGF0aWMgQnVja2V0U2l6ZSA9IDI1NjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihidWZmZXJEYXRhLCBzZWNMb2FkZWRDb3VudHNUb01heCA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmNvbnN0cnVjdEZyb21CdWZmZXIoYnVmZmVyRGF0YSwgc2VjTG9hZGVkQ291bnRzVG9NYXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNwbGF0Q291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNYXhTcGxhdENvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1heFNwbGF0Q291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWluU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKCkge1xyXG4gICAgICAgIGxldCBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgc2VjdGlvbi5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPCBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpIHtcclxuICAgICAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IHNlY3Rpb24uc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtaW5TcGhlcmljYWxIYXJtb25pY3NEZWdyZWU7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QnVja2V0SW5kZXgoc2VjdGlvbiwgbG9jYWxTcGxhdEluZGV4KSB7XHJcbiAgICAgICAgbGV0IGJ1Y2tldEluZGV4O1xyXG4gICAgICAgIGNvbnN0IG1heFNwbGF0SW5kZXhJbkZ1bGxCdWNrZXRzID0gc2VjdGlvbi5mdWxsQnVja2V0Q291bnQgKiBzZWN0aW9uLmJ1Y2tldFNpemU7XHJcbiAgICAgICAgaWYgKGxvY2FsU3BsYXRJbmRleCA8IG1heFNwbGF0SW5kZXhJbkZ1bGxCdWNrZXRzKSB7XHJcbiAgICAgICAgICAgIGJ1Y2tldEluZGV4ID0gTWF0aC5mbG9vcihsb2NhbFNwbGF0SW5kZXggLyBzZWN0aW9uLmJ1Y2tldFNpemUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBidWNrZXRTcGxhdEluZGV4ID0gbWF4U3BsYXRJbmRleEluRnVsbEJ1Y2tldHM7XHJcbiAgICAgICAgICAgIGJ1Y2tldEluZGV4ID0gc2VjdGlvbi5mdWxsQnVja2V0Q291bnQ7XHJcbiAgICAgICAgICAgIGxldCBwYXJ0aWFsbHlGdWxsQnVja2V0SW5kZXggPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoYnVja2V0U3BsYXRJbmRleCA8IHNlY3Rpb24uc3BsYXRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQYXJ0aWFsbHlGaWxsZWRCdWNrZXRTaXplID0gc2VjdGlvbi5wYXJ0aWFsbHlGaWxsZWRCdWNrZXRMZW5ndGhzW3BhcnRpYWxseUZ1bGxCdWNrZXRJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxTcGxhdEluZGV4ID49IGJ1Y2tldFNwbGF0SW5kZXggJiYgbG9jYWxTcGxhdEluZGV4IDwgYnVja2V0U3BsYXRJbmRleCArIGN1cnJlbnRQYXJ0aWFsbHlGaWxsZWRCdWNrZXRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBidWNrZXRTcGxhdEluZGV4ICs9IGN1cnJlbnRQYXJ0aWFsbHlGaWxsZWRCdWNrZXRTaXplO1xyXG4gICAgICAgICAgICAgICAgYnVja2V0SW5kZXgrKztcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxseUZ1bGxCdWNrZXRJbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidWNrZXRJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdENlbnRlcihtb3JwaGVkTWVzaCwgZ2xvYmFsU3BsYXRJbmRleCwgb3V0Q2VudGVyLCB0cmFuc2Zvcm0pIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbZ2xvYmFsU3BsYXRJbmRleF07XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBnbG9iYWxTcGxhdEluZGV4IC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICBjb25zdCBzcmNTcGxhdENlbnRlcnNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4O1xyXG4gICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5kYXRhQmFzZSArIHNyY1NwbGF0Q2VudGVyc0Jhc2UpO1xyXG5cclxuICAgICAgICBjb25zdCB4ID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgY29uc3QgeSA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAxLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgIGNvbnN0IHogPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICBpZiAodGhpcy5jb21wcmVzc2lvbkxldmVsID49IDEpIHtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0SW5kZXggPSB0aGlzLmdldEJ1Y2tldEluZGV4KHNlY3Rpb24sIGxvY2FsU3BsYXRJbmRleCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEJhc2UgPSBidWNrZXRJbmRleCAqIFNwbGF0QnVmZmVyLkJ1Y2tldFN0b3JhZ2VTaXplRmxvYXRzO1xyXG4gICAgICAgICAgICBjb25zdCBzZiA9IHNlY3Rpb24uY29tcHJlc3Npb25TY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgY29uc3Qgc3IgPSBzZWN0aW9uLmNvbXByZXNzaW9uU2NhbGVSYW5nZTtcclxuICAgICAgICAgICAgb3V0Q2VudGVyLnggPSAoeCAtIHNyKSAqIHNmICsgc2VjdGlvbi5idWNrZXRBcnJheVtidWNrZXRCYXNlXTtcclxuICAgICAgICAgICAgb3V0Q2VudGVyLnkgPSAoeSAtIHNyKSAqIHNmICsgc2VjdGlvbi5idWNrZXRBcnJheVtidWNrZXRCYXNlICsgMV07XHJcbiAgICAgICAgICAgIG91dENlbnRlci56ID0gKHogLSBzcikgKiBzZiArIHNlY3Rpb24uYnVja2V0QXJyYXlbYnVja2V0QmFzZSArIDJdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG91dENlbnRlci54ID0geDtcclxuICAgICAgICAgICAgb3V0Q2VudGVyLnkgPSB5O1xyXG4gICAgICAgICAgICBvdXRDZW50ZXIueiA9IHo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvdXRDZW50ZXIueCArPSBtb3JwaGVkTWVzaFtnbG9iYWxTcGxhdEluZGV4ICogMyArIDBdO1xyXG4gICAgICAgIG91dENlbnRlci55ICs9IG1vcnBoZWRNZXNoW2dsb2JhbFNwbGF0SW5kZXggKiAzICsgMV07XHJcbiAgICAgICAgb3V0Q2VudGVyLnogKz0gbW9ycGhlZE1lc2hbZ2xvYmFsU3BsYXRJbmRleCAqIDMgKyAyXTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0cmFuc2Zvcm0pIG91dENlbnRlci5hcHBseU1hdHJpeDQodHJhbnNmb3JtKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTcGxhdFNjYWxlQW5kUm90YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGVNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCB0ZW1wUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpbmRleCwgb3V0U2NhbGUsIG91dFJvdGF0aW9uLCB0cmFuc2Zvcm0sIHNjYWxlT3ZlcnJpZGUpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2luZGV4XTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gaW5kZXggLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcmNTcGxhdFNjYWxlc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1t0aGlzLmNvbXByZXNzaW9uTGV2ZWxdLlNjYWxlT2Zmc2V0Qnl0ZXM7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdFNjYWxlc0Jhc2UpO1xyXG5cclxuICAgICAgICAgICAgc2NhbGUuc2V0KHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAxLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSk7XHJcbiAgICAgICAgICAgIGlmIChzY2FsZU92ZXJyaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NhbGVPdmVycmlkZS54ICE9PSB1bmRlZmluZWQpIHNjYWxlLnggPSBzY2FsZU92ZXJyaWRlLng7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NhbGVPdmVycmlkZS55ICE9PSB1bmRlZmluZWQpIHNjYWxlLnkgPSBzY2FsZU92ZXJyaWRlLnk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2NhbGVPdmVycmlkZS56ICE9PSB1bmRlZmluZWQpIHNjYWxlLnogPSBzY2FsZU92ZXJyaWRlLno7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJvdGF0aW9uLnNldCh0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA0LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDYsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAzLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHNjYWxlTWF0cml4Lm1ha2VTY2FsZShzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56KTtcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uTWF0cml4Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXRyaXguY29weShzY2FsZU1hdHJpeCkubXVsdGlwbHkocm90YXRpb25NYXRyaXgpLm11bHRpcGx5KHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LmRlY29tcG9zZSh0ZW1wUG9zaXRpb24sIG91dFJvdGF0aW9uLCBvdXRTY2FsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvdXRTY2FsZS5jb3B5KHNjYWxlKTtcclxuICAgICAgICAgICAgICAgIG91dFJvdGF0aW9uLmNvcHkocm90YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgZ2V0U3BsYXRDb2xvcihnbG9iYWxTcGxhdEluZGV4LCBvdXRDb2xvcikge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtnbG9iYWxTcGxhdEluZGV4XTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IGxvY2FsU3BsYXRJbmRleCA9IGdsb2JhbFNwbGF0SW5kZXggLSBzZWN0aW9uLnNwbGF0Q291bnRPZmZzZXQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNyY1NwbGF0Q29sb3JzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbdGhpcy5jb21wcmVzc2lvbkxldmVsXS5Db2xvck9mZnNldEJ5dGVzO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q29sb3JzQXJyYXkgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdENvbG9yc0Jhc2UsIDQpO1xyXG5cclxuICAgICAgICBvdXRDb2xvci5zZXQoc3BsYXRDb2xvcnNBcnJheVswXSwgc3BsYXRDb2xvcnNBcnJheVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgc3BsYXRDb2xvcnNBcnJheVsyXSwgc3BsYXRDb2xvcnNBcnJheVszXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlsbFNwbGF0Q2VudGVyQXJyYXkobW9ycGhlZE1lc2gsIG91dENlbnRlckFycmF5LCB0cmFuc2Zvcm0sIHNyY0Zyb20sIHNyY1RvLCBkZXN0RnJvbSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgIHNyY0Zyb20gPSBzcmNGcm9tIHx8IDA7XHJcbiAgICAgICAgc3JjVG8gPSBzcmNUbyB8fCBzcGxhdENvdW50IC0gMTtcclxuICAgICAgICBpZiAoZGVzdEZyb20gPT09IHVuZGVmaW5lZCkgZGVzdEZyb20gPSBzcmNGcm9tO1xyXG5cclxuICAgICAgICBjb25zdCBjZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBzcmNGcm9tOyBpIDw9IHNyY1RvOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBpIC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXJEZXN0QmFzZSA9IChpIC0gc3JjRnJvbSArIGRlc3RGcm9tKSAqIFNwbGF0QnVmZmVyLkNlbnRlckNvbXBvbmVudENvdW50O1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3JjU3BsYXRDZW50ZXJzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleDtcclxuICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRDZW50ZXJzQmFzZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB4ID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHkgPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgY29uc3QgeiA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wcmVzc2lvbkxldmVsID49IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEluZGV4ID0gdGhpcy5nZXRCdWNrZXRJbmRleChzZWN0aW9uLCBsb2NhbFNwbGF0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0QmFzZSA9IGJ1Y2tldEluZGV4ICogU3BsYXRCdWZmZXIuQnVja2V0U3RvcmFnZVNpemVGbG9hdHM7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZiA9IHNlY3Rpb24uY29tcHJlc3Npb25TY2FsZUZhY3RvcjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyID0gc2VjdGlvbi5jb21wcmVzc2lvblNjYWxlUmFuZ2U7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIueCA9ICh4IC0gc3IpICogc2YgKyBzZWN0aW9uLmJ1Y2tldEFycmF5W2J1Y2tldEJhc2VdO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnkgPSAoeSAtIHNyKSAqIHNmICsgc2VjdGlvbi5idWNrZXRBcnJheVtidWNrZXRCYXNlICsgMV07XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIueiA9ICh6IC0gc3IpICogc2YgKyBzZWN0aW9uLmJ1Y2tldEFycmF5W2J1Y2tldEJhc2UgKyAyXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNlbnRlci54ID0geDtcclxuICAgICAgICAgICAgICAgIGNlbnRlci55ID0geTtcclxuICAgICAgICAgICAgICAgIGNlbnRlci56ID0gejtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIuYXBwbHlNYXRyaXg0KHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlXSA9IGNlbnRlci54ICsgbW9ycGhlZE1lc2hbaSAqIDMgKyAwXTtcclxuICAgICAgICAgICAgb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2UgKyAxXSA9IGNlbnRlci55ICsgbW9ycGhlZE1lc2hbaSAqIDMgKyAxXTtcclxuICAgICAgICAgICAgb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2UgKyAyXSA9IGNlbnRlci56ICsgbW9ycGhlZE1lc2hbaSAqIDMgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIC8vIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlXSA9IG1vcnBoZWRNZXNoW2NlbnRlckRlc3RCYXNlXTtcclxuICAgICAgICAgICAgLy8gb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2UgKyAxXSA9IG1vcnBoZWRNZXNoW2NlbnRlckRlc3RCYXNlICsgMV07XHJcbiAgICAgICAgICAgIC8vIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlICsgMl0gPSBtb3JwaGVkTWVzaFtjZW50ZXJEZXN0QmFzZSArIDJdO1xyXG5cclxuICAgICAgICAgICAgLy8gb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2VdID0gY2VudGVyLng7XHJcbiAgICAgICAgICAgIC8vIG91dENlbnRlckFycmF5W2NlbnRlckRlc3RCYXNlICsgMV0gPSBjZW50ZXIueTtcclxuICAgICAgICAgICAgLy8gb3V0Q2VudGVyQXJyYXlbY2VudGVyRGVzdEJhc2UgKyAyXSA9IGNlbnRlci56O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxsU3BsYXRTY2FsZVJvdGF0aW9uQXJyYXkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2NhbGVNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVuc3VyZVBvc2l0aXZlVyA9IChxdWF0ZXJuaW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsaXAgPSBxdWF0ZXJuaW9uLncgPCAwID8gLTEgOiAxO1xyXG4gICAgICAgICAgICBxdWF0ZXJuaW9uLnggKj0gZmxpcDtcclxuICAgICAgICAgICAgcXVhdGVybmlvbi55ICo9IGZsaXA7XHJcbiAgICAgICAgICAgIHF1YXRlcm5pb24ueiAqPSBmbGlwO1xyXG4gICAgICAgICAgICBxdWF0ZXJuaW9uLncgKj0gZmxpcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob3V0U2NhbGVBcnJheSwgb3V0Um90YXRpb25BcnJheSwgdHJhbnNmb3JtLCBzcmNGcm9tLCBzcmNUbywgZGVzdEZyb20sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsLCBzY2FsZU92ZXJyaWRlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICBzcmNGcm9tID0gc3JjRnJvbSB8fCAwO1xyXG4gICAgICAgICAgICBzcmNUbyA9IHNyY1RvIHx8IHNwbGF0Q291bnQgLSAxO1xyXG4gICAgICAgICAgICBpZiAoZGVzdEZyb20gPT09IHVuZGVmaW5lZCkgZGVzdEZyb20gPSBzcmNGcm9tO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0Q29udmVyc2lvbiA9ICh2YWx1ZSwgc3JjQ29tcHJlc3Npb25MZXZlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNyY0NvbXByZXNzaW9uTGV2ZWwgPT09IHVuZGVmaW5lZCkgc3JjQ29tcHJlc3Npb25MZXZlbCA9IHRoaXMuY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252ZXJ0QmV0d2VlbkNvbXByZXNzaW9uTGV2ZWxzKHZhbHVlLCBzcmNDb21wcmVzc2lvbkxldmVsLCBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gc3JjRnJvbTsgaSA8PSBzcmNUbzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5kZXggPSB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb1NlY3Rpb25NYXBbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gaSAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNTcGxhdFNjYWxlc0Jhc2UgPSBzZWN0aW9uLmJ5dGVzUGVyU3BsYXQgKiBsb2NhbFNwbGF0SW5kZXggK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbdGhpcy5jb21wcmVzc2lvbkxldmVsXS5TY2FsZU9mZnNldEJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlRGVzdEJhc2UgPSAoaSAtIHNyY0Zyb20gKyBkZXN0RnJvbSkgKiBTcGxhdEJ1ZmZlci5TY2FsZUNvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm90YXRpb25EZXN0QmFzZSA9IChpIC0gc3JjRnJvbSArIGRlc3RGcm9tKSAqIFNwbGF0QnVmZmVyLlJvdGF0aW9uQ29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uZGF0YUJhc2UgKyBzcmNTcGxhdFNjYWxlc0Jhc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1NjYWxlWCA9IChzY2FsZU92ZXJyaWRlICYmIHNjYWxlT3ZlcnJpZGUueCAhPT0gdW5kZWZpbmVkKSA/IHNjYWxlT3ZlcnJpZGUueCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNTY2FsZVkgPSAoc2NhbGVPdmVycmlkZSAmJiBzY2FsZU92ZXJyaWRlLnkgIT09IHVuZGVmaW5lZCkgPyBzY2FsZU92ZXJyaWRlLnkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAxLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjU2NhbGVaID0gKHNjYWxlT3ZlcnJpZGUgJiYgc2NhbGVPdmVycmlkZS56ICE9PSB1bmRlZmluZWQpID8gc2NhbGVPdmVycmlkZS56IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNSb3RhdGlvblcgPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMywgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNyY1JvdGF0aW9uWCA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA0LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3JjUm90YXRpb25ZID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDUsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNSb3RhdGlvblogPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzY2FsZS5zZXQodG9VbmNvbXByZXNzZWRGbG9hdChzcmNTY2FsZVgsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChzcmNTY2FsZVksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChzcmNTY2FsZVosIHRoaXMuY29tcHJlc3Npb25MZXZlbCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uLnNldCh0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1JvdGF0aW9uWCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1JvdGF0aW9uWSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1JvdGF0aW9uWiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1JvdGF0aW9uVywgdGhpcy5jb21wcmVzc2lvbkxldmVsKSkubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBQb3NpdGlvbi5zZXQoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVNYXRyaXgubWFrZVNjYWxlKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uTWF0cml4Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LmlkZW50aXR5KCkucHJlbXVsdGlwbHkoc2NhbGVNYXRyaXgpLnByZW11bHRpcGx5KHJvdGF0aW9uTWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wTWF0cml4LnByZW11bHRpcGx5KHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcE1hdHJpeC5kZWNvbXBvc2UodGVtcFBvc2l0aW9uLCByb3RhdGlvbiwgc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGVuc3VyZVBvc2l0aXZlVyhyb3RhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG91dFNjYWxlQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRTY2FsZUFycmF5W3NjYWxlRGVzdEJhc2VdID0gb3V0cHV0Q29udmVyc2lvbihzY2FsZS54LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRTY2FsZUFycmF5W3NjYWxlRGVzdEJhc2UgKyAxXSA9IG91dHB1dENvbnZlcnNpb24oc2NhbGUueSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0U2NhbGVBcnJheVtzY2FsZURlc3RCYXNlICsgMl0gPSBvdXRwdXRDb252ZXJzaW9uKHNjYWxlLnosIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvdXRSb3RhdGlvbkFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Um90YXRpb25BcnJheVtyb3RhdGlvbkRlc3RCYXNlXSA9IG91dHB1dENvbnZlcnNpb24ocm90YXRpb24ueCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0Um90YXRpb25BcnJheVtyb3RhdGlvbkRlc3RCYXNlICsgMV0gPSBvdXRwdXRDb252ZXJzaW9uKHJvdGF0aW9uLnksIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dFJvdGF0aW9uQXJyYXlbcm90YXRpb25EZXN0QmFzZSArIDJdID0gb3V0cHV0Q29udmVyc2lvbihyb3RhdGlvbi56LCAwKTtcclxuICAgICAgICAgICAgICAgICAgICBvdXRSb3RhdGlvbkFycmF5W3JvdGF0aW9uRGVzdEJhc2UgKyAzXSA9IG91dHB1dENvbnZlcnNpb24ocm90YXRpb24udywgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSgpO1xyXG5cclxuICAgIHN0YXRpYyBjb21wdXRlQ292YXJpYW5jZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wTWF0cml4NCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVNYXRyaXggPSBuZXcgTWF0cml4MygpO1xyXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeDMoKTtcclxuICAgICAgICBjb25zdCBjb3ZhcmlhbmNlTWF0cml4ID0gbmV3IE1hdHJpeDMoKTtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZENvdmFyaWFuY2UgPSBuZXcgTWF0cml4MygpO1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybTN4MyA9IG5ldyBNYXRyaXgzKCk7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtM3gzVHJhbnNwb3NlID0gbmV3IE1hdHJpeDMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNjYWxlLCByb3RhdGlvbiwgdHJhbnNmb3JtLCBvdXRDb3ZhcmlhbmNlLCBvdXRPZmZzZXQgPSAwLCBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCkge1xyXG5cclxuICAgICAgICAgICAgdGVtcE1hdHJpeDQubWFrZVNjYWxlKHNjYWxlLngsIHNjYWxlLnksIHNjYWxlLnopO1xyXG4gICAgICAgICAgICBzY2FsZU1hdHJpeC5zZXRGcm9tTWF0cml4NCh0ZW1wTWF0cml4NCk7XHJcblxyXG4gICAgICAgICAgICB0ZW1wTWF0cml4NC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbihyb3RhdGlvbik7XHJcbiAgICAgICAgICAgIHJvdGF0aW9uTWF0cml4LnNldEZyb21NYXRyaXg0KHRlbXBNYXRyaXg0KTtcclxuXHJcbiAgICAgICAgICAgIGNvdmFyaWFuY2VNYXRyaXguY29weShyb3RhdGlvbk1hdHJpeCkubXVsdGlwbHkoc2NhbGVNYXRyaXgpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuY29weShjb3ZhcmlhbmNlTWF0cml4KS50cmFuc3Bvc2UoKS5wcmVtdWx0aXBseShjb3ZhcmlhbmNlTWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTN4My5zZXRGcm9tTWF0cml4NCh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtM3gzVHJhbnNwb3NlLmNvcHkodHJhbnNmb3JtM3gzKS50cmFuc3Bvc2UoKTtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybWVkQ292YXJpYW5jZS5tdWx0aXBseSh0cmFuc2Zvcm0zeDNUcmFuc3Bvc2UpO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLnByZW11bHRpcGx5KHRyYW5zZm9ybTN4Myk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldF0gPSB0b0hhbGZGbG9hdCh0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbMF0pO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyAxXSA9IHRvSGFsZkZsb2F0KHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1szXSk7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDJdID0gdG9IYWxmRmxvYXQodHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzZdKTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgM10gPSB0b0hhbGZGbG9hdCh0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbNF0pO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyA0XSA9IHRvSGFsZkZsb2F0KHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s3XSk7XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDVdID0gdG9IYWxmRmxvYXQodHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzhdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0XSA9IHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1swXTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgMV0gPSB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbM107XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDJdID0gdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzZdO1xyXG4gICAgICAgICAgICAgICAgb3V0Q292YXJpYW5jZVtvdXRPZmZzZXQgKyAzXSA9IHRyYW5zZm9ybWVkQ292YXJpYW5jZS5lbGVtZW50c1s0XTtcclxuICAgICAgICAgICAgICAgIG91dENvdmFyaWFuY2Vbb3V0T2Zmc2V0ICsgNF0gPSB0cmFuc2Zvcm1lZENvdmFyaWFuY2UuZWxlbWVudHNbN107XHJcbiAgICAgICAgICAgICAgICBvdXRDb3ZhcmlhbmNlW291dE9mZnNldCArIDVdID0gdHJhbnNmb3JtZWRDb3ZhcmlhbmNlLmVsZW1lbnRzWzhdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIGZpbGxTcGxhdENvdmFyaWFuY2VBcnJheShjb3ZhcmlhbmNlQXJyYXksIHRyYW5zZm9ybSwgc3JjRnJvbSwgc3JjVG8sIGRlc3RGcm9tLCBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCkge1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgIGNvbnN0IHNjYWxlID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcblxyXG4gICAgICAgIHNyY0Zyb20gPSBzcmNGcm9tIHx8IDA7XHJcbiAgICAgICAgc3JjVG8gPSBzcmNUbyB8fCBzcGxhdENvdW50IC0gMTtcclxuICAgICAgICBpZiAoZGVzdEZyb20gPT09IHVuZGVmaW5lZCkgZGVzdEZyb20gPSBzcmNGcm9tO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gc3JjRnJvbTsgaSA8PSBzcmNUbzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtpXTtcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gaSAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VEZXN0QmFzZSA9IChpIC0gc3JjRnJvbSArIGRlc3RGcm9tKSAqIFNwbGF0QnVmZmVyLkNvdmFyaWFuY2VDb21wb25lbnRDb3VudDtcclxuICAgICAgICAgICAgY29uc3Qgc3JjU3BsYXRTY2FsZXNCYXNlID0gc2VjdGlvbi5ieXRlc1BlclNwbGF0ICogbG9jYWxTcGxhdEluZGV4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbdGhpcy5jb21wcmVzc2lvbkxldmVsXS5TY2FsZU9mZnNldEJ5dGVzO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRTY2FsZXNCYXNlKTtcclxuXHJcbiAgICAgICAgICAgIHNjYWxlLnNldCh0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCAwLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCkpO1xyXG5cclxuICAgICAgICAgICAgcm90YXRpb24uc2V0KHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDQsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0KGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKGRhdGFWaWV3LCA1LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdChkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChkYXRhVmlldywgNiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXQoZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoZGF0YVZpZXcsIDMsIHRoaXMuY29tcHJlc3Npb25MZXZlbCksIHRoaXMuY29tcHJlc3Npb25MZXZlbCkpO1xyXG5cclxuICAgICAgICAgICAgU3BsYXRCdWZmZXIuY29tcHV0ZUNvdmFyaWFuY2Uoc2NhbGUsIHJvdGF0aW9uLCB0cmFuc2Zvcm0sIGNvdmFyaWFuY2VBcnJheSwgY292YXJpYW5jZURlc3RCYXNlLCBkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbGxTcGxhdENvbG9yQXJyYXkob3V0Q29sb3JBcnJheSwgbWluaW11bUFscGhhLCBzcmNGcm9tLCBzcmNUbywgZGVzdEZyb20pIHtcclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdENvdW50O1xyXG5cclxuICAgICAgICBzcmNGcm9tID0gc3JjRnJvbSB8fCAwO1xyXG4gICAgICAgIHNyY1RvID0gc3JjVG8gfHwgc3BsYXRDb3VudCAtIDE7XHJcbiAgICAgICAgaWYgKGRlc3RGcm9tID09PSB1bmRlZmluZWQpIGRlc3RGcm9tID0gc3JjRnJvbTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHNyY0Zyb207IGkgPD0gc3JjVG87IGkrKykge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkluZGV4ID0gdGhpcy5nbG9iYWxTcGxhdEluZGV4VG9TZWN0aW9uTWFwW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhbFNwbGF0SW5kZXggPSBpIC0gc2VjdGlvbi5zcGxhdENvdW50T2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY29sb3JEZXN0QmFzZSA9IChpIC0gc3JjRnJvbSArIGRlc3RGcm9tKSAqIFNwbGF0QnVmZmVyLkNvbG9yQ29tcG9uZW50Q291bnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNyY1NwbGF0Q29sb3JzQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW3RoaXMuY29tcHJlc3Npb25MZXZlbF0uQ29sb3JPZmZzZXRCeXRlcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRDb2xvcnNCYXNlKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBhbHBoYSA9IGRhdGFWaWV3WzNdO1xyXG4gICAgICAgICAgICBhbHBoYSA9IChhbHBoYSA+PSBtaW5pbXVtQWxwaGEpID8gYWxwaGEgOiAwO1xyXG5cclxuICAgICAgICAgICAgb3V0Q29sb3JBcnJheVtjb2xvckRlc3RCYXNlXSA9IGRhdGFWaWV3WzBdO1xyXG4gICAgICAgICAgICBvdXRDb2xvckFycmF5W2NvbG9yRGVzdEJhc2UgKyAxXSA9IGRhdGFWaWV3WzFdO1xyXG4gICAgICAgICAgICBvdXRDb2xvckFycmF5W2NvbG9yRGVzdEJhc2UgKyAyXSA9IGRhdGFWaWV3WzJdO1xyXG4gICAgICAgICAgICBvdXRDb2xvckFycmF5W2NvbG9yRGVzdEJhc2UgKyAzXSA9IGFscGhhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaWxsU3BoZXJpY2FsSGFybW9uaWNzQXJyYXkgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNWZWN0b3JzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljVmVjdG9yc1tpXSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0ZW1wTWF0cml4MyA9IG5ldyBNYXRyaXgzKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcE1hdHJpeDQgPSBuZXcgTWF0cml4NCgpO1xyXG5cclxuICAgICAgICBjb25zdCB0ZW1wVHJhbnNsYXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBTY2FsZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2gxMSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoMTIgPSBbXTtcclxuICAgICAgICBjb25zdCBzaDEzID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHNoMjEgPSBbXTtcclxuICAgICAgICBjb25zdCBzaDIyID0gW107XHJcbiAgICAgICAgY29uc3Qgc2gyMyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoMjQgPSBbXTtcclxuICAgICAgICBjb25zdCBzaDI1ID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHNoSW4xID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hJbjIgPSBbXTtcclxuICAgICAgICBjb25zdCBzaEluMyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNoSW40ID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hJbjUgPSBbXTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2hPdXQxID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hPdXQyID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hPdXQzID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hPdXQ0ID0gW107XHJcbiAgICAgICAgY29uc3Qgc2hPdXQ1ID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IG5vb3AgPSAodikgPT4gdjtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0MyA9IChhcnJheSwgdmFsMSwgdmFsMiwgdmFsMykgPT4ge1xyXG4gICAgICAgICAgICBhcnJheVswXSA9IHZhbDE7XHJcbiAgICAgICAgICAgIGFycmF5WzFdID0gdmFsMjtcclxuICAgICAgICAgICAgYXJyYXlbMl0gPSB2YWwzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHNldDNGcm9tQXJyYXkgPSAoYXJyYXksIHNyY0Rlc3RWaWV3LCBzdHJpZGUsIHNyY0Jhc2UsIGNvbXByZXNzaW9uTGV2ZWwpID0+IHtcclxuICAgICAgICAgICAgYXJyYXlbMF0gPSBkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbChzcmNEZXN0Vmlldywgc3JjQmFzZSwgY29tcHJlc3Npb25MZXZlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGFycmF5WzFdID0gZGF0YVZpZXdGbG9hdEZvckNvbXByZXNzaW9uTGV2ZWwoc3JjRGVzdFZpZXcsIHNyY0Jhc2UgKyBzdHJpZGUsIGNvbXByZXNzaW9uTGV2ZWwsIHRydWUpO1xyXG4gICAgICAgICAgICBhcnJheVsyXSA9IGRhdGFWaWV3RmxvYXRGb3JDb21wcmVzc2lvbkxldmVsKHNyY0Rlc3RWaWV3LCBzcmNCYXNlICsgc3RyaWRlICsgc3RyaWRlLCBjb21wcmVzc2lvbkxldmVsLCB0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBjb3B5MyA9IChzcmNBcnJheSwgZGVzdEFycmF5KSA9PiB7XHJcbiAgICAgICAgICAgIGRlc3RBcnJheVswXSA9IHNyY0FycmF5WzBdO1xyXG4gICAgICAgICAgICBkZXN0QXJyYXlbMV0gPSBzcmNBcnJheVsxXTtcclxuICAgICAgICAgICAgZGVzdEFycmF5WzJdID0gc3JjQXJyYXlbMl07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3Qgc2V0T3V0cHV0MyA9IChzcmNBcnJheSwgZGVzdEFycmF5LCBkZXN0QmFzZSwgY29udmVyc2lvbkZ1bmMpID0+IHtcclxuICAgICAgICAgICAgZGVzdEFycmF5W2Rlc3RCYXNlXSA9IGNvbnZlcnNpb25GdW5jKHNyY0FycmF5WzBdKTtcclxuICAgICAgICAgICAgZGVzdEFycmF5W2Rlc3RCYXNlICsgMV0gPSBjb252ZXJzaW9uRnVuYyhzcmNBcnJheVsxXSk7XHJcbiAgICAgICAgICAgIGRlc3RBcnJheVtkZXN0QmFzZSArIDJdID0gY29udmVyc2lvbkZ1bmMoc3JjQXJyYXlbMl0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMgPSAoc3JjLCBkZXN0LCBjb21wcmVzc2lvbkxldmVsLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCkgPT4ge1xyXG4gICAgICAgICAgICBkZXN0WzBdID0gdG9VbmNvbXByZXNzZWRGbG9hdChzcmNbMF0sIGNvbXByZXNzaW9uTGV2ZWwsIHRydWUsIHJhbmdlOEJpdE1pbiwgcmFuZ2U4Qml0TWF4KTtcclxuICAgICAgICAgICAgZGVzdFsxXSA9IHRvVW5jb21wcmVzc2VkRmxvYXQoc3JjWzFdLCBjb21wcmVzc2lvbkxldmVsLCB0cnVlLCByYW5nZThCaXRNaW4sIHJhbmdlOEJpdE1heCk7XHJcbiAgICAgICAgICAgIGRlc3RbMl0gPSB0b1VuY29tcHJlc3NlZEZsb2F0KHNyY1syXSwgY29tcHJlc3Npb25MZXZlbCwgdHJ1ZSwgcmFuZ2U4Qml0TWluLCByYW5nZThCaXRNYXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVzdDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgdHJhbnNmb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNGcm9tLCBzcmNUbywgZGVzdEZyb20sIGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICBzcmNGcm9tID0gc3JjRnJvbSB8fCAwO1xyXG4gICAgICAgICAgICBzcmNUbyA9IHNyY1RvIHx8IHNwbGF0Q291bnQgLSAxO1xyXG4gICAgICAgICAgICBpZiAoZGVzdEZyb20gPT09IHVuZGVmaW5lZCkgZGVzdEZyb20gPSBzcmNGcm9tO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSAmJiBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hdHJpeDQuY29weSh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hdHJpeDQuZGVjb21wb3NlKHRlbXBUcmFuc2xhdGlvbiwgdGVtcFJvdGF0aW9uLCB0ZW1wU2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgdGVtcFJvdGF0aW9uLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGVtcE1hdHJpeDQubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGVtcFJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRlbXBNYXRyaXgzLnNldEZyb21NYXRyaXg0KHRlbXBNYXRyaXg0KTtcclxuICAgICAgICAgICAgICAgIHNldDMoc2gxMSwgdGVtcE1hdHJpeDMuZWxlbWVudHNbNF0sIC10ZW1wTWF0cml4My5lbGVtZW50c1s3XSwgdGVtcE1hdHJpeDMuZWxlbWVudHNbMV0pO1xyXG4gICAgICAgICAgICAgICAgc2V0MyhzaDEyLCAtdGVtcE1hdHJpeDMuZWxlbWVudHNbNV0sIHRlbXBNYXRyaXgzLmVsZW1lbnRzWzhdLCAtdGVtcE1hdHJpeDMuZWxlbWVudHNbMl0pO1xyXG4gICAgICAgICAgICAgICAgc2V0MyhzaDEzLCB0ZW1wTWF0cml4My5lbGVtZW50c1szXSwgLXRlbXBNYXRyaXgzLmVsZW1lbnRzWzZdLCB0ZW1wTWF0cml4My5lbGVtZW50c1swXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsRnJvbUhhbGZGbG9hdFRvVWludDggPSAodikgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZyb21IYWxmRmxvYXRUb1VpbnQ4KHYsIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsIHRoaXMubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbG9jYWxUb1VpbnQ4ID0gKHYpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0b1VpbnQ4KHYsIHRoaXMubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsIHRoaXMubWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHNyY0Zyb207IGkgPD0gc3JjVG87IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25JbmRleCA9IHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtpXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW3NlY3Rpb25JbmRleF07XHJcbiAgICAgICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIHNlY3Rpb24uc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNDb3VudCA9IGdldFNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudENvdW50Rm9yRGVncmVlKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbG9jYWxTcGxhdEluZGV4ID0gaSAtIHNlY3Rpb24uc3BsYXRDb3VudE9mZnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcmNTcGxhdFNIQmFzZSA9IHNlY3Rpb24uYnl0ZXNQZXJTcGxhdCAqIGxvY2FsU3BsYXRJbmRleCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW3RoaXMuY29tcHJlc3Npb25MZXZlbF0uU3BoZXJpY2FsSGFybW9uaWNzT2Zmc2V0Qnl0ZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5idWZmZXJEYXRhLCBzZWN0aW9uLmRhdGFCYXNlICsgc3JjU3BsYXRTSEJhc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNoRGVzdEJhc2UgPSAoaSAtIHNyY0Zyb20gKyBkZXN0RnJvbSkgKiBvdXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzQ291bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbXByZXNzaW9uTGV2ZWxGb3JPdXRwdXRDb252ZXJzaW9uID0gdHJhbnNmb3JtID8gMCA6IHRoaXMuY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICAgICAgICAgIGxldCBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IG5vb3A7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcHJlc3Npb25MZXZlbEZvck91dHB1dENvbnZlcnNpb24gIT09IGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXByZXNzaW9uTGV2ZWxGb3JPdXRwdXRDb252ZXJzaW9uID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCA9PT0gMCkgb3V0cHV0Q29udmVyc2lvbkZ1bmMgPSBmcm9tSGFsZkZsb2F0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXNpcmVkT3V0cHV0Q29tcHJlc3Npb25MZXZlbCA9PSAyKSBvdXRwdXRDb252ZXJzaW9uRnVuYyA9IGxvY2FsRnJvbUhhbGZGbG9hdFRvVWludDg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wcmVzc2lvbkxldmVsRm9yT3V0cHV0Q29udmVyc2lvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzaXJlZE91dHB1dENvbXByZXNzaW9uTGV2ZWwgPT09IDEpIG91dHB1dENvbnZlcnNpb25GdW5jID0gdG9IYWxmRmxvYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRlc2lyZWRPdXRwdXRDb21wcmVzc2lvbkxldmVsID09IDIpIG91dHB1dENvbnZlcnNpb25GdW5jID0gbG9jYWxUb1VpbnQ4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtaW5TaENvZWZmID0gdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1heFNoQ29lZmYgPSB0aGlzLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPj0gMSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW4xLCBkYXRhVmlldywgMywgMCwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW4yLCBkYXRhVmlldywgMywgMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW4zLCBkYXRhVmlldywgMywgMiwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW4xLCBzaEluMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluMiwgc2hJbjIsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjMsIHNoSW4zLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5yb3RhdGVTcGhlcmljYWxIYXJtb25pY3MzKHNoSW4xLCBzaEluMiwgc2hJbjMsIHNoMTEsIHNoMTIsIHNoMTMsIHNoT3V0MSwgc2hPdXQyLCBzaE91dDMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW4xLCBzaE91dDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluMiwgc2hPdXQyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjMsIHNoT3V0Myk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0MSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRPdXRwdXQzKHNoT3V0Miwgb3V0U3BoZXJpY2FsSGFybW9uaWNzQXJyYXksIHNoRGVzdEJhc2UgKyAzLCBvdXRwdXRDb252ZXJzaW9uRnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDMsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgNiwgb3V0cHV0Q29udmVyc2lvbkZ1bmMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjEsIGRhdGFWaWV3LCA1LCA5LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW4yLCBkYXRhVmlldywgNSwgMTAsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDNGcm9tQXJyYXkoc2hJbjMsIGRhdGFWaWV3LCA1LCAxMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0M0Zyb21BcnJheShzaEluNCwgZGF0YVZpZXcsIDUsIDEyLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQzRnJvbUFycmF5KHNoSW41LCBkYXRhVmlldywgNSwgMTMsIHRoaXMuY29tcHJlc3Npb25MZXZlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW4xLCBzaEluMSwgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjIsIHNoSW4yLCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VbmNvbXByZXNzZWRGbG9hdEFycmF5MyhzaEluMywgc2hJbjMsIHRoaXMuY29tcHJlc3Npb25MZXZlbCwgbWluU2hDb2VmZiwgbWF4U2hDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VuY29tcHJlc3NlZEZsb2F0QXJyYXkzKHNoSW40LCBzaEluNCwgdGhpcy5jb21wcmVzc2lvbkxldmVsLCBtaW5TaENvZWZmLCBtYXhTaENvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvVW5jb21wcmVzc2VkRmxvYXRBcnJheTMoc2hJbjUsIHNoSW41LCB0aGlzLmNvbXByZXNzaW9uTGV2ZWwsIG1pblNoQ29lZmYsIG1heFNoQ29lZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIucm90YXRlU3BoZXJpY2FsSGFybW9uaWNzNShzaEluMSwgc2hJbjIsIHNoSW4zLCBzaEluNCwgc2hJbjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoMTEsIHNoMTIsIHNoMTMsIHNoMjEsIHNoMjIsIHNoMjMsIHNoMjQsIHNoMjUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoT3V0MSwgc2hPdXQyLCBzaE91dDMsIHNoT3V0NCwgc2hPdXQ1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW4xLCBzaE91dDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjIsIHNoT3V0Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5MyhzaEluMywgc2hPdXQzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkzKHNoSW40LCBzaE91dDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weTMoc2hJbjUsIHNoT3V0NSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE91dHB1dDMoc2hPdXQxLCBvdXRTcGhlcmljYWxIYXJtb25pY3NBcnJheSwgc2hEZXN0QmFzZSArIDksIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgMTIsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDMsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgMTUsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDQsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgMTgsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0T3V0cHV0MyhzaE91dDUsIG91dFNwaGVyaWNhbEhhcm1vbmljc0FycmF5LCBzaERlc3RCYXNlICsgMjEsIG91dHB1dENvbnZlcnNpb25GdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBzdGF0aWMgZG90MyA9ICh2MSwgdjIsIHYzLCB0cmFuc2Zvcm1Sb3csIG91dEFycmF5KSA9PiB7XHJcbiAgICAgICAgb3V0QXJyYXlbMF0gPSBvdXRBcnJheVsxXSA9IG91dEFycmF5WzJdID0gMDtcclxuICAgICAgICBjb25zdCB0MCA9IHRyYW5zZm9ybVJvd1swXTtcclxuICAgICAgICBjb25zdCB0MSA9IHRyYW5zZm9ybVJvd1sxXTtcclxuICAgICAgICBjb25zdCB0MiA9IHRyYW5zZm9ybVJvd1syXTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2MVswXSAqIHQwLCB2MVsxXSAqIHQwLCB2MVsyXSAqIHQwLCBvdXRBcnJheSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjJbMF0gKiB0MSwgdjJbMV0gKiB0MSwgdjJbMl0gKiB0MSwgb3V0QXJyYXkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHYzWzBdICogdDIsIHYzWzFdICogdDIsIHYzWzJdICogdDIsIG91dEFycmF5KTtcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGFkZEludG8zID0gKHZhbDEsIHZhbDIsIHZhbDMsIGRlc3RBcnJheSkgPT4ge1xyXG4gICAgICAgIGRlc3RBcnJheVswXSA9IGRlc3RBcnJheVswXSArIHZhbDE7XHJcbiAgICAgICAgZGVzdEFycmF5WzFdID0gZGVzdEFycmF5WzFdICsgdmFsMjtcclxuICAgICAgICBkZXN0QXJyYXlbMl0gPSBkZXN0QXJyYXlbMl0gKyB2YWwzO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZG90NSA9ICh2MSwgdjIsIHYzLCB2NCwgdjUsIHRyYW5zZm9ybVJvdywgb3V0QXJyYXkpID0+IHtcclxuICAgICAgICBvdXRBcnJheVswXSA9IG91dEFycmF5WzFdID0gb3V0QXJyYXlbMl0gPSAwO1xyXG4gICAgICAgIGNvbnN0IHQwID0gdHJhbnNmb3JtUm93WzBdO1xyXG4gICAgICAgIGNvbnN0IHQxID0gdHJhbnNmb3JtUm93WzFdO1xyXG4gICAgICAgIGNvbnN0IHQyID0gdHJhbnNmb3JtUm93WzJdO1xyXG4gICAgICAgIGNvbnN0IHQzID0gdHJhbnNmb3JtUm93WzNdO1xyXG4gICAgICAgIGNvbnN0IHQ0ID0gdHJhbnNmb3JtUm93WzRdO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHYxWzBdICogdDAsIHYxWzFdICogdDAsIHYxWzJdICogdDAsIG91dEFycmF5KTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2MlswXSAqIHQxLCB2MlsxXSAqIHQxLCB2MlsyXSAqIHQxLCBvdXRBcnJheSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuYWRkSW50bzModjNbMF0gKiB0MiwgdjNbMV0gKiB0MiwgdjNbMl0gKiB0Miwgb3V0QXJyYXkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmFkZEludG8zKHY0WzBdICogdDMsIHY0WzFdICogdDMsIHY0WzJdICogdDMsIG91dEFycmF5KTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5hZGRJbnRvMyh2NVswXSAqIHQ0LCB2NVsxXSAqIHQ0LCB2NVsyXSAqIHQ0LCBvdXRBcnJheSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyByb3RhdGVTcGhlcmljYWxIYXJtb25pY3MzID0gKGluMSwgaW4yLCBpbjMsIHRzaDExLCB0c2gxMiwgdHNoMTMsIG91dDEsIG91dDIsIG91dDMpID0+IHtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3QzKGluMSwgaW4yLCBpbjMsIHRzaDExLCBvdXQxKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3QzKGluMSwgaW4yLCBpbjMsIHRzaDEyLCBvdXQyKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3QzKGluMSwgaW4yLCBpbjMsIHRzaDEzLCBvdXQzKTtcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIHJvdGF0ZVNwaGVyaWNhbEhhcm1vbmljczUgPSAoaW4xLCBpbjIsIGluMywgaW40LCBpbjUsIHRzaDExLCB0c2gxMiwgdHNoMTMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c2gyMSwgdHNoMjIsIHRzaDIzLCB0c2gyNCwgdHNoMjUsIG91dDEsIG91dDIsIG91dDMsIG91dDQsIG91dDUpID0+IHtcclxuXHJcbiAgICAgICAgY29uc3Qga1NxcnQwMTA0ID0gTWF0aC5zcXJ0KDEuMCAvIDQuMCk7XHJcbiAgICAgICAgY29uc3Qga1NxcnQwMzA0ID0gTWF0aC5zcXJ0KDMuMCAvIDQuMCk7XHJcbiAgICAgICAgY29uc3Qga1NxcnQwMTAzID0gTWF0aC5zcXJ0KDEuMCAvIDMuMCk7XHJcbiAgICAgICAgY29uc3Qga1NxcnQwNDAzID0gTWF0aC5zcXJ0KDQuMCAvIDMuMCk7XHJcbiAgICAgICAgY29uc3Qga1NxcnQwMTEyID0gTWF0aC5zcXJ0KDEuMCAvIDEyLjApO1xyXG5cclxuICAgICAgICB0c2gyMVswXSA9IGtTcXJ0MDEwNCAqICgodHNoMTNbMl0gKiB0c2gxMVswXSArIHRzaDEzWzBdICogdHNoMTFbMl0pICsgKHRzaDExWzJdICogdHNoMTNbMF0gKyB0c2gxMVswXSAqIHRzaDEzWzJdKSk7XHJcbiAgICAgICAgdHNoMjFbMV0gPSAodHNoMTNbMV0gKiB0c2gxMVswXSArIHRzaDExWzFdICogdHNoMTNbMF0pO1xyXG4gICAgICAgIHRzaDIxWzJdID0ga1NxcnQwMzA0ICogKHRzaDEzWzFdICogdHNoMTFbMV0gKyB0c2gxMVsxXSAqIHRzaDEzWzFdKTtcclxuICAgICAgICB0c2gyMVszXSA9ICh0c2gxM1sxXSAqIHRzaDExWzJdICsgdHNoMTFbMV0gKiB0c2gxM1syXSk7XHJcbiAgICAgICAgdHNoMjFbNF0gPSBrU3FydDAxMDQgKiAoKHRzaDEzWzJdICogdHNoMTFbMl0gLSB0c2gxM1swXSAqIHRzaDExWzBdKSArICh0c2gxMVsyXSAqIHRzaDEzWzJdIC0gdHNoMTFbMF0gKiB0c2gxM1swXSkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDUoaW4xLCBpbjIsIGluMywgaW40LCBpbjUsIHRzaDIxLCBvdXQxKTtcclxuXHJcbiAgICAgICAgdHNoMjJbMF0gPSBrU3FydDAxMDQgKiAoKHRzaDEyWzJdICogdHNoMTFbMF0gKyB0c2gxMlswXSAqIHRzaDExWzJdKSArICh0c2gxMVsyXSAqIHRzaDEyWzBdICsgdHNoMTFbMF0gKiB0c2gxMlsyXSkpO1xyXG4gICAgICAgIHRzaDIyWzFdID0gdHNoMTJbMV0gKiB0c2gxMVswXSArIHRzaDExWzFdICogdHNoMTJbMF07XHJcbiAgICAgICAgdHNoMjJbMl0gPSBrU3FydDAzMDQgKiAodHNoMTJbMV0gKiB0c2gxMVsxXSArIHRzaDExWzFdICogdHNoMTJbMV0pO1xyXG4gICAgICAgIHRzaDIyWzNdID0gdHNoMTJbMV0gKiB0c2gxMVsyXSArIHRzaDExWzFdICogdHNoMTJbMl07XHJcbiAgICAgICAgdHNoMjJbNF0gPSBrU3FydDAxMDQgKiAoKHRzaDEyWzJdICogdHNoMTFbMl0gLSB0c2gxMlswXSAqIHRzaDExWzBdKSArICh0c2gxMVsyXSAqIHRzaDEyWzJdIC0gdHNoMTFbMF0gKiB0c2gxMlswXSkpO1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLmRvdDUoaW4xLCBpbjIsIGluMywgaW40LCBpbjUsIHRzaDIyLCBvdXQyKTtcclxuXHJcbiAgICAgICAgdHNoMjNbMF0gPSBrU3FydDAxMDMgKiAodHNoMTJbMl0gKiB0c2gxMlswXSArIHRzaDEyWzBdICogdHNoMTJbMl0pICsgLWtTcXJ0MDExMiAqXHJcbiAgICAgICAgICAgICAgICAgICAoKHRzaDEzWzJdICogdHNoMTNbMF0gKyB0c2gxM1swXSAqIHRzaDEzWzJdKSArICh0c2gxMVsyXSAqIHRzaDExWzBdICsgdHNoMTFbMF0gKiB0c2gxMVsyXSkpO1xyXG4gICAgICAgIHRzaDIzWzFdID0ga1NxcnQwNDAzICogdHNoMTJbMV0gKiB0c2gxMlswXSArIC1rU3FydDAxMDMgKiAodHNoMTNbMV0gKiB0c2gxM1swXSArIHRzaDExWzFdICogdHNoMTFbMF0pO1xyXG4gICAgICAgIHRzaDIzWzJdID0gdHNoMTJbMV0gKiB0c2gxMlsxXSArIC1rU3FydDAxMDQgKiAodHNoMTNbMV0gKiB0c2gxM1sxXSArIHRzaDExWzFdICogdHNoMTFbMV0pO1xyXG4gICAgICAgIHRzaDIzWzNdID0ga1NxcnQwNDAzICogdHNoMTJbMV0gKiB0c2gxMlsyXSArIC1rU3FydDAxMDMgKiAodHNoMTNbMV0gKiB0c2gxM1syXSArIHRzaDExWzFdICogdHNoMTFbMl0pO1xyXG4gICAgICAgIHRzaDIzWzRdID0ga1NxcnQwMTAzICogKHRzaDEyWzJdICogdHNoMTJbMl0gLSB0c2gxMlswXSAqIHRzaDEyWzBdKSArIC1rU3FydDAxMTIgKlxyXG4gICAgICAgICAgICAgICAgICAgKCh0c2gxM1syXSAqIHRzaDEzWzJdIC0gdHNoMTNbMF0gKiB0c2gxM1swXSkgKyAodHNoMTFbMl0gKiB0c2gxMVsyXSAtIHRzaDExWzBdICogdHNoMTFbMF0pKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3Q1KGluMSwgaW4yLCBpbjMsIGluNCwgaW41LCB0c2gyMywgb3V0Myk7XHJcblxyXG4gICAgICAgIHRzaDI0WzBdID0ga1NxcnQwMTA0ICogKCh0c2gxMlsyXSAqIHRzaDEzWzBdICsgdHNoMTJbMF0gKiB0c2gxM1syXSkgKyAodHNoMTNbMl0gKiB0c2gxMlswXSArIHRzaDEzWzBdICogdHNoMTJbMl0pKTtcclxuICAgICAgICB0c2gyNFsxXSA9IHRzaDEyWzFdICogdHNoMTNbMF0gKyB0c2gxM1sxXSAqIHRzaDEyWzBdO1xyXG4gICAgICAgIHRzaDI0WzJdID0ga1NxcnQwMzA0ICogKHRzaDEyWzFdICogdHNoMTNbMV0gKyB0c2gxM1sxXSAqIHRzaDEyWzFdKTtcclxuICAgICAgICB0c2gyNFszXSA9IHRzaDEyWzFdICogdHNoMTNbMl0gKyB0c2gxM1sxXSAqIHRzaDEyWzJdO1xyXG4gICAgICAgIHRzaDI0WzRdID0ga1NxcnQwMTA0ICogKCh0c2gxMlsyXSAqIHRzaDEzWzJdIC0gdHNoMTJbMF0gKiB0c2gxM1swXSkgKyAodHNoMTNbMl0gKiB0c2gxMlsyXSAtIHRzaDEzWzBdICogdHNoMTJbMF0pKTtcclxuICAgICAgICBTcGxhdEJ1ZmZlci5kb3Q1KGluMSwgaW4yLCBpbjMsIGluNCwgaW41LCB0c2gyNCwgb3V0NCk7XHJcblxyXG4gICAgICAgIHRzaDI1WzBdID0ga1NxcnQwMTA0ICogKCh0c2gxM1syXSAqIHRzaDEzWzBdICsgdHNoMTNbMF0gKiB0c2gxM1syXSkgLSAodHNoMTFbMl0gKiB0c2gxMVswXSArIHRzaDExWzBdICogdHNoMTFbMl0pKTtcclxuICAgICAgICB0c2gyNVsxXSA9ICh0c2gxM1sxXSAqIHRzaDEzWzBdIC0gdHNoMTFbMV0gKiB0c2gxMVswXSk7XHJcbiAgICAgICAgdHNoMjVbMl0gPSBrU3FydDAzMDQgKiAodHNoMTNbMV0gKiB0c2gxM1sxXSAtIHRzaDExWzFdICogdHNoMTFbMV0pO1xyXG4gICAgICAgIHRzaDI1WzNdID0gKHRzaDEzWzFdICogdHNoMTNbMl0gLSB0c2gxMVsxXSAqIHRzaDExWzJdKTtcclxuICAgICAgICB0c2gyNVs0XSA9IGtTcXJ0MDEwNCAqICgodHNoMTNbMl0gKiB0c2gxM1syXSAtIHRzaDEzWzBdICogdHNoMTNbMF0pIC0gKHRzaDExWzJdICogdHNoMTFbMl0gLSB0c2gxMVswXSAqIHRzaDExWzBdKSk7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIuZG90NShpbjEsIGluMiwgaW4zLCBpbjQsIGluNSwgdHNoMjUsIG91dDUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgcGFyc2VIZWFkZXIoYnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50OCA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQxNiA9IG5ldyBVaW50MTZBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDIpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlGbG9hdDMyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb25NYWpvciA9IGhlYWRlckFycmF5VWludDhbMF07XHJcbiAgICAgICAgY29uc3QgdmVyc2lvbk1pbm9yID0gaGVhZGVyQXJyYXlVaW50OFsxXTtcclxuICAgICAgICBjb25zdCBtYXhTZWN0aW9uQ291bnQgPSBoZWFkZXJBcnJheVVpbnQzMlsxXTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uQ291bnQgPSBoZWFkZXJBcnJheVVpbnQzMlsyXTtcclxuICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gaGVhZGVyQXJyYXlVaW50MzJbM107XHJcbiAgICAgICAgY29uc3Qgc3BsYXRDb3VudCA9IGhlYWRlckFycmF5VWludDMyWzRdO1xyXG4gICAgICAgIGNvbnN0IGNvbXByZXNzaW9uTGV2ZWwgPSBoZWFkZXJBcnJheVVpbnQxNlsxMF07XHJcbiAgICAgICAgY29uc3Qgc2NlbmVDZW50ZXIgPSBuZXcgVmVjdG9yMyhoZWFkZXJBcnJheUZsb2F0MzJbNl0sIGhlYWRlckFycmF5RmxvYXQzMls3XSwgaGVhZGVyQXJyYXlGbG9hdDMyWzhdKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBoZWFkZXJBcnJheUZsb2F0MzJbOV0gfHwgLURlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2U7XHJcbiAgICAgICAgY29uc3QgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBoZWFkZXJBcnJheUZsb2F0MzJbMTBdIHx8IERlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2U7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHZlcnNpb25NYWpvcixcclxuICAgICAgICAgICAgdmVyc2lvbk1pbm9yLFxyXG4gICAgICAgICAgICBtYXhTZWN0aW9uQ291bnQsXHJcbiAgICAgICAgICAgIHNlY3Rpb25Db3VudCxcclxuICAgICAgICAgICAgbWF4U3BsYXRDb3VudCxcclxuICAgICAgICAgICAgc3BsYXRDb3VudCxcclxuICAgICAgICAgICAgY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgc2NlbmVDZW50ZXIsXHJcbiAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLFxyXG4gICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZlxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHdyaXRlSGVhZGVyQ291bnRzVG9CdWZmZXIoc2VjdGlvbkNvdW50LCBzcGxhdENvdW50LCBidWZmZXIpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDMyWzJdID0gc2VjdGlvbkNvdW50O1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDMyWzRdID0gc3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgd3JpdGVIZWFkZXJUb0J1ZmZlcihoZWFkZXIsIGJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5VWludDggPSBuZXcgVWludDhBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyQXJyYXlVaW50MTYgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyAyKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJBcnJheVVpbnQzMiA9IG5ldyBVaW50MzJBcnJheShidWZmZXIsIDAsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlckFycmF5RmxvYXQzMiA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCAwLCBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQ4WzBdID0gaGVhZGVyLnZlcnNpb25NYWpvcjtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQ4WzFdID0gaGVhZGVyLnZlcnNpb25NaW5vcjtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQ4WzJdID0gMDsgLy8gdW51c2VkIGZvciBub3dcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQ4WzNdID0gMDsgLy8gdW51c2VkIGZvciBub3dcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQzMlsxXSA9IGhlYWRlci5tYXhTZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MzJbMl0gPSBoZWFkZXIuc2VjdGlvbkNvdW50O1xyXG4gICAgICAgIGhlYWRlckFycmF5VWludDMyWzNdID0gaGVhZGVyLm1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlVaW50MzJbNF0gPSBoZWFkZXIuc3BsYXRDb3VudDtcclxuICAgICAgICBoZWFkZXJBcnJheVVpbnQxNlsxMF0gPSBoZWFkZXIuY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICBoZWFkZXJBcnJheUZsb2F0MzJbNl0gPSBoZWFkZXIuc2NlbmVDZW50ZXIueDtcclxuICAgICAgICBoZWFkZXJBcnJheUZsb2F0MzJbN10gPSBoZWFkZXIuc2NlbmVDZW50ZXIueTtcclxuICAgICAgICBoZWFkZXJBcnJheUZsb2F0MzJbOF0gPSBoZWFkZXIuc2NlbmVDZW50ZXIuejtcclxuICAgICAgICBoZWFkZXJBcnJheUZsb2F0MzJbOV0gPSBoZWFkZXIubWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgfHwgLURlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2U7XHJcbiAgICAgICAgaGVhZGVyQXJyYXlGbG9hdDMyWzEwXSA9IGhlYWRlci5tYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZiB8fCBEZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZVNlY3Rpb25IZWFkZXJzKGhlYWRlciwgYnVmZmVyLCBvZmZzZXQgPSAwLCBzZWNMb2FkZWRDb3VudHNUb01heCkge1xyXG4gICAgICAgIGNvbnN0IGNvbXByZXNzaW9uTGV2ZWwgPSBoZWFkZXIuY29tcHJlc3Npb25MZXZlbDtcclxuXHJcbiAgICAgICAgY29uc3QgbWF4U2VjdGlvbkNvdW50ID0gaGVhZGVyLm1heFNlY3Rpb25Db3VudDtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MTYgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCBvZmZzZXQsIG1heFNlY3Rpb25Db3VudCAqIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyAyKTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCBvZmZzZXQsIG1heFNlY3Rpb25Db3VudCAqIFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXMgLyA0KTtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyQXJyYXlGbG9hdDMyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIG9mZnNldCwgbWF4U2VjdGlvbkNvdW50ICogU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG5cclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVycyA9IFtdO1xyXG4gICAgICAgIGxldCBzZWN0aW9uSGVhZGVyQmFzZSA9IDA7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25IZWFkZXJCYXNlVWludDE2ID0gc2VjdGlvbkhlYWRlckJhc2UgLyAyO1xyXG4gICAgICAgIGxldCBzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiA9IHNlY3Rpb25IZWFkZXJCYXNlIC8gNDtcclxuICAgICAgICBsZXQgc2VjdGlvbkJhc2UgPSBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgKyBoZWFkZXIubWF4U2VjdGlvbkNvdW50ICogU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcztcclxuICAgICAgICBsZXQgc3BsYXRDb3VudE9mZnNldCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhTZWN0aW9uQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBtYXhTcGxhdENvdW50ID0gc2VjdGlvbkhlYWRlckFycmF5VWludDMyW3NlY3Rpb25IZWFkZXJCYXNlVWludDMyICsgMV07XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldFNpemUgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyAyXTtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0Q291bnQgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyAzXTtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0QmxvY2tTaXplID0gc2VjdGlvbkhlYWRlckFycmF5RmxvYXQzMltzZWN0aW9uSGVhZGVyQmFzZVVpbnQzMiArIDRdO1xyXG4gICAgICAgICAgICBjb25zdCBoYWxmQnVja2V0QmxvY2tTaXplID0gYnVja2V0QmxvY2tTaXplIC8gMi4wO1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRTdG9yYWdlU2l6ZUJ5dGVzID0gc2VjdGlvbkhlYWRlckFycmF5VWludDE2W3NlY3Rpb25IZWFkZXJCYXNlVWludDE2ICsgMTBdO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wcmVzc2lvblNjYWxlUmFuZ2UgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyA2XSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5TY2FsZVJhbmdlO1xyXG4gICAgICAgICAgICBjb25zdCBmdWxsQnVja2V0Q291bnQgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyA4XTtcclxuICAgICAgICAgICAgY29uc3QgcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQgPSBzZWN0aW9uSGVhZGVyQXJyYXlVaW50MzJbc2VjdGlvbkhlYWRlckJhc2VVaW50MzIgKyA5XTtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0c01ldGFEYXRhU2l6ZUJ5dGVzID0gcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQgKiA0O1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRzU3RvcmFnZVNpemVCeXRlcyA9IGJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXMgKiBidWNrZXRDb3VudCArIGJ1Y2tldHNNZXRhRGF0YVNpemVCeXRlcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IHNlY3Rpb25IZWFkZXJBcnJheVVpbnQxNltzZWN0aW9uSGVhZGVyQmFzZVVpbnQxNiArIDIwXTtcclxuICAgICAgICAgICAgY29uc3QgeyBieXRlc1BlclNwbGF0IH0gPSBTcGxhdEJ1ZmZlci5jYWxjdWxhdGVDb21wb25lbnRTdG9yYWdlKGNvbXByZXNzaW9uTGV2ZWwsIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcGxhdERhdGFTdG9yYWdlU2l6ZUJ5dGVzID0gYnl0ZXNQZXJTcGxhdCAqIG1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2VTaXplQnl0ZXMgPSBzcGxhdERhdGFTdG9yYWdlU2l6ZUJ5dGVzICsgYnVja2V0c1N0b3JhZ2VTaXplQnl0ZXM7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBieXRlc1BlclNwbGF0OiBieXRlc1BlclNwbGF0LFxyXG4gICAgICAgICAgICAgICAgc3BsYXRDb3VudE9mZnNldDogc3BsYXRDb3VudE9mZnNldCxcclxuICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IHNlY0xvYWRlZENvdW50c1RvTWF4ID8gbWF4U3BsYXRDb3VudCA6IDAsXHJcbiAgICAgICAgICAgICAgICBtYXhTcGxhdENvdW50OiBtYXhTcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgYnVja2V0U2l6ZTogYnVja2V0U2l6ZSxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldENvdW50OiBidWNrZXRDb3VudCxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldEJsb2NrU2l6ZTogYnVja2V0QmxvY2tTaXplLFxyXG4gICAgICAgICAgICAgICAgaGFsZkJ1Y2tldEJsb2NrU2l6ZTogaGFsZkJ1Y2tldEJsb2NrU2l6ZSxcclxuICAgICAgICAgICAgICAgIGJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXM6IGJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRzU3RvcmFnZVNpemVCeXRlczogYnVja2V0c1N0b3JhZ2VTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBzcGxhdERhdGFTdG9yYWdlU2l6ZUJ5dGVzOiBzcGxhdERhdGFTdG9yYWdlU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVNpemVCeXRlczogc3RvcmFnZVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uU2NhbGVSYW5nZTogY29tcHJlc3Npb25TY2FsZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgY29tcHJlc3Npb25TY2FsZUZhY3RvcjogaGFsZkJ1Y2tldEJsb2NrU2l6ZSAvIGNvbXByZXNzaW9uU2NhbGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIGJhc2U6IHNlY3Rpb25CYXNlLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0c0Jhc2U6IHNlY3Rpb25CYXNlICsgYnVja2V0c01ldGFEYXRhU2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICAgICAgZGF0YUJhc2U6IHNlY3Rpb25CYXNlICsgYnVja2V0c1N0b3JhZ2VTaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBmdWxsQnVja2V0Q291bnQ6IGZ1bGxCdWNrZXRDb3VudCxcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50OiBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCxcclxuICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTogc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNlY3Rpb25IZWFkZXJzW2ldID0gc2VjdGlvbkhlYWRlcjtcclxuICAgICAgICAgICAgc2VjdGlvbkJhc2UgKz0gc3RvcmFnZVNpemVCeXRlcztcclxuICAgICAgICAgICAgc2VjdGlvbkhlYWRlckJhc2UgKz0gU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcztcclxuICAgICAgICAgICAgc2VjdGlvbkhlYWRlckJhc2VVaW50MTYgPSBzZWN0aW9uSGVhZGVyQmFzZSAvIDI7XHJcbiAgICAgICAgICAgIHNlY3Rpb25IZWFkZXJCYXNlVWludDMyID0gc2VjdGlvbkhlYWRlckJhc2UgLyA0O1xyXG4gICAgICAgICAgICBzcGxhdENvdW50T2Zmc2V0ICs9IG1heFNwbGF0Q291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2VjdGlvbkhlYWRlcnM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHN0YXRpYyB3cml0ZVNlY3Rpb25IZWFkZXJUb0J1ZmZlcihzZWN0aW9uSGVhZGVyLCBjb21wcmVzc2lvbkxldmVsLCBidWZmZXIsIG9mZnNldCA9IDApIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVBcnJheVVpbnQxNiA9IG5ldyBVaW50MTZBcnJheShidWZmZXIsIG9mZnNldCwgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDIpO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZUFycmF5VWludDMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbkhlYWRlQXJyYXlGbG9hdDMyID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIG9mZnNldCwgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyAvIDQpO1xyXG5cclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMlswXSA9IHNlY3Rpb25IZWFkZXIuc3BsYXRDb3VudDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMlsxXSA9IHNlY3Rpb25IZWFkZXIubWF4U3BsYXRDb3VudDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMlsyXSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IHNlY3Rpb25IZWFkZXIuYnVja2V0U2l6ZSA6IDA7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbM10gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBzZWN0aW9uSGVhZGVyLmJ1Y2tldENvdW50IDogMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheUZsb2F0MzJbNF0gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBzZWN0aW9uSGVhZGVyLmJ1Y2tldEJsb2NrU2l6ZSA6IDAuMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQxNlsxMF0gPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBTcGxhdEJ1ZmZlci5CdWNrZXRTdG9yYWdlU2l6ZUJ5dGVzIDogMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMls2XSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IHNlY3Rpb25IZWFkZXIuY29tcHJlc3Npb25TY2FsZVJhbmdlIDogMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMls3XSA9IHNlY3Rpb25IZWFkZXIuc3RvcmFnZVNpemVCeXRlcztcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMls4XSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IHNlY3Rpb25IZWFkZXIuZnVsbEJ1Y2tldENvdW50IDogMDtcclxuICAgICAgICBzZWN0aW9uSGVhZGVBcnJheVVpbnQzMls5XSA9IGNvbXByZXNzaW9uTGV2ZWwgPj0gMSA/IHNlY3Rpb25IZWFkZXIucGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQgOiAwO1xyXG4gICAgICAgIHNlY3Rpb25IZWFkZUFycmF5VWludDE2WzIwXSA9IHNlY3Rpb25IZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgd3JpdGVTZWN0aW9uSGVhZGVyU3BsYXRDb3VudFRvQnVmZmVyKHNwbGF0Q291bnQsIGJ1ZmZlciwgb2Zmc2V0ID0gMCkge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZUFycmF5VWludDMyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgb2Zmc2V0LCBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzIC8gNCk7XHJcbiAgICAgICAgc2VjdGlvbkhlYWRlQXJyYXlVaW50MzJbMF0gPSBzcGxhdENvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdEZyb21CdWZmZXIoYnVmZmVyRGF0YSwgc2VjTG9hZGVkQ291bnRzVG9NYXgpIHtcclxuICAgICAgICB0aGlzLmJ1ZmZlckRhdGEgPSBidWZmZXJEYXRhO1xyXG5cclxuICAgICAgICB0aGlzLmdsb2JhbFNwbGF0SW5kZXhUb0xvY2FsU3BsYXRJbmRleE1hcCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcCA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXIgPSBTcGxhdEJ1ZmZlci5wYXJzZUhlYWRlcih0aGlzLmJ1ZmZlckRhdGEpO1xyXG4gICAgICAgIHRoaXMudmVyc2lvbk1ham9yID0gaGVhZGVyLnZlcnNpb25NYWpvcjtcclxuICAgICAgICB0aGlzLnZlcnNpb25NaW5vciA9IGhlYWRlci52ZXJzaW9uTWlub3I7XHJcbiAgICAgICAgdGhpcy5tYXhTZWN0aW9uQ291bnQgPSBoZWFkZXIubWF4U2VjdGlvbkNvdW50O1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbkNvdW50ID0gc2VjTG9hZGVkQ291bnRzVG9NYXggPyBoZWFkZXIubWF4U2VjdGlvbkNvdW50IDogMDtcclxuICAgICAgICB0aGlzLm1heFNwbGF0Q291bnQgPSBoZWFkZXIubWF4U3BsYXRDb3VudDtcclxuICAgICAgICB0aGlzLnNwbGF0Q291bnQgPSBzZWNMb2FkZWRDb3VudHNUb01heCA/IGhlYWRlci5tYXhTcGxhdENvdW50IDogMDtcclxuICAgICAgICB0aGlzLmNvbXByZXNzaW9uTGV2ZWwgPSBoZWFkZXIuY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICB0aGlzLnNjZW5lQ2VudGVyID0gbmV3IFZlY3RvcjMoKS5jb3B5KGhlYWRlci5zY2VuZUNlbnRlcik7XHJcbiAgICAgICAgdGhpcy5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IGhlYWRlci5taW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuICAgICAgICB0aGlzLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gaGVhZGVyLm1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG5cclxuICAgICAgICB0aGlzLnNlY3Rpb25zID0gU3BsYXRCdWZmZXIucGFyc2VTZWN0aW9uSGVhZGVycyhoZWFkZXIsIHRoaXMuYnVmZmVyRGF0YSwgU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzLCBzZWNMb2FkZWRDb3VudHNUb01heCk7XHJcblxyXG4gICAgICAgIHRoaXMubGlua0J1ZmZlckFycmF5cygpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRNYXBzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNhbGN1bGF0ZUNvbXBvbmVudFN0b3JhZ2UoY29tcHJlc3Npb25MZXZlbCwgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKSB7XHJcbiAgICAgICAgY29uc3QgYnl0ZXNQZXJDZW50ZXIgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlckNlbnRlcjtcclxuICAgICAgICBjb25zdCBieXRlc1BlclNjYWxlID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJTY2FsZTtcclxuICAgICAgICBjb25zdCBieXRlc1BlclJvdGF0aW9uID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJSb3RhdGlvbjtcclxuICAgICAgICBjb25zdCBieXRlc1BlckNvbG9yID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJDb2xvcjtcclxuICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzUGVyU3BsYXQgPSBnZXRTcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRDb3VudEZvckRlZ3JlZShzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgIGNvbnN0IHNwaGVyaWNhbEhhcm1vbmljc0J5dGVzUGVyU3BsYXQgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlclNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudCAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNQZXJTcGxhdDtcclxuICAgICAgICBjb25zdCBieXRlc1BlclNwbGF0ID0gYnl0ZXNQZXJDZW50ZXIgKyBieXRlc1BlclNjYWxlICsgYnl0ZXNQZXJSb3RhdGlvbiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzUGVyQ29sb3IgKyBzcGhlcmljYWxIYXJtb25pY3NCeXRlc1BlclNwbGF0O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGJ5dGVzUGVyQ2VudGVyLFxyXG4gICAgICAgICAgICBieXRlc1BlclNjYWxlLFxyXG4gICAgICAgICAgICBieXRlc1BlclJvdGF0aW9uLFxyXG4gICAgICAgICAgICBieXRlc1BlckNvbG9yLFxyXG4gICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NDb21wb25lbnRzUGVyU3BsYXQsXHJcbiAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0J5dGVzUGVyU3BsYXQsXHJcbiAgICAgICAgICAgIGJ5dGVzUGVyU3BsYXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGxpbmtCdWZmZXJBcnJheXMoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFNlY3Rpb25Db3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb24gPSB0aGlzLnNlY3Rpb25zW2ldO1xyXG4gICAgICAgICAgICBzZWN0aW9uLmJ1Y2tldEFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb24uYnVja2V0c0Jhc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYnVja2V0Q291bnQgKiBTcGxhdEJ1ZmZlci5CdWNrZXRTdG9yYWdlU2l6ZUZsb2F0cyk7XHJcbiAgICAgICAgICAgIGlmIChzZWN0aW9uLnBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc2VjdGlvbi5wYXJ0aWFsbHlGaWxsZWRCdWNrZXRMZW5ndGhzID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuYnVmZmVyRGF0YSwgc2VjdGlvbi5iYXNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24ucGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJ1aWxkTWFwcygpIHtcclxuICAgICAgICBsZXQgY3VtdWxhdGl2ZVNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXhTZWN0aW9uQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gdGhpcy5zZWN0aW9uc1tpXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzZWN0aW9uLm1heFNwbGF0Q291bnQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsU3BsYXRJbmRleCA9IGN1bXVsYXRpdmVTcGxhdENvdW50ICsgajtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvTG9jYWxTcGxhdEluZGV4TWFwW2dsb2JhbFNwbGF0SW5kZXhdID0gajtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsU3BsYXRJbmRleFRvU2VjdGlvbk1hcFtnbG9iYWxTcGxhdEluZGV4XSA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VtdWxhdGl2ZVNwbGF0Q291bnQgKz0gc2VjdGlvbi5tYXhTcGxhdENvdW50O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVMb2FkZWRDb3VudHMobmV3U2VjdGlvbkNvdW50LCBuZXdTcGxhdENvdW50KSB7XHJcbiAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVIZWFkZXJDb3VudHNUb0J1ZmZlcihuZXdTZWN0aW9uQ291bnQsIG5ld1NwbGF0Q291bnQsIHRoaXMuYnVmZmVyRGF0YSk7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uQ291bnQgPSBuZXdTZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgdGhpcy5zcGxhdENvdW50ID0gbmV3U3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTZWN0aW9uTG9hZGVkQ291bnRzKHNlY3Rpb25JbmRleCwgbmV3U3BsYXRDb3VudCkge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJPZmZzZXQgPSBTcGxhdEJ1ZmZlci5IZWFkZXJTaXplQnl0ZXMgKyBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzICogc2VjdGlvbkluZGV4O1xyXG4gICAgICAgIFNwbGF0QnVmZmVyLndyaXRlU2VjdGlvbkhlYWRlclNwbGF0Q291bnRUb0J1ZmZlcihuZXdTcGxhdENvdW50LCB0aGlzLmJ1ZmZlckRhdGEsIHNlY3Rpb25IZWFkZXJPZmZzZXQpO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbnNbc2VjdGlvbkluZGV4XS5zcGxhdENvdW50ID0gbmV3U3BsYXRDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgd3JpdGVTcGxhdERhdGFUb1NlY3Rpb25CdWZmZXIgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcENlbnRlckJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcigxMik7XHJcbiAgICAgICAgY29uc3QgdGVtcFNjYWxlQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDEyKTtcclxuICAgICAgICBjb25zdCB0ZW1wUm90YXRpb25CdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMTYpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBDb2xvckJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcig0KTtcclxuICAgICAgICBjb25zdCB0ZW1wU0hCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMjU2KTtcclxuICAgICAgICBjb25zdCB0ZW1wUm90ID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgICBjb25zdCB0ZW1wU2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIGNvbnN0IGJ1Y2tldENlbnRlckRlbHRhID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgICBYOiBPRkZTRVRfWCwgWTogT0ZGU0VUX1ksIFo6IE9GRlNFVF9aLFxyXG4gICAgICAgICAgICBTQ0FMRTA6IE9GRlNFVF9TQ0FMRTAsIFNDQUxFMTogT0ZGU0VUX1NDQUxFMSwgU0NBTEUyOiBPRkZTRVRfU0NBTEUyLFxyXG4gICAgICAgICAgICBST1RBVElPTjA6IE9GRlNFVF9ST1QwLCBST1RBVElPTjE6IE9GRlNFVF9ST1QxLCBST1RBVElPTjI6IE9GRlNFVF9ST1QyLCBST1RBVElPTjM6IE9GRlNFVF9ST1QzLFxyXG4gICAgICAgICAgICBGREMwOiBPRkZTRVRfRkRDMCwgRkRDMTogT0ZGU0VUX0ZEQzEsIEZEQzI6IE9GRlNFVF9GREMyLCBPUEFDSVRZOiBPRkZTRVRfT1BBQ0lUWSxcclxuICAgICAgICAgICAgRlJDMDogT0ZGU0VUX0ZSQzAsIEZSQzk6IE9GRlNFVF9GUkM5LFxyXG4gICAgICAgIH0gPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVDtcclxuXHJcbiAgICAgICAgY29uc3QgY29tcHJlc3NQb3NpdGlvbk9mZnNldCA9ICh2LCBjb21wcmVzc2lvblNjYWxlRmFjdG9yLCBjb21wcmVzc2lvblNjYWxlUmFuZ2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZG91YmxlQ29tcHJlc3Npb25TY2FsZVJhbmdlID0gY29tcHJlc3Npb25TY2FsZVJhbmdlICogMiArIDE7XHJcbiAgICAgICAgICAgIHYgPSBNYXRoLnJvdW5kKHYgKiBjb21wcmVzc2lvblNjYWxlRmFjdG9yKSArIGNvbXByZXNzaW9uU2NhbGVSYW5nZTtcclxuICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHYsIDAsIGRvdWJsZUNvbXByZXNzaW9uU2NhbGVSYW5nZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldFNwbGF0LCBzZWN0aW9uQnVmZmVyLCBidWZmZXJPZmZzZXQsIGNvbXByZXNzaW9uTGV2ZWwsIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyLCBjb21wcmVzc2lvblNjYWxlRmFjdG9yLCBjb21wcmVzc2lvblNjYWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gLURlZmF1bHRTcGhlcmljYWxIYXJtb25pY3M4Qml0Q29tcHJlc3Npb25IYWxmUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c1BlclNwbGF0ID0gZ2V0U3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50Q291bnRGb3JEZWdyZWUoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXNQZXJDZW50ZXIgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlckNlbnRlcjtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXNQZXJTY2FsZSA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzW2NvbXByZXNzaW9uTGV2ZWxdLkJ5dGVzUGVyU2NhbGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzUGVyUm90YXRpb24gPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5CeXRlc1BlclJvdGF0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlc1BlckNvbG9yID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbY29tcHJlc3Npb25MZXZlbF0uQnl0ZXNQZXJDb2xvcjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNlbnRlckJhc2UgPSBidWZmZXJPZmZzZXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlQmFzZSA9IGNlbnRlckJhc2UgKyBieXRlc1BlckNlbnRlcjtcclxuICAgICAgICAgICAgY29uc3Qgcm90YXRpb25CYXNlID0gc2NhbGVCYXNlICsgYnl0ZXNQZXJTY2FsZTtcclxuICAgICAgICAgICAgY29uc3QgY29sb3JCYXNlID0gcm90YXRpb25CYXNlICsgYnl0ZXNQZXJSb3RhdGlvbjtcclxuICAgICAgICAgICAgY29uc3Qgc3BoZXJpY2FsSGFybW9uaWNzQmFzZSA9IGNvbG9yQmFzZSArIGJ5dGVzUGVyQ29sb3I7XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0U3BsYXRbT0ZGU0VUX1JPVDBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBSb3Quc2V0KHRhcmdldFNwbGF0W09GRlNFVF9ST1QwXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1JPVDFdLCB0YXJnZXRTcGxhdFtPRkZTRVRfUk9UMl0sIHRhcmdldFNwbGF0W09GRlNFVF9ST1QzXSk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wUm90Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVtcFJvdC5zZXQoMS4wLCAwLjAsIDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRhcmdldFNwbGF0W09GRlNFVF9TQ0FMRTBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBTY2FsZS5zZXQodGFyZ2V0U3BsYXRbT0ZGU0VUX1NDQUxFMF0gfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3BsYXRbT0ZGU0VUX1NDQUxFMV0gfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U3BsYXRbT0ZGU0VUX1NDQUxFMl0gfHwgMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wU2NhbGUuc2V0KDAsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY29tcHJlc3Npb25MZXZlbCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2VudGVyID0gbmV3IEZsb2F0MzJBcnJheShzZWN0aW9uQnVmZmVyLCBjZW50ZXJCYXNlLCBTcGxhdEJ1ZmZlci5DZW50ZXJDb21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3QgPSBuZXcgRmxvYXQzMkFycmF5KHNlY3Rpb25CdWZmZXIsIHJvdGF0aW9uQmFzZSwgU3BsYXRCdWZmZXIuUm90YXRpb25Db21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBGbG9hdDMyQXJyYXkoc2VjdGlvbkJ1ZmZlciwgc2NhbGVCYXNlLCBTcGxhdEJ1ZmZlci5TY2FsZUNvbXBvbmVudENvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICByb3Quc2V0KFt0ZW1wUm90LngsIHRlbXBSb3QueSwgdGVtcFJvdC56LCB0ZW1wUm90LnddKTtcclxuICAgICAgICAgICAgICAgIHNjYWxlLnNldChbdGVtcFNjYWxlLngsIHRlbXBTY2FsZS55LCB0ZW1wU2NhbGUuel0pO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyLnNldChbdGFyZ2V0U3BsYXRbT0ZGU0VUX1hdLCB0YXJnZXRTcGxhdFtPRkZTRVRfWV0sIHRhcmdldFNwbGF0W09GRlNFVF9aXV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hPdXQgPSBuZXcgRmxvYXQzMkFycmF5KHNlY3Rpb25CdWZmZXIsIHNwaGVyaWNhbEhhcm1vbmljc0Jhc2UsIHNwaGVyaWNhbEhhcm1vbmljc0NvbXBvbmVudHNQZXJTcGxhdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IDk7IHMrKykgc2hPdXRbc10gPSB0YXJnZXRTcGxhdFtPRkZTRVRfRlJDMCArIHNdIHx8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IDE1OyBzKyspIHNoT3V0W3MgKyA5XSA9IHRhcmdldFNwbGF0W09GRlNFVF9GUkM5ICsgc10gfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBuZXcgVWludDE2QXJyYXkodGVtcENlbnRlckJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuQ2VudGVyQ29tcG9uZW50Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm90ID0gbmV3IFVpbnQxNkFycmF5KHRlbXBSb3RhdGlvbkJ1ZmZlciwgMCwgU3BsYXRCdWZmZXIuUm90YXRpb25Db21wb25lbnRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IG5ldyBVaW50MTZBcnJheSh0ZW1wU2NhbGVCdWZmZXIsIDAsIFNwbGF0QnVmZmVyLlNjYWxlQ29tcG9uZW50Q291bnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJvdC5zZXQoW3RvSGFsZkZsb2F0KHRlbXBSb3QueCksIHRvSGFsZkZsb2F0KHRlbXBSb3QueSksIHRvSGFsZkZsb2F0KHRlbXBSb3QueiksIHRvSGFsZkZsb2F0KHRlbXBSb3QudyldKTtcclxuICAgICAgICAgICAgICAgIHNjYWxlLnNldChbdG9IYWxmRmxvYXQodGVtcFNjYWxlLngpLCB0b0hhbGZGbG9hdCh0ZW1wU2NhbGUueSksIHRvSGFsZkZsb2F0KHRlbXBTY2FsZS56KV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlckRlbHRhLnNldCh0YXJnZXRTcGxhdFtPRkZTRVRfWF0sIHRhcmdldFNwbGF0W09GRlNFVF9ZXSwgdGFyZ2V0U3BsYXRbT0ZGU0VUX1pdKS5zdWIoYnVja2V0Q2VudGVyKTtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlckRlbHRhLnggPSBjb21wcmVzc1Bvc2l0aW9uT2Zmc2V0KGJ1Y2tldENlbnRlckRlbHRhLngsIGNvbXByZXNzaW9uU2NhbGVGYWN0b3IsIGNvbXByZXNzaW9uU2NhbGVSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICBidWNrZXRDZW50ZXJEZWx0YS55ID0gY29tcHJlc3NQb3NpdGlvbk9mZnNldChidWNrZXRDZW50ZXJEZWx0YS55LCBjb21wcmVzc2lvblNjYWxlRmFjdG9yLCBjb21wcmVzc2lvblNjYWxlUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgYnVja2V0Q2VudGVyRGVsdGEueiA9IGNvbXByZXNzUG9zaXRpb25PZmZzZXQoYnVja2V0Q2VudGVyRGVsdGEueiwgY29tcHJlc3Npb25TY2FsZUZhY3RvciwgY29tcHJlc3Npb25TY2FsZVJhbmdlKTtcclxuICAgICAgICAgICAgICAgIGNlbnRlci5zZXQoW2J1Y2tldENlbnRlckRlbHRhLngsIGJ1Y2tldENlbnRlckRlbHRhLnksIGJ1Y2tldENlbnRlckRlbHRhLnpdKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFNIQXJyYXlUeXBlID0gY29tcHJlc3Npb25MZXZlbCA9PT0gMSA/IFVpbnQxNkFycmF5IDogVWludDhBcnJheTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBieXRlc1BlclNIQ29tcG9uZW50ID0gY29tcHJlc3Npb25MZXZlbCA9PT0gMSA/IDIgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoT3V0ID0gbmV3IFNIQXJyYXlUeXBlKHRlbXBTSEJ1ZmZlciwgMCwgc3BoZXJpY2FsSGFybW9uaWNzQ29tcG9uZW50c1BlclNwbGF0KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCA5OyBzKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY1ZhbCA9IHRhcmdldFNwbGF0W09GRlNFVF9GUkMwICsgc10gfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoT3V0W3NdID0gY29tcHJlc3Npb25MZXZlbCA9PT0gMSA/IHRvSGFsZkZsb2F0KHNyY1ZhbCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b1VpbnQ4KHNyY1ZhbCwgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYsIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWdyZWUxQnl0ZUNvdW50ID0gOSAqIGJ5dGVzUGVyU0hDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlCZXR3ZWVuQnVmZmVycyhzaE91dC5idWZmZXIsIDAsIHNlY3Rpb25CdWZmZXIsIHNwaGVyaWNhbEhhcm1vbmljc0Jhc2UsIGRlZ3JlZTFCeXRlQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID49IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgMTU7IHMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY1ZhbCA9IHRhcmdldFNwbGF0W09GRlNFVF9GUkM5ICsgc10gfHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaE91dFtzICsgOV0gPSBjb21wcmVzc2lvbkxldmVsID09PSAxID8gdG9IYWxmRmxvYXQoc3JjVmFsKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9VaW50OChzcmNWYWwsIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLCBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5QmV0d2VlbkJ1ZmZlcnMoc2hPdXQuYnVmZmVyLCBkZWdyZWUxQnl0ZUNvdW50LCBzZWN0aW9uQnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0Jhc2UgKyBkZWdyZWUxQnl0ZUNvdW50LCAxNSAqIGJ5dGVzUGVyU0hDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvcHlCZXR3ZWVuQnVmZmVycyhjZW50ZXIuYnVmZmVyLCAwLCBzZWN0aW9uQnVmZmVyLCBjZW50ZXJCYXNlLCA2KTtcclxuICAgICAgICAgICAgICAgIGNvcHlCZXR3ZWVuQnVmZmVycyhzY2FsZS5idWZmZXIsIDAsIHNlY3Rpb25CdWZmZXIsIHNjYWxlQmFzZSwgNik7XHJcbiAgICAgICAgICAgICAgICBjb3B5QmV0d2VlbkJ1ZmZlcnMocm90LmJ1ZmZlciwgMCwgc2VjdGlvbkJ1ZmZlciwgcm90YXRpb25CYXNlLCA4KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmdiYSA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh0ZW1wQ29sb3JCdWZmZXIsIDAsIDQpO1xyXG4gICAgICAgICAgICByZ2JhLnNldChbdGFyZ2V0U3BsYXRbT0ZGU0VUX0ZEQzBdIHx8IDAsIHRhcmdldFNwbGF0W09GRlNFVF9GREMxXSB8fCAwLCB0YXJnZXRTcGxhdFtPRkZTRVRfRkRDMl0gfHwgMF0pO1xyXG4gICAgICAgICAgICByZ2JhWzNdID0gdGFyZ2V0U3BsYXRbT0ZGU0VUX09QQUNJVFldIHx8IDA7XHJcblxyXG4gICAgICAgICAgICBjb3B5QmV0d2VlbkJ1ZmZlcnMocmdiYS5idWZmZXIsIDAsIHNlY3Rpb25CdWZmZXIsIGNvbG9yQmFzZSwgNCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgc3RhdGljIGdlbmVyYXRlRnJvbVVuY29tcHJlc3NlZFNwbGF0QXJyYXlzKHNwbGF0QXJyYXlzLCBtaW5pbXVtQWxwaGEsIGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSwgb3B0aW9ucyA9IFtdKSB7XHJcblxyXG4gICAgICAgIGxldCBzaERlZ3JlZSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgc2EgPSAwOyBzYSA8IHNwbGF0QXJyYXlzLmxlbmd0aDsgc2EgKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRBcnJheSA9IHNwbGF0QXJyYXlzW3NhXTtcclxuICAgICAgICAgICAgc2hEZWdyZWUgPSBNYXRoLm1heChzcGxhdEFycmF5LnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgc2hEZWdyZWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmO1xyXG4gICAgICAgIGxldCBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgc2EgPSAwOyBzYSA8IHNwbGF0QXJyYXlzLmxlbmd0aDsgc2EgKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRBcnJheSA9IHNwbGF0QXJyYXlzW3NhXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdEFycmF5LnNwbGF0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsYXQgPSBzcGxhdEFycmF5LnNwbGF0c1tpXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHNjID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuRlJDMDsgc2MgPCBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5GUkMyMyAmJiBzYyA8IHNwbGF0Lmxlbmd0aDsgc2MrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgfHwgc3BsYXRbc2NdIDwgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBzcGxhdFtzY107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgfHwgc3BsYXRbc2NdID4gbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgPSBzcGxhdFtzY107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtaW5TcGhlcmljYWxIYXJtb25pY3NDb2VmZiA9IG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmIHx8IC1EZWZhdWx0U3BoZXJpY2FsSGFybW9uaWNzOEJpdENvbXByZXNzaW9uSGFsZlJhbmdlO1xyXG4gICAgICAgIG1heFNwaGVyaWNhbEhhcm1vbmljc0NvZWZmID0gbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmYgfHwgRGVmYXVsdFNwaGVyaWNhbEhhcm1vbmljczhCaXRDb21wcmVzc2lvbkhhbGZSYW5nZTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBieXRlc1BlclNwbGF0IH0gPSBTcGxhdEJ1ZmZlci5jYWxjdWxhdGVDb21wb25lbnRTdG9yYWdlKGNvbXByZXNzaW9uTGV2ZWwsIHNoRGVncmVlKTtcclxuICAgICAgICBjb25zdCBjb21wcmVzc2lvblNjYWxlUmFuZ2UgPSBTcGxhdEJ1ZmZlci5Db21wcmVzc2lvbkxldmVsc1tjb21wcmVzc2lvbkxldmVsXS5TY2FsZVJhbmdlO1xyXG5cclxuICAgICAgICBjb25zdCBzZWN0aW9uQnVmZmVycyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJCdWZmZXJzID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsU3BsYXRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IHNhID0gMDsgc2EgPCBzcGxhdEFycmF5cy5sZW5ndGg7IHNhICsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0QXJyYXkgPSBzcGxhdEFycmF5c1tzYV07XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkU3BsYXRzID0gbmV3IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc2hEZWdyZWUpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0QXJyYXkuc3BsYXRDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTcGxhdCA9IHNwbGF0QXJyYXkuc3BsYXRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5PUEFDSVRZXSB8fCAwKSA+PSBtaW5pbXVtQWxwaGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZFNwbGF0cy5hZGRTcGxhdCh0YXJnZXRTcGxhdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25PcHRpb25zID0gb3B0aW9uc1tzYV0gfHwge307XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25CbG9ja1NpemUgPSAoc2VjdGlvbk9wdGlvbnMuYmxvY2tTaXplRmFjdG9yIHx8IDEpICogKGJsb2NrU2l6ZSB8fCBTcGxhdEJ1ZmZlci5CdWNrZXRCbG9ja1NpemUpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uQnVja2V0U2l6ZSA9IE1hdGguY2VpbCgoc2VjdGlvbk9wdGlvbnMuYnVja2V0U2l6ZUZhY3RvciB8fCAxKSAqIChidWNrZXRTaXplIHx8IFNwbGF0QnVmZmVyLkJ1Y2tldFNpemUpKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEluZm8gPSBTcGxhdEJ1ZmZlci5jb21wdXRlQnVja2V0c0ZvclVuY29tcHJlc3NlZFNwbGF0QXJyYXkodmFsaWRTcGxhdHMsIHNlY3Rpb25CbG9ja1NpemUsIHNlY3Rpb25CdWNrZXRTaXplKTtcclxuICAgICAgICAgICAgY29uc3QgZnVsbEJ1Y2tldENvdW50ID0gYnVja2V0SW5mby5mdWxsQnVja2V0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxseUZ1bGxCdWNrZXRMZW5ndGhzID0gYnVja2V0SW5mby5wYXJ0aWFsbHlGdWxsQnVja2V0cy5tYXAoKGJ1Y2tldCkgPT4gYnVja2V0LnNwbGF0cy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCA9IHBhcnRpYWxseUZ1bGxCdWNrZXRMZW5ndGhzLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnVja2V0cyA9IFsuLi5idWNrZXRJbmZvLmZ1bGxCdWNrZXRzLCAuLi5idWNrZXRJbmZvLnBhcnRpYWxseUZ1bGxCdWNrZXRzXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25EYXRhU2l6ZUJ5dGVzID0gdmFsaWRTcGxhdHMuc3BsYXRzLmxlbmd0aCAqIGJ5dGVzUGVyU3BsYXQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldE1ldGFEYXRhU2l6ZUJ5dGVzID0gcGFydGlhbGx5RmlsbGVkQnVja2V0Q291bnQgKiA0O1xyXG4gICAgICAgICAgICBjb25zdCBidWNrZXREYXRhQnl0ZXMgPSBjb21wcmVzc2lvbkxldmVsID49IDEgPyBidWNrZXRzLmxlbmd0aCAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLkJ1Y2tldFN0b3JhZ2VTaXplQnl0ZXMgKyBidWNrZXRNZXRhRGF0YVNpemVCeXRlcyA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25TaXplQnl0ZXMgPSBzZWN0aW9uRGF0YVNpemVCeXRlcyArIGJ1Y2tldERhdGFCeXRlcztcclxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzZWN0aW9uU2l6ZUJ5dGVzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXByZXNzaW9uU2NhbGVGYWN0b3IgPSBjb21wcmVzc2lvblNjYWxlUmFuZ2UgLyAoc2VjdGlvbkJsb2NrU2l6ZSAqIDAuNSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldENlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgb3V0U3BsYXRDb3VudCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgYnVja2V0cy5sZW5ndGg7IGIrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0ID0gYnVja2V0c1tiXTtcclxuICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlci5mcm9tQXJyYXkoYnVja2V0LmNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Y2tldC5zcGxhdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcm93ID0gYnVja2V0LnNwbGF0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTcGxhdCA9IHZhbGlkU3BsYXRzLnNwbGF0c1tyb3ddO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlck9mZnNldCA9IGJ1Y2tldERhdGFCeXRlcyArIG91dFNwbGF0Q291bnQgKiBieXRlc1BlclNwbGF0O1xyXG4gICAgICAgICAgICAgICAgICAgIFNwbGF0QnVmZmVyLndyaXRlU3BsYXREYXRhVG9TZWN0aW9uQnVmZmVyKHRhcmdldFNwbGF0LCBzZWN0aW9uQnVmZmVyLCBidWZmZXJPZmZzZXQsIGNvbXByZXNzaW9uTGV2ZWwsIHNoRGVncmVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldENlbnRlciwgY29tcHJlc3Npb25TY2FsZUZhY3RvciwgY29tcHJlc3Npb25TY2FsZVJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLCBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZik7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0U3BsYXRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRvdGFsU3BsYXRDb3VudCArPSBvdXRTcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbXByZXNzaW9uTGV2ZWwgPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnVja2V0TWV0YURhdGFBcnJheSA9IG5ldyBVaW50MzJBcnJheShzZWN0aW9uQnVmZmVyLCAwLCBwYXJ0aWFsbHlGdWxsQnVja2V0TGVuZ3Rocy5sZW5ndGggKiA0KTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHBmYiA9IDA7IHBmYiA8IHBhcnRpYWxseUZ1bGxCdWNrZXRMZW5ndGhzLmxlbmd0aDsgcGZiICsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0TWV0YURhdGFBcnJheVtwZmJdID0gcGFydGlhbGx5RnVsbEJ1Y2tldExlbmd0aHNbcGZiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShzZWN0aW9uQnVmZmVyLCBidWNrZXRNZXRhRGF0YVNpemVCeXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWNrZXRzLmxlbmd0aCAqIFNwbGF0QnVmZmVyLkJ1Y2tldFN0b3JhZ2VTaXplRmxvYXRzKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgYnVja2V0cy5sZW5ndGg7IGIrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1Y2tldCA9IGJ1Y2tldHNbYl07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IGIgKiAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldEFycmF5W2Jhc2VdID0gYnVja2V0LmNlbnRlclswXTtcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXRBcnJheVtiYXNlICsgMV0gPSBidWNrZXQuY2VudGVyWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldEFycmF5W2Jhc2UgKyAyXSA9IGJ1Y2tldC5jZW50ZXJbMl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VjdGlvbkJ1ZmZlcnMucHVzaChzZWN0aW9uQnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXJCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcyk7XHJcbiAgICAgICAgICAgIFNwbGF0QnVmZmVyLndyaXRlU2VjdGlvbkhlYWRlclRvQnVmZmVyKHtcclxuICAgICAgICAgICAgICAgIG1heFNwbGF0Q291bnQ6IG91dFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBzcGxhdENvdW50OiBvdXRTcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgYnVja2V0U2l6ZTogc2VjdGlvbkJ1Y2tldFNpemUsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRDb3VudDogYnVja2V0cy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBidWNrZXRCbG9ja1NpemU6IHNlY3Rpb25CbG9ja1NpemUsXHJcbiAgICAgICAgICAgICAgICBjb21wcmVzc2lvblNjYWxlUmFuZ2U6IGNvbXByZXNzaW9uU2NhbGVSYW5nZSxcclxuICAgICAgICAgICAgICAgIHN0b3JhZ2VTaXplQnl0ZXM6IHNlY3Rpb25TaXplQnl0ZXMsXHJcbiAgICAgICAgICAgICAgICBmdWxsQnVja2V0Q291bnQ6IGZ1bGxCdWNrZXRDb3VudCxcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxseUZpbGxlZEJ1Y2tldENvdW50OiBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudCxcclxuICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTogc2hEZWdyZWVcclxuICAgICAgICAgICAgfSwgY29tcHJlc3Npb25MZXZlbCwgc2VjdGlvbkhlYWRlckJ1ZmZlciwgMCk7XHJcbiAgICAgICAgICAgIHNlY3Rpb25IZWFkZXJCdWZmZXJzLnB1c2goc2VjdGlvbkhlYWRlckJ1ZmZlcik7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNlY3Rpb25zQ3VtdWxhdGl2ZVNpemVCeXRlcyA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgc2VjdGlvbkJ1ZmZlciBvZiBzZWN0aW9uQnVmZmVycykgc2VjdGlvbnNDdW11bGF0aXZlU2l6ZUJ5dGVzICs9IHNlY3Rpb25CdWZmZXIuYnl0ZUxlbmd0aDtcclxuICAgICAgICBjb25zdCB1bmlmaWVkQnVmZmVyU2l6ZSA9IFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci5TZWN0aW9uSGVhZGVyU2l6ZUJ5dGVzICogc2VjdGlvbkJ1ZmZlcnMubGVuZ3RoICsgc2VjdGlvbnNDdW11bGF0aXZlU2l6ZUJ5dGVzO1xyXG4gICAgICAgIGNvbnN0IHVuaWZpZWRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodW5pZmllZEJ1ZmZlclNpemUpO1xyXG5cclxuICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZUhlYWRlclRvQnVmZmVyKHtcclxuICAgICAgICAgICAgdmVyc2lvbk1ham9yOiAwLFxyXG4gICAgICAgICAgICB2ZXJzaW9uTWlub3I6IDEsXHJcbiAgICAgICAgICAgIG1heFNlY3Rpb25Db3VudDogc2VjdGlvbkJ1ZmZlcnMubGVuZ3RoLFxyXG4gICAgICAgICAgICBzZWN0aW9uQ291bnQ6IHNlY3Rpb25CdWZmZXJzLmxlbmd0aCxcclxuICAgICAgICAgICAgbWF4U3BsYXRDb3VudDogdG90YWxTcGxhdENvdW50LFxyXG4gICAgICAgICAgICBzcGxhdENvdW50OiB0b3RhbFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgIGNvbXByZXNzaW9uTGV2ZWw6IGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgIHNjZW5lQ2VudGVyOiBzY2VuZUNlbnRlcixcclxuICAgICAgICAgICAgbWluU3BoZXJpY2FsSGFybW9uaWNzQ29lZmY6IG1pblNwaGVyaWNhbEhhcm1vbmljc0NvZWZmLFxyXG4gICAgICAgICAgICBtYXhTcGhlcmljYWxIYXJtb25pY3NDb2VmZjogbWF4U3BoZXJpY2FsSGFybW9uaWNzQ29lZmZcclxuICAgICAgICB9LCB1bmlmaWVkQnVmZmVyKTtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbnRVbmlmaWVkQmFzZSA9IFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcztcclxuICAgICAgICBmb3IgKGxldCBzZWN0aW9uSGVhZGVyQnVmZmVyIG9mIHNlY3Rpb25IZWFkZXJCdWZmZXJzKSB7XHJcbiAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KHVuaWZpZWRCdWZmZXIsIGN1cnJlbnRVbmlmaWVkQmFzZSwgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcykuc2V0KG5ldyBVaW50OEFycmF5KHNlY3Rpb25IZWFkZXJCdWZmZXIpKTtcclxuICAgICAgICAgICAgY3VycmVudFVuaWZpZWRCYXNlICs9IFNwbGF0QnVmZmVyLlNlY3Rpb25IZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBzZWN0aW9uQnVmZmVyIG9mIHNlY3Rpb25CdWZmZXJzKSB7XHJcbiAgICAgICAgICAgIG5ldyBVaW50OEFycmF5KHVuaWZpZWRCdWZmZXIsIGN1cnJlbnRVbmlmaWVkQmFzZSwgc2VjdGlvbkJ1ZmZlci5ieXRlTGVuZ3RoKS5zZXQobmV3IFVpbnQ4QXJyYXkoc2VjdGlvbkJ1ZmZlcikpO1xyXG4gICAgICAgICAgICBjdXJyZW50VW5pZmllZEJhc2UgKz0gc2VjdGlvbkJ1ZmZlci5ieXRlTGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXIgPSBuZXcgU3BsYXRCdWZmZXIodW5pZmllZEJ1ZmZlcik7XHJcbiAgICAgICAgcmV0dXJuIHNwbGF0QnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjb21wdXRlQnVja2V0c0ZvclVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc3BsYXRBcnJheSwgYmxvY2tTaXplLCBidWNrZXRTaXplKSB7XHJcbiAgICAgICAgbGV0IHNwbGF0Q291bnQgPSBzcGxhdEFycmF5LnNwbGF0Q291bnQ7XHJcbiAgICAgICAgY29uc3QgaGFsZkJsb2NrU2l6ZSA9IGJsb2NrU2l6ZSAvIDIuMDtcclxuXHJcbiAgICAgICAgY29uc3QgbWluID0gbmV3IFZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCBtYXggPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTcGxhdCA9IHNwbGF0QXJyYXkuc3BsYXRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBbdGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ZXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlpdXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgY2VudGVyWzBdIDwgbWluLngpIG1pbi54ID0gY2VudGVyWzBdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBjZW50ZXJbMF0gPiBtYXgueCkgbWF4LnggPSBjZW50ZXJbMF07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGNlbnRlclsxXSA8IG1pbi55KSBtaW4ueSA9IGNlbnRlclsxXTtcclxuICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgY2VudGVyWzFdID4gbWF4LnkpIG1heC55ID0gY2VudGVyWzFdO1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBjZW50ZXJbMl0gPCBtaW4ueikgbWluLnogPSBjZW50ZXJbMl07XHJcbiAgICAgICAgICAgIGlmIChpID09PSAwIHx8IGNlbnRlclsyXSA+IG1heC56KSBtYXgueiA9IGNlbnRlclsyXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMygpLmNvcHkobWF4KS5zdWIobWluKTtcclxuICAgICAgICBjb25zdCB5QmxvY2tzID0gTWF0aC5jZWlsKGRpbWVuc2lvbnMueSAvIGJsb2NrU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgekJsb2NrcyA9IE1hdGguY2VpbChkaW1lbnNpb25zLnogLyBibG9ja1NpemUpO1xyXG5cclxuICAgICAgICBjb25zdCBibG9ja0NlbnRlciA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgZnVsbEJ1Y2tldHMgPSBbXTtcclxuICAgICAgICBjb25zdCBwYXJ0aWFsbHlGdWxsQnVja2V0cyA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTcGxhdCA9IHNwbGF0QXJyYXkuc3BsYXRzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBbdGFyZ2V0U3BsYXRbVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRTcGxhdFtVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ZXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFNwbGF0W1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlpdXTtcclxuICAgICAgICAgICAgY29uc3QgeEJsb2NrID0gTWF0aC5mbG9vcigoY2VudGVyWzBdIC0gbWluLngpIC8gYmxvY2tTaXplKTtcclxuICAgICAgICAgICAgY29uc3QgeUJsb2NrID0gTWF0aC5mbG9vcigoY2VudGVyWzFdIC0gbWluLnkpIC8gYmxvY2tTaXplKTtcclxuICAgICAgICAgICAgY29uc3QgekJsb2NrID0gTWF0aC5mbG9vcigoY2VudGVyWzJdIC0gbWluLnopIC8gYmxvY2tTaXplKTtcclxuXHJcbiAgICAgICAgICAgIGJsb2NrQ2VudGVyLnggPSB4QmxvY2sgKiBibG9ja1NpemUgKyBtaW4ueCArIGhhbGZCbG9ja1NpemU7XHJcbiAgICAgICAgICAgIGJsb2NrQ2VudGVyLnkgPSB5QmxvY2sgKiBibG9ja1NpemUgKyBtaW4ueSArIGhhbGZCbG9ja1NpemU7XHJcbiAgICAgICAgICAgIGJsb2NrQ2VudGVyLnogPSB6QmxvY2sgKiBibG9ja1NpemUgKyBtaW4ueiArIGhhbGZCbG9ja1NpemU7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBidWNrZXRJZCA9IHhCbG9jayAqICh5QmxvY2tzICogekJsb2NrcykgKyB5QmxvY2sgKiB6QmxvY2tzICsgekJsb2NrO1xyXG4gICAgICAgICAgICBsZXQgYnVja2V0ID0gcGFydGlhbGx5RnVsbEJ1Y2tldHNbYnVja2V0SWRdO1xyXG4gICAgICAgICAgICBpZiAoIWJ1Y2tldCkge1xyXG4gICAgICAgICAgICAgICAgcGFydGlhbGx5RnVsbEJ1Y2tldHNbYnVja2V0SWRdID0gYnVja2V0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICdzcGxhdHMnOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAnY2VudGVyJzogYmxvY2tDZW50ZXIudG9BcnJheSgpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBidWNrZXQuc3BsYXRzLnB1c2goaSk7XHJcbiAgICAgICAgICAgIGlmIChidWNrZXQuc3BsYXRzLmxlbmd0aCA+PSBidWNrZXRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBmdWxsQnVja2V0cy5wdXNoKGJ1Y2tldCk7XHJcbiAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGdWxsQnVja2V0c1tidWNrZXRJZF0gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwYXJ0aWFsbHlGdWxsQnVja2V0QXJyYXkgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBidWNrZXRJZCBpbiBwYXJ0aWFsbHlGdWxsQnVja2V0cykge1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093bihwYXJ0aWFsbHlGdWxsQnVja2V0cywgYnVja2V0SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBidWNrZXQgPSBwYXJ0aWFsbHlGdWxsQnVja2V0c1tidWNrZXRJZF07XHJcbiAgICAgICAgICAgICAgICBpZiAoYnVja2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbGx5RnVsbEJ1Y2tldEFycmF5LnB1c2goYnVja2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ2Z1bGxCdWNrZXRzJzogZnVsbEJ1Y2tldHMsXHJcbiAgICAgICAgICAgICdwYXJ0aWFsbHlGdWxsQnVja2V0cyc6IHBhcnRpYWxseUZ1bGxCdWNrZXRBcnJheSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxufSIsIi8qKlxyXG4gKiBTcGxhdFBhcnRpdGlvbmVyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIFRoaXMgZmlsZSBpcyBmdW5jdGlvbmFsbHkgaWRlbnRpY2FsIHRvIHRoZSBvcmlnaW5hbC5cclxuICogSW1wb3J0IHBhdGhzIGFkanVzdGVkIGZvciBnc3BsYXQtZmxhbWUtYXZhdGFyIHBhY2thZ2Ugc3RydWN0dXJlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFNwbGF0QnVmZmVyIH0gZnJvbSAnLi9TcGxhdEJ1ZmZlci5qcyc7XHJcbmltcG9ydCB7IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkgfSBmcm9tICcuL1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuanMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwbGF0UGFydGl0aW9uZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlY3Rpb25Db3VudCwgc2VjdGlvbkZpbHRlcnMsIGdyb3VwaW5nUGFyYW1ldGVycywgcGFydGl0aW9uR2VuZXJhdG9yKSB7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uQ291bnQgPSBzZWN0aW9uQ291bnQ7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uRmlsdGVycyA9IHNlY3Rpb25GaWx0ZXJzO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBpbmdQYXJhbWV0ZXJzID0gZ3JvdXBpbmdQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHRoaXMucGFydGl0aW9uR2VuZXJhdG9yID0gcGFydGl0aW9uR2VuZXJhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnRpdGlvblVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc3BsYXRBcnJheSkge1xyXG4gICAgICAgIGxldCBncm91cGluZ1BhcmFtZXRlcnM7XHJcbiAgICAgICAgbGV0IHNlY3Rpb25Db3VudDtcclxuICAgICAgICBsZXQgc2VjdGlvbkZpbHRlcnM7XHJcbiAgICAgICAgaWYgKHRoaXMucGFydGl0aW9uR2VuZXJhdG9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSB0aGlzLnBhcnRpdGlvbkdlbmVyYXRvcihzcGxhdEFycmF5KTtcclxuICAgICAgICAgICAgZ3JvdXBpbmdQYXJhbWV0ZXJzID0gcmVzdWx0cy5ncm91cGluZ1BhcmFtZXRlcnM7XHJcbiAgICAgICAgICAgIHNlY3Rpb25Db3VudCA9IHJlc3VsdHMuc2VjdGlvbkNvdW50O1xyXG4gICAgICAgICAgICBzZWN0aW9uRmlsdGVycyA9IHJlc3VsdHMuc2VjdGlvbkZpbHRlcnM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3JvdXBpbmdQYXJhbWV0ZXJzID0gdGhpcy5ncm91cGluZ1BhcmFtZXRlcnM7XHJcbiAgICAgICAgICAgIHNlY3Rpb25Db3VudCA9IHRoaXMuc2VjdGlvbkNvdW50O1xyXG4gICAgICAgICAgICBzZWN0aW9uRmlsdGVycyA9IHRoaXMuc2VjdGlvbkZpbHRlcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBuZXdBcnJheXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHNlY3Rpb25Db3VudDsgcysrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25TcGxhdHMgPSBuZXcgVW5jb21wcmVzc2VkU3BsYXRBcnJheShzcGxhdEFycmF5LnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25GaWx0ZXIgPSBzZWN0aW9uRmlsdGVyc1tzXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGxhdEFycmF5LnNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlY3Rpb25GaWx0ZXIoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU3BsYXRzLmFkZFNwbGF0KHNwbGF0QXJyYXkuc3BsYXRzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXdBcnJheXMucHVzaChzZWN0aW9uU3BsYXRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3BsYXRBcnJheXM6IG5ld0FycmF5cyxcclxuICAgICAgICAgICAgcGFyYW1ldGVyczogZ3JvdXBpbmdQYXJhbWV0ZXJzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U3RhbmRhcmRQYXJ0aXRpb25lcihwYXJ0aXRpb25TaXplID0gMCwgc2NlbmVDZW50ZXIgPSBuZXcgVmVjdG9yMygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTaXplID0gU3BsYXRCdWZmZXIuQnVja2V0QmxvY2tTaXplLCBidWNrZXRTaXplID0gU3BsYXRCdWZmZXIuQnVja2V0U2l6ZSkge1xyXG5cclxuICAgICAgICBjb25zdCBwYXJ0aXRpb25HZW5lcmF0b3IgPSAoc3BsYXRBcnJheSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgT0ZGU0VUX1ggPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5YO1xyXG4gICAgICAgICAgICBjb25zdCBPRkZTRVRfWSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlk7XHJcbiAgICAgICAgICAgIGNvbnN0IE9GRlNFVF9aID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWjtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJ0aXRpb25TaXplIDw9IDApIHBhcnRpdGlvblNpemUgPSBzcGxhdEFycmF5LnNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgICAgICBjb25zdCBjbGFtcERpc3RhbmNlID0gMC41O1xyXG4gICAgICAgICAgICBjb25zdCBjbGFtcFBvaW50ID0gKHBvaW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb2ludC54ID0gTWF0aC5mbG9vcihwb2ludC54IC8gY2xhbXBEaXN0YW5jZSkgKiBjbGFtcERpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgcG9pbnQueSA9IE1hdGguZmxvb3IocG9pbnQueSAvIGNsYW1wRGlzdGFuY2UpICogY2xhbXBEaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHBvaW50LnogPSBNYXRoLmZsb29yKHBvaW50LnogLyBjbGFtcERpc3RhbmNlKSAqIGNsYW1wRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNwbGF0QXJyYXkuc3BsYXRzLmZvckVhY2goKHNwbGF0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXIuc2V0KHNwbGF0W09GRlNFVF9YXSwgc3BsYXRbT0ZGU0VUX1ldLCBzcGxhdFtPRkZTRVRfWl0pLnN1YihzY2VuZUNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBjbGFtcFBvaW50KGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICBzcGxhdC5jZW50ZXJEaXN0ID0gY2VudGVyLmxlbmd0aFNxKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzcGxhdEFycmF5LnNwbGF0cy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VudGVyQURpc3QgPSBhLmNlbnRlckRpc3Q7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VudGVyQkRpc3QgPSBiLmNlbnRlckRpc3Q7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2VudGVyQURpc3QgPiBjZW50ZXJCRGlzdCkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uRmlsdGVycyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBncm91cGluZ1BhcmFtZXRlcnMgPSBbXTtcclxuICAgICAgICAgICAgcGFydGl0aW9uU2l6ZSA9IE1hdGgubWluKHNwbGF0QXJyYXkuc3BsYXRDb3VudCwgcGFydGl0aW9uU2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGl0aW9uQ291bnQgPSBNYXRoLmNlaWwoc3BsYXRBcnJheS5zcGxhdENvdW50IC8gcGFydGl0aW9uU2l6ZSk7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50U3RhcnRTcGxhdCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aXRpb25Db3VudDsgaSArKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0U3BsYXQgPSBjdXJyZW50U3RhcnRTcGxhdDtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25GaWx0ZXJzLnB1c2goKHNwbGF0SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3BsYXRJbmRleCA+PSBzdGFydFNwbGF0ICYmIHNwbGF0SW5kZXggPCBzdGFydFNwbGF0ICsgcGFydGl0aW9uU2l6ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBpbmdQYXJhbWV0ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICdibG9ja3NTaXplJzogYmxvY2tTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICdidWNrZXRTaXplJzogYnVja2V0U2l6ZSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXJ0U3BsYXQgKz0gcGFydGl0aW9uU2l6ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgJ3NlY3Rpb25Db3VudCc6IHNlY3Rpb25GaWx0ZXJzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25GaWx0ZXJzLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBpbmdQYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbmV3IFNwbGF0UGFydGl0aW9uZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcGFydGl0aW9uR2VuZXJhdG9yKTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBTcGxhdEJ1ZmZlckdlbmVyYXRvclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqIEltcG9ydCBwYXRocyBhZGp1c3RlZCBmb3IgZ3NwbGF0LWZsYW1lLWF2YXRhciBwYWNrYWdlIHN0cnVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnO1xyXG5pbXBvcnQgeyBTcGxhdEJ1ZmZlciB9IGZyb20gJy4vU3BsYXRCdWZmZXIuanMnO1xyXG5pbXBvcnQgeyBTcGxhdFBhcnRpdGlvbmVyIH0gZnJvbSAnLi9TcGxhdFBhcnRpdGlvbmVyLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcGxhdEJ1ZmZlckdlbmVyYXRvciB7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3BsYXRQYXJ0aXRpb25lciwgYWxwaGFSZW1vdmFsVGhyZXNob2xkLCBjb21wcmVzc2lvbkxldmVsLCBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRQYXJ0aXRpb25lciA9IHNwbGF0UGFydGl0aW9uZXI7XHJcbiAgICAgICAgdGhpcy5hbHBoYVJlbW92YWxUaHJlc2hvbGQgPSBhbHBoYVJlbW92YWxUaHJlc2hvbGQ7XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc2lvbkxldmVsID0gY29tcHJlc3Npb25MZXZlbDtcclxuICAgICAgICB0aGlzLnNlY3Rpb25TaXplID0gc2VjdGlvblNpemU7XHJcbiAgICAgICAgdGhpcy5zY2VuZUNlbnRlciA9IHNjZW5lQ2VudGVyID8gbmV3IFZlY3RvcjMoKS5jb3B5KHNjZW5lQ2VudGVyKSA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IGJsb2NrU2l6ZTtcclxuICAgICAgICB0aGlzLmJ1Y2tldFNpemUgPSBidWNrZXRTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlRnJvbVVuY29tcHJlc3NlZFNwbGF0QXJyYXkoc3BsYXRBcnJheSkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRpdGlvblJlc3VsdHMgPSB0aGlzLnNwbGF0UGFydGl0aW9uZXIucGFydGl0aW9uVW5jb21wcmVzc2VkU3BsYXRBcnJheShzcGxhdEFycmF5KTtcclxuICAgICAgICByZXR1cm4gU3BsYXRCdWZmZXIuZ2VuZXJhdGVGcm9tVW5jb21wcmVzc2VkU3BsYXRBcnJheXMocGFydGl0aW9uUmVzdWx0cy5zcGxhdEFycmF5cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbHBoYVJlbW92YWxUaHJlc2hvbGQsIHRoaXMuY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZUNlbnRlciwgdGhpcy5ibG9ja1NpemUsIHRoaXMuYnVja2V0U2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydGl0aW9uUmVzdWx0cy5wYXJhbWV0ZXJzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U3RhbmRhcmRHZW5lcmF0b3IoYWxwaGFSZW1vdmFsVGhyZXNob2xkID0gMSwgY29tcHJlc3Npb25MZXZlbCA9IDEsIHNlY3Rpb25TaXplID0gMCwgc2NlbmVDZW50ZXIgPSBuZXcgVmVjdG9yMygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrU2l6ZSA9IFNwbGF0QnVmZmVyLkJ1Y2tldEJsb2NrU2l6ZSwgYnVja2V0U2l6ZSA9IFNwbGF0QnVmZmVyLkJ1Y2tldFNpemUpIHtcclxuICAgICAgICBjb25zdCBzcGxhdFBhcnRpdGlvbmVyID0gU3BsYXRQYXJ0aXRpb25lci5nZXRTdGFuZGFyZFBhcnRpdGlvbmVyKHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplKTtcclxuICAgICAgICByZXR1cm4gbmV3IFNwbGF0QnVmZmVyR2VuZXJhdG9yKHNwbGF0UGFydGl0aW9uZXIsIGFscGhhUmVtb3ZhbFRocmVzaG9sZCwgY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplKTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBQbHlQYXJzZXJVdGlscyBhbmQgcmVsYXRlZCBjb25zdGFudHNcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogU2ltcGxpZmllZCBmb3IgRkxBTUUgYXZhdGFyIC0gb25seSBzdXBwb3J0cyBJTlJJQVYxIGZvcm1hdC5cclxuICovXHJcblxyXG4vLyBQbHkgZm9ybWF0IHR5cGVzIChzaW1wbGlmaWVkIC0gRkxBTUUgdXNlcyBJTlJJQVYxKVxyXG5leHBvcnQgY29uc3QgUGx5Rm9ybWF0ID0ge1xyXG4gICAgJ0lOUklBVjEnOiAwXHJcbn07XHJcblxyXG4vLyBGaWVsZCBzaXplIElEc1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWREb3VibGUgPSAwO1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWRJbnQgPSAxO1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWRVSW50ID0gMjtcclxuZXhwb3J0IGNvbnN0IEZpZWxkU2l6ZUlkRmxvYXQgPSAzO1xyXG5leHBvcnQgY29uc3QgRmllbGRTaXplSWRTaG9ydCA9IDQ7XHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZFVTaG9ydCA9IDU7XHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVJZFVDaGFyID0gNjtcclxuXHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemVTdHJpbmdNYXAgPSB7XHJcbiAgICAnZG91YmxlJzogRmllbGRTaXplSWREb3VibGUsXHJcbiAgICAnaW50JzogRmllbGRTaXplSWRJbnQsXHJcbiAgICAndWludCc6IEZpZWxkU2l6ZUlkVUludCxcclxuICAgICdmbG9hdCc6IEZpZWxkU2l6ZUlkRmxvYXQsXHJcbiAgICAnc2hvcnQnOiBGaWVsZFNpemVJZFNob3J0LFxyXG4gICAgJ3VzaG9ydCc6IEZpZWxkU2l6ZUlkVVNob3J0LFxyXG4gICAgJ3VjaGFyJzogRmllbGRTaXplSWRVQ2hhcixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBGaWVsZFNpemUgPSB7XHJcbiAgICBbRmllbGRTaXplSWREb3VibGVdOiA4LFxyXG4gICAgW0ZpZWxkU2l6ZUlkSW50XTogNCxcclxuICAgIFtGaWVsZFNpemVJZFVJbnRdOiA0LFxyXG4gICAgW0ZpZWxkU2l6ZUlkRmxvYXRdOiA0LFxyXG4gICAgW0ZpZWxkU2l6ZUlkU2hvcnRdOiAyLFxyXG4gICAgW0ZpZWxkU2l6ZUlkVVNob3J0XTogMixcclxuICAgIFtGaWVsZFNpemVJZFVDaGFyXTogMSxcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbHlQYXJzZXJVdGlscyB7XHJcblxyXG4gICAgc3RhdGljIEhlYWRlckVuZFRva2VuID0gJ2VuZF9oZWFkZXInO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZVNlY3Rpb25IZWFkZXIoaGVhZGVyTGluZXMsIGZpZWxkTmFtZUlkTWFwLCBoZWFkZXJTdGFydExpbmUgPSAwKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZExpbmVzID0gW107XHJcblxyXG4gICAgICAgIGxldCBwcm9jZXNzaW5nU2VjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBoZWFkZXJFbmRMaW5lID0gLTE7XHJcbiAgICAgICAgbGV0IHZlcnRleENvdW50ID0gMDtcclxuICAgICAgICBsZXQgZW5kT2ZIZWFkZXIgPSBmYWxzZTtcclxuICAgICAgICBsZXQgc2VjdGlvbk5hbWUgPSBudWxsO1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZElkcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBhbGxGaWVsZE5hbWVzID0gW107XHJcbiAgICAgICAgY29uc3QgdXNlZEZpZWxkTmFtZXMgPSBbXTtcclxuICAgICAgICBjb25zdCBmaWVsZFR5cGVzQnlOYW1lID0ge307XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSBoZWFkZXJTdGFydExpbmU7IGkgPCBoZWFkZXJMaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lID0gaGVhZGVyTGluZXNbaV0udHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdlbGVtZW50JykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9jZXNzaW5nU2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckVuZExpbmUtLTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2luZ1NlY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclN0YXJ0TGluZSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyRW5kTGluZSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUNvbXBvbmVudHMgPSBsaW5lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbGlkQ29tcG9uZW50cyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZUNvbXBvbmVudCBvZiBsaW5lQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmltbWVkQ29tcG9uZW50ID0gbGluZUNvbXBvbmVudC50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmltbWVkQ29tcG9uZW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkQ29tcG9uZW50cysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkQ29tcG9uZW50cyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lID0gdHJpbW1lZENvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsaWRDb21wb25lbnRzID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4Q291bnQgPSBwYXJzZUludCh0cmltbWVkQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ3Byb3BlcnR5JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTWF0Y2ggPSBsaW5lLm1hdGNoKC8oXFx3KylcXHMrKFxcdyspXFxzKyhcXHcrKS8pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFR5cGVTdHIgPSBmaWVsZE1hdGNoWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTWF0Y2hbM107XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsRmllbGROYW1lcy5wdXNoKGZpZWxkTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRJZCA9IGZpZWxkTmFtZUlkTWFwW2ZpZWxkTmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlc0J5TmFtZVtmaWVsZE5hbWVdID0gZmllbGRUeXBlU3RyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IEZpZWxkU2l6ZVN0cmluZ01hcFtmaWVsZFR5cGVTdHJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZElkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZEZpZWxkTmFtZXMucHVzaChmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZElkcy5wdXNoKGZpZWxkSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGVzW2ZpZWxkSWRdID0gZmllbGRUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGluZSA9PT0gUGx5UGFyc2VyVXRpbHMuSGVhZGVyRW5kVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGVuZE9mSGVhZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwcm9jZXNzaW5nU2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkTGluZXMucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgICAgIGhlYWRlckVuZExpbmUrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZmllbGRPZmZzZXRzID0gW107XHJcbiAgICAgICAgbGV0IGJ5dGVzUGVyVmVydGV4ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBmaWVsZE5hbWUgb2YgYWxsRmllbGROYW1lcykge1xyXG4gICAgICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSBmaWVsZFR5cGVzQnlOYW1lW2ZpZWxkTmFtZV07XHJcbiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duKGZpZWxkVHlwZXNCeU5hbWUsIGZpZWxkTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkSWQgPSBmaWVsZE5hbWVJZE1hcFtmaWVsZE5hbWVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkSWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSA9IGJ5dGVzUGVyVmVydGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJ5dGVzUGVyVmVydGV4ICs9IEZpZWxkU2l6ZVtGaWVsZFNpemVTdHJpbmdNYXBbZmllbGRUeXBlXV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcGhlcmljYWxIYXJtb25pY3MgPSB0aGlzLmRlY29kZVNwaGVyaWNhbEhhcm1vbmljc0Zyb21TZWN0aW9uSGVhZGVyKGFsbEZpZWxkTmFtZXMsIGZpZWxkTmFtZUlkTWFwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ2hlYWRlckxpbmVzJzogZXh0cmFjdGVkTGluZXMsXHJcbiAgICAgICAgICAgICdoZWFkZXJTdGFydExpbmUnOiBoZWFkZXJTdGFydExpbmUsXHJcbiAgICAgICAgICAgICdoZWFkZXJFbmRMaW5lJzogaGVhZGVyRW5kTGluZSxcclxuICAgICAgICAgICAgJ2ZpZWxkVHlwZXMnOiBmaWVsZFR5cGVzLFxyXG4gICAgICAgICAgICAnZmllbGRJZHMnOiBmaWVsZElkcyxcclxuICAgICAgICAgICAgJ2ZpZWxkT2Zmc2V0cyc6IGZpZWxkT2Zmc2V0cyxcclxuICAgICAgICAgICAgJ2J5dGVzUGVyVmVydGV4JzogYnl0ZXNQZXJWZXJ0ZXgsXHJcbiAgICAgICAgICAgICd2ZXJ0ZXhDb3VudCc6IHZlcnRleENvdW50LFxyXG4gICAgICAgICAgICAnZGF0YVNpemVCeXRlcyc6IGJ5dGVzUGVyVmVydGV4ICogdmVydGV4Q291bnQsXHJcbiAgICAgICAgICAgICdlbmRPZkhlYWRlcic6IGVuZE9mSGVhZGVyLFxyXG4gICAgICAgICAgICAnc2VjdGlvbk5hbWUnOiBzZWN0aW9uTmFtZSxcclxuICAgICAgICAgICAgJ3NwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSc6IHNwaGVyaWNhbEhhcm1vbmljcy5kZWdyZWUsXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NDb2VmZmljaWVudHNQZXJDaGFubmVsJzogc3BoZXJpY2FsSGFybW9uaWNzLmNvZWZmaWNpZW50c1BlckNoYW5uZWwsXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUxRmllbGRzJzogc3BoZXJpY2FsSGFybW9uaWNzLmRlZ3JlZTFGaWVsZHMsXHJcbiAgICAgICAgICAgICdzcGhlcmljYWxIYXJtb25pY3NEZWdyZWUyRmllbGRzJzogc3BoZXJpY2FsSGFybW9uaWNzLmRlZ3JlZTJGaWVsZHNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZVNwaGVyaWNhbEhhcm1vbmljc0Zyb21TZWN0aW9uSGVhZGVyKGZpZWxkTmFtZXMsIGZpZWxkTmFtZUlkTWFwKSB7XHJcbiAgICAgICAgbGV0IHNwaGVyaWNhbEhhcm1vbmljc0ZpZWxkQ291bnQgPSAwO1xyXG4gICAgICAgIGxldCBjb2VmZmljaWVudHNQZXJDaGFubmVsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBmaWVsZE5hbWUgb2YgZmllbGROYW1lcykge1xyXG4gICAgICAgICAgICBpZiAoZmllbGROYW1lLnN0YXJ0c1dpdGgoJ2ZfcmVzdCcpKSBzcGhlcmljYWxIYXJtb25pY3NGaWVsZENvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvZWZmaWNpZW50c1BlckNoYW5uZWwgPSBzcGhlcmljYWxIYXJtb25pY3NGaWVsZENvdW50IC8gMztcclxuICAgICAgICBsZXQgZGVncmVlID0gMDtcclxuICAgICAgICBpZiAoY29lZmZpY2llbnRzUGVyQ2hhbm5lbCA+PSAzKSBkZWdyZWUgPSAxO1xyXG4gICAgICAgIGlmIChjb2VmZmljaWVudHNQZXJDaGFubmVsID49IDgpIGRlZ3JlZSA9IDI7XHJcblxyXG4gICAgICAgIGxldCBkZWdyZWUxRmllbGRzID0gW107XHJcbiAgICAgICAgbGV0IGRlZ3JlZTJGaWVsZHMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcmdiID0gMDsgcmdiIDwgMzsgcmdiKyspIHtcclxuICAgICAgICAgICAgaWYgKGRlZ3JlZSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZTFGaWVsZHMucHVzaChmaWVsZE5hbWVJZE1hcFsnZl9yZXN0XycgKyAoaSArIGNvZWZmaWNpZW50c1BlckNoYW5uZWwgKiByZ2IpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRlZ3JlZSA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZTJGaWVsZHMucHVzaChmaWVsZE5hbWVJZE1hcFsnZl9yZXN0XycgKyAoaSArIGNvZWZmaWNpZW50c1BlckNoYW5uZWwgKiByZ2IgKyAzKV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAnZGVncmVlJzogZGVncmVlLFxyXG4gICAgICAgICAgICAnY29lZmZpY2llbnRzUGVyQ2hhbm5lbCc6IGNvZWZmaWNpZW50c1BlckNoYW5uZWwsXHJcbiAgICAgICAgICAgICdkZWdyZWUxRmllbGRzJzogZGVncmVlMUZpZWxkcyxcclxuICAgICAgICAgICAgJ2RlZ3JlZTJGaWVsZHMnOiBkZWdyZWUyRmllbGRzXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0SGVhZGVyU2VjdGlvbk5hbWVzKGhlYWRlckxpbmVzKSB7XHJcbiAgICAgICAgY29uc3Qgc2VjdGlvbk5hbWVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaGVhZGVyTGluZSBvZiBoZWFkZXJMaW5lcykge1xyXG4gICAgICAgICAgICBpZiAoaGVhZGVyTGluZS5zdGFydHNXaXRoKCdlbGVtZW50JykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVDb21wb25lbnRzID0gaGVhZGVyTGluZS5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbGlkQ29tcG9uZW50cyA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lQ29tcG9uZW50IG9mIGxpbmVDb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpbW1lZENvbXBvbmVudCA9IGxpbmVDb21wb25lbnQudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmltbWVkQ29tcG9uZW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRDb21wb25lbnRzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZENvbXBvbmVudHMgPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lcy5wdXNoKHRyaW1tZWRDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWN0aW9uTmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNoZWNrVGV4dEZvckVuZEhlYWRlcihlbmRIZWFkZXJUZXN0VGV4dCkge1xyXG4gICAgICAgIGlmIChlbmRIZWFkZXJUZXN0VGV4dC5pbmNsdWRlcyhQbHlQYXJzZXJVdGlscy5IZWFkZXJFbmRUb2tlbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY2hlY2tCdWZmZXJGb3JFbmRIZWFkZXIoYnVmZmVyLCBzZWFyY2hPZnNldCwgY2h1bmtTaXplLCBkZWNvZGVyKSB7XHJcbiAgICAgICAgY29uc3QgZW5kSGVhZGVyVGVzdENodW5rID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBNYXRoLm1heCgwLCBzZWFyY2hPZnNldCAtIGNodW5rU2l6ZSksIGNodW5rU2l6ZSk7XHJcbiAgICAgICAgY29uc3QgZW5kSGVhZGVyVGVzdFRleHQgPSBkZWNvZGVyLmRlY29kZShlbmRIZWFkZXJUZXN0Q2h1bmspO1xyXG4gICAgICAgIHJldHVybiBQbHlQYXJzZXJVdGlscy5jaGVja1RleHRGb3JFbmRIZWFkZXIoZW5kSGVhZGVyVGVzdFRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBleHRyYWN0SGVhZGVyRnJvbUJ1ZmZlclRvVGV4dChwbHlCdWZmZXIpIHtcclxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcbiAgICAgICAgbGV0IGhlYWRlck9mZnNldCA9IDA7XHJcbiAgICAgICAgbGV0IGhlYWRlclRleHQgPSAnJztcclxuICAgICAgICBjb25zdCByZWFkQ2h1bmtTaXplID0gMTAwO1xyXG5cclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoaGVhZGVyT2Zmc2V0ICsgcmVhZENodW5rU2l6ZSA+PSBwbHlCdWZmZXIuYnl0ZUxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmQgb2YgZmlsZSByZWFjaGVkIHdoaWxlIHNlYXJjaGluZyBmb3IgZW5kIG9mIGhlYWRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckNodW5rID0gbmV3IFVpbnQ4QXJyYXkocGx5QnVmZmVyLCBoZWFkZXJPZmZzZXQsIHJlYWRDaHVua1NpemUpO1xyXG4gICAgICAgICAgICBoZWFkZXJUZXh0ICs9IGRlY29kZXIuZGVjb2RlKGhlYWRlckNodW5rKTtcclxuICAgICAgICAgICAgaGVhZGVyT2Zmc2V0ICs9IHJlYWRDaHVua1NpemU7XHJcblxyXG4gICAgICAgICAgICBpZiAoUGx5UGFyc2VyVXRpbHMuY2hlY2tCdWZmZXJGb3JFbmRIZWFkZXIocGx5QnVmZmVyLCBoZWFkZXJPZmZzZXQsIHJlYWRDaHVua1NpemUgKiAyLCBkZWNvZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoZWFkZXJUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRIZWFkZXJGcm9tQnVmZmVyKHBseUJ1ZmZlcikge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcclxuICAgICAgICBsZXQgaGVhZGVyT2Zmc2V0ID0gMDtcclxuICAgICAgICBsZXQgaGVhZGVyVGV4dCA9ICcnO1xyXG4gICAgICAgIGNvbnN0IHJlYWRDaHVua1NpemUgPSAxMDA7XHJcblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJPZmZzZXQgKyByZWFkQ2h1bmtTaXplID49IHBseUJ1ZmZlci5ieXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VuZCBvZiBmaWxlIHJlYWNoZWQgd2hpbGUgc2VhcmNoaW5nIGZvciBlbmQgb2YgaGVhZGVyJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyQ2h1bmsgPSBuZXcgVWludDhBcnJheShwbHlCdWZmZXIsIGhlYWRlck9mZnNldCwgcmVhZENodW5rU2l6ZSk7XHJcbiAgICAgICAgICAgIGhlYWRlclRleHQgKz0gZGVjb2Rlci5kZWNvZGUoaGVhZGVyQ2h1bmspO1xyXG4gICAgICAgICAgICBoZWFkZXJPZmZzZXQgKz0gcmVhZENodW5rU2l6ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChQbHlQYXJzZXJVdGlscy5jaGVja0J1ZmZlckZvckVuZEhlYWRlcihwbHlCdWZmZXIsIGhlYWRlck9mZnNldCwgcmVhZENodW5rU2l6ZSAqIDIsIGRlY29kZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNvbnZlcnRIZWFkZXJUZXh0VG9MaW5lcyhoZWFkZXJUZXh0KSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyTGluZXMgPSBoZWFkZXJUZXh0LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBjb25zdCBwcnVuZWRMaW5lcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhZGVyTGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZSA9IGhlYWRlckxpbmVzW2ldLnRyaW0oKTtcclxuICAgICAgICAgICAgcHJ1bmVkTGluZXMucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgaWYgKGxpbmUgPT09IFBseVBhcnNlclV0aWxzLkhlYWRlckVuZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJ1bmVkTGluZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRldGVybWluZUhlYWRlckZvcm1hdEZyb21IZWFkZXJUZXh0KF9oZWFkZXJUZXh0KSB7XHJcbiAgICAgICAgLy8gU2ltcGxpZmllZCAtIEZMQU1FIGF2YXRhcnMgYWx3YXlzIHVzZSBJTlJJQVYxIGZvcm1hdFxyXG4gICAgICAgIHJldHVybiBQbHlGb3JtYXQuSU5SSUFWMTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGV0ZXJtaW5lSGVhZGVyRm9ybWF0RnJvbVBseUJ1ZmZlcihwbHlCdWZmZXIpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJ0VGV4dCA9IFBseVBhcnNlclV0aWxzLmV4dHJhY3RIZWFkZXJGcm9tQnVmZmVyVG9UZXh0KHBseUJ1ZmZlcik7XHJcbiAgICAgICAgcmV0dXJuIFBseVBhcnNlclV0aWxzLmRldGVybWluZUhlYWRlckZvcm1hdEZyb21IZWFkZXJUZXh0KGhlYWRlcnRUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVhZFZlcnRleCh2ZXJ0ZXhEYXRhLCBoZWFkZXIsIHJvdywgZGF0YU9mZnNldCwgZmllbGRzVG9SZWFkLCByYXdWZXJ0ZXgsIG5vcm1hbGl6ZSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSByb3cgKiBoZWFkZXIuYnl0ZXNQZXJWZXJ0ZXggKyBkYXRhT2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IGZpZWxkT2Zmc2V0cyA9IGhlYWRlci5maWVsZE9mZnNldHM7XHJcbiAgICAgICAgY29uc3QgZmllbGRUeXBlcyA9IGhlYWRlci5maWVsZFR5cGVzO1xyXG4gICAgICAgIGZvciAobGV0IGZpZWxkSWQgb2YgZmllbGRzVG9SZWFkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IGZpZWxkVHlwZXNbZmllbGRJZF07XHJcbiAgICAgICAgICAgIGlmIChmaWVsZFR5cGUgPT09IEZpZWxkU2l6ZUlkRmxvYXQpIHtcclxuICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0RmxvYXQzMihvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0sIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkVHlwZSA9PT0gRmllbGRTaXplSWRTaG9ydCkge1xyXG4gICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRJbnQxNihvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0sIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkVHlwZSA9PT0gRmllbGRTaXplSWRVU2hvcnQpIHtcclxuICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0VWludDE2KG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGRUeXBlID09PSBGaWVsZFNpemVJZEludCkge1xyXG4gICAgICAgICAgICAgICAgcmF3VmVydGV4W2ZpZWxkSWRdID0gdmVydGV4RGF0YS5nZXRJbnQzMihvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0sIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkVHlwZSA9PT0gRmllbGRTaXplSWRVSW50KSB7XHJcbiAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldFVpbnQzMihvZmZzZXQgKyBmaWVsZE9mZnNldHNbZmllbGRJZF0sIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpZWxkVHlwZSA9PT0gRmllbGRTaXplSWRVQ2hhcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhd1ZlcnRleFtmaWVsZElkXSA9IHZlcnRleERhdGEuZ2V0VWludDgob2Zmc2V0ICsgZmllbGRPZmZzZXRzW2ZpZWxkSWRdKSAvIDI1NS4wO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByYXdWZXJ0ZXhbZmllbGRJZF0gPSB2ZXJ0ZXhEYXRhLmdldFVpbnQ4KG9mZnNldCArIGZpZWxkT2Zmc2V0c1tmaWVsZElkXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIElOUklBVjFQbHlQYXJzZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogSW1wb3J0IHBhdGhzIGFkanVzdGVkIGZvciBnc3BsYXQtZmxhbWUtYXZhdGFyIHBhY2thZ2Ugc3RydWN0dXJlLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFF1YXRlcm5pb24gfSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkgfSBmcm9tICcuLi9idWZmZXJzL1VuY29tcHJlc3NlZFNwbGF0QXJyYXkuanMnO1xyXG5pbXBvcnQgeyBTcGxhdEJ1ZmZlciB9IGZyb20gJy4uL2J1ZmZlcnMvU3BsYXRCdWZmZXIuanMnO1xyXG5pbXBvcnQgeyBQbHlQYXJzZXJVdGlscyB9IGZyb20gJy4vUGx5UGFyc2VyVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL3V0aWxzL1V0aWwuanMnO1xyXG5cclxuY29uc3QgQmFzZUZpZWxkTmFtZXNUb1JlYWQgPSBbJ3NjYWxlXzAnLCAnc2NhbGVfMScsICdzY2FsZV8yJywgJ3JvdF8wJywgJ3JvdF8xJywgJ3JvdF8yJywgJ3JvdF8zJywgJ3gnLCAneScsICd6JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZfZGNfMCcsICdmX2RjXzEnLCAnZl9kY18yJywgJ29wYWNpdHknLCAncmVkJywgJ2dyZWVuJywgJ2JsdWUnLCAnZl9yZXN0XzAnXTtcclxuXHJcbmNvbnN0IEJhc2VGaWVsZHNUb1JlYWRJbmRleGVzID0gQmFzZUZpZWxkTmFtZXNUb1JlYWQubWFwKChlLCBpKSA9PiBpKTtcclxuXHJcbmNvbnN0IFtcclxuICAgICAgICBTQ0FMRV8wLCBTQ0FMRV8xLCBTQ0FMRV8yLCBST1RfMCwgUk9UXzEsIFJPVF8yLCBST1RfMywgWCwgWSwgWiwgRl9EQ18wLCBGX0RDXzEsIEZfRENfMiwgT1BBQ0lUWSwgUkVELCBHUkVFTiwgQkxVRSwgRl9SRVNUXzBcclxuICAgICAgXSA9IEJhc2VGaWVsZHNUb1JlYWRJbmRleGVzO1xyXG5cclxuZXhwb3J0IGNsYXNzIElOUklBVjFQbHlQYXJzZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucGx5UGFyc2VydXRpbHMgPSBuZXcgUGx5UGFyc2VyVXRpbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWNvZGVIZWFkZXJMaW5lcyhoZWFkZXJMaW5lcykge1xyXG5cclxuICAgICAgICBsZXQgc2hMaW5lQ291bnQgPSAwO1xyXG4gICAgICAgIGhlYWRlckxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ2ZfcmVzdF8nKSkgc2hMaW5lQ291bnQrKztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHNoRmllbGRzVG9SZWFkQ291bnQgPSAwO1xyXG4gICAgICAgIGlmIChzaExpbmVDb3VudCA+PSA0NSkge1xyXG4gICAgICAgICAgICBzaEZpZWxkc1RvUmVhZENvdW50ID0gNDU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzaExpbmVDb3VudCA+PSAyNCkge1xyXG4gICAgICAgICAgICBzaEZpZWxkc1RvUmVhZENvdW50ID0gMjQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzaExpbmVDb3VudCA+PSA5KSB7XHJcbiAgICAgICAgICAgIHNoRmllbGRzVG9SZWFkQ291bnQgPSA5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc2hGaWVsZEluZGV4ZXNUb01hcCA9IEFycmF5LmZyb20oQXJyYXkoTWF0aC5tYXgoc2hGaWVsZHNUb1JlYWRDb3VudCAtIDEsIDApKSk7XHJcbiAgICAgICAgbGV0IHNoUmVtYWluaW5nRmllbGROYW1lc1RvUmVhZCA9IHNoRmllbGRJbmRleGVzVG9NYXAubWFwKChlbGVtZW50LCBpbmRleCkgPT4gYGZfcmVzdF8ke2luZGV4ICsgMX1gKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmllbGROYW1lc1RvUmVhZCA9IFsuLi5CYXNlRmllbGROYW1lc1RvUmVhZCwgLi4uc2hSZW1haW5pbmdGaWVsZE5hbWVzVG9SZWFkXTtcclxuICAgICAgICBjb25zdCBmaWVsZHNUb1JlYWRJbmRleGVzID0gZmllbGROYW1lc1RvUmVhZC5tYXAoKGUsIGkpID0+IGkpO1xyXG5cclxuICAgICAgICBjb25zdCBmaWVsZE5hbWVJZE1hcCA9IGZpZWxkc1RvUmVhZEluZGV4ZXMucmVkdWNlKChhY2MsIGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgYWNjW2ZpZWxkTmFtZXNUb1JlYWRbZWxlbWVudF1dID0gZWxlbWVudDtcclxuICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5wbHlQYXJzZXJ1dGlscy5kZWNvZGVTZWN0aW9uSGVhZGVyKGhlYWRlckxpbmVzLCBmaWVsZE5hbWVJZE1hcCwgMCk7XHJcbiAgICAgICAgaGVhZGVyLnNwbGF0Q291bnQgPSBoZWFkZXIudmVydGV4Q291bnQ7XHJcbiAgICAgICAgaGVhZGVyLmJ5dGVzUGVyU3BsYXQgPSBoZWFkZXIuYnl0ZXNQZXJWZXJ0ZXg7XHJcbiAgICAgICAgaGVhZGVyLmZpZWxkc1RvUmVhZEluZGV4ZXMgPSBmaWVsZHNUb1JlYWRJbmRleGVzO1xyXG4gICAgICAgIHJldHVybiBoZWFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZGVjb2RlSGVhZGVyVGV4dChoZWFkZXJUZXh0KSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyTGluZXMgPSBQbHlQYXJzZXJVdGlscy5jb252ZXJ0SGVhZGVyVGV4dFRvTGluZXMoaGVhZGVyVGV4dCk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5kZWNvZGVIZWFkZXJMaW5lcyhoZWFkZXJMaW5lcyk7XHJcbiAgICAgICAgaGVhZGVyLmhlYWRlclRleHQgPSBoZWFkZXJUZXh0O1xyXG4gICAgICAgIGhlYWRlci5oZWFkZXJTaXplQnl0ZXMgPSBoZWFkZXJUZXh0LmluZGV4T2YoUGx5UGFyc2VyVXRpbHMuSGVhZGVyRW5kVG9rZW4pICsgUGx5UGFyc2VyVXRpbHMuSGVhZGVyRW5kVG9rZW4ubGVuZ3RoICsgMTtcclxuICAgICAgICByZXR1cm4gaGVhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZUhlYWRlckZyb21CdWZmZXIocGx5QnVmZmVyKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyVGV4dCA9IHRoaXMucGx5UGFyc2VydXRpbHMucmVhZEhlYWRlckZyb21CdWZmZXIocGx5QnVmZmVyKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kZWNvZGVIZWFkZXJUZXh0KGhlYWRlclRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRTcGxhdERhdGEocGx5QnVmZmVyLCBoZWFkZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGFWaWV3KHBseUJ1ZmZlciwgaGVhZGVyLmhlYWRlclNpemVCeXRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QnVmZmVyU2VjdGlvbihoZWFkZXIsIGZyb21TcGxhdCwgdG9TcGxhdCwgc3BsYXREYXRhLCBzcGxhdERhdGFPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvQnVmZmVyLCB0b09mZnNldCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgY29uc3Qgb3V0Qnl0ZXNQZXJTcGxhdCA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzWzBdLlNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXNbb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXS5CeXRlc1BlclNwbGF0O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbVNwbGF0OyBpIDw9IHRvU3BsYXQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTcGxhdCA9IElOUklBVjFQbHlQYXJzZXIucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0KHNwbGF0RGF0YSwgaSwgaGVhZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0RGF0YU9mZnNldCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgY29uc3Qgb3V0QmFzZSA9IGkgKiBvdXRCeXRlc1BlclNwbGF0ICsgdG9PZmZzZXQ7XHJcbiAgICAgICAgICAgIFNwbGF0QnVmZmVyLndyaXRlU3BsYXREYXRhVG9TZWN0aW9uQnVmZmVyKHBhcnNlZFNwbGF0LCB0b0J1ZmZlciwgb3V0QmFzZSwgMCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QXJyYXlTZWN0aW9uKGhlYWRlciwgZnJvbVNwbGF0LCB0b1NwbGF0LCBzcGxhdERhdGEsIHNwbGF0RGF0YU9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdEFycmF5LCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4ob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gZnJvbVNwbGF0OyBpIDw9IHRvU3BsYXQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTcGxhdCA9IElOUklBVjFQbHlQYXJzZXIucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0KHNwbGF0RGF0YSwgaSwgaGVhZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0RGF0YU9mZnNldCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgc3BsYXRBcnJheS5hZGRTcGxhdChwYXJzZWRTcGxhdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRlY29kZVNlY3Rpb25TcGxhdERhdGEoc2VjdGlvblNwbGF0RGF0YSwgc3BsYXRDb3VudCwgc2VjdGlvbkhlYWRlciwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKSB7XHJcbiAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gTWF0aC5taW4ob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzZWN0aW9uSGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgY29uc3Qgc3BsYXRBcnJheSA9IG5ldyBVbmNvbXByZXNzZWRTcGxhdEFycmF5KG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgc3BsYXRDb3VudDsgcm93KyspIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3BsYXQgPSBJTlJJQVYxUGx5UGFyc2VyLnBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdChzZWN0aW9uU3BsYXREYXRhLCByb3csIHNlY3Rpb25IZWFkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgc3BsYXRBcnJheS5hZGRTcGxhdChuZXdTcGxhdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzcGxhdEFycmF5O1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBwYXJzZVRvVW5jb21wcmVzc2VkU3BsYXQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgbGV0IHJhd1NwbGF0ID0gW107XHJcbiAgICAgICAgY29uc3QgdGVtcFJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuXHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1ggPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5YO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9ZID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuWTtcclxuICAgICAgICBjb25zdCBPRkZTRVRfWiA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlo7XHJcblxyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9TQ0FMRTAgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5TQ0FMRTA7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1NDQUxFMSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlNDQUxFMTtcclxuICAgICAgICBjb25zdCBPRkZTRVRfU0NBTEUyID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuU0NBTEUyO1xyXG5cclxuICAgICAgICBjb25zdCBPRkZTRVRfUk9UQVRJT04wID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuUk9UQVRJT04wO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9ST1RBVElPTjEgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5ST1RBVElPTjE7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX1JPVEFUSU9OMiA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULlJPVEFUSU9OMjtcclxuICAgICAgICBjb25zdCBPRkZTRVRfUk9UQVRJT04zID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuUk9UQVRJT04zO1xyXG5cclxuICAgICAgICBjb25zdCBPRkZTRVRfRkRDMCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULkZEQzA7XHJcbiAgICAgICAgY29uc3QgT0ZGU0VUX0ZEQzEgPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5GREMxO1xyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9GREMyID0gVW5jb21wcmVzc2VkU3BsYXRBcnJheS5PRkZTRVQuRkRDMjtcclxuICAgICAgICBjb25zdCBPRkZTRVRfT1BBQ0lUWSA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuT0ZGU0VULk9QQUNJVFk7XHJcblxyXG4gICAgICAgIGNvbnN0IE9GRlNFVF9GUkMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0NTsgaSsrKSB7XHJcbiAgICAgICAgICAgIE9GRlNFVF9GUkNbaV0gPSBVbmNvbXByZXNzZWRTcGxhdEFycmF5Lk9GRlNFVC5GUkMwICsgaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzcGxhdERhdGEsIHJvdywgaGVhZGVyLCBzcGxhdERhdGFPZmZzZXQgPSAwLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSAwKSB7XHJcbiAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IE1hdGgubWluKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSwgaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgICAgIElOUklBVjFQbHlQYXJzZXIucmVhZFNwbGF0KHNwbGF0RGF0YSwgaGVhZGVyLCByb3csIHNwbGF0RGF0YU9mZnNldCwgcmF3U3BsYXQpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTcGxhdCA9IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkuY3JlYXRlU3BsYXQob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgaWYgKHJhd1NwbGF0W1NDQUxFXzBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9TQ0FMRTBdID0gTWF0aC5leHAocmF3U3BsYXRbU0NBTEVfMF0pO1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1NDQUxFMV0gPSBNYXRoLmV4cChyYXdTcGxhdFtTQ0FMRV8xXSk7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfU0NBTEUyXSA9IE1hdGguZXhwKHJhd1NwbGF0W1NDQUxFXzJdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9TQ0FMRTBdID0gMC4wMTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9TQ0FMRTFdID0gMC4wMTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9TQ0FMRTJdID0gMC4wMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJhd1NwbGF0W0ZfRENfMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgU0hfQzAgPSAwLjI4MjA5NDc5MTc3Mzg3ODE0O1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzBdID0gcmF3U3BsYXRbRl9EQ18wXSAqIDI1NTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMxXSA9IHJhd1NwbGF0W0ZfRENfMV0gKiAyNTU7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMl0gPSByYXdTcGxhdFtGX0RDXzJdICogMjU1O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJhd1NwbGF0W1JFRF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzBdID0gcmF3U3BsYXRbUkVEXSAqIDI1NTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMxXSA9IHJhd1NwbGF0W0dSRUVOXSAqIDI1NTtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMyXSA9IHJhd1NwbGF0W0JMVUVdICogMjU1O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzBdID0gMDtcclxuICAgICAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMxXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMl0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmF3U3BsYXRbT1BBQ0lUWV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX09QQUNJVFldID0gKDEgLyAoMSArIE1hdGguZXhwKC1yYXdTcGxhdFtPUEFDSVRZXSkpKSAqIDI1NTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZEQzBdID0gY2xhbXAoTWF0aC5mbG9vcihuZXdTcGxhdFtPRkZTRVRfRkRDMF0pLCAwLCAyNTUpO1xyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRkRDMV0gPSBjbGFtcChNYXRoLmZsb29yKG5ld1NwbGF0W09GRlNFVF9GREMxXSksIDAsIDI1NSk7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9GREMyXSA9IGNsYW1wKE1hdGguZmxvb3IobmV3U3BsYXRbT0ZGU0VUX0ZEQzJdKSwgMCwgMjU1KTtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX09QQUNJVFldID0gY2xhbXAoTWF0aC5mbG9vcihuZXdTcGxhdFtPRkZTRVRfT1BBQ0lUWV0pLCAwLCAyNTUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmF3U3BsYXRbRl9SRVNUXzBdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfRlJDW2ldXSA9IHJhd1NwbGF0W2hlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUxRmllbGRzW2ldXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA+PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX0ZSQ1s5ICsgaV1dID0gcmF3U3BsYXRbaGVhZGVyLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTJGaWVsZHNbaV1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0ZW1wUm90YXRpb24uc2V0KHJhd1NwbGF0W1JPVF8wXSwgcmF3U3BsYXRbUk9UXzFdLCByYXdTcGxhdFtST1RfMl0sIHJhd1NwbGF0W1JPVF8zXSk7XHJcbiAgICAgICAgICAgIHRlbXBSb3RhdGlvbi5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9ST1RBVElPTjBdID0gdGVtcFJvdGF0aW9uLng7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9ST1RBVElPTjFdID0gdGVtcFJvdGF0aW9uLnk7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9ST1RBVElPTjJdID0gdGVtcFJvdGF0aW9uLno7XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9ST1RBVElPTjNdID0gdGVtcFJvdGF0aW9uLnc7XHJcblxyXG4gICAgICAgICAgICBuZXdTcGxhdFtPRkZTRVRfWF0gPSByYXdTcGxhdFtYXTtcclxuICAgICAgICAgICAgbmV3U3BsYXRbT0ZGU0VUX1ldID0gcmF3U3BsYXRbWV07XHJcbiAgICAgICAgICAgIG5ld1NwbGF0W09GRlNFVF9aXSA9IHJhd1NwbGF0W1pdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ld1NwbGF0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfSgpO1xyXG5cclxuICAgIHN0YXRpYyByZWFkU3BsYXQoc3BsYXREYXRhLCBoZWFkZXIsIHJvdywgZGF0YU9mZnNldCwgcmF3U3BsYXQpIHtcclxuICAgICAgICByZXR1cm4gUGx5UGFyc2VyVXRpbHMucmVhZFZlcnRleChzcGxhdERhdGEsIGhlYWRlciwgcm93LCBkYXRhT2Zmc2V0LCBoZWFkZXIuZmllbGRzVG9SZWFkSW5kZXhlcywgcmF3U3BsYXQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhcnNlVG9VbmNvbXByZXNzZWRTcGxhdEFycmF5KHBseUJ1ZmZlciwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlID0gMCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuZGVjb2RlSGVhZGVyRnJvbUJ1ZmZlcihwbHlCdWZmZXIpO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSBoZWFkZXIuc3BsYXRDb3VudDtcclxuICAgICAgICBjb25zdCBzcGxhdERhdGEgPSB0aGlzLmZpbmRTcGxhdERhdGEocGx5QnVmZmVyLCBoZWFkZXIpO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0QXJyYXkgPSB0aGlzLmRlY29kZVNlY3Rpb25TcGxhdERhdGEoc3BsYXREYXRhLCBzcGxhdENvdW50LCBoZWFkZXIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICAgICAgcmV0dXJuIHNwbGF0QXJyYXk7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIFBseVBhcnNlclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBTaW1wbGlmaWVkIGZvciBGTEFNRSBhdmF0YXIgLSBvbmx5IHN1cHBvcnRzIElOUklBVjEgUExZIGZvcm1hdC5cclxuICovXHJcblxyXG5pbXBvcnQgeyBJTlJJQVYxUGx5UGFyc2VyIH0gZnJvbSAnLi9JTlJJQVYxUGx5UGFyc2VyLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQbHlQYXJzZXIge1xyXG5cclxuICAgIHN0YXRpYyBwYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRBcnJheShwbHlCdWZmZXIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDApIHtcclxuICAgICAgICAvLyBGTEFNRSBhdmF0YXJzIHVzZSBJTlJJQVYxIFBMWSBmb3JtYXRcclxuICAgICAgICByZXR1cm4gbmV3IElOUklBVjFQbHlQYXJzZXIoKS5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRBcnJheShwbHlCdWZmZXIsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSk7XHJcbiAgICB9XHJcblxyXG59IiwiLyoqXHJcbiAqIFBseUxvYWRlciAtIExvYWRzIGFuZCBwYXJzZXMgUExZIGZvcm1hdCBHYXVzc2lhbiBTcGxhdCBmaWxlc1xyXG4gKlxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICpcclxuICogU2ltcGxpZmllZCBmb3IgRkxBTUUgYXZhdGFyIC0gb25seSBzdXBwb3J0cyBJTlJJQVYxIFBMWSBmb3JtYXQuXHJcbiAqIFByb3ZpZGVzIGJvdGggcHJvZ3Jlc3NpdmUgc3RyZWFtaW5nIGFuZCBmaWxlLWJhc2VkIGxvYWRpbmcuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgU3BsYXRCdWZmZXIgfSBmcm9tICcuLi9idWZmZXJzL1NwbGF0QnVmZmVyLmpzJztcclxuaW1wb3J0IHsgVW5jb21wcmVzc2VkU3BsYXRBcnJheSB9IGZyb20gJy4uL2J1ZmZlcnMvVW5jb21wcmVzc2VkU3BsYXRBcnJheS5qcyc7XHJcbmltcG9ydCB7IFNwbGF0QnVmZmVyR2VuZXJhdG9yIH0gZnJvbSAnLi4vYnVmZmVycy9TcGxhdEJ1ZmZlckdlbmVyYXRvci5qcyc7XHJcbmltcG9ydCB7IFBseVBhcnNlciB9IGZyb20gJy4vUGx5UGFyc2VyLmpzJztcclxuaW1wb3J0IHsgUGx5UGFyc2VyVXRpbHMgfSBmcm9tICcuL1BseVBhcnNlclV0aWxzLmpzJztcclxuaW1wb3J0IHsgSU5SSUFWMVBseVBhcnNlciB9IGZyb20gJy4vSU5SSUFWMVBseVBhcnNlci5qcyc7XHJcbmltcG9ydCB7IENvbnN0YW50cywgSW50ZXJuYWxMb2FkVHlwZSwgTG9hZGVyU3RhdHVzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHsgZmV0Y2hXaXRoUHJvZ3Jlc3MsIGRlbGF5ZWRFeGVjdXRlLCBuYXRpdmVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMgfSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBOZXR3b3JrRXJyb3IsIFBhcnNlRXJyb3IsIEFzc2V0TG9hZEVycm9yIH0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuaW1wb3J0IHsgdmFsaWRhdGVVcmwsIHZhbGlkYXRlQ2FsbGJhY2ssIHZhbGlkYXRlQXJyYXlCdWZmZXIgfSBmcm9tICcuLi91dGlscy9WYWxpZGF0aW9uVXRpbHMuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdQbHlMb2FkZXInKTtcclxuXHJcbi8qKlxyXG4gKiBTdG9yZSBkYXRhIGNodW5rcyBpbnRvIGEgc2luZ2xlIEFycmF5QnVmZmVyXHJcbiAqXHJcbiAqIENvbWJpbmVzIG11bHRpcGxlIGRvd25sb2FkZWQgY2h1bmtzIGludG8gYSBjb250aWd1b3VzIGJ1ZmZlciBmb3IgcGFyc2luZy5cclxuICogUmVhbGxvY2F0ZXMgYnVmZmVyIGlmIG5lZWRlZCB0byBmaXQgYWxsIGNodW5rcy5cclxuICpcclxuICogQHByaXZhdGVcclxuICogQHBhcmFtIHtBcnJheTx7ZGF0YTogVWludDhBcnJheSwgc2l6ZUJ5dGVzOiBudW1iZXJ9Pn0gY2h1bmtzIC0gQXJyYXkgb2YgZGF0YSBjaHVua3NcclxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gW2J1ZmZlcl0gLSBFeGlzdGluZyBidWZmZXIgdG8gcmV1c2UgKHdpbGwgcmVhbGxvY2F0ZSBpZiB0b28gc21hbGwpXHJcbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gQnVmZmVyIGNvbnRhaW5pbmcgYWxsIGNodW5rIGRhdGFcclxuICovXHJcbmZ1bmN0aW9uIHN0b3JlQ2h1bmtzSW5CdWZmZXIoY2h1bmtzLCBidWZmZXIpIHtcclxuICAgIGxldCBpbkJ5dGVzID0gMDtcclxuICAgIGZvciAobGV0IGNodW5rIG9mIGNodW5rcykge1xyXG4gICAgICAgIGluQnl0ZXMgKz0gY2h1bmsuc2l6ZUJ5dGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlYWxsb2NhdGUgaWYgYnVmZmVyIGRvZXNuJ3QgZXhpc3Qgb3IgaXMgdG9vIHNtYWxsXHJcbiAgICBpZiAoIWJ1ZmZlciB8fCBidWZmZXIuYnl0ZUxlbmd0aCA8IGluQnl0ZXMpIHtcclxuICAgICAgICBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoaW5CeXRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29weSBhbGwgY2h1bmtzIGludG8gYnVmZmVyIHNlcXVlbnRpYWxseVxyXG4gICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICBmb3IgKGxldCBjaHVuayBvZiBjaHVua3MpIHtcclxuICAgICAgICBuZXcgVWludDhBcnJheShidWZmZXIsIG9mZnNldCwgY2h1bmsuc2l6ZUJ5dGVzKS5zZXQoY2h1bmsuZGF0YSk7XHJcbiAgICAgICAgb2Zmc2V0ICs9IGNodW5rLnNpemVCeXRlcztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYnVmZmVyO1xyXG59XHJcblxyXG4vKipcclxuICogRmluYWxpemUgc3BsYXQgZGF0YSBpbnRvIGEgU3BsYXRCdWZmZXJcclxuICpcclxuICogQ29udmVydHMgVW5jb21wcmVzc2VkU3BsYXRBcnJheSBpbnRvIGZpbmFsIG9wdGltaXplZCBTcGxhdEJ1ZmZlciBmb3JtYXQuXHJcbiAqIEFwcGxpZXMgY29tcHJlc3Npb24gYW5kIG9wdGltaXphdGlvbiBpZiByZXF1ZXN0ZWQuXHJcbiAqXHJcbiAqIEBwcml2YXRlXHJcbiAqIEBwYXJhbSB7VW5jb21wcmVzc2VkU3BsYXRBcnJheX0gc3BsYXREYXRhIC0gUGFyc2VkIHNwbGF0IGRhdGFcclxuICogQHBhcmFtIHtib29sZWFufSBvcHRpbWl6ZVNwbGF0RGF0YSAtIFdoZXRoZXIgdG8gb3B0aW1pemUvY29tcHJlc3MgdGhlIGRhdGFcclxuICogQHBhcmFtIHtudW1iZXJ9IG1pbmltdW1BbHBoYSAtIE1pbmltdW0gYWxwaGEgdGhyZXNob2xkIGZvciBzcGxhdCBjdWxsaW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb21wcmVzc2lvbkxldmVsIC0gQ29tcHJlc3Npb24gbGV2ZWwgKDAtMilcclxuICogQHBhcmFtIHtudW1iZXJ9IHNlY3Rpb25TaXplIC0gU2VjdGlvbiBzaXplIGZvciBwYXJ0aXRpb25pbmdcclxuICogQHBhcmFtIHtWZWN0b3IzfSBzY2VuZUNlbnRlciAtIENlbnRlciBwb2ludCBvZiB0aGUgc2NlbmVcclxuICogQHBhcmFtIHtudW1iZXJ9IGJsb2NrU2l6ZSAtIEJsb2NrIHNpemUgZm9yIHNwYXRpYWwgcGFydGl0aW9uaW5nXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBidWNrZXRTaXplIC0gQnVja2V0IHNpemUgZm9yIHNvcnRpbmdcclxuICogQHJldHVybnMge1NwbGF0QnVmZmVyfSBGaW5hbGl6ZWQgc3BsYXQgYnVmZmVyIHJlYWR5IGZvciByZW5kZXJpbmdcclxuICogQHRocm93cyB7UGFyc2VFcnJvcn0gSWYgc3BsYXQgZGF0YSBpcyBpbnZhbGlkIG9yIGZpbmFsaXphdGlvbiBmYWlsc1xyXG4gKi9cclxuZnVuY3Rpb24gZmluYWxpemVTcGxhdERhdGEoc3BsYXREYXRhLCBvcHRpbWl6ZVNwbGF0RGF0YSwgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLCBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAob3B0aW1pemVTcGxhdERhdGEpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXJHZW5lcmF0b3IgPSBTcGxhdEJ1ZmZlckdlbmVyYXRvci5nZXRTdGFuZGFyZEdlbmVyYXRvcihcclxuICAgICAgICAgICAgICAgIG1pbmltdW1BbHBoYSxcclxuICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uU2l6ZSxcclxuICAgICAgICAgICAgICAgIHNjZW5lQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgYmxvY2tTaXplLFxyXG4gICAgICAgICAgICAgICAgYnVja2V0U2l6ZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gc3BsYXRCdWZmZXJHZW5lcmF0b3IuZ2VuZXJhdGVGcm9tVW5jb21wcmVzc2VkU3BsYXRBcnJheShzcGxhdERhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTcGxhdEJ1ZmZlci5nZW5lcmF0ZUZyb21VbmNvbXByZXNzZWRTcGxhdEFycmF5cyhbc3BsYXREYXRhXSwgbWluaW11bUFscGhhLCAwLCBuZXcgVmVjdG9yMygpKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICBgRmFpbGVkIHRvIGZpbmFsaXplIHNwbGF0IGRhdGE6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAnc3BsYXREYXRhJyxcclxuICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUGx5TG9hZGVyIC0gTG9hZHMgYW5kIHBhcnNlcyBQTFkgZm9ybWF0IEdhdXNzaWFuIFNwbGF0IGZpbGVzXHJcbiAqXHJcbiAqIFN1cHBvcnRzIGJvdGggcHJvZ3Jlc3NpdmUgc3RyZWFtaW5nIGFuZCBjb21wbGV0ZSBmaWxlIGxvYWRpbmcuXHJcbiAqIE9wdGltaXplZCBmb3IgSU5SSUFWMSBQTFkgZm9ybWF0IHVzZWQgaW4gRkxBTUUgYXZhdGFycy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQbHlMb2FkZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBQTFkgZmlsZSBmcm9tIFVSTCB3aXRoIHByb2dyZXNzaXZlIHN0cmVhbWluZyBzdXBwb3J0XHJcbiAgICAgKlxyXG4gICAgICogRG93bmxvYWRzIGFuZCBwYXJzZXMgUExZIGRhdGEgcHJvZ3Jlc3NpdmVseSwgZW5hYmxpbmcgcmVuZGVyIGR1cmluZyBsb2FkLlxyXG4gICAgICogU3VwcG9ydHMgYm90aCBkaXJlY3QtdG8tYnVmZmVyIGFuZCBhcnJheS1iYXNlZCBsb2FkaW5nIG1vZGVzLlxyXG4gICAgICpcclxuICAgICAqIEBzdGF0aWNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlTmFtZSAtIFVSTCB0byB0aGUgUExZIGZpbGVcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvblByb2dyZXNzXSAtIFByb2dyZXNzIGNhbGxiYWNrIChwZXJjZW50LCBwZXJjZW50TGFiZWwsIHN0YXR1cylcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2xvYWREaXJlY3RvVG9TcGxhdEJ1ZmZlcj1mYWxzZV0gLSBMb2FkIGRpcmVjdGx5IHRvIFNwbGF0QnVmZmVyIChmYXN0ZXIgYnV0IGxlc3MgZmxleGlibGUpXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3NdIC0gQ2FsbGJhY2sgZm9yIHByb2dyZXNzaXZlIHNlY3Rpb24gdXBkYXRlc1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttaW5pbXVtQWxwaGE9MV0gLSBNaW5pbXVtIGFscGhhIHRocmVzaG9sZCBmb3Igc3BsYXQgY3VsbGluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb21wcmVzc2lvbkxldmVsPTBdIC0gQ29tcHJlc3Npb24gbGV2ZWwgKDA9bm9uZSwgMT1tZWRpdW0sIDI9aGlnaClcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGltaXplU3BsYXREYXRhPXRydWVdIC0gV2hldGhlciB0byBvcHRpbWl6ZS9jb21wcmVzcyBzcGxhdCBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW291dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZT0wXSAtIFNwaGVyaWNhbCBoYXJtb25pY3MgZGVncmVlICgwLTMpXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW2hlYWRlcnNdIC0gSFRUUCBoZWFkZXJzIGZvciBmZXRjaCByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY3Rpb25TaXplXSAtIFNlY3Rpb24gc2l6ZSBmb3IgcGFydGl0aW9uaW5nXHJcbiAgICAgKiBAcGFyYW0ge1ZlY3RvcjN9IFtzY2VuZUNlbnRlcl0gLSBDZW50ZXIgcG9pbnQgb2YgdGhlIHNjZW5lXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2Jsb2NrU2l6ZV0gLSBCbG9jayBzaXplIGZvciBzcGF0aWFsIHBhcnRpdGlvbmluZ1xyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtidWNrZXRTaXplXSAtIEJ1Y2tldCBzaXplIGZvciBzb3J0aW5nXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxTcGxhdEJ1ZmZlcj59IExvYWRlZCBhbmQgcGFyc2VkIHNwbGF0IGJ1ZmZlclxyXG4gICAgICogQHRocm93cyB7VmFsaWRhdGlvbkVycm9yfSBJZiBwYXJhbWV0ZXJzIGFyZSBpbnZhbGlkXHJcbiAgICAgKiBAdGhyb3dzIHtOZXR3b3JrRXJyb3J9IElmIGZpbGUgZG93bmxvYWQgZmFpbHNcclxuICAgICAqIEB0aHJvd3Mge1BhcnNlRXJyb3J9IElmIFBMWSBwYXJzaW5nIGZhaWxzXHJcbiAgICAgKiBAdGhyb3dzIHtBc3NldExvYWRFcnJvcn0gSWYgYXNzZXQgbG9hZGluZyBmYWlsc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbG9hZEZyb21VUkwoZmlsZU5hbWUsIG9uUHJvZ3Jlc3MsIGxvYWREaXJlY3RvVG9TcGxhdEJ1ZmZlciwgb25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bUFscGhhLCBjb21wcmVzc2lvbkxldmVsLCBvcHRpbWl6ZVNwbGF0RGF0YSA9IHRydWUsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycywgc2VjdGlvblNpemUsIHNjZW5lQ2VudGVyLCBibG9ja1NpemUsIGJ1Y2tldFNpemUpIHtcclxuXHJcbiAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgcGFyYW1ldGVyc1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlVXJsKGZpbGVOYW1lKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ludmFsaWQgVVJMIHByb3ZpZGVkIHRvIGxvYWRGcm9tVVJMJywgeyBmaWxlTmFtZSwgZXJyb3IgfSk7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVmFsaWRhdGUgb3B0aW9uYWwgY2FsbGJhY2tzXHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVDYWxsYmFjayhvblByb2dyZXNzLCAnb25Qcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MsICdvblByb2dyZXNzaXZlTG9hZFNlY3Rpb25Qcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdMb2FkaW5nIFBMWSBmcm9tIFVSTCcsIHsgZmlsZU5hbWUsIG9wdGltaXplU3BsYXREYXRhLCBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgfSk7XHJcblxyXG4gICAgICAgIGxldCBpbnRlcm5hbExvYWRUeXBlID0gbG9hZERpcmVjdG9Ub1NwbGF0QnVmZmVyID8gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QnVmZmVyIDogSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QXJyYXk7XHJcbiAgICAgICAgaWYgKG9wdGltaXplU3BsYXREYXRhKSBpbnRlcm5hbExvYWRUeXBlID0gSW50ZXJuYWxMb2FkVHlwZS5EaXJlY3RUb1NwbGF0QXJyYXk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRpcmVjdExvYWRTZWN0aW9uU2l6ZUJ5dGVzID0gQ29uc3RhbnRzLlByb2dyZXNzaXZlTG9hZFNlY3Rpb25TaXplO1xyXG4gICAgICAgIGNvbnN0IHNwbGF0RGF0YU9mZnNldEJ5dGVzID0gU3BsYXRCdWZmZXIuSGVhZGVyU2l6ZUJ5dGVzICsgU3BsYXRCdWZmZXIuU2VjdGlvbkhlYWRlclNpemVCeXRlcztcclxuICAgICAgICBjb25zdCBzZWN0aW9uQ291bnQgPSAxO1xyXG5cclxuICAgICAgICBsZXQgZGlyZWN0TG9hZEJ1ZmZlckluO1xyXG4gICAgICAgIGxldCBkaXJlY3RMb2FkQnVmZmVyT3V0O1xyXG4gICAgICAgIGxldCBkaXJlY3RMb2FkU3BsYXRCdWZmZXI7XHJcbiAgICAgICAgbGV0IG1heFNwbGF0Q291bnQgPSAwO1xyXG4gICAgICAgIGxldCBzcGxhdENvdW50ID0gMDtcclxuXHJcbiAgICAgICAgbGV0IGhlYWRlckxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCByZWFkeVRvTG9hZFNwbGF0RGF0YSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCBsb2FkUHJvbWlzZSA9IG5hdGl2ZVByb21pc2VXaXRoRXh0cmFjdGVkQ29tcG9uZW50cygpO1xyXG5cclxuICAgICAgICBsZXQgbnVtQnl0ZXNTdHJlYW1lZCA9IDA7XHJcbiAgICAgICAgbGV0IG51bUJ5dGVzUGFyc2VkID0gMDtcclxuICAgICAgICBsZXQgbnVtQnl0ZXNEb3dubG9hZGVkID0gMDtcclxuICAgICAgICBsZXQgaGVhZGVyVGV4dCA9ICcnO1xyXG4gICAgICAgIGxldCBoZWFkZXIgPSBudWxsO1xyXG4gICAgICAgIGxldCBjaHVua3MgPSBbXTtcclxuXHJcbiAgICAgICAgbGV0IHN0YW5kYXJkTG9hZFVuY29tcHJlc3NlZFNwbGF0QXJyYXk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcbiAgICAgICAgY29uc3QgaW5yaWFWMVBseVBhcnNlciA9IG5ldyBJTlJJQVYxUGx5UGFyc2VyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvY2FsT25Qcm9ncmVzcyA9IChwZXJjZW50LCBwZXJjZW50TGFiZWwsIGNodW5rRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkQ29tcGxldGUgPSBwZXJjZW50ID49IDEwMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjaHVua0RhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IGNodW5rRGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAnc2l6ZUJ5dGVzJzogY2h1bmtEYXRhLmJ5dGVMZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N0YXJ0Qnl0ZXMnOiBudW1CeXRlc0Rvd25sb2FkZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2VuZEJ5dGVzJzogbnVtQnl0ZXNEb3dubG9hZGVkICsgY2h1bmtEYXRhLmJ5dGVMZW5ndGhcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbnVtQnl0ZXNEb3dubG9hZGVkICs9IGNodW5rRGF0YS5ieXRlTGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW50ZXJuYWxMb2FkVHlwZSA9PT0gSW50ZXJuYWxMb2FkVHlwZS5Eb3dubG9hZEJlZm9yZVByb2Nlc3NpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChsb2FkQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkUHJvbWlzZS5yZXNvbHZlKGNodW5rcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhlYWRlckxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclRleHQgKz0gdGV4dERlY29kZXIuZGVjb2RlKGNodW5rRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFBseVBhcnNlclV0aWxzLmNoZWNrVGV4dEZvckVuZEhlYWRlcihoZWFkZXJUZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGTEFNRSBhdmF0YXJzIHVzZSBJTlJJQVYxIGZvcm1hdCAtIHBhcnNlIGhlYWRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyID0gaW5yaWFWMVBseVBhcnNlci5kZWNvZGVIZWFkZXJUZXh0KGhlYWRlclRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudCA9IGhlYWRlci5zcGxhdENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHlUb0xvYWRTcGxhdERhdGEgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUExZIGhlYWRlciBkZWNvZGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IG1heFNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlOiBoZWFkZXIuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBNYXRoLm1pbihvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsIGhlYWRlci5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VFcnJvciA9IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gZGVjb2RlIFBMWSBoZWFkZXI6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWFkZXJUZXh0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignSGVhZGVyIHBhcnNpbmcgZmFpbGVkJywgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUHJvbWlzZS5yZWplY3QocGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoRGVzY3JpcHRvciA9IFNwbGF0QnVmZmVyLkNvbXByZXNzaW9uTGV2ZWxzWzBdLlNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXNbb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsYXRCdWZmZXJTaXplQnl0ZXMgPSBzcGxhdERhdGFPZmZzZXRCeXRlcyArIHNoRGVzY3JpcHRvci5CeXRlc1BlclNwbGF0ICogbWF4U3BsYXRDb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdExvYWRCdWZmZXJPdXQgPSBuZXcgQXJyYXlCdWZmZXIoc3BsYXRCdWZmZXJTaXplQnl0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BsYXRCdWZmZXIud3JpdGVIZWFkZXJUb0J1ZmZlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbk1ham9yOiBTcGxhdEJ1ZmZlci5DdXJyZW50TWFqb3JWZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb25NaW5vcjogU3BsYXRCdWZmZXIuQ3VycmVudE1pbm9yVmVyc2lvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTZWN0aW9uQ291bnQ6IHNlY3Rpb25Db3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uQ291bnQ6IHNlY3Rpb25Db3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGxhdENvdW50OiBtYXhTcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IHNwbGF0Q291bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcHJlc3Npb25MZXZlbDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUNlbnRlcjogbmV3IFZlY3RvcjMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZGlyZWN0TG9hZEJ1ZmZlck91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFuZGFyZExvYWRVbmNvbXByZXNzZWRTcGxhdEFycmF5ID0gbmV3IFVuY29tcHJlc3NlZFNwbGF0QXJyYXkob3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVtQnl0ZXNTdHJlYW1lZCA9IGhlYWRlci5oZWFkZXJTaXplQnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bUJ5dGVzUGFyc2VkID0gaGVhZGVyLmhlYWRlclNpemVCeXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlckxvYWRlZCAmJiByZWFkeVRvTG9hZFNwbGF0RGF0YSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtzLmxlbmd0aCA+IDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdExvYWRCdWZmZXJJbiA9IHN0b3JlQ2h1bmtzSW5CdWZmZXIoY2h1bmtzLCBkaXJlY3RMb2FkQnVmZmVySW4pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnl0ZXNMb2FkZWRTaW5jZUxhc3RTdHJlYW1lZFNlY3Rpb24gPSBudW1CeXRlc0Rvd25sb2FkZWQgLSBudW1CeXRlc1N0cmVhbWVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnl0ZXNMb2FkZWRTaW5jZUxhc3RTdHJlYW1lZFNlY3Rpb24gPiBkaXJlY3RMb2FkU2VjdGlvblNpemVCeXRlcyB8fCBsb2FkQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bUJ5dGVzVG9Qcm9jZXNzID0gbnVtQnl0ZXNEb3dubG9hZGVkIC0gbnVtQnl0ZXNQYXJzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZFNwbGF0Q291bnQgPSBNYXRoLmZsb29yKG51bUJ5dGVzVG9Qcm9jZXNzIC8gaGVhZGVyLmJ5dGVzUGVyU3BsYXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtQnl0ZXNUb1BhcnNlID0gYWRkZWRTcGxhdENvdW50ICogaGVhZGVyLmJ5dGVzUGVyU3BsYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1CeXRlc0xlZnRPdmVyID0gbnVtQnl0ZXNUb1Byb2Nlc3MgLSBudW1CeXRlc1RvUGFyc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTcGxhdENvdW50ID0gc3BsYXRDb3VudCArIGFkZGVkU3BsYXRDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGFWaWV3T2Zmc2V0ID0gbnVtQnl0ZXNQYXJzZWQgLSBjaHVua3NbMF0uc3RhcnRCeXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFUb1BhcnNlID0gbmV3IERhdGFWaWV3KGRpcmVjdExvYWRCdWZmZXJJbiwgcGFyc2VkRGF0YVZpZXdPZmZzZXQsIG51bUJ5dGVzVG9QYXJzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hEZXNjcmlwdG9yID0gU3BsYXRCdWZmZXIuQ29tcHJlc3Npb25MZXZlbHNbMF0uU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlc1tvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0T2Zmc2V0ID0gc3BsYXRDb3VudCAqIHNoRGVzY3JpcHRvci5CeXRlc1BlclNwbGF0ICsgc3BsYXREYXRhT2Zmc2V0Qnl0ZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFyc2Ugc3BsYXQgZGF0YSB3aXRoIGVycm9yIGhhbmRsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5yaWFWMVBseVBhcnNlci5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRCdWZmZXJTZWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLCAwLCBhZGRlZFNwbGF0Q291bnQgLSAxLCBkYXRhVG9QYXJzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIGRpcmVjdExvYWRCdWZmZXJPdXQsIG91dE9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucmlhVjFQbHlQYXJzZXIucGFyc2VUb1VuY29tcHJlc3NlZFNwbGF0QXJyYXlTZWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLCAwLCBhZGRlZFNwbGF0Q291bnQgLSAxLCBkYXRhVG9QYXJzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIHN0YW5kYXJkTG9hZFVuY29tcHJlc3NlZFNwbGF0QXJyYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRTcGhlcmljYWxIYXJtb25pY3NEZWdyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlRXJyb3IgPSBuZXcgUGFyc2VFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBwYXJzZSBzcGxhdCBkYXRhIHNlY3Rpb246ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3BsYXREYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignU3BsYXQgZGF0YSBwYXJzaW5nIGZhaWxlZCcsIHsgc3BsYXRDb3VudCwgYWRkZWRTcGxhdENvdW50LCBlcnJvciB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkUHJvbWlzZS5yZWplY3QocGFyc2VFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0Q291bnQgPSBuZXdTcGxhdENvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRpcmVjdFRvU3BsYXRCdWZmZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRpcmVjdExvYWRTcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGxhdEJ1ZmZlci53cml0ZVNlY3Rpb25IZWFkZXJUb0J1ZmZlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGxhdENvdW50OiBtYXhTcGxhdENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRDb3VudDogc3BsYXRDb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldFNpemU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWNrZXRDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldEJsb2NrU2l6ZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXByZXNzaW9uU2NhbGVSYW5nZTogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VTaXplQnl0ZXM6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxsQnVja2V0Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsbHlGaWxsZWRCdWNrZXRDb3VudDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZTogb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDAsIGRpcmVjdExvYWRCdWZmZXJPdXQsIFNwbGF0QnVmZmVyLkhlYWRlclNpemVCeXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdExvYWRTcGxhdEJ1ZmZlciA9IG5ldyBTcGxhdEJ1ZmZlcihkaXJlY3RMb2FkQnVmZmVyT3V0LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdExvYWRTcGxhdEJ1ZmZlci51cGRhdGVMb2FkZWRDb3VudHMoMSwgc3BsYXRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvblByb2dyZXNzKGRpcmVjdExvYWRTcGxhdEJ1ZmZlciwgbG9hZENvbXBsZXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQnl0ZXNTdHJlYW1lZCArPSBkaXJlY3RMb2FkU2VjdGlvblNpemVCeXRlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUJ5dGVzUGFyc2VkICs9IG51bUJ5dGVzVG9QYXJzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtQnl0ZXNMZWZ0T3ZlciA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQga2VlcENodW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrZWVwU2l6ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGNodW5rcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVuayA9IGNodW5rc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2VlcFNpemUgKz0gY2h1bmsuc2l6ZUJ5dGVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWVwQ2h1bmtzLnVuc2hpZnQoY2h1bmspO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2VlcFNpemUgPj0gbnVtQnl0ZXNMZWZ0T3ZlcikgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rcyA9IGtlZXBDaHVua3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2FkQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UucmVzb2x2ZShkaXJlY3RMb2FkU3BsYXRCdWZmZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UucmVzb2x2ZShzdGFuZGFyZExvYWRVbmNvbXByZXNzZWRTcGxhdEFycmF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgY2FsbGJhY2sgd2l0aCBlcnJvciBpc29sYXRpb25cclxuICAgICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25Qcm9ncmVzcyhwZXJjZW50LCBwZXJjZW50TGFiZWwsIExvYWRlclN0YXR1cy5Eb3dubG9hZGluZyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBvblByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbCBwcm9ncmVzcyBjYWxsYmFja1xyXG4gICAgICAgIGlmIChvblByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzKDAsICcwJScsIExvYWRlclN0YXR1cy5Eb3dubG9hZGluZyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gb25Qcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmV0Y2ggYW5kIHByb2Nlc3MgdGhlIFBMWSBmaWxlXHJcbiAgICAgICAgcmV0dXJuIGZldGNoV2l0aFByb2dyZXNzKGZpbGVOYW1lLCBsb2NhbE9uUHJvZ3Jlc3MsIGZhbHNlLCBoZWFkZXJzKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MoMCwgJzAlJywgTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBvblByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBsb2FkUHJvbWlzZS5wcm9taXNlO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoc3BsYXREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAob25Qcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3MoMTAwLCAnMTAwJScsIExvYWRlclN0YXR1cy5Eb25lKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gb25Qcm9ncmVzcyBjYWxsYmFjaycsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQTFkgZGF0YSBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsTG9hZFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BsYXRDb3VudDogc3BsYXREYXRhPy5zcGxhdENvdW50IHx8ICd1bmtub3duJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBiYXNlZCBvbiBsb2FkIHR5cGVcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlcm5hbExvYWRUeXBlID09PSBJbnRlcm5hbExvYWRUeXBlLkRvd25sb2FkQmVmb3JlUHJvY2Vzc2luZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rRGF0YXMgPSBjaHVua3MubWFwKChjaHVuaykgPT4gY2h1bmsuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCbG9iKGNodW5rRGF0YXMpLmFycmF5QnVmZmVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHBseUZpbGVEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGx5TG9hZGVyLmxvYWRGcm9tRmlsZURhdGEoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx5RmlsZURhdGEsIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCwgb3B0aW1pemVTcGxhdERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLCBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcHJvY2VzcyBkb3dubG9hZGVkIFBMWSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGludGVybmFsTG9hZFR5cGUgPT09IEludGVybmFsTG9hZFR5cGUuRGlyZWN0VG9TcGxhdEJ1ZmZlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzcGxhdERhdGE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxheWVkRXhlY3V0ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNwbGF0RGF0YShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0RGF0YSwgb3B0aW1pemVTcGxhdERhdGEsIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFJlLXRocm93IGN1c3RvbSBlcnJvcnMgYXMtaXNcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgTmV0d29ya0Vycm9yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBQYXJzZUVycm9yIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBBc3NldExvYWRFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignUExZIGxvYWRpbmcgZmFpbGVkJywgeyBmaWxlTmFtZSwgZXJyb3JDb2RlOiBlcnJvci5jb2RlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdyYXAgdW5leHBlY3RlZCBlcnJvcnNcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5leHBlY3RlZCBlcnJvciBsb2FkaW5nIFBMWScsIHsgZmlsZU5hbWUsIGVycm9yIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBVbmV4cGVjdGVkIGVycm9yIGxvYWRpbmcgUExZIGZpbGU6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWQgUExZIGZpbGUgZnJvbSByYXcgQXJyYXlCdWZmZXIgZGF0YVxyXG4gICAgICpcclxuICAgICAqIFBhcnNlcyBQTFkgZGF0YSB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gZG93bmxvYWRlZC4gVXNlZnVsIGZvciBsb2FkaW5nXHJcbiAgICAgKiBmcm9tIGxvY2FsIGZpbGVzIG9yIHdoZW4gZGF0YSBpcyBwcm92aWRlZCBkaXJlY3RseS5cclxuICAgICAqXHJcbiAgICAgKiBAc3RhdGljXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBwbHlGaWxlRGF0YSAtIFJhdyBQTFkgZmlsZSBkYXRhIGFzIEFycmF5QnVmZmVyXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbmltdW1BbHBoYT0xXSAtIE1pbmltdW0gYWxwaGEgdGhyZXNob2xkIGZvciBzcGxhdCBjdWxsaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2NvbXByZXNzaW9uTGV2ZWw9MF0gLSBDb21wcmVzc2lvbiBsZXZlbCAoMD1ub25lLCAxPW1lZGl1bSwgMj1oaWdoKVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW1pemVTcGxhdERhdGE9dHJ1ZV0gLSBXaGV0aGVyIHRvIG9wdGltaXplL2NvbXByZXNzIHNwbGF0IGRhdGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlPTBdIC0gU3BoZXJpY2FsIGhhcm1vbmljcyBkZWdyZWUgKDAtMylcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbc2VjdGlvblNpemVdIC0gU2VjdGlvbiBzaXplIGZvciBwYXJ0aXRpb25pbmdcclxuICAgICAqIEBwYXJhbSB7VmVjdG9yM30gW3NjZW5lQ2VudGVyXSAtIENlbnRlciBwb2ludCBvZiB0aGUgc2NlbmVcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYmxvY2tTaXplXSAtIEJsb2NrIHNpemUgZm9yIHNwYXRpYWwgcGFydGl0aW9uaW5nXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2J1Y2tldFNpemVdIC0gQnVja2V0IHNpemUgZm9yIHNvcnRpbmdcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFNwbGF0QnVmZmVyPn0gUGFyc2VkIGFuZCBmaW5hbGl6ZWQgc3BsYXQgYnVmZmVyXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHBseUZpbGVEYXRhIGlzIGludmFsaWRcclxuICAgICAqIEB0aHJvd3Mge1BhcnNlRXJyb3J9IElmIHBhcnNpbmcgZmFpbHNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGxvYWRGcm9tRmlsZURhdGEocGx5RmlsZURhdGEsIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCwgb3B0aW1pemVTcGxhdERhdGEsIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uU2l6ZSwgc2NlbmVDZW50ZXIsIGJsb2NrU2l6ZSwgYnVja2V0U2l6ZSkge1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIGlucHV0XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFsaWRhdGVBcnJheUJ1ZmZlcihwbHlGaWxlRGF0YSwgJ3BseUZpbGVEYXRhJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbnZhbGlkIFBMWSBmaWxlIGRhdGEnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnTG9hZGluZyBQTFkgZnJvbSBmaWxlIGRhdGEnLCB7XHJcbiAgICAgICAgICAgIHNpemVCeXRlczogcGx5RmlsZURhdGEuYnl0ZUxlbmd0aCxcclxuICAgICAgICAgICAgb3B0aW1pemVTcGxhdERhdGEsXHJcbiAgICAgICAgICAgIG91dFNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVsYXllZEV4ZWN1dGUoKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBseVBhcnNlci5wYXJzZVRvVW5jb21wcmVzc2VkU3BsYXRBcnJheShwbHlGaWxlRGF0YSwgb3V0U3BoZXJpY2FsSGFybW9uaWNzRGVncmVlKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcGFyc2UgUExZIGZpbGUgZGF0YTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BseUZpbGVEYXRhJyxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHNwbGF0QXJyYXkpID0+IHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQTFkgcGFyc2VkIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgICAgICAgIHNwbGF0Q291bnQ6IHNwbGF0QXJyYXk/LnNwbGF0Q291bnQgfHwgJ3Vua25vd24nXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU3BsYXREYXRhKFxyXG4gICAgICAgICAgICAgICAgc3BsYXRBcnJheSwgb3B0aW1pemVTcGxhdERhdGEsIG1pbmltdW1BbHBoYSwgY29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25TaXplLCBzY2VuZUNlbnRlciwgYmxvY2tTaXplLCBidWNrZXRTaXplXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFJlLXRocm93IGN1c3RvbSBlcnJvcnMgYXMtaXNcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgUGFyc2VFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdQTFkgZmlsZSBkYXRhIGxvYWRpbmcgZmFpbGVkJywgeyBlcnJvckNvZGU6IGVycm9yLmNvZGUgfSk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gV3JhcCB1bmV4cGVjdGVkIGVycm9yc1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1VuZXhwZWN0ZWQgZXJyb3IgbG9hZGluZyBQTFkgZnJvbSBmaWxlIGRhdGEnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgYFVuZXhwZWN0ZWQgZXJyb3IgcGFyc2luZyBQTFkgZGF0YTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAncGx5RmlsZURhdGEnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBSYXlcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gdGhlIG9yaWdpbmFsLlxyXG4gKi9cclxuXHJcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcclxuXHJcbmNvbnN0IFZlY3RvclJpZ2h0ID0gbmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMCk7XHJcbmNvbnN0IFZlY3RvclVwID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCk7XHJcbmNvbnN0IFZlY3RvckJhY2t3YXJkID0gbmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSk7XHJcblxyXG5leHBvcnQgY2xhc3MgUmF5IHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcmlnaW4gPSBuZXcgVEhSRUUuVmVjdG9yMygpLCBkaXJlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpKSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcnMob3JpZ2luLCBkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFBhcmFtZXRlcnMob3JpZ2luLCBkaXJlY3Rpb24pIHtcclxuICAgICAgICB0aGlzLm9yaWdpbi5jb3B5KG9yaWdpbik7XHJcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uY29weShkaXJlY3Rpb24pLm5vcm1hbGl6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGJveENvbnRhaW5zUG9pbnQoYm94LCBwb2ludCwgZXBzaWxvbikge1xyXG4gICAgICAgIHJldHVybiBwb2ludC54IDwgYm94Lm1pbi54IC0gZXBzaWxvbiB8fCBwb2ludC54ID4gYm94Lm1heC54ICsgZXBzaWxvbiB8fFxyXG4gICAgICAgICAgICAgICBwb2ludC55IDwgYm94Lm1pbi55IC0gZXBzaWxvbiB8fCBwb2ludC55ID4gYm94Lm1heC55ICsgZXBzaWxvbiB8fFxyXG4gICAgICAgICAgICAgICBwb2ludC56IDwgYm94Lm1pbi56IC0gZXBzaWxvbiB8fCBwb2ludC56ID4gYm94Lm1heC56ICsgZXBzaWxvbiA/IGZhbHNlIDogdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcnNlY3RCb3ggPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5ID0gW107XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luQXJyYXkgPSBbXTtcclxuICAgICAgICBjb25zdCBkaXJlY3Rpb25BcnJheSA9IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYm94LCBvdXRIaXQpIHtcclxuXHJcbiAgICAgICAgICAgIG9yaWdpbkFycmF5WzBdID0gdGhpcy5vcmlnaW4ueDtcclxuICAgICAgICAgICAgb3JpZ2luQXJyYXlbMV0gPSB0aGlzLm9yaWdpbi55O1xyXG4gICAgICAgICAgICBvcmlnaW5BcnJheVsyXSA9IHRoaXMub3JpZ2luLno7XHJcbiAgICAgICAgICAgIGRpcmVjdGlvbkFycmF5WzBdID0gdGhpcy5kaXJlY3Rpb24ueDtcclxuICAgICAgICAgICAgZGlyZWN0aW9uQXJyYXlbMV0gPSB0aGlzLmRpcmVjdGlvbi55O1xyXG4gICAgICAgICAgICBkaXJlY3Rpb25BcnJheVsyXSA9IHRoaXMuZGlyZWN0aW9uLno7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5ib3hDb250YWluc1BvaW50KGJveCwgdGhpcy5vcmlnaW4sIDAuMDAwMSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvdXRIaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRIaXQub3JpZ2luLmNvcHkodGhpcy5vcmlnaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEhpdC5ub3JtYWwuc2V0KDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEhpdC5kaXN0YW5jZSA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uQXJyYXlbaV0gPT0gMC4wKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBoaXROb3JtYWwgPSBpID09IDAgPyBWZWN0b3JSaWdodCA6IGkgPT0gMSA/IFZlY3RvclVwIDogVmVjdG9yQmFja3dhcmQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyZW1lVmVjID0gZGlyZWN0aW9uQXJyYXlbaV0gPCAwID8gYm94Lm1heCA6IGJveC5taW47XHJcbiAgICAgICAgICAgICAgICBsZXQgbXVsdGlwbGllciA9IC1NYXRoLnNpZ24oZGlyZWN0aW9uQXJyYXlbaV0pO1xyXG4gICAgICAgICAgICAgICAgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5WzBdID0gaSA9PSAwID8gZXh0cmVtZVZlYy54IDogaSA9PSAxID8gZXh0cmVtZVZlYy55IDogZXh0cmVtZVZlYy56O1xyXG4gICAgICAgICAgICAgICAgbGV0IHRvU2lkZSA9IHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVswXSAtIG9yaWdpbkFycmF5W2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0b1NpZGUgKiBtdWx0aXBsaWVyIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeDEgPSAoaSArIDEpICUgMztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHgyID0gKGkgKyAyKSAlIDM7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5WzJdID0gZGlyZWN0aW9uQXJyYXlbaWR4MV0gLyBkaXJlY3Rpb25BcnJheVtpXSAqIHRvU2lkZSArIG9yaWdpbkFycmF5W2lkeDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVsxXSA9IGRpcmVjdGlvbkFycmF5W2lkeDJdIC8gZGlyZWN0aW9uQXJyYXlbaV0gKiB0b1NpZGUgKyBvcmlnaW5BcnJheVtpZHgyXTtcclxuICAgICAgICAgICAgICAgICAgICBwbGFuZUludGVyc2VjdGlvblBvaW50LnNldChwbGFuZUludGVyc2VjdGlvblBvaW50QXJyYXlbaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhbmVJbnRlcnNlY3Rpb25Qb2ludEFycmF5W2lkeDJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnRBcnJheVtpZHgxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm94Q29udGFpbnNQb2ludChib3gsIHBsYW5lSW50ZXJzZWN0aW9uUG9pbnQsIDAuMDAwMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG91dEhpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0SGl0Lm9yaWdpbi5jb3B5KHBsYW5lSW50ZXJzZWN0aW9uUG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0SGl0Lm5vcm1hbC5jb3B5KGhpdE5vcm1hbCkubXVsdGlwbHlTY2FsYXIobXVsdGlwbGllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRIaXQuZGlzdGFuY2UgPSBwbGFuZUludGVyc2VjdGlvblBvaW50LnN1Yih0aGlzLm9yaWdpbikubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcblxyXG4gICAgaW50ZXJzZWN0U3BoZXJlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvU3BoZXJlQ2VudGVyVmVjID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNlbnRlciwgcmFkaXVzLCBvdXRIaXQpIHtcclxuICAgICAgICAgICAgdG9TcGhlcmVDZW50ZXJWZWMuY29weShjZW50ZXIpLnN1Yih0aGlzLm9yaWdpbik7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvQ2xvc2VzdEFwcHJvYWNoID0gdG9TcGhlcmVDZW50ZXJWZWMuZG90KHRoaXMuZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgY29uc3QgdG9DbG9zZXN0QXBwcm9hY2hTcSA9IHRvQ2xvc2VzdEFwcHJvYWNoICogdG9DbG9zZXN0QXBwcm9hY2g7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvU3BoZXJlQ2VudGVyU3EgPSB0b1NwaGVyZUNlbnRlclZlYy5kb3QodG9TcGhlcmVDZW50ZXJWZWMpO1xyXG4gICAgICAgICAgICBjb25zdCBkaWZmU3EgPSB0b1NwaGVyZUNlbnRlclNxIC0gdG9DbG9zZXN0QXBwcm9hY2hTcTtcclxuICAgICAgICAgICAgY29uc3QgcmFkaXVzU3EgPSByYWRpdXMgKiByYWRpdXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlmZlNxID4gcmFkaXVzU3EpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRoYyA9IE1hdGguc3FydChyYWRpdXNTcSAtIGRpZmZTcSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHQwID0gdG9DbG9zZXN0QXBwcm9hY2ggLSB0aGM7XHJcbiAgICAgICAgICAgIGNvbnN0IHQxID0gdG9DbG9zZXN0QXBwcm9hY2ggKyB0aGM7XHJcblxyXG4gICAgICAgICAgICBpZiAodDEgPCAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCB0ID0gdDAgPCAwID8gdDEgOiB0MDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvdXRIaXQpIHtcclxuICAgICAgICAgICAgICAgIG91dEhpdC5vcmlnaW4uY29weSh0aGlzLm9yaWdpbikuYWRkU2NhbGVkVmVjdG9yKHRoaXMuZGlyZWN0aW9uLCB0KTtcclxuICAgICAgICAgICAgICAgIG91dEhpdC5ub3JtYWwuY29weShvdXRIaXQub3JpZ2luKS5zdWIoY2VudGVyKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgIG91dEhpdC5kaXN0YW5jZSA9IHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KCk7XHJcbn1cclxuIiwiLyoqXHJcbiAqIEhpdFxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgaXMgZnVuY3Rpb25hbGx5IGlkZW50aWNhbCB0byB0aGUgb3JpZ2luYWwuXHJcbiAqL1xyXG5cclxuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEhpdCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMubm9ybWFsID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmRpc3RhbmNlID0gMDtcclxuICAgICAgICB0aGlzLnNwbGF0SW5kZXggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHNldChvcmlnaW4sIG5vcm1hbCwgZGlzdGFuY2UsIHNwbGF0SW5kZXgpIHtcclxuICAgICAgICB0aGlzLm9yaWdpbi5jb3B5KG9yaWdpbik7XHJcbiAgICAgICAgdGhpcy5ub3JtYWwuY29weShub3JtYWwpO1xyXG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICB0aGlzLnNwbGF0SW5kZXggPSBzcGxhdEluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIGNsb25lKCkge1xyXG4gICAgICAgIGNvbnN0IGhpdENsb25lID0gbmV3IEhpdCgpO1xyXG4gICAgICAgIGhpdENsb25lLm9yaWdpbi5jb3B5KHRoaXMub3JpZ2luKTtcclxuICAgICAgICBoaXRDbG9uZS5ub3JtYWwuY29weSh0aGlzLm5vcm1hbCk7XHJcbiAgICAgICAgaGl0Q2xvbmUuZGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlO1xyXG4gICAgICAgIGhpdENsb25lLnNwbGF0SW5kZXggPSB0aGlzLnNwbGF0SW5kZXg7XHJcbiAgICAgICAgcmV0dXJuIGhpdENsb25lO1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvKipcclxuICogUmF5Y2FzdGVyXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gQG1ra2VsbG9nZy9nYXVzc2lhbi1zcGxhdHMtM2QgKE1JVCBMaWNlbnNlKVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbWtrZWxsb2dnL0dhdXNzaWFuU3BsYXRzM0RcclxuICogXHJcbiAqIEltcG9ydCBwYXRocyBhZGp1c3RlZCBmb3IgZ3NwbGF0LWZsYW1lLWF2YXRhciBwYWNrYWdlIHN0cnVjdHVyZS5cclxuICovXHJcblxyXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7XHJcbmltcG9ydCB7IFJheSB9IGZyb20gJy4vUmF5LmpzJztcclxuaW1wb3J0IHsgSGl0IH0gZnJvbSAnLi9IaXQuanMnO1xyXG5pbXBvcnQgeyBTcGxhdFJlbmRlck1vZGUgfSBmcm9tICcuLi9lbnVtcy9pbmRleC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUmF5Y2FzdGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihvcmlnaW4sIGRpcmVjdGlvbiwgcmF5Y2FzdEFnYWluc3RUcnVlU3BsYXRFbGxpcHNvaWQgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMucmF5ID0gbmV3IFJheShvcmlnaW4sIGRpcmVjdGlvbik7XHJcbiAgICAgICAgdGhpcy5yYXljYXN0QWdhaW5zdFRydWVTcGxhdEVsbGlwc29pZCA9IHJheWNhc3RBZ2FpbnN0VHJ1ZVNwbGF0RWxsaXBzb2lkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEZyb21DYW1lcmFBbmRTY3JlZW5Qb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBjb25zdCBuZGNDb29yZHMgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FtZXJhLCBzY3JlZW5Qb3NpdGlvbiwgc2NyZWVuRGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICBuZGNDb29yZHMueCA9IHNjcmVlblBvc2l0aW9uLnggLyBzY3JlZW5EaW1lbnNpb25zLnggKiAyLjAgLSAxLjA7XHJcbiAgICAgICAgICAgIG5kY0Nvb3Jkcy55ID0gKHNjcmVlbkRpbWVuc2lvbnMueSAtIHNjcmVlblBvc2l0aW9uLnkpIC8gc2NyZWVuRGltZW5zaW9ucy55ICogMi4wIC0gMS4wO1xyXG4gICAgICAgICAgICBpZiAoY2FtZXJhLmlzUGVyc3BlY3RpdmVDYW1lcmEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmF5Lm9yaWdpbi5zZXRGcm9tTWF0cml4UG9zaXRpb24oY2FtZXJhLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmF5LmRpcmVjdGlvbi5zZXQobmRjQ29vcmRzLngsIG5kY0Nvb3Jkcy55LCAwLjUgKS51bnByb2plY3QoY2FtZXJhKS5zdWIodGhpcy5yYXkub3JpZ2luKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yYXkub3JpZ2luLnNldChuZGNDb29yZHMueCwgbmRjQ29vcmRzLnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNhbWVyYS5uZWFyICsgY2FtZXJhLmZhcikgLyAoY2FtZXJhLm5lYXIgLSBjYW1lcmEuZmFyKSkudW5wcm9qZWN0KGNhbWVyYSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJheS5kaXJlY3Rpb24uc2V0KDAsIDAsIC0xKS50cmFuc2Zvcm1EaXJlY3Rpb24oY2FtZXJhLm1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYXljYXN0ZXI6OnNldEZyb21DYW1lcmFBbmRTY3JlZW5Qb3NpdGlvbigpIC0+IFVuc3VwcG9ydGVkIGNhbWVyYSB0eXBlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBpbnRlcnNlY3RTcGxhdE1lc2ggPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgY29uc3QgdG9Mb2NhbCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgZnJvbUxvY2FsID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCBzY2VuZVRyYW5zZm9ybSA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgbG9jYWxSYXkgPSBuZXcgUmF5KCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFBvaW50ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNwbGF0TWVzaCwgb3V0SGl0cyA9IFtdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwbGF0VHJlZSA9IHNwbGF0TWVzaC5nZXRTcGxhdFRyZWUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc3BsYXRUcmVlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHNwbGF0VHJlZS5zdWJUcmVlcy5sZW5ndGg7IHMrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViVHJlZSA9IHNwbGF0VHJlZS5zdWJUcmVlc1tzXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmcm9tTG9jYWwuY29weShzcGxhdE1lc2gubWF0cml4V29ybGQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwbGF0TWVzaC5keW5hbWljTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0TWVzaC5nZXRTY2VuZVRyYW5zZm9ybShzLCBzY2VuZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbUxvY2FsLm11bHRpcGx5KHNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRvTG9jYWwuY29weShmcm9tTG9jYWwpLmludmVydCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxvY2FsUmF5Lm9yaWdpbi5jb3B5KHRoaXMucmF5Lm9yaWdpbikuYXBwbHlNYXRyaXg0KHRvTG9jYWwpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxSYXkuZGlyZWN0aW9uLmNvcHkodGhpcy5yYXkub3JpZ2luKS5hZGQodGhpcy5yYXkuZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsUmF5LmRpcmVjdGlvbi5hcHBseU1hdHJpeDQodG9Mb2NhbCkuc3ViKGxvY2FsUmF5Lm9yaWdpbikubm9ybWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0SGl0c0ZvclN1YlRyZWUgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChzdWJUcmVlLnJvb3ROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXN0UmF5QXRTcGxhdFRyZWVOb2RlKGxvY2FsUmF5LCBzcGxhdFRyZWUsIHN1YlRyZWUucm9vdE5vZGUsIG91dEhpdHNGb3JTdWJUcmVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvdXRIaXRzRm9yU3ViVHJlZS5mb3JFYWNoKChoaXQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBoaXQub3JpZ2luLmFwcGx5TWF0cml4NChmcm9tTG9jYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpdC5ub3JtYWwuYXBwbHlNYXRyaXg0KGZyb21Mb2NhbCkubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGl0LmRpc3RhbmNlID0gdGVtcFBvaW50LmNvcHkoaGl0Lm9yaWdpbikuc3ViKHRoaXMucmF5Lm9yaWdpbikubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBvdXRIaXRzLnB1c2goLi4ub3V0SGl0c0ZvclN1YlRyZWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvdXRIaXRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChhLmRpc3RhbmNlID4gYi5kaXN0YW5jZSkgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb3V0SGl0cztcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxuXHJcbiAgICBjYXN0UmF5QXRTcGxhdFRyZWVOb2RlID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHRlbXBDb2xvciA9IG5ldyBUSFJFRS5WZWN0b3I0KCk7XHJcbiAgICAgICAgY29uc3QgdGVtcENlbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XHJcbiAgICAgICAgY29uc3QgdGVtcFNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICBjb25zdCB0ZW1wUm90YXRpb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBIaXQgPSBuZXcgSGl0KCk7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVFcHNpbG9uID0gMC4wMDAwMDAxO1xyXG5cclxuICAgICAgICBjb25zdCBvcmlnaW4gPSBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICBjb25zdCB1bmlmb3JtU2NhbGVNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xyXG4gICAgICAgIGNvbnN0IHNjYWxlTWF0cml4ID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCByb3RhdGlvbk1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgdG9TcGhlcmVTcGFjZSA9IG5ldyBUSFJFRS5NYXRyaXg0KCk7XHJcbiAgICAgICAgY29uc3QgZnJvbVNwaGVyZVNwYWNlID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcclxuICAgICAgICBjb25zdCB0ZW1wUmF5ID0gbmV3IFJheSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmF5LCBzcGxhdFRyZWUsIG5vZGUsIG91dEhpdHMgPSBbXSkge1xyXG4gICAgICAgICAgICBpZiAoIXJheS5pbnRlcnNlY3RCb3gobm9kZS5ib3VuZGluZ0JveCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobm9kZS5kYXRhICYmIG5vZGUuZGF0YS5pbmRleGVzICYmIG5vZGUuZGF0YS5pbmRleGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5kYXRhLmluZGV4ZXMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsYXRHbG9iYWxJbmRleCA9IG5vZGUuZGF0YS5pbmRleGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0U2NlbmVJbmRleCA9IHNwbGF0VHJlZS5zcGxhdE1lc2guZ2V0U2NlbmVJbmRleEZvclNwbGF0KHNwbGF0R2xvYmFsSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGF0U2NlbmUgPSBzcGxhdFRyZWUuc3BsYXRNZXNoLmdldFNjZW5lKHNwbGF0U2NlbmVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzcGxhdFNjZW5lLnZpc2libGUpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzcGxhdFRyZWUuc3BsYXRNZXNoLmdldFNwbGF0Q29sb3Ioc3BsYXRHbG9iYWxJbmRleCwgdGVtcENvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICBzcGxhdFRyZWUuc3BsYXRNZXNoLmdldFNwbGF0Q2VudGVyKHNwbGF0R2xvYmFsSW5kZXgsIHRlbXBDZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNwbGF0VHJlZS5zcGxhdE1lc2guZ2V0U3BsYXRTY2FsZUFuZFJvdGF0aW9uKHNwbGF0R2xvYmFsSW5kZXgsIHRlbXBTY2FsZSwgdGVtcFJvdGF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBTY2FsZS54IDw9IHNjYWxlRXBzaWxvbiB8fCB0ZW1wU2NhbGUueSA8PSBzY2FsZUVwc2lsb24gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXRUcmVlLnNwbGF0TWVzaC5zcGxhdFJlbmRlck1vZGUgPT09IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQgJiYgdGVtcFNjYWxlLnogPD0gc2NhbGVFcHNpbG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnJheWNhc3RBZ2FpbnN0VHJ1ZVNwbGF0RWxsaXBzb2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYWRpdXMgPSAodGVtcFNjYWxlLnggKyB0ZW1wU2NhbGUueSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnRDb3VudCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGxhdFRyZWUuc3BsYXRNZXNoLnNwbGF0UmVuZGVyTW9kZSA9PT0gU3BsYXRSZW5kZXJNb2RlLlRocmVlRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzICs9IHRlbXBTY2FsZS56O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50Q291bnQgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cyA9IHJhZGl1cyAvIGNvbXBvbmVudENvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmF5LmludGVyc2VjdFNwaGVyZSh0ZW1wQ2VudGVyLCByYWRpdXMsIHRlbXBIaXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoaXRDbG9uZSA9IHRlbXBIaXQuY2xvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpdENsb25lLnNwbGF0SW5kZXggPSBzcGxhdEdsb2JhbEluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0SGl0cy5wdXNoKGhpdENsb25lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlTWF0cml4Lm1ha2VTY2FsZSh0ZW1wU2NhbGUueCwgdGVtcFNjYWxlLnksIHRlbXBTY2FsZS56KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb25NYXRyaXgubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGVtcFJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdW5pZm9ybVNjYWxlID0gTWF0aC5sb2cxMCh0ZW1wQ29sb3IudykgKiAyLjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm1TY2FsZU1hdHJpeC5tYWtlU2NhbGUodW5pZm9ybVNjYWxlLCB1bmlmb3JtU2NhbGUsIHVuaWZvcm1TY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TcGhlcmVTcGFjZS5jb3B5KHVuaWZvcm1TY2FsZU1hdHJpeCkubXVsdGlwbHkocm90YXRpb25NYXRyaXgpLm11bHRpcGx5KHNjYWxlTWF0cml4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9TcGhlcmVTcGFjZS5jb3B5KGZyb21TcGhlcmVTcGFjZSkuaW52ZXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBSYXkub3JpZ2luLmNvcHkocmF5Lm9yaWdpbikuc3ViKHRlbXBDZW50ZXIpLmFwcGx5TWF0cml4NCh0b1NwaGVyZVNwYWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFJheS5kaXJlY3Rpb24uY29weShyYXkub3JpZ2luKS5hZGQocmF5LmRpcmVjdGlvbikuc3ViKHRlbXBDZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUmF5LmRpcmVjdGlvbi5hcHBseU1hdHJpeDQodG9TcGhlcmVTcGFjZSkuc3ViKHRlbXBSYXkub3JpZ2luKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBSYXkuaW50ZXJzZWN0U3BoZXJlKG9yaWdpbiwgMS4wLCB0ZW1wSGl0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGl0Q2xvbmUgPSB0ZW1wSGl0LmNsb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXRDbG9uZS5zcGxhdEluZGV4ID0gc3BsYXRHbG9iYWxJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpdENsb25lLm9yaWdpbi5hcHBseU1hdHJpeDQoZnJvbVNwaGVyZVNwYWNlKS5hZGQodGVtcENlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRIaXRzLnB1c2goaGl0Q2xvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhc3RSYXlBdFNwbGF0VHJlZU5vZGUocmF5LCBzcGxhdFRyZWUsIGNoaWxkLCBvdXRIaXRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gb3V0SGl0cztcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0oKTtcclxufVxyXG4iLCIvKipcclxuICogU29ydFdvcmtlclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIEBta2tlbGxvZ2cvZ2F1c3NpYW4tc3BsYXRzLTNkIChNSVQgTGljZW5zZSlcclxuICogaHR0cHM6Ly9naXRodWIuY29tL21ra2VsbG9nZy9HYXVzc2lhblNwbGF0czNEXHJcbiAqIFxyXG4gKiBIYW5kbGVzIEdQVS1iYXNlZCBzb3J0aW5nIHVzaW5nIFdlYkFzc2VtYmx5XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgaXNJT1MsIGdldElPU1NlbWV2ZXIgfSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vZW51bXMvRW5naW5lQ29uc3RhbnRzLmpzJztcclxuXHJcbi8vIEJhc2U2NCBlbmNvZGVkIFdBU00gbW9kdWxlcyBmb3Igc29ydGluZ1xyXG5jb25zdCBTb3J0ZXJXYXNtID0gXCJBR0Z6YlFFQUFBQUFEd2hrZVd4cGJtc3VNQUVFQUFBQUFBRWJBMkFBQUdBUWYzOS9mMzkvZjM5L2YzOS9mMzkvZndCZ0FBRi9BaElCQTJWdWRnWnRaVzF2Y25rQ0F3Q0FnQVFEQkFNQUFRSUhWQVFSWDE5M1lYTnRYMk5oYkd4ZlkzUnZjbk1BQUJoZlgzZGhjMjFmWVhCd2JIbGZaR0YwWVY5eVpXeHZZM01BQUF0emIzSjBTVzVrWlhobGN3QUJFMlZ0YzJOeWFYQjBaVzVmZEd4elgybHVhWFFBQWdxV0VBTURBQUVMaWhBRUFYd0Rld04vQTMwZ0N5QUtheUVNQWtBQ1FDQU9CRUFnRFFSQVFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUU1nRENFQkEwQWdBeUFCUVFKMElnVnFJQUlnQUNBRmFpZ0NBRUVDZEdvb0FnQWlCVFlDQUNBRklBb2dCU0FLU0JzaENpQUZJQTBnQlNBTlNoc2hEU0FCUVFGcUlnRWdDMGNOQUFzTUF3c2dEd1JBSUFzZ0RFME5Ba0YvSVE5QitQLy8vd2NoQ2tHSWdJQ0FlQ0VOSUF3aEFnTkFJQThnQnlBQUlBSkJBblFpRldvb0FnQWlGa0VDZEdvb0FnQWlGRWNFUUFKL0lBWDlDUUk0SUFnZ0ZFRUdkR29pRHYwSkFnd2dEaW9DSFAwZ0FTQU9LZ0lzL1NBQ0lBNHFBano5SUFQOTVnRWdCZjBKQWlnZ0R2MEpBZ2dnRGlvQ0dQMGdBU0FPS2dJby9TQUNJQTRxQWpqOUlBUDk1Z0VnQmYwSkFnZ2dEdjBKQWdBZ0Rpb0NFUDBnQVNBT0tnSWcvU0FDSUE0cUFqRDlJQVA5NWdFZ0JmMEpBaGdnRHYwSkFnUWdEaW9DRlAwZ0FTQU9LZ0lrL1NBQ0lBNHFBalQ5SUFQOTVnSDk1QUg5NUFIOTVBRWlFZjFmL1F3QUFBQUFBRUNQUUFBQUFBQUFRSTlBSWhMOThnRWlFLzBoQVNJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaERnSi9JQlA5SVFBaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTC9SRWdEdjBjQVFKL0lCRWdFZjBOQ0FrS0N3d05EZzhBQUFBQUFBQUFBUDFmSUJMOThnRWlFZjBoQUNJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUF2OUhBSUNmeUFSL1NFQkloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEMvMGNBeUVTSUJRaER3c2dBeUFWYWlBQklCWkJCSFJxL1FBQUFDQVMvYlVCSWhIOUd3QWdFZjBiQVdvZ0VmMGJBbW9nRWYwYkEyb2lEallDQUNBT0lBb2dDaUFPU2hzaENpQU9JQTBnRFNBT1NCc2hEU0FDUVFGcUlnSWdDMGNOQUFzTUF3c0NmeUFGS2dJSXUvMFVJQVVxQWhpNy9TSUIvUXdBQUFBQUFFQ1BRQUFBQUFBQVFJOUEvZklCSWhIOUlRRWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUTRDZnlBUi9TRUFJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVDQW44Z0JTb0NLTHRFQUFBQUFBQkFqMENpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFRlFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUUlnQXYwUklBNzlIQUVnQmYwY0FpRVNJQXdoQlFOQUlBTWdCVUVDZENJQ2FpQUJJQUFnQW1vb0FnQkJCSFJxL1FBQUFDQVMvYlVCSWhIOUd3QWdFZjBiQVdvZ0VmMGJBbW9pQWpZQ0FDQUNJQW9nQWlBS1NCc2hDaUFDSUEwZ0FpQU5TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnRFFSQVFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUUlnRENFQkEwQWdBeUFCUVFKMElnVnFBbjhnQWlBQUlBVnFLQUlBUVFKMGFpb0NBTHRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lJT05nSUFJQW9nRGlBS0lBNUlHeUVLSUEwZ0RpQU5JQTVLR3lFTklBRkJBV29pQVNBTFJ3MEFDd3dDQ3lBUFJRUkFJQXNnREUwTkFTQUZLZ0lvSVJjZ0JTb0NHQ0VZSUFVcUFnZ2hHVUg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VGQTBBQ2Z5QVhJQUVnQUNBRlFRSjBJZ2RxS0FJQVFRUjBhaUlDS2dJSWxDQVpJQUlxQWdDVUlCZ2dBaW9DQkpTU2tydEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVPSUFNZ0Iyb2dEallDQUNBS0lBNGdDaUFPU0JzaENpQU5JQTRnRFNBT1Noc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dDeUFNVFEwQVFYOGhEMEg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VDQTBBZ0R5QUhJQUFnQWtFQ2RDSVVhaWdDQUVFQ2RDSVZhaWdDQUNJT1J3UkFJQVg5Q1FJNElBZ2dEa0VHZEdvaUQvMEpBZ3dnRHlvQ0hQMGdBU0FQS2dJcy9TQUNJQThxQWp6OUlBUDk1Z0VnQmYwSkFpZ2dELzBKQWdnZ0R5b0NHUDBnQVNBUEtnSW8vU0FDSUE4cUFqajlJQVA5NWdFZ0JmMEpBZ2dnRC8wSkFnQWdEeW9DRVAwZ0FTQVBLZ0lnL1NBQ0lBOHFBakQ5SUFQOTVnRWdCZjBKQWhnZ0QvMEpBZ1FnRHlvQ0ZQMGdBU0FQS2dJay9TQUNJQThxQWpUOUlBUDk1Z0g5NUFIOTVBSDk1QUVoRVNBT0lROExJQU1nRkdvQ2Z5QVIvUjhESUFFZ0ZVRUNkQ0lPUVF4eWFpb0NBSlFnRWYwZkFpQUJJQTVCQ0hKcUtnSUFsQ0FSL1I4QUlBRWdEbW9xQWdDVUlCSDlId0VnQVNBT1FRUnlhaW9DQUpTU2twSzdSQUFBQUFBQUFMQkFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNpRGpZQ0FDQUtJQTRnQ2lBT1NCc2hDaUFOSUE0Z0RTQU9TaHNoRFNBQ1FRRnFJZ0lnQzBjTkFBc01BUXRCaUlDQWdIZ2hEVUg0Ly8vL0J5RUtDeUFMSUF4TEJFQWdDVUVCYTdNZ0RiSWdDcktUbFNFWElBd2hEUU5BQW44Z0Z5QURJQTFCQW5ScUlnRW9BZ0FnQ211eWxDSVlpME1BQUFCUFhRUkFJQmlvREFFTFFZQ0FnSUI0Q3lFT0lBRWdEallDQUNBRUlBNUJBblJxSWdFZ0FTZ0NBRUVCYWpZQ0FDQU5RUUZxSWcwZ0MwY05BQXNMSUFsQkFrOEVRQ0FFS0FJQUlRMUJBU0VLQTBBZ0JDQUtRUUowYWlJQklBRW9BZ0FnRFdvaURUWUNBQ0FLUVFGcUlnb2dDVWNOQUFzTElBeEJBRW9FUUNBTUlRb0RRQ0FHSUFwQkFXc2lBVUVDZENJQ2FpQUFJQUpxS0FJQU5nSUFJQXBCQVVzaEFpQUJJUW9nQWcwQUN3c2dDeUFNU2dSQUlBc2hDZ05BSUFZZ0N5QUVJQU1nQ2tFQmF5SUtRUUowSWdGcUtBSUFRUUowYWlJQ0tBSUFJZ1ZyUVFKMGFpQUFJQUZxS0FJQU5nSUFJQUlnQlVFQmF6WUNBQ0FLSUF4S0RRQUxDd3NFQUVFQUN3PT1cIjtcclxuXHJcbmNvbnN0IFNvcnRlcldhc21Ob1NJTUQgPSBcIkFHRnpiUUVBQUFBQUR3aGtlV3hwYm1zdU1BRUVBQUFBQUFFWEFtQUFBR0FRZjM5L2YzOS9mMzkvZjM5L2YzOS9md0FDRWdFRFpXNTJCbTFsYlc5eWVRSURBSUNBQkFNREFnQUJCejRERVY5ZmQyRnpiVjlqWVd4c1gyTjBiM0p6QUFBWVgxOTNZWE50WDJGd2NHeDVYMlJoZEdGZmNtVnNiMk56QUFBTGMyOXlkRWx1WkdWNFpYTUFBUXFpRHdJQ0FBdWNEd01CZkFkOUJuOGdDeUFLYXlFTUFrQUNRQ0FPQkVBZ0RRUkFRZmovLy84SElRcEJpSUNBZ0hnaERTQUxJQXhORFFNZ0RDRUZBMEFnQXlBRlFRSjBJZ0ZxSUFJZ0FDQUJhaWdDQUVFQ2RHb29BZ0FpQVRZQ0FDQUJJQW9nQVNBS1NCc2hDaUFCSUEwZ0FTQU5TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01Bd3NnRHdSQUlBc2dERTBOQWtGL0lROUIrUC8vL3djaENrR0lnSUNBZUNFTklBd2hBZ05BSUE4Z0J5QUFJQUpCQW5RaUdtb29BZ0JCQW5RaUcyb29BZ0FpRGtjRVFBSi9JQVVxQWpnaUVTQUlJQTVCQm5ScUlnOHFBanlVSUFVcUFpZ2lFaUFQS2dJNGxDQUZLZ0lJSWhNZ0R5b0NNSlFnQlNvQ0dDSVVJQThxQWpTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVJnQ2Z5QVJJQThxQWl5VUlCSWdEeW9DS0pRZ0V5QVBLZ0lnbENBVUlBOHFBaVNVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUmtDZnlBUklBOHFBaHlVSUJJZ0R5b0NHSlFnRXlBUEtnSVFsQ0FVSUE4cUFoU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSd0NmeUFSSUE4cUFneVVJQklnRHlvQ0NKUWdFeUFQS2dJQWxDQVVJQThxQWdTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVIwZ0RpRVBDeUFESUJwcUlBRWdHMEVDZEdvaURpZ0NCQ0FjYkNBT0tBSUFJQjFzYWlBT0tBSUlJQmxzYWlBT0tBSU1JQmhzYWlJT05nSUFJQTRnQ2lBS0lBNUtHeUVLSUE0Z0RTQU5JQTVJR3lFTklBSkJBV29pQWlBTFJ3MEFDd3dEQ3dKL0lBVXFBaWk3UkFBQUFBQUFRSTlBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaEFnSi9JQVVxQWhpN1JBQUFBQUFBUUk5QW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hCeUFMSUF4TkFuOGdCU29DQ0x0RUFBQUFBQUJBajBDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RVBRZmovLy84SElRcEJpSUNBZ0hnaERRMENJQXdoQlFOQUlBTWdCVUVDZENJSWFpQUJJQUFnQ0dvb0FnQkJCSFJxSWdnb0FnUWdCMndnQ0NnQ0FDQVBiR29nQ0NnQ0NDQUNiR29pQ0RZQ0FDQUlJQW9nQ0NBS1NCc2hDaUFJSUEwZ0NDQU5TaHNoRFNBRlFRRnFJZ1VnQzBjTkFBc01BZ3NnRFFSQVFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUUlnRENFRkEwQWdBeUFGUVFKMElnRnFBbjhnQWlBQUlBRnFLQUlBUVFKMGFpb0NBTHRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lJT05nSUFJQW9nRGlBS0lBNUlHeUVLSUEwZ0RpQU5JQTVLR3lFTklBVkJBV29pQlNBTFJ3MEFDd3dDQ3lBUFJRUkFJQXNnREUwTkFTQUZLZ0lvSVJFZ0JTb0NHQ0VTSUFVcUFnZ2hFMEg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VGQTBBQ2Z5QVJJQUVnQUNBRlFRSjBJZ2RxS0FJQVFRUjBhaUlDS2dJSWxDQVRJQUlxQWdDVUlCSWdBaW9DQkpTU2tydEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVPSUFNZ0Iyb2dEallDQUNBS0lBNGdDaUFPU0JzaENpQU5JQTRnRFNBT1Noc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dDeUFNVFEwQVFYOGhEMEg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdEQ0VDQTBBZ0R5QUhJQUFnQWtFQ2RDSVlhaWdDQUVFQ2RDSVphaWdDQUNJT1J3UkFJQVVxQWpnaUVTQUlJQTVCQm5ScUlnOHFBanlVSUFVcUFpZ2lFaUFQS2dJNGxDQUZLZ0lJSWhNZ0R5b0NNSlFnQlNvQ0dDSVVJQThxQWpTVWtwS1NJUlVnRVNBUEtnSXNsQ0FTSUE4cUFpaVVJQk1nRHlvQ0lKUWdGQ0FQS2dJa2xKS1NraUVXSUJFZ0R5b0NISlFnRWlBUEtnSVlsQ0FUSUE4cUFoQ1VJQlFnRHlvQ0ZKU1NrcEloRnlBUklBOHFBZ3lVSUJJZ0R5b0NDSlFnRXlBUEtnSUFsQ0FVSUE4cUFnU1VrcEtTSVJFZ0RpRVBDeUFESUJocUFuOGdGU0FCSUJsQkFuUnFJZzRxQWd5VUlCWWdEaW9DQ0pRZ0VTQU9LZ0lBbENBWElBNHFBZ1NVa3BLU3UwUUFBQUFBQUFDd1FLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJZzQyQWdBZ0NpQU9JQW9nRGtnYklRb2dEU0FPSUEwZ0Rrb2JJUTBnQWtFQmFpSUNJQXRIRFFBTERBRUxRWWlBZ0lCNElRMUIrUC8vL3djaENnc2dDeUFNU3dSQUlBbEJBV3V6SUEyeUlBcXlrNVVoRVNBTUlRMERRQUovSUJFZ0F5QU5RUUowYWlJQktBSUFJQXByc3BRaUVvdERBQUFBVDEwRVFDQVNxQXdCQzBHQWdJQ0FlQXNoRGlBQklBNDJBZ0FnQkNBT1FRSjBhaUlCSUFFb0FnQkJBV28yQWdBZ0RVRUJhaUlOSUF0SERRQUxDeUFKUVFKUEJFQWdCQ2dDQUNFTlFRRWhDZ05BSUFRZ0NrRUNkR29pQVNBQktBSUFJQTFxSWcwMkFnQWdDa0VCYWlJS0lBbEhEUUFMQ3lBTVFRQktCRUFnRENFS0EwQWdCaUFLUVFGcklnRkJBblFpQW1vZ0FDQUNhaWdDQURZQ0FDQUtRUUZMSUFFaENnMEFDd3NnQ3lBTVNnUkFJQXNoQ2dOQUlBWWdDeUFFSUFNZ0NrRUJheUlLUVFKMElnRnFLQUlBUVFKMGFpSUNLQUlBSWdWclFRSjBhaUFBSUFGcUtBSUFOZ0lBSUFJZ0JVRUJhellDQUNBS0lBeEtEUUFMQ3dzPVwiO1xyXG5cclxuY29uc3QgU29ydGVyV2FzbU5vblNoYXJlZCA9IFwiQUdGemJRRUFBQUFBRHdoa2VXeHBibXN1TUFFRUFBQUFBQUVYQW1BQUFHQVFmMzkvZjM5L2YzOS9mMzkvZjM5L2Z3QUNEd0VEWlc1MkJtMWxiVzl5ZVFJQUFBTURBZ0FCQno0REVWOWZkMkZ6YlY5allXeHNYMk4wYjNKekFBQVlYMTkzWVhOdFgyRndjR3g1WDJSaGRHRmZjbVZzYjJOekFBQUxjMjl5ZEVsdVpHVjRaWE1BQVFyckR3SUNBQXZsRHdRQmZBTjdCMzBEZnlBTElBcHJJUXdDUUFKQUlBNEVRQ0FOQkVCQitQLy8vd2NoQ2tHSWdJQ0FlQ0VOSUFzZ0RFME5BeUFNSVFVRFFDQURJQVZCQW5RaUFXb2dBaUFBSUFGcUtBSUFRUUowYWlnQ0FDSUJOZ0lBSUFFZ0NpQUJJQXBJR3lFS0lBRWdEU0FCSUExS0d5RU5JQVZCQVdvaUJTQUxSdzBBQ3d3REN5QVBCRUFnQ3lBTVRRMENRWDhoRDBINC8vLy9CeUVLUVlpQWdJQjRJUTBnRENFQ0EwQWdEeUFISUFBZ0FrRUNkQ0ljYWlnQ0FDSWRRUUowYWlnQ0FDSWJSd1JBQW44Z0JmMEpBamdnQ0NBYlFRWjBhaUlPL1FrQ0RDQU9LZ0ljL1NBQklBNHFBaXo5SUFJZ0Rpb0NQUDBnQS8zbUFTQUYvUWtDS0NBTy9Ra0NDQ0FPS2dJWS9TQUJJQTRxQWlqOUlBSWdEaW9DT1AwZ0EvM21BU0FGL1FrQ0NDQU8vUWtDQUNBT0tnSVEvU0FCSUE0cUFpRDlJQUlnRGlvQ01QMGdBLzNtQVNBRi9Ra0NHQ0FPL1FrQ0JDQU9LZ0lVL1NBQklBNHFBaVQ5SUFJZ0Rpb0NOUDBnQS8zbUFmM2tBZjNrQWYza0FTSVIvVi85REFBQUFBQUFRSTlBQUFBQUFBQkFqMEFpRXYzeUFTSVQvU0VCSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFT0FuOGdFLzBoQUNJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUF2OUVTQU8vUndCQW44Z0VTQVIvUTBJQ1FvTERBME9Ed0FCQWdNQUFRSUQvVjhnRXYzeUFTSVIvU0VBSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Qy8wY0FnSi9JQkg5SVFFaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTC9Sd0RJUklnR3lFUEN5QURJQnhxSUFFZ0hVRUVkR3I5QUFBQUlCTDl0UUVpRWYwYkFDQVIvUnNCYWlBUi9Sc0NhaUFSL1JzRGFpSU9OZ0lBSUE0Z0NpQUtJQTVLR3lFS0lBNGdEU0FOSUE1SUd5RU5JQUpCQVdvaUFpQUxSdzBBQ3d3REN3Si9JQVVxQWdpNy9SUWdCU29DR0x2OUlnSDlEQUFBQUFBQVFJOUFBQUFBQUFCQWowRDk4Z0VpRWYwaEFTSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2hEZ0ovSUJIOUlRQWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xBbjhnQlNvQ0tMdEVBQUFBQUFCQWowQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUVGUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRTDlFU0FPL1J3QklBWDlIQUloRWlBTUlRVURRQ0FESUFWQkFuUWlBbW9nQVNBQUlBSnFLQUlBUVFSMGF2MEFBQUFnRXYyMUFTSVIvUnNBSUJIOUd3RnFJQkg5R3dKcUlnSTJBZ0FnQWlBS0lBSWdDa2diSVFvZ0FpQU5JQUlnRFVvYklRMGdCVUVCYWlJRklBdEhEUUFMREFJTElBMEVRRUg0Ly8vL0J5RUtRWWlBZ0lCNElRMGdDeUFNVFEwQ0lBd2hCUU5BSUFNZ0JVRUNkQ0lCYWdKL0lBSWdBQ0FCYWlnQ0FFRUNkR29xQWdDN1JBQUFBQUFBQUxCQW9pSVFtVVFBQUFBQUFBRGdRV01FUUNBUXFnd0JDMEdBZ0lDQWVBc2lEallDQUNBS0lBNGdDaUFPU0JzaENpQU5JQTRnRFNBT1Noc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dEMFVFUUNBTElBeE5EUUVnQlNvQ0tDRVVJQVVxQWhnaEZTQUZLZ0lJSVJaQitQLy8vd2NoQ2tHSWdJQ0FlQ0VOSUF3aEJRTkFBbjhnRkNBQklBQWdCVUVDZENJSGFpZ0NBRUVFZEdvaUFpb0NDSlFnRmlBQ0tnSUFsQ0FWSUFJcUFnU1VrcEs3UkFBQUFBQUFBTEJBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaERpQURJQWRxSUE0MkFnQWdDaUFPSUFvZ0RrZ2JJUW9nRFNBT0lBMGdEa29iSVEwZ0JVRUJhaUlGSUF0SERRQUxEQUlMSUFzZ0RFME5BRUYvSVE5QitQLy8vd2NoQ2tHSWdJQ0FlQ0VOSUF3aEFnTkFJQThnQnlBQUlBSkJBblFpRzJvb0FnQkJBblFpSEdvb0FnQWlEa2NFUUNBRktnSTRJaFFnQ0NBT1FRWjBhaUlQS2dJOGxDQUZLZ0lvSWhVZ0R5b0NPSlFnQlNvQ0NDSVdJQThxQWpDVUlBVXFBaGdpRnlBUEtnSTBsSktTa2lFWUlCUWdEeW9DTEpRZ0ZTQVBLZ0lvbENBV0lBOHFBaUNVSUJjZ0R5b0NKSlNTa3BJaEdTQVVJQThxQWh5VUlCVWdEeW9DR0pRZ0ZpQVBLZ0lRbENBWElBOHFBaFNVa3BLU0lSb2dGQ0FQS2dJTWxDQVZJQThxQWdpVUlCWWdEeW9DQUpRZ0Z5QVBLZ0lFbEpLU2tpRVVJQTRoRHdzZ0F5QWJhZ0ovSUJnZ0FTQWNRUUowYWlJT0tnSU1sQ0FaSUE0cUFnaVVJQlFnRGlvQ0FKUWdHaUFPS2dJRWxKS1NrcnRFQUFBQUFBQUFzRUNpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lJT05nSUFJQW9nRGlBS0lBNUlHeUVLSUEwZ0RpQU5JQTVLR3lFTklBSkJBV29pQWlBTFJ3MEFDd3dCQzBHSWdJQ0FlQ0VOUWZqLy8vOEhJUW9MSUFzZ0RFc0VRQ0FKUVFGcnN5QU5zaUFLc3BPVklSUWdEQ0VOQTBBQ2Z5QVVJQU1nRFVFQ2RHb2lBU2dDQUNBS2E3S1VJaFdMUXdBQUFFOWRCRUFnRmFnTUFRdEJnSUNBZ0hnTElRNGdBU0FPTmdJQUlBUWdEa0VDZEdvaUFTQUJLQUlBUVFGcU5nSUFJQTFCQVdvaURTQUxSdzBBQ3dzZ0NVRUNUd1JBSUFRb0FnQWhEVUVCSVFvRFFDQUVJQXBCQW5ScUlnRWdBU2dDQUNBTmFpSU5OZ0lBSUFwQkFXb2lDaUFKUncwQUN3c2dERUVBU2dSQUlBd2hDZ05BSUFZZ0NrRUJheUlCUVFKMElnSnFJQUFnQW1vb0FnQTJBZ0FnQ2tFQlN5QUJJUW9OQUFzTElBc2dERW9FUUNBTElRb0RRQ0FHSUFzZ0JDQURJQXBCQVdzaUNrRUNkQ0lCYWlnQ0FFRUNkR29pQWlnQ0FDSUZhMEVDZEdvZ0FDQUJhaWdDQURZQ0FDQUNJQVZCQVdzMkFnQWdDaUFNU2cwQUN3c0xcIjtcclxuXHJcbmNvbnN0IFNvcnRlcldhc21Ob1NJTUROb25TaGFyZWQgPSBcIkFHRnpiUUVBQUFBQUR3aGtlV3hwYm1zdU1BRUVBQUFBQUFFWEFtQUFBR0FRZjM5L2YzOS9mMzkvZjM5L2YzOS9md0FDRHdFRFpXNTJCbTFsYlc5eWVRSUFBQU1EQWdBQkJ6NERFVjlmZDJGemJWOWpZV3hzWDJOMGIzSnpBQUFZWDE5M1lYTnRYMkZ3Y0d4NVgyUmhkR0ZmY21Wc2IyTnpBQUFMYzI5eWRFbHVaR1Y0WlhNQUFRcWlEd0lDQUF1Y0R3TUJmQWQ5Qm44Z0N5QUtheUVNQWtBQ1FDQU9CRUFnRFFSQVFmai8vLzhISVFwQmlJQ0FnSGdoRFNBTElBeE5EUU1nRENFRkEwQWdBeUFGUVFKMElnRnFJQUlnQUNBQmFpZ0NBRUVDZEdvb0FnQWlBVFlDQUNBQklBb2dBU0FLU0JzaENpQUJJQTBnQVNBTlNoc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUF3c2dEd1JBSUFzZ0RFME5Ba0YvSVE5QitQLy8vd2NoQ2tHSWdJQ0FlQ0VOSUF3aEFnTkFJQThnQnlBQUlBSkJBblFpR21vb0FnQkJBblFpRzJvb0FnQWlEa2NFUUFKL0lBVXFBamdpRVNBSUlBNUJCblJxSWc4cUFqeVVJQVVxQWlnaUVpQVBLZ0k0bENBRktnSUlJaE1nRHlvQ01KUWdCU29DR0NJVUlBOHFBalNVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUmdDZnlBUklBOHFBaXlVSUJJZ0R5b0NLSlFnRXlBUEtnSWdsQ0FVSUE4cUFpU1VrcEtTdTBRQUFBQUFBRUNQUUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElSa0NmeUFSSUE4cUFoeVVJQklnRHlvQ0dKUWdFeUFQS2dJUWxDQVVJQThxQWhTVWtwS1N1MFFBQUFBQUFFQ1BRS0lpRUpsRUFBQUFBQUFBNEVGakJFQWdFS29NQVF0QmdJQ0FnSGdMSVJ3Q2Z5QVJJQThxQWd5VUlCSWdEeW9DQ0pRZ0V5QVBLZ0lBbENBVUlBOHFBZ1NVa3BLU3UwUUFBQUFBQUVDUFFLSWlFSmxFQUFBQUFBQUE0RUZqQkVBZ0VLb01BUXRCZ0lDQWdIZ0xJUjBnRGlFUEN5QURJQnBxSUFFZ0cwRUNkR29pRGlnQ0JDQWNiQ0FPS0FJQUlCMXNhaUFPS0FJSUlCbHNhaUFPS0FJTUlCaHNhaUlPTmdJQUlBNGdDaUFLSUE1S0d5RUtJQTRnRFNBTklBNUlHeUVOSUFKQkFXb2lBaUFMUncwQUN3d0RDd0ovSUFVcUFpaTdSQUFBQUFBQVFJOUFvaUlRbVVRQUFBQUFBQURnUVdNRVFDQVFxZ3dCQzBHQWdJQ0FlQXNoQWdKL0lBVXFBaGk3UkFBQUFBQUFRSTlBb2lJUW1VUUFBQUFBQUFEZ1FXTUVRQ0FRcWd3QkMwR0FnSUNBZUFzaEJ5QUxJQXhOQW44Z0JTb0NDTHRFQUFBQUFBQkFqMENpSWhDWlJBQUFBQUFBQU9CQll3UkFJQkNxREFFTFFZQ0FnSUI0Q3lFUFFmai8vLzhISVFwQmlJQ0FnSGdoRFEwQ0lBd2hCUU5BSUFNZ0JVRUNkQ0lJYWlBQklBQWdDR29vQWdCQkJIUnFJZ2dvQWdRZ0Iyd2dDQ2dDQUNBUGJHb2dDQ2dDQ0NBQ2JHb2lDRFlDQUNBSUlBb2dDQ0FLU0JzaENpQUlJQTBnQ0NBTlNoc2hEU0FGUVFGcUlnVWdDMGNOQUFzTUFnc2dEUVJBUWZqLy8vOEhJUXBCaUlDQWdIZ2hEU0FMSUF4TkRRSWdEQ0VGQTBBZ0F5QUZRUUowSWdGcUFuOGdBaUFBSUFGcUtBSUFRUUowYWlvQ0FMdEVBQUFBQUFBQXNFQ2lJaENaUkFBQUFBQUFBT0JCWXdSQUlCQ3FEQUVMUVlDQWdJQjRDeUlPTmdJQUlBb2dEaUFLSUE1SUd5RUtJQTBnRGlBTklBNUtHeUVOSUFWQkFXb2lCU0FMUncwQUN3d0NDeUFQUlFSQUlBc2dERTBOQVNBRktnSW9JUkVnQlNvQ0dDRVNJQVVxQWdnaEUwSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUZBMEFDZnlBUklBRWdBQ0FGUVFKMElnZHFLQUlBUVFSMGFpSUNLZ0lJbENBVElBSXFBZ0NVSUJJZ0Fpb0NCSlNTa3J0RUFBQUFBQUFBc0VDaUloQ1pSQUFBQUFBQUFPQkJZd1JBSUJDcURBRUxRWUNBZ0lCNEN5RU9JQU1nQjJvZ0RqWUNBQ0FLSUE0Z0NpQU9TQnNoQ2lBTklBNGdEU0FPU2hzaERTQUZRUUZxSWdVZ0MwY05BQXNNQWdzZ0N5QU1UUTBBUVg4aEQwSDQvLy8vQnlFS1FZaUFnSUI0SVEwZ0RDRUNBMEFnRHlBSElBQWdBa0VDZENJWWFpZ0NBRUVDZENJWmFpZ0NBQ0lPUndSQUlBVXFBamdpRVNBSUlBNUJCblJxSWc4cUFqeVVJQVVxQWlnaUVpQVBLZ0k0bENBRktnSUlJaE1nRHlvQ01KUWdCU29DR0NJVUlBOHFBalNVa3BLU0lSVWdFU0FQS2dJc2xDQVNJQThxQWlpVUlCTWdEeW9DSUpRZ0ZDQVBLZ0lrbEpLU2tpRVdJQkVnRHlvQ0hKUWdFaUFQS2dJWWxDQVRJQThxQWhDVUlCUWdEeW9DRkpTU2twSWhGeUFSSUE4cUFneVVJQklnRHlvQ0NKUWdFeUFQS2dJQWxDQVVJQThxQWdTVWtwS1NJUkVnRGlFUEN5QURJQmhxQW44Z0ZTQUJJQmxCQW5ScUlnNHFBZ3lVSUJZZ0Rpb0NDSlFnRVNBT0tnSUFsQ0FYSUE0cUFnU1VrcEtTdTBRQUFBQUFBQUN3UUtJaUVKbEVBQUFBQUFBQTRFRmpCRUFnRUtvTUFRdEJnSUNBZ0hnTElnNDJBZ0FnQ2lBT0lBb2dEa2diSVFvZ0RTQU9JQTBnRGtvYklRMGdBa0VCYWlJQ0lBdEhEUUFMREFFTFFZaUFnSUI0SVExQitQLy8vd2NoQ2dzZ0N5QU1Td1JBSUFsQkFXdXpJQTJ5SUFxeWs1VWhFU0FNSVEwRFFBSi9JQkVnQXlBTlFRSjBhaUlCS0FJQUlBcHJzcFFpRW90REFBQUFUMTBFUUNBU3FBd0JDMEdBZ0lDQWVBc2hEaUFCSUE0MkFnQWdCQ0FPUVFKMGFpSUJJQUVvQWdCQkFXbzJBZ0FnRFVFQmFpSU5JQXRIRFFBTEN5QUpRUUpQQkVBZ0JDZ0NBQ0VOUVFFaENnTkFJQVFnQ2tFQ2RHb2lBU0FCS0FJQUlBMXFJZzAyQWdBZ0NrRUJhaUlLSUFsSERRQUxDeUFNUVFCS0JFQWdEQ0VLQTBBZ0JpQUtRUUZySWdGQkFuUWlBbW9nQUNBQ2FpZ0NBRFlDQUNBS1FRRkxJQUVoQ2cwQUN3c2dDeUFNU2dSQUlBc2hDZ05BSUFZZ0N5QUVJQU1nQ2tFQmF5SUtRUUowSWdGcUtBSUFRUUowYWlJQ0tBSUFJZ1ZyUVFKMGFpQUFJQUZxS0FJQU5nSUFJQUlnQlVFQmF6WUNBQ0FLSUF4S0RRQUxDd3M9XCI7XHJcblxyXG4vKipcclxuICogU29ydCB3b3JrZXIgZnVuY3Rpb24gdGhhdCBydW5zIGluIGEgV2ViIFdvcmtlclxyXG4gKiBIYW5kbGVzIHRoZSBhY3R1YWwgc29ydGluZyBsb2dpYyB1c2luZyBXZWJBc3NlbWJseVxyXG4gKi9cclxuZnVuY3Rpb24gc29ydFdvcmtlcihzZWxmKSB7XHJcblxyXG4gICAgbGV0IHdhc21JbnN0YW5jZTtcclxuICAgIGxldCB3YXNtTWVtb3J5O1xyXG4gICAgbGV0IHVzZVNoYXJlZE1lbW9yeTtcclxuICAgIGxldCBpbnRlZ2VyQmFzZWRTb3J0O1xyXG4gICAgbGV0IGR5bmFtaWNNb2RlO1xyXG4gICAgbGV0IHNwbGF0Q291bnQ7XHJcbiAgICBsZXQgaW5kZXhlc1RvU29ydE9mZnNldDtcclxuICAgIGxldCBzb3J0ZWRJbmRleGVzT2Zmc2V0O1xyXG4gICAgbGV0IHNjZW5lSW5kZXhlc09mZnNldDtcclxuICAgIGxldCB0cmFuc2Zvcm1zT2Zmc2V0O1xyXG4gICAgbGV0IHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0O1xyXG4gICAgbGV0IG1hcHBlZERpc3RhbmNlc09mZnNldDtcclxuICAgIGxldCBmcmVxdWVuY2llc09mZnNldDtcclxuICAgIGxldCBjZW50ZXJzT2Zmc2V0O1xyXG4gICAgbGV0IG1vZGVsVmlld1Byb2pPZmZzZXQ7XHJcbiAgICBsZXQgY291bnRzWmVybztcclxuICAgIGxldCBzb3J0ZWRJbmRleGVzT3V0O1xyXG4gICAgbGV0IGRpc3RhbmNlTWFwUmFuZ2U7XHJcbiAgICBsZXQgdXBsb2FkZWRTcGxhdENvdW50O1xyXG4gICAgbGV0IENvbnN0YW50cztcclxuXHJcbiAgICBmdW5jdGlvbiBzb3J0KHNwbGF0U29ydENvdW50LCBzcGxhdFJlbmRlckNvdW50LCBtb2RlbFZpZXdQcm9qLFxyXG4gICAgICAgICAgICAgICAgICB1c2VQcmVjb21wdXRlZERpc3RhbmNlcywgY29weUluZGV4ZXNUb1NvcnQsIGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcywgY29weVRyYW5zZm9ybXMpIHtcclxuICAgICAgICBjb25zdCBzb3J0U3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIGlmICghdXNlU2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ZXNUb1NvcnQgPSBuZXcgVWludDMyQXJyYXkod2FzbU1lbW9yeSwgaW5kZXhlc1RvU29ydE9mZnNldCwgY29weUluZGV4ZXNUb1NvcnQuYnl0ZUxlbmd0aCAvIENvbnN0YW50cy5CeXRlc1BlckludCk7XHJcbiAgICAgICAgICAgIGluZGV4ZXNUb1NvcnQuc2V0KGNvcHlJbmRleGVzVG9Tb3J0KTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtcyA9IG5ldyBGbG9hdDMyQXJyYXkod2FzbU1lbW9yeSwgdHJhbnNmb3Jtc09mZnNldCwgY29weVRyYW5zZm9ybXMuYnl0ZUxlbmd0aCAvIENvbnN0YW50cy5CeXRlc1BlckZsb2F0KTtcclxuICAgICAgICAgICAgdHJhbnNmb3Jtcy5zZXQoY29weVRyYW5zZm9ybXMpO1xyXG4gICAgICAgICAgICBpZiAodXNlUHJlY29tcHV0ZWREaXN0YW5jZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwcmVjb21wdXRlZERpc3RhbmNlcztcclxuICAgICAgICAgICAgICAgIGlmIChpbnRlZ2VyQmFzZWRTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlY29tcHV0ZWREaXN0YW5jZXMgPSBuZXcgSW50MzJBcnJheSh3YXNtTWVtb3J5LCBwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcy5ieXRlTGVuZ3RoIC8gQ29uc3RhbnRzLkJ5dGVzUGVySW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlY29tcHV0ZWREaXN0YW5jZXMgPSBuZXcgRmxvYXQzMkFycmF5KHdhc21NZW1vcnksIHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXMuYnl0ZUxlbmd0aCAvIENvbnN0YW50cy5CeXRlc1BlckZsb2F0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHByZWNvbXB1dGVkRGlzdGFuY2VzLnNldChjb3B5UHJlY29tcHV0ZWREaXN0YW5jZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWNvdW50c1plcm8pIGNvdW50c1plcm8gPSBuZXcgVWludDMyQXJyYXkoZGlzdGFuY2VNYXBSYW5nZSk7XHJcbiAgICAgICAgbmV3IEZsb2F0MzJBcnJheSh3YXNtTWVtb3J5LCBtb2RlbFZpZXdQcm9qT2Zmc2V0LCAxNikuc2V0KG1vZGVsVmlld1Byb2opO1xyXG4gICAgICAgIG5ldyBVaW50MzJBcnJheSh3YXNtTWVtb3J5LCBmcmVxdWVuY2llc09mZnNldCwgZGlzdGFuY2VNYXBSYW5nZSkuc2V0KGNvdW50c1plcm8pO1xyXG4gICAgICAgIHdhc21JbnN0YW5jZS5leHBvcnRzLnNvcnRJbmRleGVzKGluZGV4ZXNUb1NvcnRPZmZzZXQsIGNlbnRlcnNPZmZzZXQsIHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZERpc3RhbmNlc09mZnNldCwgZnJlcXVlbmNpZXNPZmZzZXQsIG1vZGVsVmlld1Byb2pPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkSW5kZXhlc09mZnNldCwgc2NlbmVJbmRleGVzT2Zmc2V0LCB0cmFuc2Zvcm1zT2Zmc2V0LCBkaXN0YW5jZU1hcFJhbmdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGF0U29ydENvdW50LCBzcGxhdFJlbmRlckNvdW50LCBzcGxhdENvdW50LCB1c2VQcmVjb21wdXRlZERpc3RhbmNlcywgaW50ZWdlckJhc2VkU29ydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljTW9kZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNvcnRNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAnc29ydERvbmUnOiB0cnVlLFxyXG4gICAgICAgICAgICAnc3BsYXRTb3J0Q291bnQnOiBzcGxhdFNvcnRDb3VudCxcclxuICAgICAgICAgICAgJ3NwbGF0UmVuZGVyQ291bnQnOiBzcGxhdFJlbmRlckNvdW50LFxyXG4gICAgICAgICAgICAnc29ydFRpbWUnOiAwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIXVzZVNoYXJlZE1lbW9yeSkge1xyXG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRJbmRleGVzID0gbmV3IFVpbnQzMkFycmF5KHdhc21NZW1vcnksIHNvcnRlZEluZGV4ZXNPZmZzZXQsIHNwbGF0UmVuZGVyQ291bnQpO1xyXG4gICAgICAgICAgICBpZiAoIXNvcnRlZEluZGV4ZXNPdXQgfHwgc29ydGVkSW5kZXhlc091dC5sZW5ndGggPCBzcGxhdFJlbmRlckNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICBzb3J0ZWRJbmRleGVzT3V0ID0gbmV3IFVpbnQzMkFycmF5KHNwbGF0UmVuZGVyQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNvcnRlZEluZGV4ZXNPdXQuc2V0KHNvcnRlZEluZGV4ZXMpO1xyXG4gICAgICAgICAgICBzb3J0TWVzc2FnZS5zb3J0ZWRJbmRleGVzID0gc29ydGVkSW5kZXhlc091dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc29ydEVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuXHJcbiAgICAgICAgc29ydE1lc3NhZ2Uuc29ydFRpbWUgPSBzb3J0RW5kVGltZSAtIHNvcnRTdGFydFRpbWU7XHJcblxyXG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoc29ydE1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHNlbGYub25tZXNzYWdlID0gKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5kYXRhLmNlbnRlcnMpIHtcclxuICAgICAgICAgICAgbGV0IGNlbnRlcnMgPSBlLmRhdGEuY2VudGVycztcclxuICAgICAgICAgICAgbGV0IHNjZW5lSW5kZXhlcyA9IGUuZGF0YS5zY2VuZUluZGV4ZXM7XHJcbiAgICAgICAgICAgIGlmIChpbnRlZ2VyQmFzZWRTb3J0KSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgSW50MzJBcnJheSh3YXNtTWVtb3J5LCBjZW50ZXJzT2Zmc2V0ICsgZS5kYXRhLnJhbmdlLmZyb20gKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQgKiA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5kYXRhLnJhbmdlLmNvdW50ICogNCkuc2V0KG5ldyBJbnQzMkFycmF5KGNlbnRlcnMpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkod2FzbU1lbW9yeSwgY2VudGVyc09mZnNldCArIGUuZGF0YS5yYW5nZS5mcm9tICogQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQgKiA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmRhdGEucmFuZ2UuY291bnQgKiA0KS5zZXQobmV3IEZsb2F0MzJBcnJheShjZW50ZXJzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgVWludDMyQXJyYXkod2FzbU1lbW9yeSwgc2NlbmVJbmRleGVzT2Zmc2V0ICsgZS5kYXRhLnJhbmdlLmZyb20gKiA0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZGF0YS5yYW5nZS5jb3VudCkuc2V0KG5ldyBVaW50MzJBcnJheShzY2VuZUluZGV4ZXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGxvYWRlZFNwbGF0Q291bnQgPSBlLmRhdGEucmFuZ2UuZnJvbSArIGUuZGF0YS5yYW5nZS5jb3VudDtcclxuICAgICAgICB9IGVsc2UgaWYgKGUuZGF0YS5zb3J0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlckNvdW50ID0gTWF0aC5taW4oZS5kYXRhLnNvcnQuc3BsYXRSZW5kZXJDb3VudCB8fCAwLCB1cGxvYWRlZFNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICBjb25zdCBzb3J0Q291bnQgPSBNYXRoLm1pbihlLmRhdGEuc29ydC5zcGxhdFNvcnRDb3VudCB8fCAwLCB1cGxvYWRlZFNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgICBjb25zdCB1c2VQcmVjb21wdXRlZERpc3RhbmNlcyA9IGUuZGF0YS5zb3J0LnVzZVByZWNvbXB1dGVkRGlzdGFuY2VzO1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvcHlJbmRleGVzVG9Tb3J0O1xyXG4gICAgICAgICAgICBsZXQgY29weVByZWNvbXB1dGVkRGlzdGFuY2VzO1xyXG4gICAgICAgICAgICBsZXQgY29weVRyYW5zZm9ybXM7XHJcbiAgICAgICAgICAgIGlmICghdXNlU2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgICAgICAgICAgICBjb3B5SW5kZXhlc1RvU29ydCA9IGUuZGF0YS5zb3J0LmluZGV4ZXNUb1NvcnQ7XHJcbiAgICAgICAgICAgICAgICBjb3B5VHJhbnNmb3JtcyA9IGUuZGF0YS5zb3J0LnRyYW5zZm9ybXM7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlUHJlY29tcHV0ZWREaXN0YW5jZXMpIGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcyA9IGUuZGF0YS5zb3J0LnByZWNvbXB1dGVkRGlzdGFuY2VzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNvcnQoc29ydENvdW50LCByZW5kZXJDb3VudCwgZS5kYXRhLnNvcnQubW9kZWxWaWV3UHJvaiwgdXNlUHJlY29tcHV0ZWREaXN0YW5jZXMsXHJcbiAgICAgICAgICAgICAgICAgY29weUluZGV4ZXNUb1NvcnQsIGNvcHlQcmVjb21wdXRlZERpc3RhbmNlcywgY29weVRyYW5zZm9ybXMpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5kYXRhLmluaXQpIHtcclxuICAgICAgICAgICAgLy8gWWVwLCB0aGlzIGlzIHN1cGVyIGhhY2t5IGFuZCBncm9zcyA6KFxyXG4gICAgICAgICAgICBDb25zdGFudHMgPSBlLmRhdGEuaW5pdC5Db25zdGFudHM7XHJcblxyXG4gICAgICAgICAgICBzcGxhdENvdW50ID0gZS5kYXRhLmluaXQuc3BsYXRDb3VudDtcclxuICAgICAgICAgICAgdXNlU2hhcmVkTWVtb3J5ID0gZS5kYXRhLmluaXQudXNlU2hhcmVkTWVtb3J5O1xyXG4gICAgICAgICAgICBpbnRlZ2VyQmFzZWRTb3J0ID0gZS5kYXRhLmluaXQuaW50ZWdlckJhc2VkU29ydDtcclxuICAgICAgICAgICAgZHluYW1pY01vZGUgPSBlLmRhdGEuaW5pdC5keW5hbWljTW9kZTtcclxuICAgICAgICAgICAgZGlzdGFuY2VNYXBSYW5nZSA9IGUuZGF0YS5pbml0LmRpc3RhbmNlTWFwUmFuZ2U7XHJcbiAgICAgICAgICAgIHVwbG9hZGVkU3BsYXRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBDRU5URVJTX0JZVEVTX1BFUl9FTlRSWSA9IGludGVnZXJCYXNlZFNvcnQgPyAoQ29uc3RhbnRzLkJ5dGVzUGVySW50ICogNCkgOiAoQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQgKiA0KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlcldhc21CeXRlcyA9IG5ldyBVaW50OEFycmF5KGUuZGF0YS5pbml0LnNvcnRlcldhc21CeXRlcyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXRyaXhTaXplID0gMTYgKiBDb25zdGFudHMuQnl0ZXNQZXJGbG9hdDtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JJbmRleGVzVG9Tb3J0ID0gc3BsYXRDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckludDtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JDZW50ZXJzID0gc3BsYXRDb3VudCAqIENFTlRFUlNfQllURVNfUEVSX0VOVFJZO1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvck1vZGVsVmlld1Byb2plY3Rpb25NYXRyaXggPSBtYXRyaXhTaXplO1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvclByZWNvbXB1dGVkRGlzdGFuY2VzID0gaW50ZWdlckJhc2VkU29ydCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3BsYXRDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckludCkgOiAoc3BsYXRDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckZsb2F0KTtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRGb3JNYXBwZWREaXN0YW5jZXMgPSBzcGxhdENvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVySW50O1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvclNvcnRlZEluZGV4ZXMgPSBzcGxhdENvdW50ICogQ29uc3RhbnRzLkJ5dGVzUGVySW50O1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZEZvckludGVybWVkaWF0ZVNvcnRCdWZmZXJzID0gaW50ZWdlckJhc2VkU29ydCA/IChkaXN0YW5jZU1hcFJhbmdlICogQ29uc3RhbnRzLkJ5dGVzUGVySW50ICogMikgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkaXN0YW5jZU1hcFJhbmdlICogQ29uc3RhbnRzLkJ5dGVzUGVyRmxvYXQgKiAyKTtcclxuICAgICAgICAgICAgY29uc3QgbWVtb3J5UmVxdWlyZWRmb3JUcmFuc2Zvcm1JbmRleGVzID0gZHluYW1pY01vZGUgPyAoc3BsYXRDb3VudCAqIENvbnN0YW50cy5CeXRlc1BlckludCkgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBtZW1vcnlSZXF1aXJlZGZvclRyYW5zZm9ybXMgPSBkeW5hbWljTW9kZSA/IChDb25zdGFudHMuTWF4U2NlbmVzICogbWF0cml4U2l6ZSkgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBleHRyYU1lbW9yeSA9IENvbnN0YW50cy5NZW1vcnlQYWdlU2l6ZSAqIDMyO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdG90YWxSZXF1aXJlZE1lbW9yeSA9IG1lbW9yeVJlcXVpcmVkRm9ySW5kZXhlc1RvU29ydCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZEZvckNlbnRlcnMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRGb3JNb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkRm9yUHJlY29tcHV0ZWREaXN0YW5jZXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRGb3JNYXBwZWREaXN0YW5jZXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRGb3JJbnRlcm1lZGlhdGVTb3J0QnVmZmVycyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnlSZXF1aXJlZEZvclNvcnRlZEluZGV4ZXMgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtb3J5UmVxdWlyZWRmb3JUcmFuc2Zvcm1JbmRleGVzICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeVJlcXVpcmVkZm9yVHJhbnNmb3JtcyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYU1lbW9yeTtcclxuICAgICAgICAgICAgY29uc3QgdG90YWxQYWdlc1JlcXVpcmVkID0gTWF0aC5mbG9vcih0b3RhbFJlcXVpcmVkTWVtb3J5IC8gQ29uc3RhbnRzLk1lbW9yeVBhZ2VTaXplICkgKyAxO1xyXG4gICAgICAgICAgICBjb25zdCBzb3J0ZXJXYXNtSW1wb3J0ID0ge1xyXG4gICAgICAgICAgICAgICAgbW9kdWxlOiB7fSxcclxuICAgICAgICAgICAgICAgIGVudjoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbW9yeTogbmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWw6IHRvdGFsUGFnZXNSZXF1aXJlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogdG90YWxQYWdlc1JlcXVpcmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFdlYkFzc2VtYmx5LmNvbXBpbGUoc29ydGVyV2FzbUJ5dGVzKVxyXG4gICAgICAgICAgICAudGhlbigod2FzbU1vZHVsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHdhc21Nb2R1bGUsIHNvcnRlcldhc21JbXBvcnQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoaW5zdGFuY2UpID0+IHtcclxuICAgICAgICAgICAgICAgIHdhc21JbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgaW5kZXhlc1RvU29ydE9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXJzT2Zmc2V0ID0gaW5kZXhlc1RvU29ydE9mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9ySW5kZXhlc1RvU29ydDtcclxuICAgICAgICAgICAgICAgIG1vZGVsVmlld1Byb2pPZmZzZXQgPSBjZW50ZXJzT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JDZW50ZXJzO1xyXG4gICAgICAgICAgICAgICAgcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQgPSBtb2RlbFZpZXdQcm9qT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JNb2RlbFZpZXdQcm9qZWN0aW9uTWF0cml4O1xyXG4gICAgICAgICAgICAgICAgbWFwcGVkRGlzdGFuY2VzT2Zmc2V0ID0gcHJlY29tcHV0ZWREaXN0YW5jZXNPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvclByZWNvbXB1dGVkRGlzdGFuY2VzO1xyXG4gICAgICAgICAgICAgICAgZnJlcXVlbmNpZXNPZmZzZXQgPSBtYXBwZWREaXN0YW5jZXNPZmZzZXQgKyBtZW1vcnlSZXF1aXJlZEZvck1hcHBlZERpc3RhbmNlcztcclxuICAgICAgICAgICAgICAgIHNvcnRlZEluZGV4ZXNPZmZzZXQgPSBmcmVxdWVuY2llc09mZnNldCArIG1lbW9yeVJlcXVpcmVkRm9ySW50ZXJtZWRpYXRlU29ydEJ1ZmZlcnM7XHJcbiAgICAgICAgICAgICAgICBzY2VuZUluZGV4ZXNPZmZzZXQgPSBzb3J0ZWRJbmRleGVzT2Zmc2V0ICsgbWVtb3J5UmVxdWlyZWRGb3JTb3J0ZWRJbmRleGVzO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3Jtc09mZnNldCA9IHNjZW5lSW5kZXhlc09mZnNldCArIG1lbW9yeVJlcXVpcmVkZm9yVHJhbnNmb3JtSW5kZXhlcztcclxuICAgICAgICAgICAgICAgIHdhc21NZW1vcnkgPSBzb3J0ZXJXYXNtSW1wb3J0LmVudi5tZW1vcnkuYnVmZmVyO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVzZVNoYXJlZE1lbW9yeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc29ydFNldHVwUGhhc2UxQ29tcGxldGUnOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnaW5kZXhlc1RvU29ydEJ1ZmZlcic6IHdhc21NZW1vcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdpbmRleGVzVG9Tb3J0T2Zmc2V0JzogaW5kZXhlc1RvU29ydE9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnRlZEluZGV4ZXNCdWZmZXInOiB3YXNtTWVtb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc29ydGVkSW5kZXhlc09mZnNldCc6IHNvcnRlZEluZGV4ZXNPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcmVjb21wdXRlZERpc3RhbmNlc0J1ZmZlcic6IHdhc21NZW1vcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCc6IHByZWNvbXB1dGVkRGlzdGFuY2VzT2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3Jtc0J1ZmZlcic6IHdhc21NZW1vcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm1zT2Zmc2V0JzogdHJhbnNmb3Jtc09mZnNldFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NvcnRTZXR1cFBoYXNlMUNvbXBsZXRlJzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNvcnQgd29ya2VyIGZvciBHUFUtYmFzZWQgc29ydGluZ1xyXG4gKiBAcGFyYW0ge251bWJlcn0gc3BsYXRDb3VudCAtIE51bWJlciBvZiBzcGxhdHMgdG8gc29ydFxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVNoYXJlZE1lbW9yeSAtIFdoZXRoZXIgdG8gdXNlIHNoYXJlZCBtZW1vcnlcclxuICogQHBhcmFtIHtib29sZWFufSBlbmFibGVTSU1ESW5Tb3J0IC0gV2hldGhlciB0byBlbmFibGUgU0lNRCBpbnN0cnVjdGlvbnNcclxuICogQHBhcmFtIHtib29sZWFufSBpbnRlZ2VyQmFzZWRTb3J0IC0gV2hldGhlciB0byB1c2UgaW50ZWdlci1iYXNlZCBzb3J0aW5nXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZHluYW1pY01vZGUgLSBXaGV0aGVyIGR5bmFtaWMgbW9kZSBpcyBlbmFibGVkXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiAtIFByZWNpc2lvbiBmb3IgZGlzdGFuY2UgbWFwXHJcbiAqIEByZXR1cm5zIHtXb3JrZXJ9IFRoZSBjcmVhdGVkIHNvcnQgd29ya2VyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU29ydFdvcmtlcihzcGxhdENvdW50LCB1c2VTaGFyZWRNZW1vcnksIGVuYWJsZVNJTURJblNvcnQsIGludGVnZXJCYXNlZFNvcnQsIGR5bmFtaWNNb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiA9IENvbnN0YW50cy5EZWZhdWx0U3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24pIHtcclxuICAgIGNvbnN0IHdvcmtlciA9IG5ldyBXb3JrZXIoXHJcbiAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTChcclxuICAgICAgICAgICAgbmV3IEJsb2IoWycoJywgc29ydFdvcmtlci50b1N0cmluZygpLCAnKShzZWxmKSddLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICksXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBzb3VyY2VXYXNtID0gU29ydGVyV2FzbTtcclxuXHJcbiAgICAvLyBpT1MgbWFrZXMgY2hvb3NpbmcgdGhlIHJpZ2h0IFdlYkFzc2VtYmx5IGNvbmZpZ3VyYXRpb24gdHJpY2t5IDooXHJcbiAgICBjb25zdCBpT1NTZW1WZXIgPSBpc0lPUygpID8gZ2V0SU9TU2VtZXZlcigpIDogbnVsbDtcclxuICAgIGlmICghZW5hYmxlU0lNREluU29ydCAmJiAhdXNlU2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgICAgc291cmNlV2FzbSA9IFNvcnRlcldhc21Ob1NJTUQ7XHJcbiAgICAgICAgLy8gVGVzdGluZyBvbiB2YXJpb3VzIGRldmljZXMgaGFzIHNob3duIHRoYXQgZXZlbiB3aGVuIHNoYXJlZCBtZW1vcnkgaXMgZGlzYWJsZWQsIHRoZSBXQVNNIG1vZHVsZSB3aXRoIHNoYXJlZFxyXG4gICAgICAgIC8vIG1lbW9yeSBjYW4gc3RpbGwgYmUgdXNlZCBtb3N0IG9mIHRoZSB0aW1lIC0tIHRoZSBleGNlcHRpb24gc2VlbXMgdG8gYmUgaU9TIGRldmljZXMgYmVsb3cgMTYuNFxyXG4gICAgICAgIGlmIChpT1NTZW1WZXIgJiYgaU9TU2VtVmVyLm1ham9yIDw9IDE2ICYmIGlPU1NlbVZlci5taW5vciA8IDQpIHtcclxuICAgICAgICAgICAgc291cmNlV2FzbSA9IFNvcnRlcldhc21Ob1NJTUROb25TaGFyZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICghZW5hYmxlU0lNREluU29ydCkge1xyXG4gICAgICAgIHNvdXJjZVdhc20gPSBTb3J0ZXJXYXNtTm9TSU1EO1xyXG4gICAgfSBlbHNlIGlmICghdXNlU2hhcmVkTWVtb3J5KSB7XHJcbiAgICAgICAgLy8gU2FtZSBpc3N1ZSB3aXRoIHNoYXJlZCBtZW1vcnkgYXMgYWJvdmUgb24gaU9TIGRldmljZXNcclxuICAgICAgICBpZiAoaU9TU2VtVmVyICYmIGlPU1NlbVZlci5tYWpvciA8PSAxNiAmJiBpT1NTZW1WZXIubWlub3IgPCA0KSB7XHJcbiAgICAgICAgICAgIHNvdXJjZVdhc20gPSBTb3J0ZXJXYXNtTm9uU2hhcmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzb3J0ZXJXYXNtQmluYXJ5U3RyaW5nID0gYXRvYihzb3VyY2VXYXNtKTtcclxuICAgIGNvbnN0IHNvcnRlcldhc21CeXRlcyA9IG5ldyBVaW50OEFycmF5KHNvcnRlcldhc21CaW5hcnlTdHJpbmcubGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29ydGVyV2FzbUJpbmFyeVN0cmluZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHNvcnRlcldhc21CeXRlc1tpXSA9IHNvcnRlcldhc21CaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuXHJcbiAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICdpbml0Jzoge1xyXG4gICAgICAgICAgICAnc29ydGVyV2FzbUJ5dGVzJzogc29ydGVyV2FzbUJ5dGVzLmJ1ZmZlcixcclxuICAgICAgICAgICAgJ3NwbGF0Q291bnQnOiBzcGxhdENvdW50LFxyXG4gICAgICAgICAgICAndXNlU2hhcmVkTWVtb3J5JzogdXNlU2hhcmVkTWVtb3J5LFxyXG4gICAgICAgICAgICAnaW50ZWdlckJhc2VkU29ydCc6IGludGVnZXJCYXNlZFNvcnQsXHJcbiAgICAgICAgICAgICdkeW5hbWljTW9kZSc6IGR5bmFtaWNNb2RlLFxyXG4gICAgICAgICAgICAnZGlzdGFuY2VNYXBSYW5nZSc6IDEgPDwgc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24sXHJcbiAgICAgICAgICAgIC8vIFN1cGVyIGhhY2t5XHJcbiAgICAgICAgICAgICdDb25zdGFudHMnOiB7XHJcbiAgICAgICAgICAgICAgICAnQnl0ZXNQZXJGbG9hdCc6IENvbnN0YW50cy5CeXRlc1BlckZsb2F0LFxyXG4gICAgICAgICAgICAgICAgJ0J5dGVzUGVySW50JzogQ29uc3RhbnRzLkJ5dGVzUGVySW50LFxyXG4gICAgICAgICAgICAgICAgJ01lbW9yeVBhZ2VTaXplJzogQ29uc3RhbnRzLk1lbW9yeVBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgICAgJ01heFNjZW5lcyc6IENvbnN0YW50cy5NYXhTY2VuZXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHdvcmtlcjtcclxufVxyXG4iLCIvKipcclxuICogVmlld2VyXHJcbiAqIFxyXG4gKiBCYXNlZCBvbiBAbWtrZWxsb2dnL2dhdXNzaWFuLXNwbGF0cy0zZCAoTUlUIExpY2Vuc2UpXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ta2tlbGxvZ2cvR2F1c3NpYW5TcGxhdHMzRFxyXG4gKiBcclxuICogSEVBVklMWSBNT0RJRklFRCBmb3IgRkxBTUUgYXZhdGFyIHN1cHBvcnQ6XHJcbiAqIC0gQWRkZWQgRkxBTUUgaGVhZCBtb2RlbCBpbnRlZ3JhdGlvblxyXG4gKiAtIEV4dGVuZGVkIHdpdGggZXhwcmVzc2lvbi9wb3NlIGNvbnRyb2xzXHJcbiAqIC0gQWRkaXRpb25hbCByZW5kZXJpbmcgcGlwZWxpbmUgbW9kaWZpY2F0aW9uc1xyXG4gKiAtIEFkZGl0aW9uYWwgfjkwMCBsaW5lcyBvZiBGTEFNRS1zcGVjaWZpYyBjb2RlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQm9uZSwgRHluYW1pY0RyYXdVc2FnZSwgSW5zdGFuY2VkQnVmZmVyQXR0cmlidXRlLCBNYXRoVXRpbHMsIE1hdHJpeDQsIE9ydGhvZ3JhcGhpY0NhbWVyYSwgUGVyc3BlY3RpdmVDYW1lcmEsIFF1YXRlcm5pb24sIFNjZW5lLCBTa2VsZXRvbiwgVmVjdG9yMiwgVmVjdG9yMywgV2ViR0xSZW5kZXJlciB9IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHtcclxuICAgIGdldEN1cnJlbnRUaW1lLFxyXG4gICAgY2xhbXAsXHJcbiAgICBkZWxheWVkRXhlY3V0ZSxcclxuICAgIGlzSU9TLFxyXG4gICAgZ2V0SU9TU2VtZXZlcixcclxuICAgIFNlbXZlcixcclxuICAgIGZldGNoV2l0aFByb2dyZXNzLFxyXG4gICAgbmF0aXZlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzLFxyXG4gICAgYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzLFxyXG4gICAgZGlzcG9zZUFsbE1lc2hlcyxcclxuICAgIEFib3J0ZWRQcm9taXNlRXJyb3JcclxufSBmcm9tICcuLi91dGlscy9VdGlsLmpzJztcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcclxuXHJcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignVmlld2VyJyk7XHJcbmltcG9ydCB7IFJlbmRlck1vZGUgfSBmcm9tICcuLi9lbnVtcy9SZW5kZXJNb2RlLmpzJztcclxuaW1wb3J0IHsgTG9nTGV2ZWwgfSBmcm9tICcuLi9lbnVtcy9Mb2dMZXZlbC5qcyc7XHJcbmltcG9ydCB7IFNwbGF0UmVuZGVyTW9kZSB9IGZyb20gJy4uL2VudW1zL1NwbGF0UmVuZGVyTW9kZS5qcyc7XHJcbmltcG9ydCB7IFNjZW5lRm9ybWF0LCBzY2VuZUZvcm1hdEZyb21QYXRoIH0gZnJvbSAnLi4vZW51bXMvU2NlbmVGb3JtYXQuanMnO1xyXG5pbXBvcnQgeyBTY2VuZVJldmVhbE1vZGUgfSBmcm9tICcuLi9lbnVtcy9TY2VuZVJldmVhbE1vZGUuanMnO1xyXG5pbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSAndGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanMnO1xyXG5pbXBvcnQgeyBTcGxhdE1lc2ggfSBmcm9tICcuL1NwbGF0TWVzaC5qcyc7XHJcbmltcG9ydCB7IFNwbGF0U2NlbmUgfSBmcm9tICcuL1NwbGF0U2NlbmUuanMnO1xyXG5pbXBvcnQgeyBEaXJlY3RMb2FkRXJyb3IgfSBmcm9tICcuLi9sb2FkZXJzL0RpcmVjdExvYWRFcnJvci5qcyc7XHJcbmltcG9ydCB7IFBseUxvYWRlciB9IGZyb20gJy4uL2xvYWRlcnMvUGx5TG9hZGVyLmpzJztcclxuaW1wb3J0IHsgUmF5Y2FzdGVyIH0gZnJvbSAnLi4vcmF5Y2FzdGVyL1JheWNhc3Rlci5qcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVNvcnRXb3JrZXIgfSBmcm9tICcuLi93b3JrZXIvU29ydFdvcmtlci5qcyc7XHJcbmltcG9ydCB7IFxyXG4gICAgU0NFTkVfRkFERUlOX1JBVEVfRkFTVCxcclxuICAgIFNDRU5FX0ZBREVJTl9SQVRFX0dSQURVQUwsXHJcbiAgICBUSFJFRV9DQU1FUkFfRk9WLFxyXG4gICAgTUlOSU1VTV9ESVNUQU5DRV9UT19ORVdfRk9DQUxfUE9JTlQsXHJcbiAgICBDT05TRUNVVElWRV9SRU5ERVJFRF9GUkFNRVNfRk9SX0ZQU19DQUxDVUxBVElPTixcclxuICAgIE1JTl9TUExBVF9DT1VOVF9UT19TSE9XX1NQTEFUX1RSRUVfTE9BRElOR19TUElOTkVSLFxyXG4gICAgRk9DVVNfTUFSS0VSX0ZBREVfSU5fU1BFRUQsXHJcbiAgICBGT0NVU19NQVJLRVJfRkFERV9PVVRfU1BFRUQsXHJcbiAgICBDb25zdGFudHMsXHJcbiAgICBMb2FkZXJTdGF0dXNcclxufSBmcm9tICcuLi9lbnVtcy9FbmdpbmVDb25zdGFudHMuanMnO1xyXG5cclxuLy8gVUkgY29tcG9uZW50cyAtIHN0dWIgaW1wbGVtZW50YXRpb25zIGZvciBub3dcclxuY2xhc3MgTG9hZGluZ1NwaW5uZXIge1xyXG4gICAgY29uc3RydWN0b3IobXNnLCBjb250YWluZXIpIHsgdGhpcy50YXNrcyA9IFtdOyB9XHJcbiAgICBzaG93KCkge31cclxuICAgIGhpZGUoKSB7fVxyXG4gICAgc2V0Q29udGFpbmVyKGMpIHt9XHJcbiAgICBhZGRUYXNrKG1zZykgeyByZXR1cm4gdGhpcy50YXNrcy5wdXNoKG1zZyk7IH1cclxuICAgIHJlbW92ZVRhc2soaWQpIHt9XHJcbiAgICByZW1vdmVBbGxUYXNrcygpIHsgdGhpcy50YXNrcyA9IFtdOyB9XHJcbiAgICBzZXRNZXNzYWdlRm9yVGFzayhpZCwgbXNnKSB7fVxyXG59XHJcblxyXG5jbGFzcyBMb2FkaW5nUHJvZ3Jlc3NCYXIge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7fVxyXG4gICAgc2hvdygpIHt9XHJcbiAgICBoaWRlKCkge31cclxuICAgIHNldENvbnRhaW5lcihjKSB7fVxyXG4gICAgc2V0UHJvZ3Jlc3MocCkge31cclxufVxyXG5cclxuY2xhc3MgU2NlbmVIZWxwZXIge1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmUpIHsgXHJcbiAgICAgICAgdGhpcy5zY2VuZSA9IHNjZW5lOyBcclxuICAgICAgICB0aGlzLm1lc2hDdXJzb3IgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWVzaEN1cnNvclZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmZvY3VzTWFya2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZvY3VzTWFya2VyT3BhY2l0eSA9IDA7XHJcbiAgICAgICAgdGhpcy5jb250cm9sUGxhbmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY29udHJvbFBsYW5lVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgc2V0dXBNZXNoQ3Vyc29yKCkge31cclxuICAgIHNldHVwRm9jdXNNYXJrZXIoKSB7fVxyXG4gICAgc2V0dXBDb250cm9sUGxhbmUoKSB7fVxyXG4gICAgdXBkYXRlTWVzaEN1cnNvcihwb3MsIGFjdGl2ZSkge31cclxuICAgIHVwZGF0ZUZvY3VzTWFya2VyKHRhcmdldCwgY2FtZXJhLCByZW5kZXJEaW1lbnNpb25zKSB7fVxyXG4gICAgdXBkYXRlQ29udHJvbFBsYW5lKGNhbSwgY3RybCkge31cclxuICAgIHNldEZvY3VzTWFya2VyVmlzaWJpbGl0eSh2KSB7fVxyXG4gICAgc2V0Rm9jdXNNYXJrZXJPcGFjaXR5KG8pIHsgdGhpcy5mb2N1c01hcmtlck9wYWNpdHkgPSBvOyB9XHJcbiAgICBnZXRGb2N1c01hcmtlck9wYWNpdHkoKSB7IHJldHVybiB0aGlzLmZvY3VzTWFya2VyT3BhY2l0eTsgfVxyXG4gICAgcG9zaXRpb25BbmRPcmllbnRGb2N1c01hcmtlcihwb3MsIGNhbSkge31cclxuICAgIHBvc2l0aW9uQW5kT3JpZW50TWVzaEN1cnNvcihwb3MsIGNhbSkge31cclxuICAgIHNldE1lc2hDdXJzb3JWaXNpYmlsaXR5KHZpc2libGUpIHsgdGhpcy5tZXNoQ3Vyc29yVmlzaWJsZSA9IHZpc2libGU7IH1cclxuICAgIGdldE1lc2NoQ3Vyc29yVmlzaWJpbGl0eSgpIHsgcmV0dXJuIHRoaXMubWVzaEN1cnNvclZpc2libGU7IH1cclxuICAgIHNldENvbnRyb2xQbGFuZVZpc2liaWxpdHkodmlzaWJsZSkgeyB0aGlzLmNvbnRyb2xQbGFuZVZpc2libGUgPSB2aXNpYmxlOyB9XHJcbiAgICBwb3NpdGlvbkFuZE9yaWVudENvbnRyb2xQbGFuZShwb3MsIHF1YXQsIHNjYWxlKSB7fVxyXG4gICAgdXBkYXRlRm9yUmVuZGVyTW9kZShtb2RlLCBtZXNoKSB7fVxyXG4gICAgZGlzcG9zZSgpIHt9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWaWV3ZXIgLSBDb3JlIEdhdXNzaWFuIFNwbGF0dGluZyBWaWV3ZXJcclxuICogSGFuZGxlcyB0aGUgVGhyZWUuanMgc2NlbmUsIGNhbWVyYSwgY29udHJvbHMsIGFuZCByZW5kZXJpbmcgbG9vcC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBWaWV3ZXIge1xyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zXHJcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5jYW1lcmFVcD1bMCwgMSwgMF1dIC0gQ2FtZXJhIHVwIHZlY3RvclxyXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdGlvbnMuaW5pdGlhbENhbWVyYVBvc2l0aW9uPVswLCAxMCwgMTVdXSAtIEluaXRpYWwgY2FtZXJhIHBvc2l0aW9uXHJcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5pbml0aWFsQ2FtZXJhUm90YXRpb249WzAsIDAsIDBdXSAtIEluaXRpYWwgY2FtZXJhIHJvdGF0aW9uXHJcbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0aW9ucy5pbml0aWFsQ2FtZXJhTG9va0F0PVswLCAwLCAwXV0gLSBJbml0aWFsIGNhbWVyYSBsb29rLWF0IHBvaW50XHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5kcm9wSW5Nb2RlPWZhbHNlXSAtIElmIHRydWUsIHZpZXdlciBpcyB1c2VkIGFzIGEgVGhyZWUuanMgc2NlbmUgb2JqZWN0XHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5zZWxmRHJpdmVuTW9kZT10cnVlXSAtIElmIHRydWUsIHZpZXdlciBtYW5hZ2VzIGl0cyBvd24gcmVuZGVyIGxvb3BcclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnVzZUJ1aWx0SW5Db250cm9scz10cnVlXSAtIElmIHRydWUsIHVzZXMgT3JiaXRDb250cm9sc1xyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFtvcHRpb25zLnJvb3RFbGVtZW50XSAtIFBhcmVudCBlbGVtZW50IGZvciB0aGUgY2FudmFzXHJcbiAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gW29wdGlvbnMudGhyZWVqc0NhbnZhc10gLSBFeGlzdGluZyBjYW52YXMgdG8gdXNlXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pZ25vcmVEZXZpY2VQaXhlbFJhdGlvPWZhbHNlXSAtIElmIHRydWUsIGZvcmNlcyBEUFIgdG8gMVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaGFsZlByZWNpc2lvbkNvdmFyaWFuY2VzT25HUFU9ZmFsc2VdIC0gVXNlIDE2LWJpdCBmbG9hdCBmb3IgY292YXJpYW5jZXNcclxuICAgKiBAcGFyYW0ge1RIUkVFLlNjZW5lfSBbb3B0aW9ucy50aHJlZVNjZW5lXSAtIEV4dGVybmFsIFRocmVlLmpzIHNjZW5lIHRvIHJlbmRlclxyXG4gICAqIEBwYXJhbSB7VEhSRUUuV2ViR0xSZW5kZXJlcn0gW29wdGlvbnMucmVuZGVyZXJdIC0gRXh0ZXJuYWwgVGhyZWUuanMgcmVuZGVyZXJcclxuICAgKiBAcGFyYW0ge1RIUkVFLkNhbWVyYX0gW29wdGlvbnMuY2FtZXJhXSAtIEV4dGVybmFsIFRocmVlLmpzIGNhbWVyYVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZ3B1QWNjZWxlcmF0ZWRTb3J0PWZhbHNlXSAtIFVzZSBHUFUgZm9yIHNvcnRpbmcgZGlzdGFuY2VzXHJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5pbnRlZ2VyQmFzZWRTb3J0PXRydWVdIC0gVXNlIGludGVnZXIgYXJpdGhtZXRpYyBmb3Igc29ydGluZ1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuc2hhcmVkTWVtb3J5Rm9yV29ya2Vycz10cnVlXSAtIFVzZSBTaGFyZWRBcnJheUJ1ZmZlciBmb3Igd29ya2Vyc1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuZHluYW1pY1NjZW5lPWZhbHNlXSAtIE9wdGltaXplIGZvciBkeW5hbWljIHNjZW5lc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xyXG4gICAgLy8gVGhlIG5hdHVyYWwgJ3VwJyB2ZWN0b3IgZm9yIHZpZXdpbmcgdGhlIHNjZW5lIChvbmx5IGhhcyBhbiBlZmZlY3Qgd2hlbiB1c2VkIHdpdGggb3JiaXQgY29udHJvbHMgYW5kXHJcbiAgICAvLyB3aGVuIHRoZSB2aWV3ZXIgdXNlcyBpdHMgb3duIGNhbWVyYSkuXHJcbiAgICBpZiAoIW9wdGlvbnMuY2FtZXJhVXApIG9wdGlvbnMuY2FtZXJhVXAgPSBbMCwgMSwgMF07XHJcbiAgICB0aGlzLmNhbWVyYVVwID0gbmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkob3B0aW9ucy5jYW1lcmFVcCk7XHJcblxyXG4gICAgLy8gVGhlIGNhbWVyYSdzIGluaXRpYWwgcG9zaXRpb24gKG9ubHkgdXNlZCB3aGVuIHRoZSB2aWV3ZXIgdXNlcyBpdHMgb3duIGNhbWVyYSkuXHJcbiAgICBpZiAoIW9wdGlvbnMuaW5pdGlhbENhbWVyYVBvc2l0aW9uKVxyXG4gICAgICBvcHRpb25zLmluaXRpYWxDYW1lcmFQb3NpdGlvbiA9IFswLCAxMCwgMTVdO1xyXG4gICAgdGhpcy5pbml0aWFsQ2FtZXJhUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShcclxuICAgICAgb3B0aW9ucy5pbml0aWFsQ2FtZXJhUG9zaXRpb25cclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFvcHRpb25zLmluaXRpYWxDYW1lcmFSb3RhdGlvbilcclxuICAgICAgICBvcHRpb25zLmluaXRpYWxDYW1lcmFSb3RhdGlvbiA9IFswLCAwLCAwXTtcclxuICAgICAgdGhpcy5pbml0aWFsQ2FtZXJhUm90YXRpb24gPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShcclxuICAgICAgICBvcHRpb25zLmluaXRpYWxDYW1lcmFSb3RhdGlvblxyXG4gICAgKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZENvbG9yID0gb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I7XHJcblxyXG4gICAgLy8gVGhlIGluaXRpYWwgZm9jYWwgcG9pbnQgb2YgdGhlIGNhbWVyYSBhbmQgY2VudGVyIG9mIHRoZSBjYW1lcmEncyBvcmJpdCAob25seSB1c2VkIHdoZW4gdGhlIHZpZXdlciB1c2VzIGl0cyBvd24gY2FtZXJhKS5cclxuICAgIGlmICghb3B0aW9ucy5pbml0aWFsQ2FtZXJhTG9va0F0KSBvcHRpb25zLmluaXRpYWxDYW1lcmFMb29rQXQgPSBbMCwgMCwgMF07XHJcbiAgICB0aGlzLmluaXRpYWxDYW1lcmFMb29rQXQgPSBuZXcgVmVjdG9yMygpLmZyb21BcnJheShcclxuICAgICAgb3B0aW9ucy5pbml0aWFsQ2FtZXJhTG9va0F0XHJcbiAgICApO1xyXG5cclxuICAgIC8vICdkcm9wSW5Nb2RlJyBpcyBhIGZsYWcgdGhhdCBpcyB1c2VkIGludGVybmFsbHkgdG8gc3VwcG9ydCB0aGUgdXNhZ2Ugb2YgdGhlIHZpZXdlciBhcyBhIFRocmVlLmpzIHNjZW5lIG9iamVjdFxyXG4gICAgdGhpcy5kcm9wSW5Nb2RlID0gb3B0aW9ucy5kcm9wSW5Nb2RlIHx8IGZhbHNlO1xyXG5cclxuICAgIC8vIElmICdzZWxmRHJpdmVuTW9kZScgaXMgdHJ1ZSwgdGhlIHZpZXdlciBtYW5hZ2VzIGl0cyBvd24gdXBkYXRlL2FuaW1hdGlvbiBsb29wIHZpYSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKVxyXG4gICAgaWYgKG9wdGlvbnMuc2VsZkRyaXZlbk1vZGUgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnNlbGZEcml2ZW5Nb2RlID09PSBudWxsKVxyXG4gICAgICBvcHRpb25zLnNlbGZEcml2ZW5Nb2RlID0gdHJ1ZTtcclxuICAgIHRoaXMuc2VsZkRyaXZlbk1vZGUgPSBvcHRpb25zLnNlbGZEcml2ZW5Nb2RlICYmICF0aGlzLmRyb3BJbk1vZGU7XHJcbiAgICB0aGlzLnNlbGZEcml2ZW5VcGRhdGVGdW5jID0gdGhpcy5zZWxmRHJpdmVuVXBkYXRlLmJpbmQodGhpcyk7XHJcblxyXG4gICAgLy8gSWYgJ3VzZUJ1aWx0SW5Db250cm9scycgaXMgdHJ1ZSwgdGhlIHZpZXdlciB3aWxsIGNyZWF0ZSBpdHMgb3duIGluc3RhbmNlIG9mIE9yYml0Q29udHJvbHMgYW5kIGF0dGFjaCB0byB0aGUgY2FtZXJhXHJcbiAgICBpZiAob3B0aW9ucy51c2VCdWlsdEluQ29udHJvbHMgPT09IHVuZGVmaW5lZClcclxuICAgICAgb3B0aW9ucy51c2VCdWlsdEluQ29udHJvbHMgPSB0cnVlO1xyXG4gICAgdGhpcy51c2VCdWlsdEluQ29udHJvbHMgPSBvcHRpb25zLnVzZUJ1aWx0SW5Db250cm9scztcclxuXHJcbiAgICAvLyBwYXJlbnQgZWxlbWVudCBvZiB0aGUgVGhyZWUuanMgcmVuZGVyZXIgY2FudmFzXHJcbiAgICB0aGlzLnJvb3RFbGVtZW50ID0gb3B0aW9ucy5yb290RWxlbWVudDtcclxuICAgIHRoaXMuY2FudmFzID0gb3B0aW9ucy50aHJlZWpzQ2FudmFzO1xyXG4gICAgLy8gVGVsbHMgdGhlIHZpZXdlciB0byBwcmV0ZW5kIHRoZSBkZXZpY2UgcGl4ZWwgcmF0aW8gaXMgMSwgd2hpY2ggY2FuIGJvb3N0IHBlcmZvcm1hbmNlIG9uIGRldmljZXMgd2hlcmUgaXQgaXMgbGFyZ2VyLFxyXG4gICAgLy8gYXQgYSBzbWFsbCBjb3N0IHRvIHZpc3VhbCBxdWFsaXR5XHJcbiAgICB0aGlzLmlnbm9yZURldmljZVBpeGVsUmF0aW8gPSBvcHRpb25zLmlnbm9yZURldmljZVBpeGVsUmF0aW8gfHwgZmFsc2U7XHJcbiAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8gPSB0aGlzLmlnbm9yZURldmljZVBpeGVsUmF0aW9cclxuICAgICAgPyAxXHJcbiAgICAgIDogd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcclxuXHJcbiAgICAvLyBUZWxscyB0aGUgdmlld2VyIHRvIHVzZSAxNi1iaXQgZmxvYXRpbmcgcG9pbnQgdmFsdWVzIHdoZW4gc3RvcmluZyBzcGxhdCBjb3ZhcmlhbmNlIGRhdGEgaW4gdGV4dHVyZXMsIGluc3RlYWQgb2YgMzItYml0XHJcbiAgICB0aGlzLmhhbGZQcmVjaXNpb25Db3ZhcmlhbmNlc09uR1BVID1cclxuICAgICAgb3B0aW9ucy5oYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVSB8fCBmYWxzZTtcclxuXHJcbiAgICAvLyBJZiAndGhyZWVTY2VuZScgaXMgdmFsaWQsIGl0IHdpbGwgYmUgcmVuZGVyZWQgYnkgdGhlIHZpZXdlciBhbG9uZyB3aXRoIHRoZSBzcGxhdCBtZXNoXHJcbiAgICB0aGlzLnRocmVlU2NlbmUgPSBvcHRpb25zLnRocmVlU2NlbmU7XHJcbiAgICAvLyBBbGxvd3MgZm9yIHVzYWdlIG9mIGFuIGV4dGVybmFsIFRocmVlLmpzIHJlbmRlcmVyXHJcbiAgICB0aGlzLnJlbmRlcmVyID0gb3B0aW9ucy5yZW5kZXJlcjtcclxuICAgIC8vIEFsbG93cyBmb3IgdXNhZ2Ugb2YgYW4gZXh0ZXJuYWwgVGhyZWUuanMgY2FtZXJhXHJcbiAgICB0aGlzLmNhbWVyYSA9IG9wdGlvbnMuY2FtZXJhO1xyXG5cclxuICAgIC8vIElmICdncHVBY2NlbGVyYXRlZFNvcnQnIGlzIHRydWUsIGEgcGFydGlhbGx5IEdQVS1hY2NlbGVyYXRlZCBhcHByb2FjaCB0byBzb3J0aW5nIHNwbGF0cyB3aWxsIGJlIHVzZWQuXHJcbiAgICAvLyBDdXJyZW50bHkgdGhpcyBtZWFucyBwcmUtY29tcHV0aW5nIHNwbGF0IGRpc3RhbmNlcyBmcm9tIHRoZSBjYW1lcmEgb24gdGhlIEdQVVxyXG4gICAgdGhpcy5ncHVBY2NlbGVyYXRlZFNvcnQgPSBvcHRpb25zLmdwdUFjY2VsZXJhdGVkU29ydCB8fCBmYWxzZTtcclxuXHJcbiAgICAvLyBpZiAnaW50ZWdlckJhc2VkU29ydCcgaXMgdHJ1ZSwgdGhlIGludGVnZXIgdmVyc2lvbiBvZiBzcGxhdCBjZW50ZXJzIGFzIHdlbGwgYXMgb3RoZXIgdmFsdWVzIHVzZWQgdG8gY2FsY3VsYXRlXHJcbiAgICAvLyBzcGxhdCBkaXN0YW5jZXMgYXJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZmxvYXQgdmVyc2lvbi4gVGhpcyBzcGVlZHMgdXAgY29tcHV0YXRpb24sIGJ1dCBpbnRyb2R1Y2VzIHRoZSBwb3NzaWJpbGl0eSBvZlxyXG4gICAgLy8gb3ZlcmZsb3cgaW4gbGFyZ2VyIHNjZW5lcy5cclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5pbnRlZ2VyQmFzZWRTb3J0ID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5pbnRlZ2VyQmFzZWRTb3J0ID09PSBudWxsXHJcbiAgICApIHtcclxuICAgICAgb3B0aW9ucy5pbnRlZ2VyQmFzZWRTb3J0ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMuaW50ZWdlckJhc2VkU29ydCA9IG9wdGlvbnMuaW50ZWdlckJhc2VkU29ydDtcclxuXHJcbiAgICAvLyBJZiAnc2hhcmVkTWVtb3J5Rm9yV29ya2VycycgaXMgdHJ1ZSwgYSBTaGFyZWRBcnJheUJ1ZmZlciB3aWxsIGJlIHVzZWQgdG8gY29tbXVuaWNhdGUgd2l0aCB3ZWIgd29ya2Vycy4gVGhpcyBtZXRob2RcclxuICAgIC8vIGlzIGZhc3RlciB0aGFuIGNvcHlpbmcgbWVtb3J5IHRvIG9yIGZyb20gd2ViIHdvcmtlcnMsIGJ1dCBjb21lcyB3aXRoIHNlY3VyaXR5IGltcGxpY2F0aW9ucyBhcyBvdXRsaW5lZCBoZXJlOlxyXG4gICAgLy8gaHR0cHM6Ly93ZWIuZGV2L2FydGljbGVzL2Nyb3NzLW9yaWdpbi1pc29sYXRpb24tZ3VpZGVcclxuICAgIC8vIElmIGVuYWJsZWQsIGl0IHJlcXVpcmVzIHNwZWNpZmljIENPUlMgaGVhZGVycyB0byBiZSBwcmVzZW50IGluIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgdGhhdCBpcyBzZW50IHdoZW5cclxuICAgIC8vIGxvYWRpbmcgdGhlIGFwcGxpY2F0aW9uLiBNb3JlIGluZm9ybWF0aW9uIGlzIGF2YWlsYWJsZSBpbiB0aGUgUkVBRE1FLlxyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMgPT09IG51bGxcclxuICAgIClcclxuICAgICAgb3B0aW9ucy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzID0gdHJ1ZTtcclxuICAgIHRoaXMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycyA9IGZhbHNlOyAvL29wdGlvbnMuc2hhcmVkTWVtb3J5Rm9yV29ya2VycztcclxuXHJcbiAgICAvLyBpZiAnZHluYW1pY1NjZW5lJyBpcyB0cnVlLCBpdCB0ZWxscyB0aGUgdmlld2VyIHRvIGFzc3VtZSBzY2VuZSBlbGVtZW50cyBhcmUgbm90IHN0YXRpb25hcnkgb3IgdGhhdCB0aGUgbnVtYmVyIG9mIHNwbGF0cyBpbiB0aGVcclxuICAgIC8vIHNjZW5lIG1heSBjaGFuZ2UuIFRoaXMgcHJldmVudHMgb3B0aW1pemF0aW9ucyB0aGF0IGRlcGVuZCBvbiBhIHN0YXRpYyBzY2VuZSBmcm9tIGJlaW5nIG1hZGUuIEFkZGl0aW9uYWxseSwgaWYgJ2R5bmFtaWNTY2VuZScgaXNcclxuICAgIC8vIHRydWUgaXQgdGVsbHMgdGhlIHNwbGF0IG1lc2ggdG8gbm90IGFwcGx5IHNjZW5lIHRyYW5mb3JtcyB0byBzcGxhdCBkYXRhIHRoYXQgaXMgcmV0dXJuZWQgYnkgZnVuY3Rpb25zIGxpa2VcclxuICAgIC8vIFNwbGF0TWVzaC5nZXRTcGxhdENlbnRlcigpIGJ5IGRlZmF1bHQuXHJcbiAgICB0aGlzLmR5bmFtaWNTY2VuZSA9ICEhb3B0aW9ucy5keW5hbWljU2NlbmU7XHJcblxyXG4gICAgLy8gV2hlbiB0cnVlLCB3aWxsIHBlcmZvcm0gYWRkaXRpb25hbCBzdGVwcyBkdXJpbmcgcmVuZGVyaW5nIHRvIGFkZHJlc3MgYXJ0aWZhY3RzIGNhdXNlZCBieSB0aGUgcmVuZGVyaW5nIG9mIGdhdXNzaWFucyBhdCBhXHJcbiAgICAvLyBzdWJzdGFudGlhbGx5IGRpZmZlcmVudCByZXNvbHV0aW9uIHRoYW4gdGhhdCBhdCB3aGljaCB0aGV5IHdlcmUgcmVuZGVyZWQgZHVyaW5nIHRyYWluaW5nLiBUaGlzIHdpbGwgb25seSB3b3JrIGNvcnJlY3RseVxyXG4gICAgLy8gZm9yIG1vZGVscyB0aGF0IHdlcmUgdHJhaW5lZCB1c2luZyBhIHByb2Nlc3MgdGhhdCB1dGlsaXplcyB0aGlzIGNvbXBlbnNhdGlvbiBjYWxjdWxhdGlvbi4gRm9yIG1vcmUgZGV0YWlsczpcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXJmc3R1ZGlvLXByb2plY3QvZ3NwbGF0L3B1bGwvMTE3XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhkZWNvLWlucmlhL2dhdXNzaWFuLXNwbGF0dGluZy9pc3N1ZXMvMjk0I2lzc3VlY29tbWVudC0xNzcyNjg4MDkzXHJcbiAgICB0aGlzLmFudGlhbGlhc2VkID0gb3B0aW9ucy5hbnRpYWxpYXNlZCB8fCBmYWxzZTtcclxuXHJcbiAgICAvLyBUaGlzIGNvbnN0YW50IGlzIGFkZGVkIHRvIHRoZSBwcm9qZWN0ZWQgMkQgc2NyZWVuLXNwYWNlIHNwbGF0IHNjYWxlc1xyXG4gICAgdGhpcy5rZXJuZWwyRFNpemUgPVxyXG4gICAgICBvcHRpb25zLmtlcm5lbDJEU2l6ZSA9PT0gdW5kZWZpbmVkID8gMC4zIDogb3B0aW9ucy5rZXJuZWwyRFNpemU7XHJcblxyXG4gICAgLy8gaWYgJ3JlbmRlck1vZGUnIGlzIFJlbmRlck1vZGUuQWx3YXlzLCB0aGVuIHRoZSB2aWV3ZXIgd2lsbCBycmVuZGVyIHRoZSBzY2VuZSBvbiBldmVyeSB1cGRhdGUuIElmIGl0IGlzIFJlbmRlck1vZGUuT25DaGFuZ2UsXHJcbiAgICAvLyBpdCB3aWxsIG9ubHkgcmVuZGVyIHdoZW4gc29tZXRoaW5nIGluIHRoZSBzY2VuZSBoYXMgY2hhbmdlZC5cclxuICAgIHRoaXMucmVuZGVyTW9kZSA9IG9wdGlvbnMucmVuZGVyTW9kZSB8fCBSZW5kZXJNb2RlLkFsd2F5cztcclxuXHJcbiAgICAvLyBTY2VuZVJldmVhbE1vZGUuRGVmYXVsdCByZXN1bHRzIGluIGEgbmljZSwgc2xvdyBmYWRlLWluIGVmZmVjdCBmb3IgcHJvZ3Jlc3NpdmVseSBsb2FkZWQgc2NlbmVzLFxyXG4gICAgLy8gYW5kIGEgZmFzdCBmYWRlLWluIGZvciBub24gcHJvZ3Jlc3NpdmVseSBsb2FkZWQgc2NlbmVzLlxyXG4gICAgLy8gU2NlbmVSZXZlYWxNb2RlLkdyYWR1YWwgd2lsbCBmb3JjZSBhIHNsb3cgZmFkZS1pbiBmb3IgYWxsIHNjZW5lcy5cclxuICAgIC8vIFNjZW5lUmV2ZWFsTW9kZS5JbnN0YW50IHdpbGwgZm9yY2UgYWxsIGxvYWRlZCBzY2VuZSBkYXRhIHRvIGJlIGltbWVkaWF0ZWx5IHZpc2libGUuXHJcbiAgICB0aGlzLnNjZW5lUmV2ZWFsTW9kZSA9IG9wdGlvbnMuc2NlbmVSZXZlYWxNb2RlIHx8IFNjZW5lUmV2ZWFsTW9kZS5EZWZhdWx0O1xyXG5cclxuICAgIC8vIEhhY2t5LCBleHBlcmltZW50YWwsIG5vbi1zY2llbnRpZmljIHBhcmFtZXRlciBmb3IgdHdlYWtpbmcgZm9jYWwgbGVuZ3RoIHJlbGF0ZWQgY2FsY3VsYXRpb25zLiBGb3Igc2NlbmVzIHdpdGggdmVyeVxyXG4gICAgLy8gc21hbGwgZ2F1c3NpYW5zLCBzbWFsbCBkZXRhaWxzLCBhbmQgc21hbGwgZGltZW5zaW9ucyAtLSBpbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIGhlbHAgaW1wcm92ZSB2aXN1YWwgcXVhbGl0eS5cclxuICAgIHRoaXMuZm9jYWxBZGp1c3RtZW50ID0gb3B0aW9ucy5mb2NhbEFkanVzdG1lbnQgfHwgMS4wO1xyXG5cclxuICAgIC8vIFNwZWNpZnkgdGhlIG1heGltdW0gc2NyZWVuLXNwYWNlIHNwbGF0IHNpemUsIGNhbiBoZWxwIGRlYWwgd2l0aCBsYXJnZSBzcGxhdHMgdGhhdCBnZXQgdG9vIHVud2llbGR5XHJcbiAgICB0aGlzLm1heFNjcmVlblNwYWNlU3BsYXRTaXplID0gb3B0aW9ucy5tYXhTY3JlZW5TcGFjZVNwbGF0U2l6ZSB8fCAxMDI0O1xyXG5cclxuICAgIC8vIFRoZSB2ZXJib3NpdHkgb2YgY29uc29sZSBsb2dnaW5nXHJcbiAgICB0aGlzLmxvZ0xldmVsID0gb3B0aW9ucy5sb2dMZXZlbCB8fCBMb2dMZXZlbC5Ob25lO1xyXG5cclxuICAgIC8vIERlZ3JlZSBvZiBzcGhlcmljYWwgaGFybW9uaWNzIHRvIHV0aWxpemUgaW4gcmVuZGVyaW5nIHNwbGF0cyAoYXNzdW1pbmcgdGhlIGRhdGEgaXMgcHJlc2VudCBpbiB0aGUgc3BsYXQgc2NlbmUpLlxyXG4gICAgLy8gVmFsaWQgdmFsdWVzIGFyZSAwIC0gMi4gRGVmYXVsdCB2YWx1ZSBpcyAwLlxyXG4gICAgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUgPSBvcHRpb25zLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSB8fCAwO1xyXG5cclxuICAgIC8vIFdoZW4gdHJ1ZSwgYWxsb3dzIGZvciB1c2FnZSBvZiBleHRyYSBwcm9wZXJ0aWVzIGFuZCBhdHRyaWJ1dGVzIGR1cmluZyByZW5kZXJpbmcgZm9yIGVmZmVjdHMgc3VjaCBhcyBvcGFjaXR5IGFkanVzdG1lbnQuXHJcbiAgICAvLyBEZWZhdWx0IGlzIGZhbHNlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSBzZXBhcmF0ZSBmcm9tIHRyYW5zZm9ybSBwcm9wZXJ0aWVzIChzY2FsZSwgcm90YXRpb24sIHBvc2l0aW9uKVxyXG4gICAgLy8gdGhhdCBhcmUgZW5hYmxlZCBieSB0aGUgJ2R5bmFtaWNTY2VuZScgcGFyYW1ldGVyLlxyXG4gICAgdGhpcy5lbmFibGVPcHRpb25hbEVmZmVjdHMgPSBvcHRpb25zLmVuYWJsZU9wdGlvbmFsRWZmZWN0cyB8fCBmYWxzZTtcclxuXHJcbiAgICAvLyBFbmFibGUgdGhlIHVzYWdlIG9mIFNJTUQgV2ViQXNzZW1ibHkgaW5zdHJ1Y3Rpb25zIGZvciB0aGUgc3BsYXQgc29ydFxyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLmVuYWJsZVNJTURJblNvcnQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLmVuYWJsZVNJTURJblNvcnQgPT09IG51bGxcclxuICAgIClcclxuICAgICAgb3B0aW9ucy5lbmFibGVTSU1ESW5Tb3J0ID0gdHJ1ZTtcclxuICAgIHRoaXMuZW5hYmxlU0lNREluU29ydCA9IG9wdGlvbnMuZW5hYmxlU0lNREluU29ydDtcclxuXHJcbiAgICAvLyBMZXZlbCB0byBjb21wcmVzcyBub24gS1NQTEFUIGZpbGVzIHdoZW4gbG9hZGluZyB0aGVtIGZvciBkaXJlY3QgcmVuZGVyaW5nXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMuaW5NZW1vcnlDb21wcmVzc2lvbkxldmVsID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5pbk1lbW9yeUNvbXByZXNzaW9uTGV2ZWwgPT09IG51bGxcclxuICAgICkge1xyXG4gICAgICBvcHRpb25zLmluTWVtb3J5Q29tcHJlc3Npb25MZXZlbCA9IDA7XHJcbiAgICB9XHJcbiAgICB0aGlzLmluTWVtb3J5Q29tcHJlc3Npb25MZXZlbCA9IG9wdGlvbnMuaW5NZW1vcnlDb21wcmVzc2lvbkxldmVsO1xyXG5cclxuICAgIC8vIFJlb3JkZXIgc3BsYXQgZGF0YSBpbiBtZW1vcnkgYWZ0ZXIgbG9hZGluZyBpcyBjb21wbGV0ZSB0byBvcHRpbWl6ZSBjYWNoZSB1dGlsaXphdGlvbi4gRGVmYXVsdCBpcyB0cnVlLlxyXG4gICAgLy8gRG9lcyBub3QgYXBwbHkgaWYgc3BsYXQgc2NlbmUgaXMgcHJvZ3Jlc3NpdmVseSBsb2FkZWQuXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMub3B0aW1pemVTcGxhdERhdGEgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLm9wdGltaXplU3BsYXREYXRhID09PSBudWxsXHJcbiAgICApIHtcclxuICAgICAgb3B0aW9ucy5vcHRpbWl6ZVNwbGF0RGF0YSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9wdGltaXplU3BsYXREYXRhID0gb3B0aW9ucy5vcHRpbWl6ZVNwbGF0RGF0YTtcclxuXHJcbiAgICAvLyBXaGVuIHRydWUsIHRoZSBpbnRlcm1lZGlhdGUgc3BsYXQgZGF0YSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgZGVjb21wcmVzc2luZyBzcGxhdCBidWZmZmVyKHMpIGFuZCBpcyB1c2VkIHRvXHJcbiAgICAvLyBwb3B1bGF0ZSB0aGUgZGF0YSB0ZXh0dXJlcyB3aWxsIGJlIGZyZWVkLiBUaGlzIHdpbGwgcmVkdWNlcyBtZW1vcnkgdXNhZ2UsIGJ1dCBpZiB0aGF0IGRhdGEgbmVlZHMgdG8gYmUgbW9kaWZpZWRcclxuICAgIC8vIGl0IHdpbGwgbmVlZCB0byBiZSByZS1wb3B1bGF0ZWQgZnJvbSB0aGUgc3BsYXQgYnVmZmVyKHMpLiBEZWZhdWx0IGlzIGZhbHNlLlxyXG4gICAgaWYgKFxyXG4gICAgICBvcHRpb25zLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICBvcHRpb25zLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEgPT09IG51bGxcclxuICAgICkge1xyXG4gICAgICBvcHRpb25zLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMuZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YSA9IG9wdGlvbnMuZnJlZUludGVybWVkaWF0ZVNwbGF0RGF0YTtcclxuXHJcbiAgICAvLyBJdCBhcHBlYXJzIHRoYXQgZm9yIGNlcnRhaW4gaU9TIHZlcnNpb25zLCBzcGVjaWFsIGFjdGlvbnMgbmVlZCB0byBiZSB0YWtlbiB3aXRoIHRoZVxyXG4gICAgLy8gdXNhZ2Ugb2YgU0lNRCBpbnN0cnVjdGlvbnMgYW5kIHNoYXJlZCBtZW1vcnlcclxuICAgIGlmIChpc0lPUygpKSB7XHJcbiAgICAgIGNvbnN0IHNlbXZlciA9IGdldElPU1NlbWV2ZXIoKTtcclxuICAgICAgaWYgKHNlbXZlci5tYWpvciA8IDE3KSB7XHJcbiAgICAgICAgdGhpcy5lbmFibGVTSU1ESW5Tb3J0ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNlbXZlci5tYWpvciA8IDE2KSB7XHJcbiAgICAgICAgdGhpcy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBUZWxsIHRoZSB2aWV3ZXIgaG93IHRvIHJlbmRlciB0aGUgc3BsYXRzXHJcbiAgICBpZiAoXHJcbiAgICAgIG9wdGlvbnMuc3BsYXRSZW5kZXJNb2RlID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgb3B0aW9ucy5zcGxhdFJlbmRlck1vZGUgPT09IG51bGxcclxuICAgICkge1xyXG4gICAgICBvcHRpb25zLnNwbGF0UmVuZGVyTW9kZSA9IFNwbGF0UmVuZGVyTW9kZS5UaHJlZUQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNwbGF0UmVuZGVyTW9kZSA9IG9wdGlvbnMuc3BsYXRSZW5kZXJNb2RlO1xyXG5cclxuICAgIC8vIEN1c3RvbWl6ZSB0aGUgc3BlZWQgYXQgd2hpY2ggdGhlIHNjZW5lIGlzIHJldmVhbGVkXHJcbiAgICB0aGlzLnNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXIgPSBvcHRpb25zLnNjZW5lRmFkZUluUmF0ZU11bHRpcGxpZXIgfHwgMS4wO1xyXG5cclxuICAgIC8vIFNldCB0aGUgcmFuZ2UgZm9yIHRoZSBkZXB0aCBtYXAgZm9yIHRoZSBjb3VudGluZyBzb3J0IHVzZWQgdG8gc29ydCB0aGUgc3BsYXRzXHJcbiAgICB0aGlzLnNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uID1cclxuICAgICAgb3B0aW9ucy5zcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbiB8fFxyXG4gICAgICBDb25zdGFudHMuRGVmYXVsdFNwbGF0U29ydERpc3RhbmNlTWFwUHJlY2lzaW9uO1xyXG4gICAgY29uc3QgbWF4UHJlY2lzaW9uID0gdGhpcy5pbnRlZ2VyQmFzZWRTb3J0ID8gMjAgOiAyNDtcclxuICAgIHRoaXMuc3BsYXRTb3J0RGlzdGFuY2VNYXBQcmVjaXNpb24gPSBjbGFtcChcclxuICAgICAgdGhpcy5zcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvbixcclxuICAgICAgMTAsXHJcbiAgICAgIG1heFByZWNpc2lvblxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLm9uU3BsYXRNZXNoQ2hhbmdlZENhbGxiYWNrID0gbnVsbDtcclxuICAgIHRoaXMuY3JlYXRlU3BsYXRNZXNoKCk7XHJcblxyXG4gICAgdGhpcy5jb250cm9scyA9IG51bGw7XHJcbiAgICB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHMgPSBudWxsO1xyXG4gICAgdGhpcy5vcnRob2dyYXBoaWNDb250cm9scyA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5vcnRob2dyYXBoaWNDYW1lcmEgPSBudWxsO1xyXG4gICAgdGhpcy5wZXJzcGVjdGl2ZUNhbWVyYSA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zaG93TWVzaEN1cnNvciA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93Q29udHJvbFBsYW5lID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dJbmZvID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5zY2VuZUhlbHBlciA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5zb3J0V29ya2VyID0gbnVsbDtcclxuICAgIHRoaXMuc29ydFJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuc3BsYXRSZW5kZXJDb3VudCA9IDA7XHJcbiAgICB0aGlzLnNwbGF0U29ydENvdW50ID0gMDtcclxuICAgIHRoaXMubGFzdFNwbGF0U29ydENvdW50ID0gMDtcclxuICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQgPSBudWxsO1xyXG4gICAgdGhpcy5zb3J0V29ya2VyU29ydGVkSW5kZXhlcyA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRXb3JrZXJQcmVjb21wdXRlZERpc3RhbmNlcyA9IG51bGw7XHJcbiAgICB0aGlzLnNvcnRXb3JrZXJUcmFuc2Zvcm1zID0gbnVsbDtcclxuICAgIHRoaXMucHJlU29ydE1lc3NhZ2VzID0gW107XHJcbiAgICB0aGlzLnJ1bkFmdGVyTmV4dFNvcnQgPSBbXTtcclxuXHJcbiAgICB0aGlzLnNlbGZEcml2ZW5Nb2RlUnVubmluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5yYXljYXN0ZXIgPSBuZXcgUmF5Y2FzdGVyKCk7XHJcblxyXG4gICAgdGhpcy5pbmZvUGFuZWwgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuc3RhcnRJbk9ydGhvZ3JhcGhpY01vZGUgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmN1cnJlbnRGUFMgPSAwO1xyXG4gICAgdGhpcy5sYXN0U29ydFRpbWUgPSAwO1xyXG4gICAgdGhpcy5jb25zZWN1dGl2ZVJlbmRlckZyYW1lcyA9IDA7XHJcblxyXG4gICAgdGhpcy5wcmV2aW91c0NhbWVyYVRhcmdldCA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICB0aGlzLm5leHRDYW1lcmFUYXJnZXQgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgIHRoaXMubW91c2VQb3NpdGlvbiA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICB0aGlzLm1vdXNlRG93blBvc2l0aW9uID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIHRoaXMubW91c2VEb3duVGltZSA9IG51bGw7XHJcblxyXG4gICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XHJcbiAgICB0aGlzLm1vdXNlTW92ZUxpc3RlbmVyID0gbnVsbDtcclxuICAgIHRoaXMubW91c2VEb3duTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgdGhpcy5tb3VzZVVwTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgdGhpcy5rZXlEb3duTGlzdGVuZXIgPSBudWxsO1xyXG5cclxuICAgIHRoaXMuc29ydFByb21pc2UgPSBudWxsO1xyXG4gICAgdGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyID0gbnVsbDtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcnMgPSBbXTtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZXMgPSB7fTtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlID0gbnVsbDtcclxuICAgIHRoaXMuc3BsYXRTY2VuZVJlbW92YWxQcm9taXNlID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLmxvYWRpbmdTcGlubmVyID0gbmV3IExvYWRpbmdTcGlubmVyKFxyXG4gICAgICBudWxsLFxyXG4gICAgICB0aGlzLnJvb3RFbGVtZW50IHx8IGRvY3VtZW50LmJvZHlcclxuICAgICk7XHJcbiAgICB0aGlzLmxvYWRpbmdTcGlubmVyLmhpZGUoKTtcclxuICAgIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyID0gbmV3IExvYWRpbmdQcm9ncmVzc0JhcihcclxuICAgICAgdGhpcy5yb290RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5XHJcbiAgICApO1xyXG4gICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuaGlkZSgpO1xyXG4gICAgLy8gdGhpcy5pbmZvUGFuZWwgPSBuZXcgSW5mb1BhbmVsKHRoaXMucm9vdEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keSlcclxuICAgIC8vIHRoaXMuaW5mb1BhbmVsLmhpZGUoKVxyXG5cclxuICAgIHRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSA9IHRoaXMuZHJvcEluTW9kZSB8fCB0aGlzLmNhbWVyYSA/IHRydWUgOiBmYWxzZTtcclxuICAgIHRoaXMudXNpbmdFeHRlcm5hbFJlbmRlcmVyID0gdGhpcy5kcm9wSW5Nb2RlIHx8IHRoaXMucmVuZGVyZXIgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5kaXNwb3NpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuZGlzcG9zZVByb21pc2UgPSBudWxsO1xyXG5cclxuICAgIHRoaXMubGFzdFRpbWUgPSAwO1xyXG4gICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSAwO1xyXG4gICAgdGhpcy50b3RhbEZyYW1lcyA9IDA7XHJcbiAgICB0aGlzLmZyYW1lID0gMDtcclxuICAgIHRoaXMuIGF2YXRhck1lc2ggPSBudWxsO1xyXG4gICAgdGhpcy5za2luTW9kZWwgPSBudWxsO1xyXG4gICAgdGhpcy5ib25lUm9vdCA9IG51bGw7XHJcbiAgICB0aGlzLmJhc2VNZXNoID0gbnVsbDtcclxuICAgIHRoaXMuc2V0U2tpbkF0dGlidXRlcyA9IGZhbHNlO1xyXG5cclxuICAgIGlmICghdGhpcy5kcm9wSW5Nb2RlKSB0aGlzLmluaXQoKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVNwbGF0TWVzaCgpIHtcclxuICAgIHRoaXMuc3BsYXRNZXNoID0gbmV3IFNwbGF0TWVzaChcclxuICAgICAgdGhpcy5zcGxhdFJlbmRlck1vZGUsXHJcbiAgICAgIHRoaXMuZHluYW1pY1NjZW5lLFxyXG4gICAgICB0aGlzLmVuYWJsZU9wdGlvbmFsRWZmZWN0cyxcclxuICAgICAgdGhpcy5oYWxmUHJlY2lzaW9uQ292YXJpYW5jZXNPbkdQVSxcclxuICAgICAgdGhpcy5kZXZpY2VQaXhlbFJhdGlvLFxyXG4gICAgICB0aGlzLmdwdUFjY2VsZXJhdGVkU29ydCxcclxuICAgICAgdGhpcy5pbnRlZ2VyQmFzZWRTb3J0LFxyXG4gICAgICB0aGlzLmFudGlhbGlhc2VkLFxyXG4gICAgICB0aGlzLm1heFNjcmVlblNwYWNlU3BsYXRTaXplLFxyXG4gICAgICB0aGlzLmxvZ0xldmVsLFxyXG4gICAgICB0aGlzLnNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZSxcclxuICAgICAgdGhpcy5zY2VuZUZhZGVJblJhdGVNdWx0aXBsaWVyLFxyXG4gICAgICB0aGlzLmtlcm5lbDJEU2l6ZVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBQYXNzIGlyaXMgb2NjbHVzaW9uIGNvbmZpZyBpZiBsb2FkZWRcclxuICAgIHRoaXMuc3BsYXRNZXNoLmlyaXNPY2NsdXNpb25Db25maWcgPSB0aGlzLmlyaXNPY2NsdXNpb25Db25maWc7XHJcbiAgICB0aGlzLnNwbGF0TWVzaC5mcnVzdHVtQ3VsbGVkID0gZmFsc2U7XHJcbiAgICBpZiAodGhpcy5vblNwbGF0TWVzaENoYW5nZWRDYWxsYmFjaykgdGhpcy5vblNwbGF0TWVzaENoYW5nZWRDYWxsYmFjaygpO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSByZXR1cm5cclxuXHJcbiAgICBpZiAoIXRoaXMucm9vdEVsZW1lbnQpIHtcclxuICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxSZW5kZXJlcikge1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgIHRoaXMucm9vdEVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yb290RWxlbWVudCA9IHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXR1cENhbWVyYSgpO1xyXG4gICAgdGhpcy5zZXR1cFJlbmRlcmVyKCk7XHJcbiAgICAvLyDmmoLml7bljrvmjonmjqfliLblmahcclxuICAgIC8vIHRoaXMuc2V0dXBDb250cm9scygpXHJcbiAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycygpO1xyXG5cclxuICAgIHRoaXMudGhyZWVTY2VuZSA9IHRoaXMudGhyZWVTY2VuZSB8fCBuZXcgU2NlbmUoKTtcclxuICAgIHRoaXMuc2NlbmVIZWxwZXIgPSBuZXcgU2NlbmVIZWxwZXIodGhpcy50aHJlZVNjZW5lKTtcclxuICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0dXBNZXNoQ3Vyc29yKCk7XHJcbiAgICB0aGlzLnNjZW5lSGVscGVyLnNldHVwRm9jdXNNYXJrZXIoKTtcclxuICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0dXBDb250cm9sUGxhbmUoKTtcclxuXHJcbiAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5zZXRDb250YWluZXIodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldENvbnRhaW5lcih0aGlzLnJvb3RFbGVtZW50KTtcclxuICAgIC8vIHRoaXMuaW5mb1BhbmVsLnNldENvbnRhaW5lcih0aGlzLnJvb3RFbGVtZW50KVxyXG5cclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2V0dXBDYW1lcmEoKSB7XHJcbiAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKTtcclxuICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG5cclxuICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYShcclxuICAgICAgICBUSFJFRV9DQU1FUkFfRk9WLFxyXG4gICAgICAgIHJlbmRlckRpbWVuc2lvbnMueCAvIHJlbmRlckRpbWVuc2lvbnMueSxcclxuICAgICAgICAwLjEsXHJcbiAgICAgICAgMTAwMFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NhbWVyYSA9IG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoXHJcbiAgICAgICAgcmVuZGVyRGltZW5zaW9ucy54IC8gLTIsXHJcbiAgICAgICAgcmVuZGVyRGltZW5zaW9ucy54IC8gMixcclxuICAgICAgICByZW5kZXJEaW1lbnNpb25zLnkgLyAyLFxyXG4gICAgICAgIHJlbmRlckRpbWVuc2lvbnMueSAvIC0yLFxyXG4gICAgICAgIDAuMSxcclxuICAgICAgICAxMDAwXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5zdGFydEluT3J0aG9ncmFwaGljTW9kZVxyXG4gICAgICAgID8gdGhpcy5vcnRob2dyYXBoaWNDYW1lcmFcclxuICAgICAgICA6IHRoaXMucGVyc3BlY3RpdmVDYW1lcmE7XHJcbiAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLmNvcHkodGhpcy5pbml0aWFsQ2FtZXJhUG9zaXRpb24pO1xyXG4gICAgICAvLyB0aGlzLmNhbWVyYS51cC5jb3B5KHRoaXMuY2FtZXJhVXApLm5vcm1hbGl6ZSgpXHJcbiAgICAgIC8vIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLmluaXRpYWxDYW1lcmFMb29rQXQpXHJcbiAgICAgIHRoaXMuY2FtZXJhLnJvdGF0ZVgoTWF0aFV0aWxzLmRlZ1RvUmFkKHRoaXMuaW5pdGlhbENhbWVyYVJvdGF0aW9uLngpKTtcclxuICAgICAgdGhpcy5jYW1lcmEucm90YXRlWShNYXRoVXRpbHMuZGVnVG9SYWQodGhpcy5pbml0aWFsQ2FtZXJhUm90YXRpb24ueSkpO1xyXG4gICAgICB0aGlzLmNhbWVyYS5yb3RhdGVaKE1hdGhVdGlscy5kZWdUb1JhZCh0aGlzLmluaXRpYWxDYW1lcmFSb3RhdGlvbi56KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXR1cFJlbmRlcmVyKCkge1xyXG4gICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxSZW5kZXJlcikge1xyXG4gICAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKTtcclxuICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG5cclxuICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyKHtcclxuICAgICAgICBhbnRpYWxpYXM6IGZhbHNlLFxyXG4gICAgICAgIHByZWNpc2lvbjogJ2hpZ2hwJyxcclxuICAgICAgICBjYW52YXM6IHRoaXMuY2FudmFzXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFBpeGVsUmF0aW8odGhpcy5kZXZpY2VQaXhlbFJhdGlvKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hdXRvQ2xlYXIgPSB0cnVlO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldENsZWFyQ29sb3IodGhpcy5iYWNrZ3JvdW5kQ29sb3IsIDEuMCk7IC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGFjY29yZGluZyB0byB0aGUgY29uZmlnXHJcblxyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFNpemUocmVuZGVyRGltZW5zaW9ucy54LCByZW5kZXJEaW1lbnNpb25zLnkpO1xyXG5cclxuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZShyZW5kZXJEaW1lbnNpb25zLngsIHJlbmRlckRpbWVuc2lvbnMueSk7XHJcbiAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMucm9vdEVsZW1lbnQpO1xyXG4gICAgICB0aGlzLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXR1cENvbnRyb2xzKCkge1xyXG4gICAgaWYgKHRoaXMudXNlQnVpbHRJbkNvbnRyb2xzKSB7XHJcbiAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzcGVjdGl2ZUNvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoXHJcbiAgICAgICAgICB0aGlzLnBlcnNwZWN0aXZlQ2FtZXJhLFxyXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoXHJcbiAgICAgICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NhbWVyYSxcclxuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhKSB7XHJcbiAgICAgICAgICB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzID0gbmV3IE9yYml0Q29udHJvbHMoXHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnRcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucGVyc3BlY3RpdmVDb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKFxyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBjb250cm9scyBvZiBbXHJcbiAgICAgICAgdGhpcy5vcnRob2dyYXBoaWNDb250cm9scyxcclxuICAgICAgICB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHNcclxuICAgICAgXSkge1xyXG4gICAgICAgIGlmIChjb250cm9scykge1xyXG4gICAgICAgICAgY29udHJvbHMubGlzdGVuVG9LZXlFdmVudHMod2luZG93KTtcclxuICAgICAgICAgIGNvbnRyb2xzLnJvdGF0ZVNwZWVkID0gMC41O1xyXG4gICAgICAgICAgY29udHJvbHMubWF4UG9sYXJBbmdsZSA9IE1hdGguUEkgKiAwLjU7Ly8gKyBNYXRoLlBJIC8gMjRcclxuICAgICAgICAgIGNvbnRyb2xzLm1pblBvbGFyQW5nbGUgPSBNYXRoLlBJICogMC41Oy8vIC0gTWF0aC5QSSAvIDI0XHJcbiAgICAgICAgICBjb250cm9scy5taW5BemltdXRoQW5nbGUgPSAtTWF0aC5QSSAvIDcyO1xyXG4gICAgICAgICAgY29udHJvbHMubWF4QXppbXV0aEFuZ2xlID0gTWF0aC5QSSAvIDcyO1xyXG4gICAgICAgICAgY29udHJvbHMuZW5hYmxlRGFtcGluZyA9IHRydWU7XHJcbiAgICAgICAgICBjb250cm9scy5kYW1waW5nRmFjdG9yID0gMC4wNTtcclxuICAgICAgICAgIGNvbnRyb2xzLnRhcmdldC5jb3B5KHRoaXMuaW5pdGlhbENhbWVyYUxvb2tBdCk7XHJcbiAgICAgICAgICBjb250cm9scy51cGRhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jb250cm9scyA9IHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhXHJcbiAgICAgICAgPyB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzXHJcbiAgICAgICAgOiB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHM7XHJcbiAgICAgIHRoaXMuY29udHJvbHMudXBkYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXR1cEV2ZW50SGFuZGxlcnMoKSB7XHJcbiAgICBpZiAodGhpcy51c2VCdWlsdEluQ29udHJvbHMpIHtcclxuICAgICAgdGhpcy5tb3VzZU1vdmVMaXN0ZW5lciA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ3BvaW50ZXJtb3ZlJyxcclxuICAgICAgICB0aGlzLm1vdXNlTW92ZUxpc3RlbmVyLFxyXG4gICAgICAgIGZhbHNlXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubW91c2VEb3duTGlzdGVuZXIgPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdwb2ludGVyZG93bicsXHJcbiAgICAgICAgdGhpcy5tb3VzZURvd25MaXN0ZW5lcixcclxuICAgICAgICBmYWxzZVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLm1vdXNlVXBMaXN0ZW5lciA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdwb2ludGVydXAnLFxyXG4gICAgICAgIHRoaXMubW91c2VVcExpc3RlbmVyLFxyXG4gICAgICAgIGZhbHNlXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMua2V5RG93bkxpc3RlbmVyID0gdGhpcy5vbktleURvd24uYmluZCh0aGlzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XHJcbiAgICBpZiAodGhpcy51c2VCdWlsdEluQ29udHJvbHMpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgJ3BvaW50ZXJtb3ZlJyxcclxuICAgICAgICB0aGlzLm1vdXNlTW92ZUxpc3RlbmVyXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubW91c2VNb3ZlTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncG9pbnRlcmRvd24nLFxyXG4gICAgICAgIHRoaXMubW91c2VEb3duTGlzdGVuZXJcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5tb3VzZURvd25MaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdwb2ludGVydXAnLFxyXG4gICAgICAgIHRoaXMubW91c2VVcExpc3RlbmVyXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubW91c2VVcExpc3RlbmVyID0gbnVsbDtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleURvd25MaXN0ZW5lcik7XHJcbiAgICAgIHRoaXMua2V5RG93bkxpc3RlbmVyID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldFJlbmRlck1vZGUocmVuZGVyTW9kZSkge1xyXG4gICAgdGhpcy5yZW5kZXJNb2RlID0gcmVuZGVyTW9kZTtcclxuICB9XHJcblxyXG4gIHNldEFjdGl2ZVNwaGVyaWNhbEhhcm1vbmljc0RlZ3JlZXMoYWN0aXZlU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlcykge1xyXG4gICAgdGhpcy5zcGxhdE1lc2gubWF0ZXJpYWwudW5pZm9ybXMuc3BoZXJpY2FsSGFybW9uaWNzRGVncmVlLnZhbHVlID1cclxuICAgICAgYWN0aXZlU3BoZXJpY2FsSGFybW9uaWNzRGVncmVlcztcclxuICAgIHRoaXMuc3BsYXRNZXNoLm1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBvblNwbGF0TWVzaENoYW5nZWQoY2FsbGJhY2spIHtcclxuICAgIHRoaXMub25TcGxhdE1lc2hDaGFuZ2VkQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHRlbXBGb3J3YXJkID0gbmV3IFZlY3RvcjMoKVxyXG4gIHRlbXBNYXRyaXhMZWZ0ID0gbmV3IE1hdHJpeDQoKVxyXG4gIHRlbXBNYXRyaXhSaWdodCA9IG5ldyBNYXRyaXg0KClcclxuICBvbktleURvd24gPSAoZSkgPT4ge1xyXG4gICAgdGhpcy50ZW1wRm9yd2FyZC5zZXQoMCwgMCwgLTEpO1xyXG4gICAgdGhpcy50ZW1wRm9yd2FyZC50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcy5jYW1lcmEubWF0cml4V29ybGQpO1xyXG4gICAgdGhpcy50ZW1wTWF0cml4TGVmdC5tYWtlUm90YXRpb25BeGlzKHRoaXMudGVtcEZvcndhcmQsIE1hdGguUEkgLyAxMjgpO1xyXG4gICAgdGhpcy50ZW1wTWF0cml4UmlnaHQubWFrZVJvdGF0aW9uQXhpcyh0aGlzLnRlbXBGb3J3YXJkLCAtTWF0aC5QSSAvIDEyOCk7XHJcbiAgICBzd2l0Y2ggKGUuY29kZSkge1xyXG4gICAgICBjYXNlICdLZXlHJzpcclxuICAgICAgICB0aGlzLmZvY2FsQWRqdXN0bWVudCArPSAwLjAyO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdLZXlGJzpcclxuICAgICAgICB0aGlzLmZvY2FsQWRqdXN0bWVudCAtPSAwLjAyO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdBcnJvd0xlZnQnOlxyXG4gICAgICAgIHRoaXMuY2FtZXJhLnVwLnRyYW5zZm9ybURpcmVjdGlvbih0aGlzLnRlbXBNYXRyaXhMZWZ0KTtcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcclxuICAgICAgICB0aGlzLmNhbWVyYS51cC50cmFuc2Zvcm1EaXJlY3Rpb24odGhpcy50ZW1wTWF0cml4UmlnaHQpO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0tleUMnOlxyXG4gICAgICAgIHRoaXMuc2hvd01lc2hDdXJzb3IgPSAhdGhpcy5zaG93TWVzaEN1cnNvcjtcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdLZXlVJzpcclxuICAgICAgICB0aGlzLnNob3dDb250cm9sUGxhbmUgPSAhdGhpcy5zaG93Q29udHJvbFBsYW5lO1xyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0tleUknOlxyXG4gICAgICAgIHRoaXMuc2hvd0luZm8gPSAhdGhpcy5zaG93SW5mbztcclxuICAgICAgICBpZiAodGhpcy5zaG93SW5mbykge1xyXG4gICAgICAgICAgLy8gdGhpcy5pbmZvUGFuZWwuc2hvdygpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIHRoaXMuaW5mb1BhbmVsLmhpZGUoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdLZXlPJzpcclxuICAgICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgICAgdGhpcy5zZXRPcnRob2dyYXBoaWNNb2RlKCF0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ0tleVAnOlxyXG4gICAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgICB0aGlzLnNwbGF0TWVzaC5zZXRQb2ludENsb3VkTW9kZUVuYWJsZWQoXHJcbiAgICAgICAgICAgICF0aGlzLnNwbGF0TWVzaC5nZXRQb2ludENsb3VkTW9kZUVuYWJsZWQoKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnRXF1YWwnOlxyXG4gICAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsQ2FtZXJhKSB7XHJcbiAgICAgICAgICB0aGlzLnNwbGF0TWVzaC5zZXRTcGxhdFNjYWxlKHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0U2NhbGUoKSArIDAuMDUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdNaW51cyc6XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnNldFNwbGF0U2NhbGUoXHJcbiAgICAgICAgICAgIE1hdGgubWF4KHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0U2NhbGUoKSAtIDAuMDUsIDAuMClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZShtb3VzZSkge1xyXG4gICAgdGhpcy5tb3VzZVBvc2l0aW9uLnNldChtb3VzZS5vZmZzZXRYLCBtb3VzZS5vZmZzZXRZKTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VEb3duKCkge1xyXG4gICAgdGhpcy5tb3VzZURvd25Qb3NpdGlvbi5jb3B5KHRoaXMubW91c2VQb3NpdGlvbik7XHJcbiAgICB0aGlzLm1vdXNlRG93blRpbWUgPSBnZXRDdXJyZW50VGltZSgpO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZVVwID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGNsaWNrT2Zmc2V0ID0gbmV3IFZlY3RvcjIoKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1vdXNlKSB7XHJcbiAgICAgIGNsaWNrT2Zmc2V0LmNvcHkodGhpcy5tb3VzZVBvc2l0aW9uKS5zdWIodGhpcy5tb3VzZURvd25Qb3NpdGlvbik7XHJcbiAgICAgIGNvbnN0IG1vdXNlVXBUaW1lID0gZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgY29uc3Qgd2FzQ2xpY2sgPVxyXG4gICAgICAgIG1vdXNlVXBUaW1lIC0gdGhpcy5tb3VzZURvd25UaW1lIDwgMC41ICYmIGNsaWNrT2Zmc2V0Lmxlbmd0aCgpIDwgMjtcclxuICAgICAgaWYgKHdhc0NsaWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbk1vdXNlQ2xpY2sobW91c2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICBvbk1vdXNlQ2xpY2sobW91c2UpIHtcclxuICAgIHRoaXMubW91c2VQb3NpdGlvbi5zZXQobW91c2Uub2Zmc2V0WCwgbW91c2Uub2Zmc2V0WSk7XHJcbiAgICB0aGlzLmNoZWNrRm9yRm9jYWxQb2ludENoYW5nZSgpO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tQb2ludFJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpXHJcbiAgY2hlY2tQb2ludFRvTmV3Rm9jYWxQb2ludCA9IG5ldyBWZWN0b3IzKClcclxuICBjaGVja1BvaW50T3V0SGl0cyA9IFtdXHJcbiAgY2hlY2tGb3JGb2NhbFBvaW50Q2hhbmdlID0gKCkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXQpIHtcclxuICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHRoaXMuY2hlY2tQb2ludFJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICB0aGlzLmNoZWNrUG9pbnRPdXRIaXRzLmxlbmd0aCA9IDA7XHJcbiAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmFBbmRTY3JlZW5Qb3NpdGlvbihcclxuICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICB0aGlzLm1vdXNlUG9zaXRpb24sXHJcbiAgICAgICAgdGhpcy5jaGVja1BvaW50UmVuZGVyRGltZW5zaW9uc1xyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RTcGxhdE1lc2godGhpcy5zcGxhdE1lc2gsIHRoaXMuY2hlY2tQb2ludE91dEhpdHMpO1xyXG4gICAgICBpZiAodGhpcy5jaGVja1BvaW50T3V0SGl0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgaGl0ID0gdGhpcy5jaGVja1BvaW50T3V0SGl0c1swXTtcclxuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IGhpdC5vcmlnaW47XHJcbiAgICAgICAgdGhpcy5jaGVja1BvaW50VG9OZXdGb2NhbFBvaW50XHJcbiAgICAgICAgICAuY29weShpbnRlcnNlY3Rpb25Qb2ludClcclxuICAgICAgICAgIC5zdWIodGhpcy5jYW1lcmEucG9zaXRpb24pO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuY2hlY2tQb2ludFRvTmV3Rm9jYWxQb2ludC5sZW5ndGgoKSA+XHJcbiAgICAgICAgICBNSU5JTVVNX0RJU1RBTkNFX1RPX05FV19GT0NBTF9QT0lOVFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5wcmV2aW91c0NhbWVyYVRhcmdldC5jb3B5KHRoaXMuY29udHJvbHMudGFyZ2V0KTtcclxuICAgICAgICAgIHRoaXMubmV4dENhbWVyYVRhcmdldC5jb3B5KGludGVyc2VjdGlvblBvaW50KTtcclxuICAgICAgICAgIHRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldCA9IHRydWU7XHJcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXRTdGFydFRpbWUgPSBnZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UmVuZGVyRGltZW5zaW9ucyhvdXREaW1lbnNpb25zKSB7XHJcbiAgICBpZiAodGhpcy5yb290RWxlbWVudCkge1xyXG4gICAgICBvdXREaW1lbnNpb25zLnggPSB0aGlzLnJvb3RFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICBvdXREaW1lbnNpb25zLnkgPSB0aGlzLnJvb3RFbGVtZW50Lm9mZnNldEhlaWdodDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuZ2V0U2l6ZShvdXREaW1lbnNpb25zKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldE9ydGhvZ3JhcGhpY01vZGUob3J0aG9ncmFwaGljTW9kZSkge1xyXG4gICAgaWYgKG9ydGhvZ3JhcGhpY01vZGUgPT09IHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhKSByZXR1cm5cclxuICAgIGNvbnN0IGZyb21DYW1lcmEgPSB0aGlzLmNhbWVyYTtcclxuICAgIGNvbnN0IHRvQ2FtZXJhID0gb3J0aG9ncmFwaGljTW9kZVxyXG4gICAgICA/IHRoaXMub3J0aG9ncmFwaGljQ2FtZXJhXHJcbiAgICAgIDogdGhpcy5wZXJzcGVjdGl2ZUNhbWVyYTtcclxuICAgIHRvQ2FtZXJhLnBvc2l0aW9uLmNvcHkoZnJvbUNhbWVyYS5wb3NpdGlvbik7XHJcbiAgICB0b0NhbWVyYS51cC5jb3B5KGZyb21DYW1lcmEudXApO1xyXG4gICAgdG9DYW1lcmEucm90YXRpb24uY29weShmcm9tQ2FtZXJhLnJvdGF0aW9uKTtcclxuICAgIHRvQ2FtZXJhLnF1YXRlcm5pb24uY29weShmcm9tQ2FtZXJhLnF1YXRlcm5pb24pO1xyXG4gICAgdG9DYW1lcmEubWF0cml4LmNvcHkoZnJvbUNhbWVyYS5tYXRyaXgpO1xyXG4gICAgdGhpcy5jYW1lcmEgPSB0b0NhbWVyYTtcclxuXHJcbiAgICBpZiAodGhpcy5jb250cm9scykge1xyXG4gICAgICBjb25zdCByZXNldENvbnRyb2xzID0gKGNvbnRyb2xzKSA9PiB7XHJcbiAgICAgICAgY29udHJvbHMuc2F2ZVN0YXRlKCk7XHJcbiAgICAgICAgY29udHJvbHMucmVzZXQoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGZyb21Db250cm9scyA9IHRoaXMuY29udHJvbHM7XHJcbiAgICAgIGNvbnN0IHRvQ29udHJvbHMgPSBvcnRob2dyYXBoaWNNb2RlXHJcbiAgICAgICAgPyB0aGlzLm9ydGhvZ3JhcGhpY0NvbnRyb2xzXHJcbiAgICAgICAgOiB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHM7XHJcblxyXG4gICAgICByZXNldENvbnRyb2xzKHRvQ29udHJvbHMpO1xyXG4gICAgICByZXNldENvbnRyb2xzKGZyb21Db250cm9scyk7XHJcblxyXG4gICAgICB0b0NvbnRyb2xzLnRhcmdldC5jb3B5KGZyb21Db250cm9scy50YXJnZXQpO1xyXG4gICAgICBpZiAob3J0aG9ncmFwaGljTW9kZSkge1xyXG4gICAgICAgIFZpZXdlci5zZXRDYW1lcmFab29tRnJvbVBvc2l0aW9uKHRvQ2FtZXJhLCBmcm9tQ2FtZXJhLCBmcm9tQ29udHJvbHMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIFZpZXdlci5zZXRDYW1lcmFQb3NpdGlvbkZyb21ab29tKHRvQ2FtZXJhLCBmcm9tQ2FtZXJhLCB0b0NvbnRyb2xzKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmNvbnRyb2xzID0gdG9Db250cm9scztcclxuICAgICAgdGhpcy5jYW1lcmEubG9va0F0KHRoaXMuY29udHJvbHMudGFyZ2V0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBzZXRDYW1lcmFQb3NpdGlvbkZyb21ab29tID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHRlbXBWZWN0b3IgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAocG9zaXRpb25DYW1lcmEsIHpvb21lZENhbWVyYSwgY29udHJvbHMpIHtcclxuICAgICAgY29uc3QgdG9Mb29rQXREaXN0YW5jZSA9IDEgLyAoem9vbWVkQ2FtZXJhLnpvb20gKiAwLjAwMSk7XHJcbiAgICAgIHRlbXBWZWN0b3JcclxuICAgICAgICAuY29weShjb250cm9scy50YXJnZXQpXHJcbiAgICAgICAgLnN1Yihwb3NpdGlvbkNhbWVyYS5wb3NpdGlvbilcclxuICAgICAgICAubm9ybWFsaXplKClcclxuICAgICAgICAubXVsdGlwbHlTY2FsYXIodG9Mb29rQXREaXN0YW5jZSlcclxuICAgICAgICAubmVnYXRlKCk7XHJcbiAgICAgIHBvc2l0aW9uQ2FtZXJhLnBvc2l0aW9uLmNvcHkoY29udHJvbHMudGFyZ2V0KS5hZGQodGVtcFZlY3Rvcik7XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICBzdGF0aWMgc2V0Q2FtZXJhWm9vbUZyb21Qb3NpdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCB0ZW1wVmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHpvb21DYW1lcmEsIHBvc2l0aW9uWmFtZXJhLCBjb250cm9scykge1xyXG4gICAgICBjb25zdCB0b0xvb2tBdERpc3RhbmNlID0gdGVtcFZlY3RvclxyXG4gICAgICAgIC5jb3B5KGNvbnRyb2xzLnRhcmdldClcclxuICAgICAgICAuc3ViKHBvc2l0aW9uWmFtZXJhLnBvc2l0aW9uKVxyXG4gICAgICAgIC5sZW5ndGgoKTtcclxuICAgICAgem9vbUNhbWVyYS56b29tID0gMSAvICh0b0xvb2tBdERpc3RhbmNlICogMC4wMDEpO1xyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgdXBkYXRlU3BsYXRNZXNoID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICghdGhpcy5zcGxhdE1lc2gpIHJldHVyblxyXG4gICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICBpZiAoc3BsYXRDb3VudCA+IDApIHtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVWaXNpYmxlUmVnaW9uRmFkZURpc3RhbmNlKHRoaXMuc2NlbmVSZXZlYWxNb2RlKTtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVUcmFuc2Zvcm1zKCk7XHJcbiAgICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICAgIGNvbnN0IGZvY2FsTGVuZ3RoWCA9XHJcbiAgICAgICAgICB0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzBdICpcclxuICAgICAgICAgIDAuNSAqXHJcbiAgICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8gKlxyXG4gICAgICAgICAgcmVuZGVyRGltZW5zaW9ucy54O1xyXG4gICAgICAgIGNvbnN0IGZvY2FsTGVuZ3RoWSA9XHJcbiAgICAgICAgICB0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmVsZW1lbnRzWzVdICpcclxuICAgICAgICAgIDAuNSAqXHJcbiAgICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8gKlxyXG4gICAgICAgICAgcmVuZGVyRGltZW5zaW9ucy55O1xyXG5cclxuICAgICAgICBjb25zdCBmb2NhbE11bHRpcGxpZXIgPSB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYVxyXG4gICAgICAgICAgPyAxLjAgLyB0aGlzLmRldmljZVBpeGVsUmF0aW9cclxuICAgICAgICAgIDogMS4wO1xyXG4gICAgICAgIGNvbnN0IGZvY2FsQWRqdXN0bWVudCA9IHRoaXMuZm9jYWxBZGp1c3RtZW50ICogZm9jYWxNdWx0aXBsaWVyO1xyXG4gICAgICAgIGNvbnN0IGludmVyc2VGb2NhbEFkanVzdG1lbnQgPSAxLjAgLyBmb2NhbEFkanVzdG1lbnQ7XHJcblxyXG4gICAgICAgIHRoaXMuYWRqdXN0Rm9yV2ViWFJTdGVyZW8ocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlVW5pZm9ybXMoXHJcbiAgICAgICAgICByZW5kZXJEaW1lbnNpb25zLFxyXG4gICAgICAgICAgZm9jYWxMZW5ndGhYICogZm9jYWxBZGp1c3RtZW50LFxyXG4gICAgICAgICAgZm9jYWxMZW5ndGhZICogZm9jYWxBZGp1c3RtZW50LFxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEsXHJcbiAgICAgICAgICB0aGlzLmNhbWVyYS56b29tIHx8IDEuMCxcclxuICAgICAgICAgIGludmVyc2VGb2NhbEFkanVzdG1lbnRcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICBhZGp1c3RGb3JXZWJYUlN0ZXJlbyhyZW5kZXJEaW1lbnNpb25zKSB7XHJcbiAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGEgbGVzcyBoYWNreSB3YXkgdG8gZGV0ZXJtaW5lIGlmIHN0ZXJlbyByZW5kZXJpbmcgaXMgYWN0aXZlXHJcbiAgICBpZiAodGhpcy5jYW1lcmEgJiYgdGhpcy53ZWJYUkFjdGl2ZSkge1xyXG4gICAgICBjb25zdCB4ckNhbWVyYSA9IHRoaXMucmVuZGVyZXIueHIuZ2V0Q2FtZXJhKCk7XHJcbiAgICAgIGNvbnN0IHhyQ2FtZXJhUHJvajAwID0geHJDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1swXTtcclxuICAgICAgY29uc3QgY2FtZXJhUHJvajAwID0gdGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeC5lbGVtZW50c1swXTtcclxuICAgICAgcmVuZGVyRGltZW5zaW9ucy54ICo9IGNhbWVyYVByb2owMCAvIHhyQ2FtZXJhUHJvajAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNMb2FkaW5nT3JVbmxvYWRpbmcoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnNwbGF0U2NlbmVEb3dubG9hZFByb21pc2VzKS5sZW5ndGggPiAwIHx8XHJcbiAgICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlICE9PSBudWxsIHx8XHJcbiAgICAgIHRoaXMuc3BsYXRTY2VuZVJlbW92YWxQcm9taXNlICE9PSBudWxsXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBpc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kaXNwb3NpbmcgfHwgdGhpcy5kaXNwb3NlZFxyXG4gIH1cclxuXHJcbiAgYWRkU3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcihjb250cm9sbGVyKSB7XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVyKGNvbnRyb2xsZXIpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRDb250cm9sbGVycy5pbmRleE9mKGNvbnRyb2xsZXIpO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKHByb21pc2UpIHtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZXNbcHJvbWlzZS5pZF0gPSBwcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgICBkZWxldGUgdGhpcy5zcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlc1twcm9taXNlLmlkXTtcclxuICB9XHJcblxyXG4gIHNldFNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZShwcm9taXNlKSB7XHJcbiAgICB0aGlzLnNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSA9IHByb21pc2U7XHJcbiAgfVxyXG5cclxuICBjbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpIHtcclxuICAgIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBhIHNwbGF0IHNjZW5lIHRvIHRoZSB2aWV3ZXIgYW5kIGRpc3BsYXkgYW55IGxvYWRpbmcgVUkgaWYgYXBwcm9wcmlhdGUuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byBzcGxhdCBzY2VuZSB0byBiZSBsb2FkZWRcclxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyB7XHJcbiAgICpcclxuICAgKiAgICAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkOiBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KSwgZGVmYXVsdHMgdG8gMVxyXG4gICAqXHJcbiAgICogICAgICAgICBzaG93TG9hZGluZ1VJOiAgICAgICAgIERpc3BsYXkgYSBsb2FkaW5nIHNwaW5uZXIgd2hpbGUgdGhlIHNjZW5lIGlzIGxvYWRpbmcsIGRlZmF1bHRzIHRvIHRydWVcclxuICAgKlxyXG4gICAqICAgICAgICAgcG9zaXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFBvc2l0aW9uIG9mIHRoZSBzY2VuZSwgYWN0cyBhcyBhbiBvZmZzZXQgZnJvbSBpdHMgZGVmYXVsdCBwb3NpdGlvbiwgZGVmYXVsdHMgdG8gWzAsIDAsIDBdXHJcbiAgICpcclxuICAgKiAgICAgICAgIHJvdGF0aW9uIChBcnJheTxudW1iZXI+KTogICBSb3RhdGlvbiBvZiB0aGUgc2NlbmUgcmVwcmVzZW50ZWQgYXMgYSBxdWF0ZXJuaW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMCwgMV1cclxuICAgKlxyXG4gICAqICAgICAgICAgc2NhbGUgKEFycmF5PG51bWJlcj4pOiAgICAgIFNjZW5lJ3Mgc2NhbGUsIGRlZmF1bHRzIHRvIFsxLCAxLCAxXVxyXG4gICAqXHJcbiAgICogICAgICAgICBvblByb2dyZXNzOiAgICAgICAgICAgICAgICAgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFzIGZpbGUgZGF0YSBhcmUgcmVjZWl2ZWQsIG9yIG90aGVyIHByb2Nlc3Npbmcgb2NjdXJzXHJcbiAgICpcclxuICAgKiAgICAgICAgIGhlYWRlcnM6ICAgICAgICAgICAgICAgICAgICBPcHRpb25hbCBIVFRQIGhlYWRlcnMgdG8gYmUgc2VudCBhbG9uZyB3aXRoIHNwbGF0IHJlcXVlc3RzXHJcbiAgICogfVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICovXHJcbiAgYWRkU3BsYXRTY2VuZShwYXRoLCBvcHRpb25zID0ge30pIHtcclxuICAgIGlmICh0aGlzLmlzTG9hZGluZ09yVW5sb2FkaW5nKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICdDYW5ub3QgYWRkIHNwbGF0IHNjZW5lIHdoaWxlIGFub3RoZXIgbG9hZCBvciB1bmxvYWQgaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4nXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBhZGQgc3BsYXQgc2NlbmUgYWZ0ZXIgZGlzcG9zZSgpIGlzIGNhbGxlZC4nKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChcclxuICAgICAgb3B0aW9ucy5wcm9ncmVzc2l2ZUxvYWQgJiZcclxuICAgICAgdGhpcy5zcGxhdE1lc2guc2NlbmVzICYmXHJcbiAgICAgIHRoaXMuc3BsYXRNZXNoLnNjZW5lcy5sZW5ndGggPiAwXHJcbiAgICApIHtcclxuICAgICAgbG9nZ2VyLndhcm4oXHJcbiAgICAgICAgJ2FkZFNwbGF0U2NlbmUoKTogXCJwcm9ncmVzc2l2ZUxvYWRcIiBvcHRpb24gaWdub3JlIGJlY2F1c2UgdGhlcmUgYXJlIG11bHRpcGxlIHNwbGF0IHNjZW5lcydcclxuICAgICAgKTtcclxuICAgICAgb3B0aW9ucy5wcm9ncmVzc2l2ZUxvYWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtYXQgPVxyXG4gICAgICBvcHRpb25zLmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuZm9ybWF0ICE9PSBudWxsXHJcbiAgICAgICAgPyBvcHRpb25zLmZvcm1hdFxyXG4gICAgICAgIDogc2NlbmVGb3JtYXRGcm9tUGF0aChwYXRoKTtcclxuICAgIGNvbnN0IHByb2dyZXNzaXZlTG9hZCA9XHJcbiAgICAgIFZpZXdlci5pc1Byb2dyZXNzaXZlbHlMb2FkYWJsZShmb3JtYXQpICYmIG9wdGlvbnMucHJvZ3Jlc3NpdmVMb2FkO1xyXG4gICAgY29uc3Qgc2hvd0xvYWRpbmdVSSA9XHJcbiAgICAgIG9wdGlvbnMuc2hvd0xvYWRpbmdVSSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuc2hvd0xvYWRpbmdVSSAhPT0gbnVsbFxyXG4gICAgICAgID8gb3B0aW9ucy5zaG93TG9hZGluZ1VJXHJcbiAgICAgICAgOiB0cnVlO1xyXG5cclxuICAgIGxldCBsb2FkaW5nVUlUYXNrSWQgPSBudWxsO1xyXG4gICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgICBsb2FkaW5nVUlUYXNrSWQgPSB0aGlzLmxvYWRpbmdTcGlubmVyLmFkZFRhc2soJ0Rvd25sb2FkaW5nLi4uJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBoaWRlTG9hZGluZ1VJID0gKCkgPT4ge1xyXG4gICAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5oaWRlKCk7XHJcbiAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlQWxsVGFza3MoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25Qcm9ncmVzc1VJVXBkYXRlID0gKFxyXG4gICAgICBwZXJjZW50Q29tcGxldGUsXHJcbiAgICAgIHBlcmNlbnRDb21wbGV0ZUxhYmVsLFxyXG4gICAgICBsb2FkZXJTdGF0dXNcclxuICAgICkgPT4ge1xyXG4gICAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICAgIGlmIChsb2FkZXJTdGF0dXMgPT09IExvYWRlclN0YXR1cy5Eb3dubG9hZGluZykge1xyXG4gICAgICAgICAgaWYgKHBlcmNlbnRDb21wbGV0ZSA9PSAxMDApIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRNZXNzYWdlRm9yVGFzayhcclxuICAgICAgICAgICAgICBsb2FkaW5nVUlUYXNrSWQsXHJcbiAgICAgICAgICAgICAgJ0Rvd25sb2FkIGNvbXBsZXRlISdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc2l2ZUxvYWQpIHtcclxuICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldE1lc3NhZ2VGb3JUYXNrKFxyXG4gICAgICAgICAgICAgICAgbG9hZGluZ1VJVGFza0lkLFxyXG4gICAgICAgICAgICAgICAgJ0Rvd25sb2FkaW5nIHNwbGF0cy4uLidcclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHN1ZmZpeCA9IHBlcmNlbnRDb21wbGV0ZUxhYmVsXHJcbiAgICAgICAgICAgICAgICA/IGA6ICR7cGVyY2VudENvbXBsZXRlTGFiZWx9YFxyXG4gICAgICAgICAgICAgICAgOiBgLi4uYDtcclxuICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldE1lc3NhZ2VGb3JUYXNrKFxyXG4gICAgICAgICAgICAgICAgbG9hZGluZ1VJVGFza0lkLFxyXG4gICAgICAgICAgICAgICAgYERvd25sb2FkaW5nJHtzdWZmaXh9YFxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGxvYWRlclN0YXR1cyA9PT0gTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcpIHtcclxuICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnbG9hZGVyU3RhdHVzID09PSBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZycpO1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRNZXNzYWdlRm9yVGFzayhcclxuICAgICAgICAgICAgbG9hZGluZ1VJVGFza0lkLFxyXG4gICAgICAgICAgICAnUHJvY2Vzc2luZyBzcGxhdHMuLi4nXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgZG93bmxvYWREb25lID0gZmFsc2U7XHJcbiAgICBsZXQgZG93bmxvYWRlZFBlcmNlbnRhZ2UgPSAwO1xyXG4gICAgY29uc3Qgc3BsYXRCdWZmZXJzQWRkZWRVSVVwZGF0ZSA9IChmaXJzdEJ1aWxkLCBmaW5hbEJ1aWxkKSA9PiB7XHJcbiAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgKGZpcnN0QnVpbGQgJiYgcHJvZ3Jlc3NpdmVMb2FkKSB8fFxyXG4gICAgICAgICAgKGZpbmFsQnVpbGQgJiYgIXByb2dyZXNzaXZlTG9hZClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlVGFzayhsb2FkaW5nVUlUYXNrSWQpO1xyXG4gICAgICAgICAgaWYgKCFmaW5hbEJ1aWxkICYmICFkb3dubG9hZERvbmUpIHRoaXMubG9hZGluZ1Byb2dyZXNzQmFyLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByb2dyZXNzaXZlTG9hZCkge1xyXG4gICAgICAgICAgaWYgKGZpbmFsQnVpbGQpIHtcclxuICAgICAgICAgICAgZG93bmxvYWREb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuaGlkZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuc2V0UHJvZ3Jlc3MoZG93bmxvYWRlZFBlcmNlbnRhZ2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBvblByb2dyZXNzID0gKFxyXG4gICAgICBwZXJjZW50Q29tcGxldGUsXHJcbiAgICAgIHBlcmNlbnRDb21wbGV0ZUxhYmVsLFxyXG4gICAgICBsb2FkZXJTdGF0dXNcclxuICAgICkgPT4ge1xyXG4gICAgICBkb3dubG9hZGVkUGVyY2VudGFnZSA9IHBlcmNlbnRDb21wbGV0ZTtcclxuICAgICAgb25Qcm9ncmVzc1VJVXBkYXRlKHBlcmNlbnRDb21wbGV0ZSwgcGVyY2VudENvbXBsZXRlTGFiZWwsIGxvYWRlclN0YXR1cyk7XHJcbiAgICAgIGlmIChvcHRpb25zLm9uUHJvZ3Jlc3MpXHJcbiAgICAgICAgb3B0aW9ucy5vblByb2dyZXNzKHBlcmNlbnRDb21wbGV0ZSwgcGVyY2VudENvbXBsZXRlTGFiZWwsIGxvYWRlclN0YXR1cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGJ1aWxkU2VjdGlvbiA9IChzcGxhdEJ1ZmZlciwgZmlyc3RCdWlsZCwgZmluYWxCdWlsZCkgPT4ge1xyXG4gICAgICBpZiAoIXByb2dyZXNzaXZlTG9hZCAmJiBvcHRpb25zLm9uUHJvZ3Jlc3MpXHJcbiAgICAgICAgb3B0aW9ucy5vblByb2dyZXNzKDAsICcwJScsIExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nKTtcclxuICAgICAgY29uc3QgYWRkU3BsYXRCdWZmZXJPcHRpb25zID0ge1xyXG4gICAgICAgIHJvdGF0aW9uOiBvcHRpb25zLnJvdGF0aW9uIHx8IG9wdGlvbnMub3JpZW50YXRpb24sXHJcbiAgICAgICAgcG9zaXRpb246IG9wdGlvbnMucG9zaXRpb24sXHJcbiAgICAgICAgc2NhbGU6IG9wdGlvbnMuc2NhbGUsXHJcbiAgICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQ6IG9wdGlvbnMuc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGRcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHRoaXMuYWRkU3BsYXRCdWZmZXJzKFxyXG4gICAgICAgIFtzcGxhdEJ1ZmZlcl0sXHJcbiAgICAgICAgW2FkZFNwbGF0QnVmZmVyT3B0aW9uc10sXHJcbiAgICAgICAgZmluYWxCdWlsZCxcclxuICAgICAgICBmaXJzdEJ1aWxkICYmIHNob3dMb2FkaW5nVUksXHJcbiAgICAgICAgc2hvd0xvYWRpbmdVSSxcclxuICAgICAgICBwcm9ncmVzc2l2ZUxvYWQsXHJcbiAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkXHJcbiAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFwcm9ncmVzc2l2ZUxvYWQgJiYgb3B0aW9ucy5vblByb2dyZXNzKVxyXG4gICAgICAgICAgb3B0aW9ucy5vblByb2dyZXNzKDEwMCwgJzEwMCUnLCBMb2FkZXJTdGF0dXMuUHJvY2Vzc2luZyk7XHJcbiAgICAgICAgc3BsYXRCdWZmZXJzQWRkZWRVSVVwZGF0ZShmaXJzdEJ1aWxkLCBmaW5hbEJ1aWxkKTtcclxuICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbG9hZEZ1bmMgPSBwcm9ncmVzc2l2ZUxvYWRcclxuICAgICAgPyB0aGlzLmRvd25sb2FkQW5kQnVpbGRTaW5nbGVTcGxhdFNjZW5lUHJvZ3Jlc3NpdmVMb2FkLmJpbmQodGhpcylcclxuICAgICAgOiB0aGlzLmRvd25sb2FkQW5kQnVpbGRTaW5nbGVTcGxhdFNjZW5lU3RhbmRhcmRMb2FkLmJpbmQodGhpcyk7XHJcbiAgICByZXR1cm4gbG9hZEZ1bmMoXHJcbiAgICAgIHBhdGgsXHJcbiAgICAgIGZvcm1hdCxcclxuICAgICAgb3B0aW9ucy5zcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgICAgYnVpbGRTZWN0aW9uLmJpbmQodGhpcyksXHJcbiAgICAgIG9uUHJvZ3Jlc3MsXHJcbiAgICAgIGhpZGVMb2FkaW5nVUkuYmluZCh0aGlzKSxcclxuICAgICAgb3B0aW9ucy5oZWFkZXJzXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEb3dubG9hZCBhIHNpbmdsZSBzcGxhdCBzY2VuZSwgY29udmVydCB0byBzcGxhdCBidWZmZXIgYW5kIHRoZW4gcmVidWlsZCB0aGUgdmlld2VyJ3Mgc3BsYXQgbWVzaFxyXG4gICAqIGJ5IGNhbGxpbmcgJ2J1aWxkRnVuYycgLS0gYWxsIGJlZm9yZSBkaXNwbGF5aW5nIHRoZSBzY2VuZS4gQWxzbyBzZXRzL2NsZWFycyByZWxldmFudCBpbnN0YW5jZSBzeW5jaHJvbml6YXRpb24gb2JqZWN0cyxcclxuICAgKiBhbmQgY2FsbHMgYXBwcm9wcmlhdGUgZnVuY3Rpb25zIG9uIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIHNwbGF0IHNjZW5lIHRvIGJlIGxvYWRlZFxyXG4gICAqIEBwYXJhbSB7U2NlbmVGb3JtYXR9IGZvcm1hdCBGb3JtYXQgb2YgdGhlIHNwbGF0IHNjZW5lIGZpbGVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQgSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZCB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gYnVpbGRGdW5jIEZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSB2aWV3ZXIncyBzcGxhdCBtZXNoIHdpdGggdGhlIGRvd25sb2FkZWQgc3BsYXQgYnVmZmVyXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25Qcm9ncmVzcyBGdW5jdGlvbiB0byBiZSBjYWxsZWQgYXMgZmlsZSBkYXRhIGFyZSByZWNlaXZlZCwgb3Igb3RoZXIgcHJvY2Vzc2luZyBvY2N1cnNcclxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbkV4Y2VwdGlvbiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBleGNlcHRpb24gb2NjdXJzXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGhlYWRlcnMgT3B0aW9uYWwgSFRUUCBoZWFkZXJzIHRvIHBhc3MgdG8gdXNlIGZvciBkb3dubG9hZGluZyBzcGxhdCBzY2VuZVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICovXHJcbiAgZG93bmxvYWRBbmRCdWlsZFNpbmdsZVNwbGF0U2NlbmVTdGFuZGFyZExvYWQoXHJcbiAgICBwYXRoLFxyXG4gICAgZm9ybWF0LFxyXG4gICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICBidWlsZEZ1bmMsXHJcbiAgICBvblByb2dyZXNzLFxyXG4gICAgb25FeGNlcHRpb24sXHJcbiAgICBoZWFkZXJzXHJcbiAgKSB7XHJcbiAgICBjb25zdCBkb3dubG9hZFByb21pc2UgPSB0aGlzLmRvd25sb2FkU3BsYXRTY2VuZVRvU3BsYXRCdWZmZXIoXHJcbiAgICAgIHBhdGgsXHJcbiAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkLFxyXG4gICAgICBvblByb2dyZXNzLFxyXG4gICAgICBmYWxzZSxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICBmb3JtYXQsXHJcbiAgICAgIGhlYWRlcnNcclxuICAgICk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgcHJvbWlzZSB0aGF0IGNhbiBiZSByZXNvbHZlZC9yZWplY3RlZCBleHRlcm5hbGx5LCB3aXRoIGFib3J0IGNhcGFiaWxpdHlcclxuICAgIGNvbnN0IGRvd25sb2FkQW5kQnVpbGRQcm9taXNlID0gYWJvcnRhYmxlUHJvbWlzZVdpdGhFeHRyYWN0ZWRDb21wb25lbnRzKFxyXG4gICAgICBkb3dubG9hZFByb21pc2UuYWJvcnQgPyBkb3dubG9hZFByb21pc2UuYWJvcnQuYmluZChkb3dubG9hZFByb21pc2UpIDogdW5kZWZpbmVkXHJcbiAgICApO1xyXG5cclxuICAgIGRvd25sb2FkUHJvbWlzZVxyXG4gICAgICAudGhlbigoc3BsYXRCdWZmZXIpID0+IHtcclxuICAgICAgICB0aGlzLnJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UoZG93bmxvYWRQcm9taXNlKTtcclxuICAgICAgICByZXR1cm4gYnVpbGRGdW5jKHNwbGF0QnVmZmVyLCB0cnVlLCB0cnVlKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGRvd25sb2FkQW5kQnVpbGRQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgIHRoaXMuY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICBpZiAob25FeGNlcHRpb24pIG9uRXhjZXB0aW9uKCk7XHJcbiAgICAgICAgdGhpcy5jbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShkb3dubG9hZFByb21pc2UpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID1cclxuICAgICAgICAgIChlIGluc3RhbmNlb2YgQWJvcnRlZFByb21pc2VFcnJvciB8fCBlLm5hbWUgPT09ICdBYm9ydEVycm9yJylcclxuICAgICAgICAgICAgPyBlXHJcbiAgICAgICAgICAgIDogbmV3IEVycm9yKGBWaWV3ZXI6OmFkZFNwbGF0U2NlbmUgLT4gQ291bGQgbm90IGxvYWQgZmlsZSAke3BhdGh9YCk7XHJcbiAgICAgICAgZG93bmxvYWRBbmRCdWlsZFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5hZGRTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKGRvd25sb2FkUHJvbWlzZSk7XHJcbiAgICB0aGlzLnNldFNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZShkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZS5wcm9taXNlKTtcclxuXHJcbiAgICByZXR1cm4gZG93bmxvYWRBbmRCdWlsZFByb21pc2UucHJvbWlzZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRG93bmxvYWQgYSBzaW5nbGUgc3BsYXQgc2NlbmUgYW5kIGNvbnZlcnQgdG8gc3BsYXQgYnVmZmVyIGluIGEgcHJvZ3Jlc3NpdmUgbWFubmVyLCBhbGxvd2luZyByZW5kZXJpbmcgYXMgdGhlIGZpbGUgZG93bmxvYWRzLlxyXG4gICAqIEFzIGVhY2ggc2VjdGlvbiBpcyBkb3dubG9hZGVkLCB0aGUgdmlld2VyJ3Mgc3BsYXQgbWVzaCBpcyByZWJ1aWx0IGJ5IGNhbGxpbmcgJ2J1aWxkRnVuYydcclxuICAgKiBBbHNvIHNldHMvY2xlYXJzIHJlbGV2YW50IGluc3RhbmNlIHN5bmNocm9uaXphdGlvbiBvYmplY3RzLCBhbmQgY2FsbHMgYXBwcm9wcmlhdGUgZnVuY3Rpb25zIG9uIHN1Y2Nlc3Mgb3IgZmFpbHVyZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHRvIHNwbGF0IHNjZW5lIHRvIGJlIGxvYWRlZFxyXG4gICAqIEBwYXJhbSB7U2NlbmVGb3JtYXR9IGZvcm1hdCBGb3JtYXQgb2YgdGhlIHNwbGF0IHNjZW5lIGZpbGVcclxuICAgKiBAcGFyYW0ge251bWJlcn0gc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQgSWdub3JlIGFueSBzcGxhdHMgd2l0aCBhbiBhbHBoYSBsZXNzIHRoYW4gdGhlIHNwZWNpZmllZCB2YWx1ZSAodmFsaWQgcmFuZ2U6IDAgLSAyNTUpXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gYnVpbGRGdW5jIEZ1bmN0aW9uIHRvIHJlYnVpbGQgdGhlIHZpZXdlcidzIHNwbGF0IG1lc2ggYWZ0ZXIgYSBuZXcgc3BsYXQgYnVmZmVyIHNlY3Rpb24gaXMgZG93bmxvYWRlZFxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uRG93bmxvYWRQcm9ncmVzcyBGdW5jdGlvbiB0byBiZSBjYWxsZWQgYXMgZmlsZSBkYXRhIGFyZSByZWNlaXZlZFxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uRG93bmxvYWRFeGNlcHRpb24gRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gZXhjZXB0aW9uIG9jY3VycyBhdCBhbnkgcG9pbnQgZHVyaW5nIHRoZSBmdWxsIGRvd25sb2FkXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGhlYWRlcnMgT3B0aW9uYWwgSFRUUCBoZWFkZXJzIHRvIHBhc3MgdG8gdXNlIGZvciBkb3dubG9hZGluZyBzcGxhdCBzY2VuZVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICovXHJcbiAgZG93bmxvYWRBbmRCdWlsZFNpbmdsZVNwbGF0U2NlbmVQcm9ncmVzc2l2ZUxvYWQoXHJcbiAgICBwYXRoLFxyXG4gICAgZm9ybWF0LFxyXG4gICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICBidWlsZEZ1bmMsXHJcbiAgICBvbkRvd25sb2FkUHJvZ3Jlc3MsXHJcbiAgICBvbkRvd25sb2FkRXhjZXB0aW9uLFxyXG4gICAgaGVhZGVyc1xyXG4gICkge1xyXG4gICAgbGV0IHByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkQ291bnQgPSAwO1xyXG4gICAgbGV0IHByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkaW5nID0gZmFsc2U7XHJcbiAgICBjb25zdCBxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzID0gW107XHJcblxyXG4gICAgY29uc3QgY2hlY2tBbmRCdWlsZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25zID0gKCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkcy5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgIXByb2dyZXNzaXZlTG9hZGVkU2VjdGlvbkJ1aWxkaW5nICYmXHJcbiAgICAgICAgIXRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKClcclxuICAgICAgKSB7XHJcbiAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRpbmcgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHF1ZXVlZEJ1aWxkID0gcXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkcy5zaGlmdCgpO1xyXG4gICAgICAgIGJ1aWxkRnVuYyhcclxuICAgICAgICAgIHF1ZXVlZEJ1aWxkLnNwbGF0QnVmZmVyLFxyXG4gICAgICAgICAgcXVldWVkQnVpbGQuZmlyc3RCdWlsZCxcclxuICAgICAgICAgIHF1ZXVlZEJ1aWxkLmZpbmFsQnVpbGRcclxuICAgICAgICApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgIGlmIChxdWV1ZWRCdWlsZC5maXJzdEJ1aWxkKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzaXZlTG9hZEZpcnN0U2VjdGlvbkJ1aWxkUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHF1ZXVlZEJ1aWxkLmZpbmFsQnVpbGQpIHtcclxuICAgICAgICAgICAgc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBkZWxheWVkRXhlY3V0ZSgoKSA9PiBjaGVja0FuZEJ1aWxkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbnMoKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgb25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MgPSAoc3BsYXRCdWZmZXIsIGZpbmFsQnVpbGQpID0+IHtcclxuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSB7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgZmluYWxCdWlsZCB8fFxyXG4gICAgICAgICAgcXVldWVkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbkJ1aWxkcy5sZW5ndGggPT09IDAgfHxcclxuICAgICAgICAgIHNwbGF0QnVmZmVyLmdldFNwbGF0Q291bnQoKSA+XHJcbiAgICAgICAgICAgIHF1ZXVlZFByb2dyZXNzaXZlTG9hZFNlY3Rpb25CdWlsZHNbMF0uc3BsYXRCdWZmZXIuZ2V0U3BsYXRDb3VudCgpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBxdWV1ZWRQcm9ncmVzc2l2ZUxvYWRTZWN0aW9uQnVpbGRzLnB1c2goe1xyXG4gICAgICAgICAgICBzcGxhdEJ1ZmZlcixcclxuICAgICAgICAgICAgZmlyc3RCdWlsZDogcHJvZ3Jlc3NpdmVMb2FkZWRTZWN0aW9uQnVpbGRDb3VudCA9PT0gMCxcclxuICAgICAgICAgICAgZmluYWxCdWlsZFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBwcm9ncmVzc2l2ZUxvYWRlZFNlY3Rpb25CdWlsZENvdW50Kys7XHJcbiAgICAgICAgICBjaGVja0FuZEJ1aWxkUHJvZ3Jlc3NpdmVMb2FkU2VjdGlvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZSA9IHRoaXMuZG93bmxvYWRTcGxhdFNjZW5lVG9TcGxhdEJ1ZmZlcihcclxuICAgICAgcGF0aCxcclxuICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICAgIG9uRG93bmxvYWRQcm9ncmVzcyxcclxuICAgICAgdHJ1ZSxcclxuICAgICAgb25Qcm9ncmVzc2l2ZUxvYWRTZWN0aW9uUHJvZ3Jlc3MsXHJcbiAgICAgIGZvcm1hdCxcclxuICAgICAgaGVhZGVyc1xyXG4gICAgKTtcclxuXHJcbiAgICAvLyBHZXQgYWJvcnQgaGFuZGxlciBmcm9tIGRvd25sb2FkIHByb21pc2VcclxuICAgIGNvbnN0IGFib3J0SGFuZGxlciA9IHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UuYWJvcnQgXHJcbiAgICAgID8gc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZS5hYm9ydC5iaW5kKHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UpIFxyXG4gICAgICA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdCBwcm9ncmVzc2l2ZUxvYWRGaXJzdFNlY3Rpb25CdWlsZFByb21pc2UgPVxyXG4gICAgICBhYm9ydGFibGVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMoYWJvcnRIYW5kbGVyKTtcclxuXHJcbiAgICBjb25zdCBzcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UgPVxyXG4gICAgICBhYm9ydGFibGVQcm9taXNlV2l0aEV4dHJhY3RlZENvbXBvbmVudHMoYWJvcnRIYW5kbGVyKTtcclxuXHJcbiAgICB0aGlzLmFkZFNwbGF0U2NlbmVEb3dubG9hZFByb21pc2Uoc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZSk7XHJcbiAgICB0aGlzLnNldFNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZShcclxuICAgICAgc3BsYXRTY2VuZURvd25sb2FkQW5kQnVpbGRQcm9taXNlLnByb21pc2VcclxuICAgICk7XHJcblxyXG4gICAgc3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKHNwbGF0U2NlbmVEb3dubG9hZFByb21pc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoJ1ZpZXdlcjo6YWRkU3BsYXRTY2VuZSBhY3R1YWwgZXJyb3I6JywgZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhclNwbGF0U2NlbmVEb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSgpO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU3BsYXRTY2VuZURvd25sb2FkUHJvbWlzZShzcGxhdFNjZW5lRG93bmxvYWRQcm9taXNlKTtcclxuICAgICAgICBjb25zdCBlcnJvciA9XHJcbiAgICAgICAgICAoZSBpbnN0YW5jZW9mIEFib3J0ZWRQcm9taXNlRXJyb3IgfHwgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpXHJcbiAgICAgICAgICAgID8gZVxyXG4gICAgICAgICAgICA6IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBWaWV3ZXI6OmFkZFNwbGF0U2NlbmUgLT4gQ291bGQgbm90IGxvYWQgb25lIG9yIG1vcmUgc2NlbmVzOiAke2UubWVzc2FnZX1gXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICBwcm9ncmVzc2l2ZUxvYWRGaXJzdFNlY3Rpb25CdWlsZFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICBpZiAob25Eb3dubG9hZEV4Y2VwdGlvbikgb25Eb3dubG9hZEV4Y2VwdGlvbihlcnJvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBwcm9ncmVzc2l2ZUxvYWRGaXJzdFNlY3Rpb25CdWlsZFByb21pc2UucHJvbWlzZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIG11bHRpcGxlIHNwbGF0IHNjZW5lcyB0byB0aGUgdmlld2VyIGFuZCBkaXNwbGF5IGFueSBsb2FkaW5nIFVJIGlmIGFwcHJvcHJpYXRlLlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8b2JqZWN0Pn0gc2NlbmVPcHRpb25zIEFycmF5IG9mIHBlci1zY2VuZSBvcHRpb25zOiB7XHJcbiAgICpcclxuICAgKiAgICAgICAgIHBhdGg6IFBhdGggdG8gc3BsYXQgc2NlbmUgdG8gYmUgbG9hZGVkXHJcbiAgICpcclxuICAgKiAgICAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkOiBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KSwgZGVmYXVsdHMgdG8gMVxyXG4gICAqXHJcbiAgICogICAgICAgICBwb3NpdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUG9zaXRpb24gb2YgdGhlIHNjZW5lLCBhY3RzIGFzIGFuIG9mZnNldCBmcm9tIGl0cyBkZWZhdWx0IHBvc2l0aW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMF1cclxuICAgKlxyXG4gICAqICAgICAgICAgcm90YXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFJvdGF0aW9uIG9mIHRoZSBzY2VuZSByZXByZXNlbnRlZCBhcyBhIHF1YXRlcm5pb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwLCAxXVxyXG4gICAqXHJcbiAgICogICAgICAgICBzY2FsZSAoQXJyYXk8bnVtYmVyPik6ICAgICAgU2NlbmUncyBzY2FsZSwgZGVmYXVsdHMgdG8gWzEsIDEsIDFdXHJcbiAgICpcclxuICAgKiAgICAgICAgIGhlYWRlcnM6ICAgICAgICAgICAgICAgICAgICBPcHRpb25hbCBIVFRQIGhlYWRlcnMgdG8gYmUgc2VudCBhbG9uZyB3aXRoIHNwbGF0IHJlcXVlc3RzXHJcbiAgICpcclxuICAgKiAgICAgICAgIGZvcm1hdCAoU2NlbmVGb3JtYXQpICAgICAgICBPcHRpb25hbCwgdGhlIGZvcm1hdCBvZiB0aGUgc2NlbmUgZGF0YSAoLnBseSwgLmtzcGxhdCwgLnNwbGF0KS4gSWYgbm90IHByZXNlbnQsIHRoZVxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgZXh0ZW5zaW9uIGluICdwYXRoJyB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBmb3JtYXQgKGlmIGl0IGlzIHByZXNlbnQpXHJcbiAgICogfVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd0xvYWRpbmdVSSBEaXNwbGF5IGEgbG9hZGluZyBzcGlubmVyIHdoaWxlIHRoZSBzY2VuZSBpcyBsb2FkaW5nLCBkZWZhdWx0cyB0byB0cnVlXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25Qcm9ncmVzcyBGdW5jdGlvbiB0byBiZSBjYWxsZWQgYXMgZmlsZSBkYXRhIGFyZSByZWNlaXZlZFxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICovXHJcbiAgYWRkU3BsYXRTY2VuZXMoc2NlbmVPcHRpb25zLCBzaG93TG9hZGluZ1VJID0gdHJ1ZSwgb25Qcm9ncmVzcyA9IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKHRoaXMuaXNMb2FkaW5nT3JVbmxvYWRpbmcoKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgJ0Nhbm5vdCBhZGQgc3BsYXQgc2NlbmUgd2hpbGUgYW5vdGhlciBsb2FkIG9yIHVubG9hZCBpcyBhbHJlYWR5IGluIHByb2dyZXNzLidcclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGFkZCBzcGxhdCBzY2VuZSBhZnRlciBkaXNwb3NlKCkgaXMgY2FsbGVkLicpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsZUNvdW50ID0gc2NlbmVPcHRpb25zLmxlbmd0aDtcclxuICAgIGNvbnN0IHBlcmNlbnRDb21wbGV0ZSA9IFtdO1xyXG5cclxuICAgIGxldCBsb2FkaW5nVUlUYXNrSWQ7XHJcbiAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZUFsbFRhc2tzKCk7XHJcbiAgICAgIGxvYWRpbmdVSVRhc2tJZCA9IHRoaXMubG9hZGluZ1NwaW5uZXIuYWRkVGFzaygnRG93bmxvYWRpbmcuLi4nKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvbkxvYWRQcm9ncmVzcyA9IChmaWxlSW5kZXgsIHBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgbG9hZGVyU3RhdHVzKSA9PiB7XHJcbiAgICAgIHBlcmNlbnRDb21wbGV0ZVtmaWxlSW5kZXhdID0gcGVyY2VudDtcclxuICAgICAgbGV0IHRvdGFsUGVyY2VudCA9IDA7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZUNvdW50OyBpKyspXHJcbiAgICAgICAgdG90YWxQZXJjZW50ICs9IHBlcmNlbnRDb21wbGV0ZVtpXSB8fCAwO1xyXG4gICAgICB0b3RhbFBlcmNlbnQgPSB0b3RhbFBlcmNlbnQgLyBmaWxlQ291bnQ7XHJcbiAgICAgIHBlcmNlbnRMYWJlbCA9IGAke3RvdGFsUGVyY2VudC50b0ZpeGVkKDIpfSVgO1xyXG4gICAgICBpZiAoc2hvd0xvYWRpbmdVSSkge1xyXG4gICAgICAgIGlmIChsb2FkZXJTdGF0dXMgPT09IExvYWRlclN0YXR1cy5Eb3dubG9hZGluZykge1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5zZXRNZXNzYWdlRm9yVGFzayhcclxuICAgICAgICAgICAgbG9hZGluZ1VJVGFza0lkLFxyXG4gICAgICAgICAgICB0b3RhbFBlcmNlbnQgPT0gMTAwXHJcbiAgICAgICAgICAgICAgPyBgRG93bmxvYWQgY29tcGxldGUhYFxyXG4gICAgICAgICAgICAgIDogYERvd25sb2FkaW5nOiAke3BlcmNlbnRMYWJlbH1gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAob25Qcm9ncmVzcykgb25Qcm9ncmVzcyh0b3RhbFBlcmNlbnQsIHBlcmNlbnRMYWJlbCwgbG9hZGVyU3RhdHVzKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgY29uc3Qgc2lnbmFsID0gYWJvcnRDb250cm9sbGVyLnNpZ25hbDtcclxuICAgIHRoaXMuYWRkU3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcihhYm9ydENvbnRyb2xsZXIpO1xyXG5cclxuICAgIGNvbnN0IGRvd25sb2FkUHJvbWlzZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2NlbmVPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBzY2VuZU9wdGlvbnNbaV07XHJcbiAgICAgIGNvbnN0IGZvcm1hdCA9XHJcbiAgICAgICAgb3B0aW9ucy5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmZvcm1hdCAhPT0gbnVsbFxyXG4gICAgICAgICAgPyBvcHRpb25zLmZvcm1hdFxyXG4gICAgICAgICAgOiBzY2VuZUZvcm1hdEZyb21QYXRoKG9wdGlvbnMucGF0aCk7XHJcbiAgICAgIGNvbnN0IGRvd25sb2FkUHJvbWlzZSA9IHRoaXMuZG93bmxvYWRTcGxhdFNjZW5lVG9TcGxhdEJ1ZmZlcihcclxuICAgICAgICBvcHRpb25zLnBhdGgsXHJcbiAgICAgICAgb3B0aW9ucy5zcGxhdEFscGhhUmVtb3ZhbFRocmVzaG9sZCxcclxuICAgICAgICBvbkxvYWRQcm9ncmVzcy5iaW5kKHRoaXMsIGkpLFxyXG4gICAgICAgIGZhbHNlLFxyXG4gICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICBmb3JtYXQsXHJcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgIHNpZ25hbFxyXG4gICAgICApO1xyXG4gICAgICBkb3dubG9hZFByb21pc2VzLnB1c2goZG93bmxvYWRQcm9taXNlKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkb3dubG9hZEFuZEJ1aWxkUHJvbWlzZSA9IFByb21pc2UuYWxsKGRvd25sb2FkUHJvbWlzZXMpXHJcbiAgICAgIC50aGVuKChzcGxhdEJ1ZmZlcnMpID0+IHtcclxuICAgICAgICBpZiAoc2hvd0xvYWRpbmdVSSkgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVUYXNrKGxvYWRpbmdVSVRhc2tJZCk7XHJcbiAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIG9uUHJvZ3Jlc3MoMCwgJzAlJywgTG9hZGVyU3RhdHVzLlByb2Nlc3NpbmcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZFNwbGF0QnVmZmVycyhcclxuICAgICAgICAgIHNwbGF0QnVmZmVycyxcclxuICAgICAgICAgIHNjZW5lT3B0aW9ucyxcclxuICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICBzaG93TG9hZGluZ1VJLFxyXG4gICAgICAgICAgc2hvd0xvYWRpbmdVSSxcclxuICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgZmFsc2VcclxuICAgICAgICApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgaWYgKG9uUHJvZ3Jlc3MpIG9uUHJvZ3Jlc3MoMTAwLCAnMTAwJScsIExvYWRlclN0YXR1cy5Qcm9jZXNzaW5nKTtcclxuICAgICAgICAgIHRoaXMuY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlVGFzayhsb2FkaW5nVUlUYXNrSWQpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoKTtcclxuICAgICAgICBjb25zdCBlcnJvciA9XHJcbiAgICAgICAgICBlLm5hbWUgPT09ICdBYm9ydEVycm9yJ1xyXG4gICAgICAgICAgICA/IGVcclxuICAgICAgICAgICAgOiBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgVmlld2VyOjphZGRTcGxhdFNjZW5lcyAtPiBDb3VsZCBub3QgbG9hZCBvbmUgb3IgbW9yZSBzcGxhdCBzY2VuZXMuYFxyXG4gICAgICAgICAgICAgICk7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICB0aGlzLnJlbW92ZVNwbGF0U2NlbmVEb3dubG9hZENvbnRyb2xsZXIoYWJvcnRDb250cm9sbGVyKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5zZXRTcGxhdFNjZW5lRG93bmxvYWRBbmRCdWlsZFByb21pc2UoZG93bmxvYWRBbmRCdWlsZFByb21pc2UpO1xyXG4gICAgcmV0dXJuIGRvd25sb2FkQW5kQnVpbGRQcm9taXNlXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEb3dubG9hZCBhIHNwbGF0IHNjZW5lIGFuZCBjb252ZXJ0IHRvIFNwbGF0QnVmZmVyIGluc3RhbmNlLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdG8gc3BsYXQgc2NlbmUgdG8gYmUgbG9hZGVkXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkIElnbm9yZSBhbnkgc3BsYXRzIHdpdGggYW4gYWxwaGEgbGVzcyB0aGFuIHRoZSBzcGVjaWZpZWRcclxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KSwgZGVmYXVsdHMgdG8gMVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gb25Qcm9ncmVzcyBGdW5jdGlvbiB0byBiZSBjYWxsZWQgYXMgZmlsZSBkYXRhIGFyZSByZWNlaXZlZFxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcHJvZ3Jlc3NpdmVCdWlsZCBDb25zdHJ1Y3QgZmlsZSBzZWN0aW9ucyBpbnRvIHNwbGF0IGJ1ZmZlcnMgYXMgdGhleSBhcmUgZG93bmxvYWRlZFxyXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uU2VjdGlvbkJ1aWx0IEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIG5ldyBzZWN0aW9uIGlzIGFkZGVkIHRvIHRoZSBmaWxlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCBGaWxlIGZvcm1hdCBvZiB0aGUgc2NlbmVcclxuICAgKiBAcGFyYW0ge29iamVjdH0gaGVhZGVycyBPcHRpb25hbCBIVFRQIGhlYWRlcnMgdG8gcGFzcyB0byB1c2UgZm9yIGRvd25sb2FkaW5nIHNwbGF0IHNjZW5lXHJcbiAgICogQHBhcmFtIHtBYm9ydFNpZ25hbH0gc2lnbmFsIE9wdGlvbmFsIEFib3J0U2lnbmFsIHRvIGNhbmNlbCB0aGUgZG93bmxvYWRcclxuICAgKiBAcmV0dXJuIHtBYm9ydGFibGVQcm9taXNlfVxyXG4gICAqL1xyXG4gIGRvd25sb2FkU3BsYXRTY2VuZVRvU3BsYXRCdWZmZXIoXHJcbiAgICBwYXRoLFxyXG4gICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQgPSAxLFxyXG4gICAgb25Qcm9ncmVzcyA9IHVuZGVmaW5lZCxcclxuICAgIHByb2dyZXNzaXZlQnVpbGQgPSBmYWxzZSxcclxuICAgIG9uU2VjdGlvbkJ1aWx0ID0gdW5kZWZpbmVkLFxyXG4gICAgZm9ybWF0LFxyXG4gICAgaGVhZGVyc1xyXG4gICkge1xyXG4gICAgY29uc3Qgb3B0aW1pemVTcGxhdERhdGEgPSBwcm9ncmVzc2l2ZUJ1aWxkID8gZmFsc2UgOiB0aGlzLm9wdGltaXplU3BsYXREYXRhO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKGZvcm1hdCA9PT0gU2NlbmVGb3JtYXQuUGx5KSB7XHJcbiAgICAgICAgcmV0dXJuIFBseUxvYWRlci5sb2FkRnJvbVVSTChcclxuICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICBvblByb2dyZXNzLFxyXG4gICAgICAgICAgcHJvZ3Jlc3NpdmVCdWlsZCxcclxuICAgICAgICAgIG9uU2VjdGlvbkJ1aWx0LFxyXG4gICAgICAgICAgc3BsYXRBbHBoYVJlbW92YWxUaHJlc2hvbGQsXHJcbiAgICAgICAgICB0aGlzLmluTWVtb3J5Q29tcHJlc3Npb25MZXZlbCxcclxuICAgICAgICAgIG9wdGltaXplU3BsYXREYXRhLFxyXG4gICAgICAgICAgdGhpcy5zcGhlcmljYWxIYXJtb25pY3NEZWdyZWUsXHJcbiAgICAgICAgICBoZWFkZXJzXHJcbiAgICAgICAgKVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGlmIChlIGluc3RhbmNlb2YgRGlyZWN0TG9hZEVycm9yKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgJ0ZpbGUgdHlwZSBvciBzZXJ2ZXIgZG9lcyBub3Qgc3VwcG9ydCBwcm9ncmVzc2l2ZSBsb2FkaW5nLidcclxuICAgICAgICApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICBgVmlld2VyOjpkb3dubG9hZFNwbGF0U2NlbmVUb1NwbGF0QnVmZmVyIC0+IEZpbGUgZm9ybWF0IG5vdCBzdXBwb3J0ZWQ6ICR7cGF0aH1gXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgaXNQcm9ncmVzc2l2ZWx5TG9hZGFibGUoZm9ybWF0KSB7XHJcbiAgICByZXR1cm4gZm9ybWF0ID09PSBTY2VuZUZvcm1hdC5QbHlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBvbmUgb3IgbW9yZSBpbnN0YW5jZXMgb2YgU3BsYXRCdWZmZXIgdG8gdGhlIFNwbGF0TWVzaCBpbnN0YW5jZSBtYW5hZ2VkIGJ5IHRoZSB2aWV3ZXIgYW5kIHNldCB1cCB0aGUgc29ydGluZyB3ZWIgd29ya2VyLlxyXG4gICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0ZXJtaW5hdGUgdGhlIGV4aXN0aW5nIHNvcnQgd29ya2VyIChpZiB0aGVyZSBpcyBvbmUpLlxyXG4gICAqL1xyXG4gIGFkZFNwbGF0QnVmZmVycyA9IChcclxuICAgIHNwbGF0QnVmZmVycyxcclxuICAgIHNwbGF0QnVmZmVyT3B0aW9ucyA9IFtdLFxyXG4gICAgZmluYWxCdWlsZCA9IHRydWUsXHJcbiAgICBzaG93TG9hZGluZ1VJID0gdHJ1ZSxcclxuICAgIHNob3dMb2FkaW5nVUlGb3JTcGxhdFRyZWVCdWlsZCA9IHRydWUsXHJcbiAgICByZXBsYWNlRXhpc3RpbmcgPSBmYWxzZSxcclxuICAgIGVuYWJsZVJlbmRlckJlZm9yZUZpcnN0U29ydCA9IGZhbHNlLFxyXG4gICAgcHJlc2VydmVWaXNpYmxlUmVnaW9uID0gdHJ1ZVxyXG4gICkgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxyXG5cclxuICAgIGxldCBzcGxhdFByb2Nlc3NpbmdUYXNrSWQgPSBudWxsO1xyXG4gICAgY29uc3QgcmVtb3ZlU3BsYXRQcm9jZXNzaW5nVGFzayA9ICgpID0+IHtcclxuICAgICAgaWYgKHNwbGF0UHJvY2Vzc2luZ1Rhc2tJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIucmVtb3ZlVGFzayhzcGxhdFByb2Nlc3NpbmdUYXNrSWQpO1xyXG4gICAgICAgIHNwbGF0UHJvY2Vzc2luZ1Rhc2tJZCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gZmFsc2U7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgICBzcGxhdFByb2Nlc3NpbmdUYXNrSWQgPSB0aGlzLmxvYWRpbmdTcGlubmVyLmFkZFRhc2soXHJcbiAgICAgICAgICAnUHJvY2Vzc2luZyBzcGxhdHMuLi4nXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBkZWxheWVkRXhlY3V0ZSgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHtcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc3QgYnVpbGRSZXN1bHRzID0gdGhpcy5hZGRTcGxhdEJ1ZmZlcnNUb01lc2goXHJcbiAgICAgICAgICAgIHNwbGF0QnVmZmVycyxcclxuICAgICAgICAgICAgc3BsYXRCdWZmZXJPcHRpb25zLFxyXG4gICAgICAgICAgICBmaW5hbEJ1aWxkLFxyXG4gICAgICAgICAgICBzaG93TG9hZGluZ1VJRm9yU3BsYXRUcmVlQnVpbGQsXHJcbiAgICAgICAgICAgIHJlcGxhY2VFeGlzdGluZyxcclxuICAgICAgICAgICAgcHJlc2VydmVWaXNpYmxlUmVnaW9uXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGNvbnN0IG1heFNwbGF0Q291bnQgPSB0aGlzLnNwbGF0TWVzaC5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXIubWF4U3BsYXRDb3VudCAhPT0gbWF4U3BsYXRDb3VudFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VTb3J0V29ya2VyKCk7XHJcbiAgICAgICAgICAvLyBJZiB3ZSBhcmVuJ3QgY2FsY3VsYXRpbmcgdGhlIHNwbGF0IGRpc3RhbmNlcyBmcm9tIHRoZSBjZW50ZXIgb24gdGhlIEdQVSwgdGhlIHNvcnRpbmcgd29ya2VyIG5lZWRzXHJcbiAgICAgICAgICAvLyBzcGxhdCBjZW50ZXJzIGFuZCB0cmFuc2Zvcm0gaW5kZXhlcyBzbyB0aGF0IGl0IGNhbiBjYWxjdWxhdGUgdGhvc2UgZGlzdGFuY2UgdmFsdWVzLlxyXG4gICAgICAgICAgaWYgKCF0aGlzLmdwdUFjY2VsZXJhdGVkU29ydCkge1xyXG4gICAgICAgICAgICB0aGlzLnByZVNvcnRNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICBjZW50ZXJzOiBidWlsZFJlc3VsdHMuY2VudGVycy5idWZmZXIsXHJcbiAgICAgICAgICAgICAgc2NlbmVJbmRleGVzOiBidWlsZFJlc3VsdHMuc2NlbmVJbmRleGVzLmJ1ZmZlcixcclxuICAgICAgICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgICAgICAgZnJvbTogYnVpbGRSZXN1bHRzLmZyb20sXHJcbiAgICAgICAgICAgICAgICB0bzogYnVpbGRSZXN1bHRzLnRvLFxyXG4gICAgICAgICAgICAgICAgY291bnQ6IGJ1aWxkUmVzdWx0cy5jb3VudFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBzb3J0V29ya2VyU2V0dXBQcm9taXNlID1cclxuICAgICAgICAgICAgIXRoaXMuc29ydFdvcmtlciAmJiBtYXhTcGxhdENvdW50ID4gMFxyXG4gICAgICAgICAgICAgID8gdGhpcy5zZXR1cFNvcnRXb3JrZXIodGhpcy5zcGxhdE1lc2gpXHJcbiAgICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgIHNvcnRXb3JrZXJTZXR1cFByb21pc2UudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm5cclxuICAgICAgICAgICAgdGhpcy5ydW5TcGxhdFNvcnQodHJ1ZSwgdHJ1ZSkudGhlbigoc29ydFJ1bm5pbmcpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoIXRoaXMuc29ydFdvcmtlciB8fCAhc29ydFJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVTcGxhdFByb2Nlc3NpbmdUYXNrKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbmFibGVSZW5kZXJCZWZvcmVGaXJzdFNvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucnVuQWZ0ZXJOZXh0U29ydC5wdXNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucnVuQWZ0ZXJOZXh0U29ydC5wdXNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmVtb3ZlU3BsYXRQcm9jZXNzaW5nVGFzaygpO1xyXG4gICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCB0cnVlKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgb25lIG9yIG1vcmUgaW5zdGFuY2VzIG9mIFNwbGF0QnVmZmVyIHRvIHRoZSBTcGxhdE1lc2ggaW5zdGFuY2UgbWFuYWdlZCBieSB0aGUgdmlld2VyLiBCeSBkZWZhdWx0LCB0aGlzIGZ1bmN0aW9uIGlzIGFkZGl0aXZlO1xyXG4gICAqIGFsbCBzcGxhdCBidWZmZXJzIGNvbnRhaW5lZCBieSB0aGUgdmlld2VyJ3Mgc3BsYXQgbWVzaCBiZWZvcmUgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgcHJlc2VydmVkLiBUaGlzIGJlaGF2aW9yIGNhbiBiZVxyXG4gICAqIGNoYW5nZWQgYnkgcGFzc2luZyAndHJ1ZScgZm9yICdyZXBsYWNlRXhpc3RpbmcnLlxyXG4gICAqIEBwYXJhbSB7QXJyYXk8U3BsYXRCdWZmZXI+fSBzcGxhdEJ1ZmZlcnMgU3BsYXRCdWZmZXIgaW5zdGFuY2VzXHJcbiAgICogQHBhcmFtIHtBcnJheTxvYmplY3Q+fSBzcGxhdEJ1ZmZlck9wdGlvbnMgQXJyYXkgb2Ygb3B0aW9ucyBvYmplY3RzOiB7XHJcbiAgICpcclxuICAgKiAgICAgICAgIHNwbGF0QWxwaGFSZW1vdmFsVGhyZXNob2xkOiBJZ25vcmUgYW55IHNwbGF0cyB3aXRoIGFuIGFscGhhIGxlc3MgdGhhbiB0aGUgc3BlY2lmaWVkXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgKHZhbGlkIHJhbmdlOiAwIC0gMjU1KSwgZGVmYXVsdHMgdG8gMVxyXG4gICAqXHJcbiAgICogICAgICAgICBwb3NpdGlvbiAoQXJyYXk8bnVtYmVyPik6ICAgUG9zaXRpb24gb2YgdGhlIHNjZW5lLCBhY3RzIGFzIGFuIG9mZnNldCBmcm9tIGl0cyBkZWZhdWx0IHBvc2l0aW9uLCBkZWZhdWx0cyB0byBbMCwgMCwgMF1cclxuICAgKlxyXG4gICAqICAgICAgICAgcm90YXRpb24gKEFycmF5PG51bWJlcj4pOiAgIFJvdGF0aW9uIG9mIHRoZSBzY2VuZSByZXByZXNlbnRlZCBhcyBhIHF1YXRlcm5pb24sIGRlZmF1bHRzIHRvIFswLCAwLCAwLCAxXVxyXG4gICAqXHJcbiAgICogICAgICAgICBzY2FsZSAoQXJyYXk8bnVtYmVyPik6ICAgICAgU2NlbmUncyBzY2FsZSwgZGVmYXVsdHMgdG8gWzEsIDEsIDFdXHJcbiAgICogfVxyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmluYWxCdWlsZCBXaWxsIHRoZSBzcGxhdCBtZXNoIGJlIGluIGl0cyBmaW5hbCBzdGF0ZSBhZnRlciB0aGlzIGJ1aWxkP1xyXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd0xvYWRpbmdVSUZvclNwbGF0VHJlZUJ1aWxkIFdoZXRoZXIgb3Igbm90IHRvIHNob3cgdGhlIGxvYWRpbmcgc3Bpbm5lciBkdXJpbmcgY29uc3RydWN0aW9uIG9mIHRoZSBzcGxhdCB0cmVlLlxyXG4gICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgaW5mbyBhYm91dCB0aGUgc3BsYXRzIHRoYXQgYXJlIHVwZGF0ZWRcclxuICAgKi9cclxuICBhZGRTcGxhdEJ1ZmZlcnNUb01lc2ggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHNwbGF0T3B0aW1pemluZ1Rhc2tJZDtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKFxyXG4gICAgICBzcGxhdEJ1ZmZlcnMsXHJcbiAgICAgIHNwbGF0QnVmZmVyT3B0aW9ucyxcclxuICAgICAgZmluYWxCdWlsZCA9IHRydWUsXHJcbiAgICAgIHNob3dMb2FkaW5nVUlGb3JTcGxhdFRyZWVCdWlsZCA9IGZhbHNlLFxyXG4gICAgICByZXBsYWNlRXhpc3RpbmcgPSBmYWxzZSxcclxuICAgICAgcHJlc2VydmVWaXNpYmxlUmVnaW9uID0gdHJ1ZVxyXG4gICAgKSB7XHJcbiAgICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm5cclxuICAgICAgbGV0IGFsbFNwbGF0QnVmZmVycyA9IFtdO1xyXG4gICAgICBsZXQgYWxsU3BsYXRCdWZmZXJPcHRpb25zID0gW107XHJcbiAgICAgIGlmICghcmVwbGFjZUV4aXN0aW5nKSB7XHJcbiAgICAgICAgYWxsU3BsYXRCdWZmZXJzID1cclxuICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLnNjZW5lcy5tYXAoKHNjZW5lKSA9PiBzY2VuZS5zcGxhdEJ1ZmZlcikgfHwgW107XHJcbiAgICAgICAgYWxsU3BsYXRCdWZmZXJPcHRpb25zID0gdGhpcy5zcGxhdE1lc2guc2NlbmVPcHRpb25zXHJcbiAgICAgICAgICA/IHRoaXMuc3BsYXRNZXNoLnNjZW5lT3B0aW9ucy5tYXAoKHNjZW5lT3B0aW9ucykgPT4gc2NlbmVPcHRpb25zKVxyXG4gICAgICAgICAgOiBbXTtcclxuICAgICAgfVxyXG4gICAgICBhbGxTcGxhdEJ1ZmZlcnMucHVzaCguLi5zcGxhdEJ1ZmZlcnMpO1xyXG4gICAgICBhbGxTcGxhdEJ1ZmZlck9wdGlvbnMucHVzaCguLi5zcGxhdEJ1ZmZlck9wdGlvbnMpO1xyXG4gICAgICBpZiAodGhpcy5yZW5kZXJlcikgdGhpcy5zcGxhdE1lc2guc2V0UmVuZGVyZXIodGhpcy5yZW5kZXJlcik7XHJcbiAgICAgIGNvbnN0IG9uU3BsYXRUcmVlSW5kZXhlc1VwbG9hZCA9IChmaW5pc2hlZCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm5cclxuICAgICAgICBjb25zdCBzcGxhdENvdW50ID0gdGhpcy5zcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHNob3dMb2FkaW5nVUlGb3JTcGxhdFRyZWVCdWlsZCAmJlxyXG4gICAgICAgICAgc3BsYXRDb3VudCA+PSBNSU5fU1BMQVRfQ09VTlRfVE9fU0hPV19TUExBVF9UUkVFX0xPQURJTkdfU1BJTk5FUlxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgaWYgKCFmaW5pc2hlZCAmJiAhc3BsYXRPcHRpbWl6aW5nVGFza0lkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2V0TWluaW1pemVkKHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICBzcGxhdE9wdGltaXppbmdUYXNrSWQgPSB0aGlzLmxvYWRpbmdTcGlubmVyLmFkZFRhc2soXHJcbiAgICAgICAgICAgICAgJ09wdGltaXppbmcgZGF0YSBzdHJ1Y3R1cmVzLi4uJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgY29uc3Qgb25TcGxhdFRyZWVSZWFkeSA9IChmaW5pc2hlZCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSByZXR1cm5cclxuICAgICAgICBpZiAoZmluaXNoZWQgJiYgc3BsYXRPcHRpbWl6aW5nVGFza0lkKSB7XHJcbiAgICAgICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnJlbW92ZVRhc2soc3BsYXRPcHRpbWl6aW5nVGFza0lkKTtcclxuICAgICAgICAgIHNwbGF0T3B0aW1pemluZ1Rhc2tJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBidWlsZFJlc3VsdHMgPSB0aGlzLnNwbGF0TWVzaC5idWlsZChcclxuICAgICAgICBhbGxTcGxhdEJ1ZmZlcnMsXHJcbiAgICAgICAgYWxsU3BsYXRCdWZmZXJPcHRpb25zLFxyXG4gICAgICAgIHRydWUsXHJcbiAgICAgICAgZmluYWxCdWlsZCxcclxuICAgICAgICBvblNwbGF0VHJlZUluZGV4ZXNVcGxvYWQsXHJcbiAgICAgICAgb25TcGxhdFRyZWVSZWFkeSxcclxuICAgICAgICBwcmVzZXJ2ZVZpc2libGVSZWdpb25cclxuICAgICAgKTtcclxuICAgICAgaWYgKGZpbmFsQnVpbGQgJiYgdGhpcy5mcmVlSW50ZXJtZWRpYXRlU3BsYXREYXRhKVxyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLmZyZWVJbnRlcm1lZGlhdGVTcGxhdERhdGEoKTtcclxuICAgICAgcmV0dXJuIGJ1aWxkUmVzdWx0c1xyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHVwIHRoZSBzcGxhdCBzb3J0aW5nIHdlYiB3b3JrZXIuXHJcbiAgICogQHBhcmFtIHtTcGxhdE1lc2h9IHNwbGF0TWVzaCBTcGxhdE1lc2ggaW5zdGFuY2UgdGhhdCBjb250YWlucyB0aGUgc3BsYXRzIHRvIGJlIHNvcnRlZFxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICovXHJcbiAgYXN5bmMgc2V0dXBTb3J0V29ya2VyKHNwbGF0TWVzaCkge1xyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHJldHVyblxyXG4gICAgY29uc3QgRGlzdGFuY2VzQXJyYXlUeXBlID0gdGhpcy5pbnRlZ2VyQmFzZWRTb3J0XHJcbiAgICAgID8gSW50MzJBcnJheVxyXG4gICAgICA6IEZsb2F0MzJBcnJheTtcclxuICAgIGNvbnN0IHNwbGF0Q291bnQgPSBzcGxhdE1lc2guZ2V0U3BsYXRDb3VudCgpO1xyXG4gICAgY29uc3QgbWF4U3BsYXRDb3VudCA9IHNwbGF0TWVzaC5nZXRNYXhTcGxhdENvdW50KCk7XHJcbiAgICB0aGlzLnNvcnRXb3JrZXIgPSBhd2FpdCBjcmVhdGVTb3J0V29ya2VyKFxyXG4gICAgICBtYXhTcGxhdENvdW50LFxyXG4gICAgICB0aGlzLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMsXHJcbiAgICAgIHRoaXMuZW5hYmxlU0lNREluU29ydCxcclxuICAgICAgdGhpcy5pbnRlZ2VyQmFzZWRTb3J0LFxyXG4gICAgICB0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSxcclxuICAgICAgdGhpcy5zcGxhdFNvcnREaXN0YW5jZU1hcFByZWNpc2lvblxyXG4gICAgKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICB0aGlzLnNvcnRXb3JrZXIub25tZXNzYWdlID0gKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5kYXRhLnNvcnREb25lKSB7XHJcbiAgICAgICAgICB0aGlzLnNvcnRSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICBsZXQgbnVtYmVyc0FycmF5ID0gQXJyYXkuZnJvbShcclxuICAgICAgICAgICAgeyBsZW5ndGg6IHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50IH0sXHJcbiAgICAgICAgICAgIChfLCBpKSA9PiBpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgaWYgKHRoaXMuc2hhcmVkTWVtb3J5Rm9yV29ya2Vycykge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVSZW5kZXJJbmRleGVzKFxyXG4gICAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlclNvcnRlZEluZGV4ZXMsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnNwbGF0UmVuZGVyQ291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZEluZGV4ZXMgPSBuZXcgVWludDMyQXJyYXkoXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnNvcnRlZEluZGV4ZXMuYnVmZmVyLFxyXG4gICAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnNwbGF0UmVuZGVyQ291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5zcGxhdE1lc2gudXBkYXRlUmVuZGVySW5kZXhlcyhcclxuICAgICAgICAgICAgICBzb3J0ZWRJbmRleGVzLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5zcGxhdFJlbmRlckNvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5sYXN0U3BsYXRTb3J0Q291bnQgPSB0aGlzLnNwbGF0U29ydENvdW50O1xyXG5cclxuICAgICAgICAgIHRoaXMubGFzdFNvcnRUaW1lID0gZS5kYXRhLnNvcnRUaW1lO1xyXG4gICAgICAgICAgdGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyKCk7XHJcbiAgICAgICAgICB0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgICAgdGhpcy5mb3JjZVJlbmRlck5leHRGcmFtZSgpO1xyXG4gICAgICAgICAgaWYgKHRoaXMucnVuQWZ0ZXJOZXh0U29ydC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnVuQWZ0ZXJOZXh0U29ydC5mb3JFYWNoKChmdW5jKSA9PiB7XHJcbiAgICAgICAgICAgICAgZnVuYygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5ydW5BZnRlck5leHRTb3J0Lmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmRhdGEuc29ydENhbmNlbGVkKSB7XHJcbiAgICAgICAgICB0aGlzLnNvcnRSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmRhdGEuc29ydFNldHVwUGhhc2UxQ29tcGxldGUpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmxvZ0xldmVsID49IExvZ0xldmVsLkluZm8pXHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdTb3J0aW5nIHdlYiB3b3JrZXIgV0FTTSBzZXR1cCBjb21wbGV0ZS4nKTtcclxuICAgICAgICAgIGlmICh0aGlzLnNoYXJlZE1lbW9yeUZvcldvcmtlcnMpIHtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyU29ydGVkSW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheShcclxuICAgICAgICAgICAgICBlLmRhdGEuc29ydGVkSW5kZXhlc0J1ZmZlcixcclxuICAgICAgICAgICAgICBlLmRhdGEuc29ydGVkSW5kZXhlc09mZnNldCxcclxuICAgICAgICAgICAgICBtYXhTcGxhdENvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQgPSBuZXcgVWludDMyQXJyYXkoXHJcbiAgICAgICAgICAgICAgZS5kYXRhLmluZGV4ZXNUb1NvcnRCdWZmZXIsXHJcbiAgICAgICAgICAgICAgZS5kYXRhLmluZGV4ZXNUb1NvcnRPZmZzZXQsXHJcbiAgICAgICAgICAgICAgbWF4U3BsYXRDb3VudFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB0aGlzLnNvcnRXb3JrZXJQcmVjb21wdXRlZERpc3RhbmNlcyA9IG5ldyBEaXN0YW5jZXNBcnJheVR5cGUoXHJcbiAgICAgICAgICAgICAgZS5kYXRhLnByZWNvbXB1dGVkRGlzdGFuY2VzQnVmZmVyLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS5wcmVjb21wdXRlZERpc3RhbmNlc09mZnNldCxcclxuICAgICAgICAgICAgICBtYXhTcGxhdENvdW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHRoaXMuc29ydFdvcmtlclRyYW5zZm9ybXMgPSBuZXcgRmxvYXQzMkFycmF5KFxyXG4gICAgICAgICAgICAgIGUuZGF0YS50cmFuc2Zvcm1zQnVmZmVyLFxyXG4gICAgICAgICAgICAgIGUuZGF0YS50cmFuc2Zvcm1zT2Zmc2V0LFxyXG4gICAgICAgICAgICAgIENvbnN0YW50cy5NYXhTY2VuZXMgKiAxNlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydCA9IG5ldyBVaW50MzJBcnJheShtYXhTcGxhdENvdW50KTtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyUHJlY29tcHV0ZWREaXN0YW5jZXMgPSBuZXcgRGlzdGFuY2VzQXJyYXlUeXBlKFxyXG4gICAgICAgICAgICAgIG1heFNwbGF0Q291bnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VyVHJhbnNmb3JtcyA9IG5ldyBGbG9hdDMyQXJyYXkoXHJcbiAgICAgICAgICAgICAgQ29uc3RhbnRzLk1heFNjZW5lcyAqIDE2XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGF0Q291bnQ7IGkrKylcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydFtpXSA9IGk7XHJcbiAgICAgICAgICB0aGlzLnNvcnRXb3JrZXIubWF4U3BsYXRDb3VudCA9IG1heFNwbGF0Q291bnQ7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPj0gTG9nTGV2ZWwuSW5mbykge1xyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnU29ydGluZyB3ZWIgd29ya2VyIHJlYWR5LicpO1xyXG4gICAgICAgICAgICBjb25zdCBzcGxhdERhdGFUZXh0dXJlcyA9IHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0RGF0YVRleHR1cmVzKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdmFyaWFuY2VzVGV4dHVyZVNpemUgPSBzcGxhdERhdGFUZXh0dXJlcy5jb3ZhcmlhbmNlcy5zaXplO1xyXG4gICAgICAgICAgICBjb25zdCBjZW50ZXJzQ29sb3JzVGV4dHVyZVNpemUgPSBzcGxhdERhdGFUZXh0dXJlcy5jZW50ZXJDb2xvcnMuc2l6ZTtcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXHJcbiAgICAgICAgICAgICAgJ0NvdmFyaWFuY2VzIHRleHR1cmUgc2l6ZTogJyArXHJcbiAgICAgICAgICAgICAgICBjb3ZhcmlhbmNlc1RleHR1cmVTaXplLnggK1xyXG4gICAgICAgICAgICAgICAgJyB4ICcgK1xyXG4gICAgICAgICAgICAgICAgY292YXJpYW5jZXNUZXh0dXJlU2l6ZS55XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFxyXG4gICAgICAgICAgICAgICdDZW50ZXJzL2NvbG9ycyB0ZXh0dXJlIHNpemU6ICcgK1xyXG4gICAgICAgICAgICAgICAgY2VudGVyc0NvbG9yc1RleHR1cmVTaXplLnggK1xyXG4gICAgICAgICAgICAgICAgJyB4ICcgK1xyXG4gICAgICAgICAgICAgICAgY2VudGVyc0NvbG9yc1RleHR1cmVTaXplLnlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGRpc3Bvc2VTb3J0V29ya2VyKCkge1xyXG4gICAgaWYgKHRoaXMuc29ydFdvcmtlcikgdGhpcy5zb3J0V29ya2VyLnRlcm1pbmF0ZSgpO1xyXG4gICAgdGhpcy5zb3J0V29ya2VyID0gbnVsbDtcclxuICAgIHRoaXMuc29ydFByb21pc2UgPSBudWxsO1xyXG4gICAgaWYgKHRoaXMuc29ydFByb21pc2VSZXNvbHZlcikge1xyXG4gICAgICB0aGlzLnNvcnRQcm9taXNlUmVzb2x2ZXIoKTtcclxuICAgICAgdGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIHRoaXMucHJlU29ydE1lc3NhZ2VzID0gW107XHJcbiAgICB0aGlzLnNvcnRSdW5uaW5nID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICByZW1vdmVTcGxhdFNjZW5lKGluZGV4VG9SZW1vdmUsIHNob3dMb2FkaW5nVUkgPSB0cnVlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVTcGxhdFNjZW5lcyhbaW5kZXhUb1JlbW92ZV0sIHNob3dMb2FkaW5nVUkpXHJcbiAgfVxyXG5cclxuICByZW1vdmVTcGxhdFNjZW5lcyhpbmRleGVzVG9SZW1vdmUsIHNob3dMb2FkaW5nVUkgPSB0cnVlKSB7XHJcbiAgICBpZiAodGhpcy5pc0xvYWRpbmdPclVubG9hZGluZygpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnQ2Fubm90IHJlbW92ZSBzcGxhdCBzY2VuZSB3aGlsZSBhbm90aGVyIGxvYWQgb3IgdW5sb2FkIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3MuJ1xyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcmVtb3ZlIHNwbGF0IHNjZW5lIGFmdGVyIGRpc3Bvc2UoKSBpcyBjYWxsZWQuJylcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc29ydFByb21pc2U7XHJcblxyXG4gICAgdGhpcy5zcGxhdFNjZW5lUmVtb3ZhbFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGxldCByZXZtb3ZhbFRhc2tJZDtcclxuXHJcbiAgICAgIGlmIChzaG93TG9hZGluZ1VJKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuc2hvdygpO1xyXG4gICAgICAgIHJldm1vdmFsVGFza0lkID0gdGhpcy5sb2FkaW5nU3Bpbm5lci5hZGRUYXNrKCdSZW1vdmluZyBzcGxhdCBzY2VuZS4uLicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjaGVja0FuZEhpZGVMb2FkaW5nVUkgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHNob3dMb2FkaW5nVUkpIHtcclxuICAgICAgICAgIHRoaXMubG9hZGluZ1NwaW5uZXIuaGlkZSgpO1xyXG4gICAgICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVUYXNrKHJldm1vdmFsVGFza0lkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBvbkRvbmUgPSAoZXJyb3IpID0+IHtcclxuICAgICAgICBjaGVja0FuZEhpZGVMb2FkaW5nVUkoKTtcclxuICAgICAgICB0aGlzLnNwbGF0U2NlbmVSZW1vdmFsUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgaWYgKCFlcnJvcikgcmVzb2x2ZSgpO1xyXG4gICAgICAgIGVsc2UgcmVqZWN0KGVycm9yKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGNoZWNrRm9yRWFybHlFeGl0ID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpKSB7XHJcbiAgICAgICAgICBvbkRvbmUoKTtcclxuICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgc29ydFByb21pc2UgPSB0aGlzLnNvcnRQcm9taXNlIHx8IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICBzb3J0UHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuXHJcbiAgICAgICAgY29uc3Qgc2F2ZWRTcGxhdEJ1ZmZlcnMgPSBbXTtcclxuICAgICAgICBjb25zdCBzYXZlZFNjZW5lT3B0aW9ucyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNhdmVkU2NlbmVUcmFuc2Zvcm1Db21wb25lbnRzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNwbGF0TWVzaC5zY2VuZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBzaG91bGRSZW1vdmUgPSBmYWxzZTtcclxuICAgICAgICAgIGZvciAobGV0IGluZGV4VG9SZW1vdmUgb2YgaW5kZXhlc1RvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleFRvUmVtb3ZlID09PSBpKSB7XHJcbiAgICAgICAgICAgICAgc2hvdWxkUmVtb3ZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIXNob3VsZFJlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IHRoaXMuc3BsYXRNZXNoLnNjZW5lc1tpXTtcclxuICAgICAgICAgICAgc2F2ZWRTcGxhdEJ1ZmZlcnMucHVzaChzY2VuZS5zcGxhdEJ1ZmZlcik7XHJcbiAgICAgICAgICAgIHNhdmVkU2NlbmVPcHRpb25zLnB1c2godGhpcy5zcGxhdE1lc2guc2NlbmVPcHRpb25zW2ldKTtcclxuICAgICAgICAgICAgc2F2ZWRTY2VuZVRyYW5zZm9ybUNvbXBvbmVudHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgcG9zaXRpb246IHNjZW5lLnBvc2l0aW9uLmNsb25lKCksXHJcbiAgICAgICAgICAgICAgcXVhdGVybmlvbjogc2NlbmUucXVhdGVybmlvbi5jbG9uZSgpLFxyXG4gICAgICAgICAgICAgIHNjYWxlOiBzY2VuZS5zY2FsZS5jbG9uZSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRpc3Bvc2VTb3J0V29ya2VyKCk7XHJcbiAgICAgICAgdGhpcy5zcGxhdE1lc2guZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVSZXZlYWxNb2RlID0gU2NlbmVSZXZlYWxNb2RlLkluc3RhbnQ7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTcGxhdE1lc2goKTtcclxuICAgICAgICB0aGlzLmFkZFNwbGF0QnVmZmVycyhcclxuICAgICAgICAgIHNhdmVkU3BsYXRCdWZmZXJzLFxyXG4gICAgICAgICAgc2F2ZWRTY2VuZU9wdGlvbnMsXHJcbiAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgZmFsc2UsXHJcbiAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tGb3JFYXJseUV4aXQoKSkgcmV0dXJuXHJcbiAgICAgICAgICAgIGNoZWNrQW5kSGlkZUxvYWRpbmdVSSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0TWVzaC5zY2VuZXMuZm9yRWFjaCgoc2NlbmUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgc2NlbmUucG9zaXRpb24uY29weShzYXZlZFNjZW5lVHJhbnNmb3JtQ29tcG9uZW50c1tpbmRleF0ucG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgIHNjZW5lLnF1YXRlcm5pb24uY29weShcclxuICAgICAgICAgICAgICAgIHNhdmVkU2NlbmVUcmFuc2Zvcm1Db21wb25lbnRzW2luZGV4XS5xdWF0ZXJuaW9uXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICBzY2VuZS5zY2FsZS5jb3B5KHNhdmVkU2NlbmVUcmFuc2Zvcm1Db21wb25lbnRzW2luZGV4XS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVUcmFuc2Zvcm1zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ydW5TcGxhdFNvcnQodHJ1ZSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgaWYgKGNoZWNrRm9yRWFybHlFeGl0KCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BsYXRSZW5kZXJSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgc29ydFByb21pc2UgPSB0aGlzLnNvcnRQcm9taXNlIHx8IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgIHNvcnRQcm9taXNlLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGxhdFJlbmRlclJlYWR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIG9uRG9uZSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICAgICAgb25Eb25lKGUpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuc3BsYXRTY2VuZVJlbW92YWxQcm9taXNlXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGFydCBzZWxmLWRyaXZlbiBtb2RlXHJcbiAgICovXHJcbiAgc3RhcnQoKSB7XHJcbiAgICBpZiAodGhpcy5zZWxmRHJpdmVuTW9kZSkge1xyXG4gICAgICB0aGlzLnJlcXVlc3RGcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuc2VsZkRyaXZlblVwZGF0ZUZ1bmMpO1xyXG4gICAgICB0aGlzLnNlbGZEcml2ZW5Nb2RlUnVubmluZyA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzdGFydCB2aWV3ZXIgdW5sZXNzIGl0IGlzIGluIHNlbGYgZHJpdmVuIG1vZGUuJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0b3Agc2VsZi1kcml2ZW4gbW9kZVxyXG4gICAqL1xyXG4gIHN0b3AoKSB7XHJcbiAgICBpZiAodGhpcy5zZWxmRHJpdmVuTW9kZSAmJiB0aGlzLnNlbGZEcml2ZW5Nb2RlUnVubmluZykge1xyXG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJlcXVlc3RGcmFtZUlkKTtcclxuICAgICAgdGhpcy5zZWxmRHJpdmVuTW9kZVJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERpc3Bvc2Ugb2YgYWxsIHJlc291cmNlcyBoZWxkIGRpcmVjdGx5IGFuZCBpbmRpcmVjdGx5IGJ5IHRoaXMgdmlld2VyLlxyXG4gICAqL1xyXG4gIGFzeW5jIGRpc3Bvc2UoKSB7XHJcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKSkgcmV0dXJuIHRoaXMuZGlzcG9zZVByb21pc2VcclxuXHJcbiAgICBmb3IgKGxldCBjb250cm9sbGVyIG9mIHRoaXMuc3BsYXRTY2VuZURvd25sb2FkQ29udHJvbGxlcnMpIHtcclxuICAgICAgICBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHdhaXRQcm9taXNlcyA9IFtdO1xyXG4gICAgaWYgKHRoaXMuc29ydFByb21pc2UpIHtcclxuICAgICAgd2FpdFByb21pc2VzLnB1c2godGhpcy5zb3J0UHJvbWlzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kaXNwb3NpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy5kaXNwb3NlUHJvbWlzZSA9IFByb21pc2UuYWxsKHdhaXRQcm9taXNlcykuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHRoaXMuc3RvcCgpO1xyXG4gICAgICBpZiAodGhpcy5vcnRob2dyYXBoaWNDb250cm9scykge1xyXG4gICAgICAgIHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMub3J0aG9ncmFwaGljQ29udHJvbHMgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHMpIHtcclxuICAgICAgICB0aGlzLnBlcnNwZWN0aXZlQ29udHJvbHMuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMucGVyc3BlY3RpdmVDb250cm9scyA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5jb250cm9scyA9IG51bGw7XHJcbiAgICAgIGlmICh0aGlzLnNwbGF0TWVzaCkge1xyXG4gICAgICAgIHRoaXMuc3BsYXRNZXNoLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuYXZhdGFyTWVzaCkge1xyXG4gICAgICAgIGRpc3Bvc2VBbGxNZXNoZXModGhpcy5hdmF0YXJNZXNoKTtcclxuICAgICAgICB0aGlzLmF2YXRhck1lc2ggPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnNjZW5lSGVscGVyKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZUhlbHBlciA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLnJvb3RFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRpc3Bvc2VTb3J0V29ya2VyKCk7XHJcbiAgICAgIHRoaXMucmVtb3ZlRXZlbnRIYW5kbGVycygpO1xyXG5cclxuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lci5yZW1vdmVBbGxUYXNrcygpO1xyXG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyLnNldENvbnRhaW5lcihudWxsKTtcclxuICAgICAgdGhpcy5sb2FkaW5nUHJvZ3Jlc3NCYXIuaGlkZSgpO1xyXG4gICAgICB0aGlzLmxvYWRpbmdQcm9ncmVzc0Jhci5zZXRDb250YWluZXIobnVsbCk7XHJcbiAgICAgIC8vIHRoaXMuaW5mb1BhbmVsLnNldENvbnRhaW5lcihudWxsKVxyXG5cclxuICAgICAgdGhpcy5jYW1lcmEgPSBudWxsO1xyXG4gICAgICB0aGlzLnRocmVlU2NlbmUgPSBudWxsO1xyXG4gICAgICB0aGlzLnNwbGF0UmVuZGVyUmVhZHkgPSBmYWxzZTtcclxuICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5yZW5kZXJlcikge1xyXG4gICAgICAgIGlmICghdGhpcy51c2luZ0V4dGVybmFsUmVuZGVyZXIpIHtcclxuICAgICAgICAgIHRoaXMucm9vdEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcclxuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCF0aGlzLnVzaW5nRXh0ZXJuYWxSZW5kZXJlcikge1xyXG4gICAgICAgIC8vIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5yb290RWxlbWVudCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuc29ydFdvcmtlclNvcnRlZEluZGV4ZXMgPSBudWxsO1xyXG4gICAgICB0aGlzLnNvcnRXb3JrZXJJbmRleGVzVG9Tb3J0ID0gbnVsbDtcclxuICAgICAgdGhpcy5zb3J0V29ya2VyUHJlY29tcHV0ZWREaXN0YW5jZXMgPSBudWxsO1xyXG4gICAgICB0aGlzLnNvcnRXb3JrZXJUcmFuc2Zvcm1zID0gbnVsbDtcclxuICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMuZGlzcG9zaW5nID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuZGlzcG9zZVByb21pc2UgPSBudWxsO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5kaXNwb3NlUHJvbWlzZVxyXG4gIH1cclxuICB2c3luY051bSA9IDRcclxuICBzZWxmRHJpdmVuVXBkYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuc2VsZkRyaXZlbk1vZGUpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3RGcmFtZUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuc2VsZkRyaXZlblVwZGF0ZUZ1bmMpO1xyXG5cclxuICAgICAgICAvLyBjb25zdCBjdXJyZW50VGltZSA9IGdldEN1cnJlbnRUaW1lKCk7XHJcbiAgICAgICAgLy8gY29uc3QgY2FsY0RlbHRhID0gY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUaW1lO1xyXG4gICAgICAgIC8vIGlmIChjYWxjRGVsdGEgPj0gMS4wIC8gMzAuMCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmxhc3RUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuXHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgdGhpcy52c3luY0NvdW50Kys7XHJcblxyXG4gICAgaWYgKHRoaXMudnN5bmNDb3VudCA8IHRoaXMudnN5bmNOdW0pIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy52c3luY0NvdW50ID0gMDtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgaWYgKHRoaXMuc2hvdWxkUmVuZGVyKCkpIHtcclxuICAgICAgLy9hZGQgZXhwcmVzc2lvblxyXG5cclxuICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgdGhpcy5jb25zZWN1dGl2ZVJlbmRlckZyYW1lcysrO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5jb25zZWN1dGl2ZVJlbmRlckZyYW1lcyA9IDA7XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlbmRlck5leHRGcmFtZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZm9yY2VSZW5kZXJOZXh0RnJhbWUoKSB7XHJcbiAgICB0aGlzLnJlbmRlck5leHRGcmFtZSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBzaG91bGRSZW5kZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHJlbmRlckNvdW50ID0gMDtcclxuICAgIGNvbnN0IGxhc3RDYW1lcmFQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBjb25zdCBsYXN0Q2FtZXJhT3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG4gICAgY29uc3QgY2hhbmdlRXBzaWxvbiA9IDAuMDAwMTtcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXRoaXMuaW5pdGlhbGl6ZWQgfHxcclxuICAgICAgICAhdGhpcy5zcGxhdFJlbmRlclJlYWR5IHx8XHJcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2luZ09yRGlzcG9zZWQoKVxyXG4gICAgICApXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgICBsZXQgc2hvdWxkUmVuZGVyID0gZmFsc2U7XHJcbiAgICAgIGxldCBjYW1lcmFDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLmNhbWVyYSkge1xyXG4gICAgICAgIGNvbnN0IGNwID0gdGhpcy5jYW1lcmEucG9zaXRpb247XHJcbiAgICAgICAgY29uc3QgY28gPSB0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uO1xyXG4gICAgICAgIGNhbWVyYUNoYW5nZWQgPVxyXG4gICAgICAgICAgTWF0aC5hYnMoY3AueCAtIGxhc3RDYW1lcmFQb3NpdGlvbi54KSA+IGNoYW5nZUVwc2lsb24gfHxcclxuICAgICAgICAgIE1hdGguYWJzKGNwLnkgLSBsYXN0Q2FtZXJhUG9zaXRpb24ueSkgPiBjaGFuZ2VFcHNpbG9uIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhjcC56IC0gbGFzdENhbWVyYVBvc2l0aW9uLnopID4gY2hhbmdlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMoY28ueCAtIGxhc3RDYW1lcmFPcmllbnRhdGlvbi54KSA+IGNoYW5nZUVwc2lsb24gfHxcclxuICAgICAgICAgIE1hdGguYWJzKGNvLnkgLSBsYXN0Q2FtZXJhT3JpZW50YXRpb24ueSkgPiBjaGFuZ2VFcHNpbG9uIHx8XHJcbiAgICAgICAgICBNYXRoLmFicyhjby56IC0gbGFzdENhbWVyYU9yaWVudGF0aW9uLnopID4gY2hhbmdlRXBzaWxvbiB8fFxyXG4gICAgICAgICAgTWF0aC5hYnMoY28udyAtIGxhc3RDYW1lcmFPcmllbnRhdGlvbi53KSA+IGNoYW5nZUVwc2lsb247XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNob3VsZFJlbmRlciA9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJNb2RlICE9PSBSZW5kZXJNb2RlLk5ldmVyICYmXHJcbiAgICAgICAgKHJlbmRlckNvdW50ID09PSAwIHx8XHJcbiAgICAgICAgICB0aGlzLnNwbGF0TWVzaC52aXNpYmxlUmVnaW9uQ2hhbmdpbmcgfHxcclxuICAgICAgICAgIGNhbWVyYUNoYW5nZWQgfHxcclxuICAgICAgICAgIHRoaXMucmVuZGVyTW9kZSA9PT0gUmVuZGVyTW9kZS5BbHdheXMgfHxcclxuICAgICAgICAgIHRoaXMuZHluYW1pY01vZGUgPT09IHRydWUgfHxcclxuICAgICAgICAgIHRoaXMucmVuZGVyTmV4dEZyYW1lKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmNhbWVyYSkge1xyXG4gICAgICAgIGxhc3RDYW1lcmFQb3NpdGlvbi5jb3B5KHRoaXMuY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgICAgICBsYXN0Q2FtZXJhT3JpZW50YXRpb24uY29weSh0aGlzLmNhbWVyYS5xdWF0ZXJuaW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVuZGVyQ291bnQrKztcclxuICAgICAgcmV0dXJuIHNob3VsZFJlbmRlclxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgcmVuZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdGhpcy5pbml0aWFsaXplZCB8fFxyXG4gICAgICAgICF0aGlzLnNwbGF0UmVuZGVyUmVhZHkgfHxcclxuICAgICAgICB0aGlzLmlzRGlzcG9zaW5nT3JEaXNwb3NlZCgpXHJcbiAgICAgIClcclxuICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgIGNvbnN0IGhhc1JlbmRlcmFibGVzID0gKHRocmVlU2NlbmUpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aHJlZVNjZW5lLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICBpZiAoY2hpbGQudmlzaWJsZSkgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBzYXZlZEF1b0NsZWFyID0gdGhpcy5yZW5kZXJlci5hdXRvQ2xlYXI7XHJcbiAgICAgIGlmIChoYXNSZW5kZXJhYmxlcyh0aGlzLnRocmVlU2NlbmUpKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy50aHJlZVNjZW5lLCB0aGlzLmNhbWVyYSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hdXRvQ2xlYXIgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNwbGF0TWVzaCwgdGhpcy5jYW1lcmEpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmF1dG9DbGVhciA9IGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5zY2VuZUhlbHBlci5nZXRGb2N1c01hcmtlck9wYWNpdHkoKSA+IDAuMClcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lSGVscGVyLmZvY3VzTWFya2VyLCB0aGlzLmNhbWVyYSk7XHJcbiAgICAgIGlmICh0aGlzLnNob3dDb250cm9sUGxhbmUpXHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZUhlbHBlci5jb250cm9sUGxhbmUsIHRoaXMuY2FtZXJhKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hdXRvQ2xlYXIgPSBzYXZlZEF1b0NsZWFyO1xyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcblxyXG4gIHVwZGF0ZShyZW5kZXJlciwgY2FtZXJhKSB7XHJcbiAgICAvLyB0aGlzLmZyYW1lKytcclxuICAgIGNvbnN0IGZwc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcHMnKTtcclxuICAgIGlmIChmcHNEaXYpIHtcclxuICAgICAgZnBzRGl2LnRleHRDb250ZW50ID0gYEZQUzogJHt0aGlzLmN1cnJlbnRGUFN9YDtcclxuICAgIH1cclxuXHJcbiAgICBpZih0aGlzLmZyYW1lID49IHRoaXMudG90YWxGcmFtZXMpIFxyXG4gICAgICAgIHRoaXMuZnJhbWUgPSAwO1xyXG4gICAgXHJcbiAgICBpZiAodGhpcy5kcm9wSW5Nb2RlKSB0aGlzLnVwZGF0ZUZvckRyb3BJbk1vZGUocmVuZGVyZXIsIGNhbWVyYSk7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAhdGhpcy5pbml0aWFsaXplZCB8fFxyXG4gICAgICAhdGhpcy5zcGxhdFJlbmRlclJlYWR5IHx8XHJcbiAgICAgIHRoaXMuaXNEaXNwb3NpbmdPckRpc3Bvc2VkKClcclxuICAgIClcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgaWYgKHRoaXMuY29udHJvbHMpIHtcclxuICAgICAgdGhpcy5jb250cm9scy51cGRhdGUoKTtcclxuICAgICAgaWYgKHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhICYmICF0aGlzLnVzaW5nRXh0ZXJuYWxDYW1lcmEpIHtcclxuICAgICAgICBWaWV3ZXIuc2V0Q2FtZXJhUG9zaXRpb25Gcm9tWm9vbShcclxuICAgICAgICAgIHRoaXMuY2FtZXJhLFxyXG4gICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICB0aGlzLmNvbnRyb2xzXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5ydW5Nb3JwaFVwZGF0ZSgpO1xyXG4gICAgdGhpcy5ydW5TcGxhdFNvcnQodHJ1ZSx0cnVlKTtcclxuXHJcbiAgICBjb25zdCByZXBsYWNlSW5kZXhlcyA9IGZhbHNlO1xyXG4gICAgaWYgKHJlcGxhY2VJbmRleGVzKSB7XHJcbiAgICAgIHRoaXMuc3BsYXRNZXNoLnVwZGF0ZVJlbmRlckluZGV4ZXMoXHJcbiAgICAgICAgdGhpcy5zb3J0ZWRJbmRleGVzLFxyXG4gICAgICAgIHRoaXMuc29ydGVkSW5kZXhlcy5sZW5ndGhcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZUZvclJlbmRlcmVyU2l6ZUNoYW5nZXMoKTtcclxuICAgIHRoaXMudXBkYXRlU3BsYXRNZXNoKCk7XHJcbiAgICB0aGlzLnVwZGF0ZU1lc2hDdXJzb3IoKTtcclxuICAgIHRoaXMudXBkYXRlRlBTKCk7XHJcbiAgICB0aGlzLnRpbWluZ1NlbnNpdGl2ZVVwZGF0ZXMoKTtcclxuICAgIC8vIHRoaXMudXBkYXRlSW5mb1BhbmVsKClcclxuICAgIHRoaXMudXBkYXRlQ29udHJvbFBsYW5lKCk7XHJcbiAgfVxyXG5cclxuICBzb3J0ZWRJbmRleGVzXHJcbiAgdXBkYXRlRm9yRHJvcEluTW9kZShyZW5kZXJlciwgY2FtZXJhKSB7XHJcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICBpZiAodGhpcy5zcGxhdE1lc2gpIHRoaXMuc3BsYXRNZXNoLnNldFJlbmRlcmVyKHRoaXMucmVuZGVyZXIpO1xyXG4gICAgdGhpcy5jYW1lcmEgPSBjYW1lcmE7XHJcbiAgICBpZiAodGhpcy5jb250cm9scykgdGhpcy5jb250cm9scy5vYmplY3QgPSBjYW1lcmE7XHJcbiAgICB0aGlzLmluaXQoKTtcclxuICB9XHJcblxyXG4gIGxhc3RDYWxjVGltZSA9IGdldEN1cnJlbnRUaW1lKClcclxuICBmcHNGcmFtZUNvdW50ID0gMFxyXG4gIHVwZGF0ZUZQUyA9ICgpID0+IHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5jb25zZWN1dGl2ZVJlbmRlckZyYW1lcyA+XHJcbiAgICAgIENPTlNFQ1VUSVZFX1JFTkRFUkVEX0ZSQU1FU19GT1JfRlBTX0NBTENVTEFUSU9OXHJcbiAgICApIHtcclxuICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBnZXRDdXJyZW50VGltZSgpO1xyXG4gICAgICBjb25zdCBjYWxjRGVsdGEgPSBjdXJyZW50VGltZSAtIHRoaXMubGFzdENhbGNUaW1lO1xyXG4gICAgICBpZiAoY2FsY0RlbHRhID49IDEuMCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEZQUyA9IHRoaXMuZnBzRnJhbWVDb3VudDtcclxuICAgICAgICB0aGlzLmZwc0ZyYW1lQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMubGFzdENhbGNUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5mcHNGcmFtZUNvdW50Kys7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEZQUyA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVGb3JSZW5kZXJlclNpemVDaGFuZ2VzID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGxhc3RSZW5kZXJlclNpemUgPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgY29uc3QgY3VycmVudFJlbmRlcmVyU2l6ZSA9IG5ldyBWZWN0b3IyKCk7XHJcbiAgICBsZXQgbGFzdENhbWVyYU9ydGhvZ3JhcGhpYztcclxuXHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoIXRoaXMudXNpbmdFeHRlcm5hbENhbWVyYSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuZ2V0U2l6ZShjdXJyZW50UmVuZGVyZXJTaXplKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBsYXN0Q2FtZXJhT3J0aG9ncmFwaGljID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgIGxhc3RDYW1lcmFPcnRob2dyYXBoaWMgIT09IHRoaXMuY2FtZXJhLmlzT3J0aG9ncmFwaGljQ2FtZXJhIHx8XHJcbiAgICAgICAgICBjdXJyZW50UmVuZGVyZXJTaXplLnggIT09IGxhc3RSZW5kZXJlclNpemUueCB8fFxyXG4gICAgICAgICAgY3VycmVudFJlbmRlcmVyU2l6ZS55ICE9PSBsYXN0UmVuZGVyZXJTaXplLnlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIGlmICh0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS5sZWZ0ID0gLWN1cnJlbnRSZW5kZXJlclNpemUueCAvIDIuMDtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEucmlnaHQgPSBjdXJyZW50UmVuZGVyZXJTaXplLnggLyAyLjA7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnRvcCA9IGN1cnJlbnRSZW5kZXJlclNpemUueSAvIDIuMDtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEuYm90dG9tID0gLWN1cnJlbnRSZW5kZXJlclNpemUueSAvIDIuMDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLmFzcGVjdCA9IGN1cnJlbnRSZW5kZXJlclNpemUueCAvIGN1cnJlbnRSZW5kZXJlclNpemUueTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICAgICAgICAgIGxhc3RSZW5kZXJlclNpemUuY29weShjdXJyZW50UmVuZGVyZXJTaXplKTtcclxuICAgICAgICAgIGxhc3RDYW1lcmFPcnRob2dyYXBoaWMgPSB0aGlzLmNhbWVyYS5pc09ydGhvZ3JhcGhpY0NhbWVyYTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHRpbWluZ1NlbnNpdGl2ZVVwZGF0ZXMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGxhc3RVcGRhdGVUaW1lO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gZ2V0Q3VycmVudFRpbWUoKTtcclxuICAgICAgaWYgKCFsYXN0VXBkYXRlVGltZSkgbGFzdFVwZGF0ZVRpbWUgPSBjdXJyZW50VGltZTtcclxuICAgICAgY29uc3QgdGltZURlbHRhID0gY3VycmVudFRpbWUgLSBsYXN0VXBkYXRlVGltZTtcclxuXHJcbiAgICAgIHRoaXMudXBkYXRlQ2FtZXJhVHJhbnNpdGlvbihjdXJyZW50VGltZSk7XHJcbiAgICAgIHRoaXMudXBkYXRlRm9jdXNNYXJrZXIodGltZURlbHRhKTtcclxuXHJcbiAgICAgIGxhc3RVcGRhdGVUaW1lID0gY3VycmVudFRpbWU7XHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICB0ZW1wQ2FtZXJhVGFyZ2V0ID0gbmV3IFZlY3RvcjMoKVxyXG4gIHRvUHJldmlvdXNUYXJnZXQgPSBuZXcgVmVjdG9yMygpXHJcbiAgdG9OZXh0VGFyZ2V0ID0gbmV3IFZlY3RvcjMoKVxyXG4gIHVwZGF0ZUNhbWVyYVRyYW5zaXRpb24gPSAoY3VycmVudFRpbWUpID0+IHtcclxuICAgIGlmICh0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXQpIHtcclxuICAgICAgdGhpcy50b1ByZXZpb3VzVGFyZ2V0XHJcbiAgICAgICAgLmNvcHkodGhpcy5wcmV2aW91c0NhbWVyYVRhcmdldClcclxuICAgICAgICAuc3ViKHRoaXMuY2FtZXJhLnBvc2l0aW9uKVxyXG4gICAgICAgIC5ub3JtYWxpemUoKTtcclxuICAgICAgdGhpcy50b05leHRUYXJnZXRcclxuICAgICAgICAuY29weSh0aGlzLm5leHRDYW1lcmFUYXJnZXQpXHJcbiAgICAgICAgLnN1Yih0aGlzLmNhbWVyYS5wb3NpdGlvbilcclxuICAgICAgICAubm9ybWFsaXplKCk7XHJcbiAgICAgIGNvbnN0IHJvdGF0aW9uQW5nbGUgPSBNYXRoLmFjb3MoXHJcbiAgICAgICAgdGhpcy50b1ByZXZpb3VzVGFyZ2V0LmRvdCh0aGlzLnRvTmV4dFRhcmdldClcclxuICAgICAgKTtcclxuICAgICAgY29uc3Qgcm90YXRpb25TcGVlZCA9IChyb3RhdGlvbkFuZ2xlIC8gKE1hdGguUEkgLyAzKSkgKiAwLjY1ICsgMC4zO1xyXG4gICAgICBjb25zdCB0ID1cclxuICAgICAgICAocm90YXRpb25TcGVlZCAvIHJvdGF0aW9uQW5nbGUpICpcclxuICAgICAgICAoY3VycmVudFRpbWUgLSB0aGlzLnRyYW5zaXRpb25pbmdDYW1lcmFUYXJnZXRTdGFydFRpbWUpO1xyXG4gICAgICB0aGlzLnRlbXBDYW1lcmFUYXJnZXRcclxuICAgICAgICAuY29weSh0aGlzLnByZXZpb3VzQ2FtZXJhVGFyZ2V0KVxyXG4gICAgICAgIC5sZXJwKHRoaXMubmV4dENhbWVyYVRhcmdldCwgdCk7XHJcbiAgICAgIHRoaXMuY2FtZXJhLmxvb2tBdCh0aGlzLnRlbXBDYW1lcmFUYXJnZXQpO1xyXG4gICAgICB0aGlzLmNvbnRyb2xzLnRhcmdldC5jb3B5KHRoaXMudGVtcENhbWVyYVRhcmdldCk7XHJcbiAgICAgIGlmICh0ID49IDEuMCkge1xyXG4gICAgICAgIHRoaXMudHJhbnNpdGlvbmluZ0NhbWVyYVRhcmdldCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVGb2N1c01hcmtlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCByZW5kZXJEaW1lbnNpb25zID0gbmV3IFZlY3RvcjIoKTtcclxuICAgIGxldCB3YXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aW1lRGVsdGEpIHtcclxuICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nQ2FtZXJhVGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRGb2N1c01hcmtlclZpc2liaWxpdHkodHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSA9IE1hdGgubWF4KFxyXG4gICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5nZXRGb2N1c01hcmtlck9wYWNpdHkoKSxcclxuICAgICAgICAgIDAuMFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbGV0IG5ld0ZvY3VzTWFya2VyT3BhY2l0eSA9IE1hdGgubWluKFxyXG4gICAgICAgICAgY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSArIEZPQ1VTX01BUktFUl9GQURFX0lOX1NQRUVEICogdGltZURlbHRhLFxyXG4gICAgICAgICAgMS4wXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldEZvY3VzTWFya2VyT3BhY2l0eShuZXdGb2N1c01hcmtlck9wYWNpdHkpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVIZWxwZXIudXBkYXRlRm9jdXNNYXJrZXIoXHJcbiAgICAgICAgICB0aGlzLm5leHRDYW1lcmFUYXJnZXQsXHJcbiAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnNcclxuICAgICAgICApO1xyXG4gICAgICAgIHdhc1RyYW5zaXRpb25pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eTtcclxuICAgICAgICBpZiAod2FzVHJhbnNpdGlvbmluZykgY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSA9IDEuMDtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBjdXJyZW50Rm9jdXNNYXJrZXJPcGFjaXR5ID0gTWF0aC5taW4oXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuZ2V0Rm9jdXNNYXJrZXJPcGFjaXR5KCksXHJcbiAgICAgICAgICAgIDEuMFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICBpZiAoY3VycmVudEZvY3VzTWFya2VyT3BhY2l0eSA+IDApIHtcclxuICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIudXBkYXRlRm9jdXNNYXJrZXIoXHJcbiAgICAgICAgICAgIHRoaXMubmV4dENhbWVyYVRhcmdldCxcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEsXHJcbiAgICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnNcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBsZXQgbmV3Rm9jdXNNYXJrZXJPcGFjaXR5ID0gTWF0aC5tYXgoXHJcbiAgICAgICAgICAgIGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgLSBGT0NVU19NQVJLRVJfRkFERV9PVVRfU1BFRUQgKiB0aW1lRGVsdGEsXHJcbiAgICAgICAgICAgIDAuMFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0Rm9jdXNNYXJrZXJPcGFjaXR5KG5ld0ZvY3VzTWFya2VyT3BhY2l0eSk7XHJcbiAgICAgICAgICBpZiAobmV3Rm9jdXNNYXJrZXJPcGFjaXR5ID09PSAwLjApXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0Rm9jdXNNYXJrZXJWaXNpYmlsaXR5KGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJlbnRGb2N1c01hcmtlck9wYWNpdHkgPiAwLjApIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgICB3YXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIHVwZGF0ZU1lc2hDdXJzb3IgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3Qgb3V0SGl0cyA9IFtdO1xyXG4gICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IyKCk7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYgKHRoaXMuc2hvd01lc2hDdXJzb3IpIHtcclxuICAgICAgICB0aGlzLmZvcmNlUmVuZGVyTmV4dEZyYW1lKCk7XHJcbiAgICAgICAgdGhpcy5nZXRSZW5kZXJEaW1lbnNpb25zKHJlbmRlckRpbWVuc2lvbnMpO1xyXG4gICAgICAgIG91dEhpdHMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhQW5kU2NyZWVuUG9zaXRpb24oXHJcbiAgICAgICAgICB0aGlzLmNhbWVyYSxcclxuICAgICAgICAgIHRoaXMubW91c2VQb3NpdGlvbixcclxuICAgICAgICAgIHJlbmRlckRpbWVuc2lvbnNcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdFNwbGF0TWVzaCh0aGlzLnNwbGF0TWVzaCwgb3V0SGl0cyk7XHJcbiAgICAgICAgaWYgKG91dEhpdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRNZXNoQ3Vyc29yVmlzaWJpbGl0eSh0cnVlKTtcclxuICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIucG9zaXRpb25BbmRPcmllbnRNZXNoQ3Vyc29yKFxyXG4gICAgICAgICAgICBvdXRIaXRzWzBdLm9yaWdpbixcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0TWVzaEN1cnNvclZpc2liaWxpdHkoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5zY2VuZUhlbHBlci5nZXRNZXNjaEN1cnNvclZpc2liaWxpdHkoKSlcclxuICAgICAgICAgIHRoaXMuZm9yY2VSZW5kZXJOZXh0RnJhbWUoKTtcclxuICAgICAgICB0aGlzLnNjZW5lSGVscGVyLnNldE1lc2hDdXJzb3JWaXNpYmlsaXR5KGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKClcclxuXHJcbiAgdXBkYXRlSW5mb1BhbmVsID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHJlbmRlckRpbWVuc2lvbnMgPSBuZXcgVmVjdG9yMigpO1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGlmICghdGhpcy5zaG93SW5mbykgcmV0dXJuXHJcbiAgICAgIGNvbnN0IHNwbGF0Q291bnQgPSB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdENvdW50KCk7XHJcbiAgICAgIHRoaXMuZ2V0UmVuZGVyRGltZW5zaW9ucyhyZW5kZXJEaW1lbnNpb25zKTtcclxuICAgICAgY29uc3QgY2FtZXJhTG9va0F0UG9zaXRpb24gPSB0aGlzLmNvbnRyb2xzID8gdGhpcy5jb250cm9scy50YXJnZXQgOiBudWxsO1xyXG4gICAgICBjb25zdCBtZXNoQ3Vyc29yUG9zaXRpb24gPSB0aGlzLnNob3dNZXNoQ3Vyc29yXHJcbiAgICAgICAgPyB0aGlzLnNjZW5lSGVscGVyLm1lc2hDdXJzb3IucG9zaXRpb25cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAgIGNvbnN0IHNwbGF0UmVuZGVyQ291bnRQY3QgPVxyXG4gICAgICAgIHNwbGF0Q291bnQgPiAwID8gKHRoaXMuc3BsYXRSZW5kZXJDb3VudCAvIHNwbGF0Q291bnQpICogMTAwIDogMDtcclxuICAgICAgLy8gdGhpcy5pbmZvUGFuZWwudXBkYXRlKFxyXG4gICAgICAvLyAgIHJlbmRlckRpbWVuc2lvbnMsXHJcbiAgICAgIC8vICAgdGhpcy5jYW1lcmEucG9zaXRpb24sXHJcbiAgICAgIC8vICAgY2FtZXJhTG9va0F0UG9zaXRpb24sXHJcbiAgICAgIC8vICAgdGhpcy5jYW1lcmEudXAsXHJcbiAgICAgIC8vICAgdGhpcy5jYW1lcmEuaXNPcnRob2dyYXBoaWNDYW1lcmEsXHJcbiAgICAgIC8vICAgbWVzaEN1cnNvclBvc2l0aW9uLFxyXG4gICAgICAvLyAgIHRoaXMuY3VycmVudEZQUyB8fCAnTi9BJyxcclxuICAgICAgLy8gICBzcGxhdENvdW50LFxyXG4gICAgICAvLyAgIHRoaXMuc3BsYXRSZW5kZXJDb3VudCxcclxuICAgICAgLy8gICBzcGxhdFJlbmRlckNvdW50UGN0LFxyXG4gICAgICAvLyAgIHRoaXMubGFzdFNvcnRUaW1lLFxyXG4gICAgICAvLyAgIHRoaXMuZm9jYWxBZGp1c3RtZW50LFxyXG4gICAgICAvLyAgIHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0U2NhbGUoKSxcclxuICAgICAgLy8gICB0aGlzLnNwbGF0TWVzaC5nZXRQb2ludENsb3VkTW9kZUVuYWJsZWQoKVxyXG4gICAgICAvLyApXHJcbiAgICB9XHJcbiAgfSkoKVxyXG5cclxuICB1cGRhdGVDb250cm9sUGxhbmUoKSB7XHJcbiAgICBpZiAodGhpcy5zaG93Q29udHJvbFBsYW5lKSB7XHJcbiAgICAgIHRoaXMuc2NlbmVIZWxwZXIuc2V0Q29udHJvbFBsYW5lVmlzaWJpbGl0eSh0cnVlKTtcclxuICAgICAgdGhpcy5zY2VuZUhlbHBlci5wb3NpdGlvbkFuZE9yaWVudENvbnRyb2xQbGFuZShcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLnRhcmdldCxcclxuICAgICAgICB0aGlzLmNhbWVyYS51cFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zY2VuZUhlbHBlci5zZXRDb250cm9sUGxhbmVWaXNpYmlsaXR5KGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG12cE1hdHJpeCA9IG5ldyBNYXRyaXg0KClcclxuICBjYW1lcmFQb3NpdGlvbkFycmF5ID0gW11cclxuICBsYXN0U29ydFZpZXdEaXIgPSBuZXcgVmVjdG9yMygwLCAwLCAtMSlcclxuICBzb3J0Vmlld0RpciA9IG5ldyBWZWN0b3IzKDAsIDAsIC0xKVxyXG4gIGxhc3RTb3J0Vmlld1BvcyA9IG5ldyBWZWN0b3IzKClcclxuICBzb3J0Vmlld09mZnNldCA9IG5ldyBWZWN0b3IzKClcclxuICBxdWV1ZWRTb3J0cyA9IFtdXHJcblxyXG4gIHBhcnRpYWxTb3J0cyA9IFtcclxuICAgIHtcclxuICAgICAgYW5nbGVUaHJlc2hvbGQ6IDAuNTUsXHJcbiAgICAgIHNvcnRGcmFjdGlvbnM6IFswLjEyNSwgMC4zMzMzMywgMC43NV1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGFuZ2xlVGhyZXNob2xkOiAwLjY1LFxyXG4gICAgICBzb3J0RnJhY3Rpb25zOiBbMC4zMzMzMywgMC42NjY2N11cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIGFuZ2xlVGhyZXNob2xkOiAwLjgsXHJcbiAgICAgIHNvcnRGcmFjdGlvbnM6IFswLjVdXHJcbiAgICB9XHJcbiAgXVxyXG4gIHJ1blNwbGF0U29ydCA9IChmb3JjZSA9IGZhbHNlLCBmb3JjZVNvcnRBbGwgPSBmYWxzZSkgPT4ge1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxyXG4gICAgaWYgKHRoaXMuc29ydFJ1bm5pbmcpIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgIGlmICh0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdENvdW50KCkgPD0gMCkge1xyXG4gICAgICB0aGlzLnNwbGF0UmVuZGVyQ291bnQgPSAwO1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBhbmdsZURpZmYgPSAwO1xyXG4gICAgbGV0IHBvc2l0aW9uRGlmZiA9IDA7XHJcbiAgICBsZXQgbmVlZHNSZWZyZXNoRm9yUm90YXRpb24gPSBmYWxzZTtcclxuICAgIGxldCBuZWVkc1JlZnJlc2hGb3JQb3NpdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuc29ydFZpZXdEaXIuc2V0KDAsIDAsIC0xKS5hcHBseVF1YXRlcm5pb24odGhpcy5jYW1lcmEucXVhdGVybmlvbik7XHJcbiAgICBhbmdsZURpZmYgPSB0aGlzLnNvcnRWaWV3RGlyLmRvdCh0aGlzLmxhc3RTb3J0Vmlld0Rpcik7XHJcbiAgICBwb3NpdGlvbkRpZmYgPSB0aGlzLnNvcnRWaWV3T2Zmc2V0XHJcbiAgICAgIC5jb3B5KHRoaXMuY2FtZXJhLnBvc2l0aW9uKVxyXG4gICAgICAuc3ViKHRoaXMubGFzdFNvcnRWaWV3UG9zKVxyXG4gICAgICAubGVuZ3RoKCk7XHJcblxyXG4gICAgaWYgKCFmb3JjZSkge1xyXG4gICAgICBpZiAoIXRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlICYmIHRoaXMucXVldWVkU29ydHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgaWYgKGFuZ2xlRGlmZiA8PSAwLjk5KSBuZWVkc1JlZnJlc2hGb3JSb3RhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKHBvc2l0aW9uRGlmZiA+PSAxLjApIG5lZWRzUmVmcmVzaEZvclBvc2l0aW9uID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIW5lZWRzUmVmcmVzaEZvclJvdGF0aW9uICYmICFuZWVkc1JlZnJlc2hGb3JQb3NpdGlvbilcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNvcnRSdW5uaW5nID0gdHJ1ZTtcclxuICAgIGxldCB7IHNwbGF0UmVuZGVyQ291bnQsIHNob3VsZFNvcnRBbGwgfSA9IHRoaXMuZ2F0aGVyU2NlbmVOb2Rlc0ZvclNvcnQoKTtcclxuICAgIHNob3VsZFNvcnRBbGwgPSBzaG91bGRTb3J0QWxsIHx8IGZvcmNlU29ydEFsbDtcclxuICAgIHRoaXMuc3BsYXRSZW5kZXJDb3VudCA9IHNwbGF0UmVuZGVyQ291bnQ7XHJcblxyXG4gICAgdGhpcy5tdnBNYXRyaXguY29weSh0aGlzLmNhbWVyYS5tYXRyaXhXb3JsZCkuaW52ZXJ0KCk7XHJcbiAgICBjb25zdCBtdnBDYW1lcmEgPSB0aGlzLnBlcnNwZWN0aXZlQ2FtZXJhIHx8IHRoaXMuY2FtZXJhO1xyXG4gICAgdGhpcy5tdnBNYXRyaXgucHJlbXVsdGlwbHkobXZwQ2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xyXG4gICAgaWYgKCF0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSlcclxuICAgICAgdGhpcy5tdnBNYXRyaXgubXVsdGlwbHkodGhpcy5zcGxhdE1lc2gubWF0cml4V29ybGQpO1xyXG5cclxuICAgIGxldCBncHVBY2NlbGVyYXRlZFNvcnRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgaWYgKFxyXG4gICAgICB0aGlzLmdwdUFjY2VsZXJhdGVkU29ydCAmJlxyXG4gICAgICAodGhpcy5xdWV1ZWRTb3J0cy5sZW5ndGggPD0gMSB8fCB0aGlzLnF1ZXVlZFNvcnRzLmxlbmd0aCAlIDIgPT09IDApXHJcbiAgICApIHtcclxuICAgICAgZ3B1QWNjZWxlcmF0ZWRTb3J0UHJvbWlzZSA9IHRoaXMuc3BsYXRNZXNoLmNvbXB1dGVEaXN0YW5jZXNPbkdQVShcclxuICAgICAgICB0aGlzLm12cE1hdHJpeCxcclxuICAgICAgICB0aGlzLnNvcnRXb3JrZXJQcmVjb21wdXRlZERpc3RhbmNlc1xyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdwdUFjY2VsZXJhdGVkU29ydFByb21pc2UudGhlbigoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnF1ZXVlZFNvcnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNwbGF0TWVzaC5keW5hbWljTW9kZSB8fCBzaG91bGRTb3J0QWxsKSB7XHJcbiAgICAgICAgICB0aGlzLnF1ZXVlZFNvcnRzLnB1c2godGhpcy5zcGxhdFJlbmRlckNvdW50KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZm9yIChsZXQgcGFydGlhbFNvcnQgb2YgdGhpcy5wYXJ0aWFsU29ydHMpIHtcclxuICAgICAgICAgICAgaWYgKGFuZ2xlRGlmZiA8IHBhcnRpYWxTb3J0LmFuZ2xlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgICAgZm9yIChsZXQgc29ydEZyYWN0aW9uIG9mIHBhcnRpYWxTb3J0LnNvcnRGcmFjdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucXVldWVkU29ydHMucHVzaChcclxuICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcih0aGlzLnNwbGF0UmVuZGVyQ291bnQgKiBzb3J0RnJhY3Rpb24pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnF1ZXVlZFNvcnRzLnB1c2godGhpcy5zcGxhdFJlbmRlckNvdW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHNvcnRDb3VudCA9IE1hdGgubWluKHRoaXMucXVldWVkU29ydHMuc2hpZnQoKSwgdGhpcy5zcGxhdFJlbmRlckNvdW50KTtcclxuICAgICAgdGhpcy5zcGxhdFNvcnRDb3VudCA9IHNvcnRDb3VudDtcclxuXHJcbiAgICAgIHRoaXMuY2FtZXJhUG9zaXRpb25BcnJheVswXSA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uLng7XHJcbiAgICAgIHRoaXMuY2FtZXJhUG9zaXRpb25BcnJheVsxXSA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uLnk7XHJcbiAgICAgIHRoaXMuY2FtZXJhUG9zaXRpb25BcnJheVsyXSA9IHRoaXMuY2FtZXJhLnBvc2l0aW9uLno7XHJcblxyXG4gICAgICBjb25zdCBzb3J0TWVzc2FnZSA9IHtcclxuICAgICAgICBtb2RlbFZpZXdQcm9qOiB0aGlzLm12cE1hdHJpeC5lbGVtZW50cyxcclxuICAgICAgICBjYW1lcmFQb3NpdGlvbjogdGhpcy5jYW1lcmFQb3NpdGlvbkFycmF5LFxyXG4gICAgICAgIHNwbGF0UmVuZGVyQ291bnQ6IHRoaXMuc3BsYXRSZW5kZXJDb3VudCxcclxuICAgICAgICBzcGxhdFNvcnRDb3VudDogc29ydENvdW50LFxyXG4gICAgICAgIHVzZVByZWNvbXB1dGVkRGlzdGFuY2VzOiB0aGlzLmdwdUFjY2VsZXJhdGVkU29ydFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAodGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUpIHtcclxuICAgICAgICB0aGlzLnNwbGF0TWVzaC5maWxsVHJhbnNmb3Jtc0FycmF5KHRoaXMuc29ydFdvcmtlclRyYW5zZm9ybXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghdGhpcy5zaGFyZWRNZW1vcnlGb3JXb3JrZXJzKSB7XHJcbiAgICAgICAgc29ydE1lc3NhZ2UuaW5kZXhlc1RvU29ydCA9IHRoaXMuc29ydFdvcmtlckluZGV4ZXNUb1NvcnQ7XHJcbiAgICAgICAgc29ydE1lc3NhZ2UudHJhbnNmb3JtcyA9IHRoaXMuc29ydFdvcmtlclRyYW5zZm9ybXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZ3B1QWNjZWxlcmF0ZWRTb3J0KSB7XHJcbiAgICAgICAgICBzb3J0TWVzc2FnZS5wcmVjb21wdXRlZERpc3RhbmNlcyA9IHRoaXMuc29ydFdvcmtlclByZWNvbXB1dGVkRGlzdGFuY2VzO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zb3J0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zb3J0UHJvbWlzZVJlc29sdmVyID0gcmVzb2x2ZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAodGhpcy5wcmVTb3J0TWVzc2FnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHRoaXMucHJlU29ydE1lc3NhZ2VzLmZvckVhY2goKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgIHRoaXMuc29ydFdvcmtlci5wb3N0TWVzc2FnZShtZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnByZVNvcnRNZXNzYWdlcyA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc29ydFdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgc29ydDogc29ydE1lc3NhZ2VcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAodGhpcy5xdWV1ZWRTb3J0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aGlzLmxhc3RTb3J0Vmlld1Bvcy5jb3B5KHRoaXMuY2FtZXJhLnBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLmxhc3RTb3J0Vmlld0Rpci5jb3B5KHRoaXMuc29ydFZpZXdEaXIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGdwdUFjY2VsZXJhdGVkU29ydFByb21pc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERldGVybWluZSB3aGljaCBzcGxhdHMgdG8gcmVuZGVyIGJ5IGNoZWNraW5nIHdoaWNoIGFyZSBpbnNpZGUgb3IgY2xvc2UgdG8gdGhlIHZpZXcgZnJ1c3R1bVxyXG4gICAqL1xyXG4gIGdhdGhlclNjZW5lTm9kZXNGb3JTb3J0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IG5vZGVSZW5kZXJMaXN0ID0gW107XHJcbiAgICBsZXQgYWxsU3BsYXRzU29ydEJ1ZmZlciA9IG51bGw7XHJcbiAgICBjb25zdCB0ZW1wVmVjdG9yWVogPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgY29uc3QgdGVtcFZlY3RvclhaID0gbmV3IFZlY3RvcjMoKTtcclxuICAgIGNvbnN0IHRlbXBWZWN0b3IgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgY29uc3QgbW9kZWxWaWV3ID0gbmV3IE1hdHJpeDQoKTtcclxuICAgIGNvbnN0IGJhc2VNb2RlbFZpZXcgPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgY29uc3Qgc2NlbmVUcmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xyXG4gICAgY29uc3QgcmVuZGVyRGltZW5zaW9ucyA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICBjb25zdCBmb3J3YXJkID0gbmV3IFZlY3RvcjMoMCwgMCwgLTEpO1xyXG5cclxuICAgIGNvbnN0IHRlbXBNYXggPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgY29uc3Qgbm9kZVNpemUgPSAobm9kZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGVtcE1heC5jb3B5KG5vZGUubWF4KS5zdWIobm9kZS5taW4pLmxlbmd0aCgpXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoZ2F0aGVyQWxsTm9kZXMgPSBmYWxzZSkge1xyXG4gICAgICB0aGlzLmdldFJlbmRlckRpbWVuc2lvbnMocmVuZGVyRGltZW5zaW9ucyk7XHJcbiAgICAgIGNvbnN0IGNhbWVyYUZvY2FsTGVuZ3RoID1cclxuICAgICAgICByZW5kZXJEaW1lbnNpb25zLnkgL1xyXG4gICAgICAgIDIuMCAvXHJcbiAgICAgICAgTWF0aC50YW4oKHRoaXMuY2FtZXJhLmZvdiAvIDIuMCkgKiBNYXRoVXRpbHMuREVHMlJBRCk7XHJcbiAgICAgIGNvbnN0IGZvdlhPdmVyMiA9IE1hdGguYXRhbihyZW5kZXJEaW1lbnNpb25zLnggLyAyLjAgLyBjYW1lcmFGb2NhbExlbmd0aCk7XHJcbiAgICAgIGNvbnN0IGZvdllPdmVyMiA9IE1hdGguYXRhbihyZW5kZXJEaW1lbnNpb25zLnkgLyAyLjAgLyBjYW1lcmFGb2NhbExlbmd0aCk7XHJcbiAgICAgIGNvbnN0IGNvc0ZvdlhPdmVyMiA9IE1hdGguY29zKGZvdlhPdmVyMik7XHJcbiAgICAgIGNvbnN0IGNvc0ZvdllPdmVyMiA9IE1hdGguY29zKGZvdllPdmVyMik7XHJcblxyXG4gICAgICBjb25zdCBzcGxhdFRyZWUgPSB0aGlzLnNwbGF0TWVzaC5nZXRTcGxhdFRyZWUoKTtcclxuXHJcbiAgICAgIGlmIChzcGxhdFRyZWUpIHtcclxuICAgICAgICBiYXNlTW9kZWxWaWV3LmNvcHkodGhpcy5jYW1lcmEubWF0cml4V29ybGQpLmludmVydCgpO1xyXG4gICAgICAgIGlmICghdGhpcy5zcGxhdE1lc2guZHluYW1pY01vZGUpXHJcbiAgICAgICAgICBiYXNlTW9kZWxWaWV3Lm11bHRpcGx5KHRoaXMuc3BsYXRNZXNoLm1hdHJpeFdvcmxkKTtcclxuXHJcbiAgICAgICAgbGV0IG5vZGVSZW5kZXJDb3VudCA9IDA7XHJcbiAgICAgICAgbGV0IHNwbGF0UmVuZGVyQ291bnQgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHNwbGF0VHJlZS5zdWJUcmVlcy5sZW5ndGg7IHMrKykge1xyXG4gICAgICAgICAgY29uc3Qgc3ViVHJlZSA9IHNwbGF0VHJlZS5zdWJUcmVlc1tzXTtcclxuICAgICAgICAgIG1vZGVsVmlldy5jb3B5KGJhc2VNb2RlbFZpZXcpO1xyXG4gICAgICAgICAgaWYgKHRoaXMuc3BsYXRNZXNoLmR5bmFtaWNNb2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsYXRNZXNoLmdldFNjZW5lVHJhbnNmb3JtKHMsIHNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgbW9kZWxWaWV3Lm11bHRpcGx5KHNjZW5lVHJhbnNmb3JtKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IG5vZGVDb3VudCA9IHN1YlRyZWUubm9kZXNXaXRoSW5kZXhlcy5sZW5ndGg7XHJcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBzdWJUcmVlLm5vZGVzV2l0aEluZGV4ZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAhbm9kZS5kYXRhIHx8XHJcbiAgICAgICAgICAgICAgIW5vZGUuZGF0YS5pbmRleGVzIHx8XHJcbiAgICAgICAgICAgICAgbm9kZS5kYXRhLmluZGV4ZXMubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICB0ZW1wVmVjdG9yLmNvcHkobm9kZS5jZW50ZXIpLmFwcGx5TWF0cml4NChtb2RlbFZpZXcpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VUb05vZGUgPSB0ZW1wVmVjdG9yLmxlbmd0aCgpO1xyXG4gICAgICAgICAgICB0ZW1wVmVjdG9yLm5vcm1hbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGVtcFZlY3RvcllaLmNvcHkodGVtcFZlY3Rvcikuc2V0WCgwKS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgdGVtcFZlY3RvclhaLmNvcHkodGVtcFZlY3Rvcikuc2V0WSgwKS5ub3JtYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYUFuZ2xlWFpEb3QgPSBmb3J3YXJkLmRvdCh0ZW1wVmVjdG9yWFopO1xyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmFBbmdsZVlaRG90ID0gZm9yd2FyZC5kb3QodGVtcFZlY3RvcllaKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5zID0gbm9kZVNpemUobm9kZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dE9mRm92WSA9IGNhbWVyYUFuZ2xlWVpEb3QgPCBjb3NGb3ZZT3ZlcjIgLSAwLjY7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dE9mRm92WCA9IGNhbWVyYUFuZ2xlWFpEb3QgPCBjb3NGb3ZYT3ZlcjIgLSAwLjY7XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAhZ2F0aGVyQWxsTm9kZXMgJiZcclxuICAgICAgICAgICAgICAob3V0T2ZGb3ZYIHx8IG91dE9mRm92WSkgJiZcclxuICAgICAgICAgICAgICBkaXN0YW5jZVRvTm9kZSA+IG5zXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3BsYXRSZW5kZXJDb3VudCArPSBub2RlLmRhdGEuaW5kZXhlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIG5vZGVSZW5kZXJMaXN0W25vZGVSZW5kZXJDb3VudF0gPSBub2RlO1xyXG4gICAgICAgICAgICBub2RlLmRhdGEuZGlzdGFuY2VUb05vZGUgPSBkaXN0YW5jZVRvTm9kZTtcclxuICAgICAgICAgICAgbm9kZVJlbmRlckNvdW50Kys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2RlUmVuZGVyTGlzdC5sZW5ndGggPSBub2RlUmVuZGVyQ291bnQ7XHJcbiAgICAgICAgbm9kZVJlbmRlckxpc3Quc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgaWYgKGEuZGF0YS5kaXN0YW5jZVRvTm9kZSA8IGIuZGF0YS5kaXN0YW5jZVRvTm9kZSkgcmV0dXJuIC0xXHJcbiAgICAgICAgICBlbHNlIHJldHVybiAxXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50Qnl0ZU9mZnNldCA9IHNwbGF0UmVuZGVyQ291bnQgKiBDb25zdGFudHMuQnl0ZXNQZXJJbnQ7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlUmVuZGVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVSZW5kZXJMaXN0W2ldO1xyXG4gICAgICAgICAgY29uc3Qgd2luZG93U2l6ZUludHMgPSBub2RlLmRhdGEuaW5kZXhlcy5sZW5ndGg7XHJcbiAgICAgICAgICBjb25zdCB3aW5kb3dTaXplQnl0ZXMgPSB3aW5kb3dTaXplSW50cyAqIENvbnN0YW50cy5CeXRlc1BlckludDtcclxuICAgICAgICAgIGxldCBkZXN0VmlldyA9IG5ldyBVaW50MzJBcnJheShcclxuICAgICAgICAgICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydC5idWZmZXIsXHJcbiAgICAgICAgICAgIGN1cnJlbnRCeXRlT2Zmc2V0IC0gd2luZG93U2l6ZUJ5dGVzLFxyXG4gICAgICAgICAgICB3aW5kb3dTaXplSW50c1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGRlc3RWaWV3LnNldChub2RlLmRhdGEuaW5kZXhlcyk7XHJcbiAgICAgICAgICBjdXJyZW50Qnl0ZU9mZnNldCAtPSB3aW5kb3dTaXplQnl0ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc3BsYXRSZW5kZXJDb3VudDogc3BsYXRSZW5kZXJDb3VudCxcclxuICAgICAgICAgIHNob3VsZFNvcnRBbGw6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IHRvdGFsU3BsYXRDb3VudCA9IHRoaXMuc3BsYXRNZXNoLmdldFNwbGF0Q291bnQoKTtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAhYWxsU3BsYXRzU29ydEJ1ZmZlciB8fFxyXG4gICAgICAgICAgYWxsU3BsYXRzU29ydEJ1ZmZlci5sZW5ndGggIT09IHRvdGFsU3BsYXRDb3VudFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgYWxsU3BsYXRzU29ydEJ1ZmZlciA9IG5ldyBVaW50MzJBcnJheSh0b3RhbFNwbGF0Q291bnQpO1xyXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFNwbGF0Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBhbGxTcGxhdHNTb3J0QnVmZmVyW2ldID0gaTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zb3J0V29ya2VySW5kZXhlc1RvU29ydC5zZXQoYWxsU3BsYXRzU29ydEJ1ZmZlcik7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHNwbGF0UmVuZGVyQ291bnQ6IHRvdGFsU3BsYXRDb3VudCxcclxuICAgICAgICAgIHNob3VsZFNvcnRBbGw6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KSgpXHJcblxyXG4gIGdldFNwbGF0TWVzaCgpIHtcclxuICAgIHJldHVybiB0aGlzLnNwbGF0TWVzaFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGEgcmVmZXJlbmNlIHRvIGEgc3BsYXQgc2NlbmUuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNjZW5lSW5kZXggVGhlIGluZGV4IG9mIHRoZSBzY2VuZSB0byB3aGljaCB0aGUgcmVmZXJlbmNlIHdpbGwgYmUgcmV0dXJuZWRcclxuICAgKiBAcmV0dXJuIHtTcGxhdFNjZW5lfVxyXG4gICAqL1xyXG4gIGdldFNwbGF0U2NlbmUoc2NlbmVJbmRleCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3BsYXRNZXNoLmdldFNjZW5lKHNjZW5lSW5kZXgpXHJcbiAgfVxyXG5cclxuICBnZXRTY2VuZUNvdW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuc3BsYXRNZXNoLmdldFNjZW5lQ291bnQoKVxyXG4gIH1cclxuXHJcbiAgaXNNb2JpbGUoKSB7XHJcbiAgICByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnTW9iaScpXHJcbiAgfVxyXG5cclxuICB1cGRhdGVNb3JwaFRhcmdldChpbnB1dE1lc2gpIHtcclxuICAgIHRoaXMuYXZhdGFyTWVzaCA9IGlucHV0TWVzaDtcclxuICAgIHRoaXMuc3BsYXRNZXNoLmZsYW1lTW9kZWwgPSBpbnB1dE1lc2g7XHJcblxyXG4gICAgdGhpcy5ydW5Nb3JwaFVwZGF0ZSgpO1xyXG4gICAgdGhpcy5zcGxhdE1lc2guZ2F1c3NpYW5TcGxhdENvdW50ID0gdGhpcy5nYXVzc2lhblNwbGF0Q291bnQ7XHJcbiAgfVxyXG5cclxuICBydW5Nb3JwaFVwZGF0ZSgpIHtcclxuICAgIHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50ID0gdGhpcy5hdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnQ7XHJcbiAgICB2YXIgbW9ycGhlZE1lc2ggPSBuZXcgRmxvYXQzMkFycmF5KFxyXG4gICAgICB0aGlzLmF2YXRhck1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheVxyXG4gICAgKTtcclxuICAgIGNvbnN0IG51bUJvbmVzID0gNTtcclxuICAgIHRoaXMuc3BsYXRNZXNoLmJvbmVzTnVtID0gbnVtQm9uZXM7XHJcblxyXG4gICAgdGhpcy5za2luTW9kZWwuc2tlbGV0b24udXBkYXRlKCk7XHJcbiAgICB0aGlzLmJvbmVSb290LnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO1xyXG4gICAgaWYgKHRoaXMuc3BsYXRNZXNoLmdlb21ldHJ5LmdldEF0dHJpYnV0ZSgnc3BsYXRJbmRleCcpICYmIHRoaXMuc2V0U2tpbkF0dGlidXRlcyA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgIHRoaXMuc2V0U2tpbkF0dGlidXRlcyA9IHRydWU7XHJcbiAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5zcGxhdE1lc2guZ2VvbWV0cnk7XHJcblxyXG4gICAgICBjb25zdCBza2luSW5kZXhTb3VyY2UgPSB0aGlzLnNraW5Nb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5JbmRleDtcclxuICAgICAgY29uc3Qgc2tpbldlaWdodFNvdXJjZSA9IHRoaXMuc2tpbk1vZGVsLmdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbldlaWdodDtcclxuXHJcbiAgICAgIGNvbnN0IG5ld1NraW5JbmRleCA9IG5ldyBJbnN0YW5jZWRCdWZmZXJBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBuZXcgc2tpbkluZGV4U291cmNlLmFycmF5LmNvbnN0cnVjdG9yKHNraW5JbmRleFNvdXJjZS5hcnJheSksXHJcbiAgICAgICAgICA0LFxyXG4gICAgICAgICAgc2tpbkluZGV4U291cmNlLm5vcm1hbGl6ZWQsXHJcbiAgICAgICAgICAxXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBuZXdTa2luV2VpZ2h0ID0gbmV3IEluc3RhbmNlZEJ1ZmZlckF0dHJpYnV0ZShcclxuICAgICAgICAgIG5ldyBza2luV2VpZ2h0U291cmNlLmFycmF5LmNvbnN0cnVjdG9yKHNraW5XZWlnaHRTb3VyY2UuYXJyYXkpLFxyXG4gICAgICAgICAgNCxcclxuICAgICAgICAgIHNraW5XZWlnaHRTb3VyY2Uubm9ybWFsaXplZCxcclxuICAgICAgICAgIDFcclxuICAgICAgKTtcclxuICAgICAgbmV3U2tpbkluZGV4LnNldFVzYWdlKER5bmFtaWNEcmF3VXNhZ2UpO1xyXG4gICAgICBuZXdTa2luV2VpZ2h0LnNldFVzYWdlKER5bmFtaWNEcmF3VXNhZ2UpO1xyXG4gICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3NraW5JbmRleCcsIG5ld1NraW5JbmRleCk7XHJcbiAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnc2tpbldlaWdodCcsIG5ld1NraW5XZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3BsYXRNZXNoLm1vcnBoZWRNZXNoID0gbW9ycGhlZE1lc2g7XHJcblxyXG4gICAgbGV0IHNwbGF0TnVtID0gdGhpcy5zcGxhdE1lc2gubW9ycGhlZE1lc2gubGVuZ3RoIC8gMztcclxuICAgIGlmICh0aGlzLnNwbGF0TWVzaC5zcGxhdERhdGFUZXh0dXJlc1snZmxhbWVNb2RlbCddICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnNwbGF0TWVzaC51cGRhdGVUZXR1cmVBZnRlckJTQW5kU2tlbGV0b24oMCwgc3BsYXROdW0gLSAxLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLyoqXHJcbiAqIEdhdXNzaWFuU3BsYXRSZW5kZXJlclxyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogXHJcbiAqIEhpZ2gtbGV2ZWwgb3JjaGVzdHJhdGlvbiBjbGFzcyB0aGF0OlxyXG4gKiAtIExvYWRzIFpJUCBhc3NldHMgdmlhIGZldGNoXHJcbiAqIC0gVW5wYWNrcyB3aXRoIEpTWmlwXHJcbiAqIC0gQ3JlYXRlcyBWaWV3ZXIgaW5zdGFuY2VcclxuICogLSBMb2FkcyBGTEFNRS9za2luIG1vZGVsc1xyXG4gKiAtIFJ1bnMgdGhlIHJlbmRlciBsb29wXHJcbiAqL1xyXG5cclxuLyogZ2xvYmFsIE5Qcm9ncmVzcyAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIFZlY3RvcjMsXHJcbiAgICBCb25lLFxyXG4gICAgQ2xvY2ssXHJcbiAgICBBbmltYXRpb25NaXhlclxyXG59IGZyb20gJ3RocmVlJztcclxuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIuanMnO1xyXG5pbXBvcnQgSlNaaXAgZnJvbSAnanN6aXAnO1xyXG5cclxuLy8gSW1wb3J0IGludGVybmFsIG1vZHVsZXNcclxuaW1wb3J0IHsgVFlWb2ljZUNoYXRTdGF0ZSB9IGZyb20gJy4vQXBwQ29uc3RhbnRzLmpzJztcclxuaW1wb3J0IHsgQW5pbWF0aW9uTWFuYWdlciB9IGZyb20gJy4vQW5pbWF0aW9uTWFuYWdlci5qcyc7XHJcbmltcG9ydCB7IFZpZXdlciB9IGZyb20gJy4uL2NvcmUvVmlld2VyLmpzJztcclxuaW1wb3J0IHsgU2NlbmVGb3JtYXQgfSBmcm9tICcuLi9lbnVtcy9TY2VuZUZvcm1hdC5qcyc7XHJcblxyXG4vLyBJbXBvcnQgbmV3IHV0aWxpdGllcyBhbmQgZXJyb3IgY2xhc3Nlc1xyXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICcuLi91dGlscy9Mb2dnZXIuanMnO1xyXG5pbXBvcnQge1xyXG4gICAgVmFsaWRhdGlvbkVycm9yLFxyXG4gICAgTmV0d29ya0Vycm9yLFxyXG4gICAgQXNzZXRMb2FkRXJyb3IsXHJcbiAgICBJbml0aWFsaXphdGlvbkVycm9yLFxyXG4gICAgUmVzb3VyY2VEaXNwb3NlZEVycm9yXHJcbn0gZnJvbSAnLi4vZXJyb3JzL2luZGV4LmpzJztcclxuaW1wb3J0IHtcclxuICAgIHZhbGlkYXRlVXJsLFxyXG4gICAgdmFsaWRhdGVET01FbGVtZW50LFxyXG4gICAgdmFsaWRhdGVIZXhDb2xvcixcclxuICAgIHZhbGlkYXRlQ2FsbGJhY2tcclxufSBmcm9tICcuLi91dGlscy9WYWxpZGF0aW9uVXRpbHMuanMnO1xyXG5pbXBvcnQgeyBCbG9iVXJsTWFuYWdlciB9IGZyb20gJy4uL3V0aWxzL0Jsb2JVcmxNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgdGVtcFZlY3RvcjNBIH0gZnJvbSAnLi4vdXRpbHMvT2JqZWN0UG9vbC5qcyc7XHJcblxyXG4vLyBDcmVhdGUgbG9nZ2VyIGZvciB0aGlzIG1vZHVsZVxyXG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlcicpO1xyXG5cclxuLy8gQ29uZmlndXJhdGlvbiBvYmplY3RzIC0gdGhlc2Ugd291bGQgbm9ybWFsbHkgYmUgbG9hZGVkIGZyb20gdGhlIFpJUFxyXG5jb25zdCBjaGFyYWN0b3JDb25maWcgPSB7XHJcbiAgICBjYW1Qb3M6IHsgeDogMCwgeTogMS44LCB6OiAxIH0sXHJcbiAgICBjYW1Sb3Q6IHsgeDogLTEwLCB5OiAwLCB6OiAwIH0sXHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICdmZmZmZmYnXHJcbn07XHJcblxyXG5jb25zdCBtb3Rpb25Db25maWcgPSB7XHJcbiAgICBvZmZzZXQ6IHt9LFxyXG4gICAgc2NhbGU6IHt9XHJcbn07XHJcblxyXG4vLyBBbmltYXRpb24gY29uZmlndXJhdGlvbiAtIGRlZmluZXMgaG93IGFuaW1hdGlvbiBjbGlwcyBhcmUgZGlzdHJpYnV0ZWQgdG8gc3RhdGVzXHJcbi8vIFRoZSBhbmltYXRpb24uZ2xiIGNvbnRhaW5zIGNsaXBzIGluIG9yZGVyOiBoZWxsbygyKSwgaWRsZSgxKSwgbGlzdGVuKDApLCBzcGVhayg2KSwgdGhpbmsoMylcclxuY29uc3QgYW5pbWF0aW9uQ29uZmlnID0ge1xyXG4gICAgaGVsbG86IHsgc2l6ZTogMiwgaXNHcm91cDogZmFsc2UgfSxcclxuICAgIGlkbGU6IHsgc2l6ZTogMSwgaXNHcm91cDogZmFsc2UgfSxcclxuICAgIGxpc3RlbjogeyBzaXplOiAwLCBpc0dyb3VwOiBmYWxzZSB9LFxyXG4gICAgc3BlYWs6IHsgc2l6ZTogNiwgaXNHcm91cDogZmFsc2UgfSxcclxuICAgIHRoaW5rOiB7IHNpemU6IDMsIGlzR3JvdXA6IHRydWUgfSxcclxuICAgIG90aGVyOiBbXVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdhdXNzaWFuU3BsYXRSZW5kZXJlciAtIE1haW4gcmVuZGVyaW5nIGNsYXNzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR2F1c3NpYW5TcGxhdFJlbmRlcmVyIHtcclxuICAgIC8qKlxyXG4gICAgICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IHJlbmRlcmVyIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgY2FudmFzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXNzZXRQYXRoIC0gVVJMIHRvIGNoYXJhY3RlciBaSVAgZmlsZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZG93bmxvYWRQcm9ncmVzc10gLSBEb3dubG9hZCBwcm9ncmVzcyBjYWxsYmFjayAoMC0xKVxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMubG9hZFByb2dyZXNzXSAtIExvYWQgcHJvZ3Jlc3MgY2FsbGJhY2sgKDAtMSlcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdldENoYXRTdGF0ZV0gLSBDaGF0IHN0YXRlIHByb3ZpZGVyIGZ1bmN0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YV0gLSBFeHByZXNzaW9uIGRhdGEgcHJvdmlkZXIgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3JdIC0gQmFja2dyb3VuZCBjb2xvciAoaGV4IHN0cmluZylcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEdhdXNzaWFuU3BsYXRSZW5kZXJlcj59IFJlbmRlcmVyIGluc3RhbmNlXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIHBhcmFtZXRlcnMgYXJlIGludmFsaWRcclxuICAgICAqIEB0aHJvd3Mge05ldHdvcmtFcnJvcn0gSWYgYXNzZXQgZG93bmxvYWQgZmFpbHNcclxuICAgICAqIEB0aHJvd3Mge0Fzc2V0TG9hZEVycm9yfSBJZiBhc3NldCBsb2FkaW5nL3BhcnNpbmcgZmFpbHNcclxuICAgICAqIEB0aHJvd3Mge0luaXRpYWxpemF0aW9uRXJyb3J9IElmIHJlbmRlcmVyIGluaXRpYWxpemF0aW9uIGZhaWxzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGUoY29udGFpbmVyLCBhc3NldFBhdGgsIG9wdGlvbnMgPSB7fSkge1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgIHZhbGlkYXRlRE9NRWxlbWVudChjb250YWluZXIsICdjb250YWluZXInKTtcclxuICAgICAgICAgICAgdmFsaWRhdGVVcmwoYXNzZXRQYXRoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFZhbGlkYXRlIG9wdGlvbmFsIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kb3dubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNhbGxiYWNrKG9wdGlvbnMuZG93bmxvYWRQcm9ncmVzcywgJ29wdGlvbnMuZG93bmxvYWRQcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sb2FkUHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob3B0aW9ucy5sb2FkUHJvZ3Jlc3MsICdvcHRpb25zLmxvYWRQcm9ncmVzcycsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRDaGF0U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FsbGJhY2sob3B0aW9ucy5nZXRDaGF0U3RhdGUsICdvcHRpb25zLmdldENoYXRTdGF0ZScsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVDYWxsYmFjayhvcHRpb25zLmdldEV4cHJlc3Npb25EYXRhLCAnb3B0aW9ucy5nZXRFeHByZXNzaW9uRGF0YScsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSGV4Q29sb3Iob3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IsICdvcHRpb25zLmJhY2tncm91bmRDb2xvcicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnSW5pdGlhbGl6aW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlcicsIHsgYXNzZXRQYXRoIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyUGF0aCA9IGFzc2V0UGF0aDtcclxuXHJcbiAgICAgICAgICAgIC8vIFBhcnNlIGNoYXJhY3RlciBuYW1lIGZyb20gcGF0aFxyXG4gICAgICAgICAgICBsZXQgY2hhcmFjdGVyTmFtZTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoY2hhcmFjdGVyUGF0aCwgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRobmFtZSA9IHVybC5wYXRobmFtZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBwYXRobmFtZS5tYXRjaCgvXFwvKFteL10rPylcXC56aXAvKTtcclxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlck5hbWUgPSBtYXRjaGVzPy5bMV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFyYWN0ZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NoYXJhY3RlciBtb2RlbCBuYW1lIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBwYXRoLiBFeHBlY3RlZCBmb3JtYXQ6IC9wYXRoL25hbWUuemlwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Fzc2V0UGF0aCdcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBJbnZhbGlkIGFzc2V0IHBhdGggZm9ybWF0OiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAnYXNzZXRQYXRoJyxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2hvdyBwcm9ncmVzc1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE5Qcm9ncmVzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5zdGFydCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEb3dubG9hZCBaSVAgZmlsZVxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRG93bmxvYWRpbmcgYXNzZXQgWklQJywgeyBwYXRoOiBjaGFyYWN0ZXJQYXRoIH0pO1xyXG4gICAgICAgICAgICBsZXQgY2hhcmFjdGVyWmlwUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXJaaXBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNoYXJhY3RlclBhdGgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFyYWN0ZXJaaXBSZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOZXR3b3JrRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gZG93bmxvYWQgYXNzZXQ6ICR7Y2hhcmFjdGVyWmlwUmVzcG9uc2Uuc3RhdHVzVGV4dH1gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJaaXBSZXNwb25zZS5zdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTmV0d29ya0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBOZXR3b3JrIGVycm9yIGRvd25sb2FkaW5nIGFzc2V0OiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZXBvcnQgZG93bmxvYWQgcHJvZ3Jlc3NcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZG93bmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRvd25sb2FkUHJvZ3Jlc3MoMS4wKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Vycm9yIGluIGRvd25sb2FkUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvYWRQcm9ncmVzcygwLjEpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gbG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE5Qcm9ncmVzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIE5Qcm9ncmVzcy5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFBhcnNlIGFycmF5IGJ1ZmZlclxyXG4gICAgICAgICAgICBsZXQgYXJyYXlCdWZmZXI7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUJ1ZmZlciA9IGF3YWl0IGNoYXJhY3RlclppcFJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTmV0d29ya0Vycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gcmVhZCByZXNwb25zZSBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIFpJUCB3aXRoIGltcG9ydGVkIEpTWmlwXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVW5wYWNraW5nIFpJUCBhcmNoaXZlJyk7XHJcbiAgICAgICAgICAgIGxldCB6aXBEYXRhO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgemlwRGF0YSA9IGF3YWl0IEpTWmlwLmxvYWRBc3luYyhhcnJheUJ1ZmZlcik7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byB1bnBhY2sgWklQIGFyY2hpdmU6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlclBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpbmQgZm9sZGVyIG5hbWUgaW4gWklQXHJcbiAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKHppcERhdGEuZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5kaXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGZpbGUubmFtZT8uc2xpY2UoMCwgZmlsZS5uYW1lPy5sZW5ndGggLSAxKTsgLy8gUmVtb3ZlIHRyYWlsaW5nICcvJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZmlsZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAnTm8gZm9sZGVyIGZvdW5kIGluIFpJUCBhcmNoaXZlLiBFeHBlY3RlZCBaSVAgdG8gY29udGFpbiBhIGZvbGRlciB3aXRoIG1vZGVsIGZpbGVzLicsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyUGF0aFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGb3VuZCBtb2RlbCBmb2xkZXIgaW4gWklQJywgeyBmaWxlTmFtZSB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSByZW5kZXJlciBpbnN0YW5jZVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NyZWF0aW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlciBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBHYXVzc2lhblNwbGF0UmVuZGVyZXIoY29udGFpbmVyLCB6aXBEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldHVwIGNhbWVyYSBwb3NpdGlvbiAodXNlIG9iamVjdCBwb29sIGZvciB0ZW1wIHZlY3RvcnMpXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYVBvcyA9IHRlbXBWZWN0b3IzQS5zZXQoXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUG9zPy54ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUG9zPy55ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUG9zPy56ID8/IDFcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhbWVyYVJvdGF0aW9uID0gbmV3IFZlY3RvcjMoXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUm90Py54ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUm90Py55ID8/IDAsXHJcbiAgICAgICAgICAgICAgICBjaGFyYWN0b3JDb25maWcuY2FtUm90Py56ID8/IDBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FtZXJhIHNldHVwJywge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHsgeDogY2FtZXJhUG9zLngsIHk6IGNhbWVyYVBvcy55LCB6OiBjYW1lcmFQb3MueiB9LFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246IHsgeDogY2FtZXJhUm90YXRpb24ueCwgeTogY2FtZXJhUm90YXRpb24ueSwgejogY2FtZXJhUm90YXRpb24ueiB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQmFja2dyb3VuZCBjb2xvciB3aXRoIHZhbGlkYXRpb25cclxuICAgICAgICAgICAgbGV0IGJhY2tncm91bmRDb2xvciA9IDB4ZmZmZmZmO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJhY3RvckNvbmZpZy5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludChjaGFyYWN0b3JDb25maWcuYmFja2dyb3VuZENvbG9yLCAxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignSW52YWxpZCBiYWNrZ3JvdW5kQ29sb3IgaW4gY29uZmlnLCB1c2luZyBkZWZhdWx0Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNoYXJhY3RvckNvbmZpZy5iYWNrZ3JvdW5kQ29sb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LmJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlci5pc0hleENvbG9yU3RyaWN0KG9wdGlvbnMuYmFja2dyb3VuZENvbG9yKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBwYXJzZUludChvcHRpb25zLmJhY2tncm91bmRDb2xvciwgMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdJbnZhbGlkIGJhY2tncm91bmRDb2xvciBvcHRpb24sIHVzaW5nIGNvbmZpZyB2YWx1ZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb25zLmJhY2tncm91bmRDb2xvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgcGFyc2luZyBiYWNrZ3JvdW5kQ29sb3IsIHVzaW5nIGRlZmF1bHQnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQmFja2dyb3VuZCBjb2xvciBzZXQnLCB7IGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLnRvU3RyaW5nKDE2KSB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICByZW5kZXJlci5nZXRDaGF0U3RhdGUgPSBvcHRpb25zPy5nZXRDaGF0U3RhdGU7XHJcbiAgICAgICAgICAgIHJlbmRlcmVyLmdldEV4cHJlc3Npb25EYXRhID0gb3B0aW9ucz8uZ2V0RXhwcmVzc2lvbkRhdGE7XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgVmlld2VyIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgVmlld2VyIGluc3RhbmNlJyk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJlci52aWV3ZXIgPSBuZXcgVmlld2VyKHtcclxuICAgICAgICAgICAgICAgICAgICByb290RWxlbWVudDogY29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHRocmVlanNDYW52YXM6IHJlbmRlcmVyLl9jYW52YXMsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhVXA6IFswLCAxLCAwXSxcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsQ2FtZXJhUG9zaXRpb246IFtjYW1lcmFQb3MueCwgY2FtZXJhUG9zLnksIGNhbWVyYVBvcy56XSxcclxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsQ2FtZXJhUm90YXRpb246IFtjYW1lcmFSb3RhdGlvbi54LCBjYW1lcmFSb3RhdGlvbi55LCBjYW1lcmFSb3RhdGlvbi56XSxcclxuICAgICAgICAgICAgICAgICAgICBzcGhlcmljYWxIYXJtb25pY3NEZWdyZWU6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kQ29sb3JcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBjcmVhdGUgVmlld2VyIGluc3RhbmNlOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBtb2RlbCAobm9uLUZMQU1FIG1vZGUgb25seSlcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0xvYWRpbmcgbW9kZWwnLCB7IGZpbGVOYW1lIH0pO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVuZGVyZXIubG9hZE1vZGVsKGZpbGVOYW1lLCBhbmltYXRpb25Db25maWcsIG1vdGlvbkNvbmZpZyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBsb2FkIG1vZGVsOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgY2FsbGJhY2sgd2l0aCBlcnJvciBpc29sYXRpb25cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubG9hZFByb2dyZXNzKDAuMik7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBpbiBsb2FkUHJvZ3Jlc3MgY2FsbGJhY2snLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgb2Zmc2V0IFBMWVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0xvYWRpbmcgb2Zmc2V0IFBMWSBmaWxlJyk7XHJcbiAgICAgICAgICAgIGxldCBvZmZzZXRGaWxlVXJsO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0RmlsZVVybCA9IGF3YWl0IHJlbmRlcmVyLnVucGFja0ZpbGVBc0Jsb2IoZmlsZU5hbWUgKyAnL29mZnNldC5wbHknKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGxvYWQgb2Zmc2V0LnBseTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgKyAnL29mZnNldC5wbHknLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIGlyaXMgb2NjbHVzaW9uIGNvbmZpZ3VyYXRpb24gKG9wdGlvbmFsKVxyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NoZWNraW5nIGZvciBpcmlzX29jY2x1c2lvbi5qc29uJyk7XHJcbiAgICAgICAgICAgIGxldCBpcmlzT2NjbHVzaW9uQ29uZmlnID0gbnVsbDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlyaXNPY2NsdXNpb25Db25maWcgPSBhd2FpdCByZW5kZXJlci5fbG9hZEpzb25Gcm9tWmlwKGZpbGVOYW1lICsgJy9pcmlzX29jY2x1c2lvbi5qc29uJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXJpc09jY2x1c2lvbkNvbmZpZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdJcmlzIG9jY2x1c2lvbiBjb25maWd1cmF0aW9uIGxvYWRlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRJcmlzUmFuZ2VzOiBpcmlzT2NjbHVzaW9uQ29uZmlnLnJpZ2h0X2lyaXM/Lmxlbmd0aCA/PyAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0SXJpc1JhbmdlczogaXJpc09jY2x1c2lvbkNvbmZpZy5sZWZ0X2lyaXM/Lmxlbmd0aCA/PyAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuaXJpc09jY2x1c2lvbkNvbmZpZyA9IGlyaXNPY2NsdXNpb25Db25maWc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFzcyB0byB2aWV3ZXIgZm9yIG1hdGVyaWFsIGdlbmVyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci52aWV3ZXIuaXJpc09jY2x1c2lvbkNvbmZpZyA9IGlyaXNPY2NsdXNpb25Db25maWc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gaXJpc19vY2NsdXNpb24uanNvbiBmb3VuZCwgaXJpcyBvY2NsdXNpb24gd2lsbCBiZSBkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gTG9nIGJ1dCBkb24ndCBmYWlsIC0gaXJpcyBvY2NsdXNpb24gaXMgb3B0aW9uYWxcclxuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gbG9hZCBpcmlzX29jY2x1c2lvbi5qc29uLCBjb250aW51aW5nIHdpdGhvdXQgaXQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuaXJpc09jY2x1c2lvbkNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFByb2dyZXNzIGNhbGxiYWNrIHdpdGggZXJyb3IgaXNvbGF0aW9uXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxvYWRQcm9ncmVzcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmxvYWRQcm9ncmVzcygwLjMpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gbG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgc3BsYXQgc2NlbmVcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBZGRpbmcgc3BsYXQgc2NlbmUnKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHJlbmRlcmVyLnZpZXdlci5hZGRTcGxhdFNjZW5lKG9mZnNldEZpbGVVcmwsIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc2l2ZUxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hhcmVkTWVtb3J5Rm9yV29ya2VyczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRpbmdVSTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBTY2VuZUZvcm1hdC5QbHlcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBhZGQgc3BsYXQgc2NlbmU6ICR7ZXJyb3IubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJbml0aWFsIHJlbmRlclxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGluaXRpYWwgcmVuZGVyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgdGhyb3cgLSByZW5kZXIgZXJyb3JzIGFyZSBub24tZmF0YWxcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgY2FsbGJhY2sgd2l0aCBlcnJvciBpc29sYXRpb25cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMubG9hZFByb2dyZXNzKDEpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignRXJyb3IgaW4gbG9hZFByb2dyZXNzIGNhbGxiYWNrJywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnR2F1c3NpYW5TcGxhdFJlbmRlcmVyIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyZXI7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIFJlLXRocm93IGN1c3RvbSBlcnJvcnMgYXMtaXNcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yIHx8XHJcbiAgICAgICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIE5ldHdvcmtFcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBBc3NldExvYWRFcnJvciB8fFxyXG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBJbml0aWFsaXphdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0luaXRpYWxpemF0aW9uIGZhaWxlZCcsIHsgZXJyb3JDb2RlOiBlcnJvci5jb2RlLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFdyYXAgdW5leHBlY3RlZCBlcnJvcnNcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIGR1cmluZyBpbml0aWFsaXphdGlvbicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEluaXRpYWxpemF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgVW5leHBlY3RlZCBlcnJvciBpbml0aWFsaXppbmcgR2F1c3NpYW5TcGxhdFJlbmRlcmVyOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGNyZWF0ZSgpIGluc3RlYWQuIFRoaXMgbWV0aG9kIGlzIGtlcHQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBmb3IgY2FudmFzXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXNzZXRQYXRoIC0gVVJMIHRvIGNoYXJhY3RlciBaSVAgZmlsZVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAtIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xyXG4gICAgICogQHJldHVybnMge1Byb21pc2U8R2F1c3NpYW5TcGxhdFJlbmRlcmVyPn0gUmVuZGVyZXIgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGdldEluc3RhbmNlKGNvbnRhaW5lciwgYXNzZXRQYXRoLCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBsb2dnZXIud2FybignZ2V0SW5zdGFuY2UoKSBpcyBkZXByZWNhdGVkLiBVc2UgY3JlYXRlKCkgaW5zdGVhZC4gRWFjaCBjYWxsIGNyZWF0ZXMgYSBuZXcgaW5zdGFuY2UuJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlKGNvbnRhaW5lciwgYXNzZXRQYXRoLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIC0gQ3JlYXRlcyBhIG5ldyBHYXVzc2lhblNwbGF0UmVuZGVyZXIgaW5zdGFuY2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBfY29udGFpbmVyIC0gRE9NIGNvbnRhaW5lciBlbGVtZW50IGZvciB0aGUgcmVuZGVyZXJcclxuICAgICAqIEBwYXJhbSB7SlNaaXB9IHppcERhdGEgLSBMb2FkZWQgWklQIGFyY2hpdmUgY29udGFpbmluZyBtb2RlbCBkYXRhXHJcbiAgICAgKiBAcHJpdmF0ZSAtIFVzZSBjcmVhdGUoKSBmYWN0b3J5IG1ldGhvZCBpbnN0ZWFkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKF9jb250YWluZXIsIHppcERhdGEpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBjb25zdHJ1Y3RvciBjYWxsZWQnKTtcclxuXHJcbiAgICAgICAgLy8gRGlzcG9zYWwgdHJhY2tpbmdcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBCbG9iVXJsTWFuYWdlciBmb3IgdHJhY2tpbmcgYmxvYiBVUkxzXHJcbiAgICAgICAgdGhpcy5fYmxvYlVybE1hbmFnZXIgPSBuZXcgQmxvYlVybE1hbmFnZXIoKTtcclxuXHJcbiAgICAgICAgLy8gWklQIGZpbGUgY2FjaGVcclxuICAgICAgICB0aGlzLnppcFVybHMgPSB7XHJcbiAgICAgICAgICAgIHVybHM6IG5ldyBNYXAoKSxcclxuICAgICAgICAgICAgemlwOiB6aXBEYXRhXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU3RhdGVcclxuICAgICAgICB0aGlzLmxhc3RUaW1lID0gMDtcclxuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5leHByZXNzaW9uRGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuY2hhdFN0YXRlID0gVFlWb2ljZUNoYXRTdGF0ZS5JZGxlO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgaW5zdGFuY2Utc3BlY2lmaWMgY2FudmFzXHJcbiAgICAgICAgdGhpcy5fY2FudmFzID0gbnVsbDtcclxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBfY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IF9jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgdGhpcy5fY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpO1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NhbnZhcyBzZXR1cCcsIHsgd2lkdGgsIGhlaWdodCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFuaW1hdGlvbiB0aW1pbmdcclxuICAgICAgICB0aGlzLmNsb2NrID0gbmV3IENsb2NrKCk7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDAuMDtcclxuXHJcbiAgICAgICAgLy8gVGhlc2Ugd2lsbCBiZSBzZXQgZHVyaW5nIGxvYWRpbmdcclxuICAgICAgICB0aGlzLnZpZXdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5taXhlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pcmlzT2NjbHVzaW9uQ29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1vdGlvbmNmZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nZXRDaGF0U3RhdGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEgPSBudWxsO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBpbnN0YW5jZSBjcmVhdGVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3NlcnQgcmVuZGVyZXIgaXMgbm90IGRpc3Bvc2VkXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHRocm93cyB7UmVzb3VyY2VEaXNwb3NlZEVycm9yfSBJZiByZW5kZXJlciBoYXMgYmVlbiBkaXNwb3NlZFxyXG4gICAgICovXHJcbiAgICBfYXNzZXJ0Tm90RGlzcG9zZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXNvdXJjZURpc3Bvc2VkRXJyb3IoJ0dhdXNzaWFuU3BsYXRSZW5kZXJlciBoYXMgYmVlbiBkaXNwb3NlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2UgcmVuZGVyZXIgYW5kIGZyZWUgYWxsIHJlc291cmNlc1xyXG4gICAgICpcclxuICAgICAqIFByb3Blcmx5IGNsZWFucyB1cDpcclxuICAgICAqIC0gTW9kZWwgcmVzb3VyY2VzIChtZXNoLCBhbmltYXRpb25zLCB0ZXh0dXJlcylcclxuICAgICAqIC0gQmxvYiBVUkxzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXHJcbiAgICAgKiAtIFZpZXdlciBpbnN0YW5jZVxyXG4gICAgICogLSBDYW52YXMgdmlzaWJpbGl0eVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBkaXNwb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybignR2F1c3NpYW5TcGxhdFJlbmRlcmVyLmRpc3Bvc2UoKSBjYWxsZWQgb24gYWxyZWFkeSBkaXNwb3NlZCBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnRGlzcG9zaW5nIEdhdXNzaWFuU3BsYXRSZW5kZXJlcicpO1xyXG5cclxuICAgICAgICAvLyBIaWRlIGFuZCByZW1vdmUgY2FudmFzXHJcbiAgICAgICAgaWYgKHRoaXMuX2NhbnZhcykge1xyXG4gICAgICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2FudmFzLnBhcmVudE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NhbnZhcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fY2FudmFzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERpc3Bvc2UgbW9kZWwgcmVzb3VyY2VzXHJcbiAgICAgICAgdGhpcy5kaXNwb3NlTW9kZWwoKTtcclxuXHJcbiAgICAgICAgLy8gUmV2b2tlIGFsbCBibG9iIFVSTHMgdXNpbmcgQmxvYlVybE1hbmFnZXJcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLl9ibG9iVXJsTWFuYWdlcj8uZGlzcG9zZSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZGlzcG9zaW5nIEJsb2JVcmxNYW5hZ2VyJywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTGVnYWN5IGJsb2IgVVJMIGNsZWFudXAgKGZvciBVUkxzIGNyZWF0ZWQgYmVmb3JlIEJsb2JVcmxNYW5hZ2VyKVxyXG4gICAgICAgIGlmICh0aGlzLnppcFVybHM/LnVybHMpIHtcclxuICAgICAgICAgICAgdGhpcy56aXBVcmxzLnVybHMuZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdFcnJvciByZXZva2luZyBibG9iIFVSTCcsIHsgdXJsOiB2YWx1ZSwgZXJyb3IgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnppcFVybHMudXJscy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTnVsbGlmeSByZWZlcmVuY2VzIHRvIGFpZCBHQ1xyXG4gICAgICAgIHRoaXMudmlld2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1peGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFuaW1NYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbnVsbDtcclxuICAgICAgICB0aGlzLm1vdGlvbmNmZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nZXRDaGF0U3RhdGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuemlwVXJscyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIE1hcmsgYXMgZGlzcG9zZWRcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIENsZWFyIHNpbmdsZXRvbiBpbnN0YW5jZVxyXG4gICAgICAgIEdhdXNzaWFuU3BsYXRSZW5kZXJlci5pbnN0YW5jZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdHYXVzc2lhblNwbGF0UmVuZGVyZXIgZGlzcG9zZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIG1vZGVsLXNwZWNpZmljIHJlc291cmNlc1xyXG4gICAgICpcclxuICAgICAqIENsZWFucyB1cDpcclxuICAgICAqIC0gQW5pbWF0aW9uIG1peGVyIGFuZCBjYWNoZWQgYWN0aW9uc1xyXG4gICAgICogLSBBbmltYXRpb24gbWFuYWdlclxyXG4gICAgICogLSBWaWV3ZXIgaW5zdGFuY2VcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgZGlzcG9zZU1vZGVsKCkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRGlzcG9zaW5nIG1vZGVsIHJlc291cmNlcycpO1xyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIGFuaW1hdGlvbiBtaXhlclxyXG4gICAgICAgIGlmICh0aGlzLm1peGVyKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1peGVyLnN0b3BBbGxBY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdlcj8uYXZhdGFyTWVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWl4ZXIudW5jYWNoZVJvb3QodGhpcy52aWV3ZXIuYXZhdGFyTWVzaCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGRpc3Bvc2luZyBhbmltYXRpb24gbWl4ZXInLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5taXhlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIGFuaW1hdGlvbiBtYW5hZ2VyXHJcbiAgICAgICAgaWYgKHRoaXMuYW5pbU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbU1hbmFnZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkaXNwb3NpbmcgYW5pbWF0aW9uIG1hbmFnZXInLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaXNwb3NlIHZpZXdlclxyXG4gICAgICAgIGlmICh0aGlzLnZpZXdlcikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBkaXNwb3Npbmcgdmlld2VyJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnTW9kZWwgcmVzb3VyY2VzIGRpc3Bvc2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIFRocmVlLmpzIGNhbWVyYVxyXG4gICAgICogQHJldHVybnMge1RIUkVFLkNhbWVyYX1cclxuICAgICAqL1xyXG4gICAgZ2V0Q2FtZXJhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdlcj8uY2FtZXJhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGJsZW5kc2hhcGUgd2VpZ2h0cyBmcm9tIGFjdGlvbiBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYWN0aW9uRGF0YSAtIEJsZW5kc2hhcGUgd2VpZ2h0c1xyXG4gICAgICogQHJldHVybnMge29iamVjdH0gUHJvY2Vzc2VkIGluZmx1ZW5jZSB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQlMoYWN0aW9uRGF0YSkge1xyXG4gICAgICAgIC8vIERlZmF1bHQgaW5mbHVlbmNlIHZhbHVlcyAtIGFsbCA1MiBBUktpdCBibGVuZHNoYXBlc1xyXG4gICAgICAgIGxldCBpbmZsdWVuY2UgPSB7XHJcbiAgICAgICAgICAgIGJyb3dEb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBicm93RG93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGJyb3dJbm5lclVwOiAwLjAsXHJcbiAgICAgICAgICAgIGJyb3dPdXRlclVwTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBicm93T3V0ZXJVcFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoQ2hlZWtQdWZmOiAwLjAsXHJcbiAgICAgICAgICAgIGNoZWVrU3F1aW50TGVmdDogMC4wLFxyXG4gICAgICAgICAgICBjaGVla1NxdWludFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUJsaW5rTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVCbGlua1JpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tEb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVMb29rRG93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tJbkxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va0luUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va091dExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va091dFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIGV5ZUxvb2tVcExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgZXllTG9va1VwUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgZXllU3F1aW50TGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVTcXVpbnRSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBleWVXaWRlTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBleWVXaWRlUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgamF3Rm9yd2FyZDogMC4wLFxyXG4gICAgICAgICAgICBqYXdMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIGphd09wZW46IDAuMCxcclxuICAgICAgICAgICAgamF3UmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhDbG9zZTogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aERpbXBsZUxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhEaW1wbGVSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aEZyb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aEZyb3duUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhGdW5uZWw6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoTG93ZXJEb3duTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aExvd2VyRG93blJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUHJlc3NMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUHJlc3NSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFB1Y2tlcjogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUm9sbExvd2VyOiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoUm9sbFVwcGVyOiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU2hydWdMb3dlcjogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFNocnVnVXBwZXI6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTbWlsZUxlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTbWlsZVJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIG1vdXRoU3RyZXRjaExlZnQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhTdHJldGNoUmlnaHQ6IDAuMCxcclxuICAgICAgICAgICAgbW91dGhVcHBlclVwTGVmdDogMC4wLFxyXG4gICAgICAgICAgICBtb3V0aFVwcGVyVXBSaWdodDogMC4wLFxyXG4gICAgICAgICAgICBub3NlU25lZXJMZWZ0OiAwLjAsXHJcbiAgICAgICAgICAgIG5vc2VTbmVlclJpZ2h0OiAwLjAsXHJcbiAgICAgICAgICAgIHRvbmd1ZU91dDogMC4wXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGFjdGlvbkRhdGEgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbmZsdWVuY2UgPSBhY3Rpb25EYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGluZmx1ZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1haW4gcmVuZGVyIGxvb3BcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZpZXdlciAmJiB0aGlzLnZpZXdlci5zZWxmRHJpdmVuTW9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5yZXF1ZXN0RnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLnJlbmRlcigpKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lSW5mb0ludGVybmFsID0gMS4wIC8gMzAuMDtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGRpdmlzaW9uIGJ5IHplcm8gaWYgdG90YWxGcmFtZXMgaXMgMCBvciBub3Qgc2V0XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsRnJhbWVzID0gdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgfHwgMTtcclxuICAgICAgICAgICAgY29uc3QgY2FsY0RlbHRhID0gKGN1cnJlbnRUaW1lIC0gdGhpcy5zdGFydFRpbWUpICUgKHRvdGFsRnJhbWVzICogZnJhbWVJbmZvSW50ZXJuYWwpO1xyXG4gICAgICAgICAgICBjb25zdCBmcmFtZUluZGV4ID0gTWF0aC5mbG9vcihjYWxjRGVsdGEgLyBmcmFtZUluZm9JbnRlcm5hbCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlld2VyLmZyYW1lID0gZnJhbWVJbmRleDtcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjaGF0IHN0YXRlXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldENoYXRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGF0U3RhdGUgPSB0aGlzLmdldENoYXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gREVCVUc6IExvZyBzdGF0ZSB0cmFuc2l0aW9uc1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9sYXN0TG9nZ2VkU3RhdGUgfHwgdGhpcy5fbGFzdExvZ2dlZFN0YXRlICE9PSB0aGlzLmNoYXRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2hhdCBzdGF0ZSBjaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGF0ZTogdGhpcy5jaGF0U3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0FuaW1NYW5hZ2VyOiAhIXRoaXMuYW5pbU1hbmFnZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sYXN0TG9nZ2VkU3RhdGUgPSB0aGlzLmNoYXRTdGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbU1hbmFnZXI/LnVwZGF0ZSh0aGlzLmNoYXRTdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBleHByZXNzaW9uIGRhdGFcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkRhdGEgPSB0aGlzLnVwZGF0ZUJTKHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFuaW1hdGlvbiBtaXhlciB1cGRhdGVcclxuICAgICAgICAgICAgaWYgKCF0aGlzLm1peGVyIHx8ICF0aGlzLmFuaW1NYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3dhcm5lZE9uY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybignTWl4ZXIgb3IgYW5pbU1hbmFnZXIgbm90IGluaXRpYWxpemVkLCBza2lwcGluZyBhbmltYXRpb24gdXBkYXRlJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNNaXhlcjogISF0aGlzLm1peGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNBbmltTWFuYWdlcjogISF0aGlzLmFuaW1NYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2FybmVkT25jZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBTdGlsbCB1cGRhdGUgZXhwcmVzc2lvbnMgZXZlbiB3aXRob3V0IG1peGVyL2FuaW1NYW5hZ2VyXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEV4cHJlc3Npb24oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1peGVyVXBkYXRlRGVsdGEgPSB0aGlzLmNsb2NrLmdldERlbHRhKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1peGVyLnVwZGF0ZShtaXhlclVwZGF0ZURlbHRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBtb3Rpb24gY29uZmlnIG9mZnNldHMvc2NhbGVzXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tb3Rpb25jZmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vcnBoVGFyZ2V0IGluIHRoaXMuZXhwcmVzc2lvbkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5tb3Rpb25jZmcub2Zmc2V0Py5bbW9ycGhUYXJnZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IHRoaXMubW90aW9uY2ZnLnNjYWxlPy5bbW9ycGhUYXJnZXRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ICE9PSB1bmRlZmluZWQgJiYgc2NhbGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHByZXNzaW9uRGF0YVttb3JwaFRhcmdldF0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbkRhdGFbbW9ycGhUYXJnZXRdICogc2NhbGUgKyBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFeHByZXNzaW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2aWV3ZXJcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIudXBkYXRlKHRoaXMudmlld2VyLnJlbmRlcmVyLCB0aGlzLnZpZXdlci5jYW1lcmEpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVuZGVyIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZW5kZXIgPSB0aGlzLnZpZXdlci5zaG91bGRSZW5kZXIoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlbmRlckxvZ0NvdW50IDw9IDMpIHtcclxuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zygnc2hvdWxkUmVuZGVyIGNoZWNrJywgeyBzaG91bGRSZW5kZXIgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNob3VsZFJlbmRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdlci5jb25zZWN1dGl2ZVJlbmRlckZyYW1lcysrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuY29uc2VjdXRpdmVSZW5kZXJGcmFtZXMgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5yZW5kZXJOZXh0RnJhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIuc2VsZkRyaXZlbk1vZGVSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzdGFydCB2aWV3ZXIgdW5sZXNzIGl0IGlzIGluIHNlbGYgZHJpdmVuIG1vZGUuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgaGV4IGNvbG9yIHN0cmluZ1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gQ29sb3Igc3RyaW5nIHRvIHZhbGlkYXRlXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgaXNIZXhDb2xvclN0cmljdCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgaGV4Q29sb3JSZWdleCA9IC9eKCN8MHgpWzAtOUEtRmEtZl17Nn0kL2k7XHJcbiAgICAgICAgcmV0dXJuIGhleENvbG9yUmVnZXgudGVzdCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSBleHByZXNzaW9uIGRhdGEgdG8gbWVzaFxyXG4gICAgICovXHJcbiAgICBzZXRFeHByZXNzaW9uKCkge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBzcGxhdCBtZXNoIGJsZW5kc2hhcGVzXHJcbiAgICAgICAgaWYgKHRoaXMudmlld2VyPy5zcGxhdE1lc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIuc3BsYXRNZXNoLmJzV2VpZ2h0ID0gdGhpcy5leHByZXNzaW9uRGF0YTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBleWUgYmxpbmsgdW5pZm9ybXMgZm9yIHNtb290aCBpcmlzIGZhZGVcclxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLnZpZXdlci5zcGxhdE1lc2gubWF0ZXJpYWw7XHJcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbD8udW5pZm9ybXMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV5ZUJsaW5rTGVmdCA9IHRoaXMuZXhwcmVzc2lvbkRhdGEuZXllQmxpbmtMZWZ0IHx8IDAuMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV5ZUJsaW5rUmlnaHQgPSB0aGlzLmV4cHJlc3Npb25EYXRhLmV5ZUJsaW5rUmlnaHQgfHwgMC4wO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLnVuaWZvcm1zLmV5ZUJsaW5rTGVmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmV5ZUJsaW5rTGVmdC52YWx1ZSA9IGV5ZUJsaW5rTGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC51bmlmb3Jtcy5leWVCbGlua1JpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuZXllQmxpbmtSaWdodC52YWx1ZSA9IGV5ZUJsaW5rUmlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBtb3JwaCB0YXJnZXRzIG9uIGF2YXRhciBtb2RlbFxyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5pc01lc2ggfHwgb2JqZWN0LmlzU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3JwaEF0dHJpYnV0ZXMgPSBvYmplY3QuZ2VvbWV0cnk/Lm1vcnBoQXR0cmlidXRlcztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNNb3JwaFRhcmdldHMgPSBtb3JwaEF0dHJpYnV0ZXMgJiYgT2JqZWN0LmtleXMobW9ycGhBdHRyaWJ1dGVzKS5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNNb3JwaFRhcmdldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9ycGhUYXJnZXREaWN0aW9uYXJ5ID0gb2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb3JwaFRhcmdldCBpbiBtb3JwaFRhcmdldERpY3Rpb25hcnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG1vcnBoVGFyZ2V0RGljdGlvbmFyeVttb3JwaFRhcmdldF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5leHByZXNzaW9uRGF0YVttb3JwaFRhcmdldF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t0YXJnZXRdID0gTWF0aC5tYXgoMC4wLCBNYXRoLm1pbigxLjAsIGRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBtb2RlbCB3aXRoIGFuaW1hdGlvblxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhOYW1lIC0gUGF0aCB3aXRoaW4gWklQXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYW5pbWF0aW9uQ29uZmlnIC0gQW5pbWF0aW9uIGNvbmZpZ3VyYXRpb25cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb3Rpb25Db25maWcgLSBNb3Rpb24gY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBsb2FkTW9kZWwocGF0aE5hbWUsIGFuaW1hdGlvbkNvbmZpZywgbW90aW9uQ29uZmlnKSB7XHJcbiAgICAgICAgY29uc3QgW3NraW5Nb2RlbCwgYW5pY2xpcCwgaW5kZXhlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIHRoaXMudW5wYWNrQW5kTG9hZEdsYihwYXRoTmFtZSArICcvc2tpbi5nbGInKSxcclxuICAgICAgICAgICAgdGhpcy51bnBhY2tBbmRMb2FkR2xiKHBhdGhOYW1lICsgJy9hbmltYXRpb24uZ2xiJyksXHJcbiAgICAgICAgICAgIHRoaXMudW5wYWNrQW5kTG9hZEpzb24ocGF0aE5hbWUgKyAnL3ZlcnRleF9vcmRlci5qc29uJylcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnZpZXdlcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbmRlciB2aWV3ZXIgaXMgbm90IGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2tpbk1vZGVsU2tpbm5lZE1lc2g7XHJcbiAgICAgICAgbGV0IGJvbmVSb290O1xyXG5cclxuICAgICAgICBza2luTW9kZWwudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAob2JqZWN0LmlzU2tpbm5lZE1lc2gpIHtcclxuICAgICAgICAgICAgICAgIHNraW5Nb2RlbFNraW5uZWRNZXNoID0gb2JqZWN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBCb25lICYmIG9iamVjdC5uYW1lID09PSAnaGlwJykge1xyXG4gICAgICAgICAgICAgICAgYm9uZVJvb3QgPSBvYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3ZXIuc29ydGVkSW5kZXhlcyA9IGluZGV4ZXM7XHJcblxyXG4gICAgICAgIGlmIChza2luTW9kZWxTa2lubmVkTWVzaCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci5nYXVzc2lhblNwbGF0Q291bnQgPSBza2luTW9kZWxTa2lubmVkTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmNvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52aWV3ZXIuYXZhdGFyTWVzaCA9IHNraW5Nb2RlbDtcclxuICAgICAgICB0aGlzLnZpZXdlci5za2luTW9kZWwgPSBza2luTW9kZWxTa2lubmVkTWVzaDtcclxuICAgICAgICB0aGlzLnZpZXdlci5ib25lUm9vdCA9IGJvbmVSb290O1xyXG5cclxuICAgICAgICAvLyBTZXR1cCBhbmltYXRpb25cclxuICAgICAgICB0aGlzLm1peGVyID0gbmV3IEFuaW1hdGlvbk1peGVyKHNraW5Nb2RlbCk7XHJcbiAgICAgICAgdGhpcy5hbmltTWFuYWdlciA9IG5ldyBBbmltYXRpb25NYW5hZ2VyKHRoaXMubWl4ZXIsIGFuaWNsaXAsIGFuaW1hdGlvbkNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5tb3Rpb25jZmcgPSBtb3Rpb25Db25maWc7XHJcblxyXG4gICAgICAgIC8vIFNldCB0b3RhbEZyYW1lcyBmcm9tIGFuaW1hdGlvbiBjbGlwcyBvciBkZWZhdWx0IHRvIDFcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhbmljbGlwKSAmJiBhbmljbGlwLmxlbmd0aCA+IDAgJiYgYW5pY2xpcFswXS5kdXJhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci50b3RhbEZyYW1lcyA9IE1hdGguZmxvb3IoYW5pY2xpcFswXS5kdXJhdGlvbiAqIDMwKTsgLy8gMzAgZnBzXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ1RvdGFsIGZyYW1lcyBjYWxjdWxhdGVkJywgeyB0b3RhbEZyYW1lczogdGhpcy52aWV3ZXIudG90YWxGcmFtZXMgfSk7XHJcblxyXG4gICAgICAgIGlmIChza2luTW9kZWxTa2lubmVkTWVzaCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlci51cGRhdGVNb3JwaFRhcmdldChza2luTW9kZWxTa2lubmVkTWVzaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZpZXdlci50aHJlZVNjZW5lLmFkZChza2luTW9kZWwpO1xyXG4gICAgICAgIHNraW5Nb2RlbC52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChza2luTW9kZWxTa2lubmVkTWVzaCkge1xyXG4gICAgICAgICAgICBza2luTW9kZWxTa2lubmVkTWVzaC5za2VsZXRvbi5jb21wdXRlQm9uZVRleHR1cmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhY2sgZmlsZSBmcm9tIFpJUCBhbmQgY3JlYXRlIGEgYmxvYiBVUkxcclxuICAgICAqXHJcbiAgICAgKiBVc2VzIEJsb2JVcmxNYW5hZ2VyIHRvIHRyYWNrIGJsb2IgVVJMcyBmb3IgYXV0b21hdGljIGNsZWFudXAuXHJcbiAgICAgKiBDYWNoZXMgVVJMcyBmb3IgcmVwZWF0ZWQgYWNjZXNzIHRvIHRoZSBzYW1lIGZpbGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHRvIGZpbGUgd2l0aGluIFpJUCBhcmNoaXZlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBCbG9iIFVSTCB0byB0aGUgZmlsZVxyXG4gICAgICogQHRocm93cyB7QXNzZXRMb2FkRXJyb3J9IElmIGZpbGUgY2Fubm90IGJlIHVucGFja2VkXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHVucGFja0ZpbGVBc0Jsb2IocGF0aCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiBjYWNoZWQgVVJMIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICh0aGlzLnppcFVybHMudXJscy5oYXMocGF0aCkpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSZXR1cm5pbmcgY2FjaGVkIGJsb2IgVVJMJywgeyBwYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy56aXBVcmxzLnVybHMuZ2V0KHBhdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdVbnBhY2tpbmcgZmlsZSBmcm9tIFpJUCcsIHsgcGF0aCB9KTtcclxuXHJcbiAgICAgICAgLy8gRXh0cmFjdCBmaWxlIGZyb20gWklQXHJcbiAgICAgICAgY29uc3QgZmlsZUVudHJ5ID0gdGhpcy56aXBVcmxzLnppcD8uZmlsZShwYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGVFbnRyeSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmlsZSBub3QgZm91bmQgaW4gWklQIGFyY2hpdmU6ICR7cGF0aH1gLFxyXG4gICAgICAgICAgICAgICAgcGF0aFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1vZGVsRmlsZTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBtb2RlbEZpbGUgPSBhd2FpdCBmaWxlRW50cnkuYXN5bmMoJ2Jsb2InKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGV4dHJhY3QgZmlsZSBmcm9tIFpJUDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghbW9kZWxGaWxlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBBc3NldExvYWRFcnJvcihcclxuICAgICAgICAgICAgICAgIGBGaWxlIGV4dHJhY3RlZCBidXQgYmxvYiBpcyBlbXB0eTogJHtwYXRofWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYmxvYiBVUkwgdXNpbmcgQmxvYlVybE1hbmFnZXIgZm9yIHRyYWNraW5nXHJcbiAgICAgICAgY29uc3QgbWltZVR5cGUgPSB0aGlzLl9nZXRNaW1lVHlwZShwYXRoKTtcclxuICAgICAgICBjb25zdCBtb2RlbFVybCA9IHRoaXMuX2Jsb2JVcmxNYW5hZ2VyLmNyZWF0ZUJsb2JVcmwoXHJcbiAgICAgICAgICAgIG1vZGVsRmlsZSxcclxuICAgICAgICAgICAgbWltZVR5cGUsXHJcbiAgICAgICAgICAgIGB6aXA6JHtwYXRofWBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBDYWNoZSBmb3IgZnV0dXJlIGFjY2Vzc1xyXG4gICAgICAgIHRoaXMuemlwVXJscy51cmxzLnNldChwYXRoLCBtb2RlbFVybCk7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdCbG9iIFVSTCBjcmVhdGVkIGFuZCBjYWNoZWQnLCB7IHBhdGgsIHVybDogbW9kZWxVcmwuc3Vic3RyaW5nKDAsIDUwKSB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGVsVXJsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZCBKU09OIGZpbGUgZnJvbSBaSVAgYXJjaGl2ZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gUGF0aCB0byBKU09OIGZpbGUgd2l0aGluIFpJUCBhcmNoaXZlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3R8bnVsbD59IFBhcnNlZCBKU09OIG9iamVjdCwgb3IgbnVsbCBpZiBmaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAqIEB0aHJvd3Mge1BhcnNlRXJyb3J9IElmIEpTT04gcGFyc2luZyBmYWlsc1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX2xvYWRKc29uRnJvbVppcChwYXRoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdHRlbXB0aW5nIHRvIGxvYWQgSlNPTiBmcm9tIFpJUCcsIHsgcGF0aCB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgaW4gWklQXHJcbiAgICAgICAgY29uc3QgZmlsZUVudHJ5ID0gdGhpcy56aXBVcmxzLnppcD8uZmlsZShwYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGVFbnRyeSkge1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0pTT04gZmlsZSBub3QgZm91bmQgaW4gWklQLCByZXR1cm5pbmcgbnVsbCcsIHsgcGF0aCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFeHRyYWN0IGZpbGUgYXMgdGV4dFxyXG4gICAgICAgIGxldCBqc29uVGV4dDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBqc29uVGV4dCA9IGF3YWl0IGZpbGVFbnRyeS5hc3luYygndGV4dCcpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZUVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBleHRyYWN0IEpTT04gZmlsZSBmcm9tIFpJUDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBhcnNlIEpTT05cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoanNvblRleHQpO1xyXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0pTT04gZmlsZSBsb2FkZWQgc3VjY2Vzc2Z1bGx5JywgeyBwYXRoIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbkRhdGE7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIHBhcnNlIEpTT04gZmlsZTogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhY2sgR0xCIGZpbGUgZnJvbSBaSVAgYW5kIGxvYWQgaXRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFBhdGggdG8gR0xCIGZpbGUgd2l0aGluIFpJUCBhcmNoaXZlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxUSFJFRS5Hcm91cHxUSFJFRS5BbmltYXRpb25DbGlwW10+fSBMb2FkZWQgR0xURiBtb2RlbFxyXG4gICAgICogQHRocm93cyB7QXNzZXRMb2FkRXJyb3J9IElmIGZpbGUgY2Fubm90IGJlIHVucGFja2VkIG9yIGxvYWRlZFxyXG4gICAgICovXHJcbiAgICBhc3luYyB1bnBhY2tBbmRMb2FkR2xiKHBhdGgpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gY2FjaGVkIFVSTCBpZiBhdmFpbGFibGVcclxuICAgICAgICBpZiAodGhpcy56aXBVcmxzLnVybHMuaGFzKHBhdGgpKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgY2FjaGVkIEdMQiBVUkwnLCB7IHBhdGggfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkxvYWRHTFRGKHRoaXMuemlwVXJscy51cmxzLmdldChwYXRoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ1VucGFja2luZyBHTEIgZnJvbSBaSVAnLCB7IHBhdGggfSk7XHJcblxyXG4gICAgICAgIC8vIEV4dHJhY3QgZmlsZSBmcm9tIFpJUCBhcyBBcnJheUJ1ZmZlclxyXG4gICAgICAgIGNvbnN0IGZpbGVFbnRyeSA9IHRoaXMuemlwVXJscy56aXA/LmZpbGUocGF0aCk7XHJcbiAgICAgICAgaWYgKCFmaWxlRW50cnkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEdMQiBmaWxlIG5vdCBmb3VuZCBpbiBaSVAgYXJjaGl2ZTogJHtwYXRofWAsXHJcbiAgICAgICAgICAgICAgICBwYXRoXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbW9kZWxGaWxlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG1vZGVsRmlsZSA9IGF3YWl0IGZpbGVFbnRyeS5hc3luYygnYXJyYXlidWZmZXInKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXRMb2FkRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGV4dHJhY3QgR0xCIGZyb20gWklQOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFtb2RlbEZpbGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEFzc2V0TG9hZEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEdMQiBleHRyYWN0ZWQgYnV0IEFycmF5QnVmZmVyIGlzIGVtcHR5OiAke3BhdGh9YCxcclxuICAgICAgICAgICAgICAgIHBhdGhcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBibG9iIFVSTCB1c2luZyBCbG9iVXJsTWFuYWdlclxyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbbW9kZWxGaWxlXSwgeyB0eXBlOiAnbW9kZWwvZ2x0Zi1iaW5hcnknIH0pO1xyXG4gICAgICAgIGNvbnN0IG1vZGVsVXJsID0gdGhpcy5fYmxvYlVybE1hbmFnZXIuY3JlYXRlQmxvYlVybChcclxuICAgICAgICAgICAgYmxvYixcclxuICAgICAgICAgICAgJ21vZGVsL2dsdGYtYmluYXJ5JyxcclxuICAgICAgICAgICAgYHppcDoke3BhdGh9YFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIENhY2hlIGZvciBmdXR1cmUgYWNjZXNzXHJcbiAgICAgICAgdGhpcy56aXBVcmxzLnVybHMuc2V0KHBhdGgsIG1vZGVsVXJsKTtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0dMQiBibG9iIFVSTCBjcmVhdGVkIGFuZCBjYWNoZWQnLCB7IHBhdGggfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLkxvYWRHTFRGKG1vZGVsVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBNSU1FIHR5cGUgZnJvbSBmaWxlIGV4dGVuc2lvblxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gRmlsZSBwYXRoXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBNSU1FIHR5cGVcclxuICAgICAqL1xyXG4gICAgX2dldE1pbWVUeXBlKHBhdGgpIHtcclxuICAgICAgICBjb25zdCBleHRlbnNpb24gPSBwYXRoLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgY29uc3QgbWltZVR5cGVzID0ge1xyXG4gICAgICAgICAgICAncGx5JzogJ21vZGVsL3BseScsXHJcbiAgICAgICAgICAgICdnbGInOiAnbW9kZWwvZ2x0Zi1iaW5hcnknLFxyXG4gICAgICAgICAgICAnZ2x0Zic6ICdtb2RlbC9nbHRmK2pzb24nLFxyXG4gICAgICAgICAgICAnanNvbic6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgJ2Jpbic6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLFxyXG4gICAgICAgICAgICAncG5nJzogJ2ltYWdlL3BuZycsXHJcbiAgICAgICAgICAgICdqcGcnOiAnaW1hZ2UvanBlZycsXHJcbiAgICAgICAgICAgICdqcGVnJzogJ2ltYWdlL2pwZWcnXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gbWltZVR5cGVzW2V4dGVuc2lvbl0gfHwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnBhY2sgYW5kIHBhcnNlIEpTT04gZmlsZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHdpdGhpbiBaSVBcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPG9iamVjdD59XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHVucGFja0FuZExvYWRKc29uKHBhdGgpIHtcclxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy56aXBVcmxzLnppcD8uZmlsZShwYXRoKTtcclxuICAgICAgICBpZiAoIWZpbGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlIG5vdCBmb3VuZCBpbiBaSVA6ICR7cGF0aH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QganNvbkZpbGUgPSBhd2FpdCBmaWxlLmFzeW5jKCdzdHJpbmcnKTtcclxuICAgICAgICBpZiAoIWpzb25GaWxlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlYWQgZmlsZSBmcm9tIFpJUDogJHtwYXRofWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uRmlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkIEdMVEYgZmlsZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFVSTCB0byBHTFRGL0dMQiBmaWxlXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxUSFJFRS5Hcm91cHxUSFJFRS5BbmltYXRpb25DbGlwW10+fVxyXG4gICAgICovXHJcbiAgICBhc3luYyBMb2FkR0xURih1cmwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpO1xyXG4gICAgICAgICAgICBsb2FkZXIubG9hZChcclxuICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIChnbHRmKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdsdGYuYW5pbWF0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2x0Zi5hbmltYXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdsdGYuc2NlbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHYXVzc2lhblNwbGF0UmVuZGVyZXI7XHJcbiIsIi8qKlxyXG4gKiBGbGFtZUNvbnN0YW50c1xyXG4gKiBcclxuICogRGVyaXZlZCBmcm9tIGdhdXNzaWFuLXNwbGF0LXJlbmRlcmVyLWZvci1sYW1cclxuICogRkxBTUUtc3BlY2lmaWMgY29uc3RhbnRzIGZvciBwYXJhbWV0cmljIGhlYWQgbW9kZWwuXHJcbiAqIFxyXG4gKiBOb3RlOiBHZW5lcmFsIGVuZ2luZSBjb25zdGFudHMgKE1heFNjZW5lcywgZXRjLikgYXJlIGluIGVudW1zL0VuZ2luZUNvbnN0YW50cy5qc1xyXG4gKi9cclxuXHJcbmV4cG9ydCBjb25zdCBDb25zdGFudHMgPSB7XHJcbiAgICAvLyBGTEFNRSBtb2RlbCBjb25zdGFudHNcclxuICAgIEZsYW1lQm9uZXNDb3VudDogNSwgIC8vIHJvb3QsIG5lY2ssIGphdywgbGVmdEV5ZSwgcmlnaHRFeWVcclxuICAgIERlZmF1bHRCbGVuZHNoYXBlQ291bnQ6IDUyLCAgLy8gQVJLaXQgYmxlbmRzaGFwZXNcclxuICAgIFxyXG4gICAgLy8gVGV4dHVyZSBzaXplcyBmb3IgRkxBTUUgZGF0YVxyXG4gICAgRmxhbWVNb2RlbFRleHR1cmVTaXplOiB7IHdpZHRoOiA0MDk2LCBoZWlnaHQ6IDIwNDggfSxcclxuICAgIEJvbmVUZXh0dXJlU2l6ZTogeyB3aWR0aDogNCwgaGVpZ2h0OiAzMiB9LFxyXG4gICAgQm9uZVdlaWdodFRleHR1cmVTaXplOiB7IHdpZHRoOiA1MTIsIGhlaWdodDogNTEyIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbnN0YW50cztcclxuIiwiLyoqXHJcbiAqIEZMQU1FIFV0aWxpdHkgRnVuY3Rpb25zXHJcbiAqIFxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKiBDb250YWlucyBlbmNvZGluZyBmdW5jdGlvbnMgYW5kIGhlbHBlcnMgZm9yIEdQVSB0ZXh0dXJlIGRhdGEuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEVuY29kZSBmbG9hdCBhcyB1aW50MzIgZm9yIEdQVSB0ZXh0dXJlIHN0b3JhZ2VcclxuICogVXNlcyBGbG9hdDMyQXJyYXkvSW50MzJBcnJheSB2aWV3IHRyaWNrIHRvIHJlaW50ZXJwcmV0IGZsb2F0IGJpdHMgYXMgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHVpbnRFbmNvZGVkRmxvYXQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBmbG9hdFZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KDEpO1xyXG4gICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZmxvYXRWaWV3LmJ1ZmZlcik7XHJcblxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGYpIHtcclxuICAgICAgICBmbG9hdFZpZXdbMF0gPSBmO1xyXG4gICAgICAgIHJldHVybiBpbnQzMlZpZXdbMF07XHJcbiAgICB9O1xyXG59KSgpO1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgUkdCQSB2YWx1ZXMgdG8gYSBzaW5nbGUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJnYmFUb0ludGVnZXIgPSBmdW5jdGlvbihyLCBnLCBiLCBhKSB7XHJcbiAgICByZXR1cm4gciArIChnIDw8IDgpICsgKGIgPDwgMTYpICsgKGEgPDwgMjQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgUkdCQSBhcnJheSBhdCBvZmZzZXQgdG8gYSBzaW5nbGUgaW50ZWdlclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJnYmFBcnJheVRvSW50ZWdlciA9IGZ1bmN0aW9uKGFyciwgb2Zmc2V0KSB7XHJcbiAgICByZXR1cm4gYXJyW29mZnNldF0gKyAoYXJyW29mZnNldCArIDFdIDw8IDgpICsgKGFycltvZmZzZXQgKyAyXSA8PCAxNikgKyAoYXJyW29mZnNldCArIDNdIDw8IDI0KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDb25zdGFudHMgZm9yIHRleHR1cmUgZGF0YSBsYXlvdXRcclxuICovXHJcbmV4cG9ydCBjb25zdCBUZXh0dXJlQ29uc3RhbnRzID0ge1xyXG4gICAgQ0VOVEVSX0NPTE9SU19FTEVNRU5UU19QRVJfVEVYRUw6IDQsXHJcbiAgICBDRU5URVJfQ09MT1JTX0VMRU1FTlRTX1BFUl9TUExBVDogNCxcclxuICAgIENPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9TVE9SRUQ6IDIsXHJcbiAgICBDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQUxMT0NBVEVEOiA0LFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfU1RPUkVEOiAyLFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX0NPTVBSRVNTRURfQUxMT0NBVEVEOiA0LFxyXG4gICAgQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1NQTEFUOiA2LFxyXG4gICAgU0NBTEVTX1JPVEFUSU9OU19FTEVNRU5UU19QRVJfVEVYRUw6IDQsXHJcbiAgICBTQ0VORV9JTkRFWEVTX0VMRU1FTlRTX1BFUl9URVhFTDogMSxcclxuICAgIE1BWF9URVhUVVJFX1RFWEVMUzogNDA5NiAqIDQwOTZcclxufTtcclxuIiwiLyoqXHJcbiAqIEZsYW1lVGV4dHVyZU1hbmFnZXJcclxuICogXHJcbiAqIERlcml2ZWQgZnJvbSBnYXVzc2lhbi1zcGxhdC1yZW5kZXJlci1mb3ItbGFtXHJcbiAqIFxyXG4gKiBNYW5hZ2VzIEdQVSB0ZXh0dXJlcyBmb3IgRkxBTUUgcGFyYW1ldHJpYyBoZWFkIG1vZGVsOlxyXG4gKiAtIEJsZW5kc2hhcGUgbW9ycGggdGFyZ2V0IGRhdGEgdGV4dHVyZXNcclxuICogLSBCb25lIG1hdHJpeCB0ZXh0dXJlcyBmb3Igc2tlbGV0b24gYW5pbWF0aW9uXHJcbiAqIC0gTEJTIHdlaWdodCB0ZXh0dXJlcyBmb3Igc2tpbm5pbmdcclxuICovXHJcblxyXG5pbXBvcnQge1xyXG4gICAgVmVjdG9yMixcclxuICAgIERhdGFUZXh0dXJlLFxyXG4gICAgUkdCQUludGVnZXJGb3JtYXQsXHJcbiAgICBVbnNpZ25lZEludFR5cGVcclxufSBmcm9tICd0aHJlZSc7XHJcblxyXG5pbXBvcnQgeyB1aW50RW5jb2RlZEZsb2F0IH0gZnJvbSAnLi91dGlscy5qcyc7XHJcblxyXG4vKipcclxuICogQnVpbGQgdGhlIEZMQU1FIG1vZGVsIHRleHR1cmUgY29udGFpbmluZyBibGVuZHNoYXBlIHBvc2l0aW9uc1xyXG4gKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBmbGFtZU1vZGVsIC0gVGhlIEZMQU1FIG1lc2ggd2l0aCBtb3JwaCB0YXJnZXRzXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9IG1hdGVyaWFsIC0gVGhlIHNwbGF0IG1hdGVyaWFsIHRvIHVwZGF0ZSB1bmlmb3Jtc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gZ2F1c3NpYW5TcGxhdENvdW50IC0gTnVtYmVyIG9mIGdhdXNzaWFuIHNwbGF0c1xyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUZXh0dXJlIGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRNb2RlbFRleHR1cmUoZmxhbWVNb2RlbCwgbWF0ZXJpYWwsIGdhdXNzaWFuU3BsYXRDb3VudCkge1xyXG4gICAgY29uc3QgZmxhbWVNb2RlbFRleFNpemUgPSBuZXcgVmVjdG9yMig0MDk2LCAyMDQ4KTtcclxuXHJcbiAgICBjb25zdCBzaGFwZWRNZXNoID0gZmxhbWVNb2RlbC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5O1xyXG4gICAgbGV0IHNoYXBlZE1lc2hBcnJheSA9IFtdO1xyXG4gICAgY29uc3QgcG9pbnROdW0gPSBzaGFwZWRNZXNoLmxlbmd0aCAvIDM7XHJcbiAgICBjb25zdCBic0xlbmd0aCA9IGZsYW1lTW9kZWwuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLmxlbmd0aDtcclxuXHJcbiAgICAvLyBTb3J0IG1vcnBoIHRhcmdldHMgYnkgZGljdGlvbmFyeSBvcmRlclxyXG4gICAgY29uc3QgbW9ycGhUYXJnZXROYW1lcyA9IE9iamVjdC5rZXlzKGZsYW1lTW9kZWwubW9ycGhUYXJnZXREaWN0aW9uYXJ5KTtcclxuICAgIG1vcnBoVGFyZ2V0TmFtZXMuZm9yRWFjaCgobmFtZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSW5kZXggPSBmbGFtZU1vZGVsLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtuYW1lXTtcclxuICAgICAgICBjb25zdCBic01lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbltvcmlnaW5hbEluZGV4XTtcclxuICAgICAgICBzaGFwZWRNZXNoQXJyYXkgPSBzaGFwZWRNZXNoQXJyYXkuY29uY2F0KEFycmF5LmZyb20oYnNNZXNoLmFycmF5KSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQWRkIGJhc2UgbWVzaCBwb3NpdGlvbnNcclxuICAgIHNoYXBlZE1lc2hBcnJheSA9IHNoYXBlZE1lc2hBcnJheS5jb25jYXQoQXJyYXkuZnJvbShzaGFwZWRNZXNoKSk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRleHR1cmUgZGF0YVxyXG4gICAgY29uc3QgZmxhbWVNb2RlbERhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGZsYW1lTW9kZWxUZXhTaXplLnggKiBmbGFtZU1vZGVsVGV4U2l6ZS55ICogNCk7XHJcbiAgICBjb25zdCBmbGFtZU1vZGVsRGF0YUludCA9IG5ldyBVaW50MzJBcnJheShmbGFtZU1vZGVsVGV4U2l6ZS54ICogZmxhbWVNb2RlbFRleFNpemUueSAqIDQpO1xyXG4gICAgXHJcbiAgICBmb3IgKGxldCBjID0gMDsgYyA8IHBvaW50TnVtICogKGJzTGVuZ3RoICsgMSk7IGMrKykge1xyXG4gICAgICAgIGZsYW1lTW9kZWxEYXRhW2MgKiA0ICsgMF0gPSBzaGFwZWRNZXNoQXJyYXlbYyAqIDMgKyAwXTtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YVtjICogNCArIDFdID0gc2hhcGVkTWVzaEFycmF5W2MgKiAzICsgMV07XHJcbiAgICAgICAgZmxhbWVNb2RlbERhdGFbYyAqIDQgKyAyXSA9IHNoYXBlZE1lc2hBcnJheVtjICogMyArIDJdO1xyXG5cclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDBdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDBdKTtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDFdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDFdKTtcclxuICAgICAgICBmbGFtZU1vZGVsRGF0YUludFtjICogNCArIDJdID0gdWludEVuY29kZWRGbG9hdChmbGFtZU1vZGVsRGF0YVtjICogNCArIDJdKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmbGFtZU1vZGVsVGV4ID0gbmV3IERhdGFUZXh0dXJlKFxyXG4gICAgICAgIGZsYW1lTW9kZWxEYXRhSW50LFxyXG4gICAgICAgIGZsYW1lTW9kZWxUZXhTaXplLngsXHJcbiAgICAgICAgZmxhbWVNb2RlbFRleFNpemUueSxcclxuICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCxcclxuICAgICAgICBVbnNpZ25lZEludFR5cGVcclxuICAgICk7XHJcbiAgICBmbGFtZU1vZGVsVGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgIGZsYW1lTW9kZWxUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIC8vIFVwZGF0ZSBtYXRlcmlhbCB1bmlmb3Jtc1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuZmxhbWVNb2RlbFRleHR1cmUudmFsdWUgPSBmbGFtZU1vZGVsVGV4O1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuZmxhbWVNb2RlbFRleHR1cmVTaXplLnZhbHVlLmNvcHkoZmxhbWVNb2RlbFRleFNpemUpO1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuZ2F1c3NpYW5TcGxhdENvdW50LnZhbHVlID0gZ2F1c3NpYW5TcGxhdENvdW50O1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IGZsYW1lTW9kZWxEYXRhSW50LFxyXG4gICAgICAgIHRleHR1cmU6IGZsYW1lTW9kZWxUZXgsXHJcbiAgICAgICAgc2l6ZTogZmxhbWVNb2RlbFRleFNpemUsXHJcbiAgICAgICAgYmFzZURhdGE6IHsgZmxhbWVNb2RlbFBvczogZmxhbWVNb2RlbERhdGEgfVxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIGJvbmUgbWF0cml4IHRleHR1cmUgZm9yIHNrZWxldG9uIGFuaW1hdGlvblxyXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gYm9uZXNNYXRyaXggLSBGbGF0dGVuZWQgYm9uZSBtYXRyaWNlc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYm9uZXNOdW0gLSBOdW1iZXIgb2YgYm9uZXNcclxuICogQHBhcmFtIHtvYmplY3R9IGJzV2VpZ2h0IC0gQmxlbmRzaGFwZSB3ZWlnaHRzIG9iamVjdFxyXG4gKiBAcGFyYW0ge29iamVjdH0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5IC0gTWFwcyBibGVuZHNoYXBlIG5hbWVzIHRvIGluZGljZXNcclxuICogQHBhcmFtIHtUSFJFRS5Ta2lubmVkTWVzaH0gZmxhbWVNb2RlbCAtIFRoZSBGTEFNRSBtZXNoXHJcbiAqIEBwYXJhbSB7VEhSRUUuU2hhZGVyTWF0ZXJpYWx9IG1hdGVyaWFsIC0gVGhlIHNwbGF0IG1hdGVyaWFsXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlRmxhbWVNb2RlbCAtIFVzZSBGTEFNRSBtb2RlXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IFRleHR1cmUgZGF0YSBvYmplY3RcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEJvbmVNYXRyaXhUZXh0dXJlKFxyXG4gICAgYm9uZXNNYXRyaXgsXHJcbiAgICBib25lc051bSxcclxuICAgIGJzV2VpZ2h0LFxyXG4gICAgbW9ycGhUYXJnZXREaWN0aW9uYXJ5LFxyXG4gICAgZmxhbWVNb2RlbCxcclxuICAgIG1hdGVyaWFsLFxyXG4gICAgdXNlRmxhbWVNb2RlbFxyXG4pIHtcclxuICAgIGlmICghYnNXZWlnaHQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIGJvbmVzTnVtICsgZXhwcmVzc2lvbkJTTnVtIC8gNCA9IDMwLCBzbyB0ZXh0dXJlIGhlaWdodCBpcyAzMlxyXG4gICAgY29uc3QgYm9uZVRleHR1cmVTaXplID0gbmV3IFZlY3RvcjIoNCwgMzIpO1xyXG4gICAgY29uc3QgYm9uZU1hdHJpeFRleHR1cmVEYXRhID0gbmV3IEZsb2F0MzJBcnJheShib25lc01hdHJpeCk7XHJcbiAgICBjb25zdCBib25lTWF0cml4VGV4dHVyZURhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoYm9uZVRleHR1cmVTaXplLnggKiBib25lVGV4dHVyZVNpemUueSAqIDQpO1xyXG5cclxuICAgIGlmICh1c2VGbGFtZU1vZGVsKSB7XHJcbiAgICAgICAgLy8gRW5jb2RlIGJvbmUgbWF0cmljZXNcclxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGJvbmVzTnVtICogMTY7IGMrKykge1xyXG4gICAgICAgICAgICBib25lTWF0cml4VGV4dHVyZURhdGFJbnRbY10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVNYXRyaXhUZXh0dXJlRGF0YVtjXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNldCBza2VsZXRvbiB1bmlmb3Jtc1xyXG4gICAgICAgIGlmIChmbGFtZU1vZGVsICYmIGZsYW1lTW9kZWwuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUwLnZhbHVlID0gZmxhbWVNb2RlbC5za2VsZXRvbi5ib25lVGV4dHVyZTtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeC52YWx1ZSA9IGZsYW1lTW9kZWwuYmluZE1hdHJpeDtcclxuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeEludmVyc2UudmFsdWUgPSBmbGFtZU1vZGVsLmJpbmRNYXRyaXhJbnZlcnNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBFbmNvZGUgYmxlbmRzaGFwZSB3ZWlnaHRzXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBic1dlaWdodCkge1xyXG4gICAgICAgIGlmIChPYmplY3QuaGFzT3duKGJzV2VpZ2h0LCBrZXkpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYnNXZWlnaHRba2V5XTtcclxuICAgICAgICAgICAgY29uc3QgaWR4ID0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5W2tleV07XHJcbiAgICAgICAgICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludFtpZHggKyBib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib25lTWF0cml4VGV4ID0gbmV3IERhdGFUZXh0dXJlKFxyXG4gICAgICAgIGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCxcclxuICAgICAgICBib25lVGV4dHVyZVNpemUueCxcclxuICAgICAgICBib25lVGV4dHVyZVNpemUueSxcclxuICAgICAgICBSR0JBSW50ZWdlckZvcm1hdCxcclxuICAgICAgICBVbnNpZ25lZEludFR5cGVcclxuICAgICk7XHJcbiAgICBib25lTWF0cml4VGV4LmludGVybmFsRm9ybWF0ID0gJ1JHQkEzMlVJJztcclxuICAgIGJvbmVNYXRyaXhUZXgubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlLnZhbHVlID0gYm9uZU1hdHJpeFRleDtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlU2l6ZS52YWx1ZS5jb3B5KGJvbmVUZXh0dXJlU2l6ZSk7XHJcbiAgICBtYXRlcmlhbC51bmlmb3Jtc05lZWRVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YTogYm9uZU1hdHJpeFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgIHRleHR1cmU6IGJvbmVNYXRyaXhUZXgsXHJcbiAgICAgICAgc2l6ZTogYm9uZVRleHR1cmVTaXplLFxyXG4gICAgICAgIGJhc2VEYXRhOiB7IGJvbmVNYXRyaXg6IGJvbmVNYXRyaXhUZXh0dXJlRGF0YUludCB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIGJvbmUgbWF0cml4IHRleHR1cmUgd2l0aCBuZXcgYW5pbWF0aW9uIGRhdGFcclxuICogQHBhcmFtIHtvYmplY3R9IHNwbGF0RGF0YVRleHR1cmVzIC0gVGV4dHVyZSBkYXRhIHN0b3JhZ2VcclxuICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IGJvbmVzTWF0cml4IC0gVXBkYXRlZCBib25lIG1hdHJpY2VzXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBib25lc051bSAtIE51bWJlciBvZiBib25lc1xyXG4gKiBAcGFyYW0ge29iamVjdH0gYnNXZWlnaHQgLSBVcGRhdGVkIGJsZW5kc2hhcGUgd2VpZ2h0c1xyXG4gKiBAcGFyYW0ge29iamVjdH0gbW9ycGhUYXJnZXREaWN0aW9uYXJ5IC0gQmxlbmRzaGFwZSBuYW1lIHRvIGluZGV4IG1hcFxyXG4gKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBmbGFtZU1vZGVsIC0gVGhlIEZMQU1FIG1lc2hcclxuICogQHBhcmFtIHtUSFJFRS5TaGFkZXJNYXRlcmlhbH0gbWF0ZXJpYWwgLSBUaGUgc3BsYXQgbWF0ZXJpYWxcclxuICogQHBhcmFtIHtib29sZWFufSB1cGRhdGVGbGFtZUJvbmVNYXRyaXggLSBXaGV0aGVyIHRvIHVwZGF0ZSBib25lIG1hdHJpY2VzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQm9uZU1hdHJpeFRleHR1cmUoXHJcbiAgICBzcGxhdERhdGFUZXh0dXJlcyxcclxuICAgIGJvbmVzTWF0cml4LFxyXG4gICAgYm9uZXNOdW0sXHJcbiAgICBic1dlaWdodCxcclxuICAgIG1vcnBoVGFyZ2V0RGljdGlvbmFyeSxcclxuICAgIGZsYW1lTW9kZWwsXHJcbiAgICBtYXRlcmlhbCxcclxuICAgIHVwZGF0ZUZsYW1lQm9uZU1hdHJpeCA9IGZhbHNlXHJcbikge1xyXG4gICAgaWYgKCFic1dlaWdodCB8fCAhbW9ycGhUYXJnZXREaWN0aW9uYXJ5KSByZXR1cm47XHJcblxyXG4gICAgaWYgKHVwZGF0ZUZsYW1lQm9uZU1hdHJpeCkge1xyXG4gICAgICAgIGNvbnN0IGJvbmVNYXRyaXhUZXh0dXJlRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYm9uZXNNYXRyaXgpO1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYm9uZXNOdW0gKiAxNjsgYysrKSB7XHJcbiAgICAgICAgICAgIHNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J11bY10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVNYXRyaXhUZXh0dXJlRGF0YVtjXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSBibGVuZHNoYXBlIHdlaWdodHNcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGJzV2VpZ2h0KSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oYnNXZWlnaHQsIGtleSkpIHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBic1dlaWdodFtrZXldO1xyXG4gICAgICAgICAgICBjb25zdCBpZHggPSBtb3JwaFRhcmdldERpY3Rpb25hcnlba2V5XTtcclxuICAgICAgICAgICAgc3BsYXREYXRhVGV4dHVyZXMuYmFzZURhdGFbJ2JvbmVNYXRyaXgnXVtpZHggKyBib25lc051bSAqIDE2XSA9IHVpbnRFbmNvZGVkRmxvYXQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgdGV4dHVyZSBkYXRhXHJcbiAgICBzcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ10uZGF0YSA9IHNwbGF0RGF0YVRleHR1cmVzLmJhc2VEYXRhWydib25lTWF0cml4J107XHJcbiAgICBzcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ10ubmVlZHNVcGRhdGUgPSB0cnVlO1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVRleHR1cmUudmFsdWUgPSBzcGxhdERhdGFUZXh0dXJlc1snYm9uZU1hdHJpeCddWyd0ZXh0dXJlJ107XHJcblxyXG4gICAgLy8gVXBkYXRlIHNrZWxldG9uIHVuaWZvcm1zXHJcbiAgICBpZiAoZmxhbWVNb2RlbC5za2VsZXRvbikge1xyXG4gICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zLmJvbmVUZXh0dXJlMC52YWx1ZSA9IGZsYW1lTW9kZWwuc2tlbGV0b24uYm9uZVRleHR1cmU7XHJcbiAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXMuYmluZE1hdHJpeC52YWx1ZSA9IGZsYW1lTW9kZWwuYmluZE1hdHJpeDtcclxuICAgICAgICBtYXRlcmlhbC51bmlmb3Jtcy5iaW5kTWF0cml4SW52ZXJzZS52YWx1ZSA9IGZsYW1lTW9kZWwuYmluZE1hdHJpeEludmVyc2U7XHJcbiAgICB9XHJcblxyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXNOZWVkVXBkYXRlID0gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1aWxkIExCUyB3ZWlnaHQgdGV4dHVyZSBmb3Igc2tpbiBkZWZvcm1hdGlvblxyXG4gKiBAcGFyYW0ge1RIUkVFLlNraW5uZWRNZXNofSBmbGFtZU1vZGVsIC0gVGhlIEZMQU1FIG1lc2hcclxuICogQHBhcmFtIHtBcnJheX0gYm9uZXNXZWlnaHQgLSBQZXItdmVydGV4IGJvbmUgd2VpZ2h0cyBhcnJheVxyXG4gKiBAcGFyYW0ge1RIUkVFLlNoYWRlck1hdGVyaWFsfSBtYXRlcmlhbCAtIFRoZSBzcGxhdCBtYXRlcmlhbFxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUZXh0dXJlIGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRCb25lV2VpZ2h0VGV4dHVyZShmbGFtZU1vZGVsLCBib25lc1dlaWdodCwgbWF0ZXJpYWwpIHtcclxuICAgIGNvbnN0IHNoYXBlZE1lc2ggPSBmbGFtZU1vZGVsLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7XHJcbiAgICBjb25zdCBwb2ludE51bSA9IHNoYXBlZE1lc2gubGVuZ3RoIC8gMztcclxuICAgIFxyXG4gICAgY29uc3QgYm9uZVdlaWdodFRleHR1cmVTaXplID0gbmV3IFZlY3RvcjIoNTEyLCA1MTIpO1xyXG4gICAgY29uc3QgYm9uZVdlaWdodFRleHR1cmVEYXRhID0gbmV3IEZsb2F0MzJBcnJheShib25lV2VpZ2h0VGV4dHVyZVNpemUueCAqIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55ICogNCk7XHJcbiAgICBjb25zdCBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQgPSBuZXcgVWludDMyQXJyYXkoYm9uZVdlaWdodFRleHR1cmVTaXplLnggKiBib25lV2VpZ2h0VGV4dHVyZVNpemUueSAqIDQpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnROdW07IGkrKykge1xyXG4gICAgICAgIC8vIFN0b3JlIDUgYm9uZSB3ZWlnaHRzIHBlciB2ZXJ0ZXggKDIgdGV4ZWxzKVxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDBdID0gYm9uZXNXZWlnaHRbaV1bMF07XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgMV0gPSBib25lc1dlaWdodFtpXVsxXTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFbaSAqIDggKyAyXSA9IGJvbmVzV2VpZ2h0W2ldWzJdO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YVtpICogOCArIDNdID0gYm9uZXNXZWlnaHRbaV1bM107XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhW2kgKiA4ICsgNF0gPSBib25lc1dlaWdodFtpXVs0XTtcclxuXHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgMF0gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVzV2VpZ2h0W2ldWzBdKTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyAxXSA9IHVpbnRFbmNvZGVkRmxvYXQoYm9uZXNXZWlnaHRbaV1bMV0pO1xyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlRGF0YUludFtpICogOCArIDJdID0gdWludEVuY29kZWRGbG9hdChib25lc1dlaWdodFtpXVsyXSk7XHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50W2kgKiA4ICsgM10gPSB1aW50RW5jb2RlZEZsb2F0KGJvbmVzV2VpZ2h0W2ldWzNdKTtcclxuICAgICAgICBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnRbaSAqIDggKyA0XSA9IHVpbnRFbmNvZGVkRmxvYXQoYm9uZXNXZWlnaHRbaV1bNF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvbmVXZWlnaHRUZXggPSBuZXcgRGF0YVRleHR1cmUoXHJcbiAgICAgICAgYm9uZVdlaWdodFRleHR1cmVEYXRhSW50LFxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS54LFxyXG4gICAgICAgIGJvbmVXZWlnaHRUZXh0dXJlU2l6ZS55LFxyXG4gICAgICAgIFJHQkFJbnRlZ2VyRm9ybWF0LFxyXG4gICAgICAgIFVuc2lnbmVkSW50VHlwZVxyXG4gICAgKTtcclxuICAgIGJvbmVXZWlnaHRUZXguaW50ZXJuYWxGb3JtYXQgPSAnUkdCQTMyVUknO1xyXG4gICAgYm9uZVdlaWdodFRleC5uZWVkc1VwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVdlaWdodFRleHR1cmUudmFsdWUgPSBib25lV2VpZ2h0VGV4O1xyXG4gICAgbWF0ZXJpYWwudW5pZm9ybXMuYm9uZVdlaWdodFRleHR1cmVTaXplLnZhbHVlLmNvcHkoYm9uZVdlaWdodFRleHR1cmVTaXplKTtcclxuICAgIG1hdGVyaWFsLnVuaWZvcm1zTmVlZFVwZGF0ZSA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiBib25lV2VpZ2h0VGV4dHVyZURhdGFJbnQsXHJcbiAgICAgICAgdGV4dHVyZTogYm9uZVdlaWdodFRleCxcclxuICAgICAgICBzaXplOiBib25lV2VpZ2h0VGV4dHVyZVNpemUsXHJcbiAgICAgICAgYmFzZURhdGE6IHsgYm9uZVdlaWdodDogYm9uZVdlaWdodFRleHR1cmVEYXRhSW50IH1cclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdXBkYXRlZCBib25lIG1hdHJpY2VzIGZyb20gc2tlbGV0b25cclxuICogQHBhcmFtIHtUSFJFRS5Ta2VsZXRvbn0gc2tlbGV0b24gLSBUaGUgc2tlbGV0b24gdG8gcmVhZCBtYXRyaWNlcyBmcm9tXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBib25lTnVtIC0gTnVtYmVyIG9mIGJvbmVzXHJcbiAqIEByZXR1cm5zIHtGbG9hdDMyQXJyYXl9IEZsYXR0ZW5lZCBib25lIG1hdHJpY2VzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXBkYXRlZEJvbmVNYXRyaWNlcyhza2VsZXRvbiwgYm9uZU51bSkge1xyXG4gICAgY29uc3QgdXBkYXRlZEJvbmVNYXRyaWNlcyA9IFtdO1xyXG4gICAgXHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJvbmVOdW07IGorKykge1xyXG4gICAgICAgIGNvbnN0IGJvbmVNYXRyaXggPSBza2VsZXRvbi5ib25lc1tqXS5tYXRyaXhXb3JsZC5jbG9uZSgpXHJcbiAgICAgICAgICAgIC5tdWx0aXBseShza2VsZXRvbi5ib25lSW52ZXJzZXNbal0uY2xvbmUoKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gYm9uZU1hdHJpeC5lbGVtZW50cztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZWRCb25lTWF0cmljZXMucHVzaChlbGVtZW50c1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh1cGRhdGVkQm9uZU1hdHJpY2VzKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEZsYW1lVGV4dHVyZU1hbmFnZXIgPSB7XHJcbiAgICBidWlsZE1vZGVsVGV4dHVyZSxcclxuICAgIGJ1aWxkQm9uZU1hdHJpeFRleHR1cmUsXHJcbiAgICB1cGRhdGVCb25lTWF0cml4VGV4dHVyZSxcclxuICAgIGJ1aWxkQm9uZVdlaWdodFRleHR1cmUsXHJcbiAgICBnZXRVcGRhdGVkQm9uZU1hdHJpY2VzXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGbGFtZVRleHR1cmVNYW5hZ2VyO1xyXG4iLCIvKipcclxuICogRmxhbWVBbmltYXRvciAtIEZMQU1FIFBhcmFtZXRyaWMgSGVhZCBNb2RlbCBBbmltYXRpb24gQ29udHJvbGxlclxyXG4gKlxyXG4gKiBEZXJpdmVkIGZyb20gZ2F1c3NpYW4tc3BsYXQtcmVuZGVyZXItZm9yLWxhbVxyXG4gKlxyXG4gKiBNYW5hZ2VzIEZMQU1FIChGYWNlcyBMZWFybmVkIHdpdGggYW4gQXJ0aWN1bGF0ZWQgTW9kZWwgYW5kIEV4cHJlc3Npb25zKSBtb2RlbCBhbmltYXRpb246XHJcbiAqIC0gU2tlbGV0YWwgYm9uZSByb3RhdGlvbiBmcm9tIEZMQU1FIHBhcmFtZXRlcnNcclxuICogLSBCbGVuZHNoYXBlIHdlaWdodCB1cGRhdGVzIGZvciBmYWNpYWwgZXhwcmVzc2lvbnNcclxuICogLSBTa2VsZXRvbi1tZXNoIHN5bmNocm9uaXphdGlvbiBmb3IgZ2F1c3NpYW4gc3BsYXQgcmVuZGVyaW5nXHJcbiAqIC0gTGluZWFyIGJsZW5kIHNraW5uaW5nIChMQlMpIHdpdGggYm9uZSB3ZWlnaHRzXHJcbiAqXHJcbiAqIEZMQU1FIHVzZXMgNSBib25lczogcm9vdCwgbmVjaywgamF3LCBsZWZ0IGV5ZSwgcmlnaHQgZXllXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIE1hdHJpeDQsXHJcbiAgICBCb25lLFxyXG4gICAgU2tlbGV0b25cclxufSBmcm9tICd0aHJlZSc7XHJcblxyXG5pbXBvcnQgeyBGbGFtZVRleHR1cmVNYW5hZ2VyIH0gZnJvbSAnLi9GbGFtZVRleHR1cmVNYW5hZ2VyLmpzJztcclxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvTG9nZ2VyLmpzJztcclxuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yLCBSZXNvdXJjZURpc3Bvc2VkRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvaW5kZXguanMnO1xyXG5pbXBvcnQgeyB2YWxpZGF0ZVJlcXVpcmVkUHJvcGVydGllcyB9IGZyb20gJy4uL3V0aWxzL1ZhbGlkYXRpb25VdGlscy5qcyc7XHJcbmltcG9ydCB7IHZlY3RvcjNQb29sLCBxdWF0ZXJuaW9uUG9vbCB9IGZyb20gJy4uL3V0aWxzL09iamVjdFBvb2wuanMnO1xyXG5cclxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdGbGFtZUFuaW1hdG9yJyk7XHJcblxyXG4vKipcclxuICogRmxhbWVBbmltYXRvciAtIE1hbmFnZXMgRkxBTUUgcGFyYW1ldHJpYyBoZWFkIG1vZGVsIGFuaW1hdGlvblxyXG4gKlxyXG4gKiBQcm92aWRlcyBza2VsZXRhbCBhbmltYXRpb24sIGJsZW5kc2hhcGUgbW9ycGhpbmcsIGFuZCBtZXNoIGRlZm9ybWF0aW9uXHJcbiAqIGZvciBGTEFNRS1iYXNlZCBhdmF0YXIgaGVhZHMgd2l0aCBnYXVzc2lhbiBzcGxhdHRpbmcgcmVuZGVyaW5nLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZsYW1lQW5pbWF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBGbGFtZUFuaW1hdG9yIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7VEhSRUUuU2tlbGV0b258bnVsbH0gRkxBTUUgc2tlbGV0b24gd2l0aCA1IGJvbmVzICovXHJcbiAgICAgICAgdGhpcy5za2VsZXRvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7VEhSRUUuQm9uZVtdfG51bGx9IEFycmF5IG9mIHNrZWxldG9uIGJvbmVzICovXHJcbiAgICAgICAgdGhpcy5ib25lcyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fG51bGx9IEZMQU1FIGFuaW1hdGlvbiBwYXJhbWV0ZXJzIChyb3RhdGlvbiwgZXhwciwgbmVja19wb3NlLCBqYXdfcG9zZSwgZXllc19wb3NlKSAqL1xyXG4gICAgICAgIHRoaXMuZmxhbWVQYXJhbXMgPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge0FycmF5fG51bGx9IExpbmVhciBibGVuZCBza2lubmluZyB3ZWlnaHRzICovXHJcbiAgICAgICAgdGhpcy5sYnNXZWlnaHQgPSBudWxsO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gQ3VycmVudCBhbmltYXRpb24gZnJhbWUgKi9cclxuICAgICAgICB0aGlzLmZyYW1lID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9IFRvdGFsIGZyYW1lcyBpbiBhbmltYXRpb24gc2VxdWVuY2UgKi9cclxuICAgICAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtib29sZWFufSBXaGV0aGVyIEZMQU1FIG1vZGUgaXMgZW5hYmxlZCAqL1xyXG4gICAgICAgIHRoaXMudXNlRmxhbWUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge1RIUkVFLlNraW5uZWRNZXNofG51bGx9IFRoZSBGTEFNRSBhdmF0YXIgbWVzaCAqL1xyXG4gICAgICAgIHRoaXMuYXZhdGFyTWVzaCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSBOdW1iZXIgb2YgZ2F1c3NpYW4gc3BsYXRzIGluIHRoZSBtZXNoICovXHJcbiAgICAgICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSAwO1xyXG5cclxuICAgICAgICAvKiogQHR5cGUge2Jvb2xlYW59IFdoZXRoZXIgYW5pbWF0b3IgaGFzIGJlZW4gZGlzcG9zZWQgKi9cclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBsb2dnZXIuZGVidWcoJ0ZsYW1lQW5pbWF0b3IgaW5zdGFuY2UgY3JlYXRlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXNzZXJ0IGFuaW1hdG9yIGlzIG5vdCBkaXNwb3NlZFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0aHJvd3Mge1Jlc291cmNlRGlzcG9zZWRFcnJvcn0gSWYgYW5pbWF0b3IgaGFzIGJlZW4gZGlzcG9zZWRcclxuICAgICAqL1xyXG4gICAgX2Fzc2VydE5vdERpc3Bvc2VkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVzb3VyY2VEaXNwb3NlZEVycm9yKCdGbGFtZUFuaW1hdG9yIGhhcyBiZWVuIGRpc3Bvc2VkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbmltYXRvciB3aXRoIEZMQU1FIHBhcmFtZXRlcnMgYW5kIHNrZWxldG9uIGRhdGFcclxuICAgICAqXHJcbiAgICAgKiBTZXRzIHVwIHRoZSBGTEFNRSBhbmltYXRpb24gc3lzdGVtIHdpdGggcGFyYW1ldGVycyBmb3IgYm9uZSByb3RhdGlvbnMsXHJcbiAgICAgKiBleHByZXNzaW9ucywgYW5kIGxpbmVhciBibGVuZCBza2lubmluZyB3ZWlnaHRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmbGFtZVBhcmFtcyAtIEZMQU1FIGFuaW1hdGlvbiBwYXJhbWV0ZXJzXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmbGFtZVBhcmFtcy5yb3RhdGlvbiAtIFJvb3QgYm9uZSByb3RhdGlvbnMgcGVyIGZyYW1lIChheGlzLWFuZ2xlKVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMuZXhwciAtIEV4cHJlc3Npb24gYmxlbmRzaGFwZSB3ZWlnaHRzIHBlciBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMubmVja19wb3NlIC0gTmVjayBib25lIHJvdGF0aW9ucyBwZXIgZnJhbWVcclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZsYW1lUGFyYW1zLmphd19wb3NlIC0gSmF3IGJvbmUgcm90YXRpb25zIHBlciBmcmFtZVxyXG4gICAgICogQHBhcmFtIHtBcnJheX0gZmxhbWVQYXJhbXMuZXllc19wb3NlIC0gRXllIGJvbmUgcm90YXRpb25zIHBlciBmcmFtZSAoNiB2YWx1ZXM6IGxlZnQgMywgcmlnaHQgMylcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBib25lVHJlZSAtIFNrZWxldG9uIGhpZXJhcmNoeSBkZWZpbml0aW9uXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsYnNXZWlnaHQgLSBMaW5lYXIgYmxlbmQgc2tpbm5pbmcgd2VpZ2h0cyBmb3IgZWFjaCB2ZXJ0ZXhcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuU2tpbm5lZE1lc2h9IGF2YXRhck1lc2ggLSBUaGUgRkxBTUUgYXZhdGFyIG1lc2hcclxuICAgICAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgcmVxdWlyZWQgcGFyYW1ldGVycyBhcmUgbWlzc2luZyBvciBpbnZhbGlkXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgaW5pdGlhbGl6ZShmbGFtZVBhcmFtcywgYm9uZVRyZWUsIGxic1dlaWdodCwgYXZhdGFyTWVzaCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIHBhcmFtZXRlcnNcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVJlcXVpcmVkUHJvcGVydGllcyhmbGFtZVBhcmFtcywgWydyb3RhdGlvbicsICdleHByJywgJ25lY2tfcG9zZScsICdqYXdfcG9zZScsICdleWVzX3Bvc2UnXSwgJ2ZsYW1lUGFyYW1zJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdJbnZhbGlkIGZsYW1lUGFyYW1zJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYXZhdGFyTWVzaCB8fCAhYXZhdGFyTWVzaC5nZW9tZXRyeSB8fCAhYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzIHx8ICFhdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ2F2YXRhck1lc2ggbXVzdCBoYXZlIGdlb21ldHJ5IHdpdGggcG9zaXRpb24gYXR0cmlidXRlJyxcclxuICAgICAgICAgICAgICAgICdhdmF0YXJNZXNoJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ludmFsaWQgYXZhdGFyTWVzaCcsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnSW5pdGlhbGl6aW5nIEZsYW1lQW5pbWF0b3InLCB7XHJcbiAgICAgICAgICAgIGZyYW1lQ291bnQ6IGZsYW1lUGFyYW1zLnJvdGF0aW9uPy5sZW5ndGgsXHJcbiAgICAgICAgICAgIHNwbGF0Q291bnQ6IGF2YXRhck1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3VudFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmZsYW1lUGFyYW1zID0gZmxhbWVQYXJhbXM7XHJcbiAgICAgICAgdGhpcy5sYnNXZWlnaHQgPSBsYnNXZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5hdmF0YXJNZXNoID0gYXZhdGFyTWVzaDtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFsIGZyYW1lcyBmcm9tIHJvdGF0aW9uIGRhdGFcclxuICAgICAgICBpZiAoZmxhbWVQYXJhbXMucm90YXRpb24gJiYgQXJyYXkuaXNBcnJheShmbGFtZVBhcmFtcy5yb3RhdGlvbikpIHtcclxuICAgICAgICAgICAgdGhpcy50b3RhbEZyYW1lcyA9IGZsYW1lUGFyYW1zLnJvdGF0aW9uLmxlbmd0aDtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBbmltYXRpb24gaGFzIGZyYW1lcycsIHsgdG90YWxGcmFtZXM6IHRoaXMudG90YWxGcmFtZXMgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ05vIHJvdGF0aW9uIGRhdGEgZm91bmQsIHRvdGFsRnJhbWVzIHNldCB0byAwJyk7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxGcmFtZXMgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5nYXVzc2lhblNwbGF0Q291bnQgPSBhdmF0YXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uY291bnQ7XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIHNrZWxldG9uIGZyb20gYm9uZSB0cmVlXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5idWlsZFNrZWxldG9uKGJvbmVUcmVlKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTa2VsZXRvbiBidWlsdCBzdWNjZXNzZnVsbHknLCB7IGJvbmVDb3VudDogdGhpcy5ib25lcz8ubGVuZ3RoIH0pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGJ1aWxkIHNrZWxldG9uJywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBidWlsZCBza2VsZXRvbjogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAnYm9uZVRyZWUnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZCBza2VsZXRvbiBmcm9tIGJvbmUgdHJlZSBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYm9uZVRyZWUgLSBTa2VsZXRvbiBoaWVyYXJjaHkgZGVmaW5pdGlvblxyXG4gICAgICovXHJcbiAgICBidWlsZFNrZWxldG9uKGJvbmVUcmVlKSB7XHJcbiAgICAgICAgaWYgKCFib25lVHJlZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmJvbmVzID0gW107XHJcbiAgICAgICAgY29uc3QgYm9uZUludmVyc2VzID0gW107XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBib25lcyBmcm9tIHRyZWUgc3RydWN0dXJlXHJcbiAgICAgICAgY29uc3QgY3JlYXRlQm9uZSA9IChib25lRGF0YSwgcGFyZW50Qm9uZSA9IG51bGwpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9uZSA9IG5ldyBCb25lKCk7XHJcbiAgICAgICAgICAgIGJvbmUubmFtZSA9IGJvbmVEYXRhLm5hbWUgfHwgYGJvbmVfJHt0aGlzLmJvbmVzLmxlbmd0aH1gO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBib25lLnBvc2l0aW9uLmZyb21BcnJheShib25lRGF0YS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBib25lLnJvdGF0aW9uLmZyb21BcnJheShib25lRGF0YS5yb3RhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLnNjYWxlKSB7XHJcbiAgICAgICAgICAgICAgICBib25lLnNjYWxlLmZyb21BcnJheShib25lRGF0YS5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRCb25lKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRCb25lLmFkZChib25lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ib25lcy5wdXNoKGJvbmUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGludmVyc2UgYmluZCBtYXRyaXhcclxuICAgICAgICAgICAgY29uc3QgaW52ZXJzZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgICAgIGlmIChib25lRGF0YS5pbnZlcnNlQmluZE1hdHJpeCkge1xyXG4gICAgICAgICAgICAgICAgaW52ZXJzZU1hdHJpeC5mcm9tQXJyYXkoYm9uZURhdGEuaW52ZXJzZUJpbmRNYXRyaXgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9uZS51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGludmVyc2VNYXRyaXguY29weShib25lLm1hdHJpeFdvcmxkKS5pbnZlcnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBib25lSW52ZXJzZXMucHVzaChpbnZlcnNlTWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgY2hpbGRyZW5cclxuICAgICAgICAgICAgaWYgKGJvbmVEYXRhLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBib25lRGF0YS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IGNyZWF0ZUJvbmUoY2hpbGQsIGJvbmUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIElmIGJvbmVUcmVlIGlzIGFycmF5LCBjcmVhdGUgYm9uZXMgZGlyZWN0bHlcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShib25lVHJlZSkpIHtcclxuICAgICAgICAgICAgYm9uZVRyZWUuZm9yRWFjaCgoYm9uZURhdGEsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib25lID0gbmV3IEJvbmUoKTtcclxuICAgICAgICAgICAgICAgIGJvbmUubmFtZSA9IGJvbmVEYXRhLm5hbWUgfHwgYGJvbmVfJHtpbmRleH1gO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9uZURhdGEucG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBib25lLnBvc2l0aW9uLmZyb21BcnJheShib25lRGF0YS5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXMucHVzaChib25lKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW52ZXJzZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9uZURhdGEuaW52ZXJzZUJpbmRNYXRyaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZlcnNlTWF0cml4LmZyb21BcnJheShib25lRGF0YS5pbnZlcnNlQmluZE1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBib25lSW52ZXJzZXMucHVzaChpbnZlcnNlTWF0cml4KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgdXAgaGllcmFyY2h5IChGTEFNRTogcm9vdCAtPiBuZWNrIC0+IGphdywgZXllcylcclxuICAgICAgICAgICAgaWYgKHRoaXMuYm9uZXMubGVuZ3RoID49IDUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXNbMF0uYWRkKHRoaXMuYm9uZXNbMV0pOyAvLyByb290IC0+IG5lY2tcclxuICAgICAgICAgICAgICAgIHRoaXMuYm9uZXNbMV0uYWRkKHRoaXMuYm9uZXNbMl0pOyAvLyBuZWNrIC0+IGphd1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib25lc1sxXS5hZGQodGhpcy5ib25lc1szXSk7IC8vIG5lY2sgLT4gbGVmdEV5ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ib25lc1sxXS5hZGQodGhpcy5ib25lc1s0XSk7IC8vIG5lY2sgLT4gcmlnaHRFeWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoYm9uZVRyZWUucm9vdCkge1xyXG4gICAgICAgICAgICBjcmVhdGVCb25lKGJvbmVUcmVlLnJvb3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNrZWxldG9uXHJcbiAgICAgICAgdGhpcy5za2VsZXRvbiA9IG5ldyBTa2VsZXRvbih0aGlzLmJvbmVzLCBib25lSW52ZXJzZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGJvbmUgcm90YXRpb24gZnJvbSBheGlzLWFuZ2xlIG9yIHF1YXRlcm5pb24gcmVwcmVzZW50YXRpb25cclxuICAgICAqXHJcbiAgICAgKiBDb252ZXJ0cyByb3RhdGlvbiBkYXRhIHRvIHF1YXRlcm5pb24gYW5kIGFwcGxpZXMgaXQgdG8gdGhlIGJvbmUuXHJcbiAgICAgKiBVc2VzIG9iamVjdCBwb29saW5nIHRvIGF2b2lkIGFsbG9jYXRpb25zIGluIGFuaW1hdGlvbiBsb29wLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VEhSRUUuQm9uZX0gYm9uZSAtIFRhcmdldCBib25lIHRvIHJvdGF0ZVxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmdsZXMgLSBSb3RhdGlvbiB2YWx1ZXMgKDMgZm9yIGF4aXMtYW5nbGUsIDQgZm9yIHF1YXRlcm5pb24pXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc1F1YXQ9ZmFsc2VdIC0gV2hldGhlciBhbmdsZXMgYXJlIHF1YXRlcm5pb24gW3gsIHksIHosIHddXHJcbiAgICAgKiBAdGhyb3dzIHtWYWxpZGF0aW9uRXJyb3J9IElmIGJvbmUgb3IgYW5nbGVzIGFyZSBpbnZhbGlkXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc2V0Qm9uZVJvdGF0aW9uKGJvbmUsIGFuZ2xlcywgaXNRdWF0ID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAoIWJvbmUgfHwgIWFuZ2xlcyB8fCAhQXJyYXkuaXNBcnJheShhbmdsZXMpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnYm9uZSBhbmQgYW5nbGVzIGFycmF5IGFyZSByZXF1aXJlZCcsXHJcbiAgICAgICAgICAgICAgICAnYm9uZS9hbmdsZXMnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVc2Ugb2JqZWN0IHBvb2xpbmcgZm9yIHRlbXAgb2JqZWN0c1xyXG4gICAgICAgIGNvbnN0IHF1YXRlcm5pb24gPSBxdWF0ZXJuaW9uUG9vbC5hY3F1aXJlKCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChpc1F1YXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIERpcmVjdCBxdWF0ZXJuaW9uIChYWVpXIGZvcm1hdClcclxuICAgICAgICAgICAgICAgIGlmIChhbmdsZXMubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJ1F1YXRlcm5pb24gcmVxdWlyZXMgNCB2YWx1ZXMnLCAnYW5nbGVzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBxdWF0ZXJuaW9uLnNldChhbmdsZXNbMF0sIGFuZ2xlc1sxXSwgYW5nbGVzWzJdLCBhbmdsZXNbM10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQXhpcy1hbmdsZSByZXByZXNlbnRhdGlvbjogW3gsIHksIHpdIHdoZXJlIG1hZ25pdHVkZSBpcyBhbmdsZVxyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ2xlcy5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignQXhpcy1hbmdsZSByZXF1aXJlcyAzIHZhbHVlcycsICdhbmdsZXMnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBheGlzID0gdmVjdG9yM1Bvb2wuYWNxdWlyZSgpO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBheGlzLnNldChhbmdsZXNbMF0sIGFuZ2xlc1sxXSwgYW5nbGVzWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmdsZUluUmFkaWFucyA9IGF4aXMubGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXhpcy5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUoYXhpcywgYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZWN0b3IzUG9vbC5yZWxlYXNlKGF4aXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBcHBseSByb3RhdGlvbiB0byBib25lXHJcbiAgICAgICAgICAgIGJvbmUucXVhdGVybmlvbi5jb3B5KHF1YXRlcm5pb24pO1xyXG4gICAgICAgICAgICBib25lLnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHF1YXRlcm5pb25Qb29sLnJlbGVhc2UocXVhdGVybmlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIEZMQU1FIGJvbmVzIGZyb20gY3VycmVudCBmcmFtZSBwYXJhbWV0ZXJzXHJcbiAgICAgKlxyXG4gICAgICogQXBwbGllcyBib25lIHJvdGF0aW9ucyBmb3IgYWxsIDUgRkxBTUUgYm9uZXMgKHJvb3QsIG5lY2ssIGphdywgbGVmdCBleWUsIHJpZ2h0IGV5ZSlcclxuICAgICAqIGZyb20gdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lLiBVcGRhdGVzIHNrZWxldG9uIG1hdHJpY2VzIGFuZCByZXR1cm5zIGRhdGFcclxuICAgICAqIG5lZWRlZCBmb3IgbWVzaCBkZWZvcm1hdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBCb25lIGFuZCBibGVuZHNoYXBlIGRhdGEgZm9yIHJlbmRlcmluZ1xyXG4gICAgICogQHJldHVybnMge0FycmF5fSByZXR1cm4uYnNXZWlnaHQgLSBFeHByZXNzaW9uIGJsZW5kc2hhcGUgd2VpZ2h0cyBmb3IgY3VycmVudCBmcmFtZVxyXG4gICAgICogQHJldHVybnMge0Zsb2F0MzJBcnJheX0gcmV0dXJuLmJvbmVzTWF0cml4IC0gVXBkYXRlZCBib25lIHRyYW5zZm9ybWF0aW9uIG1hdHJpY2VzXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSByZXR1cm4uYm9uZXNOdW0gLSBOdW1iZXIgb2YgYm9uZXMgKGFsd2F5cyA1IGZvciBGTEFNRSlcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gcmV0dXJuLmJvbmVzV2VpZ2h0IC0gTEJTIHdlaWdodHMgZm9yIHZlcnRpY2VzXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUZsYW1lQm9uZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmZsYW1lUGFyYW1zIHx8ICF0aGlzLnNrZWxldG9uKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdDYW5ub3QgdXBkYXRlIGJvbmVzOiBmbGFtZVBhcmFtcyBvciBza2VsZXRvbiBub3QgaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZnJhbWUgPSB0aGlzLmZyYW1lO1xyXG5cclxuICAgICAgICAvLyBHZXQgYmxlbmRzaGFwZSB3ZWlnaHRzIGZvciB0aGlzIGZyYW1lXHJcbiAgICAgICAgY29uc3QgYnNXZWlnaHQgPSB0aGlzLmZsYW1lUGFyYW1zWydleHByJ11bZnJhbWVdO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBib25lIHJvdGF0aW9ucyBmb3IgY3VycmVudCBmcmFtZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFJvb3QgYm9uZSByb3RhdGlvbiAoZ2xvYmFsIGhlYWQgb3JpZW50YXRpb24pXHJcbiAgICAgICAgICAgIGNvbnN0IHJvb3RBbmdsZSA9IHRoaXMuZmxhbWVQYXJhbXNbJ3JvdGF0aW9uJ11bZnJhbWVdO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzBdLCByb290QW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gTmVjayByb3RhdGlvblxyXG4gICAgICAgICAgICBjb25zdCBuZWNrQW5nbGUgPSB0aGlzLmZsYW1lUGFyYW1zWyduZWNrX3Bvc2UnXVtmcmFtZV07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Qm9uZVJvdGF0aW9uKHRoaXMuc2tlbGV0b24uYm9uZXNbMV0sIG5lY2tBbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBKYXcgcm90YXRpb25cclxuICAgICAgICAgICAgY29uc3QgamF3QW5nbGUgPSB0aGlzLmZsYW1lUGFyYW1zWydqYXdfcG9zZSddW2ZyYW1lXTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCb25lUm90YXRpb24odGhpcy5za2VsZXRvbi5ib25lc1syXSwgamF3QW5nbGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXllcyByb3RhdGlvbiAoNiB2YWx1ZXM6IGxlZnQgZXllIHh5eiwgcmlnaHQgZXllIHh5eilcclxuICAgICAgICAgICAgY29uc3QgZXllc0FuZ2xlID0gdGhpcy5mbGFtZVBhcmFtc1snZXllc19wb3NlJ11bZnJhbWVdO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzNdLCBleWVzQW5nbGUuc2xpY2UoMCwgMykpOyAgICAgICAgICAvLyBMZWZ0IGV5ZVxyXG4gICAgICAgICAgICB0aGlzLnNldEJvbmVSb3RhdGlvbih0aGlzLnNrZWxldG9uLmJvbmVzWzRdLCBleWVzQW5nbGUuc2xpY2UoMywgNikpOyAgICAgICAgICAvLyBSaWdodCBleWVcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHNldHRpbmcgYm9uZSByb3RhdGlvbnMnLCB7IGZyYW1lLCBlcnJvciB9KTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgc2tlbGV0b24gbWF0cmljZXMgYWZ0ZXIgYWxsIHJvdGF0aW9ucyBhcmUgc2V0XHJcbiAgICAgICAgdGhpcy5za2VsZXRvbi51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IHVwZGF0ZWQgYm9uZSBtYXRyaWNlcyBmb3Igc2hhZGVyXHJcbiAgICAgICAgY29uc3QgbnVtQm9uZXMgPSA1O1xyXG4gICAgICAgIGNvbnN0IGJvbmVzTWF0cml4ID0gRmxhbWVUZXh0dXJlTWFuYWdlci5nZXRVcGRhdGVkQm9uZU1hdHJpY2VzKHRoaXMuc2tlbGV0b24sIG51bUJvbmVzKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYnNXZWlnaHQsXHJcbiAgICAgICAgICAgIGJvbmVzTWF0cml4LFxyXG4gICAgICAgICAgICBib25lc051bTogbnVtQm9uZXMsXHJcbiAgICAgICAgICAgIGJvbmVzV2VpZ2h0OiB0aGlzLmxic1dlaWdodFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSdW4gbW9ycGggdXBkYXRlIC0gbWFpbiBhbmltYXRpb24gbG9vcCBmdW5jdGlvblxyXG4gICAgICogQHBhcmFtIHtTcGxhdE1lc2h9IHNwbGF0TWVzaCAtIFRoZSBnYXVzc2lhbiBzcGxhdCBtZXNoIHRvIHVwZGF0ZVxyXG4gICAgICovXHJcbiAgICBydW5Nb3JwaFVwZGF0ZShzcGxhdE1lc2gpIHtcclxuICAgICAgICBjb25zdCBtb3JwaGVkTWVzaCA9IG5ldyBGbG9hdDMyQXJyYXkoXHJcbiAgICAgICAgICAgIHRoaXMuYXZhdGFyTWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc3BsYXRNZXNoLmdhdXNzaWFuU3BsYXRDb3VudCA9IHRoaXMuZ2F1c3NpYW5TcGxhdENvdW50O1xyXG4gICAgICAgIHNwbGF0TWVzaC5ib25lc051bSA9IDU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnVzZUZsYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLnVwZGF0ZUZsYW1lQm9uZXMoKTtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJzV2VpZ2h0ID0gdXBkYXRlRGF0YS5ic1dlaWdodDtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJvbmVzTWF0cml4ID0gdXBkYXRlRGF0YS5ib25lc01hdHJpeDtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJvbmVzTnVtID0gdXBkYXRlRGF0YS5ib25lc051bTtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLmJvbmVzV2VpZ2h0ID0gdXBkYXRlRGF0YS5ib25lc1dlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNwbGF0TWVzaC5tb3JwaGVkTWVzaCA9IG1vcnBoZWRNZXNoO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGV4dHVyZXNcclxuICAgICAgICBjb25zdCBzcGxhdE51bSA9IHNwbGF0TWVzaC5tb3JwaGVkTWVzaC5sZW5ndGggLyAzO1xyXG4gICAgICAgIGlmIChzcGxhdE1lc2guc3BsYXREYXRhVGV4dHVyZXMgJiYgc3BsYXRNZXNoLnNwbGF0RGF0YVRleHR1cmVzWydmbGFtZU1vZGVsJ10pIHtcclxuICAgICAgICAgICAgc3BsYXRNZXNoLnVwZGF0ZVRleHR1cmVBZnRlckJTQW5kU2tlbGV0b24oMCwgc3BsYXROdW0gLSAxLCB0aGlzLnVzZUZsYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgY3VycmVudCBhbmltYXRpb24gZnJhbWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZnJhbWUgLSBGcmFtZSBudW1iZXIgdG8gc2V0ICh3aWxsIHdyYXAgaWYgZXhjZWVkcyB0b3RhbEZyYW1lcylcclxuICAgICAqIEB0aHJvd3Mge1ZhbGlkYXRpb25FcnJvcn0gSWYgZnJhbWUgaXMgbm90IGEgdmFsaWQgbnVtYmVyXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgc2V0RnJhbWUoZnJhbWUpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGZyYW1lICE9PSAnbnVtYmVyJyB8fCBpc05hTihmcmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignZnJhbWUgbXVzdCBiZSBhIHZhbGlkIG51bWJlcicsICdmcmFtZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudG90YWxGcmFtZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAoKGZyYW1lICUgdGhpcy50b3RhbEZyYW1lcykgKyB0aGlzLnRvdGFsRnJhbWVzKSAlIHRoaXMudG90YWxGcmFtZXM7IC8vIEhhbmRsZSBuZWdhdGl2ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkdmFuY2UgdG8gbmV4dCBmcmFtZSBpbiBhbmltYXRpb24gc2VxdWVuY2VcclxuICAgICAqXHJcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHdyYXBzIHRvIGZyYW1lIDAgYWZ0ZXIgcmVhY2hpbmcgdG90YWxGcmFtZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIG5leHRGcmFtZSgpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50b3RhbEZyYW1lcyA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5mcmFtZSA9ICh0aGlzLmZyYW1lICsgMSkgJSB0aGlzLnRvdGFsRnJhbWVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBza2VsZXRvbiBmb3IgZXh0ZXJuYWwgdXNlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1RIUkVFLlNrZWxldG9ufG51bGx9IFRoZSBGTEFNRSBza2VsZXRvbiBvciBudWxsIGlmIG5vdCBpbml0aWFsaXplZFxyXG4gICAgICovXHJcbiAgICBnZXRTa2VsZXRvbigpIHtcclxuICAgICAgICB0aGlzLl9hc3NlcnROb3REaXNwb3NlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNrZWxldG9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgZnJhbWUgbnVtYmVyXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gQ3VycmVudCBhbmltYXRpb24gZnJhbWUgaW5kZXhcclxuICAgICAqL1xyXG4gICAgZ2V0RnJhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5fYXNzZXJ0Tm90RGlzcG9zZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0b3RhbCBmcmFtZSBjb3VudFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRvdGFsIG51bWJlciBvZiBhbmltYXRpb24gZnJhbWVzXHJcbiAgICAgKi9cclxuICAgIGdldFRvdGFsRnJhbWVzKCkge1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydE5vdERpc3Bvc2VkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxGcmFtZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlIGFuaW1hdG9yIGFuZCBmcmVlIHJlc291cmNlc1xyXG4gICAgICpcclxuICAgICAqIFByb3Blcmx5IGNsZWFucyB1cDpcclxuICAgICAqIC0gU2tlbGV0b24gYW5kIGJvbmVzXHJcbiAgICAgKiAtIFJlZmVyZW5jZXMgdG8gbWVzaGVzIGFuZCBwYXJhbWV0ZXJzXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Rpc3Bvc2VkKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGbGFtZUFuaW1hdG9yLmRpc3Bvc2UoKSBjYWxsZWQgb24gYWxyZWFkeSBkaXNwb3NlZCBpbnN0YW5jZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsb2dnZXIuaW5mbygnRGlzcG9zaW5nIEZsYW1lQW5pbWF0b3InKTtcclxuXHJcbiAgICAgICAgLy8gRGlzcG9zZSBza2VsZXRvbiAoYm9uZXMgYXJlIHBhcnQgb2Ygc2tlbGV0b24pXHJcbiAgICAgICAgaWYgKHRoaXMuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgdGhpcy5za2VsZXRvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2tlbGV0b24gPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTnVsbGlmeSBhbGwgcmVmZXJlbmNlcyB0byBhaWQgR0NcclxuICAgICAgICB0aGlzLmJvbmVzID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZsYW1lUGFyYW1zID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxic1dlaWdodCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hdmF0YXJNZXNoID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gUmVzZXQgc3RhdGVcclxuICAgICAgICB0aGlzLmZyYW1lID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsRnJhbWVzID0gMDtcclxuICAgICAgICB0aGlzLmdhdXNzaWFuU3BsYXRDb3VudCA9IDA7XHJcblxyXG4gICAgICAgIC8vIE1hcmsgYXMgZGlzcG9zZWRcclxuICAgICAgICB0aGlzLl9kaXNwb3NlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnRmxhbWVBbmltYXRvciBkaXNwb3NlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmxhbWVBbmltYXRvcjtcclxuIl0sIm5hbWVzIjpbIkNvbnN0YW50cyIsIkNPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9TUExBVCIsIkNFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1NQTEFUIiwiQ09WQVJJQU5DRVNfRUxFTUVOVFNfUEVSX1RFWEVMX1NUT1JFRCIsIkNPVkFSSUFOQ0VTX0VMRU1FTlRTX1BFUl9URVhFTF9BTExPQ0FURUQiLCJDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9TVE9SRUQiLCJDT1ZBUklBTkNFU19FTEVNRU5UU19QRVJfVEVYRUxfQ09NUFJFU1NFRF9BTExPQ0FURUQiLCJTQ0FMRVNfUk9UQVRJT05TX0VMRU1FTlRTX1BFUl9URVhFTCIsIkNFTlRFUl9DT0xPUlNfRUxFTUVOVFNfUEVSX1RFWEVMIiwiU0NFTkVfSU5ERVhFU19FTEVNRU5UU19QRVJfVEVYRUwiLCJTQ0VORV9GQURFSU5fUkFURV9GQVNUIiwiU0NFTkVfRkFERUlOX1JBVEVfR1JBRFVBTCIsImxvZ2dlciIsInRvSGFsZkZsb2F0IiwiZnJvbUhhbGZGbG9hdCIsInRvVW5jb21wcmVzc2VkRmxvYXQiLCJmcm9tVWludDgiLCJ0b1VpbnQ4IiwiZnJvbUhhbGZGbG9hdFRvVWludDgiLCJkYXRhVmlld0Zsb2F0Rm9yQ29tcHJlc3Npb25MZXZlbCIsImNvcHlCZXR3ZWVuQnVmZmVycyIsInVpbnRFbmNvZGVkRmxvYXQiLCJCQVNFX0NPTVBPTkVOVF9DT1VOVCIsIlBhcnNlRXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNZLE1BQUMsUUFBUSxHQUFHO0FBQ3hCLElBQUksSUFBSSxFQUFFLENBQUM7QUFDWCxJQUFJLEtBQUssRUFBRSxDQUFDO0FBQ1osSUFBSSxPQUFPLEVBQUUsQ0FBQztBQUNkLElBQUksSUFBSSxFQUFFLENBQUM7QUFDWCxJQUFJLEtBQUssRUFBRSxDQUFDO0FBQ1o7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ1ksTUFBQyxVQUFVLEdBQUc7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLENBQUMsQ0FBQztBQUNkO0FBQ0EsUUFBUSxJQUFJLHFCQUFxQixFQUFFO0FBQ25DLFlB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R0FBRyxJQUFJLFlBQVksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcscUJBQXFCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzVHLFFBQVEsSUFBSSx3QkFBd0IsR0FBRyxJQUFJLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcscUJBQXFCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzlHLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUMzQyxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RSxZQUFZLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RTtBQUNBLFlBQVksd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBR0Esa0JBQWdCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENB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Q1osUUFBUSxDQUFDLEVBQUUsQ0FBQztBQUNaLFFBQVEsTUFBTSxFQUFFLENBQUM7QUFDakIsUUFBUSxNQUFNLEVBQUUsQ0FBQztBQUNqQixRQUFRLE1BQU0sRUFBRSxDQUFDO0FBQ2pCLFFBQVEsU0FBUyxFQUFFLENBQUM7QUFDcEIsUUFBUSxTQUFTLEVBQUUsQ0FBQztBQUNwQixRQUFRLFNBQVMsRUFBRSxDQUFDO0FBQ3BCLFFBQVEsU0FBUyxFQUFFLENBQUM7QUFDcEIsUUFBUSxJQUFJLEVBQUUsRUFBRTtBQUNoQixRQUFRLElBQUksRUFBRSxFQUFFO0FBQ2hCLFFBQVEsSUFBSSxFQUFFLEVBQUU7QUFDaEIsUUFBUSxPQUFPLEVBQUUsRUFBRTtBQUNuQixRQUFRLElBQUksRUFBRSxFQUFFO0FBQ2hCLFFBQVEsSUFBSSxFQUFFLEVBQUU7QUFDaEIsUUFBUSxJQUFJLEVBQUUsRUFBRTtBQUNoQixRQUFRLElBQUksRUFBRSxFQUFFO0FBQ2hCLFFBQVEsSUFBSSxFQUFFLEVBQUU7QUFDaEIsUUFBUSxJQUFJLEVBQUUsRUFBRTtBQUNoQixRQUFRLElBQUksRUFBRSxFQUFFO0FBQ2hCLFFBQVEsSUFBSSxFQUFFLEVBQUU7QUFDaEIsUUFBUSxJQUFJLEVBQUUsRUFBRTtBQUNoQixRQUFRLElBQUksRUFBRSxFQUFFO0FBQ2hCLFFBQVEsS0FBSyxFQUFFLEVBQUU7QUFDakIsUUFBUSxLQUFLLEVBQUUsRUFBRTtBQUNqQixRQUFRLEtBQUssRUFBRSxFQUFFO0FBQ2pCLFFBQVEsS0FBSyxFQUFFLEVBQUU7QUFDakIsUUFBUSxLQUFLLEVBQUUsRUFBRTtBQUNqQixRQUFRLEtBQUssRUFBRSxFQUFFO0FBQ2pCLFFBQVEsS0FBSyxFQUFFLEVBQUU7QUFDakIsUUFBUSxLQUFLLEVBQUUsRUFBRTtBQUNqQixRQUFRLEtBQUssRUFBRSxFQUFFO0FBQ2pCLFFBQVEsS0FBSyxFQUFFLEVBQUU7QUFDakIsUUFBUSxLQUFLLEVBQUUsRUFBRTtBQUNqQixRQUFRLEtBQUssRUFBRSxFQUFFO0FBQ2pCLFFBQVEsS0FBSyxFQUFF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QVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxPQUFPLFFBQVEsR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsS0FBSztBQUN2RCxRQUFRLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzNDLFFBQVEsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDM0MsUUFBUSxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUMzQyxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxPQUFPLElBQUksR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFFLFFBQVEsS0FBSztBQUNsRSxRQUFRLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNwRCxRQUFRLE1BQU0sRUFBRSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxRQUFRLE1BQU0sRUFBRSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxRQUFRLE1BQU0sRUFBRSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxRQUFRLE1BQU0sRUFBRSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxRQUFRLE1BQU0sRUFBRSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQyxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDM0UsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUMzRSxRQUFRLFdBQVcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDM0UsUUFBUSxXQUFXLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzNFLElBQUksQ0FBQyxDQUFDO0FBQ047QUFDQSxJQUFJLE9BQU8seUJBQXlCLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksS0FBSztBQUNqRyxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3JELFFBQVEsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDckQsUUFBUSxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNyRCxJQUFJLENBQUMsQ0FBQztBQUNOO0FBQ0EsSUFBSSxPQUFPLHlCQUF5QixHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUs7QUFDcEYsd0NBQXdDLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksS0FBSztBQUM1RztBQUNBLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDL0MsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUMvQyxRQUFRLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQy9DLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDL0MsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUNoRDtBQUNBLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNILFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9ELFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0Q7QUFDQSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0Q7QUFDQSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTO0FBQ3ZGLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9HLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlHLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEcsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUcsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUztBQUN2RixvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRyxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0Q7QUFDQSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNFLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDL0Q7QUFDQSxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzSCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRCxRQUFRLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0UsUUFBUSxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0QsUUFBUSxLQUFL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O0FBQzdELFFBQVEscUJBQXFCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsUUFBUSxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RCxRQUFRLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzdEO0FBQ0EsUUFBUSx3QkFBd0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xGLFFBQVEsd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRixRQUFRLHdCQUF3QixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEYsUUFBUSx3QkFBd0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xGLFFBQVEsd0JBQXdCLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRixJQUFJLENBQUM7QUFDTDtBQUNB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QUMsS0FBSyxDQUFDO0FBQ2pDO0FBQ0E7QUFDQSxRQUFRLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekQ7QUFDQTtBQUNBLFFBQVEsSUFBSTtBQUNaO0FBQ0EsWUFBWSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xFLFlBQVksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNwRTtBQUNBO0FBQ0EsWUFBWSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25FLFlBQVksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNwRTtBQUNBO0FBQ0EsWUFBWSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2pFLFlBQVksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNuRTtBQUNBO0FBQ0EsWUFBWSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ25FLFlBQVksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hGLFlBQVksSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENB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
